{
    "From": " Cisco IOS Configuration Fundamentals Command Reference",
    "PageTitle": "trace (privileged)",
    "FuncDef": [
        "To discover the routes that packets will actually take when traveling to their destination, use the **trace** command in privileged EXEC mode. "
    ],
    "CLIs": [
        "trace [ <protocol> ] [ <destination> ]"
    ],
    "ParentView": [
        null
    ],
    "ParaDef": [
        {
            "Parameters": " *protocol* ",
            "Info": " (Optional) Protocols that can be used are **appletalk**, **clns**, **ip** and **vines**. "
        },
        {
            "Parameters": " *destination* ",
            "Info": " (Optional) Destination address or host name on the command line. The default parameters for the appropriate protocol are assumed and the tracing action begins. "
        }
    ],
    "Examples": [],
    "ExtraInfo": "The **trace**command works by taking advantage of the error messages generated by routers when a datagram exceeds its time-to-live (TTL) value.The **trace**command starts by sending probe datagrams with a TTL value of one. This causes the first router to discard the probe datagram and send back an error message. The **trace**command sends several probes at each TTL level and displays the round-trip time for each.The **trace**command sends out one probe at a time. Each outgoing packet may result in one or two error messages. A \"time exceeded\" error message indicates that an intermediate router has seen and discarded the probe. A \"destination unreachable\" error message indicates that the destination node has received the probe and discarded it because it could not deliver the packet. If the timer goes off before a response comes in, the **trace** command prints an asterisk (\\*).The **trace** command terminates when the destination responds, when the maximum TTL is exceeded, or when the user interrupts the trace with the escape sequence. By default, to invoke the escape sequence, type **Ctrl-^ X** by simultaneously pressing and releasing the **Ctrl**, **Shift**, and **6** keys, and then pressing the **X** key.To use nondefault parameters and invoke an extended **trace** test, enter the command without a *destination* argument. You will be stepped through a dialog to select the desired parameters.Common Trace ProblemsDue to bugs in the IP implementation of various hosts and routers, the IP **trace** command may behave in unexpected ways.Not all destinations will respond correctly to a probe message by sending back an \"ICMP port unreachable\" message. A long sequence of TTL levels with only asterisks, terminating only when the maximum TTL has been reached, may indicate this problem.There is a known problem with the way some hosts handle an \"ICMP TTL exceeded\" message. Some hosts generate an \"ICMP\" message but they reuse the TTL of the incoming packet. Because this is zero, the ICMP packets do not make it back. When you trace the path to such a host, you may see a set of TTL values with asterisks (\\*). Eventually the TTL gets high enough that the *ICMP* message can get back. For example, if the host is six hops away, the**trace** command will time out on responses 6 through 11.Trace IP RoutesThe following display shows sample IP **trace** output when a destination host name has been specified:```Router# trace ABA.NYC.mil ``````Type escape sequence to abort.``````Tracing the route to ABA.NYC.mil (26.0.0.73)``````  \t1 DEBRIS.CISCO.COM (192.180.1.6) 1000 msec 8 msec 4 msec``````  \t2 BARRNET-GW.CISCO.COM (192.180.16.2) 8 msec 8 msec 8 msec``````  \t3 EXTERNAL-A-GATEWAY.STANFORD.EDU (192.42.110.225) 8 msec 4 msec 4 msec``````  \t4 BB2.SU.BARRNET.NET (192.200.254.6) 8 msec 8 msec 8 msec``````  \t5 SU.ARC.BARRNET.NET (192.200.3.8) 12 msec 12 msec 8 msec``````  \t6 MOFFETT-FLD-MB.in.MIL (192.52.195.1) 216 msec 120 msec 132 msec``````  \t7 ABA.NYC.mil (26.0.0.73) 412 msec 628 msec 664 msec``````  ```[Table 168](#wp1017821) describes the significant fields shown in the display.Table 168 trace Field Descriptions| Field | Description || --- | --- || 1 | Indicates the sequence number of the router in the path to the host. || DEBRIS.CISCO.COM | Host name of this router. || 192.180.1.6 | Internet address of this router. || 1000 msec 8 msec 4 msec | Round-trip time for each of the three probes that are sent. |  Extended IP Trace DialogThe following display shows a sample **trace** session involving the extended dialog of the **trace** command:```Router# trace``````  ``````Protocol [ip]:``````Target IP address: mit.edu``````Source address:``````Numeric display [n]:``````Timeout in seconds [3]:``````Probe count [3]:``````Minimum Time to Live [1]:``````Maximum Time to Live [30]:``````Port Number [33434]:``````Loose, Strict, Record, Timestamp, Verbose[none]:``````Type escape sequence to abort.``````Tracing the route to MIT.EDU (18.72.2.1)``````  1 ICM-DC-2-V1.ICP.NET (192.108.209.17) 72 msec 72 msec 88 msec``````  2 ICM-FIX-E-H0-T3.ICP.NET (192.157.65.122) 80 msec 128 msec 80 msec``````  3 192.203.229.246 540 msec 88 msec 84 msec``````  4 T3-2.WASHINGTON-DC-CNSS58.T3.ANS.NET (140.222.58.3) 84 msec 116 msec 88 msec``````  5 T3-3.WASHINGTON-DC-CNSS56.T3.ANS.NET (140.222.56.4) 80 msec 132 msec 88 msec``````  6 T3-0.NEW-YORK-CNSS32.T3.ANS.NET (140.222.32.1) 92 msec 132 msec 88 msec``````  7 T3-0.HARTFORD-CNSS48.T3.ANS.NET (140.222.48.1) 88 msec 88 msec 88 msec``````  8 T3-0.HARTFORD-CNSS49.T3.ANS.NET (140.222.49.1) 96 msec 104 msec 96 msec``````  9 T3-0.ENSS134.T3.ANS.NET (140.222.134.1) 92 msec 128 msec 92 msec`````` 10 W91-CISCO-EXTERNAL-FDDI.MIT.EDU (192.233.33.1) 92 msec 92 msec 112 msec`````` 11 E40-RTR-FDDI.MIT.EDU (18.168.0.2) 92 msec 120 msec 96 msec`````` 12 MIT.EDU (18.72.2.1) 96 msec 92 msec 96 msec  \t``````  ```[Table 169](#wp1017884) describes the fields that are unique to the extended trace sequence, as shown in the display.Table 169 trace Field Descriptions| Field | Description || --- | --- || Target IP address | You must enter a host name or an IP address. There is no default. || Source address | One of the interface addresses of the router to use as a source address for the probes. The router will normally pick what it feels is the best source address to use. || Numeric display | The default is to have both a symbolic and numeric display; however, you can suppress the symbolic display. || Timeout in seconds | The number of seconds to wait for a response to a probe packet. The default is 3 seconds. || Probe count | The number of probes to be sent at each TTL level. The default count is 3. || Minimum Time to Live [1] | The TTL value for the first probes. The default is 1, but it can be set to a higher value to suppress the display of known hops. || Maximum Time to Live [30] | The largest TTL value that can be used. The default is 30. The **trace** command terminates when the destination is reached or when this value is reached. || Port Number | The destination port used by the User Datagram Protocol (UDP) probe messages. The default is 33434. || Loose, Strict, Record, Timestamp, Verbose | IP header options. You can specify any combination. The **trace** command issues prompts for the required fields. Note that the **trace** command will place the requested options in each probe; however, there is no guarantee that all routers (or end nodes) will process the options. || Loose | Allows you to specify a list of nodes that must be traversed when going to the destination. || Strict | Allows you to specify a list of nodes that must be the only nodes traversed when going to the destination. || Record | Allows you to specify the number of hops to leave room for. || Timestamp | Allows you to specify the number of time stamps to leave room for. || Verbose | If you select any option, the verbose mode is automatically selected and the **trace** command prints the contents of the option field in any incoming packets. You can prevent verbose mode by selecting it again, toggling its current setting. |  [Table 170](#wp1017958) describes the characters that can appear in **trace** command output.Table 170 ip trace Text Characters| Char | Description || --- | --- || *nn* msec | For each node, the round-trip time (in milliseconds) for the specified number of probes. || \\* | The probe timed out. || ? | Unknown packet type. || A | Administratively unreachable. Usually, this output indicates that an access list is blocking traffic. || H | Host unreachable. || N | Network unreachable. || P | Protocol unreachable. || Q | Source quench. || U | Port unreachable. |  ### Related Commands| **Command** | **Description** || --- | --- || **trace (user)** | Discovers the CLNS routes that packets will actually take when traveling to their destination. |  ### ",
    "RelatedCmds": [
        {
            "cmd": " **trace (user)** ",
            "description": " Discovers the CLNS routes that packets will actually take when traveling to their destination. "
        }
    ]
}