{
    "From": " Cisco IOS Configuration Fundamentals Command Reference",
    "PageTitle": "trace (user)",
    "FuncDef": [
        "To discover the IP routes that packets will actually take when traveling to their destination, use the **trace** command in EXEC mode. "
    ],
    "CLIs": [
        "trace [ <protocol> ] [ <destination> ]"
    ],
    "ParentView": [
        null
    ],
    "ParaDef": [
        {
            "Parameters": " *protocol* ",
            "Info": " (Optional) Protocols that can be used are **appletalk**, **clns**, **ip** and **vines**. "
        },
        {
            "Parameters": " *destination* ",
            "Info": " (Optional) Destination address or host name on the command line. The default parameters for the appropriate protocol are assumed and the tracing action begins. "
        }
    ],
    "Examples": [],
    "ExtraInfo": "The **trace**command works by taking advantage of the error messages generated by routers when a datagram exceeds its time-to-live (TTL) value.The **trace**command starts by sending probe datagrams with a TTL value of one. This causes the first router to discard the probe datagram and send back an error message. The **trace**command sends several probes at each TTL level and displays the round-trip time for each.The **trace**command sends out one probe at a time. Each outgoing packet may result in one or two error messages. A \"time exceeded\" error message indicates that an intermediate router has seen and discarded the probe. A \"destination unreachable\" error message indicates that the destination node has received the probe and discarded it because it could not deliver the packet. If the timer goes off before a response comes in, **trace**prints an asterisk (\\*).The **trace** command terminates when the destination responds, when the maximum TTL is exceeded, or when the user interrupts the trace with the escape sequence. By default, to invoke the escape sequence, type **Ctrl-^ X** by simultaneously pressing and releasing the **Ctrl**, **Shift**, and **6** keys, and then pressing the **X** key.Common Trace ProblemsDue to bugs in the IP implementation of various hosts and routers, the IP **trace** command may behave in unexpected ways.Not all destinations will respond correctly to a probe message by sending back an \"ICMP port unreachable\" message. A long sequence of TTL levels with only asterisks, terminating only when the maximum TTL has been reached, may indicate this problem.There is a known problem with the way some hosts handle an \"ICMP TTL exceeded\" message. Some hosts generate an *ICMP* message but they reuse the TTL of the incoming packet. Since this is zero, the ICMP packets do not make it back. When you trace the path to such a host, you may see a set of TTL values with asterisks (\\*). Eventually the TTL gets high enough that the \"ICMP\" message can get back. For example, if the host is six hops away,**trace** will time out on responses 6 through 11.Trace IP RoutesThe following display shows sample IP **trace** output when a destination host name has been specified:```Router# trace ip ABA.NYC.mil``````  ``````Type escape sequence to abort.``````Tracing the route to ABA.NYC.mil (26.0.0.73)``````  1 DEBRIS.CISCO.COM (192.180.1.6) 1000 msec 8 msec 4 msec``````  2 BARRNET-GW.CISCO.COM (192.180.16.2) 8 msec 8 msec 8 msec``````  3 EXTERNAL-A-GATEWAY.STANFORD.EDU (192.42.110.225) 8 msec 4 msec 4 msec``````  4 BB2.SU.BARRNET.NET (192.200.254.6) 8 msec 8 msec 8 msec``````  5 SU.ARC.BARRNET.NET (192.200.3.8) 12 msec 12 msec 8 msec``````  6 MOFFETT-FLD-MB.in.MIL (192.52.195.1) 216 msec 120 msec 132 msec``````  7 ABA.NYC.mil (26.0.0.73) 412 msec 628 msec 664 msec``````  ```[Table 171](#wp1017244) describes the significant fields shown in the display.Table 171 trace Field Descriptions| Field | Description || --- | --- || 1 | Indicates the sequence number of the router in the path to the host. || DEBRIS.CISCO.COM | Host name of this router. || 192.180.1.61 | Internet address of this router. || 1000 msec 8 msec 4 msec | Round-trip time for each of the three probes that are sent. |  [Table 172](#wp1017278) describes the characters that can appear in **trace** output.Table 172 ip trace Text Characters| Char | Description || --- | --- || *nn* msec | For each node, the round-trip time (in milliseconds) for the specified number of probes. || \\* | The probe timed out. || ? | Unknown packet type. || A | Administratively unreachable. Usually, this output indicates that an access list is blocking traffic. || H | Host unreachable. || N | Network unreachable. || P | Protocol unreachable. || Q | Source quench. || U | Port unreachable. |  ### Related Commands| **Command** | **Description** || --- | --- || **trace (privileged)** | Probes the routes that packets follow when traveling to their destination from the router. |  ### ",
    "RelatedCmds": [
        {
            "cmd": " **trace (privileged)** ",
            "description": " Probes the routes that packets follow when traveling to their destination from the router. "
        }
    ]
}