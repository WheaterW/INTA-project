{
    "From": " Cisco IOS Configuration Fundamentals Command Reference",
    "PageTitle": "monitor session type",
    "FuncDef": [
        "To configure a local Switched Port Analyzer (SPAN), RSPAN, or ERSPAN, use the **monitor session type** command in global configuration mode. To remove one or more source or destination interfaces from the SPAN session, use the **no** form of this command. "
    ],
    "CLIs": [
        "monitor session <span-session-number> type { erspan-destination | erspan-source | local | local-tx | rspan-destination | rspan-source }",
        "no monitor session <span-session-number> type { erspan-destination | erspan-source | local | local-tx | rspan-destination | rspan-source }"
    ],
    "ParentView": [
        null
    ],
    "ParaDef": [
        {
            "Parameters": " *span-session-number* ",
            "Info": " Number of the local SPAN or ERSPAN session; valid values are from 1 to 66. "
        },
        {
            "Parameters": " **erspan-destination** ",
            "Info": " Specifies the ERSPAN destination-session configuration mode. "
        },
        {
            "Parameters": " **erspan-source** ",
            "Info": " Specifies the ERSPAN source-session configuration mode. "
        },
        {
            "Parameters": " **local** ",
            "Info": " Specifies the local SPAN session configuration mode. "
        },
        {
            "Parameters": " **local-tx** ",
            "Info": " Specifies the local egress-only SPAN session configuration mode. "
        },
        {
            "Parameters": " **rspan-destination** ",
            "Info": " Specifies the RSPAN destination-session configuration mode. "
        },
        {
            "Parameters": " **rspan-source** ",
            "Info": " Specifies the RSPAN source-session configuration mode. "
        }
    ],
    "Examples": [
        [
            "```",
            "Router(config)# monitor session 55 type erspan-source",
            "```",
            "```",
            "Router(config-mon-erspan-src)#",
            "```",
            "```",
            "```"
        ],
        [
            "```",
            "Router(config)# monitor session 55 type erspan-destination",
            "```",
            "```",
            "Router(config-mon-erspan-dst)#",
            "```",
            "```",
            "```"
        ],
        [
            "```",
            "Router(config-mon-erspan-dst) destination interface fastethernet 1/2 , 2/3",
            "```",
            "```",
            "```"
        ],
        [
            "```",
            "Router(config-mon-erspan-dst)# source",
            "```",
            "```",
            "Router(config-mon-erspan-dst-src)#",
            "```",
            "```",
            "```"
        ],
        [
            "```",
            "Router(config-mon-erspan-dst)# source",
            "```",
            "```",
            "Router(config-mon-erspan-dst-src)#",
            "```",
            "```",
            "```"
        ],
        [
            "```",
            "Router(config-mon-erspan-src)# source interface fastethernet 5/15 , 7/3 rx",
            "```",
            "```",
            "Router(config-mon-erspan-src)# source interface gigabitethernet 1/2 tx",
            "```",
            "```",
            "Router(config-mon-erspan-src)# source interface port-channel 102",
            "```",
            "```",
            "Router(config-mon-erspan-src)# source filter vlan 2 - 3",
            "```",
            "```",
            "Router(config-mon-erspan-src)#",
            "```",
            "```",
            "```"
        ],
        [
            "```",
            "Router(config-mon-erspan-src)# destination",
            "```",
            "```",
            "Router(config-mon-erspan-src-dst)#",
            "```",
            "```",
            "```"
        ],
        [
            "```",
            "Router(config-mon-erspan-src-dst)# erspan-id 1005",
            "```",
            "```",
            "Router(config-mon-erspan-src-dst)#",
            "```",
            "```",
            "```"
        ],
        [
            "```",
            "Router(config)# monitor session 1 type local",
            "```",
            "```",
            "Router(config-mon-local)# source interface gigabitethernet 1/1 rx",
            "```",
            "```",
            "Router(config-mon-local)# destination interface gigabitethernet 1/2",
            "```",
            "```",
            "```"
        ],
        [
            "```",
            "Router(config)# monitor session 1 type local-tx",
            "```",
            "```",
            "Router(config-mon-local)# source interface gigabitethernet 5/1 rx",
            "```",
            "```",
            "Router(config-mon-local)# destination interface gigabitethernet 5/2",
            "```",
            "```",
            "```"
        ],
        [
            "```",
            "Router(config)# no monitor session 1 type local-tx",
            "```"
        ]
    ],
    "ExtraInfo": "Release 12.2(18)SXE and later releases support ERSPAN with the Supervisor Engine 720, hardware revision 3.2 or higher. Enter the **show module version | include WS-SUP720-BASE** command to display the hardware revision.ERSPAN traffic is GRE-encapsulated SPAN traffic that can only be processed by an ERSPAN destination session.This command is not supported on Catalyst 6500 series switches that are configured with a Supervisor Engine 2.All ERSPAN source sessions on a switch must use the same source IP address. You enter the **origin ip address** command to configure the IP address for the ERSPAN source sessions.All ERSPAN destination sessions on a switch must use the same IP address. You enter the **ip address** command to configure the IP address for the ERSPAN destination sessions. If the ERSPAN destination IP address is not a Supervisor Engine 720 (for example, it is a network sniffer), the traffic arrives with the GRE and RSPAN headers/encapsulation intact.The ERSPAN source session destination IP address, which must be configured on an interface on the destination switch, is the source of traffic that an ERSPAN destination session sends to the destination ports. You configure the same address in both the source and destination sessions with the **ip address** command.The ERSPAN ID differentiates the ERSPAN traffic arriving at the same destination IP address from different ERSPAN source sessions.The local ERSPAN session limits are as follows:•![](/c/dam/en/us/td/i/templates/blank.gif)Total sessions—66•![](/c/dam/en/us/td/i/templates/blank.gif)Source sessions—2 (ingress or egress or both)•![](/c/dam/en/us/td/i/templates/blank.gif)Destination sessions—23The **monitor session type** command creates a new ERSPAN session or allows you to enter the ERSPAN session configuration mode. ERSPAN uses separate source and destination sessions. You configure the source and destination sessions on different switches. The ERSPAN session configuration mode prompts are as follows:•![](/c/dam/en/us/td/i/templates/blank.gif)Router(config-mon-erspan-src)—Indicates the ERSPAN source session configuration mode.•![](/c/dam/en/us/td/i/templates/blank.gif)Router(config-mon-erspan-src-dst)—Indicates the ERSPAN source session destination configuration mode.•![](/c/dam/en/us/td/i/templates/blank.gif)Router(config-mon-erspan-dst)—Indicates the ERSPAN destination session configuration mode.•![](/c/dam/en/us/td/i/templates/blank.gif)Router(config-mon-erspan-dst-src)—Indicates the ERSPAN destination session source configuration mode[Table 35](#wp1040552) lists the ERSPAN destination session configuration mode syntaxes.Table 35 ERSPAN Destination Session Configuration Mode Syntaxes| Syntax | Description || --- | --- || Global Configuration Mode | || **monitor session** *erspan-destination-session-number* | *rspan-destination-session-number* type erspan-destination | **erspan-destination** | Enters ERSPAN or RSPAN destination session configuration mode and changes the prompt to the following:  Router(config-mon-erspan-dst)#  Router(config-mon-rspan-dst)# || Destination Session Configuration Mode | || **description** *session-description* | (Optional) Describes the ERSPAN or RSPAN destination session. || **shutdown** | (Optional) (Default) Inactivates the ERSPAN destination session. || **no shutdown** | Activates the ERSPAN destination session. || **destination** {*single-interface* | *interface-list* | *interface-range* | *mixed-interface-list*} | Associates the ERSPAN destination session number with the destination ports. || **source** | Enters ERSPAN destination session source configuration mode and changes the prompt to the following:  Router(config-mon-erspan-dst-src)# || Destination Session Source Configuration Mode | || **ip address** *ip-address* [**force**] | Configures the ERSPAN flow destination IP address, which must also be configured on an interface on the destination switch and be entered in the ERSPAN destination session configuration. || **erspan-id** *erspan-flow-id* | Configures the ID number used by the destination and destination sessions to identify the ERSPAN traffic. || **vrf** *vrf-name* | (Optional) Configures the VRF name of the packets in the ERSPAN traffic. |  [Table 36](#wp1040619) lists the ERSPAN source session configuration mode syntaxes.Table 36 ERSPAN or RSPAN Source Session Configuration Mode Syntaxes| Syntax | Description || --- | --- || Global Configuration Mode | || **monitor session** *erspan-source-session-number* **type erspan-source | rspan-source** | Enters ERSPAN or RSPAN source session configuration mode and changes the prompt as appropriate to the following:  Router(config-mon-erspan-src)#  Router(config-mon-rspan-src)# || Source Session Configuration Mode | || **description** *session-description* | (Optional) Describes the ERSPAN or RSPAN source session. || **shutdown** | (Optional) (Default) Inactivates the ERSPAN or RSPAN source session. || **no shutdown** | Activates the ERSPAN or RSPAN source session. || **source** {{*single-interface* | *interface-list* | *interface-range* | *mixed-interface-list* | *single-vlan* | *vlan-list* | *vlan-range* | *mixed-vlan-list*} [**rx** | **tx** | **both**]} | Associates the ERSPAN or RSPAN source session number with the source ports or VLANs, and selects the traffic direction to be monitored. || **filter** {*single-vlan* | *vlan-list* | *vlan-range* | *mixed-vlan-list*} | (Optional) Configures source VLAN filtering when the ERSPAN or RSPAN source is a trunk port. || **description** *session-description* | (Optional) Describes the ERSPAN or RSPAN source session. || Source Session Destination Configuration Mode | || **ip address** *ip-address* | Configures the ERSPAN or RSPAN flow destination IP address, which must also be configured on an interface on the destination switch and be entered in the ERSPAN or RSPAN destination session configuration. || **erspan-id** *erspan-flow-id* | Configures the ID number used by the source and destination sessions to identify the ERSPAN or RSPAN traffic. || **origin ip address** *ip-address* | Configures the IP address used as the source of the ERSPAN or RSPAN traffic. || **ip** {{**ttl** *ttl-value*} | {**prec** *ipp-value*} | {**dscp** *dscp-value*}} | (Optional) Configures the following packet values in the ERSPAN or RSPAN traffic:  •**ttl** *ttl**-value*—IP time-to-live (TTL) value  •**prec** *ipp-value—*IP-precedence value  •**dscp** *dscp-value—*IP-precedence value || **vrf** *vrf-name* | (Optional) Configures the VRF name of the packets in the ERSPAN or RSPAN traffic. |  When you configure the monitor sessions, follow these syntax guidelines:•![](/c/dam/en/us/td/i/templates/blank.gif)*erspan-destination-span-session-number* can range from 1 to 66.•![](/c/dam/en/us/td/i/templates/blank.gif)*single-interface* is **interface** *type slot*/*port*; *type* is **fastethernet**, **gigabitethernet**, or **tengigabitethernet**.•![](/c/dam/en/us/td/i/templates/blank.gif)*interface-list* is *single-interface* , *single-interface* , *single-interface* ...![](/c/dam/en/us/td/i/templates/note.gif)---**Note** ![](/c/dam/en/us/td/i/templates/blank.gif)In lists, you must enter a space before and after the comma. In ranges, you must enter a space before and after the dash.---•![](/c/dam/en/us/td/i/templates/blank.gif)*interface-range* is **interface** *type slot*/*first-port* - *last-port* .•![](/c/dam/en/us/td/i/templates/blank.gif)*mixed-interface-list* is, in any order, *single-interface* , *interface-range* , ...•![](/c/dam/en/us/td/i/templates/blank.gif)*erspan-flow-id* can range from 1 to 1023.When you clear the monitor sessions, follow these syntax guidelines:•![](/c/dam/en/us/td/i/templates/blank.gif)The no **monitor session** session-number command entered with no other parameters clears the session *session-number*.•![](/c/dam/en/us/td/i/templates/blank.gif)*session-range* is *first-session-number*-*last-session-number.*![](/c/dam/en/us/td/i/templates/note.gif)---**Note** ![](/c/dam/en/us/td/i/templates/blank.gif)When you enter the no **monitor session range** command, do not enter spaces before or after the dash. If you enter multiple ranges, do not enter spaces before or after the commas.---Use the **monitor session type local** command to configure ingress, egress, or both ingress and egress SPAN sessions.Use the **monitor session type local-tx** command to configure egress-only SPAN sessions.When you enter the local or the local egress-only SPAN session configuration mode, the prompt changes accordingly to Router(config-mon-local)# or Router(config-mon-local-tx)#, and the following commands are available:•![](/c/dam/en/us/td/i/templates/blank.gif)**description**—Describes the properties for this session using this syntax:description *description* The *description* can be up to 240 characters and cannot contain special characters or spaces.•![](/c/dam/en/us/td/i/templates/blank.gif)**destination**—Specifies the destination and the destination properties using this syntax:**destination** {**analysis-module** *num* | **anomaly-detector-module** *num* | **interface** *type number* | **intrusion-detection-module** *num*}| **analysis-module** *num* | Specifies the SPAN destination analysis-module. || --- | --- || **anomaly-detector-module** *num* | Specifies the SPAN destination anomaly-detector-module. || **interface** *type number* | Specifies the **interface** *type* and *number* as follows:  •**GigabitEthernet** *mod*/*port*  •**port-channel** *num*—Ethernet Channel of interfaces; valid values are from 1 to 496. || **ingress** | (Optional) Configures destinations to receive traffic from attached devices. || **learning** | (Optional) Enables MAC address learning from the destinations, which allows the switch to transmit traffic that is addressed to devices attached to the destinations. || **intrusion-detection-module** *num* | Specifies the SPAN destination intrusion-detection-module. |  •![](/c/dam/en/us/td/i/templates/blank.gif)**exit**—Exits from configuration session mode.•![](/c/dam/en/us/td/i/templates/blank.gif)**filter vlan** *vlan-id*—Limits the SPAN source traffic to specific VLANs; valid values are from 1 to 4096.•![](/c/dam/en/us/td/i/templates/blank.gif)**no**—Negates a command or sets its defaults.•![](/c/dam/en/us/td/i/templates/blank.gif)**shutdown**—Shuts down this session•![](/c/dam/en/us/td/i/templates/blank.gif)**source**—Specifies the SPAN source interface or VLAN using the following syntax:**source** {**cpu** {**rp** | **sp**} | {**interface** *type number*} | {**intrusion-detection-module** *num*} | {**vlan** *vlan-id*}} [**,** | **-** | **rx** | **tx** | **both**]  | cpu rp | Associates the local SPAN session number with the CPU on the route processor. || --- | --- || cpu sp | Associates the local SPAN session number with the CPU on the switch processor. || **interface** *type number* | Specifies the interface type and number as follows:  •**FastEthernet** *mod*/*port*  •**GigabitEthernet** *mod*/*port*  •**Port-channel** *num*—Ethernet Channel of interfaces; valid values are from 1 to 496. || vlan *vlan-id* | Specifies the VLAN; valid values are from 1 to 4094. || **,** | (Optional) Specifies another range of interfaces. || **-** | (Optional) Specifies a range of interfaces. || **both** | (Optional) Monitors the received and the transmitted traffic. || **rx** | (Optional) Monitors the received traffic only. || **tx[1](#wp1040785)** | (Optional) Monitors the transmitted traffic only. || [1](#wp1040786) When you enter the **local-tx** keyword, the **rx** and **both** keywords are not available and the **tx** keyword is required. || --- |  The local SPAN session limits are as follows:•![](/c/dam/en/us/td/i/templates/blank.gif)Total sessions—80•![](/c/dam/en/us/td/i/templates/blank.gif)Source sessions—2 (ingress or egress or both)•![](/c/dam/en/us/td/i/templates/blank.gif)Egress only—14If you enter the **filter** keyword on a monitored trunk interface, only traffic on the set of specified VLANs is monitored.Only one destination per SPAN session is supported. If you attempt to add another destination interface to a session that already has a destination interface configured, you get an error. You must first remove a SPAN destination interface before changing the SPAN destination to a different interface.You can configure up to 64 SPAN destination interfaces, but you can have one egress SPAN source interface and up to 128 ingress source interfaces only.A SPAN session can either monitor VLANs or monitor individual interfaces, but it cannot monitor both specific interfaces and specific VLANs. Configuring a SPAN session with a source interface and then trying to add a source VLAN to the same SPAN session causes an error. Configuring a SPAN session with a source VLAN and then trying to add a source interface to that session also causes an error. You must first clear any sources for a SPAN session before switching to another type of source.Port channel interfaces display in the list of interface options if you have them configured. VLAN interfaces are not supported. However, you can span a particular VLAN by entering the **monitor session session source vlan** *vlan-id* command.When you configure the **destination**, use these guidelines:•![](/c/dam/en/us/td/i/templates/blank.gif)A *single-interface* is as follows:–![](/c/dam/en/us/td/i/templates/blank.gif)**interface** *type slot*/*port*; *type* is **fastethernet**, **gigabitethernet**, or **tengigabitethernet**.–![](/c/dam/en/us/td/i/templates/blank.gif)**interface** **port-channel** *number*![](/c/dam/en/us/td/i/templates/note.gif)---**Note** ![](/c/dam/en/us/td/i/templates/blank.gif)Destination port channel interfaces must be configured with the **channel-group** *group-num* **mode on** command and the **no channel-protocol** command.---•![](/c/dam/en/us/td/i/templates/blank.gif)An *interface-list* is *single-interface* , single-*interface* , *single-interface* ...![](/c/dam/en/us/td/i/templates/note.gif)---**Note** ![](/c/dam/en/us/td/i/templates/blank.gif)In lists, you must enter a space before and after the comma. In ranges, you must enter a space before and after the dash.---•![](/c/dam/en/us/td/i/templates/blank.gif)An *interface-range* is **interface** *type slot*/*first-port* **-** *last-port*.•![](/c/dam/en/us/td/i/templates/blank.gif)A *mixed-interface-list* is, in any order, *single-interface* , *interface-range* , ...•![](/c/dam/en/us/td/i/templates/blank.gif)A *single-vlan* is the ID number of a single VLAN.•![](/c/dam/en/us/td/i/templates/blank.gif)A *single-list* is *single-vlan* **,** *single-vlan* , *single-vlan* ...•![](/c/dam/en/us/td/i/templates/blank.gif)A *vlan-range* is *first-vlan-ID* - *last-vlan-ID*.•![](/c/dam/en/us/td/i/templates/blank.gif)A *mixed-vlan-list* is, in any order, *single-vlan* , *vlan-range* , ...When you clear the monitor sessions, follow these syntax guidelines:•![](/c/dam/en/us/td/i/templates/blank.gif)The no **monitor session** session-number command entered with no other parameters clears the session *session-number*.•![](/c/dam/en/us/td/i/templates/blank.gif)*session-range* is *first-session-number*-*last-session-number.*![](/c/dam/en/us/td/i/templates/note.gif)---**Note** ![](/c/dam/en/us/td/i/templates/blank.gif)When you enter the no **monitor session range** command, do not enter spaces before or after the dash. If you enter multiple ranges, do not enter spaces before or after the commas.---",
    "RelatedCmds": [
        {
            "cmd": " **monitor session type** ",
            "description": " Creates an ERSPAN source session number or enters the ERSPAN session configuration mode for the session. "
        },
        {
            "cmd": " **show monitor session** ",
            "description": " Displays information about the ERSPAN, SPAN, and RSPAN sessions. "
        }
    ]
}