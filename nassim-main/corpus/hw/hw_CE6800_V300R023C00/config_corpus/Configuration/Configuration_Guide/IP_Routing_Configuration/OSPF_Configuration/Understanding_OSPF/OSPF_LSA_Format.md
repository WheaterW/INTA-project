OSPF LSA Format
===============

Each device in an AS generates one or more types of LSAs, depending on the device's role, and multiple LSAs form an LSDB. OSPF encapsulates routing information into LSAs for transmission. Commonly used LSAs include:

* [Router-LSAs](#EN-US_CONCEPT_0000001130783254__section_02)
* [Network-LSAs](#EN-US_CONCEPT_0000001130783254__section_03)
* [Summary-LSAs](#EN-US_CONCEPT_0000001130783254__section_04) (including Network-Summary-LSAs and ASBR-Summary-LSAs)
* [AS-external-LSAs](#EN-US_CONCEPT_0000001130783254__section_05)

#### LSA Header Format

All LSAs have the same header. [Figure 1](#EN-US_CONCEPT_0000001130783254__fig_dc_vrp_ospf_feature_003701) shows an LSA header.

**Figure 1** LSA header  
![](figure/en-us_image_0000001130783348.png)

**Table 1** LSA header fields
| Field | Length | Description |
| --- | --- | --- |
| LS age | 16 bits | Time elapsed since an LSA is generated, in seconds. The value of this field continually increases regardless of whether the LSA is transmitted over a link or saved in an LSDB. |
| Options | 8 bits | Optional OSPF capabilities, which include:   * E: AS-external-LSAs can be flooded. * MC: IP multicast packets can be forwarded. * N/P: Type 7 LSAs can be processed. * DC: Demand circuits can be processed. * DN: This bit prevents loops on MPLS VPNs. When a PE sends Type 3, Type 5, or Type 7 LSAs to a CE, the DN bit needs to be set. When other PEs receive the LSAs from the CE, they cannot use the LSAs in OSPF route calculation. * O: It indicates whether the originating device supports Opaque LSAs (Type 9, Type 10, and Type 11). |
| LS type | 8 bits | Type of the LSA. The values are as follows:   * Type1: Router-LSA * Type2: Network-LSA * Type 3: Network-Summary-LSA * Type 4: ASBR-Summary-LSA * Type5: AS-external-LSA * Type7: NSSA-LSA |
| Link State ID | 32 bits | This field, together with the LS type field, uniquely identifies each LSA in an OSPF area. |
| Advertising Router | 32 bits | Router ID of the device that generates the LSA. |
| LS sequence number | 32 bits | Sequence number of the LSA. Neighbors can use this field to identify the latest LSA. |
| LS checksum | 16 bits | Checksum of all fields except the LS age field. |
| length | 16 bits | Length of the LSA including the LSA header, in bytes. |



#### Router-LSA

A router-LSA (Type 1) describes the link status and cost of a device. Router-LSAs are generated by a device and advertised within the area to which the device belongs. [Figure 2](#EN-US_CONCEPT_0000001130783254__fig_dc_vrp_ospf_feature_003702) shows the format of a router-LSA.

**Figure 2** Format of a router-LSA  
![](figure/en-us_image_0000001130623558.png)

**Table 2** Router-LSA fields
| Field | Length | Description |
| --- | --- | --- |
| Link State ID | 32 bits | Router ID of the device that generates the LSA. |
| V (Virtual Link) | 1 bit | If the device that generates the LSA is located at one end of a virtual link, this field is set to 1. Otherwise, this field is set to 0. |
| E (External) | 1 bit | If the device that generates the LSA is an ASBR, this field is set to 1. Otherwise, this field is set to 0. |
| B (Border) | 1 bit | If the device that generates the LSA is an ABR, this field is set to 1. Otherwise, this field is set to 0. |
| # links | 16 bits | Number of links described in the LSA, including all links in the area to which the device belongs. |
| Link ID | 32 bits | Entity that is on the other end of the link. The value varies according to the link type:   * 1: router ID of the neighboring device. * 2: interface IP address of the DR * 3: network segment or subnet number * 4: router ID of the neighbor on a virtual link |
| Link Data | 32 bits | Link data. The value varies according to the link type:   * Unnumbered P2P: interface index * Stub network: subnet mask * Other types of connections: IP address of the device interface. |
| Type | 8 bits | Type of the device link. The values are as follows:   * 1: The device is connected to a neighbor in P2P mode. * 2: The device is connected to a transit network. * 3: The device is connected to a stub network. * 4: The device is connected to a neighbor over a virtual link. |
| # ToS | 8 bits | Number of types of service (ToSs). |
| metric | 16 bits | Cost of the link. |
| ToS | 8 bits | Type of service. |
| ToS metric | 16 bits | Metric for the specified ToS. |



#### Network-LSA

A network-LSA (Type 2) describes the link status of all devices on the local network segment. Network-LSAs are generated by the DR on a broadcast or NBMA network and advertised within the area to which the DR belongs. [Figure 3](#EN-US_CONCEPT_0000001130783254__fig_dc_vrp_ospf_feature_003703) shows the format of a network-LSA.

**Figure 3** Format of a network-LSA  
![](figure/en-us_image_0000001130783344.png)

**Table 3** Network-LSA fields
| Field | Length | Description |
| --- | --- | --- |
| Link State ID | 32 bits | Interface IP address of the DR |
| Network Mask | 32 bits | Mask of the broadcast or NBMA network |
| Attached Router | 32 bits | Router IDs of all devices on the broadcast or NBMA network, including the router ID of the DR |



#### Summary-LSA

Network-Summary-LSA (Type 3): describes routes on a network segment in an area and is advertised to other related areas.

ASBR-Summary-LSA (Type 4): describes routes to an ASBR and is advertised to all related areas except the area to which the ASBR belongs.

Type 3 and Type 4 LSAs have the same format and are generated by ABRs. [Figure 4](#EN-US_CONCEPT_0000001130783254__fig_dc_vrp_ospf_feature_003704) shows the format of a summary-LSA.

**Figure 4** Format of a summary-LSA  
![](figure/en-us_image_0000001130783346.png)

**Table 4** Network-Summary-LSA fields
| Field | Length | Description |
| --- | --- | --- |
| Link State ID | 32 bits | Advertised network address |
| Network Mask | 32 bits | Mask of the broadcast or NBMA network |
| metric | 24 bits | Cost of the route to the destination address |
| ToS | 8 bits | Type of service |
| ToS metric | 24 bits | Metric for the specified ToS |


![](../public_sys-resources/note_3.0-en-us.png) 

When default routes are advertised, both the Link State ID and Network Mask fields are set to 0.0.0.0.


**Table 5** ASBR-Summary-LSA fields
| Field | Length | Description |
| --- | --- | --- |
| Link State ID | 32 bits | Router ID of the ASBR. |
| Network Mask | 32 bits | This field is not meaningful and must be set to 0.0.0.0. |
| metric | 24 bits | Cost of the route to the destination address. |
| ToS | 8 bits | Type of service. |
| ToS metric | 24 bits | Metric for the specified ToS. |



#### AS-External-LSA

An AS-external-LSA (Type 5) describes AS external routes, and is generated by an ASBR. Among the five types of LSAs, only AS-external-LSAs can be advertised to all areas except stub areas and NSSAs. [Figure 5](#EN-US_CONCEPT_0000001130783254__fig_dc_vrp_ospf_feature_003705) shows the format of an AS-external-LSA.

**Figure 5** Format of an AS-external-LSA  
![](figure/en-us_image_0000001130623560.png)

**Table 6** AS-external-LSA fields
| Field | Length | Description |
| --- | --- | --- |
| Link State ID | 32 bits | Advertised network address. |
| Network Mask | 32 bits | Mask of the advertised destination address. |
| E | 1 bit | Type of the external route. The values are as follows:   * 0: Type 1 external route * 1: Type 2 external route |
| metric | 24 bits | Cost of the route to the destination address. |
| Forwarding Address | 32 bits | Packets destined for the advertised destination address are forwarded to the address specified by this field. |
| External Route Tag | 32 bits | Tag added to the external route. This field is not used by the OSPF protocol itself. It can be used to manage external routes. |
| ToS | 8 bits | Type of service. |
| ToS metric | 24 bits | Metric for the specified ToS. |


![](../public_sys-resources/note_3.0-en-us.png) 

If Type 5 LSAs are used to advertise default routes, both the Link State ID and Network Mask fields are set to 0.0.0.0.