Basic Concepts of IS-IS
=======================

Basic Concepts of IS-IS

#### IS-IS Topology Structure

**IS-IS topology**

To support large-scale routing networks, IS-IS divides a domain into areas. IS-IS supports three levels of routing devices: Level-1, Level-2, and Level-1-2. Typically, Level-1 routing devices are deployed within an area, Level-2 routing devices are deployed between areas, and Level-1-2 routing devices are deployed between Level-1 and Level-2 routing devices. [Figure 1](#EN-US_CONCEPT_0000001130622594__en-us_concept_0000001176663901_fig184969151438) shows a typical IS-IS network, on which the backbone area covers all Level-2 routing devices in area 1, and Level-1-2 routing devices in other areas.

**Figure 1** IS-IS topology  
![](figure/en-us_image_0000001176663949.png)

[Table 1](#EN-US_CONCEPT_0000001130622594__en-us_concept_0000001176663901_table20111846122711) describes the routing devices of different levels.

**Table 1** Routing devices of different levels
| Routing Device | Deployment Location | Description |
| --- | --- | --- |
| Level-1 routing device | Within an area | A Level-1 routing device manages intra-area routing. It establishes neighbor relationships with only the Level-1 and Level-1-2 routing devices in the local area, and maintains only a Level-1 link state database (LSDB) which contains routing information specific to the local area. For packets destined for other areas, each Level-1 routing device forwards them to the nearest Level-1-2 routing device. |
| Level-2 routing device | Between areas | A Level-2 routing device manages inter-area routing. It can establish neighbor relationships with Level-2 and with Level-1-2 routing devices in other areas and maintains a Level-2 LSDB, which contains inter-area routing information. Level-2 routing devices in a routing domain must be contiguous to ensure backbone network continuity. |
| Level-1-2 routing device | Between Level-1 and Level-2 routing devices | A routing device capable of establishing neighbor relationships with both Level-1 and Level-2 routing devices is known as a Level-1-2 routing device. This type of routing device can establish Level-1 neighbor relationships with Level-1 and other Level-1-2 routing devices in the local area, and can also establish Level-2 neighbor relationships with Level-2 and Level-1-2 routing devices in other areas. Each Level-1 routing device can only be connected to another area through a Level-1-2 routing device.  Each Level-1-2 routing device maintains a Level-1 LSDB (for intra-area routing) and a Level-2 LSDB (for inter-area routing).  NOTE:  Level-1 routing devices in different areas cannot establish neighbor relationships. However, Level-1-2 routing devices can establish neighbor relationships with each other, regardless of area. |

**Interface levels**

A Level-1-2 routing device may be required to establish only a Level-1 neighbor relationship with one device, and only a Level-2 neighbor relationship with another. In this case, you can set a level for each involved interface so that only Level-1 neighbor relationships can be established on a Level-1 interface, and only Level-2 neighbor relationships on a Level-2 interface.

Relationship between IS-IS network types and network links

IS-IS can run on broadcast links and Point-to-Point (P2P) links. Broadcast links include Ethernet and token ring links. P2P links include Point-to-Point Protocol (PPP) links. IS-IS supports two network types: broadcast and P2P. Broadcast links can be configured as a broadcast or P2P network, whereas P2P links support only the P2P network type.

![](public_sys-resources/note_3.0-en-us.png) 

For a non-broadcast multiple access (NBMA) network, you need to configure Layer 3 sub-interfaces and set their types to P2P.

**DIS and pseudo node**

A designated intermediate system (DIS) is a routing device elected on a broadcast network to create and update a pseudo node and generate the link state protocol data units (LSPs) of the pseudo node. The LSPs help identify devices on the network.

A pseudo node simulates a virtual node on a broadcast network and is not a real routing device. In IS-IS, a pseudo node is identified by the system ID of the DIS and a 1-byte non-zero circuit ID.

On the network shown in [Figure 2](#EN-US_CONCEPT_0000001130622594__en-us_concept_0000001176663901_fig_dc_feature_isis_000305), a pseudo node is created, which simplifies the network topology and reduces the length of LSPs generated by routing devices. If the network topology changes, fewer LSPs are generated, reducing resource consumption during SPF calculation.

**Figure 2** Networking with a pseudo node  
![](figure/en-us_image_0000001176663947.png)

Level-1 and Level-2 DISs are elected separately. You can configure different priorities for DIS election at different levels. The routing device with the largest priority value is elected as the DIS. If multiple routing devices have the same highest priority, the one with the highest MAC address is elected as the DIS. DISs of different levels can be the same or different routing devices.

[Table 2](#EN-US_CONCEPT_0000001130622594__en-us_concept_0000001176663901_table27181024112118) lists the differences between an IS-IS DIS and an OSPF designated router (DR).

**Table 2** Differences between an IS-IS DIS and an OSPF DR
| Item | IS-IS DIS | OSPF DR |
| --- | --- | --- |
| Whether routing devices with priority 0 participate in elections | Yes (on a broadcast network) | No |
| Update process | If a routing device eligible for a DIS is added to an IS-IS broadcast network, it is elected as the new DIS, and the previous pseudo node is deleted. This process causes a new round of LSP flooding. | A routing device added to an OSPF network is not elected as the new DR, even if it has the highest DR priority, unless the existing DR fails. |
| Neighbor relationship establishment | On an IS-IS broadcast network, routing devices (including non-DIS devices) of the same level on the same network segment establish neighbor relationships. | In OSPF, routing devices only establish adjacencies with the DR and backup designated router (BDR). |


![](public_sys-resources/note_3.0-en-us.png) 

Although all routing devices establish neighbor relationships with each other on an IS-IS broadcast network, the LSDBs are synchronized through the DIS.



#### IS-IS Address Structure

The network service access point (NSAP) is an address defined in OSI to locate resources. [Figure 3](#EN-US_CONCEPT_0000001130622594__en-us_concept_0000001176663901_fig620981714512) shows the NSAP address structure, which consists of the initial domain part (IDP) and domain specific part (DSP). The lengths of the IDP and DSP are variable. The length of the NSAP varies from 8 bytes to 20 bytes. [Table 3](#EN-US_CONCEPT_0000001130622594__en-us_concept_0000001176663901_table53152177569) describes the fields in the NSAP address structure.

**Figure 3** NSAP address structure  
![](figure/en-us_image_0000001176663945.png)

**Table 3** Fields in the NSAP address structure
| Field | Description | Remarks |
| --- | --- | --- |
| IDP | The IDP is the counterpart of the network ID in an IP address. | The IDP is defined by the ISO and consists of the authority and format identifier (AFI) and initial domain identifier (IDI). The AFI indicates the address allocation authority and address format, and the IDI identifies a domain. |
| DSP | The DSP is the counterpart of the subnet number and host address in an IP address. | The DSP consists of the high order DSP (HODSP), system ID, and NSAP selector (SEL). The HODSP is used to divide a domain into areas, the system ID identifies a host, and the SEL indicates the service type. |
| Area Address | The IDP and the HODSP of the DSP identify a routing domain and an area within it. Consequently, this IDP and HODSP combination is called an area address, and is a counterpart of an area ID in OSPF. | The area addresses of routing devices in the same Level-1 area must be the same, whereas those of routing devices in the same Level-2 area can be different.  Generally, each routing device requires only one area address, and the area addresses of all routing devices in the same area must be the same. An IS-IS process can be configured with a maximum of three area addresses to support seamless area combination, division, and transformation. |
| System ID | A system ID uniquely identifies a host or routing device in an area. | Each system ID is 48 bits (6 bytes) long. A system ID is usually derived from a router ID. If a routing device uses the IP address 192.168.1.1 of loopback 0 as its router ID, its IS-IS system ID can be obtained as follows:  * Extend the IP address 192.168.1.1 to 192.168.001.001 (add 0s to start of each part that contains fewer than 3 digits). * Convert the extended address 192.168.001.001 to three parts, with each consisting of 4 decimal digits. The result 1921.6800.1001 is used as the system ID.  A system ID can also be obtained through other methods. Whichever you use, ensure that the system ID uniquely identifies a host or a routing device. |
| SEL | The role of an SEL is similar to that of an IP "protocol identifier." Each transport protocol has a unique SEL. | The SEL of IP is 00. |
| NET | A network entity title (NET) indicates a routing device's network layer information. A NET can be regarded as a special NSAP (with the SEL being 00). | The length of the **NET** field is the same as that of an NSAP, and varies from 8 to 20 bytes. When configuring IS-IS on a routing device, you need to configure a NET rather than an NSAP.  For example, in NET ab.cdef.1234.5678.9abc.00, the area address is ab.cdef, the system ID is 1234.5678.9abc, and the SEL is 00. |



#### IS-IS PDU Types

IS-IS protocol data units (PDUs) are mainly classified into Hello PDUs, LSPs, and sequence number PDUs (SNPs).

**Hello PDU**

Hello PDUs, also known as IS-to-IS Hello PDUs (IIHs), are used to establish and maintain neighbor relationships. On broadcast networks, Level-1 IS-IS routing devices use Level-1 LAN IIHs, and Level-2 IS-IS routing devices use Level-2 LAN IIHs. On non-broadcast networks, routing devices use P2P IIHs. LAN IIHs and P2P IIHs have different formats. Specifically, compared with a LAN IIH, a P2P IIH does not have the **Priority** or **LAN ID** field, and instead has a **Local Circuit ID** field. The **Priority** field indicates the DIS priority on a broadcast network, the **LAN ID** field indicates the system ID of the DIS and pseudo node, and the **Local Circuit ID** field indicates the local link ID.

**LSP**

LSPs are used to exchange link-state information and are classified as Level-1 or Level-2 LSPs. Level-1 IS-IS transmits Level-1 LSPs, Level-2 IS-IS transmits Level-2 LSPs, and Level-1-2 IS-IS can transmit both. [Table 4](#EN-US_CONCEPT_0000001130622594__en-us_concept_0000001176663901_table1345018538117) describes the major fields in an LSP.

**Table 4** Major fields in an LSP
| LSP Field | Description |
| --- | --- |
| ATT | If a Level-1-2 routing device transmits a Level-1 LSP with the ATT bit set to 1 in the local Level-1 area, the Level-1 routing devices that receive this LSP can communicate with routing devices outside the local area through the Level-1-2 routing device. |
| OL | LSDB overload bit.  LSPs with the OL bit set to 1 are still flooded on the network, but these LSPs are ignored during calculation of the routes that pass through the routing device that sets the OL bit to 1. Specifically, if a device sets the OL bit to 1, other devices ignore this device (except for direct routes to it) when performing SPF calculation. |
| IS Type | Level of the IS-IS device that generated the LSP. The value **01** indicates Level-1, and the value **11** indicates Level-2. |

**SNP**

SNPs describe the summary of all or some LSPs in the LSDB, and are used for LSDB synchronization. SNPs consist of complete SNPs (CSNPs) and partial SNPs (PSNPs). Each CSNP contains the summary of all LSPs in an LSDB. CSNPs help with LSDB synchronization between neighbors.

The way that SNPs are used on broadcast networks is different from that on P2P links.

* On broadcast networks, CSNPs are sent periodically by the DIS. If a device detects that its LSDB is not synchronized with those on its neighbors, it sends a PSNP to the DIS to request the LSPs that it does not have.
* On P2P links, CSNPs are sent only when a neighbor relationship is established for the first time, and PSNPs are used to reply to the CSNPs. In addition, PSNPs are used to request desired LSPs.