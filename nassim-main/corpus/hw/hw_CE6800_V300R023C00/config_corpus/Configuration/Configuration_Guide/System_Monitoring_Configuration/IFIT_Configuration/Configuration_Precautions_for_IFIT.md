Configuration Precautions for IFIT
==================================

Configuration Precautions for IFIT

#### Licensing Requirements

IFIT is under license control (CE-LIC-IFIT).


#### Hardware Requirements

**Table 1** Hardware requirements
| Series | Models |
| --- | --- |
| CE6800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F |
| CE8800 series | CE8855-32CQ4BQ/CE8851-32CQ4BQ |



#### Feature Requirements

**Table 2** Feature requirements
| Feature | Feature Requirements | Series | Models |
| --- | --- | --- | --- |
| IFIT DCN | In the IFIT delay measurement interval, only one packet is colored. When packet loss occurs, the colored packet may be discarded. As a result, timestamp information is incorrect. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | IFIT flows will age out. When an IFIT-enabled device is attacked by a large number of invalid IFIT packets, normal IFIT flow creation may be affected, but existing flows are not affected. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | The statistics in the first measurement period are inaccurate in the following scenarios:  1. It takes time to create a flow statistics table. When multiple flows are monitored at the same time, each node cannot generate a flow statistics table for the same flow.  2. If a forwarding path changes (due to FRR or DPFR) during IFIT measurement, the statistics in the first measurement period after a switchover are inaccurate.  3. If dynamic flow analysis is switched to static flow analysis on the device, flows will be established again. As a result, the statistics in the first measurement period are inaccurate. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | If the IFIT configuration is changed or the ingress device is restarted, data in several periods may be inaccurate or no statistics are collected. The following situations may occur:  1. The statistical period is changed, and the value of flowId remains unchanged. Properly plan service networking configurations to prevent inaccurate IFIT statistics.  2. When the aggregation type or flow type is adjusted in a traffic behavior or the number of flows to be created is adjusted in a traffic policy, flows are re-created. Properly plan the service network configuration to prevent the modification of related configurations from affecting the deployed statistics tasks.  3. When the traffic behavior or traffic policy configuration changes, IFIT processing may not be performed on some packets of the monitored traffic. As a result, node statistics are inaccurate. Properly plan the service network configuration to prevent the modification of related configurations from affecting the deployed statistics tasks.  When the IFIT delay configuration changes, there is a difference of a maximum of five statistical periods between the effective time of the timestamp delay information in the upstream and downstream flow tables. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | 1. IFIT collects statistics only on the first IPv4 fragment of fragmented IPv4 packets. The packet statistics are accurate, but the byte statistics are inaccurate. If a middle or last fragment is discarded, IFIT packet statistics are still normal. However, packet loss occurs and IFIT measurement result cannot be used to locate the failure point.  2. IFIT does not create or analyze flows for IPv6 packets that need to be fragmented. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | Flow characteristics in different measurement instances cannot conflict. If flow characteristics conflict (for example, the characteristics of one measurement instance include or overlap those of another measurement instance), the IFIT measurement results may be inaccurate. Avoid this scenario during service planning. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | IFIT measurement can be configured only on VXLAN tunnels. You need to plan services properly. Otherwise, no IFIT measurement result is displayed. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | 1. The traffic load balancing paths may change.  2. ACLs may be incorrectly matched.  3. In protocol packet learning scenarios, protocol learning may fail.  Considering the preceding situations, properly plan service networking configurations when devices with different IFIT capabilities are deployed on the network. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | IFIT cannot correctly collect statistics on ICMP packets through Tracert. Specifically, some packets do not leave the IFIT network because Tracert uses TTL as the triggering source. When packets enter the IFIT network, the number of packets counted on the egress PE is smaller than that counted on the ingress PE. As a result, packet statistics are incorrect. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | Statistics on packets that are discarded due to invalid entries (such as the packets discarded due to invalid interface entries) before IFIT measurement starts cannot be collected for the upstream instance on the IFIT ingress node. In this case, properly plan the configurations. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | During IFIT deployment, ensure that the IFIT function is enabled on all devices on the network. If there are devices that do not support IFIT or do not have IFIT enabled, packet forwarding may be abnormal. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | 1. During IFIT flow table aging, the reported IFIT packet statistics are 0.  2. For the statistics generated during IFIT flow table aging, the period ID may be the same as that of the previous period.  3. You are advised to set the IFIT aging time to at least twice the period and at least 60s. If the IFIT aging time is set to a small value, IFIT flow table statistics may fluctuate. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | IFIT performs flow creation analysis only based on inner information about tunnel packets. If the packet information matched with non-tunnel packets is the same as the inner information about tunnel packets, packets can only be combined for flow creation analysis and cannot be distinguished. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | The IFIT packet statistics of the previous measurement period is reported in the current measurement period, and the time when traffic is generated is different from the time when the IFIT measurement task is delivered. Therefore, the packet statistics reported in the first measurement period may be 0. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | 1. When the flow table space is insufficient, the upstream and downstream flow tables on the device are inconsistent. For example, a specific flow table may fail to be created in both upstream and downstream directions at the same time. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | During IFIT deployment, properly plan bandwidth to prevent longer packet length due to IFIT header insertion, which may cause packet loss. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | 1. When the IFIT function is deployed on a device, the CPU usage increases. A shorter period indicates higher CPU usage.  2. It is recommended that the period be greater than or equal to 60s. If the period is set to 10s, it is recommended that the number of monitored flow entries be less than or equal to 10K. Each time the period increases by 10s, the number of monitored flow entries increases by no more than 5K. If the period is too short, full flow table data may not be reported in the period. In this case, flow table data will be discarded.  3. If the CPU usage exceeds 90%, the IFIT function becomes invalid until the CPU usage decreases to 60%. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | 1. Byte statistics start from the IP header of a packet. For tunnel packets, byte statistics start from the inner IP header.  2. In a scenario where non-tunnel packets are transmitted or a VXLAN encapsulation or decapsulation node is deployed, byte statistics may include the IFIT header due to the IFIT packet insertion mode. As a result, byte statistics on different nodes are inconsistent. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| IFIT DCN | 1. When IFIT and mirroring are configured together, if packets have been edited, mirrored packets carry IFIT information.  2. When both IFIT and PacketEvent are configured, the packet loss visualization function has the highest priority, the IFIT function has the second highest priority, and the ultra-long latency visualization function has the lowest priority.  3. When both IFIT and PacketEvent are configured, PacketEvent statistics may be preferentially discarded. As a result, PacketEvent statistics are inaccurate.  4. IFIT and the large MAC address table mode are mutually exclusive.  5. IFIT does not collect statistics on BFD packets. The packet type is UDP and the destination port number is 3784, 4784, 6784, or 7784.  6. IFIT does not collect statistics on 1588 packets. The packet type is UDP, and the destination ports are 319 and 320.  7. When IFIT and active/standby switchover are performed at the same time, a blackout period exists. The blackout period lasts for 30s. During this period, the period cannot be reversed. As a result, the data statistics are abnormal. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8855-32CQ4BQ/CE8851-32CQ4BQ |