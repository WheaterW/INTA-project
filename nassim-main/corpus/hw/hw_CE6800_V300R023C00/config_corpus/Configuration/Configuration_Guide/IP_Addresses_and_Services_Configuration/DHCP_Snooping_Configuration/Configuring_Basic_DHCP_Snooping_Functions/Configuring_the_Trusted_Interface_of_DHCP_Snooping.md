Configuring the Trusted Interface of DHCP Snooping
==================================================

Configuring the Trusted Interface of DHCP Snooping

#### Context

To ensure a DHCP client obtains an IP address from a valid DHCP server, you need to configure the device interface that is directly or indirectly connected to a DHCP server trusted by the administrator as a trusted one (for example, interface 3 in [Figure 1](#EN-US_TASK_0000001564000549__fig829340135416)), and configure other interfaces as untrusted ones (for example, interface 2 in [Figure 1](#EN-US_TASK_0000001564000549__fig829340135416)). This ensures that the DHCP client obtains an IP address only from the valid DHCP server and the bogus DHCP server cannot allocate an IP address to the client.

After DHCP snooping is enabled, configure the interface connected to the DHCP server as a trusted one. Once configured, the device can generate dynamic DHCP snooping binding entries.

When DHCP snooping is enabled on a DHCP relay agent, a trusted interface does not need to be configured on the relay agent. After receiving DHCP request messages from users, the DHCP relay agent converts the source and destination IP addresses and MAC addresses, and unicasts the messages to the valid DHCP server. As such, DHCPACK messages received by the DHCP relay agent are valid, and the DHCP snooping binding table generated by the relay agent is also correct.

**Figure 1** Network diagram of configuring the trusted interface of DHCP snooping  
![](../images/en-us_image_0000001564000617.png)

#### Procedure

1. Enter the system view.
   
   
   ```
   [system-view](cmdqueryname=system-view)
   ```
2. Configure trusted interfaces in the interface, BD, or VLAN view.
   
   
   * Enter the interface view and configure the interface as a trusted one.
     ```
     [interface](cmdqueryname=interface) interface-type interface-number
     portswitch
     [dhcp snooping trusted](cmdqueryname=dhcp+snooping+trusted)
     [quit](cmdqueryname=quit)
     ```
   * Enter the VLAN view and configure a trusted interface.
     ```
     [vlan](cmdqueryname=vlan) vlan-id
     [dhcp snooping trusted](cmdqueryname=dhcp+snooping+trusted) [interface](cmdqueryname=interface) interface-type interface-number
     [quit](cmdqueryname=quit)
     ```
   * Enter the BD view and configure trusted interfaces.
     ```
     [bridge-domain](cmdqueryname=bridge-domain) bd-id
     [dhcp snooping trusted tunnel](cmdqueryname=dhcp+snooping+trusted+tunnel)
     [quit](cmdqueryname=quit)
     ```
   
   
   
   By default, an interface is untrusted.
3. Commit the configuration.
   
   
   ```
   [commit](cmdqueryname=commit)
   ```