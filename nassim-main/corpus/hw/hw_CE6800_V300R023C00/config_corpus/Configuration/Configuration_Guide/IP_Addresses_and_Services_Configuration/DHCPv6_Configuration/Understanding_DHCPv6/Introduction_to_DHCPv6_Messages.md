Introduction to DHCPv6 Messages
===============================

Introduction to DHCPv6 Messages

#### DHCPv6 Message Format

**DHCPv6 client/server message format**

[Figure 1](#EN-US_CONCEPT_0000001512850838__fig_dc_fd_dhcpv6_000501) shows the DHCPv6 client/server message format.

**Figure 1** DHCPv6 client/server message format  
![](figure/en-us_image_0000001512691254.png)  

**Table 1** Description of each field in a DHCPv6 client/server message
| Field | Length | Description |
| --- | --- | --- |
| msg-type | 1 octet | Message type. The value ranges from 1 to 11. For details, see [DHCPv6 Message Types](#EN-US_CONCEPT_0000001512850838__section_type). |
| transaction-id | 3 octets | Transaction ID for message exchange, which is used by a DHCPv6 client and server to synchronize a server response to a client message. For example, a DHCPv6 client initiates a Solicit/Advertise transaction or a Request/Reply transaction. Their transaction IDs are different. Transaction IDs have the following characteristics:  * A transaction ID is randomly generated by a DHCPv6 client. * The transaction IDs of request and reply messages are the same. * The transaction ID of a session message initiated by a DHCPv6 server is 0. |
| options | Variable | Options carried in a DHCPv6 message. This field contains configurations that a DHCPv6 server allocates to IPv6 hosts, such as the DNS server IPv6 address.  For details about the options field, see [DHCPv6 Options](galaxy_dhcpv6_cfg_0006.html). |

**DHCPv6 relay agent/server message format**

[Figure 2](#EN-US_CONCEPT_0000001512850838__fig_dc_fd_dhcpv6_000502) shows the DHCPv6 relay agent/server message format.

**Figure 2** DHCPv6 relay agent/server message format  
![](figure/en-us_image_0000001564130497.png)  

**Table 2** Description of each field in a DHCPv6 relay agent/server message
| Field | Length | Description |
| --- | --- | --- |
| msg-type | 1 octet | Message type. The value can be Relay-forward (12) or Relay-reply (13). For details, see [DHCPv6 Message Types](#EN-US_CONCEPT_0000001512850838__section_type). |
| hop-count | 1 octet | Number of relay agents that have relayed this message. |
| link-address | 16 octets | Global unicast or link-local IPv6 address that is used by the server to identify the link on which the client is located. |
| peer-address | 16 octets | IPv6 address of the client or relay agent from which the message to be relayed was received. |
| options | Variable | Options carried in a DHCPv6 message. The Relay Message option must be included.  For details about the options field, see [DHCPv6 Options](galaxy_dhcpv6_cfg_0006.html). |



#### DHCPv6 Message Types

DHCPv6 defines 13 types of messages. A DHCPv6 server and client communicate by exchanging these types of messages. [Table 3](#EN-US_CONCEPT_0000001512850838__tab_dc_fd_dhcpv6_000502) compares DHCPv6 and DHCPv4 messages.

**Table 3** Comparison between DHCPv6 and DHCPv4 messages
| Message Type | DHCPv6 Message | DHCPv4 Message | Description |
| --- | --- | --- | --- |
| 1 | Solicit | DHCPDISCOVER | A DHCPv6 client sends a Solicit message to locate DHCPv6 servers. |
| 2 | Advertise | DHCPOFFER | A DHCPv6 server sends an Advertise message in response to a Solicit message to declare that it can provide DHCPv6 services. |
| 3 | Request | DHCPREQUEST | A DHCPv6 client sends a Request message to request IPv6 addresses and other configuration parameters from a DHCPv6 server. |
| 4 | Confirm | - | A DHCPv6 client sends a Confirm message to any available DHCPv6 server to check whether the obtained IPv6 address applies to the link that the DHCPv6 client is connected to. |
| 5 | Renew | DHCPREQUEST | A DHCPv6 client sends a Renew message to the DHCPv6 server that provides the IPv6 addresses and other configuration parameters to extend the lifetime of the addresses and to update configuration parameters. |
| 6 | Rebind | DHCPREQUEST | A DHCPv6 client sends a Rebind message to any available DHCPv6 server to extend the lifetime of the assigned IPv6 address and to update configuration parameters when the client does not receive a response to its Renew message. |
| 7 | Reply | DHCPACK/DHCPNAK | A DHCPv6 server sends a Reply message in the following situations:   1. In response to a Solicit, Request, Renew, or Rebind message received from a DHCPv6 client. In this situation, the Reply message contains IPv6 addresses and configuration parameters. 2. In response to an Information-request message. In this situation, the Reply message contains configuration parameters. 3. In response to a Confirm, Release, or Decline message received from a DHCPv6 client. |
| 8 | Release | DHCPRELEASE | A DHCPv6 client sends a Release message to the DHCPv6 server that assigns IPv6 addresses to the DHCPv6 client, indicating that the DHCPv6 client will no longer use the obtained addresses. |
| 9 | Decline | DHCPDECLINE | A DHCPv6 client sends a Decline message to a DHCPv6 server, indicating that the IPv6 addresses assigned by the DHCPv6 server are already in use on the link to which the DHCPv6 client is connected. |
| 10 | Reconfigure | - | A DHCPv6 server sends a Reconfigure message to a DHCPv6 client, informing the client that the server has new addresses or updated configuration parameters. |
| 11 | Information-request | DHCPINFORM | A DHCPv6 client sends an Information-request message to a DHCPv6 server to request configuration parameters except for IPv6 addresses. |
| 12 | Relay-forward | - | A DHCPv6 relay agent sends a Relay-forward message to relay Request messages to DHCPv6 servers. |
| 13 | Relay-reply | - | A DHCPv6 server sends to a DHCPv6 relay agent a Relay-reply message containing a message that the relay agent delivers to a DHCPv6 client. |