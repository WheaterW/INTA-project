Understanding FM
================

Understanding FM

#### FM Fundamentals

FM dynamically manages and reports alarms generated on devices in a centralized manner. If a device does not run properly, the device generates alarms to notify the maintenance personnel of the device's operating status, facilitating fault locating.

The common types of alarms are as follows:

* Active alarm
  
  An alarm indicating occurrence of a fault. For example, the hwFanInvalid alarm indicates that a fan is faulty.
* Clear alarm
  
  An alarm indicating that a fault is rectified. For example, the hwFanInvalidResume alarm indicates that a fault on a fan is rectified. Each active alarm has a corresponding clear alarm.
* Root alarm
  
  An alarm that generates other alarms. For example, if a route becomes unreachable due to a fault on an interface, the interface fault alarm is a root alarm.
* Correlative alarm
  
  An alarm generated by a root alarm. For example, if an interface fault causes the generation of a route unreachability alarm, the route unreachability alarm is a correlative alarm.
* Intermittent alarm
  
  An alarm that is cleared shortly after being generated (the interval between the alarm generation and clearance times is less than an intermittent threshold). Intermittent alarms last for a short period of time.
* Flapping alarm
  
  An alarm that is generated and cleared frequently within a specified period of time (the number of alarm generation and clearance occurrences exceeds a flapping threshold). Alarms with the same object and ID are considered identical.

FM receives alarms generated by devices, saves the alarms based on the default severities, and records the time when alarms are generated. After the FM function is configured, you can:

* Adjust the alarm severities on the device and configure filtering rules on the NMS to filter out unnecessary alarms.
* Enable the delayed alarm reporting function to prevent alarms from being reported repeatedly. The device reports only alarms that persist after the set alarm reporting delay expires.
* Enable the device to identify root-cause and correlative alarms based on alarm correlation and filter out correlative alarms so that the device reports only root alarms to the NMS, improving the efficiency in locating faults.

#### Alarm Severity

Alarm information is classified to enable users to roughly determine the alarm severity and take measures for prompt fault recovery. In this way, alarms of high severity are handled at a high priority, preventing service interruption.

According to X.733, alarms are classified into four severities, as shown in [Table 1](#EN-US_CONCEPT_0000001564005337__tab_dc_vrp_logs_feature_210501). A smaller value indicates a higher severity.

**Table 1** Definition of alarm severities
| Value | Severity | Description |
| --- | --- | --- |
| 1 | Critical | Services have been affected, and an immediate rectification measure is required. |
| 2 | Major | Services are being affected, and an urgent rectification measure is required. |
| 3 | Minor | A fault that does not yet affect services has occurred, and a rectification measure is required to prevent the fault from affecting services. |
| 4 | Warning | A potential fault that will affect services is detected. Actions should be taken to further diagnose the fault (if necessary) and rectify the fault before the fault grows in severity and affects services. |



#### Alarm Suppression

The device supports the alarm suppression function. Alarm suppression can be classified into two types: jitter suppression and correlation suppression.

* **Jitter suppression**
  
  Jitter suppression, focusing on analysis of alarm persistence, enables a device to report only alarms that persist after a set interval expires. This prevents a large number of invalid alarms from being reported.
  
  Alarm persistence analysis provides a basis for a device to filter out non-persistent alarms and report only persistent alarms. [Figure 1](#EN-US_CONCEPT_0000001564005337__fig87001429123615) illustrates principles of alarm persistence analysis.
  
  **Figure 1** Alarm persistence analysis  
  ![](figure/en-us_image_0000001563885061.png)
  
  Alarm persistence analysis measures the duration after an alarm (a fault alarm or clear alarm) is generated. If the period defined for an alarm has elapsed but the alarm persists, a notification is sent. If an alarm is cleared within the defined period, the alarm is filtered out and no notification is sent. That is, if an alarm persists for a short time, it is filtered out and no notification is reported. Only stable fault information is displayed in the case of fault flapping.
* **Correlation suppression**
  
  Correlation suppression reduces the number of reported alarms and network load, and facilitates fault locating.
  
  An event may cause generation of multiple alarms. These alarms are correlated. Alarm correlation analysis facilitates fault locating by differentiating root alarms from correlative alarms.
  
  Alarm correlation analyzes the relationships between alarms based on the predefined alarm correlations.
  
  After a device generates an alarm, it analyzes the alarm's correlation with other existing alarms. After the analysis is complete, the alarm carries a tag identifying whether it is a root or correlative alarm. If the alarm needs to be sent to a Simple Network Management Protocol (SNMP) agent and forwarded to the network management system (NMS), the device determines whether NMS-based correlative alarm suppression is configured.
  
  + If NMS-based correlative alarm suppression is configured, the device filters out correlative alarms and reports only root alarms to the NMS.
  + If NMS-based correlative alarm suppression is not configured, both correlative alarms and root alarms are reported to the NMS.