Enabling 1588v2 Globally
========================

Enabling 1588v2 Globally

#### Context

To establish a 1588v2 network, you must enable 1588v2 globally, set the 1588v2 clock mode to BC or OC according to on-site requirements, and configure basic information (such as the domain and virtual clock ID) required on the 1588v2 clock synchronization network.

Perform the following steps on each 1588v2 device:


#### Procedure

1. Enter the system view.
   
   
   ```
   [system-view](cmdqueryname=system-view)
   ```
2. Enable 1588v2 globally.
   
   
   ```
   [ptp enable](cmdqueryname=ptp+enable)
   ```
   
   By default, 1588v2 is not enabled globally.
3. Set the 1588v2 clock mode to BC or OC.
   
   
   ```
   [ptp device-type](cmdqueryname=ptp+device-type) { bc | oc }
   ```
   
   By default, the 1588v2 clock mode is not set.
4. (Optional) If the 1588v2 clock mode of the 1588v2 device is OC, configure the OC to work in slave-only mode.
   
   
   ```
   [ptp slaveonly](cmdqueryname=ptp+slaveonly)
   ```
   
   By default, an OC does not work in slave-only mode. An OC can work in either master or slave mode.
5. (Optional) Configure the domain to which the 1588v2 device belongs.
   
   
   ```
   [ptp domain](cmdqueryname=ptp+domain) domain-value
   ```
   
   By default, a 1588v2 device resides in domain 0.
   
   ![](public_sys-resources/note_3.0-en-us.png) 
   
   The devices that implement time synchronization through 1588v2 messages must reside in the same 1588v2 domain.
6. (Optional) Configure a virtual clock ID.
   
   
   ```
   [ptp](cmdqueryname=ptp) [virtual-clock-id](cmdqueryname=virtual-clock-id) clock-id-value
   ```
   
   By default, a 1588v2 device has only a default clock ID and not a virtual clock ID. This default clock ID is generated by filling fffe in the middle of the system's hexadecimal MAC address. For example, if the MAC address of the system is 00e0fc123456, the corresponding default clock ID is 00e0fcfffe123456.
7. Commit the configuration.
   
   
   ```
   [commit](cmdqueryname=commit)
   ```