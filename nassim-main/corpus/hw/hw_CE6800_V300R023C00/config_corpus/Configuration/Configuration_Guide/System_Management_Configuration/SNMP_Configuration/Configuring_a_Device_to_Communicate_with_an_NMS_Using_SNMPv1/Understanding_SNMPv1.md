Understanding SNMPv1
====================

SNMP defines five types of protocol data units (PDUs), also called SNMP messages, exchanged between the workstation and agent.

* Get-Request PDUs: Generated and transmitted by the workstation to obtain one or more parameter values from an agent.
* Get-Next-Request PDUs: Generated and transmitted by the workstation to obtain parameter values in alphabetical order from an agent.
* Set-Request PDUs: Used to set one or more parameter values for an agent.
* Get-Response PDUs: Contain one or more parameters. They are generated by an agent and transmitted in reply to any of the preceding operations.
* Traps: Messages that originate with an agent and are sent to inform the workstation of network events.

The first three operations are sent by the workstation to an agent, and the latter two operations are sent by an agent to the workstation. For simplification, the first three operations are described as Get, Get-Next, and Set operations. [Figure 1](#EN-US_CONCEPT_0000001513150386__fig_dc_vrp_snmp_feature_000901) shows the five SNMP packet operations.

![](public_sys-resources/note_3.0-en-us.png) 

By default, an agent uses port 161 to receive Get and Set messages, and the workstation uses port 162 to receive traps.


**Figure 1** SNMP operations and messages  
![](figure/en-us_image_0000001564110533.png)

An SNMP message consists of a common SNMP header, a Get/Set header, a trap header, and variable binding.

#### Common SNMP Header

A common SNMP header has the following fields:

* Version
  
  The value for this field is determined by subtracting one from the actual version number. For example, the version field value of an SNMPv1 message is 0.
* Community
  
  The community is a simple text password shared by the workstation and an agent. It is a string. A common value is the 6-character string "public".
* PDU type
  
  There are five types of PDUs in total, as listed in [Table 1](#EN-US_CONCEPT_0000001513150386__tab_dc_vrp_snmp_feature_000901).

**Table 1** PDU types
| PDU Type | Name |
| --- | --- |
| 0 | Get-Request |
| 1 | Get-Next-Request |
| 2 | Get-Response |
| 3 | Set-Request |
| 4 | Trap |



#### Get/Set Header

* Request ID
  
  An integer set by the workstation. It is carried in Get-Request messages sent by the workstation and in Get-Response messages returned by an agent. The workstation can send Get messages to multiple agents simultaneously. All Get messages are transmitted using UDP. A response to the request message sent first may be the last to arrive. In such cases, Request IDs carried in the Get-Response messages enable the workstation to identify the returned messages.
* Error status
  
  An agent enters a value in this field of a Get-Response message to specify an error, as listed in [Table 2](#EN-US_CONCEPT_0000001513150386__tab_dc_vrp_snmp_feature_000902).

**Table 2** Error status
| Value | Name | Description |
| --- | --- | --- |
| 0 | noError | No error exists. |
| 1 | tooBig | The agent cannot encapsulate its response in an SNMP message. |
| 2 | noSuchName | A nonexistent variable is contained in a message. |
| 3 | badValue | A Set operation has returned an invalid value or syntax. |
| 4 | readOnly | The workstation has attempted to modify a read-only variable. |
| 5 | genErr | Other errors. |

* Error index
  
  When a noSuchName, badValue, or readOnly error occurs, the agent sets an integer in the Response message to specify an offset value for the faulty variable in the list. By default, the offset value in Get-Request messages is 0.
* Variable binding (variable-bindings)
  
  The variable binding specifies the names and values of one or more variables. In the Get or Get-Next message, this field is null.

#### Trap Header

* Enterprise
  
  This field is an object identifier of a network device that sends traps. The object identifier resides in the sub-tree of the enterprise object {1.3.6.1.4.1} in the object naming tree.
* Generic trap type
  
  The formal name of this field is generic-trap. [Table 3](#EN-US_CONCEPT_0000001513150386__tab_dc_vrp_snmp_feature_000903) lists the generic trap types that can be received by SNMP.

**Table 3** Generic trap types
| Value | Type | Description |
| --- | --- | --- |
| 0 | coldStart | A coldStart trap signifies that the SNMP entity, supporting a notification originator application, is reinitializing itself and that its configuration may have been altered. |
| 1 | warmStart | A warmStart trap signifies that the SNMP entity, supporting a notification originator application, is reinitializing itself such that its configuration is unaltered. |
| 2 | linkDown | An interface has changed from the up state to the down state. |
| 3 | linkUp | An interface has changed from the down state to the up state. |
| 4 | authenticationFailure | The SNMP workstation has received an invalid community name. |
| 5 | egpNeighborLoss | An EGP peer device has changed to the down state. |
| 6 | enterpriseSpecific | An event defined by the agent and specified by a code. |

To send a type 2, 3, or 5 trap, you must use the first variable in the trap's variable binding field to identify the interface responding to the trap.

* Specific-code
  
  If an agent sends a type 6 trap, the value in the Specific-code field specifies an event defined by the agent. If the trap type is not 6, this field value is 0.
* Timestamp
  
  This specifies the duration from when an agent is initializing to when an event reported by a trap occurs. This value is expressed in 10 ms. For example, a timestamp of 1908 means that an event occurred 19080 ms after initialization of the agent.