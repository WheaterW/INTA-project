Configuration Precautions for M-LAG
===================================

Configuration Precautions for M-LAG

#### Licensing Requirements

M-LAG upgrade in maintenance mode and the M-LAG virtual peer-link function are under license control (CE-LIC-LU and CE-LIC-VPMLAG), and other M-LAG functions are not under license control.


#### Hardware Requirements

**Table 1** Hardware requirements
| Series | Models |
| --- | --- |
| CE6800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F |
| CE8800 series | CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |



#### Feature Requirements

**Table 2** Feature requirements
| Feature | Feature Requirements | Series | Models |
| --- | --- | --- | --- |
| Common mechanism | In a scenario where a peer-link interface fails, performing DAD after the default delay of 3 seconds may cause the following problems:  1. A fast protocol such as BFD for M-LAG may incorrectly report a Down event. It is recommended that the BFD detection time be greater than the DAD delay upon failure of the peer-link.  2. For a single-homed access device, the convergence performance is poor when traffic is forwarded from the peer-link to the single-homed access device. You can adjust the DAD delay to solve this problem. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | For the CE8800 Series:  When STP or V-STP is enabled globally, if uplink interfaces of M-LAG devices are VLANIF interfaces, STP considers that a loop occurs on the interconnection interfaces and peer-link interfaces (physical or virtual peer-link interfaces) during STP calculation and blocks the uplink because peer-link interfaces are added to all created VLANs by default, causing traffic forwarding exceptions.  The solutions are as follows:  (1) Configure the stp disable command on VLANIF interfaces that function as uplink interfaces, and remove physical or virtual peer-link interfaces from the VLAN to which uplink interfaces belong.  (2) Configure Layer 3 main interfaces as uplink interfaces.  For the CE6800 Series:  For the CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6885-LL-56F (low latency mode):  When STP or V-STP is enabled globally, if uplink interfaces of M-LAG devices are VLANIF interfaces, STP considers that a loop occurs on the interconnection interfaces and physical peer-link interfaces during STP calculation and blocks the uplink because peer-link interfaces are added to all created VLANs by default, causing traffic forwarding exceptions.  The solutions are as follows:  (1) Configure the stp disable command on VLANIF interfaces that function as uplink interfaces, and remove physical peer-link interfaces from the VLAN to which uplink interfaces belong.  (2) Configure Layer 3 main interfaces as uplink interfaces.  For the CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F:  When STP or V-STP is enabled globally, if uplink interfaces of M-LAG devices are VLANIF interfaces, STP considers that a loop occurs on the interconnection interfaces and peer-link interfaces (physical or virtual peer-link interfaces) during STP calculation and blocks the uplink because peer-link interfaces are added to all created VLANs by default, causing traffic forwarding exceptions.  The solutions are as follows:  (1) Configure the stp disable command on VLANIF interfaces that function as uplink interfaces, and remove physical or virtual peer-link interfaces from the VLAN to which uplink interfaces belong.  (2) Configure Layer 3 main interfaces as uplink interfaces. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | 1. When a group of M-LAG devices are deployed as dual-active gateways, the deployment cannot be implemented by configuring VRRP or VRRP6. You need to deploy them by configuring IP addresses and virtual MAC addresses for VLANIF/VBDIF interfaces.  2. VRRP can be configured on two groups of M-LAG devices to implement master/backup protection. However, VRRP negotiation packets cannot be synchronized through peer-link interfaces. Therefore, you need to change the VRRP priorities of the two M-LAG devices in the same group so that the VRRP master/backup status of the two M-LAG devices can be switched normally.  3. VRRP6 cannot be used to implement master/backup protection for two groups of M-LAG devices. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | 1. During VBST configuration, M-LAG device fault recovery, or M-LAG interface fault recovery, the STP status of M-LAG interfaces on the two devices may be temporarily different. However, functions are not affected and loops do not occur.  2. In a VBST scenario, an M-LAG master/backup switchover may cause STP slow convergence, and the specification is the same as the STP slow convergence specification.  3. After VBST is enabled, stp vlan cost, stp vlan priority, and stp point-to-point cannot be set to non-default values on M-LAG interfaces. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | For the CE6800 Series:  When VBST is enabled globally, if uplink interfaces of M-LAG devices are VLANIF interfaces, VBST considers that a loop occurs on the interconnection interfaces and peer-link interfaces (physical or virtual peer-link interfaces) during VBST calculation and blocks the uplink because peer-link interfaces are added to all created VLANs by default, causing traffic forwarding exceptions.  The solutions are as follows:  (1) Configure the stp disable command on VLANIF interfaces that function as uplink interfaces, and remove physical or virtual peer-link interfaces from the VLAN to which uplink interfaces belong.  (2) Configure Layer 3 main interfaces as uplink interfaces.  For the CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6885-LL-56F (low latency mode):  Virtual peer-link interfaces are not supported because VXLAN is not supported.  For the CE8800 Series:  When VBST is enabled globally, if uplink interfaces of M-LAG devices are VLANIF interfaces, VBST considers that a loop occurs on the interconnection interfaces and peer-link interfaces (physical or virtual peer-link interfaces) during VBST calculation and blocks the uplink because peer-link interfaces are added to all created VLANs by default, causing traffic forwarding exceptions.  The solutions are as follows:  (1) Configure the stp disable command on VLANIF interfaces that function as uplink interfaces, and remove physical or virtual peer-link interfaces from the VLAN to which uplink interfaces belong.  (2) Configure Layer 3 main interfaces as uplink interfaces. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | If both the configurations of the set up-delay and m-lag up-delay commands exist, the m-lag up-delay command configuration takes effect. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | For the CE8800 Series:  The limitations on configuring an IP address bound to the DFS group and an IP address bound to the TCP channel for transmitting M-LAG protocol synchronization packets are as follows:  For IPv4 addresses:  1. Non-class A, B, and C IPv4 addresses are not supported.  2. Loopback addresses are not supported.  For IPv6 addresses:  1. Link-local addresses are not supported.  2. Multicast addresses are not supported.  3. Unspecified addresses are not supported.  4. Loopback addresses are not supported.  For the CE6800 Series:  The limitations on configuring an IP address bound to the DFS group and an IP address bound to the TCP channel for transmitting M-LAG protocol synchronization packets are as follows:  For IPv4 addresses:  1. Non-class A, B, and C IPv4 addresses are not supported.  2. Loopback addresses are not supported.  For IPv6 addresses:  1. Link-local addresses are not supported.  2. Multicast addresses are not supported.  3. Unspecified addresses are not supported.  4. Loopback addresses are not supported.  For the CE6885-LL-56F (low latency mode):  IPv6 is not supported. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | After the peer IP address is configured, you are advised to configure the UDP port number and ensure that the UDP port number configured on the local device is the same as that configured on the peer device. If the UDP port number is not configured, the DAD link may fail to be established, causing the M-LAG to split. As a result, two M-LAG master devices exist. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | M-LAG is a Huawei proprietary protocol and cannot be used to establish an M-LAG with non-Huawei devices.  Note: Currently, M-LAG technologies of vendors in the industry are implemented using proprietary protocols and devices from different vendors cannot establish an M-LAG. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | An M-LAG member interface must be a Layer 2 Eth-Trunk interface.  If there are multiple member interfaces in an M-LAG member interface, these member interfaces can be deployed on different cards to improve reliability. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | 1. The two devices that establish an M-LAG must be of the same type and can use different software versions.  For example:  (1) If one device is a modular device, the other device must also be a modular device.  (2) If one device is a fixed device, the other device must also be a fixed device.  2. Devices using different chips cannot establish an M-LAG.  3. CE series switches cannot establish an M-LAG with S series switches.  4. It is recommended that the models and versions of the two M-LAG member devices be the same.  A V300 series device and a V200 series device cannot establish an M-LAG. When they attempt to establish an M-LAG, the operation fails, and the value of Causation indicates a version mismatch. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | For the CE6800 Series:  The following configurations must be consistent on M-LAG member devices:  Global configurations:  1. VLANIF interface (including the VLANIF interface status)  2. VLAN  3. VRRP configuration  4. BD and bindings between BDs and VNIs  5. VBDIF interface (including the VBDIF interface status)  6. STP enabling configuration, STP mode, BPDU protection, and bindings between VLANs and instances  7. Static MAC addresses in which the outbound interface is an M-LAG interface in a VLAN  8. Static MAC addresses pointing to a VXLAN tunnel  9. MAC address aging time configuration  10. LACP system ID and priority configuration  11. Static ARP configuration, including:  (1) Short static ARP entries  (2) Long static ARP entries. If outbound interfaces are specified in static ARP entries, only the static ARP entries with the outbound interface being an M-LAG member interface are checked. Static ARP entries with the outbound interface being sub-interfaces of an M-LAG member interface cannot be checked.  (3) If VLANs are specified in static ARP entries, the VLAN IDs are compared.  (4) If both outbound interfaces and VLANs are specified in static ARP entries, only the entries with the outbound interface being an M-LAG member interface and the VLAN ID in the entries are compared.  (5) Static ARP entry for an IPv4 VXLAN tunnel  12. ARP aging time configuration  M-LAG member interface:  1. STP enabling configuration, STP priority, and STP root protection  2. LACP mode  3. Bindings between ports and VLANs  4. M-LAG ID  5. Number of M-LAG Eth-Trunk member interfaces  Limitations on displaying M-LAG consistency check results:  1. When there are many items such as BD, VLAN, VLANIF, VBDIF, and STP instances, only 16 inconsistent configuration items are displayed.  2. On all device models, only virtual MAC address configurations are checked for VLANIF and VBDIF interfaces.  3. If the local VLANIF/VBDIF interface is not up and no VLANIF/VBDIF interface is configured on the peer end, consistency check is successful.  4. When multiple IPv6 addresses and VRRP configurations are different on the same VBDIF or VLANIF interface, only four inconsistent items are displayed.  The following configurations must also be consistent on M-LAG member devices:  Global configurations:  1. V-STP enabling configuration  2. Type of packets for electing the M-LAG master and backup member interfaces  3. Bindings between BDs and mapping VNIs  4. Global STP configuration in a VLAN  M-LAG member interface:  1. M-LAG LACP system ID configuration  2. M-LAG LACP priority configuration  3. STP edge port configuration  4. M-LAG active/standby mode configuration  Peer-link interface:  1. Whether STP is enabled on a peer-link interface, LACP mode, and exclude VLAN  For the CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6885-LL-56F (low latency mode):  The VXLAN feature is not supported. Configurations related to BDs, bindings between BDs and VNIs, and VBDIF interfaces are not involved.  For the CE8800 Series:  The following configurations must be consistent on M-LAG member devices:  Global configurations:  1. VLANIF interface (including the VLANIF interface status)  2. VLAN  3. VRRP configuration  4. BD and bindings between BDs and VNIs  5. VBDIF interface (including the VBDIF interface status)  6. STP enabling configuration, STP mode, BPDU protection, and bindings between VLANs and instances  7. Static MAC addresses in which the outbound interface is an M-LAG interface in a VLAN  8. Static MAC addresses pointing to a VXLAN tunnel  9. MAC address aging time configuration  10. LACP system ID and priority configuration  11. Static ARP configuration, including:  (1) Short static ARP entries  (2) Long static ARP entries. If outbound interfaces are specified in static ARP entries, only the static ARP entries with the outbound interface being an M-LAG member interface are checked. Static ARP entries with the outbound interface being sub-interfaces of an M-LAG member interface cannot be checked.  (3) If VLANs are specified in static ARP entries, the VLAN IDs are compared.  (4) If both outbound interfaces and VLANs are specified in static ARP entries, only the entries with the outbound interface being an M-LAG member interface and the VLAN ID in the entries are compared.  (5) Static ARP entry for an IPv4 VXLAN tunnel  12. ARP aging time configuration  M-LAG member interface:  1. STP enabling configuration, STP priority, and STP root protection  2. LACP mode  3. Bindings between ports and VLANs  4. M-LAG ID  5. Number of M-LAG Eth-Trunk member interfaces  Limitations on displaying M-LAG consistency check results:  1. When there are many items such as BD, VLAN, VLANIF, VBDIF, and STP instances, only 16 inconsistent configuration items are displayed.  2. On all device models, only virtual MAC address configurations are checked for VLANIF and VBDIF interfaces.  3. If the local VLANIF/VBDIF interface is not up and no VLANIF/VBDIF interface is configured on the peer end, consistency check is successful.  4. When multiple IPv6 addresses and VRRP configurations are different on the same VBDIF or VLANIF interface, only four inconsistent items are displayed.  The following configurations must also be consistent on M-LAG member devices:  Global configurations:  1. V-STP enabling configuration  2. Type of packets for electing the M-LAG master and backup member interfaces  3. Bindings between BDs and mapping VNIs  4. Global STP configuration in a VLAN  M-LAG member interface:  1. M-LAG LACP system ID configuration  2. M-LAG LACP priority configuration  3. STP edge port configuration  4. M-LAG active/standby mode configuration  Peer-link interface:  1. Whether STP is enabled on a peer-link interface, LACP mode, and exclude VLAN | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | The MAC address specifications of the interfaces with the same M-LAG ID on different M-LAG member devices must be the same. If the limit on the number of MAC addresses is less than the current number of MAC addresses on the M-LAG interfaces, the MAC address specifications of the interfaces with the same M-LAG ID on the two M-LAG member devices are different.  Note: If the configured limit on the number of MAC address entries on an M-LAG interface is smaller than the actual number of learned MAC addresses, an alarm is generated. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | Limitations on Layer 2 sub-interfaces of M-LAG member interfaces  1. In the current version, consistency check cannot be performed on the Layer 2 sub-interface configurations of M-LAG member interfaces.  2. In dual-homing scenarios, when a Layer 2 sub-interface of an M-LAG member interface is shut down, traffic of this Layer 2 sub-interface cannot be forwarded. Exercise caution when performing the shutdown operation on Layer 2 sub-interfaces. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | VXLAN tunnels and VXLAN bypass tunnels cannot be established over M-LAG interfaces.  Note: For this limitation, commands are not mutually exclusive. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | If Type 1 configuration consistency check fails, the M-LAG master device cannot be restarted.  Cause: If Type 1 configuration consistency check fails, service interfaces on the M-LAG backup device will enter the error-down state (M-LAG consistency). In this scenario, if the M-LAG master device is restarted (service interfaces on the M-LAG backup device recover from the error-down state), the peer-link is preferentially restored to up when the M-LAG master device restarts. However, after the DFS protocol negotiation is successful, the system still detects a failure of the Type 1 configuration consistency check. Service interfaces on the M-LAG backup device will enter the error-down state again (M-LAG consistency). Since an M-LAG member interface goes up after a delay, the M-LAG master device takes a long time to recover from the restart (the convergence time is longer than the delay after which an M-LAG interface goes up).  Recommended solution: When the Type 1 configuration consistency check fails, the administrator needs to immediately adjust the inconsistent configurations to be consistent. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | If DFS group priorities are changed to trigger a switchover between the DFS master and backup devices and the peer-link interface is shut down at the same time, the device in error-down state may not be the backup device after the priority is changed, because of a time sequence error. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | After the error-down auto-recovery cause m-lag command is run, if the fault of a peer-link interface is not rectified, the interfaces in error-down state automatically restore to the up state after the configured recovery time. In this case, excess packets, packet loss, or communication failures may occur.  Limitation: M-LAG monitors the status of a peer-link interface. After the peer-link interface recovers, by default, the physical interfaces in error-down state automatically restore to the up state after the period specified by m-lag up-delay. In this case, the error-down auto-recovery cause m-lag command cannot be configured. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | After the error-down auto-recovery cause m-lag-consistency-check command is run, if Type 1 configurations are not manually adjusted to be consistent, the interfaces in error-down state automatically restore to the up state after the configured recovery time. In this case, M-LAG may run abnormally, excess packets may exist, packets may be lost, or packets may fail to be forwarded.  Limitation: M-LAG monitors Type 1 configuration consistency. After the configurations are manually adjusted to be consistent, the interfaces in error-down state automatically restore to the up state after the configured recovery time. In this case, the error-down auto-recovery cause m-lag-consistency-check command cannot be configured. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | 1. Packet loss or excess packets may occur during M-LAG configuration. If V-STP or a virtual STP root bridge is configured first, loops can be prevented during M-LAG configuration.  2. After all M-LAG configurations are complete, excess packets or packet loss within 1s is allowed.  In a scenario where both M-LAG and VBST are configured, packet loss or excess packets may occur during M-LAG configuration. If VBST is configured first, loops can be prevented during M-LAG configuration. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | There is broadcast traffic for a short period of time during M-LAG device failure and recovery, peer-link interface failure and recovery, and port STP status change caused by V-STP.  There is broadcast traffic for a short period of time during M-LAG device failure and recovery, peer-link interface failure and recovery, and port STP status change caused by VBST. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | 1. V-STP can run only in STP/RSTP mode and is mutually exclusive with MSTP.  2. During V-STP configuration or when an M-LAG member device or member interface recovers from a fault, the STP status of the M-LAG member interfaces on the two M-LAG member devices may be inconsistent temporarily. This, however, does not affect functions and will not cause loops.  3. In a V-STP scenario, when an M-LAG master/backup switchover is triggered, STP convergence may be slow, and the specifications in this scenario are the same as the STP slow convergence specifications. In this case, you are advised to configure a virtual STP root bridge to prevent this problem.  4. After V-STP is enabled, stp cost, priority, and point-to-point cannot be changed to non-default values on M-LAG interfaces. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | When a device is dual-homed to member devices in an M-LAG or connected to the M-LAG in Layer 2 access mode, the error-down action cannot be disabled or delayed. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | For the CE8800 Series:  1. An M-LAG IPv4 address is a secondary IP address. Each VLANIF or VBDIF interface can be configured with only one M-LAG secondary IPv4 address. (Each VLANIF or VBDIF interface can be configured with a maximum of 255 secondary IP addresses.)  2. An M-LAG secondary IPv4 address must be unique on the entire network, and cannot be the same as any secondary address on the local device or other devices on the network.  3. A multicast, broadcast, or loopback address cannot be configured as an M-LAG IPv4 address.  4. If an M-LAG secondary IPv4 address has been configured on an interface and a new M-LAG secondary IPv4 address is configured on the interface, the new address overwrites the original one.  5. An M-LAG IPv4 address can be configured on a VLANIF or VBDIF interface only after a primary address is configured on the interface, and the M-LAG IPv4 address must be on the same network segment as the primary address.  For the CE6800 Series:  1. An M-LAG IPv4 address is a secondary IP address. Each VLANIF or VBDIF interface can be configured with only one M-LAG secondary IPv4 address. (Each VLANIF or VBDIF interface can be configured with a maximum of 255 secondary IP addresses.)  2. An M-LAG secondary IPv4 address must be unique on the entire network, and cannot be the same as any secondary address on the local device or other devices on the network.  3. A multicast, broadcast, or loopback address cannot be configured as an M-LAG IPv4 address.  4. If an M-LAG secondary IPv4 address has been configured on an interface and a new M-LAG secondary IPv4 address is configured on the interface, the new address overwrites the original one.  5. An M-LAG IPv4 address can be configured on a VLANIF or VBDIF interface only after a primary address is configured on the interface, and the M-LAG IPv4 address must be on the same network segment as the primary address.  For the CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6885-LL-56F (low latency mode):  The VXLAN feature is not supported. VBDIF-related limitations are not involved. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | For the CE8800 Series:  1. An M-LAG IPv6 address can only be a global unicast address. Each VLANIF or VBDIF interface can be configured with only one M-LAG IPv6 address and a maximum of 16 global unicast addresses.  2. An M-LAG IPv6 address must be unique on the entire network, and cannot be the same as any IPv6 address on the local device or other devices on the network.  3. A multicast, anycast, or loopback address cannot be configured as an M-LAG IPv6 address.  4. If an M-LAG IPv6 address has been configured on an interface and a new M-LAG IPv6 address is configured on the interface, the new address overwrites the original one.  5. A link-local address cannot be configured as an M-LAG IPv6 address.  6. Before configuring an M-LAG IPv6 address for an interface, you must enable IPv6 on the interface.  For the CE6800 Series:  1. An M-LAG IPv6 address can only be a global unicast address. Each VLANIF or VBDIF interface can be configured with only one M-LAG IPv6 address and a maximum of 16 global unicast addresses.  2. An M-LAG IPv6 address must be unique on the entire network, and cannot be the same as any IPv6 address on the local device or other devices on the network.  3. A multicast, anycast, or loopback address cannot be configured as an M-LAG IPv6 address.  4. If an M-LAG IPv6 address has been configured on an interface and a new M-LAG IPv6 address is configured on the interface, the new address overwrites the original one.  5. A link-local address cannot be configured as an M-LAG IPv6 address.  6. Before configuring an M-LAG IPv6 address for an interface, you must enable IPv6 on the interface.  For the CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K:  The VXLAN feature is not supported. VBDIF-related configuration limitations are not involved. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | For the CE6800 Series:  1. Each VLANIF or VBDIF interface can be configured with only one M-LAG link-local address. (Each VLANIF or VBDIF interface can be configured with only one link-local address.)  2. In the same VPN, the M-LAG link-local address cannot be the same as any link-local address on the local or remote M-LAG member device.  3. Before configuring an M-LAG link-local address for an interface, you must enable IPv6 on the interface.  For the CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K:  The VXLAN feature is not supported. VBDIF-related configuration limitations are not involved.  For the CE8800 Series:  1. Each VLANIF or VBDIF interface can be configured with only one M-LAG link-local address. (Each VLANIF or VBDIF interface can be configured with only one link-local address.)  2. In the same VPN, the M-LAG link-local address cannot be the same as any link-local address on the local or remote M-LAG member device.  3. Before configuring an M-LAG link-local address for an interface, you must enable IPv6 on the interface. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | 1. If the peer IP address for DAD is not configured, the enhanced DAD for double-fault failures function is not supported.  2. When the enhanced DAD for double-fault failures function is enabled and the error-down mode is routing-switch, if a loopback address is used for DAD, the loopback interface must be configured as a reserved interface.  3. When an M-LAG is connected to a Layer 2 network (the network side is a Layer 2 network), the error-down mode cannot be set to routing-switch. Otherwise, traffic may fail to be forwarded.  4. If the DAD link is deployed on an underlay network, that is, DAD packets (heartbeat packets) pass through the spine device on the underlay network, there is a limitation that the M-LAG does not support the enhanced DAD for double-fault failures function.  Cause: When the peer-link fails, the uplink interface and M-LAG interface of the M-LAG backup device are set to error-down and isolated by default. After the uplink interface is set to down, heartbeat packets are lost. As a result, the M-LAG backup device incorrectly considers the failure as a double-fault failure and interfaces on the device recover from the error-down state. As a result, the dual-active status flaps repeatedly.  Solution:  1. Deploy the DAD link between management interfaces, and configure peer IP addresses for DAD.  2. Deploy the DAD link between independent directly connected Layer 3 main interfaces, configure the interfaces as reserved interfaces, and configure peer IP addresses for DAD.  3. When the DAD link is deployed on an underlay network, set the error-down mode to routing-switch, and configure peer IP addresses for DAD. (However, the switchover performance is worse in the peer-link failure or double-fault failure scenario, which is directly proportional to the number of routes on M-LAG devices.) If a logical interface address is used for heartbeat, the logical interface must be configured as a reserved interface. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | For the CE8800 Series:  1. Assume that a traffic switchback delay is configured using the ospf peer hold-max-cost timer, ospfv3 peer hold-max-cost timer, or advertise lowest-priority all-address-family peer-up command on the device. After the device is restarted, if the maintenance command is not deleted when the traffic switchback delay is reached, the maintenance mode still takes effect; if the maintenance command is deleted but the traffic switchback delay is not reached, traffic is switched back when the delay is reached.  2. In the current version, only OSPF, OSPFv3, BGP, BGP4+, and LACP are supported. Other protocols, such as IS-IS, PIM, RIP, and VRRP, are not supported.  3. The peer device cannot divert traffic to the local device through static routes or policy-based routes.  4. In M-LAG scenarios, east-west traffic does not support zero packet loss. The convergence performance indicator is 50 ms for each M-LAG interface (STP disabled).  For the CE6800 Series:  1. Assume that a traffic switchback delay is configured using the ospf peer hold-max-cost timer, ospfv3 peer hold-max-cost timer, or advertise lowest-priority all-address-family peer-up command on the device. After the device is restarted, if the maintenance command is not deleted when the traffic switchback delay is reached, the maintenance mode still takes effect; if the maintenance command is deleted but the traffic switchback delay is not reached, traffic is switched back when the delay is reached.  2. In the current version, only OSPF, OSPFv3, BGP, BGP4+, and LACP are supported. Other protocols, such as IS-IS, PIM, RIP, and VRRP, are not supported.  3. The peer device cannot divert traffic to the local device through static routes or policy-based routes.  4. In M-LAG scenarios, east-west traffic does not support zero packet loss. The convergence performance indicator is 50 ms for each M-LAG interface (STP disabled).  For the CE6885-LL-56F (low latency mode):  IPv6 is not supported. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | The uplink interface policy is introduced to DAD preemption. It is required that the heartbeat link is an independent link or a link between management interfaces. That is, when the uplink interface and peer-link fail, the heartbeat status can be negotiated normally. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | For the CE8800 Series:  In M-LAG active/standby mode, the M-LAG master and backup member interface election depends on the packets sent to the CPU for electing the M-LAG master member interface.  To ensure that IGMP/DHCP packets for electing the M-LAG master member interface are sent to the CPU, you need to enable IGMP snooping in a VLAN or BD so that the M-LAG master and backup member interface election can be performed through IGMP packets. Alternatively, you need to enable DHCP globally so that the M-LAG master and backup member interface election can be performed through DHCP packets.  In addition, when an M-LAG device functions as a Layer 2 transparent transmission device or Layer 2 gateway, ARP/ND packets are not sent to the CPU, and the M-LAG master and backup member interface election cannot be performed through packets for electing the M-LAG master member interface. In this case, you need to enable ARP broadcast suppression or Layer 2 proxy in a BD, or enable Layer 2 proxy ARP in a VLAN so that the M-LAG master and backup member interface election can be performed through ARP packets, and you need to enable NS multicast suppression in a BD so that the M-LAG master and backup member interface election can be performed through ND packets.  To ensure that MLD packets for electing the M-LAG master member interface are sent to the CPU, you need to enable MLD snooping in a VLAN or BD so that the M-LAG master and backup member interface election can be performed through MLD packets.  For the CE6800 Series:  In M-LAG active/standby mode, the M-LAG master and backup member interface election depends on the packets sent to the CPU for electing the M-LAG master member interface.  To ensure that IGMP/DHCP packets for electing the M-LAG master member interface are sent to the CPU, you need to enable IGMP snooping in a VLAN or BD so that the M-LAG master and backup member interface election can be performed through IGMP packets. Alternatively, you need to enable DHCP globally so that the M-LAG master and backup member interface election can be performed through DHCP packets.  In addition, when an M-LAG device functions as a Layer 2 transparent transmission device or Layer 2 gateway, ARP/ND packets are not sent to the CPU, and the M-LAG master and backup member interface election cannot be performed through packets for electing the M-LAG master member interface. In this case, you need to enable ARP broadcast suppression or Layer 2 proxy in a BD, or enable Layer 2 proxy ARP in a VLAN so that the M-LAG master and backup member interface election can be performed through ARP packets, and you need to enable NS multicast suppression in a BD so that the M-LAG master and backup member interface election can be performed through ND packets.  To ensure that MLD packets for electing the M-LAG master member interface are sent to the CPU, you need to enable MLD snooping in a VLAN so that the M-LAG master and backup member interface election can be performed through MLD packets.  For the CE6885-LL-56F (low latency mode):  VXLAN and IPv6 are not supported. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | M-LAG and IPSG are mutually exclusive. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | For the CE6800 Series:  M-LAG and NAC are mutually exclusive. | CE6800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K |
| Common mechanism | During M-LAG setup, you must use optical or copper modules that are certified for Huawei Ethernet switches. If high-speed cables or active optical cables (AOCs) are used, you must purchase cables from Huawei. Optical or copper modules that are not certified for Huawei devices, and cables not purchased from Huawei cannot ensure transmission reliability and may affect service stability. Huawei is not liable for any problem caused by the use of optical or copper modules that are not certified for Huawei Ethernet switches, or cables not purchased from Huawei, and will not fix such problems. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | A Layer 3 Eth-Trunk main interface cannot function as an M-LAG interface. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | When M-LAG member devices function as dual-active gateways, the m-lag forward layer-3 enhanced enable command is configured, and Layer 3 traffic is forwarded through the peer-link, if a traffic policy is configured on the corresponding VLANIF or VBDIF interface, Layer 3 traffic is incorrectly matched. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Common mechanism | Policy-based VLAN translation changes the VLAN ID of original M-LAG protocol packets. The modified M-LAG protocol packets cannot match the rule and cannot be sent to the CPU. As a result, M-LAG pairing fails. You need to modify the matching range of the policy to prevent M-LAG pairing failures. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P |
| Common mechanism | Before replacing a device in an M-LAG, run the lacp m-lag system-id command on the new device to replace the M-LAG LACP system ID of the new device with the current M-LAG system ID, preventing LACP flapping on the peer M-LAG device. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P |
| Physical peer-link M-LAG | For the CE6800 Series:  In M-LAG networking, a device obtains ARP/ND packets destined for other devices. When a large number of such packets exist, sending ARP/ND packets to the CPU on the device will be affected. As a result, the ARP/ND entry learning and synchronization rate decreases.  For the CE6885-LL-56F (low latency mode):  In M-LAG networking, a device obtains ARP packets destined for other devices. When a large number of such packets exist, sending ARP packets to the CPU on the device will be affected. As a result, the ARP entry learning and synchronization rate decreases. ND is not supported.  For the CE8800 Series:  In M-LAG networking, a device obtains ARP/ND packets destined for other devices. When a large number of such packets exist, sending ARP/ND packets to the CPU on the device will be affected. As a result, the ARP/ND entry learning and synchronization rate decreases. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Physical peer-link M-LAG | A peer-link interface must be a Layer 2 Eth-Trunk interface. After an interface is configured as a peer-link interface, other services cannot be configured on the interface.  When member interfaces of a peer-link interface are on the same card, a fault of the card will cause a peer-link fault. To improve reliability, it is recommended that member interfaces of a peer-link interface be deployed on different cards. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Physical peer-link M-LAG | In an M-LAG active-active system with physical peer-link interfaces on a VXLAN network, a VXLAN bypass tunnel must be established on VLANIF interfaces corresponding to peer-link interfaces on the underlay network. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Physical peer-link M-LAG | For the CE8800 Series:  A peer-link interface does not learn ARP, ND, and MAC address entries from user-side packets.  1. ARP and ND entries are not learned by the peer-link interface and need to be synchronized.  2. MAC address entries are not learned by the peer-link interface and need to be synchronized.  For the CE6800 Series:  A peer-link interface does not learn ARP, ND, and MAC address entries from user-side packets.  1. ARP and ND entries are not learned by the peer-link interface and need to be synchronized.  2. MAC address entries are not learned by the peer-link interface and need to be synchronized.  For the CE6885-LL-56F (low latency mode):  ND is not supported. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Physical peer-link M-LAG | For the CE8800 Series:  1. The VLANIF/VBDIF interfaces on M-LAG dual-active gateways must be configured with the same gateway IP address and MAC address, and the MAC addresses of the VLANIF/VBDIF interfaces must be virtual MAC addresses.  2. When there are only peer-link member interfaces and no M-LAG member interfaces in the VLAN corresponding to VLANIF interfaces, the VLANIF interfaces cannot be configured with virtual MAC addresses.  3. When there are M-LAG member interfaces in the VLAN/BD corresponding to VLANIF/VBDIF interfaces and different IP and MAC addresses are configured for the interfaces, there are the following limitations:  (1) Virtual MAC addresses cannot be configured for the VLANIF/VBDIF interfaces.  (2) IP addresses of the interfaces can be used only as management gateway addresses. If they are used as data gateway addresses, packet loss may occur.  For the CE6800 Series:  1. The VLANIF/VBDIF interfaces on M-LAG dual-active gateways must be configured with the same gateway IP address and MAC address, and the MAC addresses of the VLANIF/VBDIF interfaces must be virtual MAC addresses.  2. When there are only peer-link member interfaces and no M-LAG member interfaces in the VLAN corresponding to VLANIF interfaces, the VLANIF interfaces cannot be configured with virtual MAC addresses.  3. When there are M-LAG member interfaces in the VLAN/BD corresponding to VLANIF/VBDIF interfaces and different IP and MAC addresses are configured for the interfaces, there are the following limitations:  (1) Virtual MAC addresses cannot be configured for the VLANIF/VBDIF interfaces.  (2) IP addresses of the interfaces can be used only as management gateway addresses. If they are used as data gateway addresses, packet loss may occur.  For the CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6885-LL-56F (low latency mode):  The VXLAN feature is not supported. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Physical peer-link M-LAG | For the CE6800 Series:  Limitations on configuring a dynamic routing protocol over M-LAG:  1. When ARP/ND entries are synchronized and ARP/ND packets are not synchronized in an M-LAG, you need to configure proxy ARP/ND.  2. A 128-bit direct route is generated for the dedicated M-LAG IPv6 address on an M-LAG device. After the import direct command is configured, the direct route is imported to the network side. A routing protocol advertises the route to the remote M-LAG device through the spine node. An ND entry on the remote M-LAG device may be overwritten by the 128-bit route advertised by the routing protocol. As a result, traffic forwarding is abnormal. You are advised to run the ipv6 nd direct-route enable command on the M-LAG device to configure IPv6 NDP Vlink direct route advertisement and then import the direct route to the network side. In a VLANIF access scenario, run the ipv6 nd direct-route preference command to set the priority of IPv6 NDP Vlink direct routes to be higher than that of the routing protocol used by the M-LAG and spine nodes.  3. In a dynamic routing protocol over M-LAG scenario, you also need to perform the following configurations:  (1) Run the ip direct-routing-table local-host-route advertise enable or ipv6 direct-routing-table local-host-route advertise enable command in the system view to enable the local interface to advertise IPv4 or IPv6 addresses. (2) Run the import direct command in the view of the routing protocol. If both configurations exist, the IPv4 and IPv6 addresses of the local M-LAG device interface are advertised. When these addresses are advertised to the remote M-LAG device, the ARP and ND entries on the remote M-LAG device are overwritten by the direct routes. As a result, traffic forwarding is abnormal.  For the CE6885-LL-56F (low latency mode):  IPv6 is not supported.  For the CE8800 Series:  Limitations on configuring a dynamic routing protocol over M-LAG:  1. When ARP/ND entries are synchronized and ARP/ND packets are not synchronized in an M-LAG, you need to configure proxy ARP/ND.  2. A 128-bit direct route is generated for the dedicated M-LAG IPv6 address on an M-LAG device. After the import direct command is configured, the direct route is imported to the network side. A routing protocol advertises the route to the remote M-LAG device through the spine node. An ND entry on the remote M-LAG device may be overwritten by the 128-bit route advertised by the routing protocol. As a result, traffic forwarding is abnormal. You are advised to run the ipv6 nd direct-route enable command on the M-LAG device to configure IPv6 NDP Vlink direct route advertisement and then import the direct route to the network side. In a VLANIF access scenario, run the ipv6 nd direct-route preference command to set the priority of IPv6 NDP Vlink direct routes to be higher than that of the routing protocol used by the M-LAG and spine nodes.  3. In a dynamic routing protocol over M-LAG scenario, you also need to perform the following configurations:  (1) Run the ip direct-routing-table local-host-route advertise enable or ipv6 direct-routing-table local-host-route advertise enable command in the system view to enable the local interface to advertise IPv4 or IPv6 addresses. (2) Run the import direct command in the view of the routing protocol. If both configurations exist, the IPv4 and IPv6 addresses of the local M-LAG device interface are advertised. When these addresses are advertised to the remote M-LAG device, the ARP and ND entries on the remote M-LAG device are overwritten by the direct routes. As a result, traffic forwarding is abnormal. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Physical peer-link M-LAG | In an M-LAG scenario where ND entry synchronization is used, you need to run the ipv6 nd na glean command on the M-LAG gateway to configure the device to generate ND entries on an interface upon receipt of valid NA messages if no ND entry exists on the interface. This prevents the M-LAG device from failing to learn ND entries of hosts. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Physical peer-link M-LAG | When the dynamic routing protocol over M-LAG function is enabled, you need to specify the M-LAG IP address of the local device or a non-primary IP address as the source IP address when pinging the M-LAG IP address of the M-LAG interface on the remote device. Otherwise, the ping fails. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Physical peer-link M-LAG | For the CE8800 Series:  Deployment suggestions: Peer-link interfaces are internal interfaces in an M-LAG. You are advised not to configure storm suppression on the physical member interfaces of the Eth-Trunk interfaces that function as peer-link interfaces.  Impact: The two devices send M-LAG synchronization packets through the peer-link to synchronize local information to the peer device in real time. M-LAG synchronization packets contain MAC address entries, ARP entries, ND entries, and STP, VRRP, ICMP, IGMP, and PIM protocol packet information. If multicast storm suppression is configured on a physical member interface of the peer-link, M-LAG synchronization packets in the M-LAG may be suppressed. As a result, data packets in the M-LAG cannot be forwarded properly.  For the CE6800 Series:  Deployment suggestions: Peer-link interfaces are internal interfaces in an M-LAG. You are advised not to configure storm suppression on the physical member interfaces of the Eth-Trunk interfaces that function as peer-link interfaces.  Impact: The two devices send M-LAG synchronization packets through the peer-link to synchronize local information to the peer device in real time. M-LAG synchronization packets contain MAC address entries, ARP entries, ND entries, and STP, VRRP, ICMP, IGMP, and PIM protocol packet information. If multicast storm suppression is configured on a physical member interface of the peer-link, M-LAG synchronization packets in the M-LAG may be suppressed. As a result, data packets in the M-LAG cannot be forwarded properly.  For the CE6885-LL-56F (low latency mode):  ND is not supported. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Physical peer-link M-LAG | 1. In an M-LAG VBDIF/VLANIF dual-active scenario where the M-LAG master device tracerts the host address of the server: When tracert response packets are forwarded to the M-LAG backup device, the tracert operation fails. If communication is required, use the ping -a parameter to specify the dedicated IP address of the M-LAG device as the source address.  2. In an M-LAG VBDIF/VLANIF dual-active scenario where the M-LAG master device pings the host address of the server: When ping reply packets are forwarded to the M-LAG backup device and fragmented, the ping fails. If communication is required, use the ping -a parameter to specify the dedicated IP address of the M-LAG device as the source address. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Physical peer-link M-LAG | In an M-LAG scenario, M-LAG member interfaces in active/standby mode cannot be configured as next-hop outbound interfaces of FRR or ECMP routes. Otherwise, traffic packets are directly forwarded through the M-LAG member interface in the backup state. | CE6800 series  CE8800 series | CE6820H-48S6CQ/CE6820S-48S6CQ/CE6820H-48S6CQ-K/CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6863H-48S6CQ/CE6863H-48S6CQ-K/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6881H-48S6CQ/CE6881H-48S6CQ-K/CE6881H-48T6CQ/CE6881H-48T6CQ-K/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-LL-56F (low latency mode)/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Virtual Peer-Link M-LAG | 1. The VLANIF/VBDIF interfaces on M-LAG dual-active gateways must be configured with the same gateway IP address and MAC address, and the MAC addresses of the VLANIF/VBDIF interfaces must be virtual MAC addresses.  2. When there are only peer-link member interfaces and no M-LAG member interfaces in the VLAN corresponding to VLANIF interfaces, the VLANIF interfaces cannot be configured with virtual MAC addresses.  3. When there are M-LAG member interfaces in the VLAN/BD corresponding to VLANIF/VBDIF interfaces and different IP and MAC addresses are configured for the interfaces, there are the following limitations:  (1) Virtual MAC addresses cannot be configured for the VLANIF/VBDIF interfaces.  (2) IP addresses of the interfaces can be used only as management gateway addresses. If they are used as data gateway addresses, packet loss may occur. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Virtual Peer-Link M-LAG | Limitations on configuring a dynamic routing protocol over M-LAG:  1. When ARP/ND entries are synchronized and ARP/ND packets are not synchronized in an M-LAG, you need to configure proxy ARP/ND.  2. A 128-bit direct route is generated for the dedicated M-LAG IPv6 address on an M-LAG device. After the import direct command is configured, the direct route is imported to the network side. A routing protocol advertises the route to the remote M-LAG device through the spine node. An ND entry on the remote M-LAG device may be overwritten by the 128-bit route advertised by the routing protocol. As a result, traffic forwarding is abnormal. You are advised to run the ipv6 nd direct-route enable command on the M-LAG device to configure IPv6 NDP Vlink direct route advertisement and then import the direct route to the network side. In a VLANIF access scenario, run the ipv6 nd direct-route preference command to set the priority of IPv6 NDP Vlink direct routes to be higher than that of the routing protocol used by the M-LAG and spine nodes.  3. In a dynamic routing protocol over M-LAG scenario, you also need to perform the following configurations:  (1) Run the ip direct-routing-table local-host-route advertise enable or ipv6 direct-routing-table local-host-route advertise enable command in the system view to enable the local interface to advertise IPv4 or IPv6 addresses. (2) Run the import direct command in the view of the routing protocol. If both configurations exist, the IPv4 and IPv6 addresses of the local M-LAG device interface are advertised. When these addresses are advertised to the remote M-LAG device, the ARP and ND entries on the remote M-LAG device are overwritten by the direct routes. As a result, traffic forwarding is abnormal. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Virtual Peer-Link M-LAG | In an M-LAG scenario where ND entry synchronization is used, you need to run the ipv6 nd na glean command on the M-LAG gateway to configure the device to generate ND entries on an interface upon receipt of valid NA messages if no ND entry exists on the interface. This prevents the M-LAG device from failing to learn ND entries of hosts. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Virtual Peer-Link M-LAG | When the dynamic routing protocol over M-LAG function is enabled, you need to specify the M-LAG IP address of the local device or a non-primary IP address as the source IP address when pinging the M-LAG IP address of the M-LAG interface on the remote device. Otherwise, the ping fails. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Virtual Peer-Link M-LAG | The virtual peer-link interface must be a Layer 2 Eth-Trunk interface. After an interface is configured as a virtual peer-link interface, other services cannot be configured on the interface. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Virtual Peer-Link M-LAG | Reserved VNIs must be configured:  1. If reserved VNIs are not configured, an M-LAG cannot be set up.  2. The reserved VNIs on the two devices in an M-LAG must be the same. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Virtual Peer-Link M-LAG | Virtual peer-link interfaces do not learn ARP/ND/MAC address entries for user-side packets.  (1) ARP/ND learning is not performed on virtual peer-link interfaces, and entry synchronization is required.  (2) Hardware-based MAC address learning is not performed on virtual peer-link interfaces, and entry synchronization is required. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Virtual Peer-Link M-LAG | Networking limitations in a virtual peer-link M-LAG scenario:  1. Delayed route advertisement is not supported. If delayed route advertisement is enabled on the M-LAG device, service routes are not advertised and a bypass tunnel cannot be established. Once the delay expires, a bypass tunnel is established and service routes are advertised at the same time. As a result, packet loss lasts for a long time during traffic switchback.  2. Multi-level M-LAG networking is not supported.  3. Reserved VNIs must be configured. If no reserved VNI is configured, the M-LAG cannot be established.  4. Pure Layer 2 scenarios are not supported. Bypass tunnels require reachable Layer 3 routes.  5. A bypass tunnel is established using IP addresses of VLANIF interfaces. If two M-LAG devices are connected through multiple independent Layer 2 interfaces in the same broadcast domain, they are in square-shaped Layer 2 loop networking, the Eth-Trunk interfaces corresponding to the virtual peer-link interfaces must be deleted from the VLAN broadcast domain using a command, or the reserved for vxlan bypass command must be configured on the VLANIF interfaces.  6. In the virtual peer-link scenario, if the upstream interface is a VLANIF interface, STP needs to be disabled on the upstream interface.  7. Configure the upstream interface as an uplink interface and a reserved interface. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Virtual Peer-Link M-LAG | When the DAD heartbeat peer IP address and virtual peer-link are configured, there is a possibility that interfaces on the DFS backup device enter the error-down state. After the peer-link interface goes up, the interfaces in the error-down state recover.  Cause: When the DAD heartbeat peer IP address is configured, enhanced DAD for double-fault failures can be enabled. When the heartbeat status changes from lost to OK, if the peer-link status is down, interfaces on the backup device enter the error-down state. After the peer-link interface goes up, the peer-link fault recovery process is triggered, the interfaces in the error-down state recover, and the M-LAG interface goes up after a delay.  (1) When M-LAG is configured for the first time, you are advised to configure the following solutions to reduce the probability of incorrect error-down events on the backup device:  Solution 1: If the source IP address and peer IP address are configured first, you are advised to run the display dfs-group 1 heartbeat command to query the heartbeat status. After the heartbeat status is OK, configure the peer-link or virtual peer-link.  Solution 2: You are advised to configure the peer-link or virtual peer-link and a bypass tunnel first. After the peer-link interface goes up, configure the source IP address and peer IP address for DAD.  (2) In the fault recovery phase of the entire M-LAG device, use the following solutions to reduce the probability of error-down events on the backup device:  Solution 1: Run the dual-active detection hold-time command to set the dual-active detection delay during M-LAG heartbeat recovery to be at least 3s.  Solution 2: Set the delay for the network-side interface to go up to be at least 3s longer than the time for the peer-link to go up. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Virtual Peer-Link M-LAG | In M-LAG networking, a device obtains ARP/ND packets destined for other devices. When a large number of such packets exist, sending ARP/ND packets to the CPU on the device will be affected. As a result, the ARP/ND entry learning and synchronization rate decreases. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |
| Virtual Peer-Link M-LAG | Limitations on the VXLAN bypass tunnel configuration in a virtual peer-link M-LAG scenario  1. It is recommended that loopback interface addresses be used as the source and destination IP/IPv6 addresses for establishing a VXLAN bypass tunnel. If a Layer 3 interface address is used, the interface address can only be used by the VXLAN bypass tunnel and cannot be used to forward network-side service traffic.  2. If routing information for establishing a VXLAN bypass tunnel is advertised through the spine node, the physical link between M-LAG devices or the routing protocol established through the VXLAN tunnel between M-LAG devices cannot advertise routing information for establishing the VXLAN bypass tunnel.  3. When OSPF/OSPFv3 over M-LAG is configured in an M-LAG underlay scenario, the interface IP address used to establish a VXLAN bypass tunnel and the corresponding network segment routing information are exclusive to the network side and cannot be leaked to access-side routing protocols. The configuration limitations are as follows:  (1) When M-LAG devices and the network side use OSPF/OSPFv3 to advertise routing information for establishing a VXLAN bypass tunnel, it is recommended that different OSPF/OSPFv3 areas be used on the network side and user side of M-LAG devices to implement route isolation. M-LAG devices and the network side use a dedicated OSPF/OSPFv3 area to advertise routing information for establishing a VXLAN bypass tunnel. In addition, a routing policy needs to be configured on M-LAG devices to prevent the routing information for establishing a VXLAN bypass tunnel in the network-side OSPF/OSPFv3 area from being advertised to other areas.  (2) When M-LAG devices and the network side use other routing protocols to advertise routing information for establishing a VXLAN bypass tunnel, if user-side OSPF/OSPFv3 on M-LAG devices imports network-side routes, you need to specify the routes to be imported or configure a routing policy to shield routing information for establishing a VXLAN bypass tunnel.  4. In an M-LAG underlay scenario, there are the following limitations on the BGP/BGP4+ over M-LAG configuration:  (1) It is recommended that BGP/BGP4+ be used between M-LAG devices and the network side to advertise routing information for establishing a VXLAN bypass tunnel. If M-LAG devices have the same AS number, they cannot learn routes from each other. To prevent this problem, run the peer allow-as-loop command on M-LAG devices and the peer spine node to allow duplicate AS numbers.  (2) When an IGP routing protocol is used between M-LAG devices and the network side, you need to configure a routing policy on M-LAG devices to add a tag to the routes advertised by the server. In addition, when M-LAG devices import network-side routes, configure a routing policy to reject the routes with this tag. This prevents the route from M-LAG devices to the server from being incorrectly converged to the spine node because the IGP protocol has a higher priority than BGP on M-LAG devices. | CE6800 series  CE8800 series | CE6855-48XS8CQ/CE6860-HAM/CE6860-SAN/CE6866-48S8CQ-K/CE6866-48S8CQ-P/CE6885-48YS8CQ/CE6863E-48S8CQ/CE6885-LL-56F (standard forwarding mode)/CE6885-48YS8CQ-T/CE6885-SAN-56F  CE8850-HAM/CE8850-SAN/CE8851-32CQ8DQ-K/CE8851-32CQ8DQ-P/CE8855-32CQ4BQ/CE8851-32CQ4BQ |