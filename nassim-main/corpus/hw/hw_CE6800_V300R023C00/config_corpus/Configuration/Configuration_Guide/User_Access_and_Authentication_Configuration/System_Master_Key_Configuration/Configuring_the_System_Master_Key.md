Configuring the System Master Key
=================================

Configuring the System Master Key

#### Context

In an actual network environment, the network and devices are provided and maintained by network providers, and data belongs to users. If users want to ensure that the system master key is under their complete control, they need to have their own key management schemes.

There are three types of system master keys: automatically generated, user-defined, and default master keys. To enhance data security and reliability, manually change the system master key based on actual requirements.


#### Procedure

* Change the system master key to a user-defined master key.
  
  
  ```
  <HUAWEI> [set master-key](cmdqueryname=set+master-key)
  Enter the user password:    //Enter the current user password instead of the current system master key.
  Warning: This operation will automatically save configurations. Are you sure you want to perform it? [Y/N]:y 
  Do you want to enter the master key? (If you enter Y, you need to manually enter the master key and automatic key update stops. If you enter N, the system  automatically generates a master key. If you enter D, the system will change the current master key to the default master key.) [Y/N/D]:y 
  Info: Enter a new master key:         //Enter the system master key.
  Info: Confirm the new master key:
  Warning: Keep the new master key well.
  Info: Operating, please wait for a moment......done.
  Info: Operation succeeded.
  ```
* Change the system master key to the master key automatically generated by the system.
  
  
  ```
  <HUAWEI> [set master-key](cmdqueryname=set+master-key)
  Enter the user password:   //Enter the current user password instead of the current system master key.
  Warning: This operation will automatically save configurations. Are you sure you want to perform it? [Y/N]:y
  Do you want to enter the master key? (If you enter Y, you need to manually enter the master key and automatic key update stops. If you enter N, the system  automatically generates a master key.If you enter D, the system will change the current master key to the default master key.) [Y/N/D]:n 
  Info: Operating, please wait for a moment......done.
  Info: Operation succeeded.
  ```
  ![](public_sys-resources/note_3.0-en-us.png) 
  
  After the weak password dictionary maintenance function is enabled, the passwords defined in the weak password dictionary cannot be used. To check the passwords defined in the weak password dictionary, run the [**display security weak-password-dictionary**](cmdqueryname=display+security+weak-password-dictionary) command.
* Change the system master key to the default system master key.
  
  
  ```
  <HUAWEI> set master-key                                                      
  Enter the user password:    //Enter the current user password instead of the current system master key.
  Warning: This operation will automatically save configurations. Are you sure you want to perform it? [Y/N]:y
  Do you want to enter the master key? (If you enter Y, you need to manually enter the master key and automatic key update stops. If you enter N, the system automatically generates a master key. If you enter D, the system will change the current master key to the default master key.) [Y/N/D]:d
  Info: Operating, please wait for a moment......done.
  Info: Operation succeeded.
  ```
* Clear historical system master keys.
  
  
  ```
  [clear master-key](cmdqueryname=clear+master-key)
  ```

#### Verifying the Configuration

Run the [**display master-key configuration**](cmdqueryname=display+master-key+configuration) command to check whether the current system master key is the user-defined one, the one automatically generated by the system, or the default one.

Run the **[**display master-key version**](cmdqueryname=display+master-key+version)** command to check the version information of the key management CBB (KMC) on the current device.