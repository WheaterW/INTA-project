
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP4+ Keepalive and Hold Timers">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp6_cfg_0050.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp6_cfg_0052.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176661977">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP4+ Keepalive and Hold Timers</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176661977"></a><a name="EN-US_TASK_0000001176661977"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP4+ Keepalive and Hold Timers</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001176661977__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring BGP4+ Keepalive and Hold timers, you have completed the following task:</p>
<ul><li><a href="vrp_bgp6_cfg_0006.html">Configure basic BGP4+ functions</a>.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176661977__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After establishing a BGP4+ connection, two peers periodically send Keepalive messages to each other to monitor the status of the BGP4+ peer relationship. If a BGP4+ device does not receive any Keepalive message or any other type of messages from its peer within the Hold time, the device considers the BGP4+ connection to be closed and terminates the BGP4+ connection.</p>
<p>When establishing a BGP4+ connection, two peers compare their Hold time periods and select a smaller value as a negotiation result. If the negotiation result is 0, no Keepalive message is sent and whether the Hold timer expires is not detected.</p>
<div class="notice"><span class="noticetitle"><img src="public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>Changing timer values using the <a href="cmdqueryname=peer+timer"><b><span class="cmdname">peer timer</span></b></a> command will interrupt peer relationships between devices. Therefore, exercise caution when changing timer values.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176661977__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the BGP view.</span><p><pre class="screen"><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></pre>
</p></li><li><span>Set the Hold timer and Keepalive timer for a peer or peer group.</span><p><pre class="screen"><a href="cmdqueryname=peer+timer+keepalive+hold+min-holdtime"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv6-address</span></i> | <i><span class="varname">group-name</span></i> } <strong><span>timer</span></strong> <strong><span>keepalive</span></strong> <i><span class="varname">keepalive-time</span></i> <strong><span>hold</span></strong> <i><span class="varname">hold-time</span></i> [ <strong><span>min-holdtime</span></strong> <i><span class="varname">min-hold-value</span></i> ]</pre>
<p>Alternatively, configure the hold time during which the local device does not proactively disconnect from the peer device.</p>
<pre class="screen"><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <a href="cmdqueryname=timer+send-hold"><b><span class="cmdname">timer</span></b></a> <strong><span>send-hold</span></strong> <i><span class="varname">send-hold-time</span></i></pre>
<p>The value of <i><span class="varname">hold-time</span></i> must be at least three times the value of <i><span class="varname">keepalive-time</span></i>. <span>By default, the keepalive time is 60s, the hold time is 180s, and the hold time during which the local device does not proactively disconnect from the peer device is 360s.</span></p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p571713411355">You are advised to configure <i><span class="varname" id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_varname1699292344314">hold-time</span></i> according to the total number of peers in all BGP address families. The more peers, the larger the recommended minimum hold time value. You can adjust the hold time based on <a href="vrp_bgp_cfg_0089.html#EN-US_TASK_0000001130783924__table410763711163">Table 1</a>.</p>
</div></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Mapping between the total number of BGP peers in all address families and the recommended minimum hold time</caption><thead align="left"><tr id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_row510713710160"><th align="left" class="cellrowborder" valign="top" width="12.47%" id="mcps1.3.3.3.2.6.2.3.1.1" liSelected="liSelected"><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p1110717372163">Total Number of Peers</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="87.53%" id="mcps1.3.3.3.2.6.2.3.1.2" liSelected="liSelected"><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p010753721612">Recommended Minimum Hold Time</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_row51071037111610"><td class="cellrowborder" valign="top" width="12.47%" headers="mcps1.3.3.3.2.6.2.3.1.1 "><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p9530101461916">0â100</p>
</td>
<td class="cellrowborder" valign="top" width="87.53%" headers="mcps1.3.3.3.2.6.2.3.1.2 "><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p35301714161911">20</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_row610823741614"><td class="cellrowborder" valign="top" width="12.47%" headers="mcps1.3.3.3.2.6.2.3.1.1 "><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p205305142194">101â200</p>
</td>
<td class="cellrowborder" valign="top" width="87.53%" headers="mcps1.3.3.3.2.6.2.3.1.2 "><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p55301414181920">30</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_row201081337131615"><td class="cellrowborder" valign="top" width="12.47%" headers="mcps1.3.3.3.2.6.2.3.1.1 "><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p1753001441911">201â300</p>
</td>
<td class="cellrowborder" valign="top" width="87.53%" headers="mcps1.3.3.3.2.6.2.3.1.2 "><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p45301514151919">45</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_row171082371165"><td class="cellrowborder" valign="top" width="12.47%" headers="mcps1.3.3.3.2.6.2.3.1.1 "><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p125301614101919">301â400</p>
</td>
<td class="cellrowborder" valign="top" width="87.53%" headers="mcps1.3.3.3.2.6.2.3.1.2 "><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p053021419191">60</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_row15108123731613"><td class="cellrowborder" valign="top" width="12.47%" headers="mcps1.3.3.3.2.6.2.3.1.1 "><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p1053011141191">401â500</p>
</td>
<td class="cellrowborder" valign="top" width="87.53%" headers="mcps1.3.3.3.2.6.2.3.1.2 "><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p1153014149193">75</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_row1710883716168"><td class="cellrowborder" valign="top" width="12.47%" headers="mcps1.3.3.3.2.6.2.3.1.1 "><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p2530191421918">Greater than or equal to 501</p>
</td>
<td class="cellrowborder" valign="top" width="87.53%" headers="mcps1.3.3.3.2.6.2.3.1.2 "><p id="EN-US_TASK_0000001176661977__en-us_task_0000001130783924_p953071414192">90</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>Avoid the following situations when setting values for the timers:</p>
<ul><li><p>The values of <i><span class="varname">keepalive-time</span></i> and <i><span class="varname">hold-time</span></i> are both set to 0. In this case, the BGP4+ timers become invalid, and BGP4+ cannot detect link faults based on the timers.</p>
</li><li><p>The <i><span class="varname">hold-time</span></i> value is much greater than the <i><span class="varname">keepalive-time</span></i> value, for example, <strong>timer keepalive 1 hold 65535</strong> is configured. In this case, link faults cannot be detected in time.</p>
</li><li><p>The <i><span class="varname">keepalive-time</span></i> value is set to 0. In this case, the keepalive timer does not start. As a result, the <i><span class="varname">send-hold-time</span></i> function does not take effect.</p>
</li></ul>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp6_cfg_0050.html">Configuring BGP4+ Timers
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp6_cfg_0052.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>