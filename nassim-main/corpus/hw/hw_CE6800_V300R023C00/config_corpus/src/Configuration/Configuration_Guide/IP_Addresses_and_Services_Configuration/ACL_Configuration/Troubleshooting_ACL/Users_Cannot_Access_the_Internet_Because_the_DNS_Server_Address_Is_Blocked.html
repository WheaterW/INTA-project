
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Users Cannot Access the Internet Because the DNS Server Address Is Blocked">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_acl_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="vrp_acl_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="vrp_acl_cfg_0023.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176742487">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Users Cannot Access the Internet Because the DNS Server Address Is Blocked</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176742487"></a><a name="EN-US_TASK_0000001176742487"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Users Cannot Access the Internet Because the DNS Server Address Is Blocked</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176742487__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Fault Symptom</h4><p>An ACL is configured on the device to restrict destination addresses accessible to users; however, the DNS server address is blocked in the ACL. As a result, the query packets sent from users to the DNS server are discarded. The domain names cannot be resolved, so users cannot access the Internet.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176742487__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Check ACL rules in the system view.</span><p><pre class="screen"><a href="cmdqueryname=display+acl+all"><b><span class="cmdname">display acl all</span></b></a></pre>
<p>The following rule is included:</p>
<pre class="screen">rule 100 deny ip destination <strong>192.168.1.0 0.0.0.255</strong>  //Reject the packets destined for network segment 192.168.1.0/24.</pre>
<p>The DNS server address configured on user PCs is 192.168.1.68, which belongs to network segment 192.168.1.0/24. Therefore, packets sent from users to the DNS server are discarded. The domain names cannot be resolved, so users cannot access the Internet.</p>
</p></li><li><span>Run the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command in the ACL view to add a rule to permit the DNS server address.</span><p><pre class="screen">rule 99 permit ip destination <strong>192.168.1.68 0.0.0.0</strong>  //Permit the packets destined for the DNS server.
rule 100 deny ip destination <strong>192.168.1.0 0.0.0.255</strong>  //Reject the packets destined for network segment 192.168.1.0/24.</pre>
<p>After rule 99 is added, the packets sent from users to the DNS server match rule 99 and pass. The domain names can be resolved, and users can access the Internet.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_acl_cfg_0020.html">Troubleshooting ACL
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_acl_cfg_0021.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_acl_cfg_0023.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>