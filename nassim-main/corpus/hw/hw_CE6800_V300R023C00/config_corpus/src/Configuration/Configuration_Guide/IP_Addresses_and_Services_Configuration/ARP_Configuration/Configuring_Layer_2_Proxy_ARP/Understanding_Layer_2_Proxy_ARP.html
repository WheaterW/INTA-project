
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Understanding Layer 2 Proxy ARP">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_0018.html">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_0020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ARP">
<meta name="featurename" content="IP Address Conflict Detection">
<meta name="featurename" content="Dynamic ARP">
<meta name="featurename" content="Static ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001176743489">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Understanding Layer 2 Proxy ARP</title>
</head>
<body><a name="EN-US_CONCEPT_0000001176743489"></a><a name="EN-US_CONCEPT_0000001176743489"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Understanding Layer 2 Proxy ARP</h1>
<div><div class="section"><h4 class="sectiontitle">Application Scenarios</h4><p><strong>VLAN-based Layer 2 proxy ARP</strong></p>
<p>ARP request messages are broadcast messages. After receiving an ARP request message, a switching device broadcasts the message in its broadcast domain (BD). If a switching device receives a large number of ARP request messages within a period of time and broadcasts the messages, a large amount of network resources are consumed, causing network congestion. As a result, network performance deteriorates and user services are affected. Layer 2 proxy ARP can relieve the pressure on processing ARP messages by isolating ARP BDs. With this function enabled, a device preferentially uses learned ARP snooping entries to respond to received ARP request messages. After receiving an ARP request message, the device with Layer 2 proxy ARP enabled checks whether the user information in the request message matches an ARP snooping binding entry. If a matching entry exists, the device sends an ARP reply message. If no matching entry exists, the device broadcasts the ARP request message.</p>
<p></p>
<p><strong>BD-based Layer 2 proxy ARP</strong></p>
<p>In <a href="#EN-US_CONCEPT_0000001176743489__fig_dc_vrp_arp_feature_000101">Figure 1</a>, BD-based Layer 2 proxy ARP is enabled on a Layer 2 device. After receiving an ARP message on an interface connected to a host, the device listens to the message for ARP source information and records information such as the source IP address, source MAC address, inbound interface in local ARP snooping entries for Layer 2 proxy ARP. In addition, you can enable EVPN to collect host information based on BDs on Layer 2 devices. After the configuration is complete, the Layer 2 devices use EVPN routes (that is, MAC/IP routes) to synchronize learned user ARP information from one another and add the information to their local ARP snooping entries. The information contains the source IP and MAC addresses.</p>
<p>After receiving another ARP request message, a Layer 2 device searches its local ARP snooping entries (including the locally listened ones and those synchronized from other Layer 2 devices) for an entry that matches the message's destination IP address.</p>
<ul><li><p>If the matching entry exists, the device directly sends an ARP reply message based on the entry.</p>
</li><li><p>If no matching entry exits, the device broadcasts the ARP request message.</p>
</li></ul>
<div class="fignone" id="EN-US_CONCEPT_0000001176743489__fig_dc_vrp_arp_feature_000101"><a name="EN-US_CONCEPT_0000001176743489__fig_dc_vrp_arp_feature_000101"></a><a name="fig_dc_vrp_arp_feature_000101"></a><span class="figcap"><b>Figure 1 </b>Network diagram of BD-based Layer 2 proxy ARP</span><br><span><img class="vsd" src="figure/en-us_image_0000001130783850.png"></span></div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_arp_cfg_0018.html">Configuring Layer 2 Proxy ARP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_arp_cfg_0020.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>