
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IFIT Measurement">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_ifit_cfg_ce_0015.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_ifit_cfg_ce_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IFIT">
<meta name="featurename" content="sFlow">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IFIT">
<meta name="featurename" content="sFlow">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563765541">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring IFIT Measurement</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563765541"></a><a name="EN-US_TASK_0000001563765541"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IFIT Measurement</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001563765541__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring IFIT to implement network packet loss and delay measurement, you have completed the following tasks:</p>
<ul><li>Configure static routes or dynamic routing protocols to ensure network connectivity between devices.</li><li>Configure an ACL rule to be bound to an IFIT traffic classifier.</li><li>Configure a clock synchronization protocol, such as 1588v2, NTP, or high-precision NTP.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001563765541__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Users want to use the NMS to monitor network traffic in real time to quickly detect abnormal traffic and locate faults. You can configure IFIT measurement on physical devices so that the devices can periodically send packet loss and delay measurement information to the NMS for summary, analysis, and display.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563765541__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable IFIT measurement, create an IFIT view and enter the view, or enter an existing IFIT view.</span><p><pre class="screen"><a href="cmdqueryname=ifit"><b><span class="cmdname">ifit</span></b></a></pre>
<p>By default, no IFIT view is created.</p>
</p></li><li><span>Create an IFIT DCN instance and enter the view, or enter the view of an existing IFIT DCN instance.</span><p><pre class="screen"><a href="cmdqueryname=dcn-instance"><b><span class="cmdname">dcn-instance</span></b></a></pre>
<p>By default, no DCN instance is created.</p>
</p></li><li><span>Configure the IFIT NE ID.</span><p><pre class="screen"><a href="cmdqueryname=node-id"><b><span class="cmdname">node-id</span></b></a> <i><span class="varname">node-id-value</span></i></pre>
<p>By default, no IFIT NE ID is configured.</p>
</p></li><li><span>Configure the interface role in the outbound direction.</span><p><p>You can configure the interface role in the outbound direction globally or on an interface.</p>
<ul><li>Configure the IFIT NE role globally.<pre class="screen"><a href="cmdqueryname=role"><b><span class="cmdname">role</span></b></a> { <strong><span>ingress-egress</span></strong> | <strong><span>transit</span></strong> }</pre>
<p>By default, an IFIT NE is configured as a transit node.</p>
<p>If an NE is configured as both ingress and egress nodes, the IFIT packet header is removed from all outgoing packets on the NE. If an NE is configured as a transit node, the IFIT packet header is retained in all outgoing packets on the NE.</p>
</li></ul>
<ul><li>Configure the role on an interface.<pre class="screen">{ <a href="cmdqueryname=edge-port"><b><span class="cmdname">edge-port</span></b></a> | <a href="cmdqueryname=transit-port"><b><span class="cmdname">transit-port</span></b></a> } { <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> } } &amp;&lt;1-8&gt;</pre>
<p>By default, the role on an interface is determined by the globally configured IFIT NE role.</p>
<p>If an interface is configured as an edge port, the IFIT packet header is removed from outgoing packets on the interface. If an interface is configured as a transit port, the IFIT packet header is retained in outgoing packets on the interface.</p>
</li></ul>
</p><p><p>When the interface role in the outbound direction is configured both globally and on an interface, the configuration on the interface takes precedence.</p>
</p></li><li><span>Configure the IFIT measurement interval.</span><p><pre class="screen"><a href="cmdqueryname=interval"><b><span class="cmdname">interval</span></b></a> <i><span class="varname">interval-value</span></i></pre>
<p>By default, the IFIT measurement interval is 60s.</p>
</p></li><li><span>Configure the aging time of measurement flows.</span><p><pre class="screen"><a href="cmdqueryname=aging-time"><b><span class="cmdname">aging-time</span></b></a> <i><span class="varname">time-value</span></i></pre>
<p>By default, the aging time of measurement flows is 120s.</p>
<p>The aging time of measurement flows must be greater than the IFIT measurement interval.</p>
</p></li><li><span>Configure an IFIT traffic classifier.</span><p><ol type="a"><li>Create an IFIT traffic classifier and enter the view, or enter the view of an existing IFIT traffic classifier.<pre class="screen"><a href="cmdqueryname=traffic+classifier"><b><span class="cmdname">traffic classifier</span></b></a> <i><span class="varname">classifier-name</span></i></pre>
</li><li>Define ACL rules in the IFIT traffic classifier. <pre class="screen"><a href="cmdqueryname=if-match"><b><span class="cmdname">if-match</span></b></a> [ <strong><span>ipv6</span></strong> ] <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <strong><span>name</span></strong> <i><span class="varname">acl-name</span></i> }</pre>
<p>By default, no ACL rule is configured in an IFIT traffic classifier.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>Only advanced ACLs (3000 to 3999) can be bound to an IFIT traffic classifier.</li><li>The ACL rules can contain only 5-tuple information. An ACL rule containing unsupported information will not be delivered. As a result, the IFIT function cannot be enabled for the corresponding traffic. The supported 5-tuple information is as follows:<ul><li>Protocol (TCP or UDP)</li><li>Source IPv4 or IPv6 address and mask </li><li>Destination IPv4 or IPv6 address and mask </li><li>TCP or UDP source port number (The value must be the same as the specified port number.)</li><li>TCP or UDP destination port number (The value must be the same as the specified port number.)</li></ul>
</li></ul>
</div></div>
</li><li>Return to the IFIT DCN instance view.<pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li></ol>
</p></li><li><span>Configure an IFIT traffic behavior.</span><p><ol type="a"><li>Create an IFIT traffic behavior and enter the view, or enter the view of an existing IFIT traffic behavior.<pre class="screen"><a href="cmdqueryname=traffic+behavior"><b><span class="cmdname">traffic behavior</span></b></a> <i><span class="varname">behavior-name</span></i></pre>
</li><li>Configure the format of the inserted IFIT packet headers and IFIT working mode.<pre class="screen"><a href="cmdqueryname=action+insert+header"><b><span class="cmdname">action insert header</span></b></a> [ <strong><span>header-mode dcn</span></strong> ] [<strong><span> measure-mode</span></strong> { <strong><span>e2e</span></strong> | <strong><span>trace</span></strong> } ]</pre>
<p>By default, the IFIT packet headers in DCN format are inserted and the IFIT working mode is E2E.</p>
</li><li>Configure the type of IFIT flows.<pre class="screen"><a href="cmdqueryname=flow-type"><b><span class="cmdname">flow-type</span></b></a> { <strong><span>dynamic</span></strong> | <strong><span>static</span></strong> <strong><span>flow-id</span></strong> <i><span class="varname">flow-id</span></i>  }</pre>
<p>By default, dynamic IFIT flows are used for analysis.</p>
</li><li>(Optional) Configure a flow table aggregation policy for dynamic IFIT flows.<pre class="screen"><a href="cmdqueryname=aggregation"><b><span class="cmdname">aggregation</span></b></a> { <strong><span>source-port</span></strong> | <strong><span>destination-port</span></strong> | <strong><span>none</span></strong> }</pre>
<p>By default, the aggregation source or destination port is not specified.</p>
<p>Static flows are created and analyzed based on specified flow characteristics, which are not affected by the flow table aggregation policy. Therefore, this step is not required for such flows.</p>
</li><li>(Optional) Enable IFIT delay measurement using one of the following methods:<ul><li>Enable IFIT delay measurement to measure the delay of the first packet in each measurement flow within an interval.<pre class="screen"><a href="cmdqueryname=delay-measure+enable"><b><span class="cmdname">delay-measure enable</span></b></a></pre>
<p>By default, IFIT delay measurement is disabled.</p>
</li><li>Enable IFIT packet-by-packet delay measurement to measure the delay of each packet in each measurement flow within an interval.<pre class="screen"><a href="cmdqueryname=delay-measure+per-packet+enable"><b><span class="cmdname">delay-measure per-packet enable</span></b></a></pre>
<p>By default, IFIT packet-by-packet delay measurement is disabled.</p>
</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>To enable IFIT delay measurement, you must configure 1588v2 to implement clock synchronization between devices.</li></ul>
</div></div>
</li><li>Return to the IFIT DCN instance view.<pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li></ol>
</p></li><li><span>Configure an IFIT traffic policy.</span><p><ol type="a"><li>Create an IFIT traffic policy and enter the view, or enter the view of an existing IFIT traffic policy.<pre class="screen"><a href="cmdqueryname=traffic+policy"><b><span class="cmdname">traffic policy</span></b></a> <i><span class="varname">policy-name</span></i></pre>
</li><li>Bind a traffic behavior and a traffic classifier to the IFIT traffic policy.<pre class="screen"><a href="cmdqueryname=classifier"><b><span class="cmdname">classifier</span></b></a> <i><span class="varname">classifier-name</span></i> <a href="cmdqueryname=behavior"><b><span class="cmdname">behavior</span></b></a> <i><span class="varname">behavior-name</span></i> [ <strong><span>precedence</span></strong> <i><span class="varname">precedence-value</span></i> | <strong><span>cache-number</span></strong> <i><span class="varname">cache-number</span></i> ] *</pre>
</li><li>Return to the IFIT DCN instance view.<pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Return to the IFIT view.<pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Return to the system view.<pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li></ol>
</p></li><li><span>Apply the IFIT traffic policy.</span><p><p>You can apply the IFIT traffic policy globally or to an interface.</p>
<ul><li>Apply the IFIT traffic policy globally.<pre class="screen"><a href="cmdqueryname=ifit+traffic-policy"><b><span class="cmdname">ifit traffic-policy</span></b></a> <i><span class="varname">policy-name</span></i> <strong><span>global</span></strong></pre>
</li><li>Apply the IFIT traffic policy to an interface.<ol type="a"><li>Enter the interface view.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</li><li>Apply the IFIT traffic policy to the interface.<pre class="screen"><a href="cmdqueryname=ifit+traffic-policy"><b><span class="cmdname">ifit traffic-policy</span></b></a> <i><span class="varname">policy-name</span></i></pre>
</li><li>Return to the system view.<pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li></ol>
</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>An IFIT traffic policy cannot be applied both globally and to an interface.</p>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_ifit_cfg_ce_0015.html">Configuring IFIT Measurement
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_ifit_cfg_ce_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>