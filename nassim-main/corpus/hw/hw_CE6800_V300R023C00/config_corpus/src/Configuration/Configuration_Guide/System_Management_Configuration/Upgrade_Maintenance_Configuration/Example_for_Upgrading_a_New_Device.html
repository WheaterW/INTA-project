
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Upgrading a New Device">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="gx_upgrade_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="gx_upgrade_cfg_0036.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Upgrade Maintenance">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Upgrade Maintenance">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001609058757">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Upgrading a New Device</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001609058757"></a><a name="EN-US_TASK_0000001609058757"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Upgrading a New Device</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001609058757__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>Use a console cable (serial cable) and a network cable to set up a network between your PC and the device. Specifically, connect the console cable from your PC to the console port of the device, and connect the network cable from your PC to any Ethernet interface on the device, as shown in <a href="#EN-US_TASK_0000001609058757__fig17492611181218">Figure 1</a>.</p>
<div class="fignone" id="EN-US_TASK_0000001609058757__fig17492611181218"><a name="EN-US_TASK_0000001609058757__fig17492611181218"></a><a name="fig17492611181218"></a><span class="figcap"><b>Figure 1 </b>Network diagram for upgrading a new device</span><br><span><img src="figure/en-us_image_0000001619018317.png" width="NaN" height="NaN"></span></div>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1 represents <span>100GE</span><span>1/0/1</span>.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001609058757__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><ol><li>Log in to the device through the console port.</li><li>Run any FTP software on the PC and configure an FTP user.</li><li>Configure the management IP address of the device so that the device and the PC reside on the same network segment.</li><li>Configure the device as the FTP client to obtain the system software package from the PC and check whether the system software package is successfully loaded.</li><li>Specify the system software and patch for next startup.</li><li>Restart the device.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001609058757__1.3.3"></a><a name="1.3.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Precautions</h4><ul><li>Prepare the upgrade tools, including the PC, network cable, and serial cable.</li><li>Obtain the target system software.<ul><li>Visit <a href="https://support.huawei.com/enterprise/en/index.html" target="_blank" rel="noopener noreferrer">Huawei enterprise technical support website</a> and select the corresponding product in the software download area.</li><li>Select software of the required version.</li><li>Click <strong>Download</strong> next to the <strong><em>product</em></strong><strong>_</strong><strong><em>version</em></strong><strong>.cc</strong> file of the required version.</li></ul>
</li><li>Obtain the target patch file.<ul><li>Visit <a href="https://support.huawei.com/enterprise/en/index.html" target="_blank" rel="noopener noreferrer">Huawei enterprise technical support website</a> and select the corresponding product in the software download area.</li><li>Select software of the required version.</li><li>Click <strong>Download</strong> next to the <strong><em>product</em></strong><strong>_</strong><strong><em>version</em></strong><strong>.PAT</strong> file of the required version.</li></ul>
</li><li>SFTP is recommended because it is more secure than FTP.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001609058757__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Log in to the device from the PC through the console port. For details, see <a href="vrp_first_cfg_0004.html">First Login Through the Console Port</a>.</span></li><li><span>Run the <strong>install feature-software WEAKEA</strong> command in the user view to install the weak security algorithm/protocol feature package (WEAKEA).</span></li><li><span>Run any FTP software on the PC.</span></li><li><span>Configure a management IP address for the device to ensure that the device and PC reside in the same network segment and can ping each other.</span><p><p># Configure a management IP address for the device.</p>
</p><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>] <strong>sysname DeviceA</strong>
[*<span class="keyword">DeviceA</span>] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>DeviceA] <strong>interface </strong><strong><span>100ge</span> </strong><strong><span>1/0/1</span></strong> 
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>ip address </strong><strong>10.10.1.1 24</strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[*<span class="keyword">DeviceA</span>] <strong>commit</strong></pre>
</p></li><li><span>Establish an FTP connection between the device and the PC.</span><p><pre class="screen">&lt;<span class="keyword">DeviceA</span>&gt;<strong> ftp 10.10.1.2</strong>
Trying 10.10.1.2 ...
Press <span>CTRL + K</span> to abort
Connected to 10.10.1.2.
220 FTP service ready.
User(10.10.1.2:(none)):admin
331 Password required for admin.
Enter password:
230 User logged in.                  
[ftp] </pre>
</p></li><li><span>Configure the device as the FTP client to transfer files to the PC using FTP commands.</span><p><pre class="screen"><span>[ftp] <strong>binary</strong></span>
200 Type is Image (Binary)
[ftp] <strong>get product_version.cc</strong>    //Load the system software to the device. <strong>product_version.cc</strong> is the file name of the system software.
500 Unidentified command SIZE product_version.cc   
200 PORT command okay
150 "D:\FTP\product_version.cc" file ready to send (3544 bytes) in IMAGE / Binary mode
.. 
226 Transfer finished successfully.  
FTP: <samp class="codeph">107973953</samp> byte(s) received in <samp class="codeph">151.05</samp> second(s) <samp class="codeph">560.79Kbyte</samp>(s)/sec.   
[ftp] <strong>get product_version.PAT </strong>  //Load the patch file to the device. <strong>product_version.PAT</strong> is the file name of the system patch.
200 PORT command okay 
150 "D:\FTP\product_version.PAT" file ready to receive in IMAGE / Binary mode
/     100% [***********]
226 Transfer finished successfully.
FTP: <samp class="codeph">1257</samp> byte(s) send in <samp class="codeph">0.03</samp> second(s) <samp class="codeph">40.55</samp>Kbyte(s)/sec.    
[ftp] <strong>quit</strong></pre>
</p></li><li><span>Check whether the system software and patch are successfully loaded.</span><p><pre class="screen">&lt;<span class="keyword">DeviceA</span>&gt;<strong> dir</strong>
Directory of <span><span><span>flash</span></span>:</span>/

Idx  Attr     Size(Byte)  Date        Time       FileName    0  -rw-             14  Mar 13 2019 14:13:38   back_time_a
    1  drw-              -  Mar 11 2019 00:58:54   logfile
    2  -rw-              4  Nov 17 2019 09:33:58   snmpnotilog.txt
    3  -rw-         11,238  Mar 12 2019 21:15:56   private-data.txt
    4  -rw-          1,257  Mar 12 2019 21:15:54   vrpcfg.zip
    5  -rw-             14  Mar 13 2019 14:13:38   back_time_b
    6  -rw-    107,973,953  Mar 13 2019 14:24:24   product_version.cc
    7  -rw-      3,973,953  Mar 13 2019 14:24:24   product_version.PAT
    8  drw-              -  Oct 31 2019 10:20:28   sysdrv
    9  drw-              -  Feb 21 2019 17:16:36   compatible
   10  drw-              -  Feb 09 2019 14:20:10   selftest
   11  -rw-         19,174  Feb 20 2019 18:55:32   backup.cfg
   12  -rw-         23,496  Oct 15 2019 20:59:36   20191015.zip
   13  -rw-            588  Nov 04 2019 13:54:04   servercert.der
   14  -rw-            320  Nov 04 2019 13:54:26   serverkey.der
   15  drw-              -  Nov 04 2019 13:58:36   security
<samp class="codeph">...
<span>670,092 KB total (569,904 KB free)</span></samp></pre>
</p></li><li><span>Specify the system software and patch for next startup.</span><p><pre class="screen">&lt;<span class="keyword">DeviceA</span>&gt; <strong>startup system-software </strong><strong>product_version.cc</strong>   //Specify the system software for next startup.
&lt;<span class="keyword">DeviceA</span>&gt; <strong>startup patch </strong><strong>product_version.PAT</strong><strong> all  </strong> //Specify the patch for next startup. If the current version does not have a corresponding patch, you do not need to run this command.</pre>
</p><p></p></li><li><span>Check the boot items for next startup. (The actual command output varies depending on the device. The following command output is only an example.)</span><p><pre class="screen">&lt;<span class="keyword">DeviceA</span>&gt;<strong> display startup</strong>
MainBoard:   
  Configured startup system software:        <span><span>flash</span></span>:/basicsoft.cc   
  Startup system software:                   <span><span>flash</span></span>:/basicsoft.cc   
  Next startup system software:              <span><span>flash</span></span>:/<strong>product_version.cc</strong>   
  Startup saved-configuration file:          <span><span>flash</span></span>:/vrpcfg.zip   
  Next startup saved-configuration file:     <span><span>flash</span></span>:/vrpcfg.zip   
  Startup paf file:                          default   
  Next startup paf file:                     default   
  Startup patch package:                     <span><span>flash</span></span>:/basicsoft.PAT   
  Next startup patch package:                <span><span>flash</span></span>:/<strong>product_version.PAT</strong></pre>
</p></li><li><span>Restart the device.</span><p><pre class="screen">&lt;<span class="keyword">DeviceA</span>&gt; <strong>reboot fast</strong>
MPU 6:
Next startup system software:  <span><span>flash</span></span>:/<strong>product_version.cc</strong>
Next startup saved-configuration file: <span><span>flash</span></span>:/vrpcfg.zip
Next startup paf file: default
Next startup patch package: NULL
Warning: The system will reboot. Continue? [Y/N]:y </pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001609058757__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Wait several minutes until the device restart is complete. Then run the <strong>display version</strong> command to check the current system version. If the version is new, the upgrade has succeeded.</p>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001609058757__1.3.6"></a><a name="1.3.6"></a><h4 class="sectiontitle">Configuration Scripts</h4><pre class="screen">#
sysname DeviceA 
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch 
 ip address 10.10.1.1 255.255.255.0
#
return </pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="gx_upgrade_cfg_0001.html">Upgrade Maintenance Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="gx_upgrade_cfg_0036.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>