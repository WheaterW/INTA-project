
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling IGMP Snooping Proxy">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc_cfg_0022.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc_cfg_0024.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc_cfg_0027.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130781892">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Enabling IGMP Snooping Proxy</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130781892"></a><a name="EN-US_TASK_0000001130781892"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling IGMP Snooping Proxy</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130781892__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When IGMP is disabled on Layer 3 devices (for example, when only a static multicast group is configured), no IGMP querier is available on the network to maintain multicast group memberships. You can configure IGMP snooping proxy so that the Layer 2 device can function as an IGMP querier and sends IGMP Query messages.</p>
<p>When IGMP is enabled on the network, IGMP snooping proxy can be deployed on a Layer 2 device so that the device can send IGMP Report/Leave messages to its upstream Layer 3 device on behalf of user hosts. This helps minimize the number of such messages sent to the Layer 3 device.</p>
<p>A device configured with IGMP snooping proxy acts as a host for its upstream devices and as a querier for its downstream hosts.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130781892__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the VLAN view.</span><p><pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i></pre>
</p></li><li><span>Enable IGMP snooping proxy.</span><p><pre class="screen"><a href="cmdqueryname=igmp+snooping+proxy"><b><span class="cmdname">igmp snooping proxy</span></b></a></pre>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>IGMP snooping proxy cannot be enabled in a VLAN if the corresponding VLANIF interface has Layer 3 multicast functions (such as IGMP or PIM) enabled.</p>
<p>The IGMP snooping querier and IGMP message suppression functions can be enabled in a VLAN to implement the same function as IGMP snooping proxy. If the IGMP snooping proxy function is configured in a VLAN, neither the IGMP snooping querier function nor the IGMP message suppression function can be configured in the VLAN.</p>
</div></div>
</p></li><li><span>(Optional) Configure the device to transparently transmit protocol messages in a VLAN.</span><p><pre class="screen"><a href="cmdqueryname=igmp+snooping+proxy+router-protocol-pass"><b><span class="cmdname">igmp snooping proxy router-protocol-pass</span></b></a></pre>
<p>By default, an IGMP snooping proxy device terminates received protocol messages and learns multicast forwarding entries from these messages. If IGMP snooping proxy is enabled on both the upstream and downstream devices, you can run this command so that the device transparently forwards the protocol messages it receives on a router port to other router ports, without learning the entries of the messages. In this way, the upstream and downstream devices do not learn entries from each other, preventing issues with entries being aged out.</p>
</p></li><li><span>(Optional) Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>(Optional) Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li><span>(Optional) Disable the device from forwarding IGMP Query messages to the upstream router.</span><p><pre class="screen"><a href="cmdqueryname=igmp+snooping+proxy-uplink-port"><b><span class="cmdname">igmp snooping proxy-uplink-port</span></b></a> <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i></pre>
<p>After IGMP snooping proxy is enabled on a device, it periodically broadcasts IGMP Query messages to all the interfaces (including the router ports) in a VLAN. This may result in reelection of the IGMP querier. To prevent such reelection if IGMP is enabled on the upstream device, run this command to disable forwarding of IGMP Query messages to router ports.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_l2mc_cfg_0022.html">Configuring IGMP Snooping Proxy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_l2mc_cfg_0024.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_l2mc_cfg_0027.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>