
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring a Device as an IPv6 DNS Client for DNS Query (Dynamic Domain Name Resolution)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_dns_cfg_0023.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_dnsv6_cfg_0021.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DNS">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DNS">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="DNS">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563750889">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="public_sys-resources/imagePopup.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/customQuery.js"></script>
<script language="javascript" type="text/javascript" src="public_sys-resources/imagePopup.js"></script>
<title>Example for Configuring a Device as an IPv6 DNS Client for DNS Query (Dynamic Domain Name Resolution)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563750889"></a><a name="EN-US_TASK_0000001563750889"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring a Device as an IPv6 DNS Client for DNS Query (Dynamic Domain Name Resolution)</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563750889__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In <a href="#EN-US_TASK_0000001563750889__fig_dc_s_cfg_10332801">Figure 1</a>, DeviceA functions as an IPv6 DNS client and works with the IPv6 DNS server. Assume that DeviceA is routable to the IPv6 DNS server and network server. The IPv6 DNS server records the mapping between the domain name (huawei.com) and the IPv6 address (2001:db8:2::1/64). The customer wants DeviceA to access the network server with the IPv6 address 2001:db8:2::1/64 through the domain name huawei.com.</p>
<p>In addition, the customer expects the IPv6 DNS server to correctly parse the domain name huawei.com even if only parts of the domain name (such as "huawei") are entered. This allows proper access to the network server.</p>
<div class="fignone" id="EN-US_TASK_0000001563750889__fig_dc_s_cfg_10332801"><a name="EN-US_TASK_0000001563750889__fig_dc_s_cfg_10332801"></a><a name="fig_dc_s_cfg_10332801"></a><span class="figcap"><b>Figure 1 </b>Network diagram of IPv6 dynamic domain name resolution</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1 and interface 2 represent <span>100GE</span> <span>1/0/1</span> and <span>100GE</span> <span>1/0/2</span>, respectively.</p>
</div></div>
<br><span><img class="imgResize" src="figure/en-us_image_0000001563990805.png" width="490.5380812500001" height="89.55056250000003" title="Click to enlarge"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001563750889__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure dynamic DNS on DeviceA so that DeviceA can communicate with the network server by querying dynamic DNS entries.</p>
</li><li>Configure domain name suffixes on DeviceA to support a domain name suffix list.</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563750889__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure IPv6 addresses for the interfaces on DeviceA.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>] <strong>sysname </strong><strong>DeviceA</strong>
[*<span class="keyword">HUAWEI</span>] <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">DeviceA</span>] <strong>vlan batch 10 20</strong>
[*DeviceA] <strong>interface</strong><strong> <span>100ge</span><span>1/0/1</span></strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>portswitch</strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port link-type trunk</strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port trunk allow-pass vlan 10</strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[*DeviceA] <strong>interface</strong><strong> <span>100ge</span><span>1/0/2</span></strong>
[*DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>portswitch</strong>
[*DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>port link-type trunk</strong>
[*DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>port trunk allow-pass vlan 20</strong>
[*DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[*DeviceA] <strong>interface vlanif 10</strong>
[*DeviceA-Vlanif10] <strong>ipv6 enable</strong>
[*DeviceA-Vlanif10] <strong>ipv6 address 2001:db8:2::2/64</strong>
[*DeviceA-Vlanif10] <strong>quit</strong>
[*DeviceA] <strong>interface vlanif 20</strong>
[*DeviceA-Vlanif20] <strong>ipv6 enable</strong>
[*DeviceA-Vlanif20] <strong>ipv6 address 2001:db8:3::1/64</strong>
[*DeviceA-Vlanif20] <strong>quit</strong></pre>
</p></li><li><span>Configure dynamic DNS.</span><p><p># Enable dynamic domain name resolution.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>dns resolve</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
<p># Configure the IPv6 address of the DNS server.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>dns server ipv6 2001:db8:3::2</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
</p></li><li><span>Configure domain name suffixes.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>dns domain net</strong>
[<span class="keyword">*</span>DeviceA]<strong> dns domain com</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> quit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001563750889__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Run the <strong>ping ipv6 huawei.com</strong> command on DeviceA. If successful, the resolved destination IPv6 address is shown. In this example, the address is 2001:db8:2::1.</p>
<pre class="screen">&lt;DeviceA&gt; <strong>ping ipv6 huawei.com</strong>
  Resolved Host ( huawei.com -&gt; 2001:DB8:2::1)
  PING huawei.com : 56  data bytes, press CTRL_C to break
    Reply from 2001:DB8:2::1                                                         
    bytes=56 Sequence=1 hop limit=64  time = 1 ms                               
    Reply from 2001:DB8:2::1                                                         
    bytes=56 Sequence=2 hop limit=64  time = 1 ms                               
    Reply from 2001:DB8:2::1                                                         
    bytes=56 Sequence=3 hop limit=64  time = 1 ms                               
    Reply from 2001:DB8:2::1                                                         
    bytes=56 Sequence=4 hop limit=64  time = 1 ms                               
    Reply from 2001:DB8:2::1                                                         
    bytes=56 Sequence=5 hop limit=64  time = 1 ms                               
  --- huawei.com ping statistics ---                                               
    5 packet(s) transmitted                                                     
    5 packet(s) received                                                        
    0.00% packet loss                                                           
    round-trip min/avg/max = 1/1/1 ms      </pre>
<p># Run the <strong>ping ipv6 huawei</strong> command on DeviceA. If successful, the domain name is changed to <strong>huawei.com</strong> and the resolved destination IPv6 address is shown. In this example, the address is 2001:db8:2::1.</p>
<pre class="screen">&lt;DeviceA&gt; <strong>ping ipv6 huawei</strong>
  Resolved Host ( huawei.com -&gt; 2001:DB8:2::1)
  PING huawei.com : 56  data bytes, press CTRL_C to break
    Reply from 2001:DB8:2::1                                                         
    bytes=56 Sequence=1 hop limit=64  time = 1 ms                               
    Reply from 2001:DB8:2::1                                                         
    bytes=56 Sequence=2 hop limit=64  time = 1 ms                               
    Reply from 2001:DB8:2::1                                                         
    bytes=56 Sequence=3 hop limit=64  time = 1 ms                               
    Reply from 2001:DB8:2::1                                                         
    bytes=56 Sequence=4 hop limit=64  time = 1 ms                               
    Reply from 2001:DB8:2::1                                                         
    bytes=56 Sequence=5 hop limit=64  time = 1 ms                               
  --- huawei.com ping statistics ---                                               
    5 packet(s) transmitted                                                     
    5 packet(s) received                                                        
    0.00% packet loss                                                           
    round-trip min/avg/max = 1/1/1 ms  </pre>
<p># Run the <strong>display dns ipv6 dynamic-host</strong> command on DeviceA to check dynamic IPv6 DNS entries in the cache.</p>
<pre class="screen">&lt;DeviceA&gt; <strong>display dns ipv6 dynamic-host</strong>
Host                                     TTL        Type   Address
huawei.com                               3579       IPv6   2001:DB8:2::1 

Total  :  1</pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001563750889__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Configuration Scripts</h4><pre class="screen">#
 sysname DeviceA
#
dns resolve
dns server ipv6 2001:DB8:3::2
dns domain net
dns domain com
#
 vlan batch 10 20
#
interface Vlanif10
 ipv6 enable
 ipv6 address 2001:DB8:2::2/64
#
interface Vlanif20
 ipv6 enable
 ipv6 address 2001:DB8:3::1/64
#
interface <span>100GE</span><span>1/0/1</span>
 port link-type trunk
 port trunk allow-pass vlan 10
#
interface <span>100GE</span><span>1/0/2</span>
 port link-type trunk
 port trunk allow-pass vlan 20
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_dns_cfg_0023.html">Configuring a Device as a DNS Client for DNS Query
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_dnsv6_cfg_0021.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>

<script language="JavaScript">
<!--
initImageViewer('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>