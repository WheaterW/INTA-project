
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="IPSG Does Not Take Effect on Hosts with Dynamic IP Addresses Because DHCP Snooping Is Not Configured">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_IPSG_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_IPSG_cfg_0020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPSG">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPSG">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSG">
<meta name="featuretype" content="Security">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001564009521">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>IPSG Does Not Take Effect on Hosts with Dynamic IP Addresses Because DHCP Snooping Is Not Configured</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001564009521"></a><a name="EN-US_TASK_0000001564009521"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">IPSG Does Not Take Effect on Hosts with Dynamic IP Addresses Because DHCP Snooping Is Not Configured</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001564009521__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Fault Symptom</h4><p>Hosts can dynamically obtain IP addresses from the DHCP server, but IPSG does not take effect after being enabled.</p>
<h4 class="sectiontitle">Possible Causes</h4><p>DHCP is configured, but DHCP snooping is not configured.</p>

</div></div>
<div class="steps"><a name="EN-US_TASK_0000001564009521__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Check whether the DHCP snooping binding table exists. When hosts obtain IP addresses through DHCP, IPSG checks packets received by interfaces based on the DHCP snooping binding table. The device automatically generates a DHCP snooping binding table for online hosts only after DHCP snooping is enabled.</span><p><pre class="screen"><a href="cmdqueryname=display+ip+source+check+user-bind+status+dynamic"><b><span class="cmdname">display ip source check user-bind status dynamic</span></b></a> [ { <strong>interface</strong> <em>interface-type</em> <em>interface-number </em>| <strong>ip-address</strong> <em>ip-address</em> | <strong>mac-address</strong> <em>mac-address</em> | <strong>vlan</strong>  <em>vlan-id</em> } * ] [ <strong>valid </strong>|<strong> invalid </strong>] [ <strong>slot </strong><em>slot-id</em> ] </pre>
</p></li><li><span>If the DHCP snooping binding table does not exist, configure it according to <a href="galaxy_IPSG_cfg_0011.html#EN-US_TASK_0000001512849694__cmd381714015111">Configure a dynamic binding table</a>.</span><p><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After DHCP snooping is configured and the hosts go online again, the device generates DHCP snooping entries for the hosts. IPSG then takes effect. If you enable IPSG but the device does not generate a DHCP snooping binding table, the device rejects all IP packets except DHCP request packets. In this situation, communication between the DHCP hosts and servers is affected. Therefore, before enabling IPSG, configure DHCP snooping to enable the device to generate dynamic binding entries.</p>
</div></div>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_IPSG_cfg_0016.html">Troubleshooting IPSG
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_IPSG_cfg_0020.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>