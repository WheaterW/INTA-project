
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Limiting the Number of Routes That BGP4+ Can Accept from Peers">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp6_cfg_0028.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp6_cfg_0031.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp6_cfg_0032.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130782208">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>(Optional) Limiting the Number of Routes That BGP4+ Can Accept from Peers</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130782208"></a><a name="EN-US_TASK_0000001130782208"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Limiting the Number of Routes That BGP4+ Can Accept from Peers</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001130782208__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If a BGP4+ device is maliciously attacked or network configuration errors occur, the device will receive a large number of routes from its peers. As a result, a large number of resources are consumed on the device. To prevent this issue, the administrator must limit the resources to be consumed during device operation based on the network planning and device capacity. BGP4+ provides peer-based route control to limit the number of routes to be accepted from peers.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130782208__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the BGP view.</span><p><pre class="screen"><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></pre>
</p></li><li><span>Enter the IPv6 unicast address family view.</span><p><pre class="screen"><a href="cmdqueryname=ipv6-family+unicast"><b><span class="cmdname">ipv6-family</span></b></a> <strong><span>unicast</span></strong></pre>
</p></li><li><span>Set a limit on the number of routes that can be accepted from a peer or peer group.</span><p><pre class="screen"><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv6-address</span></i> | <i><span class="varname">ipv4-address</span></i> } <a href="cmdqueryname=route-limit+alert-only+idle-forever+idle-timeout"><b><span class="cmdname">route-limit</span></b></a> <i><span class="varname">limit</span></i> [ <i><span class="varname">percentage</span></i> ] [ <strong><span>alert-only</span></strong> | <strong><span>idle-forever</span></strong> | <strong><span>idle-timeout</span></strong> <i><span class="varname">times</span></i> ]</pre>
<p>This command provides route control based on peers. You can specify parameters as needed to control the processing if the number of the routes accepted from a peer exceeds the limit specified.</p>
<ul><li><p><strong><span>alert-only</span></strong>: The peer relationship is not terminated. The device no longer accepts routes from the peer after the limit is exceeded, and an alarm is generated and logged.</p>
</li><li><p>If <strong><span>idle-forever</span></strong> is set, the peer relationship is interrupted and the system does not automatically attempt to re-establish the connection. In this case, an alarm is generated, and a log is recorded. In this case, the peer status is <strong>Idle</strong> in the <a href="cmdqueryname=display+bgp+ipv6+peer"><b><span class="cmdname">display bgp ipv6 peer</span></b></a> [ <strong><span>verbose</span></strong> ] command output. To restore the BGP connection, run the <a href="cmdqueryname=reset+bgp+ipv6"><b><span class="cmdname">reset bgp ipv6</span></b></a> command.</p>
</li><li><p>If <strong><span>idle-timeout</span></strong> is set, the peer relationship is interrupted. The device retries setting up a connection after the timer expires. An alarm is generated, and a log is recorded. In this case, the peer status is <strong>Idle</strong> in the <a href="cmdqueryname=display+bgp+ipv6+peer"><b><span class="cmdname">display bgp ipv6 peer</span></b></a> [ <strong><span>verbose</span></strong> ] command output. To restore the BGP connection before the timer expires, run the <a href="cmdqueryname=reset+bgp+ipv6"><b><span class="cmdname">reset bgp ipv6</span></b></a> command.</p>
</li><li><p>If none of the preceding parameters is set, the peer relationship is disconnected. The device retries setting up a connection in 30 seconds. An alarm is generated, and a log is recorded.</p>
</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the number of routes received by a device exceeds a specified limit and the <a href="cmdqueryname=peer+route-limit"><b><span class="cmdname">peer route-limit</span></b></a> command is used for the first time, the device re-establishes the peer relationship with the specified peer, regardless of whether <strong><span>alert-only</span></strong> is specified.</p>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130782208__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130782208__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp6_cfg_0028.html">Configuring BGP4+ to Accept Routes
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp6_cfg_0031.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bgp6_cfg_0032.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>