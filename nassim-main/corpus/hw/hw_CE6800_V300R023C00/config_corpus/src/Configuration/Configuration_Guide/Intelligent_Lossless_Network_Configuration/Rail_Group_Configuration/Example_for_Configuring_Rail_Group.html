
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Rail Group">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_rail_group_cfg_0002.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_rail_group_cfg_0005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Rail Group">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Rail Group">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512839138">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Rail Group</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512839138"></a><a name="EN-US_TASK_0000001512839138"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Rail Group</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001512839138__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In <a href="#EN-US_TASK_0000001512839138__fig17332184817140">Figure 1</a>, there are two spine nodes, two leaf nodes, and eight servers. Each spine node connects to each leaf node through two interfaces. Each leaf node connects to four servers, each through a different interface. Rail Group needs to be configured on these spine and leaf nodes to improve the network throughput.</p>
<div class="fignone" id="EN-US_TASK_0000001512839138__fig17332184817140"><a name="EN-US_TASK_0000001512839138__fig17332184817140"></a><a name="fig17332184817140"></a><span class="figcap"><b>Figure 1 </b>Network diagram of the Rail Group function</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, interface3, and interface4 represent <span>100GE</span><span>1/0/1</span>, <span>100GE</span><span>1/0/2</span>, <span>100GE</span><span>1/0/3</span>, and <span>100GE</span><span>1/0/4</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001513158674.png"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512839138__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure the Rail Group function on the spine nodes.</span><p><p># Add Spine1's interfaces connected to the two leaf nodes to two Rail Group port groups. The configurations on Spine2 are similar to those on Spine1 and are not described here.</p>
</p><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>] <strong>sysname Spine1</strong>
[*<span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Spine1] <strong>rail-group</strong> <strong>spinegroup1</strong>
[*Spine1-rail-group-spinegroup1]<strong> </strong><strong>group-member interface <span>100ge</span> <span>1/0/1</span></strong><strong> to <span>100ge</span> <span>1/0/2</span></strong>
[*Spine1-rail-group-spinegroup1] <strong>quit</strong>
[*Spine1] <strong>rail-group</strong> <strong>spinegroup2</strong>
[*Spine1-rail-group-spinegroup2]<strong> </strong><strong>group-member interface <span>100ge</span> <span>1/0/3</span></strong><strong> to <span>100ge</span> <span>1/0/4</span></strong>
[*Spine1-rail-group-spinegroup2] <strong>quit</strong>
[*Spine1] <strong>commit</strong></pre>
<p># Enable the Rail Group function on Spine1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>Spine1] <strong>load-balance ecmp rail-group enable</strong>
[*Spine1] <strong>commit</strong></pre>
</p></li><li><span>Configure the Rail Group function on the leaf nodes.</span><p><p># Add Leaf1's interfaces connected to servers to the same Rail Group port group. The configurations on Leaf2 are similar to those on Leaf1 and are not described here.</p>
</p><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>] <strong>sysname Leaf1</strong>
[*<span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Leaf1] <strong>rail-group</strong> <strong>leafgroup</strong>
[*Leaf1-rail-group-leafgroup]<strong> </strong><strong>group-member interface <span>100ge</span> <span>1/0/1</span> to <span>100ge</span> <span>1/0/4</span></strong>
[*Leaf1-rail-group-leafgroup] <strong>quit</strong>
[*Leaf1] <strong>commit</strong></pre>
<p># Enable the Rail Group function on Leaf1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>Leaf1] <strong>load-balance ecmp rail-group enable</strong>
[*Leaf1] <strong>commit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001512839138__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Check the Rail Group configuration and status on Spine1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>Spine1] <strong>display rail-group status</strong>
Global rail-group configuration: Enable
-------------------------------------------------------------
GroupName                        Index       Interface       
-------------------------------------------------------------
spinegroup1                          0       <span>100GE</span><span>1/0/1</span>      
                                     1       <span>100GE</span><span>1/0/2</span>      
spinegroup2                          0       <span>100GE</span><span>1/0/3</span>      
                                     1       <span>100GE</span><span>1/0/4</span>      
-------------------------------------------------------------</pre>
<p># Check the Rail Group configuration and status on Leaf1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>Leaf1] <strong>display rail-group status</strong>
Global rail-group configuration: Enable
-------------------------------------------------------------
GroupName                        Index       Interface       
-------------------------------------------------------------
leafgroup                            0       <span>100GE</span><span>1/0/1</span>      
                                     1       <span>100GE</span><span>1/0/2</span>      
                                     2       <span>100GE</span><span>1/0/3</span>      
                                     3       <span>100GE</span><span>1/0/4</span>      
-------------------------------------------------------------</pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001512839138__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Configuration Scripts</h4><p>Spine1</p>
<pre class="screen">#
sysname Spine1
#
rail-group spinegroup1
 group-member interface <span>100GE</span><span>1/0/1</span>
 group-member interface <span>100GE</span><span>1/0/2</span>
#
rail-group spinegroup2
 group-member interface <span>100GE</span><span>1/0/3</span>
 group-member interface <span>100GE</span><span>1/0/4</span>
#
load-balance ecmp rail-group enable
#
return</pre>
<p>Spine2</p>
<pre class="screen">#
sysname Spine2
#
rail-group spinegroup1
 group-member interface <span>100GE</span><span>1/0/1</span>
 group-member interface <span>100GE</span><span>1/0/2</span>
#
rail-group spinegroup2
 group-member interface <span>100GE</span><span>1/0/3</span>
 group-member interface <span>100GE</span><span>1/0/4</span>
#
load-balance ecmp rail-group enable
#
return</pre>
<p>Leaf1</p>
<pre class="screen">#
sysname Leaf1
#
rail-group leafgroup
 group-member interface <span>100GE</span><span>1/0/1</span>
 group-member interface <span>100GE</span><span>1/0/2</span>
 group-member interface <span>100GE</span><span>1/0/3</span>
 group-member interface <span>100GE</span><span>1/0/4</span>
#
load-balance ecmp rail-group enable
#
return</pre>
<p>Leaf2</p>
<pre class="screen">#
sysname Leaf2
#
rail-group leafgroup
 group-member interface <span>100GE</span><span>1/0/1</span>
 group-member interface <span>100GE</span><span>1/0/2</span>
 group-member interface <span>100GE</span><span>1/0/3</span>
 group-member interface <span>100GE</span><span>1/0/4</span>
#
load-balance ecmp rail-group enable
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_rail_group_cfg_0002.html">Rail Group Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_rail_group_cfg_0005.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>