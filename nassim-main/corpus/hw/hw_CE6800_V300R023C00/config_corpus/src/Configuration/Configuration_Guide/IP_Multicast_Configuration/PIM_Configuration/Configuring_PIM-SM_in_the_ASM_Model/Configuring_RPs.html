
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring RPs">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_pim_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="vrp_pim_cfg_0012.html">
<meta name="DC.Relation" scheme="URI" content="vrp_pim_cfg_0015.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176743301">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring RPs</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176743301"></a><a name="EN-US_TASK_0000001176743301"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring RPs</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176743301__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>An RP can be manually configured or dynamically elected. Manually configuring a static RP prevents frequent information exchanges between C-RPs and the BSR, thereby reducing bandwidth consumption. Dynamic RP election simplifies configuration and improves the reliability of multicast forwarding as multiple C-RPs are configured.</p>
<p>A static RP and dynamic RP election can both be configured, with the static RP functioning as a backup due to its lower priority. In this case, you need to ensure that the RP information is consistent among devices. Otherwise, network faults may occur. <a href="#EN-US_TASK_0000001176743301__tab_01">Table 1</a> lists the default settings of some parameters related to C-BSRs and C-RPs. You are advised to use the default settings during RP configuration.</p>

<div class="tableBorder"><a name="EN-US_TASK_0000001176743301__tab_01"></a><a name="tab_01"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0000001176743301__tab_01" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Default settings of some parameters related to C-BSRs and C-RPs</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="middle" width="31.5%" id="mcps1.3.1.3.2.3.1.1" liSelected="liSelected"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="middle" width="68.5%" id="mcps1.3.1.3.2.3.1.2" liSelected="liSelected"><p>Default Setting</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" align="left" valign="top" width="31.5%" headers="mcps1.3.1.3.2.3.1.1 "><p>C-BSR priority</p>
</td>
<td class="cellrowborder" align="left" valign="top" width="68.5%" headers="mcps1.3.1.3.2.3.1.2 "><p>0</p>
</td>
</tr>
<tr><td class="cellrowborder" align="left" valign="top" width="31.5%" headers="mcps1.3.1.3.2.3.1.1 "><p>C-BSR hash mask length</p>
</td>
<td class="cellrowborder" align="left" valign="top" width="68.5%" headers="mcps1.3.1.3.2.3.1.2 "><p>30</p>
</td>
</tr>
<tr><td class="cellrowborder" align="left" valign="top" width="31.5%" headers="mcps1.3.1.3.2.3.1.1 "><p>BSR message fragmentation</p>
</td>
<td class="cellrowborder" align="left" valign="top" width="68.5%" headers="mcps1.3.1.3.2.3.1.2 "><p>Disabled.</p>
</td>
</tr>
<tr><td class="cellrowborder" align="left" valign="top" width="31.5%" headers="mcps1.3.1.3.2.3.1.1 "><p>Multicast group policy of a static RP</p>
</td>
<td class="cellrowborder" align="left" valign="top" width="68.5%" headers="mcps1.3.1.3.2.3.1.2 "><p>No multicast group policy is configured, indicating that multicast packets with any group address can be accepted.</p>
</td>
</tr>
<tr><td class="cellrowborder" align="left" valign="top" width="31.5%" headers="mcps1.3.1.3.2.3.1.1 "><p>Multicast group policy of a C-RP</p>
</td>
<td class="cellrowborder" align="left" valign="top" width="68.5%" headers="mcps1.3.1.3.2.3.1.2 "><p>No multicast group policy is configured, indicating that multicast packets with any group address can be accepted.</p>
</td>
</tr>
<tr><td class="cellrowborder" align="left" valign="top" width="31.5%" headers="mcps1.3.1.3.2.3.1.1 "><p>C-RP priority</p>
</td>
<td class="cellrowborder" align="left" valign="top" width="68.5%" headers="mcps1.3.1.3.2.3.1.2 "><p>0</p>
</td>
</tr>
<tr><td class="cellrowborder" align="left" valign="top" width="31.5%" headers="mcps1.3.1.3.2.3.1.1 "><p>Interval for sending C-RP Advertisement messages</p>
</td>
<td class="cellrowborder" align="left" valign="top" width="68.5%" headers="mcps1.3.1.3.2.3.1.2 "><p>60s</p>
</td>
</tr>
<tr><td class="cellrowborder" align="left" valign="top" width="31.5%" headers="mcps1.3.1.3.2.3.1.1 "><p>Hold time of C-RP Advertisement messages</p>
</td>
<td class="cellrowborder" align="left" valign="top" width="68.5%" headers="mcps1.3.1.3.2.3.1.2 "><p>150s</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001176743301__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a static RP.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure a type of ACL as required.</span><p><ul><li>Configure a basic numbered ACL.<pre class="screen"><span><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> [ <strong><span>number</span></strong> ] <i><span class="varname">basic-acl-number</span></i> </span></pre>
</li><li>Configure a named ACL.<pre class="screen"><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> <strong><span>name</span></strong> <i><span class="varname">acl-name</span></i> <strong><span>basic</span></strong> </pre>
</li></ul>
</p></li><li class="substepexpand"><span>Configure an ACL rule.</span><p><pre class="screen"><span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> }</span></pre>
</p></li><li class="substepexpand"><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the PIM view.</span><p><pre class="screen"><a href="cmdqueryname=pim"><b><span class="cmdname">pim </span></b></a>[ <span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span></pre>
</p></li><li class="substepexpand"><span>Specify a static RP address.</span><p><pre class="screen"><a href="cmdqueryname=static-rp"><b><span class="cmdname">static-rp</span></b></a> <i><span class="varname">rp-address</span></i> [ <i><span class="varname">basic-acl-number</span></i><span> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i></span> ] [ <strong><span>preferred</span></strong> ]</pre>
</p><p><p>All devices in the PIM-SM domain must be configured with the same static RP address so that the static RP works properly. If <strong><span>preferred</span></strong> is not specified in the command, a dynamic RP elected using the BSR mechanism is preferred. The static RP is preferred only if <strong><span>preferred</span></strong> is specified in the command. If multiple static RPs are available for a multicast group, the RP with the highest IP address serves the group. If an ACL is specified in the command, the static RP serves only the groups permitted by the ACL.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure dynamic RP election.</span><p><ol><li><div class="p">Enter the system view.<pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</div>
</li><li>Configure a type of ACL as required.<ul><li>Configure a basic numbered ACL.<pre class="screen"><span><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> [ <strong><span>number</span></strong> ] <i><span class="varname">basic-acl-number</span></i> </span></pre>
</li><li>Configure a named ACL.<pre class="screen"><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> <strong><span>name</span></strong> <i><span class="varname">acl-name</span></i> <strong><span>basic</span></strong> </pre>
</li></ul>
</li><li>Configure an ACL rule.<pre class="screen"><span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> }</span></pre>
</li><li><div class="p">Enter the PIM view.<pre class="screen"><a href="cmdqueryname=pim"><b><span class="cmdname">pim </span></b></a>[ <span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span></pre>
</div>
</li><li><div class="p">Configure a C-BSR.<pre class="screen"><a href="cmdqueryname=c-bsr"><b><span class="cmdname">c-bsr</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <i><span class="varname">hash-length</span></i> [ <i><span class="varname">priority</span></i> ] ]</pre>
</div>
<p>It is recommended that you configure the devices that aggregate multicast data as C-BSRs. To prevent interface flapping, which will cause frequent protocol changes, using a loopback interface for the reference of the C-BSR is recommended.</p>
</li><li><div class="p">(Optional) Enable BSR message fragmentation.<pre class="screen"><a href="cmdqueryname=bsm+semantic+fragmentation"><b><span class="cmdname">bsm semantic fragmentation</span></b></a></pre>
</div>
<p>BSR message fragmentation prevents all fragments from becoming unavailable due to the loss of fragment information in IP fragmentation. BSR message fragmentation must be enabled on all devices. Otherwise, the devices on which the function is not enabled may receive incomplete RP information.</p>
</li><li><div class="p">Specify an interface for the C-RP.<pre class="screen"><a href="cmdqueryname=c-rp"><b><span class="cmdname">c-rp</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <strong><span>group-policy</span></strong> <span>{ <i><span class="varname">basic-acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> }</span><span><i><span class="varname">basic-acl-number</span></i></span> | <strong><span>priority</span></strong> <i><span class="varname">priority</span></i> | <strong><span>holdtime</span></strong> <i><span class="varname">hold-interval</span></i> | <strong><span>advertisement-interval</span></strong> <i><span class="varname">adv-interval</span></i> ] <sup>*</sup></pre>
</div>
<p>It is recommended that you configure the devices that aggregate multicast data as C-RPs. To prevent interface flapping, which will cause frequent protocol changes, using a loopback interface for the reference of the C-RP is recommended.</p>
<p>The <strong>group-policy</strong> parameter specifies the range of multicast groups that a C-RP serves. The C-RP serves only the multicast groups permitted by an ACL.</p>
<p>The <strong>priority</strong> parameter specifies the priority of a C-RP. The greater the value, the lower the priority.</p>
<p>The <strong><span>holdtime</span></strong> parameter specifies the timeout period during which the BSR waits to receive the Advertisement message from the C-RP.</p>
<p>The <strong><span>advertisement-interval</span></strong> parameter specifies the interval at which a C-RP sends Advertisement messages.</p>
</li><li><div class="p">Configure a BSR boundary.<pre class="screen"><a href="cmdqueryname=pim+bsr-boundary"><b><span class="cmdname">pim bsr-boundary</span></b></a></pre>
</div>
<p>BSR messages cannot pass through BSR boundaries, which divide a PIM-SM network into PIM-SM domains.</p>
<p>It is recommended that you configure BSR boundaries on interfaces at the planned PIM-SM domain edge.</p>
</li><li>(Optional) Enable Auto-RP listening. This command must be run if the <span class="keyword">device</span> is required to interwork with an auto-RP-capable device.<pre class="screen"><a href="cmdqueryname=auto-rp+listening+enable"><b><span class="cmdname">auto-rp listening enable</span></b></a></pre>
<p>Auto-RP is used for automatic RP discovery before a Bootstrap protocol is specified for PIM-SM. After this command is run, the device receives auto-RP Advertisement and Discovery messages and learns RP information from the Discovery messages.</p>
</li><li>Commit the configuration.<pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</li></ol>
</p></li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_pim_cfg_0010.html">Configuring PIM-SM in the ASM Model
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_pim_cfg_0012.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_pim_cfg_0015.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>