
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring RA Attributes">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_nd_cfg_0025.html">
<meta name="DC.Relation" scheme="URI" content="vrp_nd_cfg_0027.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176662073">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring RA Attributes</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176662073"></a><a name="EN-US_TASK_0000001176662073"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring RA Attributes</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176662073__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Context</h4><ul><li>An RA message can carry parameters, such as the maximum number of hops, prefix, neighbor reachable time, and lifetime of the RA message.</li><li>If a host is connected to multiple devices, it must select a device to forward packets based on their destination addresses. In this case, the devices can advertise the default router preference and specified route information to the host, allowing the host to select a proper forwarding device based on the packets' destination addresses.<p>After receiving the RA messages carrying the route information, the host updates its routing table. When sending packets to another device, the host queries the routing table and selects a proper route to send packets.</p>
<p>When receiving the RA messages that carry the default router preference, the host updates its routing table. Then, when sending packets to another device, if there is no route to be selected, the host queries the routing table. After this, the host selects a device with the highest preference on the local link to send packets. If the device is faulty, the host selects another device according to a descending order of preference.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176662073__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Configure the maximum number of hops for RA messages.</span><p><pre class="screen"><a href="cmdqueryname=ipv6+nd+hop-limit"><b><span class="cmdname">ipv6 nd hop-limit</span></b></a> <i><span class="varname">limit</span></i></pre>
</p></li><li><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li><span>Switch the interface working mode to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
</p></li><li><span>Enable IPv6.</span><p><pre class="screen"><a href="cmdqueryname=ipv6+enable"><b><span class="cmdname">ipv6 enable</span></b></a></pre>
</p></li><li><span>Configure RA attributes.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring RA attributes</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.31333133313331%" id="mcps1.3.2.6.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.35333533353336%" id="mcps1.3.2.6.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.6.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.31333133313331%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure the maximum number of hops for RA messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.35333533353336%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+ra+hop-limit"><b><span class="cmdname">ipv6 nd ra hop-limit</span></b></a> <i><span class="varname">limit</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p><i><span class="varname">limit</span></i> specifies the maximum number of hops that RA messages (IPv6 unicast packets sent by a host) pass through.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.31333133313331%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure the device not to carry the default address prefix generated based on the interface IPv6 address in an RA message.</p>
</td>
<td class="cellrowborder" valign="top" width="33.35333533353336%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+ra+prefix"><b><span class="cmdname">ipv6 nd ra prefix</span></b></a> <strong><span>default</span></strong> <strong><span>no-advertise</span></strong></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>The prefix configured using the command cannot be fe80:: (prefix of a link-local address), ff00:: (prefix of a multicast address), or prefix of an unspecified address. It also cannot be the prefix that has been used by another interface (including the interface address prefix and prefix carried in RA messages).</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.31333133313331%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure a prefix to be carried in RA messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.35333533353336%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+ra+prefix"><b><span class="cmdname">ipv6 nd ra prefix</span></b></a> <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> <i><span class="varname">valid-lifetime</span></i> <em>preferred-lifetime</em> [ <strong><span>no-autoconfig</span></strong> ] [ <strong><span>off-link</span></strong> ]</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>The address prefix configured using the <a href="cmdqueryname=ipv6+nd+ra+prefix"><b><span class="cmdname">ipv6 nd ra prefix</span></b></a> command has a higher priority than the default address prefix. Considering that an RA message carries a maximum of 17 address prefixes, the default address prefix will not be carried in an RA message to be advertised if 17 address prefixes have been configured.</p>
<p>If stateless address autoconfiguration is used, you must specify the prefix length as 64. If not specified, the address does not take effect, and RA messages will be discarded.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.31333133313331%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure the managed address configuration flag of stateful address autoconfiguration in an RA message.</p>
</td>
<td class="cellrowborder" valign="top" width="33.35333533353336%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+autoconfig+managed-address-flag"><b><span class="cmdname">ipv6 nd autoconfig managed-address-flag</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>If the managed address configuration flag is configured, a host obtains an IPv6 address through stateful address autoconfiguration.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.31333133313331%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure the other configuration flag of stateful address autoconfiguration in an RA message.</p>
</td>
<td class="cellrowborder" valign="top" width="33.35333533353336%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+autoconfig+other-flag"><b><span class="cmdname">ipv6 nd autoconfig other-flag</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>If the managed address configuration flag is set to 1 in an RA message, the other configuration flag must also be set to 1.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.31333133313331%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure a neighbor reachable time.</p>
</td>
<td class="cellrowborder" valign="top" width="33.35333533353336%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+nud+reachable-time"><b><span class="cmdname">ipv6 nd nud reachable-time</span></b></a> <i><span class="varname">value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>Each RA message sent by a router carries the neighbor reachable time so that all the nodes along the same link can use the same time.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.31333133313331%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure a lifetime for RA messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.35333533353336%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+ra+router-lifetime"><b><span class="cmdname">ipv6 nd ra router-lifetime</span></b></a> <i><span class="varname">ra-lifetime</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>An RA message advertisement interval must be less than or equal to an RA message lifetime.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.31333133313331%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure the device not to carry the MTU option in RA messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.35333533353336%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+ra+advertised-mtu+disable"><b><span class="cmdname">ipv6 nd ra advertised-mtu disable</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>By default, the MTU value contained in RA messages is the same as that configured using the <a href="cmdqueryname=ipv6+mtu"><b><span class="cmdname">ipv6 mtu</span></b></a> command. If the <a href="cmdqueryname=ipv6+mtu"><b><span class="cmdname">ipv6 mtu</span></b></a> command has not been run to configure the MTU option, the default interface MTU is used. To disable the device from carrying the MTU option in RA messages to be sent, run the <a href="cmdqueryname=ipv6+nd+ra+advertised-mtu+disable"><b><span class="cmdname">ipv6 nd ra advertised-mtu disable</span></b></a> command.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.31333133313331%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure RA message advertisement intervals.</p>
</td>
<td class="cellrowborder" valign="top" width="33.35333533353336%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+ra"><b><span class="cmdname">ipv6 nd ra</span></b></a> { <strong><span>max-interval</span></strong> <i><span class="varname">maximum-interval</span></i> | <strong><span>min-interval</span></strong> <i><span class="varname">minimum-interval</span></i> }</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>The maximum interval cannot be shorter than 4/3 of the minimum interval.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.31333133313331%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure a default router preference for RA messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.35333533353336%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+ra+preference"><b><span class="cmdname">ipv6 nd ra preference</span></b></a> { <strong><span>high</span></strong> | <strong><span>medium</span></strong> | <strong><span>low</span></strong> }</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>The default router preference of RA messages is medium.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.31333133313331%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure route information for RA messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.35333533353336%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+ra+route-information"><b><span class="cmdname">ipv6 nd ra route-information</span></b></a> <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> <strong><span>lifetime</span></strong> <i><span class="varname">route-lifetime</span></i> [ <strong><span>preference</span></strong> { <strong><span>high</span></strong> | <strong><span>medium</span></strong> | <strong><span>low</span></strong> } ]</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>An RA message includes route information. The device sends the specified routes to the hosts on the local network segment by using this information. The hosts can send packets by using these routes.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.31333133313331%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure an address or lifetime for the RDNSS option carried in an RA message.</p>
</td>
<td class="cellrowborder" valign="top" width="33.35333533353336%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+ra+dns-server"><b><span class="cmdname">ipv6 nd ra dns-server</span></b></a><i><span class="varname"> ipv6-address</span></i> [ <i><span class="varname">lifetime</span></i> ]</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>In ND address autoconfiguration scenarios, if a DNS server address changes, hosts cannot promptly detect the change. As a result, DNS resolution fails and services that rely on DNS cannot be used. To resolve this issue, configure a DNS server address on a routing device. After the configuration is complete, the device periodically advertises the DNS server address in RA messages. Upon receipt of such messages, hosts can obtain the latest available DNS server address and use the DNS service accurately.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.31333133313331%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure a domain name suffix or lifetime for the DNSSL option carried in an RA message.</p>
</td>
<td class="cellrowborder" valign="top" width="33.35333533353336%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+ra+dns-suffix"><b><span class="cmdname">ipv6 nd ra dns-suffix</span></b></a> <i><span class="varname">domain</span></i> [ <i><span class="varname">lifetime</span></i> ]</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>In ND address autoconfiguration scenarios, it is difficult to memorize a complete DNS domain name. To facilitate memorization and improve work efficiency, configure a DNS domain name suffix on a routing device. After the configuration is complete, the device periodically advertises the configured DNS domain name suffix in RA messages. Upon receipt of such messages, hosts obtain the DNS domain name suffix and append it to the hostname to form a complete domain name for DNS domain name resolution.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176662073__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176662073__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001176662073__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+ipv6+interface"><b><span class="cmdname">display ipv6 interface</span></b></a> [ <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <strong><span>brief</span></strong> ] command to check RA configurations.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_nd_cfg_0025.html">Configuring RA
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_nd_cfg_0027.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>