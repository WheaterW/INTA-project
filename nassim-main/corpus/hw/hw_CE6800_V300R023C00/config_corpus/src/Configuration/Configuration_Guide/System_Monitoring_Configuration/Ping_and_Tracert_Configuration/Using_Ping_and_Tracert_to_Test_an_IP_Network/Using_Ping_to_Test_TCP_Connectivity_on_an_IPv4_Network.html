
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Using Ping to Test TCP Connectivity on an IPv4 Network">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ping_tracert_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ping_tracert_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ping_tracert_cfg_0012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Ping and Tracert">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ping and Tracert">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="Ping and Tracert">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="Ping and Tracert">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130625000">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Using Ping to Test TCP Connectivity on an IPv4 Network</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130625000"></a><a name="EN-US_TASK_0000001130625000"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Using Ping to Test TCP Connectivity on an IPv4 Network</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130625000__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before running the <a href="cmdqueryname=ping+tcp"><b><span class="cmdname">ping tcp</span></b></a> command on a device to test TCP connectivity on an IPv4 network, ensure that the TCP server function has been enabled on the peer end.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130625000__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>As shown in <a href="#EN-US_TASK_0000001130625000__fig19666175217492">Figure 1</a>, a ping operation can be performed to check whether the source (DeviceA) and destination (TCP server) are able to reach each other and to measure the time they require to set up a TCP connection through a three-way handshake.</p>
<p>The packet exchange during the ping process is as follows:</p>
<ol><li>DeviceA sends a TCP SYN packet for establishing a TCP connection with the TCP server according to the specified destination IP address and port number.</li><li>When receiving the TCP SYN packet, the TCP server accepts the request and responds with a TCP SYN ACK packet.</li><li>Upon receipt of the TCP SYN ACK packet, DeviceA sends an ACK packet to the TCP server.</li></ol>
<p>After the TCP connection is established, DeviceA calculates the time difference between sending a TCP SYN packet and sending an ACK packet to obtain the time required to set up a TCP connection through a three-way handshake. This helps you learn about the performance of the TCP protocol on the network.</p>
<div class="fignone" id="EN-US_TASK_0000001130625000__fig19666175217492"><a name="EN-US_TASK_0000001130625000__fig19666175217492"></a><a name="fig19666175217492"></a><span class="figcap"><b>Figure 1 </b>Network diagram of testing TCP connectivity using the ping function</span><br><span><img class="vsd" src="figure/en-us_image_0000001176664553.png"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130625000__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>(Optional) If the TCP port on the destination end is not enabled, manually enable it.</span><ol type="a"><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Specify the listening IP address and listening port number for TCP services on the destination end.</span><p><pre class="screen"><a href="cmdqueryname=nqa+server+tcpconnect"><b><span class="cmdname">nqa server tcpconnect</span></b></a> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]<strong> </strong><i><span class="varname">ip-address</span></i> <i><span class="varname">port-number</span></i></pre>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130625000__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130625000__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Initiate a ping test on a source to test the TCP connectivity with a destination.</span><p><pre class="screen"><a href="cmdqueryname=ping+tcp"><b><span class="cmdname">ping tcp</span></b></a> [ <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-m</span></strong> <i><span class="varname">interval</span></i> | <strong><span>-h</span></strong> <i><span class="varname">ttl</span></i> | <strong><span>-vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>-passroute</span></strong> | <strong><span>-a</span></strong> <i><span class="varname">source-ip-address</span></i> ] <sup>*</sup> <i><span class="varname">destAddress</span></i> [ <i><span class="varname">destPort</span></i> ]</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001130625000__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Example</h4><p>Perform a ping operation to test TCP connectivity with the destination 10.1.1.1.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>ping tcp 10.1.1.1 3000</strong>
  PING TCP 10.1.1.1: 3000, press CTRL_C to break
    Reply from 10.1.1.1: Sequence=1 time=3 ms
    Reply from 10.1.1.1: Sequence=2 time=3 ms
    Reply from 10.1.1.1: Sequence=3 time=3 ms
    Reply from 10.1.1.1: Sequence=4 time=3 ms
    Reply from 10.1.1.1: Sequence=5 time=4 ms

  --- TCP ping statistics ---
    5 packet(s) transmitted
    5 packet(s) received
    0.00% packet loss
    round-trip min/avg/max = 3/3/4 ms</pre>
<p>The command output contains the following information:</p>
<ul><li><p>Response to each test packet: If no response packet is received before the timer on the source expires, the message "Request time out" is displayed. If a response packet is received, information such as the number of bytes in the payload, packet sequence number, and response time is displayed.</p>
</li><li><p>Ping statistics: include the numbers of sent and received packets, the packet loss rate, and the minimum, maximum, and average response time durations.</p>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ping_tracert_cfg_0008.html">Using Ping and Tracert to Test an IP Network
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ping_tracert_cfg_0010.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ping_tracert_cfg_0012.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>