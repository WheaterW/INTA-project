
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring OSPFv3 to Filter LSAs in an Area">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0126.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0127.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0128.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130623286">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring OSPFv3 to Filter LSAs in an Area</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130623286"></a><a name="EN-US_TASK_0000001130623286"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring OSPFv3 to Filter LSAs in an Area</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130623286__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring OSPFv3 to filter LSAs in an area, you have completed the following tasks:</p>
<ul><li><p><a href="vrp_ospfv3_cfg_0009.html">Configure basic OSPFv3 functions</a>.</p>
</li><li>To use a route-policy to filter LSAs, create the route-policy first.</li><li>To use an IP prefix list to filter LSAs, create the IP prefix list first.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130623286__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the OSPFv3 view.</span><p><pre class="screen"><a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
</p></li><li><span>Enter the OSPFv3 area view.</span><p><pre class="screen"><a href="cmdqueryname=area+%28OSPFv3+view%29"><b><span class="cmdname">area</span></b></a> <i><span class="varname">area-id</span></i></pre>
</p></li><li><span>To configure OSPFv3 to filter incoming or outgoing Type 3 LSAs in an area, use any of the following methods as needed:</span><p><ul><li>Based on an ACL:<ol type="a"><li>Return to the system view.<pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Create an ACL and enter the ACL view.<pre class="screen"><span><a href="cmdqueryname=acl+ipv6"><b><span class="cmdname">acl ipv6</span></b></a> { <strong><span>name</span></strong> <i><span class="varname">basic-acl6-name</span></i> <strong><span>basic</span></strong> | [ <strong><span>number</span></strong> ] <i><span class="varname">basic-acl6-number</span></i> }</span></pre>
</li><li>Configure an ACL rule.<pre class="screen"><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } [ <strong><span>fragment</span></strong> | <strong><span>source</span></strong> { <i><span class="varname">source-ipv6-address</span></i> { <i><span class="varname">prefix-length</span></i> | <i><span class="varname">source-wildcard</span></i> } | <i><span class="varname">source-ipv6-address</span></i>/<i><span class="varname">prefix-length</span></i> | <strong><span>any</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>logging</span></strong> ] ] <sup>*</sup></pre>
<p>When the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command is used to configure a filtering rule for a named ACL, only the configurations specified by <strong><span>source</span></strong> and <strong><span>time-range</span></strong> take effect.</p>
<p>The following table lists the strategies that can be taken when an ACL is used for filtering.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>ACL strategies</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="32.59%" id="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.1" liSelected="liSelected"><p>Condition</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="67.41%" id="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.2" liSelected="liSelected"><p>Filtering Result</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="32.59%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.1 "><p>The action in an ACL rule is <strong>permit</strong>.</p>
</td>
<td class="cellrowborder" valign="top" width="67.41%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.2 "><p>The matched LSAs will be advertised or accepted.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.59%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.1 "><p>The action in an ACL rule is <strong>deny</strong>.</p>
</td>
<td class="cellrowborder" valign="top" width="67.41%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.2 "><p>The matched LSAs will not be advertised or accepted.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.59%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.1 "><p>The prefix of a route is beyond the range specified in an ACL rule.</p>
</td>
<td class="cellrowborder" valign="top" width="67.41%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.2 "><p>By default, the matched LSAs will not be advertised or accepted.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.59%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.1 "><p>The ACL does not contain rules.</p>
</td>
<td class="cellrowborder" valign="top" width="67.41%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.2 "><p>Any LSAs matched against the filtering policy based on this ACL will not be advertised or accepted.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.59%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.1 "><p>If the configuration order is used as the ACL rule matching order, LSAs are matched against the ACL rules based on the configuration order by default. If the ACL rules are numbered with IDs, LSAs are matched against the ACL rules in ascending order of rule IDs.</p>
</td>
<td class="cellrowborder" valign="top" width="67.41%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.2 "><p>In this case, there are two filtering modes.</p>
<p>Filtering using a blacklist: Configure a rule with an ID and specify the action <strong>deny</strong> in this rule to filter out the LSAs that the device does not want to accept or advertise. Then, configure another rule with a larger ID in the same ACL and specify the action <strong>permit</strong> in this rule to accept or advertise the other LSAs.</p>
<p>Filtering using a whitelist: Configure a rule with an ID and specify the action <strong>permit</strong> in this rule to permit the LSAs that the device wants to accept or advertise. Then, configure another rule with a larger ID in the same ACL and specify the action <strong>deny</strong> in this rule to filter out the LSAs that the device does not want to accept or advertise.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>Enter the OSPFv3 view.<pre class="screen"><a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
</li><li>Enter the OSPFv3 area view.<pre class="screen"><a href="cmdqueryname=area"><b><span class="cmdname">area</span></b></a> <i><span class="varname">area-id</span></i></pre>
</li><li>Implement filtering based on the ACL.<pre class="screen"><a href="cmdqueryname=filter"><b><span class="cmdname">filter</span></b></a> { <i><span class="varname">acl6-number</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl6-name</span></i> } <strong><span>import</span></strong>
<a href="cmdqueryname=filter"><b><span class="cmdname">filter</span></b></a> { <i><span class="varname">acl6-number</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl6-name</span></i> } <strong><span>export</span></strong></pre>
</li></ol>
</li><li>Based on an IP prefix list:<pre class="screen"><a href="cmdqueryname=filter"><b><span class="cmdname">filter</span></b></a> <strong><span>ipv6-prefix</span></strong> <i><span class="varname">ipv6-prefix-name</span></i> <strong><span>import</span></strong>
<a href="cmdqueryname=filter"><b><span class="cmdname">filter</span></b></a> <strong><span>ipv6-prefix</span></strong> <i><span class="varname">ipv6-prefix-name</span></i> <strong><span>export</span></strong></pre>
</li><li>Based on a route-policy:<pre class="screen"><a href="cmdqueryname=filter"><b><span class="cmdname">filter</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>import</span></strong>
<a href="cmdqueryname=filter"><b><span class="cmdname">filter</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>export</span></strong></pre>
</li></ul>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130623286__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130623286__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001130623286__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+ospfv3"><b><span class="cmdname">display ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>lsdb</span></strong> command to check the OSPFv3 LSDB information.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospfv3_cfg_0126.html">Configuring OSPFv3 to Filter LSAs
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospfv3_cfg_0127.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ospfv3_cfg_0128.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>