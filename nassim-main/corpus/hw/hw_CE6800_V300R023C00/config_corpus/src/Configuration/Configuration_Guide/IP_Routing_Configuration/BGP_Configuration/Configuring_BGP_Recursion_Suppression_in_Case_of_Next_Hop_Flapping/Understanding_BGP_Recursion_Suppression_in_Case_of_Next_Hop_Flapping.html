
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Understanding BGP Recursion Suppression in Case of Next Hop Flapping">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0102.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0104.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001130624094">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Understanding BGP Recursion Suppression in Case of Next Hop Flapping</title>
</head>
<body><a name="EN-US_CONCEPT_0000001130624094"></a><a name="EN-US_CONCEPT_0000001130624094"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">Understanding BGP Recursion Suppression in Case of Next Hop Flapping</h1>


<div>
<div class="section"><h4 class="sectiontitle">Context</h4><p>In some scenarios, a large number of routes may recurse to the same next hop. If the next hop flaps due to a device fault, the system will become occupied processing reselection and re-advertisement of each involved route, leading to excessive resource consumption and high CPU usage. To address this problem, enable BGP recursion suppression in case of next hop flapping.</p>
</div>

<div class="section"><h4 class="sectiontitle">Fundamentals</h4><div class="p">After BGP recursion suppression in case of next hop flapping is enabled, a BGP device determines whether to increase, retain, or reduce the penalty value by comparing the flapping interval with the configured interval. When the penalty value exceeds 10, the BGP device suppresses route recursion to the corresponding next hop. For example, if the intervals for increasing, retaining, and clearing the penalty value are T1, T2, and T3, respectively, a BGP device calculates the penalty value as follows:<ul><li>Increases the penalty value by 1 if the flapping interval is less than T1.</li><li>Retains the penalty value if the flapping interval is greater than or equal to T1, but less than T2.</li><li>Reduces the penalty value by 1 if the flapping interval is greater than or equal to T2, but less than T3.</li><li>Clears the penalty value if the flapping interval is greater than or equal to T3.</li></ul>
</div>
<p>When the penalty value exceeds 10, the system slows down how quickly it processes reselection and re-advertisement of the routes that are recursed to a flapping next hop.</p>
</div>

<div class="section"><h4 class="sectiontitle">Benefits</h4><p>BGP recursion suppression in case of next hop flapping prevents the system from frequently processing reselection and re-advertisement of a large number of routes that are recursed to a flapping next hop, reducing system resource consumption and CPU usage.</p>
</div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp_cfg_0102.html">Configuring BGP Recursion Suppression in Case of Next Hop Flapping
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp_cfg_0104.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>