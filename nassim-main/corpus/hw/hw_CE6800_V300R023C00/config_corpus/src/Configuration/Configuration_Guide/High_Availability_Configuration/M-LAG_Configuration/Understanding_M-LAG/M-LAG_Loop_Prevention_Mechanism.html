
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="M-LAG Loop Prevention Mechanism">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../toctopics/en-us_concept_0000001513048806.html">
<meta name="DC.Relation" scheme="URI" content="../toctopics/en-us_concept_0000001512689650.html">
<meta name="DC.Relation" scheme="URI" content="../dc/dc_cfg_m-lag_0052.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="M-LAG">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="M-LAG">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="M-LAG">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001564128889">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>M-LAG Loop Prevention Mechanism</title>
</head>
<body><a name="EN-US_CONCEPT_0000001564128889"></a><a name="EN-US_CONCEPT_0000001564128889"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">M-LAG Loop Prevention Mechanism</h1>
<div><p>M-LAG has a loop prevention mechanism that helps construct a loop-free network. On the network shown in <a href="#EN-US_CONCEPT_0000001564128889__fig1546120157115">Figure 1</a>, unicast traffic from the access device or network-side device to M-LAG devices is forwarded through the local M-LAG device preferentially, and the peer-link does not transmit data traffic under normal circumstances. When traffic is broadcast to the peer M-LAG device through the peer-link, the traffic received through the peer-link is not forwarded through the M-LAG member interface because unidirectional traffic isolation is configured between the peer-link and M-LAG member interface, preventing a loop. This is the unidirectional isolation mechanism of M-LAG.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001564128889__fig1546120157115"><a name="EN-US_CONCEPT_0000001564128889__fig1546120157115"></a><a name="fig1546120157115"></a><span class="figcap"><b>Figure 1 </b>Traffic forwarding when an M-LAG is connected to a Layer 2 network</span><br><span><img class="vsd" src="../images/en-us_image_0000001564009261.png" width="NaN" height="NaN"></span></div>
<div class="section"><h4 class="sectiontitle">Unidirectional Isolation Mechanism</h4><p><strong>Prerequisites for the Mechanism to Take Effect</strong></p>
<div class="p">When M-LAG master and backup devices are negotiated, the system checks whether an access device is dual-homed to the M-LAG using M-LAG synchronization packets.<ul><li>If the access device is dual-homed to the M-LAG, the two M-LAG devices automatically deliver the unidirectional isolation configuration of the corresponding M-LAG member interface to isolate traffic from peer-link interfaces to M-LAG member interfaces.<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Unidirectional isolation in the M-LAG loop prevention mechanism takes effect for Layer 2 traffic (including unicast, multicast, and broadcast traffic) and Layer 3 multicast traffic, and does not take effect for Layer 3 unicast traffic.</p>
</div></div>
</li><li>If the access device is single-homed to the M-LAG, the M-LAG does not deliver the unidirectional isolation configuration of the corresponding M-LAG member interface.</li><li>In active/standby mode, the M-LAG does not deliver the unidirectional isolation configuration of the corresponding M-LAG member interface.</li></ul>
</div>
<p><strong>Implementation of the Unidirectional Isolation Mechanism</strong></p>
<p>On the network shown in <a href="#EN-US_CONCEPT_0000001564128889__fig574564411193">Figure 2</a>, when a device is dual-homed to an M-LAG, unidirectional isolation is implemented between peer-link interfaces and M-LAG member interfaces through the port isolation function, isolating flooding traffic such as broadcast traffic sent from peer-link interfaces to M-LAG member interfaces.</p>
<p>The two M-LAG devices automatically deliver the unidirectional isolation configuration of the corresponding M-LAG member interface. Interfaces in the same port isolation group cannot communicate with each other. When an M-LAG device detects that the local M-LAG member interface is down, the device sends M-LAG synchronization packets through the peer-link to instruct the peer device to automatically delete the corresponding M-LAG member interface from the isolation group.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001564128889__fig574564411193"><a name="EN-US_CONCEPT_0000001564128889__fig574564411193"></a><a name="fig574564411193"></a><span class="figcap"><b>Figure 2 </b>M-LAG unidirectional isolation</span><br><span><img class="vsd" src="../images/en-us_image_0000001513049014.png" width="NaN" height="NaN"></span></div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../toctopics/en-us_concept_0000001513048806.html">Understanding M-LAG
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../toctopics/en-us_concept_0000001512689650.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../dc/dc_cfg_m-lag_0052.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>