
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Multicast Static Routes">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_mcast_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="vrp_mcast_cfg_0009.html">
<meta name="DC.Relation" scheme="URI" content="vrp_mcast_cfg_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv4 Multicast Route Management">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Multicast Route Management">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv4 Multicast Route Management">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176742425">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Multicast Static Routes</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176742425"></a><a name="EN-US_TASK_0000001176742425"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Multicast Static Routes</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176742425__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Multicast static routes are an important basis for RPF checks. By configuring multicast static routes, you can specify RPF interfaces and RPF neighbors for packets with specific sources.</p>
<p>Multicast static routes provide the following functions, depending on application scenarios:</p>
<ul><li><p>Changing RPF routes</p>
<p>If multicast data packets from a specified multicast source need to be received from a specified interface that is not the RPF interface, a multicast static route needs to be configured to specify this interface as the RPF interface. Once configured, a device, when receiving a multicast data packet from the specified source, performs an RPF check on the packet by taking the configured route as the RPF route. Packets that are not sent from the specified interface fail the RPF check.</p>
</li><li><p>Connecting RPF routes</p>
<p>On subnets where unicast routes are blocked, multicast packets cannot be forwarded due to a lack of RPF routes. For example, when two adjacent devices run different routing protocols that do not import routes from each other, packets cannot be forwarded between the two devices because there are no RPF routes. In this case, you can configure multicast static routes to specify RPF interfaces for the RPF check on the devices. Multicast packets can then be forwarded successfully.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176742425__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable the multicast function.</span><p><pre class="screen"><a href="cmdqueryname=multicast+routing-enable"><b><span class="cmdname">multicast routing-enable</span></b></a></pre>
</p></li><li><span>Configure a multicast static route.</span><p><pre class="screen"><a href="cmdqueryname=ip+rpf-route-static"><b><span class="cmdname">ip rpf-route-static</span></b></a><strong> </strong>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <i><span class="varname">source-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } { <i><span class="varname">rpf-nbr</span></i> | { <i><span class="varname">interface-name</span></i> | <em><i><span class="varname">interface-type</span></i></em><em> </em><i><span class="varname">interface-number</span></i> } } [ <strong><span>preference</span></strong><strong> </strong><i><span class="varname">preValue</span></i> ]</pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When configuring a multicast static route, if the next-hop interface is a P2P interface, you can use the <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> parameter to configure the next-hop interface (namely, the RPF interface) in the command. If the next-hop interface is not a P2P interface, you must specify <i><span class="varname">rpf-nbr</span></i> to configure the next-hop address, that is, the IP address of the RPF neighbor.</p>
<p>After the <a href="cmdqueryname=ip+rpf-route-static"><b><span class="cmdname">ip rpf-route-static</span></b></a> command is run, the multicast static route may not take effect, because outbound interface recursion may fail or the specified interface may be down. Therefore, after the configuration, you are advised to run the <a href="cmdqueryname=display+multicast+routing-table"><b><span class="cmdname">display multicast routing-table</span></b></a> <span>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></span> ] <strong><span>static</span></strong> [ <strong><span>config</span></strong> ] [ <i><span class="varname">prefix</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">masklength</span></i> } ] command to check whether the route takes effect.</p>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_mcast_cfg_0008.html">Configuring Multicast Static Routes
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_mcast_cfg_0009.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_mcast_cfg_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>