
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Using Ping to Test the Reachability of Layer 3 Trunk Member Interfaces">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ping_tracert_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ping_tracert_cfg_0009.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ping_tracert_cfg_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Ping and Tracert">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ping and Tracert">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="Ping and Tracert">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="Ping and Tracert">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176664545">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Using Ping to Test the Reachability of Layer 3 Trunk Member Interfaces</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176664545"></a><a name="EN-US_TASK_0000001176664545"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Using Ping to Test the Reachability of Layer 3 Trunk Member Interfaces</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176664545__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>You can perform a ping operation to test the reachability of a Layer 3 trunk member interface in order to determine whether the interface link is faulty.</p>
<p>A trunk interface is a logical interface comprised of multiple physical interfaces (known as member interfaces) bundled together. The transmission path of each trunk member interface varies, and consequently the RTT, jitter, and packet loss rate of member interfaces also vary. As such, it is not possible to determine which member interface is faulty when the quality of a service on a trunk interface deteriorates. To resolve this problem, you can use ping to test the reachability of trunk member interfaces.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This method applies to scenarios where the source and destination are directly connected through a trunk interface.</p>
</div></div>
<p>The fundamentals for using ping to test the reachability of trunk member interfaces are as follows:</p>
<p>To monitor the end-to-end link status of a trunk member interface, ensure that ICMP Echo Request and ICMP Echo Reply messages are sent through the link of this trunk member interface. This means that on the destination, an ICMP Echo Reply message is sent to the source through the interface that receives the ICMP Echo Request message.</p>
<p>The following uses the ping operation to test the reachability of interface 1 (a trunk member interface) on DeviceB as an example. The packet exchange process is as follows:</p>
<ol><li>A ping operation is initiated on DeviceA (source) to send ICMP Echo Request messages to interface 1 on DeviceB (destination).</li><li>DeviceB receives the ICMP Echo Request messages through interface 1, and then sends ICMP Echo Reply messages to DeviceA through the same interface.</li><li>DeviceA receives the ICMP Echo Reply messages, indicating that DeviceA can communicate with interface 1 on DeviceB.</li></ol>
<div class="fignone"><span class="figcap"><b>Figure 1 </b>Testing reachability of a trunk member interface using ping</span><br><span><img class="vsd" src="figure/en-us_image_0000001130625010.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176664545__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enable the Layer 3 trunk member interface check function on the destination.</span><ol type="a"><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enable the Layer 3 trunk member interface check function.</span><p><pre class="screen"><a href="cmdqueryname=trunk+member-port-inspect"><b><span class="cmdname">trunk member-port-inspect</span></b></a></pre>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176664545__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176664545__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Ping a Layer 3 trunk member interface from the source to test the interface reachability.</span><p><pre class="screen"><a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> [ <strong><span>ip</span></strong> ] { [ <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | <strong><span>-i</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } | <strong><span>-nexthop</span></strong> <i><span class="varname">nexthop-address</span></i> | { <strong><span>-range</span></strong> [ <strong><span>min</span></strong> <i><span class="varname">min-value</span></i> | <strong><span>max</span></strong> <i><span class="varname">max-value</span></i> | <strong><span>step</span></strong> <i><span class="varname">step-value</span></i> ] <sup>*</sup> | <strong><span>-s</span></strong> <i><span class="varname">packetsize</span></i> } | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-m</span></strong> <i><span class="varname">time</span></i> | <strong><span>-a</span></strong> <i><span class="varname">source-ip-address</span></i> | <strong><span>-h</span></strong> <i><span class="varname">ttl-value</span></i> | <strong><span>-p</span></strong> <i><span class="varname">pattern</span></i> | { <strong><span>-tos</span></strong> <i><span class="varname">tos-value</span></i> | <strong><span>-dscp</span></strong> <i><span class="varname">dscp-value</span></i> } | { <strong><span>-f</span></strong> | <strong><span>ignore-mtu</span></strong> } | <strong><span>-q</span></strong> | <strong><span>-r</span></strong> | <strong><span>-vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>-v</span></strong> | <strong><span>-name</span></strong> | <strong><span>-system-time</span></strong> | <strong><span>-ri</span></strong> | <strong><span>-8021p</span></strong> <i><span class="varname">8021p-value</span></i> | <strong><span>-detail</span></strong> ] <sup>*</sup> <i><span class="varname">destAddress</span></i> [ <strong><span>ip-forwarding</span></strong> ] }</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001176664545__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Example</h4><p>Perform a ping operation to test the reachability of a Layer 3 trunk member interface.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>ping -a 192.168.1.1 -i Eth-Trunk 1 10.1.1.2</strong>
 PING 10.1.1.2: 56 data bytes, press CTRL_C to break
    Reply from 10.1.1.2: bytes=56 Sequence=1 ttl=255 time=170 ms
    Reply from 10.1.1.2: bytes=56 Sequence=2 ttl=255 time=30 ms
    Reply from 10.1.1.2: bytes=56 Sequence=2 ttl=255 time=30 ms
    Reply from 10.1.1.2: bytes=56 Sequence=2 ttl=255 time=50 ms
    Reply from 10.1.1.2: bytes=56 Sequence=2 ttl=255 time=50 ms    

  --- 10.1.1.2 ping statistics ---
    5 packet(s) transmitted
    5 packet(s) received
    0.00% packet loss
    round-trip min/avg/max = 30/66/170 ms</pre>
<p>The command output contains the following information:</p>
<ul><li><p>Response to each test packet: If no ICMP Echo Reply message is received before the timer on the source expires, the message "Request time out" is displayed. If an ICMP Echo Reply message is received, information such as the packet payload, packet sequence number, and response time is displayed.</p>
</li><li><p>Final statistics: This information includes the numbers of sent and received packets; the packet loss rate; and the minimum, maximum, and average response times.</p>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ping_tracert_cfg_0008.html">Using Ping and Tracert to Test an IP Network
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ping_tracert_cfg_0009.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ping_tracert_cfg_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>