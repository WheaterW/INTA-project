
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring TC Protection">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1109.html">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1111.html">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1113.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MSTP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="STP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSTP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="STP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="MSTP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="STP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001345238513">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring TC Protection</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001345238513"></a><a name="EN-US_TASK_0000001345238513"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring TC Protection</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001345238513__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If an attacker forges TC BPDUs to attack a device, the device receives a large number of TC BPDUs within a short period of time, and frequently deletes MAC address entries or ARP entries, increasing the device load and affecting network stability.</p>
<p>After enabling TC protection on the device, you can configure the maximum number of TC BPDUs that the device processes within a specified period. If the number of TC BPDUs received by the device within the specified period exceeds the configured maximum number, the device processes only the specified number of TC BPDUs. After the specified period expires, the device processes all the excess TC BPDUs together. This prevents the device from frequently deleting MAC address entries and ARP entries, reducing the device load.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001345238513__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable TC protection.</span><p><pre class="screen"><a href="cmdqueryname=stp+tc-protection"><b><span class="cmdname">stp tc-protection</span></b></a></pre>
<p>By default, TC protection is disabled on a device.</p>
</p></li><li><span>Set either or both of the following TC protection parameters:</span><p><ul><li><p>Set the period during which the device processes the maximum number of TC BPDUs.</p>
<pre class="screen"><a href="cmdqueryname=stp+tc-protection+interval"><b><span class="cmdname">stp tc-protection interval</span></b></a> <i><span class="varname">interval-value</span></i></pre>
<p>The default period is the Hello Time.</p>
</li><li><p>Set the maximum number of TC BPDUs that the device processes within the specified period.</p>
<pre class="screen"><a href="cmdqueryname=stp+tc-protection+threshold"><b><span class="cmdname">stp tc-protection threshold</span></b></a> <i><span class="varname">threshold</span></i></pre>
<p>By default, a device processes one TC BPDU within the specified period.</p>
</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>There are two TC protection parameters: the period during which a device processes the maximum number of TC BPDUs (<strong>tc-protection interval</strong>) and the maximum number of TC BPDUs processed within the period (<strong>tc-protection threshold</strong>). If <strong>tc-protection interval</strong> and <strong>tc-protection threshold</strong> are set to 10 seconds and 5 respectively on a device, the device processes only the first five TC BPDUs within 10 seconds and continues to process the others after the 10 second period expires. You are advised to set the period during which a device processes the maximum number of TC BPDUs to the number of ports in an STP instance divided by 10, and set the maximum number of TC BPDUs processed within the period to 1. For example, if the number of ports in an STP instance is 100, you are advised to configure the device to process one TC BPDU every 10 seconds.</p>
</li><li><p>Within the period specified by the <a href="cmdqueryname=stp+tc-protection+interval"><b><span class="cmdname">stp tc-protection interval</span></b></a> command, the device processes only the number of TC BPDUs specified by the <a href="cmdqueryname=stp+tc-protection+threshold"><b><span class="cmdname">stp tc-protection threshold</span></b></a> command and delays processing other packets. This may affect the spanning tree convergence speed.</p>
</li></ul>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001345238513__en-us_task_0234857734_en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001345238513__en-us_task_0234857734_en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001345238513__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+stp+global"><b><span class="cmdname">display stp global</span></b></a> command and check the Tc-protection, Tc-protection threshold, and Tc-protection interval fields to verify the TC protection configuration.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_stp_cfg_1109.html">Configuring RSTP/MSTP Protection
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_stp_cfg_1111.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_stp_cfg_1113.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>