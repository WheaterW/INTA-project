
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Edge Ports and BPDU Filtering Ports (for RSTP/MSTP)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1063.html">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1088.html">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1097.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MSTP">
<meta name="featurename" content="RSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSTP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="STP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001345238505">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Edge Ports and BPDU Filtering Ports (for RSTP/MSTP)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001345238505"></a><a name="EN-US_TASK_0000001345238505"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Edge Ports and BPDU Filtering Ports (for RSTP/MSTP)</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001345238505__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>RSTP or MSTP defines a port that is located at the network edge and directly connected to a terminal device as an edge port.</p>
<p>Edge ports do not receive or process configuration BPDUs or participate in RSTP or MSTP calculation. They can change from the Disabled state to the Forwarding state in an instant, as if RSTP or MSTP were disabled.</p>
<p>Edge ports send BPDUs. If the BPDUs are sent to other networks, flapping may occur on these networks. BPDU filtering can be configured on the edge ports to disable them from processing and sending BPDUs.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If all ports on a device are configured as edge ports and BPDU filtering ports in the system view, all of the device's ports will be in Forwarding state and none of them will send BPDUs or negotiate parameters related to the spanning tree protocol with directly connected ports on the peer device. However, this may cause network loops, leading to broadcast storms. Exercise caution when configuring these ports.</p>
<p>If a port is configured as an edge port and BPDU filtering port in the interface view, the port will not process or send BPDUs and cannot negotiate parameters related to the spanning tree protocol with the directly connected port on the peer device. Exercise caution when configuring this port.</p>
<p>Automatic edge port detection is enabled by default after RSTP or MSTP is enabled for a port. If the port does not receive a BPDU within (2 x Hello Time + 1) seconds, the port will be specified as an edge port automatically. If it receives BPDUs within the specified time, it will be specified as a non-edge port.</p>
<p>Automatic edge port detection does not take effect in the following cases:</p>
<ul><li>The <a href="cmdqueryname=stp+edged-port+enable"><b><span class="cmdname">stp edged-port enable</span></b></a> or <a href="cmdqueryname=stp+edged-port+disable"><b><span class="cmdname">stp edged-port disable</span></b></a> command has been configured in the interface view.</li><li>The <a href="cmdqueryname=stp+edged-port+default"><b><span class="cmdname">stp edged-port default</span></b></a> command has been configured in the system view.</li></ul>
</div></div>
<p>Terminals cannot participate in RSTP or MSTP calculation or respond to BPDUs. To configure a device port connected to a terminal, you can use either of the following methods:</p>
<ul><li>Configure the port as an edge port and enable BPDU filtering.</li><li>Disable RSTP or MSTP on the port to keep it in the Forwarding state.</li></ul>
<p>For optimal availability and security, you are recommended to configure the port as an edge port. If a loop occurs on the terminal, the port will automatically become a non-edge port and the loop is eliminated after the spanning tree is recalculated. You can enable BPDU protection to prevent malicious spoofing BPDU attacks against the device. For details, see <a href="vrp_stp_cfg_1111.html">Configuring BPDU Protection</a>.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001345238505__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configuration in the system view:</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure all ports on the device as edge ports.</span><p><pre class="screen"><a href="cmdqueryname=stp+edged-port+default"><b><span class="cmdname">stp edged-port default</span></b></a></pre>
<p>By default, all ports on a device are non-edge ports.</p>
</p></li><li class="substepexpand"><span>Configure all ports on the device as BPDU filtering ports.</span><p><pre class="screen"><a href="cmdqueryname=stp+bpdu-filter+default"><b><span class="cmdname">stp bpdu-filter default</span></b></a></pre>
<p>By default, all ports on a device are non-BPDU filtering ports.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001345238505__en-us_task_0234857734_en-us_task_0228023023_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001345238505__en-us_task_0234857734_en-us_task_0228023023_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configuration in the interface view:</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></pre>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001345238505__substep1630518363491"><span id="EN-US_TASK_0000001345238505__cmd1530443644911">Switch the interface working mode to Layer 2.</span><p><pre class="screen" id="EN-US_TASK_0000001345238505__screen12871112019504"><a href="cmdqueryname=portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001345238505__cmdname482044463313">portswitch</span></b></a></pre>
<p id="EN-US_TASK_0000001345238505__p283216975014">Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li class="substepexpand"><span>Configure the port as an edge port.</span><p><pre class="screen"><a href="cmdqueryname=stp+edged-port"><b><span class="cmdname">stp edged-port</span></b></a> <strong><span>enable</span></strong></pre>
<p>By default, all ports on a device are non-edge ports.</p>
</p></li><li class="substepexpand"><span>Configure the port as a BPDU filtering port.</span><p><pre class="screen"><a href="cmdqueryname=stp+bpdu-filter"><b><span class="cmdname">stp bpdu-filter</span></b></a> <strong><span>enable</span></strong></pre>
<p>By default, all ports on a device are non-BPDU filtering ports.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001345238505__en-us_task_0234857734_en-us_task_0228023023_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001345238505__en-us_task_0234857734_en-us_task_0228023023_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0000001345238505__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+stp"><b><span class="cmdname">display stp</span></b></a> [ <strong><span>process</span></strong> <i><span class="varname">process-id</span></i> ] [ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ] [ <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> ] command to check the edge port configuration based on the Port Edged field.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_stp_cfg_1063.html">STP/RSTP/MSTP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_stp_cfg_1088.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_stp_cfg_1097.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>