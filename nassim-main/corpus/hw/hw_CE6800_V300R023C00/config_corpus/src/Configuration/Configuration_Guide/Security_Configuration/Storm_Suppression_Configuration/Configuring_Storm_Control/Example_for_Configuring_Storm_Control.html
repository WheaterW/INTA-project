
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Storm Control">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_stormsuppression_cfg_0014_R21C10.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_stormsuppression_cfg_0016.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Storm Suppression">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Storm Suppression">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Storm Suppression">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security Protection">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512689334">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Storm Control</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512689334"></a><a name="EN-US_TASK_0000001512689334"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Storm Control</h1>
<div class="taskbody" id="taskbody1586781311493"><div class="context"><a name="EN-US_TASK_0000001512689334__1.3.1"></a><a name="1.3.1"></a>
<div class="p" id="EN-US_TASK_0000001512689334__context1677625172748"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0000001512689334__p316375132183306">On the network shown in <a href="#EN-US_TASK_0000001512689334__fig_dc_cfg_storm_001101">Figure 1</a>, DeviceA connects a Layer 2 network to a Layer 3 device. Storm control needs to be configured on DeviceA so as to limit the number of broadcast packets, unknown multicast packets, and unknown unicast packets forwarded at Layer 2, preventing broadcast storms.</p>
<div class="fignone" id="EN-US_TASK_0000001512689334__fig_dc_cfg_storm_001101"><a name="EN-US_TASK_0000001512689334__fig_dc_cfg_storm_001101"></a><a name="fig_dc_cfg_storm_001101"></a><span class="figcap"><b>Figure 1 </b>Networking diagram of storm control</span><div class="note" id="EN-US_TASK_0000001512689334__note1630916491766"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001512689334__p16755172415715">In this example, interface 1 represents <span>100GE</span><span>1/0/1</span>.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0000001512689334__image592620099183306" src="figure/en-us_image_0000001512848934.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001512689334__1.3.2"></a><a name="1.3.2"></a>
<div class="p" id="EN-US_TASK_0000001512689334__context1162199143811"><h4 class="sectiontitle">Configuration Roadmap</h4><div class="p" id="EN-US_TASK_0000001512689334__p10741939103917">The configuration roadmap is as follows:<ul id="EN-US_TASK_0000001512689334__ul1892915915404"><li id="EN-US_TASK_0000001512689334__li49291593407">Configure storm control in the view of <span id="EN-US_TASK_0000001512689334__ph85184124310">100GE</span><span id="EN-US_TASK_0000001512689334__ph1454214617432">1/0/1</span> to prevent broadcast storms caused by broadcast packets, unknown multicast packets, and unknown unicast packets forwarded at Layer 2.</li><li id="EN-US_TASK_0000001512689334__li132633338444">Enable the device to record logs during storm control to remind a network administrator to take measures to protect the device.</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512689334__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001512689334__steps10132325172748"><li id="EN-US_TASK_0000001512689334__step5253145172748"><span id="EN-US_TASK_0000001512689334__cmd7907968172748">Enter the interface view.</span><p><pre class="screen" id="EN-US_TASK_0000001512689334__screen18714123545017">&lt;<span class="keyword" id="EN-US_TASK_0000001512689334__keyword1517086799183309">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001512689334__b1119901119513">system-view</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001512689334__keyword1879642605115">HUAWEI</span>] <strong id="EN-US_TASK_0000001512689334__b1020071155119">sysname DeviceA</strong>
<span>[*DeviceA] <strong id="EN-US_TASK_0000001512689334__b1131882514597">commit</strong></span>
[<font style="font-size:8pt" Face="Courier New" >~</font>DeviceA] <strong id="EN-US_TASK_0000001512689334__b17200811185118">interface <span>100ge</span> <span>1/0/1</span></strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001512689334__b15148912121514">portswitch</strong></pre>
</p></li><li id="EN-US_TASK_0000001512689334__step132523854214038"><span id="EN-US_TASK_0000001512689334__cmd387872239214038">Configure the upper and lower thresholds for broadcast packets, unknown multicast packets, and unknown unicast packets. When the average rate at which an interface receives one of these types of packets is greater than 2000 pps within the storm detection interval, storm control is performed on the packets of the corresponding type on the interface. When the average rate drops below 1000 pps, the interface starts to forward packets of the corresponding type again.</span><p><pre class="screen" id="EN-US_TASK_0000001512689334__screen1072582811247">[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001512689334__b2785169142416">storm control broadcast min-rate 1000 max-rate 2000</strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001512689334__b1497811129245">storm control multicast min-rate 1000 max-rate 2000</strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001512689334__b12864515202417">storm control unknown-unicast min-rate 1000 max-rate 2000</strong></pre>
</p></li><li id="EN-US_TASK_0000001512689334__step517334483214038"><span id="EN-US_TASK_0000001512689334__cmd1826852725214038">Set the storm control action to <strong id="EN-US_TASK_0000001512689334__b181701324918">block</strong>.</span><p><pre class="screen" id="EN-US_TASK_0000001512689334__screen319804174712">[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001512689334__b15278594188">storm control action block</strong></pre>
</p></li><li id="EN-US_TASK_0000001512689334__step962022016239"><span id="EN-US_TASK_0000001512689334__cmd861962017234">Set the storm detection interval to 90s.</span><p><pre class="screen" id="EN-US_TASK_0000001512689334__screen07831572418">[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001512689334__b2953110284">storm control interval 90</strong></pre>
</p></li><li id="EN-US_TASK_0000001512689334__step3314755112113"><span id="EN-US_TASK_0000001512689334__cmd1631413559215">Enable the device to record logs during storm control.</span><p><pre class="screen" id="EN-US_TASK_0000001512689334__screen16314165512114">[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001512689334__b53331145142017">storm control enable log</strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001512689334__b10980134995218">quit</strong>
<span>[*DeviceA] <strong id="EN-US_TASK_0000001512689334__b1828561205315">commit</strong></span></pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001512689334__example121226172748"><a name="EN-US_TASK_0000001512689334__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p id="EN-US_TASK_0000001512689334__p361251569214038"># Check the storm control configuration.</p>
<pre class="screen" id="EN-US_TASK_0000001512689334__screen1972459835183306">[<font style="font-size:8pt" Face="Courier New" >~</font>DeviceA] <strong id="EN-US_TASK_0000001512689334__b1926581974183306">display storm control interface <span>100ge</span> <span>1/0/1</span></strong>
--------------------------------------------------------------------------------
NOTE:
BC = Broadcast; MC = Multicast; UUC = Unknown Unicast
Int = Interval value (unit: seconds)
--------------------------------------------------------------------------------
PortName     Type   MaxRate Mode Action    Punish-   Trap Log  Int Last
                                           Status                  Punish-Time
--------------------------------------------------------------------------------
<span>100GE</span><span>1/0/1</span>   BC        2000 Pps  Block     Normal    Off  On    90 --
<span>100GE</span><span>1/0/1</span>   MC        2000 Pps  Block     Normal    Off  On    90 --
<span>100GE</span><span>1/0/1</span>   UUC       2000 Pps  Block     Normal    Off  On    90 --</pre>
<p id="EN-US_TASK_0000001512689334__p10082817127">The <strong id="EN-US_TASK_0000001512689334__b1036620301223">Punish-Status</strong> field displays the packet status on the current interface, and the <strong id="EN-US_TASK_0000001512689334__b1623153520218">Last Punish-Time</strong> field displays the time when the storm control penalty was last implemented. The preceding output shows that the broadcast packets, unknown multicast packets, and unknown unicast packets on <span>100GE</span><span>1/0/1</span> of DeviceA are normal and that no storm control penalty is performed. This indicates that the average rate of these packets within the detection interval does not exceed the specified value and the network runs properly.</p>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001512689334__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Configuration Scripts</h4><p id="EN-US_TASK_0000001512689334__p108131181311">DeviceA</p>
<pre class="screen" id="EN-US_TASK_0000001512689334__screen539743218179">#                                                                                                                                   
sysname DeviceA                                                                                                                     
# 
interface <span>100GE</span><span>1/0/1</span>
 storm control broadcast min-rate 1000 max-rate 2000
 storm control multicast min-rate 1000 max-rate 2000
 storm control unknown-unicast min-rate 1000 max-rate 2000
 storm control interval 90
 storm control action block
 storm control enable log
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_stormsuppression_cfg_0014_R21C10.html">Configuring Storm Control
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_stormsuppression_cfg_0016.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>