
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Basic Concepts of 1588v2">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_1588v2_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_1588v2_cfg_0005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="1588v2 (PTP)">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="1588v2 (PTP)">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="1588v2 (PTP)">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001563878921">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="public_sys-resources/imagePopup.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/customQuery.js"></script>
<script language="javascript" type="text/javascript" src="public_sys-resources/imagePopup.js"></script>
<title>Basic Concepts of 1588v2</title>
</head>
<body><a name="EN-US_CONCEPT_0000001563878921"></a><a name="EN-US_CONCEPT_0000001563878921"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Basic Concepts of 1588v2</h1>
<div><p></p>
<div class="section"><h4 class="sectiontitle">Clock Synchronization</h4><p>Network clock synchronization, which includes frequency synchronization and phase synchronization, ensures that the frequency or time difference between devices on the entire network is within an appropriate range.</p>
<ul><li><p><strong>Frequency synchronization</strong></p>
<p>Signals use the same frequency and a fixed difference between phases. Frequency synchronization enables signals to be sent or received at an average rate, enabling all devices on a communications network to operate at the same rate.</p>
</li><li><p><strong>Phase synchronization</strong></p>
<p>Phase synchronization, also known as time synchronization, refers to the consistency of both frequencies and phases between signals, whereby the phase difference between signals is always 0.</p>
</li></ul>
<p><a href="#EN-US_CONCEPT_0000001563878921__en-us_concept_0141108986_fig_dc_cfg_ecsyn_000401">Figure 1</a> illustrates the differences between frequency synchronization and phase synchronization. If Watch A and Watch B show different time but maintain a constant time difference, this is called frequency synchronization. If Watch A and Watch B maintain the same time, this is called phase synchronization.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001563878921__en-us_concept_0141108986_fig_dc_cfg_ecsyn_000401"><a name="EN-US_CONCEPT_0000001563878921__en-us_concept_0141108986_fig_dc_cfg_ecsyn_000401"></a><a name="en-us_concept_0141108986_fig_dc_cfg_ecsyn_000401"></a><span class="figcap"><b>Figure 1 </b>Frequency synchronization and phase synchronization</span><br><span><img class="vsd" src="figure/en-us_image_0000001563759329.png" width="NaN" height="NaN"></span></div>
</div>
<div class="section"><h4 class="sectiontitle">Clock Synchronization Network Hierarchy</h4><p>A clock synchronization network implements clock synchronization between network devices. <a href="#EN-US_CONCEPT_0000001563878921__fig_dc_cfg_ptp_000401">Figure 2</a> shows the structure of a clock synchronization network. In the two-level clock synchronization network, level-1 nodes use stratum-1 clocks, and level-2 nodes use stratum-2 clocks. Below level-2 nodes are client devices, which require clock synchronization.</p>
<p>Across an entire 1588v2 network, all clocks are organized into a master-slave synchronization hierarchy, with the grandmaster clock at the top. The clocks exchange 1588v2 messages with each other to implement synchronization. A slave clock calculates its offset and delay compared with the master clock based on the timestamp carried in a 1588v2 message to synchronize its local clock with the master clock.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001563878921__fig_dc_cfg_ptp_000401"><a name="EN-US_CONCEPT_0000001563878921__fig_dc_cfg_ptp_000401"></a><a name="fig_dc_cfg_ptp_000401"></a><span class="figcap"><b>Figure 2 </b>Clock synchronization network hierarchy</span><br><span><img class="imgResize" src="figure/en-us_image_0000001513158966.png" width="518.7" height="431.7896870000001" title="Click to enlarge"></span></div>
</div>
<div class="section"><h4 class="sectiontitle">PTP Domain</h4><p>A PTP domain is a set of clocks running PTP, and each network can contain multiple PTP domains. Each PTP domain has only one clock source, and all devices in the PTP domain are synchronized with it. In addition, each PTP domain has its own synchronization time which is independent of the others.</p>
</div>
<div class="section"><h4 class="sectiontitle">Clock Node</h4><div class="p">The nodes in a PTP domain are referred to as clock nodes. PTP defines the following types of clock nodes:<ul><li><p>Ordinary clock (OC)</p>
<p>In a PTP domain, an OC is a clock with a single port that can participate in PTP clock synchronization. An OC uses this interface to synchronize its time with an upstream device or to advertise the time to downstream devices.</p>
</li><li><p>Boundary clock (BC)</p>
<p>In a PTP domain, a BC is a clock with two or more ports that can participate in PTP clock synchronization. A BC synchronizes its time with an upstream device through one port and advertises the time to downstream interfaces through the others.</p>
<p>A clock node is also a BC device if it functions as the clock source and advertises the time to downstream devices through multiple PTP ports.</p>
</li></ul>
</div>
</div>
<div class="section"><h4 class="sectiontitle">Supported Clock Types</h4><ul><li>OC</li><li>BC</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">PTP Port</h4><div class="p">A PTP port refers to a port on which the PTP function is enabled. PTP ports are classified into the following types by role:<ul><li>Master port: advertises the time to downstream devices and can be configured on a BC or OC.</li><li>Slave port: receives the time information from an upstream device, and can be a BC or OC port.</li><li>Passive port: is an idle port on a BC device and does not send or receive synchronization clock signals.</li></ul>
</div>
</div>
<div class="section"><h4 class="sectiontitle">1588v2 Message</h4><div class="p">1588v2 messages are exchanged between master and slave devices to establish master-slave hierarchy and implement clock synchronization. PTP messages can be classified into the following types, depending on whether they carry timestamps:<ul><li>Event message: is tagged with a timestamp when reaching or leaving a port. PTP devices calculate the path delay based on such timestamps. Four types of event messages exist: Sync, Delay_Req, Pdelay_Req, and Pdelay_Resp.</li><li>General message: is not tagged with a timestamp and is used to establish master-slave hierarchy and to request and send time information. Six types of general messages exist: Announce, Follow_Up, Delay_Resp, Pdelay_Resp_Follow_Up, Management, and Signaling.</li></ul>
</div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="14.2%" id="mcps1.4.7.3.1.3.1.1" liSelected="liSelected"><p>Message</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="85.8%" id="mcps1.4.7.3.1.3.1.2" liSelected="liSelected"><p>Function</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="14.2%" headers="mcps1.4.7.3.1.3.1.1 "><p>Sync</p>
</td>
<td class="cellrowborder" valign="top" width="85.8%" headers="mcps1.4.7.3.1.3.1.2 "><p>A Sync message is sent from the master to the slave and carries the timestamp t1 added by the master.</p>
<div class="p">Sync messages can be sent in one-step or two-step mode. <ul><li>In one-step mode, a Sync message carries a timestamp of identifying when the message was sent.</li><li>In two-step mode, a Sync message records the time when the message was sent, but does not contain the transmit timestamp. Instead, a transmit timestamp is carried in a Follow_Up message.</li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="14.2%" headers="mcps1.4.7.3.1.3.1.1 "><p>Delay_Req</p>
</td>
<td class="cellrowborder" valign="top" width="85.8%" headers="mcps1.4.7.3.1.3.1.2 "><p>A Delay_Req message is sent from the slave to the master during time synchronization in the Delay mechanism and carries the timestamp t3 added by the slave.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="14.2%" headers="mcps1.4.7.3.1.3.1.1 "><p>Pdelay_Req</p>
</td>
<td class="cellrowborder" rowspan="2" valign="top" width="85.8%" headers="mcps1.4.7.3.1.3.1.2 "><p>The device currently does not support Pdelay_Req and Pdelay_Resp messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.7.3.1.3.1.1 "><p>Pdelay_Resp</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="14.2%" headers="mcps1.4.7.3.1.3.1.1 "><p>Announce</p>
</td>
<td class="cellrowborder" valign="top" width="85.8%" headers="mcps1.4.7.3.1.3.1.2 "><p>An Announce message is used to exchange time source information between clock nodes in order to establish the master-slave hierarchy.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="14.2%" headers="mcps1.4.7.3.1.3.1.1 "><p>Follow_Up</p>
</td>
<td class="cellrowborder" valign="top" width="85.8%" headers="mcps1.4.7.3.1.3.1.2 "><p>In two-step mode, a Follow_Up message is sent by the master to the slave during time synchronization in the Delay mechanism and carries the timestamp t1 added by the master.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="14.2%" headers="mcps1.4.7.3.1.3.1.1 "><p>Delay_Resp</p>
</td>
<td class="cellrowborder" valign="top" width="85.8%" headers="mcps1.4.7.3.1.3.1.2 "><p>A Delay_Resp message is sent by the master to the slave during time synchronization in the Delay mechanism and carries the timestamp t4 and port ID added by the master.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="14.2%" headers="mcps1.4.7.3.1.3.1.1 "><p>Pdelay_Resp_Follow_Up</p>
</td>
<td class="cellrowborder" rowspan="3" valign="top" width="85.8%" headers="mcps1.4.7.3.1.3.1.2 "><p>The device currently does not support Pdelay_Resp_Follow_Up, Management, and Signaling messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.7.3.1.3.1.1 "><p>Management</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.7.3.1.3.1.1 "><p>Signaling</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section"><h4 class="sectiontitle">Master-Slave Hierarchy</h4><p>The master-slave relationship is relative. For a pair of clock nodes that are synchronized with each other, the master-slave relationship is as follows:</p>
<ul><li><p>The node that advertises the time to the downstream node is the master node, and the node that synchronizes the time from the upstream node is the slave node.</p>
</li></ul>
<ul><li><p>The clock on the master node is the master clock, and the clock on the slave node is the slave clock.</p>
</li></ul>
<ul><li>The port that advertises the time is the master port, and the port that receives the time is the slave port.</li></ul>
<p>A device can concurrently synchronize the time with an upstream device and advertise the time to downstream devices.</p>
</div>
<div class="section"><h4 class="sectiontitle">Grandmaster Clock</h4><p>All clock nodes in a PTP domain are organized into the master-slave hierarchy. The grandmaster clock is at the top of this hierarchy and is the PTP domain's reference clock. Through 1588v2 message exchanges between clock nodes, all devices in the PTP domain synchronize the time with the grandmaster clock. As such, the grandmaster clock is also referred to as the PTP domain's clock source. <a href="galaxy_1588v2_cfg_0005.html">Selecting the Grandmaster Clock and Determining the Master-Slave Hierarchy</a> describes how to dynamically select the grandmaster clock through the best master clock (BMC) algorithm.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_1588v2_cfg_0003.html">Understanding 1588v2
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_1588v2_cfg_0005.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>

<script language="JavaScript">
<!--
initImageViewer('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>