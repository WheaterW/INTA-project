
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring STelnet Login for IPv4 Users (Local Authentication)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_login_cfg_0013.html">
<meta name="DC.Relation" scheme="URI" content="vrp_login_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="vrp_login_cfg_0031.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Stelnet">
<meta name="featurename" content="CLI-based Device Login">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Stelnet">
<meta name="featurename" content="CLI-based Device Login">
<meta name="featuretype" content="Basic Configuration">
<meta name="featurename" content="Console">
<meta name="featurename" content="Stelnet">
<meta name="featurename" content="Telnet">
<meta name="featurename" content="CLI-based Device Login">
<meta name="featuretype" content="Basic Configuration">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513173042">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring STelnet Login for IPv4 Users (Local Authentication)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001513173042"></a><a name="EN-US_TASK_0000001513173042"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring STelnet Login for IPv4 Users (Local Authentication)</h1>
<div class="taskbody" id="taskbody1616060474175336"><div class="context"><a name="EN-US_TASK_0000001513173042__1.3.1"></a><a name="1.3.1"></a>
<div class="p" id="EN-US_TASK_0000001513173042__context548804086175336"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0000001513173042__p480994942175336">In <a href="#EN-US_TASK_0000001513173042__fig_dc_cfg_login_001601">Figure 1</a>, after the STelnet server function is enabled on the device functioning as the SSH server, the PC functioning as the SSH client can connect to the SSH server in different authentication modes. This section uses the RSA authentication mode as an example to describe how to log in to the SSH server using STelnet.</p>
<p id="EN-US_TASK_0000001513173042__p15162908316">To improve system security and prevent unauthorized users from logging in to the SSH server, you can configure an ACL rule on the SSH server.</p>
<div class="fignone" id="EN-US_TASK_0000001513173042__fig_dc_cfg_login_001601"><a name="EN-US_TASK_0000001513173042__fig_dc_cfg_login_001601"></a><a name="fig_dc_cfg_login_001601"></a><span class="figcap"><b>Figure 1 </b>Network diagram of STelnet login</span><br><span><img class="vsd" id="EN-US_TASK_0000001513173042__image1386145915547" src="figure/en-us_image_0000001564013293.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001513173042__1.3.2"></a><a name="1.3.2"></a>
<div class="p" id="EN-US_TASK_0000001513173042__context1496244044175336"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001513173042__p2038003798175336">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001513173042__ol1752974085175336"><li id="EN-US_TASK_0000001513173042__li1746313714175336"><p id="EN-US_TASK_0000001513173042__p635587649175336"><a name="EN-US_TASK_0000001513173042__li1746313714175336"></a><a name="li1746313714175336"></a>Set an IP address of the management interface for the SSH server.</p>
</li><li id="EN-US_TASK_0000001513173042__li965115121465">Configure the SSH server to generate a local key pair.</li><li id="EN-US_TASK_0000001513173042__li656762107175336"><p id="EN-US_TASK_0000001513173042__p134786769175336"><a name="EN-US_TASK_0000001513173042__li656762107175336"></a><a name="li656762107175336"></a>Configure a VTY user interface on the SSH server.</p>
</li><li id="EN-US_TASK_0000001513173042__li38380937175336"><p id="EN-US_TASK_0000001513173042__p823314059175336"><a name="EN-US_TASK_0000001513173042__li38380937175336"></a><a name="li38380937175336"></a>Create a local user and configure the user access type.</p>
</li><li id="EN-US_TASK_0000001513173042__li1757491159175336"><p id="EN-US_TASK_0000001513173042__p1663828475175336"><a name="EN-US_TASK_0000001513173042__li1757491159175336"></a><a name="li1757491159175336"></a>Create an SSH user and configure the authentication mode for the user.</p>
</li><li id="EN-US_TASK_0000001513173042__li16980176138">On the SSH client, create a key pair based on the configured SSH user authentication mode and copy the public key to the SSH server.</li><li id="EN-US_TASK_0000001513173042__li1996399125175336">On the SSH server, edit the public key and assign it to the user.</li><li id="EN-US_TASK_0000001513173042__li162150937175336"><p id="EN-US_TASK_0000001513173042__p114050116175336"><a name="EN-US_TASK_0000001513173042__li162150937175336"></a><a name="li162150937175336"></a>Enable STelnet on the SSH server and set the service type of the SSH user to STelnet.</p>
</li><li id="EN-US_TASK_0000001513173042__li104587710410">On the SSH server, configure an ACL to allow access from the STelnet client.</li><li id="EN-US_TASK_0000001513173042__li1388478990175336"><p id="EN-US_TASK_0000001513173042__p1609076628175336"><a name="EN-US_TASK_0000001513173042__li1388478990175336"></a><a name="li1388478990175336"></a>Set parameters for STelnet login to the server.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001513173042__1.3.3"></a><a name="1.3.3"></a>
<div class="p" id="EN-US_TASK_0000001513173042__context4226171364519"><h4 class="sectiontitle">Data Preparation</h4><p id="EN-US_TASK_0000001513173042__p332520298460">To complete the configuration, ensure that the following configurations have been completed:</p>
<div class="note" id="EN-US_TASK_0000001513173042__note9501321184817"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001513173042__p350112119488">To ensure high security, you are advised to use the RSA key pair whose length is 3072 bits or longer.</p>
</div></div>
<ul id="EN-US_TASK_0000001513173042__ul7307101495811"><li id="EN-US_TASK_0000001513173042__li18307414175811">OpenSSH has been installed on the SSH client.</li><li id="EN-US_TASK_0000001513173042__li187661853597">The IP address of the management interface for the SSH server is 10.248.103.194/24.</li><li id="EN-US_TASK_0000001513173042__li041316304590">The local user's authentication mode is set to password authentication, and the user name and password are admin123 and YsHsjx_202206, respectively.</li><li id="EN-US_TASK_0000001513173042__li187843316017">The SSH user's authentication mode is RSA.</li><li id="EN-US_TASK_0000001513173042__li0173201113017">ACL 2000 is configured to allow the clients on the network segment 10.248.103.0/24 to access the SSH server.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001513173042__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001513173042__steps1518569295175336"><li id="EN-US_TASK_0000001513173042__step443299293175336"><span id="EN-US_TASK_0000001513173042__cmd910446008175336">Set an IP address of the management interface for the SSH server.</span><p><pre class="screen" id="EN-US_TASK_0000001513173042__screen1084015397175336">&lt;<span class="keyword" id="EN-US_TASK_0000001513173042__keyword26471340123819">HUAWEI</span>&gt;<strong id="EN-US_TASK_0000001513173042__b955224887175336"> system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword12366125417313"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001513173042__keyword4307834220">HUAWEI</span>]<strong id="EN-US_TASK_0000001513173042__b43511458131314"> sysname SSH Server</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword4503153510301">*</span><span class="keyword" id="EN-US_TASK_0000001513173042__keyword1127114520228">HUAWEI</span>] <strong id="EN-US_TASK_0000001513173042__b2118660123175336">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword191891853172913"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b123792541388">interface </strong><strong id="EN-US_TASK_0000001513173042__b782532153518"><span>meth</span></strong> <strong id="EN-US_TASK_0000001513173042__b14697227113512"><span>0/0/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword42859487296"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-<span>MEth</span><span>0/0/0</span>] <strong id="EN-US_TASK_0000001513173042__b1357215589814">ip address 10.248.103.194 255.255.255.0</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword115025113110">*</span>SSH Server-<span>MEth</span><span>0/0/0</span>] <strong id="EN-US_TASK_0000001513173042__b52951651696">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword13411635143115">*</span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b9586729659">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001513173042__step1911388630175336"><span id="EN-US_TASK_0000001513173042__cmd500828937175336">Configure the SSH server to generate a local key pair.</span><p><pre class="screen" id="EN-US_TASK_0000001513173042__screen88764564510">[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword25451554113116"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server]<strong id="EN-US_TASK_0000001513173042__b41001454457"> rsa local-key-pair create</strong>
The key name will be:Host
The range of public key size is (2048, 4096).
NOTE: Key pair generation will take a short while.
Please input the modulus [default = 3072]:3072
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword461651413333">*</span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b855518114512">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001513173042__step171662144504"><span id="EN-US_TASK_0000001513173042__cmd816611495020">Configure a VTY user interface on the SSH server.</span><p><pre class="screen" id="EN-US_TASK_0000001513173042__screen184417170515">[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword181210266342"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b16627325515">user-interface vty 0 4</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword10520102753415"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-ui-vty0-4] <strong id="EN-US_TASK_0000001513173042__b11662193215515">authentication-mode aaa</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword1231941917358">*</span>SSH Server-ui-vty0-4] <strong id="EN-US_TASK_0000001513173042__b1662113255112">protocol inbound ssh</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword1899414199356">*</span>SSH Server-ui-vty0-4] <strong id="EN-US_TASK_0000001513173042__b46629320518">quit</strong>
[*SSH Server] <strong id="EN-US_TASK_0000001513173042__b766293265110">commit</strong></pre>
<div class="note" id="EN-US_TASK_0000001513173042__note14307822115117"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001513173042__p173074223511">If SSH is configured as the login protocol, the device automatically disables the Telnet function.</p>
</div></div>
</p></li><li id="EN-US_TASK_0000001513173042__step85828513544"><span id="EN-US_TASK_0000001513173042__cmd105825535412">On the server, create a local user and configure the user access type.</span><p><pre class="screen" id="EN-US_TASK_0000001513173042__screen113265985515">[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword669073310348"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b15616353568">aaa</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword16329183443414"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-aaa] <strong id="EN-US_TASK_0000001513173042__b7282142614176">local-user admin123 password</strong>
Please configure the login password (8-128)
It is recommended that the password consist of four types of characters, including lowercase letters, uppercase letters, numerals and special characters. 
Please enter password:                                      
Please confirm password:                               
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword1910515249353">*</span>SSH Server-aaa] <strong id="EN-US_TASK_0000001513173042__b1161675165610">local-user admin123 service-type ssh</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword16823048133816">*</span>SSH Server-aaa] <strong id="EN-US_TASK_0000001513173042__b1361675105611">local-user admin123 privilege level 3</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword125993512355">*</span>SSH Server-aaa] <strong id="EN-US_TASK_0000001513173042__b1261614518567">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword17223236123519">*</span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b12616175105612">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001513173042__step1140587636175336"><span id="EN-US_TASK_0000001513173042__cmd1417365130175336">Create an SSH user on the server and configure the authentication mode for the user.</span><p><pre class="screen" id="EN-US_TASK_0000001513173042__screen1276910955175336">[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword7314163813417"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b5845649123013">ssh user admin123</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword116311655183510">*</span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b1598972423117">ssh user admin123 authentication-type rsa</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword17750258163516">*</span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b1960942875719">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001513173042__step163801463520"><span id="EN-US_TASK_0000001513173042__cmd10380446145214">Configure the public key algorithm, encryption algorithm, key exchange algorithm list, HMAC authentication algorithm, and minimum key length on the SSH server.</span><p><pre class="screen" id="EN-US_TASK_0000001513173042__screen79461033538">[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword5692104314343"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server]<strong id="EN-US_TASK_0000001513173042__b17991111632611"> ssh server cipher aes128_ctr aes256_ctr aes192_ctr aes128_gcm aes256_gcm</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword1628192116266">*</span>SSH Server]<strong id="EN-US_TASK_0000001513173042__b73022113262"> ssh server hmac sha2_256 sha2_512</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword1528117269263">*</span>SSH Server]<strong id="EN-US_TASK_0000001513173042__b82831626152615"> ssh server key-exchange dh_group_exchange_sha256</strong> <strong id="EN-US_TASK_0000001513173042__b5445201016572">dh_group16_sha512</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword974619453264">*</span>SSH Server]<strong id="EN-US_TASK_0000001513173042__b774924532617"> ssh server publickey rsa_sha2_256 rsa_sha2_512</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword1577555122616">*</span>SSH Server]<strong id="EN-US_TASK_0000001513173042__b1558035592618"> ssh server dh-exchange min-len 3072</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword28941854144012">*</span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b1989455464012">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001513173042__step2001733419175336"><span id="EN-US_TASK_0000001513173042__cmd654759231175336">Use OpenSSH to create an RSA key pair on the SSH client and copy the public key to the SSH server.</span><p><p id="EN-US_TASK_0000001513173042__p8828210358">Access the Windows CLI, create an RSA key pair, and save it to the local <strong id="EN-US_TASK_0000001513173042__b41002819524">id_rsa.pub</strong> file. (The following information is for reference only.)</p>
</p><p><pre class="screen" id="EN-US_TASK_0000001513173042__screen757602201175329">C:\Users\User1&gt;<strong id="EN-US_TASK_0000001513173042__b15561112719406"> ssh-keygen -t rsa</strong>
Generating public/private rsa key pair.
Enter file in which to save the key (C:\Users\User1/.ssh/id_rsa):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in C:\Users\User1/.ssh/id_rsa.
Your public key has been saved in C:\Users\User1/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:c43yubJjCUjY3JqH0aVZwJFM3gWJcH4YI5+4HUDAIqo 
The key's randomart image is:
+---[RSA 3072]----+
| ..o==B=.o.      |
|o .  O=*+.       |
|o. +.oB=o        |
|. . =o=o   o     |
|.  ..*. S o .    |
|E   = o  = .     |
|     . . .o      |
|        =  .     |
|       ..+.      |
+----[SHA256]-----+</pre>
</p></li><li id="EN-US_TASK_0000001513173042__step453096675175336"><span id="EN-US_TASK_0000001513173042__cmd218804463175336">On the SSH server, edit the public key generated using OpenSSH on the SSH client and assign it to the user.</span><p><pre class="screen" id="EN-US_TASK_0000001513173042__screen1761772989175336">[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword461815173416"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b12272115712526">rsa peer-public-key rsa01 encoding-type openssh</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword11954226103619">*</span>SSH Server-rsa-public-key] <strong id="EN-US_TASK_0000001513173042__b113431932125416">public-key-code begin</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword197529103613">*</span>SSH Server-rsa-public-key-rsa-key-code] <strong id="EN-US_TASK_0000001513173042__b1689811204209">ssh-rsa</strong> <strong id="EN-US_TASK_0000001513173042__b6944111194717">AAAAB3NzaC1yc2EAAAADAQABAAABAQCg5Ag490i6ilB7QuCVb35B8RJEh1DIYB88h2p1qjdh7qdMQv8rpJaVAgQWxwzKZO0XdFuz4ReGQzTCSf7Det7Ajicddw3qi+6P8hRqZj6MPdLg/o3RN4aPCfr/LFWCwqJ3gWGHlOC7qqjRk+6pySVoiWcSk5/elBkU7WVk/cSWrt4qFXJV373OCesKcEVeDvAa1Tvx6L3LQroBqUO0EXzDgOthPCmOqiqvS5h3JipzqVsesdSKjeInooCQzSOv5eePpBcFcIvU6wFiLIZ5vnf6YtypgTVzHuje/sh4xM7Iuuon7AYXKHT8NpO9jd9zA/lKaRPXyDtei1O1Bt/5lxnn </strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword13943183093613">*</span>SSH Server-rsa-public-key-rsa-key-code] <strong id="EN-US_TASK_0000001513173042__b2965121055617">public-key-code end</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword175631231193614">*</span>SSH Server-rsa-public-key] <strong id="EN-US_TASK_0000001513173042__b250212185717">peer-public-key end</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword14309732193611">*</span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b1053324913579">ssh user admin123 assign rsa-key rsa01</strong>
[*SSH Server] <strong id="EN-US_TASK_0000001513173042__b1277736386">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001513173042__step1255254612175336"><span id="EN-US_TASK_0000001513173042__cmd184915756175336">Enable the STelnet function and set the user service type to STelnet.</span><p><pre class="screen" id="EN-US_TASK_0000001513173042__screen8699172515455">[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword1194495523412"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b1869912511459">stelnet server enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword11202123618364">*</span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b11699152554519">ssh server-source all-interface</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword31863714363">*</span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b187001825164512">ssh user admin123 service-type stelnet</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword11191164353616">*</span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b1370022519452">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001513173042__step15295172817812"><span id="EN-US_TASK_0000001513173042__cmd11295162814814">Configure an ACL rule. </span><p><pre class="screen" id="EN-US_TASK_0000001513173042__screen4455154254511">[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword2145155973416"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b7455242194517">acl 2000</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword61051350173615">*</span>SSH Server-acl4-basic-2000] <strong id="EN-US_TASK_0000001513173042__b44551442134518">rule permit source 10.248.103.0 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword3784125019363">*</span>SSH Server-acl4-basic-2000] <strong id="EN-US_TASK_0000001513173042__b104551542104515">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword74401851153613">*</span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b8455542114510">ssh server acl 2000</strong>
[<span class="keyword" id="EN-US_TASK_0000001513173042__keyword3300052133611">*</span>SSH Server] <strong id="EN-US_TASK_0000001513173042__b54551742114515">commit</strong></pre>
<div class="note" id="EN-US_TASK_0000001513173042__note14769344175110"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0000001513173042__ul924989142312"><li id="EN-US_TASK_0000001513173042__li17249198238">You can determine whether to configure ACL rules as required.</li><li id="EN-US_TASK_0000001513173042__li1324913913239">If the management interface is bound to the VPN instance <strong id="EN-US_TASK_0000001513173042__b28312467314">_management_vpn_ by default</strong>, the command for creating an ACL rule is as follows: <strong id="EN-US_TASK_0000001513173042__b173531942325">rule permit vpn-instance _management_vpn_ source 10.248.103.0 24</strong></li></ul>
</div></div>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001513173042__example2056596677175336"><a name="EN-US_TASK_0000001513173042__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p id="EN-US_TASK_0000001513173042__p094411221671">Use OpenSSH to log in to the SSH server from the client. Access the Windows CLI and run the OpenSSH commands to access the device using STelnet.</p>
<pre class="screen" id="EN-US_TASK_0000001513173042__screen8231338685">C:\Users\User1&gt; <strong id="EN-US_TASK_0000001513173042__b16555154619264">ssh admin123@10.248.103.194</strong>
Enter passphrase for key 'C:\Users\User/.ssh/id_rsa':
Info: The max number of VTY users is 21, the number of current VTY users online is 4, and total number of terminal users online is 4.
      The current login time is 2020-12-15 15:58:03.
&lt;SSH Server&gt;</pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001513173042__1.3.6"></a><a name="1.3.6"></a><h4 class="sectiontitle">Configuration Scripts</h4><pre class="screen" id="EN-US_TASK_0000001513173042__screen13553174612517">#
sysname SSH Server
#
acl number 2000
 rule 5 permit source 10.248.103.0 0.0.0.255
#
rsa peer-public-key rsa01 encoding-type openssh
 public-key-code begin
  ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCg5Ag490i6ilB7QuCVb35B8RJEh1DIYB88h2p1qjdh7qdMQv8rpJaVAgQWxwzKZO0XdFuz4ReGQzTCSf7Det7Ajicddw3qi+6P8hRqZj6MPdLg/o3RN4aPCfr/LFWCwqJ3gWGHlOC7qqjRk+6pySVoiWcSk5/elBkU7WVk/cSWrt4qFXJV373OCesKcEVeDvAa1Tvx6L3LQroBqUO0EXzDgOthPCmOqiqvS5h3JipzqVsesdSKjeInooCQzSOv5eePpBcFcIvU6wFiLIZ5vnf6YtypgTVzHuje/sh4xM7Iuuon7AYXKHT8NpO9jd9zA/lKaRPXyDtei1O1Bt/5lxnn rsa-key
 public-key-code end
 peer-public-key end
#
aaa
 local-user admin123 password irreversible-cipher $1d$+,JS+))\\2$KVNj(.3`_5x0FCKGv}H&amp;.kUTI`Ff&amp;H*eBqO.ua&gt;)$
 local-user admin123 service-type terminal ssh
<strong id="EN-US_TASK_0000001513173042__b15944119571"> </strong>local-user admin123 privilege level 3
#
interface <span>MEth</span><span>0/0/0</span>
 ip address 10.248.103.194 255.255.255.0
#
stelnet server enable
ssh user admin123
ssh user admin123 authentication-type rsa
ssh user admin123 assign rsa-key rsa01
ssh user admin123 service-type stelnet
ssh server-source all-interface
ssh server acl 2000
#
ssh server cipher aes128_ctr aes256_ctr aes192_ctr aes128_gcm aes256_gcm
ssh server hmac sha2_256 sha2_512
ssh server key-exchange dh_group_exchange_sha256 dh_group16_sha512
ssh server publickey rsa_sha2_256 rsa_sha2_512
ssh server dh-exchange min-len 3072
#
user-interface vty 0 4
 authentication-mode aaa
 protocol inbound ssh
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_login_cfg_0013.html">Configuring Remote Login Through STelnet
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_login_cfg_0015.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_login_cfg_0031.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>