
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the DHCPv4 Client Function">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_dhcpv4_cfg_0034.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_dhcpv4_cfg_0036.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512846606">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring the DHCPv4 Client Function</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512846606"></a><a name="EN-US_TASK_0000001512846606"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the DHCPv4 Client Function</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001512846606__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After the DHCPv4 client function is configured on a device, the device can obtain configuration parameters such as an IPv4 address from a DHCPv4 server.</p>
<p>If the IPv4 address allocated by a DHCPv4 server to a device's interface is on the same network segment as the IPv4 address of another interface on the device, the interface does not use this address or apply for a new IPv4 address from the server. To enable the interface to apply for a new IPv4 address, run the <a href="cmdqueryname=shutdown"><b><span class="cmdname">shutdown</span></b></a> and <a href="cmdqueryname=undo+shutdown"><b><span class="cmdname">undo shutdown</span></b></a> commands in sequence on the interface, or run the <a href="cmdqueryname=undo+ip+address+dhcp-alloc"><b><span class="cmdname">undo ip address dhcp-alloc</span></b></a> and <a href="cmdqueryname=ip+address+dhcp-alloc"><b><span class="cmdname">ip address dhcp-alloc</span></b></a> commands in sequence.</p>
<p>After the DHCPv4 client function is enabled on a device's interface, the interface cannot communicate with the DHCPv4 server when the device functions as a DHCPv4 relay agent.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512846606__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>(Optional) Configure parameters for the DHCPv4 client as required.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring parameters for the DHCPv4 client</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="21.772177217721772%" id="mcps1.3.2.2.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.68336833683368%" id="mcps1.3.2.2.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="44.54445444544455%" id="mcps1.3.2.2.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="21.772177217721772%" headers="mcps1.3.2.2.2.1.2.4.1.1 "><p>Configure Option 60 in DHCPv4 request messages sent by the DHCPv4 client.</p>
</td>
<td class="cellrowborder" valign="top" width="33.68336833683368%" headers="mcps1.3.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=dhcp+client+class-id"><b><span class="cmdname">dhcp client class-id</span></b></a> <i><span class="varname">class-id</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="44.54445444544455%" headers="mcps1.3.2.2.2.1.2.4.1.3 "><p>Option 60 identifies a vendor type and can be configured in both the system and interface views. If the configuration is performed in both views, only the configuration in the interface view takes effect.</p>
<p>By default, the value of Option 60 is related to a device and is expressed as "huawei device model."</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="21.772177217721772%" headers="mcps1.3.2.2.2.1.2.4.1.1 "><p>Configure the DHCPv4 client to obtain routing entries through DHCPv4.</p>
</td>
<td class="cellrowborder" valign="top" width="33.68336833683368%" headers="mcps1.3.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ip+route"><b><span class="cmdname">ip route</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } <i><span class="varname">interface-type interface-num</span></i> <strong><span>dhcp</span></strong> [ <i><span class="varname">preference-value</span></i> ]</p>
</td>
<td class="cellrowborder" valign="top" width="44.54445444544455%" headers="mcps1.3.2.2.2.1.2.4.1.3 "><p>After this function is configured, the next hop address of a static route changes with the gateway address.</p>
<p>By default, a DHCPv4 client does not obtain routing entries through DHCPv4.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="21.772177217721772%" headers="mcps1.3.2.2.2.1.2.4.1.1 "><p>Configure the abnormal packet detection function.</p>
</td>
<td class="cellrowborder" valign="top" width="33.68336833683368%" headers="mcps1.3.2.2.2.1.2.4.1.2 "><ul><li><a href="cmdqueryname=undo+dhcp+anti-attack+check+magic-cookie"><b><span class="cmdname">undo dhcp anti-attack check magic-cookie</span></b></a>: configures the device not to check the magic cookie field in received DHCPv4 messages in the system, VLAN, or interface view.</li><li><a href="cmdqueryname=undo+dhcp+anti-attack+check+udp-checksum"><b><span class="cmdname">undo dhcp anti-attack check udp-checksum</span></b></a>: configures the device not to check the UDP header checksum in received DHCPv4 messages in the system, VLAN, or interface view.</li><li><strong><a href="cmdqueryname=dhcp+anti-attack+check+duplicate+option"><b><span class="cmdname">dhcp anti-attack check duplicate option</span></b></a> </strong>[ <em>option-start</em> [ <strong>to</strong> <em>option-end</em> ] ] &amp;&lt;1-254&gt;: enables the device to check and discard DHCPv4 messages with duplicate options in the system view.</li></ul>
</td>
<td class="cellrowborder" valign="top" width="44.54445444544455%" headers="mcps1.3.2.2.2.1.2.4.1.3 "><p>By default, a device does not check the magic cookie field in DHCPv4 messages and directly forwards DHCPv4 messages with an incorrect magic cookie field value; a device checks the UDP header checksum in DHCPv4 messages and discards those with an incorrect UDP header checksum; and a device does not check DHCPv4 messages with duplicate options.</p>
<p>Before configuring the abnormal packet detection function, run the <strong><a href="cmdqueryname=dhcp+enable"><b><span class="cmdname">dhcp enable</span></b></a></strong> command to enable DHCPv4 on the device.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></pre>
</p></li><li><span>Switch the interface working mode to Layer 3.</span><p><pre class="screen" id="EN-US_TASK_0000001512846606__en-us_task_0228023023_screen166833536478"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001512846606__en-us_task_0228023023_cmdname182821059820">undo portswitch</span></b></a></pre>
<p id="EN-US_TASK_0000001512846606__en-us_task_0228023023_p18457174912148">Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li><span>Enable the DHCPv4 client function on the interface.</span><p><pre class="screen"><a href="cmdqueryname=ip+address+dhcp-alloc"><b><span class="cmdname">ip address dhcp-alloc</span></b></a> [ <strong><span>unicast</span></strong> ]</pre>
<p>By default, the DHCPv4 client function is disabled on an interface.</p>
</p></li><li><span>(Optional) Configure parameters for the DHCPv4 client as required.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Configuring parameters for the DHCPv4 client</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="21.862186218621858%" id="mcps1.3.2.6.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="38.06380638063806%" id="mcps1.3.2.6.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="40.07400740074007%" id="mcps1.3.2.6.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="21.862186218621858%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure attributes for the DHCPv4 client.</p>
</td>
<td class="cellrowborder" valign="top" width="38.06380638063806%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=dhcp+client+hostname"><b><span class="cmdname">dhcp client hostname</span></b></a> <i><span class="varname">hostname</span></i>: configures a hostname for the DHCPv4 client.</p>
<p><a href="cmdqueryname=dhcp+client+client-id"><b><span class="cmdname">dhcp client client-id</span></b></a> <i><span class="varname">client-id</span></i>: configures an identifier for the DHCPv4 client.</p>
<p><a href="cmdqueryname=dhcp+client+class-id"><b><span class="cmdname">dhcp client class-id</span></b></a> <i><span class="varname">class-id</span></i>: configures Option 60 in DHCPv4 request messages sent by the DHCPv4 client.</p>
</td>
<td class="cellrowborder" valign="top" width="40.07400740074007%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>The hostname of the client is filled in Option 12. To access a DHCPv4 client through a domain name, configure a hostname for the client. A domain name consists of a hostname and domain name suffix.</p>
<p>The identifier of a DHCPv4 client is filled in Option 61 to uniquely identify the client.</p>
<p>Option 60 identifies a vendor type and can be configured in both the system and interface views. If the configuration is performed in both views, only the configuration in the interface view takes effect.</p>
<p>By default, no hostname is configured for a DHCPv4 client, the identifier of a DHCPv4 client is its MAC address, and Option 60 is not configured.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="21.862186218621858%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure an expected lease for the DHCPv4 client.</p>
</td>
<td class="cellrowborder" valign="top" width="38.06380638063806%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=dhcp+client+expected-lease"><b><span class="cmdname">dhcp client expected-lease</span></b></a> <i><span class="varname">time-value</span></i>: configures an expected lease for the DHCPv4 client.</p>
<p><a href="cmdqueryname=dhcp+client+renew"><b><span class="cmdname">dhcp client renew</span></b></a>: renews the lease of the IPv4 address obtained by the DHCPv4 client.</p>
</td>
<td class="cellrowborder" valign="top" width="40.07400740074007%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>By default, no expected lease is configured for a DHCPv4 client.</p>
<p>The <a href="cmdqueryname=dhcp+client+renew"><b><span class="cmdname">dhcp client renew</span></b></a> command can be normally run only after the DHCPv4 client function is enabled on an interface that has obtained an IPv4 address.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="21.862186218621858%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure gateway detection on the DHCPv4 client.</p>
</td>
<td class="cellrowborder" valign="top" width="38.06380638063806%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=dhcp+client+gateway-detect"><b><span class="cmdname">dhcp client gateway-detect</span></b></a> <strong><span>period</span></strong> <i><span class="varname">period</span></i> <strong><span>retransmit</span></strong> <i><span class="varname">retransmit</span></i> <strong><span>timeout</span></strong> <i><span class="varname">timeout</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="40.07400740074007%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>After this function is enabled, the DHCPv4 client sends an ARP Request message to detect the gateway status after obtaining an IPv4 address. If the client receives no ARP Reply message within the detection period, it considers the gateway address incorrect or the gateway faulty and applies for a new IPv4 address.</p>
<p>By default, this function is disabled.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="21.862186218621858%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure the default route precedence obtained by the DHCPv4 client from the server.</p>
</td>
<td class="cellrowborder" valign="top" width="38.06380638063806%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=dhcp+client+default-route+preference"><b><span class="cmdname">dhcp client default-route preference</span></b></a> <i><span class="varname">preference-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="40.07400740074007%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>By default, the default route precedence obtained by a DHCPv4 client from a DHCPv4 server is 60.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="21.862186218621858%" headers="mcps1.3.2.6.2.1.2.4.1.1 "><p>Configure the option information requested by the DHCPv4 client.</p>
</td>
<td class="cellrowborder" valign="top" width="38.06380638063806%" headers="mcps1.3.2.6.2.1.2.4.1.2 "><p><a href="cmdqueryname=dhcp+client+request+option-list+exclude"><b><span class="cmdname">dhcp client request option-list exclude</span></b></a> <i><span class="varname">option-code</span></i> &amp;&lt;1-8&gt;: configures a list of default request options that are not carried in Option 55 of DHCPv4 request messages.</p>
<p><a href="cmdqueryname=dhcp+client+request+option-list"><b><span class="cmdname">dhcp client request option-list</span></b></a> <i><span class="varname">option-code</span></i> &amp;&lt;1-15&gt;: configures a list of request options that Option 55 in DHCPv4 request messages carries besides the default options.</p>
</td>
<td class="cellrowborder" valign="top" width="40.07400740074007%" headers="mcps1.3.2.6.2.1.2.4.1.3 "><p>Option 55 in DHCPv4 request messages is used to set the request option list. A DHCPv4 client uses this option to request specified configuration parameters from a DHCPv4 server. You can run the <a href="cmdqueryname=dhcp+client+request+option-list+exclude"><b><span class="cmdname">dhcp client request option-list exclude</span></b></a> command to set a list of default options that are excluded from Option 55. You can also run the <a href="cmdqueryname=dhcp+client+request+option-list"><b><span class="cmdname">dhcp client request option-list</span></b></a> command to set a list of other options that Option 55 carries besides the default options. The other options include options 4, 7, 17, 42, 43, 66, 67, 120, and 129.</p>
<p>By default, no option is excluded from the request list on a DHCPv4 client, and Option 55 in DHCPv4 request messages carries only the default request options.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512846606__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512846606__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001512846606__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul id="EN-US_TASK_0000001512846606__ul1996120581603"><li id="EN-US_TASK_0000001512846606__li896117584014">Run the <a href="cmdqueryname=display+dhcp+client"><b><span class="cmdname" id="EN-US_TASK_0000001512846606__cmdname325303401180208">display dhcp client</span></b></a> [ <strong><span id="EN-US_TASK_0000001512846606__cmdparmname209988410215">interface</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512846606__varname20168151720215">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0000001512846606__varname175436212025">interface-number</span></i> ] command to check DHCPv4 client lease information.</li><li id="EN-US_TASK_0000001512846606__li1864551019310">Run the <a href="cmdqueryname=display+dhcp+client+statistics"><b><span class="cmdname" id="EN-US_TASK_0000001512846606__cmdname61212141517">display dhcp client statistics</span></b></a> [ <strong><span id="EN-US_TASK_0000001512846606__cmdparmname82682012514">interface</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512846606__varname380734914515">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0000001512846606__varname778811535513">interface-number</span></i> ] command to check message statistics on the DHCPv4 client.</li><li id="EN-US_TASK_0000001512846606__li941014461281">Run the <a href="cmdqueryname=display+dhcp+statistics"><b><span class="cmdname" id="EN-US_TASK_0000001512846606__cmdname291329237180208">display dhcp statistics</span></b></a> command to check statistics about DHCPv4 messages sent and received by the device.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_dhcpv4_cfg_0034.html">Configuring a Device to Function as a DHCPv4 Client
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_dhcpv4_cfg_0036.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>