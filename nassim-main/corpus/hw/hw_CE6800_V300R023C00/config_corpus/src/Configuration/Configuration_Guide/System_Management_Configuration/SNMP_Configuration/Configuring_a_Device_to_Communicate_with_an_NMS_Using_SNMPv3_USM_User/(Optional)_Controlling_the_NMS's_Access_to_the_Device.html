
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Controlling the NMS's Access to the Device">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0031.html">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0032.html">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0021_2.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512830850">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>(Optional) Controlling the NMS's Access to the Device</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512830850"></a><a name="EN-US_TASK_0000001512830850"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Controlling the NMS's Access to the Device</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001512830850__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>This section describes how to specify an NMS and manageable MIB objects for SNMPv3-based communication between the NMS and managed device to improve communication security.</p>
<div class="p">If a device is managed by multiple NMSs that are in the same SNMPv3 user group, note the following points:<ul><li><p>If all the NMSs are required to access the objects in the ViewDefault view, skip the following steps.</p>
</li><li><p>If some of the NMSs are required to access the objects in the ViewDefault view, skip steps <a href="#EN-US_TASK_0000001512830850__en-us_task_0275866366_step377246470">7</a> and <a href="#EN-US_TASK_0000001512830850__step_dc_vrp_snmp_cfg_001706">8</a>.</p>
</li><li><p>If all the NMSs are required to manage specified objects on the device, skip steps <a href="#EN-US_TASK_0000001512830850__step951225411811">2</a>, <a href="#EN-US_TASK_0000001512830850__step6515162616910">3</a>, and <a href="#EN-US_TASK_0000001512830850__step_dc_vrp_snmp_cfg_001704">4</a>.</p>
</li><li><p>If some of the NMSs are required to manage specified objects on the device, perform all the following steps.</p>
</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512830850__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_screen957925913532"><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmdname615214105414">system-view</span></b></a></pre>
</p></li><li id="EN-US_TASK_0000001512830850__step951225411811"><span id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmd1152032193719">Create a basic ACL to filter network administrators.</span><p><pre class="screen" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_screen16153163218379"><a href="cmdqueryname=acl+name+%28basic+ACL%29"><b><span class="cmdname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmdname8111042183714">acl</span></b></a> { <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmdparmname51116429371">name</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_varname111194212371">basic-acl-name</span></i> { <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmdparmname1411174203718">basic</span></strong> | [ <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmdparmname1211242173719">number</span></strong> ] <i><span class="varname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_varname18112042153717">basic-acl-number</span></i> } | [ <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmdparmname13111842123719">number</span></strong> ] <i><span class="varname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_varname711154293712">basic-acl-number</span></i> }</pre>
<p id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_p9677650144418">After the access permissions are configured and the NMS's IP address is specified in the ACL rule, if the IP address changes (for example, the network management station changes its location, or IP addresses are re-allocated due to network adjustment), you need to change the IP address in the ACL. Otherwise, the NMS cannot access the device.</p>
</p></li><li id="EN-US_TASK_0000001512830850__step6515162616910"><span id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmd4996194854214">Configure a basic ACL rule.</span><p><pre class="screen" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_screen15996124854217"><a href="cmdqueryname=rule+%28basic+ACL+view%29"><b><span class="cmdname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmdname18432164164311">rule</span></b></a> [ <i><span class="varname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_varname64328414311">rule-id</span></i> ] [ <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmdparmname15432164194317">name</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_varname134326413437">rule-name</span></i> ] { <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmdparmname124324411431">permit</span></strong> | <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmdparmname91269324011">deny</span></strong> }</pre>
</p><p><ul id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_ul1941611213439"><li id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_li1541616219436"><p id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_p17416172174316"><a name="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_li1541616219436"></a><a name="en-us_task_0000001563990617_li1541616219436"></a>If the address of a login user matches an ACL rule in which the specified action is <strong id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_b741672174312">permit</strong>, the user is allowed to log in to the device.</p>
</li><li id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_li124161621184315"><p id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_p4416172154313"><a name="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_li124161621184315"></a><a name="en-us_task_0000001563990617_li124161621184315"></a>If the address of a login user matches an ACL rule in which the specified action is <strong id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_b4416172119438">deny</strong>, the user is not allowed to log in to the device.</p>
</li><li id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_li1741615217437"><p id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_p7416172111436"><a name="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_li1741615217437"></a><a name="en-us_task_0000001563990617_li1741615217437"></a>If the address of a login user is not within the address range specified in the configured ACL rule, the user is not allowed to log in to the device.</p>
</li><li id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_li1416721154317"><p id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_p154161321124316"><a name="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_li1416721154317"></a><a name="en-us_task_0000001563990617_li1416721154317"></a>If the referenced ACL does not contain any rules or does not exist, the login of users is not subject to the ACL, and any users can log in to the device.</p>
</li></ul>
</p></li><li id="EN-US_TASK_0000001512830850__step_dc_vrp_snmp_cfg_001704"><span id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmd1617615612442">Return to the system view.</span><p><pre class="screen" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_screen31767684413"><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmdname310319338444">quit</span></b></a></pre>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li><li><span>(Optional) Configure an ACL for SNMP.</span><p><pre class="screen" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_screen1394518525456"><a href="cmdqueryname=snmp-agent+acl"><b><span class="cmdname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_cmdname15205822144613">snmp-agent acl</span></b></a> { <i><span class="varname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_varname220572254616">acl-number</span></i> | <i><span class="varname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_varname18205822134615">aclName</span></i> }</pre>
</p></li><li id="EN-US_TASK_0000001512830850__en-us_task_0275866366_step377246470"><span id="EN-US_TASK_0000001512830850__">Create a MIB view and specify the MIB objects that can be monitored and managed by the NMS.</span><p><pre class="screen"><a href="cmdqueryname=snmp-agent+mib-view"><b><span class="cmdname">snmp-agent mib-view</span></b></a> <i><span class="varname">type</span></i> <i><span class="varname">view-name</span></i> <i><span class="varname">oid-tree</span></i></pre>
<p>By default, the NMS has the permission to access the ViewDefault view (1.3.6.1).</p>
<p>The value of <i><span class="varname">type</span></i> can be <strong>included</strong> or <strong>excluded</strong>. The <strong><span>included</span></strong> parameter specifies the MIB objects that the NMS needs to manage. If some MIB objects do not need to be managed, you can specify the <strong><span>excluded</span></strong> parameter to exclude them.</p>
</p></li><li id="EN-US_TASK_0000001512830850__step_dc_vrp_snmp_cfg_001706"><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmd1574882920462">Configure an SNMP user group.</span><p><pre class="screen" id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_screen157481329144611"><a href="cmdqueryname=snmp-agent+group"><b><span class="cmdname" id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdname553635344619">snmp-agent group</span></b></a><span> <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname195362531468">v3</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_varname105369535465">group-name</span></i> { <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname145361853144612">authentication</span></strong> | <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname1553612537461">privacy</span></strong> | <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname953695364610">noauthentication</span></strong> } [ <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname95361553154615">read-view</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_varname10536135364612">read-view</span></i> | <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname15536853124610">write-view</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_varname25362533461">write-view</span></i> | <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname9537175394614">notify-view</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_varname1953775334612">notify-view</span></i> ] <sup id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_sup05371353184617">*</sup><span> [ <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname153725311468">acl</span></strong> { <i><span class="varname" id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_varname353745344615">acl-number</span></i> | <i><span class="varname" id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_varname155371953114614">acl-name</span></i> } ]</span></span></pre>
<p id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_p1448856174715">If the NMS and network devices are in an insecure environment (for example, the network is vulnerable to attacks), <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname863414508244">authentication</span></strong> or <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname17634350182412">privacy</span></strong> can be configured in the command to enable data authentication or privacy.</p>
<div class="p" id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_p194881263476">The available authentication and privacy modes are as follows:<ul id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_ul144881065478"><li id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_li124887616475"><p id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_p248818684720"><a name="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_li124887616475"></a><a name="en-us_task_0000001513150414_li124887616475"></a>No authentication and no privacy: Neither <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname1868412341214304">authentication</span></strong> nor <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname1963833617214304">privacy</span></strong> <span>or <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname1860231940214304">noauthentication</span></strong></span> is configured in the command. This mode is applicable to secure networks managed by a specified administrator.</p>
</li><li id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_li648896184713"><p id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_p6488862475"><a name="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_li648896184713"></a><a name="en-us_task_0000001513150414_li648896184713"></a>Authentication without privacy: Only <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname1475813001214304">authentication</span></strong> is configured in the command. This mode is applicable to secure networks managed by many administrators who may frequently perform operations on the same device. In this mode, only the authenticated administrators can access the managed device.</p>
</li><li id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_li14488267470"><p id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_p194889619474"><a name="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_li14488267470"></a><a name="en-us_task_0000001513150414_li14488267470"></a>Authentication and privacy: Both <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname1657456940214304">authentication</span></strong> and <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname371716225214304">privacy</span></strong> are configured in the command. This mode is applicable to insecure networks managed by many administrators who may frequently perform operations on the same device. In this mode, only the authenticated administrators can access the managed device, and transmitted data is encrypted to guard against tampering and data leaking.</p>
</li></ul>
</div>
<p id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_p230811203473">If the NMS administrator needs the read permission in a specified view, configure <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname313151591214304">read-view</span></strong> in this command. For example, a low-level administrator needs to read certain data.</p>
<p id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_p123081820204710">If the NMS administrator needs the read and write permissions in a specified view, configure <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname60764154214304">write-view</span></strong> in this command. For example, a high-level administrator needs to read and write certain data.</p>
<p id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_p16308162034718"><strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname988417170214304">notify-view</span></strong> needs to be configured in the command if you want to filter out irrelevant alarms and configure the managed device to send only the alarms of specified MIB objects to the NMS. If the parameter is configured, only the alarms of the MIB objects specified by <strong><span id="EN-US_TASK_0000001512830850__en-us_task_0000001513150414_cmdparmname183083203471">notify-view</span></strong> are sent to the NMS.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_en-us_task_0234857734_screen163801330213_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512830850__en-us_task_0000001563990617_en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340_1">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_snmp_cfg_0031.html">Configuring a Device to Communicate with an NMS Using SNMPv3 USM User
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_snmp_cfg_0032.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_snmp_cfg_0021_2.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>