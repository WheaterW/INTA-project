
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Understanding OSPF-BGP Synchronization">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0085.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0087.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001130783208">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Understanding OSPF-BGP Synchronization</title>
</head>
<body><a name="EN-US_CONCEPT_0000001130783208"></a><a name="EN-US_CONCEPT_0000001130783208"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Understanding OSPF-BGP Synchronization</h1>
<div><div class="section"><h4 class="sectiontitle">Purpose</h4><p>New device deployment or a device restart may lead to network traffic loss during BGP convergence. This is due to IGP convergence being faster than BGP convergence. OSPF-BGP synchronization can address this issue.</p>
</div>
<div class="section"><h4 class="sectiontitle">Fundamentals</h4><p>If a backup link exists, BGP traffic may be lost during traffic switchback, as BGP routes converge more slowly than OSPF routes.</p>
<p>In <a href="#EN-US_CONCEPT_0000001130783208__fig_dc_vrp_ospf_feature_001001">Figure 1</a>, DeviceA, DeviceB, DeviceC, and DeviceD run OSPF and establish IBGP connections. DeviceC functions as a backup of DeviceB. When the network is stable, BGP and OSPF routes fully converge on the devices.</p>
<p>In normal cases, traffic from DeviceA to 10.3.1.0/30 passes through DeviceB. If DeviceB fails, traffic is switched to DeviceC. After DeviceB recovers, traffic is switched back to DeviceB, during which traffic loss occurs.</p>
<p>This is due to OSPF route convergence being complete, while BGP route convergence (which is slower than IGP route convergence) continues during the traffic switchback. As a result, DeviceB does not have the route to 10.3.1.0/30.</p>
<p>When traffic from DeviceA to 10.3.1.0/30 is forwarded to DeviceB, DeviceB discards the traffic because it does not have the route to 10.3.1.0/30.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001130783208__fig_dc_vrp_ospf_feature_001001"><a name="EN-US_CONCEPT_0000001130783208__fig_dc_vrp_ospf_feature_001001"></a><a name="fig_dc_vrp_ospf_feature_001001"></a><span class="figcap"><b>Figure 1 </b>Networking for OSPF-BGP synchronization</span><br><span><img class="vsd" src="figure/en-us_image_0000001130783282.png"></span></div>
<p>If OSPF-BGP synchronization is configured on a device, the device remains as a stub device during the set synchronization period. During this period, the link metric in the LSAs advertised by the device is the maximum value (65535), which instructs other OSPF devices not to use it as a transit device for data forwarding.</p>
<p>In <a href="#EN-US_CONCEPT_0000001130783208__fig_dc_vrp_ospf_feature_001001">Figure 1</a>, OSPF-BGP synchronization is enabled on DeviceB. In this situation, before BGP route convergence is complete, DeviceA continues to forward data through DeviceC rather than DeviceB until BGP route convergence on the latter is complete.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospf_cfg_0085.html">Configuring OSPF-BGP Synchronization
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospf_cfg_0087.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>