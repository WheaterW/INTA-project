
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Dynamic BFD for RIP">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_rip_cfg_0046.html">
<meta name="DC.Relation" scheme="URI" content="vrp_rip_cfg_0048.html">
<meta name="DC.Relation" scheme="URI" content="vrp_rip_cfg_0061.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="RIP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="RIP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="RIP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130623188">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Dynamic BFD for RIP</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130623188"></a><a name="EN-US_TASK_0000001130623188"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Dynamic BFD for RIP</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130623188__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><div class="p"><h4 class="sectiontitle">Prerequisites</h4><p>Before configuring dynamic BFD for RIP, you have completed the following tasks:</p>
<ul><li><p>Assign an IP address to each interface to ensure reachability between neighboring nodes at the network layer.</p>
</li><li><p><a href="vrp_rip_cfg_0008.html">Configure basic RIP functions</a>.</p>
</li></ul>
<h4 class="sectiontitle">Context</h4><p>Generally, RIP uses timers to receive and send Update messages to maintain neighbor relationships. However, if a RIP routing device does not receive an Update message after the age timer expires, the RIP routing device will announce that this neighbor goes down. The default value of the age timer is 180s. If a link fails, RIP can only detect the failure after 180s. During this time, if high-rate data services are deployed on a network, a large amount of data will be lost.</p>
<p>BFD provides millisecond-level fault detection and can rapidly detect faults in protected links or nodes and report them to RIP. This speeds up RIP's response to network topology changes and achieves rapid RIP route convergence.</p>
<p>In BFD for RIP, BFD session establishment is triggered by RIP. When establishing a neighbor relationship, RIP sends detection parameters of the neighbor to BFD, and a BFD session will be established based on these parameters. If a link fault occurs, the local RIP process will receive a neighbor unreachable message within milliseconds, and the local RIP routing device will delete routing entries in which the neighbor relationship is down and use the backup path to transmit messages.</p>
<div class="p">BFD for RIP can be configured using either of the following methods:<ul><li><a href="#EN-US_TASK_0000001130623188__step_dc_vrp_rip_cfg_005501">Enabling BFD in a RIP process</a>: This method is recommended when BFD for RIP needs to be enabled on most RIP interfaces.</li><li><a href="#EN-US_TASK_0000001130623188__step_dc_vrp_rip_cfg_005502">Enabling BFD on an RIP interface</a>: This method is recommended when BFD for RIP needs to be enabled on a small number of RIP interfaces. </li></ul>
</div>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001130623188__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li id="EN-US_TASK_0000001130623188__step_dc_vrp_rip_cfg_005501"><span id="EN-US_TASK_0000001130623188__">Enable BFD in a RIP process.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enable BFD globally.</span><p><pre class="screen"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></pre>
</p></li><li class="substepexpand"><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li class="substepexpand"><span>Create a RIP process and enter the RIP view.</span><p><pre class="screen"><a href="cmdqueryname=rip"><b><span class="cmdname">rip</span></b></a> <i><span class="varname">process-id</span></i></pre>
</p></li><li class="substepexpand"><span>Enable BFD in the RIP process and establish a BFD session.</span><p><pre class="screen"><a href="cmdqueryname=bfd+all-interfaces+enable"><b><span class="cmdname">bfd all-interfaces enable</span></b></a></pre>
</p><p><p>If BFD is enabled globally, RIP will use the default BFD parameters to establish BFD sessions on all the interfaces where RIP neighbor relationships are up.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure the BFD parameters used to establish a BFD session.</span><p><pre class="screen"><a href="cmdqueryname=bfd+all-interfaces"><b><span class="cmdname">bfd all-interfaces</span></b></a> { <strong><span>min-rx-interval</span></strong> <i><span class="varname">min-receive-value</span></i> | <strong><span>min-tx-interval</span></strong> <i><span class="varname">min-transmit-value</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">detect-multiplier-value</span></i> }<sup>*</sup></pre>
</p><p><p><span>By default, the minimum interval at which BFD packets are sent and the minimum interval at which BFD packets are received are 10 ms, and the detection multiplier is 3.</span></p>
<div class="p">The BFD parameters for establishing a BFD session are changed on all RIP interfaces after running this command. As such, you are advised to use the default detection multiplier and default effective intervals at which BFD packets are sent and received.<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Configure BFD parameter values based on the reliability requirements of the live network.</p>
<ul><li>If the live network requires high reliability, reduce the effective interval at which BFD packets are sent.</li><li>If the live network does not require high reliability, increase the effective interval at which BFD packets are sent.</li></ul>
<div class="p">The BFD detection intervals are calculated as follows:<ul><li>Effective interval at which BFD packets are sent from the local device = Max (<strong><span>min-tx-interval</span></strong> configured on the local device, <strong><span>min-rx-interval</span></strong> configured on the peer device)</li><li>Effective interval at which BFD packets are received by the local device = Max (<strong><span>min-tx-interval</span></strong> configured on the remote device, <strong><span>min-rx-interval</span></strong> configured on the local device)</li><li>Detection interval of the local device = Effective interval at which BFD packets are received by the local device x BFD detection multiplier configured on the remote device</li></ul>
</div>
</div></div>
</div>
</p></li><li class="substepexpand"><span>(Optional) Perform the following operations to prevent an interface in the RIP process from establishing a BFD session:</span><p><ol type="a"><li>Return to the system view.<pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Enter the interface view.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</li><li>Prevent the interface from creating a BFD session.<pre class="screen"><a href="cmdqueryname=rip+bfd+block"><b><span class="cmdname">rip bfd block</span></b></a></pre>
</li></ol>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130623188__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130623188__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li id="EN-US_TASK_0000001130623188__step_dc_vrp_rip_cfg_005502"><span id="EN-US_TASK_0000001130623188__">Enable BFD on a RIP interface.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enable BFD globally.</span><p><pre class="screen"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></pre>
</p></li><li class="substepexpand"><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Enable BFD on the interface to establish a BFD session.</span><p><pre class="screen"><a href="cmdqueryname=rip+bfd+enable"><b><span class="cmdname">rip bfd enable</span></b></a></pre>
</p></li><li class="substepexpand"><span>(Optional) Configure the BFD parameters used to establish a BFD session.</span><p><pre class="screen"><a href="cmdqueryname=rip+bfd"><b><span class="cmdname">rip bfd</span></b></a> { <strong><span>min-rx-interval</span></strong> <i><span class="varname">min-receive-value</span></i> | <strong><span>min-tx-interval</span></strong> <i><span class="varname">min-transmit-value</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">detect-multiplier-value</span></i> } <sup>*</sup></pre>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130623188__en-us_task_0234857734_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130623188__en-us_task_0234857734_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0000001130623188__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After enabling BFD for RIP at both ends of a link, run the <a href="cmdqueryname=display+rip+bfd+session"><b><span class="cmdname">display rip bfd session</span></b></a> { <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">neighbor-id</span></i> | <strong><span>all</span></strong> } command. In the command output, if <strong>BFDState</strong> is displayed as <strong>Up</strong>, a BFD session has been established.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_rip_cfg_0046.html">Configuring BFD for RIP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_rip_cfg_0048.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_rip_cfg_0061.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>