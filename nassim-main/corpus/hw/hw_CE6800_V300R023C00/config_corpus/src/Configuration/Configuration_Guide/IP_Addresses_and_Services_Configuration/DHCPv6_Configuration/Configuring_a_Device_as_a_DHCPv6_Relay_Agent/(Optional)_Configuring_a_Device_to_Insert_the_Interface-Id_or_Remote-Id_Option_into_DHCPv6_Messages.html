
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring a Device to Insert the Interface-Id or Remote-Id Option into DHCPv6 Messages">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_dhcpv6_cfg_0026.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_dhcpv6_cfg_0027.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_dhcpv6_cfg_0029.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DHCPv6">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DHCPv6">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="DHCPv6">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001564010649">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring a Device to Insert the Interface-Id or Remote-Id Option into DHCPv6 Messages</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001564010649"></a><a name="EN-US_TASK_0000001564010649"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring a Device to Insert the Interface-Id or Remote-Id Option into DHCPv6 Messages</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001564010649__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>The Interface-Id and Remote-Id options defined in DHCPv6 record client location information, including the inbound interface of DHCPv6 Request messages and the DUIDs of clients. To enable a DHCPv6 server to allocate network parameters such as IPv6 addresses to clients based on client location information, configure the device functioning as a DHCPv6 relay agent to insert the Interface-Id or Remote-Id option in DHCPv6 messages.</p>
<p>After this function is configured, the device inserts the Interface-Id or Remote-Id option into a Request message received from a client based on the configured option information, constructs a Relay-forward message, and forwards the message to the DHCPv6 server. The server then allocates network parameters such as an IPv6 address to the client based on the option information and sends a Relay-reply message to the DHCPv6 relay agent. After receiving the Relay-reply message, the DHCPv6 relay agent removes the Interface-Id or Remote-Id option from the message and then forwards the message to the client or another relay agent.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001564010649__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>(Optional) Configure the format of the Interface-Id or Remote-Id option as required.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring the format of the Interface-Id or Remote-Id option</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.2.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.2.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.2.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.1.2.4.1.1 "><p>Configure the format of the Interface-Id option to be inserted into DHCPv6 messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=dhcpv6+interface-id+format"><b><span class="cmdname">dhcpv6 interface-id format</span></b></a> { <strong><span>default</span></strong> | <strong><span>user-defined</span></strong> <i><span class="varname">user-defined-text</span></i> }</p>
<div class="p">If the <strong><span>user-defined</span></strong> parameter is specified, you can define the option format using the following methods:<ul><li><p>Definition based on keywords: The Interface-Id option is defined based on the keywords supported by the format. For example, if the name of the device to which users are connected and the ID of the outer VLAN to which they belong need to be recorded, the format can be defined as "%sysname %svlan." If the device name is HUAWEI and the S-VLAN ID is 100, the user location information recorded by the Interface-Id option is "HUAWEI 100."</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>dhcpv6 interface-id format user-defined "%sysname %svlan" </strong></pre>
</li><li><p>Definition based on common character strings: The Interface-Id option is directly defined as a character string. For example, if all users on an interface are located in an office building named N8, the Interface-Id option can be directly defined as "N8."</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>dhcpv6 interface-id format user-defined "N8" </strong></pre>
</li><li><p>Mixed definition: The Interface-Id option is defined by both keywords and common character strings. For example, the Interface-Id option can be defined as "%sysname N8."</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>dhcpv6 interface-id format user-defined "%sysname N8" </strong></pre>
</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.1.2.4.1.3 "><p>By default, the format of the Interface-Id option in DHCPv6 messages is <strong>default</strong>, that is, "%04svlan.%04cvlan.%mac:%portname."</p>
<p>The value of <em>svlan</em> or <em>cvlan</em> is an integer that consists of four characters. If the value is shorter than four characters, 0s are prefixed. For example, if the outer VLAN ID, inner VLAN ID, and inbound interface in a DHCPv6 message received by the device is 11, 22, and VLANIF 100, respectively, and the device MAC address is 00-e0-fc-12-34-56, the Interface-Id option generated during parsing is 0011.0022.00e0fc123456:vlanif100.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.1.2.4.1.1 "><p>Configure the format of the Remote-Id option to be inserted into DHCPv6 messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=dhcpv6+remote-id+format"><b><span class="cmdname">dhcpv6 remote-id format</span></b></a> { <strong><span>default</span></strong> | <strong><span>user-defined</span></strong> <i><span class="varname">user-defined-text</span></i> }</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.1.2.4.1.3 "><p>By default, the format of the Remote-Id option in DHCPv6 messages is <strong>default</strong>, that is, "%duid %portname:%04svlan.%04cvlan."</p>
<p>The method for defining the Remote-Id option format is the same as that for defining the Interface-Id option format.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></pre>
</p></li><li><span>Switch the interface working mode to Layer 3.</span><p><pre class="screen" id="EN-US_TASK_0000001564010649__en-us_task_0228023023_screen166833536478"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001564010649__en-us_task_0228023023_cmdname182821059820">undo portswitch</span></b></a></pre>
<p id="EN-US_TASK_0000001564010649__en-us_task_0228023023_p18457174912148">Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li><span>Enable the device to insert the Interface-Id or Remote-Id option into DHCPv6 messages.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Enabling the device to insert the Interface-Id or Remote-Id option into DHCPv6 messages</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.5.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.5.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.5.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.1.2.4.1.1 "><p>Enable the device to insert the Interface-Id option into DHCPv6 messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.1.2.4.1.2 "><p><a href="cmdqueryname=dhcpv6+interface-id+insert+enable"><b><span class="cmdname">dhcpv6 interface-id insert enable</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.1.2.4.1.3 "><p>By default, a device is enabled to insert the Interface-Id option into DHCPv6 messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.1.2.4.1.1 "><p>Enable the device to insert the Remote-Id option into DHCPv6 messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.1.2.4.1.2 "><p><a href="cmdqueryname=dhcpv6+remote-id+insert+enable"><b><span class="cmdname">dhcpv6 remote-id insert enable</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.1.2.4.1.3 "><p>By default, a device is disabled from inserting the Remote-Id option into DHCPv6 messages.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001564010649__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001564010649__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_dhcpv6_cfg_0026.html">Configuring a Device as a DHCPv6 Relay Agent
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_dhcpv6_cfg_0027.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_dhcpv6_cfg_0029.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>