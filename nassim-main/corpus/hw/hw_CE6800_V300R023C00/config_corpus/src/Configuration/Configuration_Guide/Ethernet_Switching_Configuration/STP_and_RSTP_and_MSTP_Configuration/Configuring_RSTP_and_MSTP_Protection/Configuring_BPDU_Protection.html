
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BPDU Protection">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1109.html">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1110.html">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1112.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MSTP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="STP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSTP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="STP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="MSTP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="STP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001292238732">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring BPDU Protection</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001292238732"></a><a name="EN-US_TASK_0000001292238732"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BPDU Protection</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001292238732__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>In most cases, edge ports are connected directly to user terminals and do not receive BPDUs. If edge ports on a device receive forged BPDUs, the device will change the edge ports to non-edge ports and recalculate the spanning tree, causing network flapping. To prevent this problem, BPDU protection can be enabled on the device to prevent malicious spoofed BPDU attacks. For details about edge port configuration, see <a href="vrp_stp_cfg_1096.html">Configuring Edge Ports and BPDU Filtering Ports (for RSTP/MSTP)</a>.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>BPDU protection only takes effect on edge ports that are configured using the <a href="cmdqueryname=stp+edged-port"><b><span class="cmdname">stp edged-port</span></b></a> or <a href="cmdqueryname=stp+edged-port+default"><b><span class="cmdname">stp edged-port default</span></b></a> command, and not for those configured through automatic edge port detection.</p>
</div></div>
<p>The following procedure applies only to devices with edge ports.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001292238732__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>(Optional) Enter the MSTP process view.</span><p><p id="EN-US_TASK_0000001292238732__en-us_task_0000001130783134_p16533457112820">Perform this step to set system parameters only when the MSTP process ID is not 0. Skip this step if the MSTP process ID is 0.</p>
<pre class="screen" id="EN-US_TASK_0000001292238732__en-us_task_0000001130783134_screen1136151023420"><a href="cmdqueryname=stp+process"><b><span class="cmdname" id="EN-US_TASK_0000001292238732__en-us_task_0000001130783134_cmdname12422107345">stp process</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001292238732__en-us_task_0000001130783134_varname7421210123412">process-id</span></i></pre>
</p></li><li><span>Enable BPDU protection.</span><p><pre class="screen"><a href="cmdqueryname=stp+bpdu-protection"><b><span class="cmdname">stp bpdu-protection</span></b></a></pre>
<p>By default, BPDU protection is disabled.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If an edge port for which BPDU protection is enabled receives BPDUs, the edge port will enter the error-down state with its attributes unchanged. To restore an error-down edge port to the up state, use one of the following methods:</p>
<ul><li>In the interface view, run the <a href="cmdqueryname=restart"><b><span class="cmdname">restart</span></b></a> command.</li><li>In the interface view, run the <a href="cmdqueryname=shutdown"><b><span class="cmdname">shutdown</span></b></a> and <a href="cmdqueryname=undo+shutdown"><b><span class="cmdname">undo shutdown</span></b></a> commands in sequence.</li><li>In the system view, run the <a href="cmdqueryname=error-down+auto-recovery"><b><span class="cmdname">error-down auto-recovery</span></b></a> <strong><span>cause</span></strong> <strong><span>bpdu-protection</span></strong> <strong><span>interval</span></strong> <i><span class="varname">Interval-value</span></i> command to enable the port to recover to the up state and set a recovery delay. <i><span class="varname">interval-value</span></i> specifies a recovery delay after which the error-down port will go up automatically.</li></ul>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001292238732__en-us_task_0234857734_en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001292238732__en-us_task_0234857734_en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001292238732__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the following commands and check the BPDU-Protection field to verify the BPDU protection configuration.</p>
<ul><li><a href="cmdqueryname=display+stp"><b><span class="cmdname">display stp</span></b></a> [ <strong><span>process</span></strong> <i><span class="varname">process-id</span></i> ] [ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ] [ <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> ]</li><li><a href="cmdqueryname=display+stp+active"><b><span class="cmdname">display stp active</span></b></a></li><li><a href="cmdqueryname=display+stp+global"><b><span class="cmdname">display stp global</span></b></a></li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_stp_cfg_1109.html">Configuring RSTP/MSTP Protection
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_stp_cfg_1110.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_stp_cfg_1112.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>