
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Traffic Shaping to Implement Interface-based Rate Limiting">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_qos_trafficpolicy_trafficshaping_cfg_0048.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_qos_trafficpolicy_trafficshaping_cfg_0049.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_qos_trafficpolicy_trafficshaping_cfg_0051.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Interface-based Rate Limiting">
<meta name="featurename" content="Traffic Policing">
<meta name="featurename" content="Traffic Shaping">
<meta name="featuretype" content="QoS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Interface-based Rate Limiting">
<meta name="featurename" content="Traffic Policing">
<meta name="featurename" content="Traffic Shaping">
<meta name="featuretype" content="QoS">
<meta name="featurename" content="Interface-based Rate Limiting">
<meta name="featurename" content="Traffic Policing">
<meta name="featurename" content="Traffic Shaping">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512850230">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Traffic Shaping to Implement Interface-based Rate Limiting</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512850230"></a><a name="EN-US_TASK_0000001512850230"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Traffic Shaping to Implement Interface-based Rate Limiting</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001512850230__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When a large amount of traffic is sent from the downstream device to its upstream device, to prevent congestion or packet loss, configure traffic shaping on the outbound interface of the device. Traffic shaping adjusts the rate of outgoing traffic on the interface to reduce traffic bursts so that outgoing packets can be transmitted at a stable rate. With traffic shaping, packets exceeding the rate limit enter the buffer queue, and are only sent out at an even rate when there are sufficient tokens in the token bucket. In addition, if the buffer queue is full, the system discards new packets.</p>
<p>If packets are encapsulated through VPN tunnels, the calculated packet length during rate limiting or traffic statistics collection on a WAN-side interface includes the lengths of link-layer and physical-layer packet headers and the lengths of tunnel protocol encapsulation headers. As a result, the actual user bandwidth calculated using this method is smaller than the expected value. To minimize the difference between the actual bandwidth and the expected bandwidth, you can disable the device from counting the inter-frame gaps and preambles when it calculates the packet length, and configure the function of excluding the tunnel encapsulation length of packets on the tunnel interface. In this way, the calculated packet length excludes the lengths of the physical-layer packet header and tunnel protocol encapsulation header.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Currently, traffic shaping can only be used to rate-limit outgoing traffic on an interface.</p>
<p>The system will generate an alarm when the rate of outgoing traffic on an interface exceeds the alarm threshold for rate-limiting outgoing traffic.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512850230__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name </span></i>}</pre>
</p></li><li><span>Configure the rate limit for outgoing traffic on the interface.</span><p><p>For the <span>CE6866, CE6860-SAN, CE6866K, CE6860-HAM, CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, CE8850-HAM</span>, <span>CE6820H, CE6820H-K, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6820S</span>:</p>
<pre class="screen"><span><a href="cmdqueryname=qos+lr"><b><span class="cmdname">qos lr</span></b></a></span> <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i><span> [ <strong><span>kbps</span></strong> | <strong><span>mbps</span></strong> | <strong><span>gbps</span></strong> ]</span> [ <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i><span> [ <strong><span>bytes</span></strong> | <strong><span>kbytes</span></strong> | <strong><span>mbytes</span></strong> ]</span> ] <span>[ <strong><span>outbound</span></strong> ]</span></pre>
<p>For the <span>CE8855, CE8851-32CQ4BQ, CE6855-48XS8CQ, CE6885, CE6885-SAN, CE6885-LL, CE6885-T, CE6863E-48S8CQ</span>:</p>
<pre class="screen"><span><a href="cmdqueryname=qos+lr"><b><span class="cmdname">qos lr</span></b></a></span> <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i><span> [ <strong><span>kbps</span></strong> | <strong><span>mbps</span></strong> | <strong><span>gbps</span></strong> ]</span> <span>[ <strong><span>outbound</span></strong> ]</span></pre>
<p>By default, the rate limit on an interface is the maximum bandwidth of the interface.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512850230__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512850230__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_qos_trafficpolicy_trafficshaping_cfg_0048.html">Configuring Interface-based Rate Limiting
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_qos_trafficpolicy_trafficshaping_cfg_0049.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_qos_trafficpolicy_trafficshaping_cfg_0051.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>