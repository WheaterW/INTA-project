
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring ARP Active Detection">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_title.html">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_0032.html">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_0040.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ARP">
<meta name="featurename" content="IP Address Conflict Detection">
<meta name="featurename" content="Dynamic ARP">
<meta name="featurename" content="Static ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176743497">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring ARP Active Detection</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176743497"></a><a name="EN-US_TASK_0000001176743497"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring ARP Active Detection</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176743497__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>On the network shown in <a href="#EN-US_TASK_0000001176743497__fig13689206552">Figure 1</a>, Host1 and Host2 reside on the same network segment and their default gateways are DeviceA and DeviceB, respectively. They both use the same IP address (192.168.1.1/24) as their default gateway addresses, and DeviceA and DeviceB both advertise routes to the corresponding network segment (192.168.1.0/24) to DeviceC. As a result, DeviceC considers that there are two equal-cost routes to both Host1 and Host2. If DeviceC chooses to transmit traffic to Host1 through DeviceB, the traffic is discarded because DeviceB does not have Host1's ARP information. To resolve this issue, enable ARP active detection on DeviceA and DeviceB so that they can actively learn ARP information of the hosts connected to them. Then, run the <strong>arp direct-route enable</strong> command in the system view or the <strong>arp direct-route enable</strong> command in the interface view on DeviceA and DeviceB to convert the learned ARP information into Vlink host routes and advertise the routes to DeviceC. In this way, DeviceC can accurately forward packets.</p>
<div class="fignone" id="EN-US_TASK_0000001176743497__fig13689206552"><a name="EN-US_TASK_0000001176743497__fig13689206552"></a><a name="fig13689206552"></a><span class="figcap"><b>Figure 1 </b>Network diagram of ARP active detection</span><br><span><img class="vsd" src="figure/en-us_image_0000001130624060.png"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176743497__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>(Optional) Configure an interval at which the device sends ARP probe messages and the number of ARP probe messages to be sent in each interval.</span><p><pre class="screen"><a href="cmdqueryname=arp+smart-discover+interval+count"><b><span class="cmdname">arp smart-discover interval</span></b></a> <em>interval-value</em> <strong><span>count</span></strong> <em><i><span class="varname">count-value</span></i></em></pre>
<p>By default, the interval at which the device sends ARP probe messages and the number of ARP probe messages to be sent in each interval are 1 second and 128, respectively.</p>
</p></li><li><span>Enter the VLANIF interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface+vlanif"><b><span class="cmdname">interface vlanif</span></b></a> <em><i><span class="varname">vlan-id</span></i></em></pre>
</p></li><li><span>Enable ARP active detection.</span><p><pre class="screen"><strong>arp smart-discover enable</strong></pre>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176743497__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176743497__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_arp_cfg_title.html">ARP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_arp_cfg_0032.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_arp_cfg_0040.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>