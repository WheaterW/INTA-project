
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring IS-IS Multi-Instance Processes">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_isis_ipv4_cfg_0215.html">
<meta name="DC.Relation" scheme="URI" content="vrp_isis_ipv4_cfg_1130.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001412446569">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring IS-IS Multi-Instance Processes</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001412446569"></a><a name="EN-US_TASK_0000001412446569"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring IS-IS Multi-Instance Processes</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001412446569__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On IS-IS networks, multiple IS-IS processes need to be used to isolate different access rings. To close the access rings, the IS-IS processes on all access rings need to be enabled. In this case, you need to enable different IGP processes on one interface. This reduces the interface count and configuration workload of the access rings.</p>
<p>As shown in <a href="#EN-US_TASK_0000001412446569__fig_dc_vrp_isis_cfg_008001">Figure 1</a>:</p>
<p><span class="keyword">Device</span>A, <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, and <span class="keyword">Device</span>D interwork through IS-IS and form an IS-IS access ring. <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, <span class="keyword">Device</span>E, and <span class="keyword">Device</span>F also interwork through IS-IS and form another IS-IS access ring. The IS-IS multi-instance process function is enabled on each <span class="keyword">router</span>. Two IS-IS multi-instance processes are enabled on specified interfaces of <span class="keyword">Device</span>A and <span class="keyword">Device</span>B. One IS-IS multi-instance process is enabled on specified interfaces of <span class="keyword">Device</span>C, <span class="keyword">Device</span>D, <span class="keyword">Device</span>E, and <span class="keyword">Device</span>F.</p>
<div class="fignone" id="EN-US_TASK_0000001412446569__fig_dc_vrp_isis_cfg_008001"><a name="EN-US_TASK_0000001412446569__fig_dc_vrp_isis_cfg_008001"></a><a name="fig_dc_vrp_isis_cfg_008001"></a><span class="figcap"><b>Figure 1 </b>Configuring IS-IS multi-instance processes</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1, interface 2, and interface 3 represent <span>100GE</span><span>1/0/1</span>, <span>100GE</span><span>1/0/2</span>, and <span>100GE</span><span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001362089212.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.223322332233224%" id="mcps1.3.1.6.1.4.1.1" liSelected="liSelected"><p>Device Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.223322332233224%" id="mcps1.3.1.6.1.4.1.2" liSelected="liSelected"><p>Interface</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.55335533553355%" id="mcps1.3.1.6.1.4.1.3" liSelected="liSelected"><p>IP Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="3" valign="top" width="33.223322332233224%" headers="mcps1.3.1.6.1.4.1.1 "><p><span class="keyword">Device</span>A</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.3.1.6.1.4.1.2 "><p><span>100GE</span><span>1/0/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.3.1.6.1.4.1.3 "><p>10.1.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.1 "><p><span>100GE</span><span>1/0/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.2 "><p>192.168.4.4/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.1 "><p><span>100GE</span><span>1/0/3</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.2 "><p>192.168.5.5/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" valign="top" width="33.223322332233224%" headers="mcps1.3.1.6.1.4.1.1 "><p><span class="keyword">Device</span>B</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.3.1.6.1.4.1.2 "><p><span>100GE</span><span>1/0/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.3.1.6.1.4.1.3 "><p>10.1.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.1 "><p><span>100GE</span><span>1/0/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.2 "><p>192.168.0.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.1 "><p><span>100GE</span><span>1/0/3</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.2 "><p>192.168.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.223322332233224%" headers="mcps1.3.1.6.1.4.1.1 "><p><span class="keyword">Device</span>C</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.3.1.6.1.4.1.2 "><p><span>100GE</span><span>1/0/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.3.1.6.1.4.1.3 "><p>192.168.3.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.1 "><p><span>100GE</span><span>1/0/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.2 "><p>192.168.4.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.223322332233224%" headers="mcps1.3.1.6.1.4.1.1 "><p><span class="keyword">Device</span>D</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.3.1.6.1.4.1.2 "><p><span>100GE</span><span>1/0/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.3.1.6.1.4.1.3 "><p>192.168.3.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.1 "><p><span>100GE</span><span>1/0/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.2 "><p>192.168.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.223322332233224%" headers="mcps1.3.1.6.1.4.1.1 "><p><span class="keyword">Device</span>E</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.3.1.6.1.4.1.2 "><p><span>100GE</span><span>1/0/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.3.1.6.1.4.1.3 "><p>192.168.2.4/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.1 "><p><span>100GE</span><span>1/0/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.2 "><p>192.168.5.4/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.223322332233224%" headers="mcps1.3.1.6.1.4.1.1 "><p><span class="keyword">Device</span>F</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.3.1.6.1.4.1.2 "><p><span>100GE</span><span>1/0/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.3.1.6.1.4.1.3 "><p>192.168.2.5/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.1 "><p><span>100GE</span><span>1/0/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.6.1.4.1.2 "><p>192.168.0.3/24</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001412446569__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>To improve security, you are advised to configure IS-IS authentication. For details, see Configuring IS-IS Authentication. IS-IS interface authentication is used as an example. For details, see Example for Configuring Basic IS-IS Functions.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001412446569__1.3.3"></a><a name="1.3.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Enable the IS-IS multi-instance process function on each <span class="keyword">router</span>.</p>
</li><li><p>Enable two IS-IS multi-instance processes on specified interfaces of <span class="keyword">Device</span>A and <span class="keyword">Device</span>B. In addition, enable one IS-IS multi-instance process on specified interfaces of <span class="keyword">Device</span>C, <span class="keyword">Device</span>D, <span class="keyword">Device</span>E, and <span class="keyword">Device</span>F.</p>
</li><li><p>Configure a cost for each of the two multi-instance processes on the specified interfaces of <span class="keyword">Device</span>A and <span class="keyword">Device</span>B.</p>
</li><li><p>Check information about IS-IS interfaces.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001412446569__1.3.4"></a><a name="1.3.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Area addresses of <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, <span class="keyword">Device</span>D, <span class="keyword">Device</span>E, and <span class="keyword">Device</span>F</p>
</li><li><p>IS-IS multi-instance process IDs of <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, <span class="keyword">Device</span>D, <span class="keyword">Device</span>E, and <span class="keyword">Device</span>F</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001412446569__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address for each interface.</span><p><p>Configure IP addresses for interfaces according to <a href="#EN-US_TASK_0000001412446569__fig_dc_vrp_isis_cfg_008001">Figure 1</a>. For detailed configurations, see Configuration Scripts.</p>
</p></li><li><span>Enable IS-IS, configure a level, and set a NET for each device.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>isis 1</strong>
[<span class="keyword">*</span>DeviceA-isis-1] <strong>network-entity 00.1111.1111.1111.00</strong>
[<span class="keyword">*</span>DeviceA-isis-1] <strong>multi-instance enable iid 2</strong>
[<span class="keyword">*</span>DeviceA-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>isis 2</strong>
[<span class="keyword">*</span>DeviceA-isis-2] <strong>network-entity 00.1111.1111.1112.00</strong>
[<span class="keyword">*</span>DeviceA-isis-2] <strong>multi-instance enable iid 3</strong>
[<span class="keyword">*</span>DeviceA-isis-2] <strong>quit</strong></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>isis 1</strong>
[<span class="keyword">*</span>DeviceB-isis-1] <strong>network-entity 00.2222.2222.2222.00</strong>
[<span class="keyword">*</span>DeviceB-isis-1] <strong>multi-instance enable iid 2</strong>
[<span class="keyword">*</span>DeviceB-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB] <strong>isis 2</strong>
[<span class="keyword">*</span>DeviceB-isis-2] <strong>network-entity 00.2222.2222.2223.00</strong>
[<span class="keyword">*</span>DeviceB-isis-2] <strong>multi-instance enable iid 3</strong>
[<span class="keyword">*</span>DeviceB-isis-2] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span>C, <span class="keyword">Device</span>D, <span class="keyword">Device</span>E, and <span class="keyword">Device</span>F.</p>
<p>The configuration procedure is the same as that of <span class="keyword">Device</span>A. For detailed configurations, see Configuration Scripts.</p>
</p></li><li><span>Set link costs for interfaces on <span class="keyword">Device</span>A and <span class="keyword">Device</span>B.</span><p><p># Configure DeviceA.</p>
</p><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>interface </strong><strong><span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>isis enable 1</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>isis enable 2</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>isis process-id 1 cost 5</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>isis process-id 2 cost 15</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>interface </strong><strong><span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong>isis enable 1</strong>
[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong>isis enable 2</strong>
[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong>isis process-id 1 cost 5</strong>
[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong>isis process-id 2 cost 15</strong>
[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001412446569__1.3.6"></a><a name="1.3.6"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Check information about the specified IS-IS interface on DeviceA. The command output shows that multiple IS-IS multi-instance processes can be enabled on the same interface.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>display isis interface </strong><span>100GE</span><span>1/0/1</span>
Interface information for ISIS(1)
------------------------------------------------------------------------
Interface    Id      IPV4.State          IPV6.State       MTU  Type  DIS  
<span>100GE</span><span>1/0/1</span>      001         Up          Mtu:Up/Lnk:Up/IP:Up  1497 L1/L2 No/No
 
Interface information for ISIS(2)
-------------------------------------------------------------------------
Interface    Id      IPV4.State          IPV6.State        MTU  Type  DIS  
<span>100GE</span><span>1/0/1</span>      001        Up           Mtu:Up/Lnk:Dn/IP:Dn  1497 L1/L2 No/No</pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001412446569__1.3.7"></a><a name="1.3.7"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p>DeviceA</p>
<pre class="screen">#
sysname DeviceA
#
isis 1
 network-entity 00.1111.1111.1111.00
 multi-instance enable iid 2
isis 2
 network-entity 00.1111.1111.1112.00
 multi-instance enable iid 3
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 10.1.1.2 255.255.255.0
 isis enable 1
 isis process-id 1 cost 5
 isis enable 2
 isis process-id 2 cost 15
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 192.168.4.4 255.255.255.0
 isis enable 2
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ip address 192.168.5.5 255.255.255.0
 isis enable 1
#  
return</pre>
</li><li><p>DeviceB</p>
<pre class="screen">#
sysname DeviceB
#
isis 1
 network-entity 00.2222.2222.2222.00
 multi-instance enable iid 2
isis 2
 network-entity 00.2222.2222.2223.00
 multi-instance enable iid 3
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 10.1.1.1 255.255.255.0
 isis enable 1
 isis process-id 1 cost 5
 isis enable 2
 isis process-id 2 cost 15
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 192.168.0.1 255.255.255.0
 isis enable 1
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ip address 192.168.1.1 255.255.255.0
 isis enable 2
#
return</pre>
</li><li><p>DeviceC</p>
<pre class="screen">#
sysname DeviceC
#
isis 2
 network-entity 00.3333.3333.3333.00
 multi-instance enable iid 3
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.3.1 255.255.255.0
 isis enable 2
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 192.168.4.2 255.255.255.0
 isis enable 2
#
return</pre>
</li><li><p>DeviceD</p>
<pre class="screen">#
sysname DeviceD
#
isis 2
 network-entity 00.4444.4444.4444.00
 multi-instance enable iid 3
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.3.2 255.255.255.0
 isis enable 2
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 192.168.1.2 255.255.255.0
 isis enable 2
#
return</pre>
</li><li><p>DeviceE</p>
<pre class="screen">#
sysname DeviceE
#
isis 1
 network-entity 00.5555.5555.5555.00
 multi-instance enable iid 2
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.2.4 255.255.255.0
 isis enable 1
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 192.168.5.4 255.255.255.0
 isis enable 1
#
return</pre>
</li><li><p>DeviceF</p>
<pre class="screen">#
sysname DeviceF
#
isis 1
 network-entity 00.6666.6666.6666.00
 multi-instance enable iid 2
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.2.5 255.255.255.0
 isis enable 1
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 192.168.0.3 255.255.255.0
 isis enable 1
return</pre>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_isis_ipv4_cfg_0215.html">Configuring an IS-IS Multi-Instance Process
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_isis_ipv4_cfg_1130.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>