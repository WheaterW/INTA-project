
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Storm Control">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_stormsuppression_cfg_0014_R21C10.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_stormsuppression_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_stormsuppression_cfg_0017.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Storm Suppression">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Storm Suppression">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Storm Suppression">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security Protection">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513048478">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Storm Control</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001513048478"></a><a name="EN-US_TASK_0000001513048478"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Storm Control</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001513048478__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>To rate-limit broadcast packets, unknown multicast packets, or unknown unicast packets on an interface so as to prevent broadcast storms, configure storm control for these types of packets on the interface.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001513048478__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li><span>Switch the interface working mode to Layer 2.</span><p><pre class="screen" id="EN-US_TASK_0000001513048478__en-us_task_0228023023_screen242613534459"><a href="cmdqueryname=portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001513048478__en-us_task_0228023023_cmdname942715314511">portswitch</span></b></a></pre>
<p id="EN-US_TASK_0000001513048478__en-us_task_0228023023_p1175711105814">Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li><span>Configure the upper and lower thresholds for broadcast packets, unknown multicast packets, or unknown unicast packets on the interface. The device supports the following configuration modes based on the measurement units of the upper and lower thresholds:</span><ul><li>Specify the lower threshold <i><span class="varname">min-rate-value</span></i> and upper threshold <i><span class="varname">max-rate-value</span></i>, which is expressed in pps.<pre class="screen"><a href="cmdqueryname=storm+control"><b><span class="cmdname">storm control</span></b></a> { <strong><span>broadcast</span></strong> | <strong><span>multicast</span></strong> | <strong><span>unknown-unicast</span></strong> } <strong><span>min-rate</span></strong> <i><span class="varname">min-rate-value</span></i> <strong><span>max-rate</span></strong> <i><span class="varname">max-rate-value</span></i></pre>
</li><li>Specify the lower threshold <i><span class="varname">min-rate-value-kbps</span></i> and upper threshold <i><span class="varname">max-rate-value-kbps</span></i>, which is expressed in kbit/s.<pre class="screen"><a href="cmdqueryname=storm+control"><b><span class="cmdname">storm control</span></b></a> { <strong><span>broadcast</span></strong> | <strong><span>multicast</span></strong> | <strong><span>unknown-unicast</span></strong> } <strong><span>min-rate</span></strong> <strong><span>kbps</span></strong> <i><span class="varname">min-rate-value-kbps</span></i> <strong><span>max-rate</span></strong> <strong><span>kbps</span></strong> <i><span class="varname">max-rate-value-kbps</span></i></pre>
</li><li>Specify the lower threshold <i><span class="varname">min-rate-value-percent</span></i> and upper threshold <i><span class="varname">max-rate-value-percent</span></i>. The threshold is expressed in percentage, that is, the percentage of the interface bandwidth occupied by packets.<pre class="screen"><a href="cmdqueryname=storm+control"><b><span class="cmdname">storm control</span></b></a> { <strong><span>broadcast</span></strong> | <strong><span>multicast</span></strong> | <strong><span>unknown-unicast</span></strong> } <strong><span>min-rate</span></strong> <strong><span>percent</span></strong> <i><span class="varname">min-rate-value-percent</span></i> <strong><span>max-rate</span></strong> <strong><span>percent</span></strong> <i><span class="varname">max-rate-value-percent</span></i></pre>
</li></ul>
</li><li><span>Configure a storm control action.</span><ol type="a"><li class="substepexpand"><span>Configure the storm control action as <strong>error-down</strong>, <strong>block</strong>, or <strong>suppress</strong>.</span><p><pre class="screen"><a href="cmdqueryname=storm+control+action"><b><span class="cmdname">storm control action</span></b></a> { <strong><span>error-down</span></strong> | <strong><span>block</span></strong> | <strong><span>suppress</span></strong> }</pre>
</p></li><li class="substepexpand"><span>(Optional) Enable an interface to automatically go up before the interface enters the error-down state, and set the recovery delay (this step is only applicable to the <strong>error-down</strong> action).</span><p><div class="p">This function should be used if a large number of interfaces may enter the error-down state, as manually recovering so many error-down interfaces is time-consuming and error-prone. To prevent this problem, you can configure interfaces in error-down state to automatically go up, and set the recovery delay. <div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This method does not take effect on interfaces that are already in error-down state. It takes effect only on interfaces that enter the error-down state after the <a href="cmdqueryname=error-down+auto-recovery"><b><span class="cmdname">error-down auto-recovery</span></b></a> command is run.</p>
<p>You can run the <strong>display error-down recovery</strong> command to check information about automatic interface recovery.</p>
</div></div>
</div>
</p><p><pre class="screen"><a href="cmdqueryname=error-down+auto-recovery"><b><span class="cmdname">error-down auto-recovery</span></b></a> <strong><span>cause</span></strong> <strong><span>storm-control</span></strong> <strong><span>interval</span></strong> <i><span class="varname">interval-value</span></i></pre>
</p></li></ol>
</li><li><span>Configure the storm detection interval.</span><p><pre class="screen"><a href="cmdqueryname=storm+control+interval"><b><span class="cmdname">storm control interval</span></b></a> <i><span class="varname">interval-value</span></i></pre>
</p></li><li><span>(Optional) Enable the device to record logs or report traps during storm control.</span><p><pre class="screen"><a href="cmdqueryname=storm+control+enable"><b><span class="cmdname">storm control enable</span></b></a> { <strong><span>log</span></strong> | <strong><span>trap</span></strong> }</pre>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001513048478__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513048478__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001513048478__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+storm+control"><b><span class="cmdname">display storm control</span></b></a> [ <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <strong><span>verbose</span></strong> ] ] command to check storm control information on an interface.</p>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001513048478__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><p>After the storm control action is set to <strong>error-down</strong> on an interface, the interface is shut down when the average rate of received broadcast packets, unknown multicast packets, or unknown unicast packets exceeds the specified upper threshold within the detection interval. If an interface is in error-down state, run the <strong>shutdown</strong> and <strong>undo shutdown</strong> commands in the interface view, or run the <strong>restart</strong> command to restart the interface.</p>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_stormsuppression_cfg_0014_R21C10.html">Configuring Storm Control
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_stormsuppression_cfg_0015.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_stormsuppression_cfg_0017.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>