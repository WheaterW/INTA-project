
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring MAC Address Learning Limit on an Interface">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_mac_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="vrp_mac_cfg_1023.html">
<meta name="DC.Relation" scheme="URI" content="vrp_mac_cfg_0025.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176664487">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring MAC Address Learning Limit on an Interface</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176664487"></a><a name="EN-US_TASK_0000001176664487"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring MAC Address Learning Limit on an Interface</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176664487__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In <a href="#EN-US_TASK_0000001176664487__fig_dc_cfg_mac_006401">Figure 1</a>, user networks 1 and 2 belong to VLAN 10 and VLAN 20, respectively. The two user networks are connected to DeviceA through DeviceB, and DeviceA is connected to DeviceB through <span>100GE</span> <span>1/0/1</span>. To control the number of access users on DeviceA, configure MAC address learning limit on <span>100GE</span> <span>1/0/1</span>.</p>
<div class="fignone" id="EN-US_TASK_0000001176664487__fig_dc_cfg_mac_006401"><a name="EN-US_TASK_0000001176664487__fig_dc_cfg_mac_006401"></a><a name="fig_dc_cfg_mac_006401"></a><span class="figcap"><b>Figure 1 </b>Networking of MAC address learning limit on an interface</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interface 1 in this example represents <span>100GE</span> <span>1/0/1</span>.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001176744421.png"></span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <span>CE6885-LL (low latency mode)</span> does not support this function.</p>
</div></div>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176664487__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Create VLANs and add <span>100GE</span> <span>1/0/1</span> to them to implement Layer 2 forwarding.</p>
</li><li><p>Configure MAC address learning limit on <span>100GE</span> <span>1/0/1</span> to control the number of access users.</p>
</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176664487__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create VLANs and add <span>100GE</span> <span>1/0/1</span> to them.</span><p><p># Add <span>100GE</span> <span>1/0/1</span> to VLAN 10 and VLAN 20.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname Device</strong><strong>A</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> vlan batch 10 20</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface </strong><strong><span>100ge</span> <span>1/0/1</span></strong>
<span>[<span class="keyword">*</span>DeviceA-<span><span>100GE</span><span>1/0/1</span></span>] <strong>portswitch</strong></span>
<span>[<span class="keyword">*</span>DeviceA-<span><span>100GE</span><span>1/0/1</span></span>] <strong>port link-type trunk</strong></span>
<span>[<span class="keyword">*</span>DeviceA-<span><span>100GE</span><span>1/0/1</span></span>] </span><strong>port trunk allow-pass<span> vlan 10 20</span></strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span><span>1/0/1</span></span></span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
</p></li><li><span>Configure MAC address learning limit on <span>100GE</span> <span>1/0/1</span>.</span><p><p># Set the maximum number of MAC addresses that can be dynamically learned on <span>100GE</span> <span>1/0/1</span> to 100, and configure DeviceA to generate an alarm when the number of learned MAC addresses exceeds the limit.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>interface </strong><strong><span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span><span><span>100GE</span><span>1/0/1</span></span></span>] <strong>mac-address limit maximum 100 alarm enable</strong> 
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span><span>1/0/1</span></span></span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001176664487__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Run the <strong>display mac-address limit</strong> command in any view to check whether the maximum number of MAC address entries that can be dynamically learned and the action for the device to take when the configured maximum number is reached are configured successfully.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>display mac-address limit</strong>
MAC Address Limit is enabled
Total MAC Address limit rule count : 1

Port                 VLAN/VSI/SI/BD      Slot Maximum      Action     Alarm
----------------------------------------------------------------------------    
<span>100GE</span><span>1/0/1</span>            --               --   100          discard    enable     </pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001176664487__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Configuration Scripts</h4><pre class="screen">#
sysname DeviceA
#
vlan batch 10 20
#
interface <span><span><span>100GE</span><span>1/0/1</span></span></span>
<span> port link-type trunk</span>
 port trunk allow-pass<span> vlan 10 20</span>
 mac-address limit maximum 100 alarm enable<strong> </strong>
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_mac_cfg_0020.html">Configuring MAC Address Learning Limit
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_mac_cfg_1023.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_mac_cfg_0025.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>