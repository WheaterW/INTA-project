
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Redirection to a Next-Hop Address">
<meta name="DC.subject" content="Policy-Based Routing">
<meta name="keywords" content="Policy-Based Routing">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_qos_redirect_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_qos_redirect_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_qos_redirect_cfg_0008.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Redirection">
<meta name="featuretype" content="QoS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Redirection">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513050182">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Redirection to a Next-Hop Address</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001513050182"></a><a name="EN-US_TASK_0000001513050182"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Redirection to a Next-Hop Address</h1>
<div class="taskbody" id="taskbody1587385155554"><div class="context"><a name="EN-US_TASK_0000001513050182__1.3.1"></a><a name="1.3.1"></a>
<div class="p" id="EN-US_TASK_0000001513050182__context1141145180175348"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0000001513050182__p20226945204712">In <a href="#EN-US_TASK_0000001513050182__fig766814017525">Figure 1</a>, <span class="keyword" id="EN-US_TASK_0000001513050182__keyword16598193424212">DeviceA</span> functioning as a Layer 3 forwarding device is routable to NetworkA and is connected to the Internet through two links. One uplink is a high-speed link with the gateway at 10.1.20.1/24, and the other is a low-speed link with the gateway at 10.1.30.1/24. The user requires that <span class="keyword" id="EN-US_TASK_0000001513050182__keyword135751045164215">DeviceA</span> forward packets from network segments 192.168.100.0/24 and 192.168.101.0/24 to the Internet through the high-speed link and low-speed link, respectively. This requirement can be met by configuring redirection to a next-hop address, which is sometimes also called policy-based routing (PBR).</p>
<div class="fignone" id="EN-US_TASK_0000001513050182__fig766814017525"><a name="EN-US_TASK_0000001513050182__fig766814017525"></a><a name="fig766814017525"></a><span class="figcap"><b>Figure 1 </b>Network diagram of redirection to a next-hop address</span><div class="note" id="EN-US_TASK_0000001513050182__note163690483552"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001513050182__p113691482557">In this example, interface 1, interface 2, and interface 3 represent <span>100GE</span> <span>1/0/1</span>, <span>100GE</span> <span>1/0/2</span>, and <span>100GE</span> <span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0000001513050182__image303815995175329" src="figure/en-us_image_0000001512691002.png"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001513050182__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001513050182__steps1104060762175348"><li id="EN-US_TASK_0000001513050182__step345934269183249"><span id="EN-US_TASK_0000001513050182__cmd879026654183249">Create VLANs and configure interfaces.</span><p><p id="EN-US_TASK_0000001513050182__p1763788902183249"># Create VLAN 10, VLAN 20, and VLAN 30 on <span class="keyword" id="EN-US_TASK_0000001513050182__keyword4114111422215">DeviceA</span>.</p>
<pre class="screen" id="EN-US_TASK_0000001513050182__screen1261465752183249">&lt;<span class="keyword" id="EN-US_TASK_0000001513050182__keyword17299145917166">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001513050182__b1681704279183249">system-view</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001513050182__keyword51632409103">HUAWEI</span>] <strong id="EN-US_TASK_0000001513050182__b1861983996183249">sysname <span class="keyword" id="EN-US_TASK_0000001513050182__keyword12697172152113">DeviceA</span></strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword72963921711">HUAWEI</span>] <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513050182__cmdname12291039201715">commit</span></b></a>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001513050182__keyword1890222513218">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b2053111882119">vlan batch 10 20 30</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword2207182192317">DeviceA</span>] <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513050182__cmdname1053112842119">commit</span></b></a></pre>
<p id="EN-US_TASK_0000001513050182__p1050839490183249"># Configure <span>100GE</span> <span>1/0/1</span>, <span>100GE</span> <span>1/0/2</span>, and <span>100GE</span> <span>1/0/3</span> on <span class="keyword" id="EN-US_TASK_0000001513050182__keyword168500390243">DeviceA</span> as trunk interfaces and add them to corresponding VLANs.</p>
<pre class="screen" id="EN-US_TASK_0000001513050182__screen1724043568183249">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001513050182__keyword19255103832310">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b1943417321183249">interface <span>100ge</span> <span>1/0/1</span></strong>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001513050182__keyword18362191963410">DeviceA</span>-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001513050182__b268894619344">portswitch</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword11925012312">DeviceA</span>-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001513050182__b2135015928183249">port link-type trunk</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword735675210238">DeviceA</span>-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001513050182__b1851002499183249">port trunk allow-pass vlan 10</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword23431355182310">DeviceA</span>-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001513050182__b1729629519183249">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword154385782320">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b1254493490183249">interface <span>100ge</span> <span>1/0/2</span></strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword488872323415">DeviceA</span>-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001513050182__b59884500340">portswitch</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword1688417584232">DeviceA</span>-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001513050182__b305823379183249">port link-type trunk</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword158690072419">DeviceA</span>-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001513050182__b411175813183249">port trunk allow-pass vlan 20</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword45981332418">DeviceA</span>-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001513050182__b1071770354183249">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword153137182416">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b1376199110183249">interface <span>100ge</span> <span>1/0/3</span></strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword16978227143414">DeviceA</span>-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001513050182__b1294695417349">portswitch</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword1242719172414">DeviceA</span>-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001513050182__b94809275183249">port link-type trunk</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword8613111172420">DeviceA</span>-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001513050182__b1992451209183249">port trunk allow-pass vlan 30</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword17506151314248">DeviceA</span>-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001513050182__b2037279441183249">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword15746111824320">DeviceA</span>] <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513050182__cmdname97465180433">commit</span></b></a></pre>
<p id="EN-US_TASK_0000001513050182__p1070920352183249"># Create VLANIF 10, VLANIF 20, and VLANIF 30 and configure IP addresses for them.</p>
<pre class="screen" id="EN-US_TASK_0000001513050182__screen815144030183249">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001513050182__keyword0560121632416">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b1924386088183249">interface vlanif 10</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword5401618162414">DeviceA</span>-Vlanif10] <strong id="EN-US_TASK_0000001513050182__b1757010067183249">ip address 10.1.10.2 24</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword438192302411">DeviceA</span>-Vlanif10] <strong id="EN-US_TASK_0000001513050182__b1075804157183249">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword18761624172411">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b1549232434183249">interface vlanif 20</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword1516102920246">DeviceA</span>-Vlanif20] <strong id="EN-US_TASK_0000001513050182__b2086303519183249">ip address 10.1.20.2 24</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword11800183052413">DeviceA</span>-Vlanif20] <strong id="EN-US_TASK_0000001513050182__b474415856183249">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword34251127216">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b64251721827">interface vlanif 30</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword1842522128">DeviceA</span>-Vlanif30] <strong id="EN-US_TASK_0000001513050182__b34258219211">ip address 10.1.30.2 24</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword742515212214">DeviceA</span>-Vlanif30] <strong id="EN-US_TASK_0000001513050182__b54251125213">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword371312816499">DeviceA</span>] <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513050182__cmdname471312818491">commit</span></b></a></pre>
</p></li><li id="EN-US_TASK_0000001513050182__step2020730830183249"><span id="EN-US_TASK_0000001513050182__cmd2116666152183249">Configure ACL rules.</span><p><p id="EN-US_TASK_0000001513050182__p1831158793183249"># Create advanced ACLs 3001 and 3002 on <span class="keyword" id="EN-US_TASK_0000001513050182__keyword6734111014374">DeviceA</span> to allow packets on network segments 192.168.100.0/24 and 192.168.101.0/24 to pass through. </p>
<pre class="screen" id="EN-US_TASK_0000001513050182__screen2109331807183249">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001513050182__keyword207551814193716">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b1183000789183249">acl 3001</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword6517151623715">DeviceA</span>-acl4-advance-3001] <strong id="EN-US_TASK_0000001513050182__b455151656183249">rule permit ip source 192.168.100.0 0.0.0.255</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword10755131823719">DeviceA</span>-acl4-advance-3001] <strong id="EN-US_TASK_0000001513050182__b796059250183249">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword157881920183715">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b942537811183249">acl 3002</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword1925792353717">DeviceA</span>-acl4-advance-3002] <strong id="EN-US_TASK_0000001513050182__b1552594775183249">rule permit ip source 192.168.101.0 0.0.0.255</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword666414270374">DeviceA</span>-acl4-advance-3002] <strong id="EN-US_TASK_0000001513050182__b208989787183249">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword956514478283">DeviceA</span>] <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513050182__cmdname15651047102819">commit</span></b></a></pre>
</p></li><li id="EN-US_TASK_0000001513050182__step812185975183249"><span id="EN-US_TASK_0000001513050182__cmd1003621493183249">Configure traffic classifiers.</span><p><p id="EN-US_TASK_0000001513050182__p355750284183249"># Create traffic classifiers <strong id="EN-US_TASK_0000001513050182__b4573114775712">c1</strong> and <strong id="EN-US_TASK_0000001513050182__b55318507573">c2</strong> on <span class="keyword" id="EN-US_TASK_0000001513050182__keyword196368171017">DeviceA</span>, and bind <strong id="EN-US_TASK_0000001513050182__b162081210135810">c1</strong> to ACL 3001 and <strong id="EN-US_TASK_0000001513050182__b18192101285814">c2</strong> to ACL 3002.</p>
<pre class="screen" id="EN-US_TASK_0000001513050182__screen1478337514183249">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001513050182__keyword20664175892815">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b1768418547183249">traffic classifier c1</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword142504620294">DeviceA</span>-classifier-c1] <strong id="EN-US_TASK_0000001513050182__b1876111149183249">if-match acl 3001</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword8722161252915">DeviceA</span>-classifier-c1] <strong id="EN-US_TASK_0000001513050182__b1999093779183249">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword1632712662920">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b2073789627183249">traffic classifier c2</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword661191143018">DeviceA</span>-classifier-c2] <strong id="EN-US_TASK_0000001513050182__b1182840120183249">if-match acl 3002</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword1518116103014">DeviceA</span>-classifier-c2] <strong id="EN-US_TASK_0000001513050182__b70177039183249">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword15969121520307">DeviceA</span>] <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513050182__cmdname39691115173017">commit</span></b></a></pre>
</p></li><li id="EN-US_TASK_0000001513050182__step419504586183249"><span id="EN-US_TASK_0000001513050182__cmd424763801183249">Configure traffic behaviors.</span><p><p id="EN-US_TASK_0000001513050182__p783736527183249"># Create traffic behaviors <strong id="EN-US_TASK_0000001513050182__b612042619585">b1</strong> and <strong id="EN-US_TASK_0000001513050182__b1855212814581">b2</strong> on <span class="keyword" id="EN-US_TASK_0000001513050182__keyword179676133520">DeviceA</span> and configure actions that redirect packets to IP addresses 10.1.20.1 and 10.1.30.1.</p>
<pre class="screen" id="EN-US_TASK_0000001513050182__screen1077555699183249">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001513050182__keyword126613463307">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b1076350181183249">traffic behavior b1</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword10182175803013">DeviceA</span>-behavior-b1] <strong id="EN-US_TASK_0000001513050182__b900779866183249">redirect nexthop 10.1.20.1</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword189062233119">DeviceA</span>-behavior-b1] <strong id="EN-US_TASK_0000001513050182__b1557621380183249">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword1483717915313">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b1195569967183249">traffic behavior b2</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword125031215183114">DeviceA</span>-behavior-b2] <strong id="EN-US_TASK_0000001513050182__b969692634183249">redirect nexthop 10.1.30.1</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword176411720133110">DeviceA</span>-behavior-b2] <strong id="EN-US_TASK_0000001513050182__b1621585765183249">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword3733125316343">DeviceA</span>] <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513050182__cmdname16733153203418">commit</span></b></a></pre>
</p></li><li id="EN-US_TASK_0000001513050182__step91133695183249"><span id="EN-US_TASK_0000001513050182__cmd528171554183249">Configure a traffic policy and apply it to an interface.</span><p><p id="EN-US_TASK_0000001513050182__p1976357588183249"># Create a traffic policy <strong id="EN-US_TASK_0000001513050182__b1751386115916">p1</strong> on <span class="keyword" id="EN-US_TASK_0000001513050182__keyword7170412103515">DeviceA</span>, and bind the traffic classifier <strong id="EN-US_TASK_0000001513050182__b19690201805918">c1</strong> to the traffic behavior <strong id="EN-US_TASK_0000001513050182__b15187202211597">b1</strong> and the traffic classifier <strong id="EN-US_TASK_0000001513050182__b1746542419596">c2</strong> to the traffic behavior<strong id="EN-US_TASK_0000001513050182__b146651026195916"> b2</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001513050182__screen996668708183249">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001513050182__keyword7773125814366">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b876546466183249">traffic policy p1</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword85401354377">DeviceA</span>-trafficpolicy-p1] <strong id="EN-US_TASK_0000001513050182__b331184747183249">classifier c1 behavior b1</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword13953131516375">DeviceA</span>-trafficpolicy-p1] <strong id="EN-US_TASK_0000001513050182__b1572469556183249">classifier c2 behavior b2</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword16385142117378">DeviceA</span>-trafficpolicy-p1] <strong id="EN-US_TASK_0000001513050182__b568783213183249">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword51788408496">DeviceA</span>] <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513050182__cmdname19178840104919">commit</span></b></a></pre>
<p id="EN-US_TASK_0000001513050182__p1655674242183249"># Apply traffic policy <strong id="EN-US_TASK_0000001513050182__b149551550105915">p1</strong> to the inbound direction of <span>100GE</span> <span>1/0/1</span>.</p>
<pre class="screen" id="EN-US_TASK_0000001513050182__screen1119909701183249">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001513050182__keyword146913401528">DeviceA</span>] <strong id="EN-US_TASK_0000001513050182__b227634654183249">interface </strong><strong id="EN-US_TASK_0000001513050182__b3535169135316"><span>100ge</span> <span>1/0/1</span></strong>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001513050182__keyword1696516540537">DeviceA</span>-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001513050182__b1775402379183249">traffic-policy p1 inbound</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword6832822935">DeviceA</span>-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001513050182__b18832430234">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001513050182__keyword14415153817318">DeviceA</span>] <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513050182__cmdname134156387310">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001513050182__example567395428175348"><a name="EN-US_TASK_0000001513050182__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p id="EN-US_TASK_0000001513050182__p983647611175348"># Check the traffic classifier configuration.</p>
<pre class="screen" id="EN-US_TASK_0000001513050182__screen135827482175348">&lt;<span class="keyword" id="EN-US_TASK_0000001513050182__keyword3392141742815">DeviceA</span>&gt; <strong id="EN-US_TASK_0000001513050182__b751170756175348">display traffic classifier</strong>
  Traffic Classifier Information:                                                                                                   
    Classifier: c1                                                                                                                  
      Type: OR                                                                                                                      
      Rule(s):                                                                                                                      
        if-match acl 3001                                                                                                           

    Classifier: c2                                                                                                                  
      Type: OR                                                                                                                      
      Rule(s):                                                                                                                      
        if-match acl 3002                                                                                                           

Total classifier number is 2</pre>
<p id="EN-US_TASK_0000001513050182__p485839082175348"># Check the traffic policy configuration.</p>
<pre class="screen" id="EN-US_TASK_0000001513050182__screen514937312175348">&lt;<span class="keyword" id="EN-US_TASK_0000001513050182__keyword169168113415">DeviceA</span>&gt; <strong id="EN-US_TASK_0000001513050182__b332190497175348">display traffic policy</strong>
  Traffic Policy Information:
    Policy: p1
      Classifier: c1
        Type: OR
      Behavior: b1                                                                                                                  
        Redirect:                                                                                                                   
          Redirect nexthop                                                                                                          
          10.1.20.1                                                                                                                 

      Classifier: c2                                                                                                                
        Type: OR                                                                                                                    
      Behavior: b2                                                                                                                  
        Redirect:                                                                                                                   
          Redirect nexthop                                                                                                          
          10.1.30.1

Total policy number is 2</pre>
<p id="EN-US_TASK_0000001513050182__p1249506835175348"># Check the traffic policy application records.</p>
<pre class="screen" id="EN-US_TASK_0000001513050182__screen742316760175348">&lt;<span class="keyword" id="EN-US_TASK_0000001513050182__keyword101451537163611">DeviceA</span>&gt; <strong id="EN-US_TASK_0000001513050182__b1095114097175348">display traffic-policy applied-record</strong>
Total records : 1 
--------------------------------------------------------------------------------     
Policy Type/Name                     Apply Parameter            Slot State          
--------------------------------------------------------------------------------            
p1                                   <span>100GE</span><span>1/0/1</span>(IN)              <span>1</span>    success        
--------------------------------------------------------------------------------  </pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001513050182__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Configuration Scripts</h4><p id="EN-US_TASK_0000001513050182__p1354988653175348"><span class="keyword" id="EN-US_TASK_0000001513050182__keyword178591446134718">DeviceA</span></p>
<pre class="screen" id="EN-US_TASK_0000001513050182__screen1547646530175348">#
sysname <span class="keyword" id="EN-US_TASK_0000001513050182__keyword15301452163915">DeviceA</span>
#
vlan batch 10 20 30
#
acl number 3001
 rule 5 permit ip source 192.168.100.0 0.0.0.255
#
acl number 3002
 rule 5 permit ip source 192.168.101.0 0.0.0.255
#
traffic classifier c1 type or
 if-match acl 3001
#
traffic classifier c2 type or
 if-match acl 3002
#
traffic behavior b1
 redirect nexthop 10.1.20.1
#
traffic behavior b2
 redirect nexthop 10.1.30.1
#
traffic policy p1
 classifier c1 behavior b1 precedence 5
 classifier c2 behavior b2 precedence 10
#
interface Vlanif10
 ip address 10.1.10.2 255.255.255.0
#
interface Vlanif20
 ip address 10.1.20.2 255.255.255.0
#
interface Vlanif30
 ip address 10.1.30.2 255.255.255.0
#
interface <span>100GE</span><span>1/0/1</span>
 port link-type trunk
 port trunk allow-pass vlan 10
 traffic-policy p1 inbound 
#
interface <span>100GE</span><span>1/0/2</span>
 port link-type trunk
 port trunk allow-pass vlan 20
#
interface <span>100GE</span><span>1/0/3</span>
 port link-type trunk
 port trunk allow-pass vlan 30
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_qos_redirect_cfg_0001.html">Redirection Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_qos_redirect_cfg_0006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_qos_redirect_cfg_0008.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>