
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Sticky MAC Address Function">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_port-security_cfg_0007.html">
<meta name="DC.Relation" scheme="URI" content="vrp_port-security_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="vrp_port-security_cfg_0012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Port Security">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Port Security">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Port Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security Protection">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001171962506">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring the Sticky MAC Address Function</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001171962506"></a><a name="EN-US_TASK_0000001171962506"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Sticky MAC Address Function</h1>
<div class="taskbody"><div class="steps"><a name="EN-US_TASK_0000001171962506__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-numbe</span></i>r }</pre>
</p></li><li><span>Change the interface working mode from Layer 3 to Layer 2.</span><p><pre class="screen"><a href="cmdqueryname=portswitch"><b><span class="cmdname">portswitch</span></b></a></pre>
</p></li><li><span>Enable the port security function and set the maximum number of MAC addresses that the interface can learn.</span><p><pre class="screen"><a href="cmdqueryname=port-security+enable"><b><span class="cmdname">port-security enable</span></b></a> [ <strong><span>maximum</span></strong> <i><span class="varname">max-number</span></i> ]</pre>
</p></li><li><span>Enable the sticky MAC address function.</span><p><pre class="screen"><a href="cmdqueryname=port-security+mac-address+sticky"><b><span class="cmdname">port-security mac-address sticky</span></b></a></pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the sticky MAC address function is enabled on an interface, existing dynamic secure MAC address entries and MAC address entries learned subsequently on the interface are converted into sticky MAC address entries.</p>
<p>After the sticky MAC address function is enabled on an interface, sticky MAC address entries will not age even if the <a href="cmdqueryname=port-security+aging-time"><b><span class="cmdname">port-security aging-time</span></b></a> command is configured.</p>
<p>When new sticky MAC address entries are configured or existing sticky MAC address entries are changed, you need to run the <a href="cmdqueryname=save"><b><span class="cmdname">save</span></b></a> command to ensure that the new or changed MAC address entries take effect after the device restarts.</p>
<p>Sticky MAC address entries are saved into a .dtbl, .ztbl, or .ctbl file by running the <a href="cmdqueryname=save"><b><span class="cmdname">save</span></b></a> command. This ensures that sticky MAC address entries will not be lost when the device restarts. The file name must be the same as the name of the system configuration file. For example, if the name of the system configuration file is <strong>test.cfg</strong>, the name of the sticky MAC address entry file must be <strong>test.ctbl</strong>. Otherwise, sticky MAC address entries will fail to recover after the device restarts.</p>
</div></div>
</p></li><li><span>(Optional) Configure a protection action for port security on an interface.</span><p><pre class="screen"><strong><span>port-security protect-action</span></strong> { <strong><span>protect</span></strong> | <strong><span>restrict</span></strong> | <strong><span>error-down</span></strong> }</pre>
</p></li><li><span>(Optional) Add a sticky MAC address entry manually.</span><p><pre class="screen"><a href="cmdqueryname=port-security+mac-address+sticky"><b><span class="cmdname">port-security mac-address sticky</span></b></a> <i><span class="varname">mac-address</span></i> <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i></pre>
</p></li><li><span>Exit the interface view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>(Optional) Delete a sticky MAC address entry.</span><p><pre class="screen"><a href="cmdqueryname=undo+mac-address+sticky"><b><span class="cmdname">undo mac-address sticky</span></b></a> { [ <i><span class="varname">portType</span></i> <i><span class="varname">portNum</span></i> | <i><span class="varname">portName</span></i> ] | [ <strong><span>vlan</span></strong> <i><span class="varname">vlanId</span></i> ] } *</pre>
<p>This command is not supported on the <span>CE6885-LL (low latency mode)</span>.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001171962506__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001171962506__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001171962506__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <strong>display port-security </strong>[ <strong>interface</strong> { <em>interface-type</em><em>interface-number</em> | <em>interface-name</em> } ] command to check port security information.</li><li>Check the port security-related alarms by running the <a href="cmdqueryname=display+trapbuffer"><b><span class="cmdname">display trapbuffer</span></b></a> command or through the NMS.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_port-security_cfg_0007.html">Configuring Port Security
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_port-security_cfg_0008.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_port-security_cfg_0012.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>