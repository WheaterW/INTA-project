
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Understanding ARP-Ping">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_0025.html">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_0027.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ARP">
<meta name="featurename" content="IP Address Conflict Detection">
<meta name="featurename" content="Dynamic ARP">
<meta name="featurename" content="Static ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001130624046">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Understanding ARP-Ping</title>
</head>
<body><a name="EN-US_CONCEPT_0000001130624046"></a><a name="EN-US_CONCEPT_0000001130624046"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Understanding ARP-Ping</h1>
<div><div class="section"><h4 class="sectiontitle">ARP-Ping IP</h4><p>Before configuring an IP address for a device, check whether the IP address is being used by sending ARP request or ICMP request messages. Generally, the ping operation can be used to check whether an IP address is being used. However, if a firewall is configured for the device using the IP address and the firewall is configured not to respond to ping messages, the IP address may be mistakenly considered available. To resolve this problem, configure ARP-Ping IP. ARP messages are Layer 2 protocol messages and, in most cases, can pass through a device that is configured not to respond to ping messages.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001130624046__fig1315213624212"><a name="EN-US_CONCEPT_0000001130624046__fig1315213624212"></a><a name="fig1315213624212"></a><span class="figcap"><b>Figure 1 </b>ARP-Ping IP implementation</span><br><span><img class="vsd" src="figure/en-us_image_0000001130783866.png"></span></div>
<p>As shown in <a href="#EN-US_CONCEPT_0000001130624046__fig1315213624212">Figure 1</a>, DeviceA uses ARP-Ping IP to check whether the IP address 10.1.1.2 is being used. After DeviceA receives an ARP reply message from HostA with the IP address 10.1.1.2, DeviceA displays the MAC address of HostA along with a message indicating that the IP address is being used.</p>
<p>The ARP-Ping IP implementation process is as follows:</p>
<ol><li><p>After IP address 10.1.1.2 is specified using a command on DeviceA, DeviceA broadcasts an ARP request message and starts a timer for ARP reply messages.</p>
</li><li><p>When HostA on the same LAN receives the ARP request message, it finds that the destination IP address in the message is the same as its own IP address and sends an ARP reply message to DeviceA.</p>
</li><li><div class="p">When DeviceA receives the ARP reply message, it compares the source IP address in the message with the IP address specified in the command.<ul><li>If the two IP addresses are the same, DeviceA displays the source MAC address in the ARP reply message along with a message indicating that the IP address is being used. In addition, DeviceA stops the timer for ARP reply messages.</li><li>If the two IP addresses are different, DeviceA discards the ARP reply message and displays a message indicating that the IP address is not being used by any host.</li></ul>
</div>
</li><li>If DeviceA does not receive any ARP reply messages before the timer for ARP reply messages expires, it displays a message indicating that the IP address is not being used by any host.</li></ol>
</div>
<div class="section"><h4 class="sectiontitle">ARP-Ping MAC</h4><p>A host's MAC address is the fixed address of the NIC on the host. It does not usually need to be configured manually; however, there are exceptions. For example, if a device has multiple interfaces and the manufacturer does not specify MAC addresses for these interfaces, MAC addresses must be configured. In VRRP scenarios, a virtual MAC address must be configured for a VRRP group. Before configuring a MAC address, use ARP-Ping MAC to check whether the MAC address is being used.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001130624046__fig538151217479"><a name="EN-US_CONCEPT_0000001130624046__fig538151217479"></a><a name="fig538151217479"></a><span class="figcap"><b>Figure 2 </b>ARP-Ping MAC implementation</span><br><span><img class="vsd" src="figure/en-us_image_0000001176743527.png"></span></div>
<p>As shown in <a href="#EN-US_CONCEPT_0000001130624046__fig538151217479">Figure 2</a>, DeviceA uses ARP-Ping MAC to check whether the MAC address <em>XXXX-XXXX-XXXX</em> is being used. After receiving ICMP Echo reply messages from all hosts on the network, DeviceA displays the IP address of the host with the MAC address <em>XXXX-XXXX-XXXX</em> along with a message indicating that the MAC address is being used.</p>
<p>The ARP-Ping MAC implementation process is as follows:</p>
<ol><li><p>After the MAC address <em>XXXX-XXXX-XXXX</em> is specified using a command on DeviceA, DeviceA broadcasts an ICMP Echo request message and starts a timer for ICMP Echo reply messages.</p>
</li><li><p>After receiving the ICMP Echo request message, all the other hosts on the same LAN send ICMP Echo reply messages to DeviceA.</p>
</li><li><div class="p">After DeviceA receives an ICMP Echo reply message from a host, DeviceA compares the source MAC address in the message with the MAC address specified in the command.<ul><li>If the two MAC addresses are the same, DeviceA displays the source IP address in the ICMP Echo reply message along with a message indicating that the MAC address is being used. In addition, DeviceA stops the timer for ICMP Echo reply messages.</li><li>If the two MAC addresses are different, DeviceA discards the ICMP Echo reply message and displays a message indicating that the MAC address is not being used by any host.</li></ul>
</div>
</li><li>If DeviceA does not receive any ICMP Echo reply messages before the timer for ICMP Echo reply messages expires, it displays a message indicating that the MAC address is not being used by any host.</li></ol>
</div>
<div class="section"><h4 class="sectiontitle">Application Scenarios</h4><p>ARP-Ping applies to directly connected Ethernet LANs or Layer 2 Ethernet VPNs. ARP-Ping checks whether an IP or MAC address to be configured is being used, preventing address conflicts.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_arp_cfg_0025.html">Configuring ARP-Ping
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_arp_cfg_0027.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>