
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Control VLAN">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_erps_cfg_0017.html">
<meta name="DC.Relation" scheme="URI" content="vrp_erps_cfg_0018.html">
<meta name="DC.Relation" scheme="URI" content="vrp_erps_cfg_0020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ERPS">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ERPS">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="ERPS">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001188084225">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring a Control VLAN</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001188084225"></a><a name="EN-US_TASK_0000001188084225"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Control VLAN</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001188084225__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_context1677625172748"><p id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_p1505424293183241">Control and data VLANs have different functions. On an ERPS ring, a control VLAN is used to transmit only R-APS PDUs but not user service packets, which improves ERPS security. All the devices on an ERPS ring must be configured with the same control VLAN. Different ERPS rings cannot use the same control VLAN.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001188084225__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_steps10132325172748"><li id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_step10891943114719"><span id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmd78904364714">Enter the system view.</span><p><pre class="screen" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_screen81695451014"><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmdname111790421018">system-view</span></b></a></pre>
</p></li><li id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_step15643439151014"><span id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmd19643193912107">Enter the view of a created ERPS ring.</span><p><pre class="screen" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_screen10305102617118"><a href="cmdqueryname=erps+ring"><b><span class="cmdname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmdname1192792814183241">erps ring</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_varname1147594516183241">ring-id</span></i></pre>
</p></li><li id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_step883045311138"><span id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmd383035310137">Configure a control VLAN for the ERPS ring.</span><p><pre class="screen" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_screen36963501158"><a href="cmdqueryname=control-vlan"><b><span class="cmdname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmdname1941060856183241">control-vlan</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_varname1069547777183241">vlan-id</span></i>   </pre>
</p><p><div class="note" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_note196323411413"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_ul117782101173"><li id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_li16245152911713">If you run the <a href="cmdqueryname=control-vlan"><b><span class="cmdname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmdname162149446173">control-vlan</span></b></a> command multiple times, only the latest configuration takes effect.</li><li id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_li159431845171712">The control VLAN specified by the <i><span class="varname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_varname66939253172">vlan-id</span></i> parameter must be a VLAN that has not been created or used.</li><li id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_li1318712316182">If ports have been added to the ERPS ring, the control VLAN cannot be changed. To delete a configured control VLAN, you must run the <a href="cmdqueryname=undo+erps+ring"><b><span class="cmdname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmdname19838111181814">undo erps ring</span></b></a> command in the interface view or the <a href="cmdqueryname=undo+port"><b><span class="cmdname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmdname383881110189">undo port</span></b></a> command in the ERPS ring view to remove the ports from the ERPS ring, and then run the <a href="cmdqueryname=undo+control-vlan"><b><span class="cmdname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmdname18386111181">undo control-vlan</span></b></a> command to delete the control VLAN.</li><li id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_li1557463631817">After a control VLAN is created, the <a href="cmdqueryname=vlan+batch"><b><span class="cmdname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmdname15846193641818">vlan batch</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_varname11846936181812">vlan-id1</span></i> [ <strong><span id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmdparmname784618366187">to</span></strong> <i><span class="varname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_varname28461836191816">vlan-id2</span></i> ] &amp;&lt;1-10&gt; command is automatically displayed in the configuration file.</li><li id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_li4692184951817">After a port is added to an ERPS ring configured with a control VLAN, the port is automatically added to the control VLAN. If the port is a trunk port, the <a href="cmdqueryname=port+trunk+allow-pass+vlan"><b><span class="cmdname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmdname129048491183">port trunk allow-pass vlan</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_varname1690417499188">vlan-id</span></i> command is automatically displayed in the view of the port in the configuration file. If the port is a hybrid port, the <a href="cmdqueryname=port+hybrid+tagged+vlan"><b><span class="cmdname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmdname1790494941812">port hybrid tagged vlan</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_varname5904349151812">vlan-id</span></i> command is automatically displayed in the view of the port in the configuration file.</li></ul>
</div></div>
</p></li><li id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_step93927616581"><span id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmd43922612584">Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_screen1863683117487"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001188084225__en-us_task_0000001187933307_cmdname763613194819">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_erps_cfg_0017.html">Configuring ERPSv2
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_erps_cfg_0018.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_erps_cfg_0020.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>