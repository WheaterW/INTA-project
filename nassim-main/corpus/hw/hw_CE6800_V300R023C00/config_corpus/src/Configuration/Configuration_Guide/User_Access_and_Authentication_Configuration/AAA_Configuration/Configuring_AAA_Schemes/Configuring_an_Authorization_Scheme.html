
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an Authorization Scheme">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0011.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0012.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0014.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="AAA">
<meta name="featurename" content="AD">
<meta name="featurename" content="HWTACACS">
<meta name="featurename" content="LDAP">
<meta name="featurename" content="RADIUS">
<meta name="featurename" content="Local User">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="AAA">
<meta name="featurename" content="AD">
<meta name="featurename" content="HWTACACS">
<meta name="featurename" content="LDAP">
<meta name="featurename" content="RADIUS">
<meta name="featurename" content="Local User">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featurename" content="AAA">
<meta name="featurename" content="AD">
<meta name="featurename" content="HWTACACS">
<meta name="featurename" content="LDAP">
<meta name="featurename" content="RADIUS">
<meta name="featurename" content="Local User">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513035610">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring an Authorization Scheme</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001513035610"></a><a name="EN-US_TASK_0000001513035610"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an Authorization Scheme</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001513035610__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>An authorization scheme defines the authorization methods used for user authorization and the order in which authorization methods take effect. Multiple authorization methods can be used in an authorization scheme to prevent authorization failures caused by a single authorization method failing to respond. RADIUS combines authentication and authorization, which cannot be separated. Authorization information is carried in the Access-Accept packet returned by the server. If RADIUS authentication is used, no authorization scheme needs to be configured.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>For device or network security purposes, you are advised not to set the authorization mode to non-authorization.</li><li><p>When local authorization is used, authorization succeeds only when the user access mode matches the access type configured for the local user.</p>
</li><li>Authorization provided by the authentication server takes precedence over authorization in the authentication domain. That is, when the attributes authorized by the authentication server and authentication domain conflict, the attributes authorized by the authentication server take precedence. Otherwise, all attributes take effect.</li><li>Based on the authentication method (local authentication, remote server authentication, or local authentication after remote server authentication), the administrator privilege level is follows:<ul><li>If local authentication is used, the following administrator privilege levels can be configured, which are listed in descending order of priority:<ul><li>Local user privilege level configured using the <strong>local-user </strong><em>user-name</em><strong> privilege level </strong><em>level</em> command</li><li>Administrator privilege level configured using the <strong>admin-user privilege level</strong> <em>level</em> command in the service scheme view</li><li>User privilege level configured using the <strong>user privilege</strong> command in the VTY user interface view</li></ul>
</li><li>If remote authentication is used, the administrator privilege level is in the following descending order of priority:<ul><li><p>User privilege level sent from the server to the device after the authentication is successful</p>
</li><li><p>Administrator privilege level configured using the <strong>admin-user privilege level</strong> <em>level</em> command in the service scheme view</p>
</li><li><p>User privilege level configured using the <strong>user privilege</strong> command in the VTY user interface view</p>
</li></ul>
</li><li>If both remote authentication and local authentication are configured for a user and remote authentication takes precedence over local authentication: The administrator privilege level is that used during remote authentication. If the remote server does not respond, local authentication is used. In this case, the administrator privilege level is the local user privilege level configured using the <strong>local-user </strong><em>user-name</em><strong> privilege level </strong><em>level</em> command.</li></ul>
</li></ul>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001513035610__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the AAA view.</span><p><pre class="screen"><a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></pre>
</p></li><li><span>Create an authorization scheme and enter the authorization scheme view.</span><p><pre class="screen"><strong><a href="cmdqueryname=authorization-scheme"><b><span class="cmdname">authorization-scheme</span></b></a></strong> <i><span class="varname">authorization-scheme-name</span></i></pre>
</p></li><li><span>Configure an authorization method.</span><p><pre class="screen"><a href="cmdqueryname=authorization-mode"><b><span class="cmdname">authorization-mode </span></b></a>{ <strong><strong><span>hwtacacs</span></strong></strong> | <strong><strong><span>if-authenticated</span></strong></strong> | { <strong><strong><span>local</span></strong></strong> | <strong><strong><span>local-case</span></strong></strong> } | <strong>ldap</strong> } <sup>*</sup> [ <strong><strong><span>none</span></strong></strong> ]</pre>
<p>If <strong>local</strong> is specified, user names are case-insensitive. If <strong>local-case</strong> is specified, user names are case-sensitive.</p>
</p></li><li><span>(Optional) Configure command authorization based on user privilege levels.</span><p><pre class="screen"><a href="cmdqueryname=authorization-cmd"><b><span class="cmdname">authorization-cmd</span></b></a> [ <i><span class="varname">privilege-level</span></i> ] { <strong><span>hwtacacs</span></strong> | <strong><span>local</span></strong> } <sup>*</sup>[ <strong>none</strong> ]</pre>
<p>By default, command authorization is not configured for users at privilege levels 0 to 3.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>Only the HWTACACS server supports command authorization.</li><li>After the authorization scheme containing command authorization is applied in the administrator view, executing the <strong>undo authorization-cmd</strong> command will cause the administrator unable to execute any command except the <strong>quit</strong> command. In this case, the administrator needs to log in again.</li></ul>
</div></div>
</p></li><li><span>(Optional) Configure the policy used when command authorization fails.</span><p><pre class="screen"><a href="cmdqueryname=authorization-cmd+no-response-policy"><b><span class="cmdname">authorization-cmd no-response-policy</span></b></a> { <strong>online</strong> | <strong>offline</strong> [ <strong>max-times</strong> <em>max-times-value</em> ] }</pre>
<p>By default, users are kept online if they fail command authorization.</p>
</p></li><li><span>(Optional) Return to the system view and enable the bypass authorization function and bypass command authorization function.</span><p><ul><li>Set the bypass authorization time.<pre class="screen"><a href="cmdqueryname=aaa-author-bypass"><b><span class="cmdname">aaa-author-bypass</span></b></a> <strong><span>enable</span></strong> <strong><span>time</span></strong> <i><span class="varname">time-value</span></i></pre>
<p>By default, the bypass authorization function is disabled.</p>
</li><li>Set the bypass command authorization time.<pre class="screen"><a href="cmdqueryname=aaa-author-cmd-bypass"><b><span class="cmdname">aaa-author-cmd-bypass</span></b></a> <strong><span>enable</span></strong> <strong><span>time</span></strong> <i><span class="varname">time-value</span></i></pre>
<p>By default, the bypass command authorization function is disabled.</p>
</li></ul>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001513035610__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513035610__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001513035610__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <strong>display authorization-scheme </strong>[ <strong>name</strong> <em>authorization-scheme-name</em> ] command to check the authorization scheme configuration.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_aaa_cfg_0011.html">Configuring AAA Schemes
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_aaa_cfg_0012.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_aaa_cfg_0014.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>