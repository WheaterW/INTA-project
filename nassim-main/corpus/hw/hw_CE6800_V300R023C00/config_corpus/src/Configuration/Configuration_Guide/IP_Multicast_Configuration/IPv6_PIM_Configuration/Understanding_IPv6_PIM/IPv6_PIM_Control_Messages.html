
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="IPv6 PIM Control Messages">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv6pim_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv6pim_cfg_0004.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PIMv6">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIMv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIMv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001589284989">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>IPv6 PIM Control Messages</title>
</head>
<body><a name="EN-US_CONCEPT_0000001589284989"></a><a name="EN-US_CONCEPT_0000001589284989"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">IPv6 PIM Control Messages</h1>
<div><p>IPv6 PIM <span class="keyword">device</span>s exchange PIM control messages to implement multicast routing. You are advised to understand IPv6 PIM control messages based on actual scenarios.</p>
<p>IPv6 PIM control messages are encapsulated in IP packets, as shown in <a href="#EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300501">Figure 1</a>.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300501"><a name="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300501"></a><a name="fig_dc_vrp_multicast_feature_300501"></a><span class="figcap"><b>Figure 1 </b>Encapsulation format of an IPv6 PIM control message</span><br><span><img class="vsd" src="figure/en-us_image_0000001589190345.png" width="NaN" height="NaN"></span><br></div>
<p>In the header of an IP packet that contains a PIM message, the protocol type field is set to 103.</p>
<p>The destination address field in the IP header identifies destination receivers of the PIM message. The destination address can be either a unicast address or a multicast address.</p>
<div class="section"><h4 class="sectiontitle">PIM Control Message Types</h4><p>All IPv6 PIM control messages use the same header format, as shown in <a href="#EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300502">Figure 2</a>.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300502"><a name="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300502"></a><a name="fig_dc_vrp_multicast_feature_300502"></a><span class="figcap"><b>Figure 2 </b>Header format of an IPv6 PIM control message</span><br><span><img class="vsd" src="figure/en-us_image_0000001589285073.png" width="NaN" height="NaN"></span></div>
<p>In IPv6 PIM messages, unicast and multicast addresses are encapsulated in encoding formats, for example, group addresses in the Encoded-Group format, source addresses in the Encoded-Source format, and BSR addresses in the Encoded-Unicast format. The length of the address that can be encoded and encapsulated is variable, depending on the supported protocol type.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Fields in a PIM control message</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="30.930000000000003%" id="mcps1.3.6.5.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="7.5200000000000005%" id="mcps1.3.6.5.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="61.550000000000004%" id="mcps1.3.6.5.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="30.930000000000003%" headers="mcps1.3.6.5.2.4.1.1 "><p>Version</p>
</td>
<td class="cellrowborder" valign="top" width="7.5200000000000005%" headers="mcps1.3.6.5.2.4.1.2 "><p>4 bits</p>
</td>
<td class="cellrowborder" valign="top" width="61.550000000000004%" headers="mcps1.3.6.5.2.4.1.3 "><p>IPv6 PIM version. The value is 2.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="30.930000000000003%" headers="mcps1.3.6.5.2.4.1.1 "><p>Type</p>
</td>
<td class="cellrowborder" valign="top" width="7.5200000000000005%" headers="mcps1.3.6.5.2.4.1.2 "><p>4 bits</p>
</td>
<td class="cellrowborder" valign="top" width="61.550000000000004%" headers="mcps1.3.6.5.2.4.1.3 "><div class="p">Message type. The options are as follows:<ul><li><p>0: <a href="#EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300502">Hello</a></p>
</li><li><p>1: <a href="#EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300503">Register</a></p>
</li><li><p>2: <a href="#EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300504">Register-Stop</a></p>
</li><li><p>3: <a href="#EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300505">Join/Prune</a></p>
</li><li><p>4: <a href="#EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300506">Bootstrap</a></p>
</li><li><p>5: <a href="#EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300507">Assert</a></p>
</li><li>9: <a href="#EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300510">Advertisement</a></li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="30.930000000000003%" headers="mcps1.3.6.5.2.4.1.1 "><p>Reserved</p>
</td>
<td class="cellrowborder" valign="top" width="7.5200000000000005%" headers="mcps1.3.6.5.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="61.550000000000004%" headers="mcps1.3.6.5.2.4.1.3 "><p>Reserved field. This field is set to 0 when the message is sent and is not processed when the message is received.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="30.930000000000003%" headers="mcps1.3.6.5.2.4.1.1 "><p>Checksum</p>
</td>
<td class="cellrowborder" valign="top" width="7.5200000000000005%" headers="mcps1.3.6.5.2.4.1.2 "><p>16 bits</p>
</td>
<td class="cellrowborder" valign="top" width="61.550000000000004%" headers="mcps1.3.6.5.2.4.1.3 "><p>Checksum.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300502"><a name="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300502"></a><a name="section_dc_vrp_multicast_feature_300502"></a><h4 class="sectiontitle">Hello Messages</h4><p>IPv6 PIM devices periodically exchange Hello messages through all PIM interfaces to discover IPv6 PIM neighbors and maintain neighbor relationships.</p>
<p>In an IP packet that carries a Hello message, the source address is a local interface's address, the destination address is FF02::d, and the TTL value is 1. Hello messages are sent in multicast mode. <a href="#EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300503">Figure 3</a> shows the format of a Hello message.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300503"><a name="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300503"></a><a name="fig_dc_vrp_multicast_feature_300503"></a><span class="figcap"><b>Figure 3 </b>Hello message format</span><br><span><img class="vsd" src="figure/en-us_image_0000001538765218.png" width="NaN" height="NaN"></span></div>
<p>Hello messages contain Hello Option fields, whose format is shown in <a href="#EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300504">Figure 4</a>.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300504"><a name="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300504"></a><a name="fig_dc_vrp_multicast_feature_300504"></a><span class="figcap"><b>Figure 4 </b>Hello Option field format</span><br><span><img class="vsd" src="figure/en-us_image_0000001589525081.png" width="NaN" height="NaN"></span></div>
<p><a href="#EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300502">Table 2</a> shows the fields in a Hello message.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300502"></a><a name="tab_dc_vrp_multicast_feature_300502"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300502" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Fields in a Hello message</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="16.46%" id="mcps1.3.7.8.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="9.29%" id="mcps1.3.7.8.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="74.25%" id="mcps1.3.7.8.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="16.46%" headers="mcps1.3.7.8.2.4.1.1 "><p>Type</p>
</td>
<td class="cellrowborder" valign="top" width="9.29%" headers="mcps1.3.7.8.2.4.1.2 "><p>4 bits</p>
</td>
<td class="cellrowborder" valign="top" width="74.25%" headers="mcps1.3.7.8.2.4.1.3 "><p>Message type. The value is 0.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.46%" headers="mcps1.3.7.8.2.4.1.1 "><p>Option Type</p>
</td>
<td class="cellrowborder" valign="top" width="9.29%" headers="mcps1.3.7.8.2.4.1.2 "><p>2 bytes</p>
</td>
<td class="cellrowborder" valign="top" width="74.25%" headers="mcps1.3.7.8.2.4.1.3 "><p>Parameter type.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.46%" headers="mcps1.3.7.8.2.4.1.1 "><p>Option Length</p>
</td>
<td class="cellrowborder" valign="top" width="9.29%" headers="mcps1.3.7.8.2.4.1.2 "><p>2 bytes</p>
</td>
<td class="cellrowborder" valign="top" width="74.25%" headers="mcps1.3.7.8.2.4.1.3 "><p>Length of the Option Value field.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.46%" headers="mcps1.3.7.8.2.4.1.1 "><p>Option Value</p>
</td>
<td class="cellrowborder" valign="top" width="9.29%" headers="mcps1.3.7.8.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="74.25%" headers="mcps1.3.7.8.2.4.1.3 "><p>Parameter value.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p><a href="#EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300503">Table 3</a> describes the valid values of the Option Type field.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300503"></a><a name="tab_dc_vrp_multicast_feature_300503"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300503" frame="border" border="1" rules="all"><caption><b>Table 3 </b>Valid values of Option Type</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.61%" id="mcps1.3.7.10.2.3.1.1" liSelected="liSelected"><p>Option Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="66.39%" id="mcps1.3.7.10.2.3.1.2" liSelected="liSelected"><p>Option Value</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.61%" headers="mcps1.3.7.10.2.3.1.1 "><p>1</p>
</td>
<td class="cellrowborder" valign="top" width="66.39%" headers="mcps1.3.7.10.2.3.1.2 "><p>Holdtime: timeout period during which a neighbor remains in the reachable state. If no Hello message is received within the timeout period, the neighbor is considered unreachable.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.61%" headers="mcps1.3.7.10.2.3.1.1 "><p>2</p>
</td>
<td class="cellrowborder" valign="top" width="66.39%" headers="mcps1.3.7.10.2.3.1.2 "><div class="p">The field consists of the following parts:<ul><li>LAN Prune Delay: delay in transmitting Prune messages on a shared network segment.</li><li>Override Interval: interval for overriding a prune action on a shared network segment.</li><li>T: capability of suppressing Join messages.</li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.61%" headers="mcps1.3.7.10.2.3.1.1 "><p>19</p>
</td>
<td class="cellrowborder" valign="top" width="66.39%" headers="mcps1.3.7.10.2.3.1.2 "><p>DR Priority: priority of a <span class="keyword">device</span> interface, used to run for a DR. The higher the priority, the higher the probability that the interface becomes a DR.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.61%" headers="mcps1.3.7.10.2.3.1.1 "><p>20</p>
</td>
<td class="cellrowborder" valign="top" width="66.39%" headers="mcps1.3.7.10.2.3.1.2 "><p>Generation ID: a random number carried in the Hello message, indicating the current neighbor status. If the neighbor status changes, the random number is updated. When a <span class="keyword">device</span> detects that the Hello messages received from an upstream neighbor contain different Generation IDs, the device determines that the upstream neighbor is down or the status of the upstream neighbor has changed.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.61%" headers="mcps1.3.7.10.2.3.1.1 "><p>21</p>
</td>
<td class="cellrowborder" valign="top" width="66.39%" headers="mcps1.3.7.10.2.3.1.2 "><p>State Refresh Capable: interval for refreshing neighbor status.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.61%" headers="mcps1.3.7.10.2.3.1.1 "><p>24</p>
</td>
<td class="cellrowborder" valign="top" width="66.39%" headers="mcps1.3.7.10.2.3.1.2 "><p>Address List: PIM interface's secondary address list.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300503"><a name="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300503"></a><a name="section_dc_vrp_multicast_feature_300503"></a><h4 class="sectiontitle">Register Messages</h4><p>When a multicast source becomes active on an IPv6 PIM-SM network, the corresponding source DR sends a Register message to register with the RP.</p>
<p>In an IP packet that carries a Register message, the source address is the address of a source DR, and the destination address is the RP address. The packet is sent in unicast mode.</p>
<p><a href="#EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300505">Figure 5</a> shows the format of a Register message.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300505"><a name="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300505"></a><a name="fig_dc_vrp_multicast_feature_300505"></a><span class="figcap"><b>Figure 5 </b>Register message format</span><br><span><img class="vsd" src="figure/en-us_image_0000001538445510.png" width="NaN" height="NaN"></span></div>
<p><a href="#EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300504">Table 4</a> describes the fields in a Register message.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300504"></a><a name="tab_dc_vrp_multicast_feature_300504"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300504" frame="border" border="1" rules="all"><caption><b>Table 4 </b>Fields in a Register message</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="17.89%" id="mcps1.3.8.7.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="9.6%" id="mcps1.3.8.7.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="72.50999999999999%" id="mcps1.3.8.7.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="17.89%" headers="mcps1.3.8.7.2.4.1.1 "><p>Type</p>
</td>
<td class="cellrowborder" valign="top" width="9.6%" headers="mcps1.3.8.7.2.4.1.2 "><p>4 bits</p>
</td>
<td class="cellrowborder" valign="top" width="72.50999999999999%" headers="mcps1.3.8.7.2.4.1.3 "><p>Message type. The value is 1.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.89%" headers="mcps1.3.8.7.2.4.1.1 "><p>B</p>
</td>
<td class="cellrowborder" valign="top" width="9.6%" headers="mcps1.3.8.7.2.4.1.2 "><p>1 bit</p>
</td>
<td class="cellrowborder" valign="top" width="72.50999999999999%" headers="mcps1.3.8.7.2.4.1.3 "><p>Border bit.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.89%" headers="mcps1.3.8.7.2.4.1.1 "><p>N</p>
</td>
<td class="cellrowborder" valign="top" width="9.6%" headers="mcps1.3.8.7.2.4.1.2 "><p>1 bit</p>
</td>
<td class="cellrowborder" valign="top" width="72.50999999999999%" headers="mcps1.3.8.7.2.4.1.3 "><p>Null-Register bit.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.89%" headers="mcps1.3.8.7.2.4.1.1 "><p>Reserved2</p>
</td>
<td class="cellrowborder" valign="top" width="9.6%" headers="mcps1.3.8.7.2.4.1.2 "><p>30 bits</p>
</td>
<td class="cellrowborder" valign="top" width="72.50999999999999%" headers="mcps1.3.8.7.2.4.1.3 "><p>Reserved field. This field is set to 0 when the message is sent and is not processed when the message is received.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.89%" headers="mcps1.3.8.7.2.4.1.1 "><p>Multicast Data Packet</p>
</td>
<td class="cellrowborder" valign="top" width="9.6%" headers="mcps1.3.8.7.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="72.50999999999999%" headers="mcps1.3.8.7.2.4.1.3 "><p>Multicast data packet. Upon receipt of a multicast data packet, a source DR encapsulates it in a Register message and sends the message to the RP. After decapsulating the message, the RP learns the (S, G) information of the multicast data packet.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>A multicast source can send data to multiple multicast groups, and therefore the source DR must send Register messages to the RP of each target multicast group. A Register message can carry only one multicast data packet. Therefore, a Register message can carry only one (S, G) entry.</p>
<p>In the register-suppression period, the source DR sends Null-Register messages to notify the RP of the fact that the source is still active. In a Null-Register message, the Multicast Data Packet field contains only the IP header of the multicast data packet, and the header consists of such information as the multicast source address and multicast group address. After the register-suppression times out, the DR re-encapsulates multicast data packets in Register messages.</p>
</div>
<div class="section" id="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300504"><a name="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300504"></a><a name="section_dc_vrp_multicast_feature_300504"></a><h4 class="sectiontitle">Register-Stop Messages</h4><div class="p">On an IPv6 PIM-SM network, an RP sends Register-Stop messages to a source DR in the following scenarios:<ul><li><p>Receivers no longer request a multicast group's data through the RP.</p>
</li><li><p>The RP no longer serves a multicast group.</p>
</li><li><p>The multicast data forwarding path has been switched from the RPT to the SPT.</p>
</li></ul>
</div>
<p>After receiving a Register-Stop message, the source DR stops using Register messages to encapsulate multicast data packets and enters the register-suppression state.</p>
<p>In an IP packet that carries a Register-Stop message, the source address is the RP address, and the destination address is the source DR's address. The packet is sent in unicast mode. <a href="#EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300506">Figure 6</a> shows the format of a Register-Stop message.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300506"><a name="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300506"></a><a name="fig_dc_vrp_multicast_feature_300506"></a><span class="figcap"><b>Figure 6 </b>Register-Stop message format</span><br><span><img class="vsd" src="figure/en-us_image_0000001589285081.png" width="NaN" height="NaN"></span></div>
<p><a href="#EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300505">Table 5</a> describes the fields in a Register-Stop message.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300505"></a><a name="tab_dc_vrp_multicast_feature_300505"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300505" frame="border" border="1" rules="all"><caption><b>Table 5 </b>Fields in a Register-Stop message</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="31.209999999999997%" id="mcps1.3.9.7.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="9.049999999999999%" id="mcps1.3.9.7.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="59.74%" id="mcps1.3.9.7.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="31.209999999999997%" headers="mcps1.3.9.7.2.4.1.1 "><p>Type</p>
</td>
<td class="cellrowborder" valign="top" width="9.049999999999999%" headers="mcps1.3.9.7.2.4.1.2 "><p>4 bits</p>
</td>
<td class="cellrowborder" valign="top" width="59.74%" headers="mcps1.3.9.7.2.4.1.3 "><p>Message type. The value is 2.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.209999999999997%" headers="mcps1.3.9.7.2.4.1.1 "><p>Group Address (Encoded-Group format) </p>
</td>
<td class="cellrowborder" valign="top" width="9.049999999999999%" headers="mcps1.3.9.7.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="59.74%" headers="mcps1.3.9.7.2.4.1.3 "><p>Multicast group address G.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.209999999999997%" headers="mcps1.3.9.7.2.4.1.1 "><p>Source Address (Encoded-Unicast format)</p>
</td>
<td class="cellrowborder" valign="top" width="9.049999999999999%" headers="mcps1.3.9.7.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="59.74%" headers="mcps1.3.9.7.2.4.1.3 "><p>Multicast source address S.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>An RP can serve multiple multicast groups, and a multicast group can receive data from multiple sources. Therefore, an RP may have multiple (S, G) entries registered at the same time.</p>
<p>A Register-Stop message can carry only one (S, G) entry. When an RP sends a Register-Stop message to a source DR, only one (S, G) entry can be deregistered.</p>
<p>After receiving the Register-Stop message carrying an (S, G) entry, the source DR stops encapsulating packets for this (S, G) entry, but it still encapsulates the packets sent from the source S to other multicast groups in Register messages.</p>
</div>
<div class="section" id="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300505"><a name="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300505"></a><a name="section_dc_vrp_multicast_feature_300505"></a><h4 class="sectiontitle">Join/Prune Messages</h4><p>A Join/Prune message can contain both Join and Prune information. A Join/Prune message that contains only Join information is called a Join message. A Join/Prune message that contains only Prune information is called a Prune message.</p>
<ul><li><p>When an IPv6 PIM device no longer has multicast receivers downstream, it sends a Prune message through its upstream interfaces to instruct the upstream devices to stop forwarding packets to the network segment on which the IPv6 PIM device resides.</p>
</li><li><p>When a receiver starts to require data from an IPv6 PIM-SM network, the receiver DR sends a Join message through the RPF interface pointing to the RP to instruct the upstream neighbor to forward packets to the network segment. The Join message is sent upstream hop by hop to set up an RPT.</p>
</li><li><p>When an RP triggers an SPT switchover, the RP sends a Join message through the RPF interface pointing to the source to instruct the upstream neighbor to forward packets to the network segment. The Join message is sent upstream hop by hop to set up an MDT from the RP to the source.</p>
</li><li><p>When a receiver DR triggers an SPT switchover, the DR sends a Join message through the RPF interface pointing to the source to instruct the upstream neighbor to forward packets to the network segment. The Join message is sent upstream hop by hop to set up an SPT.</p>
</li><li><p>An IPv6 PIM shared network segment may be connected to a downstream interface and multiple upstream interfaces. If an upstream interface sends a Prune message, but other upstream interfaces still require multicast packets, these interfaces that require multicast packets must send Join messages within the override-interval. Otherwise, the downstream interface responsible for forwarding packets on the network segment performs the prune action. On a multicast network, if IPv6 PIM is enabled on user-side interfaces, the PIM DR determines the sending of Join messages. This is because only the PIM DR has an outbound interface list and is eligible to send Join messages.</p>
<p>As shown in <a href="#EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300509">Figure 7</a>, Port 1 on <span class="keyword">Device</span>A is a downstream interface, and Port 2 on <span class="keyword">Device</span>B and Port 3 on <span class="keyword">Device</span>C are upstream interfaces. If <span class="keyword">Device</span>B sends a Prune message through Port 2, Port 3 of <span class="keyword">Device</span>C and Port 1 of <span class="keyword">Device</span>A will receive this message. If <span class="keyword">Device</span>C still wants to receive the multicast data of the group, <span class="keyword">Device</span>C must send a Join message within the override-interval. This message will notify Port 1 of <span class="keyword">Device</span>A that a downstream <span class="keyword">device</span> still wants to receive the multicast data. In this case, <span class="keyword">Device</span>A does not perform the prune action. </p>
<div class="fignone" id="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300509"><a name="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300509"></a><a name="fig_dc_vrp_multicast_feature_300509"></a><span class="figcap"><b>Figure 7 </b>Join/Prune messages on a PIM shared network segment</span><br><span><img class="vsd" src="figure/en-us_image_0000001538765222.png" width="NaN" height="NaN"></span></div>
</li></ul>
<p>In an IP packet that carries a Join/Prune message, the source address is a local interface's address, the destination address is FF02::d, and the TTL value is 1. The packet is sent in multicast mode. <a href="#EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300507">Figure 8</a> shows the format of the message.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300507"><a name="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300507"></a><a name="fig_dc_vrp_multicast_feature_300507"></a><span class="figcap"><b>Figure 8 </b>Join/Prune message format</span><br><span><img class="vsd" src="figure/en-us_image_0000001589525089.png" width="NaN" height="NaN"></span></div>
<p><a href="#EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300508">Figure 9</a> shows the format of the Group J/P Record field.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300508"><a name="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300508"></a><a name="fig_dc_vrp_multicast_feature_300508"></a><span class="figcap"><b>Figure 9 </b>Format of the Group J/P Record field</span><br><span><img class="vsd" src="figure/en-us_image_0000001538445514.png" width="NaN" height="NaN"></span></div>
<p><a href="#EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300506">Table 6</a> describes the fields in a Join/Prune message.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300506"></a><a name="tab_dc_vrp_multicast_feature_300506"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300506" frame="border" border="1" rules="all"><caption><b>Table 6 </b>Fields in a Join/Prune message</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="37.169999999999995%" id="mcps1.3.10.9.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="12.01%" id="mcps1.3.10.9.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50.82%" id="mcps1.3.10.9.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="37.169999999999995%" headers="mcps1.3.10.9.2.4.1.1 "><p>Type</p>
</td>
<td class="cellrowborder" valign="top" width="12.01%" headers="mcps1.3.10.9.2.4.1.2 "><p>4 bits</p>
</td>
<td class="cellrowborder" valign="top" width="50.82%" headers="mcps1.3.10.9.2.4.1.3 "><p>Message type. The value is 3.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="37.169999999999995%" headers="mcps1.3.10.9.2.4.1.1 "><p>Upstream Neighbor Address (Encoded-Unicast format)</p>
</td>
<td class="cellrowborder" valign="top" width="12.01%" headers="mcps1.3.10.9.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="50.82%" headers="mcps1.3.10.9.2.4.1.3 "><p>Address of the upstream neighbor (address of the downstream interface that performs the Join or Prune action on the <span class="keyword">device</span> that receives the Join/Prune message).</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="37.169999999999995%" headers="mcps1.3.10.9.2.4.1.1 "><p>Reserved</p>
</td>
<td class="cellrowborder" valign="top" width="12.01%" headers="mcps1.3.10.9.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="50.82%" headers="mcps1.3.10.9.2.4.1.3 "><p>Reserved field.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="37.169999999999995%" headers="mcps1.3.10.9.2.4.1.1 "><p>Number of Groups(N)</p>
</td>
<td class="cellrowborder" valign="top" width="12.01%" headers="mcps1.3.10.9.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="50.82%" headers="mcps1.3.10.9.2.4.1.3 "><p>Number of multicast groups contained in the message.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="37.169999999999995%" headers="mcps1.3.10.9.2.4.1.1 "><p>Holdtime</p>
</td>
<td class="cellrowborder" valign="top" width="12.01%" headers="mcps1.3.10.9.2.4.1.2 "><p>16 bits</p>
</td>
<td class="cellrowborder" valign="top" width="50.82%" headers="mcps1.3.10.9.2.4.1.3 "><p>Period during which the <span class="keyword">device</span> that receives a Join/Prune message keeps the corresponding interface in the Join/Prune state.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="37.169999999999995%" headers="mcps1.3.10.9.2.4.1.1 "><p>Group Address (Encoded-Group format) </p>
</td>
<td class="cellrowborder" valign="top" width="12.01%" headers="mcps1.3.10.9.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="50.82%" headers="mcps1.3.10.9.2.4.1.3 "><p>Multicast group address.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="37.169999999999995%" headers="mcps1.3.10.9.2.4.1.1 "><p>Number of Joined Sources</p>
</td>
<td class="cellrowborder" valign="top" width="12.01%" headers="mcps1.3.10.9.2.4.1.2 "><p>16 bits</p>
</td>
<td class="cellrowborder" valign="top" width="50.82%" headers="mcps1.3.10.9.2.4.1.3 "><p>Number of sources whose multicast traffic is requested in a multicast group.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="37.169999999999995%" headers="mcps1.3.10.9.2.4.1.1 "><p>Number of Pruned Sources</p>
</td>
<td class="cellrowborder" valign="top" width="12.01%" headers="mcps1.3.10.9.2.4.1.2 "><p>16 bits</p>
</td>
<td class="cellrowborder" valign="top" width="50.82%" headers="mcps1.3.10.9.2.4.1.3 "><p>Number of sources whose multicast traffic is no longer requested in a multicast group.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="37.169999999999995%" headers="mcps1.3.10.9.2.4.1.1 "><p>Joined Source Address (Encoded-Source format)</p>
</td>
<td class="cellrowborder" valign="top" width="12.01%" headers="mcps1.3.10.9.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="50.82%" headers="mcps1.3.10.9.2.4.1.3 "><p>Address of the source whose multicast traffic is requested.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="37.169999999999995%" headers="mcps1.3.10.9.2.4.1.1 "><p>Pruned Source Address (Encoded-Source format)</p>
</td>
<td class="cellrowborder" valign="top" width="12.01%" headers="mcps1.3.10.9.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="50.82%" headers="mcps1.3.10.9.2.4.1.3 "><p>Address of the source whose multicast traffic is no longer requested.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300506"><a name="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300506"></a><a name="section_dc_vrp_multicast_feature_300506"></a><h4 class="sectiontitle">Bootstrap Messages</h4><p>When dynamic RP election is used on a PIM-SM network, candidate-bootstrap routers (C-BSRs) periodically send Bootstrap messages through all PIM interfaces to participate in BSR election. The winner continues to send Bootstrap messages carrying RP-Set information to all PIM devices in the domain.</p>
<p>In an IP packet that carries a Bootstrap message, the source address is a PIM interface's address, the destination address is FF02::d, and the TTL value is 1. The packet is transmitted in multicast mode and is forwarded hop by hop on the PIM-SM network and is flooded on the entire network. <a href="#EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300510">Figure 10</a> shows the format of a Bootstrap message.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300510"><a name="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300510"></a><a name="fig_dc_vrp_multicast_feature_300510"></a><span class="figcap"><b>Figure 10 </b>Bootstrap message format</span><br><span><img class="vsd" src="figure/en-us_image_0000001589285085.png" width="NaN" height="NaN"></span></div>
<p><a href="#EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300511">Figure 11</a> shows the format of the Group-RP Record field.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300511"><a name="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300511"></a><a name="fig_dc_vrp_multicast_feature_300511"></a><span class="figcap"><b>Figure 11 </b>Format of the Group-RP Record field</span><br><span><img class="vsd" src="figure/en-us_image_0000001538765226.png" width="NaN" height="NaN"></span></div>
<p><a href="#EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300507">Table 7</a> describes the fields in a Bootstrap message.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300507"></a><a name="tab_dc_vrp_multicast_feature_300507"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300507" frame="border" border="1" rules="all"><caption><b>Table 7 </b>Fields in a Bootstrap message</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="27.21%" id="mcps1.3.11.8.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="12.42%" id="mcps1.3.11.8.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="60.370000000000005%" id="mcps1.3.11.8.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="27.21%" headers="mcps1.3.11.8.2.4.1.1 "><p>Type</p>
</td>
<td class="cellrowborder" valign="top" width="12.42%" headers="mcps1.3.11.8.2.4.1.2 "><p>4 bits</p>
</td>
<td class="cellrowborder" valign="top" width="60.370000000000005%" headers="mcps1.3.11.8.2.4.1.3 "><p>Message type. The value is 4.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="27.21%" headers="mcps1.3.11.8.2.4.1.1 "><p>N</p>
</td>
<td class="cellrowborder" valign="top" width="12.42%" headers="mcps1.3.11.8.2.4.1.2 "><p>1 bit</p>
</td>
<td class="cellrowborder" valign="top" width="60.370000000000005%" headers="mcps1.3.11.8.2.4.1.3 "><p>If this field is set to 1, Bootstrap message fragments are not forwarded.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="27.21%" headers="mcps1.3.11.8.2.4.1.1 "><p>Reserved</p>
</td>
<td class="cellrowborder" valign="top" width="12.42%" headers="mcps1.3.11.8.2.4.1.2 "><p>7 bits</p>
</td>
<td class="cellrowborder" valign="top" width="60.370000000000005%" headers="mcps1.3.11.8.2.4.1.3 "><p>Reserved field. The field is set to 0 when the message is sent and is not processed when the message is received.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="27.21%" headers="mcps1.3.11.8.2.4.1.1 "><p>Fragment Tag</p>
</td>
<td class="cellrowborder" valign="top" width="12.42%" headers="mcps1.3.11.8.2.4.1.2 "><p>16 bits</p>
</td>
<td class="cellrowborder" valign="top" width="60.370000000000005%" headers="mcps1.3.11.8.2.4.1.3 "><p>Random number used to distinguish the Bootstrap message.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="27.21%" headers="mcps1.3.11.8.2.4.1.1 "><p>Hash Mask length</p>
</td>
<td class="cellrowborder" valign="top" width="12.42%" headers="mcps1.3.11.8.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="60.370000000000005%" headers="mcps1.3.11.8.2.4.1.3 "><p>Length of the hash mask of a C-BSR.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="27.21%" headers="mcps1.3.11.8.2.4.1.1 "><p>BSR-priority</p>
</td>
<td class="cellrowborder" valign="top" width="12.42%" headers="mcps1.3.11.8.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="60.370000000000005%" headers="mcps1.3.11.8.2.4.1.3 "><p>C-BSR priority.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="27.21%" headers="mcps1.3.11.8.2.4.1.1 "><p>BSR-Address (Encoded-Unicast format) </p>
</td>
<td class="cellrowborder" valign="top" width="12.42%" headers="mcps1.3.11.8.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="60.370000000000005%" headers="mcps1.3.11.8.2.4.1.3 "><p>C-BSR address.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="27.21%" headers="mcps1.3.11.8.2.4.1.1 "><p>Group Address (Encoded-Group format)</p>
</td>
<td class="cellrowborder" valign="top" width="12.42%" headers="mcps1.3.11.8.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="60.370000000000005%" headers="mcps1.3.11.8.2.4.1.3 "><p>Multicast group address.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="27.21%" headers="mcps1.3.11.8.2.4.1.1 "><p>RP-Count</p>
</td>
<td class="cellrowborder" valign="top" width="12.42%" headers="mcps1.3.11.8.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="60.370000000000005%" headers="mcps1.3.11.8.2.4.1.3 "><p>Total number of C-RPs that want to serve the group.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="27.21%" headers="mcps1.3.11.8.2.4.1.1 "><p>Frag RP-Cnt</p>
</td>
<td class="cellrowborder" valign="top" width="12.42%" headers="mcps1.3.11.8.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="60.370000000000005%" headers="mcps1.3.11.8.2.4.1.3 "><p>Number of C-RP addresses in the corresponding network segment. For a given multicast group, if the Bootstrap message is fragmented, the Frag RP-Cnt field facilitates RP-Set fragmentation.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="27.21%" headers="mcps1.3.11.8.2.4.1.1 "><p>RP-address (Encoded-Unicast format)</p>
</td>
<td class="cellrowborder" valign="top" width="12.42%" headers="mcps1.3.11.8.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="60.370000000000005%" headers="mcps1.3.11.8.2.4.1.3 "><p>C-RP address.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="27.21%" headers="mcps1.3.11.8.2.4.1.1 "><p>RP-holdtime</p>
</td>
<td class="cellrowborder" valign="top" width="12.42%" headers="mcps1.3.11.8.2.4.1.2 "><p>16 bits</p>
</td>
<td class="cellrowborder" valign="top" width="60.370000000000005%" headers="mcps1.3.11.8.2.4.1.3 "><p>Aging time of the advertisement message sent by a C-RP.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="27.21%" headers="mcps1.3.11.8.2.4.1.1 "><p>RP-Priority</p>
</td>
<td class="cellrowborder" valign="top" width="12.42%" headers="mcps1.3.11.8.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="60.370000000000005%" headers="mcps1.3.11.8.2.4.1.3 "><p>C-RP priority.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>A PIM interface can be configured as a BSR boundary. Multiple BSR boundary interfaces divide the network into different IPv6 PIM-SM domains. Bootstrap messages cannot pass through the BSR boundary.</p>
</div>
<div class="section" id="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300507"><a name="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300507"></a><a name="section_dc_vrp_multicast_feature_300507"></a><h4 class="sectiontitle">Assert Messages</h4><p>On a shared network segment, if an IPv6 PIM device receives an (S, G) packet from the downstream interface of an (S, G) or (*, G) entry, other forwarders exist on the network segment. The <span class="keyword">device</span> then sends an Assert message through the downstream interface to participate in the forwarder election. The candidates who fail in the election stop forwarding packets through their downstream interfaces.</p>
<p>In an IP packet that carries an Assert message, the source address is a local interface's address, the destination address is FF02::d, and the TTL value is 1. The message is transmitted in multicast mode. <a href="#EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300512">Figure 12</a> shows the format of an Assert message.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300512"><a name="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300512"></a><a name="fig_dc_vrp_multicast_feature_300512"></a><span class="figcap"><b>Figure 12 </b>Assert message format</span><br><span><img class="vsd" src="figure/en-us_image_0000001589525093.png" width="NaN" height="NaN"></span></div>
<p><a href="#EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300508">Table 8</a> describes the fields in an Assert message.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300508"></a><a name="tab_dc_vrp_multicast_feature_300508"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300508" frame="border" border="1" rules="all"><caption><b>Table 8 </b>Fields in an Assert message</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="28.349999999999998%" id="mcps1.3.12.6.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="5.55%" id="mcps1.3.12.6.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="66.10000000000001%" id="mcps1.3.12.6.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="28.349999999999998%" headers="mcps1.3.12.6.2.4.1.1 "><p>Type</p>
</td>
<td class="cellrowborder" valign="top" width="5.55%" headers="mcps1.3.12.6.2.4.1.2 "><p>4 bits</p>
</td>
<td class="cellrowborder" valign="top" width="66.10000000000001%" headers="mcps1.3.12.6.2.4.1.3 "><p>Message type. The value is 5.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="28.349999999999998%" headers="mcps1.3.12.6.2.4.1.1 "><p>Group Address (Encoded-Group format) </p>
</td>
<td class="cellrowborder" valign="top" width="5.55%" headers="mcps1.3.12.6.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="66.10000000000001%" headers="mcps1.3.12.6.2.4.1.3 "><p>Multicast group address.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="28.349999999999998%" headers="mcps1.3.12.6.2.4.1.1 "><p>Source address (Encoded-Unicast format)</p>
</td>
<td class="cellrowborder" valign="top" width="5.55%" headers="mcps1.3.12.6.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="66.10000000000001%" headers="mcps1.3.12.6.2.4.1.3 "><p>This field is a multicast source address if the message sender participates in the election of the only forwarder for (S, G) entries and is 0 if the message sender participates in the election of the only forwarder for (*, G) entries.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="28.349999999999998%" headers="mcps1.3.12.6.2.4.1.1 "><p>R</p>
</td>
<td class="cellrowborder" valign="top" width="5.55%" headers="mcps1.3.12.6.2.4.1.2 "><p>1 bit</p>
</td>
<td class="cellrowborder" valign="top" width="66.10000000000001%" headers="mcps1.3.12.6.2.4.1.3 "><p>RPT bit. This field is 0 if the message sender participates in the election of the only forwarder for (S, G) entries and is 1 if the message sender participates in the election of the only forwarder for (*, G) entries.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="28.349999999999998%" headers="mcps1.3.12.6.2.4.1.1 "><p>Metric Preference</p>
</td>
<td class="cellrowborder" valign="top" width="5.55%" headers="mcps1.3.12.6.2.4.1.2 "><p>31 bits</p>
</td>
<td class="cellrowborder" valign="top" width="66.10000000000001%" headers="mcps1.3.12.6.2.4.1.3 "><p>Priority of the unicast path to the source address.</p>
<p>If the R field is 1, this field indicates the priority of the unicast path to the RP.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="28.349999999999998%" headers="mcps1.3.12.6.2.4.1.1 "><p>Metric</p>
</td>
<td class="cellrowborder" valign="top" width="5.55%" headers="mcps1.3.12.6.2.4.1.2 "><p>32 bits</p>
</td>
<td class="cellrowborder" valign="top" width="66.10000000000001%" headers="mcps1.3.12.6.2.4.1.3 "><p>Cost of the unicast route to the source address.</p>
<p>If the R field is 1, this field indicates the cost of the unicast path to the RP.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300510"><a name="EN-US_CONCEPT_0000001589284989__section_dc_vrp_multicast_feature_300510"></a><a name="section_dc_vrp_multicast_feature_300510"></a><h4 class="sectiontitle">Advertisement Messages</h4><p>When dynamic RP election is used on a PIM-SM network, the <span class="keyword">devices</span> that are configured as C-RPs periodically send Advertisement messages to notify the BSR of the range of multicast groups they want to serve.</p>
<p>In an IP packet that carries an Advertisement message, the source address is the C-RP address, and the destination address is the BSR's address. The packet is sent in unicast mode. <a href="#EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300513">Figure 13</a> shows the format of an Advertisement message.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300513"><a name="EN-US_CONCEPT_0000001589284989__fig_dc_vrp_multicast_feature_300513"></a><a name="fig_dc_vrp_multicast_feature_300513"></a><span class="figcap"><b>Figure 13 </b>Advertisement message format</span><br><span><img class="vsd" src="figure/en-us_image_0000001538445518.png" width="NaN" height="NaN"></span></div>
<p><a href="#EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300511">Table 9</a> describes the fields in an Advertisement message.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300511"></a><a name="tab_dc_vrp_multicast_feature_300511"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001589284989__tab_dc_vrp_multicast_feature_300511" frame="border" border="1" rules="all"><caption><b>Table 9 </b>Fields in an Advertisement message</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="29.98%" id="mcps1.3.13.6.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="7.59%" id="mcps1.3.13.6.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="62.43%" id="mcps1.3.13.6.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="29.98%" headers="mcps1.3.13.6.2.4.1.1 "><p>Type</p>
</td>
<td class="cellrowborder" valign="top" width="7.59%" headers="mcps1.3.13.6.2.4.1.2 "><p>4 bits</p>
</td>
<td class="cellrowborder" valign="top" width="62.43%" headers="mcps1.3.13.6.2.4.1.3 "><p>Message type. The value is 8.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.98%" headers="mcps1.3.13.6.2.4.1.1 "><p>Prefix-Cnt</p>
</td>
<td class="cellrowborder" valign="top" width="7.59%" headers="mcps1.3.13.6.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="62.43%" headers="mcps1.3.13.6.2.4.1.3 "><p>Prefix value of the multicast address.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.98%" headers="mcps1.3.13.6.2.4.1.1 "><p>Priority</p>
</td>
<td class="cellrowborder" valign="top" width="7.59%" headers="mcps1.3.13.6.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="62.43%" headers="mcps1.3.13.6.2.4.1.3 "><p>C-RP priority.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.98%" headers="mcps1.3.13.6.2.4.1.1 "><p>Holdtime</p>
</td>
<td class="cellrowborder" valign="top" width="7.59%" headers="mcps1.3.13.6.2.4.1.2 "><p>16 bits</p>
</td>
<td class="cellrowborder" valign="top" width="62.43%" headers="mcps1.3.13.6.2.4.1.3 "><p>Aging time of the Advertisement message.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.98%" headers="mcps1.3.13.6.2.4.1.1 "><p>RP-Address (Encoded-Unicast format) </p>
</td>
<td class="cellrowborder" valign="top" width="7.59%" headers="mcps1.3.13.6.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="62.43%" headers="mcps1.3.13.6.2.4.1.3 "><p>C-RP address.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.98%" headers="mcps1.3.13.6.2.4.1.1 "><p>Group Address (Encoded-Group format) </p>
</td>
<td class="cellrowborder" valign="top" width="7.59%" headers="mcps1.3.13.6.2.4.1.2 "><p>Variable</p>
</td>
<td class="cellrowborder" valign="top" width="62.43%" headers="mcps1.3.13.6.2.4.1.3 "><p>Multicast group address.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_ipv6pim_cfg_0003.html">Understanding IPv6 PIM
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_ipv6pim_cfg_0004.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>