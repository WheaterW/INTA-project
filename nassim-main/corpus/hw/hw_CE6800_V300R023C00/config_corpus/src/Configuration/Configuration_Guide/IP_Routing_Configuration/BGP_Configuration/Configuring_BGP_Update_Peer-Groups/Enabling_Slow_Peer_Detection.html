
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling Slow Peer Detection">
<meta name="abstract" content="After slow peer detection is configured on a device, the device identifies the slow BGP peer (if any) and removes it from the update peer-group to prevent this slow peer from affecting route advertisement to other peers in this update peer-group. Slow peer detection speeds up BGP network convergence.">
<meta name="description" content="After slow peer detection is configured on a device, the device identifies the slow BGP peer (if any) and removes it from the update peer-group to prevent this slow peer from affecting route advertisement to other peers in this update peer-group. Slow peer detection speeds up BGP network convergence.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0054.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0055.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0256.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130783920">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Enabling Slow Peer Detection</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130783920"></a><a name="EN-US_TASK_0000001130783920"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling Slow Peer Detection</h1>
<div class="taskbody"><p>After slow peer detection is configured on a device, the device identifies the slow BGP peer (if any) and removes it from the update peer-group to prevent this slow peer from affecting route advertisement to other peers in this update peer-group. Slow peer detection speeds up BGP network convergence.</p>
<div class="context"><a name="EN-US_TASK_0000001130783920__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>An update peer-group may consist of multiple peers. If a network problem (congestion for example) occurs and slows down the speed at which the local device advertises routes to a peer in the update peer-group, the speed at which the local device advertises routes to other peers in the update peer-group is affected. To prevent this impact, enable slow peer detection on the device.</p>
<p>After slow peer detection is enabled, the local device calculates the difference between the time taken to send messages to each peer in the update peer-group and the shortest time taken to send messages to each peer in the group. If the difference between the time taken to send messages to a peer and the shortest time is greater than the threshold specified for slow peer detection, the local device considers this peer as a slow peer and removes it from the update peer-group, which prevents this slow peer from affecting route advertisement to other peers in the group.</p>
<p>If BGP Update messages fail to be advertised, slow peers cannot be detected using the original slow peer detection mode. To address this problem, configure the absolute mode for slow peer detection. If the delay in sending messages to a peer is greater than the absolute time threshold, the peer is considered a slow peer.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130783920__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the BGP view.</span><p><pre class="screen"><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></pre>
</p></li><li><span>Enable slow peer detection.</span><p><pre class="screen"><a href="cmdqueryname=slow-peer+detection+threshold"><b><span class="cmdname">slow-peer detection</span></b></a> <strong><span>threshold</span></strong> <i><span class="varname">threshold-value</span></i></pre>
<p>The <strong><span>threshold</span></strong> <i><span class="varname">threshold-value</span></i> parameter specifies a threshold for slow peer detection. If the difference between the time taken to send messages to a BGP peer and the time taken to send messages to the fastest peer in the group exceeds the <i><span class="varname">threshold-value</span></i>, the local device identifies the former peer to be a slow one and removes it from the update peer-group. <span>If this parameter is not specified, the default threshold (300s) is used.</span></p>
<p>By default, slow peer detection is enabled. </p>
</p></li><li><span>(Optional) Enable slow peer detection in absolute mode.</span><p><pre class="screen"><a href="cmdqueryname=slow-peer+absolute-detection+threshold"><b><span class="cmdname">slow-peer absolute-detection</span></b></a> <strong><span>threshold</span></strong> <i><span class="varname">threshold</span></i></pre>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130783920__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130783920__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp_cfg_0054.html">Configuring BGP Update Peer-Groups
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp_cfg_0055.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bgp_cfg_0256.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>