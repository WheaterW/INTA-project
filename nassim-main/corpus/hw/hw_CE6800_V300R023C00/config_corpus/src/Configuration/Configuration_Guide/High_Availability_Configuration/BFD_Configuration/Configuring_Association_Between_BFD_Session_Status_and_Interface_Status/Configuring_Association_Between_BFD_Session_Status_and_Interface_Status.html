
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Association Between BFD Session Status and Interface Status">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_0028.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_0029.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_0033.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130782124">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Association Between BFD Session Status and Interface Status</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130782124"></a><a name="EN-US_TASK_0000001130782124"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Association Between BFD Session Status and Interface Status</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130782124__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Prerequisites</h4><div class="p">Before associating the BFD session status with the interface status, you have completed the following tasks:<ul><li><p>Enable BFD globally.</p>
</li><li><p>Create a single-hop BFD session with a multicast IP address configured as the peer address.</p>
</li><li><p>Ensure that the BFD session is up.</p>
</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130782124__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the BFD session view.</span><p><pre class="screen"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <i><span class="varname">session-name</span></i></pre>
<p>The BFD session must be a single-hop BFD session with a multicast IP address configured as the peer address.</p>
</p></li><li><span>Associate the BFD session status with the status of the interface to which the BFD session is bound.</span><p><pre class="screen"><a href="cmdqueryname=process-interface-status"><b><span class="cmdname">process-interface-status</span></b></a> [ <strong><span>sub-if</span></strong> ]<span> </span><span>[ <strong><span>reboot-no-impact</span></strong> ]</span></pre>
<p>By default, a single-hop BFD session with a multicast IP address configured as the peer address is not associated with the status of the interface to which the BFD session is bound.</p>
<div class="p">After the <a href="cmdqueryname=process-interface-status"><b><span class="cmdname">process-interface-status</span></b></a> command is run:<ul><li>If a BFD session detects a fault and goes down, the associated interface status becomes BFD Down. As a result, the direct route of the interface is removed from the routing table, but BFD packets can still be sent.</li><li>If multiple single-hop BFD sessions with a multicast IP address configured as the peer address are bound to the same interface, the <a href="cmdqueryname=process-interface-status"><b><span class="cmdname">process-interface-status</span></b></a> command can be configured only for one BFD session. In other words, the interface status is affected by only one BFD session.</li><li>Before you associate the BFD status with the interface status, ensure that the BFD configurations on two devices are correct and match each other. If the local BFD session is in the Down state, check whether the BFD configurations on both ends are correct.</li><li>If the BFD session status must be synchronized to the interface status immediately, ensure that the BFD configurations on the two devices are correct, and then run the <a href="cmdqueryname=shutdown"><b><span class="cmdname">shutdown</span></b></a> and <a href="cmdqueryname=undo+shutdown"><b><span class="cmdname">undo shutdown</span></b></a> commands to shut down and start the BFD session. When the <a href="cmdqueryname=undo+shutdown"><b><span class="cmdname">undo shutdown</span></b></a> command is run in the BFD session view, a detection timer is initiated. If the BFD session goes up through negotiation before the timer expires, the BFD session notifies the bound interface of a BFD up event. Otherwise, the BFD session considers the link faulty and notifies the bound interface of a BFD down event. This way, the BFD session status is synchronized with the interface status in real time.</li><li>After the <a href="cmdqueryname=shutdown"><b><span class="cmdname">shutdown</span></b></a> command is run, the BFD session status will not be reported to the bound interface.</li><li>If the <a href="cmdqueryname=process-interface-status"><b><span class="cmdname">process-interface-status</span></b></a> command configured for a BFD session exists in the configuration file, after the device is restarted, the BFD session reports a BFD down event to the interface so that the interface sets its protocol state to Down. This prevents traffic loss when the BFD session is up but the interface is down during initialization of the device.</li></ul>
</div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130782124__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130782124__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bfd_cfg_0028.html">Configuring Association Between BFD Session Status and Interface Status
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bfd_cfg_0029.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bfd_cfg_0033.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>