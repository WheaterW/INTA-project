
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Users Connected to a Single Device in the Same VLAN Cannot Communicate with Each Other">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0086.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0088.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0090.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="QinQ">
<meta name="featurename" content="VLAN">
<meta name="featurename" content="VLAN Mapping">
<meta name="featurename" content="VLAN Pool">
<meta name="featurename" content="Voice VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130622876">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Users Connected to a Single Device in the Same VLAN Cannot Communicate with Each Other</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130622876"></a><a name="EN-US_TASK_0000001130622876"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Users Connected to a Single Device in the Same VLAN Cannot Communicate with Each Other</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130622876__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><div class="p"><h4 class="sectiontitle">Fault Symptom</h4><p>Users connected to a single device in the same VLAN cannot communicate with each other.</p>
<h4 class="sectiontitle">Possible Causes</h4><ul><li>The interfaces connecting to other devices in the VLAN are down.</li><li>The users in the VLAN are on different network segments.</li><li>MAC address entries are incorrect.</li><li>The VLAN configuration is incorrect.</li><li>The port isolation function is enabled on the device.</li><li>Incorrect static ARP entries are configured on user terminals.</li></ul>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001130622876__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Check whether the interfaces connected to user terminals are down.</span><ol><li class="substepexpand"><span>Check the running status of the interfaces connected to user terminals.</span><p><pre class="screen"><a href="cmdqueryname=display+interface"><b><span class="cmdname">display interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>If the interfaces are down, rectify the fault.</span></li></ol>
</li><li><span>Check whether the users in the VLAN are on the same network segment.</span><p><p>Check whether the IP addresses of users in the same VLAN are on the same network segment. If not, reconfigure IP addresses for the users.</p>
</p></li><li><span>Check whether MAC address entries on the device are correct.</span><ol><li class="substepexpand"><span>Check whether the MAC addresses, outbound interface, and VLANs learned by the device are correct.</span><p><pre class="screen"><a href="cmdqueryname=display+mac-address"><b><span class="cmdname">display mac-address</span></b></a></pre>
</p></li><li class="substepexpand"><span>If not, delete these incorrect MAC address entries and enable the device to learn MAC addresses again.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a>
<strong><a href="cmdqueryname=undo+mac-address+all"><b><span class="cmdname">undo mac-address all</span></b></a></strong>
<a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p><p><p>If only dynamic MAC address entries are incorrect, run the <strong><a href="cmdqueryname=reset+mac-address"><b><span class="cmdname">reset mac-address</span></b></a></strong> command in the user view to clear dynamic MAC address entries.</p>
</p></li></ol>
</li><li><span>Check whether the VLAN configuration is correct.</span><p><p>Check whether the VLAN configuration is correct against the items in the following table.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="23.5%" id="mcps1.3.2.4.2.2.1.3.1.1" liSelected="liSelected"><p>Check Item</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="76.5%" id="mcps1.3.2.4.2.2.1.3.1.2" liSelected="liSelected"><p>Method</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="23.5%" headers="mcps1.3.2.4.2.2.1.3.1.1 "><p>Whether the VLAN has been created</p>
</td>
<td class="cellrowborder" valign="top" width="76.5%" headers="mcps1.3.2.4.2.2.1.3.1.2 "><p>Run the <a href="cmdqueryname=display+vlan"><b><span class="cmdname">display vlan</span></b></a> <i><span class="varname">vlan-id</span></i> command in any view to check whether the VLAN to which the interfaces connected to user terminals belong has been created. If not, run the <a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> command in the system view to create the VLAN.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="23.5%" headers="mcps1.3.2.4.2.2.1.3.1.1 "><p>Whether the interfaces are added to the VLAN</p>
</td>
<td class="cellrowborder" valign="top" width="76.5%" headers="mcps1.3.2.4.2.2.1.3.1.2 "><p>Run the <a href="cmdqueryname=display+vlan"><b><span class="cmdname">display vlan</span></b></a> <i><span class="varname">vlan-id</span></i> command in any view to check whether the interfaces connected to user terminals are added to the specified VLAN. If not, add the interfaces to the specified VLAN. For details, see <a href="vrp_vlan_cfg_0018.html#EN-US_TASK_0000001130622850__cmd159334395817">Configuring Interface-based VLAN Assignment</a>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="23.5%" headers="mcps1.3.2.4.2.2.1.3.1.1 "><p>Whether connections between the interfaces and user terminals are correct</p>
</td>
<td class="cellrowborder" valign="top" width="76.5%" headers="mcps1.3.2.4.2.2.1.3.1.2 "><p>Correctly connect user terminals to the device interfaces.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Check whether port isolation is configured on the device.</span><ol><li class="substepexpand"><span>Check whether port isolation is configured on the interfaces.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a>
<a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i>
<a href="cmdqueryname=display+this"><b><span class="cmdname">display this</span></b></a></pre>
</p></li><li class="substepexpand"><span>If so, disable port isolation on the interfaces.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a>
<a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i>
<strong><a href="cmdqueryname=portswitch"><b><span class="cmdname">portswitch</span></b></a></strong>
<a href="cmdqueryname=undo+port-isolate+enable"><b><span class="cmdname">undo port-isolate enable</span></b></a> [ <strong><span>group</span></strong> <i><span class="varname">group-id</span></i> ]
<a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Check whether incorrect static ARP entries are configured on the user terminals. If so, correct the configuration.</span></li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_vlan_cfg_0086.html">Troubleshooting VLANs
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_vlan_cfg_0088.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_vlan_cfg_0090.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>