
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="SSH Key Exchange Failure">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_ssh_cfg_0018.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="SSH">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="SSH">
<meta name="featuretype" content="Security">
<meta name="featurename" content="SSH">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security Protection">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563753669">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>SSH Key Exchange Failure</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563753669"></a><a name="EN-US_TASK_0000001563753669"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">SSH Key Exchange Failure</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563753669__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Fault Symptom</h4><p>When the device is used as an SSH server, the third-party client software fails to exchange the key with the SSH server, causing SSH connection failure.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001563753669__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Possible Cause</h4><p>Keys can be exchanged only after the client and server negotiate the key exchange algorithm, encryption algorithm, public key algorithm, and HMAC algorithm. If any algorithm fails to be negotiated, the key exchange will fail. The algorithm negotiation fails because the algorithm supported by the client is not configured on the SSH server.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563753669__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Use other methods to log in to the SSH server. For details, see "Logging In to the CLI" in <span>Configuration Guide</span> - Basic Configuration.</span></li><li><span>Enable the debugging for the SSH server.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a>
<a href="cmdqueryname=info-center+enable"><b><span class="cmdname">info-center enable</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a>
<strong>terminal monitor</strong>
<strong>terminal debugging</strong>
<a href="cmdqueryname=debugging+ssh+server"><b><span class="cmdname">debugging ssh server</span></b></a> <strong><span>all</span></strong></pre>
</p></li><li><span>Connect the SSH server through third-party client software.</span></li><li><span>Check the algorithms supported by the client in the debug information displayed by the SSH server user terminal.</span><p><p>Copy the debug information to a TXT file, and use the following regular expressions to search for the algorithms supported by the third-party client software. For details, see <a href="#EN-US_TASK_0000001563753669__table369912567165">Table 1</a>.</p>

<div class="tableBorder"><a name="EN-US_TASK_0000001563753669__table369912567165"></a><a name="table369912567165"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0000001563753669__table369912567165" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Searching for the algorithms supported by the third-party client software</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="50.32%" id="mcps1.3.3.4.2.2.2.3.1.1" liSelected="liSelected"><p>Algorithm</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="49.68%" id="mcps1.3.3.4.2.2.2.3.1.2" liSelected="liSelected"><p>Regular Expression</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="50.32%" headers="mcps1.3.3.4.2.2.2.3.1.1 "><p>Key exchange algorithm</p>
</td>
<td class="cellrowborder" valign="top" width="49.68%" headers="mcps1.3.3.4.2.2.2.3.1.2 "><p>SSH protocol packet received.*key_ex</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50.32%" headers="mcps1.3.3.4.2.2.2.3.1.1 "><p>Encryption algorithm</p>
</td>
<td class="cellrowborder" valign="top" width="49.68%" headers="mcps1.3.3.4.2.2.2.3.1.2 "><p>SSH protocol packet received.*ciph_ctos</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50.32%" headers="mcps1.3.3.4.2.2.2.3.1.1 "><p>Public key algorithm</p>
</td>
<td class="cellrowborder" valign="top" width="49.68%" headers="mcps1.3.3.4.2.2.2.3.1.2 "><p>SSH protocol packet received.*ser_host_key</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50.32%" headers="mcps1.3.3.4.2.2.2.3.1.1 "><p>HMAC algorithm</p>
</td>
<td class="cellrowborder" valign="top" width="49.68%" headers="mcps1.3.3.4.2.2.2.3.1.2 "><p>SSH protocol packet received.*hmac_ctos</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Configure the key exchange algorithm, encryption algorithm, public key algorithm, and HMAC algorithm supported by both the client and server on the SSH server. For details about the supported algorithms and configuration methods, see <a href="galaxy_ssh_cfg_0009.html">Configuring the SSH Server Function and Related Parameters</a>.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_ssh_cfg_0018.html">Troubleshooting SSH
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
</div>
</div>
</body>
</html>