
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Command Assistant Based on Commands">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_ops_cfg_0007.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ops_cfg_0010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OPS">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OPS">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="OPS">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512685906">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring a Command Assistant Based on Commands</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512685906"></a><a name="EN-US_TASK_0000001512685906"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Command Assistant Based on Commands</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001512685906__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If you want a device to run a few commands automatically in a specific condition to implement a function, bind the commands to a command assistant.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>Ensure that the specified commands are correct and complete. The system does not provide help information or check the correctness of the commands bound to a command assistant.</p>
</li><li><p>Because command assistants are executed in the background, you are advised not to bind interactive or jump commands, such as <a href="cmdqueryname=telnet"><b><span class="cmdname">telnet</span></b></a> and <a href="cmdqueryname=stelnet"><b><span class="cmdname">stelnet</span></b></a>, to a command assistant.</p>
</li><li><p>When executing an interactive command that requires a Y/N choice, the system automatically selects Y. When executing an interactive command that requires input of a character string, the system waits for the input and proceeds to run the next command when the wait period expires.</p>
</li><li><p>The system switches to the user view by default to run the specified commands. If a command must be executed in the system view, run the <a href="cmdqueryname=execute"><b><span class="cmdname">execute</span></b></a> <i><span class="varname">priority</span></i> <strong><span>command</span></strong> <strong><span>system-view</span></strong> command first. Otherwise, the command configuration does not take effect.</p>
</li><li>A command assistant cannot be configured based on both commands and batch files.</li></ul>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512685906__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the OPS view.</span><p><pre class="screen"><a href="cmdqueryname=ops"><b><span class="cmdname">ops</span></b></a></pre>
</p></li><li><span>Create an assistant.</span><p><pre class="screen"><a href="cmdqueryname=assistant"><b><span class="cmdname">assistant</span></b></a> <i><span class="varname">assistant-name</span></i></pre>
</p></li><li><span>Configure a trigger condition for the assistant.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Trigger conditions for an assistant</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.07330733073307%" id="mcps1.3.2.4.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.59335933593359%" id="mcps1.3.2.4.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.4.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.07330733073307%" headers="mcps1.3.2.4.2.1.2.4.1.1 "><p>Set the severity of an alarm that triggers the assistant execution.</p>
</td>
<td class="cellrowborder" valign="top" width="33.59335933593359%" headers="mcps1.3.2.4.2.1.2.4.1.2 "><p id="EN-US_TASK_0000001512685906__p171631239115919"><a name="EN-US_TASK_0000001512685906__p171631239115919"></a><a name="p171631239115919"></a><a href="cmdqueryname=condition+alarm+level"><b><span class="cmdname">condition alarm level</span></b></a> { <strong><span>eq</span></strong> | <strong><span>ge</span></strong> | <strong><span>gt</span></strong> | <strong><span>le</span></strong> | <strong><span>lt</span></strong> | <strong><span>ne</span></strong> } { <strong><span>critical</span></strong> | <strong><span>major</span></strong> | <strong><span>minor</span></strong> | <strong><span>warning</span></strong> }</p>
</td>
<td class="cellrowborder" rowspan="5" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.3 "><p>A command assistant can match only one trigger condition.</p>
<p>If the alarm or event in the condition is deleted due to upgrade or patch installation, the command assistant cannot be triggered. In this case, you are advised to adjust the trigger condition.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.4.2.1.2.4.1.1 "><p>Set the name of an alarm or event that triggers the assistant execution.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=condition"><b><span class="cmdname">condition</span></b></a> { <strong><span>alarm</span></strong> [ <i><span class="varname">alarm-type</span></i> ] | <strong><span>event</span></strong> } <strong><span>feature</span></strong> <i><span class="varname">feature-name</span></i> <strong><span>name</span></strong> <i><span class="varname">event-name</span></i> [ <i><span class="varname">para-name</span></i> <i><span class="varname">para-optype</span></i> <i><span class="varname">para-value</span></i> ] &amp;&lt;1-4&gt; [ <strong><span>occurs</span></strong> <i><span class="varname">occur-number</span></i> [ <strong><span>period</span></strong> <i><span class="varname">period-value</span></i> ] ]</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.4.2.1.2.4.1.1 "><p>Set the OID of an SNMP trap that triggers the assistant execution.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=condition+snmp-notification"><b><span class="cmdname">condition snmp-notification</span></b></a> <strong><span>oid</span></strong> <i><span class="varname">oid-string</span></i> [ <i><span class="varname">optype</span></i> <i><span class="varname">oid-value</span></i> ]</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.4.2.1.2.4.1.1 "><p>Set a log that triggers the assistant execution.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=condition+syslog+pattern"><b><span class="cmdname">condition syslog pattern</span></b></a> <i><span class="varname">reg-express</span></i> [ <strong><span>occurs</span></strong> <i><span class="varname">occur-number</span></i> [ <strong><span>period</span></strong> <i><span class="varname">period-value</span></i> ] ]</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.4.2.1.2.4.1.1 "><p>Set the time when an assistant is executed.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=condition+timer"><b><span class="cmdname">condition timer</span></b></a> <i><span class="varname">cron</span></i> <i><span class="varname">minutes</span></i> <i><span class="varname">hours</span></i> <i><span class="varname">daysOfMonth</span></i> <i><span class="varname">months</span></i> <i><span class="varname">daysOfWeek</span></i> [ <i><span class="varname">years</span></i> ]</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Specify the commands that the command assistant runs. </span><p><pre class="screen"><a href="cmdqueryname=execute"><b><span class="cmdname">execute</span></b></a> <i><span class="varname">priority</span></i> <strong><span>command</span></strong> <i><span class="varname">command-string</span></i></pre>
</p><p><p>You can run the command multiple times to specify multiple commands to run.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512685906__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512685906__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_ops_cfg_0007.html">Configuring a Command Assistant
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_ops_cfg_0010.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>