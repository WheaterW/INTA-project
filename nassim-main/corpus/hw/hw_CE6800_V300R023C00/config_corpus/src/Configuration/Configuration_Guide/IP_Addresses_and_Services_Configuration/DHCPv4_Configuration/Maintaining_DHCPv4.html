
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Maintaining DHCPv4">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_dhcpv4_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_dhcpv4_cfg_0037.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_dhcpv4_cfg_0041.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512687006">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Maintaining DHCPv4 </title>
</head>
<body><a name="EN-US_TASK_0000001512687006"></a><a name="EN-US_TASK_0000001512687006"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Maintaining DHCPv4 </h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001512687006__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Clearing DHCPv4 Message Statistics</h4><div class="notice"><span class="noticetitle"><img src="public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>Statistics cannot be restored after being cleared. Exercise caution when clearing the statistics.</p>
</div></div>
<p>To clear DHCPv4 message statistics, run reset commands in the user view.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Clearing DHCPv4 message statistics</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="45.08%" id="mcps1.3.1.4.2.3.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="54.92%" id="mcps1.3.1.4.2.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="45.08%" headers="mcps1.3.1.4.2.3.1.1 "><p>Clear statistics about DHCPv4 messages sent and received by the device functioning as a DHCPv4 server.</p>
</td>
<td class="cellrowborder" valign="top" width="54.92%" headers="mcps1.3.1.4.2.3.1.2 "><p><a href="cmdqueryname=reset+dhcp+server+statistics"><b><span class="cmdname">reset dhcp server statistics</span></b></a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="45.08%" headers="mcps1.3.1.4.2.3.1.1 "><p>Clear statistics about DHCPv4 messages sent and received by the device functioning as a DHCPv4 relay agent.</p>
</td>
<td class="cellrowborder" valign="top" width="54.92%" headers="mcps1.3.1.4.2.3.1.2 "><p><a href="cmdqueryname=reset+dhcp+relay+statistics"><b><span class="cmdname">reset dhcp relay statistics</span></b></a> [ <strong><span>server-group</span></strong> <i><span class="varname">group-name</span></i> ]</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="45.08%" headers="mcps1.3.1.4.2.3.1.1 "><p>Clear statistics about DHCPv4 messages sent and received by the device functioning as a DHCPv4 client.</p>
</td>
<td class="cellrowborder" valign="top" width="54.92%" headers="mcps1.3.1.4.2.3.1.2 "><p><a href="cmdqueryname=reset+dhcp+client+statistics"><b><span class="cmdname">reset dhcp client statistics</span></b></a> [ <strong><span>interface</span></strong> <i><span class="varname">interface-type interface-number</span></i> ]</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="45.08%" headers="mcps1.3.1.4.2.3.1.1 "><p>Clear statistics about DHCPv4 messages sent and received by the device.</p>
</td>
<td class="cellrowborder" valign="top" width="54.92%" headers="mcps1.3.1.4.2.3.1.2 "><p><a href="cmdqueryname=reset+dhcp+statistics"><b><span class="cmdname">reset dhcp statistics</span></b></a></p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001512687006__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Resetting an Address Pool</h4><p>If a device functions as a DHCPv4 relay agent, it can request a DHCPv4 server to release client IPv4 addresses. A DHCPv4 relay agent can send a DHCPRELEASE message to a specified DHCPv4 server. After receiving the message, the server resets the corresponding IPv4 address to idle, allowing the released IPv4 address to be allocated to another DHCPv4 client.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Resetting an address pool</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="32.79%" id="mcps1.3.2.3.2.3.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="67.21000000000001%" id="mcps1.3.2.3.2.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="32.79%" headers="mcps1.3.2.3.2.3.1.1 "><p>Reset an interface address pool configured on the device.</p>
</td>
<td class="cellrowborder" valign="top" width="67.21000000000001%" headers="mcps1.3.2.3.2.3.1.2 "><p>User view: <a href="cmdqueryname=reset+ip+pool"><b><span class="cmdname">reset ip pool</span></b></a> <strong><span>interface</span></strong> <i><span class="varname">interface-name</span></i> { <i><span class="varname">start-ip-address</span></i> [ <i><span class="varname">end-ip-address</span></i> ] | <strong><span>all</span></strong> | <strong><span>conflict</span></strong> | <strong><span>expired</span></strong> | <strong><span>used</span></strong> }</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.79%" headers="mcps1.3.2.3.2.3.1.1 "><p>Reset a global address pool configured on the device.</p>
</td>
<td class="cellrowborder" valign="top" width="67.21000000000001%" headers="mcps1.3.2.3.2.3.1.2 "><p>User view: <a href="cmdqueryname=reset+ip+pool"><b><span class="cmdname">reset ip pool</span></b></a> <strong><span>name</span></strong> <i><span class="varname">ip-pool-name</span></i> { <i><span class="varname">start-ip-address</span></i> [ <i><span class="varname">end-ip-address</span></i> ] | <strong><span>all</span></strong> | <strong><span>conflict</span></strong> | <strong><span>expired</span></strong> | <strong><span>used</span></strong> }</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.79%" headers="mcps1.3.2.3.2.3.1.1 "><p>Configure the device functioning as a DHCPv4 relay agent to request a DHCPv4 server to release a client IPv4 address.</p>
</td>
<td class="cellrowborder" valign="top" width="67.21000000000001%" headers="mcps1.3.2.3.2.3.1.2 "><p>System or interface view: <a href="cmdqueryname=dhcp+relay+release"><b><span class="cmdname">dhcp relay release</span></b></a> <i><span class="varname">client-ip-address</span></i> <i><span class="varname">mac-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] [ <i><span class="varname">server-ip-address</span></i> ]</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This command releases only an IPv4 address that a DHCPv4 server dynamically allocates.</p>
<p>If multiple DHCPv4 relay agents exist between a DHCPv4 client and server, this command takes effect only on the first relay agent connected to the server.</p>
<div class="p">If the IPv4 address of a DHCPv4 server is specified, the device sends a DHCPRELEASE message only to this server. If no DHCPv4 server is specified:<ul><li>When the command is run in the system view, the device sends a DHCPRELEASE message to all the DHCPv4 servers connected to DHCPv4 relay interfaces.</li><li>When the command is run in the interface view, the device sends a DHCPRELEASE message to the DHCPv4 server connected to the interface.</li></ul>
</div>
</div></div>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001512687006__1.3.3"></a><a name="1.3.3"></a>
<div class="p"><h4 class="sectiontitle">Locking a Global Address Pool</h4><p>If the global address pool on a DHCPv4 server needs to be migrated to another DHCPv4 server, you can lock the global address pool so that the server cannot continue to allocate IPv4 addresses to DHCPv4 clients. After the address pool is migrated, new users apply for IPv4 addresses from a new address pool to go online.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 3 </b>Locking a global address pool</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="32.79%" id="mcps1.3.3.3.2.3.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="67.21000000000001%" id="mcps1.3.3.3.2.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="32.79%" headers="mcps1.3.3.3.2.3.1.1 "><p>Lock a global address pool.</p>
</td>
<td class="cellrowborder" valign="top" width="67.21000000000001%" headers="mcps1.3.3.3.2.3.1.2 "><p>Global address pool view: <a href="cmdqueryname=lock"><b><span class="cmdname">lock</span></b></a></p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001512687006__1.3.4"></a><a name="1.3.4"></a>
<div class="p"><h4 class="sectiontitle">Forcing a PC to Release or Update the IPv4 Address</h4><p>In certain scenarios such as fault locating, you can force a PC to release or update the IPv4 address. The following table lists related commands on several operating systems. For details about the commands, see related operating system documents.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 4 </b>Forcing a PC to release or update the IPv4 address</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="23.810000000000002%" id="mcps1.3.4.3.2.3.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="76.19%" id="mcps1.3.4.3.2.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="23.810000000000002%" headers="mcps1.3.4.3.2.3.1.1 "><p>Release an IPv4 address.</p>
</td>
<td class="cellrowborder" valign="top" width="76.19%" headers="mcps1.3.4.3.2.3.1.2 "><ul><li>Windows 7: <strong>ipconfig</strong> /<strong>release</strong></li><li>Windows 98's MS-DOS: <strong>winipcfg</strong> /<strong>release</strong></li><li>Unix-like: <strong>dhclient âr</strong></li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="23.810000000000002%" headers="mcps1.3.4.3.2.3.1.1 "><p>Renew the IPv4 address lease or apply for a new IPv4 address.</p>
</td>
<td class="cellrowborder" valign="top" width="76.19%" headers="mcps1.3.4.3.2.3.1.2 "><ul><li>Windows 7: <strong>ipconfig</strong> /<strong>renew</strong></li><li>Windows 98's MS-DOS: <strong>winipcfg</strong> /<strong>renew</strong></li><li>Unix-like: <strong>dhclient</strong></li></ul>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001512687006__1.3.5"></a><a name="1.3.5"></a>
<div class="p"><h4 class="sectiontitle">Canceling the Allocation of Fixed IPv4 Addresses to Clients</h4><p>On a device functioning as a DHCPv4 server, you can cancel the allocation of a specified IPv4 address to a static client. For example, you can cancel the allocation of the IPv4 address 10.1.1.5 in the address pool whose network segment address is 10.1.1.0 and mask length is 24 to a client. To check the static binding between a client and an IPv4 address, run the <a href="cmdqueryname=display+ip+pool"><b><span class="cmdname">display ip pool</span></b></a> { <strong><span>interface</span></strong> <i><span class="varname">interface-pool-name</span></i> | <strong><span>name</span></strong> <i><span class="varname">ip-pool-name</span></i> } <strong><span>used</span></strong> command.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 5 </b>Canceling the allocation of fixed IPv4 addresses to clients</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="23.810000000000002%" id="mcps1.3.5.3.2.3.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="76.19%" id="mcps1.3.5.3.2.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="23.810000000000002%" headers="mcps1.3.5.3.2.3.1.1 "><p>Reclaim IPv4 addresses.</p>
</td>
<td class="cellrowborder" valign="top" width="76.19%" headers="mcps1.3.5.3.2.3.1.2 "><p>User view: <a href="cmdqueryname=reset+ip+pool"><b><span class="cmdname">reset ip pool</span></b></a> { <strong><span>interface</span></strong> <i><span class="varname">interface-name</span></i> | <strong><span>name</span></strong> <i><span class="varname">ip-pool-name</span></i> } { <i><span class="varname">start-ip-address</span></i> [ <i><span class="varname">end-ip-address</span></i> ] | <strong><span>all</span></strong> | <strong><span>conflict</span></strong> | <strong><span>expired</span></strong> | <strong><span>used</span></strong> }</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="23.810000000000002%" headers="mcps1.3.5.3.2.3.1.1 "><p>Remove a static binding.</p>
</td>
<td class="cellrowborder" valign="top" width="76.19%" headers="mcps1.3.5.3.2.3.1.2 "><ul><li>If an interface address pool is used, run the following command in the corresponding interface view:<p><a href="cmdqueryname=undo+dhcp+server+static-bind"><b><span class="cmdname">undo dhcp server static-bind</span></b></a> [ <strong><span>ip-address</span></strong> <i><span class="varname">ip-address</span></i> | <strong><span>mac-address</span></strong> <i><span class="varname">mac-address</span></i> ]</p>
</li><li>If a global address pool is used, run the following command in the corresponding address pool view:<p><a href="cmdqueryname=undo+static-bind"><b><span class="cmdname">undo static-bind</span></b></a> [ <strong><span>ip-address</span></strong> <i><span class="varname">ip-address</span></i> | <strong><span>mac-address</span></strong> <i><span class="varname">mac-address</span></i> ]</p>
</li></ul>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_dhcpv4_cfg_0001.html">DHCPv4 Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_dhcpv4_cfg_0037.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_dhcpv4_cfg_0041.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>