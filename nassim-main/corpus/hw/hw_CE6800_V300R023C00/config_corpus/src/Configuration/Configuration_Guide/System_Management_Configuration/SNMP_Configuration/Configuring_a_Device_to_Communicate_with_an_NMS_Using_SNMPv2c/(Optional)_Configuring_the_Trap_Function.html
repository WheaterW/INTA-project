
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring the Trap Function">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0024.html">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0020_1.html">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0028.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563990657">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring the Trap Function</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563990657"></a><a name="EN-US_TASK_0000001563990657"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring the Trap Function</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563990657__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>The device can be configured to send specified traps to the NMS, which facilitates fault locating. To enhance the trap transmission security, specify parameters for sending traps.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563990657__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable the device to send traps to the NMS.</span><p><pre class="screen"><a href="cmdqueryname=snmp-agent+trap+enable"><b><span class="cmdname">snmp-agent trap enable</span></b></a></pre>
</p></li><li><span>Enable the function of sending a specified trap of a feature to the NMS.</span><p><pre class="screen"><a href="cmdqueryname=snmp-agent+trap+enable+feature-name"><b><span class="cmdname">snmp-agent trap enable feature-name</span></b></a> <i><span class="varname">feature-name</span></i> <strong><span>trap-name</span></strong> <i><span class="varname">trap-name</span></i></pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">If the <a href="cmdqueryname=snmp-agent+trap+enable"><b><span class="cmdname">snmp-agent trap enable</span></b></a> command has been run to enable the trap functions of all modules, or the <a href="cmdqueryname=snmp-agent+trap+enable+feature-name"><b><span class="cmdname">snmp-agent trap enable feature-name</span></b></a> command has been run to enable a specific trap function, note the following points:<ul><li><p>To disable the trap functions of all modules, run the <a href="cmdqueryname=snmp-agent+trap+disable"><b><span class="cmdname">snmp-agent trap disable</span></b></a> command.</p>
</li><li><p>To restore the trap functions of all modules to the default status, run the <a href="cmdqueryname=undo+snmp-agent+trap+enable"><b><span class="cmdname">undo snmp-agent trap enable</span></b></a> or <a href="cmdqueryname=undo+snmp-agent+trap+disable"><b><span class="cmdname">undo snmp-agent trap disable</span></b></a> command.</p>
</li><li><p>To disable the trap function for a specified module, run the <a href="cmdqueryname=undo+snmp-agent+trap+enable+feature-name"><b><span class="cmdname">undo snmp-agent trap enable feature-name</span></b></a> command.</p>
</li><li><p>To delete all the trap function configurations of a feature in a one-click manner, run the <a href="cmdqueryname=clear+configuration+snmp-agent+trap+enable+feature-name"><b><span class="cmdname">clear configuration snmp-agent trap enable feature-name</span></b></a> command.</p>
</li></ul>
</div>
</div></div>
</p></li><li><span>Disable the trap function for interface status.</span><p><ol type="a" id="EN-US_TASK_0000001563990657__en-us_task_0000001512671262_ol1562843183211"><li id="EN-US_TASK_0000001563990657__en-us_task_0000001512671262_li75627431327">Enter the interface view.<pre class="screen" id="EN-US_TASK_0000001563990657__en-us_task_0000001512671262_screen1051684815334"><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0000001563990657__en-us_task_0000001512671262_cmdname10464201116365">interface </span></b></a><i><span class="varname" id="EN-US_TASK_0000001563990657__en-us_task_0000001512671262_varname1796652873620">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0000001563990657__en-us_task_0000001512671262_varname1769723815360">interface-number</span></i></pre>
</li><li id="EN-US_TASK_0000001563990657__en-us_task_0000001512671262_li760317518326">Disable the trap function for interface status.<pre class="screen" id="EN-US_TASK_0000001563990657__en-us_task_0000001512671262_screen5741846103313"><a href="cmdqueryname=undo+enable+snmp+trap+updown"><b><span class="cmdname" id="EN-US_TASK_0000001563990657__en-us_task_0000001512671262_cmdname9281898371">undo enable snmp trap updown</span></b></a></pre>
<p id="EN-US_TASK_0000001563990657__en-us_task_0000001512671262_p17238184403712">By default, the trap function is enabled for all interfaces. When the interface status changes, a trap is generated. When an interface flaps, the interface frequently sends traps to the NMS, which increases the processing load of the NMS. In this case, you can disable the trap function on the interface.</p>
</li><li id="EN-US_TASK_0000001563990657__en-us_task_0000001512671262_li6655143203318">Return to the system view.<pre class="screen" id="EN-US_TASK_0000001563990657__en-us_task_0000001512671262_screen1497434483313"><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001563990657__en-us_task_0000001512671262_cmdname014922163718">quit</span></b></a></pre>
</li></ol>
</p></li><li><span>Set the source address of traps. Perform one or two of the following operations as required:</span><p><ul><li>Set the source interface of traps. The IPv4 address of the source interface is used as the source IPv4 address of traps.<pre class="screen"><a href="cmdqueryname=snmp-agent+trap+source"><b><span class="cmdname">snmp-agent trap source</span></b></a> { <em>interface-name</em> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> }</pre>
<p>To ensure device security, you are advised to specify the local loopback interface as the source interface of traps.</p>
<p>The source interface of traps specified on the device must be the same as that specified on the NMS. Otherwise, the NMS cannot receive the traps sent from the device.</p>
</li><li>Set the source IPv6 address of traps.<pre class="screen"><a href="cmdqueryname=snmp-agent+trap+source"><b><span class="cmdname">snmp-agent trap source</span></b></a> <a href="cmdqueryname=ipv6"><b><span class="cmdname">ipv6</span></b></a> <i><span class="varname">ipv6-address</span></i> [ <a href="cmdqueryname=vpn-instance"><b><span class="cmdname">vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> ]</pre>
</li></ul>
</p></li><li><span>Set a source port number for traps.</span><p><pre class="screen"><a href="cmdqueryname=snmp-agent+trap+source-port"><b><span class="cmdname">snmp-agent trap source-port</span></b></a> <i><span class="varname">port-number</span></i></pre>
</p><p><p>To improve network security, configure a specific source port number for traps. In this case, the user terminal's firewall filters packets based on the port number.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_snmp_cfg_0024.html">Configuring a Device to Communicate with an NMS Using SNMPv2c
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_snmp_cfg_0020_1.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_snmp_cfg_0028.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>