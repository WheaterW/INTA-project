
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an ETS Profile">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_dcb_cfg_0014.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_dcb_cfg_0016.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DCB">
<meta name="featuretype" content="DCN and Network Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DCB">
<meta name="featuretype" content="DCN and Network Management">
<meta name="featurename" content="DCB">
<meta name="featuretype" content="DCN and Network Management">
<meta name="featuretype" content="DCN and Network Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563989901">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring an ETS Profile</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563989901"></a><a name="EN-US_TASK_0000001563989901"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an ETS Profile</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563989901__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">ETS provides two-level flow control:<ul><li>Flow control based on the priority group: congestion management and traffic shaping based on the priority group</li><li>Flow control based on the priority: queue congestion management, queue shaping, and queue congestion avoidance</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563989901__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Create an ETS profile and enter the ETS profile view.</span><p><pre class="screen"><a href="cmdqueryname=dcb+ets-profile"><b><span class="cmdname">dcb ets-profile</span></b></a> <i><span class="varname">name</span></i></pre>
<p>The system provides a default ETS profile <strong>default</strong>. This profile can be modified but not deleted. You can create an ETS profile or modify the default ETS profile according to service requirements.</p>
</p></li><li><span>(Optional) Create a priority group.</span><p><pre class="screen"><a href="cmdqueryname=priority-group"><b><span class="cmdname">priority-group</span></b></a> <i><span class="varname">pg-group-value</span></i></pre>
<p>By default, an ETS profile defines three priority groups: PG0, PG1, and PG15.</p>
</p></li><li><span>Add the specified interface queues to a priority group.</span><p><pre class="screen"><a href="cmdqueryname=priority-group"><b><span class="cmdname">priority-group</span></b></a> <i><span class="varname">pg-group-value</span></i> <strong><strong><span>queue</span></strong></strong> { <i><span class="varname">start-queue-index</span></i> [ <strong><span>to</span></strong> <i><span class="varname">end-queue-index</span></i> ] } &amp;&lt;1-8&gt;</pre>
<p>By default, queues 0, 1, 2, 4, and 5 belong to PG0, queue 3 belongs to PG1, and queues 6 and 7 belong to PG15.</p>
</p></li><li><span>Configure flow control based on the priority group.</span><p><ul><li><p>Set the DRR weight of a priority group.</p>
<pre class="screen"><a href="cmdqueryname=priority-group"><b><span class="cmdname">priority-group</span></b></a> <i><span class="varname">pg-group-value</span></i> <strong><span>drr</span></strong> <strong><span>weight</span></strong> <i><span class="varname">weight-value</span></i></pre>
<p>For the <span>CE6866, CE6860-SAN, CE6866K, CE6860-HAM, CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, CE8850-HAM</span>: The DRR weights of PG0 and PG1 are both 50 by default.</p>
<p>For the <span>CE6855-48XS8CQ, CE6863E-48S8CQ, CE6885, CE6885-LL (standard forwarding mode), CE6885-SAN, CE6885-T, CE8851-32CQ4BQ, CE8855</span>: By default, the scheduling mode of the CIR token bucket based on PG0 and PG1 is PQ, and the scheduling mode of the EIR token bucket based on PG0 and PG1 is DRR with the weight being 50.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When there are more than three priority groups, multiple priority groups share system resources. When a priority group has the remaining bandwidth, scheduling of the remaining bandwidth may be inaccurate.</p>
<p>For the <span>CE6855-48XS8CQ, CE6863E-48S8CQ, CE6885, CE6885-LL (standard forwarding mode), CE6885-SAN, CE6885-T, CE8851-32CQ4BQ, CE8855</span>:</p>
<p>The default scheduling mode of the CIR token bucket based on priority groups is PQ and the rate is not limited by default. The priority groupâbased scheduling mode configured for the CIR token bucket does not take effect. The configured scheduling mode and the default configuration of PG0 and PG1 using DRR scheduling with their respective weight being 50 take effect only for the EIR (EIR = PIR â CIR) token bucket.</p>
</div></div>
</li><li><p>Enable traffic shaping for a priority group and set shaping parameters.</p>
<pre class="screen"><a href="cmdqueryname=priority-group"><b><span class="cmdname">priority-group</span></b></a> <i><span class="varname">pg-value</span></i> <strong><strong><span>shaping</span></strong></strong> <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i> { <strong><span>kbps</span></strong> | <strong><span>mbps</span></strong> | <strong><span>gbps</span></strong> } <strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i> { <strong><span>kbps</span></strong> | <strong><span>mbps</span></strong> | <strong><span>gbps</span></strong> } [ <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i> { <strong><span>kbytes</span></strong> | <strong><span>mbytes</span></strong>} <strong><span>pbs</span></strong> <i><span class="varname">pbs-value</span></i> { <strong><span>kbytes</span></strong> | <strong><span>mbytes</span></strong> } ]</pre>
<p>By default, traffic shaping is disabled for a priority group.</p>
</li></ul>
</p></li><li><span>Configure flow control based on the priority.</span><p><ul><li><p>Set a scheduling mode for interface queues.</p>
<pre class="screen"><a href="cmdqueryname=queue"><b><span class="cmdname">queue</span></b></a> { <i><span class="varname">start-queue-index</span></i> [ <strong><span>to</span></strong> <i><span class="varname">end-queue-index</span></i> ] } &amp;&lt;1-8&gt; { <strong><span>pq</span></strong> | <strong><span>lpq</span></strong> | <strong><span>drr </span></strong> [ <strong><span>weight</span></strong> <i><span class="varname">weight-value</span></i> ] }</pre>
<p>By default, an interface queue uses PQ for scheduling.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For the <span>CE6855-48XS8CQ, CE6863E-48S8CQ, CE6885, CE6885-LL (standard forwarding mode), CE6885-SAN, CE6885-T, CE8851-32CQ4BQ, CE8855</span>:</p>
<p>The default scheduling mode of the CIR token bucket based on interface queues is DRR scheduling and the default rate limit is 0. The interface queueâbased scheduling mode configured for the CIR token bucket does not take effect. The configured scheduling mode takes effect only for the EIR (EIR = PIR â CIR) token bucket.</p>
</div></div>
</li><li><p>Enable traffic shaping for interface queues and set shaping parameters.</p>
<pre class="screen"><a href="cmdqueryname=queue"><b><span class="cmdname">queue</span></b></a> { <i><span class="varname">start-queue-index</span></i> [ <strong><span>to</span></strong> <i><span class="varname">end-queue-index</span></i> ] } &amp;&lt;1-8&gt; <strong><span>shaping</span></strong> <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i> { <strong><span>kbps</span></strong> | <strong><span>mbps</span></strong> | <strong><span>gbps</span></strong> } <strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i> { <strong><span>kbps</span></strong> | <strong><span>mbps</span></strong> | <strong><span>gbps</span></strong> } [ <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i> { <strong><span>kbytes</span></strong> | <strong><span>mbytes</span></strong> } <strong><span>pbs</span></strong> <i><span class="varname">pbs-value</span></i> { <strong><span>kbytes</span></strong> | <strong><span>mbytes</span></strong> } ]</pre>
<p>By default, traffic shaping is disabled for an interface queue.</p>
</li></ul>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_dcb_cfg_0014.html">Configuring ETS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_dcb_cfg_0016.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>