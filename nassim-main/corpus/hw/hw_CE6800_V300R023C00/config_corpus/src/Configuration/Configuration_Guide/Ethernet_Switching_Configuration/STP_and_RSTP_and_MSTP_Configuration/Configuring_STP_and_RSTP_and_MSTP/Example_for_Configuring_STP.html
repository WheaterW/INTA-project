
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring STP">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1077.html">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1083.html">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1185.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="STP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSTP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="STP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="MSTP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="STP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001315231094">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring STP</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001315231094"></a><a name="EN-US_TASK_0000001315231094"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring STP</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001315231094__1.3.1"></a><a name="1.3.1"></a>
<div class="p" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_context1677625172748"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p199081611132310">In <a href="#EN-US_TASK_0000001315231094__en-us_task_0000001176742791_fig_dc_cfg_stp_003701">Figure 1</a>, there is a loop between DeviceA, DeviceB, DeviceC, and DeviceD. In this case, STP can be deployed on the network to break the loop and thereby avoid broadcast storms and MAC address flapping.</p>
<div class="fignone" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_fig_dc_cfg_stp_003701"><a name="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_fig_dc_cfg_stp_003701"></a><a name="en-us_task_0000001176742791_fig_dc_cfg_stp_003701"></a><span class="figcap"><b>Figure 1 </b>Network diagram of STP</span><div class="note" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_note164145990214028"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p1432651182214028">In this example, interface 1, interface 2, and interface 3 represent <span>100GE</span> <span>1/0/1</span>, <span>100GE</span> <span>1/0/2</span>, and <span>100GE</span> <span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_image8530152513814" src="figure/en-us_image_0000001176662945.png"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001315231094__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_steps2045678843175351"><li id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_step557253617175351"><span id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_cmd585356352175351">Configure each device to work in STP mode.</span><p><pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen1552142296175351">&lt;<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1072229196175351">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b237300019175351">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword767623853516"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword106812024161410">HUAWEI</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b162951875175351">sysname DeviceA</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword26595199374">*</span><span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword16306103810408">HUAWEI</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b182551329133713">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1831511522375"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b500701020175351">stp mode stp</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword185567193711">*</span>DeviceA] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b16218538143712">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen1678714263818">&lt;<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword2614185714388">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b11614165714388">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword741712512395"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword361418574388">HUAWEI</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b176140576384">sysname DeviceB</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword193553580397">*</span><span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1374114944018">HUAWEI</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b14355165819397">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1425011232396"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b6614145710385">stp mode stp</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword36434744018">*</span>DeviceB] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1464320715402">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen186101047123811">&lt;<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1283325817388">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b198331058103812">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword75031831143918"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1783314589385">HUAWEI</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b28331058193813">sysname DeviceC</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword728113374114">*</span><span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword12281163204114">HUAWEI</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1528117313413">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword269137123918"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b11833145853810">stp mode stp</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1796147401">*</span>DeviceC] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b291314134013">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen1549925113814">&lt;<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword95013073910">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b19505014397">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword9189174113912"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword5502003397">HUAWEI</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b750180173919">sysname DeviceD</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword743812914113">*</span><span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword0438139194115">HUAWEI</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1543811924115">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1758184310398"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b175090163919">stp mode stp</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1778581615409">*</span>DeviceD] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b8785131664011">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_step825334338175351"><span id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_cmd797342793175351">Specify the root bridge and a secondary root bridge. It is best reality to specify network devices with high performance and higher network layers as the root bridge and a secondary root bridge.</span><p><p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p424474875175351"># Configure DeviceA as the root bridge.</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen895371071175351">[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1999532134214"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b2051802993175351">stp root primary</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword7886251174119">*</span>DeviceA] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b588665104110">commit</strong></pre>
<p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p1959609775175351"># Configure DeviceB as a secondary root bridge.</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen1765727143175351">[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword228083911428"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b2147037553175351">stp root secondary</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword7202113316421">*</span>DeviceB] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b2202103304217">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_step230378121175351"><span id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_cmd52064106175351">Configure all devices on the network to use the same path cost calculation method. Set a path cost value for <span>100GE</span> <span>1/0/1</span> on DeviceC to block this port.</span><p><p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p502278118175351"># Configure DeviceA to use the Huawei legacy standard to calculate the path cost.</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen178159169175351">[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword13872152134218"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b617998074175351">stp pathcost-standard legacy</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword82396581444">*</span>DeviceA] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1523955804410">commit</strong></pre>
<p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p1140692683175351"># Configure DeviceB to use the Huawei legacy standard to calculate the path cost.</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen1164072111175351">[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword38745518423"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1559120376175351">stp pathcost-standard legacy</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword12616131459">*</span>DeviceB] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1561113124517">commit</strong></pre>
<p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p1324711764175351"># Configure DeviceC to use the Huawei legacy standard to calculate the path cost. Set the path cost value for <span>100GE</span> <span>1/0/1</span> on DeviceC to 20000, which is greater than that for any other interface, to block this <span>100GE</span> <span>1/0/1</span>.</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen2071654385175351">[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword6806158144315"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1222468849175351">stp pathcost-standard legacy</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1424848144617">*</span>DeviceC] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1048996680175351">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword854271403016">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1104986900214028">portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1438613442461">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1420589752175351">stp cost 20000</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword9249846204610">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1201143535519">undo shutdown</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword7905721175515">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b69051821105518">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword3125432204510">*</span>DeviceC] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b81251932124519">commit</strong></pre>
<p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p946060500175351"># Configure DeviceD to use the Huawei legacy standard to calculate the path cost.</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen284679869175351">[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword73996139434"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b760183941175351">stp pathcost-standard legacy</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword19181172211479">*</span>DeviceD] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b18181222194712">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_step560495906175351"><span id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_cmd1391416400175351">Disable STP on DeviceB's and DeviceC's ports that are connected to PCs.</span><p><p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p1164189327175351"># Disable STP on DeviceB's <span>100GE</span> <span>1/0/2</span>.</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen1657357235175351">[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword34431620194315"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1065197705175351">interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword399253311345"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1738294518340">portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1562615227435"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1365742476175351">stp disable</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword12408125854611">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1252506137175351">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1060113440470">*</span>DeviceB] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b19602134434714">commit</strong></pre>
<p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p1925694871175351"># Disable STP on DeviceC's <span>100GE</span> <span>1/0/2</span>.</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen151047358175351">[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1744052510439"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1374533239175351">interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword3916240173417"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b927464614349">portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1633027114313"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1563015360175351">stp disable</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1392840184712">*</span>DeviceC-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b811380994175351">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword156965710477">*</span>DeviceC] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b16569195714477">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_step31139910413"><span id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_cmd161131593413">Enable STP on each device.</span><p><p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p18225164915422">By default, STP, RSTP, or MSTP is enabled on a device. You can run the <a href="cmdqueryname=stp+enable"><b><span class="cmdname" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_cmdname19304419161616">stp enable</span></b></a> command in the system view to enable this function if it is disabled.</p>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_example121226172748"><a name="EN-US_TASK_0000001315231094__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p1447902311175351">After the spanning tree calculation is stable, verify the configuration as follows:</p>
<p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p936987490175351"># Run the <a href="cmdqueryname=display+stp+brief"><b><span class="cmdname" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_cmdname1930848975175351">display stp brief</span></b></a> command on DeviceA to check the port role and status. The command output shows that <span>100GE</span> <span>1/0/1</span> and <span>100GE</span> <span>1/0/2</span> have been elected as designated ports during spanning tree calculation and are in Forwarding state.</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen1857196808175351">[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword462515431431"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b1565212476175351">display stp brief</strong>
 MSTID  Port                        Role  STP State     Protection      Cost    Edged
     0  <span>100GE</span><span>1/0/1</span>                  <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b497498329175351">DESI</strong>  forwarding    none              2     disable
     0  <span>100GE</span><span>1/0/2</span>                  <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b376959922175351">DESI</strong>  forwarding    none              2     disable
</pre>
<p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p1667256243175351"># Run the <a href="cmdqueryname=display+stp+interface+brief"><b><span class="cmdname" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_cmdname1722592029175351">display stp interface brief</span></b></a> command on DeviceB to check the role and status of <span>100GE</span> <span>1/0/1</span>. The command output shows that <span>100GE</span> <span>1/0/1</span> has been elected as a designated port and is in Forwarding state.</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen1027685358175351">[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword1074846164314"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b237503357175351">display stp interface <span>100ge</span> <span>1/0/1</span> brief</strong>
 MSTID  Port                        Role  STP State     Protection      Cost    Edged
     0  <span>100GE</span><span>1/0/1</span>                  <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b826794481175351">DESI</strong>  forwarding    none              2     disable
</pre>
<p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p100717501175351"># Run the <a href="cmdqueryname=display+stp+brief"><b><span class="cmdname" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_cmdname259094193175351">display stp brief</span></b></a> command on DeviceC to check the port role and status. The command output shows that <span>100GE</span> <span>1/0/1</span> has been elected as an alternate port and is in Discarding state and that <span>100GE</span> <span>1/0/3</span> has been elected as a root port and is in Forwarding state.</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen387893792175351">[<span class="keyword" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_keyword35561349174314"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b2089867919175351">display stp brief</strong>
 MSTID  Port                        Role  STP State     Protection      Cost    Edged
     0  <span>100GE</span><span>1/0/1</span>                  <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b603568753175351">ALTE</strong>  discarding    none          20000     disable
     0  <span>100GE</span><span>1/0/3</span>                  <strong id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_b166256955175351">ROOT</strong>  forwarding    none              2     disable
</pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001315231094__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_ul445600534175351"><li id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_li1369608690175351"><p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p136040637175351"><a name="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_li1369608690175351"></a><a name="en-us_task_0000001176742791_li1369608690175351"></a>DeviceA</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen755919738175351">#
sysname DeviceA
#
stp mode stp
stp instance 0 root primary
stp pathcost-standard legacy
#
return</pre>
</li><li id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_li1959672978175351"><p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p267047207175351"><a name="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_li1959672978175351"></a><a name="en-us_task_0000001176742791_li1959672978175351"></a>DeviceB</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen1903784481175351">#
sysname DeviceB
#
stp mode stp
stp instance 0 root secondary
stp pathcost-standard legacy
#
interface <span>100GE</span><span>1/0/2</span>  
 stp disable
#
return</pre>
</li><li id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_li1194975599175351"><p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p687825649175351"><a name="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_li1194975599175351"></a><a name="en-us_task_0000001176742791_li1194975599175351"></a>DeviceC</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen271984890175351">#
sysname DeviceC
#
stp mode stp
stp pathcost-standard legacy
#
interface <span>100GE</span><span>1/0/1</span>
 stp instance 0 cost 20000
#
interface <span>100GE</span><span>1/0/2</span>
 stp disable
#
return</pre>
</li><li id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_li550150234175351"><p id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_p1457882503175351"><a name="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_li550150234175351"></a><a name="en-us_task_0000001176742791_li550150234175351"></a>DeviceD</p>
<pre class="screen" id="EN-US_TASK_0000001315231094__en-us_task_0000001176742791_screen862894353175351">#
sysname DeviceD
#
stp mode stp
stp pathcost-standard legacy
#
return</pre>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_stp_cfg_1077.html">Configuring STP/RSTP/MSTP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_stp_cfg_1083.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_stp_cfg_1185.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>