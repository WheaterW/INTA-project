
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Understanding ARP">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_title.html">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="spec/ARP_limitation_23.0.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ARP">
<meta name="featurename" content="IP Address Conflict Detection">
<meta name="featurename" content="Dynamic ARP">
<meta name="featurename" content="Static ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001176743503">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="public_sys-resources/imagePopup.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/customQuery.js"></script>
<script language="javascript" type="text/javascript" src="public_sys-resources/imagePopup.js"></script>
<title>Understanding ARP</title>
</head>
<body><a name="EN-US_CONCEPT_0000001176743503"></a><a name="EN-US_CONCEPT_0000001176743503"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Understanding ARP</h1>
<div><div class="section"><h4 class="sectiontitle">ARP Message Format</h4><p><a href="#EN-US_CONCEPT_0000001176743503__fig1054852051912">Figure 1</a> shows the ARP message format. An Ethernet frame in which an ARP message is encapsulated in the payload is called an ARP frame. An ARP message is only 28 bytes long. The minimum data length of an Ethernet frame is 46 bytes and the maximum data length is 1500 bytes. If the data length of an Ethernet frame is less than 46 bytes, padding bytes are added to meet the requirement for the minimum data length. The padding length may vary with devices. The minimum padding length is 18 bytes.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001176743503__fig1054852051912"><a name="EN-US_CONCEPT_0000001176743503__fig1054852051912"></a><a name="fig1054852051912"></a><span class="figcap"><b>Figure 1 </b>ARP message format</span><br><span><img class="imgResize" src="figure/en-us_image_0000001378894410.png" width="523.621" height="257.624458" title="Click to enlarge"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Description of main fields</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.3.1.4.2.3.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.3.1.4.2.3.1.2" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>Ethernet destination address</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>Ethernet destination MAC address. For an ARP request message, the value of this field is the broadcast MAC address 0xFF-FF-FF-FF-FF-FF.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>Ethernet source address</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>Ethernet source MAC address.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>Frame type</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>Data type.</p>
<p>For an ARP request or reply message, the value of this field is 0x0806.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>Data</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>Payload. The minimum data length of an Ethernet frame is 46 bytes and the maximum data length is 1500 bytes. If the data length of an Ethernet frame is less than 46 bytes, padding bytes are added to meet the requirement for the minimum data length.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>Hardware type</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>Hardware address type. For an Ethernet network, the value of this field is 1.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>Protocol type</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>Mapped protocol address type. For an IP address, the value of this field is 0x0800.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>Hardware address length</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>Hardware address length. For an ARP request or reply message, the value of this field is 6.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>Protocol address length</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>Protocol address length. For an ARP request or reply message, the value of this field is 4.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>OP</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>Operation type. Values 1 and 2 indicate an ARP request and reply, respectively.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>Sender MAC address</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>MAC address of the sender.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>Sender IP address</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>IP address of the sender.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>Target MAC address</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>Destination MAC address. For an ARP request message, the value of this field is 0x00-00-00-00-00-00.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>Target IP address</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>IP address of the receiver.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.1 "><p>CRC</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.1.4.2.3.1.2 "><p>Cyclic redundancy check, which is used to check whether an error occurs in the frame.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section"><h4 class="sectiontitle">Address Resolution Process</h4><p>ARP uses ARP request and reply messages to complete address resolution.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001176743503__fig_dc_fd_ARP_000101"><a name="EN-US_CONCEPT_0000001176743503__fig_dc_fd_ARP_000101"></a><a name="fig_dc_fd_ARP_000101"></a><span class="figcap"><b>Figure 2 </b>ARP request</span><br><span><img class="vsd" src="figure/en-us_image_0000001130624068.png"></span></div>
<p>As shown in <a href="#EN-US_CONCEPT_0000001176743503__fig_dc_fd_ARP_000101">Figure 2</a>, HostA and HostB are on the same network segment, and HostA needs to send IP datagrams to HostB.</p>
<p>HostA searches the local ARP table for the ARP entry corresponding to HostB. If the corresponding ARP entry is found, HostA encapsulates the IP datagrams into Ethernet frames and forwards them to HostB based on its MAC address.</p>
<p>If the corresponding ARP entry is not found, HostA caches the IP datagrams and broadcasts an ARP request message. In the ARP request message, the IP and MAC addresses of the sender are the IP and MAC addresses of HostA. The destination IP address is the IP address of HostB, and the destination MAC address comprises all 0s. All hosts on the same network segment can receive the ARP request message, but only HostB processes the message.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001176743503__fig_dc_fd_ARP_000102"><a name="EN-US_CONCEPT_0000001176743503__fig_dc_fd_ARP_000102"></a><a name="fig_dc_fd_ARP_000102"></a><span class="figcap"><b>Figure 3 </b>ARP reply</span><br><span><img class="vsd" src="figure/en-us_image_0000001176663609.png"></span></div>
<p>HostB compares its IP address with the destination IP address in the ARP request message. If the two addresses are the same, HostB adds the IP and MAC addresses of the sender (HostA) to the local ARP table. HostB then unicasts an ARP reply message, which contains its MAC address, to HostA, as shown in <a href="#EN-US_CONCEPT_0000001176743503__fig_dc_fd_ARP_000102">Figure 3</a>.</p>
<p>After receiving the ARP reply message, HostA adds HostB's MAC address into the local ARP table. In addition, HostA encapsulates the IP datagrams and forwards them to HostB.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_arp_cfg_title.html">ARP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_arp_cfg_0001.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="spec/ARP_limitation_23.0.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>

<script language="JavaScript">
<!--
initImageViewer('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>