
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Subscribing to IPv6 Route Change Events">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_ops_cfg_0018.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ops_cfg_0032.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ops_cfg_0034.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OPS">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="OPS">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="OPS">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000001654803448">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Subscribing to IPv6 Route Change Events</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TOPIC_0000001654803448"></a><a name="EN-US_TOPIC_0000001654803448"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Subscribing to IPv6 Route Change Events</h1>
<div><div class="section"><h4 class="sectiontitle">Application Phase</h4><p>Subscription phase</p>
</div>
<div class="section"><h4 class="sectiontitle">Function Prototype</h4><p>result1_value, result2_description = _ops.route.subscribe6(tag, network, maskLen, minLen=None, maxLen=None, vpnName="_public_", optype="all", protocol="all")</p>
</div>
<div class="section"><h4 class="sectiontitle">Parameter Description</h4>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.2.1.4.1.1" liSelected="liSelected"><p>Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.2.1.4.1.2" liSelected="liSelected"><p>Description</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.2.1.4.1.3" liSelected="liSelected"><p>Value</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.1 "><p>tag</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.2 "><p>Specifies conditions.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.3 "><p>The value is a string of 1 to 8 case-sensitive characters, consists of letters, digits, and underscores (_), and starts with a letter. The value of <strong>tag</strong> cannot be <strong>and</strong>, <strong>or</strong>, or <strong>not</strong>. If only one condition is subscribed to in the script, the value can be an empty string. If multiple conditions are subscribed to, the value cannot be empty and must be unique in the script.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.1 "><p>network</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.2 "><p>Specifies an IPv6 route prefix.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.3 "><p>The value is in the IPv6 address format, such as 2001:db8:1::2.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.1 "><p>maskLen</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.2 "><p>Specifies a mask length.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.3 "><p>The value is an integer ranging from 0 to 128.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.1 "><p>minLen</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.2 "><p>Specifies the minimum mask length.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.3 "><p>The value is an integer that must be greater than or equal to the <strong>maskLen</strong> value.</p>
<p>The default value is <strong>None</strong>, indicating the minimum mask length is 0.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.1 "><p>maxLen</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.2 "><p>Specifies the maximum mask length.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.3 "><p>The value is an integer that must be greater than or equal to the <strong>minLen</strong> value.</p>
<p>The default value is <strong>None</strong>, indicating the maximum mask length is 0.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.1 "><p>vpnName</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.2 "><p>Specifies the name of the VPN instance in which route change events are to be subscribed to.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.3 "><p>The value is a string of 1 to 31 characters.</p>
<p>If the parameter is not specified, change events of the corresponding public network routes are subscribed to by default.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.1 "><p>type</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.2 "><p>Specifies an IPv6 route change event type.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.3 "><p>The value is of the enumerated type:</p>
<ul><li>add: Routes are added.</li><li>remove: Routes are deleted.</li><li>modify: Routes are modified.</li><li>all: Indicates all route changes.</li></ul>
<p>The default value is <strong>all</strong>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.1 "><p>protocol</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.2 "><p>Specifies a route type.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.1.4.1.3 "><p>The value is a character string, which can be:</p>
<ul><li>direct: direct routes</li><li>static: static routes</li><li>isis: IS-IS routes</li><li>bgp: BGP routes</li><li>unr: user network routes</li><li>all: all routes</li></ul>
<p>The default value is <strong>all</strong>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section"><h4 class="sectiontitle">Return Values</h4><p><strong>result1_value</strong> and <strong>result2_description</strong> in the function prototype indicate return values.</p>
<p><strong>result1_value</strong> is the first return value, with value 0 indicating a success, and value 1 indicating a failure.</p>
<p><strong>result2_description</strong> is the second return value and describes the result. This value is a character string.</p>
</div>
<div class="section"><h4 class="sectiontitle">Usage Description</h4><p>This API can only be used in _ops_condition() of the maintenance assistant script.</p>
</div>
<ul><li>A route change event can be triggered only when active routes change.</li><li>A route change event is not triggered when route recursion results change or inactive routes change.</li><li>The add event is triggered when an active route with a high preference is added.</li><li>The remove and add events are triggered when an active route is deleted and a sub-optimal route becomes active.</li><li>A maximum of three route change events can be triggered per second. If multiple route changes match the subscription conditions, a maximum of 100 events can be triggered.</li><li>You can specify a VPN instance to subscribe to change events of VPN routes. If no VPN instance is specified, change events of the corresponding public network routes are subscribed to by default.</li><li>The specified VPN instance must be an existing one on the device, and the IPv6 address must have been enabled in the VPN instance. If either condition is not met, the subscription rule does not take effect.</li><li>After a specified VPN instance is deleted, the corresponding subscription rule is also deleted.</li></ul>
<div class="section"><h4 class="sectiontitle">Usage Examples</h4><p>When a route with the prefix 2001:db8:1::2/64 is added to or deleted from the VPN instance <strong>testVPN</strong>, a route change event is triggered.</p>
<pre class="screen">test.py
def ops_condition(_ops): 
       ret, reason = _ops.route.subscribe6("con0", "2001:db8:1::2", maskLen=64, vpnName="testVpn", optype="all", protocol="all") 
       ret, reason = _ops.correlate("con0") 
       return ret 
def ops_execute(_ops): 
       a, description = _ops.context.save("test.py",'Route event trigger')  
       return 0</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_ops_cfg_0018.html">OPS Capability Set
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_ops_cfg_0032.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_ops_cfg_0034.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>