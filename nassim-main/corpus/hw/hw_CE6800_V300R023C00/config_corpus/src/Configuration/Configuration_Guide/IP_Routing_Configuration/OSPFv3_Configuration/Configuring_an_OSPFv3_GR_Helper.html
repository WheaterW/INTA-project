
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an OSPFv3 GR Helper">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0078_copy.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0085.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130623218">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring an OSPFv3 GR Helper</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130623218"></a><a name="EN-US_TASK_0000001130623218"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an OSPFv3 GR Helper</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130623218__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring an OSPFv3 GR helper, you have completed the following task:</p>
<ul><li><p><a href="vrp_ospfv3_cfg_0009.html">Configure basic OSPFv3 functions</a>.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130623218__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Graceful restart (GR) is a high availability (HA) technology used to ensure normal traffic forwarding and non-stop forwarding of key services during the restart of routing protocols. HA comprises of a comprehensive set of techniques, such as fault-tolerant redundancy, link protection, faulty node recovery, and traffic engineering. As a fault-tolerant redundancy technology, GR is also widely used to ensure non-stop forwarding of key services during a master/slave main control board switchover or system upgrade.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>GR involves two roles: GR restarter and GR helper. Currently, a device can only function as a GR helper.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130623218__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the OSPFv3 view.</span><p><pre class="screen"><a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
</p></li><li><span>Configure the device as a GR helper and specify a filtering policy so that the device functions as the GR helper only for the OSPFv3 neighbors that match the filtering policy. Select either of the following filtering methods based on actual conditions:</span><p><ul><li>Based on an ACL<ol type="a"><li>Return to the system view.<pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Create an ACL and enter the ACL view.<pre class="screen"><span><a href="cmdqueryname=acl+ipv6"><b><span class="cmdname">acl ipv6</span></b></a> { <strong><span>name</span></strong> <i><span class="varname">basic-acl6-name</span></i> <strong><span>basic</span></strong> | [ <strong><span>number</span></strong> ] <i><span class="varname">basic-acl6-number</span></i> }</span></pre>
</li><li>Configure an ACL rule.<pre class="screen"><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } [ <strong><span>fragment</span></strong> | <strong><span>source</span></strong> { <i><span class="varname">source-ipv6-address</span></i> { <i><span class="varname">prefix-length</span></i> | <i><span class="varname">source-wildcard</span></i> } | <i><span class="varname">source-ipv6-address/prefix-length</span></i> | <strong><span>any</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>logging</span></strong> ] <sup>*</sup></pre>
<p>When the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command is used to configure a filtering rule for a named ACL, only the configurations specified by <strong><span>source</span></strong> and <strong><span>time-range</span></strong> take effect.</p>
</li><li>Enter the OSPFv3 view.<pre class="screen"><a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
</li><li>Implement filtering based on the ACL.<pre class="screen"><a href="cmdqueryname=helper-role"><b><span class="cmdname">helper-role</span></b></a> [ <strong><span>acl-number</span></strong> <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> ]</pre>
</li></ol>
</li><li>Based on an IP prefix list<pre class="screen"><a href="cmdqueryname=helper-role"><b><span class="cmdname">helper-role</span></b></a> [ <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> ]</pre>
</li></ul>
</p></li><li><span>(Optional) Disable the device from checking LSAs when it functions as a GR helper.</span><p><pre class="screen"><a href="cmdqueryname=helper-role"><b><span class="cmdname">helper-role</span></b></a> <strong><span>lsa-checking-ignore</span></strong></pre>
<p>By default, a device performs strict check on all types of received LSAs.</p>
</p></li><li><span>(Optional) Configure the device to support only planned GR when it functions as a GR helper.</span><p><pre class="screen"><a href="cmdqueryname=helper-role"><b><span class="cmdname">helper-role</span></b></a> <strong><span>planned-only</span></strong> </pre>
<p>By default, a GR helper supports both planned GR and unplanned GR.</p>
</p></li><li><span>(Optional) Set the maximum restart period allowed by the GR helper.</span><p><pre class="screen"><a href="cmdqueryname=helper-role"><b><span class="cmdname">helper-role</span></b></a> <strong><span>max-grace-period</span></strong> <i><span class="varname">period</span></i></pre>
<p>By default, the maximum restart period allowed by a GR helper is 120 seconds.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130623218__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130623218__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001130623218__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the following command to check the previous configuration:</p>
<ul><li><p>Run the <a href="cmdqueryname=display+ospfv3"><b><span class="cmdname">display ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>graceful-restart-information</span></strong> command to check the OSPFv3 GR helper status.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospfv3_cfg_0000.html">OSPFv3 Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospfv3_cfg_0078_copy.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ospfv3_cfg_0085.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>