
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring PIM-SM in the ASM Model">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_pim_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="vrp_pim_cfg_0015.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176743273">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring PIM-SM in the ASM Model</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176743273"></a><a name="EN-US_TASK_0000001176743273"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring PIM-SM in the ASM Model</h1>
<div class="taskbody" id="taskbody0000001142026473"><div class="context"><a name="EN-US_TASK_0000001176743273__1.3.1"></a><a name="1.3.1"></a>
<div class="p" id="EN-US_TASK_0000001176743273__context641855796214040"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0000001176743273__p1262427251214040">On the ISP network shown in <a href="#EN-US_TASK_0000001176743273__fig_dc_vrp_multicast_cfg_003701">Figure 1</a>, multicast services are deployed. An IGP has been deployed on the network, unicast services are running properly, and the network has been connected to the Internet. It is required that hosts receive VOD information in multicast mode. You can configure a static RP, dynamic RP election, or both. If both a static RP and dynamic RP election are configured, dynamic RP election is preferentially used, with the static RP as a backup.</p>
<div class="fignone" id="EN-US_TASK_0000001176743273__fig_dc_vrp_multicast_cfg_003701"><a name="EN-US_TASK_0000001176743273__fig_dc_vrp_multicast_cfg_003701"></a><a name="fig_dc_vrp_multicast_cfg_003701"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring PIM-SM in the ASM model</span><div class="note" id="EN-US_TASK_0000001176743273__note938277739214040"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001176743273__p661539452214040">In this example, interface 1, interface 2, interface 3, and interface 4 represent <span>100GE</span><span>1/0/1</span>, <span>100GE</span><span>1/0/2</span>, <span>100GE</span><span>1/0/3</span>, and <span>100GE</span><span>1/0/4</span>, respectively.</p>
</div></div>
<p id="EN-US_TASK_0000001176743273__p2702139810"><span><img class="vsd" id="EN-US_TASK_0000001176743273__image3705135814" src="figure/en-us_image_0000001130623868.png"></span></p>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176743273__1.3.2"></a><a name="1.3.2"></a>
<div class="p" id="EN-US_TASK_0000001176743273__context502009909214040"><h4 class="sectiontitle">Precautions</h4><p id="EN-US_TASK_0000001176743273__p75257084214040">Note the following during the configuration:</p>
<ul id="EN-US_TASK_0000001176743273__ul797713866214040"><li id="EN-US_TASK_0000001176743273__li47234539214040"><p id="EN-US_TASK_0000001176743273__p1449431230214040"><a name="EN-US_TASK_0000001176743273__li47234539214040"></a><a name="li47234539214040"></a>To use a static RP, configure the same RP address on all <span class="keyword" id="EN-US_TASK_0000001176743273__keyword1298613286138">devices</span>.</p>
</li><li id="EN-US_TASK_0000001176743273__li485379516214040"><p id="EN-US_TASK_0000001176743273__p1630634106214040"><a name="EN-US_TASK_0000001176743273__li485379516214040"></a><a name="li485379516214040"></a>If users need to receive data from a specified multicast source, configure PIM-SM in the SSM model, and ensure that all <span class="keyword" id="EN-US_TASK_0000001176743273__keyword3611154661610">devices</span> have the same SSM group address range.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176743273__1.3.3"></a><a name="1.3.3"></a>
<div class="p" id="EN-US_TASK_0000001176743273__context104352733214040"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001176743273__p945745949214040">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001176743273__ol594465791214040"><li id="EN-US_TASK_0000001176743273__li590381354214040"><p id="EN-US_TASK_0000001176743273__p1164967538214040"><a name="EN-US_TASK_0000001176743273__li590381354214040"></a><a name="li590381354214040"></a>Configure IP addresses and a unicast routing protocol for interfaces on each <span class="keyword" id="EN-US_TASK_0000001176743273__keyword59861528181315">device</span>.</p>
</li><li id="EN-US_TASK_0000001176743273__li1922247548214040"><p id="EN-US_TASK_0000001176743273__p470553768214040"><a name="EN-US_TASK_0000001176743273__li1922247548214040"></a><a name="li1922247548214040"></a>Enable the multicast function on all <span class="keyword" id="EN-US_TASK_0000001176743273__keyword729111353415">devices</span> that need to provide multicast services and enable PIM-SM on all the involved interfaces.</p>
</li><li id="EN-US_TASK_0000001176743273__li1285658411214040"><p id="EN-US_TASK_0000001176743273__p80457563214040"><a name="EN-US_TASK_0000001176743273__li1285658411214040"></a><a name="li1285658411214040"></a>Enable IGMP on the interfaces that directly connect <span class="keyword" id="EN-US_TASK_0000001176743273__keyword52311445101916">devices</span> to hosts.</p>
</li><li id="EN-US_TASK_0000001176743273__li1220684599214040"><p id="EN-US_TASK_0000001176743273__p1134775602214040"><a name="EN-US_TASK_0000001176743273__li1220684599214040"></a><a name="li1220684599214040"></a>Configure RPs. On a PIM-SM network, an RP is an RPT's root node. Using a <span class="keyword" id="EN-US_TASK_0000001176743273__keyword498692811316">device</span> that has a large number of multicast traffic branches, <span class="keyword" id="EN-US_TASK_0000001176743273__keyword19986828151318">Device</span>E in <a href="#EN-US_TASK_0000001176743273__fig_dc_vrp_multicast_cfg_003701">Figure 1</a> for example, as an RP is recommended.</p>
</li><li id="EN-US_TASK_0000001176743273__li1694264345017">(Optional) Configure a BSR boundary on the interface that connects <span class="keyword" id="EN-US_TASK_0000001176743273__keyword52351045163614">Device</span>D to the Internet.</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176743273__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001176743273__steps1146551020214040"><li id="EN-US_TASK_0000001176743273__step352383085214040"><span id="EN-US_TASK_0000001176743273__cmd1890094816214040">Assign an IP address to each <span class="keyword" id="EN-US_TASK_0000001176743273__keyword2605172923813">device</span> interface and configure a unicast routing protocol. For detailed configurations, see Configuration Scripts.</span></li><li id="EN-US_TASK_0000001176743273__step1218444209214040"><span id="EN-US_TASK_0000001176743273__cmd2135246518214040">Enable the multicast function on all <span class="keyword" id="EN-US_TASK_0000001176743273__keyword13554319318">devices</span> and enable PIM-SM on all the involved interfaces.</span><p><p id="EN-US_TASK_0000001176743273__p410530416214040"># Enable PIM-SM, using DeviceE as an example. The configurations of other devices are similar to those shown in this example and are not mentioned here.</p>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen649115947214040">[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword145944515363"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword15991192815137">Device</span>E] <strong id="EN-US_TASK_0000001176743273__b1811131987214040">multicast routing-enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword14923103811400">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword13991102813136">Device</span>E] <strong id="EN-US_TASK_0000001176743273__b1890793725316">interface </strong><strong id="EN-US_TASK_0000001176743273__b15391939145314"><span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword152581142112813">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword10270101012254">Device</span>E-<span>100GE</span><span>1/0/1</span>]<strong id="EN-US_TASK_0000001176743273__b1411331915257"> undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword564364342817">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword29915282138">Device</span>E-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176743273__b1197527050214040">pim sm</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword117631244102813">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword1299142818133">Device</span>E-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176743273__b2055401610214040">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword12744104718282">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword1991142821319">Device</span>E] <strong id="EN-US_TASK_0000001176743273__b1952249227214040">interface <span>100GE</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword4971134143913">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword397133473919">Device</span>E-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001176743273__b5971183493913">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword143021349122815">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword699142871318">Device</span>E-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001176743273__b1251708442214040">pim sm</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword11601125392814">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword1899132811137">Device</span>E-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001176743273__b1730754851214040">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword15203115592815">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword899152810138">Device</span>E] <strong id="EN-US_TASK_0000001176743273__b1560479985214040">interface <span>100GE</span> <span>1/0/3</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword104042564284">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword69317132716">Device</span>E-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001176743273__b19111714279">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword16209195810287">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword13991152881312">Device</span>E-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001176743273__b509703633214040">pim sm</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword136719591280">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword15992122891311">Device</span>E-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001176743273__b2015979544214040">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword48997013298">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword18992028181310">Device</span>E] <strong id="EN-US_TASK_0000001176743273__b2026654935214040">interface <span>100GE</span> <span>1/0/4</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword1680821297">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword1567513201273">Device</span>E-<span>100GE</span><span>1/0/4</span>] <strong id="EN-US_TASK_0000001176743273__b367562019275">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword158917762912">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword6992192871312">Device</span>E-<span>100GE</span><span>1/0/4</span>] <strong id="EN-US_TASK_0000001176743273__b575353325214040">pim sm</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword1886418912912">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword6992192871317">Device</span>E-<span>100GE</span><span>1/0/4</span>] <strong id="EN-US_TASK_0000001176743273__b70980406214040">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword14269201313295">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword499212861314">Device</span>E] <strong id="EN-US_TASK_0000001176743273__b1629176060214040">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001176743273__step1236692864214040"><span id="EN-US_TASK_0000001176743273__cmd1750229582214040">Enable IGMP on the interfaces connected to hosts.</span><p><p id="EN-US_TASK_0000001176743273__p1461627840214040"># Enable IGMP, using DeviceA as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen1650239377214040">[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword133441242143318"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword1499212812130">Device</span>A] <strong id="EN-US_TASK_0000001176743273__b2046700579214040">interface <span>100GE</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword192732440333"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword45294810253">Device</span>A-<span>100GE</span><span>1/0/2</span>]<strong id="EN-US_TASK_0000001176743273__b937418313260"> undo portswitc</strong><strong id="EN-US_TASK_0000001176743273__b332917542617">h</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword192961115439">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword1699252831316">Device</span>A-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001176743273__b664170834214040">igmp enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword15669171234318">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword18992928161311">Device</span>A-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001176743273__b854065362214040">igmp version 2</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword18298141416437">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword1199272891312">Device</span>A-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001176743273__b414823060214040">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword79681716134310">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword19992132861312">Device</span>A] <strong id="EN-US_TASK_0000001176743273__b1623809216214040">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001176743273__step416373283214040"><span id="EN-US_TASK_0000001176743273__cmd1484045455214040">Configure RPs.</span><p><p id="EN-US_TASK_0000001176743273__p554903369214040"># To use dynamic RP election, perform the following configurations on one or more <span class="keyword" id="EN-US_TASK_0000001176743273__keyword1499252816136">devices</span> in the PIM-SM domain. For example, on <span class="keyword" id="EN-US_TASK_0000001176743273__keyword13992172881318">Device</span>E, set the range of groups served by the RP and specify an interface for the C-BSR and C-RP.</p>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen358535438214040">[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword334310471332"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword18992182819135">Device</span>E] <strong id="EN-US_TASK_0000001176743273__b1755830042214040">acl number 2000</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword10472171912431">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword199931428171313">Device</span>E-acl4-basic-2000] <strong id="EN-US_TASK_0000001176743273__b995906398214040">rule permit source 225.1.1.0 0.0.0.255</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword1799392013439">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword1499372816137">Device</span>E-acl4-basic-2000] <strong id="EN-US_TASK_0000001176743273__b600138514214040">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword1687512213439">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword1299316285139">Device</span>E] <strong id="EN-US_TASK_0000001176743273__b143155574214040">pim</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword6597230438">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword7993132861320">Device</span>E-pim] <strong id="EN-US_TASK_0000001176743273__b81163003214040">c-bsr <span>100GE</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword19716424114313">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword099382812136">Device</span>E-pim] <strong id="EN-US_TASK_0000001176743273__b111191381214040">c-rp <span>100GE</span> <span>1/0/2</span> group-policy 2000 priority 0</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword387812584311">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword699362851316">Device</span>E-pim] <strong id="EN-US_TASK_0000001176743273__b27710531214040">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword1780232204318">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword580213229435">Device</span>E] <strong id="EN-US_TASK_0000001176743273__b1016424128214040">commit</strong></pre>
<p id="EN-US_TASK_0000001176743273__p2053021512214040"># Configure a static RP on <span class="keyword" id="EN-US_TASK_0000001176743273__keyword109931428191315">Device</span>E. The configurations of <span class="keyword" id="EN-US_TASK_0000001176743273__keyword899310280138">Device</span>A, <span class="keyword" id="EN-US_TASK_0000001176743273__keyword16993128121315">Device</span>B, <span class="keyword" id="EN-US_TASK_0000001176743273__keyword12993182881316">Device</span>C, and <span class="keyword" id="EN-US_TASK_0000001176743273__keyword1099332812139">Device</span>D are similar to the configuration of <span class="keyword" id="EN-US_TASK_0000001176743273__keyword1413174914719">Device</span>E, and are not mentioned here. You can specify <strong id="EN-US_TASK_0000001176743273__b139241224164816">preferred</strong> in the <strong id="EN-US_TASK_0000001176743273__b1879751364214040">static-rp</strong> <em id="EN-US_TASK_0000001176743273__i89707227214040">rp-address</em> command to enable the static RP to be preferentially selected.</p>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen1348877462214040">[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword160465193314"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword2993428161314">Device</span>E] <strong id="EN-US_TASK_0000001176743273__b80054467214040">pim</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword8352344124310">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword1993182871312">Device</span>E-pim] <strong id="EN-US_TASK_0000001176743273__b1452279291214040">static-rp 192.168.4.1</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword169313460431">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword599312286139">Device</span>E-pim] <strong id="EN-US_TASK_0000001176743273__b354754302214040">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword144339482438">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword89932284135">Device</span>E] <strong id="EN-US_TASK_0000001176743273__b1892665417214040">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001176743273__step886290487214040"><span id="EN-US_TASK_0000001176743273__cmd937639417214040">(Optional) Configure a BSR boundary on the interface that connects <span class="keyword" id="EN-US_TASK_0000001176743273__keyword6993182871311">Device</span>D to the Internet.</span><p><pre class="screen" id="EN-US_TASK_0000001176743273__screen1751197763214040">[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword885515016346"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword11993172817136">Device</span>D]<strong id="EN-US_TASK_0000001176743273__b764247872214040"> interface <span>100GE</span> <span>1/0/4</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword882414414348"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword12255162111264">Device</span>D-<span>100GE</span><span>1/0/4</span>] <strong id="EN-US_TASK_0000001176743273__b446533672611">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword75463710436">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword10993192891316">Device</span>D-<span>100GE</span><span>1/0/4</span>] <strong id="EN-US_TASK_0000001176743273__b1495282016214040">pim bsr-boundary</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword463523813438">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword15993152819131">Device</span>D-<span>100GE</span><span>1/0/4</span>] <strong id="EN-US_TASK_0000001176743273__b853298191214040">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176743273__keyword18742203919433">*</span><span class="keyword" id="EN-US_TASK_0000001176743273__keyword1599362881314">Device</span>D] <strong id="EN-US_TASK_0000001176743273__b388530515214040">commit</strong></pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001176743273__example1664711602214040"><a name="EN-US_TASK_0000001176743273__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p id="EN-US_TASK_0000001176743273__p737308101214040"># Run the <strong id="EN-US_TASK_0000001176743273__b748772611490">display pim interface</strong> command to view information about PIM interfaces on each <span class="keyword" id="EN-US_TASK_0000001176743273__keyword1699492861313">device</span>. The following example uses the PIM interface information on <span class="keyword" id="EN-US_TASK_0000001176743273__keyword699410282136">Device</span>E.</p>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen7554502214040">&lt;<span class="keyword" id="EN-US_TASK_0000001176743273__keyword89943280133">Device</span>E&gt; <strong id="EN-US_TASK_0000001176743273__b1312185375214040">display pim interface</strong>
VPN-Instance: public net
Interface  State NbrCnt HelloInt   DR-Pri     DR-Address
<span>100GE</span><span>1/0/1</span>   up     1       30         1        192.168.3.2
<span>100GE</span><span>1/0/2</span>   up     1       30         1        192.168.2.2
<span>100GE</span><span>1/0/3</span>   up     1       30         1        192.168.9.2
<span>100GE</span><span>1/0/4</span>   up     1       30         1        192.168.4.2</pre>
<p id="EN-US_TASK_0000001176743273__p645231122214040"># Run the <strong id="EN-US_TASK_0000001176743273__b698182315017">display pim bsr-info</strong> command to check BSR information on each <span class="keyword" id="EN-US_TASK_0000001176743273__keyword10994192812134">device</span>. For example, BSR information on <span class="keyword" id="EN-US_TASK_0000001176743273__keyword29941128161320">Device</span>D and <span class="keyword" id="EN-US_TASK_0000001176743273__keyword11994142817134">Device</span>E is as follows (C-BSR information is also displayed on <span class="keyword" id="EN-US_TASK_0000001176743273__keyword7978735195115">Device</span>E):</p>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen1321131830214040">&lt;<span class="keyword" id="EN-US_TASK_0000001176743273__keyword399492841318">Device</span>D&gt; <strong id="EN-US_TASK_0000001176743273__b1135892110214040">display pim bsr-info</strong>
 VPN-Instance: public net
 Elected AdminScope BSR Count: 0
 Elected BSR Address: 192.168.2.2
     Priority: 0
     Hash mask length: 30
     State: Accept Preferred
     Scope: Not scoped
     Uptime: 02:08:57
     Expires: 00:01:15
     C-RP Count: 1</pre>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen1591641261214040">&lt;<span class="keyword" id="EN-US_TASK_0000001176743273__keyword179949281138">Device</span>E&gt; <strong id="EN-US_TASK_0000001176743273__b933673667214040">display pim bsr-info</strong>
 VPN-Instance: public net
 Elected AdminScope BSR Count: 0
 Elected BSR Address: 192.168.2.2
     Priority: 0
     Hash mask length: 30
     State: Elected
     Scope: Not scoped
     Uptime: 02:25:03
     Next BSR message scheduled at: 00:00:57
     C-RP Count: 1
 Candidate AdminScope BSR Count: 0
 Candidate BSR Address: 192.168.2.2
     Priority: 0
     Hash mask length: 30
     State: Elected
     Scope: Not scoped
     Wait to be BSR: 0</pre>
<p id="EN-US_TASK_0000001176743273__p1736291019214040"># Run the <strong id="EN-US_TASK_0000001176743273__b455490371214040">display pim rp-info</strong> command to check RP information on each <span class="keyword" id="EN-US_TASK_0000001176743273__keyword7845921528">device</span>. The RP information on <span class="keyword" id="EN-US_TASK_0000001176743273__keyword119941628101319">Device</span>D and <span class="keyword" id="EN-US_TASK_0000001176743273__keyword1799402817130">Device</span>E is as follows:</p>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen1961694196214040">&lt;<span class="keyword" id="EN-US_TASK_0000001176743273__keyword199948285132">Device</span>D&gt; <strong id="EN-US_TASK_0000001176743273__b2106031604214040">display pim rp-info</strong>
 VPN-Instance: public net
 PIM-SM BSR RP Number:1
 Group/MaskLen: 225.1.1.0/24
     RP: 192.168.2.2
     Priority: 0
     Uptime: 02:27:17
     Expires: 00:02:15
 PIM SM static RP Number:1
     Static RP: 192.168.4.1</pre>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen1213739756214040">&lt;<span class="keyword" id="EN-US_TASK_0000001176743273__keyword169941028111311">Device</span>E&gt; <strong id="EN-US_TASK_0000001176743273__b832826189214040">display pim rp-info</strong>
 VPN-Instance: public net
 PIM-SM BSR RP Number:1
 Group/MaskLen: 225.1.1.0/24
     RP: 192.168.2.2 (local)
     Priority: 0
     Uptime: 02:27:27
     Expires: 00:02:03
 PIM SM static RP Number:1
     Static RP: 192.168.4.1 (local)</pre>
<p id="EN-US_TASK_0000001176743273__p2138906784214040"># Run the <strong id="EN-US_TASK_0000001176743273__b370210725318">display pim routing-table</strong> command to view the PIM routing table on each <span class="keyword" id="EN-US_TASK_0000001176743273__keyword1994102811139">device</span>. For example, the PIM routing tables on <span class="keyword" id="EN-US_TASK_0000001176743273__keyword20994162817135">Device</span>D and <span class="keyword" id="EN-US_TASK_0000001176743273__keyword599442861319">Device</span>E are as follows:</p>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen474924795214040">&lt;<span class="keyword" id="EN-US_TASK_0000001176743273__keyword099492871311">Device</span>D&gt; <strong id="EN-US_TASK_0000001176743273__b1460793778214040">display pim routing-table</strong>
 VPN-Instance: public net
 Total 0 (*, G) entry; 2 (S, G) entries

 (10.110.5.100, 225.1.1.1)
     RP: 192.168.2.2
     Protocol: pim-sm, Flag: SPT LOC ACT
     UpTime: 00:57:20
     Upstream interface: <span>100GE</span><span>1/0/3</span>, Refresh time: 00:57:20
         Upstream neighbor: NULL
         RPF prime neighbor: 10.110.5.100
     Downstream interface(s) information:
     Total number of downstreams: 1
        1: <span>100GE</span><span>1/0/2</span>
             Protocol:  pim-sm, UpTime: 00:57:20, Expires: 00:03:02</pre>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen1911757023214040">&lt;<span class="keyword" id="EN-US_TASK_0000001176743273__keyword7994122861311">Device</span>E&gt;<strong id="EN-US_TASK_0000001176743273__b1604219361214040"> display pim routing-table</strong>
 VPN-Instance: public net
 Total 1 (*, G) entry; 1 (S, G) entry

 (*, 225.1.1.1)
     RP: 192.168.2.2 (local)
     Protocol: pim-sm, Flag: WC
     UpTime: 00:21:40
     Upstream interface: register, Refresh time: 00:21:40
         Upstream neighbor: 192.168.4.2
         RPF prime neighbor: 192.168.4.2
     Downstream interface(s) information:
     Total number of downstreams: 1
        1: <span>100GE</span><span>1/0/3</span>
             Protocol:  pim-sm, UpTime: 00:21:40, Expires: 00:02:43</pre>
<h4 class="sectiontitle">Configuration Scripts</h4><ul id="EN-US_TASK_0000001176743273__ul839708884214040"><li id="EN-US_TASK_0000001176743273__li613163613214040"><div class="p" id="EN-US_TASK_0000001176743273__p1814305385214040"><a name="EN-US_TASK_0000001176743273__li613163613214040"></a><a name="li613163613214040"></a><span class="keyword" id="EN-US_TASK_0000001176743273__keyword1799842816137">Device</span>A<pre class="screen" id="EN-US_TASK_0000001176743273__screen2132684917214040">#
sysname <span class="keyword" id="EN-US_TASK_0000001176743273__keyword399817286131">Device</span>A
#
multicast routing-enable
isis 1
 network-entity 10.0000.0000.0001.00
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.9.1 255.255.255.0
 pim sm
 isis enable 1
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 192.168.1.1 255.255.255.0
 pim sm
 igmp enable
 igmp version 2
 isis enable 1
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ip address 10.110.1.1 255.255.255.0
 pim sm
 isis enable 1
#
pim
 static-rp 192.168.4.1
#
return</pre>
</div>
</li><li id="EN-US_TASK_0000001176743273__li625502329214040"><p id="EN-US_TASK_0000001176743273__p885191438214040"><a name="EN-US_TASK_0000001176743273__li625502329214040"></a><a name="li625502329214040"></a><span class="keyword" id="EN-US_TASK_0000001176743273__keyword899811281132">Device</span>B</p>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen1533893407214040">#
sysname <span class="keyword" id="EN-US_TASK_0000001176743273__keyword1299862801311">Device</span>B
#
multicast routing-enable
isis 1
 network-entity 10.0000.0000.0002.00
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.2.1 255.255.255.0
 pim sm
 isis enable 1
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 10.110.2.1 255.255.255.0
 pim sm
 igmp enable
 igmp version 2
 isis enable 1
#
pim
 static-rp 192.168.4.1
#
return</pre>
</li><li id="EN-US_TASK_0000001176743273__li1282632438214040"><p id="EN-US_TASK_0000001176743273__p762536880214040"><a name="EN-US_TASK_0000001176743273__li1282632438214040"></a><a name="li1282632438214040"></a><span class="keyword" id="EN-US_TASK_0000001176743273__keyword119981287131">Device</span>C</p>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen1928430412214040">#
sysname <span class="keyword" id="EN-US_TASK_0000001176743273__keyword19981728151315">Device</span>C
#
multicast routing-enable
isis 1
 network-entity 10.0000.0000.0003.00
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.3.1 255.255.255.0
 pim sm
 isis enable 1
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 10.110.2.2 255.255.255.0
 pim sm
 igmp enable
 igmp version 2
 isis enable 1
#
pim
 static-rp 192.168.4.1
#
return</pre>
</li><li id="EN-US_TASK_0000001176743273__li1390944180214040"><p id="EN-US_TASK_0000001176743273__p91852018214040"><a name="EN-US_TASK_0000001176743273__li1390944180214040"></a><a name="li1390944180214040"></a><span class="keyword" id="EN-US_TASK_0000001176743273__keyword899810285135">Device</span>D</p>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen1406932483214040">#
sysname <span class="keyword" id="EN-US_TASK_0000001176743273__keyword19983289131">Device</span>D
#
multicast routing-enable
isis 1
 network-entity 10.0000.0000.0004.00
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.4.2 255.255.255.0
 pim sm
 isis enable 1
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 192.168.1.2 255.255.255.0
 pim sm
 isis enable 1
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ip address 10.110.4.1 255.255.255.0
 pim sm
 isis enable 1
#
interface <span>100GE</span><span>1/0/4</span>
 undo portswitch
 ip address 10.110.5.1 255.255.255.0
 pim bsr-boundary
 pim sm
 isis enable 1
#
pim
 static-rp 192.168.4.1
#
return</pre>
</li><li id="EN-US_TASK_0000001176743273__li130468952214040"><p id="EN-US_TASK_0000001176743273__p210872677214040"><a name="EN-US_TASK_0000001176743273__li130468952214040"></a><a name="li130468952214040"></a><span class="keyword" id="EN-US_TASK_0000001176743273__keyword14998132816137">Device</span>E</p>
<pre class="screen" id="EN-US_TASK_0000001176743273__screen100317922214040">#
sysname <span class="keyword" id="EN-US_TASK_0000001176743273__keyword79982281134">Device</span>E
#
multicast routing-enable
#
acl number 2000
 rule 5 permit source 225.1.1.0 0.0.0.255
isis 1
 network-entity 10.0000.0000.0005.00
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.3.2 255.255.255.0
 pim sm
 isis enable 1
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 192.168.2.2 255.255.255.0
 pim sm
 isis enable 1
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ip address 192.168.9.2 255.255.255.0
 pim sm
 isis enable 1
#
 interface <span>100GE</span><span>1/0/4</span>
 undo portswitch
 ip address 192.168.4.1 255.255.255.0
 pim sm
 isis enable 1
#
pim
 static-rp 192.168.4.1
 c-bsr <span>100GE</span> <span>1/0/2</span>
 c-rp <span>100GE</span> <span>1/0/2</span> group-policy 2000
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_pim_cfg_0010.html">Configuring PIM-SM in the ASM Model
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_pim_cfg_0015.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>