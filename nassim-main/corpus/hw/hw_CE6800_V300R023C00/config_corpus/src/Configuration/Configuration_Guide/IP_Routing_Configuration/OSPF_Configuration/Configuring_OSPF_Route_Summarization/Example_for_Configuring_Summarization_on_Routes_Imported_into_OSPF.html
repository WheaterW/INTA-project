
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Summarization on Routes Imported into OSPF">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0048.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0311.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001586805721">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Summarization on Routes Imported into OSPF</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001586805721"></a><a name="EN-US_TASK_0000001586805721"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Summarization on Routes Imported into OSPF</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001586805721__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0000001586805721__fig_dc_vrp_ospf_cfg_009401">Figure 1</a>, DeviceA, DeviceB, and DeviceC run OSPF to communicate with each other. DeviceA runs in area 0, and DeviceC runs in area 1. DeviceB is an ABR and runs in both areas. DeviceA is an ASBR. DeviceA is configured to summarize the imported direct routes and advertise the summary routes to other devices in the area. This reduces the number of routing entries on DeviceA.</p>
<div class="fignone" id="EN-US_TASK_0000001586805721__fig_dc_vrp_ospf_cfg_009401"><a name="EN-US_TASK_0000001586805721__fig_dc_vrp_ospf_cfg_009401"></a><a name="fig_dc_vrp_ospf_cfg_009401"></a><span class="figcap"><b>Figure 1 </b>Networking diagram of configuring summarization on routes imported into OSPF</span><div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, and interface3 represent <span>100GE</span><span>1/0/1</span>, <span>100GE</span><span>1/0/2</span>, and <span>100GE</span><span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001535886170.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001586805721__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Enable OSPF on each device and configure basic OSPF functions to ensure that the devices can communicate with each other using OSPF.</p>
</li><li>Configure OSPF route summarization.</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001586805721__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure IP addresses for interfaces.</span><p><p># Configure DeviceA.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname DeviceA</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>ip address 192.168.0.1 24</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span><span><span>1/0/2</span></span></span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>ip address 192.168.2.1 24</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/3</span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>ip address 192.168.3.1 24</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface loopback0</strong>
[<span class="keyword">*</span>DeviceA-loopback0] <strong>ip address 1.1.1.1 32</strong>
[<span class="keyword">*</span>DeviceA-loopback0] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
</p><p><p>The configurations of DeviceB and DeviceC are similar to the configuration of DeviceA. For detailed configurations, see Configuration Scripts.</p>
</p></li><li><span>Configure basic OSPF functions.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>router id 1.1.1.1</strong>
[<span class="keyword">*</span>DeviceA] <strong>ospf 1</strong>
[<span class="keyword">*</span>DeviceA-ospf-1] <strong>area 0</strong>
[<span class="keyword">*</span>DeviceA-ospf-1-area-0.0.0.0] <strong>network 192.168.0.0 0.0.0.255</strong>
[<span class="keyword">*</span>DeviceA-ospf-1-area-0.0.0.0] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA-ospf-1] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceA] <strong>commit</strong></span></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>router id 2.2.2.2</strong>
[<span class="keyword">*</span>DeviceB] <strong>ospf 1</strong>
[<span class="keyword">*</span>DeviceB-ospf-1] <strong>area 0</strong>
[<span class="keyword">*</span>DeviceB-ospf-1-area-0.0.0.0] <strong>network 192.168.0.0 0.0.0.255</strong>
[<span class="keyword">*</span>DeviceB-ospf-1-area-0.0.0.0] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB-ospf-1] <strong>area 1</strong>
[<span class="keyword">*</span>DeviceB-ospf-1-area-0.0.0.1] <strong>network 192.168.1.0 0.0.0.255</strong>
[<span class="keyword">*</span>DeviceB-ospf-1-area-0.0.0.1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB-ospf-1] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceB] <strong>commit</strong></span></pre>
<p># Configure DeviceC.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong>router id 3.3.3.3</strong>
[<span><span class="keyword">*</span></span>DeviceC] <strong>ospf 1</strong>
[<span><span class="keyword">*</span></span>DeviceC-ospf-1] <strong>area 1</strong>
[<span><span class="keyword">*</span></span>DeviceC-ospf-1-area-0.0.0.1] <strong>network 192.168.1.0 0.0.0.255</strong>
[<span><span class="keyword">*</span></span>DeviceC-ospf-1-area-0.0.0.1] <strong>quit</strong>
[<span><span class="keyword">*</span></span>DeviceC-ospf-1] <strong>quit</strong>
<span>[<span><span class="keyword">*</span></span>DeviceC] <strong>commit</strong></span></pre>
</p></li><li><span>Configure the ASBR to summarize imported routes.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>ospf 1</strong>
[<span><span class="keyword">*</span></span>DeviceA-ospf-1] <strong>import-route direct</strong>
[<span><span class="keyword">*</span></span>DeviceA-ospf-1] <strong>asbr-summary 192.168.2.0 255.255.254.0</strong>
[<span><span class="keyword">*</span></span>DeviceA-ospf-1] <strong>quit</strong>
<span>[<span><span class="keyword">*</span></span>DeviceA] <strong>commit</strong></span></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001586805721__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Check the routing table of DeviceC.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong>display ip routing-table</strong>
Proto: Protocol        Pre: Preference
Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route
------------------------------------------------------------------------------
Routing Table : _public_
         Destinations : 11        Routes : 11         

Destination/Mask    Proto   Pre  Cost        Flags NextHop         Interface

        1.1.1.1/32  O_ASE   150  1             D   192.168.1.2     <span>100GE</span><span>1/0/1</span>
        3.3.3.3/32  Direct  0    0             D   127.0.0.1       LoopBack0
      127.0.0.0/8   Direct  0    0             D   127.0.0.1       InLoopBack0
      127.0.0.1/32  Direct  0    0             D   127.0.0.1       InLoopBack0
127.255.255.255/32  Direct  0    0             D   127.0.0.1       InLoopBack0
    192.168.0.0/24  OSPF    10   2             D   192.168.1.2     <span>100GE</span><span>1/0/1</span>
    192.168.1.0/24  Direct  0    0             D   192.168.1.1     <span>100GE</span><span>1/0/1</span>
    192.168.1.1/32  Direct  0    0             D   127.0.0.1       <span>100GE</span><span>1/0/1</span>
  192.168.1.255/32  Direct  0    0             D   127.0.0.1       <span>100GE</span><span>1/0/1</span>
    <strong>192.168.2.0/23</strong> O_ASE   150  2              D   192.168.1.2     <span>100GE</span><span>1/0/1</span>
255.255.255.255/32  Direct  0    0             D   127.0.0.1       InLoopBack0</pre>
<p>The command output shows information about the summary route to 192.168.2.0/23 advertised by DeviceA.</p>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001586805721__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p>DeviceA</p>
<pre class="screen">#
sysname DeviceA
#
router id 1.1.1.1
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.0.1 255.255.255.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 192.168.2.1 255.255.255.0
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ip address 192.168.3.1 255.255.255.0
#
interface LoopBack0
 ip address 1.1.1.1 255.255.255.255
#
ospf 1
 asbr-summary 192.168.2.0 255.255.254.0
 import-route direct
 area 0.0.0.0
  network 192.168.0.0 0.0.0.255
#
return</pre>
</li><li><p>DeviceB</p>
<pre class="screen">#
sysname DeviceB
#
router id 2.2.2.2
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.0.2 255.255.255.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 192.168.1.2 255.255.255.0
#
interface LoopBack0
 ip address 2.2.2.2 255.255.255.255
#
ospf 1
 area 0.0.0.0
  network 192.168.0.0 0.0.0.255
 area 0.0.0.1
  network 192.168.1.0 0.0.0.255
#
return</pre>
</li><li><p>DeviceC</p>
<pre class="screen">#
sysname DeviceC
#
router id 3.3.3.3
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.1.1 255.255.255.0
#
interface LoopBack0
 ip address 3.3.3.3 255.255.255.255
#
ospf 1
 area 0.0.0.1
  network 192.168.1.0 0.0.0.255
#
return</pre>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospf_cfg_0048.html">Configuring OSPF Route Summarization
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospf_cfg_0311.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>