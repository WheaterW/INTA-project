
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Interface-based VLAN Assignment to Implement Intra-VLAN Communication (Through Multiple Devices)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0022.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0024.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="QinQ">
<meta name="featurename" content="VLAN">
<meta name="featurename" content="VLAN Mapping">
<meta name="featurename" content="VLAN Pool">
<meta name="featurename" content="Voice VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176662423">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="public_sys-resources/imagePopup.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/customQuery.js"></script>
<script language="javascript" type="text/javascript" src="public_sys-resources/imagePopup.js"></script>
<title>Example for Configuring Interface-based VLAN Assignment to Implement Intra-VLAN Communication (Through Multiple Devices)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176662423"></a><a name="EN-US_TASK_0000001176662423"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Interface-based VLAN Assignment to Implement Intra-VLAN Communication (Through Multiple Devices)</h1>
<div class="taskbody" id="taskbody1575884249666"><div class="context"><a name="EN-US_TASK_0000001176662423__1.3.1"></a><a name="1.3.1"></a>
<div class="p" id="EN-US_TASK_0000001176662423__context1677625172748"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0000001176662423__p106020221902">In <a href="#EN-US_TASK_0000001176662423__fig523919715818">Figure 1</a>, Host1, Host2, Host5, and Host6 belong to VLAN 2, and Host3, Host4, Host7, and Host8 belong to VLAN 3. The interfaces on the link between DeviceA and DeviceC and those on the link between DeviceC and DeviceB allow packets sourced from VLAN 2 and VLAN 3 to pass through. This ensures that hosts in the same VLAN on DeviceA and DeviceB can directly communicate with each other at Layer 2, but hosts in different VLANs cannot.</p>
<div class="fignone" id="EN-US_TASK_0000001176662423__fig523919715818"><a name="EN-US_TASK_0000001176662423__fig523919715818"></a><a name="fig523919715818"></a><span class="figcap"><b>Figure 1 </b>Networking diagram of configuring interface-based VLAN assignment for intra-VLAN communication through multiple devices</span><div class="note" id="EN-US_TASK_0000001176662423__note141134517511"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001176662423__p111124517519">In this example, interfaces 1 through 5 represent <span>100GE</span> <span>1/0/1</span>, <span>100GE</span> <span>1/0/2</span>, <span>100GE</span> <span>1/0/3</span>, <span>100GE</span> <span>1/0/4</span>, and <span>100GE</span> <span>1/0/5</span>, respectively.</p>
</div></div>
<br><span><img class="imgResize" id="EN-US_TASK_0000001176662423__image39021734941" src="figure/en-us_image_0000001130622934.png" width="521.383275" height="156.27435495" title="Click to enlarge"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176662423__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001176662423__steps10132325172748"><li id="EN-US_TASK_0000001176662423__step5253145172748"><span id="EN-US_TASK_0000001176662423__cmd7907968172748">On DeviceA and DeviceB, configure the interfaces connecting to hosts as access interfaces, add Host1, Host2, Host5, and Host6 to VLAN 2, and add Host3, Host4, Host7, and Host8 to VLAN 3.</span><p><p id="EN-US_TASK_0000001176662423__p104671455392"># Configure DeviceA.</p>
</p><p><pre class="screen" id="EN-US_TASK_0000001176662423__screen10250173414393">&lt;<span class="keyword" id="EN-US_TASK_0000001176662423__keyword166689117571">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001176662423__b507057908214028">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword83846113577"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001176662423__keyword1597414615717">HUAWEI</span>] <strong id="EN-US_TASK_0000001176662423__b1461105384214028">sysname DeviceA</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword174422319590">*</span><span class="keyword" id="EN-US_TASK_0000001176662423__keyword64421931594">HUAWEI</span>] <strong id="EN-US_TASK_0000001176662423__b1649851035918">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword16313912436"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001176662423__b262424101214028">vlan batch 2 3</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1377319810018">*</span>DeviceA] <strong id="EN-US_TASK_0000001176662423__b1348277423214028">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword19961694510">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong id="EN-US_TASK_0000001176662423__b1104986900214028"> portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword191816819458">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong id="EN-US_TASK_0000001176662423__b1208650922214028"> port link-type access</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword17307692458">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong id="EN-US_TASK_0000001176662423__b2053343661214028"> port default vlan 2</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1873201011453">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong id="EN-US_TASK_0000001176662423__b124817097214028"> quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1078781110453">*</span>DeviceA] <strong id="EN-US_TASK_0000001176662423__b2145238081214028">interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword984217125458">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>]<strong id="EN-US_TASK_0000001176662423__b187112617214028"> portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword0194314164516">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>]<strong id="EN-US_TASK_0000001176662423__b859741268214028"> port link-type access</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1860471544517">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>]<strong id="EN-US_TASK_0000001176662423__b1032573540214028"> port default vlan 2</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1663591624518">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>]<strong id="EN-US_TASK_0000001176662423__b1885099399214028"> quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword20643131719452">*</span>DeviceA] <strong id="EN-US_TASK_0000001176662423__b1186725518214028">interface <span>100ge</span> <span>1/0/3</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword61453200457">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>]<strong id="EN-US_TASK_0000001176662423__b197550901214028"> portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword156522116459">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>]<strong id="EN-US_TASK_0000001176662423__b973315953214028"> port link-type access</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword6912364515">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>]<strong id="EN-US_TASK_0000001176662423__b1839884608214028"> port default vlan 3</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1506172414517">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>]<strong id="EN-US_TASK_0000001176662423__b1031432103214028"> quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword04232674520">*</span>DeviceA] <strong id="EN-US_TASK_0000001176662423__b54870518214028">interface <span>100ge</span> <span>1/0/4</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword16435102714515">*</span>DeviceA-<span>100GE</span><span>1/0/4</span>]<strong id="EN-US_TASK_0000001176662423__b1425484899214028"> portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword763952813451">*</span>DeviceA-<span>100GE</span><span>1/0/4</span>]<strong id="EN-US_TASK_0000001176662423__b1281306175214028"> port link-type access</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword12712729144511">*</span>DeviceA-<span>100GE</span><span>1/0/4</span>]<strong id="EN-US_TASK_0000001176662423__b1531163859214028"> port default vlan 3</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword888073018452">*</span>DeviceA-<span>100GE</span><span>1/0/4</span>]<strong id="EN-US_TASK_0000001176662423__b300891653214028"> quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1516725203">*</span>DeviceA] <strong id="EN-US_TASK_0000001176662423__b438014411804">commit</strong></pre>
<p id="EN-US_TASK_0000001176662423__p2677135819431"># Configure DeviceB.</p>
</p><p><pre class="screen" id="EN-US_TASK_0000001176662423__screen437317164714">&lt;<span class="keyword" id="EN-US_TASK_0000001176662423__keyword10903185775717">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001176662423__b921564873214028">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword14153848184316"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001176662423__keyword1010116105811">HUAWEI</span>] <strong id="EN-US_TASK_0000001176662423__b1647198657214028">sysname DeviceB</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword66397613479">*</span><span class="keyword" id="EN-US_TASK_0000001176662423__keyword126396654711">HUAWEI</span>] <strong id="EN-US_TASK_0000001176662423__b1263916674713">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword194421752174316"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001176662423__b278804950214028">vlan batch 2 3</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword192141136144517">*</span>DeviceB] <strong id="EN-US_TASK_0000001176662423__b2139417512214028">interface <span>100ge</span> </strong><strong id="EN-US_TASK_0000001176662423__b1320694915719"><span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword987143714513">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>]<strong id="EN-US_TASK_0000001176662423__b1042618554214028"> portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword0352339204518">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>]<strong id="EN-US_TASK_0000001176662423__b1349967559214028"> port link-type access</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword889244012456">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>]<strong id="EN-US_TASK_0000001176662423__b1550377234214028"> port default vlan 2</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword44931423453">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>]<strong id="EN-US_TASK_0000001176662423__b2144257005214028"> quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword148613439450">*</span>DeviceB] <strong id="EN-US_TASK_0000001176662423__b199947817214028">interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword137571746154511">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>]<strong id="EN-US_TASK_0000001176662423__b951285140214028"> portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword112264488456">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>]<strong id="EN-US_TASK_0000001176662423__b1234517886214028"> port link-type access</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword15747124910456">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>]<strong id="EN-US_TASK_0000001176662423__b318398063214028"> port default vlan 2</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1025175116452">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>]<strong id="EN-US_TASK_0000001176662423__b1911080444214028"> quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1981095215459">*</span>DeviceB] <strong id="EN-US_TASK_0000001176662423__b55331275214028">interface <span>100ge</span> <span>1/0/3</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1043311547456">*</span>DeviceB-<span>100GE</span><span>1/0/3</span>]<strong id="EN-US_TASK_0000001176662423__b510794433214028"> portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1522075718450">*</span>DeviceB-<span>100GE</span><span>1/0/3</span>]<strong id="EN-US_TASK_0000001176662423__b1964141676214028"> port link-type access</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword752912589457">*</span>DeviceB-<span>100GE</span><span>1/0/3</span>]<strong id="EN-US_TASK_0000001176662423__b1647131674214028"> port default vlan 3</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword142495174618">*</span>DeviceB-<span>100GE</span><span>1/0/3</span>]<strong id="EN-US_TASK_0000001176662423__b1105632453214028"> quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword61126320469">*</span>DeviceB] <strong id="EN-US_TASK_0000001176662423__b615921062214028">interface <span>100ge</span> <span>1/0/4</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1024344114619">*</span>DeviceB-<span>100GE</span><span>1/0/4</span>]<strong id="EN-US_TASK_0000001176662423__b1493938165214028"> portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword83357512467">*</span>DeviceB-<span>100GE</span><span>1/0/4</span>]<strong id="EN-US_TASK_0000001176662423__b1785155897214028"> port link-type access</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword136914614466">*</span>DeviceB-<span>100GE</span><span>1/0/4</span>]<strong id="EN-US_TASK_0000001176662423__b1251370822214028"> port default vlan 3</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1779118104615">*</span>DeviceB-<span>100GE</span><span>1/0/4</span>]<strong id="EN-US_TASK_0000001176662423__b745995664214028"> quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword7785123913471">*</span>DeviceB] <strong id="EN-US_TASK_0000001176662423__b14785173920477">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001176662423__step1520249089214028"><span id="EN-US_TASK_0000001176662423__cmd66006817214028">Configure the link between DeviceA and DeviceC and that between DeviceB and DeviceC as trunk links.</span><p><p id="EN-US_TASK_0000001176662423__p697710941214028"># Configure DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001176662423__screen2023846918214028">[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword11728717447"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001176662423__b2004818259214028">interface <span>100ge</span> <span>1/0/5</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword5953123184412"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/5</span>]<strong id="EN-US_TASK_0000001176662423__b1491028518214028"> portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword20448121115462">*</span>DeviceA-<span>100GE</span><span>1/0/5</span>]<strong id="EN-US_TASK_0000001176662423__b542971736214028"> port link-type trunk</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword180981264613">*</span>DeviceA-<span>100GE</span><span>1/0/5</span>]<strong id="EN-US_TASK_0000001176662423__b1776268817214028"> port trunk allow-pass vlan 2 3</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword480710138462">*</span>DeviceA-<span>100GE</span><span>1/0/5</span>]<strong id="EN-US_TASK_0000001176662423__b1148321457214028"> quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1833489478">*</span>DeviceA] <strong id="EN-US_TASK_0000001176662423__b183194854718">commit</strong></pre>
<p id="EN-US_TASK_0000001176662423__p1675296006214028"># Configure DeviceB.</p>
<pre class="screen" id="EN-US_TASK_0000001176662423__screen245501537214028">[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword16349101011440"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001176662423__b713951482214028">interface <span>100ge</span> <span>1/0/5</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword15621201414416"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/5</span>]<strong id="EN-US_TASK_0000001176662423__b1426622161214028"> portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1683251614469">*</span>DeviceB-<span>100GE</span><span>1/0/5</span>]<strong id="EN-US_TASK_0000001176662423__b1069290985214028"> port link-type trunk</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword946481834620">*</span>DeviceB-<span>100GE</span><span>1/0/5</span>]<strong id="EN-US_TASK_0000001176662423__b1679054943214028"> port trunk allow-pass vlan 2 3</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword125962192464">*</span>DeviceB-<span>100GE</span><span>1/0/5</span>]<strong id="EN-US_TASK_0000001176662423__b1043776728214028"> quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword2882851194714">*</span>DeviceB] <strong id="EN-US_TASK_0000001176662423__b1388216511472">commit</strong></pre>
<p id="EN-US_TASK_0000001176662423__p718075913275"># Configure DeviceC.</p>
</p><p><pre class="screen" id="EN-US_TASK_0000001176662423__screen817242082810">&lt;<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1517212032820">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001176662423__b15172420102820">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword0498172313446"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001176662423__keyword17172132019285">HUAWEI</span>] <strong id="EN-US_TASK_0000001176662423__b101725203285">sysname DeviceC</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword49211115174713">*</span><span class="keyword" id="EN-US_TASK_0000001176662423__keyword492141518478">HUAWEI</span>] <strong id="EN-US_TASK_0000001176662423__b10921115154711">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword6770102812449"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001176662423__b321419508">vlan batch 2 3</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword1679752217462">*</span>DeviceC] <strong id="EN-US_TASK_0000001176662423__b16172132016289">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword98902474619">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176662423__b5173320112813">portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword18693132534613">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176662423__b1217372042819">port link-type trunk</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword374614263469">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176662423__b217342062816">port trunk allow-pass vlan 2 3</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword213815286460">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176662423__b81731520192819">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword76091230114616">*</span>DeviceC] <strong id="EN-US_TASK_0000001176662423__b1017312201285">interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword588073144619">*</span>DeviceC-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001176662423__b817316205286">portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword17888183217464">*</span>DeviceC-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001176662423__b101741920162813">port link-type trunk</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword295313315464">*</span>DeviceC-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001176662423__b191741320172816">port trunk allow-pass vlan 2 3</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword58331134154619">*</span>DeviceC-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001176662423__b111741820142815">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword102966018483">*</span>DeviceC] <strong id="EN-US_TASK_0000001176662423__b329614014811">commit</strong></pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001176662423__example121226172748"><a name="EN-US_TASK_0000001176662423__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p id="EN-US_TASK_0000001176662423__p1531814410543"># Run the <a href="cmdqueryname=display+vlan"><b><span class="cmdname" id="EN-US_TASK_0000001176662423__cmdname1847342976214028">display vlan</span></b></a> command to check the VLAN status. The following example shows the command output on DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001176662423__screen0837173531319">[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword15543042151313"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001176662423__b1354364201311">display vlan 2</strong>
--------------------------------------------------------------------------------
U: Up;         D: Down;         TG: Tagged;         UT: Untagged;
MP: Vlan-mapping;               ST: Vlan-stacking;
#: ProtocolTransparent-vlan;    *: Management-vlan;
MAC-LRN: MAC-address learning;  STAT: Statistic;
BC: Broadcast; MC: Multicast;   UC: Unknown-unicast;
FWD: Forward;  DSD: Discard;
--------------------------------------------------------------------------------

VID          Ports
--------------------------------------------------------------------------------
   <strong id="EN-US_TASK_0000001176662423__b1915937185213">2</strong>         UT:<span>100GE</span><span>1/0/1</span>(U)   <span>100GE</span><span>1/0/2</span>(U)
             TG:<span>100GE</span><span>1/0/5</span>(U)

VID  Type     Status  Property  MAC-LRN STAT    BC  MC  UC  Description
--------------------------------------------------------------------------------
   2 common   enable  default   enable  disable FWD FWD FWD VLAN 0002</pre>
<p id="EN-US_TASK_0000001176662423__p266628584214028"># Run the <a href="cmdqueryname=display+port+vlan"><b><span class="cmdname" id="EN-US_TASK_0000001176662423__cmdname418983518214028">display port vlan</span></b></a> command to check information about allowed VLANs on involved interfaces. The following example shows the command output on <span>100GE</span> <span>1/0/5</span> of DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001176662423__screen7234123018145">[<span class="keyword" id="EN-US_TASK_0000001176662423__keyword108817385149"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001176662423__b388938191414">display port vlan <span>100ge</span> <span>1/0/5</span></strong>
Port                    Link Type    PVID  Trunk VLAN List                      Port Description
---------------------------------------------------------------------------------------------------------------
<span>100GE</span><span>1/0/5</span>              trunk           1  1-3</pre>
<p id="EN-US_TASK_0000001176662423__p1531974117543"># Hosts in VLAN 2 can ping one another, as can those in VLAN 3. However, hosts in VLAN 2 cannot ping hosts in VLAN 3.</p>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001176662423__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul id="EN-US_TASK_0000001176662423__ul667617255214028"><li id="EN-US_TASK_0000001176662423__li105038136214028"><p id="EN-US_TASK_0000001176662423__p144393918214028"><a name="EN-US_TASK_0000001176662423__li105038136214028"></a><a name="li105038136214028"></a>DeviceA</p>
<pre class="screen" id="EN-US_TASK_0000001176662423__screen1277850950214028">#
sysname DeviceA
#
vlan batch 2 to 3
#
interface <span>100GE</span><span>1/0/1</span>
 port default vlan 2
#
interface <span>100GE</span><span>1/0/2</span>
 port default vlan 2
#
interface <span>100GE</span><span>1/0/3</span>
 port default vlan 3
#
interface <span>100GE</span><span>1/0/4</span>
 port default vlan 3
#
interface <span>100GE</span><span>1/0/5</span>
 port link-type trunk
 port trunk allow-pass vlan 2 to 3
#
return</pre>
</li><li id="EN-US_TASK_0000001176662423__li359217898214028"><p id="EN-US_TASK_0000001176662423__p798679969214028"><a name="EN-US_TASK_0000001176662423__li359217898214028"></a><a name="li359217898214028"></a>DeviceB</p>
<pre class="screen" id="EN-US_TASK_0000001176662423__screen1195101669214028">#
sysname DeviceB
#
vlan batch 2 to 3
#
interface <span>100GE</span><span>1/0/1</span>
 port default vlan 2
#
interface <span>100GE</span><span>1/0/2</span>
 port default vlan 2
#
interface <span>100GE</span><span>1/0/3</span>
 port default vlan 3
#
interface <span>100GE</span><span>1/0/4</span>
 port default vlan 3
#
interface <span>100GE</span><span>1/0/5</span>
 port link-type trunk
 port trunk allow-pass vlan 2 to 3
#
return</pre>
</li><li id="EN-US_TASK_0000001176662423__li1128327140214028"><div class="p" id="EN-US_TASK_0000001176662423__p1513638970214028"><a name="EN-US_TASK_0000001176662423__li1128327140214028"></a><a name="li1128327140214028"></a>DeviceC<pre class="screen" id="EN-US_TASK_0000001176662423__screen1047816210221">#
sysname DeviceC
#
vlan batch 2 to 3
#
interface <span>100GE</span><span>1/0/1</span>
 port link-type trunk
 port trunk allow-pass vlan 2 to 3
#
interface <span>100GE</span><span>1/0/2</span>
 port link-type trunk
 port trunk allow-pass vlan 2 to 3
#
return</pre>
</div>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_vlan_cfg_0016.html">Configuring Intra-VLAN Communication
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_vlan_cfg_0022.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_vlan_cfg_0024.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>

<script language="JavaScript">
<!--
initImageViewer('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>