
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Topology Change Notification Function">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_erps_cfg_0017.html">
<meta name="DC.Relation" scheme="URI" content="vrp_erps_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="vrp_erps_cfg_0023.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ERPS">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ERPS">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="ERPS">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001141653374">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring the Topology Change Notification Function</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001141653374"></a><a name="EN-US_TASK_0000001141653374"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Topology Change Notification Function</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001141653374__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If an upper-layer Layer 2 network is not notified of the topology change in an ERPS ring, MAC address entries on the upper-layer Layer 2 network are not updated. As a result, user traffic is interrupted. To ensure nonstop traffic transmission, configure the topology change notification function and specify the ERPS rings that will be notified of the topology change.</p>
<p>Frequent topology change notifications degrade the CPU processing capability of devices in an ERPS ring and cause the devices to frequently update Flush-FDB messages, consuming bandwidth resources. To prevent this problem, suppress topology change notification messages. You can set the topology change protection interval to suppress topology change notification messages and set the maximum number of topology change notification messages that can be processed during the topology change protection interval to prevent frequent MAC address and ARP entry deletion.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001141653374__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the view of a created ERPS ring.</span><p><pre class="screen"><a href="cmdqueryname=erps+ring"><b><span class="cmdname">erps ring</span></b></a> <i><span class="varname">ring-id</span></i></pre>
</p></li><li><span>Configure the ERPS ring to notify other ERPS rings of its topology change.</span><p><pre class="screen"><a href="cmdqueryname=tc-notify+erps+ring"><b><span class="cmdname">tc-notify erps ring</span></b></a> { <i><span class="varname">ring-id1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">ring-id2</span></i> ] } &amp;&lt;1-10&gt;   </pre>
<p>The <i><span class="varname">ring-id1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">ring-id2</span></i> ] parameter specifies the start and end IDs of the ERPS rings that will be notified of the topology change. Ensure that the rings specified by <i><span class="varname">ring-id1</span></i> and <i><span class="varname">ring-id2</span></i> exist. Otherwise, the configuration does not take effect.</p>
<p>After devices in the ERPS rings receive topology change notification messages from an ERPS ring, they send Flush-FDB messages on their own rings to instruct other devices in the rings to delete MAC addresses and learn new MAC addresses to ensure nonstop traffic transmission.</p>
</p></li><li><span>(Optional) Set the topology change protection interval to suppress topology change notification messages.</span><p><pre class="screen"><a href="cmdqueryname=tc-protection+interval"><b><span class="cmdname">tc-protection interval</span></b></a> <i><span class="varname">interval-value</span></i>   </pre>
</p></li><li><span>(Optional) Set the maximum number of topology change notification messages that devices in an ERPS ring can process within the topology change protection interval.</span><p><pre class="screen"><a href="cmdqueryname=tc-protection+threshold"><b><span class="cmdname">tc-protection threshold</span></b></a> <i><span class="varname">threshold-value</span></i></pre>
<p>The topology change protection interval is specified using the <a href="cmdqueryname=tc-protection+interval"><b><span class="cmdname">tc-protection interval</span></b></a> command.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_erps_cfg_0017.html">Configuring ERPSv2
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_erps_cfg_0021.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_erps_cfg_0023.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>