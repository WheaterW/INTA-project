
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling the MACsec Function">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_macsec_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_macsec_cfg_0005.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_macsec_cfg_0007.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security Protection">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563888329">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Enabling the MACsec Function</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563888329"></a><a name="EN-US_TASK_0000001563888329"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling the MACsec Function</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001563888329__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>To enable the MACsec function on a device, you need to create and configure a MACsec profile, apply the profile to an interface, and configure a CAK.</p>
<p>After the MACsec function is enabled on interfaces of two connected devices, they elect a key server based on their priorities, which can be configured in a MACsec profile. A smaller priority value indicates a higher priority. The device with a higher priority is elected as the key server. If the two devices have the same priority, their Secure Channel Identifiers (SCIs) are compared. An SCI consists of the MAC address of an interface and the last two bytes of the interface index. The device with a smaller SCI value is elected as the key server.</p>
<p>To ensure secure transmission of service data on the network, MACsec provides the data encryption and integrity check functions. You can specify an encryption mode to selectively enable data encryption and integrity check. Three encryption modes are available:</p>
<ul><li>None: Neither data encryption nor integrity check is performed.</li><li>Normal: Both data encryption and integrity check are performed.</li><li>Integrity-only: Integrity check is performed, and data encryption is not performed.</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After a MACsec connection is established, the server can switch the encryption algorithm, and the client also switches the encryption algorithm accordingly. However, when a Huawei device functions as a server and a non-Huawei device that does not support encryption algorithm switching functions as a client, encryption algorithm switching will cause the interruption of MACsec negotiation.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563888329__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><strong><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></strong></pre>
</p></li><li><span>Create and configure a MACsec profile.</span><ol type="a"><li class="substepexpand"><span>Create a MACsec profile and enter the MACsec profile view.</span><p><pre class="screen"><strong><a href="cmdqueryname=mac-security-profile+name"><b><span class="cmdname">mac-security-profile name</span></b></a></strong> <em><i><span class="varname">profile-name</span></i></em></pre>
</p></li><li class="substepexpand"><span>(Optional) Configure the MKA key server priority.</span><p><pre class="screen"><strong><a href="cmdqueryname=mka+keyserver+priority"><b><span class="cmdname">mka keyserver priority</span></b></a></strong> <em><i><span class="varname">priority</span></i></em></pre>
<p>By default, the MKA key server priority is 16.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure the MACsec encryption mode.</span><p><pre class="screen"><strong><a href="cmdqueryname=macsec+mode"><b><span class="cmdname">macsec mode</span></b></a></strong> { <strong><strong><span>none</span></strong></strong> | <strong><strong><span>normal</span></strong></strong> | <strong><strong><span>integrity-only</span></strong></strong> }</pre>
<p>By default, the MACsec encryption mode is normal.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When configuring MACsec on a network where data traffic is being transmitted, you can set the encryption mode on both ends to none. After MKA session negotiation is successful, change the encryption mode on both ends to normal. This shortens the traffic interruption time.</p>
</div></div>
</p></li></ol>
</li><li><span>Return to the system view.</span><p><pre class="screen"><strong><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></strong></pre>
</p></li><li><span>Enter the view of the interface to which the MACsec profile is to be applied.</span><p><pre class="screen"><strong><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a></strong> <em><i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></em></pre>
</p></li><li><span>Configure the CKN and CAK.</span><p><pre class="screen"><strong><a href="cmdqueryname=mka+cak-mode+static"><b><span class="cmdname">mka cak-mode static</span></b></a> <strong><span>ckn</span></strong></strong> <em>string-name</em> <strong>cak</strong> <em>string-key</em></pre>
<p>By default, no CKN or CAK is configured.</p>
<p>A CKN is the name of a CAK. To ensure that an MKA session can be successfully established between two devices, configure the same CKN and CAK on their connected interfaces.</p>
</p></li><li><span>Apply the MACsec profile to the interface.</span><p><pre class="screen"><strong><a href="cmdqueryname=mac-security-profile"><b><span class="cmdname">mac-security-profile</span></b></a></strong> <em><i><span class="varname">profile-name</span></i></em></pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The MACsec function takes effect only after the MACsec profile is applied to an interface. For details about interfaces that support MACsec, see Configuration Precautions for MACsec.</p>
</div></div>
</p></li><li><span>(Optional) Enable the MACsec module of the device to convert the byte order of XPN salt values.</span><p><pre class="screen"><a href="cmdqueryname=macsec+xpn-salt+reverse"><b><span class="cmdname">macsec xpn-salt reverse</span></b></a></pre>
<p>When network devices of other brands implement the MACsec function, the salt values delivered in XPN mode use the network sequence or host sequence. You can configure this command to implement compatibility among different implementation modes.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001563888329__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001563888329__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_macsec_cfg_0001.html">MACsec Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_macsec_cfg_0005.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_macsec_cfg_0007.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>