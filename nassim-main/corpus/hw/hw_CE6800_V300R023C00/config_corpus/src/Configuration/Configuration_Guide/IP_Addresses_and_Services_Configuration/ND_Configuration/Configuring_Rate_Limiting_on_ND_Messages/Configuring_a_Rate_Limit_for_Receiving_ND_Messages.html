
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Rate Limit for Receiving ND Messages">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_nd_cfg_0040.html">
<meta name="DC.Relation" scheme="URI" content="vrp_nd_cfg_0042.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176741973">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring a Rate Limit for Receiving ND Messages</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176741973"></a><a name="EN-US_TASK_0000001176741973"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Rate Limit for Receiving ND Messages</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176741973__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If a device is attacked, it receives a large number of ND messages within a short period. As a result, the device consumes many CPU resources to learn and respond to ND entries, affecting the processing of other services. To resolve this issue, configure a rate limit for receiving ND messages. After the configuration is complete, the device counts the number of ND messages received per period. If the number of ND messages exceeds the configured limit, the device does not process excess ND messages.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001176741973__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a rate limit for receiving ND messages globally.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure a rate limit for receiving ND messages.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring a rate limit for receiving ND messages</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="29.94299429942994%" id="mcps1.3.2.1.2.2.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="41.64416441644164%" id="mcps1.3.2.1.2.2.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="28.412841284128415%" id="mcps1.3.2.1.2.2.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="29.94299429942994%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND messages.</p>
</td>
<td class="cellrowborder" valign="top" width="41.64416441644164%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd"><b><span class="cmdname">ipv6 nd</span></b></a> { <a href="cmdqueryname=na"><b><span class="cmdname">na</span></b></a> | <a href="cmdqueryname=ns"><b><span class="cmdname">ns</span></b></a> | <a href="cmdqueryname=ra"><b><span class="cmdname">ra</span></b></a> | <a href="cmdqueryname=rs"><b><span class="cmdname">rs</span></b></a> } <a href="cmdqueryname=anti-attack+rate-limit"><b><span class="cmdname">anti-attack rate-limit</span></b></a> <i><span class="varname">limit</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="28.412841284128415%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.3 "><p>A rate limit refers to the number of ND messages that can be received per second.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.94299429942994%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND messages based on a specified source MAC address.</p>
</td>
<td class="cellrowborder" valign="top" width="41.64416441644164%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd"><b><span class="cmdname">ipv6 nd</span></b></a> { <a href="cmdqueryname=na"><b><span class="cmdname">na</span></b></a> | <a href="cmdqueryname=ns"><b><span class="cmdname">ns</span></b></a> | <a href="cmdqueryname=ra"><b><span class="cmdname">ra</span></b></a> | <a href="cmdqueryname=rs"><b><span class="cmdname">rs</span></b></a> } <a href="cmdqueryname=anti-attack+rate-limit+source-mac"><b><span class="cmdname">anti-attack rate-limit source-mac</span></b></a> <i><span class="varname">mac-address</span></i> <a href="cmdqueryname=maximum"><b><span class="cmdname">maximum</span></b></a> <i><span class="varname">max-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="28.412841284128415%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.3 "><p>After a rate limit for receiving ND messages based on a specified source MAC address is configured, the device counts the number of ND messages received per period based on the specified source MAC address. If the number of ND messages exceeds the configured limit, the device does not process excess ND messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.94299429942994%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND messages based on any source MAC address.</p>
</td>
<td class="cellrowborder" valign="top" width="41.64416441644164%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd"><b><span class="cmdname">ipv6 nd</span></b></a> { <a href="cmdqueryname=na"><b><span class="cmdname">na</span></b></a> | <a href="cmdqueryname=ns"><b><span class="cmdname">ns</span></b></a> | <a href="cmdqueryname=ra"><b><span class="cmdname">ra</span></b></a> | <a href="cmdqueryname=rs"><b><span class="cmdname">rs</span></b></a> } <a href="cmdqueryname=anti-attack+rate-limit+source-mac+all"><b><span class="cmdname">anti-attack rate-limit source-mac all</span></b></a> <a href="cmdqueryname=maximum"><b><span class="cmdname">maximum</span></b></a> <i><span class="varname">max-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="28.412841284128415%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.3 "><p>After a rate limit for receiving ND messages based on any source MAC address is configured, the device counts the number of ND messages received per period based on any source MAC address. If the number of ND messages exceeds the configured limit, the device does not process excess ND messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.94299429942994%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND messages based on a specified source IPv6 address.</p>
</td>
<td class="cellrowborder" valign="top" width="41.64416441644164%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd"><b><span class="cmdname">ipv6 nd</span></b></a> { <a href="cmdqueryname=na"><b><span class="cmdname">na</span></b></a> | <a href="cmdqueryname=ns"><b><span class="cmdname">ns</span></b></a> | <a href="cmdqueryname=ra"><b><span class="cmdname">ra</span></b></a> | <a href="cmdqueryname=rs"><b><span class="cmdname">rs</span></b></a> } <a href="cmdqueryname=anti-attack+rate-limit+source-ip"><b><span class="cmdname">anti-attack rate-limit source-ip</span></b></a> <i><span class="varname">ipv6-address</span></i> <a href="cmdqueryname=maximum"><b><span class="cmdname">maximum</span></b></a> <i><span class="varname">max-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="28.412841284128415%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.3 "><p>After a rate limit for receiving ND messages based on a specified source IPv6 address is configured, the device counts the number of ND messages received per period based on the specified source IPv6 address. If the number of ND messages exceeds the configured limit, the device does not process excess ND messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.94299429942994%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND messages based on any source IPv6 address.</p>
</td>
<td class="cellrowborder" valign="top" width="41.64416441644164%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd"><b><span class="cmdname">ipv6 nd</span></b></a> { <a href="cmdqueryname=na"><b><span class="cmdname">na</span></b></a> | <a href="cmdqueryname=ns"><b><span class="cmdname">ns</span></b></a> | <a href="cmdqueryname=ra"><b><span class="cmdname">ra</span></b></a> | <a href="cmdqueryname=rs"><b><span class="cmdname">rs</span></b></a> } <a href="cmdqueryname=anti-attack+rate-limit+source-ip+all"><b><span class="cmdname">anti-attack rate-limit source-ip all</span></b></a> <a href="cmdqueryname=maximum"><b><span class="cmdname">maximum</span></b></a> <i><span class="varname">max-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="28.412841284128415%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.3 "><p>After a rate limit for receiving ND messages based on any source IPv6 address is configured, the device counts the number of ND messages received per period based on any source IPv6 address. If the number of ND messages exceeds the configured limit, the device does not process excess ND messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.94299429942994%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND messages based on a specified destination IPv6 address.</p>
</td>
<td class="cellrowborder" valign="top" width="41.64416441644164%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd"><b><span class="cmdname">ipv6 nd </span></b></a>{ <strong><span>ns</span></strong> | <strong><span>na</span></strong> | <strong><span>rs</span></strong> | <strong><span>ra</span></strong> } <strong><span>anti-attack</span></strong> <strong><span>rate-limit</span></strong> <strong><span>destination-ip</span></strong> <i><span class="varname">ipv6-address</span></i> <strong><span>maximum</span></strong> <i><span class="varname">max-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="28.412841284128415%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.3 "><p>To resolve this issue, configure a rate limit for receiving ND messages based on a specified destination IPv6 address. After the configuration is complete, the device counts the number of ND messages received per period based on the specified destination IPv6 address. If the number of ND messages exceeds the configured limit, the device does not process excess ND messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.94299429942994%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND messages based on any destination IPv6 address.</p>
</td>
<td class="cellrowborder" valign="top" width="41.64416441644164%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd"><b><span class="cmdname">ipv6 nd </span></b></a>{ <strong><span>ns</span></strong> | <strong><span>na</span></strong> | <strong><span>rs</span></strong> | <strong><span>ra</span></strong> } <strong><span>anti-attack</span></strong> <strong><span>rate-limit</span></strong> <strong><span>destination-ip</span></strong> <strong><span>all</span></strong> <strong><span>maximum</span></strong> <i><span class="varname">max-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="28.412841284128415%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.3 "><p>To resolve this issue, configure a rate limit for receiving ND messages based on any destination IPv6 address. After the configuration is complete, the device counts the number of ND messages received per period based on any destination IPv6 address. If the number of ND messages exceeds the configured limit, the device does not process excess ND messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.94299429942994%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND messages based on a specified target IPv6 address.</p>
</td>
<td class="cellrowborder" valign="top" width="41.64416441644164%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd"><b><span class="cmdname">ipv6 nd </span></b></a>{ <strong><span>ns</span></strong> | <strong><span>na</span></strong> } <strong><span>anti-attack</span></strong> <strong><span>rate-limit</span></strong> <strong><span>target-ip</span></strong> <i><span class="varname">ipv6-address</span></i> <strong><span>maximum</span></strong> <i><span class="varname">max-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="28.412841284128415%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.3 "><p>To resolve this issue, configure a rate limit for receiving ND messages based on a specified target IPv6 address. After the configuration is complete, the device counts the number of ND messages received per period based on the specified target IPv6 address. If the number of ND messages exceeds the configured limit, the device does not process excess ND messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.94299429942994%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND messages based on any target IPv6 address.</p>
</td>
<td class="cellrowborder" valign="top" width="41.64416441644164%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd"><b><span class="cmdname">ipv6 nd </span></b></a>{ <strong><span>ns</span></strong> | <strong><span>na</span></strong> } <strong><span>anti-attack</span></strong> <strong><span>rate-limit</span></strong> <strong><span>target-ip</span></strong> <strong><span>all</span></strong> <strong><span>maximum</span></strong> <i><span class="varname">max-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="28.412841284128415%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.3 "><p>To resolve this issue, configure a rate limit for receiving ND messages based on any target IPv6 address. After the configuration is complete, the device counts the number of ND messages received per period based on any target IPv6 address. If the number of ND messages exceeds the configured limit, the device does not process excess ND messages.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>(Optional) Configure an interval for recording ND logs for potential attacks and sending the corresponding ND traps.</span><p><pre class="screen"> <a href="cmdqueryname=ipv6+nd+anti-attack+log-trap-timer"><b><span class="cmdname">ipv6 nd anti-attack log-trap-timer</span></b></a> <i><span class="varname">time-value</span></i></pre>
</p><p><p>After a rate limit is configured for ND messages, the device counts the number of received ND messages. If the number of ND messages received in a specified period exceeds the configured limit, the device discards excess ND messages. The device considers this is a potential attack, and records ND logs for the potential attack and sends the corresponding ND traps to the NMS. If potential attacks frequently occur, the device generates a large number of logs and traps. To resolve this issue, configure a large interval for recording ND logs and sending ND traps.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176741973__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176741973__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure a rate limit for receiving ND messages on an interface.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Switch the interface working mode to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enable IPv6.</span><p><pre class="screen"><a href="cmdqueryname=ipv6+enable"><b><span class="cmdname">ipv6 enable</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure a rate limit for receiving ND messages.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Configuring a rate limit for receiving ND messages</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="29.94299429942994%" id="mcps1.3.2.2.2.5.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="41.64416441644164%" id="mcps1.3.2.2.2.5.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="28.412841284128415%" id="mcps1.3.2.2.2.5.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="29.94299429942994%" headers="mcps1.3.2.2.2.5.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND messages.</p>
</td>
<td class="cellrowborder" valign="top" width="41.64416441644164%" headers="mcps1.3.2.2.2.5.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd"><b><span class="cmdname">ipv6 nd</span></b></a> { <a href="cmdqueryname=na"><b><span class="cmdname">na</span></b></a> | <a href="cmdqueryname=ns"><b><span class="cmdname">ns</span></b></a> | <a href="cmdqueryname=ra"><b><span class="cmdname">ra</span></b></a> |<a href="cmdqueryname=rs"><b><span class="cmdname"> rs</span></b></a> }<a href="cmdqueryname=anti-attack+rate-limit"><b><span class="cmdname"> anti-attack rate-limit</span></b></a> <i><span class="varname">limit</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="28.412841284128415%" headers="mcps1.3.2.2.2.5.2.1.2.4.1.3 "><p>A rate limit refers to the number of ND messages that can be received per second.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.94299429942994%" headers="mcps1.3.2.2.2.5.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND messages based on a specified source IPv6 address.</p>
</td>
<td class="cellrowborder" valign="top" width="41.64416441644164%" headers="mcps1.3.2.2.2.5.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd"><b><span class="cmdname">ipv6 nd</span></b></a> { <a href="cmdqueryname=na"><b><span class="cmdname">na</span></b></a> | <a href="cmdqueryname=ns"><b><span class="cmdname">ns</span></b></a> | <a href="cmdqueryname=ra"><b><span class="cmdname">ra</span></b></a> | <a href="cmdqueryname=rs"><b><span class="cmdname">rs</span></b></a> } <a href="cmdqueryname=anti-attack+rate-limit+source-ip"><b><span class="cmdname">anti-attack rate-limit source-ip</span></b></a> <i><span class="varname">ipv6-address</span></i> <a href="cmdqueryname=maximum"><b><span class="cmdname">maximum</span></b></a> <i><span class="varname">max-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="28.412841284128415%" headers="mcps1.3.2.2.2.5.2.1.2.4.1.3 "><p>After a rate limit for receiving ND messages based on a specified source IPv6 address is configured, the device counts the number of ND messages received per period based on the specified source IPv6 address. If the number of ND messages exceeds the configured limit, the device does not process excess ND messages.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176741973__en-us_task_0234857734_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176741973__en-us_task_0234857734_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0000001176741973__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+ipv6+nd+anti-attack+rate-limit+configuration"><b><span class="cmdname">display ipv6 nd anti-attack rate-limit configuration</span></b></a> command to check the configuration of the rate limit for receiving ND messages.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_nd_cfg_0040.html">Configuring Rate Limiting on ND Messages
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_nd_cfg_0042.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>