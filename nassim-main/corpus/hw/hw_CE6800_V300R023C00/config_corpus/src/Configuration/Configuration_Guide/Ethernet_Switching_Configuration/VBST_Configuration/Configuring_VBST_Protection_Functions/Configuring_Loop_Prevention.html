
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Loop Prevention">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_vbst_cfg_0023.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_vbst_cfg_0027.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VBST">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VBST">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="VBST">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512689210">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Loop Prevention</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512689210"></a><a name="EN-US_TASK_0000001512689210"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Loop Prevention</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001512689210__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>On a network running a spanning tree protocol, a device maintains the root port and blocked port states based on BPDUs received from upstream devices. However, if the ports cannot receive BPDUs from upstream devices because of link congestion or unidirectional link failures, the device re-selects a root port. In this case, the original root port will then become a designated port, and the original blocked ports will change to the Forwarding state. This may cause loops on the network; however, it can be avoided through loop prevention.</p>
<p>If the root port or alternate port does not receive BPDUs from the upstream device for a long time, the device enabled with loop prevention sends a notification to the NMS. In this case, the root port enters the Discarding state and becomes the designated port, while the alternate port remains blocked and becomes the designated port. This prevents loops. In this case, loops will not occur on the network. The root or alternate port is restored to the Forwarding state only when it receives BPDUs.</p>
<p>If the device has an alternate port, which is a backup for the root port, configure loop prevention on both the root and alternate ports.</p>
<p>Root protection and loop prevention cannot be configured on the same port.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512689210__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the interface view of the root port or alternate port.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></pre>
</p></li><li><span>Switch the interface working mode to Layer 2.</span><p><pre class="screen" id="EN-US_TASK_0000001512689210__en-us_task_0228023023_screen242613534459"><a href="cmdqueryname=portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001512689210__en-us_task_0228023023_cmdname942715314511">portswitch</span></b></a></pre>
<p id="EN-US_TASK_0000001512689210__en-us_task_0228023023_p1175711105814">Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li><span>Enable loop prevention.</span><p><pre class="screen"><a href="cmdqueryname=stp+loop-protection"><b><span class="cmdname">stp loop-protection</span></b></a></pre>
<p>By default, loop prevention is disabled.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512689210__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512689210__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001512689210__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+stp+vlan"><b><span class="cmdname">display stp vlan</span></b></a> [ <i><span class="varname">vlan-id</span></i> ] <strong><span>information</span></strong> [ <strong><span>brief</span></strong> ] command and check the Protection Type field to verify the loop prevention configuration.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_vbst_cfg_0023.html">Configuring VBST Protection Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_vbst_cfg_0027.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>