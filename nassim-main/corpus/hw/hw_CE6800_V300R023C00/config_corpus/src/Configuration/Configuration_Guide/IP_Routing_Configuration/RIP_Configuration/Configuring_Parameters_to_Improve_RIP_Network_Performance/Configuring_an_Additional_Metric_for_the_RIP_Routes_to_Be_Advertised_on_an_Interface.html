
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an Additional Metric for the RIP Routes to Be Advertised on an Interface">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_rip_cfg_0037.html">
<meta name="DC.Relation" scheme="URI" content="vrp_rip_cfg_0039.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="RIP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="RIP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="RIP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176742619">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring an Additional Metric for the RIP Routes to Be Advertised on an Interface</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176742619"></a><a name="EN-US_TASK_0000001176742619"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an Additional Metric for the RIP Routes to Be Advertised on an Interface</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176742619__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>The additional metric (hop count) is added to the original RIP route metric. You can run different commands to configure an additional metric for the RIP routes to be advertised.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176742619__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li><span>Switch the interface working mode from Layer 2 to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
<p></p>
<p>Determine whether to perform this step based on the current interface mode.</p>
</p></li><li><span>Configure a metric to be added to the routes advertised by the interface. Perform either of the following operations based on actual conditions:</span><p><ul><li>Configure an additional metric for routes that match a specified ACL.<ol type="a"><li>Return to the system view.<pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Create an ACL and enter the ACL view.<pre class="screen"><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> { <strong><span>name</span></strong> <i><span class="varname">basic-acl-name</span></i> [ <strong><span>basic</span></strong> ] | [ <strong><span>number</span></strong> ] <i><span class="varname">basic-acl-number</span></i> }</pre>
</li><li>Configure an ACL rule.<pre class="screen"><a href="cmdqueryname=rule"><b><span class="cmdname">rule </span></b></a>[ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } [ <strong><span>fragment-type</span></strong> <strong><span>fragment</span></strong> | <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> | <i><span class="varname">src-netmask</span></i> } | <strong><span>any</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>logging</span></strong> ] <sup>*</sup></pre>
<p>When the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command is used to configure a filtering rule for a named ACL, only the configurations specified by <strong><span>source</span></strong> and <strong><span>time-range</span></strong> take effect.</p>
<p>The following table lists the strategies that can be taken when an ACL is used for filtering.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>ACL policies</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="32.59%" id="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.1" liSelected="liSelected"><p>Policy</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="67.41%" id="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.2" liSelected="liSelected"><p>Filter Result</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="32.59%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.1 "><p>The ACL rule action is set to <strong>permit</strong>.</p>
</td>
<td class="cellrowborder" valign="top" width="67.41%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.2 "><p>A route that matches the rule can be advertised.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.59%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.1 "><p>The ACL rule action is set to <strong>deny</strong>.</p>
</td>
<td class="cellrowborder" valign="top" width="67.41%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.2 "><p>A route that matches the rule will not be advertised.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.59%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.1 "><p>The network segment of a route is beyond the range specified in the ACL rule.</p>
</td>
<td class="cellrowborder" valign="top" width="67.41%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.2 "><p>A route that matches the rule is not advertised by default.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.59%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.1 "><p>The ACL does not contain rules.</p>
</td>
<td class="cellrowborder" valign="top" width="67.41%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.2 "><p>The routes matching against the filter-policy based on this ACL will not be advertised.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32.59%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.1 "><p>If ACL rules are used for matching in the configuration order, a routing device matches routes against rules that are numbered in ascending order.</p>
</td>
<td class="cellrowborder" valign="top" width="67.41%" headers="mcps1.3.2.4.2.1.1.1.3.4.2.3.1.2 "><p>In this case, routes can be filtered using a blacklist or whitelist.</p>
<p>Filtering using a blacklist: Configure a rule with a smaller ID and specify the action <strong>deny</strong> to filter out unwanted routes. Then, configure another rule with a larger ID in the same ACL and specify the action <strong>permit</strong> to allow other routes to be advertised.</p>
<p>Filtering using a whitelist: Configure a rule with a smaller ID and specify the action <strong>permit</strong> to allow the routes to be advertised. Then, configure another rule with a larger ID in the same ACL and specify the action <strong>deny</strong> to filter out unwanted routes.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>Return to the system view.<pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Enter the interface view.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</li><li>Implement filtering based on the ACL.<pre class="screen"><a href="cmdqueryname=rip+metricout"><b><span class="cmdname">rip metricout</span></b></a> { <i><span class="varname">value</span></i> | { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } <i><span class="varname">value1</span></i> }</pre>
</li></ol>
</li><li><p>Configure an additional metric for routes that match a specified IP prefix list.</p>
<pre class="screen"><a href="cmdqueryname=rip+metricout"><b><span class="cmdname">rip metricout</span></b></a> { <i><span class="varname">value</span></i> | <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> <i><span class="varname">value1</span></i> }</pre>
</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When the <a href="cmdqueryname=rip+metricout"><b><span class="cmdname">rip metricout</span></b></a> command is used with an ACL or IP prefix list to configure an additional metric for the RIP routes to be advertised on an interface, the additional metric is added to the original metric of the RIP routes that match the ACL or IP prefix list specified in a route-policy. The metrics of RIP routes that do not pass the route-policy are increased by 1. Therefore, when the <a href="cmdqueryname=rip+metricout"><b><span class="cmdname">rip metricout</span></b></a> command is used with an ACL or IP prefix list, the additional metric ranges from 2 to 15.</p>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176742619__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176742619__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_rip_cfg_0037.html">Configuring Parameters to Improve RIP Network Performance
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_rip_cfg_0039.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>