
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Testing the Server Connectivity">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0051.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0053.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0055.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="AAA">
<meta name="featurename" content="AD">
<meta name="featurename" content="HWTACACS">
<meta name="featurename" content="LDAP">
<meta name="featurename" content="RADIUS">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="AAA">
<meta name="featurename" content="AD">
<meta name="featurename" content="HWTACACS">
<meta name="featurename" content="LDAP">
<meta name="featurename" content="RADIUS">
<meta name="featurename" content="Local User">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featurename" content="AAA">
<meta name="featurename" content="AD">
<meta name="featurename" content="HWTACACS">
<meta name="featurename" content="LDAP">
<meta name="featurename" content="RADIUS">
<meta name="featurename" content="Local User">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513035670">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Testing the Server Connectivity</title>
</head>
<body><a name="EN-US_TASK_0000001513035670"></a><a name="EN-US_TASK_0000001513035670"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Testing the Server Connectivity</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001513035670__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When configuring remote server authentication, you can run the <a href="cmdqueryname=test-aaa"><b><span class="cmdname">test-aaa</span></b></a> command to manually test the connectivity between a single user and the authentication or accounting server. This facilitates fault location.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001513035670__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Run the <a href="cmdqueryname=test-aaa"><b><span class="cmdname">test-aaa</span></b></a> command in any view to test the connectivity between the device and server.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Testing the server connectivity</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.2.1.2.1.2.3.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.2.1.2.1.2.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.1.2.1.2.3.1.1 "><p>Test the connectivity between the device and the RADIUS authentication or accounting server.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.1.2.1.2.3.1.2 "><p><a href="cmdqueryname=test-aaa"><b><span class="cmdname">test-aaa</span></b></a> <i><span class="varname">user-name</span></i> <i><span class="varname">user-password</span></i> <strong><span>radius-template</span></strong> <i><span class="varname">template-name</span></i> [ <strong>chap</strong> | <strong>pap</strong> | <strong>accounting</strong> ] [ <strong>chap</strong> | <strong>pap</strong> | <strong>accounting</strong> [ <strong>start</strong> | <strong>realtime</strong> | <strong>stop</strong> ] ] [ <strong>called-station-id</strong> ]</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.1.2.1.2.3.1.1 "><p>Test the connectivity between the device and the HWTACACS authentication or accounting server.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.1.2.1.2.3.1.2 "><p><a href="cmdqueryname=test-aaa"><b><span class="cmdname">test-aaa</span></b></a> <i><span class="varname">user-name</span></i> <i><span class="varname">user-password</span></i> <strong><span>hwtacacs-template</span></strong> <i><span class="varname">template-name</span></i> [ <strong>accounting</strong> [ <strong>start</strong> | <strong>realtime</strong> | <strong>stop</strong> ] ]</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.1.2.1.2.3.1.1 "><p>Test the connectivity between the device and the LDAP authentication server.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.1.2.1.2.3.1.2 "><p><a href="cmdqueryname=test-aaa"><b><span class="cmdname">test-aaa</span></b></a> <em>user-name</em> <em>user-password</em> <strong>ldap-template</strong> <em>template-name</em></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0000001513035670__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><p>The Info messages of the <a href="cmdqueryname=test-aaa"><b><span class="cmdname">test-aaa</span></b></a> do not distinguish between the server types. <a href="#EN-US_TASK_0000001513035670__table1663784615338">Table 2</a> describes the Info messages.</p>

<div class="tableBorder"><a name="EN-US_TASK_0000001513035670__table1663784615338"></a><a name="table1663784615338"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0000001513035670__table1663784615338" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Info messages of the <a href="cmdqueryname=test-aaa"><b><span class="cmdname">test-aaa</span></b></a> command</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="31.490000000000002%" id="mcps1.4.3.2.2.4.1.1" liSelected="liSelected"><p>Info Message</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="32.31%" id="mcps1.4.3.2.2.4.1.2" liSelected="liSelected"><p>Description</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="36.199999999999996%" id="mcps1.4.3.2.2.4.1.3" liSelected="liSelected"><p>Troubleshooting Method</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="31.490000000000002%" headers="mcps1.4.3.2.2.4.1.1 "><p>Info: Account test succeeded.</p>
</td>
<td class="cellrowborder" valign="top" width="32.31%" headers="mcps1.4.3.2.2.4.1.2 "><p>The device can communicate with the server.</p>
</td>
<td class="cellrowborder" valign="top" width="36.199999999999996%" headers="mcps1.4.3.2.2.4.1.3 "><p>See&middot;<a href="#EN-US_TASK_0000001513035670__li72026307467">Info: Account test succeeded.</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.490000000000002%" headers="mcps1.4.3.2.2.4.1.1 "><p>Info: Authentication may fail due to incorrect name or password.</p>
</td>
<td class="cellrowborder" valign="top" width="32.31%" headers="mcps1.4.3.2.2.4.1.2 "><p>The device can communicate with the server. However, the user name and password used in the test are different from those configured on the server.</p>
</td>
<td class="cellrowborder" valign="top" width="36.199999999999996%" headers="mcps1.4.3.2.2.4.1.3 "><p>Run the <strong>test-aaa</strong> command to check whether the user name and password are correct. If this Info message is displayed, the user name and password are incorrect. Ensure that the user name and password are correct during user authentication.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.490000000000002%" headers="mcps1.4.3.2.2.4.1.1 "><p>Info: Authentication may fail due to incorrect shared key.</p>
</td>
<td class="cellrowborder" valign="top" width="32.31%" headers="mcps1.4.3.2.2.4.1.2 "><p>The shared key of the server configured on the device is different from that configured on the server.</p>
</td>
<td class="cellrowborder" valign="top" width="36.199999999999996%" headers="mcps1.4.3.2.2.4.1.3 "><p>Reconfigure the shared key on the device and server.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.490000000000002%" headers="mcps1.4.3.2.2.4.1.1 "><p>Info: The server template does not exist.</p>
</td>
<td class="cellrowborder" valign="top" width="32.31%" headers="mcps1.4.3.2.2.4.1.2 "><p>The server template used for the test is not configured on the device.</p>
</td>
<td class="cellrowborder" valign="top" width="36.199999999999996%" headers="mcps1.4.3.2.2.4.1.3 "><p>Configure a server template for the test on the device.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.490000000000002%" headers="mcps1.4.3.2.2.4.1.1 "><p>Info: One more user doing this operation is not permitted. Please wait for a while to do this operation again.</p>
</td>
<td class="cellrowborder" valign="top" width="32.31%" headers="mcps1.4.3.2.2.4.1.2 "><p>Multiple users are running the <strong>test-aaa</strong> command at the same time.</p>
</td>
<td class="cellrowborder" valign="top" width="36.199999999999996%" headers="mcps1.4.3.2.2.4.1.3 "><p>Ensure that the <strong>test-aaa</strong> command is run by only one user at a time.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.490000000000002%" headers="mcps1.4.3.2.2.4.1.1 "><p>Info: Account test failed.</p>
</td>
<td class="cellrowborder" valign="top" width="32.31%" headers="mcps1.4.3.2.2.4.1.2 "><p>Test failed.</p>
</td>
<td class="cellrowborder" valign="top" width="36.199999999999996%" headers="mcps1.4.3.2.2.4.1.3 "><p>See <a href="#EN-US_TASK_0000001513035670__li10201193020467">Info: Account test failed.</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.490000000000002%" headers="mcps1.4.3.2.2.4.1.1 "><p>Info: Account test time out.</p>
</td>
<td class="cellrowborder" valign="top" width="32.31%" headers="mcps1.4.3.2.2.4.1.2 "><p>The test timed out.</p>
</td>
<td class="cellrowborder" valign="top" width="36.199999999999996%" headers="mcps1.4.3.2.2.4.1.3 "><p>See&middot;<a href="#EN-US_TASK_0000001513035670__li162011130134617">Info: Account test time out.</a></p>
</td>
</tr>
</tbody>
</table>
</div>
<ul><li id="EN-US_TASK_0000001513035670__li162011130134617"><a name="EN-US_TASK_0000001513035670__li162011130134617"></a><a name="li162011130134617"></a><strong>Info: Account test time out.</strong><div class="p">The following describes possible causes:<ul><li>There are no reachable routes between the device and the server.</li><li>The NAS IP address configured in the RADIUS server template is different from that on the RADIUS server.</li><li>The RADIUS server address in the RADIUS server template is incorrect.</li><li>The authentication port number configured in the RADIUS server template is incorrect.</li><li>The authentication port number on the RADIUS server is used by another program.</li><li>The IP address of the access control device is incorrect or the RADIUS server is not started.</li></ul>
</div>
<div class="p">Procedure<ul><li>Run the <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> command to check whether there are reachable routes between the device and the server.</li><li>Run the <a href="cmdqueryname=display+radius-server+configuration"><b><span class="cmdname">display radius-server configuration</span></b></a> [ <strong><span>template</span></strong> <i><span class="varname">template-name</span></i> ] command in any view to check whether the port number configured in the RADIUS server template is the same as that on the RADIUS server and whether the NAS IP address is the same as that on the RADIUS server.</li><li>When the controller functions as the RADIUS server, run the <a href="cmdqueryname=netstat+-nao"><b><span class="cmdname">netstat -nao</span></b></a> | <a href="cmdqueryname=findstr+1812"><b><span class="cmdname">findstr 1812</span></b></a> and <a href="cmdqueryname=netstat+-nao"><b><span class="cmdname">netstat -nao</span></b></a> | <a href="cmdqueryname=findstr+1813"><b><span class="cmdname">findstr 1813</span></b></a> commands on the server to check whether the authentication port number is used by another program. If another program uses this port number, close the program.</li><li>Check whether the IP address of the access control device is correct.</li></ul>
</div>
</li><li id="EN-US_TASK_0000001513035670__li10201193020467"><a name="EN-US_TASK_0000001513035670__li10201193020467"></a><a name="li10201193020467"></a><strong>Info: Account test failed.</strong><p>The following describes possible causes:</p>
<p>The RADIUS server IP address is not configured.</p>
<p>Procedure</p>
<p>Run the <a href="cmdqueryname=display+radius-server+configuration"><b><span class="cmdname">display radius-server configuration</span></b></a> [ <strong><span>template</span></strong> <i><span class="varname">template-name</span></i> ] command in any view to check whether the RADIUS server IP address is configured in the RADIUS server template.</p>
</li><li id="EN-US_TASK_0000001513035670__li72026307467"><a name="EN-US_TASK_0000001513035670__li72026307467"></a><a name="li72026307467"></a><strong>Info: Account test succeeded.</strong> The device is connected to the server, but the user cannot pass the authentication during login.<p>The following describes possible causes:</p>
<p>Check whether the domain used for user authentication is the same as the domain configured for RADIUS authentication on the device.</p>
<div class="p">Procedure<ul><li><p>Run the <a href="cmdqueryname=display+this"><b><span class="cmdname">display this</span></b></a> command in the AAA view to check whether the domain used for user authentication is the same as the domain configured for RADIUS authentication on the device.</p>
<ul><li>If the user name entered by the user contains a domain name, check whether RADIUS authentication is configured in the domain with the domain name.</li><li>If the user name entered by the user does not contain a domain name, check whether RADIUS authentication is configured in the global default domain.</li></ul>
</li><li>Run the <a href="cmdqueryname=display+this"><b><span class="cmdname">display this</span></b></a> command in the AAA view to check whether the AAA authentication scheme and RADIUS server template are applied to the domain.</li></ul>
</div>
</li></ul>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_aaa_cfg_0051.html">Maintaining AAA
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_aaa_cfg_0053.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_aaa_cfg_0055.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>