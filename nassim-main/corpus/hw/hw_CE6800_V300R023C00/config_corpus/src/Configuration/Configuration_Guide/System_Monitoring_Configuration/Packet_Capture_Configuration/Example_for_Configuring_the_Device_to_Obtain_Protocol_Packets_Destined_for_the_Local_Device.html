
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring the Device to Obtain Protocol Packets Destined for the Local Device">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_CP_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_CP_cfg_0008.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Packet Capture">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Packet Capture">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563872221">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring the Device to Obtain Protocol Packets Destined for the Local Device</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563872221"></a><a name="EN-US_TASK_0000001563872221"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring the Device to Obtain Protocol Packets Destined for the Local Device</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563872221__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In <a href="#EN-US_TASK_0000001563872221__fig168713817385">Figure 1</a>, DeviceA connects to the Internet through interface 1.</p>
<p>When DeviceA is abnormal, the network administrator needs to obtain all the protocol packets sent from interface 1 to the local device and save the obtained packets to the <strong>capture.cap</strong> file. In this way, the network administrator can process invalid packets promptly to ensure stable running of the local device.</p>
<div class="fignone" id="EN-US_TASK_0000001563872221__fig168713817385"><a name="EN-US_TASK_0000001563872221__fig168713817385"></a><a name="fig168713817385"></a><span class="figcap"><b>Figure 1 </b>Network diagram for obtaining protocol packets destined for the local device</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1 represents <span>100GE</span> <span>1/0/1</span>.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001563872233.png"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563872221__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure DeviceA to obtain packets sent from <span>100GE</span> <span>1/0/1</span> to the local device and save the obtained packets to the <strong>capture.cap</strong> file.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname DeviceA</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> quit</strong>
&lt;DeviceA&gt; <strong>capture-packet local-host interface <span>100ge</span> <span>1/0/1</span> destination file capture.cap</strong>
Warning: The capture packet may disclosure the personal information.
Warning: Capture-packet data will be saved to flash:/logfile/capture.cap.           </pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001563872221__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Run the <a href="cmdqueryname=display+capture-packet+file+flash%3A%2Flogfile%2Fcapture.cap"><b><span class="cmdname">display capture-packet file flash:/logfile/capture.cap</span></b></a> command on DeviceA to view the content of the <strong>capture.cap</strong> file.</p>
<pre class="screen">&lt;DeviceA&gt; display capture-packet file flash:/logfile/capture.cap
a1 b2 c3 d4 00 02 00 04 00 00 00 00 00 00 00 00
00 00 ff ff 00 00 00 09 4d 10 36 db 00 0a d5 81
00 00 00 0c 00 00 00 0c ff 03 c0 21 09 9d 00 08
8a 8c bc c3 4d 10 36 db 00 0a d6 ae</pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001563872221__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Configuration Scripts</h4><p>DeviceA</p>
<pre class="screen">#
sysname DeviceA
#
return</pre>
<p></p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_CP_cfg_0001.html">Packet Capture Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_CP_cfg_0008.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>