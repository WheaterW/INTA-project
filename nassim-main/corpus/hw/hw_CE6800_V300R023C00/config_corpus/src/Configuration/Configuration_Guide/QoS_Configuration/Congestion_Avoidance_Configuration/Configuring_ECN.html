
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring ECN">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_congestion_avoid_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_congestion_avoid_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_congestion_avoid_cfg_0017.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Congestion Avoidance">
<meta name="featuretype" content="QoS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Congestion Avoidance">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513034370">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring ECN</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001513034370"></a><a name="EN-US_TASK_0000001513034370"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring ECN</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001513034370__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>With fast ECN enabled, the device tags an outgoing packet with the ECN field when the packet leaves the queue. The destination server then can receive the tagged packet with the least delay possible.</p>
<p>For best effect, WRED and ECN can be combined, as follows:</p>
<ol><li>When detecting congestion on an outbound interface, the device adds an ECN field to packets to notify the destination server of the congestion.</li><li>After receiving a packet carrying the ECN field, the destination server sends a CNP to instruct the source server to reduce the traffic rate.</li><li>After receiving the CNP, the source server reduces the traffic rate, alleviating or avoiding congestion.</li></ol>
<p>You can configure ECN to reduce the rate of traffic sent from the upstream device and therefore mitigate network congestion.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After ECN is enabled for a queue, if congestion occurs in that queue, the device does not randomly discard packets. Instead, it randomly marks packets based on the configured WRED drop profile. When the queue length reaches the upper threshold in the WRED drop profile, the device starts to mark all packets.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001513034370__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Create a WRED drop profile and enter the WRED drop profile view.</span><p><pre class="screen" id="EN-US_TASK_0000001513034370__en-us_task_0000001563874325_screen16291189113319"><a href="cmdqueryname=drop-profile"><b><span class="cmdname" id="EN-US_TASK_0000001513034370__en-us_task_0000001563874325_cmdname83001896338">drop-profile</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001513034370__en-us_task_0000001563874325_varname43003983315">drop-profile-name</span></i></pre>
<p id="EN-US_TASK_0000001513034370__en-us_task_0000001563874325_p69648313575">By default, a WRED drop profile named <strong id="EN-US_TASK_0000001513034370__en-us_task_0000001563874325_b1945155415172">default</strong> exists on the device.</p>
<p id="EN-US_TASK_0000001513034370__en-us_task_0000001563874325_p12951841144311">A maximum of 16 WRED drop profiles, including the default drop profile, can be configured on the device for the <span>CE6866, CE6860-SAN, CE6866K, CE6860-HAM, CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, CE8850-HAM</span>. The default drop profile cannot be deleted, and only parameters in the profile can be modified.</p>
<p id="EN-US_TASK_0000001513034370__en-us_task_0000001563874325_p19809112264418">A maximum of 63 WRED drop profiles, including the default drop profile, can be configured on the device for the <span>CE6820H, CE6820H-K, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6820S</span>, <span>CE8855, CE8851-32CQ4BQ, CE6855-48XS8CQ, CE6885, CE6885-SAN, CE6885-LL, CE6885-T, CE6863E-48S8CQ</span>. The default drop profile cannot be deleted, and only parameters in the profile can be modified.</p>
</p></li><li><span>Set ECN parameters, including the absolute values of upper and lower drop thresholds, upper and lower drop thresholds in percentage, and maximum drop probability.</span><p><pre class="screen"><a href="cmdqueryname=ecn"><b><span class="cmdname">ecn</span></b></a> { <strong><span>buffer-size</span></strong> <strong><span>low-limit</span></strong> <i><span class="varname">low-buffer-size</span></i> <strong><span>high-limit</span></strong> <i><span class="varname">high-buffer-size</span></i> | <strong><span>buffer-size</span></strong> <strong><span>cell</span></strong> <strong><span>low-limit</span></strong> <i><span class="varname">low-buffer-cell-size</span></i> <strong><span>high-limit</span></strong> <i><span class="varname">high-buffer-cell-size</span></i> | <strong><span>low-limit</span></strong> <i><span class="varname">low-limit-percentage</span></i> <strong><span>high-limit</span></strong> <i><span class="varname">high-limit-percentage</span></i> } <strong><span>discard-percentage</span></strong> <i><span class="varname">discard-percentage-value</span></i></pre>
<p>By default, the upper and lower drop thresholds in percentage, absolute values of upper and lower drop thresholds, and maximum drop probability are not set.</p>
</p></li><li><span>Exit the WRED drop profile view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li><li><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name </span></i>}</pre>
</p></li><li><span>Apply the WRED drop profile to queues on an interface.</span><p><pre class="screen"><a href="cmdqueryname=qos+queue"><b><span class="cmdname">qos queue</span></b></a> <em><i><span class="varname">queue-index</span></i></em> <strong><span>wred</span></strong> <i><span class="varname">drop-profile-name</span></i></pre>
</p></li><li><span>Enable ECN for a specified queue.</span><p><pre class="screen"><a href="cmdqueryname=qos+queue"><b><span class="cmdname">qos queue</span></b></a> <i><span class="varname">queue-index</span></i> <strong><span>ecn</span></strong></pre>
</p></li><li><span>Enable ECN globally for the <span>CE6866, CE6860-SAN, CE6866K, CE6860-HAM, CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, CE8850-HAM</span>.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a>
<a href="cmdqueryname=qos+ecn+enable"><b><span class="cmdname">qos ecn enable</span></b></a></pre>
<p>If ECN needs to be enabled for multiple queues, you can enable this function in the system view.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_congestion_avoid_cfg_0001.html">Congestion Avoidance Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_congestion_avoid_cfg_0006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_congestion_avoid_cfg_0017.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>