
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Devices Cannot Communicate Using VLANIF Interfaces">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0086.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0089.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="QinQ">
<meta name="featurename" content="VLAN">
<meta name="featurename" content="VLAN Mapping">
<meta name="featurename" content="VLAN Pool">
<meta name="featurename" content="Voice VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130782626">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Devices Cannot Communicate Using VLANIF Interfaces</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130782626"></a><a name="EN-US_TASK_0000001130782626"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Devices Cannot Communicate Using VLANIF Interfaces</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130782626__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><div class="p"><h4 class="sectiontitle">Fault Symptom</h4><p>In <a href="#EN-US_TASK_0000001130782626__fig7173175418488">Figure 1</a>, VLANIF 2 on DeviceA and VLANIF 2 on DeviceB are configured with an IP address. Although the two IP addresses are on the same network segment, DeviceA and DeviceB cannot ping each other.</p>
<div class="fignone" id="EN-US_TASK_0000001130782626__fig7173175418488"><a name="EN-US_TASK_0000001130782626__fig7173175418488"></a><a name="fig7173175418488"></a><span class="figcap"><b>Figure 1 </b>Devices cannot communicate with each other using VLANIF interfaces</span><br><span><img class="vsd" src="figure/en-us_image_0000001130622884.png"></span></div>
<h4 class="sectiontitle">Possible Causes</h4><ul><li>A VLANIF interface goes down.</li><li>The interfaces (interface 1 and interface 2 in this example) connecting DeviceA and DeviceB are not added to the target VLAN.</li><li>The PVIDs of the interfaces connecting DeviceA and DeviceB are different.</li></ul>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001130782626__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Check whether the VLANIF interfaces are up.</span><ol><li class="substepexpand"><span>Check whether the VLANIF interfaces on DeviceA and DeviceB are up.</span><p><pre class="screen"><a href="cmdqueryname=display+interface"><b><span class="cmdname">display interface</span></b></a> <strong><span>vlanif</span></strong> [ <i><span class="varname">vlan-id</span></i> ]</pre>
</p><p><p>If either the <strong>current state</strong> or <strong>Line protocol current state</strong> field in the command output is <strong>DOWN</strong>, the VLANIF interface is down.</p>
</p></li><li class="substepexpand"><span>If the VLANIF interfaces are down, rectify the fault according to <a href="vrp_vlan_cfg_0088.html">A VLANIF Interface Goes Down</a>.</span></li></ol>
</li><li><span>Check whether interface 1 and interface 2 are added to VLANs.</span><ol><li class="substepexpand"><span>On DeviceA and DeviceB, check whether there is an interface connecting the local device to the peer device.</span><p><pre class="screen"><a href="cmdqueryname=display+vlan"><b><span class="cmdname">display vlan</span></b></a> <i><span class="varname">vlan-id</span></i> [ <strong><span>verbose</span></strong> | <strong><span>to</span></strong> <i><span class="varname">vlan-id2</span></i> ]</pre>
</p></li><li class="substepexpand"><span>Perform operations according to the command output.</span><p><ul><li>If the <strong>Ports</strong> field is not displayed in the command output, add the local interface to the target VLAN. For details, see <a href="vrp_vlan_cfg_0018.html#EN-US_TASK_0000001130622850__cmd159334395817">Configuring Interface-based VLAN Assignment</a>.</li><li>If the <strong>Ports</strong> field is displayed in the command output but the interfaces on DeviceA and DeviceB are added to the target VLAN in different modes, that is, one interface is added in untagged mode (with UT displayed before the interface name) and the other interface is added in tagged mode (with TG displayed before the interface name), add the interfaces to the target VLAN in tagged mode. For details, see <a href="vrp_vlan_cfg_0018.html#EN-US_TASK_0000001130622850__cmd159334395817">Add interfaces to VLANs</a>.</li><li>If the <strong>Ports</strong> field is displayed but the local interface is down (with D displayed next to the interface name), rectify this fault.</li></ul>
</p></li></ol>
</li><li><span>Check whether the PVIDs of interface 1 and interface 2 are the same.</span><ol><li class="substepexpand"><span>Check the PVID of interface 1 and interface 2 on DeviceA and DeviceB, respectively.</span><p><pre class="screen"><a href="cmdqueryname=display+port+vlan"><b><span class="cmdname">display port vlan</span></b></a> [ <i><span class="varname">interface-type</span></i><em> </em><i><span class="varname">interface-number</span></i> ] [ <strong><span>active</span></strong> ]</pre>
</p></li><li class="substepexpand"><span>Change the PVIDs of interface 1 and interface 2 to the same value. For details, see <a href="vrp_vlan_cfg_0014.html">Changing and Restoring the Default VLAN</a>.</span></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_vlan_cfg_0086.html">Troubleshooting VLANs
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_vlan_cfg_0089.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>