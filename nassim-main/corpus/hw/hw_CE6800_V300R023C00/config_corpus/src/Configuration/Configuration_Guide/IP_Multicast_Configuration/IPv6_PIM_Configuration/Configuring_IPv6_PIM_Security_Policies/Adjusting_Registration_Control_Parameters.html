
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Adjusting Registration Control Parameters">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv6pim_cfg_0037.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv6pim_cfg_0040.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv6pim_cfg_0042.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PIMv6">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIMv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIMv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001589365261">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Adjusting Registration Control Parameters</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001589365261"></a><a name="EN-US_TASK_0000001589365261"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Adjusting Registration Control Parameters</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001589365261__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A multicast source DR on a PIM-SM network encapsulates received multicast data into Register messages and unicasts these messages to an RP. The RP then decapsulates the messages and forwards the extracted multicast data to receivers along the RPT. To prevent Register message attacks, a filtering policy can be configured to allow the RP to permit or deny Register messages that match the filtering policy.</p>
<p>After the RP completes the SPT switchover, the multicast data reaches the RP along the SPT in multicast mode. The RP then sends a Register-Stop message to the source DR. After receiving the message, the source DR stops sending Register messages and enters the register-suppression state. During the register-suppression period, the DR periodically sends a Probe message (Null-Register message) to notify the RP that the multicast source is still in the active state. After the register-suppression period expires, the DR resends Register messages.</p>
<p>The multicast source DR adds a registration outbound interface while sending Register messages to the RP. However, sending redundant Register messages deteriorates system processing performance, slowing the convergence speed. To prevent the redundant Register messages from affecting system performance, control the multicast source DR to send Probe messages instead of Register messages.</p>
<p>A <span class="keyword">device</span> with the default settings can work properly. The registration parameters can also be adjusted as required. The default settings are recommended for general use.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001589365261__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Control the receipt of Register messages on a C-RP.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Create an ACL6 and enter the ACL6 view.</span><p><pre class="screen"><a href="cmdqueryname=acl+ipv6"><b><span class="cmdname">acl ipv6</span></b></a> { <strong>name</strong> <i><span class="varname">basic-acl6-name</span></i> <strong>basic</strong> | [ <strong>number</strong> ] <i><span class="varname">basic-acl6-number</span></i> }</pre>
</p></li><li class="substepexpand"><span>Configure a rule for the ACL6.</span><p><pre class="screen"><strong><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> </strong>[ <em>rule-id</em> ] [ <strong>name</strong><em> <i><span class="varname">rule-name</span></i></em> ] { <strong>permit</strong> | <strong>deny</strong> } [ <strong>fragment</strong> | <strong>source</strong> { <em>source-ipv6-address</em> { <em>prefix-length</em> | <em>source-wildcard</em> } | <em>source-ipv6-address/prefix-length</em> | <strong>any</strong> } | <strong><strong><span>time-range</span></strong> </strong><em>time-name</em> | <strong>vpn-instance</strong><em> <i><span class="varname">vpn-instance-name</span></i></em> | <strong>logging</strong> ] <sup>*</sup></pre>
</p><p><p>In the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command, the <strong><span>source</span></strong> parameter is used to specify a multicast source address, and the <strong><span>destination</span></strong> parameter is used to specify a multicast group address.</p>
</p></li><li class="substepexpand"><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the IPv6 PIM view.</span><p><pre class="screen"><a href="cmdqueryname=pim+ipv6"><b><span class="cmdname">pim ipv6</span></b></a> [<span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span></pre>
</p></li><li class="substepexpand"><span>Configure a policy for filtering Register messages.</span><p><pre class="screen"><a href="cmdqueryname=register-policy"><b><span class="cmdname">register-policy</span></b></a> <span>{ </span><i><span class="varname">registerPolicyAclNum</span></i><span> | <strong><span>acl6-name</span></strong> <i><span class="varname">regPolicyName</span></i> }</span></pre>
</p><p><p>The ACL6 rule functions as follows:</p>
<ul><li>If the ACL6 rule with the <strong>permit</strong> action is matched, the RP permits the Register messages within the specified address range.</li><li>If the ACL6 rule with the <strong>deny</strong> action is matched, the RP rejects the Register messages within the specified address range.</li><li>If an ACL6 rule is not matched, the RP rejects the Register messages within the specified address range.</li><li>If the applied ACL6 or ACL6 rule does not exist, the RP rejects all Register messages.</li></ul>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Control registration suppression on the source DR.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the IPv6 PIM view.</span><p><pre class="screen"><a href="cmdqueryname=pim+ipv6"><b><span class="cmdname">pim ipv6</span></b></a> [<span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span></pre>
</p></li><li class="substepexpand"><span>Set a period for keeping the register-suppression state.</span><p><pre class="screen"><a href="cmdqueryname=register-suppression-timeout"><b><span class="cmdname">register-suppression-timeout</span></b></a> <i><span class="varname">interval</span></i></pre>
</p><p><p>By default, a source DR keeps the register-suppression state for 60s.</p>
<ul><li><p>If <i><span class="varname">interval</span></i> is set to a small value, the RP receives burst multicast data more frequently.</p>
</li><li><p>If <i><span class="varname">interval</span></i> is set to a large value, when the (S, G) entry on the RP times out, the delay for new receivers to join the multicast group is prolonged.</p>
</li></ul>
</p></li><li class="substepexpand"><span>Set an interval at which Probe messages are sent.</span><p><pre class="screen"><a href="cmdqueryname=probe-interval"><b><span class="cmdname">probe-interval</span></b></a> <i><span class="varname">interval</span></i></pre>
</p><p><p>By default, a source DR sends Probe messages to the RP at an interval of 5 seconds.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Control the sending of Register messages on the source DR.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the PIM view.</span><p><pre class="screen"><a href="cmdqueryname=pim+ipv6"><b><span class="cmdname">pim ipv6</span></b></a> [<span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span></pre>
</p></li><li class="substepexpand"><span>Configure the source DR to send Probe messages instead of Register messages when receiving multicast traffic from the multicast source. This prevents redundant Register messages from affecting device performance.</span><p><pre class="screen"><a href="cmdqueryname=register-with-probe"><b><span class="cmdname">register-with-probe</span></b></a></pre>
<p>By default, Register messages are sent without control.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_ipv6pim_cfg_0037.html">Configuring IPv6 PIM Security Policies
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_ipv6pim_cfg_0040.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_ipv6pim_cfg_0042.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>