
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Encapsulating a Multicast Data Packet into an SA Message">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_msdp_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="vrp_msdp_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="vrp_msdp_cfg_0038.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130783714">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Encapsulating a Multicast Data Packet into an SA Message</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130783714"></a><a name="EN-US_TASK_0000001130783714"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Encapsulating a Multicast Data Packet into an SA Message</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130783714__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Some multicast sources send multicast data at intervals longer than the holdtime of (S, G) entries. This ultimately prevents remote hosts from receiving multicast data from these multicast sources. In this case, the source DR can only encapsulate multicast data into Register messages and send them to the source RP. After the source RP is enabled to encapsulate multicast data packets into SA messages, the source RP sends multicast data packets in SA messages to the remote RP.</p>
<div class="p">You can also set a TTL threshold to limit the transmission scope of multicast data packets:<ul><li>Before creating an SA message that encapsulates a multicast data packet, a device checks the TTL value in the IP header of the multicast data packet. If the value is smaller than the configured threshold, the SA message is not created. If the value is greater than or equal to the configured threshold, the device encapsulates the multicast data packet into an SA message and forwards the message.</li><li>After receiving the SA message with the multicast data packet encapsulated, a device reduces the TTL value in the IP header of the multicast data packet by 1, and then checks the TTL value. If the value is smaller than the configured threshold, the packet is no longer forwarded to the specified MSDP peer. If the value is greater than or equal to the configured threshold, the packet is forwarded.</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130783714__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the MSDP view.</span><p><pre class="screen"><strong><a href="cmdqueryname=msdp"><b><span class="cmdname">msdp</span></b></a></strong> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</pre>
</p></li><li><span>Enable the device to encapsulate multicast data packets into SA messages.</span><p><pre class="screen"><a href="cmdqueryname=encap-data-enable"><b><span class="cmdname">encap-data-enable</span></b></a></pre>
</p><p><p>By default, an SA message contains (S, G) information with no multicast data packet encapsulated.</p>
</p></li><li><span>(Optional) Set a TTL threshold for multicast data packets.</span><p><pre class="screen"><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> <strong><span>minimum-ttl</span></strong> <i><span class="varname">ttl</span></i></pre>
<p>The default TTL threshold of multicast data packets encapsulated in SA messages is 0.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_msdp_cfg_0016.html">Adjusting the Parameters of SA Messages
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_msdp_cfg_0020.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_msdp_cfg_0038.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>