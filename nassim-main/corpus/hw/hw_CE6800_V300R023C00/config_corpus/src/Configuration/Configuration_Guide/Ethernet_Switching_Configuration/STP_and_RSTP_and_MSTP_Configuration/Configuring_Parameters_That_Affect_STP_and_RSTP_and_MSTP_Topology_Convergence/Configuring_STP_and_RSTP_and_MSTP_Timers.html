
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring STP/RSTP/MSTP Timers">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1097.html">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1098.html">
<meta name="DC.Relation" scheme="URI" content="vrp_stp_cfg_1100.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MSTP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="STP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSTP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="STP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="MSTP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="STP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001345158097">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring STP/RSTP/MSTP Timers</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001345158097"></a><a name="EN-US_TASK_0000001345158097"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring STP/RSTP/MSTP Timers</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001345158097__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">Spanning tree calculation involves the Forward Delay, Hello Time, and Max Age timers.<ul><li>Forward Delay: specifies the delay before a state transition. After the topology of a ring network changes, the new configuration BPDUs take time to propagate across the entire network. As a result, blocking a new port may unblock a blocked port, which may cause a network loop. To help prevent such loops from occurring, set an appropriate Forward Delay timer. When the topology changes, all ports will be temporarily blocked during the Forward Delay timer.</li><li>Hello Time: is used for detecting link failures. A device sends configuration BPDUs at an interval of the Hello Time to detect link failures. If the device does not receive any BPDUs within the timeout period (timeout period = Hello Time x 3 x Timer Factor), the device will recalculate the spanning tree.</li><li>Max Age: determines when BPDUs expire. A device determines that a received configuration BPDU times out based on the Max Age timer value. If the received BPDU expires, the spanning tree will be recalculated.</li></ul>
</div>
<p>Devices on a ring network must use the same Forward Delay, Hello Time, and Max Age timer values.</p>
<p>You are advised not to change the values of the preceding timers as they are related to the network scale. The spanning tree protocol will automatically adjust these timers if you set the network diameter. When the default network diameter is used, the three timers also use their default values.</p>
<div class="notice"><span class="noticetitle"><img src="public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>To prevent frequent network flapping, ensure that the Hello Time, Forward Delay, and Max Age timer values conform to the following formulas:</p>
<ul><li><p>2 x (Forward Delay â 1.0 second) â¥ Max Age</p>
</li><li><p>Max Age &gt;= 2 Ã (Hello Time + 1.0 second)</p>
</li></ul>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001345158097__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>(Optional) Enter the MSTP process view.</span><p><p id="EN-US_TASK_0000001345158097__en-us_task_0000001345478641_p16533457112820">Perform this step to set system parameters only when the MSTP process ID is not 0. Skip this step if the MSTP process ID is 0.</p>
<pre class="screen" id="EN-US_TASK_0000001345158097__en-us_task_0000001345478641_screen1136151023420"><a href="cmdqueryname=stp+process"><b><span class="cmdname" id="EN-US_TASK_0000001345158097__en-us_task_0000001345478641_cmdname12422107345">stp process</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001345158097__en-us_task_0000001345478641_varname7421210123412">process-id</span></i></pre>
</p></li><li><span>Set the Forward Delay timer.</span><p><pre class="screen"><a href="cmdqueryname=stp+timer+forward-delay"><b><span class="cmdname">stp timer forward-delay</span></b></a> <i><span class="varname">forward-delay</span></i></pre>
<p>The default Forward Delay timer for a device is 1500 centiseconds (15 seconds).</p>
</p></li><li><span>Set the Hello Time timer.</span><p><pre class="screen"><a href="cmdqueryname=stp+timer+hello"><b><span class="cmdname">stp timer hello</span></b></a> <i><span class="varname">hello-time</span></i></pre>
<p>The default Hello Time timer for a device is 200 centiseconds (2 seconds).</p>
</p></li><li><span>Set the Max Age timer.</span><p><pre class="screen"><a href="cmdqueryname=stp+timer+max-age"><b><span class="cmdname">stp timer max-age</span></b></a> <i><span class="varname">max-age</span></i></pre>
</p><p><p>The default Max Age timer for a device is 2000 centiseconds (20 seconds).</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001345158097__en-us_task_0234857734_en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001345158097__en-us_task_0234857734_en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001345158097__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+stp"><b><span class="cmdname">display stp</span></b></a> [ <strong><span>process</span></strong> <i><span class="varname">process-id</span></i> ] [ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ] [ <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> ] command and check the Config Times field for the STP timer settings.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_stp_cfg_1097.html">Configuring Parameters That Affect STP/RSTP/MSTP Topology Convergence
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_stp_cfg_1098.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_stp_cfg_1100.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>