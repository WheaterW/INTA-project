
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring EPGs and Specifying GBPs">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../dc/dc_cfg_micro-segmentation_0005.html">
<meta name="DC.Relation" scheme="URI" content="../dc/dc_cfg_micro-segmentation_0007.html">
<meta name="DC.Relation" scheme="URI" content="../dc/dc_cfg_micro-segmentation_0012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Telnet">
<meta name="featurename" content="Microsegmentation">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Microsegmentation">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Microsegmentation">
<meta name="featuretype" content="Security">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512834974">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring EPGs and Specifying GBPs</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512834974"></a><a name="EN-US_TASK_0000001512834974"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring EPGs and Specifying GBPs</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001512834974__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>On a network, servers can be added to EPGs as needed and GBPs are specified for the packets that match EPGs. Doing this controls traffic between servers.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512834974__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an EPG.</span><ol type="a"><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Create an EPG and enter its view, or enter the view of an existing EPG.</span><p><pre class="screen"><a href="cmdqueryname=traffic-segment+segment-id"><b><span class="cmdname">traffic-segment segment-id</span></b></a> <i><span class="varname">id-value</span></i> [ <strong><span>segment-name</span></strong> <i><span class="varname">name</span></i> ] [ <strong>intra-epg-behavior</strong> { <strong>permit</strong> | <strong>deny</strong> | <strong>none</strong> } ]</pre>
<div class="p">By default, no EPG exists.<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>When setting <strong>intra-epg-behavior</strong>, you can configure the default access policy for members in a specified EPG.</li><li>If the default access control policy for members in an EPG is set to <strong>none</strong>, access control is not performed for members in an EPG. In this case, the device performs access control for members in the EPG according to the default access control policy configured using the <strong>traffic-segment same-segment</strong> command. If <strong>permit</strong> or <strong>deny</strong> is selected, the default access control policy corresponding to <strong>permit</strong> or <strong>deny</strong> is used for members in the EPG.</li></ul>
</div></div>
</div>
</p></li><li class="substepexpand"><span>(Optional) Configure the description of the EPG.</span><p><pre class="screen"><a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <em><i><span class="varname">desc-string</span></i></em></pre>
</p></li><li class="substepexpand"><span>Add a specified IP address to the EPG.</span><p><p># Add an IPv4 address to the EPG.</p>
</p><p><pre class="screen"><a href="cmdqueryname=segment-member+ip"><b><span class="cmdname">segment-member ip</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">ip-address-netmask</span></i> | <i><span class="varname">mask-length</span></i> } [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</pre>
<p># Add an IPv6 address to the EPG.</p>
<pre class="screen"><a href="cmdqueryname=segment-member+ipv6"><b><span class="cmdname">segment-member ipv6</span></b></a> <i><span class="varname">ipv6-addr</span></i> { <i><span class="varname">ipv6-masklen</span></i> | <i><span class="varname">ipv6-netmask</span></i> } [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</pre>
</p><p><p>By default, no member is added to an EPG.</p>
</p></li><li class="substepexpand"><span>(Optional) Enable the statistics collection function for the EPG.</span><p><pre class="screen"><a href="cmdqueryname=segment-statistics+enable"><b><span class="cmdname">segment-statistics enable</span></b></a></pre>
<p>By default, the statistics collection function is disabled for an EPG.</p>
</p></li><li class="substepexpand"><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512834974__en-us_task_0228023023_en-us_task_0228023023_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512834974__en-us_task_0228023023_en-us_task_0228023023_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Specify a GBP.</span><ol type="a"><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Create a segment classifier and enter its view, or enter the view of an existing segment classifier.</span><p><pre class="screen"><a href="cmdqueryname=segment+classifier"><b><span class="cmdname">segment classifier</span></b></a> <i><span class="varname">classifier-name</span></i></pre>
<p>By default, no segment classifier is created in the system.</p>
</p></li><li class="substepexpand"><span>Set an ACL rule in the segment classifier view.</span><p><pre class="screen"><strong><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> </strong>[ <em><i><span class="varname">priority</span></i></em> ] { <strong>permit</strong> | <strong>deny</strong> } { <strong>source-segment </strong><em><i><span class="varname">id-value</span></i></em> | <strong>destination-segment</strong><em> <i><span class="varname">id-value</span></i></em> } <sup>*</sup> [ [ <strong>protocol</strong><em> <i><span class="varname">protocol-number-1</span></i></em> ] | [ <strong>protocol</strong> { <strong>tcp</strong> | <strong>udp</strong> | <em><i><span class="varname">protocol-number-2</span></i></em> } [ <strong>source-port</strong> { <strong>eq</strong><em> <i><span class="varname">port-num</span></i></em> | <strong>gt </strong><em><i><span class="varname">gt-port-num</span></i></em> | <strong>lt</strong><em> <i><span class="varname">lt-port-num</span></i></em> | <strong>range</strong><em> <i><span class="varname">begin-port-num</span></i></em><em> <i><span class="varname">end-port-num</span></i></em> } ] [ <strong>destination-port</strong> { <strong>eq</strong><em> <i><span class="varname">port-num</span></i></em> | <strong>gt</strong><em> <i><span class="varname">gt-port-num</span></i></em> | <strong>lt</strong><em> <i><span class="varname">lt-port-num</span></i></em> | <strong>range </strong><em><i><span class="varname">begin-port-num</span></i></em><em> <i><span class="varname">end-port-num</span></i></em> } ] ] ]</pre>
<p>By default, no ACL rule is configured in the segment classifier view.</p>
</p></li><li class="substepexpand"><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li class="substepexpand"><span>Create a segment behavior and enter its view, or enter the view of an existing segment behavior.</span><p><pre class="screen"><a href="cmdqueryname=segment+behavior"><b><span class="cmdname">segment behavior</span></b></a> <i><span class="varname">behavior-name</span></i></pre>
<p>By default, no segment behavior is created.</p>
</p></li><li class="substepexpand"><span>(Optional) Enable traffic statistics collection for a segment policy.</span><p><pre class="screen"><a href="cmdqueryname=statistics+enable"><b><span class="cmdname">statistics enable</span></b></a></pre>
<p>By default, traffic statistics collection is disabled for a segment policy.</p>
</p></li><li class="substepexpand"><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li class="substepexpand"><span>Create and apply a segment policy and enter its view, or enter the view of an existing segment policy.</span><p><pre class="screen"><a href="cmdqueryname=segment+policy"><b><span class="cmdname">segment policy</span></b></a> <i><span class="varname">policy-name</span></i></pre>
<p>By default, no segment policy is created.</p>
</p></li><li class="substepexpand"><span>Bind the segment behavior to the segment classifier in the segment policy.</span><p><pre class="screen"><strong><a href="cmdqueryname=classifier"><b><span class="cmdname">classifier</span></b></a> </strong><em><i><span class="varname">classifier-name</span></i> </em><strong><strong><span>behavior</span></strong></strong><em> <i><span class="varname">behavior-name</span></i></em> [ <strong>precedence</strong><em> <i><span class="varname">precedence-value</span></i></em> ]</pre>
</p></li><li class="substepexpand"><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li class="substepexpand"><span>Apply the segment policy.</span><p><pre class="screen"><strong><a href="cmdqueryname=segment-policy"><b><span class="cmdname">segment-policy</span></b></a> </strong><em>policy-name</em></pre>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512834974__en-us_task_0228023023_en-us_task_0228023023_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512834974__en-us_task_0228023023_en-us_task_0228023023_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001512834974__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+segment-policy+applied-record"><b><span class="cmdname">display segment-policy applied-record</span></b></a> command to check the application status of the segment policy.</p>
<p>Run the <a href="cmdqueryname=display+segment-policy+statistics"><b><span class="cmdname">display segment-policy statistics</span></b></a> command to check segment policy statistics.</p>
<p>Run the <a href="cmdqueryname=display+traffic-segment+configured-information"><b><span class="cmdname">display traffic-segment configured-information</span></b></a> command to check the EPG configuration.</p>
<p>Run the <a href="cmdqueryname=display+traffic-segment+member-information"><b><span class="cmdname">display traffic-segment member-information</span></b></a> command to check information about the EPG to which a specified member belongs.</p>
<p>Run the <a href="cmdqueryname=display+traffic-segment+resource-usage"><b><span class="cmdname">display traffic-segment resource-usage</span></b></a> command to check information about chip resources used by an EPG.</p>
<p>Run the <a href="cmdqueryname=display+traffic-segment+segment-information"><b><span class="cmdname">display traffic-segment segment-information</span></b></a> command to check information about a specified EPG.</p>
<p>Run the <a href="cmdqueryname=display+traffic-segment+statistics"><b><span class="cmdname">display traffic-segment statistics</span></b></a> command to check segment group statistics.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../dc/dc_cfg_micro-segmentation_0005.html">Configuring Microsegmentation
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../dc/dc_cfg_micro-segmentation_0007.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../dc/dc_cfg_micro-segmentation_0012.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>