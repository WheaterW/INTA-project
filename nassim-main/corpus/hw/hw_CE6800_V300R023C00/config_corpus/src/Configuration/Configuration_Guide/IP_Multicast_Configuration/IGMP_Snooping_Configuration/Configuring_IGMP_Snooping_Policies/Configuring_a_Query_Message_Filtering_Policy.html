
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Query Message Filtering Policy">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc_cfg_0029.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc_cfg_0032.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc_cfg_0034.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130622114">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Query Message Filtering Policy</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130622114"></a><a name="EN-US_TASK_0000001130622114"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Query Message Filtering Policy</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130622114__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If an attacker sends Query messages with a smaller querier IP address than the real IGMP querier on the network, devices running IGMP snooping consider the attacker to be a legitimate querier and forward IGMP Membership Report messages to the attacker. As a result, multicast traffic fails to be forwarded correctly. To address this issue, you can permit only IGMP Query messages with specified source IP addresses and reject other IGMP Query messages by configuring an IGMP Query message filtering policy. This improves the security of a Layer 2 multicast network.</p>
<p>This function must be used together with an ACL. An IGMP Query message is permitted only when its source IP address is within the permit range specified in the ACL rule.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130622114__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the VLAN view.</span><p><pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i></pre>
</p></li><li><span>Configure a Query message filtering policy.</span><p><pre class="screen"><a href="cmdqueryname=igmp+snooping+query+ip-source-policy"><b><span class="cmdname">igmp snooping query ip-source-policy</span></b></a> { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> }  </pre>
<p>By default, no IGMP Query message filtering policy is configured in a VLAN.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_l2mc_cfg_0029.html">Configuring IGMP Snooping Policies
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_l2mc_cfg_0032.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_l2mc_cfg_0034.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>