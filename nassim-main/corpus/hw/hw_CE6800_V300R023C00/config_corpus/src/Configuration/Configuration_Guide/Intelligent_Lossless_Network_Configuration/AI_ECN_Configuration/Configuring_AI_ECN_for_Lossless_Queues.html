
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring AI ECN for Lossless Queues">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_ai_aiecn_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_eai_cfg_0005_copy1.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_ai_aiecn_cfg_0006.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="AI ECN">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="AI ECN">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513152198">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring AI ECN for Lossless Queues</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001513152198"></a><a name="EN-US_TASK_0000001513152198"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring AI ECN for Lossless Queues</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001513152198__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring AI ECN for lossless queues, you have completed the following task:</p>
<ul><li>Configure the PFC function. A queue enabled with the PFC function is a lossless queue. For details, see "Configuring PFC" in <span>Configuration Guide</span> &gt; DCN and Network Management Configuration &gt; DCB Configuration.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001513152198__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After the AI ECN function is enabled for lossless queues, the device collects traffic characteristics on the live network and sends them to the AI ECN component. The AI ECN component intelligently sets the optimal ECN thresholds for lossless queues based on intelligent algorithms to ensure low delay and high throughput of lossless queues. In this way, the optimal performance of lossless services can be achieved in different traffic scenarios.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001513152198__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable the AI service and enter the AI service view.</span><p><pre class="screen"><a href="cmdqueryname=ai-service"><b><span class="cmdname">ai-service</span></b></a></pre>
<p>By default, the AI service is disabled.</p>
</p></li><li><span>Enter the AI ECN view.</span><p><pre class="screen"><a href="cmdqueryname=ai-ecn"><b><span class="cmdname">ai-ecn</span></b></a></pre>
</p></li><li><span>Specify a lossless queue for which the AI ECN function is enabled.</span><p><pre class="screen"><a href="cmdqueryname=assign+queue"><b><span class="cmdname">assign queue</span></b></a> <i><span class="varname">queue-id</span></i> [ <strong><span>model</span></strong> {<strong> </strong><strong><span>ai_ecn_centralizedstorage</span></strong> | <strong><span>ai_ecn_hpc</span></strong> |<strong> </strong><strong><span>ai_ecn_distributedfilestorage</span></strong> } ]</pre>
<p>By default, no lossless queue is specified for enabling the AI ECN function.</p>
<ul><li>If you run the <a href="cmdqueryname=assign+queue"><b><span class="cmdname">assign queue</span></b></a> <i><span class="varname">queue-id</span></i> command without specifying a model, the distributed storage model <strong>ai_ecn_distributedstorage</strong> is loaded by default.</li><li>If you run the <a href="cmdqueryname=assign+queue"><b><span class="cmdname">assign queue</span></b></a> <i><span class="varname">queue-id</span></i> <strong><span>model</span></strong> <strong><span>ai_ecn_centralizedstorage</span></strong> command, the centralized storage model <strong>ai_ecn_centralizedstorage</strong> is loaded.</li><li>If you run the <a href="cmdqueryname=assign+queue"><b><span class="cmdname">assign queue</span></b></a> <i><span class="varname">queue-id</span></i> <strong><span>model</span></strong> <strong><span>ai_ecn_hpc</span></strong> command, the high-performance computing model <strong>ai_ecn_hpc</strong> is loaded.</li><li>If you run the <a href="cmdqueryname=assign+queue"><b><span class="cmdname">assign queue</span></b></a> <i><span class="varname">queue-id</span></i> <strong><span>model</span></strong> <strong><span>ai_ecn_distributedfilestorage</span></strong> command, the distributed file storage model <strong>ai_ecn_distributedfilestorage</strong> is loaded.</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For the <span>CE6866, CE6860-SAN, CE6866K, CE6860-HAM, CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, CE8850-HAM</span>:</p>
<ul><li>The AI ECN function can be enabled for a maximum of two queues.</li><li>When the AI ECN function is enabled for two queues on an interface, the performance can be improved only when the distributed storage model and high-performance computing model are loaded for the two queues respectively.</li><li>If the AI ECN function has been enabled for two queues and the device is downgraded to a version that supports AI ECN enabled for only one queue, some of the configuration is lost and only one queue with AI ECN enabled is retained.</li><li>If the AI ECN function has been enabled for one queue and the device is downgraded to a version that supports AI ECN enabled for only one queue, the configuration is retained. That is, the queue for which AI ECN has been enabled still takes effect.</li></ul>
<p>For the <span>CE6855-48XS8CQ, CE6863E-48S8CQ, CE6885, CE6885-LL, CE6885-SAN, CE6885-T, CE8851-32CQ4BQ, CE8855</span>:</p>
<ul><li>AI ECN and static ECN can be enabled for a combined total of four queues. To enable static ECN for a specified queue, run the <strong>qos queue ecn</strong> command.</li><li>When the AI ECN function is enabled for two or more queues on an interface, the performance can be improved only when both the distributed storage model and high-performance computing model are loaded.</li></ul>
</div></div>
</p></li><li><span>Enable the AI ECN function for the lossless queue.</span><p><pre class="screen"><a href="cmdqueryname=ai-ecn+enable"><b><span class="cmdname">ai-ecn enable</span></b></a></pre>
<div class="p">By default, the AI ECN function is disabled for lossless queues.<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>The AI ECN function identifies lossless queues based on the PFC priority configured on an interface. This function is not affected after the <a href="cmdqueryname=dcb+pfc+global+disable"><b><span class="cmdname">dcb pfc global disable</span></b></a> command is run in the system view to disable PFC globally.</li><li>AI ECN takes effect only on interfaces in up state.</li></ul>
</div></div>
</div>
</p></li><li><span>Exit the AI ECN view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001513152198__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513152198__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001513152198__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <strong><a href="cmdqueryname=display+ai-ecn+calculated+state"><b><span class="cmdname">display ai-ecn calculated state</span></b></a></strong> [ <strong>interface</strong> { <em>interface-name</em> | <em>interface-type interface-number</em> } ] command to check whether the AI ECN function is enabled for lossless queues and the calculated ECN threshold.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_ai_aiecn_cfg_0001.html">AI ECN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_eai_cfg_0005_copy1.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_ai_aiecn_cfg_0006.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>