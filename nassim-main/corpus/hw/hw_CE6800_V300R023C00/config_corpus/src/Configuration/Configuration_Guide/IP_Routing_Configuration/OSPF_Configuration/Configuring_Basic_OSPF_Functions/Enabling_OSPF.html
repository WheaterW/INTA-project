
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling OSPF">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130783198">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Enabling OSPF</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130783198"></a><a name="EN-US_TASK_0000001130783198"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling OSPF</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130783198__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before enabling OSPF, you have completed the following task:</p>
<ul><li><p>Configure IP addresses for interfaces to ensure that neighboring nodes are reachable at the network layer.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130783198__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A router ID must exist before a device runs OSPF. The router ID is a 32-bit unsigned integer that uniquely identifies the device in an AS. To ensure OSPF stability, plan router IDs properly during network planning and manually set the router ID of each device during network deployment.</p>
<p>OSPF partitions an AS into different areas to prevent the LSDB size from unexpectedly growing. An area is regarded as a logical group, and each group is identified by an area ID. The border of an area is a device rather than a link. A network segment (or a link) belongs to only one area, and the area to which each OSPF interface belongs must be specified.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130783198__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Create an OSPF process and enter the OSPF view.</span><p><pre class="screen"><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf </span></b></a><i><span class="varname">process-id</span></i> [ <strong><span>router-id</span></strong> <i><span class="varname">route-id</span></i> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpname</span></i> ] <sup>*</sup></pre>
<p id="EN-US_TASK_0000001130783198__p85041329135213"><i><span class="varname" id="EN-US_TASK_0000001130783198__varname989642620525">process-id</span></i> specifies the ID of an OSPF process, and the default value is 1. </p>
<p>The device supports OSPF multi-process. Processes can be classified by service type. Devices exchange packets regardless of process IDs. Therefore, packets can also be exchanged between devices with different process IDs.</p>
<p><strong><span>router-id</span></strong> <i><span class="varname">router-id</span></i> specifies the router ID of a device.</p>
<p>By default, a device automatically selects the IP address of an interface as the router ID. When configuring a router ID, ensure that the router ID is unique in an AS. You can configure the IP address of a device interface as the device's router ID.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Each router ID in an OSPF process must be unique. Otherwise, an OSPF neighbor relationship cannot be established, and routing information is incorrect. Manually setting a unique router ID for each device is recommended.</p>
</div></div>
<p>If a router ID conflict occurs, perform either of the following operations:</p>
<ul><li>Manually configure a new router ID.<pre class="screen"><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> <strong><span>router-id</span></strong> <i><span class="varname">router-id</span></i></pre>
</li><li>Enable the router ID automatic recovery function to ensure that the device can automatically allocate a new router ID.<pre class="screen"><a href="cmdqueryname=undo+ospf+router-id+auto-recover+disable"><b><span class="cmdname">undo ospf router-id auto-recover disable</span></b></a></pre>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the automatic recovery function is enabled and a router ID conflict occurs between indirectly connected devices in one OSPF area, the conflicting router ID is replaced with a newly calculated one, regardless of whether the conflicting router ID was manually configured or automatically generated.</p>
<p>If a router ID conflict persists, a device can replace a router ID for a maximum of three attempts.</p>
</div></div>
</li></ul>
</p></li><li><span>(Optional) Configure a description for the OSPF process.</span><p><pre class="screen"><a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description</span></i></pre>
<p>To easily identify a specific process, you can add a description for the process.</p>
</p></li><li><span>Create an OSPF area, and enter the OSPF area view.</span><p><pre class="screen"><a href="cmdqueryname=area"><b><span class="cmdname">area</span></b></a> <i><span class="varname">area-id</span></i></pre>
<p>OSPF areas are classified as either a backbone area (with area ID 0) or non-backbone area. The backbone area forwards inter-area routing information, and routing information exchanged between non-backbone areas must be forwarded through the backbone area.</p>
</p></li><li><span>(Optional) Configure a description for the OSPF area.</span><p><pre class="screen"><a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description</span></i></pre>
<p>To easily identify a specific area, you can add a description for the area.</p>
</p></li><li><span>To configure OSPF, configure the network segments included in an area or enable OSPF on an interface.</span><p><ul><li><p>Configure the network segments included in an area.</p>
<pre class="screen"><a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> <i><span class="varname">address</span></i> <i><span class="varname">wildcard-mask</span></i> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</pre>
<p><strong><span>description</span></strong> <i><span class="varname">text</span></i> specifies the description for a network segment.</p>
<p>OSPF runs on an interface only when both of the following conditions are met:</p>
<ol type="a"><li>The mask length of the interface's IP address is greater than or equal to that specified in the <a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> command.<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the <i><span class="varname">wildcard-mask</span></i> in the <a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> command is all zeros and the IP address of the interface is the same as the IP address specified in the <a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> <i><span class="varname">address</span></i> command, OSPF is also enabled on the interface.</p>
</div></div>
</li><li>The interface's primary IP address belongs to the network segment specified in the <a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> command.</li></ol>
<p>By default, OSPF uses a host route with a 32-bit mask to advertise the IP address of a loopback interface, regardless of the mask length configured for the IP address. Therefore, to allow a loopback interface to advertise network-segment routes, its network type must be set to NBMA or broadcast in the interface view. For details on how to set the network type, see <a href="vrp_ospf_cfg_0022.html">Setting the Network Type to Broadcast</a>.</p>
</li><li>Enable OSPF on an interface.<ol type="a"><li>Exit the area view.<pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Enter the interface view.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</li><li>Switch the interface working mode from Layer 2 to Layer 3. Determine whether to perform this step based on the current interface working mode.<pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
<p></p>
<p>Determine whether to perform this step based on the current interface working mode.</p>
</li><li>Enable OSPF on the interface.<pre class="screen"><a href="cmdqueryname=ospf+enable"><b><span class="cmdname">ospf enable</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>area</span></strong> <i><span class="varname">area-id</span></i></pre>
<p>The area ID specified using <i><span class="varname">area-id</span></i> can be either a decimal integer or in the format of an IPv4 address. Regardless of the format, the area ID is displayed as an IPv4 address.</p>
</li></ol>
</li></ul>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130783198__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130783198__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001130783198__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><p>If a router ID is changed, run the following command for the new router ID to take effect:</p>
<pre class="screen"><a href="cmdqueryname=reset+ospf"><b><span class="cmdname">reset ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>process</span></strong></pre>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospf_cfg_0010.html">Configuring Basic OSPF Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospf_cfg_0012.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>