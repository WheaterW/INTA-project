
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring MED-related Functions">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp6_cfg_0013.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp6_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp6_cfg_0018.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176661981">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring MED-related Functions</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176661981"></a><a name="EN-US_TASK_0000001176661981"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring MED-related Functions</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176661981__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Similar to the cost (or metric) used by an IGP, the MED is used to determine the optimal route when traffic enters an AS. When a BGP4+ device learns multiple routes with the same destination address but different next hops from different EBGP peers, the route with the smallest MED value is selected as the optimal route if all other attributes are the same.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176661981__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the BGP view.</span><p><pre class="screen"><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></pre>
</p></li><li><span>Enter the IPv6 unicast address family view.</span><p><pre class="screen"><a href="cmdqueryname=ipv6-family+unicast"><b><span class="cmdname">ipv6-family</span></b></a> <strong><span>unicast</span></strong></pre>
</p></li><li><span>Configure MED-related functions. For details, see <a href="#EN-US_TASK_0000001176661981__table29861143141218">Table 1</a>.</span><p>
<div class="tableBorder"><a name="EN-US_TASK_0000001176661981__table29861143141218"></a><a name="table29861143141218"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0000001176661981__table29861143141218" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring MED-related functions</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.4.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.4.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.4.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.1 "><p>Set the default MED value.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=default+med"><b><span class="cmdname">default med</span></b></a> <i><span class="varname">med</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.3 "><p>The <a href="cmdqueryname=default+med"><b><span class="cmdname">default med</span></b></a> command takes effect only for routes imported using the <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> command and BGP4+ summary routes on the local device.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.1 "><p>Configure BGP4+ to compare the MED values of routes from different ASs.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=compare-different-as-med"><b><span class="cmdname">compare-different-as-med</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.3 "><p>By default, a BGP4+ device compares the MED values of only routes from different peers in the same AS. This command allows BGP4+ to compare the MED values of routes received from different ASs.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.1 "><p>Enable the deterministic-MED function.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=deterministic-med"><b><span class="cmdname">deterministic-med</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.3 "><p>If the deterministic-MED function is not enabled and the device receives multiple routes with the same prefix from different ASs, the route selection result is related to the sequence in which the routes are received. After the deterministic-MED function is enabled, these routes are first grouped based on the leftmost AS number in the AS_Path attribute. Routes with the same leftmost AS number are grouped together and compared, and an optimal route is selected in the group. This optimal route is then compared with optimal routes from other groups to determine the ultimate optimal route. With the deterministic-MED function, the route selection result is independent of the sequence in which routes are received.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.1 "><p>Configure BGP4+ to set the MED to the maximum value if a route carries no MED.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=bestroute+med-none-as-maximum"><b><span class="cmdname">bestroute med-none-as-maximum</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.3 "><p>If this command is run, BGP4+ uses the maximum MED value during route selection for a route that carries no MED; otherwise, BGP uses 0 as the MED value for the route.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.1 "><p>Configure BGP4+ to compare the MED values of routes in a confederation.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=bestroute+med-confederation"><b><span class="cmdname">bestroute med-confederation</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.3 "><p>By default, BGP4+ compares the MED values of only routes from the same AS.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.1 "><p>Configure BGP4+ to compare the sums of MED values multiplied by a MED multiplier and IGP metrics multiplied by an IGP metric multiplier for different routes.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=bestroute+med-plus-igp+igp-multiplier+med-multiplier"><b><span class="cmdname">bestroute med-plus-igp</span></b></a> [ <strong><span>igp-multiplier</span></strong> <i><span class="varname">igp-multiplier</span></i> | <strong><span>med-multiplier</span></strong> <i><span class="varname">med-multiplier</span></i> ]</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.4.2.1.2.4.1.3 "><p>After this command is run, BGP4+ compares the sums of MED values multiplied by a MED multiplier and IGP metrics multiplied by an IGP metric multiplier for different routes when selecting the optimal route.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176661981__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176661981__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp6_cfg_0013.html">Configuring BGP4+ Route Attributes
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp6_cfg_0016.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bgp6_cfg_0018.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>