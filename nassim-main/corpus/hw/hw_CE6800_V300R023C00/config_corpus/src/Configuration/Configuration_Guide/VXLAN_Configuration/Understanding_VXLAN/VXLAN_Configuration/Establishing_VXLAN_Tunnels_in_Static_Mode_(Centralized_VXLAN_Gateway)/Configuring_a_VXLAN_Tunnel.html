
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a VXLAN Tunnel">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../dc/dc_vrp_vxlan_cfg_1039.html">
<meta name="DC.Relation" scheme="URI" content="../dc/dc_vrp_vxlan_cfg_1040.html">
<meta name="DC.Relation" scheme="URI" content="../dc/dc_vrp_vxlan_cfg_1042.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176743977">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring a VXLAN Tunnel</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176743977"></a><a name="EN-US_TASK_0000001176743977"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a VXLAN Tunnel</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001176743977__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><div class="p">Before configuring a VXLAN tunnel, you have completed the following task:<ul><li>Configure IP routes to enable Layer 3 communication between nodes on the current network.</li><li>If the simplified mode is used for configuration, complete <a href="../vrp/dc_vrp_vxlan_cfg_bdprofile01.html">Configuring a BD Profile in Simplified Mode</a>.</li></ul>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176743977__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After you manually configure local and remote VNIs and VTEP IP addresses, a VXLAN tunnel is statically created. This configuration is simple and does not involve protocol configurations.</p>
<p>To ensure successful VXLAN packet forwarding, VXLAN tunnels must be configured on both Layer 2 and Layer 3 VXLAN gateways.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176743977__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>(Optional) Configure BDs in batches.</span><p><pre class="screen"><a href="cmdqueryname=bridge-domain+range"><b><span class="cmdname">bridge-domain range</span></b></a> { <i><span class="varname">bdIdBgn</span></i> [ to <i><span class="varname">bdIdEnd</span></i> ] } &amp;&lt;1-10&gt;
<a href="cmdqueryname=binding+bridge-domain+profile"><b><span class="cmdname">binding bridge-domain profile</span></b></a> <i><span class="varname">profileId</span></i></pre>
<p>If the simplified mode is used for configuration, perform this step to configure BDs in batches by binding a BD range to a BD profile. Steps 3 to 5 are then not required.</p>
</p></li><li><span>Enter the BD view.</span><p><pre class="screen"><a href="cmdqueryname=bridge-domain"><b><span class="cmdname">bridge-domain</span></b></a> <i><span class="varname">bd-id</span></i></pre>
<p><i><span class="varname">bd-id</span></i> specified in this command must be the same as <i><span class="varname">bd-id</span></i> in the service access point configuration.</p>
</p></li><li><span>Create a VNI and associate the VNI with the BD.</span><p><pre class="screen"><a href="cmdqueryname=vxlan+vni"><b><span class="cmdname">vxlan vni</span></b></a> <i><span class="varname">vni-id</span></i></pre>
<p>By default, no VNI is created.</p>
</p></li><li><span>(Optional) Configure the source VTEP IP address of the VXLAN tunnel.</span><p><pre class="screen"><a href="cmdqueryname=vtep-src"><b><span class="cmdname">vtep-src</span></b></a> <i><span class="varname">ip-address</span></i></pre>
<p>By default, no source VTEP IP address is configured for a VXLAN tunnel in a BD, meaning that a VXLAN tunnel uses the source IP address configured on an NVE interface as the source VTEP IP address. Perform this step if you want to establish VXLAN tunnels over different physical paths between VTEPs to carry service data for traffic optimization. After this step is performed, services in the specified BD will use the VXLAN tunnel whose source VTEP IP address is configured in this step. Services in other BDs will continue to use the VXLAN tunnel whose source VTEP IP address is the source IP address configured on an NVE interface.</p>
</p></li><li><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>(Optional) Enable subscription to the status of the exact route to the VXLAN tunnel destination. The VXLAN tunnel can go up only when the exact route to its destination IP address is reachable.</span><p><pre class="screen"><a href="cmdqueryname=vxlan+tunnel-status+track+exact-route"><b><span class="cmdname">vxlan tunnel-status track exact-route</span></b></a></pre>
<p>By default, subscription to the status of the exact route to a VXLAN tunnel destination is disabled. A VXLAN tunnel is considered up if the exact route of its source IP address and the route of the network segment where its destination IP address resides are reachable.</p>
</p></li><li><span>(Optional) Enable the device to use the extension mode when encapsulating the outer UDP source port number into VXLAN packets.</span><p><pre class="screen"><a href="cmdqueryname=assign+forward+nvo3+udp+src-port+extend+enable"><b><span class="cmdname">assign forward nvo3 udp src-port extend enable</span></b></a></pre>
<p>By default, the device does not use the extension mode when encapsulating the outer UDP source port number into VXLAN packets.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only by the following: <span>CE6866, CE6860-SAN, CE6866K, CE6860-HAM, CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, CE8850-HAM</span>, CE6863H, CE6863H-K, CE6881H, CE6881H-K.</p>
</div></div>
</p></li><li><span>Create an NVE interface and enter its view.</span><p><pre class="screen"><a href="cmdqueryname=interface+nve"><b><span class="cmdname">interface nve</span></b></a> <i><span class="varname">nve-number</span></i></pre>
<p>By default, no NVE interface is created.</p>
</p></li><li><span>Configure an IP address for the source VTEP.</span><p><pre class="screen"><a href="cmdqueryname=source"><b><span class="cmdname">source</span></b></a> <i><span class="varname">ip-address</span></i></pre>
<p>By default, no IP address is configured for a source VTEP.</p>
<p>Either a physical interface's IP address or loopback interface address can be specified for a source VTEP. Using the loopback interface address as the source VTEP's IP address is recommended.</p>
</p></li><li><span>Configure an ingress replication list.</span><p><pre class="screen"><a href="cmdqueryname=vni"><b><span class="cmdname">vni</span></b></a> <i><span class="varname">vni-id</span></i> <strong><span>head-end peer-list</span></strong> <i><span class="varname">ip-address</span></i> &amp;&lt;1-10&gt;</pre>
<p>By default, no ingress replication list is configured.</p>
<p>After receiving a BUM packet, the ingress of a VXLAN tunnel replicates the packet and sends a copy to each VTEP in the ingress replication list. The ingress replication list is a collection of remote VTEP IP addresses to which the ingress of a VXLAN tunnel should send replicated BUM packets.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176743977__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176743977__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../dc/dc_vrp_vxlan_cfg_1039.html">Establishing VXLAN Tunnels in Static Mode (Centralized VXLAN Gateway)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../dc/dc_vrp_vxlan_cfg_1040.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../dc/dc_vrp_vxlan_cfg_1042.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>