
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Adjusting the Control Parameters for PIM Prune Messages">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv6pim_cfg_0019.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv6pim_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv6pim_cfg_0022.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PIMv6">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIMv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIMv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001589365241">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Adjusting the Control Parameters for PIM Prune Messages</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001589365241"></a><a name="EN-US_TASK_0000001589365241"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Adjusting the Control Parameters for PIM Prune Messages</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001589365241__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before adjusting the control parameters for IPv6 PIM Prune messages, enable IPv6 multicast routing in the public network instance.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001589365241__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>PIM devices send Join messages upstream to request the upstream device to forward multicast data to them, and send Prune messages upstream to request the upstream device to stop forwarding multicast data to them. Join and Prune information are encapsulated in Join/Prune messages. You can adjust PIM prune control parameters in either of the following configuration modes:</p>
<ul><li><p>Global configuration: takes effect on all interfaces.</p>
</li><li><p>Interface-specific configuration: takes precedence over the global configuration. If no interface-specific configuration is performed for an interface, the interface uses the global configuration.</p>
</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001589365241__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Perform global configuration.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the IPv6 PIM view.</span><p><pre class="screen"><a href="cmdqueryname=pim+ipv6"><b><span class="cmdname">pim ipv6</span></b></a> [<span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span></pre>
</p></li><li class="substepexpand"><span>Configure PIM prune control parameters as required.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring PIM prune control parameters</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="25.94%" id="mcps1.3.3.1.2.3.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="32.34%" id="mcps1.3.3.1.2.3.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="41.72%" id="mcps1.3.3.1.2.3.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="25.94%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.1 "><p>Set the interval for sending Join/Prune messages.</p>
</td>
<td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=timer+join-prune"><b><span class="cmdname">timer join-prune</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="41.72%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.3 "><p>Devices periodically send Join messages upstream, which prevents RPT branches from being deleted due to timeout.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.94%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.1 "><p>Set the holdtime of Join/Prune messages.</p>
</td>
<td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=holdtime+join-prune"><b><span class="cmdname">holdtime join-prune</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="41.72%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.3 "><p>When an upstream device receives a Join/Prune message, it starts a timer according to the holdtime carried in the message. If the device does not receive subsequent Join/Prune messages from the corresponding downstream device within the holdtime:</p>
<ul><li>If the previously received Join/Prune message carries information about joining a multicast group, the downstream interface corresponding to the multicast group is suppressed from forwarding multicast data.</li><li>If the previously received Join/Prune message carries information about leaving a multicast group, forwarding through the downstream interface corresponding to the multicast group is restored.</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.94%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.1 "><p>Configure the Join/Prune message sending mode.</p>
</td>
<td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=join-prune+triggered-message-cache+disable"><b><span class="cmdname">join-prune triggered-message-cache disable</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="41.72%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.3 "><p>Sending PIM Join/Prune messages in a package is more efficient than separately sending a large number of PIM Join/Prune messages. By default, a device sends PIM Join/Prune messages in a package. Because the size of a PIM Join/Prune message package is large, devices that have poor performance may fail to accept the package. To prevent such packages from being discarded, disable the Join/Prune message packaging function.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.94%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.1 "><p>Set a delay in transmitting messages on the shared network.</p>
</td>
<td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=hello-option+lan-delay"><b><span class="cmdname">hello-option lan-delay</span></b></a> <em>lanDelayValue</em></p>
</td>
<td class="cellrowborder" valign="top" width="41.72%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.3 "><p>During pruning, there is a delay from the time when the current device receives a Prune message from a downstream device to the time when the current device forwards the Prune message upstream. This delay is called a LAN-Delay.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.94%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.1 "><p>Set an interval for overriding a prune action.</p>
</td>
<td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=hello-option+override-interval"><b><span class="cmdname">hello-option override-interval</span></b></a> <em>overIntvValue</em></p>
</td>
<td class="cellrowborder" valign="top" width="41.72%" headers="mcps1.3.3.1.2.3.2.1.2.4.1.3 "><p>After forwarding a Prune message upstream, a PIM device does not immediately prune the corresponding downstream interface. Instead, the PIM device keeps forwarding multicast data downstream for a period. The period for overriding a prune action is called an Override-Interval. The delay from the time when the PIM device receives a Prune message to the time when the PIM device performs the prune action is the sum of LAN-Delay and Override-Interval.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Perform interface-specific configuration.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Switch the interface working mode from Layer 2 to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
<p> Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li class="substepexpand"><span>Configure PIM prune control parameters as required.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Configuring PIM prune control parameters</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="25.94%" id="mcps1.3.3.2.2.4.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="32.34%" id="mcps1.3.3.2.2.4.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="41.72%" id="mcps1.3.3.2.2.4.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="25.94%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.1 "><p>Set the interval for sending Join/Prune messages.</p>
</td>
<td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=pim+ipv6+timer+join-prune"><b><span class="cmdname">pim ipv6 timer join-prune</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="41.72%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.3 "><p>Devices periodically send Join messages upstream, which prevents RPT branches from being deleted due to timeout.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.94%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.1 "><p>Set the holdtime of Join/Prune messages.</p>
</td>
<td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=pim+ipv6+holdtime+join-prune"><b><span class="cmdname">pim ipv6 holdtime join-prune</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="41.72%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.3 "><p>When an upstream device receives a Join/Prune message, it starts a timer according to the holdtime carried in the message. If the device does not receive subsequent Join/Prune messages from the corresponding downstream device within the holdtime:</p>
<ul><li>If the previously received Join/Prune message carries information about joining a multicast group, the downstream interface corresponding to the multicast group is suppressed from forwarding multicast data.</li><li>If the previously received Join/Prune message carries information about leaving a multicast group, forwarding through the downstream interface corresponding to the multicast group is restored.</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.94%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.1 "><p>Set a delay in transmitting messages on the shared network.</p>
</td>
<td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=pim+ipv6+hello-option+lan-delay"><b><span class="cmdname">pim ipv6 hello-option lan-delay</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="41.72%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.3 "><p>During pruning, there is a delay from the time when the current device receives a Prune message from a downstream device to the time when the current device forwards the Prune message upstream. This delay is called a LAN-Delay.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.94%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.1 "><p>Set an interval for overriding a prune action.</p>
</td>
<td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=pim+ipv6+hello-option+override-interval"><b><span class="cmdname">pim ipv6 hello-option override-interval</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="41.72%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.3 "><p>After forwarding a Prune message upstream, a PIM device does not immediately prune the corresponding downstream interface. Instead, the PIM device keeps forwarding multicast data downstream for a period. The period for overriding a prune action is called an Override-Interval. The delay from the time when the PIM device receives a Prune message to the time when the PIM device performs the prune action is the sum of LAN-Delay and Override-Interval.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.94%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.1 "><p>Set the range of valid source addresses for Join information in Join/Prune messages.</p>
</td>
<td class="cellrowborder" valign="top" width="32.34%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=pim+ipv6+join-policy"><b><span class="cmdname">pim ipv6 join-policy</span></b></a> { <span><i><span class="varname">jpPolicyAclNum</span></i></span> | { <strong>acl6-name</strong><em> <span><i><span class="varname">jpPolicyName</span></i></span></em> } | { <strong>asm</strong> { <span><i><span class="varname">joinPruneAsmPolicyAclNum</span></i></span> | <strong>acl6-name</strong><em> <span><i><span class="varname">jpAsmPolicyName</span></i></span></em> } | <strong>ssm</strong> { <span><i><span class="varname">joinPruneSsmPolicyAclNum</span></i></span> | <strong>acl6-name</strong><em> <span><i><span class="varname">jpSsmPolicyName</span></i></span></em> } } }</p>
</td>
<td class="cellrowborder" valign="top" width="41.72%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.3 "><p>A range of valid source addresses can be set for Join information in Join/Prune messages to prevent unauthorized users from joining multicast groups.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_ipv6pim_cfg_0019.html">Adjusting IPv6 PIM Parameters
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_ipv6pim_cfg_0020.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_ipv6pim_cfg_0022.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>