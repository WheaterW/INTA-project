
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Replacing the Configuration File">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_cfgfile_cfg_0004.html">
<meta name="DC.Relation" scheme="URI" content="vrp_cfgfile_cfg_0044.html">
<meta name="DC.Relation" scheme="URI" content="vrp_cfgfile_cfg_0008.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Configuration File Management">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Configuration File Management">
<meta name="featuretype" content="Basic Configuration">
<meta name="featurename" content="Configuration File Management">
<meta name="featuretype" content="Basic Configuration">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001564130369">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Replacing the Configuration File</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001564130369"></a><a name="EN-US_TASK_0000001564130369"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Replacing the Configuration File</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001564130369__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When the configuration file of a device needs to be updated, you can load the configuration file from the local or remote server to the local device to replace the running configuration file.</p>
<p>The configuration replacement function can replace the entire configuration file on the current device or the configurations in a specific view, depending on the content in the configuration file to be loaded. If the configuration file to be loaded contains the configurations of the entire device, all configurations on the current device are replaced. If the configuration file to be loaded contains the configurations saved in a view (the configurations saved in the view automatically carries the &lt;replace/&gt; tag), the configurations in the corresponding view are replaced.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">The specified configuration file to be loaded must exist and meet the following conditions:<ul><li><p>The configuration file can contain only configuration commands, view switching commands, and number signs (#). If other commands including <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a>, <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a>, <a href="cmdqueryname=return"><b><span class="cmdname">return</span></b></a>, query commands such as <a href="cmdqueryname=display"><b><span class="cmdname">display</span></b></a>, maintenance commands such as <a href="cmdqueryname=reset"><b><span class="cmdname">reset</span></b></a>, <a href="cmdqueryname=save"><b><span class="cmdname">save</span></b></a>, and <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a>, and upgrade-compatible commands are executed, the device reports an error and continues to load subsequent commands.</p>
</li><li><p>The interactive commands in the configuration file support only Y/N automatic interaction.</p>
</li><li>The indentation of commands in the configuration file must be correct. The commands in the system view and the level-1 view under the system view must be left-aligned, the commands in the level-1 view must be indented by one space, and the commands in each subsequent view must be indented by one more space.<p>If the number sign (#) is left-aligned, the system view is displayed. If the number sign (#) is indented, it is used only to isolate command blocks; in this case, the number sign (#) must be aligned with the first command in the following command block. If the number sign (#) is incorrectly used, configurations may be lost, or commands may be run in an unexpected view.</p>
</li><li><p>The configuration file name extension must be .zip, .cfg, .txt, .dat, or .bat.</p>
<ul><li><p>Both .cfg and .txt files are text files whose content can be directly viewed. If a .cfg or .txt file is specified as the configuration file to be loaded, the system restores the commands in the file one by one when the configuration file is loaded.</p>
</li><li><p>A .zip file is obtained by compressing a .cfg file, occupying less space. If a .zip file is specified as the configuration file to be loaded, the system decompresses the file into a .cfg file, and then restores the commands in the .cfg file one by one when the configuration file is loaded. The .cfg file must have the same name as the .zip file. Otherwise, the configuration file fails to be loaded.</p>
</li><li>A .dat file is a compressed file, which can be in binary or text mode. Only a .dat file exported from a Huawei device is supported, and the file cannot be modified manually. Otherwise, the file fails to be loaded.</li><li><p>A .bat file is used for batch processing. It is a text file that can be modified manually.</p>
</li></ul>
</li></ul>
</div>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001564130369__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Run any of the following commands according to the location of the configuration file to be loaded:</span><p><ul><li><p>Load the configuration file on the local device to replace the current running configurations on the device.</p>
<pre class="screen"><a href="cmdqueryname=load+configuration+replace"><b><span class="cmdname">load configuration</span></b></a> <strong><span>file</span></strong> <i><span class="varname">filename</span></i> <strong><span>replace</span></strong> [ <strong><span>relative</span></strong> ]</pre>
</li><li><p>Load the configuration file on a specified remote server to replace the current running configurations on the device.</p>
<pre class="screen"><a href="cmdqueryname=load+configuration+replace"><b><span class="cmdname">load configuration</span></b></a> { <strong><span>server</span></strong> <i><span class="varname">ip-address</span></i> | <strong><span>server ipv6</span></strong> <i><span class="varname">ipv6-address</span></i> } [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <strong><span>transport-type</span></strong> { <strong><span>ftp</span></strong> | <strong><span>sftp</span></strong> } <strong><span>username</span></strong> <i><span class="varname">user-name</span></i> <strong><span>password</span></strong> <i><span class="varname">password</span></i> <strong><span>file</span></strong> <i><span class="varname">filename</span></i> <strong><span>replace</span></strong> [ <strong><span>relative</span></strong> ]</pre>
</li><li><p>Load the configuration file on the remote server based on the specified URL to replace the current running configurations on the device.</p>
<pre class="screen"><a href="cmdqueryname=load+configuration+replace"><b><span class="cmdname">load configuration</span></b></a> <strong><span>server http url</span></strong> <i><span class="varname">url-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] [ <strong><span>file</span></strong> <i><span class="varname">filename</span></i> ] <strong><span>replace</span></strong> [ <strong><span>relative</span></strong> ]</pre>
</li></ul>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001564130369__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Perform the following operations to verify the configuration:</p>
<ul><li>Run the <a href="cmdqueryname=display+configuration+candidate"><b><span class="cmdname">display configuration candidate</span></b></a> command to check the uncommitted configurations and check whether the new configurations meet the expectation.</li><li>Run the <a href="cmdqueryname=display+configuration+replace+file"><b><span class="cmdname">display configuration replace file</span></b></a> command to check the differences between the source configuration file and target configuration file.</li><li>Run the <a href="cmdqueryname=display+configuration+replace+failed"><b><span class="cmdname">display configuration replace failed</span></b></a> command to check detailed information about the commands that fail to be replaced and the failure cause.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_cfgfile_cfg_0004.html">Managing Configuration Files
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_cfgfile_cfg_0044.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_cfgfile_cfg_0008.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>