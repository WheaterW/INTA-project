
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Introduction to MLDv2">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_mld_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="vrp_mld_cfg_0004.html">
<meta name="DC.Relation" scheme="URI" content="vrp_mld_cfg_0006.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MLD">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MLD">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MLD">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001589496149">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Introduction to MLDv2</title>
</head>
<body><a name="EN-US_CONCEPT_0000001589496149"></a><a name="EN-US_CONCEPT_0000001589496149"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Introduction to MLDv2</h1>
<div><p>MLDv1 messages carry only multicast group information â they do not carry multicast source information. As such, MLDv1 hosts can only select the groups they want to join and cannot select the multicast sources from which they want to receive multicast data. MLDv2 resolves this problem by allowing hosts to select both multicast groups and multicast sources. Unlike MLDv1 Multicast Listener Report messages that carry information about only one multicast group, MLDv2 Multicast Listener Report messages can carry information about multiple multicast groups. This significantly reduces the number of messages transmitted between hosts and a querier.</p>
<div class="section"><h4 class="sectiontitle">MLDv2 Messages</h4><p>Compared with MLDv1 messages, MLDv2 messages have the following changes:</p>
<ul><li>MLDv2 defines two message types: Query messages and Multicast Listener Report messages. In MLDv2, no Multicast Listener Done message is defined. Instead, group members send a specified type of Report message to notify multicast devices that they are leaving a group.</li><li>In addition to General Query and Multicast Address Specific Query messages, MLDv2 defines a new Query message type: Multicast Address and Source Specific Query. A querier sends this message to members in a specific multicast group on a shared network segment to check whether the members want to receive data from specific sources. A Multicast Address and Source Specific Query message carries one or more multicast source addresses.</li><li>A Multicast Listener Report message contains both the multicast group that a host wants to join and the multicast sources from which the host wants to receive data. MLDv2 supports source filtering and defines filtering modes INCLUDE and EXCLUDE. Group-source mappings are represented by (G, INCLUDE, (S1, S2...)) or (G, EXCLUDE, (S1, S2...)). The (G, INCLUDE, (S1, S2...)) entry indicates that a host wants to receive data sent from the listed multicast sources to group G. The (G, EXCLUDE, (S1, S2...)) entry indicates that a host wants to receive data sent from all multicast sources (except the listed ones) to group G. If group-source mappings change, hosts add these changes to the Multicast Address Record fields in MLDv2 Multicast Listener Report messages and send the messages to the MLD querier.</li></ul>
<p><a href="#EN-US_CONCEPT_0000001589496149__fig14752143817291">Figure 1</a> shows the format of an MLDv2 Query message, and <a href="#EN-US_CONCEPT_0000001589496149__tab_01">Table 1</a> describes the fields in this message.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589496149__fig14752143817291"><a name="EN-US_CONCEPT_0000001589496149__fig14752143817291"></a><a name="fig14752143817291"></a><span class="figcap"><b>Figure 1 </b>Format of an MLDv2 Query message</span><br><span><img class="vsd" src="images/fig_dc_fd_mld_100601.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001589496149__tab_01"></a><a name="tab_01"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001589496149__tab_01" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Fields in an MLDv2 Query message</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="32%" id="mcps1.3.2.6.2.3.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="68%" id="mcps1.3.2.6.2.3.1.2" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.6.2.3.1.1 "><p>Type</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.6.2.3.1.2 "><p>Message type. In MLDv2 Query messages, this field is set to 130. MLDv2 Query messages include General Query, Multicast Address Specific Query, and Multicast Address and Source Specific Query messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.6.2.3.1.1 "><p>Code</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.6.2.3.1.2 "><p>This field is set by the sender to 0 and is ignored by the receiver.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.6.2.3.1.1 "><p>Checksum</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.6.2.3.1.2 "><p>Standard ICMPv6 checksum. It covers the entire MLD message plus a pseudo header of IPv6 header fields. The Checksum field is set to 0 during checksum calculation. The receiver must verify the checksum before processing the message.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.6.2.3.1.1 "><p>Maximum Response Code</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.6.2.3.1.2 "><p>Maximum response time. After receiving a General Query message from an MLD querier, a member host needs to respond to the message within the maximum response time. This field is valid only in MLD Query messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.6.2.3.1.1 "><p>Reserved</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.6.2.3.1.2 "><p>Reserved field. This field is set by the sender to 0 and is ignored by the receiver.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.6.2.3.1.1 "><p>Multicast Address</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.6.2.3.1.2 "><p>Multicast group address. In a General Query message, this field is set to 0. In a Multicast Address Specific Query or Multicast Address and Source Specific Query message, the value of this field is the address of the multicast group to be queried.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.6.2.3.1.1 "><p>Resv</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.6.2.3.1.2 "><p>Reserved field. This field is set to 0 by the sender and is ignored by the receiver.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.6.2.3.1.1 "><p>S</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.6.2.3.1.2 "><p>When this flag is set to 1, other devices receiving the Query message suppress timer updates. Such a Query message does not suppress the querier election or host-side processing on the devices.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.6.2.3.1.1 "><p>QRV</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.6.2.3.1.2 "><p>A value other than 0 indicates the robustness variable of the querier (the value 0 indicates that the robustness variable of the querier is greater than 7). If a device finds that the value of this field in a received Query message is not 0, it sets its robustness variable to this value. If the value of this field is 0, it ignores this field.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.6.2.3.1.1 "><p>QQIC</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.6.2.3.1.2 "><p>Query interval code of an MLD querier, in seconds. If a non-querier finds that the value of this field in a received Query message is not 0, it sets its query interval to this value. If the value of this field is 0, it ignores this field.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.6.2.3.1.1 "><p>Number of Sources</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.6.2.3.1.2 "><p>Number of multicast sources in the message. For General Query and Multicast Address Specific Query messages, the value of this field is 0. For a Multicast Address and Source Specific Query message, the value of this field is not 0. This number is limited by the MTU of the network over which the message is transmitted.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.6.2.3.1.1 "><p>Source Address</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.6.2.3.1.2 "><p>Multicast source address. Its quantity is limited by the value of the Number of Sources field.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p><a href="#EN-US_CONCEPT_0000001589496149__fig07531738162911">Figure 2</a> shows the format of an MLDv2 Multicast Listener Report message, and <a href="#EN-US_CONCEPT_0000001589496149__tab_02">Table 2</a> describes the fields in this message.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589496149__fig07531738162911"><a name="EN-US_CONCEPT_0000001589496149__fig07531738162911"></a><a name="fig07531738162911"></a><span class="figcap"><b>Figure 2 </b>Format of an MLDv2 Multicast Listener Report message</span><br><span><img class="vsd" src="images/fig_dc_fd_mld_100602.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001589496149__tab_02"></a><a name="tab_02"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001589496149__tab_02" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Fields in an MLDv2 Multicast Listener Report message</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="32%" id="mcps1.3.2.9.2.3.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="68%" id="mcps1.3.2.9.2.3.1.2" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.9.2.3.1.1 "><p>Type</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.9.2.3.1.2 "><p>Message type. In MLDv2 Multicast Listener Report messages, this field is set to 143.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.9.2.3.1.1 "><p>Reserved</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.9.2.3.1.2 "><p>Reserved field. This field is set to 0 by the sender and is ignored by the receiver.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.9.2.3.1.1 "><p>Checksum</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.9.2.3.1.2 "><p>Standard ICMPv6 checksum. It covers the entire MLD message plus a pseudo header of IPv6 header fields. The Checksum field is set to 0 during checksum calculation. The receiver must verify the checksum before processing the message.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.9.2.3.1.1 "><p>Nr of Mcast Address Records</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.9.2.3.1.2 "><p>Number of multicast address records in the message.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.9.2.3.1.1 "><p>Multicast Address Record</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.9.2.3.1.2 "><p>Multicast address record. <a href="#EN-US_CONCEPT_0000001589496149__fig_03">Figure 3</a> shows the format of this field, and <a href="#EN-US_CONCEPT_0000001589496149__tab_03">Table 3</a> describes the fields in this field.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="fignone" id="EN-US_CONCEPT_0000001589496149__fig_03"><a name="EN-US_CONCEPT_0000001589496149__fig_03"></a><a name="fig_03"></a><span class="figcap"><b>Figure 3 </b>Format of the Multicast Address Record field</span><br><span><img class="vsd" src="images/fig_dc_fd_mld_100603.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001589496149__tab_03"></a><a name="tab_03"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001589496149__tab_03" frame="border" border="1" rules="all"><caption><b>Table 3 </b>Fields in the Multicast Address Record field</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="32%" id="mcps1.3.2.11.2.3.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="68%" id="mcps1.3.2.11.2.3.1.2" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.11.2.3.1.1 "><p>Record Type</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.11.2.3.1.2 "><div class="p">Multicast address record type:<ul><li>Current-State Record: sent by a host to report its current state after receiving a Query message. This record type is one of the following two values:<ul><li>MODE_IS_INCLUDE: indicates that the host wants to receive multicast data sent from the listed source addresses to the group. The message is invalid if the source address list is empty.</li><li>MODE_IS_EXCLUDE: indicates that the host does not want to receive multicast data sent from the listed source addresses to the group.</li></ul>
</li><li>Filter-Mode-Change Record: sent by a host when the filter mode changes. This record type is one of the following two values:<ul><li>CHANGE_TO_INCLUDE_MODE: indicates that the filter mode has changed from EXCLUDE to INCLUDE. The host wants to receive multicast data sent from the new sources in the source list to the group. If the specified source list is empty, the host will leave the multicast group.</li><li>CHANGE_TO_EXCLUDE_MODE: indicates that the filter mode has changed from INCLUDE to EXCLUDE. The host rejects multicast data sent from the new sources in the source list to the group.</li></ul>
</li><li>Source-List-Change Record: sent by a host when the source list changes. This record type is one of the following two values:<ul><li>ALLOW_NEW_SOURCES: indicates that the source list contains additional sources from which the host wants to receive multicast data sent to the group. If the filter mode is INCLUDE, the sources are added to the existing source list. If the filter mode is EXCLUDE, the sources are deleted from the blocked source list.</li><li>BLOCK_OLD_SOURCES: indicates that the source list contains the sources from which the host no longer wants to receive multicast data sent to the group. If the filter mode is INCLUDE, the sources are deleted from the source list. If the filter mode is EXCLUDE, the sources are added to the source list.</li></ul>
</li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.11.2.3.1.1 "><p>Aux Data Len</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.11.2.3.1.2 "><p>Auxiliary data length. MLDv2 Multicast Listener Report messages do not contain the Auxiliary Data field and therefore this field is set to 0.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.11.2.3.1.1 "><p>Number of Sources</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.11.2.3.1.2 "><p>Number of source addresses in this group record.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.11.2.3.1.1 "><p>Multicast Address</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.11.2.3.1.2 "><p>Multicast group address.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.11.2.3.1.1 "><p>Sources Address</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.11.2.3.1.2 "><p>Multicast source address.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="32%" headers="mcps1.3.2.11.2.3.1.1 "><p>Auxiliary Data</p>
</td>
<td class="cellrowborder" valign="top" width="68%" headers="mcps1.3.2.11.2.3.1.2 "><p>Additional information in this address group record. MLDv2 Multicast Listener Report messages do not contain auxiliary data.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section"><h4 class="sectiontitle">MLDv2 Working Mechanism</h4><p>Unlike MLDv1, MLDv2 allows hosts to select multicast sources.</p>
<p><strong>Group-and-source-specific join</strong></p>
<p>MLDv2 Multicast Listener Report messages have a destination address FF02::16, which represents all MLDv2-capable devices on the same network segment. A Multicast Listener Report message contains Multicast Address Record fields, allowing hosts to specify the multicast sources from which they do or do not want to receive data when joining a multicast group. As shown in <a href="#EN-US_CONCEPT_0000001589496149__fig_04">Figure 4</a>, two multicast sources S1 and S2 send data to multicast group G. The host only wants to receive data sent from S1 to G.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001589496149__fig_04"><a name="EN-US_CONCEPT_0000001589496149__fig_04"></a><a name="fig_04"></a><span class="figcap"><b>Figure 4 </b>Group-and-source-specific multicast data flow path</span><br><span><img class="vsd" src="images/fig_dc_fd_mld_100604.png" width="NaN" height="NaN"></span></div>
<p>If MLDv1 is running on the host, the host cannot select multicast sources when it joins group G. In this case, the host receives data from both S1 and S2, regardless of whether it requires the data. If MLDv2 is running on the host, the host can choose to receive only data from S1 using either of the following methods:</p>
<ul><li>Method 1: The host sends an MLDv2 Multicast Listener Report (G, INCLUDE, (S1)), requesting to receive only the data sent from S1 to G.</li><li>Method 2: The host sends an MLDv2 Multicast Listener Report (G, EXCLUDE, (S2)), notifying the upstream router that it does not want to receive data from S2. In this case, only data sent from S1 is forwarded to the host.</li></ul>
<p><strong>Group-and-source-specific query</strong></p>
<p>When an MLD querier receives a Multicast Listener Report message with Filter-Mode-Change Records or Source-List-Change Records (such as CHANGE_TO_INCLUDE_MODE and CHANGE_TO_EXCLUDE_MODE), it sends a Multicast Address and Source Specific Query message. If a member wants to receive the data from any source in the source list, it sends a Multicast Listener Report message. The MLD querier updates the source list of the corresponding group according to the received Multicast Listener Report message.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_mld_cfg_0003.html">Understanding MLD
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_mld_cfg_0004.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_mld_cfg_0006.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>