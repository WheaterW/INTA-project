
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the SSH Server Function and Related Parameters">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_ssh_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_ssh_cfg_0010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="SSH">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="SSH">
<meta name="featuretype" content="Security">
<meta name="featurename" content="SSH">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security Protection">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512833774">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring the SSH Server Function and Related Parameters</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512833774"></a><a name="EN-US_TASK_0000001512833774"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the SSH Server Function and Related Parameters</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001512833774__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Configuring the SSH server function and related parameters includes the following tasks: generating a local key pair for the server; enabling the SSH server; and setting server parameters (such as the SSH server port number, interval for updating the SSH server key pair, SSH authentication timeout interval, and maximum number of SSH authentication retries).</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>To ensure security, you are advised to periodically change the key.</li><li>To ensure that the SSH algorithm negotiation is successful, the SSH client must support the key exchange algorithm, encryption algorithm, public key algorithm, and HMAC algorithm configured on the SSH server.</li><li>For security purposes, do not use the RSA algorithm whose length is less than 3072 digits. You are advised to use the ECC authentication algorithm instead.</li></ul>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512833774__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><strong>system-view</strong></pre>
</p></li><li><span>Generate a local key pair.</span><p><p><strong>Method 1: Generate a local RSA, DSA, or ECC key pair.</strong></p>
<ul><li>Generate a local RSA key pair.<pre class="screen"><a href="cmdqueryname=rsa+local-key-pair+create"><b><span class="cmdname">rsa local-key-pair create</span></b></a></pre>
</li><li>Generate a DSA key pair.<pre class="screen"><a href="cmdqueryname=dsa+local-key-pair+create"><b><span class="cmdname">dsa local-key-pair create</span></b></a></pre>
</li><li>Generate an ECC key pair.<pre class="screen"><a href="cmdqueryname=ecc+local-key-pair+create"><b><span class="cmdname">ecc local-key-pair create</span></b></a></pre>
</li></ul>
<p>After a key pair is generated, you can run the <a href="cmdqueryname=display"><b><span class="cmdname">display </span></b></a><a href="cmdqueryname=rsa+local-key-pair+public"><b><span class="cmdname">rsa local-key-pair public</span></b></a>, <a href="cmdqueryname=display+dsa+local-key-pair+public"><b><span class="cmdname">display dsa local-key-pair public</span></b></a>, or <a href="cmdqueryname=display+ecc+local-key-pair+public"><b><span class="cmdname">display ecc local-key-pair public</span></b></a> command to view information about the RSA, DSA, or ECC public key in the local key pair.</p>
<p>If you no longer need the local DSA or ECC key pairs, run the <strong><a href="cmdqueryname=dsa+local-key-pair+destroy"><b><span class="cmdname">dsa local-key-pair destroy</span></b></a></strong> or <a href="cmdqueryname=ecc+local-key-pair+destroy"><b><span class="cmdname">ecc local-key-pair destroy</span></b></a> command to destroy all the local DSA or ECC key pairs. After this command is run, the file that stores the corresponding keys on the device is cleared. Exercise caution when running this command.</p>
<p>Destroy all the local DSA keys.</p>
<p><strong>Method 2: Generate a labeled SM2, RSA, DSA, or ECC key pair.</strong></p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>You can generate up to 20 key pairs by using this method. To enhance communication security, rotate between these key pairs at different periods. To limit the maximum number of key pairs that the device can generate, you can run the <a href="cmdqueryname=rsa+key-pair+maximum"><b><span class="cmdname">rsa key-pair maximum</span></b></a>, <a href="cmdqueryname=dsa+key-pair+maximum"><b><span class="cmdname">dsa key-pair maximum</span></b></a>, or <a href="cmdqueryname=ecc+key-pair+maximum"><b><span class="cmdname">ecc key-pair maximum</span></b></a> command.</p>
</div></div>
<ol type="a"><li>Generate a labeled RSA, DSA, SM2, or ECC key pair.<ul><li>Generate a labeled RSA key pair.<pre class="screen"><a href="cmdqueryname=rsa+key-pair+label"><b><span class="cmdname">rsa key-pair label</span></b></a> <i><span class="varname">label-name</span></i> [ <strong><span>modulus</span></strong> <i><span class="varname">modulus-bits</span></i> ]</pre>
</li><li>Generate a labeled DSA key pair.<pre class="screen"><a href="cmdqueryname=dsa+key-pair+label"><b><span class="cmdname">dsa key-pair label</span></b></a> <i><span class="varname">label-name</span></i> [ <strong><span>modulus</span></strong> <i><span class="varname">modulus-bits</span></i> ]</pre>
</li><li>Generate a labeled ECC key pair.<pre class="screen"><a href="cmdqueryname=ecc+key-pair+label"><b><span class="cmdname">ecc key-pair label</span></b></a> <i><span class="varname">label-name</span></i> [ <strong><span>modulus</span></strong> <i><span class="varname">modulus-bits</span></i> ]</pre>
</li><li>Generate a labeled SM2 key pair.<pre class="screen"><strong><a href="cmdqueryname=sm2+key-pair+label"><b><span class="cmdname">sm2 key-pair label</span></b></a></strong> <em>label-name</em></pre>
</li></ul>
</li><li>Assign a host key or PKI certificate to the SSH server.<pre class="screen"><a href="cmdqueryname=ssh+server+assign"><b><span class="cmdname">ssh server assign</span></b></a> { <strong><span>rsa-host-key</span></strong> <i><span class="varname">key-name</span></i> | <strong><span>dsa-host-key</span></strong> <i><span class="varname">key-name</span></i> | <strong><span>ecc-host-key</span></strong> <i><span class="varname">key-name</span></i> | <strong>sm2-host-key</strong> <i><span class="varname">key-name</span></i> | <strong>pki</strong> <em><i><span class="varname">key-name</span></i></em> } </pre>
</li></ol>
<p>By default, no key or PKI certificate is assigned to an SSH server.</p>
<p>After the key pair is generated, you can run the <a href="cmdqueryname=display+rsa+key-pair"><b><span class="cmdname">display rsa key-pair</span></b></a> [ <strong><span>brief</span></strong> | <strong><span>label</span></strong> <i><span class="varname">label-name</span></i> ], <a href="cmdqueryname=display+dsa+key-pair"><b><span class="cmdname">display dsa key-pair</span></b></a> [ <strong><span>brief</span></strong> | <strong><span>label</span></strong> <i><span class="varname">label-name</span></i> ], <a href="cmdqueryname=display+ecc+key-pair"><b><span class="cmdname">display ecc key-pair</span></b></a> [ <strong><span>brief</span></strong> | <strong><span>label</span></strong> <i><span class="varname">label-name</span></i> ], <strong><a href="cmdqueryname=display+sm2+key-pair"><b><span class="cmdname">display sm2 key-pair</span></b></a></strong> [ <strong>brief</strong> | <strong>label</strong> <em>label-name</em> ] commands to view information about the labeled RSA, DSA, SM2, or ECC key pair.</p>
</p></li><li><span>Enable the public key algorithm for the SSH server.</span><p><pre class="screen"><a href="cmdqueryname=ssh+server+publickey"><b><span class="cmdname">ssh server publickey</span></b></a> { <strong><span>dsa</span></strong> | <strong><span>ecc</span></strong> | <strong><span>rsa</span></strong> | <strong><span>x509v3-ssh-rsa</span></strong> | <strong><span>rsa_sha2_256</span></strong> | <strong><span>rsa_sha2_512</span></strong> | <strong>sm2</strong> | <strong>x509v3-rsa2048-sha256</strong> } <sup>*</sup></pre>
<p>By default:</p>
<ul><li>When a device starts with the factory defaults, the RSA_SHA2_256 and RSA_SHA2_512 public key algorithms are enabled, whereas the SM2, RSA, ECC, DSA, X509-RSA-SHA2-256, and X509-SSH-RSA public key algorithms are disabled.</li><li>When a device starts with a configuration file which does not contain the <strong>ssh server publickey</strong> command configuration, the ECC, RSA, RSA_SHA2_256, RSA_SHA2_512, and DSA public key algorithms are enabled, but not X509-SSH-RSA, SM2, and X509-RSA-SHA2-256.</li></ul>
</p><p><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Parameters <strong>dsa</strong>, <strong>rsa</strong>, and <strong>x509v3-ssh-rsa</strong> in the command can be used only after the weak security algorithm/protocol feature package is installed by running the <strong>install feature-software WEAKEA</strong> command.</p>
<p>To log in to the device using public key authentication, ensure that the public key algorithms enabled for the SSH server are the same as those configured for SSH users using the <a href="cmdqueryname=ssh+user+authentication-type"><b><span class="cmdname">ssh user authentication-type</span></b></a> command. Otherwise, login to the device fails.</p>
</div></div>
</p></li><li><span>Enable the SSH server function.</span><p><ul><li>Enable the STelnet server function on the device.<pre class="screen"><a href="cmdqueryname=stelnet"><b><span class="cmdname">stelnet</span></b></a> [ <strong><span>ipv4</span></strong> | <strong><span>ipv6</span></strong> ] <strong><span>server enable</span></strong></pre>
<p>By default, the STelnet service is disabled.</p>
</li><li>Enable the SFTP server function on the device.<pre class="screen"><a href="cmdqueryname=sftp"><b><span class="cmdname">sftp</span></b></a> [ <strong><span>ipv4</span></strong> | <strong><span>ipv6</span></strong> ] <strong><span>server enable</span></strong></pre>
<p>By default, the SFTP service is disabled.</p>
</li><li>Enable the SCP server function on the device.<pre class="screen"><a href="cmdqueryname=scp"><b><span class="cmdname">scp</span></b></a> [ <strong><span>ipv4</span></strong> | <strong><span>ipv6</span></strong> ] <strong><span>server enable</span></strong></pre>
<p>By default, the SCP service is disabled.</p>
</li></ul>
</p></li><li><span>Configure the port number of the SSH server.</span><p><pre class="screen"><a href="cmdqueryname=ssh"><b><span class="cmdname">ssh</span></b></a> [ <strong><span>ipv4</span></strong> | <strong><span>ipv6</span></strong> ] <strong><span>server port</span></strong> <i><span class="varname">port-number</span></i></pre>
<p>By default, the port number of an SSH server is 22.</p>
<p>If a new port number is configured, the SSH server disconnects from all SSH clients and uses the new port number to establish connections. This is more secure as it prevents attackers from connecting to the server straight through the standard SSH port.</p>
</p></li><li><span>Enable the keepalive function on the SSH server.</span><p><pre class="screen"><a href="cmdqueryname=undo+ssh+server+keepalive+disable"><b><span class="cmdname">undo ssh server keepalive disable</span></b></a></pre>
<p>By default, the keepalive function is enabled on an SSH server.</p>
<p>When this function is enabled, the SSH server will respond to keepalive packets sent from the SSH client. If the SSH client does not receive any keepalive response packets from the SSH server, the client will disconnect from the server. This ensures that server resources are not wasted due to the client repeatedly attempting to reconnect.</p>
</p></li><li><span>(Optional) Configure extended attributes for the SSH server.</span><p><ol type="a"><li>Configure a key exchange algorithm list for the SSH server.<pre class="screen"><a href="cmdqueryname=ssh+server+key-exchange"><b><span class="cmdname">ssh server key-exchange</span></b></a> { <strong><span>dh_group_exchange_sha256</span></strong> | <strong><span>dh_group_exchange_sha1</span></strong> | <strong><span>dh_group1_sha1</span></strong> | <strong><span>ecdh_sha2_nistp256</span></strong> | <strong><span>ecdh_sha2_nistp384</span></strong> | <strong><span>ecdh_sha2_nistp521</span></strong> | <strong><span>sm2_kep</span></strong> | <strong><span>dh_group14_sha1</span></strong> | <strong><span>dh_group16_sha512</span></strong> | <strong><span>curve25519_sha256</span></strong> } <sup>*</sup></pre>
<p>By default, the SSH server uses dh_group_exchange_sha256, dh_group16_sha512, and curve25519_sha256.</p>
<p>The client and server negotiate the key exchange algorithm for packet transmission. During this negotiation, the server compares the key exchange algorithm list sent by the client with its own, and selects the first algorithm that appears on both lists for packet transmission. If there are no matches, the negotiation fails.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>For security purposes, you are advised to use the curve25519_sha256 key exchange algorithm.</li><li>Parameters <strong>dh_group_exchange_sha1</strong>, <strong>dh_group1_sha1</strong>, <strong>sm2_kep</strong>, and <strong>dh_group14_sha1</strong> in the command can be used only after the weak security algorithm/protocol feature package is installed using the <strong>install feature-software WEAKEA</strong> command.</li></ul>
</div></div>
</li><li>Configure the condition for renegotiating the SSH session key.<pre class="screen"><a href="cmdqueryname=ssh+server+rekey"><b><span class="cmdname">ssh server rekey</span></b></a> { <strong><span>data-limit</span></strong> <i><span class="varname">data-limit</span></i> | <strong><span>max-packet</span></strong> <i><span class="varname">max-packet</span></i> | <strong><span>time</span></strong> <i><span class="varname">minutes</span></i> } <sup>*</sup></pre>
<div class="p">To improve transmission security, the SSH server can initiate key renegotiation. If renegotiation fails, the SSH connection is terminated. By default, the SSH server triggers key renegotiation only when at least one of the following conditions is met:<ul><li><p>The total data volume of packets transmitted using the current key reaches 1000 megabytes.</p>
</li><li><p>The total number of sent and received packets reaches 2147483648.</p>
</li><li><p>An SSH connection lasts for 60 minutes.</p>
</li></ul>
</div>
</li><li>Set the minimum key length supported during diffie-hellman-group-exchange key exchange between the SSH server and client.<pre class="screen"><a href="cmdqueryname=ssh+server+dh-exchange+min-len"><b><span class="cmdname">ssh server dh-exchange min-len</span></b></a> <i><span class="varname">min-len</span></i></pre>
<div class="p">By default, the minimum supported key length is 3072 bits when the SSH server uses the diffie-hellman-group-exchange key to exchange with clients. You are advised to set the minimum key length to 3072 bits to improve security.<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Security risks exist if the minimum key length of the diffie-hellman-group-exchange algorithm is less than or equal to 2048 bits. In this case, you need to run the <strong>install feature-software WEAKEA</strong> command to install the weak security algorithm/protocol feature package (WEAKEA). You are advised to set the minimum key length to 3072 bits. This command takes effect for both IPv4 and IPv6 SSH servers.</p>
</div></div>
</div>
</li><li>Configure an encryption algorithm list for the SSH server.<pre class="screen"><a href="cmdqueryname=ssh+server+cipher"><b><span class="cmdname">ssh server cipher</span></b></a> { <strong><span>des_cbc</span></strong> | <strong><span>3des_cbc</span></strong> | <strong><span>aes128_cbc</span></strong> | <strong><span>aes256_cbc</span></strong> | <strong><span>aes128_ctr</span></strong> | <strong><span>aes256_ctr</span></strong> | <strong><span>arcfour128</span></strong> | <strong><span>arcfour256</span></strong> | <strong><span>aes192_cbc</span></strong> | <strong><span>aes192_ctr</span></strong> | <strong><span>aes128_gcm</span></strong> | <strong><span>aes256_gcm</span></strong> | <strong><span>blowfish_cbc</span></strong> | <strong><span>sm4_cbc</span></strong> | <strong><span>sm4_gcm</span></strong> } <sup>*</sup></pre>
<div class="p">By default, an SSH server supports the following encryption algorithms: AES128_CTR, AES256_CTR, AES192_CTR, AES128_GCM, and AES256_GCM.<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>For security purposes, you are advised to use the following encryption algorithms: AES256_GCM, AES128_GCM, AES256_CTR, AES192_CTR, and AES128_CTR.</li><li>Parameters <strong>blowfish_cbc</strong>, <strong>des_cbc</strong>, <strong>3des_cbc</strong>, <strong>aes128_cbc</strong>, <strong>aes256_cbc</strong>, <strong>arcfour128</strong>, <strong>arcfour256</strong>, <strong>aes192_cbc</strong>, and <strong><span>sm4_cbc</span></strong> in the command can be used only after the weak security algorithm/protocol feature package is installed using the <strong>install feature-software WEAKEA</strong> command.</li></ul>
</div></div>
</div>
</li><li>Configure an authentication algorithm list for the SSH server.<pre class="screen"><a href="cmdqueryname=ssh+server+hmac"><b><span class="cmdname">ssh server hmac</span></b></a> { <strong><span>md5</span></strong> | <strong><span>md5_96</span></strong> | <strong><span>sha1</span></strong> | <strong><span>sha1_96</span></strong> | <strong><span>sha2_256</span></strong> | <strong><span>sha2_256_96</span></strong> | <strong><span>sha2_512</span></strong> | <strong><span>sm3</span></strong> } <sup>*</sup></pre>
<p>By default, an SSH server uses the HMAC authentication algorithm <span>SHA2_256 or SHA2_512</span>.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>For security purposes, you are advised to use the following HMAC algorithms: SHA2_512 and SHA2_256.</li><li>Parameters <strong>md5</strong>, <strong>md5_96</strong>, <strong>sha1</strong>, <strong>sha1_96</strong>, and <strong>sha2_256_96</strong> in the command can be used only after the weak security algorithm/protocol feature package is installed using the <strong>install feature-software WEAKEA</strong> command.</li></ul>
</div></div>
</li><li>Disable the function that triggers a warning when the SSH server uses an insecure algorithm.<pre class="screen"><a href="cmdqueryname=ssh+server+security-banner+disable"><b><span class="cmdname">ssh server security-banner disable</span></b></a></pre>
<p>By default, the function that triggers a warning when the SSH server uses an insecure algorithm is enabled.</p>
</li><li>Set the interval for updating a key pair.<pre class="screen"><a href="cmdqueryname=ssh+server+rekey-interval"><b><span class="cmdname">ssh server rekey-interval</span></b></a> <i><span class="varname">hours</span></i></pre>
<p>By default, the interval for updating the key pair of an SSH server is 0, indicating that the key pair is never updated.</p>
<p>After the interval for updating the SSH server key pair is set using this command, the SSH server will automatically update the key pair at the specified interval, thereby enhancing security.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Only SSH1.X supports this configuration.</p>
</div></div>
</li><li>Set the SSH authentication timeout interval.<pre class="screen"><a href="cmdqueryname=ssh+server+timeout"><b><span class="cmdname">ssh server timeout</span></b></a> <i><span class="varname">seconds</span></i></pre>
<p>By default, the SSH authentication timeout interval is 60 seconds.</p>
<p>If you have not logged in successfully within the SSH authentication timeout interval, the current connection is terminated to ensure security.</p>
</li><li>Set the maximum number of SSH authentication retries.<pre class="screen"><a href="cmdqueryname=ssh+server+authentication-retries"><b><span class="cmdname">ssh server authentication-retries</span></b></a> <i><span class="varname">times</span></i></pre>
<p>By default, a maximum of three SSH authentication retries are supported.</p>
<p>The number of SSH authentication retries is limited to prevent unauthorized access.</p>
</li><li>Enable compatibility with earlier SSH versions.<pre class="screen"><a href="cmdqueryname=ssh+server+compatible-ssh1x+enable"><b><span class="cmdname">ssh server compatible-ssh1x enable</span></b></a></pre>
<p>By default, the SSH server's compatibility with earlier versions is disabled.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command can be used only after the weak security algorithm/protocol feature package is installed using the <strong>install feature-software WEAKEA</strong> command.</p>
</div></div>
</li><li>Configure an ACL.<pre class="screen"><a href="cmdqueryname=ssh"><b><span class="cmdname">ssh</span></b></a><span> [ <strong><span>ipv6</span></strong> ]</span> <strong><span>server acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> }</pre>
<p>By default, no ACL is configured.</p>
<p>An ACL is configured to determine which clients can log in to the current device through SSH.</p>
</li><li>Set the minimum length of the RSA public key allowed for SSH server authentication.<pre class="screen"><a href="cmdqueryname=ssh+server+rsa-key+min-length"><b><span class="cmdname">ssh server rsa-key min-length</span></b></a> <i><span class="varname">min-length-val</span></i></pre>
<p>By default, the minimum length of the RSA public key allowed for SSH server authentication is 512 bits.</p>
</li></ol>
</p></li><li><span>Configure the source interface<span> or source IP address</span> for the SSH server.</span><p><p>By default, no source interface or source IPv6 address is specified for an SSH server.</p>
<ul><li><p>Configure the SSH server to use a specified interface as the source interface.</p>
<pre class="screen"><strong><a href="cmdqueryname=ssh+server-source"><b><span class="cmdname">ssh server-source</span></b></a></strong> <strong>-i</strong> <em>i<i><span class="varname">nterface-type</span></i></em><i><span class="varname"> </span></i><em>interface-number</em></pre>
<p>By default, no source interface is configured for an SSH server.</p>
</li><li><p>Configure the SSH server to use all valid interfaces as the source interface.</p>
<pre class="screen"><strong><a href="cmdqueryname=ssh+server-source"><b><span class="cmdname">ssh server-source</span></b></a></strong> <strong>all-interface</strong></pre>
</li><li><p>Configure a source IPv6 address for the SSH server.</p>
<pre class="screen"><strong><a href="cmdqueryname=ssh+ipv6+server-source"><b><span class="cmdname">ssh ipv6 server-source</span></b></a></strong> <strong>-a</strong> <i><span class="varname">ipv6-address</span></i> [ <strong><span>-vpn-instance</span></strong> <em>v<i><span class="varname">pn-instance-name</span></i></em><i><span class="varname"> </span></i>]</pre>
<p>By default, no source interface or source IPv6 address is specified for an SSH server.</p>
</li><li><p>Configure the SSH server to use all valid interfaces using IPv6 addresses as the IPv6 source interface.</p>
<pre class="screen"><strong><a href="cmdqueryname=ssh+ipv6+server-source"><b><span class="cmdname">ssh ipv6 server-source</span></b></a></strong> <strong>all-interface</strong></pre>
</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the <strong>ssh server-source</strong> <strong>all-interface</strong> or <strong>ssh ipv6 server-source</strong> <strong>all-interface</strong> command is run, users can log in to the SSH server from all valid interfaces, posing system security risks. Exercise caution while running these two commands.</p>
</div></div>
</p></li><li><span>Configure the maximum number of connections that can be established between a single IP address and the SSH server.</span><p><pre class="screen"><a href="cmdqueryname=ssh+server+ip-limit-session"><b><span class="cmdname">ssh server ip-limit-session</span></b></a> <i><span class="varname">limit-session-num</span></i></pre>
<p>By default, a maximum of 256 connections can be established on the SSH server using a single IP address.</p>
</p></li><li><span>Enable keyboard-interactive authentication on the SSH server.</span><p><pre class="screen"><strong><a href="cmdqueryname=ssh+server+authentication-type+keyboard-interactive+enable"><b><span class="cmdname">ssh server authentication-type keyboard-interactive enable</span></b></a></strong></pre>
<p>By default, keyboard-interactive authentication is enabled on an SSH server.</p>
<p>If an SSH user logs in to a device using password card authentication, keyboard-interactive authentication must be enabled for this user.</p>
</p></li><li><span>(Optional) Enable the client IP address locking function on the SSH server.</span><p><pre class="screen"><a href="cmdqueryname=undo+ssh+server+ip-block+disable"><b><span class="cmdname">undo ssh server ip-block disable</span></b></a></pre>
<p>By default, the client IP address locking function is enabled on an SSH server.</p>
<ul><li>When this function is enabled, locked IP addresses fail to pass authentication and are displayed in the <a href="cmdqueryname=display+ssh+server+ip-block+list"><b><span class="cmdname">display ssh server ip-block list</span></b></a> command output.</li><li>If this function is disabled, the <a href="cmdqueryname=display+ssh+server+ip-block+list"><b><span class="cmdname">display ssh server ip-block list</span></b></a> command does not display any previously locked IP addresses or IP addresses that fail to pass authentication.</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If an SSH user fails authentication six consecutive times within 5 minutes, the user's IP address will be locked for 5 minutes. To unlock the IP address before the locking period elapses, run the <a href="cmdqueryname=activate+ssh+server+ip-block+ip-address"><b><span class="cmdname">activate ssh server ip-block ip-address</span></b></a> <i><span class="varname">ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-name</span></i> ] command.</p>
</div></div>
</p></li><li><span>(Optional) Configure alarm generation and clearance thresholds as a number of SSH server login failures within a specified period.</span><p><pre class="screen"><a href="cmdqueryname=ssh+server+login-failed+threshold-alarm"><b><span class="cmdname">ssh server login-failed threshold-alarm</span></b></a> <strong><span>upper-limit</span></strong> <i><span class="varname">report-times</span></i> <strong><span>lower-limit</span></strong> <i><span class="varname">resume-times</span></i> <strong><span>period</span></strong> <i><span class="varname">period-time</span></i></pre>
<p>By default, an alarm is generated when 30 or more login failures occur within 5 minutes, and the alarm is cleared when the number of login failures within 5 minutes falls below 20.</p>
</p></li><li><span>(Optional) Configure the DSCP priority of SSH packets.</span><p><pre class="screen"><a href="cmdqueryname=ssh+server+dscp"><b><span class="cmdname">ssh server dscp</span></b></a> <i><span class="varname">value</span></i></pre>
<p>By default, the DSCP priority of SSH packets is 48.</p>
</p></li><li><span>(Optional) Enable the local port forwarding service on the SSH server.</span><p><pre class="screen"><a href="cmdqueryname=ssh+server+tcp+forwarding+enable"><b><span class="cmdname">ssh server tcp forwarding enable</span></b></a></pre>
<p>By default, the local port forwarding service is disabled on the SSH server.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_ssh_cfg_0008.html">Configuring an SSH Server
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_ssh_cfg_0010.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>