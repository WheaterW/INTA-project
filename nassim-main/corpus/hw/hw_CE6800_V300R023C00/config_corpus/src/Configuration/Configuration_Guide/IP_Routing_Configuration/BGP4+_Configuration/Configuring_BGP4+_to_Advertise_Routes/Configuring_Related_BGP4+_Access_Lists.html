
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Related BGP4+ Access Lists">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp6_cfg_0022.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp6_cfg_0079.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp6_cfg_0024.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130782214">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Related BGP4+ Access Lists</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130782214"></a><a name="EN-US_TASK_0000001130782214"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Related BGP4+ Access Lists</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130782214__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>BGP4+ has two specific access lists, the AS_Path filter and the community filter. They can be used for checking the BGP4+ running status as well as being used in routing policies.</p>
<ul><li><p>AS_Path filter</p>
<p>An AS_Path filter is used to filter BGP4+ routes based on the AS_Path lists they carry. Routes that do not match the filtering conditions will be denied, and you can define multiple rules (permit or deny) for the same filter.</p>
</li><li><p>Community filter</p>
<p>A BGP4+ community attribute is used to identify a group of routes with the same properties. Routes can be classified manually using community attributes, which facilitates route management.</p>
</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001130782214__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure an AS_Path filter.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure an AS_Path filter.</span><p><pre class="screen"><a href="cmdqueryname=ip+as-path-filter+index+permit+deny"><b><span class="cmdname">ip as-path-filter</span></b></a> { <i><span class="varname">as-path-filter-number</span></i> | <i><span class="varname">as-path-filter-name</span></i> } <span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span>{ <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular-expression</span></i></pre>
<p>If the <a href="cmdqueryname=peer+as-path-filter"><b><span class="cmdname">peer as-path-filter</span></b></a> command is used to apply a routing policy based on the configured AS_Path filter to BGP4+ routes, ineligible routes will be filtered out.</p>
<p>AS_Path filters use regular expressions to define matching rules. A regular expression consists of metacharacters and values.</p>
<ul><li><p>Metacharacter: defines a matching rule.</p>
</li><li><p>Literal character: defines a matching object.</p>
</li></ul>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Description of metacharacters</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="24.68%" id="mcps1.3.2.1.2.2.2.5.2.3.1.1" liSelected="liSelected"><p>Special Character</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="75.32%" id="mcps1.3.2.1.2.2.2.5.2.3.1.2" liSelected="liSelected"><p>Function</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>\</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Defines an escape character, which is used to mark the next character (common or special) as a common character.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>^</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Matches the start position of a string.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>$</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Matches the end position of a string.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>*</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Matches a sub-regular expression that it follows zero or multiple times.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>+</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Matches a sub-regular expression that it follows once or multiple times.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>?</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Matches a sub-regular expression that it follows once or zero times.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>.</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Matches any single character.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>()</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Matches a sub-regular expression within the parentheses, and obtains the matching result. The parentheses can also be empty.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>_</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Matches regular expressions with a sign, such as a comma (,), left brace ({), right brace (}), left parenthesis ((), right parenthesis ()), or space. In addition, the underscore (_) can be used at the beginning of a regular expression with the same function as the caret sign (^) or at the end of a regular expression with the same function as the dollar sign ($).</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>x|y</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Matches <em>x</em> or <em>y</em>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>[xyz]</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Matches any character contained in a regular expression.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>[^xyz]</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Matches any character that is not contained in a regular expression.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>[a-z]</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Matches any character within a specified range in a regular expression.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.1 "><p>[^a-z]</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.1.2.2.2.5.2.3.1.2 "><p>Matches any character beyond a specified range.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>For example, ^10 matches only the AS_Path attribute beginning with 10, with ^ indicating that the beginning of a character string is matched.</p>
<p>Multiple rules (permit or deny) can be specified in a filter, and the relationship between them is OR, which means that a route matches the AS_Path filter if it meets one of the matching rules.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For details about how to use regular expressions, see <em>Basic Configuration &gt; CLI Overview.</em></p>
</div></div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130782214__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130782214__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure a community filter.</span><p><p>Community filters are classified as either standard or advanced community filters. The advanced community filter supports regular expressions and is more flexible than the standard community filter.</p>
</p><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure a community filter.</span><p><ul><li><p>Configure a standard community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+community-filter+basic+index+permit+deny+internet"><b><span class="cmdname">ip community-filter</span></b></a> <strong><span>basic</span></strong> <i><span class="varname">comm-filter-name</span></i> <span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span>{ <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } [ <i><span class="varname">community-number</span></i> | <i><span class="varname">aa:nn</span></i> | <strong><span>internet</span></strong><span> [ <strong><span>strict-match</span></strong> ]</span> | <strong><span>no-export-subconfed</span></strong> | <strong><span>no-advertise</span></strong> | <strong><span>no-export</span></strong> ] &amp;&lt;1-20&gt;</pre>
<p>or</p>
<pre class="screen"><a href="cmdqueryname=ip+community-filter+index+permit+deny+internet"><b><span class="cmdname">ip community-filter</span></b></a> <i><span class="varname">basic-comm-filter-num</span></i> <span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span>{ <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } [ <i><span class="varname">community-number</span></i> | <i><span class="varname">aa:nn</span></i> | <strong><span>internet</span></strong> | <strong><span>no-export-subconfed</span></strong> | <strong><span>no-advertise</span></strong> | <strong><span>no-export</span></strong> ] &amp;&lt;1-20&gt;</pre>
</li></ul>
<ul><li><p>Configure an advanced community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+community-filter+advanced+index+permit+deny"><b><span class="cmdname">ip community-filter</span></b></a> { <strong><span>advanced</span></strong> <i><span class="varname">comm-filter-name</span></i> | <i><span class="varname">adv-comm-filter-num</span></i> } <span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span>{ <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular-expression</span></i></pre>
</li></ul>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130782214__en-us_task_0234857734_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130782214__en-us_task_0234857734_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure a Large-Community filter.</span><p><p>There are two types of Large-Community filters: basic Large-Community filter and advanced Large-Community filter. Advanced Large-Community filters support regular expressions and are more flexible than basic Large-Community filters.</p>
</p><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure a Large-Community filter.</span><p><ul><li><p>Configure a basic Large-Community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+large-community-filter+basic+index+permit+deny"><b><span class="cmdname">ip large-community-filter</span></b></a> <strong><span>basic</span></strong> <i><span class="varname">large-comm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <i><span class="varname">aa:bb:cc</span></i> } &amp;&lt;1-16&gt;</pre>
</li><li><p>Configure an advanced Large-Community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+large-community-filter+advanced+index+permit+deny"><b><span class="cmdname">ip large-community-filter</span></b></a> <strong><span>advanced</span></strong> <i><span class="varname">large-comm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular-expression</span></i></pre>
</li></ul>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130782214__en-us_task_0234857734_screen14848162118611_2"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130782214__en-us_task_0234857734_cmdname1784862115612_2">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure an extended community filter.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Perform either of the following operations as needed to configure an extended community filter.</span><p><p>Configure a VPN-Target extended community filter:</p>
<ul><li><p>Configure a basic VPN-Target extended community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+extcommunity-filter+basic+index+deny+permit+rt"><b><span class="cmdname">ip extcommunity-filter</span></b></a> { <i><span class="varname">basic-extcomm-filter-num</span></i> | <strong><span>basic</span></strong> <i><span class="varname">basic-extcomm-filter-name</span></i> }<span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span> { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } { <strong><span>rt</span></strong> { <i><span class="varname">as-number:nn</span></i> | <i><span class="varname">4as-number:nn</span></i> | <i><span class="varname">ipv4-address</span></i>:<i><span class="varname">nn</span></i> } } &amp;&lt;1-16&gt;</pre>
</li><li><p>Configure an advanced VPN-Target extended community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+extcommunity-filter+advanced+index+deny+permit"><b><span class="cmdname">ip extcommunity-filter</span></b></a> { <i><span class="varname">advanced-extcomm-filter-num</span></i> | <strong><span>advanced</span></strong> <i><span class="varname">advanced-extcomm-filter-name</span></i> }<span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span> { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <i><span class="varname">regular-expression</span></i></pre>
</li></ul>
<p>Configure an SoO extended community filter:</p>
<ul><li><p>Configure a basic SoO extended community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+extcommunity-list+soo+basic+index+permit+deny"><b><span class="cmdname">ip extcommunity-list soo basic</span></b></a> <i><span class="varname">basic-extcomm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <i><span class="varname">site-of-origin</span></i> } &amp;&lt;1-16&gt;</pre>
</li><li><p>Configure an advanced SoO extended community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+extcommunity-list+soo+advanced+index+permit+deny"><b><span class="cmdname">ip extcommunity-list soo advanced</span></b></a> <i><span class="varname">advanced-extcomm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular-expression</span></i></pre>
</li></ul>
<p>Multiple entries can be defined in one extended community filter identified either by a name or number. The relationship between the entries is "OR". This means that if a route matches one of the rules, the route matches the filter.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130782214__en-us_task_0234857734_screen14848162118611_3"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130782214__en-us_task_0234857734_cmdname1784862115612_3">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp6_cfg_0022.html">Configuring BGP4+ to Advertise Routes
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp6_cfg_0079.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bgp6_cfg_0024.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>