
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling Intelligent Traffic Analysis for TCP Flows">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_traffic-analysis_cfg_0009.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_traffic-analysis_cfg_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Intelligent Traffic Analysis">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Intelligent Traffic Analysis">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="Intelligent Traffic Analysis">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563892941">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Enabling Intelligent Traffic Analysis for TCP Flows</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563892941"></a><a name="EN-US_TASK_0000001563892941"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling Intelligent Traffic Analysis for TCP Flows</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001563892941__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><div class="p">An ACL has been created by running the <a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> command in the system view. Currently, only the following advanced ACL rules are supported. The ACL rules that are not supported cannot be delivered, preventing the TAP from receiving corresponding service flows.<ul><li>Rule 1: TCP + destination IPv4 or IPv6 address</li><li>Rule 2: TCP + destination IPv4 or IPv6 address + destination TCP port number</li><li>Rule 3: TCP + source IPv4 or IPv6 address + destination IPv4 or IPv6 address</li><li>Rule 4: TCP + source IPv4 or IPv6 address + destination IPv4 or IPv6 address + destination TCP port number</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In intelligent traffic analysis for TCP flows, the <strong><span>deny</span></strong> or <strong><span>permit</span></strong> action specified in an ACL rule does not take effect. Service flows are sent to the TAP for processing as long as they match the preceding advanced ACL rules.</p>
</div></div>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001563892941__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>You can configure intelligent traffic analysis for TCP flows on the device. The device then matches service flows based on ACL rules, and sends the matched service flows to the TAP for in-depth analysis. In this way, precise data of performance indicators is obtained, which helps you monitor specified service flows in real time and locate faults quickly and accurately.</p>
<p>You can use MQC to implement intelligent traffic analysis for TCP flows by configuring <a href="cmdqueryname=traffic-analysis+enable"><b><span class="cmdname">traffic-analysis enable</span></b></a> in an MQC traffic behavior.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563892941__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Configure a traffic classifier.</span><p><p>For details, see "Configuring a Traffic Classifier" in <span>Configuration Guide</span> &gt; QoS Configuration.</p>
</p></li><li><span>Create a traffic behavior and enter the traffic behavior view.</span><p><pre class="screen"><a href="cmdqueryname=traffic+behavior"><b><span class="cmdname">traffic behavior</span></b></a> <i><span class="varname">behavior-name</span></i></pre>
<p>By default, no traffic behavior is created.</p>
</p></li><li><span>Enable intelligent traffic analysis for TCP flows globally.</span><p><pre class="screen"><a href="cmdqueryname=traffic-analysis+enable"><b><span class="cmdname">traffic-analysis enable</span></b></a></pre>
<p>By default, intelligent traffic analysis for TCP flows is disabled globally.</p>
</p></li><li><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>Configure a traffic policy.</span><p><p>For details, see "Configuring a Traffic Policy" in <span>Configuration Guide</span> &gt; QoS Configuration &gt; MQC Configuration.</p>
</p></li><li><span>Apply the traffic policy globally.</span><p><p>For details, see "Applying a Traffic Policy" in <span>Configuration Guide</span> &gt; QoS Configuration.</p>
</p></li><li><span>(Optional) Enable intelligent traffic analysis for unidirectional TCP flows.</span><p><pre class="screen"><a href="cmdqueryname=traffic-analysis+tcp+one-way"><b><span class="cmdname">traffic-analysis tcp one-way</span></b></a> <strong><span>sequence </span></strong><i><span class="varname">sequence-value</span></i> <i><span class="varname">sequence-mask</span></i></pre>
</p><p><p>By default, intelligent traffic analysis for unidirectional TCP flows is disabled.</p>
<p>When packets of a specified TCP flow traverse the same path in both directions, you can enable intelligent traffic analysis for the TCP flow to obtain information about this flow. In scenarios such as M-LAG and ECMP, however, packets of a specified TCP flow may traverse a different path for each direction. In this case, you can enable intelligent traffic analysis for unidirectional TCP flows.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_traffic-analysis_cfg_0009.html">Configuring Intelligent Traffic Analysis for TCP Flows
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_traffic-analysis_cfg_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>