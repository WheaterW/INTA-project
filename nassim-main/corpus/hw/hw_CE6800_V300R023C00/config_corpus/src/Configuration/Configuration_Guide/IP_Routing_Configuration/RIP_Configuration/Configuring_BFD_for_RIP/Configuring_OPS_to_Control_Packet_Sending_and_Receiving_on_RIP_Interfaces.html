
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring OPS to Control Packet Sending and Receiving on RIP Interfaces">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_rip_cfg_0046.html">
<meta name="DC.Relation" scheme="URI" content="vrp_rip_cfg_0049.html">
<meta name="DC.Relation" scheme="URI" content="vrp_rip_cfg_0051.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="RIP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="RIP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="RIP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001382327600">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring OPS to Control Packet Sending and Receiving on RIP Interfaces</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001382327600"></a><a name="EN-US_TASK_0000001382327600"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring OPS to Control Packet Sending and Receiving on RIP Interfaces</h1>
<div class="taskbody"><p></p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001382327600__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><div class="p">Before configuring OPS to control packet sending and receiving on RIP interfaces, complete the following task:<ul><li><p><a href="vrp_rip_cfg_0048.html">Configure static BFD for RIP</a>.</p>
</li></ul>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001382327600__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p><a href="#EN-US_TASK_0000001382327600__fig1274872311373">Figure 1</a> shows an unaffiliated static BFD for RIP scenario where primary and backup paths exist. If the link from DeviceA to DeviceB on the primary path fails, BFD on DeviceA rapidly detects the link fault, and the RIP route on DeviceA rapidly converges to the backup path. Because DeviceB does not support BFD or is not configured with BFD, DeviceB cannot rapidly detect the link fault. As a result, the RIP route on DeviceB cannot converge rapidly. In this case, DeviceB continues to send RIP messages to DeviceA. After DeviceA re-learns the RIP route from DeviceB, traffic is switched from the backup path to the primary path. However, the link from DeviceA to DeviceB is still faulty. As a result, traffic cannot be forwarded.</p>
<div class="fignone" id="EN-US_TASK_0000001382327600__fig1274872311373"><a name="EN-US_TASK_0000001382327600__fig1274872311373"></a><a name="fig1274872311373"></a><span class="figcap"><b>Figure 1 </b>Networking diagram of unaffiliated static BFD for RIP</span><br><span><img class="vsd" src="figure/en-us_image_0000001382168944.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001382327600__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><ul><li>The OPS mechanism allows a single script assistant to cache a maximum of 256 alarms. Therefore, this function does not apply to the scenario where BFD goes down due to a large number of link faults.</li><li>After this function is enabled, you are advised not to perform an active/standby switchover, restart the device, or modify static BFD for RIP configurations when a link is faulty. Otherwise, the command for disabling an interface from receiving and sending RIP packets may fail to be deleted, causing a residual configuration.</li><li>Broadcast network scenarios are not supported.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001382327600__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the OPS view.</span><p><pre class="screen"><a href="cmdqueryname=ops"><b><span class="cmdname">ops</span></b></a></pre>
</p></li><li><span>Create a script assistant.</span><p><pre class="screen"><a href="cmdqueryname=script-assistant+python"><b><span class="cmdname">script-assistant python</span></b></a> <i><span class="varname">ripbfd_down_mtp.py</span></i></pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After this function is enabled, if BFD Down alarm information is received, the script assistant obtains information about the interface corresponding to the faulty link from the alarm information and determines whether to disable the interface from sending and receiving RIP packets based on whether the <strong>rip bfd static</strong> command is configured on the interface.</p>
<ul><li>If the <strong>rip bfd static</strong>, <strong>undo rip output</strong>, and <strong>undo rip input</strong> commands are run on the interface, the interface is disabled from sending and receiving RIP packets.</li><li>If the <strong>rip bfd static</strong> command is not run on the interface, the interface is not affected.</li></ul>
</div></div>
</p></li><li><span>Create a script assistant.</span><p><pre class="screen"><a href="cmdqueryname=script-assistant+python"><b><span class="cmdname">script-assistant python</span></b></a> <i><span class="varname">ripbfd_up_mtp.py</span></i></pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After this function is enabled, if BFD Down alarm clearing information is received, the script assistant obtains information about the interface corresponding to the faulty link from the alarm information and determines whether to allow the interface to send and receive RIP packets based on whether the <strong>rip bfd static</strong> command is configured on the interface.</p>
<ul><li>If the <strong>rip bfd static</strong>, <strong>rip output</strong>, and <strong>rip input</strong> commands are run on the interface, the interface is allowed to send and receive RIP packets.</li><li>If the <strong>rip bfd static</strong> command is not run on the interface, the interface is not affected.</li></ul>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001382327600__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001382327600__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001382327600__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+ops+assistant"><b><span class="cmdname">display ops assistant</span></b></a> <strong><span>current</span></strong> command to check the current status of script assistants.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_rip_cfg_0046.html">Configuring BFD for RIP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_rip_cfg_0049.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_rip_cfg_0051.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>