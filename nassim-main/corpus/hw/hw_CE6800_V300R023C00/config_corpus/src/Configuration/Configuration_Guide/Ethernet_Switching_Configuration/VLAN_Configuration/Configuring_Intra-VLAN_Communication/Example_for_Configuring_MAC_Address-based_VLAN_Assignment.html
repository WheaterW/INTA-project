
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring MAC Address-based VLAN Assignment">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0024.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0026.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="QinQ">
<meta name="featurename" content="VLAN">
<meta name="featurename" content="VLAN Mapping">
<meta name="featurename" content="VLAN Pool">
<meta name="featurename" content="Voice VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130622862">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring MAC Address-based VLAN Assignment</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130622862"></a><a name="EN-US_TASK_0000001130622862"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring MAC Address-based VLAN Assignment</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130622862__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In <a href="#EN-US_TASK_0000001130622862__fig67001658141112">Figure 1</a>, Host1, Host2, and Host3 are added to VLAN 10 based on their MAC addresses. They can communicate with each other and also access the Internet. Hosts with MAC addresses not associated with VLAN 10 cannot access the Internet or communicate with authorized hosts in VLAN 10.</p>
<div class="fignone" id="EN-US_TASK_0000001130622862__fig67001658141112"><a name="EN-US_TASK_0000001130622862__fig67001658141112"></a><a name="fig67001658141112"></a><span class="figcap"><b>Figure 1 </b>Networking diagram of configuring MAC address-based VLAN assignment</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1, interface 2, interface 3, and interface 4 represent <span>100GE</span> <span>1/0/1</span>, <span>100GE</span> <span>1/0/2</span>, <span>100GE</span> <span>1/0/3</span>, and <span>100GE</span> <span>1/0/4</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001130782702.png"></span></div>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <span>CE6885-LL (low latency mode)</span> does not support this example.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130622862__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create VLAN 10 and associate host MAC addresses with the VLAN.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname DeviceA</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>vlan 10</strong>
[<span class="keyword">*</span>DeviceA-vlan10] <strong>mac-vlan mac-address 00e0-fc00-1111</strong>
[<span class="keyword">*</span>DeviceA-vlan10] <strong>mac-vlan mac-address 00e0-fc00-2222</strong>
[<span class="keyword">*</span>DeviceA-vlan10] <strong>mac-vlan mac-address 00e0-fc00-3333</strong>
[<span class="keyword">*</span>DeviceA-vlan10] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
</p></li><li><span>On DeviceA, add all four interfaces to VLAN 10 and enable MAC address-based VLAN assignment on <span>100GE</span> <span>1/0/2</span> to <span>100GE</span> <span>1/0/4</span>.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>portswitch</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port link-type hybrid</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port hybrid tagged vlan 10</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>port link-type hybrid</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>port hybrid untagged vlan 10</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>mac-vlan enable</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/3</span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>port link-type hybrid</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>port hybrid untagged vlan 10</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>mac-vlan enable</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/4</span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/4</span>]<strong> portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/4</span>] <strong>port link-type hybrid</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/4</span>] <strong>port hybrid untagged vlan 10</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/4</span>] <strong>mac-vlan enable</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/4</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001130622862__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Run the <strong>display mac-vlan vlan 10</strong> command to view MAC addresses associated with VLAN 10.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>display mac-vlan vlan 10</strong>
Total MAC VLAN address count: 3
---------------------------------------------------
MAC Address     Mask            VLAN    Priority
---------------------------------------------------
00e0-fc00-1111  ffff-ffff-ffff    10           0
00e0-fc00-2222  ffff-ffff-ffff    10           0
00e0-fc00-3333  ffff-ffff-ffff    10           0</pre>
<p># Authorized hosts Host1, Host2, and Host3 on the network can communicate with each other and access the Internet. Hosts with MAC addresses not associated with VLAN 10 cannot access the Internet or communicate with the authorized hosts.</p>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001130622862__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Configuration Scripts</h4><p>DeviceA</p>
<pre class="screen">#
sysname DeviceA
#
vlan batch 10
#
vlan 10
 mac-vlan mac-address 00e0-fc00-1111
 mac-vlan mac-address 00e0-fc00-2222
 mac-vlan mac-address 00e0-fc00-3333
#
interface <span>100GE</span><span>1/0/1</span>
 port link-type hybrid
 port hybrid tagged vlan 10
#
interface <span>100GE</span><span>1/0/2</span>
 port link-type hybrid
 port hybrid untagged vlan 10
 mac-vlan enable
#
interface <span>100GE</span><span>1/0/3</span>
 port link-type hybrid
 port hybrid untagged vlan 10
 mac-vlan enable
#
interface <span>100GE</span><span>1/0/4</span>
 port link-type hybrid
 port hybrid untagged vlan 10
 mac-vlan enable
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_vlan_cfg_0016.html">Configuring Intra-VLAN Communication
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_vlan_cfg_0024.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_vlan_cfg_0026.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>