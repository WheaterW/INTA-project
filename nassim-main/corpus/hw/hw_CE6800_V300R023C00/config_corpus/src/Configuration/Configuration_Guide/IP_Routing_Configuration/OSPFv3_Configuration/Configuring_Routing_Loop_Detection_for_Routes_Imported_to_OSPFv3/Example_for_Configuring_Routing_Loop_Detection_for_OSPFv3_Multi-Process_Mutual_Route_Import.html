
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Routing Loop Detection for OSPFv3 Multi-Process Mutual Route Import">
<meta name="abstract" content="This section provides an example for configuring routing loop detection for OSPFv3 multi-process mutual route import.">
<meta name="description" content="This section provides an example for configuring routing loop detection for OSPFv3 multi-process mutual route import.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0165.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0162.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001178508042">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Routing Loop Detection for OSPFv3 Multi-Process Mutual Route Import</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001178508042"></a><a name="EN-US_TASK_0000001178508042"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Routing Loop Detection for OSPFv3 Multi-Process Mutual Route Import</h1>
<div class="taskbody"><p>This section provides an example for configuring routing loop detection for OSPFv3 multi-process mutual route import.</p>
<div class="context"><a name="EN-US_TASK_0000001178508042__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the live network, routes of an OSPFv3 process can be imported to another OSPFv3 process for redistribution. In such a scenario, routing policies are usually configured on multiple devices to prevent routing loops. If routing policies are incorrectly configured on the devices that import routes, routing loops may occur. To prevent this problem, configure routing loop detection for the routes imported to OSPFv3.</p>
<p>In <a href="#EN-US_TASK_0000001178508042__fig1261541011544">Figure 1</a>, an IS-IS process is configured on DeviceC, DeviceD, and DeviceE. OSPFv3 process 1 is configured on DeviceB, DeviceC, DeviceE, and DeviceF. OSPFv3 process 2 is configured on DeviceA, DeviceB, and DeviceF. DeviceC is configured to import routes from the IS-IS process to OSPFv3 process 1. DeviceB is configured to import routes from OSPFv3 process 1 to OSPFv3 process 2. DeviceF is configured to import routes from OSPFv3 process 2 to OSPFv3 process 1.</p>
<div class="fignone" id="EN-US_TASK_0000001178508042__fig1261541011544"><a name="EN-US_TASK_0000001178508042__fig1261541011544"></a><a name="fig1261541011544"></a><span class="figcap"><b>Figure 1 </b>Routing loop detection for OSPFv3 multi-process mutual route import</span><div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, and interface3 represent <span>100GE</span><span>1/0/1</span>, <span>100GE</span><span>1/0/2</span>, and <span>100GE</span><span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001229116017.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001178508042__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>To improve security, you are advised to deploy OSPFv3 authentication. For details, see "Configuring OSPFv3 Authentication." OSPFv3 area authentication is used as an example. For details, see "Example for Configuring Basic OSPFv3 Functions."</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001178508042__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure IP addresses for interfaces on each device.</p>
</li><li><p>Enable IS-IS and OSPFv3 and configure basic functions.</p>
</li><li>Configure route import to construct a routing loop.</li><li><p>Check whether a routing loop occurs.</p>
</li><li>Enable routing loop detection to check whether the routing loop is eliminated.</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001178508042__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IP address to each interface.</span><p><p><span class="keyword">Device</span>A is used as an example.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface</strong><strong> <span>100GE</span></strong><strong><span>1/0/1</span></strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 enable</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 address 2001:db8:1::1 64</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 address FE80::A:B</strong><strong> link-local</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A] <strong>interface</strong><strong> <span>100GE</span><span>1/0/2</span></strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/2</span>] <strong>ip</strong><strong>v6 enable</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/2</span>] <strong>ipv6 address 2001:db8:2::2 64</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/2</span>] <strong>ipv6 address FE80::A:F</strong> <strong>link-local</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceA] <strong>commit</strong></span></pre>
<p>The configurations of other devices are similar to those of <span class="keyword">Device</span>A. For configuration details, see <a href="#EN-US_TASK_0000001178508042__section_dc_vrp_isis_cfg_201205">Configuration Scripts</a> in this section.</p>
</p></li><li><span>Enable OSPFv3 and IS-IS, and configure basic OSPFv3 and IS-IS functions to implement intra-area interworking.</span><p><p># Configure an IS-IS process on DeviceC, DeviceD, and DeviceE. <span class="keyword">Device</span>C is used as an example.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>isis 1</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>C-isis-1] <strong>cost-style wide</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>C-isis-1] <strong>network-entity 10.0000.0000.0003.00</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>C-isis-1] <strong>ipv6 enable topology standard</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>C-isis-1] <strong>quit</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>C] <strong>interface</strong><strong> <span>100GE</span><span>1/0/2</span></strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>C-<span>100GE</span><span>1/0/2</span>] <strong>isis ipv6 enable 1</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>C-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>C] <strong>interface</strong><strong> <span>100GE</span><span>1/0/3</span></strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>C-<span>100GE</span><span>1/0/3</span>] <strong>isis ipv6 enable 1</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>C-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceC] <strong>commit</strong></span></pre>
<p># Configure OSPFv3 process 1 on DeviceB, DeviceC, DeviceE, and DeviceF. <span class="keyword">Device</span>B is used as an example.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ospfv3 1 </strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-ospfv3-1] <strong>router-id 10.2.2.1</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-ospfv3-1]<strong> area 0</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-ospfv3-1-area-0.0.0.0] <strong>quit</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-ospfv3-1] <strong>quit</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B] <strong>interface</strong><strong> <span>100GE</span></strong><strong><span>1/0/2</span></strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/2</span>] <strong>ospfv3 1 area 0.0.0.0</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B] <strong>interface</strong><strong> <span>100GE</span><span>1/0/3</span></strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/3</span>] <strong>ospfv3 1 area 0.0.0.0</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceB] <strong>commit</strong></span></pre>
<p># Configure OSPFv3 process 2 on DeviceA, DeviceB, and DeviceF. <span class="keyword">Device</span>A is used as an example.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ospfv3 2 </strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-ospfv3-2] <strong>router-id 10.1.1.2</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-ospfv3-2]<strong> area 0</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-ospfv3-2-area-0.0.0.0] <strong>quit</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-ospfv3-2] <strong>quit</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A] <strong>interface</strong><strong> <span>100GE</span><span>1/0/1</span></strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 2 area 0.0.0.0</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A] <strong>interface</strong><strong> <span>100GE</span></strong><strong><span>1/0/2</span></strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/2</span>] <strong>ospfv3 2 area 0.0.0.0</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceA] <strong>commit</strong></span></pre>
</p></li><li><span>Configure route import.</span><p><p># Configure OSPFv3 process 1 on <span class="keyword">Device</span>C and <span class="keyword">Device</span>E to import IS-IS routes. The configuration on <span class="keyword">Device</span>C is used as an example.</p>
</p><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>ospfv3 1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>C-ospfv3-1] <strong>router-id 10.3.3.1</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>C-ospfv3-1] <strong>import-route isis 1</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>C-ospfv3-1] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceC] <strong>commit</strong></span></pre>
<p># Configure OSPFv3 process 2 on <span class="keyword">Device</span>B to import routes from OSPFv3 process 1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ospfv3 2</strong> 
[<span class="keyword">*</span><span class="keyword">Device</span>B-ospfv3-2] <strong>router-id 10.2.2.2</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-ospfv3-2] <strong>import-route ospfv3 1</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-ospfv3-2] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceB] <strong>commit</strong></span></pre>
<p># Configure OSPFv3 process 1 on <span class="keyword">Device</span>F to import routes from OSPFv3 process 2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>F] <strong>ospfv3 1</strong> 
[<span class="keyword">*</span><span class="keyword">Device</span>F-ospfv3-1] <strong>router-id 10.6.6.1</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>F-ospfv3-1] <strong>import-route ospfv3 2</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>F-ospfv3-1] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceF] <strong>commit</strong></span></pre>
</p></li><li><span>Display the routing table on each device to check whether a routing loop occurs.</span><p><p># Display OSPFv3 neighbor information on <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>display ospfv3 peer</strong></pre>
<pre class="screen">OSPFv3 Process (1)
Total number of peer(s): 2
 Peer(s) in full state: 2
OSPFv3 Area (0.0.0.0)
Neighbor ID      Pri State            Dead Time  Interface          Instance ID
10.6.6.1            1 Full/DR          00:00:31    <span>100GE</span><span>1/0/2</span>              0
10.3.3.1            1 Full/DR          00:00:36    <span>100GE</span><span>1/0/3</span>              0

OSPFv3 Process (2)
Total number of peer(s): 1
 Peer(s) in full state: 1
OSPFv3 Area (0.0.0.0)
Neighbor ID      Pri State            Dead Time  Interface          Instance ID
10.1.1.2            1 Full/Backup      00:00:36    <span>100GE</span><span>1/0/1</span>              0</pre>
<p>The command output shows that OSPFv3 neighbor relationships have been established between devices.</p>
<p># Display the routing table of <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>display ipv6 routing-table 2001:db8:44::44</strong></pre>
<pre class="screen">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route
------------------------------------------------------------------------------
Routing Table : _public_
Summary Count : 2

Destination  : 2001:db8:44::44                         PrefixLength : 64
<strong>NextHop      : FE80::F:B </strong>                           Preference   : 150
Cost         : 1                                       Protocol     : OSPFv3ASE
RelayNextHop : ::                                      TunnelID     : 0x0
<strong>Interface    : <span>100GE</span><span>1/0/2</span></strong>                             Flags        : D

Destination  : 2001:db8:44::44                         PrefixLength : 64
<strong>NextHop      : FE80::C:B </strong>                           Preference   : 150
Cost         : 1                                       Protocol     : OSPFv3ASE
RelayNextHop : ::                                      TunnelID     : 0x0
<strong>Interface    : <span>100GE</span><span>1/0/3</span></strong>                             Flags        : D</pre>
<p>The command output shows that the next hops of the route displayed on <span class="keyword">Device</span>B are <span class="keyword">Device</span>F and <span class="keyword">Device</span>C, and <span class="keyword">Device</span>F and <span class="keyword">Device</span>C work in load balancing mode.</p>
<p># Display the routing table of <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display ipv6 routing-table 2001:db8:44::44</strong></pre>
<pre class="screen">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route
------------------------------------------------------------------------------
Routing Table : _public_
Summary Count : 1

Destination  : 2001:db8:44::44                         PrefixLength : 64
<strong>NextHop      : FE80::B:A</strong>                            Preference   : 150
Cost         : 1                                       Protocol     : OSPFv3ASE
RelayNextHop : ::                                      TunnelID     : 0x0
<strong>Interface    : <span>100GE</span><span>1/0/1</span>    </strong>                        Flags        : D</pre>
<p>The command output shows that the next hop of the route displayed on <span class="keyword">Device</span>A is <span class="keyword">Device</span>B.</p>
<p># Display the routing table of <span class="keyword">Device</span>F.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>F] <strong>display ipv6 routing-table 2001:db8:44::44</strong></pre>
<pre class="screen">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route
------------------------------------------------------------------------------
Routing Table : _public_
Summary Count : 2

Destination  : 2001:db8:44::44                         PrefixLength : 64
<strong>NextHop      : FE80::E:F  </strong>                          Preference   : 150
Cost         : 1                                       Protocol     : OSPFv3ASE
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : <span>100GE</span><span>1/0/3</span>                               Flags        : D

Destination  : 2001:db8:44::44                         PrefixLength : 64
<strong>NextHop      : FE80::A:F  </strong>                          Preference   : 150
Cost         : 1                                       Protocol     : OSPFv3ASE
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    :<strong> <span>100GE</span><span>1/0/1</span> </strong>                          Flags        : D</pre>
<p>The command output shows that the next hops of the route displayed on <span class="keyword">Device</span>F are <span class="keyword">Device</span>A and <span class="keyword">Device</span>E, and <span class="keyword">Device</span>A and <span class="keyword">Device</span>E work in load balancing mode.</p>
</p><p><p>In this case, a routing loop is formed on <span class="keyword">Device</span>B, <span class="keyword">Device</span>A, and <span class="keyword">Device</span>F.</p>
</p></li><li><span>Enable routing loop detection on each device.</span><p><p># Enable routing loop detection for routes imported to OSPFv3. <span class="keyword">Device</span>A is used as an example.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>route loop-detect ospfv3 enable</strong>
<span>[<span class="keyword">*</span>DeviceA] <strong>commit</strong></span></pre>
</p></li><li><span>Check whether the routing loop is eliminated.</span><p><p># Display the routing table of <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>display ipv6 routing-table 2001:db8:44::44</strong></pre>
<pre class="screen">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route
------------------------------------------------------------------------------
Routing Table : _public_
Summary Count : 1

Destination  : 2001:db8:44::44                         PrefixLength : 64
<strong>NextHop      : FE80::C:B</strong>                            Preference   : 150
Cost         : 1                                       Protocol     : OSPFv3ASE
RelayNextHop : ::                                      TunnelID     : 0x0
<strong>Interface    : <span>100GE</span><span>1/0/3</span></strong>                           Flags        : D</pre>
<p>The command output shows that the next hop of the route displayed on <span class="keyword">Device</span>B is <span class="keyword">Device</span>C.</p>
<p># Display the routing table of <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display ipv6 routing-table 2001:db8:44::44</strong></pre>
<pre class="screen">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route
------------------------------------------------------------------------------
Routing Table : _public_
Summary Count : 1

Destination  : 2001:db8:44::44                         PrefixLength : 64
<strong>NextHop      : FE80::B:A</strong>                            Preference   : 150
Cost         : 1                                       Protocol     : OSPFv3ASE
RelayNextHop : ::                                      TunnelID     : 0x0
<strong>Interface    : <span>100GE</span><span>1/0/1</span>    </strong>                        Flags        : D</pre>
<p>The command output shows that the next hop of the route displayed on <span class="keyword">Device</span>A is <span class="keyword">Device</span>B.</p>
<p># Display the routing table of <span class="keyword">Device</span>F.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>F] <strong>display ipv6 routing-table 2001:db8:44::44</strong></pre>
<pre class="screen">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route
------------------------------------------------------------------------------
Routing Table : _public_
Summary Count : 1

Destination  : 2001:db8:44::44                         PrefixLength : 64
<strong>NextHop      : FE80::E:F  </strong>                          Preference   : 150
Cost         : 1                                       Protocol     : OSPFv3ASE
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : <span>100GE</span><span>1/0/3</span>                           Flags        : D</pre>
<p>The command output shows that the next hop of the route displayed on <span class="keyword">Device</span>F is <span class="keyword">Device</span>E. The routing loop on <span class="keyword">Device</span>B, <span class="keyword">Device</span>A, and <span class="keyword">Device</span>F has been removed.</p>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001178508042__section_dc_vrp_isis_cfg_201205"><a name="EN-US_TASK_0000001178508042__section_dc_vrp_isis_cfg_201205"></a><a name="section_dc_vrp_isis_cfg_201205"></a><a name="EN-US_TASK_0000001178508042__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p><span class="keyword">Device</span>A</p>
<pre class="screen">#
sysname DeviceA
#
ospfv3 2
 router-id 10.1.1.2
 area 0.0.0.0
#
route loop-detect ospfv3 enable
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:1::1/64
 ipv6 address FE80::A:B link-local
 ospfv3 2 area 0.0.0.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:2::2/64
 ipv6 address FE80::A:F link-local
 ospfv3 2 area 0.0.0.0
#
return</pre>
</li><li><p><span class="keyword">Device</span>B</p>
<pre class="screen">#
sysname DeviceB
#
ospfv3 1
 router-id 10.2.2.1
 area 0.0.0.0
#
ospfv3 2
 router-id 10.2.2.2
 import-route ospfv3 1
 area 0.0.0.0
#
route loop-detect ospfv3 enable
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:1::2/64
 ipv6 address FE80::B:A link-local
 ospfv3 2 area 0.0.0.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:5::2/64
 ipv6 address FE80::B:F link-local
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:3::2/64
 ipv6 address FE80::B:C link-local
 ospfv3 1 area 0.0.0.0
#
return</pre>
</li><li><p><span class="keyword">Device</span>C</p>
<pre class="screen">#
sysname DeviceC
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0003.00
 #
 ipv6 enable topology standard
 #
#
ospfv3 1
 router-id 10.3.3.1
 import-route isis 1
 area 0.0.0.0
#
route loop-detect ospfv3 enable
#
interface <span>100GE</span><span>1/0/1</span>         
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:3::1/64
 ipv6 address FE80::C:B link-local
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span>1/0/2</span>          
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:7::2/64
 ospfv3 1 area 0.0.0.0
 isis ipv6 enable 1
#
interface <span>100GE</span><span>1/0/3</span>           
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:6::2/64 
 isis ipv6 enable 1
#
return</pre>
</li><li><p><span class="keyword">Device</span>D</p>
<pre class="screen">#
sysname DeviceD
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0004.00
 #
 ipv6 enable topology standard
 #
#
route loop-detect ospfv3 enable
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:6::1/64
 isis ipv6 enable 1
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:9::2/64
 isis ipv6 enable 1
#
interface LoopBack0
 ipv6 enable
 ipv6 address 2001:db8:44::44/128
 isis ipv6 enable 1
#
return</pre>
</li><li><p><span class="keyword">Device</span>E</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>E
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0005.00
 #
 ipv6 enable topology standard
 #
#
ospfv3 1
 router-id 10.5.5.1
 import-route isis 1
 area 0.0.0.0
#
route loop-detect ospfv3 enable
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:4::1/64
 ipv6 address FE80::E:F link-local
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:7::1/64
 ospfv3 1 area 0.0.0.0
 isis ipv6 enable 1
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:9::1/64
 isis ipv6 enable 1
#
return</pre>
</li><li><p><span class="keyword">Device</span>F</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>F
#
ospfv3 1
 router-id 10.6.6.1
 import-route ospfv3 2
 area 0.0.0.0
#
ospfv3 2
 router-id 10.6.6.2
 area 0.0.0.0
#
route loop-detect ospfv3 enable
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:2::1/64
 ipv6 address FE80::F:A link-local
 ospfv3 2 area 0.0.0.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:5::1/64
 ipv6 address FE80::F:B link-local
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:4::2/64
 ospfv3 1 area 0.0.0.0
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospfv3_cfg_0165.html">Configuring Routing Loop Detection for Routes Imported to OSPFv3
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospfv3_cfg_0162.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>