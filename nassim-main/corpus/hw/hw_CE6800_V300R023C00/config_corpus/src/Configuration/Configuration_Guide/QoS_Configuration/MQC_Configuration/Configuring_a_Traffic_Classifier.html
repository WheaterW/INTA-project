
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Traffic Classifier">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_mqc_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="spec/MQC_limitation_CE_v6r23c00.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_mqc_cfg_0006.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MQC">
<meta name="featuretype" content="QoS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MQC">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513167026">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring a Traffic Classifier</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001513167026"></a><a name="EN-US_TASK_0000001513167026"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Traffic Classifier</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001513167026__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><div class="p">Before configuring a traffic classifier, complete the following task:<ul><li><p>Configure an ACL if it is required to classify packets.</p>
</li></ul>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001513167026__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Multiple rules can be configured in a traffic classifier as long as they do not conflict with each other. You can configure rules based on your requirements.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>A traffic classifier in which matching rules are ANDed cannot define duplicate matching rules. For example, a traffic classifier cannot define both <strong>if-match source-mac</strong> and an ACL rule that matches the same source MAC address.</li></ul>
<ul><li>To match multiple fields of packets of the same type (such as Layer 2/IPv6/IPv4 packets) in a view, apply one traffic policy in the view, and specify multiple traffic classifiers and associated traffic behaviors in the traffic policy. If both IPv4 and IPv6 packets need to be matched, create one traffic policy for each type of packet.</li></ul>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001513167026__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Create a traffic classifier and enter the traffic classifier view, or enter the view of an existing traffic classifier.</span><p><pre class="screen"><a href="cmdqueryname=traffic+classifier"><b><span class="cmdname">traffic classifier</span></b></a> <i><span class="varname">classifier-name</span></i> [ <strong><span>type</span></strong> { <strong><span>and</span></strong> | <strong><span>or</span></strong> } ]</pre>
<div class="p"><strong><span>and</span></strong> is the logical operator between the rules in a traffic classifier, which means that:<ul><li><p>If the traffic classifier contains ACL rules, packets must match one ACL rule and all the non-ACL rules in order to match the traffic classifier.</p>
</li><li><p>If the traffic classifier does not contain any ACL rules, packets must match all rules in order to match the traffic classifier.</p>
</li></ul>
The logical operator <strong><span>or</span></strong> means that packets match a traffic classifier if they match one or more rules in the traffic classifier.</div>
<p>By default, the relationship between rules in a traffic classifier is <strong><span>OR</span></strong>.</p>
<p>The device supports a maximum of 2048 traffic classifiers.</p>
</p></li><li><span>Configure matching rules according to the following table.</span><p><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For details about precautions for each matching rule, see the corresponding commands in the <em>Command Reference</em>.</p>
<p>A maximum of 2048 <strong>if-match</strong> commands can be configured in a traffic classifier.</p>
</div></div>
<ul><li>Link-layer rule (Layer 2 rule)
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="29.520000000000003%" id="mcps1.3.3.3.2.2.1.1.1.3.1.1" liSelected="liSelected"><p>Matching Rule</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="70.48%" id="mcps1.3.3.3.2.2.1.1.1.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.1 "><p>Destination MAC address</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+destination-mac"><b><span class="cmdname">if-match destination-mac</span></b></a> <i><span class="varname">mac-address</span></i> [ <i><span class="varname">mac-address-mask</span></i> ]</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.1 "><p>Source MAC address</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+source-mac"><b><span class="cmdname">if-match source-mac</span></b></a> <i><span class="varname">mac-address</span></i> [ <i><span class="varname">mac-address-mask</span></i> ]</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.1 "><p>Protocol type in the Ethernet frame header</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+l2-protocol"><b><span class="cmdname">if-match l2-protocol</span></b></a> { <strong><span>arp</span></strong> | <strong><span>ip</span></strong> | <strong><span>rarp</span></strong> | <i><span class="varname">protocol-value</span></i> }</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.1 "><p>VLAN ID in the outer tag of VLAN packets or VLAN ID in the inner and outer tags of QinQ packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+vlan"><b><span class="cmdname">if-match vlan</span></b></a> <i><span class="varname">start-vlan-value</span></i> [ <strong><span>inner-vlan</span></strong> <i><span class="varname">start-inner-vlan-value</span></i> [ <strong><span>to</span></strong> <i><span class="varname">end-inner-vlan-value</span></i> ] ]</p>
<p><a href="cmdqueryname=if-match+vlan"><b><span class="cmdname">if-match vlan</span></b></a> <i><span class="varname">start-vlan-value</span></i> [ <strong><span>to</span></strong> <i><span class="varname">end-vlan-value</span></i> ] [ <strong><span>inner-vlan</span></strong> <i><span class="varname">start-inner-vlan-value</span></i> ]</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.1 "><p>802.1p value in the outer tag of VLAN packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+8021p"><b><span class="cmdname">if-match 8021p</span></b></a> <i><span class="varname">8021p-value</span></i> &amp;&lt;1-8&gt;</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.1 "><p>Inner VLAN ID in QinQ packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.2 "><p><a href="cmdqueryname=if-match"><b><span class="cmdname">if-match</span></b></a> <strong>inner-vlan</strong> <em>start-inner-vlan-value</em> [ <strong>to</strong> <em>end-inner-vlan-value</em> ]</p>
<p>The <span>CE6885-LL (low latency mode)</span> does not support this command.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.1 "><p>802.1p value in the inner tag of QinQ packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+inner-8021p"><b><span class="cmdname">if-match inner-8021p</span></b></a> <i><span class="varname">inner-8021p-value</span></i> &amp;&lt;1-8&gt;</p>
<p>The <span>CE6885-LL (low latency mode)</span> does not support this command.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.1 "><p>Inner and outer VLAN IDs in QinQ packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.1.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+double-tag"><b><span class="cmdname">if-match double-tag</span></b></a></p>
<p>The <span>CE6885-LL (low latency mode)</span> does not support this command.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>Network-layer rule (Layer 3 rule)
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="29.520000000000003%" id="mcps1.3.3.3.2.2.2.1.1.3.1.1" liSelected="liSelected"><p>Matching Rule</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="70.48%" id="mcps1.3.3.3.2.2.2.1.1.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.2.1.1.3.1.1 "><p>DSCP value in IP packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.2.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+dscp"><b><span class="cmdname">if-match dscp</span></b></a> <i><span class="varname">dscp-value</span></i> &amp;&lt;1-8&gt;</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.2.1.1.3.1.1 "><p>DSCP value in IPv6 packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.2.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+ipv6+dscp"><b><span class="cmdname">if-match ipv6 dscp</span></b></a> <i><span class="varname">dscp-value</span></i> &amp;&lt;1-8&gt;</p>
<p>The <span>CE6885-LL (low latency mode)</span> does not support this command.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.2.1.1.3.1.1 "><p>IP precedence in IP packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.2.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+ip-precedence"><b><span class="cmdname">if-match ip-precedence</span></b></a> <i><span class="varname">ip-precedence</span></i> &amp;&lt;1-8&gt;</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.2.1.1.3.1.1 "><p>IP identifier in IP packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.2.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+ip-identification"><b><span class="cmdname">if-match ip-identification</span></b></a> <i><span class="varname">ip-id</span></i> [ <strong><span>mask</span></strong> <i><span class="varname">ip-id-mask</span></i> ]</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.2.1.1.3.1.1 "><p>ECN marking in IP packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.2.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+ecn"><b><span class="cmdname">if-match ecn</span></b></a><i><span class="varname"> ecn-value</span></i></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.2.1.1.3.1.1 "><p>ECN marking in IPv6 packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.2.1.1.3.1.2 "><p><a href="cmdqueryname=if-match"><b><span class="cmdname">if-match</span></b></a> <strong><span>ipv6</span></strong> <strong><span>ecn</span></strong> <i><span class="varname">ecn-value</span></i></p>
<p>The <span>CE6885-LL (low latency mode)</span> does not support this command.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>Transport-layer rule (Layer 4 rule)
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="29.520000000000003%" id="mcps1.3.3.3.2.2.3.1.1.3.1.1" liSelected="liSelected"><p>Matching Rule</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="70.48%" id="mcps1.3.3.3.2.2.3.1.1.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.3.1.1.3.1.1 "><p>TCP flag in the TCP packet header</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.3.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+tcp-flag"><b><span class="cmdname">if-match tcp-flag</span></b></a> { <i><span class="varname">tcp-flag-value</span></i> | { <strong><span>ack</span></strong> | <strong><span>fin</span></strong> | <strong><span>psh</span></strong> | <strong><span>rst</span></strong> | <strong><span>syn</span></strong> | <strong><span>urg</span></strong> } <sup>*</sup> }</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>ACL rule
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="29.520000000000003%" id="mcps1.3.3.3.2.2.4.1.1.3.1.1" liSelected="liSelected"><p>Matching Rule</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="70.48%" id="mcps1.3.3.3.2.2.4.1.1.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.4.1.1.3.1.1 "><p>ACL rule</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.4.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+acl"><b><span class="cmdname">if-match acl</span></b></a> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> }</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.4.1.1.3.1.1 "><p>ACL6 rule</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.4.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+ipv6+acl"><b><span class="cmdname">if-match ipv6 acl</span></b></a> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl6-name</span></i> }<span></span> [ <strong>loose-mode</strong> | <strong>strict-mode</strong> ]</p>
<p>The <span>CE6885-LL (low latency mode)</span> does not support this command.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>Forwarding rule
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="29.520000000000003%" id="mcps1.3.3.3.2.2.5.1.1.3.1.1" liSelected="liSelected"><p>Matching Rule</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="70.48%" id="mcps1.3.3.3.2.2.5.1.1.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.5.1.1.3.1.1 "><p>Dropped packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.5.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+discard"><b><span class="cmdname">if-match discard</span></b></a></p>
<p>The <span>CE6885-LL (low latency mode)</span> does not support this command.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.5.1.1.3.1.1 "><p>All packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.5.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+any"><b><span class="cmdname">if-match any</span></b></a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.5.1.1.3.1.1 "><p>Inbound interface</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.5.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+inbound-interface"><b><span class="cmdname">if-match inbound-interface</span></b></a> { { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number1</span></i> | <i><span class="varname">interface-name1</span></i> } [ <strong><span>to</span></strong> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number2</span></i> | <i><span class="varname">interface-name2 </span></i>} ] } &amp;&lt;1-8&gt;</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.5.1.1.3.1.1 "><p>Interface</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.5.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+outbound-interface"><b><span class="cmdname">if-match outbound-interface</span></b></a> { { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number1</span></i> | <i><span class="varname">interface-name1</span></i> } [ <strong><span>to</span></strong> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number2</span></i> | <i><span class="varname">interface-name2 </span></i>} ] } &amp;&lt;1-8&gt;</p>
<p>The <span>CE6885-LL (low latency mode)</span> does not support this command.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.5.1.1.3.1.1 "><p>Known unicast packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.5.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+unicast"><b><span class="cmdname">if-match unicast</span></b></a></p>
<p>The <span>CE6885-LL (low latency mode)</span> does not support this command.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.5.1.1.3.1.1 "><p>Unknown unicast packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.5.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+unknown-unicast"><b><span class="cmdname">if-match unknown-unicast</span></b></a></p>
<p>The <span>CE6885-LL (low latency mode)</span> does not support this command.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>VXLAN packet rule
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="29.520000000000003%" id="mcps1.3.3.3.2.2.6.1.1.3.1.1" liSelected="liSelected"><p>Matching Rule</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="70.48%" id="mcps1.3.3.3.2.2.6.1.1.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.6.1.1.3.1.1 "><p>Inner information in VXLAN packets to be matched against ACL rules</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.6.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+vxlan"><b><span class="cmdname">if-match vxlan</span></b></a> [ <strong><span>transit</span></strong> ] <strong>acl</strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> }</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.6.1.1.3.1.1 "><p>Inner information in VXLAN packets to be matched against ACL6 rules</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.6.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+vxlan"><b><span class="cmdname">if-match vxlan</span></b></a> [ <strong><span>transit</span></strong> ] <strong>ipv6</strong> <strong>acl</strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } [ <strong>loose-mode</strong> | <strong>strict-mode</strong> ]</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.6.1.1.3.1.1 "><p>Inner information in VXLAN packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.6.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+vxlan"><b><span class="cmdname">if-match vxlan</span></b></a> [ <strong><span>transit</span></strong> ] <strong><span>vni</span></strong> <i><span class="varname">vni-id</span></i></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.520000000000003%" headers="mcps1.3.3.3.2.2.6.1.1.3.1.1 "><p>Reserved field in VXLAN packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.48%" headers="mcps1.3.3.3.2.2.6.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+vxlan+%5B+transit+%5D+reserved-value"><b><span class="cmdname">if-match vxlan [ transit ] reserved-value</span></b></a> <i><span class="varname">reserved-value</span></i></p>
</td>
</tr>
</tbody>
</table>
</div>
<p>The commands for configuring VXLAN packet matching rules are not supported by the <span>CE6885-LL (low latency mode)</span>.</p>
<p>When the commands for configuring VXLAN packet matching rules are run on the CE6820H, CE6820H-K, and CE6820S, the <strong><span>transit</span></strong> parameter must be specified, indicating that VXLAN packets of a transmission device are matched.</p>
</li><li>Other rules
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="29.57%" id="mcps1.3.3.3.2.2.7.1.1.3.1.1" liSelected="liSelected"><p>Matching Rule</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="70.43%" id="mcps1.3.3.3.2.2.7.1.1.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="29.57%" headers="mcps1.3.3.3.2.2.7.1.1.3.1.1 "><p>RoCEv2 packet information</p>
</td>
<td class="cellrowborder" valign="top" width="70.43%" headers="mcps1.3.3.3.2.2.7.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+rocev2"><b><span class="cmdname">if-match rocev2</span></b></a> { <strong><span>opcode</span></strong> <i><span class="varname">opcode-value</span></i> | <strong><span>qpair</span></strong> <i><span class="varname">qpair-value</span></i> | <strong><span>nack</span></strong> <i><span class="varname">nack-value</span></i> | <strong><span>udf base</span></strong> <strong><span>l4-head</span></strong> { <i><span class="varname">udf-data</span></i> <i><span class="varname">udf-mask</span></i> <strong><span>offset</span></strong> <i><span class="varname">offset-value</span></i> } &amp;&lt;1-4&gt; } *</p>
<p><a href="cmdqueryname=if-match+ipv6++rocev2"><b><span class="cmdname">if-match ipv6  rocev2</span></b></a> { <strong><span>opcode</span></strong> <i><span class="varname">opcode-value</span></i> | <strong><span>qpair</span></strong> <i><span class="varname">qpair-value</span></i> | <strong><span>nack</span></strong> <i><span class="varname">nack-value</span></i> | <strong><span>udf base</span></strong> <strong><span>l4-head</span></strong> { <i><span class="varname">udf-data</span></i> <i><span class="varname">udf-mask</span></i> <strong><span>offset</span></strong> <i><span class="varname">offset-value</span></i> } &amp;&lt;1-4&gt; } *</p>
<p>This function is supported only on the <span>CE6866, CE6860-SAN, CE6866K, CE6860-HAM, CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, CE8850-HAM</span>, <span>CE8855, CE8851-32CQ4BQ, CE6855-48XS8CQ, CE6885, CE6885-SAN, CE6885-LL, CE6885-T, CE6863E-48S8CQ</span>.</p>
<p>The <span>CE6885-LL (low latency mode)</span> does not support the <a href="cmdqueryname=if-match+ipv6+rocev2"><b><span class="cmdname">if-match ipv6 rocev2</span></b></a> command.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.57%" headers="mcps1.3.3.3.2.2.7.1.1.3.1.1 "><p>Inner information in GRE packets</p>
</td>
<td class="cellrowborder" valign="top" width="70.43%" headers="mcps1.3.3.3.2.2.7.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+gre"><b><span class="cmdname">if-match gre</span></b></a> [ <strong><span>inner-source-ip</span></strong> <i><span class="varname">source-ip-address</span></i> [ <strong><span>mask</span></strong> <i><span class="varname">source-masklen</span></i> ] | <strong><span>inner-destination-ip</span></strong> <i><span class="varname">dest-ip-address</span></i> [ <strong><span>mask</span></strong> <i><span class="varname">dest-masklen</span></i> ] | <strong><span>inner-protocol</span></strong> <i><span class="varname">protocol</span></i> | <strong><span>inner-source-port</span></strong> <i><span class="varname">source-port-begin</span></i> | <strong><span>inner-destination-port</span></strong> <i><span class="varname">dest-port-begin</span></i> ] <sup>*</sup></p>
<p>The <span>CE6885-LL (low latency mode)</span> does not support this command.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.57%" headers="mcps1.3.3.3.2.2.7.1.1.3.1.1 "><p>Next-hop address and outbound interface</p>
</td>
<td class="cellrowborder" valign="top" width="70.43%" headers="mcps1.3.3.3.2.2.7.1.1.3.1.2 "><p><a href="cmdqueryname=if-match"><b><span class="cmdname">if-match</span></b></a> { <strong><span>nexthop</span></strong> <i><span class="varname">ip-address</span></i> | <strong><span>ipv6 nexthop</span></strong> <i><span class="varname">ipv6-address</span></i> } <strong><span>interface</span></strong> <i><span class="varname">interface-type interface-number</span></i></p>
<p>This command is not supported by the <span>CE6885-LL (low latency mode)</span>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="29.57%" headers="mcps1.3.3.3.2.2.7.1.1.3.1.1 "><p>QoS local ID</p>
</td>
<td class="cellrowborder" valign="top" width="70.43%" headers="mcps1.3.3.3.2.2.7.1.1.3.1.2 "><p><a href="cmdqueryname=if-match+qos-local-id"><b><span class="cmdname">if-match qos-local-id</span></b></a> <i><span class="varname">qos-local-id</span></i></p>
<p>This command is not supported by the <span>CE6885-LL (low latency mode)</span></p>
</td>
</tr>
</tbody>
</table>
</div>
</li></ul>
</p></li><li><span>Exit the traffic classifier view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>(Optional) Enable the device to provide nonstop services upon modification of MQC-based traffic classification rules.</span><p><pre class="screen"><a href="cmdqueryname=traffic-policy+atomic-update-mode"><b><span class="cmdname">traffic-policy atomic-update-mode</span></b></a></pre>
<p>If a traffic classification rule is modified after this command is run, the system delivers the new rule and then deletes the old rule to ensure that traffic is not interrupted.</p>
<p>With this function enabled, if a traffic policy that has been successfully applied fails to be applied again due to its configuration change, the original traffic policy still takes effect.</p>
<p>By default, this function is disabled.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001513167026__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513167026__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_mqc_cfg_0001.html">MQC Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="spec/MQC_limitation_CE_v6r23c00.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_mqc_cfg_0006.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>