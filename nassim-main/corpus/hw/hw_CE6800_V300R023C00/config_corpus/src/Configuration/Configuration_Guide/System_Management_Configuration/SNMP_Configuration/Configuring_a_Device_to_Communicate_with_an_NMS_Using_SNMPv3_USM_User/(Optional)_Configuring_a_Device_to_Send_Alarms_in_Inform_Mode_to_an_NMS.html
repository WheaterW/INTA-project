
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring a Device to Send Alarms in Inform Mode to an NMS">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0031.html">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0021_2.html">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0036.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563990633">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring a Device to Send Alarms in Inform Mode to an NMS</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563990633"></a><a name="EN-US_TASK_0000001563990633"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring a Device to Send Alarms in Inform Mode to an NMS</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563990633__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A device on which the SNMP agent function is enabled can generate two types of alarms: traps and informs. Traps are messages that notify the NMS of a condition on the network, and informs are alarms that require a reply from the NMS and are resent until a reply is received. Informs are more reliable than traps.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563990633__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable the device to send traps to the NMS.</span><p><pre class="screen"><a href="cmdqueryname=snmp-agent+trap+enable"><b><span class="cmdname">snmp-agent trap enable</span></b></a></pre>
</p></li><li><span>Enable the function of sending a specified trap of a feature to the NMS.</span><p><pre class="screen"><a href="cmdqueryname=snmp-agent+trap+enable+feature-name"><b><span class="cmdname">snmp-agent trap enable feature-name</span></b></a> <i><span class="varname">feature-name</span></i> <strong><span>trap-name</span></strong> <i><span class="varname">trap-name</span></i></pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">If the <a href="cmdqueryname=snmp-agent+trap+enable"><b><span class="cmdname">snmp-agent trap enable</span></b></a> command has been run to enable the trap functions of all modules, or the <a href="cmdqueryname=snmp-agent+trap+enable+feature-name"><b><span class="cmdname">snmp-agent trap enable feature-name</span></b></a> command has been run to enable three or more trap functions of a module, note the following points:<ul><li><p>To disable the trap functions of all modules, run the <a href="cmdqueryname=snmp-agent+trap+disable"><b><span class="cmdname">snmp-agent trap disable</span></b></a> command.</p>
</li><li><p>To restore the trap functions of all modules to the default status, run the <a href="cmdqueryname=undo+snmp-agent+trap+enable"><b><span class="cmdname">undo snmp-agent trap enable</span></b></a> or <a href="cmdqueryname=undo+snmp-agent+trap+disable"><b><span class="cmdname">undo snmp-agent trap disable</span></b></a> command.</p>
</li><li><p>To disable the trap function for a specified module, run the <a href="cmdqueryname=undo+snmp-agent+trap+enable+feature-name"><b><span class="cmdname">undo snmp-agent trap enable feature-name</span></b></a> command.</p>
</li></ul>
</div>
</div></div>
</p></li><li><span>(Optional) Set the timeout period for waiting to receive Inform ACK messages, the number of times to resend Inform messages, and the maximum number of pending Inform messages (Inform messages that need to be acknowledged).</span><p><pre class="screen"><a href="cmdqueryname=snmp-agent+inform"><b><span class="cmdname">snmp-agent inform</span></b></a> { <strong><span>timeout</span></strong> <i><span class="varname">seconds</span></i> | <strong><span>resend-times</span></strong> <i><span class="varname">times</span></i> | <strong><span>pending</span></strong> <i><span class="varname">number</span></i> } *</pre>
<p>By default, the timeout period for waiting to receive an Inform ACK message is 15 seconds, the number of times to resend Inform messages is 3, and the maximum number of pending Inform messages is 39.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>On a network that is unstable, you are advised to increase these values from the default.</p>
</div></div>
</p></li><li><span>Set the timeout period for waiting to receive Inform ACK messages and the number of times to resend Inform messages.</span><p><pre class="screen"><a href="cmdqueryname=snmp-agent+inform"><b><span class="cmdname">snmp-agent inform</span></b></a> { <strong><span>timeout</span></strong> <i><span class="varname">seconds</span></i> | <strong><span>resend-times</span></strong> <i><span class="varname">times</span></i> } <sup>*</sup> { <strong><span>host-name</span></strong> <i><span class="varname">target-host-name</span></i> | { <strong><span>address</span></strong> <strong><span>udp-domain</span></strong> <i><span class="varname">ip-address</span></i> | <strong><span>ipv6 address udp-domain</span></strong><em> </em><i><span class="varname">ipv6-address</span></i> } [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <strong><span>params</span></strong> <strong><span>securityname</span></strong> { <i><span class="varname">security-name</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">security-name-cipher</span></i> } }</pre>
</p></li><li><span>Enable the alarm logging function.</span><p><pre class="screen"><a href="cmdqueryname=snmp-agent+notification-log"><b><span class="cmdname">snmp-agent notification-log</span></b></a> <strong><span>enable</span></strong></pre>
</p><p><p>If the link between the managed device and the NMS is faulty, the route is unreachable. In this case, the managed device no longer sends Inform alarms but continues to record alarm logs. After the link recovers, the NMS obtains alarm logs generated during the fault period from the managed device.</p>
<p>The alarm logging function logs only informs. <span>By default, the alarm logging function is disabled.</span></p>
</p></li><li><span>Set the aging time of alarm logs and maximum number of alarm logs allowed to be stored in the log buffer.</span><p><pre class="screen"><a href="cmdqueryname=snmp-agent+notification-log"><b><span class="cmdname">snmp-agent notification-log</span></b></a> { <strong><span>global-ageout</span></strong><strong> </strong><i><span class="varname">ageout</span></i> [ <strong><span>minute</span></strong><em> </em><i><span class="varname">minute</span></i> ] | <strong><span>global-limit</span></strong><em> </em><i><span class="varname">limit</span></i> } <sup>*</sup></pre>
</p><p><p><span>By default, the aging time of alarm logs is 24 hours. </span>Alarm logs are automatically deleted after 24 hours.</p>
<p><span>By default, a maximum of 500 alarm logs can be stored in the log buffer. </span>If the number of alarm logs exceeds the limit, the earliest alarm log is deleted.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_snmp_cfg_0031.html">Configuring a Device to Communicate with an NMS Using SNMPv3 USM User
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_snmp_cfg_0021_2.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_snmp_cfg_0036.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>