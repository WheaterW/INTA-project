
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Synchronous Ethernet on a Ring Network">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_synce_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_synce_cfg_0024.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Synchronous Ethernet">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Synchronous Ethernet">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513039850">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Synchronous Ethernet on a Ring Network</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001513039850"></a><a name="EN-US_TASK_0000001513039850"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Synchronous Ethernet on a Ring Network</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001513039850__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In <a href="#EN-US_TASK_0000001513039850__fig1495210207529">Figure 1</a>, network devices are connected over a ring clock synchronization network. To ensure reliability of the clock synchronization network, DeviceA and DeviceC are each connected to an external clock source to import clock signals. During network deployment, all devices preferentially synchronize with the line clock signals transmitted from DeviceA. If the external clock source connected to DeviceA becomes faulty, the entire network switches to synchronize with the line clock signals transmitted from DeviceC.</p>
<p>To enable the devices to synchronize with the highest-quality clock signals, enable clock source selection based on SSM quality levels on each device.</p>
<div class="fignone" id="EN-US_TASK_0000001513039850__fig1495210207529"><a name="EN-US_TASK_0000001513039850__fig1495210207529"></a><a name="fig1495210207529"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring SyncE</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this figure, interface1, interface2, and interface3 represent <span>100GE</span><span>1/0/1</span>, <span>100GE</span><span>1/0/2</span>, and <span>100GE</span><span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001513039906.png"></span></div>
<h4 class="sectiontitle">Configuration Roadmap</h4><ol><li>Configure a clock source.</li><li><p>Configure the automatic clock source selection mode, and enable clock source selection based on SSM quality levels.</p>
</li></ol>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001513039850__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure a clock source.</span><p><div class="p"># Configure DeviceA.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname DeviceA</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> interface 100GE <span>1/0/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> clock priority 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> interface 100GE <span>1/0/2</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/2</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/2</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> interface 100GE <span>1/0/3</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/3</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/3</span>]<strong> clock ssm ssua</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>]<strong> clock priority 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/3</span>]<strong> quit</strong></pre>
</div>
<div class="p"># Configure DeviceB. The configuration of DeviceD is similar to the configuration of DeviceB. For detailed configurations, see Configuration Scripts.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname DeviceB</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB]<strong> interface 100GE <span>1/0/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/1</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>]<strong> clock priority 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB]<strong> interface 100GE <span>1/0/2</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/2</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>]<strong> clock priority 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/2</span>]<strong> quit</strong></pre>
</div>
<div class="p"># Configure DeviceC.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname DeviceC</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC]<strong> interface 100GE <span>1/0/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-<span>100GE</span><span>1/0/1</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-<span>100GE</span><span>1/0/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC]<strong> interface 100GE <span>1/0/2</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-<span>100GE</span><span>1/0/2</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-<span>100GE</span><span>1/0/2</span>]<strong> clock priority 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-<span>100GE</span><span>1/0/2</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-<span>100GE</span><span>1/0/2</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC]<strong> interface 100GE <span>1/0/3</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-<span>100GE</span><span>1/0/3</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-<span>100GE</span><span>1/0/3</span>]<strong> clock ssm ssub</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-<span>100GE</span><span>1/0/3</span>]<strong> clock priority 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-<span>100GE</span><span>1/0/3</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-<span>100GE</span><span>1/0/3</span>]<strong> quit</strong></pre>
</div>
</p></li><li><span>Configure the automatic clock source selection mode, and enable clock source selection based on SSM quality levels.</span><p><p># Configure DeviceA. The configurations of other devices are similar to the configuration of DeviceA. For detailed configurations, see Configuration Scripts.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> clock clear</strong>         //If manual or forcible clock source selection has been performed, run this command to restore the automatic clock source selection mode. Otherwise, skip this step.</pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> clock ssm-control on</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA]<strong> clock run-mode normal</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA]<strong> commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>Run the <a href="cmdqueryname=display+clock+source"><b><span class="cmdname">display clock source</span></b></a> command on DeviceA, DeviceB, DeviceC, and DeviceD to check information about the clock source they each synchronize with.</p>
<p># Check the clock source information on DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>display clock source</strong>
  System trace source State:   lock mode            
                               into pull-in range   
  Current system trace source: <span>100GE</span><span>1/0/3</span>            
  Frequency lock success:      <strong>yes</strong>                  

  Master board
  Source        Pri(sys)   In-SSM   Out-SSM   State          Ref-Source
  ------------------------------------------------------------------------------
  <span>100GE</span><span>1/0/1</span>     2          dnu      ssua      normal         yes
  <span>100GE</span><span>1/0/3</span>     1          ssua     --        normal         yes</pre>
<p># Check the clock source information on DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>display clock source</strong>
  System trace source State:   lock mode            
                               into pull-in range   
  Current system trace source: <span>100GE</span><span>1/0/1</span>            
  Frequency lock success:      <strong>yes</strong>                  

  Master board
  Source        Pri(sys)   In-SSM   Out-SSM   State          Ref-Source
  ------------------------------------------------------------------------------
  <span>100GE</span><span>1/0/1</span>     1          ssua     dnu       normal         yes
  <span>100GE</span><span>1/0/2</span>     2          dnu      ssua      normal         yes</pre>
<p># Check the clock source information on DeviceC.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong>display clock source</strong>
  System trace source State:   lock mode            
                               into pull-in range   
  Current system trace source: <span>100GE</span><span>1/0/2</span>            
  Frequency lock success:      <strong>yes</strong>                  

  Master board
  Source        Pri(sys)   In-SSM   Out-SSM   State          Ref-Source
  ------------------------------------------------------------------------------
  <span>100GE</span><span>1/0/1</span>     ---        dnu      ssua      normal         no 
  <span>100GE</span><span>1/0/2</span>     3          ssua     dnu       normal         yes
  <span>100GE</span><span>1/0/3</span>     1          ssub     ssua      normal         yes</pre>
<p># Check the clock source information on DeviceD.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong>display clock source</strong>
  System trace source State:   lock mode            
                               into pull-in range   
  Current system trace source: <span>100GE</span><span>1/0/1</span>            
  Frequency lock success:      <strong>yes</strong>                  

  Master board
  Source        Pri(sys)   In-SSM   Out-SSM   State          Ref-Source
  ------------------------------------------------------------------------------
  <span>100GE</span><span>1/0/1</span>     1          ssua     dnu       normal         yes
  <span>100GE</span><span>1/0/2</span>     2          dnu      ssua      normal         yes</pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001513039850__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p>DeviceA</p>
<pre class="screen">#
sysname DeviceA
#
clock ssm-control on
#
interface <span>100GE</span><span>1/0/1</span>
 clock synchronization enable
 clock priority 2
#
interface <span>100GE</span><span>1/0/2</span>
 clock synchronization enable
#
<span>interface <span>100GE</span></span><span>1/0/3</span>
<span> clock synchronization enable </span>
<span> clock priority 1</span>
<span> clock ssm ssua</span>
#
return</pre>
</li><li><p>DeviceB</p>
<pre class="screen">#
sysname DeviceB
#
clock ssm-control on
#
interface <span>100GE</span><span>1/0/1</span>
 clock synchronization enable
 clock priority 1
#
interface <span>100GE</span><span>1/0/2</span>
 clock synchronization enable
 clock priority 2
#
return</pre>
</li><li><p>DeviceC</p>
<pre class="screen">#
sysname DeviceC
#
clock ssm-control on
#
interface <span>100GE</span><span>1/0/1</span>
 clock synchronization enable
#
interface <span>100GE</span><span>1/0/2</span>
 clock synchronization enable
 clock priority 3
<span>interface <span>100GE</span></span><span>1/0/3</span>
<span> clock synchronization enable </span>
<span> clock priority 1 </span>
<span> clock ssm ssub</span>
#
return</pre>
</li><li><p>DeviceD</p>
<pre class="screen">#
sysname DeviceD
#
clock ssm-control on
#
interface <span>100GE</span><span>1/0/1</span>
 clock synchronization enable
 clock priority 1
#
interface <span>100GE</span><span>1/0/2</span>
 clock synchronization enable
 clock priority 2
#
return</pre>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_synce_cfg_0001.html">Synchronous Ethernet Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_synce_cfg_0024.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>