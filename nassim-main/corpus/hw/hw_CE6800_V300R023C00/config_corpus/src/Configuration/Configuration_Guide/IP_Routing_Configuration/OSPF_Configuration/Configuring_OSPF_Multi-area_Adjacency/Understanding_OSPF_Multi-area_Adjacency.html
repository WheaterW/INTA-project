
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Understanding OSPF Multi-area Adjacency">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0122.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0124.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001130783260">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Understanding OSPF Multi-area Adjacency</title>
</head>
<body><a name="EN-US_CONCEPT_0000001130783260"></a><a name="EN-US_CONCEPT_0000001130783260"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Understanding OSPF Multi-area Adjacency</h1>
<div><div class="section"><h4 class="sectiontitle">Context</h4><p>OSPF uses the shortest path first (SPF) algorithm but preferentially selects an intra-area path even if an inter-area path is the shortest. For example, if there are two paths to a destination address, one is an inter-area path that passes through a high-speed link, and the other is an intra-area path that passes through a low-speed link, OSPF will preferentially select the intra-area path according to OSPF route selection rules. To allow OSPF to preferentially select the inter-area path passing through the high-speed link, you can configure multiple sub-interfaces and add them to different areas. However, this method increases the total number of routes because an independent IP address needs to be configured for each sub-interface and many IP addresses will be advertised. To address this issue, OSPF multi-area adjacency is introduced.</p>
<p>OSPF multi-area adjacency allows an OSPF interface to be added to and shared by multiple areas.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001130783260__fig_feature_mdj002231722501"><a name="EN-US_CONCEPT_0000001130783260__fig_feature_mdj002231722501"></a><a name="fig_feature_mdj002231722501"></a><span class="figcap"><b>Figure 1 </b>Traffic forwarding paths before and after OSPF multi-area adjacency is configured</span><br><span><img class="vsd" src="figure/en-us_image_0000001176743015.png"></span></div>
<p>On the network shown in <a href="#EN-US_CONCEPT_0000001130783260__fig_feature_mdj002231722501">Figure 1</a>, the link between <span class="keyword">Device</span>A and <span class="keyword">Device</span>B in area 1 is a high-speed link.</p>
<p>Before OSPF multi-area adjacency is configured (<a href="#EN-US_CONCEPT_0000001130783260__fig_feature_mdj002231722501">Figure 1</a> a), traffic from <span class="keyword">Device</span>A to <span class="keyword">Device</span>B in area 2 is forwarded along the path <span class="keyword">Device</span>A-&gt;<span class="keyword">Device</span>C-&gt;<span class="keyword">Device</span>D-&gt;<span class="keyword">Device</span>B in the area, passing through the low-speed link.</p>
<p>After OSPF multi-area adjacency is configured (<a href="#EN-US_CONCEPT_0000001130783260__fig_feature_mdj002231722501">Figure 1</a> b), multi-area adjacency interfaces are created between <span class="keyword">Device</span>A and <span class="keyword">Device</span>B and belong to area 2. This allows traffic from <span class="keyword">Device</span>A to <span class="keyword">Device</span>B in area 2 to be forwarded along the high-speed link of <span class="keyword">Device</span>A-&gt;<span class="keyword">Device</span>B.</p>
<div class="p">OSPF multi-area adjacency has the following advantages:<ul><li>Allows the same interface to be used for multiple areas, thereby reducing the consumption of OSPF interface resources in multi-area deployment.</li><li>Prevents traffic from being routed through a low-speed link and allows a high-speed link to transmit multi-area traffic, thereby optimizing the OSPF network.</li></ul>
</div>
</div>
<div class="section"><h4 class="sectiontitle">Related Concepts</h4><div class="p">Multi-area adjacency interface: An OSPF logical interface created by enabling multi-area adjacency on an OSPF primary interface (an OSPF-enabled interface). It is also called a secondary interface. The multi-area adjacency interface has the following characteristics:<ul><li><p>The multi-area adjacency interface and the OSPF primary interface belong to different OSPF areas.</p>
</li><li><p>The network type of the multi-area adjacency interface can only be P2P. The multi-area adjacency interface runs an independent interface state machine and neighbor state machine.</p>
</li><li><p>The multi-area adjacency interface on a P2P primary interface sends OSPF packets in multicast mode.</p>
</li><li><p>The multi-area adjacency interface on a non-P2P primary interface sends OSPF packets in unicast mode.</p>
</li></ul>
</div>
</div>
<div class="section"><h4 class="sectiontitle">Fundamentals</h4><div class="fignone" id="EN-US_CONCEPT_0000001130783260__fig_feature_mdj002231722502"><a name="EN-US_CONCEPT_0000001130783260__fig_feature_mdj002231722502"></a><a name="fig_feature_mdj002231722502"></a><span class="figcap"><b>Figure 2 </b>Conceptual diagram of OSPF multi-area adjacency</span><br><span><img class="vsd" src="figure/en-us_image_0000001176743017.png"></span></div>
<p>On the network shown in <a href="#EN-US_CONCEPT_0000001130783260__fig_feature_mdj002231722502">Figure 2</a>, the link between DeviceA and DeviceB in area 1 is a high-speed link. In area 2, traffic from DeviceA to DeviceB is forwarded along the low-speed link of DeviceA-&gt;DeviceC-&gt;DeviceD-&gt;DeviceB within the area. To allow traffic from DeviceA to DeviceB in area 2 to be forwarded along the high-speed link of DeviceA-&gt;DeviceB, deploy OSPF multi-area adjacency.</p>
<div class="p">This function is implemented by creating OSPF multi-area adjacency interfaces on the primary interfaces of DeviceA and DeviceB and specifying area 2 for the multi-area adjacency interfaces so that they belong to this area.<ol><li><p>An adjacency is established between the multi-area adjacency interfaces of DeviceA and DeviceB. The establishment process is the same as that of the basic OSPF protocol. For details, see <a href="vrp_ospf_cfg_0006.html#EN-US_CONCEPT_0000001130623482__section_02">Adjacency Establishment</a>.</p>
</li><li><p>OSPF performs route calculation. The calculation process is the same as that of the basic OSPF protocol. For details, see <a href="vrp_ospf_cfg_0006.html#EN-US_CONCEPT_0000001130623482__section_03">Route Calculation</a>.</p>
</li></ol>
</div>
<p>The optimal path calculated by OSPF in area 2 is the path DeviceA -&gt; DeviceB. Therefore, traffic from DeviceA to DeviceB is forwarded along the high-speed link DeviceA -&gt; DeviceB. In this manner, this high-speed link can be shared by area 1 and area 2.</p>
</div>
<div class="section"><p>For security purpose,you are not advised to use the weak security algorithm or weak security protocols provided by this feature. If you need to use the weak security algorithm or protocols, run the <strong id="EN-US_CONCEPT_0000001130783260__en-us_topic_0198441389_b7309427153513">install feature-software WEAKEA</strong> command to install the weak security algorithm or protocol feature package WEAKEA. By default, the device provides the weak security algorithm or protocol feature package WEAKEA. For details about how to install or uninstall the feature package, see "Upgrade Maintenance Configuration" in <span>Configuration Guide</span> &gt; System Management Configuration.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>It is recommended that the password be at least eight characters long and contain at least two of the following character types: uppercase letters, lowercase letters, digits, and special characters.</p>
</div></div>
<p>The following commands can be used only after the weak security algorithm/protocol feature package is installed.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="59.72%" id="mcps1.3.4.5.1.3.1.1" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="40.28%" id="mcps1.3.4.5.1.3.1.2" liSelected="liSelected"><p>Parameters Available Only After Feature Package Installation</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="59.72%" headers="mcps1.3.4.5.1.3.1.1 "><p><a href="cmdqueryname=authentication-mode"><b><span class="cmdname">authentication-mode</span></b></a> { <strong><span>md5</span></strong> | <strong><span>hmac-md5</span></strong> | <strong><span>hmac-sha256</span></strong> } [ <i><span class="varname">KeyID</span></i> { <strong><span>plain</span></strong> <i><span class="varname">SPlainText</span></i> | [ <strong><span>cipher</span></strong> ] <i><span class="varname">SCipherText</span></i> } ]</p>
</td>
<td class="cellrowborder" valign="top" width="40.28%" headers="mcps1.3.4.5.1.3.1.2 "><p><strong>md5</strong> and <strong>hmac-</strong><strong>md5</strong></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="59.72%" headers="mcps1.3.4.5.1.3.1.1 "><p><a href="cmdqueryname=ospf+authentication-mode"><b><span class="cmdname">ospf authentication-mode</span></b></a> { <strong><span>md5</span></strong> | <strong><span>hmac-md5</span></strong> | <strong><span>hmac-sha256</span></strong> } [ <i><span class="varname">key-id</span></i> { <strong><span>plain</span></strong> <i><span class="varname">plain-text</span></i> | [ <strong><span>cipher</span></strong> ] <i><span class="varname">cipher-text</span></i> } ] <strong><span>multi-area</span></strong> { <i><span class="varname">area-id</span></i> | <i><span class="varname">area-id</span></i> }</p>
</td>
<td class="cellrowborder" valign="top" width="40.28%" headers="mcps1.3.4.5.1.3.1.2 "><p><strong>md5</strong> and <strong>hmac-</strong><strong>md5</strong></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospf_cfg_0122.html">Configuring OSPF Multi-area Adjacency
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospf_cfg_0124.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>