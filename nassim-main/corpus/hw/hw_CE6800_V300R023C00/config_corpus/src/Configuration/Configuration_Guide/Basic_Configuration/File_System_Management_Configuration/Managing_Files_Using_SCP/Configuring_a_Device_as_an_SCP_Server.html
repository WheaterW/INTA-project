
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Device as an SCP Server">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_file_cfg_0018.html">
<meta name="DC.Relation" scheme="URI" content="vrp_file_cfg_0020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="SCP">
<meta name="featurename" content="File System Management">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="SCP">
<meta name="featurename" content="File System Management">
<meta name="featuretype" content="Basic Configuration">
<meta name="featurename" content="FTP">
<meta name="featurename" content="SCP">
<meta name="featurename" content="SFTP">
<meta name="featurename" content="TFTP">
<meta name="featurename" content="File System Management">
<meta name="featuretype" content="Basic Configuration">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512831082">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring a Device as an SCP Server</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512831082"></a><a name="EN-US_TASK_0000001512831082"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Device as an SCP Server</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001512831082__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Prerequisites</h4><p>The Secure Copy Protocol (SCP) runs on top of SSH that allows you to use SCP to set up a connection between a user terminal and a remote device to upload or download files.</p>
<p>Before configuring a device as an SCP server to manage files, you have completed the following tasks:</p>
<ul><li>Ensure that there are reachable routes between the terminal and the device.</li><li>Ensure that the terminal has SCP-capable SSH client software installed.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001512831082__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Context</h4><p><a href="#EN-US_TASK_0000001512831082__file08tab01">Table 1</a> describes the process for configuring a device as an SCP server for file management.</p>

<div class="tableBorder"><a name="EN-US_TASK_0000001512831082__file08tab01"></a><a name="file08tab01"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0000001512831082__file08tab01" frame="hsides" border="1" rules="all"><caption><b>Table 1 </b>Configuring a device as an SCP server for file management</caption><thead align="left"><tr><th align="center" class="cellrowborder" valign="top" width="8.549145085491451%" id="mcps1.3.2.3.2.5.1.1" liSelected="liSelected"><p>No.</p>
</th>
<th align="center" class="cellrowborder" valign="top" width="31.40685931406859%" id="mcps1.3.2.3.2.5.1.2" liSelected="liSelected"><p>Task</p>
</th>
<th align="center" class="cellrowborder" valign="top" width="33.716628337166284%" id="mcps1.3.2.3.2.5.1.3" liSelected="liSelected"><p>Description</p>
</th>
<th align="center" class="cellrowborder" valign="middle" width="26.327367263273672%" id="mcps1.3.2.3.2.5.1.4" liSelected="liSelected"><p>Remarks</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" align="center" valign="top" width="8.549145085491451%" headers="mcps1.3.2.3.2.5.1.1 "><p>1</p>
</td>
<td class="cellrowborder" valign="middle" width="31.40685931406859%" headers="mcps1.3.2.3.2.5.1.2 "><p><a href="#EN-US_TASK_0000001512831082__step1806377861175329">Enable the SCP server function and configure related parameters.</a></p>
</td>
<td class="cellrowborder" valign="middle" width="33.716628337166284%" headers="mcps1.3.2.3.2.5.1.3 "><p>Generate a local key pair, enable the SCP server function, and configure SCP server parameters, including the port number, key pair update interval, SSH authentication timeout duration, and number of SSH authentication retries.</p>
</td>
<td class="cellrowborder" rowspan="3" align="left" valign="middle" width="26.327367263273672%" headers="mcps1.3.2.3.2.5.1.4 "><ul><li><span>Before performing task 3, you need to perform tasks 1 and 2.</span></li><li><span>Tasks 1 and 2 can be performed in any sequence.</span></li></ul>
</td>
</tr>
<tr><td class="cellrowborder" align="center" valign="top" headers="mcps1.3.2.3.2.5.1.1 "><p><span>2</span></p>
</td>
<td class="cellrowborder" valign="middle" headers="mcps1.3.2.3.2.5.1.2 "><p><a href="#EN-US_TASK_0000001512831082__step1495862979175329">Configure SSH user information.</a></p>
</td>
<td class="cellrowborder" valign="middle" headers="mcps1.3.2.3.2.5.1.3 "><p>Create an SSH user, configure the authentication mode, and set the service type.</p>
</td>
</tr>
<tr><td class="cellrowborder" align="center" valign="top" headers="mcps1.3.2.3.2.5.1.1 "><p><span>3</span></p>
</td>
<td class="cellrowborder" valign="middle" headers="mcps1.3.2.3.2.5.1.2 "><p><a href="#EN-US_TASK_0000001512831082__step674417148175329">Perform file operations using SCP.</a></p>
</td>
<td class="cellrowborder" valign="middle" headers="mcps1.3.2.3.2.5.1.3 "><p>Upload files from and download files to the SCP client.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001512831082__1.3.3"></a><a name="1.3.3"></a>
<div class="p"><h4 class="sectiontitle">Default Settings</h4>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="hsides" border="1" rules="all"><caption><b>Table 2 </b>Default settings</caption><thead align="left"><tr valign="middle"><th align="center" class="cellrowborder" valign="middle" width="50%" id="mcps1.3.3.2.2.3.1.1" liSelected="liSelected"><p>Parameter</p>
</th>
<th align="center" class="cellrowborder" valign="middle" width="50%" id="mcps1.3.3.2.2.3.1.2" liSelected="liSelected"><p>Default Setting</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.2.2.3.1.1 "><p>SCP server function</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.2.2.3.1.2 "><p>Disabled</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001512831082__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li id="EN-US_TASK_0000001512831082__step1806377861175329"><span id="EN-US_TASK_0000001512831082__"><strong>Enable the SCP server function and configure related parameters.</strong></span><p><p>For details about how to generate the local server key pair and how to set server parameters including the port number, key pair update interval, SSH authentication timeout interval, and number of SSH authentication retries, see "Configuring the SSH Server Function and Related Parameters" in <span>Configuration Guide</span> &gt; Security Configuration. For details about how to configure the SCP function, see <a href="#EN-US_TASK_0000001512831082__table1386493370175329">Table 3</a>.</p>

<div class="tableBorder"><a name="EN-US_TASK_0000001512831082__table1386493370175329"></a><a name="table1386493370175329"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0000001512831082__table1386493370175329" frame="hsides" border="1" rules="all"><caption><b>Table 3 </b>Enabling the SCP server function and configuring related parameters</caption><thead align="left"><tr><th align="center" class="cellrowborder" valign="top" width="26.05%" id="mcps1.3.4.1.2.2.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="center" class="cellrowborder" valign="top" width="31.44%" id="mcps1.3.4.1.2.2.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="center" class="cellrowborder" valign="top" width="42.51%" id="mcps1.3.4.1.2.2.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="middle" width="26.05%" headers="mcps1.3.4.1.2.2.2.4.1.1 "><p>Enter the system view.</p>
</td>
<td class="cellrowborder" valign="middle" width="31.44%" headers="mcps1.3.4.1.2.2.2.4.1.2 "><p><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></p>
</td>
<td class="cellrowborder" valign="middle" width="42.51%" headers="mcps1.3.4.1.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="middle" width="26.05%" headers="mcps1.3.4.1.2.2.2.4.1.1 "><p>Enable the SCP server function.</p>
</td>
<td class="cellrowborder" valign="middle" width="31.44%" headers="mcps1.3.4.1.2.2.2.4.1.2 "><p><a href="cmdqueryname=scp"><b><span class="cmdname">scp</span></b></a> [ <strong><span>ipv4</span></strong> | <strong><span>ipv6</span></strong> ] <strong><span>server enable</span></strong></p>
</td>
<td class="cellrowborder" valign="middle" width="42.51%" headers="mcps1.3.4.1.2.2.2.4.1.3 "><p>By default, the SCP server function is disabled.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="middle" width="26.05%" headers="mcps1.3.4.1.2.2.2.4.1.1 "><p>(Optional) Set the maximum number of SCP clients allowed to connect to an SCP server concurrently.</p>
</td>
<td class="cellrowborder" valign="middle" width="31.44%" headers="mcps1.3.4.1.2.2.2.4.1.2 "><p><a href="cmdqueryname=scp+max-sessions"><b><span class="cmdname">scp max-sessions</span></b></a> <i><span class="varname">max-session-count</span></i></p>
</td>
<td class="cellrowborder" valign="middle" width="42.51%" headers="mcps1.3.4.1.2.2.2.4.1.3 "><p>By default, a maximum of two SCP clients are allowed to connect to an SCP server concurrently.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.05%" headers="mcps1.3.4.1.2.2.2.4.1.1 "><p>Commit the configuration.</p>
</td>
<td class="cellrowborder" valign="top" width="31.44%" headers="mcps1.3.4.1.2.2.2.4.1.2 "><p><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="42.51%" headers="mcps1.3.4.1.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li id="EN-US_TASK_0000001512831082__step1495862979175329"><span id="EN-US_TASK_0000001512831082__"><strong>Configure SSH user information.</strong></span><p><p>For details, see <a href="galaxy_ssh_cfg_0011.html">Configuring an SSH User</a> in <span>Configuration Guide</span> &gt; Security Configuration.</p>
</p></li><li id="EN-US_TASK_0000001512831082__step674417148175329"><span id="EN-US_TASK_0000001512831082__"><strong>Perform file operations using SCP.</strong></span><p><p>The SCP-capable SSH client software must be installed on the terminal, so that the terminal can connect to the device using SCP to upload or download files. The following describes how to connect to the device using OpenSSH and the Windows CLI.</p>
<ul><li><p>For details about how to install OpenSSH, see the OpenSSH installation guide.</p>
</li><li><p>To use OpenSSH to connect to the device using SCP, run the OpenSSH commands. For details about OpenSSH commands, see the OpenSSH help.</p>
</li><li><p>The Windows CLI can identify OpenSSH commands only when OpenSSH is installed on the terminal.</p>
</li></ul>
<p>Access the Windows CLI and run the OpenSSH commands to connect to the device for file operations using SCP. (The following information is for reference only.)</p>
<pre class="screen">C:\Documents and Settings\Administrator&gt; <strong>scp scpuser@10.136.23.5:<span><strong><span>flash</span></strong></span>:/vrpcfg.zip vrpcfg-backup.zip</strong>
The authenticity of host '10.136.23.5 (10.136.23.5)' can't be established.
DSA key fingerprint is 46:b2:8a:52:88:42:41:d4:af:8f:4a:41:d9:b8:4f:ee.
Are you sure you want to continue connecting (yes/no)? <strong>yes</strong>
Warning: Permanently added '10.136.23.5' (DSA) to the list of known hosts.
scpuser@10.136.23.5's password:
<strong>vrpcfg.zip                                    100% 1257     1.2KB/s   00:00</strong>
Read from remote host 10.136.23.5: Connection reset by peer

C:\Documents and Settings\Administrator&gt;</pre>
<p>According to the preceding command output, the user terminal uploads files to or downloads files from the SCP server while connecting to the SCP server and accesses the user local directory at last.</p>
</p></li><li><span><strong>Disconnect from the SCP server.</strong></span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 4 </b>Disconnecting from the SCP server</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.4.4.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.4.4.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.4.4.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.4.4.2.1.2.4.1.1 "><p>Disconnect from the SCP server.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.4.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.4.4.2.1.2.4.1.3 "><p><span>You can also run the <a href="cmdqueryname=bye"><b><span class="cmdname">bye</span></b></a> or <a href="cmdqueryname=exit"><b><span class="cmdname">exit</span></b></a> command to disconnect from the SCP server.</span></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li></ul></div>
<div class="example"><a name="EN-US_TASK_0000001512831082__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li><p>Run the <a href="cmdqueryname=display+ssh+user-information"><b><span class="cmdname">display ssh user-information</span></b></a> [ <i><span class="varname">username</span></i> ] command to check SSH user information on the SSH server.</p>
</li><li><p>Run the <a href="cmdqueryname=display+ssh+server"><b><span class="cmdname">display ssh server</span></b></a> <strong><span>status</span></strong> command to check global configuration of the SSH server.</p>
</li><li><p>Run the <a href="cmdqueryname=display+ssh+server"><b><span class="cmdname">display ssh server</span></b></a> <strong><span>session</span></strong> command on the SSH server to check the sessions between the SSH server and the SSH client.</p>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_file_cfg_0018.html">Managing Files Using SCP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_file_cfg_0020.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>