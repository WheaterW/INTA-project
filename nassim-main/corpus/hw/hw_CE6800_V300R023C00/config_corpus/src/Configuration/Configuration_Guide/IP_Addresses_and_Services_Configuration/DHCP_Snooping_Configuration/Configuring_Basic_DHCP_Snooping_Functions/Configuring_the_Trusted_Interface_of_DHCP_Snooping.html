
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Trusted Interface of DHCP Snooping">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../toctopics/en-us_task_0000001563760653.html">
<meta name="DC.Relation" scheme="URI" content="../toctopics/en-us_task_0000001513040322.html">
<meta name="DC.Relation" scheme="URI" content="../toctopics/en-us_task_0000001564120361.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DHCP Snooping">
<meta name="featurename" content="VLAN">
<meta name="featurename" content="VLAN Mapping">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DHCP Snooping">
<meta name="featurename" content="VLAN">
<meta name="featurename" content="VLAN Mapping">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="DHCP Snooping">
<meta name="featurename" content="VLAN">
<meta name="featurename" content="VLAN Mapping">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001564000549">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring the Trusted Interface of DHCP Snooping</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001564000549"></a><a name="EN-US_TASK_0000001564000549"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Trusted Interface of DHCP Snooping</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001564000549__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>To ensure a DHCP client obtains an IP address from a valid DHCP server, you need to configure the device interface that is directly or indirectly connected to a DHCP server trusted by the administrator as a trusted one (for example, interface 3 in <a href="#EN-US_TASK_0000001564000549__fig829340135416">Figure 1</a>), and configure other interfaces as untrusted ones (for example, interface 2 in <a href="#EN-US_TASK_0000001564000549__fig829340135416">Figure 1</a>). This ensures that the DHCP client obtains an IP address only from the valid DHCP server and the bogus DHCP server cannot allocate an IP address to the client.</p>
<p>After DHCP snooping is enabled, configure the interface connected to the DHCP server as a trusted one. Once configured, the device can generate dynamic DHCP snooping binding entries.</p>
<p>When DHCP snooping is enabled on a DHCP relay agent, a trusted interface does not need to be configured on the relay agent. After receiving DHCP request messages from users, the DHCP relay agent converts the source and destination IP addresses and MAC addresses, and unicasts the messages to the valid DHCP server. As such, DHCPACK messages received by the DHCP relay agent are valid, and the DHCP snooping binding table generated by the relay agent is also correct.</p>
<div class="fignone" id="EN-US_TASK_0000001564000549__fig829340135416"><a name="EN-US_TASK_0000001564000549__fig829340135416"></a><a name="fig829340135416"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring the trusted interface of DHCP snooping</span><br><span><img class="vsd" src="../images/en-us_image_0000001564000617.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001564000549__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Configure trusted interfaces in the interface, BD, or VLAN view.</span><p><ul><li>Enter the interface view and configure the interface as a trusted one.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i>
<strong>portswitch</strong>
<a href="cmdqueryname=dhcp+snooping+trusted"><b><span class="cmdname">dhcp snooping trusted</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Enter the VLAN view and configure a trusted interface.<pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i>
<a href="cmdqueryname=dhcp+snooping+trusted"><b><span class="cmdname">dhcp snooping trusted</span></b></a> <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Enter the BD view and configure trusted interfaces.<pre class="screen"><a href="cmdqueryname=bridge-domain"><b><span class="cmdname">bridge-domain</span></b></a> <i><span class="varname">bd-id</span></i>
<a href="cmdqueryname=dhcp+snooping+trusted+tunnel"><b><span class="cmdname">dhcp snooping trusted tunnel</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li></ul>
</p><p><p>By default, an interface is untrusted.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001564000549__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001564000549__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../toctopics/en-us_task_0000001563760653.html">Configuring Basic DHCP Snooping Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../toctopics/en-us_task_0000001513040322.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../toctopics/en-us_task_0000001564120361.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>