
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Understanding the BGP Add-Path Function">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0069.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0071.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001130624146">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Understanding the BGP Add-Path Function</title>
</head>
<body><a name="EN-US_CONCEPT_0000001130624146"></a><a name="EN-US_CONCEPT_0000001130624146"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Understanding the BGP Add-Path Function</h1>
<div><div class="section"><h4 class="sectiontitle">Context</h4><p>In a scenario where a route reflector (RR) and clients are configured, if the RR has multiple routes to the same destination (with the same prefix), the RR selects an optimal route from these routes and then sends only the optimal route to its clients. Therefore, the clients have only one route to the destination. If a link along this route fails, route convergence is performed and is time-consuming, which cannot meet high reliability requirements.</p>
<p>To address this issue, deploy the BGP Add-Path function on the RR. With the BGP Add-Path function, the RR can send two or more routes with the same prefix to its clients. After reaching the clients, these routes can load-balance traffic or back up each other, which ensures high reliability of data transmission.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>The BGP Add-Path function is mainly deployed on RRs even though this function can be configured on any device and take effect.</p>
</li><li><p>With the BGP Add-Path function configured, you can set the maximum number of routes with the same prefix that an RR can send to its clients. The actual number of routes with the same prefix and destination that an RR can send to its clients is the smaller value between the configured maximum number and the number of available routes with the same prefix and destination.</p>
</li></ul>
</div></div>
</div>
<div class="section"><h4 class="sectiontitle">Related Concepts</h4><p>An Add-Path route is a preferred route that is selected by BGP after the BGP Add-Path function is configured.</p>
</div>
<div class="section"><h4 class="sectiontitle">Typical Networking</h4><p>On the network shown in <a href="#EN-US_CONCEPT_0000001130624146__fig_dc_vrp_bgp_feature_003501">Figure 1</a>, DeviceA, DeviceB, and DeviceC are clients of the RR. DeviceB and DeviceC learn a route 1.1.1.1/32 from their EBGP peer DeviceD.</p>
<p>DeviceB and DeviceC advertise the route 1.1.1.1/32 to the RR. The two routes have the same destination address but different next hops. The RR selects an optimal route (the route learned from DeviceB for example) based on BGP route selection rules and advertises the optimal route to DeviceA. Therefore, DeviceA has only one route to 1.1.1.1/32.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001130624146__fig_dc_vrp_bgp_feature_003501"><a name="EN-US_CONCEPT_0000001130624146__fig_dc_vrp_bgp_feature_003501"></a><a name="fig_dc_vrp_bgp_feature_003501"></a><span class="figcap"><b>Figure 1 </b>Typical network with BGP Add-Path deployed</span><br><span><img class="vsd" src="figure/en-us_image_0000001130624218.png"></span></div>
<p>BGP Add-Path can be configured on the RR to control the maximum number of routes with the same prefix that the RR can send to DeviceA. Assume that the configured maximum number of routes with the same prefix that the RR can send to DeviceA is 2. <a href="#EN-US_CONCEPT_0000001130624146__table_dc_vrp_bgp_feature_003501">Table 1</a> describes differences between route convergence scenarios with and without the BGP Add-Path function configured.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001130624146__table_dc_vrp_bgp_feature_003501"></a><a name="table_dc_vrp_bgp_feature_003501"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001130624146__table_dc_vrp_bgp_feature_003501" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Differences with and without the BGP Add-Path function configured</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="middle" width="33.33333333333333%" id="mcps1.3.3.6.2.4.1.1" liSelected="liSelected"><p>Whether Add-Path Is Enabled</p>
</th>
<th align="left" class="cellrowborder" valign="middle" width="33.33333333333333%" id="mcps1.3.3.6.2.4.1.2" liSelected="liSelected"><p>Route Advertisement</p>
</th>
<th align="left" class="cellrowborder" valign="middle" width="33.33333333333333%" id="mcps1.3.3.6.2.4.1.3" liSelected="liSelected"><p>Route Convergence in Case of a Link Fault</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="middle" width="33.33333333333333%" headers="mcps1.3.3.6.2.4.1.1 "><p>No</p>
</td>
<td class="cellrowborder" valign="middle" width="33.33333333333333%" headers="mcps1.3.3.6.2.4.1.2 "><p>An RR advertises a single route to 1.1.1.1/32 with 10.1.1.1/24 as a next-hop IP address to DeviceA.</p>
</td>
<td class="cellrowborder" valign="middle" width="33.33333333333333%" headers="mcps1.3.3.6.2.4.1.3 "><p>Only one link is available. A new route must be selected to take over traffic after routes converge.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="middle" width="33.33333333333333%" headers="mcps1.3.3.6.2.4.1.1 "><p>Yes</p>
</td>
<td class="cellrowborder" valign="middle" width="33.33333333333333%" headers="mcps1.3.3.6.2.4.1.2 "><p>The RR advertises two routes to 1.1.1.1/32, one with 10.1.1.1/24 and the other with 10.1.2.1/24 as a next-hop IP address to DeviceA.</p>
</td>
<td class="cellrowborder" valign="middle" width="33.33333333333333%" headers="mcps1.3.3.6.2.4.1.3 "><p>If the two routes back up each other and a link fault occurs, the standby link takes over traffic.</p>
<p>If the two routes load-balance traffic and one link fails, the other link takes over all the traffic.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section"><h4 class="sectiontitle">Application Scenarios</h4><p>BGP Add-Path applies to scenarios in which an RR is deployed and needs to send multiple routes with the same prefix to clients to ensure data transmission reliability.BGP Add-Path supports route attribute-or prefix-based filtering to control Add-Path route advertisement in a refined manner.</p>
<p>BGP Add-Path is used in traffic optimization scenarios and allows multiple routes to be sent to the controller.</p>
</div>
<div class="section"><h4 class="sectiontitle">Benefits</h4><p>Deploying the BGP Add-Path function can improve network reliability.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp_cfg_0069.html">Configuring BGP Add-Path
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp_cfg_0071.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>