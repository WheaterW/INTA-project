
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Understanding ICMP">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv4_cfg_0039.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv4_cfg_0041.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv4 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="IPv4 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001130623778">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Understanding ICMP</title>
</head>
<body><a name="EN-US_CONCEPT_0000001130623778"></a><a name="EN-US_CONCEPT_0000001130623778"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Understanding ICMP</h1>
<div><div class="section"><h4 class="sectiontitle">ICMP Message Classification</h4><p>ICMP is an error-reporting mechanism that is often used by IP or an upper-layer protocol (TCP or UDP). An ICMP message is encapsulated as a part of an IP datagram and transmitted through the Internet.</p>
<p>An IP datagram contains information about only the source and destination, and can record information about all nodes along the path it traverses only if its Record Route option is set. Therefore, a device that detects an error reports it to only the source and not to intermediate devices.</p>
<p>When an error occurs during IP datagram forwarding, ICMP reports the error to the source of the IP datagram, but does not rectify the error or notify the intermediate devices of it. A majority of errors occur on the source. If an error occurs on an intermediate device, however, the source cannot locate the device on which the error occurs even after receiving the error report.</p>
<p>ICMP uses error or query messages to report errors or information generated during packet processing. <a href="#EN-US_CONCEPT_0000001130623778__fig11536617919">Figure 1</a> shows the ICMP message format.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001130623778__fig11536617919"><a name="EN-US_CONCEPT_0000001130623778__fig11536617919"></a><a name="fig11536617919"></a><span class="figcap"><b>Figure 1 </b>ICMP message format</span><br><span><img class="vsd" src="figure/en-us_image_0000001176663341.png" width="NaN" height="NaN"></span><br></div>
<div class="p">An ICMP message consists of the following fields:<ul><li><p>Type: message type.</p>
</li><li><p>Code: specific message type.</p>
</li><li><p>Checksum: checksum of an ICMP message.</p>
</li></ul>
</div>
<p>Maintenance personnel can determine fault locations based on ICMP message types. <a href="#EN-US_CONCEPT_0000001130623778__table7153062095">Table 1</a> describes ICMP message classification.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001130623778__table7153062095"></a><a name="table7153062095"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001130623778__table7153062095" frame="border" border="1" rules="all"><caption><b>Table 1 </b>ICMP message classification</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.3.1.9.2.5.1.1" liSelected="liSelected"><p>Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.3.1.9.2.5.1.2" liSelected="liSelected"><p>Code</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.3.1.9.2.5.1.3" liSelected="liSelected"><p>Description</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.3.1.9.2.5.1.4" liSelected="liSelected"><p>Query/Error</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.1 "><p>0 â Echo Reply</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.2 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.3 "><p>Echo reply</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.4 "><p>Query</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="16" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.1 "><p>3 â Destination Unreachable</p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.2 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.3 "><p>Destination network unreachable</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.4 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Destination host unreachable</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>2</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Destination protocol unreachable</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>3</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Destination port unreachable</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>4</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Fragmentation required, and DF flag set</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>5</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Source route failed</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>6</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Destination network unknown</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>7</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Destination host unknown</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>8</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Source host isolated</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>9</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Network administratively prohibited</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>10</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Host administratively prohibited</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>11</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Network unreachable for ToS</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>12</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Host unreachable for ToS</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>13</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Communication administratively prohibited</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>14</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Host precedence violation</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>15</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Precedence cutoff in effect</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.1 "><p>4 - Source Quench</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.2 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.3 "><p>Source quench message</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.4 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.1 "><p>5 â Redirect</p>
<p></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.2 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.3 "><p>Redirect datagram for the network</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.4 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Redirect datagram for the host</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>2</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Redirect datagram for the ToS and network</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>3</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Redirect datagram for the ToS and host</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.1 "><p>8 â Echo Request</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.2 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.3 "><p>Echo request</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.4 "><p>Query</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.1 "><p>9 â Router Advertisement</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.2 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.3 "><p>Router advertisement</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.4 "><p>Query</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.1 "><p>10 â Router Solicitation</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.2 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.3 "><p>Router discovery/selection/solicitation</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.4 "><p>Query</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.1 "><p>11 â Time Exceeded</p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.2 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.3 "><p>TTL expired in transit</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.4 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Fragment reassembly time exceeded</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.1 "><p>12 â Parameter Problem</p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.2 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.3 "><p>Pointer indicates the error</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.4 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Missing a required option</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.1 "><p>2</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.2 "><p>Bad length</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.9.2.5.1.3 "><p>Error</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.1 "><p>13 â Timestamp</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.2 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.3 "><p>Timestamp</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.4 "><p>Query</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.1 "><p>14 â Timestamp Reply</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.2 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.3 "><p>Timestamp reply</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.4 "><p>Query</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.1 "><p>15 â Information Request</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.2 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.3 "><p>Information request</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.4 "><p>Query</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.1 "><p>16 â Information Reply</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.2 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.3 "><p>Information reply</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.9.2.5.1.4 "><p>Query</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section"><h4 class="sectiontitle">ICMP Security</h4><p>Under normal circumstances, a device can send and receive ICMP messages properly. However, when network traffic is heavy, host unreachable or port unreachable events frequently occur, leading to a surge in ICMP messages. The increase in the volume of messages not only burdens the network, but also degrades the performance of devices. Network attackers perform scans by using various types of packets, and devices reply to these packets with ICMP messages. Network attackers then obtain network information from these received ICMP messages and launch attacks on the network. In addition, when the device is busy sending ICMP messages, transmission of normal service packets is affected.</p>
<p>To reduce the device's pressure in processing ICMP messages and prevent ICMP message attacks, the device can be configured to:</p>
<ul><li>Control the forwarding of ICMP messages. The device can control the sending and receiving of ICMP messages to control ICMP traffic on the network.</li><li>Discard ICMP messages of a certain type. For example, the device can be configured to discard those with TTL of 1 or 0, or those carrying route options.</li><li>Limit the rate of ICMP messages. If the number of ICMP messages sent to the CPU exceeds the threshold, the device discards excess ICMP messages.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_ipv4_cfg_0039.html">Configuring ICMP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_ipv4_cfg_0041.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>