
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Mode in Which BGP Path Attributes Are Processed">
<meta name="abstract" content="To enhance reliability, you can configure a special mode in which BGP path attributes are processed.">
<meta name="description" content="To enhance reliability, you can configure a special mode in which BGP path attributes are processed.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0144.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0146.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_2000.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001421757557">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring a Mode in Which BGP Path Attributes Are Processed</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001421757557"></a><a name="EN-US_TASK_0000001421757557"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Mode in Which BGP Path Attributes Are Processed</h1>
<div class="taskbody"><p>To enhance reliability, you can configure a special mode in which BGP path attributes are processed.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001421757557__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring a mode in which BGP path attributes are processed, you have completed the following task:</p>
<ul><li><p><a href="vrp_bgp_cfg_0014.html">Configure basic BGP functions.</a></p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001421757557__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>BGP Update messages contain various path attributes. If the local device receives any Update message with an incorrect format, BGP session flapping may occur. To enhance reliability, you can perform this task to configure a mode for the device to process specified BGP path attributes.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This function takes effect immediately for the routes received after the <a href="cmdqueryname=peer+path-attribute-treat"><b><span class="cmdname">peer path-attribute-treat</span></b></a> command is run. However, this function does not take effect immediately for the routes received before the <a href="cmdqueryname=peer+path-attribute-treat"><b><span class="cmdname">peer path-attribute-treat</span></b></a> command is run. To allow this function to take effect immediately in this case, run the <a href="cmdqueryname=refresh+bgp"><b><span class="cmdname">refresh bgp</span></b></a> command.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001421757557__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>You can also configure a processing mode for incorrect path attributes.</span><p><pre class="screen"><a href="cmdqueryname=bgp+path-attribute+originator-id+attr-set+accept-zero-value"><b><span class="cmdname">bgp</span></b></a> <strong><span>path-attribute</span></strong> { <strong><span>originator-id</span></strong> | <strong><span>attr-set</span></strong> } <strong><span>accept-zero-value</span></strong></pre>
<pre class="screen"><a href="cmdqueryname=bgp+path-attribute+community+ext-community+ipv6-ext-community"><b><span class="cmdname">bgp</span></b></a> <strong><span>path-attribute</span></strong> { <strong><span>community</span></strong> | <strong><span>ext-community</span></strong> | <strong><span>ipv6-ext-community</span></strong> | <strong><span>large-community</span></strong> | <strong><span>attr-set</span></strong> | <strong><span>wide-community</span></strong> | <strong><span>cluster-list</span></strong> } <strong><span>accept-zero-length</span></strong></pre>
<p>The <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <strong><span>path-attribute</span></strong> <strong><span>accept-zero-value</span></strong> command allows the path attributes with the value of 0 to be accepted. The <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <strong><span>path-attribute</span></strong> <strong><span>accept-zero-length</span></strong> command allows the path attributes with the length of 0 to be accepted.</p>
<p>If the <a href="cmdqueryname=bgp+path-attribute+attr-set+accept-zero-value"><b><span class="cmdname">bgp path-attribute attr-set accept-zero-value</span></b></a> command is run and the Originator_ID in the Attr_Set attribute is 0, the route corresponding to the Attr_Set attribute is accepted. After the <a href="cmdqueryname=bgp+path-attribute+attr-set+accept-zero-length"><b><span class="cmdname">bgp path-attribute attr-set accept-zero-length</span></b></a> command is run, if the length of the Community, Ext-community, IPv6 ext-community, Large-community, Wide-community, or Cluster_List attribute in the Attr_Set attribute is 0, the routes corresponding to the Attr_Set attribute are accepted.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <strong><span>path-attribute</span></strong> command takes effect for all address families. To configure the device to perform special processing on path attributes in a specific address family, perform the following steps.</p>
<p>The <a href="cmdqueryname=bgp+path-attribute+accept-zero-value"><b><span class="cmdname">bgp path-attribute accept-zero-value</span></b></a> command takes effect for all address families. To configure the device to perform special processing on path attributes in a specific address family, run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peerIpv4Addr</span></i> <strong><span>treat-with-error</span></strong> <strong><span>attribute-id</span></strong> <i><span class="varname">id</span></i> <strong><span>accept-zero-value</span></strong> command in this address family view. Currently, the <strong><span>attribute-id</span></strong> <i><span class="varname">id</span></i> supports only the Originator_ID attribute.</p>
<p>The <a href="cmdqueryname=bgp+path-attribute+wide-community+accept-zero-length"><b><span class="cmdname">bgp path-attribute wide-community accept-zero-length</span></b></a> command does not take effect in the BGP RPD address family. After a device receives an RPD route with the Wide-Community attribute whose length is 0, the device still withdraws the route even if this command is run.</p>
</div></div>
</p></li><li><span>Enter the BGP view.</span><p><pre class="screen"><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></pre>
</p></li><li><span>Enter the BGP-IPv4 unicast address family view.</span><p><pre class="screen"><a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></pre>
</p></li><li><span>Configure a processing mode for a specified attribute.</span><p><pre class="screen"><a href="cmdqueryname=peer+path-attribute-treat+attribute-id+to+discard+withdraw"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peerIpv4Addr</span></i> <strong><span>path-attribute-treat</span></strong> <strong><span>attribute-id</span></strong> { <i><span class="varname">id</span></i> [ <strong><span>to</span></strong> <i><span class="varname">id2</span></i> ] } &amp;&lt;1-255&gt; { <strong><span>discard</span></strong> | <strong><span>withdraw</span></strong> | <strong><span>treat-as-unknown</span></strong> }</pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Running this command may cause path attribute discarding and route withdrawal. Therefore, exercise caution when running this command.</p>
</div></div>
<p>If both the <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <strong><span>path-attribute</span></strong> and <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <strong><span>path-attribute-treat</span></strong> <strong><span>attribute-id</span></strong> commands are configured, the device follows the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <strong><span>path-attribute-treat</span></strong> <strong><span>attribute-id</span></strong> command.</p>
<div class="p">The <strong><span>path-attribute-treat</span></strong> parameter specifies a path attribute processing mode, which can be any of the following ones:<ul><li><p>Discarding specified attributes</p>
</li><li><p>Withdrawing the routes with specified attributes</p>
</li><li><p>Processing specified attributes as unknown attributes</p>
</li></ul>
</div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001421757557__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001421757557__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp_cfg_0144.html">Maintaining BGP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp_cfg_0146.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bgp_cfg_2000.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>