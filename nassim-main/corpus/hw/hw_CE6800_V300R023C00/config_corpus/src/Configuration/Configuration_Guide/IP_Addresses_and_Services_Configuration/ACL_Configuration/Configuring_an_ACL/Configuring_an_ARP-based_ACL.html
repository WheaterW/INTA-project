
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an ARP-based ACL">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_acl_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="vrp_acl_cfg_0014.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176742485">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring an ARP-based ACL</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176742485"></a><a name="EN-US_TASK_0000001176742485"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an ARP-based ACL</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176742485__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>An ARP-based ACL defines packet filtering rules based on the source and destination IPv4 addresses and source and destination MAC addresses of ARP packets.</p>
<div class="p"><strong id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_b1652132913555">When ACL rules are configured:</strong><ul id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_en-us_concept_0177090555_ul1191338372183158"><li id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_en-us_concept_0177090555_li822401570183158"><p id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_en-us_concept_0177090555_p898434898183158"><a name="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_en-us_concept_0177090555_li822401570183158"></a><a name="en-us_task_0000001176742483_en-us_concept_0177090555_li822401570183158"></a>If the specified rule ID already exists and the new rule conflicts with the original, the original is replaced.</p>
</li><li id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_en-us_concept_0177090555_li504316878183158"><p id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_en-us_concept_0177090555_p2083297484183158"><a name="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_en-us_concept_0177090555_li504316878183158"></a><a name="en-us_task_0000001176742483_en-us_concept_0177090555_li504316878183158"></a>Matching stops for a packet once the packet matches a rule in an ACL.</p>
</li><li id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_li1538122512195">Many services that are not configured with ACL rules also occupy ACL resources. You can run the <a href="cmdqueryname=display+system+tcam+service+brief"><b><span class="cmdname" id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_cmdname4391122852016">display system tcam service brief</span></b></a> command to check ACL resources occupied by services.</li></ul>
</div>
<p><strong id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_b19922155455712">When ACL rules are deleted:</strong> The <a href="cmdqueryname=undo+rule"><b><span class="cmdname" id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_en-us_concept_0177090555_cmdname1539083973183158">undo rule</span></b></a> command can delete an ACL rule even if this rule is referenced. Before deleting a rule, run the <a href="cmdqueryname=display+current-configuration+%7C+include+acl"><b><span class="cmdname" id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_cmdname6906162174518">display current-configuration | include acl</span></b></a> command to check whether the rule is being referenced.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176742485__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Create an ARP-based ACL. You can create a numbered or named ARP-based ACL.</span><p><ul><li><div class="p">Create a numbered ARP-based ACL and enter its view.<pre class="screen"><a href="cmdqueryname=acl+number"><b><span class="cmdname">acl</span></b></a> [ <strong><span>number</span></strong> ] <i><span class="varname">arp-acl-number</span></i> </pre>
</div>
<p>The number of an ARP-based ACL ranges from 23000 to 23999.</p>
</li><li><p>Create a named ARP-based ACL and enter its view.</p>
<pre class="screen"><a href="cmdqueryname=acl+name+arp"><b><span class="cmdname">acl name</span></b></a> <i><span class="varname">arp-acl-name</span></i> <strong><span>arp</span></strong></pre>
</li></ul>
</p></li><li><span>(Optional) Configure an ACL step.</span><p><pre class="screen" id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_screen148201438191713"><a href="cmdqueryname=step"><b><span class="cmdname" id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_cmdname430815436176">step</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_varname776743717423">step-value</span></i></pre>
</p><p><p id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_p1373340508183306">The default ACL step is 5. Change the step value as required.</p>
</p></li><li><span>(Optional) Configure a description for the basic ACL.</span><p><pre class="screen" id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_screen1670613531740"><a href="cmdqueryname=description"><b><span class="cmdname" id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_cmdname664116591417">description</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_varname126411059742">text</span></i></pre>
<p id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_p48583136183305">The ACL description helps you understand and remember the functions or purpose of the ACL.</p>
</p></li><li><span>Configure a rule for the ARP-based ACL. Run one or more of the following commands based on ARP packet types.</span><p><ul><li><p>To configure an ARP-based ACL rule to match ARP request messages, run:</p>
<pre class="screen"><a href="cmdqueryname=rule+name+permit+deny+request+source-ip+0+any+source-mac+any"><b><span class="cmdname">rule </span></b></a>[ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } [ <strong><span>request</span></strong> ] [ <strong><span>source-ip</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> | <i><span class="varname">source-netmask</span></i> } | <strong><span>any</span></strong> } | <strong><span>source-mac</span></strong> { <i><span class="varname">source-mac-address</span></i> [ <i><span class="varname">source-mac-mask</span></i> ] | <strong><span>any</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> ] <sup>*</sup></pre>
</li><li><p>To configure an ARP-based ACL rule to match ARP reply messages, run:</p>
<pre class="screen"><a href="cmdqueryname=rule+name+permit+deny+reply+source-ip+0+any+destination-ip+0+any"><b><span class="cmdname">rule </span></b></a>[ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <strong><span>reply</span></strong> [ <strong><span>source-ip</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> | <i><span class="varname">source-netmask</span></i> } | <strong><span>any</span></strong> } | <strong><span>destination-ip</span></strong> { <i><span class="varname">destination-ip-address</span></i> { <i><span class="varname">destination-wildcard</span></i> | <strong><span>0</span></strong> | <i><span class="varname">destination-netmask</span></i> } | <strong><span>any</span></strong> } | <strong><span>source-mac</span></strong> { <i><span class="varname">source-mac-address</span></i> [ <i><span class="varname">source-mac-mask</span></i> ] | <strong><span>any</span></strong> } | <strong><span>destination-mac</span></strong> { <i><span class="varname">destination-mac-address</span></i> [ <i><span class="varname">destination-mac-mask</span></i> ] | <strong><span>any</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> ] <sup>*</sup></pre>
</li></ul>
<p>In this example, only one permit or deny rule is configured. In actual configuration, you can configure multiple ACL rules and decide the matching order of the rules according to service requirements.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To configure a time-based ARP-based ACL, you must create a time range. For details, see <a href="vrp_acl_cfg_0009.html">Creating a Time Range in Which an ACL Takes Effect</a>.</p>
</div></div>
</p></li><li><span>(Optional) Configure a description for the ACL rule.</span><p><pre class="screen" id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_screen826615523308"><a href="cmdqueryname=rule+description"><b><span class="cmdname" id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_cmdnameab4d2703fa0c1de096e4d062b2daaf76">rule </span></b></a><i><span class="varname" id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_varname2b46a6416d48ff26018b9248bc2f24d3">rule-id</span></i> <strong><span id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_cmdpar6d720d4c65920475c7de7c975e80d31c">description</span></strong> <i><span class="varname" id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_varname7f65f9ae3bfa636bde170682d2274f6c">destext</span></i></pre>
<p id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_p2120462660183305">The ACL rule description helps you understand and remember the functions or purpose of the ACL rule.</p>
<p id="EN-US_TASK_0000001176742485__en-us_task_0000001176742483_rule_description_01">You must create a rule before you can configure a description for it.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176742485__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176742485__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001176742485__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Example</h4><ul><li>Configure a rule for filtering ARP reply messages based on a source MAC address and a destination MAC address.<p>Configure a rule in ACL 23000 to permit the ARP reply messages with the destination MAC address of 00e0-fc00-0001 and the source MAC address of 00e0-fc00-0002.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl 23000</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl-arp-23000] <strong>rule permit reply destination-mac 00e0-fc00-0001 source-mac 00e0-fc00-0002</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl-arp-23000] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
</li></ul>
<h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <span><a href="cmdqueryname=display+acl+name+all"><b><span class="cmdname">display acl</span></b></a> { <i><span class="varname">arp-acl-number</span></i> | <strong><span>name</span></strong> <i><span class="varname">arp-acl-name</span></i> | <strong><span>all</span></strong> }</span> command to check the configuration of the ARP-based ACL.</p>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001176742485__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><p>Apply the ARP-based ACL to a service module so that the ARP-based ACL rules can be delivered and take effect.</p>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_acl_cfg_0010.html">Configuring an ACL
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_acl_cfg_0014.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>