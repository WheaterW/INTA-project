
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an HWTACACS Server Template">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0037.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0038.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0045.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="AAA">
<meta name="featurename" content="HWTACACS">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="AAA">
<meta name="featurename" content="HWTACACS">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featurename" content="AAA">
<meta name="featurename" content="AD">
<meta name="featurename" content="HWTACACS">
<meta name="featurename" content="LDAP">
<meta name="featurename" content="RADIUS">
<meta name="featurename" content="Local User">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563995901">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring an HWTACACS Server Template</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563995901"></a><a name="EN-US_TASK_0000001563995901"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an HWTACACS Server Template</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563995901__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>The device uses an HWTACACS server template to specify the HWTACACS server to be connected to the device. This template contains the IP address, port number, source interface, and shared key of the HWTACACS server. The configurations in this template must be the same as those on the HWTACACS server.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When the HWTACACS server supports the multiplexing mode, if the <strong>mux-mode</strong> parameter is specified during the configuration of the HWTACACS authentication, authorization, or accounting server, the server multiplexing mode is enabled. After the server multiplexing mode is enabled, the TCP connection established for authentication, authorization, or accounting is not closed immediately. New authentication, authorization, or accounting requests will continue to use this TCP connection within a certain period of time to improve the authentication, authorization, or accounting rate. By default, the server multiplexing mode is disabled.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563995901__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Create an HWTACACS server template and enter its view.</span><p><pre class="screen"><a href="cmdqueryname=hwtacacs-server+template"><b><span class="cmdname">hwtacacs-server template</span></b></a> <i><span class="varname">template-name</span></i></pre>
</p></li><li><span>Configure the HWTACACS authentication server.</span><p><pre class="screen"><a href="cmdqueryname=hwtacacs-server+authentication"><b><span class="cmdname">hwtacacs-server authentication</span></b></a> <span><i><span class="varname">ipv4-address</span></i></span> [ <i><span class="varname">port</span></i> ] [ <strong><span>public-net</span></strong><span> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></span> ] [ <strong><span>secondary</span></strong><span> | <strong><span>third</span></strong></span> | <strong>fourth</strong> ] [ <strong>shared-key</strong><strong> cipher</strong><em> cipher-string</em> ] [ <strong>mux-mode</strong> ]</pre>
</p></li><li><span>Configure the HWTACACS authorization server.</span><p><pre class="screen"><a href="cmdqueryname=hwtacacs-server+authorization"><b><span class="cmdname">hwtacacs-server authorization</span></b></a> <span><i><span class="varname">ipv4-address</span></i></span> [ <i><span class="varname">port</span></i> ] [ <strong><span>public-net</span></strong><span> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></span> ] [ <strong><span>secondary</span></strong><span> | <strong><span>third</span></strong></span> | <strong>fourth</strong> ] [ <strong>shared-key</strong><strong> cipher</strong><em> cipher-string</em> ] [ <strong>mux-mode</strong> ]</pre>
</p></li><li><span>Configure the HWTACACS accounting server.</span><p><pre class="screen"><a href="cmdqueryname=hwtacacs-server+accounting"><b><span class="cmdname">hwtacacs-server accounting</span></b></a> <span><i><span class="varname">ipv4-address</span></i></span> [ <i><span class="varname">port</span></i> ] [ <strong><span>public-net</span></strong><span> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></span> ] [ <strong><span>secondary</span></strong><span> | <strong><span>third</span></strong></span> | <strong>fourth</strong> ] [ <strong>shared-key</strong><strong> cipher</strong><em> cipher-string</em> ] [ <strong>mux-mode</strong> ]</pre>
</p></li><li><span>Configure the shared key of the HWTACACS server.</span><p><pre class="screen"><span><a href="cmdqueryname=hwtacacs-server+shared-key"><b><span class="cmdname">hwtacacs-server shared-key</span></b></a> <strong><span>cipher</span></strong> <i><span class="varname">key-string</span></i></span></pre>
<p>For security purposes, it is recommended that the shared key contain at least 16 characters and at least two types of the following characters: uppercase letters, lowercase letters, digits, and special characters.</p>
<p>For security purposes, you are advised to periodically change the shared key.</p>
</p></li><li><span>(Optional) Configure the source IP address for communication between the device and HWTACACS server.</span><p><pre class="screen"><a href="cmdqueryname=hwtacacs-server+source-ip"><b><span class="cmdname">hwtacacs-server source-ip</span></b></a> <span>{ </span><i><span class="varname">ip-address</span></i><span> | <strong><span>source-loopback</span></strong> <i><span class="varname">interface-number</span></i> | <strong>source-vlanif </strong><em>interface-number1</em> }</span></pre>
<p>By default, the device uses the IP address of an outbound interface as the source IP address of HWTACACS packets.</p>
</p></li><li><span>(Optional) Configure the format of the user name in the packets sent by the device to the HWTACACS server.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring the format of the user name in the packets sent to the HWTACACS server</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.8.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.8.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.8.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.8.2.1.2.4.1.1 "><p>Configure the user name entered by a user as the user name in the packets to be sent from the device to an HWTACACS server.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.8.2.1.2.4.1.2 "><p><a href="cmdqueryname=hwtacacs-server+user-name+original"><b><span class="cmdname">hwtacacs-server user-name original</span></b></a></p>
</td>
<td class="cellrowborder" rowspan="3" valign="top" width="33.33333333333333%" headers="mcps1.3.2.8.2.1.2.4.1.3 "><p>By default, the device encapsulates the domain name in the user name in the packets sent to the HWTACACS server.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.8.2.1.2.4.1.1 "><p>Configure the device to encapsulate a domain name in the user name when sending packets to the HWTACACS server.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.8.2.1.2.4.1.2 "><p><a href="cmdqueryname=hwtacacs-server+user-name+domain-included"><b><span class="cmdname">hwtacacs-server user-name domain-included</span></b></a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.8.2.1.2.4.1.1 "><p>Configure the device not to encapsulate a domain name in the user name when sending packets to the HWTACACS server.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.8.2.1.2.4.1.2 "><p><a href="cmdqueryname=undo+hwtacacs-server+user-name+domain-included"><b><span class="cmdname">undo hwtacacs-server user-name domain-included</span></b></a></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>(Optional) Configure a user name to be carried in the authentication start packets of administrators.</span><p><pre class="screen"><strong>hwtacacs-server authentication user-name in-authentication-start</strong></pre>
<p>By default, the authentication start packets of administrators do not carry the user name.</p>
<p>This function takes effect only for administrators.</p>
</p></li><li><span>(Optional) Configure the unit in which the traffic of an HWTACACS server is measured.</span><p><pre class="screen"><a href="cmdqueryname=hwtacacs-server+traffic-unit"><b><span class="cmdname">hwtacacs-server traffic-unit</span></b></a> { <strong><span>byte</span></strong> | <strong><span>kbyte</span></strong> | <strong><span>mbyte</span></strong> | <strong><span>gbyte</span></strong> }</pre>
<p>By default, the traffic of an HWTACACS server is measured in bytes.</p>
</p></li><li><span>(Optional) Set the response timeout interval and activation interval for the HWTACACS server.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" colspan="2" valign="middle" id="mcps1.3.2.11.2.1.1.5.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="middle" id="mcps1.3.2.11.2.1.1.5.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="middle" id="mcps1.3.2.11.2.1.1.5.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" colspan="2" valign="middle" headers="mcps1.3.2.11.2.1.1.5.1.1 "><p>Set the response timeout interval for the HWTACACS server.</p>
</td>
<td class="cellrowborder" valign="middle" headers="mcps1.3.2.11.2.1.1.5.1.2 "><p><a href="cmdqueryname=hwtacacs-server+timer+response-timeout"><b><span class="cmdname">hwtacacs-server timer response-timeout</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="middle" headers="mcps1.3.2.11.2.1.1.5.1.3 "><p>By default, the HWTACACS response timeout interval is 5 seconds.</p>
<p>If the device does not receive any response from the HWTACACS server within the specified response timeout interval, the device considers the HWTACACS server unavailable. In this case, the device attempts to use other authentication and authorization methods.</p>
</td>
</tr>
<tr><td class="cellrowborder" colspan="2" valign="middle" headers="mcps1.3.2.11.2.1.1.5.1.1 "><p>Set the activation interval for the primary HWTACACS server.</p>
</td>
<td class="cellrowborder" valign="middle" headers="mcps1.3.2.11.2.1.1.5.1.2 "><p><a href="cmdqueryname=hwtacacs-server+timer+quiet"><b><span class="cmdname">hwtacacs-server timer quiet</span></b></a> <em>value</em></p>
</td>
<td class="cellrowborder" valign="middle" headers="mcps1.3.2.11.2.1.1.5.1.3 "><p>By default, the primary HWTACACS server needs to wait for 5 minutes before it is restored to the active state.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>(Optional) In the user view, change the user password saved on the HWTACACS server.</span><p><pre class="screen"><a href="cmdqueryname=hwtacacs-user+change-password+hwtacacs-server"><b><span class="cmdname">hwtacacs-user change-password hwtacacs-server</span></b></a> <i><span class="varname">template-name</span></i></pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>For security purposes, change the password periodically.</li><li>After the weak password dictionary maintenance function is enabled, the passwords (which can be queried using the <a href="cmdqueryname=display+security+weak-password-dictionary"><b><span class="cmdname">display security weak-password-dictionary</span></b></a> command) defined in the weak password dictionary cannot be specified in this command.</li></ul>
</div></div>
<p>For example, run the following command to change the password of the user <strong>user1</strong> on the HWTACACS server. This user uses the HWTACACS server template named <strong>huawei</strong>.</p>
<pre class="screen">&lt;HUAWEI&gt; <strong>hwtacacs-user change-password hwtacacs-server huawei</strong>
Username:user1
Old Password: 
New Password: 
Re-enter New password: 
Info: The password has been changed successfully. </pre>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001563995901__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001563995901__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001563995901__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+hwtacacs-server+template"><b><span class="cmdname">display hwtacacs-server template</span></b></a> [ <strong>name</strong> <i><span class="varname">template-name</span></i> [ <strong><span>verbose</span></strong> ] ] command to check the HWTACACS server template configuration.</li><li>Run the <a href="cmdqueryname=test-aaa"><b><span class="cmdname">test-aaa</span></b></a> <i><span class="varname">user-name</span></i> <i><span class="varname">user-password</span></i> <strong><span>hwtacacs-template</span></strong> <i><span class="varname">template-name</span></i> [ <strong>accounting</strong> ] command to test the connectivity between the device and server. For details about common fault information and troubleshooting methods, see <a href="galaxy_aaa_cfg_0054.html">Testing the Server Connectivity</a>.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_aaa_cfg_0037.html">Configuring HWTACACS Authentication, Authorization, and Accounting
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_aaa_cfg_0038.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_aaa_cfg_0045.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>