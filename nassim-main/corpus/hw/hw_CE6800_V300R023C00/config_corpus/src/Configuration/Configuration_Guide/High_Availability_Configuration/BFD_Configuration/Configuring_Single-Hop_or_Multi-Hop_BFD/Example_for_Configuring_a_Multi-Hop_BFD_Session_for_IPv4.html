
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring a Multi-Hop BFD Session for IPv4">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_0005.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_0012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176661877">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring a Multi-Hop BFD Session for IPv4</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176661877"></a><a name="EN-US_TASK_0000001176661877"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring a Multi-Hop BFD Session for IPv4</h1>
<div class="taskbody" id="taskbody1580806801722"><div class="context"><a name="EN-US_TASK_0000001176661877__1.3.1"></a><a name="1.3.1"></a>
<div class="p" id="EN-US_TASK_0000001176661877__context153566401214023"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0000001176661877__p855739760214023">A multi-hop BFD session for IPv4 can be configured to monitor a multi-hop link on a network for quick fault detection. In <a href="#EN-US_TASK_0000001176661877__fig_dc_vrp_bfd_cfg_006301">Figure 1</a>, BFD monitors the multi-hop link between DeviceA and DeviceC in asynchronous mode.</p>
<div class="fignone" id="EN-US_TASK_0000001176661877__fig_dc_vrp_bfd_cfg_006301"><a name="EN-US_TASK_0000001176661877__fig_dc_vrp_bfd_cfg_006301"></a><a name="fig_dc_vrp_bfd_cfg_006301"></a><span class="figcap"><b>Figure 1 </b>Configuring multi-hop BFD for IPv4</span><div class="note" id="EN-US_TASK_0000001176661877__note04081140164712"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001176661877__p134081140154716">In this example, interface 1 and interface 2 represent <span>100GE</span><span>1/0/1</span> and <span>100GE</span><span>1/0/2</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0000001176661877__image1258188771214023" src="figure/en-us_image_0000001130782150.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176661877__1.3.2"></a><a name="1.3.2"></a>
<div class="p" id="EN-US_TASK_0000001176661877__context9200463214023"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001176661877__p1738298853214023">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001176661877__ol548516455214023"><li id="EN-US_TASK_0000001176661877__li538654568214023"><p id="EN-US_TASK_0000001176661877__p1523752271214023"><a name="EN-US_TASK_0000001176661877__li538654568214023"></a><a name="li538654568214023"></a>Assign IPv4 addresses to interfaces on DeviceA, DeviceB, and DeviceC to ensure that the devices can reach each other.</p>
</li><li id="EN-US_TASK_0000001176661877__li162511806214023"><p id="EN-US_TASK_0000001176661877__p1884208105214023"><a name="EN-US_TASK_0000001176661877__li162511806214023"></a><a name="li162511806214023"></a>Configure a BFD session on DeviceA to monitor the multi-hop path from DeviceA to DeviceC. Configure a BFD session on DeviceC to monitor the multi-hop path from DeviceC to DeviceA.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176661877__1.3.3"></a><a name="1.3.3"></a>
<div class="p" id="EN-US_TASK_0000001176661877__context1887083353517"><h4 class="sectiontitle">Procedure</h4><ol id="EN-US_TASK_0000001176661877__ol137522031173612"><li id="EN-US_TASK_0000001176661877__li19752193118369">Configure static routes to ensure that the devices are reachable from each other.<p id="EN-US_TASK_0000001176661877__p14840101343717"><a name="EN-US_TASK_0000001176661877__li19752193118369"></a><a name="li19752193118369"></a># Assign an IPv4 address to DeviceA's interface.</p>
<pre class="screen" id="EN-US_TASK_0000001176661877__screen684017131376">&lt;<span class="keyword" id="EN-US_TASK_0000001176661877__keyword138409138373">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001176661877__b1084041312378">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword7344102010507"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001176661877__keyword1034432012508">HUAWEI</span>] <strong id="EN-US_TASK_0000001176661877__b1784019136375">sysname DeviceA</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword1237215384418">*</span><span class="keyword" id="EN-US_TASK_0000001176661877__keyword17372115344413">HUAWEI</span>]<strong id="EN-US_TASK_0000001176661877__b0372195314417"> commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword7970183435014"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001176661877__b78417132371">interface <span>100ge</span> <span>1/0/1</span> </strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword19657143675011"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176661877__b484161315372">undo portswitc</strong>h
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword18485125716415">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176661877__b20841121383717">ip address 10.1.1.1 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword19427184416508">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176661877__b1884241323717">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword189420291421">*</span>DeviceA] <strong id="EN-US_TASK_0000001176661877__b143751134194214">commit</strong></pre>
<p id="EN-US_TASK_0000001176661877__p1684210132373"># Assign IPv4 addresses to DeviceB's interfaces.</p>
<pre class="screen" id="EN-US_TASK_0000001176661877__screen1284211316372">&lt;<span class="keyword" id="EN-US_TASK_0000001176661877__keyword3842191383717">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001176661877__b8842313193719">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword12935141475219"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001176661877__keyword593510143523">HUAWEI</span>] <strong id="EN-US_TASK_0000001176661877__b984213137379">sysname DeviceB</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword3536161992216">*</span><span class="keyword" id="EN-US_TASK_0000001176661877__keyword0536121917228">HUAWEI</span>]<strong id="EN-US_TASK_0000001176661877__b10536121942210"> commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword16261152965210"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001176661877__b1843613133719">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword20554123005219"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176661877__b984371333715">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword792417122619">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176661877__b1884316139378">ip address 10.1.1.2 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword6499201212458">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176661877__b6843513143713">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword1175732625111">*</span>DeviceB] <strong id="EN-US_TASK_0000001176661877__b137572262519">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword19353295312"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001176661877__b484310139373">interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword153642415315"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001176661877__b118441813183715">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword1921628122612">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001176661877__b1984411323716">ip address 10.2.1.1 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword11765317132315">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001176661877__b1584419135379">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword754419347517">*</span>DeviceB] <strong id="EN-US_TASK_0000001176661877__b16544123415117">commit</strong></pre>
<p id="EN-US_TASK_0000001176661877__p4846111363711"># Assign an IPv4 address to DeviceC's interface.</p>
<pre class="screen" id="EN-US_TASK_0000001176661877__screen198461013113715">&lt;<span class="keyword" id="EN-US_TASK_0000001176661877__keyword1384651310372">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001176661877__b1284641353713">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword1425514335310"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001176661877__keyword13846413143715">HUAWEI</span>] <strong id="EN-US_TASK_0000001176661877__b98461138372">sysname DeviceC</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword19802455102316">*</span><span class="keyword" id="EN-US_TASK_0000001176661877__keyword10802355172310">HUAWEI</span>]<strong id="EN-US_TASK_0000001176661877__b11802205518237"> commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword576184515317"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001176661877__b1784651316373">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword12542144720531"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176661877__b18471213123717">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword1243323613261">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176661877__b108471913123719">ip address 10.2.1.2 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword19356163662312">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176661877__b19847113143712">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword1799375165419">*</span>DeviceC] <strong id="EN-US_TASK_0000001176661877__b1099345105418">commit</strong></pre>
<p id="EN-US_TASK_0000001176661877__p884821303710"># Configure static routes.</p>
<pre class="screen" id="EN-US_TASK_0000001176661877__screen10848213123718">[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword0698511132411"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong id="EN-US_TASK_0000001176661877__b16848161317371"> ip route-static 10.2.1.0 255.255.255.0 10.1.1.2</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword166820537246">*</span>DeviceA] <strong id="EN-US_TASK_0000001176661877__b1682253172412">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword1286611141240"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC]<strong id="EN-US_TASK_0000001176661877__b1980216252512"> ip route-static 10.1.1.0 255.255.255.0 10.2.1.1</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword1839954842517">*</span>DeviceC] <strong id="EN-US_TASK_0000001176661877__b13399124819256">commit</strong></pre>
</li><li id="EN-US_TASK_0000001176661877__li168547272370">Configure multi-hop BFD between DeviceA and DeviceC.<p id="EN-US_TASK_0000001176661877__p129115126385"><a name="EN-US_TASK_0000001176661877__li168547272370"></a><a name="li168547272370"></a># Enable BFD on DeviceA, and configure a BFD session to monitor the link from DeviceA to DeviceC. You do not need to bind the BFD session to an interface.</p>
<pre class="screen" id="EN-US_TASK_0000001176661877__screen2912161213813">[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword737682035415"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong id="EN-US_TASK_0000001176661877__b991215122385"> bfd</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword2610162862413">*</span>DeviceA-bfd]<strong id="EN-US_TASK_0000001176661877__b9912181243813"> quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword3306531122411">*</span>DeviceA]<strong id="EN-US_TASK_0000001176661877__b17912181213383"> bfd atoc bind peer-ip 10.2.1.2</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword1958813331247">*</span>DeviceA-bfd-session-atoc]<strong id="EN-US_TASK_0000001176661877__b19121312133818"> discriminator local 10</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword2013973602410">*</span>DeviceA-bfd-session-atoc] <strong id="EN-US_TASK_0000001176661877__b109121512193820">discriminator remote 20</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword20129153819240">*</span>DeviceA-bfd-session-atoc] <strong id="EN-US_TASK_0000001176661877__b49131612173819">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword18768153525620">*</span>DeviceA] <strong id="EN-US_TASK_0000001176661877__b1176873595619">commit</strong></pre>
<p id="EN-US_TASK_0000001176661877__p3913131273812"># Enable BFD on DeviceC, and configure a BFD session to monitor the link from DeviceC to DeviceA. You do not need to bind the BFD session to an interface.</p>
<pre class="screen" id="EN-US_TASK_0000001176661877__screen4913111213386">[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword63838472568"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC]<strong id="EN-US_TASK_0000001176661877__b10913191233816"> bfd</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword203021342172414">*</span>DeviceC-bfd] <strong id="EN-US_TASK_0000001176661877__b12913512123818">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword6530114412414">*</span>DeviceC]<strong id="EN-US_TASK_0000001176661877__b1191351215383"> bfd ctoa bind peer-ip 10.1.1.1</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword970024692410">*</span>DeviceC-bfd-session-ctoa]<strong id="EN-US_TASK_0000001176661877__b16913212143811"> discriminator local 20</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword188977486242">*</span>DeviceC-bfd-session-ctoa] <strong id="EN-US_TASK_0000001176661877__b2914131212386">discriminator remote 10</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword682095113245">*</span>DeviceC-bfd-session-ctoa]<strong id="EN-US_TASK_0000001176661877__b1391410129387"> quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword1068110105713">*</span>DeviceC] <strong id="EN-US_TASK_0000001176661877__b17681511574">commit</strong></pre>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176661877__1.3.4"></a><a name="1.3.4"></a>
<div class="p" id="EN-US_TASK_0000001176661877__context93007372383"><h4 class="sectiontitle">Verifying the Configuration</h4><p id="EN-US_TASK_0000001176661877__p339435844214"># Check detailed BFD session information on DeviceA and DeviceC. The command output on DeviceA is used as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001176661877__screen239545810428">[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword12544151314570"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001176661877__b6395458204216">display bfd session all verbose</strong>
2020-01-01 11:21:06.8 
<span>(w): State in WTR  </span>
<span>(*): State is invalid </span><span>  </span>
<span>Total UP/DOWN Session Number : 1/0</span>
------------------------------------------------------------------------------
  Name : atoc                         <strong id="EN-US_TASK_0000001176661877__b1339595811427">(</strong><strong id="EN-US_TASK_0000001176661877__b42371755113412">Multiple Hops</strong><strong id="EN-US_TASK_0000001176661877__b1539517582428">)  State : Up</strong>      
------------------------------------------------------------------------------
  Local Discriminator    : 10             Remote Discriminator    : 20
  Session Detect Mode    : Asynchronous Mode Without Echo Function
  BFD Bind Type          : Peer Ip Address
  Bind Session Type      : Static
  Bind Peer IP Address   : 10.2.1.2
  Bind Interface         : -   
  FSM Board ID           : 1               TOS-EXP               : 7
  Min Tx Interval (ms)   : 1000      Min Rx Interval (ms)   : 1000
  Actual Tx Interval (ms): 1000             Actual Rx Interval (ms): 1000
  WTR Interval (ms)      : -                Detect Interval (ms)   : 3000
  Local Detect Multi     : 3                Active Multi           : -
  Echo Passive           : Disable          Acl Number             : -
  Destination Port       : 4784             TTL                    : 254
  Proc Interface Status  : Disable          Process PST            : Disable
  Config PST             : Disable
  Last Local Diagnostic  : No Diagnostic
  Bind Application       : No Application Bind
  Session Description    : -
------------------------------------------------------------------------------</pre>
<p id="EN-US_TASK_0000001176661877__p1140314463120">The command output shows that a multi-hop BFD session has been established and is in the <strong id="EN-US_TASK_0000001176661877__b142415225011">Up</strong> state.</p>
<p id="EN-US_TASK_0000001176661877__p1539625844214"># Run the <strong id="EN-US_TASK_0000001176661877__b41281144153410">shutdown </strong>command on DeviceA's interface <span>100GE</span> <span>1/0/1</span> to simulate a link fault.</p>
<pre class="screen" id="EN-US_TASK_0000001176661877__screen739610582423">[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword1156931885712"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001176661877__b12396175815423">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword1045818209577"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176661877__b1239715814215">shutdown</strong>
[<span class="keyword" id="EN-US_TASK_0000001176661877__keyword14904122116578"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001176661877__b1439735815427">quit</strong></pre>
<p id="EN-US_TASK_0000001176661877__p6397145854220"># Check the BFD session state on DeviceA and DeviceC. The command output on DeviceA is used as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001176661877__screen14397135814217">[DeviceA] <strong id="EN-US_TASK_0000001176661877__b193971558164217">display bfd session all verbose</strong>
2020-01-01 11:21:06.8
<span>(w): State in WTR  </span>
<span>(*): State is invalid </span><span>  </span>
<span>Total UP/DOWN Session Number : 1/0</span>
------------------------------------------------------------------------------
  Name : atoc                         <strong id="EN-US_TASK_0000001176661877__b15397105813421">(Multiple Hops)  State : Down</strong>   
------------------------------------------------------------------------------
  Local Discriminator    : 10             Remote Discriminator    : 20
  Session Detect Mode    : Asynchronous Mode Without Echo Function
  BFD Bind Type          : Peer Ip Address
  Bind Session Type      : Static
  Bind Peer IP Address   : 10.2.1.2
  Bind Interface         : -   
  FSM Board ID           : 1               TOS-EXP               : 7
  Min Tx Interval (ms)   : 1000      Min Rx Interval (ms)   : 1000
  Actual Tx Interval (ms): 1000             Actual Rx Interval (ms): 1000
  WTR Interval (ms)      : -                Detect Interval (ms)   : 3000
  Local Detect Multi     : 3                Active Multi           : -
  Destination Port       : 4784             TTL                    : 254
  Last Local Diagnostic  : No Diagnostic
  Bind Application       : No Application Bind
  Session Not Up Reason  : In negotiation  
  Session Description    : - 
------------------------------------------------------------------------------</pre>
<p id="EN-US_TASK_0000001176661877__p385012103216">The command output shows that the BFD session is in the <strong id="EN-US_TASK_0000001176661877__b1492016494119">Down</strong> state.</p>
</div></div>
<div class="example" id="EN-US_TASK_0000001176661877__example1882118851214023"><a name="EN-US_TASK_0000001176661877__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul id="EN-US_TASK_0000001176661877__ul1759220183214023"><li id="EN-US_TASK_0000001176661877__li114513044912"><p id="EN-US_TASK_0000001176661877__p145150124914"><a name="EN-US_TASK_0000001176661877__li114513044912"></a><a name="li114513044912"></a>DeviceA</p>
<pre class="screen" id="EN-US_TASK_0000001176661877__screen134511906493">#
sysname DeviceA
#
bfd
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 10.1.1.1 255.255.255.0
#
#
ip route-static 10.2.1.0 255.255.255.0 10.1.1.2
#
bfd atoc bind peer-ip 10.2.1.2
 discriminator local 10
 discriminator remote 20
#
return</pre>
</li><li id="EN-US_TASK_0000001176661877__li1679411109319"><p id="EN-US_TASK_0000001176661877__p47949103318"><a name="EN-US_TASK_0000001176661877__li1679411109319"></a><a name="li1679411109319"></a>DeviceB</p>
<pre class="screen" id="EN-US_TASK_0000001176661877__screen1794910331">#
sysname DeviceB
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 10.1.1.2 255.255.255.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 10.2.1.1 255.255.255.0
#
return</pre>
<p id="EN-US_TASK_0000001176661877__p11757154594317"></p>
</li><li id="EN-US_TASK_0000001176661877__li1356133611588"><p id="EN-US_TASK_0000001176661877__p1735612368581"><a name="EN-US_TASK_0000001176661877__li1356133611588"></a><a name="li1356133611588"></a>DeviceC</p>
<pre class="screen" id="EN-US_TASK_0000001176661877__screen93566362589">#
sysname DeviceC
#
bfd
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 10.2.1.2 255.255.255.0
#
ip route-static 10.1.1.0 255.255.255.0 10.2.1.1
#
bfd ctoa bind peer-ip 10.1.1.1
 discriminator local 20
 discriminator remote 10
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bfd_cfg_0005.html">Configuring Single-Hop or Multi-Hop BFD
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bfd_cfg_0010.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bfd_cfg_0012.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>