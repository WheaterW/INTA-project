
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring SPF Timers">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0055.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0060.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0062.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130623230">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring SPF Timers</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130623230"></a><a name="EN-US_TASK_0000001130623230"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring SPF Timers</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130623230__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring SPF timers, you have completed the following task:</p>
<ul><li><p><a href="vrp_ospfv3_cfg_0009.html">Configure basic OSPFv3 functions</a>.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130623230__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When the OSPFv3 LSDB changes, the shortest path needs to be recalculated. If the shortest path is calculated immediately after the LSDB changes each time, a large number of resources are consumed, and the device efficiency is adversely affected. Modifying the values of SPF timers can prevent exhaustion of bandwidth and routing resources caused by frequent network changes. You can adjust the interval (in milliseconds) for SPF calculation by modifying the parameters of the intelligent timer. Such adjustment can affect network convergence.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001130623230__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a normal SPF timer.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the OSPFv3 view.</span><p><pre class="screen"><a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
</p></li><li class="substepexpand"><span>Configure a normal SPF timer.</span><p><pre class="screen"><a href="cmdqueryname=spf+timers"><b><span class="cmdname">spf timers</span></b></a> <i><span class="varname">delay-interval</span></i> <i><span class="varname">hold-interval</span></i></pre>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130623230__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130623230__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure an intelligent SPF timer.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the OSPFv3 view.</span><p><pre class="screen"><a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
</p></li><li class="substepexpand"><span>Configure an intelligent SPF timer.</span><p><pre class="screen"><a href="cmdqueryname=spf-schedule-interval"><b><span class="cmdname">spf-schedule-interval</span></b></a> { <i><span class="varname">delay-interval</span></i> <i><span class="varname">hold-interval</span></i> | <strong><span>intelligent-timer</span></strong> <i><span class="varname">max-interval</span></i> <i><span class="varname">start-interval</span></i> <i><span class="varname">hold-interval-1</span></i><span> | <strong><span>millisecond</span></strong> <i><span class="varname">interval2</span></i></span> }</pre>
<p>The default values of <i><span class="varname">delay-interval</span></i>, <i><span class="varname">hold-interval</span></i>, <i><span class="varname">max-interval</span></i>, <i><span class="varname">start-interval</span></i>, and <i><span class="varname">hold-interval-1</span></i> are 5s, 10s, 5s, 50 ms, and 200 ms, respectively.</p>
<div class="p">If the intelligent timer is enabled using <strong><span>intelligent-timer</span></strong>, the interval for SPF calculation is as follows:<ol type="a"><li>The initial interval for SPF calculation is specified by <i><span class="varname">start-interval</span></i>.</li><li>The interval for SPF calculation for the nth (n â¥ 2) time equals <i><span class="varname">hold-interval-1</span></i> x 2<sup>(n â 2)</sup>.</li><li>After the interval specified by <i><span class="varname">hold-interval-1</span></i> x 2<sup>(n â 2)</sup> reaches the maximum interval specified by <i><span class="varname">max-interval</span></i>, OSPFv3 keeps using the maximum interval for SPF calculation.</li><li><p>If no flapping occurs during the interval from the end of the last SPF calculation to the start of the next SPF calculation, and the interval exceeds the maximum interval specified by <i><span class="varname">max-interval</span></i>, the intelligent timer exits.</p>
</li><li><p>If no flapping occurs in the previous interval but occurs in the current interval, SPF calculation is delayed for a period of <i><span class="varname">start-interval</span></i>. After the SPF calculation is complete, the current interval will be applied when waiting for the next SPF calculation.</p>
</li></ol>
</div>
</p><p><div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The normal SPF timer and intelligent SPF timer are mutually exclusive.</p>
</div></div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130623230__en-us_task_0234857734_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130623230__en-us_task_0234857734_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0000001130623230__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+ospfv3"><b><span class="cmdname">display ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ] command to check brief OSPFv3 information. The <strong>SPF Intelligent Timer</strong> field in the command output indicates the intelligent timer values used for SPF calculation.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospfv3_cfg_0055.html">Controlling OSPFv3 Route Calculation
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospfv3_cfg_0060.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ospfv3_cfg_0062.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>