
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Control Parameters for an MLD Querier">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_mld_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="vrp_mld_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="vrp_mld_cfg_0015.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MLD">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MLD">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001589161429">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Control Parameters for an MLD Querier</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001589161429"></a><a name="EN-US_TASK_0000001589161429"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Control Parameters for an MLD Querier</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001589161429__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>An MLD querier's parameters include the interval at which General Query messages are sent, robustness variable, maximum response time of Query messages, keepalive period of the Other Querier Present timer, and interval at which last-member query messages are sent. When all these parameters are set to the default values, the MLD querier can work normally. In addition, to promptly update and maintain group memberships and prevent network congestion caused by excessive packets, you can adjust the parameters of the MLD querier through commands.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces that connect multicast devices to the same user network segment must have the same MLD parameter configurations; otherwise, these multicast devices fail to communicate.</p>
<p>During configuration, ensure that the interval for sending General Query messages is longer than the maximum response time of Query messages but shorter than the keepalive period of the Other Querier Present timer.</p>
<p>The configuration can be performed in the MLD or interface view, and takes effect based on the following rules:</p>
<ul><li>The configuration in the MLD view takes effect globally, whereas that in the interface view takes effect only for the specified interface.</li><li>If the same parameters are configured in both the interface and MLD views, the configuration in the interface view takes effect. If the configuration is not performed on an interface, the configuration in the MLD view takes effect.</li><li>If non-default values are configured in the MLD view, the corresponding default values in the interface view do not take effect.</li></ul>
</div></div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001589161429__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure global MLD querier parameters.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the MLD view.</span><p><pre class="screen"><a href="cmdqueryname=mld"><b><span class="cmdname">mld</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure control parameters for the MLD querier as required.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring control parameters for the MLD querier</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.1.2.3.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="28.7028702870287%" id="mcps1.3.2.1.2.3.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="37.96379637963796%" id="mcps1.3.2.1.2.3.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.1 "><p>Configure an interval at which MLD General Query messages are sent.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=timer+query"><b><span class="cmdname">timer query</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.3 "><p>By default, the interval at which an MLD querier sends MLD General Query messages is 125s.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.1 "><p>Configure a robustness variable for the MLD querier.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=robust-count"><b><span class="cmdname">robust-count</span></b></a> <i><span class="varname">robust-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.3 "><p>By default, the robustness variable of MLD is 2. A larger robustness variable indicates a longer timeout period of a group membership.</p>
<p>When a device starts, it sends <i><span class="varname">robust-value</span></i> General Query messages. The sending interval is 1/4 of the configured interval for sending MLD General Query messages.</p>
<p>After the device receives a Multicast Listener Done message, it sends <i><span class="varname">robust-value</span></i> last-member query messages. The sending interval is the configured interval for sending last-member query messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.1 "><p>Configure the maximum response time of MLD General Query messages.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=max-response-time"><b><span class="cmdname">max-response-time</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.3 "><p>By default, the maximum response time of MLD General Query messages is 10s.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.1 "><p>Configure the keepalive period of the Other Querier Present timer.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=timer+other-querier-present"><b><span class="cmdname">timer other-querier-present</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.3 "><p>By default, the keepalive period of the Other Querier Present timer is calculated using the following formula:</p>
<p>Keepalive period of the Other Querier Present timer = Robustness variable x Interval for sending General Query messages + 1/2 x Maximum response time</p>
<p>If the robustness variable, interval for sending General Query messages, and maximum response time all use the default values, the keepalive period of the Other Querier Present timer is 255s.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.1 "><p>Configure an interval for sending last-member query messages.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=lastlistener-queryinterval"><b><span class="cmdname">lastlistener-queryinterval</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.3 "><p>By default, the interval for sending last-member query messages is 1s. The shorter the interval is, the more sensitive the querier is.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure MLD querier parameters on an interface.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the view of the interface connected to the user network segment.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Switch the interface working mode from Layer 2 to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
</p><p><p> Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li class="substepexpand"><span>Configure control parameters for the MLD querier as required.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Configuring control parameters for the MLD querier</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.2.2.4.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="28.7028702870287%" id="mcps1.3.2.2.2.4.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="37.96379637963796%" id="mcps1.3.2.2.2.4.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.1 "><p>Configure an interval at which MLD General Query messages are sent.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=mld+timer+query"><b><span class="cmdname">mld timer query</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.3 "><p>By default, the interval at which an MLD querier sends MLD General Query messages is 125s.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.1 "><p>Configure a robustness variable for the MLD querier.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=mld+robust-count"><b><span class="cmdname">mld robust-count</span></b></a> <i><span class="varname">robust-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.3 "><p>By default, the robustness variable of MLD is 2. A larger robustness variable indicates a longer timeout period of a group membership.</p>
<p>When a device starts, it sends <i><span class="varname">robust-value</span></i> General Query messages. The sending interval is 1/4 of the configured interval for sending MLD General Query messages.</p>
<p>After the device receives a Multicast Listener Done message, it sends <i><span class="varname">robust-value</span></i> last-member query messages. The sending interval is the configured interval for sending last-member query messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.1 "><p>Configure the maximum response time of MLD General Query messages.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=mld+max-response-time"><b><span class="cmdname">mld max-response-time</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.3 "><p>By default, the maximum response time of MLD General Query messages is 10s.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.1 "><p>Configure the keepalive period of the Other Querier Present timer.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=mld+timer+other-querier-present"><b><span class="cmdname">mld timer other-querier-present</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.3 "><p>By default, the keepalive period of the Other Querier Present timer is calculated using the following formula:</p>
<p>Keepalive period of the Other Querier Present timer = Robustness variable x Interval for sending General Query messages + 1/2 x Maximum response time</p>
<p>If the robustness variable, interval for sending General Query messages, and maximum response time all use the default values, the keepalive period of the Other Querier Present timer is 255s.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.1 "><p>Configure an interval for sending last-member query messages.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=mld+lastlistener-queryinterval"><b><span class="cmdname">mld lastlistener-queryinterval</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.3 "><p>By default, the interval for sending last-member query messages is 1s. The shorter the interval is, the more sensitive the querier is.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_mld_cfg_0001.html">MLD Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_mld_cfg_0008.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_mld_cfg_0015.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>