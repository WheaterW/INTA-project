
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Subnet-based VLAN Assignment">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0025.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0027.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="QinQ">
<meta name="featurename" content="VLAN">
<meta name="featurename" content="VLAN Mapping">
<meta name="featurename" content="VLAN Pool">
<meta name="featurename" content="Voice VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130782648">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Subnet-based VLAN Assignment</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130782648"></a><a name="EN-US_TASK_0000001130782648"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Subnet-based VLAN Assignment</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130782648__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In <a href="#EN-US_TASK_0000001130782648__fig17135183813121">Figure 1</a>, PC1, PC2, and PC3 are located on different network segments. It is necessary for PCs on different network segments to be added to different VLANs. In this example, PC1, PC2, and PC3 need to be added to VLAN 100, VLAN 200, and VLAN 300, respectively.</p>
<div class="fignone" id="EN-US_TASK_0000001130782648__fig17135183813121"><a name="EN-US_TASK_0000001130782648__fig17135183813121"></a><a name="fig17135183813121"></a><span class="figcap"><b>Figure 1 </b>Networking diagram of configuring subnet-based VLAN assignment</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1 represents <span>100GE</span> <span>1/0/1</span>.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001176742353.png"></span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <span>CE6885-LL (low latency mode)</span> does not support this example.</p>
</div></div>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130782648__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create VLANs and associate subnets with the VLANs.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname DeviceA</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>vlan batch 10</strong><strong>0 200 300</strong>
[<span class="keyword">*</span>DeviceA] <strong>vlan </strong><strong>100</strong>
[<span class="keyword">*</span>DeviceA-vlan100] <strong>ip-subnet-vlan 1 ip 192.168.1.2 24 priority 2</strong>
[<span class="keyword">*</span>DeviceA-vlan100] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>vlan 200</strong>
[<span class="keyword">*</span>DeviceA-vlan200] <strong>ip-subnet-vlan 1 ip 192.168.2.2 24 priority 3</strong>
[<span class="keyword">*</span>DeviceA-vlan200] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>vlan 300</strong>
[<span class="keyword">*</span>DeviceA-vlan300] <strong>ip-subnet-vlan 1 ip 192.168.3.2 24 priority 4</strong>
[<span class="keyword">*</span>DeviceA-vlan300] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
</p></li><li><span>Set <span>100GE</span> <span>1/0/1</span> to a hybrid interface, configure the interface to allow packets from VLAN 100, VLAN 200, and VLAN 300 to pass through, and enable subnet-based VLAN assignment on the interface.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port link-type hybrid</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port hybrid untagged vlan 100</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port hybrid untagged vlan 200</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port hybrid untagged vlan 300</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>ip-subnet-vlan enable</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001130782648__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Run the <a href="cmdqueryname=display+ip-subnet-vlan+vlan+all"><b><span class="cmdname">display ip-subnet-vlan vlan all</span></b></a> command on DeviceA to check information about subnets associated with VLANs.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>display ip-subnet-vlan vlan all</strong>
 IP-subnet-VLAN count: 3                 total count: 3
 ----------------------------------------------------------------
 VLAN    Index  IpAddress            SubnetMask          Priority
 ----------------------------------------------------------------
  100        1  192.168.1.2          255.255.255.0              2
  200        1  192.168.2.2          255.255.255.0              3
  300        1  192.168.3.2          255.255.255.0              4
 ----------------------------------------------------------------</pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001130782648__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Configuration Scripts</h4><p>DeviceA</p>
<pre class="screen">#
sysname DeviceA
#
vlan batch 100 200 300
#
vlan 100
 ip-subnet-vlan 1 ip 192.168.1.2 255.255.255.0 priority 2
#
vlan 200
 ip-subnet-vlan 1 ip 192.168.2.2 255.255.255.0 priority 3
#
vlan 300
 ip-subnet-vlan 1 ip 192.168.3.2 255.255.255.0 priority 4
#
interface <span>100GE</span><span>1/0/1</span>
 port link-type hybrid
 port hybrid untagged vlan 100
 port hybrid untagged vlan 200
 port hybrid untagged vlan 300
 ip-subnet-vlan enable
#
return</pre>
<p></p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_vlan_cfg_0016.html">Configuring Intra-VLAN Communication
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_vlan_cfg_0025.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_vlan_cfg_0027.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>