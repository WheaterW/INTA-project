
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Dynamic Domain Name Resolution">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_dns_cfg_0023.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_dns_cfg_0024.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_dns_cfg_0021.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DNS">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DNS">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="DNS">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512671382">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Dynamic Domain Name Resolution</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512671382"></a><a name="EN-US_TASK_0000001512671382"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Dynamic Domain Name Resolution</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001512671382__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><div class="p">Before configuring dynamic domain name resolution, you have completed the following task:<ul><li>Configure a route between the device and DNS server.</li></ul>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001512671382__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Dynamic domain name resolution requires a dedicated DNS server, which receives domain name resolution requests from DNS clients, for DNS query. Upon receiving a request, the DNS server searches for the corresponding IP address of the domain name in its DNS database. If no matching entry is found, it sends the request to a higher-level DNS server. This process continues until the DNS server finds the corresponding IP address or detects that the corresponding IP address of the domain name does not exist. The DNS server then returns a result to the DNS client.</p>
<p></p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The CE6885-LL supports IPv6 domain name resolution only in standard forwarding mode.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512671382__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable dynamic domain name resolution.</span><p><pre class="screen"><a href="cmdqueryname=dns+resolve"><b><span class="cmdname">dns resolve</span></b></a></pre>
</p></li><li><span>Configure the IPv4 or IPv6 address of the DNS server to be accessed by the device.</span><p><p>Configure the IPv4 or IPv6 address of the DNS server statically.</p>
</p><ul><li>Configure the IPv4 address of the DNS server.<pre class="screen"><a href="cmdqueryname=dns+server"><b><span class="cmdname">dns server</span></b></a> <i><span class="varname">ip-address</span></i> [ <strong>vpn-instance</strong><em> vpn-instance-name</em> ]</pre>
</li><li>Configure the IPv6 address of the DNS server.<pre class="screen"><a href="cmdqueryname=dns+server+ipv6"><b><span class="cmdname">dns server ipv6</span></b></a> <i><span class="varname">ipv6-address</span></i> <span>[ <i><span class="varname">interface-type interface-number</span></i> ]</span> [ <strong>vpn-instance </strong><em>vpn-instance-name</em> ]</pre>
</li></ul>
</li><li><span>(Optional) Configure the source IPv4 or IPv6 address used by the device to communicate with the DNS server.</span><ul><li>Configure the source IPv4 address used by the device to communicate with the DNS server.<pre class="screen"><a href="cmdqueryname=dns+server+source-ip"><b><span class="cmdname">dns server source-ip</span></b></a> [ <strong>vpn-instance</strong><em> vpn-instance-name</em> ] <i><span class="varname">ip-address</span></i></pre>
<p>You can also configure the device to use the IP address of a specified interface as the source IP address.</p>
<pre class="screen"><a href="cmdqueryname=dns+server+source-interface"><b><span class="cmdname">dns server source-interface</span></b></a> { <i><span class="varname">interface-type interface-number</span></i> | <em>interface-name</em> }</pre>
<p>By default, the source interface IP address is used as the source IP address of DNS query packets. This function is supported only if the device performs a DNS query through the DNS server with an IPv4 address and is not supported if the device performs a DNS query through the DNS server with an IPv6 address.</p>
</li><li>Configure the source IPv6 address used by the device to communicate with the DNS server.<pre class="screen"><a href="cmdqueryname=dns+server+ipv6+source-ip"><b><span class="cmdname">dns server ipv6 source-ip</span></b></a> [ <strong>vpn-instance</strong><em> vpn-instance-name</em> ] <i><span class="varname">ipv6-address</span></i></pre>
</li></ul>
<p><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Ensure that the source IP address is an IP address on the device and that the route between the IP address and the DNS server is reachable.</p>
<p>Ensure that the source IP address and the IP address of the DNS server are on the same VPN or public network.</p>
</div></div>
</p></li><li><span>(Optional) Configure the device to send DNS query requests to the DNS server on a specified VPN.</span><p><pre class="screen"><a href="cmdqueryname=dns+server+vpn-instance"><b><span class="cmdname">dns server vpn-instance</span></b></a> <em>vpn-instance-name</em></pre>
</p><p><p>By default, a device can only send DNS query requests to a DNS server on a public network.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If this command is run more than once, the latest configuration overrides the previous one.</p>
<p>A device can send DNS query requests to a DNS server on a public network or VPN.</p>
<p>A device can respond to DNS query requests sent by DNS clients on multiple VPNs.</p>
</div></div>
</p></li><li><span>(Optional) Configure a domain name suffix list.</span><p><pre class="screen"><a href="cmdqueryname=dns+domain"><b><span class="cmdname">dns domain</span></b></a> <em>domain-name</em> [ <strong>vpn-instance</strong><em> vpn-instance-name</em> ]</pre>
</p><p><p>Pre-defining some domain name suffixes allows you to enter only parts of a domain name. The system automatically adds a specific suffix to resolve the domain name.</p>
<div class="p">For instance, if you configure "com" in the suffix list and enter "example" in a domain name query, the system automatically associates "example" with the suffix "com" and searches for "example.com." You may encounter the following situations during a resolution process:<ul><li><p>If you enter a domain name without a period (.), such as "example", the system considers it as a hostname and adds suffixes for a search. If there is no matched domain name, the system searches for an IP address mapped to "example."</p>
</li><li><p>If you enter a domain name with a period (.), such as "www.example", the system immediately searches for it. If the system does not find a matched entry, it adds every configured suffix to search for an IP address mapped to the domain name.</p>
</li><li><p>If you enter a domain name with a period (.) at the end, such as "example.com.", the system removes the last period (.) before searching for an IP address mapped to the domain name. If the search fails, the system adds every configured suffix to the domain name without the last period to search for an IP address mapped to the domain name.</p>
</li></ul>
</div>
</p></li><li><span>(Optional) Customize a DNS.</span><p><p>Perform this step to customize DNS configurations.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Customizing a DNS</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.7.2.2.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.7.2.2.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.7.2.2.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.7.2.2.2.4.1.1 "><p>Configure the maximum and minimum life cycles of the DNS cache for applications.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.7.2.2.2.4.1.2 "><p><a href="cmdqueryname=dns+application+cache+ttl"><b><span class="cmdname">dns application cache ttl</span></b></a> <strong>maximum</strong> <em>max-seconds</em> <strong>minimum</strong> <em>min-seconds</em></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.7.2.2.2.4.1.3 "><p>By default, the maximum and minimum life cycles of the DNS cache for applications are 86400s and 600s, respectively.</p>
<p>The DNS cache for applications refers to that used by other modules (such as SIP and GRE) of the device to resolve domain names.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.7.2.2.2.4.1.1 "><p>Configure a mode for the device to select a DNS server.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.7.2.2.2.4.1.2 "><p><a href="cmdqueryname=dns-server-select-algorithm"><b><span class="cmdname">dns-server-select-algorithm</span></b></a> { <strong>fixed</strong> | <strong>auto</strong> }</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.7.2.2.2.4.1.3 "><p>By default, the mode for a device to select a DNS server is <strong>auto</strong>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.7.2.2.2.4.1.1 "><p>Configure the number of times that the device retransmits query requests to the destination DNS server.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.7.2.2.2.4.1.2 "><p><a href="cmdqueryname=dns+forward+retry-number"><b><span class="cmdname">dns forward retry-number</span></b></a> <em>number</em></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.7.2.2.2.4.1.3 "><p>By default, a device retransmits query requests to the destination DNS server twice.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.7.2.2.2.4.1.1 "><p>Configure a retransmission timeout period for query requests to the destination DNS server.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.7.2.2.2.4.1.2 "><p><a href="cmdqueryname=dns+forward+retry-timeout"><b><span class="cmdname">dns forward retry-timeout</span></b></a> <em>timeout-value</em></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.7.2.2.2.4.1.3 "><p>By default, the retransmission timeout period for query requests to the destination DNS server is 3s.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The total timeout period for DNS query requests obtained using the <a href="cmdqueryname=dns+forward+retry-number"><b><span class="cmdname">dns forward retry-number</span></b></a> and <a href="cmdqueryname=dns+forward+retry-timeout"><b><span class="cmdname">dns forward retry-timeout</span></b></a> commands cannot be too short. Generally, default values are used. If services become abnormal because a long time is taken to wait for a resolution response from the DNS server, you can prolong the total timeout period.</p>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512671382__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512671382__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001512671382__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+dns+configuration"><b><span class="cmdname">display dns configuration</span></b></a> command to check global DNS configurations.</li><li>Run the <a href="cmdqueryname=display+dns+dynamic-host"><b><span class="cmdname">display dns dynamic-host</span></b></a><span> [ <strong>ip</strong> ] [ <em>domain-name</em> ]</span> [ <strong>vpn-instance</strong><em> vpn-instance-name</em> ] command to check dynamic IPv4 DNS entries.</li><li>Run the <a href="cmdqueryname=display+dns+ipv6+dynamic-host"><b><span class="cmdname">display dns ipv6 dynamic-host</span></b></a> [ <i><span class="varname">domain-name</span></i> ] [ <strong>vpn-instance</strong><em> vpn-instance-name</em> ] command to check dynamic IPv6 DNS entries.</li><li>Run the <a href="cmdqueryname=display+dns+server"><b><span class="cmdname">display dns server</span></b></a><span> [ <strong>vpn-instance</strong><em> vpn-instance-name</em> ] [ <strong><span>verbose </span></strong>]</span> command to check DNS server information.</li><li>Run the <a href="cmdqueryname=display+dns+domain"><b><span class="cmdname">display dns domain</span></b></a><span> [ <strong>vpn-instance</strong><em> vpn-instance-name</em> ] [ <strong><span>verbose</span></strong> ]</span> command to check domain name suffix information.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_dns_cfg_0023.html">Configuring a Device as a DNS Client for DNS Query
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_dns_cfg_0024.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_dns_cfg_0021.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>