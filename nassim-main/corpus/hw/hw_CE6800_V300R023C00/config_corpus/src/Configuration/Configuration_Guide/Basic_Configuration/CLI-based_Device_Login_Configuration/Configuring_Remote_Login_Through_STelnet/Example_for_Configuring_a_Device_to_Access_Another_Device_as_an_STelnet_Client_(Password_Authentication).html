
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring a Device to Access Another Device as an STelnet Client (Password Authentication)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_login_cfg_0013.html">
<meta name="DC.Relation" scheme="URI" content="vrp_login_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="vrp_login_cfg_0017.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Stelnet">
<meta name="featurename" content="CLI-based Device Login">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Stelnet">
<meta name="featurename" content="CLI-based Device Login">
<meta name="featuretype" content="Basic Configuration">
<meta name="featurename" content="Console">
<meta name="featurename" content="Stelnet">
<meta name="featurename" content="Telnet">
<meta name="featurename" content="CLI-based Device Login">
<meta name="featuretype" content="Basic Configuration">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001827083937">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring a Device to Access Another Device as an STelnet Client (Password Authentication)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001827083937"></a><a name="EN-US_TASK_0000001827083937"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring a Device to Access Another Device as an STelnet Client (Password Authentication)</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001827083937__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>The customer requires secure data exchange between the server and client. In <a href="#EN-US_TASK_0000001827083937__fig1864417281813">Figure 1</a>, the SSH user <strong>Client</strong> is configured to use the password authentication mode to log in to the SSH server. A new port number is configured, and the default port number is not used.</p>
<div class="fignone" id="EN-US_TASK_0000001827083937__fig1864417281813"><a name="EN-US_TASK_0000001827083937__fig1864417281813"></a><a name="fig1864417281813"></a><span class="figcap"><b>Figure 1 </b>Network diagram for login to another device using STelnet</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1 represents <span>100GE</span><span>1/0/1</span>.</p>
</div></div>
<br><span><img src="figure/en-us_image_0000001780387520.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001827083937__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>On the SSH server, set the authentication mode to password authentication for the SSH user.</p>
</li><li><p>Enable the STelnet service on the SSH server.</p>
</li><li><p>Set the service type of the SSH user to STelnet on the SSH server.</p>
</li><li><p>Set an SSH server listening port number on the SSH server to prevent attackers from accessing the standard SSH service port, ensuring security.</p>
</li><li><p>Configure the SSH user to log in to the SSH server through STelnet.</p>
</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001827083937__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create an SSH user on the server.</span><p><p># Configure a VTY user interface.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname SSH Server</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>user-interface vty 0 4</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-ui-vty0-4] <strong>authentication-mode aaa</strong>
[<span class="keyword">*</span>SSH Server-ui-vty0-4] <strong>protocol inbound ssh</strong>
[<span class="keyword">*</span>SSH Server-ui-vty0-4] <strong>user privilege level 3</strong>
[<span class="keyword">*</span>SSH Server-ui-vty0-4] <strong>quit</strong>
[*SSH Server] <strong>commit</strong></pre>
<p># Create an SSH user named <strong>client</strong>. Configure the password authentication mode for the user and set the password to <strong>YsHsjx_202206</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>aaa</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-aaa] <strong>local-user client password</strong>
Please configure the login password (8-128)
It is recommended that the password consist of four types of characters, including lowercase letters, uppercase letters, numerals and special characters. 
Please enter password:                                      
Please confirm password:                               
[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client privilege level 3</strong>
[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client service-type ssh</strong>
[<span class="keyword">*</span>SSH Server-aaa] <strong>quit</strong>
[<span class="keyword">*</span>SSH Server] <strong>ssh user client</strong>
[<span class="keyword">*</span>SSH Server] <strong>ssh user client authentication-type password</strong>
[*SSH Server] <strong>commit</strong></pre>
<p># Configure the encryption algorithm, HMAC authentication algorithm, key exchange algorithm list, and public key algorithm on <strong>Client</strong>.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname client</strong>
[*<span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client] <strong>ssh client cipher aes128_ctr aes256_ctr aes192_ctr aes128_gcm aes256_gcm</strong>
[<span class="keyword">*</span>client] <strong>ssh client hmac sha2_256 sha2_512</strong>
[<span class="keyword">*</span>client] <strong>ssh client key-exchange dh_group_exchange_sha256 dh_group16_sha512</strong>
[<span class="keyword">*</span>client] <strong>ssh client publickey rsa_sha2_256 rsa_sha2_512</strong>
[*client] <strong>commit</strong></pre>
</p></li><li><span>Enable the STelnet service on the SSH server and specify the source interface for the SSH server.</span><p><p># Enable the STelnet service.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>stelnet server enable</strong></pre>
<p># Specify the source interface for the SSH server.</p>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh server-source all-interface</strong> 
[*SSH Server] <strong>commit</strong></pre>
<p># Configure the public key algorithm, encryption algorithm, key exchange algorithm list, HMAC authentication algorithm, and minimum key length on the SSH server.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server]<strong> ssh server cipher aes128_ctr aes256_ctr aes192_ctr aes128_gcm aes256_gcm</strong>
[<span class="keyword">*</span>SSH Server]<strong> ssh server hmac sha2_256 sha2_512</strong>
[<span class="keyword">*</span>SSH Server]<strong> ssh server key-exchange dh_group_exchange_sha256 dh_group16_sha512</strong>
[<span class="keyword">*</span>SSH Server]<strong> ssh server publickey rsa_sha2_256 rsa_sha2_512</strong>
[<span class="keyword">*</span>SSH Server]<strong> ssh server dh-exchange min-len 3072</strong>
[*SSH Server] <strong>commit</strong></pre>
</p></li><li><span>Set the service type of the SSH user <strong>client</strong> to STelnet.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>ssh user client service-type stelnet</strong></pre>
</p></li><li><span>Configure a new listening port number on the SSH server.</span><p><pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh server port 1025</strong>
[*SSH Server] <strong>commit</strong></pre>
</p></li><li><span>Connect the STelnet client to the SSH server.</span><p><p># Enable the first login function for the SSH client.</p>
<p>Enable first login for <strong>client</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client] <strong>ssh client first-time enable</strong>
[*client] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client] <strong>quit</strong></pre>
<p># Log in to the SSH server from the STelnet client in password authentication mode by entering the user name and password.</p>
<pre class="screen">&lt;client&gt; <strong>stelnet 10.1.1.1 1025</strong>
Trying 10.1.1.1 ...
Press CTRL+K to abort
Connected to 10.1.1.1 ...
The server's public key does not match the one cached before. 
The server is not authenticated. Continue to access it?[Y/N]:<strong>y</strong>
The keyname:10.1.1.1 already exists. Update it? [Y/N]:<strong>n</strong>

Please input the username: <strong>client</strong>    
Enter password:</pre>
<p>Enter the password. The following information indicates that the login is successful:</p>
<pre class="screen">Warning: The initial password poses security risks.                             
The password needs to be changed. Change now? [Y/N]:<strong>n</strong>

Info: The max number of VTY users is 21, the number of current VTY users online is 4, and total number of terminal users online is 4.                           
      The current login time is 2023-12-31 11:22:06.                            
&lt;SSH Server&gt;</pre>
<p>If the user view is displayed, the login is successful. If the message <strong>Session is disconnected</strong> is displayed, the login fails.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001827083937__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>The <strong>display ssh server status</strong> command output indicates that the STelnet service has been enabled. The <strong>display ssh user-information</strong> command output contains information about SSH users on the server.</p>
<p># Check the status of the SSH server.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>display ssh server status</strong>
SSH Version                                : 2.0
SSH authentication timeout (Seconds)       : 60
SSH authentication retries (Times)         : 3
SSH server key generating interval (Hours) : 0
SSH version 1.x compatibility              : Enable
SSH server keepalive                       : Disable
SFTP IPv4 server                           : Disable
SFTP IPv6 server                           : Disable
<strong>STELNET IPv4 server</strong>                     : <strong>Enable</strong>
STELNET IPv6 server                        : Enable
SNETCONF IPv4 server                       : Enable
SNETCONF IPv6 server                       : Enable
SNETCONF IPv4 server port(830)             : Disable
SNETCONF IPv6 server port(830)             : Disable
SCP IPv4 server                            : Enable
SCP IPv6 server                            : Enable
SSH port forwarding                        : Disable
SSH IPv4 server port                       : 1025
SSH IPv6 server port                       : 1025
ACL name                                   :
ACL number                                 :
ACL6 name                                  : 
ACL6 number                                :
SSH server ip-block                        : Enable</pre>
<p># Check information about SSH users.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>display ssh user-information</strong>
--------------------------------------------------------------------------------
User Name             : client
Authentication type   : password
User public key name  : --
User public key type  : --
Sftp directory        : flash:
Service type          : stelnet
--------------------------------------------------------------------------------
Total 1, 1 printed    </pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001827083937__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p>SSH server</p>
<pre class="screen">#
sysname SSH Server
#
aaa
 local-user client password irreversible-cipher $1d$v!=.5/:(q-$xL=\K+if"'S}&gt;k7vGP5$_ox0B@ys7.'DBHL<font style="font-size:8pt" Face="Courier New" >~</font>3*aN$
 local-user client service-type ssh
 local-user client privilege level 3
#
ssh server port 1025
stelnet server enable
ssh user client
ssh user client authentication-type password
ssh user client service-type stelnet
ssh server-source all-interface
#
ssh server cipher aes128_ctr aes256_ctr aes192_ctr aes128_gcm aes256_gcm
ssh server hmac sha2_256 sha2_512
ssh server key-exchange dh_group_exchange_sha256 dh_group16_sha512
ssh server publickey rsa_sha2_256 rsa_sha2_512
ssh server dh-exchange min-len 3072
#
user-interface vty 0 4
 authentication-mode aaa
 protocol inbound ssh
 user privilege level 3
#
return</pre>
</li><li><p>Client</p>
<pre class="screen">#
sysname client
#
ssh client first-time enable
#
ssh client cipher aes128_ctr aes256_ctr aes192_ctr aes128_gcm aes256_gcm
ssh client hmac sha2_256 sha2_512
ssh client key-exchange dh_group_exchange_sha256 dh_group16_sha512
ssh client publickey rsa_sha2_256 rsa_sha2_512
#
return</pre>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_login_cfg_0013.html">Configuring Remote Login Through STelnet
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_login_cfg_0016.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_login_cfg_0017.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>