
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Basic OSPFv3 Functions">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0009.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0016.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176742683">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Basic OSPFv3 Functions</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176742683"></a><a name="EN-US_TASK_0000001176742683"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Basic OSPFv3 Functions</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176742683__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0000001176742683__fig_dc_vrp_ospfv3_cfg_206301">Figure 1</a>, OSPFv3 runs on all devices and the entire AS is divided into three areas. DeviceB and DeviceC function as ABRs to forward inter-area routes. After the configuration is complete, each device should learn the routes to all IPv6 prefixes in the AS.</p>
<div class="fignone" id="EN-US_TASK_0000001176742683__fig_dc_vrp_ospfv3_cfg_206301"><a name="EN-US_TASK_0000001176742683__fig_dc_vrp_ospfv3_cfg_206301"></a><a name="fig_dc_vrp_ospfv3_cfg_206301"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring basic OSPFv3 functions</span><div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1, interface 2, and interface 3 represent <span>100GE</span> <span>1/0/1</span>, <span>100GE</span> <span>1/0/2</span>, and <span>100GE</span> <span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001176742769.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176742683__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>Note the following during the configuration:</p>
<ul><li><p>The backbone area is responsible for forwarding inter-area routes. In addition, the routing information between non-backbone areas must be forwarded through the backbone area. OSPFv3 defines the following rules for the backbone area:</p>
<ul><li>Connectivity must be available between non-backbone areas and the backbone area.</li><li>Connectivity must be available over the backbone area.</li></ul>
</li><li>The intervals at which Hello, Dead, and Poll packets are sent on the local interface must be the same as those intervals on the remote interface. Otherwise, the OSPFv3 neighbor relationship cannot be established.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176742683__1.3.3"></a><a name="1.3.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Enable basic OSPFv3 functions on each device.</p>
</li><li><p>Specify IPv6 links in different areas.</p>
</li><li>Configure ciphertext authentication mode for the OSPFv3 area.</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176742683__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IPv6 address to each interface.</span><p><p>Assign an IPv6 address to each interface involved according to <a href="#EN-US_TASK_0000001176742683__fig_dc_vrp_ospfv3_cfg_206301">Figure 1</a>. For detailed configurations, see <a href="#EN-US_TASK_0000001176742683__postreq15335648163219">Configuration Scripts</a>.</p>
</p></li><li><span>Configure basic OSPFv3 functions.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>ospfv3 1</strong>
[<span class="keyword">*</span>DeviceA-ospfv3-1] <strong>router-id 1.1.1.1</strong>
[<span class="keyword">*</span>DeviceA-ospfv3-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span><span>1/0/3</span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>ospfv3 1 area 1</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span><span>1/0/2</span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>ospfv3 1 area 1</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceA] <strong>commit</strong></span></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>ospfv3 1</strong>
[<span class="keyword">*</span>DeviceB-ospfv3-1] <strong>router-id 2.2.2.2</strong>
[<span class="keyword">*</span>DeviceB-ospfv3-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB] <strong>interface <span>100ge</span><span>1/0/1</span></strong>
[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 1 area 0</strong>
[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB] <strong>interface <span>100ge</span><span>1/0/2</span></strong>
[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong>ospfv3 1 area 1</strong>
[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceB] <strong>commit</strong></span></pre>
<p># Configure DeviceC.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong>ospfv3 1</strong>
[<span class="keyword">*</span>DeviceC-ospfv3-1] <strong>router-id 3.3.3.3</strong>
[<span class="keyword">*</span>DeviceC-ospfv3-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceC] <strong>interface <span>100ge</span><span>1/0/1</span></strong>
[<span class="keyword">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 1 area 0</strong>
[<span class="keyword">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceC] <strong>interface <span>100ge</span><span>1/0/2</span></strong>
[<span class="keyword">*</span>DeviceC-<span>100GE</span><span>1/0/2</span>] <strong>ospfv3 1 area 2</strong>
[<span class="keyword">*</span>DeviceC-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceC] <strong>commit</strong></span></pre>
<p># Configure DeviceD.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong>ospfv3 1</strong>
[<span><span class="keyword">*</span></span>DeviceD-ospfv3-1] <strong>router-id 4.4.4.4</strong>
[<span><span class="keyword">*</span></span>DeviceD-ospfv3-1] <strong>quit</strong>
[<span><span class="keyword">*</span></span>DeviceD] <strong>interface <span>100ge</span><span>1/0/2</span></strong>
[<span><span class="keyword">*</span></span>DeviceD-<span>100GE</span><span>1/0/2</span>] <strong>ospfv3 1 area 2</strong>
[<span><span class="keyword">*</span></span>DeviceD-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceD] <strong>commit</strong></span></pre>
</p></li><li><span>Configure ciphertext authentication mode for the OSPFv3 area.</span><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword">*</span>DeviceA] <strong>ospfv3 1</strong>
[<span class="keyword">*</span>DeviceA-ospfv3-1] <strong>area 0.0.0.1</strong>
[<span class="keyword">*</span>DeviceA-ospfv3-1-area-0.0.0.0] <strong>authentication-mode hmac-sha256 key-id 1 cipher YsHsjx_202206</strong>
[<span class="keyword">*</span>DeviceA-ospfv3-1-area-0.0.0.0] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceA] <strong>commit</strong></span></pre>
<p># Configure <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword">*</span>DeviceB] <strong>ospfv3 1</strong>
[<span class="keyword">*</span>DeviceB-ospfv3-1] <strong>area 0.0.0.1</strong>
[<span class="keyword">*</span>DeviceB-ospfv3-1-area-0.0.0.0] <strong>authentication-mode hmac-sha256 key-id 1 cipher YsHsjx_202206</strong>
[<span class="keyword">*</span>DeviceB-ospfv3-1-area-0.0.0.0] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceB] <strong>commit</strong></span></pre>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Device B and Device A must be configured with the same password. Otherwise, the neighbor relationship cannot be established.</p>
</div></div>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001176742683__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Check information about the OSPFv3 neighbors of DeviceB. If the neighbor relationships are in the Full state, the neighbor relationships are established successfully.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>display ospfv3 peer</strong>
   OSPFv3 Process (1)
   Total number of peer(s): 2
    Peer(s) in full state: 2
   OSPFv3 Area (0.0.0.1)
   Neighbor ID    Pri   <strong>State</strong>       Dead Time   Interface               Instance ID
   1.1.1.1        1     <strong>Full</strong>/ -     00:00:34    <span>100GE</span><span>1/0/2</span>               0

   OSPFv3 Area (0.0.0.0)
   Neighbor ID    Pri   <strong>State</strong>       Dead Time   Interface               Instance ID
   3.3.3.3        1     <strong>Full</strong>/ -     00:00:32    <span>100GE</span><span>1/0/1</span>               0</pre>
<p># Check information about the OSPFv3 neighbors of DeviceC.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong>display ospfv3 peer</strong>
   OSPFv3 Process (1)
   Total number of peer(s): 2
    Peer(s) in full state: 2
   OSPFv3 Area (0.0.0.0)
   Neighbor ID    Pri   <strong>State</strong>       Dead Time   Interface                Instance ID
   2.2.2.2        1     <strong>Full</strong>/ -     00:00:37    <span>100GE</span><span>1/0/1</span>                0

   OSPFv3 Area (0.0.0.2)
   Neighbor ID    Pri   <strong>State</strong>       Dead Time   Interface                Instance ID
   4.4.4.4        1     <strong>Full</strong>/ -     00:00:33    <span>100GE</span><span>1/0/2</span>                0</pre>
<p># Check the OSPFv3 routing table of DeviceD.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong>display ospfv3 routing</strong>
OSPFv3 Process (1)

   Destination                                   Metric
     Next-hop
  IA 2001:DB8:1::/64                                     2
           via FE80::1572:0:5EF4:1, <span>100GE</span><span>1/0/2</span>
  IA 2001:DB8:2::/64                                     3
           via FE80::1572:0:5EF4:1, <span>100GE</span><span>1/0/2</span>
     2001:DB8:3::/64                                     1
           directly-connected, <span>100GE</span><span>1/0/2</span>
  IA 2001:DB8:4::/64                                     4
           via FE80::1572:0:5EF4:1, <span>100GE</span><span>1/0/2</span></pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001176742683__postreq15335648163219"></a><a name="postreq15335648163219"></a><a name="EN-US_TASK_0000001176742683__1.3.6"></a><a name="1.3.6"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p>DeviceA</p>
<pre class="screen">#
sysname DeviceA
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:2::2/64
 ospfv3 1 area 0.0.0.1
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:4::1/64
 ospfv3 1 area 0.0.0.1
#
ospfv3 1
 router-id 1.1.1.1
 area 0.0.0.1
 authentication-mode hmac-sha256 key-id 1 cipher %^%#c;\wJ4Qi8I1FMGM}KmIK9rha/.D.!$"<font style="font-size:8pt" Face="Courier New" >~</font>0(Ep66z<font style="font-size:8pt" Face="Courier New" >~</font>%^%#
#
return</pre>
</li><li><p>DeviceB</p>
<pre class="screen">#
sysname DeviceB
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:1::1/64
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:2::1/64
 ospfv3 1 area 0.0.0.1
#
ospfv3 1
 router-id 2.2.2.2
 area 0.0.0.0
 area 0.0.0.1
 authentication-mode hmac-sha256 key-id 1 cipher %^%#c;\wJ4Qi8I1FMGM}KmIK9rha/.D.!$"<font style="font-size:8pt" Face="Courier New" >~</font>0(Ep66z<font style="font-size:8pt" Face="Courier New" >~</font>%^%#
#
return</pre>
</li><li><p>DeviceC</p>
<pre class="screen">#
sysname DeviceC
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:1::2/64
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:3::1/64
 ospfv3 1 area 0.0.0.2
#
ospfv3 1
 router-id 3.3.3.3
 area 0.0.0.0
 area 0.0.0.2
#
return</pre>
</li><li><p>DeviceD</p>
<pre class="screen">#
sysname DeviceD
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:3::2/64
 ospfv3 1 area 0.0.0.2
#
ospfv3 1
 router-id 4.4.4.4
 area 0.0.0.2
#
return</pre>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospfv3_cfg_0009.html">Configuring Basic OSPFv3 Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospfv3_cfg_0016.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>