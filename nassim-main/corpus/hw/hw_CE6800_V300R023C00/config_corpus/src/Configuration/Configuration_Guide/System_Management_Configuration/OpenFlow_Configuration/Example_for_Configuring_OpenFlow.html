
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring OpenFlow">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_cfg_openflow_0001.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_dc_cfg_openflow_0005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OpenFlow">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OpenFlow">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563989989">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring OpenFlow</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563989989"></a><a name="EN-US_TASK_0000001563989989"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring OpenFlow</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563989989__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As shown in <a href="#EN-US_TASK_0000001563989989__fig_1">Figure 1</a>, DeviceA is an OpenFlow-compatible device, and there are reachable routes between the controller and DeviceA. To manage and control DeviceA through the controller, you can configure OpenFlow connection parameters on the controller and DeviceA. This will allow them to establish an OpenFlow connection and exchange information.</p>
<div class="fignone" id="EN-US_TASK_0000001563989989__fig_1"><a name="EN-US_TASK_0000001563989989__fig_1"></a><a name="fig_1"></a><span class="figcap"><b>Figure 1 </b>OpenFlow networking</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1 represents <span>100GE</span><span>1/0/1</span>.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001563750129.png"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563989989__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure OpenFlow connection parameters on the controller.</span><p><p>For details about configuring OpenFlow connection parameters on the controller, see the controller configuration guide.</p>
</p></li><li><span>Configure an OpenFlow agent.</span><p><p># Configure IP addresses for interfaces on DeviceA.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname DeviceA</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> vlan 20</strong>
[<span class="keyword">*</span>DeviceA-vlan20]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA]<strong> interface vlanif 20</strong>
[<span class="keyword">*</span>DeviceA-Vlanif20]<strong> ip address 10.1.1.2 24</strong>
[<span class="keyword">*</span>DeviceA-Vlanif20]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA]<strong> interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> port link-type trunk</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> port trunk pvid vlan 20</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> port trunk allow-pass vlan 20</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA]<strong> interface loopback 1</strong>
[<span class="keyword">*</span>DeviceA-LoopBack1]<strong> ip address 10.10.10.10 32</strong>
[<span class="keyword">*</span>DeviceA-LoopBack1]<strong> commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-LoopBack1]<strong> quit</strong></pre>
<p># Configure the OpenFlow agent on DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> sdn agent </strong>
<span>[<span class="keyword">*</span>DeviceA-sdn-agent]<strong> source-ip 10.10.10.10</strong></span>
[<span class="keyword">*</span>DeviceA-sdn-agent]<strong> controller-ip 10.1.2.1</strong>
[<span class="keyword">*</span>DeviceA-sdn-agent-ctrl-10.1.2.1]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA-sdn-agent]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA]<strong> commit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001563989989__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Run the <strong>display sdn openflow session</strong> command on DeviceA, after the configuration is complete, to check whether the OpenFlow connection between the controller and DeviceA is in Registered state. If it is in Registered state, the OpenFlow connection is successfully established.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> display sdn openflow session</strong>

--------------------------------------------------------------------------------
Agent         : 10.10.10.10
Controller    : 10.1.2.1
UpTime        : 0d21h09m32s
State         : <strong>Registered</strong>
Role          : Master
VPN-instance  : _public_
--------------------------------------------------------------------------------</pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001563989989__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Configuration Scripts</h4><p>DeviceA</p>
<pre class="screen">#
sysname DeviceA
#
sdn agent
<span> source-ip 10.10.10.10</span>
 controller-ip 10.1.2.1
#
vlan 20
#
interface Vlanif20
 ip address 10.1.1.2 255.255.255.0
#
interface <span>100GE</span> <span>1/0/1</span>
 port link-type trunk
 port trunk pvid vlan 20
 port trunk allow-pass vlan 20
#
interface LoopBack1
 ip address 10.10.10.10 255.255.255.255
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_cfg_openflow_0001.html">OpenFlow Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_dc_cfg_openflow_0005.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>