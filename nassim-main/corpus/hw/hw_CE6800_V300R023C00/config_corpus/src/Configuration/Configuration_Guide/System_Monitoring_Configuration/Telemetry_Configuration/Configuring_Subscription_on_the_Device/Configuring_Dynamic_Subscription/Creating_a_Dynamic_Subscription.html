
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Creating a Dynamic Subscription">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_telemetry_cfg_0014_c.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_telemetry_cfg_0015_c.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_telemetry_cfg_0017_c.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563754541">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Creating a Dynamic Subscription</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563754541"></a><a name="EN-US_TASK_0000001563754541"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Creating a Dynamic Subscription</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001563754541__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><div class="p">Before configuring gRPC in dial-in mode, you have completed the following tasks:<ul id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_ul189741814205612"><li id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_li109751514155614">Create an ACL if you need to control which clients can connect to the server. For details about how to create an ACL, see "ACL Configuration" in <span id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_ph599054617307">Configuration Guide</span> &gt; IP Addresses and Services Configuration.</li><li id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_li433533211569">Create an SSL policy if you need to create an SSL connection between the server and client. For details about how to create an SSL policy, see "SSL Configuration" in <span id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_ph392312218322">Configuration Guide</span> &gt; Security Configuration.</li><li id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_li9713183414257">Configure the gRPC server to perform AAA authentication, so that only authenticated users can log in to the device and perform related operations. For details about how to configure AAA authentication, see "AAA Configuration" in <span id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_ph132445193318">Configuration Guide</span> &gt; User Access and Authentication Configuration.</li></ul>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001563754541__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When configuring a dynamic subscription on a device, you need to configure information about a gRPC server and enable the gRPC service. The collector will deliver the dynamic subscription configuration to the device, according to which the device reports data to the collector for service policy determination.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563754541__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure gRPC server information and enable the gRPC service.</span><ol type="a"><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_cmdname862040957214105">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the gRPC view.</span><p><pre class="screen" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_screen16897192111218"><a href="cmdqueryname=grpc"><b><span class="cmdname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_cmdname2111477513214105">grpc</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the server view.</span><p><ul id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_ul1467074351215"><li id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_li18672124317123">If an IPv4 network is used, enter the gRPC server view.<pre class="screen" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_screen13628054153318"><a href="cmdqueryname=grpc+server"><b><span class="cmdname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_cmdname10218180123415">grpc server</span></b></a></pre>
</li></ul>
<ul id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_ul11240913101416"><li id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_li324014134146">If an IPv6 network is used, enter the gRPC IPv6 server view.<pre class="screen" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_screen99644813416"><a href="cmdqueryname=grpc+server+ipv6"><b><span class="cmdname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_cmdname8351414173413">grpc server ipv6</span></b></a></pre>
</li></ul>
</p></li><li class="substepexpand"><span>(Optional) Configure the gRPC server to transmit data in gzip compression mode.</span><p><pre class="screen"><a href="cmdqueryname=compression+gzip"><b><span class="cmdname">compression gzip</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure the source IPv4 or IPv6 address to be listened on in dial-in mode.</span><p><pre class="screen" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_screen4695144312592"><a href="cmdqueryname=source-ip"><b><span class="cmdname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_cmdname2052318795214105">source-ip</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_varname736366447214105">ip-address</span></i> [ <strong><span id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_cmdparmname942845949214105">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_varname159830478214105">vpn-instance-name</span></i> ]</pre>
<p id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_p197539611016">By default, no source IPv4 or IPv6 address is configured to be listened on in dial-in mode.</p>
</p></li><li class="substepexpand"><span>Configure the number of the port to be listened on in dial-in mode.</span><p><pre class="screen" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_screen53194478117"><a href="cmdqueryname=server-port"><b><span class="cmdname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_cmdname61519021214105">server-port</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_varname1468509480214105">port-number</span></i></pre>
<p id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_p12262125122514">By default, port 57400 is listened on in dial-in mode.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure an ACL for the gRPC service.</span><p><pre class="screen"><a href="cmdqueryname=acl"><b><span class="cmdname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_cmdname964216898214105">acl</span></b></a> { <i><span class="varname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_varname1888036461214105">acl-name</span></i> | <i><span class="varname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_varname923150147214105">acl-number</span></i> }</pre>
<p>By default, no ACL is configured for the gRPC service.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure the idle timeout interval for the gRPC service.</span><p><pre class="screen"><a href="cmdqueryname=idle-timeout"><b><span class="cmdname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_cmdname491213155214105">idle-timeout</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_varname537330037214105">time</span></i></pre>
<p>By default, the idle timeout interval of the gRPC service is 10s.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure an SSL policy for the gRPC server.</span><p><pre class="screen" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_screen864063882717"><a href="cmdqueryname=ssl-policy"><b><span class="cmdname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_cmdname7548144735412">ssl-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_varname1154818478547">ssl-policy-name</span></i></pre>
<p id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_p4711814105219">By default, no SSL policy is configured for a gRPC server.</p>
<div class="note" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_note17691147195013"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_p1269347175014">After the device is switched to the FIPS mode, the gRPC function can be used only after an SSL policy is configured.</p>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Configure the gRPC server to perform SSL verification on the gRPC client.</span><p><pre class="screen"><a href="cmdqueryname=ssl-verify+peer"><b><span class="cmdname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_cmdname329553457214105">ssl-verify peer</span></b></a></pre>
<p>By default, a gRPC server does not perform SSL verification on a gRPC client.</p>
</p></li><li class="substepexpand"><span>Enable the gRPC service.</span><p><pre class="screen" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_screen340181114413"><a href="cmdqueryname=server+enable"><b><span class="cmdname" id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_cmdname80300138214105">server enable</span></b></a></pre>
<p id="EN-US_TASK_0000001563754541__en-us_task_0000001513045834_p153511251419">By default, the gRPC service is disabled.</p>
</p></li></ol>
</li><li><span>(Optional) Configure the maximum usage of CPU resources used for telemetry data sampling.</span><p><pre class="screen"><a href="cmdqueryname=cpu-usage+max-percent"><b><span class="cmdname">cpu-usage max-percent</span></b></a> <i><span class="varname">usage</span></i></pre>
<p>By default, telemetry data sampling can occupy at most 5% of the CPU resources.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001563754541__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001563754541__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001563754541__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <strong>display telemetry dynamic-subscription</strong> [ <i><span class="varname">subName</span></i> ] command to check dynamic subscription information.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_telemetry_cfg_0014_c.html">Configuring Dynamic Subscription
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_telemetry_cfg_0015_c.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_telemetry_cfg_0017_c.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>