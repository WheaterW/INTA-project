
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Rate Limiting for ICMP Messages">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv4_cfg_0039.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv4_cfg_0049.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv4 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="IPv4 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130783584">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Rate Limiting for ICMP Messages</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130783584"></a><a name="EN-US_TASK_0000001130783584"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Rate Limiting for ICMP Messages</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130783584__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As shown in <a href="#EN-US_TASK_0000001130783584__fig4984175812">Figure 1</a>, DeviceA and DeviceB are connected to PC1 and PC2, respectively. Attackers often send a large number of ICMP messages to attack the network, increasing network traffic and degrading device performance. To reduce network traffic and improve device performance, configure rate limiting for ICMP messages on DeviceA.</p>
<div class="fignone" id="EN-US_TASK_0000001130783584__fig4984175812"><a name="EN-US_TASK_0000001130783584__fig4984175812"></a><a name="fig4984175812"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring rate limiting for ICMP messages</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1 represents <span>100GE</span> <span>1/0/1</span>.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001130623830.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130783584__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><div class="p">The configuration roadmap is as follows:<ol><li>Enable rate limiting for ICMP messages.</li><li>Configure a rate threshold for ICMP messages.</li></ol>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130783584__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign IP addresses 192.168.1.2/24 and 192.168.1.1/24 to the <span>100GE</span> <span>1/0/1</span> interfaces on DeviceA and DeviceB, respectively.</span></li><li><span># Configure rate limiting for ICMP messages on DeviceA.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname DeviceA</strong>
<span>[<span class="keyword">*</span>DeviceA] <strong>commit</strong>
</span>[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>undo icmp rate-limit disable</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>icmp rate-limit threshold 10</strong>
<span>[<span class="keyword">*</span>DeviceA] <strong>commit</strong></span></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001130783584__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Run the <strong>ping</strong> command on DeviceB. The command output shows that some reply messages are discarded, indicating that rate limiting takes effect.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>ping -m 1 -c 1000 192.168.1.2</strong>
PING 192.168.1.2: 56  data bytes, press CTRL_C to break
    Reply from 192.168.1.2: bytes=56 Sequence=1 ttl=255 time=2 ms
    Reply from 192.168.1.2: bytes=56 Sequence=2 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=3 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=4 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=5 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=6 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=7 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=8 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=9 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=10 ttl=255 time=2 ms
    <strong>Request time out</strong>
    Reply from 192.168.1.2: bytes=56 Sequence=12 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=13 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=14 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=15 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=16 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=17 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=18 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=19 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=20 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=21 ttl=255 time=1 ms
    <strong>Request time out</strong>
    Reply from 192.168.1.2: bytes=56 Sequence=23 ttl=255 time=2 ms
    Reply from 192.168.1.2: bytes=56 Sequence=24 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=25 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=26 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=27 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=28 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=29 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=30 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=31 ttl=255 time=1 ms
    Reply from 192.168.1.2: bytes=56 Sequence=32 ttl=255 time=1 ms

  --- 192.168.1.2 ping statistics ---
    32 packet(s) transmitted
    30 packet(s) received
    6.25% packet loss
    round-trip min/avg/max = 1/1/2 ms</pre>
<h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p>DeviceA</p>
<pre class="screen">#
 sysname DeviceA
#
undo icmp rate-limit disable
icmp rate-limit threshold 10
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_ipv4_cfg_0039.html">Configuring ICMP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_ipv4_cfg_0049.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>