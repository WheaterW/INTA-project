
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP SoO">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_2111.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_2112.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_2114.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001533101177">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP SoO</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001533101177"></a><a name="EN-US_TASK_0000001533101177"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP SoO</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001533101177__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>On the network shown in <a href="#EN-US_TASK_0000001533101177__fig199541322121811">Figure 1</a>, DeviceA, DeviceB, Server, and Leaf reside in different ASs. DeviceA and DeviceB are connected to Server and establish EBGP peer relationships with Leaf and Server to transmit public network unicast routes. To reduce redundant routes, configure the SoO function on DeviceA and DeviceB. When DeviceA advertises a route to Leaf, it adds the SoO attribute to the route. After receiving the route forwarded by Leaf, DeviceB checks the SoO attribute carried in the route. If the SoO attribute is the same as that configured on DeviceB, DeviceB does not accept this route, reducing memory usage and route selection costs.</p>
<div class="fignone" id="EN-US_TASK_0000001533101177__fig199541322121811"><a name="EN-US_TASK_0000001533101177__fig199541322121811"></a><a name="fig199541322121811"></a><span class="figcap"><b>Figure 1 </b>BGP SoO application on a public network</span><br><span><img class="vsd" src="figure/en-us_image_0000001543493569.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001533101177__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Prerequisites</h4><p>Before configuring BGP SoO, you have completed the following task:</p>
<ul><li><p><a href="vrp_bgp_cfg_0014.html">Configure basic BGP functions.</a></p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001533101177__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the BGP view.</span><p><pre class="screen"><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></pre>
</p></li><li><span>Enter the BGP-IPv4 unicast address family view.</span><p><pre class="screen"><a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></pre>
</p></li><li><span>Configure an SoO value for a BGP peer or peer group.</span><p><pre class="screen"><a href="cmdqueryname=peer+soo-reverse"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">peerIpv4Addr</span></i> | <i><span class="varname">groupName</span></i> } <a href="cmdqueryname=peer+soo-reverse"><b><span class="cmdname">soo-reverse</span></b></a> <i><span class="varname">sooString</span></i></pre>
<p>If BGP SoO has been enabled for a peer group, a BGP peer has been added to the peer group, and you do not want the peer to inherit BGP SoO capability from the peer group, you can run the <a href="cmdqueryname=peer+soo-reverse"><b><span class="cmdname">peer</span></b></a> <a href="cmdqueryname=peer+soo-reverse"><b><span class="cmdname">soo-reverse</span></b></a> <strong>disable</strong> command.</p>
<div class="note" id="EN-US_TASK_0000001533101177__note9531175216113"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001533101177__p49651636205910">After the <strong id="EN-US_TASK_0000001533101177__b2925134212484"><a href="cmdqueryname=peer+soo-reverse"><b><span class="cmdname" id="EN-US_TASK_0000001533101177__cmdname8184759112810">peer soo-reverse</span></b></a></strong> command is run, the device checks whether the routes received from the specified peer carry the SoO value that is the same as the locally configured one. If the routes carry this SoO value, the device discards the routes. In addition, the routes cannot be saved using the <a href="cmdqueryname=keep-all-routes"><b><span class="cmdname" id="EN-US_TASK_0000001533101177__cmdname1454174392614">keep-all-routes</span></b></a> command.</p>
<p id="EN-US_TASK_0000001533101177__p16965173613595">If the <a href="cmdqueryname=peer+soo-reverse"><b><span class="cmdname" id="EN-US_TASK_0000001533101177__cmdname181501488264">peer soo-reverse</span></b></a> command is run for a BGP peer that does not support route-refresh, the peer relationship is torn down.</p>
</div></div>
</p></li><li><span>Enable the device to advertise extended community attributes to the specified peer or peer group.</span><p><pre class="screen"><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> } <a href="cmdqueryname=advertise-ext-community"><b><span class="cmdname">advertise-ext-community</span></b></a></pre>
<p><span>By default, a device does not advertise extended community attributes to any peer or peer group.</span></p>
<p>After the <a href="cmdqueryname=peer+advertise-ext-community"><b><span class="cmdname">peer advertise-ext-community</span></b></a> command is run, BGP advertises the routes with extended community attributes to the specified peer. If the peer only needs to accept the routes but not the extended community attributes, you can run the <a href="cmdqueryname=peer+discard-ext-community"><b><span class="cmdname">peer discard-ext-community</span></b></a> command on the peer to discard the extended community attributes in the received routing information.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001533101177__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001533101177__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001533101177__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After completing the configuration, perform the following operations to verify it:</p>
<ul><li><p>Run the <a href="cmdqueryname=display+bgp+routing-table"><b><span class="cmdname">display bgp routing-table</span></b></a> [ <i><span class="varname">ipv4-address</span></i> [ <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> ] ] command to check the BGP routing table.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp_cfg_2111.html">Configuring BGP SoO
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp_cfg_2112.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bgp_cfg_2114.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>