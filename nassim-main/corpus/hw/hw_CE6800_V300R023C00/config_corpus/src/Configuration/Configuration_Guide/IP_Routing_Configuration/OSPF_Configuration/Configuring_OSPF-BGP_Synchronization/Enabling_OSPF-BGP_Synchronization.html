
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling OSPF-BGP Synchronization">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0085.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0086.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0088.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176663005">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Enabling OSPF-BGP Synchronization</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176663005"></a><a name="EN-US_TASK_0000001176663005"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling OSPF-BGP Synchronization</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001176663005__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before enabling OSPF-BGP synchronization, you have completed the following tasks:</p>
<ul><li><a href="vrp_ospf_cfg_0010.html">Configure basic OSPF functions</a>.</li><li><a href="../vrp_bgp_cfg_0014.html">Configure basic BGP functions</a>.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176663005__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the OSPF view.</span><p><pre class="screen"><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
<p>The <em id="EN-US_TASK_0000001176663005__en-us_task_0000001130623404_i145692117181812">process-id</em> parameter specifies the ID of a process, and the default value is 1.</p>
</p></li><li><span>Configure the current device as a stub router.</span><p><pre class="screen"><span><a href="cmdqueryname=stub-router"><b><span class="cmdname">stub-router</span></b></a> <strong><span>on-startup</span></strong> [ <i><span class="varname">interval</span></i> ]</span></pre>
<p>After configuration, the link metric in the LSAs advertised by the device is the maximum value (65535), which instructs other OSPF devices not to use it as a transit device for data forwarding.</p>
</p></li><li><span>Enable secure synchronization.</span><p><pre class="screen"><a href="cmdqueryname=safe-sync+enable"><b><span class="cmdname">safe-sync enable</span></b></a></pre>
<p>If a stub router restarts, the router LSAs on the device are discarded. In this case, the neighbors use the old router LSAs before the device restart to calculate routes that pass through it due to the interval at which LSAs are retransmitted. As a result, packet loss occurs and continues for seconds after the device is restarted and before the device establishes a neighbor relationship with the peer end.</p>
<p>To prevent this issue, configure secure synchronization on the device to be restarted. When the device synchronizes the LSDB with the peer end, it deletes or updates the LSA received from the peer end if that LSA was the one generated by the device itself. In this manner, the neighbor relationship between the local device and peer end can reach the Full state, indicating a successful establishment.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176663005__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176663005__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospf_cfg_0085.html">Configuring OSPF-BGP Synchronization
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospf_cfg_0086.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ospf_cfg_0088.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>