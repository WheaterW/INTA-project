
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Suppression on BGP Peer Flapping">
<meta name="abstract" content="Suppression on BGP peer flapping allows a device to delay the establishment of a BGP peer relationship that flaps continuously.">
<meta name="description" content="Suppression on BGP peer flapping allows a device to delay the establishment of a BGP peer relationship that flaps continuously.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0180.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0181.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176663623">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Suppression on BGP Peer Flapping</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176663623"></a><a name="EN-US_TASK_0000001176663623"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Suppression on BGP Peer Flapping</h1>
<div class="taskbody"><p>Suppression on BGP peer flapping allows a device to delay the establishment of a BGP peer relationship that flaps continuously.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001176663623__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring suppression on BGP peer flapping, you have completed the following task:</p>
<ul><li><p><a href="vrp_bgp_cfg_0014.html">Configure basic BGP functions</a>.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176663623__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>BGP peer flapping occurs when BGP peer relationships are disconnected and then immediately re-established in a quick sequence that is repeated. Frequent BGP peer flapping is caused by various factors; for example, a link is unstable, or an interface that carries BGP services is unstable. After a BGP peer relationship is established, the local device and its BGP peer usually exchange all routes in their BGP routing tables with each other. If the BGP peer relationship is disconnected, the local device deletes all the routes learned from the BGP peer. Generally, a large number of BGP routes exist, and in this case, a large number of routes change and a large amount of data is processed during frequent peer flapping. As a result, a large number of resources are consumed, causing high CPU usage. To prevent this issue, a device supports suppression on BGP peer flapping. With this function enabled, the local device suppresses the establishment of the BGP peer relationship if it flaps continuously.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176663623__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the BGP view.</span><p><pre class="screen"><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></pre>
</p></li><li><span>Enable BGP to suppress the establishment of a specified peer relationship that flaps repeatedly.</span><p><pre class="screen"><a href="cmdqueryname=peer+oscillation-dampening"><b><span class="cmdname">peer</span></b></a><strong> </strong><i><span class="varname">peerIpv4Addr</span></i> <strong><span>oscillation-dampening</span></strong></pre>
<p>By default, a device suppresses the establishment of BGP peer relationships that flap repeatedly. To immediately remove the suppression, you can run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a><strong> </strong><i><span class="varname">peerIpv4Addr</span></i> <strong><span>oscillation-dampening</span></strong> <strong><span>disable</span></strong> command. Alternatively, you can run a reset command or another command that can cause the peer relationship to be disconnected and re-established.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176663623__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176663623__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001176663623__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring the function, verify the configuration.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+bgp+peer+verbose"><b><span class="cmdname">display bgp peer verbose</span></b></a> command to check the status of suppression on BGP peer flapping and the remaining time to establish the BGP peer relationship.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp_cfg_0180.html">Configuring Suppression on BGP Peer Flapping
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp_cfg_0181.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>