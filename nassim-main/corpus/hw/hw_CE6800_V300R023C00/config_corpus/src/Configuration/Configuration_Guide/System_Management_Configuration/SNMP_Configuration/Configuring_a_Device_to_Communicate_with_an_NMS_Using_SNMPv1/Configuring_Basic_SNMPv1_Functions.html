
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Basic SNMPv1 Functions">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0018.html">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512671246">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Basic SNMPv1 Functions</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512671246"></a><a name="EN-US_TASK_0000001512671246"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Basic SNMPv1 Functions</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001512671246__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring a device to communicate with an NMS through SNMPv1, complete the following tasks:</p>
<ul><li>Configure a routing protocol to ensure that the device and NMS are reachable to each other.</li><li>Run the <strong><span>install feature-software WEAKEA</span></strong> command in the user view to install the weak security algorithm/protocol feature package (WEAKEA).</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001512671246__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>SNMP needs to be deployed on a network to allow the NMS to manage network devices.</p>
<p>If the network is secure and has few devices (for example, a campus network or a small enterprise network), SNMPv1 can be deployed to ensure communication between the NMS and managed devices.</p>
<p>However, SNMPv1 has security risks; therefore, using SNMPv3 is recommended.</p>
<p>After basic SNMP functions are configured, an NMS can perform basic operations (such as Get and Set operations) on a managed device, and the managed device can send alarms to the NMS.</p>
<p>After basic SNMP functions are configured, the NMS can communicate with the managed device.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512671246__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li id="EN-US_TASK_0000001512671246__step_0601"><span id="EN-US_TASK_0000001512671246__cmd831803020214019">Enter the system view.</span><p><pre class="screen" id="EN-US_TASK_0000001512671246__screen957925913532"><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname615214105414">system-view</span></b></a></pre>
</p></li><li id="EN-US_TASK_0000001512671246__step57411447125816"><span id="EN-US_TASK_0000001512671246__cmd274110470586">(Optional) Set the minimum SNMP password length.</span><p><pre class="screen" id="EN-US_TASK_0000001512671246__screen117411247185820"><a href="cmdqueryname=snmp-agent+password+min-length"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname192661523115920">snmp-agent password min-length</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname15266923115910">min-length</span></i></pre>
<p id="EN-US_TASK_0000001512671246__p20805949105910">After this command is run, the length of a configured SNMP password must be longer than or equal to the minimum SNMP password length.</p>
</p></li><li id="EN-US_TASK_0000001512671246__step0189191416010"><span id="EN-US_TASK_0000001512671246__cmd7189151416018">(Optional) Start the SNMP agent service.</span><p><pre class="screen" id="EN-US_TASK_0000001512671246__screen3189614305"><a href="cmdqueryname=snmp-agent"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname93611421208">snmp-agent</span></b></a></pre>
<p id="EN-US_TASK_0000001512671246__p611312418014"><span>By default, the SNMP agent service is disabled. </span>Running any <a href="cmdqueryname=snmp-agent"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname181131441506">snmp-agent</span></b></a> configuration command (regardless of whether parameters are specified) starts the SNMP agent service. Therefore, this step is optional.</p>
</p></li><li id="EN-US_TASK_0000001512671246__step1975931820110"><span id="EN-US_TASK_0000001512671246__cmd15759121819114">(Optional) Change the listening port number of the SNMP agent.</span><p><pre class="screen" id="EN-US_TASK_0000001512671246__screen6759161820118"><a href="cmdqueryname=snmp-agent+udp-port"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname1210312271816">snmp-agent udp-port</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname21030278116">port-number</span></i></pre>
<p id="EN-US_TASK_0000001512671246__p33803481618"><span>The default listening port number of the SNMP agent is 161. </span>If this command is not configured, the default listening port number is used.</p>
</p></li><li><span>Configure an SNMP version.</span><p><pre class="screen"><a href="cmdqueryname=snmp-agent+sys-info"><b><span class="cmdname">snmp-agent sys-info</span></b></a> <strong><span>version</span></strong> <strong><span>v1</span></strong></pre>
</p><p><p>By default, SNMPv3 is used.</p>
<p>After SNMPv1 is configured on the managed device, the device supports both SNMPv1 and SNMPv3. This means that the device can be monitored and managed by NMSs running SNMPv1 or SNMPv3.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=snmp-agent+sys-info"><b><span class="cmdname">snmp-agent sys-info</span></b></a> <strong><span>version</span></strong> <strong><span>v1</span></strong> command can be used only after the weak security algorithm/protocol feature package is installed.</p>
</div></div>
</p></li><li id="EN-US_TASK_0000001512671246__step85452472111"><span id="EN-US_TASK_0000001512671246__cmd1354520415219">Configure a read/write community name.</span><p><pre class="screen" id="EN-US_TASK_0000001512671246__screen654519420212"><a href="cmdqueryname=snmp-agent+community"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname1816992232119">snmp-agent community</span></b></a> { <strong><span id="EN-US_TASK_0000001512671246__cmdparmname6169192242110">read</span></strong> | <strong><span id="EN-US_TASK_0000001512671246__cmdparmname1216962252117">write</span></strong> } { <i><span class="varname" id="EN-US_TASK_0000001512671246__varname916962252116">community-name</span></i> | <strong><span id="EN-US_TASK_0000001512671246__cmdparmname171691922122114">cipher</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname2169182214214">host-string</span></i> } [ <strong><span id="EN-US_TASK_0000001512671246__cmdparmname17169822122119">mib-view</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname20169102218212">security-string-cipher</span></i><span> | <strong><span id="EN-US_TASK_0000001512671246__cmdparmname20169102282110">acl</span></strong> { <i><span class="varname" id="EN-US_TASK_0000001512671246__varname1516942292115">acl-number</span></i> | <i><span class="varname" id="EN-US_TASK_0000001512671246__varname16169222122118">acl-name</span></i> }</span> <span>| <strong><span id="EN-US_TASK_0000001512671246__cmdparmname14169182216212">alias</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname3169142232115">alias-name</span></i> </span>]<span></span></pre>
<p id="EN-US_TASK_0000001512671246__p1511110116228">The community name is saved in encrypted format in the configuration file. To facilitate identification of community names, set the alias names for the communities. The alias names are stored in cleartext in the configuration file.</p>
<p id="EN-US_TASK_0000001512671246__p11624152362213"><span>By default, the device checks the complexity of community names. If the check fails, the community name cannot be configured. </span>You can run the <a href="cmdqueryname=snmp-agent+community+complexity-check+disable"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname12624623122219">snmp-agent community complexity-check disable</span></b></a> command to disable this complexity check. However, to ensure system security, you are advised to retain the default configuration.</p>
<div class="note" id="EN-US_TASK_0000001512671246__note5694193032211"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001512671246__p3426194219221">The device has the following requirements for community name complexity:</p>
<ul id="EN-US_TASK_0000001512671246__ul104261142192214"><li id="EN-US_TASK_0000001512671246__li1342624212216"><p id="EN-US_TASK_0000001512671246__p164261442152218"><a name="EN-US_TASK_0000001512671246__li1342624212216"></a><a name="li1342624212216"></a>A community name contains at least eight characters.</p>
</li><li id="EN-US_TASK_0000001512671246__li380229389"><p id="EN-US_TASK_0000001512671246__p38052103810"><a name="EN-US_TASK_0000001512671246__li380229389"></a><a name="li380229389"></a>A community name contains at least two types of the following characters: uppercase characters, lowercase characters, digits, and special characters, excluding question marks (?) and spaces.</p>
</li><li id="EN-US_TASK_0000001512671246__li842610424226"><p id="EN-US_TASK_0000001512671246__p24268420228"><a name="EN-US_TASK_0000001512671246__li842610424226"></a><a name="li842610424226"></a>After the weak password dictionary maintenance function is enabled, the value of <i><span class="varname" id="EN-US_TASK_0000001512671246__varname1168911410104">community-name</span></i> cannot be any password defined in the weak password dictionary. (You can run the <a href="cmdqueryname=display+security+weak-password-dictionary"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname1521017177121">display security weak-password-dictionary</span></b></a> command to view the passwords defined in the weak password dictionary.)</p>
</li></ul>
</div></div>
<p id="EN-US_TASK_0000001512671246__p19306165152317">After the community name is set, if no MIB view is configured, the NMS that uses the community name has permission to access objects in the ViewDefault view (1.3.6.1).</p>
<ul id="EN-US_TASK_0000001512671246__ul73069512317"><li id="EN-US_TASK_0000001512671246__li4306195102310"><p id="EN-US_TASK_0000001512671246__p153061522314"><a name="EN-US_TASK_0000001512671246__li4306195102310"></a><a name="li4306195102310"></a>If the NMS administrator needs the read permission in a specified view, configure <strong><span id="EN-US_TASK_0000001512671246__cmdparmname930610592310">read</span></strong> in this command. For example, a low-level administrator needs to read certain data.</p>
</li><li id="EN-US_TASK_0000001512671246__li430675192316"><p id="EN-US_TASK_0000001512671246__p930618512233"><a name="EN-US_TASK_0000001512671246__li430675192316"></a><a name="li430675192316"></a>If the NMS administrator needs the read and write permissions in a specified view, configure <strong><span id="EN-US_TASK_0000001512671246__cmdparmname1030617512310">write</span></strong> in this command. For example, a high-level administrator needs to read and write certain data.</p>
</li></ul>
</p></li><li><span>Configure the destination IP address for the alarms and error codes sent from the device. Choose one of the following commands as required.</span><p><ul><li>On an IPv4 network, run the following command:<pre class="screen"><a href="cmdqueryname=snmp-agent+target-host"><b><span class="cmdname">snmp-agent target-host</span></b></a> [ <a href="cmdqueryname=host-name"><b><span class="cmdname">host-name</span></b></a> <i><span class="varname">host-name</span></i> ] <a href="cmdqueryname=trap+address+udp-domain"><b><span class="cmdname">trap address udp-domain</span></b></a> <i><span class="varname">ip-address</span></i> [ [ <a href="cmdqueryname=udp-port"><b><span class="cmdname">udp-port</span></b></a> <i><span class="varname">port-number</span></i> | [ <strong><span>alarm-udp-port</span></strong> <i><span class="varname">alarm-port-number</span></i> | <span><strong><span>event-udp-port</span></strong></span> <i><span class="varname">event-port-number</span></i> ] <sup>*</sup>] | [ { <a href="cmdqueryname=vpn-instance"><b><span class="cmdname">vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> | <a href="cmdqueryname=public-net"><b><span class="cmdname">public-net</span></b></a> } ] | [ <a href="cmdqueryname=source"><b><span class="cmdname">source</span></b></a> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } ] ] <sup>*</sup> <a href="cmdqueryname=params+securityname"><b><span class="cmdname">params securityname</span></b></a> { <i><span class="varname">security-name</span></i> [ <a href="cmdqueryname=v1"><b><span class="cmdname">v1</span></b></a> | <a href="cmdqueryname=private-netmanager"><b><span class="cmdname">private-netmanager</span></b></a> | <a href="cmdqueryname=ext-vb"><b><span class="cmdname">ext-vb </span></b></a>| <a href="cmdqueryname=notify-filter-profile"><b><span class="cmdname">notify-filter-profile</span></b></a> <i><span class="varname">profile-name</span></i> | <a href="cmdqueryname=heart-beat+enable"><b><span class="cmdname">heart-beat enable</span></b></a> ] <sup>*</sup> | <a href="cmdqueryname=cipher"><b><span class="cmdname">cipher</span></b></a> <i><span class="varname">cipher-name</span></i> [ <a href="cmdqueryname=v1"><b><span class="cmdname">v1</span></b></a> | <a href="cmdqueryname=private-netmanager"><b><span class="cmdname">private-netmanager</span></b></a> | <a href="cmdqueryname=ext-vb"><b><span class="cmdname">ext-vb</span></b></a> | <a href="cmdqueryname=notify-filter-profile"><b><span class="cmdname">notify-filter-profile</span></b></a> <i><span class="varname">profile-name</span></i> |<a href="cmdqueryname=heart-beat+enable"><b><span class="cmdname"> heart-beat enable</span></b></a> ] <sup>*</sup> }</pre>
</li><li>On an IPv6 network, run the following command:<pre class="screen"><strong><a href="cmdqueryname=snmp-agent+target-host"><b><span class="cmdname">snmp-agent target-host</span></b></a> </strong>[ <a href="cmdqueryname=host-name"><b><span class="cmdname">host-name</span></b></a><em> </em><i><span class="varname">host-name</span></i> ] <a href="cmdqueryname=trap+ipv6+address+udp-domain"><b><span class="cmdname">trap ipv6 address udp-domain</span></b></a><em> </em><i><span class="varname">ipv6-address</span></i> [ [ <a href="cmdqueryname=udp-port"><b><span class="cmdname">udp-port</span></b></a><strong> </strong><i><span class="varname">port-number</span></i> | [ <strong><span>alarm-udp-port</span></strong> <i><span class="varname">alarm-port-number</span></i> | <span><strong><span>event-udp-port</span></strong></span> <i><span class="varname">event-port-number</span></i> ] <sup>*</sup>] | [ <a href="cmdqueryname=vpn-instance"><b><span class="cmdname">vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> | <a href="cmdqueryname=public-net"><b><span class="cmdname">public-net</span></b></a> ] ] <sup>*</sup><strong> </strong><a href="cmdqueryname=params+securityname"><b><span class="cmdname">params securityname</span></b></a> { <i><span class="varname">security-name</span></i> [ <a href="cmdqueryname=v1"><b><span class="cmdname">v1</span></b></a> | <a href="cmdqueryname=ext-vb"><b><span class="cmdname">ext-vb</span></b></a> | <a href="cmdqueryname=notify-filter-profile"><b><span class="cmdname">notify-filter-profile</span></b></a><em> </em><i><span class="varname">profile-name</span></i> | <a href="cmdqueryname=private-netmanager"><b><span class="cmdname">private-netmanager</span></b></a> ] <sup>*</sup> | <a href="cmdqueryname=cipher"><b><span class="cmdname">cipher</span></b></a><em> </em><i><span class="varname">cipher-name</span></i> [ <a href="cmdqueryname=v1"><b><span class="cmdname">v1</span></b></a> | <a href="cmdqueryname=ext-vb"><b><span class="cmdname">ext-vb</span></b></a> | <a href="cmdqueryname=notify-filter-profile"><b><span class="cmdname">notify-filter-profile</span></b></a><em> </em><i><span class="varname">profile-name</span></i> | <a href="cmdqueryname=private-netmanager"><b><span class="cmdname">private-netmanager</span></b></a> ] <sup>*</sup> }</pre>
</li></ul>
</p><p><div class="p" id="EN-US_TASK_0000001512671246__p1146113518512">The parameters can be set as follows:<ul id="EN-US_TASK_0000001512671246__ul104611935757"><li id="EN-US_TASK_0000001512671246__li5243189367"><strong><span id="EN-US_TASK_0000001512671246__cmdparmname12190185514474">udp-port</span></strong> needs to be set to a non-well-known port number if special requirements need to be met (default port number: 162). You can also configure <strong><span id="EN-US_TASK_0000001512671246__cmdparmname7679117153715">alarm-udp-port</span></strong> and <strong><span id="EN-US_TASK_0000001512671246__cmdparmname1366862293711">event-udp-port</span></strong> for different types of reported contents (alarms and events) to change the port number for receiving alarms and events to a specified port number.</li><li id="EN-US_TASK_0000001512671246__li114612355514"><p id="EN-US_TASK_0000001512671246__p194616351551"><a name="EN-US_TASK_0000001512671246__li114612355514"></a><a name="li114612355514"></a><span><strong><span id="EN-US_TASK_0000001512671246__cmdparmname107118912214">public-net</span></strong> needs to be specified if the managed device sends alarms to the NMS through a public network. Alternatively, </span><strong><span id="EN-US_TASK_0000001512671246__cmdparmname97111792216">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname15711893216">vpn-instance-name</span></i> needs to be specified if the managed device sends alarms to the NMS through a private network.</p>
</li><li id="EN-US_TASK_0000001512671246__li1146193511517"><p id="EN-US_TASK_0000001512671246__p546119353519"><a name="EN-US_TASK_0000001512671246__li1146193511517"></a><a name="li1146193511517"></a><strong><span id="EN-US_TASK_0000001512671246__cmdparmname15803511192211">securityname</span></strong> needs to be configured to identify a source device that sends alarms.</p>
</li><li id="EN-US_TASK_0000001512671246__li194621935450"><p id="EN-US_TASK_0000001512671246__p546214356515"><a name="EN-US_TASK_0000001512671246__li194621935450"></a><a name="li194621935450"></a><strong><span id="EN-US_TASK_0000001512671246__cmdparmname109519285220">private-netmanager</span></strong> needs to be specified if the NMS and managed device are both provided by Huawei. In this way, alarm messages can carry more information (for example, the alarm type, sequence number, and sending time). Such information helps rectify faults.</p>
</li><li id="EN-US_TASK_0000001512671246__li16462935356"><p id="EN-US_TASK_0000001512671246__p0462835856"><a name="EN-US_TASK_0000001512671246__li16462935356"></a><a name="li16462935356"></a><strong><span id="EN-US_TASK_0000001512671246__cmdparmname1219312413238">notify-filter-profile</span></strong> needs to be specified if you want the device to send only desired alarms to the NMS, thereby reducing irrelevant alarms and speeding up fault identification. <strong><span id="EN-US_TASK_0000001512671246__cmdparmname1853418491230">notify-view</span></strong> needs to be specified to allow the alarm filter policy to take effect when you configure a user group.</p>
</li></ul>
</div>
</p></li><li id="EN-US_TASK_0000001512671246__step1218351717588"><span id="EN-US_TASK_0000001512671246__cmd1618321719581">(Optional) Configure the contact and location information of the device administrator.</span><p><pre class="screen" id="EN-US_TASK_0000001512671246__screen1418313171585"><a href="cmdqueryname=snmp-agent+sys-info"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname8811252195816">snmp-agent sys-info</span></b></a> { <strong><span id="EN-US_TASK_0000001512671246__cmdparmname19811105225816">contact</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname188111652165812">contact</span></i> | <strong><span id="EN-US_TASK_0000001512671246__cmdparmname198112052185810">location</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname118114521585">location</span></i> }</pre>
<p id="EN-US_TASK_0000001512671246__p4183201720584">Configuring this information helps the NMS administrator contact the device administrators for fault locating and rectification, especially if the NMS manages many devices.</p>
</p></li><li id="EN-US_TASK_0000001512671246__step1227052310593"><span id="EN-US_TASK_0000001512671246__cmd12270123165918">(Optional) Set the maximum size of an SNMP message that can be received or sent by the device.</span><p><pre class="screen" id="EN-US_TASK_0000001512671246__screen127011232594"><a href="cmdqueryname=snmp-agent+packet+max-size"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname483353295910">snmp-agent packet max-size</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname11833143245916">byte-count</span></i></pre>
</p><p><p id="EN-US_TASK_0000001512671246__p157516514595">By default, the maximum size of an SNMP message that the device can receive or send is 12000 bytes.</p>
<p id="EN-US_TASK_0000001512671246__p177545135917">After the maximum size is set, the device discards any SNMP message that is larger than the set size.</p>
</p></li><li id="EN-US_TASK_0000001512671246__step1222918412013"><span id="EN-US_TASK_0000001512671246__cmd13229843017">(Optional) Enable the SNMP extended error code function.</span><p><pre class="screen" id="EN-US_TASK_0000001512671246__screen0230184506"><a href="cmdqueryname=snmp-agent+extend+error-code+enable"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname17152151217020">snmp-agent extend error-code enable</span></b></a></pre>
</p><p><p id="EN-US_TASK_0000001512671246__p76952288011">By default, SNMP sends standard error codes to an NMS. The extended error code function allows an SNMP device to send extended error codes to the NMS.</p>
</p></li><li id="EN-US_TASK_0000001512671246__step7549645505"><span id="EN-US_TASK_0000001512671246__cmd554994516012">(Optional) Enable the function to cache Set response packets.</span><p><pre class="screen" id="EN-US_TASK_0000001512671246__screen4549154512012"><a href="cmdqueryname=snmp-agent+set-cache+enable"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname1074213545013">snmp-agent set-cache enable</span></b></a></pre>
</p><p><p id="EN-US_TASK_0000001512671246__p514016141412">By default, the function to cache Set response packets is disabled.</p>
</p></li><li id="EN-US_TASK_0000001512671246__step7622192214169"><span id="EN-US_TASK_0000001512671246__cmd362222216169">Configure a source interface for the SNMP agent to receive and respond to NMS request packets.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0000001512671246__table1435164224617" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring a source interface for the SNMP agent to receive and respond to NMS request packets</caption><thead align="left"><tr id="EN-US_TASK_0000001512671246__row17351174294613"><th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.3.3.12.2.1.2.3.1.1" liSelected="liSelected"><p id="EN-US_TASK_0000001512671246__p33528426464">Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.3.3.12.2.1.2.3.1.2" liSelected="liSelected"><p id="EN-US_TASK_0000001512671246__p13352164214614">Command</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_TASK_0000001512671246__row13521342144613"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.12.2.1.2.3.1.1 "><p id="EN-US_TASK_0000001512671246__p18352134218460">Specify the source interface for SNMP to receive and respond to requests from an NMS.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.12.2.1.2.3.1.2 "><p id="EN-US_TASK_0000001512671246__p1251411302571"><a href="cmdqueryname=snmp-agent+protocol+source-status"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname20514193017576">snmp-agent protocol source-interface</span></b></a> { <i><span class="varname" id="EN-US_TASK_0000001512671246__varname10842719165919">protocol-interface-type protocol-interface-number</span></i> | <i><span class="varname" id="EN-US_TASK_0000001512671246__varname6519114419591">protocol-interface-name</span></i> }</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001512671246__row4352194224616"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.12.2.1.2.3.1.1 "><p id="EN-US_TASK_0000001512671246__p14352134213468">Enable all interfaces on the device to be used by SNMP to receive and respond to requests from an NMS.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.12.2.1.2.3.1.2 "><p id="EN-US_TASK_0000001512671246__p1435284204610"><a href="cmdqueryname=snmp-agent+protocol+source-status"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname15808185825616">snmp-agent protocol source-status all-interface</span></b></a></p>
</td>
</tr>
<tr id="EN-US_TASK_0000001512671246__row143521942104617"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.12.2.1.2.3.1.1 "><p id="EN-US_TASK_0000001512671246__p1335220425460">Specify an IPv6 source address for SNMP to receive and respond to requests from an NMS.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.12.2.1.2.3.1.2 "><p id="EN-US_TASK_0000001512671246__p18352542164615"><a href="cmdqueryname=snmp-agent+protocol+source-status"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname971812465214">snmp-agent protocol ipv6 source-ip</span></b></a><i><span class="varname" id="EN-US_TASK_0000001512671246__varname1576311195410"> ip-address</span></i> [ <strong><span id="EN-US_TASK_0000001512671246__cmdparmname479652435415">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname93951237185420">vpn-instance-name</span></i> ]</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001512671246__row15353174220464"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.12.2.1.2.3.1.1 "><p id="EN-US_TASK_0000001512671246__p73531642124611">Enable all IPv6 interfaces on the device to be used by SNMP to receive and respond to requests from an NMS.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.12.2.1.2.3.1.2 "><p id="EN-US_TASK_0000001512671246__p16353174215468"><a href="cmdqueryname=snmp-agent+protocol+source-status"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname149982046205517">snmp-agent protocol source-status ipv6 all-interface</span></b></a></p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="note" id="EN-US_TASK_0000001512671246__note6187174672310"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001512671246__p61871446142310">You are advised not to use all interfaces to receive and respond to NMS request messages. Specifying a source interface is recommended.</p>
</div></div>
</p></li><li id="EN-US_TASK_0000001512671246__step39261335161815"><span id="EN-US_TASK_0000001512671246__cmd14926193518183">(Optional) Configure SNMP to receive and respond to NMS request packets through a VPN or public network.</span><p><pre class="screen" id="EN-US_TASK_0000001512671246__screen1292693541811"><a href="cmdqueryname=snmp-agent+protocol"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname129491349194">snmp-agent protocol</span></b></a> [ <strong><span id="EN-US_TASK_0000001512671246__cmdparmname114101401311">ipv6</span></strong> ] { <strong><span id="EN-US_TASK_0000001512671246__cmdparmname157338512314">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname22801312831">vpn-instance-name</span></i> | <strong><span id="EN-US_TASK_0000001512671246__cmdparmname3317819734">public-net</span></strong> }</pre>
</p></li><li id="EN-US_TASK_0000001512671246__step2045655711812"><span id="EN-US_TASK_0000001512671246__cmd74567571384">(Optional) Set the engine ID of the local SNMP entity.</span><p><pre class="screen" id="EN-US_TASK_0000001512671246__screen164561357486"><a href="cmdqueryname=snmp-agent+local-engineid"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname11698713910">snmp-agent local-engineid</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname141691571913">engineid</span></i></pre>
</p><p><p id="EN-US_TASK_0000001512671246__p66410273917"><span>By default, the system uses the internal algorithm to automatically generate a device engine ID, which includes the enterprise ID and device information. </span>The system uses the MAC address of the management interface on a device as the device information of the engine ID.</p>
<div class="note" id="EN-US_TASK_0000001512671246__note512219017119"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001512671246__p1812214020114">To improve system security, run the <a href="cmdqueryname=snmp-agent+packet+contextengineid-check+enable"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname1734961660214021">snmp-agent packet contextengineid-check enable</span></b></a> command to check for consistency between the context engine ID and local engine ID.</p>
</div></div>
</p></li><li id="EN-US_TASK_0000001512671246__step177131037151018"><span id="EN-US_TASK_0000001512671246__cmd0713183716108">(Optional) Disable the SNMP IPv4 or IPv6 listening port.</span><p><pre class="screen" id="EN-US_TASK_0000001512671246__screen4713137121013"><a href="cmdqueryname=snmp-agent+protocol+server+disable"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname1769519478105">snmp-agent protocol server</span></b></a> <span>[ </span><strong><span id="EN-US_TASK_0000001512671246__cmdparmname156954477108">ipv4</span></strong> <span>| <strong><span id="EN-US_TASK_0000001512671246__cmdparmname1069517475104">ipv6</span></strong> ]</span> <a href="cmdqueryname=disable"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname19695174711018">disable</span></b></a></pre>
</p><p><p id="EN-US_TASK_0000001512671246__p127981315151118">After you disable the SNMP IPv4<span> or IPv6</span> listening port using the <a href="cmdqueryname=snmp-agent+protocol+server+disable"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname57981615171111">snmp-agent protocol server disable</span></b></a> command, SNMP no longer processes SNMP packets. Exercise caution when running this command.</p>
</p></li><li id="EN-US_TASK_0000001512671246__step1594432675219"><span id="EN-US_TASK_0000001512671246__cmd594552635220">(Optional) Configure the SNMP proxy to receive and respond to requests from the managed device.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0000001512671246__table498018498395" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Configuring the SNMP proxy to receive and respond to requests from the managed device</caption><thead align="left"><tr id="EN-US_TASK_0000001512671246__row7980164933910"><th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.3.3.16.2.1.2.3.1.1" liSelected="liSelected"><p id="EN-US_TASK_0000001512671246__p1598015491393">Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.3.3.16.2.1.2.3.1.2" liSelected="liSelected"><p id="EN-US_TASK_0000001512671246__p11980949153910">Command</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_TASK_0000001512671246__row1198084919395"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.16.2.1.2.3.1.1 "><p id="EN-US_TASK_0000001512671246__p209801849133912">Specify the source interface for the SNMP proxy to receive and respond to requests from the managed device.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.16.2.1.2.3.1.2 "><p id="EN-US_TASK_0000001512671246__p1354394212412"><a href="cmdqueryname=snmp-agent+protocol+source-status"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname155431442134116">snmp-agent proxy protocol source-interface</span></b></a> { <i><span class="varname" id="EN-US_TASK_0000001512671246__varname154310429418">protocol-interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname1854315427415">protocol-interface-number</span></i> | <i><span class="varname" id="EN-US_TASK_0000001512671246__varname354313424413">protocol-interface-name</span></i> }</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001512671246__row169809495396"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.16.2.1.2.3.1.1 "><p id="EN-US_TASK_0000001512671246__p16981114933918">Enable all IPv4 addresses on the device to be used by the SNMP proxy to receive and respond to requests from the managed device.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.16.2.1.2.3.1.2 "><p id="EN-US_TASK_0000001512671246__p7506102218427"><a href="cmdqueryname=snmp-agent+protocol+source-status"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname155061222114211">snmp-agent proxy protocol source-status all-interface</span></b></a></p>
</td>
</tr>
<tr id="EN-US_TASK_0000001512671246__row133765414422"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.16.2.1.2.3.1.1 "><p id="EN-US_TASK_0000001512671246__p5377174174219">Specify the source IPv6 address for the SNMP proxy to receive and respond to requests from the managed device.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.16.2.1.2.3.1.2 "><p id="EN-US_TASK_0000001512671246__p423519135437"><a href="cmdqueryname=snmp-agent+protocol+source-status"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname16235111354312">snmp-agent proxy protocol ipv6 source-ip</span></b></a><i><span class="varname" id="EN-US_TASK_0000001512671246__varname14235313134320"> ip-address</span></i> [ <strong><span id="EN-US_TASK_0000001512671246__cmdparmname123581374310">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512671246__varname223512134431">vpn-instance-name</span></i> ]</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001512671246__row137951432421"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.16.2.1.2.3.1.1 "><p id="EN-US_TASK_0000001512671246__p9795343164213">Enable all IPv6 addresses on the device to be used by the SNMP proxy to receive and respond to requests from the managed device.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.3.3.16.2.1.2.3.1.2 "><p id="EN-US_TASK_0000001512671246__p9341323124317"><a href="cmdqueryname=snmp-agent+protocol+source-status"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__cmdname16341123154318">snmp-agent proxy protocol source-status ipv6 all-interface</span></b></a></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512671246__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512671246__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_snmp_cfg_0018.html">Configuring a Device to Communicate with an NMS Using SNMPv1
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_snmp_cfg_0006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_snmp_cfg_0020.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>