
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Layer 2-to-Layer 3 Mode Switching on Ethernet Interfaces">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_ethernet-int_0023.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_ethernet-int_0012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="featuretype" content="Interface Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001606889297">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Layer 2-to-Layer 3 Mode Switching on Ethernet Interfaces</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001606889297"></a><a name="EN-US_TASK_0000001606889297"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Layer 2-to-Layer 3 Mode Switching on Ethernet Interfaces</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001606889297__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As shown in <a href="#EN-US_TASK_0000001606889297__fig_dc_cfg_int_005701">Figure 1</a>, PC1, PC2, PC3, and PC4 each are on a different network segment, and DeviceB, DeviceC, DeviceD, and DeviceE are access devices for the four network segments, respectively. It is required that four physical Ethernet interfaces on DeviceA be configured as gateway interfaces for the four network segments.</p>
<div class="fignone" id="EN-US_TASK_0000001606889297__fig_dc_cfg_int_005701"><a name="EN-US_TASK_0000001606889297__fig_dc_cfg_int_005701"></a><a name="fig_dc_cfg_int_005701"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring Layer 2/Layer 3 mode switching</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, interface3, and interface4 represent <span>100GE</span><span>1/0/1</span>, <span>100GE</span><span>1/0/2</span>, <span>100GE</span><span>1/0/3</span>, and <span>100GE</span><span>1/0/4</span>, respectively.</p>
</div></div>
<br><span><img src="figure/en-us_image_0000001556210158.png" width="NaN" height="NaN"></span></div>
<h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ul><li><p>Switch the interface working mode to Layer 3.</p>
</li><li><p>Configure the IP addresses of Layer 3 Ethernet interfaces as gateway addresses.</p>
</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001606889297__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Switch the interface working mode to Layer 3.</span><p><ul><li>Switch a single interface to Layer 3 mode.<pre class="screen">&lt;HUAWEI&gt;<strong> system-view</strong>
[HUAWEI] <strong>sysname DeviceA</strong>
[DeviceA]<strong> </strong><strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> undo portswitch</strong>
[DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> quit</strong></pre>
</li></ul>
</p><p><ul><li>Switch Ethernet interfaces to Layer 3 mode in batches.<pre class="screen">[DeviceA]<strong> </strong><strong>undo portswitch batch <span>100ge</span> <span>1/0/2</span> to <span>1/0/4</span></strong></pre>
</li></ul>
</p></li><li><span>Configure the IP addresses of Layer 3 Ethernet interfaces as gateway addresses.</span><p><p># Configure the IP address of <span>100GE</span><span>1/0/1</span> as a gateway address. The configurations of <span>100GE</span><span>1/0/2</span>, <span>100GE</span><span>1/0/3</span>, and <span>100GE</span><span>1/0/4</span> are similar to the configuration of <span>100GE</span><span>1/0/1</span>. For details, see Configuration Scripts.</p>
<pre class="screen">[DeviceA]<strong> </strong><strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> </strong><strong>ip address 10.10.1.1 24</strong>
[DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> quit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001606889297__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <strong>display interface <span>100GE</span> <span>1/0/1</span></strong> command in any view to check the current working mode of the interface.</p>
<pre class="screen">[DeviceA] <strong>display interface <span>100ge</span> <span>1/0/1</span></strong>
...
Description:
<span><strong>Route Port</strong></span>,The Maximum Frame Length is 9216
Internet Address is <span><strong>10.10.1.1/24</strong></span>
...</pre>
<p>If <strong>Switch Port</strong> is displayed, the interface works in Layer 2 mode. If <strong>Route Port</strong> is displayed, the interface works in Layer 3 mode. The preceding command output shows that the interface works in Layer 3 mode.</p>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001606889297__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Configuring Scripts</h4><pre class="screen">#
sysname DeviceA
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 10.10.1.1 255.255.255.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 10.10.2.1 255.255.255.0
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ip address 10.10.3.1 255.255.255.0
#
interface <span>100GE</span><span>1/0/4</span>
 undo portswitch
 ip address 10.10.4.1 255.255.255.0
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_ethernet-int_0023.html">Configuring General Attributes for Ethernet Optical or Electrical Interfaces
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_ethernet-int_0012.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>