
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Setting the Maximum Number of External Routes Allowed in the OSPF LSDB">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0058.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0064.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176742911">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Setting the Maximum Number of External Routes Allowed in the OSPF LSDB</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176742911"></a><a name="EN-US_TASK_0000001176742911"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Setting the Maximum Number of External Routes Allowed in the OSPF LSDB</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001176742911__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before setting the maximum number of external routes allowed in the LSDB, you have completed the following task:</p>
<ul><li><a href="vrp_ospf_cfg_0010.html">Configure basic OSPF functions</a>.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176742911__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>OSPF devices in the same area are considered to have converged once they have the same LSDB. However, achieving such a state can be difficult as the number of routes on a network continuously increases, causing some devices to be unable to carry excess routing information due to limited system resources. This is called an OSPF database overflow.</p>
<p>One way to solve such an issue is to configure stub areas or NSSAs, which reduces the amount of routing information on devices. However, such an approach cannot prevent an OSPF database overflow caused by a sharp increase in dynamic routes. To resolve this issue, set the maximum number of external routes allowed in the LSDB to dynamically limit the size of the LSDB.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The maximum numbers set for all devices in the OSPF AS must be the same.</p>
</div></div>
<p>If the number of external routes in the LSDB exceeds the maximum number on a device, the device enters the overflow state and starts the overflow timer. For details, see <a href="#EN-US_TASK_0000001176742911__tab_dc_vrp_feature_new_00630701">Table 1</a>.</p>

<div class="tableBorder"><a name="EN-US_TASK_0000001176742911__tab_dc_vrp_feature_new_00630701"></a><a name="tab_dc_vrp_feature_new_00630701"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0000001176742911__tab_dc_vrp_feature_new_00630701" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Operations performed by the device after it enters or exits the overflow state</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.989999999999995%" id="mcps1.3.2.5.2.3.1.1" liSelected="liSelected"><p>Phase</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="66.01%" id="mcps1.3.2.5.2.3.1.2" liSelected="liSelected"><p>OSPF Processing</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.989999999999995%" headers="mcps1.3.2.5.2.3.1.1 "><p>Staying in the overflow state</p>
</td>
<td class="cellrowborder" valign="top" width="66.01%" headers="mcps1.3.2.5.2.3.1.2 "><p>Removes self-generated non-default external routes and stops advertising non-default external routes.</p>
<p>Discards newly received non-default external routes and does not reply with an LSAck packet.</p>
<p>Checks whether the number of external routes is still greater than the preset maximum number when the overflow timer expires.</p>
<ul><li>Restarts the timer if the number of external routes is greater than the preset maximum number.</li><li>Exits the overflow state if the number of external routes is less than or equal to the preset maximum number.</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.989999999999995%" headers="mcps1.3.2.5.2.3.1.1 "><p>Exiting the overflow state</p>
</td>
<td class="cellrowborder" valign="top" width="66.01%" headers="mcps1.3.2.5.2.3.1.2 "><p>Disables the overflow timer.</p>
<p>Advertises non-default external routes.</p>
<p>Accepts newly received non-default external routes and replies with LSAck packets.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176742911__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the OSPF view.</span><p><pre class="screen"><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
</p></li><li><span>Set the maximum number of external routes allowed in the LSDB.</span><p><pre class="screen"><a href="cmdqueryname=lsdb-overflow-limit"><b><span class="cmdname">lsdb-overflow-limit</span></b></a> <i><span class="varname">number</span></i></pre>
<p>If the number of external routes imported by OSPF exceeds the preset maximum number, the device deletes self-generated non-default external routes to ensure proper forwarding of the other external routes.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176742911__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176742911__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001176742911__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+ospf"><b><span class="cmdname">display ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>lsdb</span></strong> command to check the OSPF LSDB information on each device.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospf_cfg_0000.html">OSPF Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospf_cfg_0058.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ospf_cfg_0064.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>