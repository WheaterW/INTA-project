
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring an IPv6 MCE">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_L3VPNv6_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="vrp_L3VPNv6_cfg_0016.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv6 L3VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv6 L3VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="IPv6 L3VPN">
<meta name="featuretype" content="VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176741111">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="public_sys-resources/imagePopup.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/customQuery.js"></script>
<script language="javascript" type="text/javascript" src="public_sys-resources/imagePopup.js"></script>
<title>Example for Configuring an IPv6 MCE</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176741111"></a><a name="EN-US_TASK_0000001176741111"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring an IPv6 MCE</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001176741111__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0000001176741111__fig_dc_vrp_mpls-l3vpn-v4_cfg_012201">Figure 1</a>, site 1 and site 2 both connect to PE1, but the two sites need to be isolated from each other and use independent address spaces. To meet the preceding requirements and reduce costs, use the MCE solution.</p>
<div class="fignone" id="EN-US_TASK_0000001176741111__fig_dc_vrp_mpls-l3vpn-v4_cfg_012201"><a name="EN-US_TASK_0000001176741111__fig_dc_vrp_mpls-l3vpn-v4_cfg_012201"></a><a name="fig_dc_vrp_mpls-l3vpn-v4_cfg_012201"></a><span class="figcap"><b>Figure 1 </b>Network diagram for IPv6 MCE</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1, interface 2, interface 3, and interface 4 represent <span>100GE</span> <span>1/0/1</span>, <span>100GE</span> <span>1/0/2</span>, <span>100GE</span> <span>1/0/3</span>, and <span>100GE</span> <span>1/0/4</span>, respectively.</p>
</div></div>
<br><span><img class="imgResize" src="figure/en-us_image_0000001130781518.png" width="372.2540765146876" height="352.4533277639063" title="Click to enlarge"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176741111__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>During the configuration, note the following:</p>
<ul><li><p>The MCE must have multiple VPN instances configured and have a different interface bound to each VPN instance.</p>
</li><li><p>Routing loop detection must be disabled on the MCE, so that the MCE can exchange routing information with PEs through OSPFv3 multi-instance.</p>
</li><li>RIPng must be configured on the MCE to import VPN routes from sites 1 and 2.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176741111__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure VPN instances on the MCE and PE1 and bind interfaces to the VPN instances.</p>
</li><li><p>Configure OSPFv3 multi-instance on the MCE and PE1 to exchange VPN routing information.</p>
</li><li><p>Configure RIPng on the MCE, <span class="keyword">Device</span>A, and <span class="keyword">Device</span>B to exchange VPN routing information.</p>
</li><li>Disable routing loop detection on the MCE, and import RIPng routes destined for VPN sites.</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176741111__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure VPN instances on the MCE and PE1 and bind interfaces to the VPN instances.</span><p><p># Configure PE1.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname PE1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>ip vpn-instance vpna</strong>
[<span class="keyword">*</span>PE1-vpn-instance-vpna] <strong>ipv6-family</strong>
[<span class="keyword">*</span>PE1-vpn-instance-vpna-af-ipv6] <strong>route-distinguisher 200:1</strong>
[<span class="keyword">*</span>PE1-vpn-instance-vpna-af-ipv6] <strong>vpn-target 111:1 both</strong>
[<span class="keyword">*</span>PE1-vpn-instance-vpna-af-ipv6] <strong>quit</strong>
[<span class="keyword">*</span>PE1-vpn-instance-vpna] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>ip vpn-instance vpnb</strong>
[<span class="keyword">*</span>PE1-vpn-instance-vpnb] <strong>ipv6-family</strong>
[<span class="keyword">*</span>PE1-vpn-instance-vpnb-af-ipv6] <strong>route-distinguisher 200:2</strong>
[<span class="keyword">*</span>PE1-vpn-instance-vpnb-af-ipv6] <strong>vpn-target 222:2 both</strong>
[<span class="keyword">*</span>PE1-vpn-instance-vpnb-af-ipv6] <strong>quit</strong>
[<span class="keyword">*</span>PE1-vpn-instance-vpnb] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>interface <span>100GE</span><span>1/0/1</span></strong>
[<span class="keyword">*</span>PE1-<span>100GE</span><span>1/0/1</span>] <strong>undo </strong><strong>portswitch</strong>
[<span class="keyword">*</span>PE1-<span>100GE</span><span>1/0/1</span>] <strong>ip binding vpn-instance vpna</strong>
[<span class="keyword">*</span>PE1-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 enable</strong>
[<span class="keyword">*</span>PE1-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 address 2001:DB8:8::1 64</strong>
[<span class="keyword">*</span>PE1-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span>PE1]<strong>interface <span>100GE</span><span>1/0/2</span></strong>
[<span class="keyword">*</span>PE1-<span>100GE</span><span>1/0/2</span>] <strong>undo </strong><strong>portswitch</strong>
[<span class="keyword">*</span>PE1-<span>100GE</span><span>1/0/2</span>] <strong>ip binding vpn-instance vpnb</strong>
[<span class="keyword">*</span>PE1-<span>100GE</span><span>1/0/2</span>] <strong>ipv6 enable</strong>
[<span class="keyword">*</span>PE1-<span>100GE</span><span>1/0/2</span>] <strong>ipv6 address 2001:DB8:9::1 64</strong>
[<span class="keyword">*</span>PE1-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p># Configure the MCE.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname MCE</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>MCE] <strong>ip vpn-instance vpna</strong>
[<span class="keyword">*</span>MCE-vpn-instance-vpna] <strong>ipv6-family</strong>
[<span class="keyword">*</span>MCE-vpn-instance-vpna-af-ipv6] <strong>route-distinguisher 100:1</strong>
[<span class="keyword">*</span>MCE-vpn-instance-vpna-af-ipv6] <strong>quit</strong>
[<span class="keyword">*</span>MCE-vpn-instance-vpna] <strong>quit</strong>
[<span class="keyword">*</span>MCE] <strong>ip vpn-instance vpnb</strong>
[<span class="keyword">*</span>MCE-vpn-instance-vpnb] <strong>ipv6-family</strong>
[<span class="keyword">*</span>MCE-vpn-instance-vpnb-af-ipv6] <strong>route-distinguisher 100:2</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-vpn-instance-vpnb-af-ipv6] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-vpn-instance-vpnb] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE] <strong>interface <span>100GE</span><span>1/0/1</span></strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/1</span>] <strong>undo </strong><strong>portswitch</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/1</span>] <strong>ip binding vpn-instance vpna</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 address 2001:DB8:8::2 64</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE] <strong>interface <span>100GE</span><span>1/0/2</span></strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/2</span>] <strong>undo </strong><strong>portswitch</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/2</span>] <strong>ipv6 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/2</span>] <strong>ip binding vpn-instance vpnb</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/2</span>] <strong>ipv6 address 2001:DB8:9::2 64</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE] <strong>interface <span>100GE</span><span>1/0/3</span></strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/3</span>] <strong>undo </strong><strong>portswitch</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/3</span>] <strong>ipv6 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/3</span>] <strong>ip binding vpn-instance vpna</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/3</span>] <strong>ipv6 address 2001:DB8:3::2 64</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE] <strong>interface <span>100GE</span><span>1/0/4</span></strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/4</span>] <strong>undo </strong><strong>portswitch</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/4</span>] <strong>ipv6 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/4</span>] <strong>ip binding vpn-instance vpnb</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/4</span>] <strong>ipv6 address 2001:DB8:4::2 64</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/4</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE] <strong>commit</strong></pre>
</p></li><li><span>Configure OSPFv3 multi-instance on PE1 and the MCE.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>ospfv3 100 vpn-instance vpna</strong>
[<span class="keyword"><span class="keyword">*</span></span>PE1-ospfv3-100] <strong>router-id 10.5.5.5</strong>
[<span class="keyword"><span class="keyword">*</span></span>PE1-ospfv3-100] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>PE1] <strong>interface <span>100GE</span><span>1/0/1</span></strong>
[<span class="keyword"><span class="keyword">*</span></span>PE1-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 100 area 1 instance 1</strong>
[<span class="keyword"><span class="keyword">*</span></span>PE1-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>PE1] <strong>ospfv3 200 vpn-instance vpnb</strong>
[<span class="keyword"><span class="keyword">*</span></span>PE1-ospfv3-200] <strong>router-id 10.6.6.6</strong>
[<span class="keyword"><span class="keyword">*</span></span>PE1-ospfv3-200] <strong>quit</strong> 
[<span class="keyword"><span class="keyword">*</span></span>PE1]<strong> interface <span>100GE</span><span>1/0/2</span></strong>
[<span class="keyword"><span class="keyword">*</span></span>PE1-<span>100GE</span><span>1/0/2</span>] <strong>ospfv3 200 area 2 instance 2</strong>
[<span class="keyword"><span class="keyword">*</span></span>PE1-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>PE1] <strong>comm</strong><strong>it</strong></pre>
<p># Configure the MCE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>MCE] <strong>ospfv3 100 vpn-instance vpna</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-ospfv3-100] <strong>router-id 10.7.7.7</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-ospfv3-100] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE] <strong>interface <span>100GE</span><span>1/0/1</span></strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 100 area 1 instance 1</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE] <strong>ospfv3 200 vpn-instance vpnb</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-ospfv3-200] <strong>router-id 10.8.8.8</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-ospfv3-200] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE]<strong> interface <span>100GE</span><span>1/0/2</span></strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/2</span>] <strong>ospfv3 200 area 2 instance 2</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE] <strong>comm</strong><strong>it</strong></pre>
</p></li><li><span>Configure RIPng on the MCE to import VPN routes from sites 1 and 2.</span><p><p># Configure the MCE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>MCE] <strong>ripng 100 vpn-instance vpna</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-ripng-100] <strong>import-route ospfv3 100</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-ripng-100] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE] <strong>interface <span>100GE</span><span>1/0/3</span></strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/3</span>] <strong>ripng 100 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE]<strong> ripng 200 vpn-instance vpnb</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-ripng-200] <strong>import-route ospfv3 200</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-ripng-200] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE] <strong>interface <span>100GE</span><span>1/0/4</span></strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/4</span>] <strong>ripng 200 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-<span>100GE</span><span>1/0/4</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE] <strong>commit</strong></pre>
</p><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>A</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> </strong><strong>interface <span>100GE</span><span>1/0/1</span></strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>undo </strong><strong>portswitch</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 address 2001:DB8:3::1 64</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword"><span class="keyword">*</span></span></span><span class="keyword">Device</span>A]<strong> </strong><strong>interface Loopback 1</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A-Loopback1] <strong>ipv6 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A-Loopback1] <strong>ipv6 address 2001:DB8:13::3 128</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A-Loopback1] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A] <strong>ripng 100</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A-ripng-100] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A]<strong> </strong><strong>interface <span>100GE</span><span>1/0/1</span></strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ripng 100 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A]<strong> </strong><strong>interface Loopback 1</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A-Loopback1] <strong>ripng 100 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A-Loopback1] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Configure <span class="keyword">Device</span>B.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>B</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B]<strong> </strong><strong>interface <span>100GE</span><span>1/0/1</span></strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span>] <strong>undo </strong><strong>portswitch</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 address 2001:DB8:4::1 64</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B]<strong> </strong><strong>interface Loopback 1</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B-Loopback1] <strong>ipv6 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B-Loopback1] <strong>ipv6 address 2001:DB8:14::4 128</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B-Loopback1] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B] <strong>ripng 200</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B-ripng-200] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B]<strong> </strong><strong>interface <span>100GE</span><span>1/0/1</span></strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span>] <strong>ripng 200 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B]<strong> </strong><strong>interface Loopback 1</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B-Loopback1] <strong>ripng 200 enable</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B-Loopback1] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span><span class="keyword">Device</span>B] <strong>commit</strong></pre>
</p></li><li><span>Disable routing loop detection on the MCE and import RIP routes destined for VPN sites.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>MCE] <strong>ospfv3 100 vpn-instance vpna</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>MCE-ospfv3-100] <strong>vpn-instance-capability simple</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-ospfv3-100] <strong>import-route ripng 100</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-ospfv3-100] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE] <strong>ospfv3 200 vpn-instance vpnb</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-ospfv3-200] <strong>vpn-instance-capability simple</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-ospfv3-200] <strong>import-route ripng 200</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE-ospfv3-200] <strong>quit</strong>
[<span class="keyword"><span class="keyword">*</span></span>MCE] <strong>commit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001176741111__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After the configuration is complete, run the <strong>display ipv6 routing-table</strong> <strong>vpn-instance</strong> command on the MCE to check IPv6 routing information of VPN instances.</p>
<p>The following example uses the VPN instance <strong>vpna</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>MCE] <strong>display ipv6 routing-table vpn-instance vpna</strong>
Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route 
------------------------------------------------------------------------------ 
Routing Table : vpna
         Destinations : 7        Routes : 7

Destination  : 2001:DB8:13::3                          PrefixLength : 128
NextHop      : FE80::2200:10FF:FE03:0                  Preference   : 100
Cost         : 1                                       Protocol     : RIPng
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : <span>100GE</span><span>1/0/3</span>                               Flags        : D

Destination  : 2001:DB8:8::                            PrefixLength : 64
NextHop      : 2001:DB8:8::2                           Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : <span>100GE</span><span>1/0/1</span><strong> </strong>                              Flags        : D

Destination  : 2001:DB8:8::2                           PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : <span>100GE</span><span>1/0/1</span>                               Flags        : D

Destination  : 2001:DB8:3::                            PrefixLength : 64
NextHop      : 2001:DB8:3::2                           Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : <span>100GE</span><span>1/0/3</span>           <span></span>                    Flags        : D

Destination  : 2001:DB8:3::2                           PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : <span>100GE</span><span>1/0/3</span>                               Flags        : D

Destination  : FE80::                                  PrefixLength : 10
NextHop      : ::                                      Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : NULL0                                   Flags        : D</pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001176741111__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p>PE1</p>
<pre class="screen">#
sysname PE1
#
ip vpn-instance vpna
 ipv6-family
  route-distinguisher 200:1
  vpn-target 111:1 export-extcommunity
  vpn-target 111:1 import-extcommunity
#
ip vpn-instance vpnb
 ipv6-family
  route-distinguisher 200:2
  vpn-target 222:2 export-extcommunity
  vpn-target 222:2 import-extcommunity
#
ospfv3 100 vpn-instance vpna
 router-id 10.5.5.5
 area 0.0.0.1
#
ospfv3 200 vpn-instance vpnb
 router-id 10.6.6.6
 area 0.0.0.2
#
interface <span>100GE</span><span>1/0/1</span>
<strong> </strong>undo portswitch
 ip binding vpn-instance vpna
 ipv6 enable
 ipv6 address 2001:DB8:8::1/64
 ospfv3 100 area 0.0.0.1 instance 1
#
interface <span>100GE</span><span>1/0/2</span>
<strong> </strong>undo portswitch
 ip binding vpn-instance vpnb
 ipv6 enable
 ipv6 address 2001:DB8:9::1/64
 ospfv3 200 area 0.0.0.2 instance 2
#
return</pre>
</li><li><p>MCE</p>
<pre class="screen">#
sysname MCE
#
ip vpn-instance vpna
 ipv6-family
  route-distinguisher 100:1
#
ip vpn-instance vpnb
 ipv6-family
  route-distinguisher 100:2
#
ospfv3 100 vpn-instance vpna
 router-id 10.7.7.7
 vpn-instance-capability simple
 import-route ripng 100
 area 0.0.0.1
#
ospfv3 200 vpn-instance vpnb
 router-id 10.8.8.8
 vpn-instance-capability simple
 import-route ripng 200
 area 0.0.0.2
#
interface <span>100GE</span><span>1/0/1</span>
<strong> </strong>undo portswitch
 ip binding vpn-instance vpna
 ipv6 enable
 ipv6 address 2001:DB8:8::2/64
 ospfv3 100 area 0.0.0.1 instance 1
#
interface <span>100GE</span><span>1/0/2</span>
<strong> </strong>undo portswitch
 ip binding vpn-instance vpnb
 ipv6 enable
 ipv6 address 2001:DB8:9::2/64
 ospfv3 200 area 0.0.0.2 instance 2
#
interface <span>100GE</span><span>1/0/3</span>
<strong> </strong>undo portswitch
 ip binding vpn-instance vpna
 ipv6 enable
 ipv6 address 2001:DB8:3::2/64
 ripng 100 enable
#
interface <span>100GE</span><span>1/0/4</span>
<strong> </strong>undo portswitch
 ip binding vpn-instance vpnb
 ipv6 enable
 ipv6 address 2001:DB8:4::2/64
 ripng 200 enable
#
ripng 100 vpn-instance vpna
 import-route ospfv3 100
#
ripng 200 vpn-instance vpnb
 import-route ospfv3 200
#
return</pre>
</li><li><p><span class="keyword">Device</span>A</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>A
#
interface <span>100GE</span><span>1/0/1</span>
<strong> </strong>undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:3::1/64
 ripng 100 enable
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:13::3/128
 ripng 100 enable
#
ripng 100
#
return</pre>
</li><li><p><span class="keyword">Device</span>B</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>B
#
interface <span>100GE</span><span>1/0/1</span>
<strong> </strong>undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:4::1/64
 ripng 200 enable
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:14::4/128
 ripng 200 enable
#
ripng 200
#
return</pre>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_L3VPNv6_cfg_0010.html">Configuring IPv6 MCE
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_L3VPNv6_cfg_0016.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>

<script language="JavaScript">
<!--
initImageViewer('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>