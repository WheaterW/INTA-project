
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring IPv6 SEND">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_nd_cfg_0029.html">
<meta name="DC.Relation" scheme="URI" content="vrp_nd_cfg_0033.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130782292">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring IPv6 SEND</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130782292"></a><a name="EN-US_TASK_0000001130782292"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring IPv6 SEND</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130782292__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As shown in <a href="#EN-US_TASK_0000001130782292__fig_dc_vrp_ipv6_cfg_003601">Figure 1</a>, <span class="keyword">Device</span>A and <span class="keyword">Device</span>B communicate using IPv6. Assume that <span class="keyword">Device</span>B is an attacker. To enable <span class="keyword">Device</span>A to discard messages received from <span class="keyword">Device</span>B, configure IPv6 SEND on <span class="keyword">Device</span>A.</p>
<div class="fignone" id="EN-US_TASK_0000001130782292__fig_dc_vrp_ipv6_cfg_003601"><a name="EN-US_TASK_0000001130782292__fig_dc_vrp_ipv6_cfg_003601"></a><a name="fig_dc_vrp_ipv6_cfg_003601"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring IPv6 SEND</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1 represents <span>100GE</span> <span>1/0/1</span>.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001176742101.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130782292__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure a CGA IPv6 address and a common IPv6 address for <span class="keyword">Device</span>A's interface 1.</p>
</li><li><p>Enable the strict security mode on <span class="keyword">Device</span>A's interface 1.</p>
</li><li><p>Configure IPv6 addresses for <span class="keyword">Device</span>B's interface 1.</p>
</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130782292__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure a CGA IPv6 address and a common IPv6 address for <span class="keyword">Device</span>A's interface 1.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>A</strong>
<span>[<span><span class="keyword">*</span></span><span class="keyword">HUAWEI</span>] <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>rsa key-pair label huawei</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 enable</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 security rsakey-pair huawei</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 security modifier sec-level 1</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 address fe80::3 link-local cga</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 address 2001:db8:2::/64 cga</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 address 2001:db8:1::1/64</strong>
<span>[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></pre>
</p></li><li><span>Enable the strict security mode on <span class="keyword">Device</span>A's interface 1.</span><p><pre class="screen">[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 nd security strict</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
<span>[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A] <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></pre>
</p></li><li><span>Configure IPv6 addresses for <span class="keyword">Device</span>B's interface 1.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>B</strong>
<span>[<span><span class="keyword">*</span></span><span class="keyword">HUAWEI</span>] <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 enable</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 address auto link-local</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 address 2001:db8:2::2/64</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 address 2001:db8:1::2/64</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
<span>[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B] <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001130782292__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>If the configuration is successful, you can check that the IPv6 addresses and IPv6 SEND have been configured and the interface status and IPv6 protocol status are up.</p>
<p># Check information about <span class="keyword">Device</span>A's <span>100ge</span> <span>1/0/1</span>.</p>
<pre class="screen">[<span><span class="keyword">*</span></span><span class="keyword">Device</span>A] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-<span>100ge</span><span>1/0/1</span>] <strong>display this ipv6 interface</strong>
<span>100ge</span><span>1/0/1</span> current state : UP
IPv6 protocol current state : UP
IPv6 is enabled, link-local address is FE80::3057:B5D6:6BD6:6CA8 
  Global unicast address(es):
    2001:db8:2::2092:84CE:827B:D5A4, subnet is 2001:db8:2::/64
<strong>   </strong>2001:db8:1::1, subnet is 2001:db8:1::/64
  Joined group address(es):
    FF02::1:FF7B:D5A4
    FF02::2
    FF02::1
    FF02::1:FFD6:6CA8
  MTU is 1500 bytes 
  ND DAD is enabled, number of DAD attempts: 1
  ND NUD is enabled, number of NUD attempts: 3
  ND NUD interval is 1000 milliseconds
  ND reachable time is 1200000 milliseconds
  ND stale time is 1200 seconds
  ND retransmit interval is 1000 milliseconds
  ND RAs are halted 
  ND Proxy is disabled</pre>
<p># Check the IPv6 SEND configuration on <span class="keyword">Device</span>A's <span>100ge</span> <span>1/0/1</span>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-<span>1/0/1</span>] <strong>display ipv6 security interface <span>100ge</span> <span>1/0/1</span></strong>
 (L) : Link local address
 SEND: Security ND
 SEND information for the interface : <span>100ge</span><span>1/0/1</span>
----------------------------------------------------------------------------
 IPv6 address                                   PrefixLength Collision Count
----------------------------------------------------------------------------
 FE80::3057:B5D6:6BD6:6CA8 (L)                  10           0
 2001:db8:2::2092:84CE:827B:D5A4                64           0
----------------------------------------------------------------------------
 SEND sec value                     : 1
 SEND security modifier value       : 2001:db8:3::1
 SEND RSA key label bound           : <strong>huawei</strong>
 SEND ND minimum key length value   : 512
 SEND ND maximum key length value   : 2048
 SEND ND Timestamp delta value      : 300
 SEND ND Timestamp fuzz value       : 1
 SEND ND Timestamp drift value      : 1
 SEND ND fully secured mode         : <strong>enabled</strong></pre>
<p># Check information about <span class="keyword">Device</span>B's <span>100ge</span> <span>1/0/1</span>.</p>
<pre class="screen">[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-<span>100ge</span><span>1/0/1</span>] <strong>display this ipv6 interface</strong>
<span>100GE</span><span>1/0/1</span> current state : <strong>UP</strong>
IPv6 protocol current state : <strong>UP</strong>
IPv6 is enabled, link-local address is FE80::2E0:E6FF:FE13:8100 
  Global unicast address(es):
    2001:db8:2::2, subnet is 2001:db8:2::/64
    2001:db8:1::2, subnet is 2001:db8:1::/64
  Joined group address(es):
    FF02::1:FF00:2
    FF02::2
    FF02::1
    FF02::1:FF13:8100
  MTU is 1500 bytes 
  ND DAD is enabled, number of DAD attempts: 1
  ND NUD is enabled, number of NUD attempts: 3
  ND NUD interval is 1000 milliseconds
  ND reachable time is 1200000 milliseconds
  ND stale time is 1200 seconds
  ND retransmit interval is 1000 milliseconds
  ND RAs are halted 
  ND Proxy is disabled</pre>
<p># Ping the CGA link-local address of <span class="keyword">Device</span>A from <span class="keyword">Device</span>B. The ping fails because IPv6 SEND is configured on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-<span>1/0/1</span>] <strong>ping ipv6 FE80::3057:B5D6:6BD6:6CA8 -i <span>100ge</span> <span>1/0/1</span></strong>
  PING FE80::3057:B5D6:6BD6:6CA8 : 56  data bytes, press CTRL_C to break
    Request time out
    Request time out
    Request time out
    Request time out
    Request time out

  --- FE80::3057:B5D6:6BD6:6CA8 ping statistics ---
    5 packet(s) transmitted
    0 packet(s) received
    100.00% packet loss
    round-trip min/avg/max = 0/0/0 ms
                            </pre>
<p># Ping the CGA global unicast address of <span class="keyword">Device</span>A from <span class="keyword">Device</span>B. The ping fails because IPv6 SEND is configured on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span> ] <strong>ping ipv6 2001:db8:2::2092:84CE:827B:D5A4</strong>
  PING 2001:db8:2::2092:84CE:827B:D5A4 : 56  data bytes, press CTRL_C to break
    Request time out
    Request time out
    Request time out
    Request time out
    Request time out

  --- 2001:db8:2::2092:84CE:827B:D5A4 ping statistics ---
    5 packet(s) transmitted
    0 packet(s) received
    100.00% packet loss
    round-trip min/avg/max = 0/0/0 ms
                              </pre>
<p># Ping the common global unicast address of <span class="keyword">Device</span>A from <span class="keyword">Device</span>B. The ping fails because IPv6 SEND is configured on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span> ] <strong>ping ipv6 2001:db8:1::1</strong>
  PING 2001:db8:1::1 : 56  data bytes, press CTRL_C to break
    Request time out
    Request time out
    Request time out
    Request time out
    Request time out

  --- 2001:db8:2::2092:84CE:827B:D5A4 ping statistics ---
    5 packet(s) transmitted
    0 packet(s) received
    100.00% packet loss
    round-trip min/avg/max = 0/0/0 ms
                              </pre>
<p># Disable the strict security mode on <span class="keyword">Device</span>A, and ping <span class="keyword">Device</span>A's IPv6 address from <span class="keyword">Device</span>B. The ping is successful. The following provides an example of pinging the CGA global unicast address of <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span> ] <strong>undo ipv6 nd security strict</strong>
<span>[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span> ] <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></pre>
<pre class="screen">[<span><span class="keyword">*</span></span><span class="keyword">Device</span>B-<span>100GE</span><span>1/0/1</span> ] <strong>ping ipv6 2001:db8:2::2092:84CE:827B:D5A4</strong>
  PING 2001:db8:2::2092:84CE:827B:D5A4 : 56  data bytes, press CTRL_C to break
    Reply from 2001:db8:2::2092:84CE:827B:D5A4
    bytes=56 Sequence=1 hop limit=64  time = 1 ms
    Reply from 2001:db8:2::2092:84CE:827B:D5A4
    bytes=56 Sequence=2 hop limit=64  time = 20 ms
    Reply from 2001:db8:2::2092:84CE:827B:D5A4
    bytes=56 Sequence=3 hop limit=64  time = 1 ms
    Reply from 2001:db8:2::2092:84CE:827B:D5A4
    bytes=56 Sequence=4 hop limit=64  time = 1 ms
    Reply from 2001:db8:2::2092:84CE:827B:D5A4
    bytes=56 Sequence=5 hop limit=64  time = 1 ms

  --- 2001:db8:2::2092:84CE:827B:D5A4 ping statistics ---
    5 packet(s) transmitted
    5 packet(s) received
    0.00% packet loss
    round-trip min/avg/max = 1/4/20 ms
                                </pre>
<h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p><span class="keyword">Device</span>A</p>
<pre class="screen">#
 sysname <span class="keyword">Device</span>A
#
rsa key-pair label huawei
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ipv6 enable
 ipv6 security rsakey-pair huawei
 ipv6 security modifier sec-level 1
 ipv6 address 2001:db8:2::/64 cga
 ipv6 address 2001:db8:1::1/64
 ipv6 address fe80::3 link-local cga
 ipv6 nd security strict
#
return</pre>
</li><li><p><span class="keyword">Device</span>B</p>
<pre class="screen">#
 sysname <span class="keyword">Device</span>B
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:db8:2::2/64
 ipv6 address 2001:db8:1::2/64
 ipv6 address auto link-local
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_nd_cfg_0029.html">Configuring IPv6 SEND
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_nd_cfg_0033.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>