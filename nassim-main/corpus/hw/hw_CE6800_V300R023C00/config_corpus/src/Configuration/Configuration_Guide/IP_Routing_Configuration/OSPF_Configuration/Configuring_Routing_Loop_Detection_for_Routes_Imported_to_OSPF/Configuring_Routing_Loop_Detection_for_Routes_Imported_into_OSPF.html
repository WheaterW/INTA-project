
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Routing Loop Detection for Routes Imported into OSPF">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0301.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0302.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0303.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130623432">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring Routing Loop Detection for Routes Imported into OSPF</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130623432"></a><a name="EN-US_TASK_0000001130623432"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Routing Loop Detection for Routes Imported into OSPF</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130623432__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Routing loops may occur when an OSPF process imports routes. If routing loop detection is enabled for routes imported to OSPF on a device and this device detects that it imports a route advertised by itself, it sends this route with a large link cost to other devices. After receiving this route, these devices preferentially select other paths, thereby preventing routing loops.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130623432__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the OSPF view.</span><p><pre class="screen"><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
<p>The <em id="EN-US_TASK_0000001130623432__en-us_task_0000001130623404_i145692117181812">process-id</em> parameter specifies the ID of a process, and the default value is 1.</p>
</p></li><li><span>Enable the OSPF Opaque LSA capability.</span><p><pre class="screen"><a href="cmdqueryname=opaque-capability+enable"><b><span class="cmdname">opaque-capability enable</span></b></a></pre>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>OSPF uses opaque LSAs to implement loop detection on imported routes. Therefore, to enable loop detection on imported routes, run the <a href="cmdqueryname=opaque-capability+enable"><b><span class="cmdname">opaque-capability enable</span></b></a> command to enable the opaque LSA capability.</p>
</div></div>
</p></li><li><span>(Optional) Exit the routing loop detection alarm state and clear related alarms.</span><p><pre class="screen"><a href="cmdqueryname=clear+route+loop-detect+ospf+alarm-state"><b><span class="cmdname">clear route loop-detect ospf alarm-state</span></b></a></pre>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the device detects an OSPF routing loop, it reports an alarm. Because the device cannot automatically detect whether the routing loop is eliminated, you need to run this command after the routing loop is eliminated to prevent the device from advertising a large link cost for imported routes and manually clear the OSPF routing loop alarm. If this command is executed when the routing loop has not been eliminated, the alarm is reported again.</p>
</div></div>
</p></li><li><span>Enable routing loop detection for routes imported into OSPF.</span><p><pre class="screen"><a href="cmdqueryname=route+loop-detect+ospf+enable"><b><span class="cmdname">route loop-detect ospf enable</span></b></a></pre>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To disable routing loop detection for routes imported into OSPF, run the <a href="cmdqueryname=undo+route+loop-detect+ospf+enable"><b><span class="cmdname">undo route loop-detect ospf enable</span></b></a> command.</p>
</div></div>
</p></li><li><span>(Optional) Enable routing loop detection for routes imported into OSPF.</span><p><pre class="screen"><a href="cmdqueryname=route+loop-detect+ospf+import-ospf+enable"><b><span class="cmdname">route loop-detect ospf import-ospf enable</span></b></a></pre>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130623432__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130623432__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospf_cfg_0301.html">Configuring Routing Loop Detection for Routes Imported to OSPF
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospf_cfg_0302.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ospf_cfg_0303.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>