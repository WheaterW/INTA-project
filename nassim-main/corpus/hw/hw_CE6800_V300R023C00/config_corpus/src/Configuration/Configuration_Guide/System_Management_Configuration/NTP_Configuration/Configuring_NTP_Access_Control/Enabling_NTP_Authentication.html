
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling NTP Authentication">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_ntp_cfg_0023.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ntp_cfg_0107.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ntp_cfg_0024.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512676210">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Enabling NTP Authentication</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512676210"></a><a name="EN-US_TASK_0000001512676210"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling NTP Authentication</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001512676210__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>NTP authentication can be enabled on networks requiring high security. With password authentication configured between the client and server sides, a client synchronize its clocks only with the authenticated server.</p>
<p>When configuring the NTP authentication function, comply with the following rules:</p>
<ul><li>Enable NTP authentication before configuring the basic NTP functions. Otherwise, NTP authentication will not be performed.</li><li>Configure NTP authentication on both the client and server. Otherwise, NTP authentication does not take effect. In NTP peer mode, the client is the symmetric active peer, and the server is the symmetric passive peer.</li><li>Configure the same key on the client and server.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512676210__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable NTP authentication.</span><p><pre class="screen"><a href="cmdqueryname=ntp+authentication+enable"><b><span class="cmdname">ntp authentication enable</span></b></a></pre>
</p></li><li><span>Configure an NTP authentication key.</span><p><pre class="screen"><a href="cmdqueryname=ntp+authentication-keyid"><b><span class="cmdname">ntp authentication-keyid</span></b></a><i><span class="varname"> </span></i><i><span class="varname">keyId</span></i> <strong><span>authentication-mode</span></strong> { <strong>md5</strong> | <strong>hmac-sha256</strong> |<strong><span> aes-128-cmac</span></strong> | <strong><span>aes-256-cmac</span></strong> } { <em>password</em> | <strong>cipher</strong> <em>password</em> }</pre>
</p><p><p>MD5 is a weak security algorithm. It can be used only after the weak security algorithm or protocol feature package is installed after the <a href="cmdqueryname=install+feature-software+WEAKEA"><b><span class="cmdname">install feature-software WEAKEA</span></b></a> command is run. You are advised to use other security algorithms for NTP key authentication. </p>
<p>The system automatically verifies the strength of an entered key. Only the key that meets the strength requirements can be configured. To disable key strength check, run the <a href="cmdqueryname=ntp+authentication-password+complexity-check+disable"><b><span class="cmdname">ntp authentication-password complexity-check disable</span></b></a> command.</p>
<div class="notice"><span class="noticetitle"><img src="public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>Disabling the key strength check function causes security risks. Therefore, you are advised not to run this command.</p>
</div></div>
</p></li><li><span>Declare the authentication key to be reliable.</span><p><pre class="screen"><a href="cmdqueryname=ntp+trusted+authentication-keyid"><b><span class="cmdname">ntp trusted authentication-keyid</span></b></a> <i><span class="varname">keyNum</span></i></pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>A device that attempts to synchronize its clock must declare its key as reliable.</p>
</li><li><p>When the client synchronizes to an authenticated server, the authentication key must be declared as reliable only on the client side.</p>
</li></ul>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_ntp_cfg_0023.html">Configuring NTP Access Control
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_ntp_cfg_0107.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_ntp_cfg_0024.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>