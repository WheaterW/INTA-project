
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Static SSM Mapping">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_mld_cfg_0022.html">
<meta name="DC.Relation" scheme="URI" content="vrp_mld_cfg_0026.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MLD">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MLD">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MLD">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001589256137">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Static SSM Mapping</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001589256137"></a><a name="EN-US_TASK_0000001589256137"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Static SSM Mapping</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001589256137__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>The network shown in <a href="#EN-US_TASK_0000001589256137__fig_01">Figure 1</a> runs PIM-SM and uses SSM to provide IPv6 multicast services for group members. DeviceD's interface connected to Receiver's network segment runs MLDv2. Because Receiver runs MLDv1 and does not support MLDv2, it cannot specify multicast sources when it joins a multicast group. The SSM group address range on the network is FF31::/32. Source1, Source2, and Source3 all send multicast data to the multicast groups in this range.</p>
<p>Receiver wants to obtain the SSM service and receive IPv6 multicast data only from Source1 and Source3 while blocking multicast data from Source2.</p>
<div class="fignone" id="EN-US_TASK_0000001589256137__fig_01"><a name="EN-US_TASK_0000001589256137__fig_01"></a><a name="fig_01"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring static SSM mapping</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, and interface3 represent <span>100GE</span><span>1/0/1</span>, <span>100GE</span><span>1/0/2</span>, and <span>100GE</span><span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001538257286.png"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="28.605169925206663%" id="mcps1.3.1.5.1.4.1.1" liSelected="liSelected"><p>Device</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="30.94082141451253%" id="mcps1.3.1.5.1.4.1.2" liSelected="liSelected"><p>Interface</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="40.454008660280806%" id="mcps1.3.1.5.1.4.1.3" liSelected="liSelected"><p>IPv6 Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="3" valign="top" width="28.605169925206663%" headers="mcps1.3.1.5.1.4.1.1 "><p><span class="keyword">Device</span>A</p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="30.94082141451253%" headers="mcps1.3.1.5.1.4.1.2 "><p><span>100GE</span><span>1/0/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="40.454008660280806%" headers="mcps1.3.1.5.1.4.1.3 "><p>2001:db8:5::2/64</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.1 "><p><span>100GE</span><span>1/0/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.2 "><p>2001:db8:1::1/64</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.1 "><p><span>100GE</span><span>1/0/3</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.2 "><p>2001:db8:3::1/64</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" valign="top" width="28.605169925206663%" headers="mcps1.3.1.5.1.4.1.1 "><p><span class="keyword">Device</span>B</p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="30.94082141451253%" headers="mcps1.3.1.5.1.4.1.2 "><p><span>100GE</span><span>1/0/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="40.454008660280806%" headers="mcps1.3.1.5.1.4.1.3 "><p>2001:db8:6::2/64</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.1 "><p><span>100GE</span><span>1/0/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.2 "><p>2001:db8:1::2/64</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.1 "><p><span>100GE</span><span>1/0/3</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.2 "><p>2001:db8:2::1/64</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" valign="top" width="28.605169925206663%" headers="mcps1.3.1.5.1.4.1.1 "><p><span class="keyword">Device</span>C</p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="30.94082141451253%" headers="mcps1.3.1.5.1.4.1.2 "><p><span>100GE</span><span>1/0/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="40.454008660280806%" headers="mcps1.3.1.5.1.4.1.3 "><p>2001:db8:7::2/64</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.1 "><p><span>100GE</span><span>1/0/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.2 "><p>2001:db8:4::1/64</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.1 "><p><span>100GE</span><span>1/0/3</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.2 "><p>2001:db8:2::2/64</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" valign="top" width="28.605169925206663%" headers="mcps1.3.1.5.1.4.1.1 "><p><span class="keyword">Device</span>D</p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="30.94082141451253%" headers="mcps1.3.1.5.1.4.1.2 "><p><span>100GE</span><span>1/0/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="40.454008660280806%" headers="mcps1.3.1.5.1.4.1.3 "><p>2001:db8:8::2/64</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.1 "><p><span>100GE</span><span>1/0/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.2 "><p>2001:db8:4::2/64</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.1 "><p><span>100GE</span><span>1/0/3</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.1.5.1.4.1.2 "><p>2001:db8:3::2/64</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001589256137__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure IPv6 addresses and a unicast routing protocol for interfaces on each <span class="keyword">device</span> to ensure connectivity at the network layer.</p>
</li><li><p>Configure basic IPv6 multicast functions on each device to implement multicast data forwarding on the network.</p>
</li><li><p>Enable MLD SSM mapping on DeviceD.</p>
</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001589256137__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure IPv6 addresses and a unicast routing protocol for interfaces on each device.</span><p><p># Configure DeviceA.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname DeviceA</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>ospfv3 1</strong>
[<span class="keyword">*</span>DeviceA-ospfv3-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>ipv6</strong><strong> enable</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 address 2001:db8:5::2 64</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 1</strong><strong> area 0.0.0.0</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span><span><span>1/0/2</span></span></span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>ipv6</strong><strong> enable</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>ipv6 address 2001:db8:1::1 64</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>ospfv3 1</strong><strong> area 0.0.0.0</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span><span><span>1/0/3</span></span></span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span><span><span>1/0/3</span></span></span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span><span><span>1/0/3</span></span></span>] <strong>ipv6</strong><strong> enable</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span><span><span>1/0/3</span></span></span>] <strong>ipv6 address 2001:db8:3::1 64</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span><span><span>1/0/3</span></span></span>] <strong>ospfv3 1</strong><strong> area 0.0.0.0</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span><span><span>1/0/3</span></span></span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
<p>The configurations of DeviceB, DeviceC, and DeviceD are similar to the configuration of DeviceA. For detailed configurations, see Configuration Scripts.</p>
</p></li><li><span>Enable the multicast function on all the devices and enable IPv6 PIM-SM on all the involved interfaces.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>multicast ipv6 routing-enable</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>pim ipv6 sm</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface </strong><strong><span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/2</span>] <strong>pim ipv6 sm</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span><span><span>1/0/3</span></span></span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span><span><span>1/0/3</span></span></span>] <strong>pim ipv6 sm</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span><span><span>1/0/3</span></span></span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
<p>The configurations of DeviceB, DeviceC, and DeviceD are similar to the configuration of DeviceA. For detailed configurations, see Configuration Scripts.</p>
</p></li><li><span>Enable MLD on the interfaces connected to user hosts.</span><p><p># Enable MLD on <span>100GE</span><span>1/0/1</span> of <span class="keyword">Device</span>D and set the version to MLDv2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>interface </strong><strong><span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">Device</span>D-<span>100GE</span><span>1/0/1</span>] <strong>mld enable</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>D-<span>100GE</span><span>1/0/1</span>] <strong>mld version 2</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>D-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceD] <strong>commit</strong></pre>
</p></li><li><span>Enable MLD SSM mapping on the interface connected to the user host.</span><p><p># Enable MLD SSM mapping on <span>100GE</span><span>1/0/1</span> of <span class="keyword">Device</span>D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">Device</span>D-<span>100GE</span><span>1/0/1</span>] <strong>mld ssm-mapping enable</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>D-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceD] <strong>commit</strong></pre>
</p></li><li><span>Configure the SSM group address range on all devices.</span><p><p># Set the SSM group address range to FF31::/32 on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>acl ipv6 number 2000</strong>
[<span class="keyword">*</span>DeviceA-acl6-basic-2000] <strong>rule permit source ff31::/32</strong>
[<span class="keyword">*</span>DeviceA-acl6-basic-2000] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>pim ipv6</strong>
[<span class="keyword">*</span>DeviceA-pim6] <strong>ssm-policy 2000</strong>
[<span class="keyword">*</span>DeviceA-pim6] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
<p>The configurations of DeviceB, DeviceC, and DeviceD are similar to the configuration of DeviceA. For detailed configurations, see Configuration Scripts.</p>
</p></li><li><span>Configure MLD SSM mapping rules on <span class="keyword">the device connected to the user host</span>.</span><p><p># On <span class="keyword">Device</span>D, map the multicast groups in the range of FF31::/32 to Source1 and Source3.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>mld</strong>
[<span class="keyword">*</span>DeviceD-mld] <strong>ssm-mapping </strong><strong>ff31:: 32 2001:db8:5::1</strong>
[<span class="keyword">*</span>DeviceD-mld] <strong>ssm-mapping ff31:: 32 2001:db8:7::1</strong>
[<span class="keyword">*</span>DeviceD-mld] <strong>quit</strong>
[<span class="keyword">*</span>DeviceD] <strong>commit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001589256137__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Run the <strong>display mld ssm-mapping group</strong> command on DeviceD to check the mappings between multicast sources and groups.</p>
<pre class="screen">&lt;DeviceD&gt; <strong>display mld ssm-mapping group</strong>
MLD SSM-Mapping conversion table of VPN Instance: public net
 Total entries: 2    (2 entries matched)

 00001: <strong>(2001:DB8:5::1, FF31::)</strong>
 00002: <strong>(2001:DB8:7::1, FF31::)</strong>

 Total 2 entries matched</pre>
<p>The command output shows that the multicast groups in the range FF31::/32 have been mapped to Source1 and Source3.</p>
<p># Run the <strong>display mld group ssm-mapping</strong> command on DeviceD to check information about multicast groups created based on SSM mapping rules.</p>
<pre class="screen">&lt;DeviceD&gt; <strong>display mld group ssm-mapping</strong>
MLD SSM mapping interface group report information of VPN Instance: public net
 Limited entry of this VPN Instance: - 
 <span>100GE</span><span>1/0/1</span> (2001:DB8:8::2):
  Total 1 MLD SSM-Mapping Group reported
   Group Address   Last Reporter   Uptime      Expires
   <strong>FF31::1</strong>        <strong>2001:DB8:8::1</strong>  00:01:44    00:00:26</pre>
<p>The command output shows that Receiver has joined group FF31::1.</p>
<p># Run the <strong>display pim ipv6 routing-table</strong> command on DeviceD to check the IPv6 PIM-SM routing table.</p>
<pre class="screen">&lt;DeviceD&gt; <strong>display pim ipv6 routing-table</strong>
VPN-Instance: public net
 Total 2 (S, G) entries

 (<strong>2001:DB8:5::1, FF31::</strong><strong>1</strong>)
     Protocol: <strong>pim-ssm</strong>, Flag: SG_RCVR                                           
     UpTime: 00:19:40                                                           
     Upstream interface:<strong> <span>100GE</span></strong><span><span><strong><span>1/0/3</span></strong></span></span>                                              
         Upstream neighbor: 2001:DB8:3::1                                        
         RPF prime neighbor:  2001:DB8:3::1                                       
     Downstream interface(s) information:                                       
     Total number of downstreams: 1                                             
         1:<strong> <span>100GE</span></strong><strong><span>1/0/1</span></strong>                                                           
             Protocol: <strong>mld</strong>, UpTime: 00:19:40, Expires: -                    

 (<strong>2001:DB8:7::1, FF31::1</strong>)
     Protocol: <strong>pim-ssm</strong>, Flag: SG_RCVR                                           
     UpTime: 00:19:40                                                           
     Upstream interface: <strong><span>100GE</span></strong><strong><span>1/0/2</span></strong>                                                
         Upstream neighbor: 2001:DB8:4::1                                         
         RPF prime neighbor: 2001:DB8:4::1                                        
     Downstream interface(s) information:                                       
     Total number of downstreams: 1                                             
         1:<strong> <span>100GE</span></strong><strong><span>1/0/1</span></strong>                                                            
             Protocol: <strong>mld</strong>, UpTime: 00:19:40, Expires: -                    </pre>
<p>The command output shows that multicast sources 2001:DB8:5::1 and 2001:DB8:7::1 send multicast data to multicast group FF31::1, and DeviceD receives the data from the two multicast sources through <span>100GE</span><span><span><span>1/0/3</span></span></span> and <span>100GE</span><span>1/0/2</span>.</p>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001589256137__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p>DeviceA</p>
<pre class="screen">#
sysname DeviceA
#
multicast ipv6 routing-enable
#
acl ipv6 number 2000
 rule permit source ff31::/32
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:5::2/64
 pim ipv6 sm
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:1::1/64
 pim ipv6 sm
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span><span><span>1/0/3</span></span></span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:3::1/64
 pim ipv6 sm
 ospfv3 1 area 0.0.0.0
#
ospfv3 1
  router-id 1.1.1.1
  area 0.0.0.0
#
pim ipv6
 ssm-policy 2000
#
return</pre>
</li><li><p>DeviceB</p>
<pre class="screen">#
sysname DeviceB
#
multicast ipv6 routing-enable
#
acl ipv6 number 2000
 rule permit source ff31::/32
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:6::2/64
 pim ipv6 sm
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:1::2/64
 pim ipv6 sm
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span><span><span>1/0/3</span></span></span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:2::1/64
 pim ipv6 sm
 ospfv3 1 area 0.0.0.0
#
ospfv3 1
  router-id 2.2.2.2
  area 0.0.0.0
#
pim ipv6
 ssm-policy 2000
#
return</pre>
</li><li><p>DeviceC</p>
<pre class="screen">#
sysname DeviceC
#
multicast ipv6 routing-enable
#
acl ipv6 number 2000
 rule permit source ff31::/32
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:7::2/64
 pim ipv6 sm
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:4::1/64
 pim ipv6 sm
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span><span><span>1/0/3</span></span></span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:2::2/64
 pim ipv6 sm
 ospfv3 1 area 0.0.0.0
#
ospfv3 1
  router-id 3.3.3.3
  area 0.0.0.0
#
pim ipv6
 ssm-policy 2000
#
return</pre>
</li><li><p>DeviceD</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>D
#
multicast ipv6 routing-enable
#
acl ipv6 number 2000
 rule permit source ff31::/32
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:8::2/64
 pim ipv6 sm
 mld enable
 mld version 2
 mld ssm-mapping enable
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:4::2/64
 pim ipv6 sm
 ospfv3 1 area 0.0.0.0
#
interface <span>100GE</span><span><span><span>1/0/3</span></span></span>
 undo portswitch
 ipv6 enable
 ipv6 address 2001:DB8:3::2/64
 pim ipv6 sm
 ospfv3 1 area 0.0.0.0
#
mld
 ssm-mapping ff31:: 32 2001:DB8:5::1
 ssm-mapping ff31:: 32 2001:DB8:7::1
#
ospfv3 1
  router-id 4.4.4.4
  area 0.0.0.0
#
pim ipv6
 ssm-policy 2000
#
return</pre>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_mld_cfg_0022.html">Configuring MLD SSM Mapping
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_mld_cfg_0026.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>