
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a RADIUS Server Template">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0032.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="AAA">
<meta name="featurename" content="RADIUS">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="AAA">
<meta name="featurename" content="RADIUS">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featurename" content="AAA">
<meta name="featurename" content="AD">
<meta name="featurename" content="HWTACACS">
<meta name="featurename" content="LDAP">
<meta name="featurename" content="RADIUS">
<meta name="featurename" content="Local User">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563755921">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring a RADIUS Server Template</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563755921"></a><a name="EN-US_TASK_0000001563755921"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a RADIUS Server Template</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563755921__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A RADIUS server template contains the IP address, port number, source interface, and shared key of a specific RADIUS server. The configurations in the template must be the same as those on the RADIUS server.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563755921__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Create a RADIUS server template and enter the RADIUS server template view.</span><p><pre class="screen"><a href="cmdqueryname=radius-server+template"><b><span class="cmdname">radius-server template</span></b></a> <i><span class="varname">template-name</span></i></pre>
</p></li><li><span>Configure a RADIUS authentication server.</span><p><pre class="screen"><a href="cmdqueryname=radius-server+authentication"><b><span class="cmdname">radius-server authentication </span></b></a><i><span class="varname">ip-address</span></i> <i><span class="varname">port</span></i> [<strong> shared-key</strong> <strong>cipher</strong> <i><span class="varname">share-key</span></i> | <span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> |</span><span> </span><strong><span>source</span></strong> { <em>interface-type</em> <i><span class="varname">interface-number</span></i> | <strong><span>ip-address</span></strong> <i><span class="varname">source-ip-address</span></i> } | <strong><span>weight</span></strong> <em>weight-value</em> ] <sup>*</sup></pre>
<p>By default, no RADIUS authentication server is configured. In the preceding command:</p>
<ul><li>The <strong><span>source</span></strong> parameter specifies the source IP address in the packets sent from the device to the RADIUS authentication server. If this parameter is not specified, the IP address of the outbound interface is used as the source IP address.</li><li>The <strong><span>weight</span></strong> parameter specifies the weight of a RADIUS authentication server. If this parameter is not specified, the default weight 80 is used.</li><li>You are advised to specify <strong>shared-key cipher</strong> <i><span class="varname">key-string</span></i> when running this command. In this case, you do not need to run the <a href="cmdqueryname=radius-server+shared-key"><b><span class="cmdname">radius-server shared-key</span></b></a> <strong><span>cipher</span></strong> <i><span class="varname">key-string</span></i> command to configure a shared key for the server. If this parameter is not specified, you need to run the <a href="cmdqueryname=radius-server+shared-key"><b><span class="cmdname">radius-server shared-key</span></b></a> <strong><span>cipher</span></strong> <i><span class="varname">key-string</span></i> command. If both this command and the <a href="cmdqueryname=radius-server+shared-key"><b><span class="cmdname">radius-server shared-key</span></b></a> <strong><span>cipher</span></strong> <i><span class="varname">key-string</span></i> command are configured, the former takes precedence.</li><li>If the <strong><span>source</span></strong> parameter is specified in this command and the <a href="cmdqueryname=radius-server+source"><b><span class="cmdname">radius-server source</span></b></a> <strong>ip-address</strong> command is run, the former takes effect.</li></ul>
</p></li><li><span>Configure a RADIUS accounting server.</span><p><pre class="screen"><a href="cmdqueryname=radius-server+accounting"><b><span class="cmdname">radius-server accounting</span></b></a> <i><span class="varname">ip-address</span></i> <i><span class="varname">port</span></i> [<strong> shared-key</strong> <strong>cipher</strong> <i><span class="varname">share-key</span></i> | <span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> |</span><span> </span><strong><span>source</span></strong> { <em>interface-type</em> <i><span class="varname">interface-number</span></i> | <strong><span>ip-address</span></strong> <i><span class="varname">source-ip-address</span></i> } | <strong><span>weight</span></strong> <em>weight-value</em> ] <sup>*</sup></pre>
<p>By default, no RADIUS accounting server is configured. In the preceding command:</p>
<ul><li>The <strong><span>source</span></strong> parameter specifies the source IP address in the packets sent from the device to the RADIUS accounting server. If this parameter is not specified, the IP address of the outbound interface is used as the source IP address.</li><li>The <strong><span>weight</span></strong> parameter specifies the weight of a RADIUS accounting server. If this parameter is not specified, the default weight 80 is used.</li><li>You are advised to specify <strong>shared-key cipher</strong> <i><span class="varname">key-string</span></i> when running this command. In this case, you do not need to run the <a href="cmdqueryname=radius-server+shared-key"><b><span class="cmdname">radius-server shared-key</span></b></a> <strong><span>cipher</span></strong> <i><span class="varname">key-string</span></i> command to configure a shared key for the server. If this parameter is not specified, you need to run the <a href="cmdqueryname=radius-server+shared-key"><b><span class="cmdname">radius-server shared-key</span></b></a> <strong><span>cipher</span></strong> <i><span class="varname">key-string</span></i> command. If both this command and the <a href="cmdqueryname=radius-server+shared-key"><b><span class="cmdname">radius-server shared-key</span></b></a> <strong><span>cipher</span></strong> <i><span class="varname">key-string</span></i> command are configured, the former takes precedence.</li><li>If the <strong><span>source</span></strong> parameter is specified in this command and the <a href="cmdqueryname=radius-server+source"><b><span class="cmdname">radius-server source</span></b></a> <strong>ip-address</strong> command is run, the former takes effect.</li></ul>
</p></li><li><span>(Optional) Configure a shared key for a RADIUS server.</span><p><pre class="screen"><a href="cmdqueryname=radius-server+shared-key"><b><span class="cmdname">radius-server shared-key</span></b></a> <strong><span>cipher</span></strong> <i><span class="varname">key-string</span></i></pre>
<p id="EN-US_TASK_0000001563755921__p1357461491013">For security purposes, it is recommended that the shared key contain at least 16 characters and at least two types of the following characters: uppercase letters, lowercase letters, digits, and special characters.</p>
<p id="EN-US_TASK_0000001563755921__p13770101011119">For security purposes, you are advised to periodically change the shared key.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When a RADIUS server is configured in multiple RADIUS server templates:</p>
<ul><li>If different shared keys are required in different RADIUS server templates, you need to configure a different shared key in each RADIUS server template view.</li></ul>
</div></div>
</p></li><li><span>(Optional) Configure the algorithm for selecting RADIUS servers.</span><p><pre class="screen"><a href="cmdqueryname=radius-server+algorithm"><b><span class="cmdname">radius-server algorithm</span></b></a> { <strong><span>loading-share</span></strong> | <strong><span>master-backup</span></strong> }</pre>
</p><p><p>By default, the algorithm for selecting RADIUS servers is <strong><span>master-backup</span></strong>, indicating the primary/secondary algorithm.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">When multiple authentication or accounting servers are configured in a RADIUS server template, the device selects RADIUS servers based on the algorithm and weight configured for each RADIUS server.<ul><li><p>If the primary/secondary algorithm is used, the server with a larger weight becomes the primary server. If the servers have the same weight, the server configured first becomes the primary server.</p>
</li><li><p>If the load balancing algorithm is used, packets are sent to the servers according to weights of the servers.</p>
</li></ul>
</div>
</div></div>
</p></li><li><span>(Optional) Configure the format of the user name in the packets sent from the device to a RADIUS server.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring the format of the user name in the packets sent from the device to a RADIUS server</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.7.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.7.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.7.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.7.2.1.2.4.1.1 "><p>Configure the device not to modify the user name entered by the user in the packets sent to a RADIUS server.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.7.2.1.2.4.1.2 "><p><a href="cmdqueryname=radius-server+user-name+original"><b><span class="cmdname">radius-server user-name original</span></b></a></p>
</td>
<td class="cellrowborder" rowspan="3" valign="top" width="33.33333333333333%" headers="mcps1.3.2.7.2.1.2.4.1.3 "><p>By default, a new RADIUS server template has the <strong>radius-server user-name domain-included</strong> command configuration, indicating that the device encapsulates the domain name in the user name in the packets sent to a RADIUS server.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.7.2.1.2.4.1.1 "><p>Configure the device to encapsulate the domain name in the user name in the packets sent to a RADIUS server.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.7.2.1.2.4.1.2 "><p><a href="cmdqueryname=radius-server+user-name+domain-included"><b><span class="cmdname">radius-server user-name domain-included</span></b></a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.2.7.2.1.2.4.1.1 "><p>Configure the device not to encapsulate the domain name in the user name in the packets sent to a RADIUS server.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.2.7.2.1.2.4.1.2 "><p><a href="cmdqueryname=undo+radius-server+user-name+domain-included"><b><span class="cmdname">undo radius-server user-name domain-included</span></b></a></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>(Optional) Set the number of times that RADIUS Access-Request packets are retransmitted and the timeout period.</span><p><pre class="screen"><a href="cmdqueryname=radius-server"><b><span class="cmdname">radius-server</span></b></a> { <strong><span>retransmit</span></strong> <i><span class="varname">retry-times</span></i> | <strong><span>timeout</span></strong> <i><span class="varname">time-value</span></i> } </pre>
</p><p><p>By default, RADIUS Access-Request packets can be retransmitted 3 times, and the timeout period is 5 seconds.</p>
</p></li><li><span>(Optional) Configure the unit in which the traffic of a RADIUS server is measured.</span><p><pre class="screen"><a href="cmdqueryname=radius-server+traffic-unit"><b><span class="cmdname">radius-server traffic-unit</span></b></a> { <strong><span>byte</span></strong> | <strong><span>kbyte</span></strong> | <strong><span>mbyte</span></strong> | <strong><span>gbyte</span></strong> }</pre>
<p>By default, the traffic of a RADIUS server is measured in bytes.</p>
</p></li><li><span>(Optional) Configure the source IP address for communication between the device and RADIUS server.</span><p><pre class="screen"><a href="cmdqueryname=radius-server+source"><b><span class="cmdname">radius-server source</span></b></a> <strong>ip-address</strong> <em>source-ip-address</em></pre>
<p>By default, no source IP address is configured for communication between the device and RADIUS server.</p>
<p>If this command is run and the <strong><span>source</span></strong> parameter is specified in the <a href="cmdqueryname=radius-server+authentication"><b><span class="cmdname">radius-server authentication</span></b></a> command, the latter configuration takes effect.</p>
</p></li><li><span>(Optional) Enable the device to encapsulate the RADIUS attribute Framed-IP-Address into a RADIUS Access-Request packet when the RADIUS Access-Request packet sent by a user does not carry the user IP address.</span><p><pre class="screen"><strong>radius-server framed-ip-address no-user-ip enable</strong></pre>
<p>By default, the device does not encapsulate the RADIUS attribute Framed-IP-Address into a RADIUS Access-Request packet when the RADIUS Access-Request packet sent by a user does not carry the user IP address.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001563755921__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001563755921__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001563755921__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+radius-server+configuration"><b><span class="cmdname">display radius-server configuration</span></b></a> [ <strong><span>template</span></strong> <i><span class="varname">template-name</span></i> ] command to check the configuration of a specified RADIUS server template.</li><li>Run the <a href="cmdqueryname=test-aaa"><b><span class="cmdname">test-aaa</span></b></a> <i><span class="varname">user-name</span></i> <i><span class="varname">user-password</span></i> <strong><span>radius-template</span></strong> <i><span class="varname">template-name</span></i> [ <strong><span>chap</span></strong> | <strong><span>pap</span></strong> | <strong>accounting</strong> [ <strong>start</strong> | <strong>realtime</strong> | <strong>stop</strong> ] ] [ <strong>called-station-id</strong> ] command to test the connectivity between the device and server. For details about common fault information and troubleshooting methods, see <a href="galaxy_aaa_cfg_0054.html">Testing the Server Connectivity</a>.</li></ul>
<h4 class="sectiontitle"></h4></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_aaa_cfg_0020.html">Configuring RADIUS Authentication, Authorization, and Accounting
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_aaa_cfg_0021.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_aaa_cfg_0032.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>