
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring ERPSv2">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_erps_cfg_0017.html">
<meta name="DC.Relation" scheme="URI" content="vrp_erps_cfg_0024.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ERPS">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ERPS">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="ERPS">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001188455753">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring ERPSv2</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001188455753"></a><a name="EN-US_TASK_0000001188455753"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring ERPSv2</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001188455753__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>Redundant links are usually used on an Ethernet switched network to provide link backup and improve network reliability. The use of redundant links, however, may cause loops on the switched network, leading to broadcast storms and unstable MAC address entries. As a result, the communication quality deteriorates, and communication services may even be interrupted. ERPS can be configured on devices on a ring network to prevent loops caused by redundant links. As a Layer 2 loop prevention protocol defined by the ITU-T, ERPS provides fast convergence that can meet carrier-class reliability requirements. In addition to loop prevention, ERPSv2 supports functions including multi-ring networking and setting the revertive switching mode. It is applicable to more networking scenarios when improving network reliability.</p>
<p>In <a href="#EN-US_TASK_0000001188455753__fig985443212816">Figure 1</a>, DeviceA, DeviceB, DeviceC, and DeviceD constitute a major ring, and DeviceA, LSW1, LSW2, LSW3, and DeviceD constitute a sub-ring.</p>
<div class="fignone" id="EN-US_TASK_0000001188455753__fig985443212816"><a name="EN-US_TASK_0000001188455753__fig985443212816"></a><a name="fig985443212816"></a><span class="figcap"><b>Figure 1 </b>ERPS multi-ring networking</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1, interface 2, and interface 3 represent <span>100GE</span><span>1/0/1</span>, <span>100GE</span><span>1/0/2</span>, and <span>100GE</span><span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001188865361.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001188455753__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Set the link type of all ports to be added to an ERPS ring to trunk.</p>
</li><li><p>Create ERPS rings and configure control VLANs and ERP instances.</p>
</li><li><p>Configure the ERPS version and configure an ERPS ring as a sub-ring.</p>
</li><li><p>Add Layer 2 ports to ERPS rings and configure port roles.</p>
</li><li><p>Configure the topology change notification and topology change protection functions.</p>
</li><li><p>Configure the Guard timer and WTR timer for ERPS rings.</p>
</li><li><p>Configure the Layer 2 forwarding function on DeviceA through DeviceD and LSW1 through LSW3.</p>
</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001188455753__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Set the link type of all ports to be added to an ERPS ring to trunk.</span><p><p># Configure DeviceA. The configurations of DeviceB, DeviceC, DeviceD, LSW1, LSW2, and LSW3 are similar to the configuration of DeviceA. For detailed configurations, see Configuration Scripts.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname DeviceA</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>interface </strong><strong><span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/1</span></span>]<strong> portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/1</span></span>]<strong> port link-type trunk</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/1</span></span>]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface </strong><strong><span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/2</span></span>]<strong> portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/2</span></span>]<strong> port link-type trunk</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/2</span></span>]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/3</span></strong>
[<span class="keyword">*</span>DeviceA-<span><span><span><span>100GE</span></span><span>1/0/3</span></span></span>]<strong> portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span><span>100GE</span></span><span>1/0/3</span></span></span>]<strong> port link-type trunk</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span><span>100GE</span></span><span>1/0/3</span></span></span>]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span><span>100GE</span></span><span>1/0/3</span></span></span>]<strong> commit</strong></pre>
</p></li><li><span>Create ERPS ring 1 and ERPS ring 2 and configure ERP instances for the two rings. Set the control VLAN ID of ERPS ring 1 to 10 and the control VLAN ID of ERPS ring 2 to 20. Enable ERPS rings 1 and 2 to transmit data packets from VLANs 100 to 200.</span><p><p># Configure DeviceA. The configurations of DeviceB, DeviceC, DeviceD, LSW1, LSW2, and LSW3 are similar to the configuration of DeviceA. For detailed configurations, see Configuration Scripts.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>stp region-configuration</strong>
[<span class="keyword">*</span>DeviceA-mst-region] <strong>instance 1 vlan 10 20 100 to 200</strong>
[<span class="keyword">*</span>DeviceA-mst-region] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>erps ring 1</strong>
[<span class="keyword">*</span>DeviceA-erps-ring1] <strong>control-vlan 10</strong>
[<span class="keyword">*</span>DeviceA-erps-ring1] <strong>protected-instance 1</strong>
[<span class="keyword">*</span>DeviceA-erps-ring1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>erps ring 2</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>control-vlan 20</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>protected-instance 1</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>commit</strong></pre>
</p></li><li><span>Configure ERPSv2 and configure ERPS ring 2 as a sub-ring.</span><p><p># Configure DeviceA. The configurations of DeviceB, DeviceC, DeviceD, LSW1, LSW2, and LSW3 are similar to the configuration of DeviceA. For detailed configurations, see Configuration Scripts.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>erps ring 1</strong>
[<span class="keyword">*</span>DeviceA-erps-ring1] <strong>version v2</strong>
[<span class="keyword">*</span>DeviceA-erps-ring1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>erps ring 2</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>version v2</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>sub-ring</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>commit</strong></pre>
</p></li><li><span>Add Layer 2 ports to ERPS rings and configure port roles. Configure <span><span><span>100GE</span></span><span>1/0/1</span></span> on DeviceB and <span><span><span>100GE</span></span><span>1/0/2</span></span> on LSW3 as their respective RPL owner ports.</span><p><p># Configure DeviceA. The configurations of DeviceC, DeviceD, LSW1, and LSW2 are similar to the configuration of DeviceA. For detailed configurations, see Configuration Scripts.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>interface </strong><strong><span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/1</span></span>]<strong> stp disable</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/1</span></span>]<strong> erps ring 2</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/1</span></span>]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface </strong><strong><span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/2</span></span>]<strong> stp disable</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/2</span></span>]<strong> erps ring 1</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/2</span></span>]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/3</span></strong>
[<span class="keyword">*</span>DeviceA-<span><span><span><span>100GE</span></span><span>1/0/3</span></span></span>]<strong> stp disable</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span><span>100GE</span></span><span>1/0/3</span></span></span>]<strong> erps ring 1</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span><span>100GE</span></span><span>1/0/3</span></span></span>]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span><span>100GE</span></span><span>1/0/3</span></span></span>]<strong> commit</strong></pre>
<p># Configure DeviceB. The configuration of LSW3 is similar to that of DeviceB. For detailed configurations, see Configuration Scripts.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>interface </strong><strong><span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span>DeviceB-<span><span><span>100GE</span></span><span>1/0/1</span></span>]<strong> stp disable</strong>
[<span class="keyword">*</span>DeviceB-<span><span><span>100GE</span></span><span>1/0/1</span></span>]<strong> erps ring 1 rpl owner</strong>
[<span class="keyword">*</span>DeviceB-<span><span><span>100GE</span></span><span>1/0/1</span></span>]<strong> quit</strong>
[<span class="keyword">*</span>DeviceB] <strong>interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword">*</span>DeviceB-<span><span><span>100GE</span></span><span>1/0/2</span></span>]<strong> stp disable</strong>
[<span class="keyword">*</span>DeviceB-<span><span><span>100GE</span></span><span>1/0/2</span></span>]<strong> erps ring 1</strong>
[<span class="keyword">*</span>DeviceB-<span><span><span>100GE</span></span><span>1/0/2</span></span>]<strong> quit</strong>
[<span class="keyword">*</span>DeviceB-<span><span><span>100GE</span></span><span>1/0/2</span></span>]<strong> commit</strong></pre>
</p></li><li><span>Configure the topology change notification and topology change protection functions on interconnected nodes DeviceA and DeviceD.</span><p><p># Configure DeviceA. The configuration of DeviceD is similar to that of DeviceA. For detailed configurations, see Configuration Scripts.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>erps ring 1</strong>
[<span class="keyword">*</span>DeviceA-erps-ring1] <strong>tc-protection interval 200</strong>
[<span class="keyword">*</span>DeviceA-erps-ring1] <strong>tc-protection threshold 60</strong>
[<span class="keyword">*</span>DeviceA-erps-ring1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>erps ring 2</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>tc-notify erps ring 1</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>commit</strong></pre>
</p></li><li><span>Configure the Guard timer and WTR timer for ERPS rings.</span><p><p># Configure DeviceA. The configurations of DeviceB, DeviceC, DeviceD, LSW1, LSW2, and LSW3 are similar to the configuration of DeviceA. For detailed configurations, see Configuration Scripts.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>erps ring 1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-erps-ring1] <strong>wtr-timer 6</strong>
[<span class="keyword">*</span>DeviceA-erps-ring1] <strong>guard-timer 100</strong>
[<span class="keyword">*</span>DeviceA-erps-ring1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>erps ring 2</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>wtr-timer 6</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>guard-timer 100</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA-erps-ring2] <strong>commit</strong></pre>
</p></li><li><span>Configure the Layer 2 forwarding function on DeviceA through DeviceD and LSW1 through LSW3.</span><p><p># Configure DeviceA. The configurations of DeviceB, DeviceC, DeviceD, LSW1, LSW2, and LSW3 are similar to the configuration of DeviceA. For detailed configurations, see Configuration Scripts.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>vlan batch 100 to 200</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/1</span></span>] <strong>undo port trunk allow-pass vlan 1</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/1</span></span>]<strong> port trunk allow-pass vlan 100 to 200</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/1</span></span>]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/2</span></span>]<strong> </strong><strong>undo port trunk allow-pass vlan 1</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/2</span></span>]<strong> port trunk allow-pass vlan 100 to 200 </strong>
[<span class="keyword">*</span>DeviceA-<span><span><span>100GE</span></span><span>1/0/2</span></span>]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/3</span></strong>
[<span class="keyword">*</span>DeviceA-<span><span><span><span>100GE</span></span><span>1/0/3</span></span></span>]<strong> </strong><strong>undo port trunk allow-pass vlan 1</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span><span>100GE</span></span><span>1/0/3</span></span></span>]<strong> port trunk allow-pass vlan 100 to 200</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span><span>100GE</span></span><span>1/0/3</span></span></span>]<strong> quit</strong>
[<span class="keyword">*</span>DeviceA-<span><span><span><span>100GE</span></span><span>1/0/3</span></span></span>]<strong> commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># After the network becomes stable, run the <a href="cmdqueryname=display+erps"><b><span class="cmdname">display erps</span></b></a> command to check brief information about the ERPS ring and ports added to the ERPS ring. The following example uses the command output on DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>display erps</strong>
D  : Discarding
F  : Forwarding
R  : RPL Owner
N  : RPL Neighbour
FS : Forced Device
MS : Manual Device
Total number of rings configured = 1
Ring  Control  WTR Timer  Guard Timer  Port 1               Port 2
ID    VLAN     (min)      (csec)
--------------------------------------------------------------------------------
   1       10          6          100  (D,R)<span><span>100GE</span><span>1/0/1</span></span>         (F)<span><span>100GE</span><span>1/0/2</span></span>
--------------------------------------------------------------------------------</pre>
</p><p><p># Run the <a href="cmdqueryname=display+erps+verbose"><b><span class="cmdname">display erps verbose</span></b></a> command to check detailed information about the ERPS ring and ports added to the ERPS ring.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>display erps verbose</strong>
Ring ID                             : 1
Description                         : Ring 1
Control Vlan                        : 10
Protected Instance                  : 1 
Service Vlan                        : 100 to 200
WTR Timer Setting (min)             : 6      Running (s)           : <samp class="codeph">0</samp>  
Guard Timer Setting (csec)          : 100    Running (csec)        : 0  
Holdoff Timer Setting (deciseconds) : 0      Running (deciseconds) : 0  
WTB Timer Running (csec)            : 0  
Ring State                          : Idle
RAPS_MEL                            : 7
Revertive Mode                      : Revertive
R-APS Channel Mode                  : -
Version                             : 2
Sub-ring                            : No 
Forced Device Port                  : -
Manual Device Port                  : -
TC-Notify                           : -
Time since last topology change     : <samp class="codeph">0</samp> days <samp class="codeph">4</samp>h:<samp class="codeph">12</samp>m:<samp class="codeph">20</samp>s
 
--------------------------------------------------------------------------------
Port                Port Role     Port Status     Signal Status
--------------------------------------------------------------------------------
<span><span>100GE</span><span>1/0/1</span></span>             RPL Owner     Discarding      Non-failed      
<span><span>100GE</span><span>1/0/2</span></span>             Common        Forwarding      Non-failed</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001188455753__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p>DeviceA</p>
<pre class="screen">#
sysname DeviceA
#
vlan batch 100 to 200
#
stp region-configuration
 instance 1 vlan 10 20 100 to 200
#
erps ring 1
 control-vlan 10
 protected-instance 1
 wtr-timer 6
 guard-timer 100
 version v2
 tc-protection interval 200
 tc-protection threshold 60
erps ring 2
 control-vlan 20
 protected-instance 1
 wtr-timer 6
 guard-timer 100
 version v2
 sub-ring
 tc-notify erps ring 1
#
interface <span>100ge</span> <span>1/0/1</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 20 100 to 200
 stp disable
 erps ring 2
#
interface <span>100ge</span> <span>1/0/2</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 10 100 to 200
 stp disable
 erps ring 1
#
interface <span>100ge</span> <span>1/0/3</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 10 100 to 200
 stp disable
 erps ring 1
#
return</pre>
</li><li><p>DeviceB</p>
<pre class="screen">#
sysname DeviceB
#
vlan batch 100 to 200
#
stp region-configuration
 instance 1 vlan 10 100 to 200
#
erps ring 1
 control-vlan 10
 protected-instance 1
 wtr-timer 6
 guard-timer 100
 version v2
#
interface <span>100ge</span> <span>1/0/1</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 10 100 to 200
 stp disable
 erps ring 1 rpl owner
#
interface <span>100ge</span> <span>1/0/2</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 10 100 to 200
 stp disable
 erps ring 1
#
return</pre>
</li><li><p>DeviceC</p>
<pre class="screen">#
sysname DeviceC
#
vlan batch 100 to 200
#
stp region-configuration
 instance 1 vlan 10 100 to 200
#
erps ring 1
 control-vlan 10
 protected-instance 1
 wtr-timer 6
 guard-timer 100
 version v2
#
interface <span>100ge</span> <span>1/0/1</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 10 100 to 200
 stp disable
 erps ring 1
#
interface <span>100ge</span> <span>1/0/2</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 10 100 to 200
 stp disable
 erps ring 1
#
return</pre>
</li><li><p>DeviceD</p>
<pre class="screen">#
sysname DeviceD
#
vlan batch 100 to 200
#
stp region-configuration
 instance 1 vlan 10 20 100 to 200
#
erps ring 1
 control-vlan 10
 protected-instance 1
 wtr-timer 6
 guard-timer 100
 version v2
 tc-protection interval 200
 tc-protection threshold 60
erps ring 2
 control-vlan 20
 protected-instance 1
 wtr-timer 6
 guard-timer 100
 version v2
 sub-ring
 tc-notify erps ring 1
#
interface <span>100ge</span> <span>1/0/1</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 20 100 to 200
 stp disable
 erps ring 2
#
interface <span>100ge</span> <span>1/0/2</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 10 100 to 200
 stp disable
 erps ring 1
#
interface <span>100ge</span> <span>1/0/3</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 10 100 to 200
 stp disable
 erps ring 1
#
return</pre>
</li><li><p>LSW1</p>
<pre class="screen">#
sysname LSW1
#
vlan batch 100 to 200
#
stp region-configuration
 instance 1 vlan 20 100 to 200
#
erps ring 2
 control-vlan 20
 protected-instance 1
 wtr-timer 6
 guard-timer 100
 version v2
 sub-ring
#
interface <span>100ge</span> <span>1/0/1</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 20 100 to 200
 stp disable
 erps ring 2
#
interface <span>100ge</span> <span>1/0/2</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 20 100 to 200
 stp disable
 erps ring 2
#
return</pre>
</li><li><p>LSW2</p>
<pre class="screen">#
sysname LSW2
#
vlan batch 100 to 200
#
stp region-configuration
 instance 1 vlan 20 100 to 200
#
erps ring 2
 control-vlan 20
 protected-instance 1
 wtr-timer 6
 guard-timer 100
 version v2
 sub-ring
#
interface <span>100ge</span> <span>1/0/1</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 20 100 to 200
 stp disable
 erps ring 2
#
interface <span>100ge</span> <span>1/0/2</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 20 100 to 200
 stp disable
 erps ring 2
#
return</pre>
</li><li><p>LSW3</p>
<pre class="screen">#
sysname LSW3
#
vlan batch 100 to 200
#
stp region-configuration
 instance 1 vlan 20 100 to 200
#
erps ring 2
 control-vlan 20
 protected-instance 1
 wtr-timer 6
 guard-timer 100
 version v2
 sub-ring
#
interface <span>100ge</span> <span>1/0/1</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 20 100 to 200
 stp disable
 erps ring 2
#
interface <span>100ge</span> <span>1/0/2</span>
 port link-type trunk
 undo port trunk allow-pass vlan 1
 port trunk allow-pass vlan 20 100 to 200
 stp disable
 erps ring 2 rpl owner
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_erps_cfg_0017.html">Configuring ERPSv2
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_erps_cfg_0024.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>