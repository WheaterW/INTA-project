
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Routing Policies">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_adaptive_routing_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_adaptive_routing_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_adaptive_routing_cfg_0012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Dragonfly Adaptive Routing">
<meta name="featurename" content="Adaptive Routing">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Dragonfly Adaptive Routing">
<meta name="featurename" content="Adaptive Routing">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="featurename" content="Dragonfly Adaptive Routing">
<meta name="featurename" content="Adaptive Routing">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513150394">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Routing Policies</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001513150394"></a><a name="EN-US_TASK_0000001513150394"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Routing Policies</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001513150394__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>The adaptive routing function can be used only after specific routing policies are configured and policy parameters are correctly set. The following routing policies need to be configured:</p>
<ul><li>Policy for importing public network routes to the routing table of the Mix VPN instance</li><li>Policy for importing public network routes to the routing table of the Non-min VPN instance</li><li>Policy for importing routes from the Non-min VPN instance to the routing table of the Mix VPN instance</li><li>Policy for advertising EBGP routes of the public network instance</li><li>Policies for advertising and receiving IBGP routes of the public network instance</li><li>Policies for advertising and receiving IBGP routes of the Non-min VPN instance</li></ul>
<p>Routing policy parameters must be set by following the rule that the cost of a route within a group and between groups increments by 1 and 1000, respectively, each time the route is advertised to a new hop. In addition, you must correctly use the corresponding routing policy when configuring BGP routes and cannot modify other parameters except the policy name. For details about how to set routing policy parameters, see the operations of configuring routing policies in <a href="galaxy_adaptive_routing_cfg_0016.html">Example for Configuring Adaptive Routing</a>.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001513150394__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Create a route-policy with a node and enter the route-policy view.</span><p><pre class="screen"><strong><a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a></strong> <em>route-policy-name matchMode</em> <strong>node</strong> <em>node</em></pre>
</p></li><li><span>Configure if-match clauses in the route-policy to match the cost of routes.</span><p><pre class="screen"><strong><a href="cmdqueryname=if-match+cost"><b><span class="cmdname">if-match cost</span></b></a> </strong><em>cost</em>
<strong><a href="cmdqueryname=if-match+cost"><b><span class="cmdname">if-match cost</span></b></a></strong> { <strong>greater-equa</strong><strong>l</strong><em> greater-equal-value</em> [ <strong>less-equal </strong><em>less-equal-value</em> ] | <strong>less-equal</strong><em> less-equal-value</em> }</pre>
</p></li><li><span>Configure if-match clauses in the route-policy to match BGP routes.</span><p><pre class="screen"><strong><a href="cmdqueryname=if-match+route-type"><b><span class="cmdname">if-match route-type</span></b></a></strong> { <strong>ibgp</strong> | <strong>ebgp</strong> }</pre>
</p></li><li><span>Configure the apply clauses in the route-policy to set the cost of routes.</span><p><pre class="screen"><strong><a href="cmdqueryname=apply+cost"><b><span class="cmdname">apply cost</span></b></a> </strong>[ + | <strong>-</strong> ] <em>cost</em></pre>
</p></li><li><span>In the routing policy for receiving routes, configure apply clauses in the route-policy to set the next hop address of the route received from the peer to the IP address of the peer.</span><p><pre class="screen"><strong><a href="cmdqueryname=apply+ip-address+next-hop"><b><span class="cmdname">apply ip-address next-hop</span></b></a></strong> <strong>peer-address</strong></pre>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001513150394__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513150394__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_adaptive_routing_cfg_0021.html">Configuring Route Establishment Rules
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_adaptive_routing_cfg_0010.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_adaptive_routing_cfg_0012.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>