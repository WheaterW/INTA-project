
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring OSPFv3 Load Balancing">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0033.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0035.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130623288">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring OSPFv3 Load Balancing</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130623288"></a><a name="EN-US_TASK_0000001130623288"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring OSPFv3 Load Balancing</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130623288__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring OSPFv3 load balancing, you have completed the following task:</p>
<ul><li><p><a href="vrp_ospfv3_cfg_0009.html">Configure basic OSPFv3 functions</a>.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130623288__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If the destinations and costs of multiple routes discovered by a routing protocol are the same, load balancing can be implemented among these routes.</p>
<p>Perform the following steps on the device that runs OSPFv3.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130623288__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the OSPFv3 view.</span><p><pre class="screen"><a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
</p></li><li><span>Set the maximum number of equal-cost routes that can be used for load balancing.</span><p><pre class="screen"><a href="cmdqueryname=maximum+load-balancing"><b><span class="cmdname">maximum load-balancing</span></b></a> <i><span class="varname">number</span></i></pre>
<p>If the number of equal-cost routes is greater than the number specified in the <a href="cmdqueryname=maximum+load-balancing"><b><span class="cmdname">maximum load-balancing</span></b></a> <i><span class="varname">number</span></i> command, valid routes are selected for load balancing based on the following criteria:</p>
<ol type="a"><li>Next-hop preference: OSPFv3 selects the routes with higher next-hop preferences for load balancing. For details about the configuration of next-hop preferences, see step 4.</li><li>Index of the outbound interface corresponding to a next hop: If the next-hop preferences of the candidate routes are the same, OSPFv3 compares the indexes of the outbound interfaces corresponding to the next hops and selects the routes with larger outbound interface indexes for load balancing.</li><li>Next-hop IP address: If the candidate routes have the same next-hop preference and outbound interface index, the routes with larger next-hop IP addresses are selected for load balancing.</li></ol>
</p></li><li><span>(Optional) Set a weight for the next hop of an equal-cost route.</span><p><pre class="screen"><a href="cmdqueryname=nexthop+weight+%28OSPFv3+view%29"><b><span class="cmdname">nexthop</span></b></a> <i><span class="varname">neighbor-id</span></i> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type interface-number</span></i> } <strong><span>weight</span></strong> <i><span class="varname">value</span></i></pre>
<p>You can run the <a href="cmdqueryname=nexthop+weight+%28OSPFv3+view%29"><b><span class="cmdname">nexthop</span></b></a> command to set a weight for the next hop of each OSPFv3 equal-cost route so that OSPFv3 selects routes with higher next-hop preferences for load balancing.</p>
<p><i><span class="varname">weight-value</span></i> specifies a weight value for the next hop. The smaller the weight value, the higher the preference of the next hop. The default weight value of a next hop is 255.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130623288__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130623288__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001130623288__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+ospfv3"><b><span class="cmdname">display ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>routing</span></strong> command to check information about the OSPFv3 routing table. The command output shows information about equal-cost routes.</li><li>Run the <a href="cmdqueryname=display+ospfv3"><b><span class="cmdname">display ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>ecmp-group</span></strong> command to check information about OSPFv3 ECMP groups.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospfv3_cfg_0000.html">OSPFv3 Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospfv3_cfg_0033.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ospfv3_cfg_0035.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>