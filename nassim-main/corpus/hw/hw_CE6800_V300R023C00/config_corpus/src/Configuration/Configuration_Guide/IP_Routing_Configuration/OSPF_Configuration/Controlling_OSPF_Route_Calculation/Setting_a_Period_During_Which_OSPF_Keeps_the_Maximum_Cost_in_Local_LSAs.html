
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Setting a Period During Which OSPF Keeps the Maximum Cost in Local LSAs">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0069.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0074.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176662943">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Setting a Period During Which OSPF Keeps the Maximum Cost in Local LSAs</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176662943"></a><a name="EN-US_TASK_0000001176662943"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Setting a Period During Which OSPF Keeps the Maximum Cost in Local LSAs</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001176662943__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before setting a period during which OSPF keeps the maximum cost in local LSAs, you have completed the following task:</p>
<ul><li><a href="vrp_ospf_cfg_0010.html">Configure basic OSPF functions</a>.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176662943__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When an OSPF interface changes from down to up, the OSPF neighbor relationship is re-established. After OSPF routes converge, traffic is switched back to the recovered link. In most cases, IGP routes converge quickly, although many services that depend on IGP routes may require a delayed switchback. In this case, you can run the <a href="cmdqueryname=ospf+peer+hold-max-cost"><b><span class="cmdname">ospf peer hold-max-cost</span></b></a> command to specify a period during which OSPF keeps the maximum cost in local LSAs. After the OSPF neighbor relationship reaches the Full state, the traffic forwarding path remains unchanged during the specified period. After this period expires, the maximum cost is restored to the original cost of the recovered link, and traffic is switched back to the recovered link.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176662943__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li><span>Switch the interface working mode to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
<p></p>
<p>Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li><span>Set a period during which OSPF keeps the maximum cost in local LSAs.</span><p><pre class="screen"><a href="cmdqueryname=ospf+peer+hold-max-cost"><b><span class="cmdname">ospf peer hold-max-cost</span></b></a> <strong><span>timer</span></strong> <i><span class="varname">timer</span></i></pre>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176662943__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176662943__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001176662943__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+ospf"><b><span class="cmdname">display ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>brief</span></strong> command to check brief OSPF information. The <strong>Timers</strong> field in the command output includes the period during which OSPF keeps the maximum cost in local LSAs.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospf_cfg_0069.html">Controlling OSPF Route Calculation
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospf_cfg_0074.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>