
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IP Addresses for an Interface">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv4_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv4_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv4_cfg_0012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv4 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176663327">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring IP Addresses for an Interface</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176663327"></a><a name="EN-US_TASK_0000001176663327"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IP Addresses for an Interface</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001176663327__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring IP addresses for an interface, configure link layer protocol parameters for the interface to ensure that its link layer protocol status is up.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176663327__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>To run IP services on an interface, configure IP addresses for the interface.</p>
<p>Each interface on a device can be configured with multiple IP addresses. If IP addresses are configured in primary/secondary mode, one primary and multiple secondary IP addresses can be configured on an interface. If the primary or secondary status of IP addresses is ignored, the device does not differentiate between primary and secondary IP addresses.</p>
<p>If IP addresses are configured in primary/secondary mode, you need to configure only one primary IP address for an interface. In some special cases, you need to configure one or more secondary IP addresses for an interface. For example, a device connects to a physical network through one of its interfaces. Hosts on the physical network belong to two different Class C networks. To allow the device to communicate with all the hosts on the physical network, configure a primary IP address and a secondary IP address for the interface on the device.</p>
<p>If the device ignores the primary or secondary status of IP addresses, you need to configure only one IP address for an interface. In some special cases, you need to configure multiple IP addresses for an interface. For example, multiple IP addresses need to be configured for an interface to differentiate user services. To delete an IP address on an interface without affecting other IP addresses during a service cutover, enable the device to ignore the primary or secondary status of IP addresses so that any IP address configured on the interface can be deleted.</p>
<p>By default, IP addresses are configured in primary/secondary mode.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">For IP addresses in primary/secondary mode:<ul><li>One primary IP address and multiple secondary IP addresses can be configured on an interface.</li><li>If a secondary IP address exists, the primary IP address cannot be deleted.</li><li>If both primary and secondary IP addresses are configured on an interface of a device, the device cannot be enabled to ignore the primary or secondary status of IP addresses.</li></ul>
</div>
<div class="p">For IP addresses whose primary or secondary status is ignored:<ul><li>Multiple IP addresses can be configured on an interface.</li><li>Any IP address configured on an interface can be deleted.</li><li>If multiple IP addresses are configured on an interface of a device, the device cannot be configured to differentiate between primary and secondary IP addresses.</li></ul>
</div>
</div></div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001176663327__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span><strong>For IP addresses whose primary or secondary status is ignored:</strong></span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enable the device to ignore the primary or secondary status of IP addresses.</span><p><pre class="screen"><a href="cmdqueryname=ip+address+ignore+primary-sub+enable"><b><span class="cmdname">ip address ignore primary-sub enable</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> { <em>interface-name</em> | <em>interface-type</em><em> interface-number</em> } </pre>
</p></li><li class="substepexpand"><span>Switch the interface working mode to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure an IP address for the interface.</span><p><pre class="screen"><a href="cmdqueryname=ip+address"><b><span class="cmdname">ip address</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length </span></i>}[ <strong>tag</strong> <i><span class="varname">tag-value</span></i> ]</pre>
<p>You can repeat the command to configure multiple IP addresses for the interface. A maximum of 256 IP addresses can be configured for each interface.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176663327__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176663327__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span><strong>For IP addresses in primary/secondary mode:</strong></span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure the device to differentiate between primary and secondary IP addresses.</span><p><pre class="screen"><a href="cmdqueryname=undo+ip+address+ignore+primary-sub+enable"><b><span class="cmdname">undo ip address ignore primary-sub enable</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> { <em>interface-name</em> | <em>interface-type</em><em> interface-number</em> } </pre>
</p></li><li class="substepexpand"><span>Switch the interface working mode to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure a primary IP address for the interface.</span><p><pre class="screen"><a href="cmdqueryname=ip+address"><b><span class="cmdname">ip address</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length </span></i>}[ <strong>tag</strong> <i><span class="varname">tag-value</span></i> ]</pre>
<p>Each interface has only one primary IP address. If you configure multiple primary IP addresses for an interface, the last configured IP address becomes the primary IP address of the interface.</p>
</p></li><li class="substepexpand"><span>Configure a secondary IP address for the interface.</span><p><pre class="screen"><a href="cmdqueryname=ip+address+sub"><b><span class="cmdname">ip address</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } <strong><span>sub</span></strong> [ <strong>tag</strong> <i><span class="varname">tag-value</span></i> ]</pre>
<p>To save IP address space, you can configure secondary IP addresses with 31-bit masks for an interface. A maximum of 255 secondary IP addresses can be configured for each interface.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176663327__en-us_task_0234857734_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176663327__en-us_task_0234857734_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0000001176663327__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+ip+interface"><b><span class="cmdname">display ip interface</span></b></a> [ <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ] or <a href="cmdqueryname=display+ip+interface+brief+slot+card+ip-configured+except"><b><span class="cmdname">display ip interface</span></b></a> <strong><span>brief</span></strong> [ <i><span class="varname">interface-type</span></i> [ <i><span class="varname">interface-number</span></i> ] | <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> [ <strong><span>card</span></strong> <i><span class="varname">card-number</span></i> ] | <strong><span>ip-configured</span></strong> [ <strong><span>except</span></strong> <i><span class="varname">interface-type</span></i> ] ] command to check the IP address configuration of an interface.</li><li>Run the <a href="cmdqueryname=display+interface"><b><span class="cmdname">display interface</span></b></a> [ <i><span class="varname">interface-type</span></i> [ <i><span class="varname">interface-number</span></i> ] ] command to check information about an interface.</li><li>Run the <a href="cmdqueryname=display+ip+interface+multi-address"><b><span class="cmdname">display ip interface multi-address</span></b></a> command to check information about all interfaces configured with multiple IP addresses.</li></ul>
<h4 class="sectiontitle">Example</h4><div class="p"># Set the primary and secondary IP addresses of <span>100GE</span> <span>1/0/1</span> to 172.16.1.1 and 172.16.2.1, respectively.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> </strong><strong>sysname DeviceA</strong>
<span>[<span class="keyword">*</span>DeviceA] <strong>commit</strong></span>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> </strong><strong>undo portswitch</strong> 
[<span><span class="keyword">*</span></span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> ip address 172.16.1.1 255.255.255.0</strong>
[<span><span class="keyword">*</span></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>ip address 172.16.2.1 255.255.255.0 sub</strong>
[<span><span class="keyword">*</span></span>DeviceA-<span>100GE</span><span>1/0/1</span>]<strong> quit</strong>
<span>[<span class="keyword">*</span>DeviceA] <strong>commit</strong></span></pre>
</div>
<div class="p"># Verify the configuration.<ul><li>Ping a host on the network segment 172.16.1.0 from the device. The ping operation is successful.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>ping 172.16.1.2</strong>
  PING 172.16.1.2: 56  data bytes, press CTRL_C to break
    Reply from 172.16.1.2: bytes=56 Sequence=1 ttl=255 time=614 ms
    Reply from 172.16.1.2: bytes=56 Sequence=2 ttl=255 time=16 ms
    Reply from 172.16.1.2: bytes=56 Sequence=3 ttl=255 time=2 ms
    Reply from 172.16.1.2: bytes=56 Sequence=4 ttl=255 time=3 ms
    Reply from 172.16.1.2: bytes=56 Sequence=5 ttl=255 time=2 ms
  --- 172.16.1.2 ping statistics ---
    5 packet(s) transmitted
    5 packet(s) received
    0.00% packet loss
    round-trip min/avg/max = 25/26/27 ms</pre>
</li><li>Ping a host on the network segment 172.16.2.0 from the device. The ping operation is successful.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> ping 172.16.2.2</strong>
  PING 172.16.2.2: 56  data bytes, press CTRL_C to break
    Reply from 172.16.2.2: bytes=56 Sequence=1 ttl=255 time=13 ms
    Reply from 172.16.2.2: bytes=56 Sequence=2 ttl=255 time=2 ms
    Reply from 172.16.2.2: bytes=56 Sequence=3 ttl=255 time=2 ms
    Reply from 172.16.2.2: bytes=56 Sequence=4 ttl=255 time=2 ms
    Reply from 172.16.2.2: bytes=56 Sequence=5 ttl=255 time=2 ms
  --- 172.16.2.2 ping statistics ---
    5 packet(s) transmitted
    5 packet(s) received
    0.00% packet loss
    round-trip min/avg/max = 25/25/26 ms</pre>
</li></ul>
</div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_ipv4_cfg_0001.html">IPv4 Basic Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_ipv4_cfg_0010.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_ipv4_cfg_0012.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>