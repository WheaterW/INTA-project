
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BD-based Layer 2 Proxy ARP">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../toctopics/en-us_topic_0000001130784304.html">
<meta name="DC.Relation" scheme="URI" content="../dc/dc_vrp_vxlan_cfg_1099_copy3.html">
<meta name="DC.Relation" scheme="URI" content="../dc/dc_vrp_vxlan_cfg_1044.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130624522">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring BD-based Layer 2 Proxy ARP</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130624522"></a><a name="EN-US_TASK_0000001130624522"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BD-based Layer 2 Proxy ARP</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130624522__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><div class="p">Before configuring BD-based Layer 2 proxy ARP, you have completed one of the following tasks:<ul><li><a href="dc_vrp_vxlan_cfg_1039.html">Establishing VXLAN Tunnels in Static Mode (Centralized VXLAN Gateway)</a></li><li><a href="dc_vrp_vxlan_cfg_1072.html">Establishing VXLAN Tunnels in BGP EVPN Mode (Centralized VXLAN Gateway)</a></li></ul>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130624522__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After a Layer 2 VXLAN gateway receives an ARP request packet, it broadcasts the packet within the BD. If the Layer 2 gateway receives and broadcasts a large number of ARP request packets in a period, too many ARP request packets are forwarded on the VXLAN. This consumes excessive network resources and causes network congestion, resulting in network performance deterioration and affecting user services. To address this problem, Layer 2 proxy ARP can be configured on Layer 2 gateways. Layer 2 proxy ARP follows these basic principles: A Layer 2 gateway listens to a received ARP packet and generates an ARP snooping binding entry to record the source user information, including the source IP and MAC addresses, and inbound interface of the packet. After receiving an ARP request packet, the Layer 2 gateway preferentially responds to the request based on the information in the ARP snooping binding entry.</p>
<p>Perform the following steps on a Layer 2 VXLAN gateway.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>Layer 2 proxy ARP can be configured by IPv4 overlay networks only.</p>
</li><li><p>No VBDIF interface can be created for a BD enabled with Layer 2 proxy ARP.</p>
</li></ul>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130624522__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the BD view.</span><p><pre class="screen"><a href="cmdqueryname=bridge-domain"><b><span class="cmdname">bridge-domain</span></b></a> <i><span class="varname">bd-id</span></i></pre>
</p></li><li><span>Enable Layer 2 proxy ARP.</span><p><pre class="screen"><a href="cmdqueryname=arp+l2-proxy+enable"><b><span class="cmdname">arp l2-proxy enable</span></b></a></pre>
<p>By default, Layer 2 proxy ARP is not enabled.</p>
</p></li><li><span>(Optional) Enable BGP EVPN to collect host information on a per BD basis.</span><p><pre class="screen"><a href="cmdqueryname=arp+collect+host+enable"><b><span class="cmdname">arp collect host enable</span></b></a></pre>
<p>By default, BGP EVPN is not enabled to collect host information on a per BD basis.</p>
<p>If a VXLAN tunnel is established in BGP EVPN mode, it is advised to perform this step on Layer 2 VXLAN gateways. This will allow them to synchronize the locally listened user ARP information with each other through BGP EVPN routes, and complement information in their own ARP snooping binding entries, maximizing the effect of the Layer 2 proxy ARP function.</p>
</p></li><li><span>(Optional) Configure an aging time for ARP snooping entries.</span><p><pre class="screen"><a href="cmdqueryname=arp+l2-proxy+timeout"><b><span class="cmdname">arp l2-proxy timeout</span></b></a> <i><span class="varname">expire-time</span></i></pre>
<p>The default aging time of ARP snooping entries is 900s.</p>
<p>Each ARP snooping binding entry has a life cycle, called aging time. An ARP snooping binding entry will be deleted if it is not updated before its aging time expires. If the device stores a large number of ARP snooping binding entries, the CPU resources are wasted and ARP snooping binding entries for new users cannot be generated. To resolve this problem, perform this step to set an aging time, which allows ARP snooping binding entries to be updated regularly.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130624522__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130624522__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../toctopics/en-us_topic_0000001130784304.html">VXLAN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../dc/dc_vrp_vxlan_cfg_1099_copy3.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../dc/dc_vrp_vxlan_cfg_1044.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>