
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="DCBX">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_dcb_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_dcb_cfg_0005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DCB">
<meta name="featuretype" content="DCN and Network Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DCB">
<meta name="featuretype" content="DCN and Network Management">
<meta name="featurename" content="DCB">
<meta name="featuretype" content="DCN and Network Management">
<meta name="featuretype" content="DCN and Network Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001563869625">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>DCBX</title>
</head>
<body><a name="EN-US_CONCEPT_0000001563869625"></a><a name="EN-US_CONCEPT_0000001563869625"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">DCBX</h1>
<div><div class="section"><h4 class="sectiontitle">Context</h4><p>To implement lossless Ethernet on a converged data center network, both ends of a link must have the same PFC and ETS parameter settings. Configuring these parameters manually will lead to heavy workload, and errors may occur. DCBX is a link discovery protocol that enables devices at both ends of a link to discover and exchange DCB configurations, reducing the workload for administrators.</p>
</div>
<div class="section"><h4 class="sectiontitle">Fundamentals</h4><div class="p">DCBX provides the following functions:<ul><li>Discovers the DCB configuration of the remote device.</li><li>Detects the DCB configuration errors of the remote device.</li><li>Configures DCB parameters of the remote device.</li></ul>
</div>
<div class="p">DCBX enables devices at both ends to exchange the following DCB configurations:<ul><li>ETS priority group</li><li>PFC</li></ul>
</div>
<p>DCBX encapsulates DCB configurations into Link Layer Discovery Protocol (LLDP) TLVs so that devices at both ends of a link can exchange DCB configurations.</p>
<div class="p">In <a href="#EN-US_CONCEPT_0000001563869625__fig_dc_fd_dcb_000603">Figure 1</a>, PFC is used as an example to illustrate DCBX implementation through LLDP.<div class="fignone" id="EN-US_CONCEPT_0000001563869625__fig_dc_fd_dcb_000603"><a name="EN-US_CONCEPT_0000001563869625__fig_dc_fd_dcb_000603"></a><a name="fig_dc_fd_dcb_000603"></a><span class="figcap"><b>Figure 1 </b>DCBX implementation through LLDP</span><br><span><img class="vsd" src="figure/en-us_image_0000001512830118.png"></span></div>
</div>
<div class="p">As shown in <a href="#EN-US_CONCEPT_0000001563869625__fig_dc_fd_dcb_000603">Figure 1</a>, LLDP is enabled globally and on PortA and PortB, and PortA is configured to send DCBX TLVs. DCBX is implemented as follows:<ol><li>Set PFC parameters on PortA and PortB, and enable DCBX. The DCBX module instructs PortA and PortB to encapsulate their PFC parameters into LLDPDUs and send the LLDPDUs to each other.</li><li>The LLDP module of PortA sends LLDPDUs carrying DCBX TLVs to PortB at its own packet sending intervals.</li><li>PortB parses the DCBX TLVs in the received LLDPDUs and sends PFC parameters of PortA to the DCBX module. The DCBX module compares PFC parameters of PortA with its own PFC parameters. Through negotiation, PFC parameters on the two ends are made consistent, and a configuration file is then generated.</li></ol>
</div>
</div>
<div class="section"><h4 class="sectiontitle">DCBX TLV</h4><p>As shown in <a href="#EN-US_CONCEPT_0000001563869625__fig_dc_fd_dcb_000602">Figure 2</a>, the DCB configuration is encapsulated into specified TLVs. The Type field has a fixed value of 127, and the OUI field varies depending on the protocol type. The OUI field of the IEEE DCBX is 0x0080c2, and the OUI field of the INTEL DCBX is 0x001b21.</p>
<div class="p"><div class="fignone" id="EN-US_CONCEPT_0000001563869625__fig_dc_fd_dcb_000602"><a name="EN-US_CONCEPT_0000001563869625__fig_dc_fd_dcb_000602"></a><a name="fig_dc_fd_dcb_000602"></a><span class="figcap"><b>Figure 2 </b>DCBX TLV format</span><br><span><img class="vsd" src="figure/en-us_image_0000001512670526.png"></span></div>
</div>
<p>IEEE DCBX TLVs include the ETS Configuration TLV, ETS Recommendation TLV, PFC Configuration TLV and App TLV, as described in <a href="#EN-US_CONCEPT_0000001563869625__tab_dc_fd_dcb_000601">Table 1</a>.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001563869625__tab_dc_fd_dcb_000601"></a><a name="tab_dc_fd_dcb_000601"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001563869625__tab_dc_fd_dcb_000601" frame="border" border="1" rules="all"><caption><b>Table 1 </b>IEEE DCBX TLVs</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="15.4%" id="mcps1.3.3.5.2.5.1.1" liSelected="liSelected"><p>TLV</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="15.879999999999999%" id="mcps1.3.3.5.2.5.1.2" liSelected="liSelected"><p>Subtype</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="16.35%" id="mcps1.3.3.5.2.5.1.3" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="52.370000000000005%" id="mcps1.3.3.5.2.5.1.4" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="15.4%" headers="mcps1.3.3.5.2.5.1.1 "><p>ETS Configuration TLV</p>
</td>
<td class="cellrowborder" valign="top" width="15.879999999999999%" headers="mcps1.3.3.5.2.5.1.2 "><p>09</p>
</td>
<td class="cellrowborder" valign="top" width="16.35%" headers="mcps1.3.3.5.2.5.1.3 "><p>25</p>
</td>
<td class="cellrowborder" valign="top" width="52.370000000000005%" headers="mcps1.3.3.5.2.5.1.4 "><p>Local ETS configuration:</p>
<ul><li>Priority group configuration: ID and bandwidth usage of a priority group</li><li>Priority queue configuration: priority queue ID and its priority group ID</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.4%" headers="mcps1.3.3.5.2.5.1.1 "><p>ETS Recommendation TLV</p>
</td>
<td class="cellrowborder" valign="top" width="15.879999999999999%" headers="mcps1.3.3.5.2.5.1.2 "><p>0A</p>
</td>
<td class="cellrowborder" valign="top" width="16.35%" headers="mcps1.3.3.5.2.5.1.3 "><p>25</p>
</td>
<td class="cellrowborder" valign="top" width="52.370000000000005%" headers="mcps1.3.3.5.2.5.1.4 "><p>Recommended ETS configuration, used for ETS configuration negotiation between two ends for configuration consistency:</p>
<ul><li>Priority group configuration: ID and bandwidth usage of a priority group</li><li>Priority queue configuration: priority queue ID and its priority group ID</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.4%" headers="mcps1.3.3.5.2.5.1.1 "><p>PFC Configuration TLV</p>
</td>
<td class="cellrowborder" valign="top" width="15.879999999999999%" headers="mcps1.3.3.5.2.5.1.2 "><p>0B</p>
</td>
<td class="cellrowborder" valign="top" width="16.35%" headers="mcps1.3.3.5.2.5.1.3 "><p>6</p>
</td>
<td class="cellrowborder" valign="top" width="52.370000000000005%" headers="mcps1.3.3.5.2.5.1.4 "><p>Local PFC configuration:</p>
<ul><li>Priority queue ID</li><li>Whether PFC is applied to a queue</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.4%" headers="mcps1.3.3.5.2.5.1.1 "><p>App TLV</p>
</td>
<td class="cellrowborder" valign="top" width="15.879999999999999%" headers="mcps1.3.3.5.2.5.1.2 "><p>0C</p>
</td>
<td class="cellrowborder" valign="top" width="16.35%" headers="mcps1.3.3.5.2.5.1.3 "><p>Unfixed value</p>
</td>
<td class="cellrowborder" valign="top" width="52.370000000000005%" headers="mcps1.3.3.5.2.5.1.4 "><p>Carried only when PFC is configured to work in auto mode for interconnection between products and between NICs.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>INTEL DCBX TLVs include the DCBX Control Sub-TLV, Priority Group Sub-TLV, Priority Flow Control Sub-TLV, and App Sub-TLV, as described in <a href="#EN-US_CONCEPT_0000001563869625__tab_dc_fd_dcb_000603">Table 2</a> and <a href="#EN-US_CONCEPT_0000001563869625__tab_dc_fd_dcb_000602">Table 3</a>.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001563869625__tab_dc_fd_dcb_000603"></a><a name="tab_dc_fd_dcb_000603"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001563869625__tab_dc_fd_dcb_000603" frame="border" border="1" rules="all"><caption><b>Table 2 </b>INTEL DCBX v1.00 TLVs</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="15.4%" id="mcps1.3.3.7.2.5.1.1" liSelected="liSelected"><p>TLV</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="15.879999999999999%" id="mcps1.3.3.7.2.5.1.2" liSelected="liSelected"><p>Subtype</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="16.35%" id="mcps1.3.3.7.2.5.1.3" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="52.370000000000005%" id="mcps1.3.3.7.2.5.1.4" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="15.4%" headers="mcps1.3.3.7.2.5.1.1 "><p>DCBX Control Sub-TLV</p>
</td>
<td class="cellrowborder" valign="top" width="15.879999999999999%" headers="mcps1.3.3.7.2.5.1.2 "><p>01</p>
</td>
<td class="cellrowborder" valign="top" width="16.35%" headers="mcps1.3.3.7.2.5.1.3 "><p>10</p>
</td>
<td class="cellrowborder" valign="top" width="52.370000000000005%" headers="mcps1.3.3.7.2.5.1.4 "><p>Information of DCBX packets.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.4%" headers="mcps1.3.3.7.2.5.1.1 "><p>Priority Group Sub-TLV</p>
</td>
<td class="cellrowborder" valign="top" width="15.879999999999999%" headers="mcps1.3.3.7.2.5.1.2 "><p>02</p>
</td>
<td class="cellrowborder" valign="top" width="16.35%" headers="mcps1.3.3.7.2.5.1.3 "><p>28</p>
</td>
<td class="cellrowborder" valign="top" width="52.370000000000005%" headers="mcps1.3.3.7.2.5.1.4 "><p>Recommended ETS configuration, used for ETS configuration negotiation between two ends for configuration consistency:</p>
<ul><li>Bandwidth usage of a priority group</li><li>Priority group ID</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.4%" headers="mcps1.3.3.7.2.5.1.1 "><p>Priority Flow Control Sub-TLV</p>
</td>
<td class="cellrowborder" valign="top" width="15.879999999999999%" headers="mcps1.3.3.7.2.5.1.2 "><p>03</p>
</td>
<td class="cellrowborder" valign="top" width="16.35%" headers="mcps1.3.3.7.2.5.1.3 "><p>5</p>
</td>
<td class="cellrowborder" valign="top" width="52.370000000000005%" headers="mcps1.3.3.7.2.5.1.4 "><p>Local PFC configuration:</p>
<ul><li>Priority queue ID</li><li>Whether PFC is applied to a queue</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.4%" headers="mcps1.3.3.7.2.5.1.1 "><p>App Sub-TLV</p>
</td>
<td class="cellrowborder" valign="top" width="15.879999999999999%" headers="mcps1.3.3.7.2.5.1.2 "><p>05</p>
</td>
<td class="cellrowborder" valign="top" width="16.35%" headers="mcps1.3.3.7.2.5.1.3 "><p>Unfixed value</p>
</td>
<td class="cellrowborder" valign="top" width="52.370000000000005%" headers="mcps1.3.3.7.2.5.1.4 "><p>Carried only when PFC is configured to work in auto mode for interconnection between products and between NICs.</p>
</td>
</tr>
</tbody>
</table>
</div>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001563869625__tab_dc_fd_dcb_000602"></a><a name="tab_dc_fd_dcb_000602"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001563869625__tab_dc_fd_dcb_000602" frame="border" border="1" rules="all"><caption><b>Table 3 </b>INTEL DCBX v1.01 TLVs</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="15.4%" id="mcps1.3.3.8.2.5.1.1" liSelected="liSelected"><p>TLV</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="15.879999999999999%" id="mcps1.3.3.8.2.5.1.2" liSelected="liSelected"><p>Subtype</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="16.35%" id="mcps1.3.3.8.2.5.1.3" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="52.370000000000005%" id="mcps1.3.3.8.2.5.1.4" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="15.4%" headers="mcps1.3.3.8.2.5.1.1 "><p>DCBX Control Sub-TLV</p>
</td>
<td class="cellrowborder" valign="top" width="15.879999999999999%" headers="mcps1.3.3.8.2.5.1.2 "><p>01</p>
</td>
<td class="cellrowborder" valign="top" width="16.35%" headers="mcps1.3.3.8.2.5.1.3 "><p>10</p>
</td>
<td class="cellrowborder" valign="top" width="52.370000000000005%" headers="mcps1.3.3.8.2.5.1.4 "><p>Information of DCBX packets.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.4%" headers="mcps1.3.3.8.2.5.1.1 "><p>Priority Group Sub-TLV</p>
</td>
<td class="cellrowborder" valign="top" width="15.879999999999999%" headers="mcps1.3.3.8.2.5.1.2 "><p>02</p>
</td>
<td class="cellrowborder" valign="top" width="16.35%" headers="mcps1.3.3.8.2.5.1.3 "><p>17</p>
</td>
<td class="cellrowborder" valign="top" width="52.370000000000005%" headers="mcps1.3.3.8.2.5.1.4 "><p>Recommended ETS configuration, used for ETS configuration negotiation between two ends for configuration consistency:</p>
<ul><li>Priority group configuration: ID and bandwidth usage of a priority group</li><li>Priority queue configuration: priority queue ID and its priority group ID</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.4%" headers="mcps1.3.3.8.2.5.1.1 "><p>Priority Flow Control Sub-TLV</p>
</td>
<td class="cellrowborder" valign="top" width="15.879999999999999%" headers="mcps1.3.3.8.2.5.1.2 "><p>03</p>
</td>
<td class="cellrowborder" valign="top" width="16.35%" headers="mcps1.3.3.8.2.5.1.3 "><p>6</p>
</td>
<td class="cellrowborder" valign="top" width="52.370000000000005%" headers="mcps1.3.3.8.2.5.1.4 "><p>Local PFC configuration:</p>
<ul><li>Priority queue ID</li><li>Whether PFC is applied to a queue</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.4%" headers="mcps1.3.3.8.2.5.1.1 "><p>App Sub-TLV</p>
</td>
<td class="cellrowborder" valign="top" width="15.879999999999999%" headers="mcps1.3.3.8.2.5.1.2 "><p>04</p>
</td>
<td class="cellrowborder" valign="top" width="16.35%" headers="mcps1.3.3.8.2.5.1.3 "><p>Unfixed value</p>
</td>
<td class="cellrowborder" valign="top" width="52.370000000000005%" headers="mcps1.3.3.8.2.5.1.4 "><p>Carried only when PFC is configured to work in auto mode for interconnection between products and between NICs.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_dcb_cfg_0003.html">Understanding DCB
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_dcb_cfg_0005.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>