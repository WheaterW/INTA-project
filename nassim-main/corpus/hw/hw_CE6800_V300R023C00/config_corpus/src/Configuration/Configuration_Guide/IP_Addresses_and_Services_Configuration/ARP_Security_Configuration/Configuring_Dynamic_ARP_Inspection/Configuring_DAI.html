
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring DAI">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_arp_security_cfg_DAI.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_arp_security_cfg_DAI_003.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ARP Security">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ARP Security">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ARP Security">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001252037233">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring DAI</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001252037233"></a><a name="EN-US_TASK_0000001252037233"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring DAI</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001252037233__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>You can enable DAI to defend against MITM attacks, preventing authorized users' data from being intercepted. A device compares the source IP address, source MAC address, interface, and VLAN information in a received ARP message with DHCP snooping binding entries. If they match, the device considers the message valid and forwards it. If they do not match, the device considers the message invalid and discards it.</p>
<p>You can enable DAI in the interface, BD, or VLAN view. If DAI is enabled in the interface view, the device checks all ARP messages received by the interface against binding entries. If DAI is enabled in the VLAN or BD view, the device checks the ARP messages received by the interfaces that belong to the VLAN or BD against binding entries.</p>
<p>If a large number of ARP messages are discarded because they do not match binding entries, you can enable the alarm function for the ARP messages discarded by DAI. In this case, the device generates an alarm if the number of discarded ARP messages exceeds the alarm threshold.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001252037233__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable DAI on interfaces, in BDs, or in VLANs.</span><p><ul><li>Enter the interface view and enable DAI.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i>
<a href="cmdqueryname=portswitch"><b><span class="cmdname">portswitch</span></b></a>
<a href="cmdqueryname=arp+anti-attack+check+user-bind+enable"><b><span class="cmdname">arp anti-attack check user-bind enable</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
<p></p>
<p></p>
</li><li>Enter the BD view and enable DAI.<pre class="screen"><a href="cmdqueryname=bridge-domain"><b><span class="cmdname">bridge-domain</span></b></a> <i><span class="varname">bd-id</span></i>
<a href="cmdqueryname=arp+anti-attack+check+user-bind+enable"><b><span class="cmdname">arp anti-attack check user-bind enable</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Enter the VLAN view and enable DAI.<pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i>
<a href="cmdqueryname=arp+anti-attack+check+user-bind+enable"><b><span class="cmdname">arp anti-attack check user-bind enable</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li></ul>
</p><p><p>By default, DAI is disabled on a device.</p>
</p></li><li><span>(Optional) Configure items to be checked against binding entries for ARP messages.</span><p><ul><li>Configure items to be checked against binding entries for ARP messages in the interface view.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i>
<a href="cmdqueryname=portswitch"><b><span class="cmdname">portswitch</span></b></a>
<a href="cmdqueryname=arp+anti-attack+check+user-bind+check-item"><b><span class="cmdname">arp anti-attack check user-bind check-item </span></b></a>{ <strong>ip-address</strong> | <strong>mac-address</strong> | <strong>vlan</strong> } *  
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
<p></p>
<p></p>
</li></ul>
</p><p><ul><li>Configure items to be checked against binding entries for ARP messages in the BD view.<pre class="screen"><a href="cmdqueryname=bridge-domain"><b><span class="cmdname">bridge-domain</span></b></a> <i><span class="varname">bd-id</span></i>
<a href="cmdqueryname=arp+anti-attack+check+user-bind+check-item"><b><span class="cmdname">arp anti-attack check user-bind check-item </span></b></a>{ <strong>ip-address<em> </em></strong>| <strong>mac-address</strong> | <strong>interface</strong> } * 
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Configure items to be checked against binding entries for ARP messages in the VLAN view.<pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i>
<a href="cmdqueryname=arp+anti-attack+check+user-bind+check-item"><b><span class="cmdname">arp anti-attack check user-bind check-item </span></b></a>{ <strong>ip-address<em> </em></strong>| <strong>mac-address</strong> | <strong>interface</strong> } * 
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li></ul>
<div class="p">By default, a device checks the source IP address, source MAC address, interface, and VLAN information in ARP messages. To allow the ARP messages that match only one or two items in binding entries to pass through, configure a device to check ARP messages according to one or two specified items in binding entries.<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Only IPv4 addresses are supported in binding entries. When a device compares IP addresses in ARP messages with binding entries, only IPv4 addresses are checked.</p>
<p>The configured items to be checked against binding entries for ARP messages do not take effect on users configured with static binding entries, meaning that the device still checks ARP messages of these users against the static binding entries.</p>
<p>If DAI is enabled both in a VLAN and on an interface that belongs to the VLAN, the device first checks ARP messages based on the items configured on the interface. If the ARP messages pass the check, the device checks the messages again based on the items configured in the VLAN.</p>
<p>If DAI is enabled both in a BD and on an interface that belongs to the BD, the device first checks ARP messages based on the items configured on the BD. If the ARP messages pass the check, the device checks the messages again based on the items configured on the interface.</p>
</div></div>
</div>
</p></li><li><span>(Optional) Enable the alarm function for ARP messages discarded by DAI.</span><p><pre class="screen"><a href="cmdqueryname=arp+anti-attack+check+user-bind+alarm+enable"><b><span class="cmdname">arp anti-attack check user-bind alarm enable </span></b></a></pre>
<p>By default, the alarm function for ARP messages discarded by DAI is disabled on a device.</p>
</p></li><li><span>(Optional) Configure an alarm threshold for ARP messages discarded by DAI.</span><p><pre class="screen"><a href="cmdqueryname=arp+anti-attack+check+user-bind+alarm+threshold"><b><span class="cmdname">arp anti-attack check user-bind alarm threshold</span></b></a> <em>threshold</em> </pre>
<p>By default, the alarm threshold for ARP messages discarded by DAI is that configured using this command in the system view. If no alarm threshold is configured in the system view, the default alarm threshold on an interface, in a BD, or in a VLAN is 100.</p>
</p></li><li><span>Configure a trusted interface.</span><p><p>To prevent return messages from being discarded because they do not match binding entries, configure the interface directly or indirectly connected to an authorized DHCP server as a trusted one. After the interface is configured as a trusted one, the device directly forwards the messages received from the interface without checking them against binding entries.</p>
<ol type="a"><li>Enable DHCP globally.<pre class="screen"><a href="cmdqueryname=dhcp+enable"><b><span class="cmdname">dhcp enable</span></b></a></pre>
<p>By default, DHCP is disabled globally.</p>
</li><li>Enable DHCP snooping globally.<pre class="screen"><a href="cmdqueryname=dhcp+snooping+enable"><b><span class="cmdname">dhcp snooping enable</span></b></a></pre>
<p>By default, DHCP snooping is disabled globally.</p>
</li><li>Enable DHCP snooping in the interface or VLAN view.<pre class="screen"><a href="cmdqueryname=dhcp+snooping+enable"><b><span class="cmdname">dhcp snooping enable</span></b></a></pre>
<p>By default, DHCP snooping is disabled on an interface, in a BD, or in a VLAN.</p>
</li><li>Configure a trusted interface.<ul><li>Configure an interface as a trusted interface in the interface view.<pre class="screen"><a href="cmdqueryname=dhcp+snooping+trusted"><b><span class="cmdname">dhcp snooping trusted</span></b></a> </pre>
<p>By default, an interface is untrusted.</p>
</li><li>Configure an interface as a trusted interface in the VLAN view.<pre class="screen"><a href="cmdqueryname=dhcp+snooping+trusted"><b><span class="cmdname">dhcp snooping trusted</span></b></a> <strong>interface</strong> <em>interface-type</em> <em>interface-number </em></pre>
<p>By default, an interface is untrusted.</p>
</li></ul>
</li></ol>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001252037233__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001252037233__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001252037233__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+arp+anti-attack+statistics+check+user-bind"><b><span class="cmdname">display arp anti-attack statistics check user-bind</span></b></a> [<strong> vlan</strong> [ <em>vlan-id</em> ] | <strong>interface</strong> [ <em>interface-type</em> <em>interface-number</em> ] | <strong>bridge-domain</strong> [ <em>bd-id</em> ] ] command to check statistics about ARP messages discarded because they do not match binding entries in the interface, BD, or VLAN view.</li><li>Run the <a href="cmdqueryname=display+arp+anti-attack+configuration+check+user-bind"><b><span class="cmdname">display arp anti-attack configuration check user-bind</span></b></a> [<strong> vlan</strong> [ <em>vlan-id</em> ] | <strong>interface</strong> [ <em>interface-type</em> <em>interface-number</em> ] | <strong>bridge-domain</strong> [ <em>bd-id</em> ] ] command to check the DAI configuration in the interface, BD, or BD view.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_arp_security_cfg_DAI.html">Configuring Dynamic ARP Inspection
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_arp_security_cfg_DAI_003.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>