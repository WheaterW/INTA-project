
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BFD Session Authentication">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_00407.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_0036.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001478199318">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring BFD Session Authentication</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001478199318"></a><a name="EN-US_TASK_0000001478199318"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BFD Session Authentication</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001478199318__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring BFD session authentication, complete the following tasks:</p>
<ul><li>Enable BFD globally.</li><li>Create a BFD session.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001478199318__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If a network requires high security, you can configure BFD session authentication to improve network security. BFD session authentication verifies BFD packets when a BFD session is created. As shown in <a href="#EN-US_TASK_0000001478199318__fig1079985816269">Figure 1 BFD session setup</a>, the BFD session between <span class="keyword">Device</span>A and <span class="keyword">Device</span>B is in the DOWN state initially. After a device receives a BFD packet with the State field set to DOWN from the peer, the device does not switch the BFD session state to INIT. Instead, it checks whether the authentication information in the packet is the same as the local authentication information. If they are the same, the device sends a BFD packet with the State field set to INIT to the peer. After receiving the packet with the State field set to INIT, the peer device compares the authentication information in the packet with the local authentication information. If the authentication information is the same, it changes the local BFD session state to UP. If the authentication information is different, it discards the packet. This ensures the security of the BFD session.</p>
<div class="fignone" id="EN-US_TASK_0000001478199318__fig1079985816269"><a name="EN-US_TASK_0000001478199318__fig1079985816269"></a><a name="fig1079985816269"></a><span class="figcap"><b>Figure 1 </b>BFD session setup</span><br><span><img src="figure/en-us_image_0000001710275361.png" width="NaN" height="NaN"></span></div>
<p>BFD session authentication applies to single-hop BFD for IP sessions, and multi-hop BFD for IP sessions. After negotiation packet authentication is configured, the BFD packet sender sets the A flag in the packet header to 1. The receiver decapsulates the packet. If the A flag in the packet header is different from the local one, the receiver discards the packet. If they are the same, the receiver checks whether the authentication field is the same as the local configuration. If they are the same, the BFD session is set up.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When configuring session authentication, ensure that the same authentication mode, authentication password, and authentication timeout interval are configured on the sender and receiver.</p>
<p>An authentication password can be configured in cleartext or ciphertext mode. In both modes, the password is displayed in ciphertext in the configuration file.</p>
<p>It is recommended that the password be at least eight characters long and contain at least two of the following character types: uppercase letters, lowercase letters, digits, and special characters.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001478199318__1.3.3"></a><a name="1.3.3"></a>
<div class="p"><h4 class="sectiontitle">Procedure</h4><ol><li>Enter the system view.<pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</li><li>Configure BFD session authentication according to the service scenario.<ul><li>BFD sessions in BFD for IP scenarios<ol type="a"><li>Enter the BFD view.<pre class="screen"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></pre>
</li><li>Configure BFD session authentication information in a BFD for IP scenario.<ul><li>Configure authentication information for a single-hop BFD for IPv4 session.<pre class="screen"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <strong><span>single-hop</span></strong> <strong><span>peer-ip</span></strong> <i><span class="varname">ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-name</span></i> ] <strong><span>authentication-mode</span></strong> <strong><span>met-sha1</span></strong> <strong><span>key-id</span></strong> <i><span class="varname">key-id-value</span></i> <strong><span>cipher</span></strong> <i><span class="varname">cipher-text</span></i> <strong><span>nego-packet</span></strong></pre>
</li></ul>
<ul><li>Configure authentication information for a single-hop BFD for IPv6 session.<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001478199318__en-us_task_0000001176741815_p132077763"><span>The CE6885-LL in low-latency mode does not support IPv6 functions.</span></p>
</div></div>
<pre class="screen"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <strong><span>single-hop</span></strong> <strong><span>peer-ipv6</span></strong> <i><span class="varname">ipv6-address</span></i> [ <strong><span>vpn-instance</span></strong> <span><i><span class="varname">vpn-name</span></i></span> ] <strong><span>authentication-mode</span></strong> <strong><span>met-sha1</span></strong> <strong><span>key-id</span></strong> <i><span class="varname">key-id-value</span></i> <strong><span>cipher</span></strong> <i><span class="varname">cipher-text</span></i> <strong><span>nego-packet</span></strong></pre>
</li></ul>
<ul><li>Configure authentication information for a multi-hop BFD for IPv4 session.<pre class="screen"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <strong><span>multi-hop</span></strong> <strong><span>peer-ip</span></strong> <i><span class="varname">ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <span><i><span class="varname">vpn-name</span></i></span> ] <strong><span>authentication-mode</span></strong> <strong><span>met-sha1</span></strong> <strong><span>key-id</span></strong> <i><span class="varname">key-id-value</span></i> <strong><span>cipher</span></strong> <i><span class="varname">cipher-text</span></i> <strong><span>nego-packet</span></strong></pre>
</li></ul>
<ul><li>Configure authentication information for a multi-hop BFD for IPv6 session.<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001478199318__en-us_task_0000001176741815_p132077763_1"><span>The CE6885-LL in low-latency mode does not support IPv6 functions.</span></p>
</div></div>
<pre class="screen"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <strong><span>multi-hop</span></strong> <strong><span>peer-ipv6</span></strong> <i><span class="varname">ipv6-address</span></i> [ <strong><span>vpn-instance</span></strong> <span><i><span class="varname">vpn-name</span></i></span> ] <strong><span>authentication-mode</span></strong> <strong><span>met-sha1</span></strong> <strong><span>key-id</span></strong> <i><span class="varname">key-id-value</span></i> <strong><span>cipher</span></strong> <i><span class="varname">cipher-text</span></i> <strong><span>nego-packet</span></strong></pre>
</li></ul>
</li></ol>
</li></ul>
</li><li>Commit the configuration.<pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001478199318__1.3.4"></a><a name="1.3.4"></a>
<div class="p"><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+bfd+session+all+verbose"><b><span class="cmdname">display bfd session all verbose</span></b></a> command to check the status of the authenticated BFD session.</li></ul>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bfd_cfg_0001.html">BFD Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bfd_cfg_00407.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bfd_cfg_0036.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>