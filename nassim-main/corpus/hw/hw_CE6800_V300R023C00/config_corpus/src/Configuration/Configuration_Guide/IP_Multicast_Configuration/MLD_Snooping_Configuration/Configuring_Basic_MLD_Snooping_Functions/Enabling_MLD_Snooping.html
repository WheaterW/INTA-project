
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling MLD Snooping">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc6_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc6_cfg_0010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MLD Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MLD Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MLD Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001372550997">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Enabling MLD Snooping</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001372550997"></a><a name="EN-US_TASK_0000001372550997"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling MLD Snooping</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001372550997__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Configuring basic MLD snooping functions is the prerequisite for implementing Layer 2 multicast, and involves enabling MLD snooping, setting the version for MLD messages that can be processed by MLD snooping, and setting the MLD snooping forwarding mode.</p>
<p>After MLD snooping is enabled on a Layer 2 device, it listens to and records the MLD Report messages sent by hosts to a Layer 3 device, and sets up mappings between interfaces and multicast group addresses. The Layer 2 device can then forward multicast data only to the interfaces connected to group members based on the mapping information.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If MLD snooping is configured in an M-LAG scenario and there are many multicast routing entries and multicast outbound interfaces, high CPU usage will occur due to the large number of entries that need to be delivered, adversely affecting the forwarding of protocol messages. To prevent such an issue, you are advised to reduce the CAR value of multicast services to 100 on the active and standby M-LAG devices.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001372550997__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable MLD snooping globally.</span><p><pre class="screen"><a href="cmdqueryname=mld+snooping+enable"><b><span class="cmdname">mld snooping enable</span></b></a></pre>
<p><span>By default, MLD snooping is disabled.</span></p>
</p></li><li><span>Enter the VLAN view.</span><p><pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i></pre>
</p></li><li><span>Enable MLD snooping in the VLAN.</span><p><pre class="screen"><a href="cmdqueryname=mld+snooping+enable"><b><span class="cmdname">mld snooping enable</span></b></a></pre>
<p><span>You can run the <span><a href="cmdqueryname=mld+snooping+enable"><b><span class="cmdname">mld snooping enable</span></b></a><span> [ <strong><span>vlan</span></strong> { <i><span class="varname">vlan-id1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">vlan-id2</span></i> ] } &amp;&lt;1-10&gt; ]</span></span> command in the system view to enable MLD snooping for multiple VLANs in a batch.</span></p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>MLD snooping cannot be used together with VLAN mapping in a VLAN.</li><li>If MLD snooping is configured in a VLAN, PIM-DM cannot be configured on the corresponding VLANIF interface. Similarly, if PIM-DM is configured on a VLANIF interface, MLD snooping cannot be configured in the corresponding VLAN.</li><li>In a scenario where both Layer 2 and Layer 3 multicast services are configured (Layer 2 multicast is configured in a VLAN and Layer 3 multicast is configured on the corresponding VLANIF interface), MLD snooping must be configured in the VLAN and basic PIM-DM functions must be configured on the VLANIF interface to ensure on-demand multicast traffic forwarding.</li></ul>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_l2mc6_cfg_0008.html">Configuring Basic MLD Snooping Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_l2mc6_cfg_0010.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>