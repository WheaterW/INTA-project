
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring IPSG Based on a Dynamic Binding Table in a VLAN">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_IPSG_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_IPSG_cfg_0011.html">
<meta name="DC.Relation" scheme="URI" content="toctopics/en-us_task_0000001522209554.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPSG">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPSG">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSG">
<meta name="featuretype" content="Security">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563889233">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring IPSG Based on a Dynamic Binding Table in a VLAN</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563889233"></a><a name="EN-US_TASK_0000001563889233"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring IPSG Based on a Dynamic Binding Table in a VLAN</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001563889233__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In <a href="#EN-US_TASK_0000001563889233__fig718132012204">Figure 1</a>, PC1 and PC2 access the network through DeviceA. The administrator wants the PCs to use dynamically allocated IP addresses to access the Internet and deny the access to the Internet if statically configured IP addresses are used.</p>
<div class="fignone" id="EN-US_TASK_0000001563889233__fig718132012204"><a name="EN-US_TASK_0000001563889233__fig718132012204"></a><a name="fig718132012204"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring IPSG based on a dynamic binding table in a VLAN</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, and interface3 represent <span>100GE</span><span>1/0/1</span>, <span>100GE</span><span>1/0/2</span>, and <span>100GE</span><span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001512849718.png"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563889233__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create a VLAN and add interfaces to the VLAN. </span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>] <strong>sysname DeviceA</strong>
[*<span class="keyword">DeviceA</span>] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>DeviceA] <strong>vlan batch 10</strong>
[*DeviceA] <strong>interface <span>100GE</span></strong> <strong><span>1/0/1</span></strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port link-type access</strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port default vlan 10</strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[*DeviceA] <strong>interface <span>100GE</span></strong> <strong><span>1/0/2</span></strong>
[*DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>port link-type access</strong>
[*DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>port default vlan 10</strong>
[*DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[*DeviceA] <strong>interface <span>100GE</span></strong> <strong><span>1/0/3</span></strong>
[*DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>port link-type trunk</strong>
[*DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>port trunk allow-pass vlan 10</strong>
[*DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong>
[*<span class="keyword">DeviceA</span>] <strong>commit</strong></pre>
</p></li><li><span>Enable DHCP snooping and configure <span>100GE</span><span>1/0/3</span> for connecting to the DHCP server as a trusted interface.</span><p><pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>DeviceA] <strong>dhcp enable</strong>
[*DeviceA] <strong>dhcp snooping enable</strong>
[*DeviceA] <strong>vlan 10</strong>
[*DeviceA-vlan10] <strong>dhcp snooping enable</strong>
[*DeviceA-vlan10] <strong>dhcp snooping trusted interface </strong><strong><span>100GE</span></strong> <strong><span>1/0/3</span></strong>
[*<span class="keyword">DeviceA</span>] <strong>commit</strong></pre>
</p></li><li><span>Enable IPSG in VLAN 10 of DeviceA.</span><p><pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>DeviceA-vlan10] <strong>ipv4 source check user-bind enable</strong>
[*DeviceA-vlan10] <strong>quit</strong>
[*<span class="keyword">DeviceA</span>] <strong>commit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001563889233__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Display dynamic binding entries.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>DeviceA] <strong>display ip source check user-bind status</strong>
DHCP Bind-table on slot 1: 
-------------------------------------------------------------------------------- 
IP Address                MAC Address         Vlan(O/I)        Interface      
                                              Type             Status                                                                        
-------------------------------------------------------------------------------- 
10.1.1.254               00e0-fc12-3456       10   /-          <span>100GE</span><span>1/0/1</span>    
                                              Dynamic            IPv4/-
10.1.1.253               00e0-fc12-3478       10   /-          <span>100GE</span><span>1/0/2</span>     
                                              Dynamic             IPv4/-
-------------------------------------------------------------------------------- 
Total count:           2                      </pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001563889233__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Configuration Scripts</h4><p>DeviceA</p>
<pre class="screen">#
sysname DeviceA
# 
vlan batch 10
# 
dhcp enable  
# 
dhcp snooping enable
# 
vlan 10
 dhcp snooping enable 
 dhcp snooping trusted interface <span>100GE</span><span>1/0/3</span>
 ipv4 source check user-bind enable
#
interface <span>100GE</span><span>1/0/1</span>   
 port default vlan 10
#
interface <span>100GE</span><span>1/0/2</span>  
 port default vlan 10
#
interface <span>100GE</span><span>1/0/3</span>
 port link-type trunk  
 port trunk allow-pass vlan 10  
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_IPSG_cfg_0010.html">Configuring IPSG Based on a Dynamic Binding Table
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_IPSG_cfg_0011.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="toctopics/en-us_task_0000001522209554.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>