
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Control Parameters for an IGMP Querier">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_igmp_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="vrp_igmp_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="vrp_igmp_cfg_0017.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176663971">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Control Parameters for an IGMP Querier</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176663971"></a><a name="EN-US_TASK_0000001176663971"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Control Parameters for an IGMP Querier</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176663971__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Control parameters of an IGMP querier include the interval for sending IGMP General Query messages, robustness variable of the IGMP querier, maximum response time of IGMP General Query messages, keepalive period of other IGMP queriers, and interval for sending IGMP Group-Specific Query messages. When all these parameters are set to the default values, the IGMP querier can work normally. In addition, to promptly update and maintain group memberships and prevent network congestion caused by excessive packets, you can adjust the parameters of the IGMP querier through commands.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>IGMPv1 supports only two parameters: the interval for sending General Query messages and the robustness variable of the IGMP querier.</p>
<p>Interfaces that connect multicast devices to the same user network segment must have the same IGMP parameter configurations; otherwise, these multicast devices fail to communicate.</p>
<p>In actual configuration, ensure that the interval for sending General Query messages is longer than the maximum response time of IGMP General Query messages and shorter than the keepalive period of other IGMP queriers.</p>
<p>The configuration can be performed in the IGMP or interface view, and takes effect based on the following rules:</p>
<ul><li>The configuration in the IGMP view is globally valid, whereas the configuration in the interface view takes effect only for the specified interface.</li><li>If the same parameters are configured in both the interface and IGMP views, the configuration in the interface view takes effect. If the configuration is not performed on an interface, the interface uses the configuration in the IGMP view.</li><li>If non-default values are configured in the IGMP view, the corresponding default values in the interface view do not take effect.</li></ul>
</div></div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001176663971__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure global IGMP querier parameters.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the IGMP view.</span><p><pre class="screen"><a href="cmdqueryname=igmp"><b><span class="cmdname">igmp</span></b></a> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</pre>
</p></li><li class="substepexpand"><span>Configure control parameters for the IGMP querier as required.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring control parameters for the IGMP querier</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.1.2.3.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="28.7028702870287%" id="mcps1.3.2.1.2.3.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="37.96379637963796%" id="mcps1.3.2.1.2.3.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.1 "><p>Configure an interval at which General Query messages are sent.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=timer+query"><b><span class="cmdname">timer query</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.3 "><p>The default interval at which a querier sends General Query messages is 60 seconds, but the default interval defined in the corresponding protocol is 125 seconds. Currently, some vendor devices use the protocol-defined default interval of 125 seconds. To enable the querier to interwork with such devices, you must change the corresponding configuration to ensure that they send General Query messages at the same interval.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.1 "><p>Configure a robustness variable for the IGMP querier.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=robust-count"><b><span class="cmdname">robust-count</span></b></a> <i><span class="varname">robust-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.3 "><p>When a device starts, it sends <i><span class="varname">robust-value</span></i> General Query messages. The sending interval is 1/4 of the configured interval for sending IGMP General Query messages.</p>
<p>After the device receives a Leave message:</p>
<ul><li><p>In IGMPv2, the device sends <i><span class="varname">robust-value</span></i> Group-Specific Query messages. The sending interval is the configured interval for sending IGMP Group-Specific Query messages.</p>
</li><li><p>In IGMPv3, the device sends <i><span class="varname">robust-value</span></i> Group-Specific Query or Group-and-Source-Specific Query messages. The sending interval is the configured interval for sending IGMP Group-Specific Query or Group-and-Source-Specific Query messages.</p>
</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.1 "><p>Configure the maximum response time of IGMP General Query messages.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=max-response-time"><b><span class="cmdname">max-response-time</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.3 "><p>By default, the maximum response time of IGMP General Query messages is 10 seconds.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.1 "><p>Configure the keepalive period of other IGMP queriers.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=timer+other-querier-present"><b><span class="cmdname">timer other-querier-present</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.3 "><p>By default, the keepalive period of other IGMP queriers is calculated using the following formula: Keepalive period of other IGMP queriers = Robustness variable x Interval for sending General Query messages + 1/2 x Maximum response time of General Query messages. If the robustness variable, interval for sending General Query messages, and maximum response time of General Query messages all use the default values, the keepalive period of other IGMP queriers is 125 seconds.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.1 "><p>Configure an interval for sending IGMP Group-Specific Query messages.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=lastmember-queryinterval"><b><span class="cmdname">lastmember-queryinterval</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.1.2.3.2.1.2.4.1.3 "><p>By default, the interval for sending IGMP Group-Specific Query messages is 1 second. The shorter the interval is, the more sensitive the querier is.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure IGMP querier parameters on an interface.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the view of the interface connected to the user network segment.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Switch the interface working mode from Layer 2 to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
<p> Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li class="substepexpand"><span>Configure control parameters for the IGMP querier as required.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Configuring control parameters for the IGMP querier</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.2.2.4.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="28.7028702870287%" id="mcps1.3.2.2.2.4.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="37.96379637963796%" id="mcps1.3.2.2.2.4.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.1 "><p>Configure an interval at which General Query messages are sent.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=igmp+timer+query"><b><span class="cmdname">igmp timer query</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.3 "><p>The default interval at which a querier sends General Query messages is 60 seconds, but the default interval defined in the corresponding protocol is 125 seconds. Currently, some vendor devices use the protocol-defined default interval of 125 seconds. To enable the querier to interwork with such devices, you must change the corresponding configuration to ensure that they send General Query messages at the same interval.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.1 "><p>Configure a robustness variable for the IGMP querier.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=igmp+robust-count"><b><span class="cmdname">igmp robust-count</span></b></a> <i><span class="varname">robust-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.3 "><p>When a device starts, it sends <i><span class="varname">robust-value</span></i> General Query messages. The sending interval is 1/4 of the configured interval for sending IGMP General Query messages.</p>
<p>After the device receives a Leave message:</p>
<ul><li><p>In IGMPv2, the device sends <i><span class="varname">robust-value</span></i> Group-Specific Query messages. The sending interval is the configured interval for sending IGMP Group-Specific Query messages.</p>
</li><li><p>In IGMPv3, the device sends <i><span class="varname">robust-value</span></i> Group-Specific Query or Group-and-Source-Specific Query messages. The sending interval is the configured interval for sending IGMP Group-Specific Query or Group-and-Source-Specific Query messages.</p>
</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.1 "><p>Configure the maximum response time of IGMP General Query messages.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=igmp+max-response-time"><b><span class="cmdname">igmp max-response-time</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.3 "><p>By default, the maximum response time of IGMP General Query messages is 10 seconds.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.1 "><p>Configure the keepalive period of other IGMP queriers.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=igmp+timer+other-querier-present"><b><span class="cmdname">igmp timer other-querier-present</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.3 "><p>By default, the keepalive period of other IGMP queriers is calculated using the following formula: Keepalive period of other IGMP queriers = Robustness variable x Interval for sending General Query messages + 1/2 x Maximum response time of General Query messages. If the robustness variable, interval for sending General Query messages, and maximum response time of General Query messages all use the default values, the keepalive period of other IGMP queriers is 125 seconds.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.1 "><p>Configure an interval for sending IGMP Group-Specific Query messages.</p>
</td>
<td class="cellrowborder" valign="top" width="28.7028702870287%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=igmp+lastmember-queryinterval"><b><span class="cmdname">igmp lastmember-queryinterval</span></b></a> <i><span class="varname">interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="37.96379637963796%" headers="mcps1.3.2.2.2.4.2.1.2.4.1.3 "><p>By default, the interval for sending IGMP Group-Specific Query messages is 1 second. The shorter the interval is, the more sensitive the querier is.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_igmp_cfg_0001.html">IGMP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_igmp_cfg_0010.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_igmp_cfg_0017.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>