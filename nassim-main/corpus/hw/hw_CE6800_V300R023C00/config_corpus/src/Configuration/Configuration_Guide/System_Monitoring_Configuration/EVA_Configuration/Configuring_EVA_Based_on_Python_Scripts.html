
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Configuring EVA Based on Python Scripts">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../toctopics/en-us_topic_0000001512671434.html">
<meta name="DC.Relation" scheme="URI" content="../spec/EVA_limitation_CE_v6r23c00.html">
<meta name="DC.Relation" scheme="URI" content="../toctopics/en-us_task_0000001564110649.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="EVA">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVA">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="EVA">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000001533947742">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring EVA Based on Python Scripts</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TOPIC_0000001533947742"></a><a name="EN-US_TOPIC_0000001533947742"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring EVA Based on Python Scripts</h1>
<div><div class="section"><h4 class="sectiontitle">Context</h4><p>EVA extends the Python rules of OPS to use customized Python scripts to analyze and judge telemetry data, and perform troubleshooting based on customized strategies.</p>
<p>This function does not have independent configuration or commands. OPS commands are used to install and register related Python scripts.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Before using the EVA function, you need to complete the basic configurations of the OPS function.</p>
</div></div>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li><span>(Optional) Configure gRPC in dial-in mode.</span><p><div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the addkpi or addinnerkpi function is used in Python scripts, this step is mandatory.</p>
</div></div>
<ol type="a"><li>Enter the system view.<pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</li><li>Enter the gRPC view.<pre class="screen"><a href="cmdqueryname=grpc"><b><span class="cmdname">grpc</span></b></a></pre>
</li><li>Enter the server view.<pre class="screen"><a href="cmdqueryname=grpc+server"><b><span class="cmdname">grpc server</span></b></a></pre>
</li><li>Configure the source IPv4 address of the gRPC server.<pre class="screen"><a href="cmdqueryname=source-ip"><b><span class="cmdname">source-ip</span></b></a> <strong>0.0.0.0</strong></pre>
</li><li>Set the port number of the gRPC server to 57400.<pre class="screen"><a href="cmdqueryname=server-port"><b><span class="cmdname">server-port</span></b></a> <strong>57400</strong></pre>
</li><li>Enable the gRPC service.<pre class="screen"><a href="cmdqueryname=server+enable"><b><span class="cmdname">server enable</span></b></a></pre>
</li><li>Commit the configuration.<pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</li></ol>
</p></li><li><span>Upload a script to the device.</span><p><p>For details on how to upload a file to the device, see "File System Management Configuration" in <span>Configuration Guide</span> &gt; Basic Configuration.</p>
</p></li><li><span>Install and register the script.</span><p><p>This operation must be performed using OPS commands. For details, see "Manually Running a Python Script" under "Configuring a Command Assistant" in <span>Configuration Guide</span> &gt; System Management Configuration &gt; OPS Configuration.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If another script is nested in the script, run the <a href="cmdqueryname=ops+install+file"><b><span class="cmdname">ops install file</span></b></a> command to install the nested script before registering the script.</p>
</div></div>
<p>When running the <a href="cmdqueryname=ops+run+python"><b><span class="cmdname">ops run python</span></b></a> <i><span class="varname">script-name </span></i><i><span class="varname">arguments</span></i> command to register a script, set <i><span class="varname">script-name</span></i> to the EVA built-in script <strong>evamain.py</strong> and <i><span class="varname">arguments</span></i> to <strong>install</strong> <em>customized script name</em>. An example is as follows:</p>
<pre class="screen">ops run python evamain.py install cpuMemHigh.py</pre>
</p></li><li><span>(Optional) Uninstall a script.</span><p><p>Run the <a href="cmdqueryname=ops+run+python"><b><span class="cmdname">ops run python</span></b></a> <i><span class="varname">script-name </span></i><i><span class="varname">arguments</span></i> command, with <i><span class="varname">script-name</span></i> set to <strong>evamain.py</strong> (EVA built-in script name) and <i><span class="varname">arguments</span></i> set to <strong>uninstall</strong> <em>customized script name</em>. The built-in scripts <strong>cpuHigh.py</strong> and <strong>memHigh.py</strong> cannot be uninstalled.</p>
</p></li></ol>
</div>
<div class="section"><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+eva+fault-event"><b><span class="cmdname">display eva fault-event</span></b></a> [ <i><span class="varname">filename</span></i> ] { <strong><span>matched</span></strong> | <strong><span>unmatched</span></strong> | <strong><span>all</span></strong> } [ <i><span class="varname">begintime</span></i> <i><span class="varname">endtime</span></i> ] command to check EVA events and matching information about related strategies.</li><li>Run the <a href="cmdqueryname=display+eva+fault"><b><span class="cmdname">display eva fault</span></b></a> [ <strong><span>unrecovered</span></strong> | <strong><span>recovered </span></strong>] [ <i><span class="varname">object</span></i> ] [ <i><span class="varname">beginTime</span></i> <i><span class="varname">endTime</span></i> ] command to check the fault data managed using EVA.</li><li>Run the <a href="cmdqueryname=display+eva+register-events"><b><span class="cmdname">display eva register-events </span></b></a>[ <i><span class="varname">filename</span></i> ] command to check registration information about the event configured in an EVA script.</li><li>Run the <a href="cmdqueryname=display+eva+register-status"><b><span class="cmdname">display eva register-status</span></b></a> [ <em>filename</em> ] command to check the registration status of an EVA script.</li><li>Run the <a href="cmdqueryname=display+eva+register-strategy"><b><span class="cmdname">display eva register-strategy</span></b></a> [ <i><span class="varname">filename</span></i> ] command to check registration information about the strategy configured in an EVA script.</li><li>Run the <a href="cmdqueryname=display+eva+script-item+status"><b><span class="cmdname">display eva script-item status</span></b></a> command to check the running status of an EVA script.</li><li>Run the <a href="cmdqueryname=display+eva+operation-result"><b><span class="cmdname">display eva operation-result</span></b></a> [ <i><span class="varname">filename</span></i> ] command to check the execution result of the action in an EVA script.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../toctopics/en-us_topic_0000001512671434.html">EVA Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../spec/EVA_limitation_CE_v6r23c00.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../toctopics/en-us_task_0000001564110649.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>