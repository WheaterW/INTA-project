
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring ICMPv6 Message Forwarding">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv6_cfg_0019.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv6_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ipv6_cfg_0023.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv6 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv6 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="IPv6 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176741615">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring ICMPv6 Message Forwarding</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176741615"></a><a name="EN-US_TASK_0000001176741615"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring ICMPv6 Message Forwarding</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176741615__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Prerequisites</h4><p>Before configuring ICMPv6 message forwarding, you have completed the following tasks:</p>
<ul><li><p>Connect interfaces and configure physical parameters for the interfaces to ensure that the physical status of the interfaces is up.</p>
</li><li><p>Configure link layer protocol parameters for the interfaces to ensure that the link layer protocol status of the interfaces is up.</p>
</li><li><p>Configure IPv6 addresses for interfaces.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176741615__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Under normal circumstances, a device can send and receive ICMPv6 messages properly. However, when network traffic is heavy, host unreachable or port unreachable events frequently occur, leading to a surge in ICMPv6 messages, which burdens the network and degrades device performance. In addition, attackers usually use ICMPv6 error messages to probe the internal network topology.</p>
<p>To reduce a device's pressure in processing ICMPv6 messages and prevent ICMPv6 message attacks, configure the device to control the sending or receiving of ICMPv6 messages.</p>
<p>The device supports the configuration of ICMPv6 message forwarding based on an ICMPv6 name or specified type and code. <a href="#EN-US_TASK_0000001176741615__table109773913198">Table 1</a> lists the supported ICMPv6 names. For details about the ICMPv6 messages corresponding to the types and codes, see <a href="vrp_ipv6_cfg_0020.html">Understanding ICMPv6</a>.</p>

<div class="tableBorder"><a name="EN-US_TASK_0000001176741615__table109773913198"></a><a name="table109773913198"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0000001176741615__table109773913198" frame="border" border="1" rules="all"><caption><b>Table 1 </b>ICMPv6 names that can be configured in the system view</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="41.67%" id="mcps1.3.2.4.2.5.1.1" liSelected="liSelected"><p>Value of <i><span class="varname">icmpv6-name</span></i></p>
</th>
<th align="left" class="cellrowborder" valign="top" width="8.76%" id="mcps1.3.2.4.2.5.1.2" liSelected="liSelected"><p>Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="8.799999999999999%" id="mcps1.3.2.4.2.5.1.3" liSelected="liSelected"><p>Code</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="40.77%" id="mcps1.3.2.4.2.5.1.4" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>echo</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>128</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Echo Request</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>echo-reply</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>129</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Echo Reply</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>err-header-field</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>4</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Erroneous header field encountered</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>frag-time-exceeded</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>3</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>1</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Fragment reassembly time exceeded</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>hop-limit-exceeded</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>3</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Hop limit exceeded in transit</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>host-admin-prohib</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>1</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>1</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Communication with destination administratively prohibited</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>host-unreachable</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>1</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>3</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Address unreachable</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>multicast-listener-done</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>132</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Multicast Listener Done</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>multicast-listener-query</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>130</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Multicast Listener Query</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>multicast-listener-report</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>131</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Multicast Listener Report</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>multicast-listener-report-v2</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>143</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Version 2 Multicast Listener Report</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>neighbor-advertisement</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>136</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Neighbor Advertisement</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>neighbor-solicitation</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>135</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Neighbor Solicitation</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>network-unreachable</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>1</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>No route to destination</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>packet-too-big</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>2</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Packet Too Big</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>port-unreachable</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>1</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>4</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Port unreachable</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>redirect</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>137</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Redirect</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>router-advertisement</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>134</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Router Advertisement</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>router-solicitation</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>133</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>0</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Router Solicitation</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>unknown-ipv6-opt</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>4</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>2</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Unrecognized IPv6 option encountered</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.67%" headers="mcps1.3.2.4.2.5.1.1 "><p>unknown-next-hdr</p>
</td>
<td class="cellrowborder" valign="top" width="8.76%" headers="mcps1.3.2.4.2.5.1.2 "><p>4</p>
</td>
<td class="cellrowborder" valign="top" width="8.799999999999999%" headers="mcps1.3.2.4.2.5.1.3 "><p>1</p>
</td>
<td class="cellrowborder" valign="top" width="40.77%" headers="mcps1.3.2.4.2.5.1.4 "><p>Unrecognized Next Header type encountered</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001176741615__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure ICMPv6 message forwarding in the system view.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Disable the device from sending or receiving ICMPv6 messages as required.</span><p><ul><li>Disable the device from sending ICMPv6 messages.<pre class="screen"><a href="cmdqueryname=ipv6+icmp+all-famous+send+disable"><b><span class="cmdname">ipv6 icmp</span></b></a> { <i><span class="varname">icmpv6Type</span></i> <i><span class="varname">icmpv6Code</span></i> | <strong><span>all-famous</span></strong> } <strong><span>send</span></strong> <strong><span>disable</span></strong></pre>
</li><li>Disable the device from receiving ICMPv6 messages.<pre class="screen"><a href="cmdqueryname=ipv6+icmp+all-famous+receive+disable"><b><span class="cmdname">ipv6 icmp</span></b></a> { <i><span class="varname">icmpv6Type</span></i> <i><span class="varname">icmpv6Code</span></i> | <strong><span>all-famous</span></strong> } <strong><span>receive</span></strong> <strong><span>disable</span></strong></pre>
</li><li>Disable the device from responding to received ICMPv6 multicast Echo messages.<pre class="screen"><a href="cmdqueryname=ipv6+icmp+multicast-address+echo+receive+disable"><b><span class="cmdname">ipv6 icmp multicast-address echo receive disable</span></b></a></pre>
</li></ul>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176741615__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176741615__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure ICMPv6 message forwarding in the interface view.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Switch the interface working mode to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
</p><p></p></li><li class="substepexpand"><span>Enable IPv6.</span><p><pre class="screen"><a href="cmdqueryname=ipv6+enable"><b><span class="cmdname">ipv6 enable</span></b></a></pre>
</p></li><li class="substepexpand"><span>Disable the device from sending ICMPv6 messages on the interface.</span><p><ul><li>Disable the device from sending ICMPv6 Hop Limit Exceeded messages on the interface.<pre class="screen"><a href="cmdqueryname=ipv6+icmp+hop-limit-exceeded+send+disable"><b><span class="cmdname">ipv6 icmp hop-limit-exceeded send disable</span></b></a></pre>
</li><li>Disable the device from sending ICMPv6 Host Unreachable messages on the interface.<pre class="screen"><a href="cmdqueryname=ipv6+icmp+host-unreachable+send+disable"><b><span class="cmdname">ipv6 icmp host-unreachable send disable</span></b></a></pre>
</li><li>Disable the device from sending ICMPv6 Port Unreachable messages on the interface.<pre class="screen"><a href="cmdqueryname=ipv6+icmp+port-unreachable+send+disable"><b><span class="cmdname">ipv6 icmp port-unreachable send disable</span></b></a></pre>
</li><li>Disable the device from responding to received ICMPv6 multicast Echo messages.<pre class="screen"><a href="cmdqueryname=ipv6+icmp+multicast-address+echo+receive+disable"><b><span class="cmdname">ipv6 icmp multicast-address echo receive disable</span></b></a></pre>
</li></ul>
</p></li><li class="substepexpand"><span>Exit the interface view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176741615__en-us_task_0234857734_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176741615__en-us_task_0234857734_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_ipv6_cfg_0019.html">Configuring ICMPv6
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_ipv6_cfg_0020.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_ipv6_cfg_0023.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>