
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Dynamic ARP">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_0009.html">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_0045.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ARP">
<meta name="featurename" content="Dynamic ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ARP">
<meta name="featurename" content="Dynamic ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ARP">
<meta name="featurename" content="IP Address Conflict Detection">
<meta name="featurename" content="Dynamic ARP">
<meta name="featurename" content="Static ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130783846">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Dynamic ARP</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130783846"></a><a name="EN-US_TASK_0000001130783846"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Dynamic ARP</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130783846__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><div class="p">Before configuring dynamic ARP, you have completed the following tasks:<ul><li><p>Connect interfaces and configure physical parameters for the interfaces to ensure that the physical status of the interfaces is up.</p>
</li><li>Configure link layer protocol parameters for the interfaces to ensure that the link layer protocol status of the interfaces is up.</li></ul>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130783846__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Hosts and devices can learn dynamic ARP entries by default. You can adjust dynamic ARP aging parameters or optimize the ARP entry update policy as required.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the aging time of dynamic ARP entries is too short, for example, 1 minute, the device will be busy updating dynamic ARP entries. This consumes a lot of system resources and affects the processing of other services.</p>
<p>Length of time before the deletion of a dynamic ARP entry = Number of ARP aging probes x Probe interval. Setting a long probe interval is not recommended, because a long interval will delay the deletion of an aged dynamic ARP entry.</p>
</div></div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001130783846__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Adjust aging parameters of dynamic ARP entries in the system view.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Adjust aging parameters of dynamic ARP entries.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Adjusting aging parameters of dynamic ARP entries</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.1.2.2.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.1.2.2.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.1.2.2.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.1 "><p>Set an aging time for dynamic ARP entries.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=arp+timeout"><b><span class="cmdname">arp timeout</span></b></a> <i><span class="varname">expire-time</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.3 "><p>You can run this command to adjust the aging time of dynamic ARP entries, updating the entries promptly.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.1 "><p>Set the number of probes for aging dynamic ARP entries.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=arp+detect+times"><b><span class="cmdname">arp detect times </span></b></a><i><span class="varname">times-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.3 "><p>To improve communication reliability, run this command to adjust the number of probes for aging dynamic ARP entries, updating the entries promptly.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.1 "><p>Set a probe interval for aging dynamic ARP entries.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=arp+detect+interval"><b><span class="cmdname">arp detect interval </span></b></a><i><span class="varname">detect-interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.3 "><p>You can run this command to set a probe interval for aging dynamic ARP entries, improving probe flexibility. Before aging a dynamic ARP entry, the system performs probes. If the system does not receive any response within the probe interval, it deletes the entry.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.1 "><p>Enable the device to unicast ARP aging probe messages through interfaces.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=arp+detect+mode+unicast"><b><span class="cmdname">arp detect mode unicast</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.3 "><p>If the IP address of the peer device remains unchanged but its MAC address changes frequently, it is recommended that you configure the local device to broadcast ARP aging probe messages. If the MAC address of the peer device remains unchanged, network bandwidth resources are insufficient, and the aging time of ARP entries is set to a small value, it is recommended that you configure the local device to unicast ARP aging probe messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.1 "><p>Disable the device from responding to TC messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=arp+topology-change+disable"><b><span class="cmdname">arp topology-change disable</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.1.2.2.2.1.2.4.1.3 "><p>After the device is disabled from responding to TC messages, it does not age or delete ARP entries after receiving TC messages, reducing resource consumptions caused by frequent ARP entry updates and minimizing adverse impacts on user services.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130783846__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130783846__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Adjust aging parameters of dynamic ARP entries in the interface view.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> { <em>interface-name</em> | <em>interface-type</em><em> interface-number</em> }</pre>
</p></li><li class="substepexpand"><span>Switch the interface working mode to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
</p></li><li class="substepexpand"><span>Adjust aging parameters of dynamic ARP entries.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Adjusting aging parameters of dynamic ARP entries</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.2.2.4.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.2.2.4.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.2.2.4.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.1 "><p>Set an aging time for dynamic ARP entries.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=arp+timeout"><b><span class="cmdname">arp timeout</span></b></a> <i><span class="varname">expire-time</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.3 "><p>You can run this command to adjust the aging time of dynamic ARP entries, updating the entries promptly.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.1 "><p>Set the number of probes for aging dynamic ARP entries.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=arp+detect+times"><b><span class="cmdname">arp detect times</span></b></a> <i><span class="varname">times-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.3 "><p>To improve communication reliability, run this command to adjust the number of probes for aging dynamic ARP entries, updating the entries promptly.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.1 "><p>Set a probe interval for aging dynamic ARP entries.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=arp+detect+interval"><b><span class="cmdname">arp detect interval </span></b></a><i><span class="varname">detect-interval</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.3 "><p>You can run this command to set a probe interval for aging dynamic ARP entries, improving probe flexibility. Before aging a dynamic ARP entry, the system performs probes. If the system does not receive any response within the probe interval, it deletes the entry.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.1 "><p>Enable the device to unicast ARP aging probe messages through interfaces.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=arp+detect+mode+unicast"><b><span class="cmdname">arp detect mode unicast</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.2.2.4.2.1.2.4.1.3 "><p>If the IP address of the peer device remains unchanged but its MAC address changes frequently, it is recommended that you configure the local device to broadcast ARP aging probe messages. If the MAC address of the peer device remains unchanged, network bandwidth resources are insufficient, and the aging time of ARP entries is set to a small value, it is recommended that you configure the local device to unicast ARP aging probe messages.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130783846__en-us_task_0234857734_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130783846__en-us_task_0234857734_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0000001130783846__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li><p>Run the <a href="cmdqueryname=display+arp+interface"><b><span class="cmdname">display arp interface</span></b></a> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type interface-number</span></i> } command to check ARP entries on an interface.</p>
</li><li><p>Run the <a href="cmdqueryname=display+arp+vpn-instance"><b><span class="cmdname">display arp vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong><span>dynamic</span></strong> command to check dynamic ARP entries of a VPN instance.</p>
</li><li><p>Run the <a href="cmdqueryname=display+arp"><b><span class="cmdname">display arp</span></b></a> [ <strong><span>network </span></strong><i><span class="varname">network-address</span></i> [ <i><span class="varname">network-mask</span></i> | <i><span class="varname">mask-length</span></i> ] ] <strong><span>dynamic</span></strong> command to check dynamic ARP entries.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_arp_cfg_0008.html">Configuring Dynamic ARP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_arp_cfg_0009.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_arp_cfg_0045.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>