
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring an Aging Time for Fake ARP Entries">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_security_cfg_0033.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_arp_security_cfg_0036.html">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_security_cfg_0038.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ARP Security">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ARP Security">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ARP Security">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000002025066213">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring an Aging Time for Fake ARP Entries</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000002025066213"></a><a name="EN-US_TASK_0000002025066213"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring an Aging Time for Fake ARP Entries</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000002025066213__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If a device fails to find the destination MAC address (corresponding to the destination IP address) of a packet to be forwarded, the device sends an ARP Miss message to the upper-layer software. After receiving the ARP Miss message, the upper-layer software generates a dynamic fake ARP entry and sends it to the device. The upper-layer software then sends an ARP request message to request the MAC address of the destination host. After receiving an ARP reply message, the upper-layer software learns the address information in the message and sends the real ARP entry to the device, which then replaces the fake entry. The device can then forward IP datagrams.</p>
<p>This mechanism can be exploited by unauthorized users sending a large number of ARP messages with forged IP addresses to a device. When trying to forward these messages, the device cannot find the required destination MAC addresses, and so sends a large number of ARP Miss messages to the upper-layer software. This consumes excessive CPU resources and prevents the device from processing normal services.</p>
<p>To alleviate the impact of ARP Miss message processing on the system, you can configure an aging time for fake dynamic ARP entries. Until the aging time elapses, the device does not send ARP Miss messages to the upper-layer software, reducing the frequency of sending ARP Miss messages. After the aging time elapses, the device clears fake dynamic ARP entries. If the device cannot find a matching ARP entry, it sends another ARP Miss message to the upper-layer software.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000002025066213__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure an aging time for fake ARP entries in the interface view.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> { <em>interface-name</em> | <em>interface-type </em><em>interface-number</em> }</pre>
</p></li><li class="substepexpand"><span>Switch the interface working mode to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
<p>Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li class="substepexpand"><span>Set the aging time of fake ARP entries to a fixed value to suppress the frequency of sending ARP Miss messages.</span><p><pre class="screen"><a href="cmdqueryname=arp+fake+timeout"><b><span class="cmdname">arp fake timeout</span></b></a> <i><span class="varname">expire-time</span></i></pre>
<p>By default, the aging time of fake ARP entries is 5s.</p>
</p><p><div class="notice"><span class="noticetitle"><img src="public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>If the aging time of fake ARP entries is set to a value smaller than the default value (5s) using the <a href="cmdqueryname=arp+fake+timeout"><b><span class="cmdname">arp fake timeout</span></b></a> command, the CPU usage may be too high.</p>
</div></div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000002025066213__en-us_task_0234857734_en-us_task_0228023023_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000002025066213__en-us_task_0234857734_en-us_task_0228023023_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_arp_security_cfg_0033.html">Configuring Rate Limiting on ARP Miss Messages
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_arp_security_cfg_0036.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_arp_security_cfg_0038.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>