
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring OSPFv3 to Import External Routes">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0036.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0038.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176742673">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring OSPFv3 to Import External Routes</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176742673"></a><a name="EN-US_TASK_0000001176742673"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring OSPFv3 to Import External Routes</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001176742673__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring OSPFv3 to import external routes, you have completed the following tasks:</p>
<ul><li><p><a href="vrp_ospfv3_cfg_0009.html">Configure basic OSPFv3 functions</a>.</p>
</li><li>To use a route-policy to filter the routes to be imported, create the route-policy first.</li><li>To use an IP prefix list to filter the routes to be imported, create the IP prefix list first.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176742673__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Because OSPFv3 is a link-state routing protocol and cannot filter LSAs to be advertised directly, it can only filter routes when importing them. As such, only the routes that match the filtering conditions can be used to generate LSAs to be advertised.</p>
<p>Perform the following steps on the device that runs OSPFv3.</p>
<div class="notice"><span class="noticetitle"><img src="../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>OSPFv3 and other dynamic routing protocols such as IS-IS and BGP often import routes from each other. If no routing policy is configured or a routing policy is incorrectly configured on a device where IS-IS, OSPFv3, and BGP import routes from each other, a Layer 3 routing loop may occur due to a route selection result change. As a result, services are compromised. For details about the cause of the routing loop, see <a href="vrp_ospfv3_cfg_0163.html">Understanding Routing Loop Detection for Routes Imported to OSPFv3</a>.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176742673__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the OSPFv3 view.</span><p><pre class="screen"><a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
</p></li><li><span>Import external routes.</span><p><pre class="screen"><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> { <strong><span>bgp</span></strong> [ <strong><span>permit-ibgp</span></strong> ] | <strong><span>direct</span></strong> | <strong><span>static</span></strong> | { <strong><span>ripng</span></strong> | <strong><span>ospfv3</span></strong> | <strong><span>isis</span></strong> } [ <i><span class="varname">process-id</span></i> ] } [ <span>{ <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>inherit-cost</span></strong> }</span> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>type</span></strong> <i><span class="varname">type</span></i> | { <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> } ] <sup>*</sup></pre>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> command cannot be used to import external default routes.</p>
</div></div>
</p></li><li><span>(Optional) Set default parameter values for imported routes.</span><p><pre class="screen"><a href="cmdqueryname=default"><b><span class="cmdname">default</span></b></a> { <strong><span>cost</span></strong> <i><span class="varname">costvalue</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tagvalue</span></i> | <strong><span>type</span></strong> <i><span class="varname">typevalue</span></i> } <sup>*</sup></pre>
<p>You can set default values for the parameters (such as the cost, route tag, and route type) of the external routes imported by OSPFv3. The route tag can be used to differentiate AS numbers carried in BGP4+ routes imported by OSPFv3.</p>
</p></li><li><span>(Optional) Set a limit on the number of imported external routes that can be advertised by OSPFv3.</span><p><pre class="screen"><a href="cmdqueryname=import-route+limit"><b><span class="cmdname">import-route limit</span></b></a> <i><span class="varname">limit-number</span></i> [ <strong><span>threshold-alarm</span></strong> { <strong><span>upper-limit</span></strong> <i><span class="varname">upper-limit-value</span></i> | <strong><span>lower-limit</span></strong> <i><span class="varname">lower-limit-value</span></i> }<sup>*</sup> ]</pre>
<p>If OSPFv3 imports a large number of external routes and advertises them to a device with a small routing table capacity, the device may restart unexpectedly. To prevent this problem, configure a limit on the number of imported external routes that can be advertised by OSPFv3. This ensures stable device running.</p>
<p>Ensure that <i><span class="varname">upper-limit-value</span></i> is greater than or equal to <i><span class="varname">lower-limit-value</span></i>.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176742673__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176742673__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001176742673__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+ospfv3"><b><span class="cmdname">display ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>routing</span></strong> command to check information about the OSPFv3 routing table.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospfv3_cfg_0000.html">OSPFv3 Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospfv3_cfg_0036.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ospfv3_cfg_0038.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>