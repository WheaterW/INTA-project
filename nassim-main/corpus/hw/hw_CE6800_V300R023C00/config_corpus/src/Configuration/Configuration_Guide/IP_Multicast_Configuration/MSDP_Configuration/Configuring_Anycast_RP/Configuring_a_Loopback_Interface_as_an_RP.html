
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Loopback Interface as an RP">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_msdp_cfg_0023.html">
<meta name="DC.Relation" scheme="URI" content="vrp_msdp_cfg_0024.html">
<meta name="DC.Relation" scheme="URI" content="vrp_msdp_cfg_0026.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130623924">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring a Loopback Interface as an RP</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130623924"></a><a name="EN-US_TASK_0000001130623924"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Loopback Interface as an RP</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130623924__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring anycast RP, you have completed the following tasks:</p>
<ul><li><p>Configure a unicast routing protocol to ensure that unicast routes are reachable.</p>
</li><li><p>Enable multicast routing on all devices and enable PIM-SM on all involved interfaces.</p>
</li><li><p>Divide the network into multiple PIM-SM domains without configuring RPs.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130623924__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Before configuring anycast RP on multiple devices in a PIM-SM domain, specify a loopback interface on each device and assign the same IP address to each interface. After an RP is configured, advertise the RP interface address through unicast routes to ensure that each device on the network has a reachable route to the RP address.</p>
<div class="p">Configure the loopback interfaces as static RPs or C-RPs to participate in dynamic RP election.<ul><li>To use static RPs, configure a static RP on all devices in a PIM-SM domain.</li><li>To use C-RPs, you are only required to configure a C-RP on the device where anycast RP is to be set up.</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130623924__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the loopback interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <strong><span>loopback</span></strong> <i><span class="varname">interface-number</span></i></pre>
<p>As multiple RPs that use the same IP address exist on a network, configuring loopback interfaces as RPs is recommended.</p>
</p></li><li><span>Configure an IP address for the loopback interface, that is, the RP address.</span><p><pre class="screen"><a href="cmdqueryname=ip+address"><b><span class="cmdname">ip address</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> }</pre>
</p></li><li><span>(Optional) Enable PIM-SM on the RP interface.</span><p><pre class="screen"><a href="cmdqueryname=pim+sm"><b><span class="cmdname">pim sm</span></b></a></pre>
</p><p><p>You need to run this command on the interface before configuring a C-RP. This command is not required if a static RP is configured.</p>
</p></li><li><span>Return to the system view.</span><p><pre class="screen"><strong><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></strong></pre>
</p></li><li><span>Enter the PIM view.</span><p><pre class="screen"><a href="cmdqueryname=pim"><b><span class="cmdname">pim</span></b></a><span> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span><span> </span></pre>
</p></li><li><span>Configure the loopback interface as an RP.</span><ul><li>Configure a static RP.<pre class="screen"><a href="cmdqueryname=static-rp"><b><span class="cmdname">static-rp</span></b></a> <i><span class="varname">rp-address</span></i></pre>
</li><li>Configure a C-RP.<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When configuring a C-RP, you need to configure a C-BSR and BSR boundaries. When configuring MSDP anycast RP, ensure that the C-BSR and C-RP addresses are different.</p>
</div></div>
<pre class="screen"><a href="cmdqueryname=c-rp"><b><span class="cmdname">c-rp</span></b></a> <strong><span>loopback</span></strong> <i><span class="varname">interface-number</span></i></pre>
</li></ul>
</li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_msdp_cfg_0023.html">Configuring Anycast RP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_msdp_cfg_0024.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_msdp_cfg_0026.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>