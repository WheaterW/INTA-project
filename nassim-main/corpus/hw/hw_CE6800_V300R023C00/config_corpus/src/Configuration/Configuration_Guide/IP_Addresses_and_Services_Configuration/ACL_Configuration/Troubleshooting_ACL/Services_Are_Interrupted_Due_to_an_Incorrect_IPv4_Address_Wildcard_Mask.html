
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Services Are Interrupted Due to an Incorrect IPv4 Address Wildcard Mask">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_acl_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="vrp_acl_cfg_0022.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176742477">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Services Are Interrupted Due to an Incorrect IPv4 Address Wildcard Mask</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176742477"></a><a name="EN-US_TASK_0000001176742477"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Services Are Interrupted Due to an Incorrect IPv4 Address Wildcard Mask</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176742477__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Fault Symptom</h4><p>A traffic policy has been configured on a device to redirect packets. To redirect the packets from a certain IPv4 address, the administrator adds a rule to the ACL used by the traffic policy following the ACL configuration guidelines. The new rule uses this source IP address as the matching condition. However, an incorrect IPv4 address wildcard mask is configured in the rule. As a result, BGP packets cannot be sent to the CPU, and most services are interrupted.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176742477__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=display+this"><b><span class="cmdname">display this</span></b></a> command in the ACL view to check the new rule.</span><p><pre class="screen"><a href="cmdqueryname=display+this"><b><span class="cmdname">display this</span></b></a></pre>
<p>The new rule is as follows:</p>
<pre class="screen">rule 100 permit ip source 192.168.1.3 <strong>255.255.255.255</strong></pre>
<p>The IPv4 address wildcard mask is 255.255.255.255, which is not an inverse mask. This rule is equivalent to <strong>rule 100 permit ip</strong> and <strong>rule 100 permit ip source any</strong>, meaning that packets from any IPv4 address are matched.</p>
<p>The traffic policy using this ACL has been applied to a large number of interfaces, so all BGP packets received by these interfaces are redirected to other interfaces, but not sent to the CPU. As a result, a timeout occurs in processing protocol packets and in turn most services are interrupted.</p>
</p></li><li><span>Run the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command in the ACL view to change the IPv4 address wildcard mask in the new rule.</span><p><p>The post-modification rule is as follows:</p>
<pre class="screen">rule 100 permit ip source 192.168.1.3 <strong>0.0.0.0</strong> //This address is the IPv4 address of a single host only when the IPv4 address wildcard mask is 0.0.0.0.</pre>
<p>Services recover, and packets from the source IPv4 address of 192.168.1.3 are redirected correctly.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_acl_cfg_0020.html">Troubleshooting ACL
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_acl_cfg_0022.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>