
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="OSPF Packet Format">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0002.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001130783220">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>OSPF Packet Format</title>
</head>
<body><a name="EN-US_CONCEPT_0000001130783220"></a><a name="EN-US_CONCEPT_0000001130783220"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">OSPF Packet Format</h1>
<div><p>OSPF packets are encapsulated into IP packets, and the OSPF protocol number is 89. OSPF packets are classified into Hello packets, DD packets, LSR packets, LSU packets, and LSAck packets.</p>
<ul><li><p><a href="#EN-US_CONCEPT_0000001130783220__section_02">Hello packet</a></p>
</li><li><p><a href="#EN-US_CONCEPT_0000001130783220__section_03">DD packet</a></p>
</li><li><p><a href="#EN-US_CONCEPT_0000001130783220__section_04">LSR packet</a></p>
</li><li><p><a href="#EN-US_CONCEPT_0000001130783220__section_05">LSU packet</a></p>
</li><li><p><a href="#EN-US_CONCEPT_0000001130783220__section_06">LSAck packet</a></p>
</li></ul>
<div class="section"><h4 class="sectiontitle">Packet Header Format</h4><p>All five types of OSPF packets have the same packet header format, and the header of each type of packet is 24 bytes long. <a href="#EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003601">Figure 1</a> shows an OSPF packet header.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003601"><a name="EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003601"></a><a name="fig_dc_vrp_ospf_feature_003601"></a><span class="figcap"><b>Figure 1 </b>Packet header format</span><br><span><img class="vsd" src="figure/en-us_image_0000001176663057.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>OSPF packet header fields</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="16.89%" id="mcps1.3.3.4.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="14.57%" id="mcps1.3.3.4.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="68.54%" id="mcps1.3.3.4.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.3.4.2.4.1.1 "><p>Version</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.3.4.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.3.4.2.4.1.3 "><p>OSPF version number. For OSPFv2, the value is 2.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.3.4.2.4.1.1 "><p>Type</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.3.4.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.3.4.2.4.1.3 "><p>OSPF packet type. The values are as follows:</p>
<ul><li><p>1: Hello packet</p>
</li><li><p>2: DD packet</p>
</li><li><p>3: LSR packet</p>
</li><li><p>4: LSU packet</p>
</li><li><p>5: LSAck packet</p>
</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.3.4.2.4.1.1 "><p>Packet length</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.3.4.2.4.1.2 "><p>16 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.3.4.2.4.1.3 "><p>Length of the OSPF packet with the packet header, in bytes.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.3.4.2.4.1.1 "><p>Router ID</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.3.4.2.4.1.2 "><p>32 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.3.4.2.4.1.3 "><p>ID of the device that sends the OSPF packet.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.3.4.2.4.1.1 "><p>Area ID</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.3.4.2.4.1.2 "><p>32 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.3.4.2.4.1.3 "><p>ID of the area to which the device that sends the OSPF packet belongs.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.3.4.2.4.1.1 "><p>Checksum</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.3.4.2.4.1.2 "><p>16 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.3.4.2.4.1.3 "><p>Checksum of the OSPF packet, excluding the Authentication field.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.3.4.2.4.1.1 "><p>AuType</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.3.4.2.4.1.2 "><p>16 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.3.4.2.4.1.3 "><p>Authentication type. The values are as follows:</p>
<ul><li><p>0: non-authentication</p>
</li><li><p>1: simple authentication</p>
</li><li><p>2: ciphertext authentication</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>The MD5 algorithm is insecure and poses security risks.</p>
</div></div>
</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.3.4.2.4.1.1 "><p>Authentication</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.3.4.2.4.1.2 "><p>64 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.3.4.2.4.1.3 "><p>This field has different meanings for different AuType values:</p>
<ul><li><p>0: This field is not defined.</p>
</li><li><p>1: This field defines password information.</p>
</li><li><p>2: This field contains the key ID, MD5 authentication data length, and sequence number.</p>
</li></ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>MD5 authentication data is added after an OSPF packet and is not included in the Authentication field.</p>
</div></div>
</div>
<div class="section" id="EN-US_CONCEPT_0000001130783220__section_02"><a name="EN-US_CONCEPT_0000001130783220__section_02"></a><a name="section_02"></a><h4 class="sectiontitle">Hello Packet</h4><p>Hello packets are commonly used packets, which are periodically sent by OSPF interfaces to establish and maintain neighbor relationships. A Hello packet includes information about the DR, backup designated router (BDR), timers, and known neighbors. <a href="#EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003602">Figure 2</a> shows the format of a Hello packet.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003602"><a name="EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003602"></a><a name="fig_dc_vrp_ospf_feature_003602"></a><span class="figcap"><b>Figure 2 </b>Format of a Hello packet</span><br><span><img class="vsd" src="figure/en-us_image_0000001176663055.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Hello packet fields</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="16.89%" id="mcps1.3.4.4.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="14.57%" id="mcps1.3.4.4.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="68.54%" id="mcps1.3.4.4.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.4.4.2.4.1.1 "><p>Network Mask</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.4.4.2.4.1.2 "><p>32 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.4.4.2.4.1.3 "><p>Mask of the network on which the interface that sends the Hello packet resides.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.4.4.2.4.1.1 "><p>HelloInterval</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.4.4.2.4.1.2 "><p>16 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.4.4.2.4.1.3 "><p>Interval at which Hello packets are sent.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.4.4.2.4.1.1 "><p>Options</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.4.4.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.4.4.2.4.1.3 "><p>Optional OSPF capabilities:</p>
<ul><li><p>E: AS-external-LSAs can be flooded.</p>
</li><li><p>N/P: Type 7 LSAs can be processed.</p>
</li><li><p>DC: Demand circuits can be processed.</p>
</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.4.4.2.4.1.1 "><p>Rtr Pri</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.4.4.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.4.4.2.4.1.3 "><p>DR priority. The default value is 1.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>If the DR priority of a device interface is set to 0, the interface cannot participate in a DR or BDR election.</p>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.4.4.2.4.1.1 "><p>RouterDeadInterval</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.4.4.2.4.1.2 "><p>32 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.4.4.2.4.1.3 "><p>Dead interval. If a device does not receive any Hello packets from its neighbors within a specified dead interval, the neighbors are considered to be down.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.4.4.2.4.1.1 "><p>Designated Router</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.4.4.2.4.1.2 "><p>32 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.4.4.2.4.1.3 "><p>Interface address of the DR.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.4.4.2.4.1.1 "><p>Backup Designated Router</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.4.4.2.4.1.2 "><p>32 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.4.4.2.4.1.3 "><p>Interface address of the BDR.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.4.4.2.4.1.1 "><p>Neighbor</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.4.4.2.4.1.2 "><p>32 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.4.4.2.4.1.3 "><p>Router ID of a neighbor.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p><a href="#EN-US_CONCEPT_0000001130783220__tab_dc_vrp_ospf_feature_003603">Table 3</a> lists the address types, interval types, and default intervals used when Hello packets are transmitted on different networks.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001130783220__tab_dc_vrp_ospf_feature_003603"></a><a name="tab_dc_vrp_ospf_feature_003603"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001130783220__tab_dc_vrp_ospf_feature_003603" frame="border" border="1" rules="all"><caption><b>Table 3 </b>Hello packet characteristics for various network types</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="12.78%" id="mcps1.3.4.6.2.5.1.1" liSelected="liSelected"><p>Network Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="15.540000000000001%" id="mcps1.3.4.6.2.5.1.2" liSelected="liSelected"><p>Address Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="35.839999999999996%" id="mcps1.3.4.6.2.5.1.3" liSelected="liSelected"><p>Interval Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="35.839999999999996%" id="mcps1.3.4.6.2.5.1.4" liSelected="liSelected"><p>Default Interval</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="12.78%" headers="mcps1.3.4.6.2.5.1.1 "><p>Broadcast</p>
</td>
<td class="cellrowborder" valign="top" width="15.540000000000001%" headers="mcps1.3.4.6.2.5.1.2 "><p>Multicast address</p>
</td>
<td class="cellrowborder" valign="top" width="35.839999999999996%" headers="mcps1.3.4.6.2.5.1.3 "><p>HelloInterval</p>
</td>
<td class="cellrowborder" valign="top" width="35.839999999999996%" headers="mcps1.3.4.6.2.5.1.4 "><p>10 seconds for HelloInterval</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="12.78%" headers="mcps1.3.4.6.2.5.1.1 "><p>NBMA</p>
</td>
<td class="cellrowborder" valign="top" width="15.540000000000001%" headers="mcps1.3.4.6.2.5.1.2 "><p>Unicast address</p>
</td>
<td class="cellrowborder" valign="top" width="35.839999999999996%" headers="mcps1.3.4.6.2.5.1.3 "><ul><li><p>HelloInterval is used by the DR, BDR, and any device that can become a DR.</p>
</li><li><p>PollInterval is used if neighbors go down, and HelloInterval is used in other cases.</p>
</li></ul>
</td>
<td class="cellrowborder" valign="top" width="35.839999999999996%" headers="mcps1.3.4.6.2.5.1.4 "><p>30 seconds for HelloInterval</p>
<p>120 seconds for PollInterval</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="12.78%" headers="mcps1.3.4.6.2.5.1.1 "><p>P2P</p>
</td>
<td class="cellrowborder" valign="top" width="15.540000000000001%" headers="mcps1.3.4.6.2.5.1.2 "><p>Multicast address</p>
</td>
<td class="cellrowborder" valign="top" width="35.839999999999996%" headers="mcps1.3.4.6.2.5.1.3 "><p>HelloInterval</p>
</td>
<td class="cellrowborder" valign="top" width="35.839999999999996%" headers="mcps1.3.4.6.2.5.1.4 "><p>10 seconds for HelloInterval</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="12.78%" headers="mcps1.3.4.6.2.5.1.1 "><p>P2MP</p>
</td>
<td class="cellrowborder" valign="top" width="15.540000000000001%" headers="mcps1.3.4.6.2.5.1.2 "><p>Multicast address</p>
</td>
<td class="cellrowborder" valign="top" width="35.839999999999996%" headers="mcps1.3.4.6.2.5.1.3 "><p>HelloInterval</p>
</td>
<td class="cellrowborder" valign="top" width="35.839999999999996%" headers="mcps1.3.4.6.2.5.1.4 "><p>30 seconds for HelloInterval</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To establish neighbor relationships between devices on the same network segment, set the same HelloInterval, PollInterval, and RouterDeadInterval values for the devices. PollInterval applies only to NBMA networks.</p>
</div></div>
</div>
<div class="section" id="EN-US_CONCEPT_0000001130783220__section_03"><a name="EN-US_CONCEPT_0000001130783220__section_03"></a><a name="section_03"></a><h4 class="sectiontitle">DD Packet</h4><p>During adjacency initialization between two devices, DD packets are used to describe their LSDBs for synchronization. A DD packet contains the header of each LSA in an LSDB. An LSA header uniquely identifies an LSA, and occupies only a small portion of the LSA, which reduces the amount of traffic transmitted between devices. In addition, a neighbor can use the LSA header to check whether it already has the LSA. When two devices exchange DD packets, one functions as the master, and the other as the slave. The master defines a start sequence number and increments it by one each time it sends a DD packet. After the slave receives a DD packet, it uses the sequence number carried in the DD packet for acknowledgment.</p>
<p><a href="#EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003603">Figure 3</a> shows the format of a DD packet.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003603"><a name="EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003603"></a><a name="fig_dc_vrp_ospf_feature_003603"></a><span class="figcap"><b>Figure 3 </b>Format of a DD packet</span><br><span><img class="vsd" src="figure/en-us_image_0000001176663063.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 4 </b>DD packet fields</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="18.61%" id="mcps1.3.5.5.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="12.85%" id="mcps1.3.5.5.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="68.54%" id="mcps1.3.5.5.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="18.61%" headers="mcps1.3.5.5.2.4.1.1 "><p>Interface MTU</p>
</td>
<td class="cellrowborder" valign="top" width="12.85%" headers="mcps1.3.5.5.2.4.1.2 "><p>16 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.5.5.2.4.1.3 "><p>Maximum size of an IP packet that an interface can send without fragmenting the packet.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="18.61%" headers="mcps1.3.5.5.2.4.1.1 "><p>Options</p>
</td>
<td class="cellrowborder" valign="top" width="12.85%" headers="mcps1.3.5.5.2.4.1.2 "><p>8 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.5.5.2.4.1.3 "><p>Optional OSPF capabilities:</p>
<ul><li><p>E: AS-external-LSAs can be flooded.</p>
</li><li><p>N/P: Type 7 LSAs can be processed.</p>
</li><li><p>DC: Demand circuits can be processed.</p>
</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="18.61%" headers="mcps1.3.5.5.2.4.1.1 "><p>I</p>
</td>
<td class="cellrowborder" valign="top" width="12.85%" headers="mcps1.3.5.5.2.4.1.2 "><p>1 bit</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.5.5.2.4.1.3 "><p>If the DD packet is the first among multiple consecutive DD packets sent by a device, this field is set to 1. Otherwise, this field is set to 0.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="18.61%" headers="mcps1.3.5.5.2.4.1.1 "><p>M (More)</p>
</td>
<td class="cellrowborder" valign="top" width="12.85%" headers="mcps1.3.5.5.2.4.1.2 "><p>1 bit</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.5.5.2.4.1.3 "><p>If the DD packet is the last among multiple consecutive DD packets sent by a device, this field is set to 0. Otherwise, this field is set to 1.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="18.61%" headers="mcps1.3.5.5.2.4.1.1 "><p>M/S (Master/Slave)</p>
</td>
<td class="cellrowborder" valign="top" width="12.85%" headers="mcps1.3.5.5.2.4.1.2 "><p>1 bit</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.5.5.2.4.1.3 "><p>When two OSPF devices exchange DD packets, they negotiate a master/slave relationship. The device with a larger router ID becomes the master. If this field is set to 1, the DD packet is sent by the master.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="18.61%" headers="mcps1.3.5.5.2.4.1.1 "><p>DD sequence number</p>
</td>
<td class="cellrowborder" valign="top" width="12.85%" headers="mcps1.3.5.5.2.4.1.2 "><p>32 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.5.5.2.4.1.3 "><p>Sequence number of the DD packet. The master and slave use sequence numbers to check the reliability and integrity of DD packets.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="18.61%" headers="mcps1.3.5.5.2.4.1.1 "><p>LSA Headers</p>
</td>
<td class="cellrowborder" valign="top" width="12.85%" headers="mcps1.3.5.5.2.4.1.2 "><p>-</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.5.5.2.4.1.3 "><p>LSA header information included in the DD packet.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="EN-US_CONCEPT_0000001130783220__section_04"><a name="EN-US_CONCEPT_0000001130783220__section_04"></a><a name="section_04"></a><h4 class="sectiontitle">LSR Packet</h4><p>After two devices exchange DD packets, they then send LSR packets to request each other's LSAs for update. These LSR packets contain the summaries of the requested LSAs. <a href="#EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003604">Figure 4</a> shows the format of an LSR packet.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003604"><a name="EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003604"></a><a name="fig_dc_vrp_ospf_feature_003604"></a><span class="figcap"><b>Figure 4 </b>Format of an LSR packet</span><br><span><img class="vsd" src="figure/en-us_image_0000001130623514.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 5 </b>LSR packet fields</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="16.89%" id="mcps1.3.6.4.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="14.57%" id="mcps1.3.6.4.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="68.54%" id="mcps1.3.6.4.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.6.4.2.4.1.1 "><p>LS type</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.6.4.2.4.1.2 "><p>32 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.6.4.2.4.1.3 "><p>Type of the LSA.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.6.4.2.4.1.1 "><p>Link State ID</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.6.4.2.4.1.2 "><p>32 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.6.4.2.4.1.3 "><p>This field, together with the LS type field, uniquely identifies each LSA in an OSPF area.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.6.4.2.4.1.1 "><p>Advertising Router</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.6.4.2.4.1.2 "><p>32 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.6.4.2.4.1.3 "><p>Router ID of the device that generates the LSA.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The LS type, Link State ID, and Advertising Router fields can uniquely identify an LSA. If two LSAs have the same LS type, Link State ID, and Advertising Router fields, the two LSAs are considered to be the same, with one being old and the other being new. In this case, a device uses the LS sequence number, LS checksum, and LS age fields to determine which LSA is newer.</p>
</div></div>
</div>
<div class="section" id="EN-US_CONCEPT_0000001130783220__section_05"><a name="EN-US_CONCEPT_0000001130783220__section_05"></a><a name="section_05"></a><h4 class="sectiontitle">LSU Packet</h4><p>A device uses an LSU packet to transmit LSAs requested by its neighbors or to flood its own updated LSAs. The LSU packet contains all LSAs involved. For multicast and broadcast networks, LSU packets are multicast to flood LSAs. To ensure reliable LSA flooding, a device uses an LSAck packet to acknowledge the LSAs contained in an LSU packet that is received from a neighbor. If an LSA fails to be acknowledged, the device retransmits the LSA to the neighbor. <a href="#EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003605">Figure 5</a> shows the format of an LSU packet.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003605"><a name="EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003605"></a><a name="fig_dc_vrp_ospf_feature_003605"></a><span class="figcap"><b>Figure 5 </b>Format of an LSU packet</span><br><span><img class="vsd" src="figure/en-us_image_0000001130623516.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 6 </b>LSU packet field</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="16.89%" id="mcps1.3.7.4.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="14.57%" id="mcps1.3.7.4.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="68.54%" id="mcps1.3.7.4.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.7.4.2.4.1.1 "><p>Number of LSAs</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.7.4.2.4.1.2 "><p>32 bits</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.7.4.2.4.1.3 "><p>Number of LSAs contained in the LSU packet</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="EN-US_CONCEPT_0000001130783220__section_06"><a name="EN-US_CONCEPT_0000001130783220__section_06"></a><a name="section_06"></a><h4 class="sectiontitle">LSAck Packet</h4><p>A device uses an LSAck packet to acknowledge the LSAs contained in a received LSU packet. The LSAs can be acknowledged using LSA headers. LSAck packets can be transmitted in unicast or multicast mode, and the transmission mode is determined by the link type. <a href="#EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003606">Figure 6</a> shows the format of an LSAck packet.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003606"><a name="EN-US_CONCEPT_0000001130783220__fig_dc_vrp_ospf_feature_003606"></a><a name="fig_dc_vrp_ospf_feature_003606"></a><span class="figcap"><b>Figure 6 </b>Format of an LSAck packet</span><br><span><img class="vsd" src="figure/en-us_image_0000001176663065.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 7 </b>LSAck packet field</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="16.89%" id="mcps1.3.8.4.2.4.1.1" liSelected="liSelected"><p>Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="14.57%" id="mcps1.3.8.4.2.4.1.2" liSelected="liSelected"><p>Length</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="68.54%" id="mcps1.3.8.4.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="16.89%" headers="mcps1.3.8.4.2.4.1.1 "><p>LSAs Headers</p>
</td>
<td class="cellrowborder" valign="top" width="14.57%" headers="mcps1.3.8.4.2.4.1.2 "><p>Determined by the header length of the LSA to be acknowledged.</p>
</td>
<td class="cellrowborder" valign="top" width="68.54%" headers="mcps1.3.8.4.2.4.1.3 "><p>This field is used to acknowledge an LSA.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospf_cfg_0002.html">Understanding OSPF
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospf_cfg_0003.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ospf_cfg_0005.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>