
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Telnet Login (RADIUS Authentication)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_login_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="vrp_login_cfg_0012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Telnet">
<meta name="featurename" content="CLI-based Device Login">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Telnet">
<meta name="featurename" content="CLI-based Device Login">
<meta name="featuretype" content="Basic Configuration">
<meta name="featurename" content="Console">
<meta name="featurename" content="Stelnet">
<meta name="featurename" content="Telnet">
<meta name="featurename" content="CLI-based Device Login">
<meta name="featuretype" content="Basic Configuration">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001601628757">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Telnet Login (RADIUS Authentication)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001601628757"></a><a name="EN-US_TASK_0000001601628757"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Telnet Login (RADIUS Authentication)</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001601628757__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>The network administrator requires remote management and maintenance on a device and high network security for protecting the network against unauthorized access. To meet the requirements, you can configure Telnet login based on ACL rules and RADIUS authentication.</p>
<p>In <a href="#EN-US_TASK_0000001601628757__fig6799115116392">Figure 1</a>, DeviceA is the Telnet server, and there are reachable routes between the network administrator's PC and DeviceA and between DeviceA and the RADIUS server. The IP address and port number of the RADIUS server are 10.1.6.6/24 and 1812, respectively.</p>
<div class="fignone" id="EN-US_TASK_0000001601628757__fig6799115116392"><a name="EN-US_TASK_0000001601628757__fig6799115116392"></a><a name="fig6799115116392"></a><span class="figcap"><b>Figure 1 </b>Network diagram for configuring Telnet login based on ACL rules and RADIUS authentication</span><br><span><img src="figure/en-us_image_0000001867991237.png" width="NaN" height="NaN"></span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1 and interface2 represent <span>100GE</span><span>1/0/1</span> and <span>100GE</span><span>1/0/2</span>, respectively.</p>
</div></div>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001601628757__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Set device interface parameters.</li><li>Configure Telnet to enable users to log in to the device through Telnet.</li><li>Configure an ACL rule to ensure that only users matching the ACL rule can log in to the device.</li><li>Configure the RADIUS protocol to implement RADIUS authentication. After the configuration is complete, users must use the user name and password configured on the RADIUS server to log in to the device through Telnet, ensuring login security.</li><li>Configure the RADIUS server.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001601628757__1.3.3"></a><a name="1.3.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Precautions</h4><ul><li>In insecure network environments, you are advised to use a secure password authentication mode, encryption authentication algorithm, and protocol. For details about secure configuration examples, see <a href="vrp_login_cfg_0029.html">Example for Configuring STelnet Login (RADIUS Authentication)</a>.</li><li>Ensure that there are reachable routes between devices before the configuration.</li></ul>
<ul><li>Ensure that the IP address, port number, and shared key of the RADIUS server are configured correctly on the device and are the same as those on the RADIUS server.</li><li>After a domain is configured as the global default administrative domain, the AAA configuration in this domain is used, regardless of whether the user name of the administrator contains the domain name.</li><li>Ensure that a user has been configured on the RADIUS server. In this example, the user <strong>admin123@huawei.com</strong> (<em>user name</em>@<em>domain name</em>) and password <strong>YsHsjx_202206</strong> have been configured on the RADIUS server.</li><li>If the RADIUS server does not support the user names containing domain names, run the <strong>undo radius-server user-name domain-included</strong> command to configure the device not to encapsulate the domain name in the user name when sending packets to the RADIUS server.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001601628757__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <strong>install feature-software WEAKEA</strong> command in the user view to install the weak security algorithm/protocol feature package (WEAKEA).</span></li><li><span>Set interface parameters.</span><p><p># Configure IP addresses for interfaces.</p>
<pre class="screen" id="EN-US_TASK_0000001601628757__screen846816712018">&lt;<span class="keyword" id="EN-US_TASK_0000001601628757__keyword26471340123819">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001601628757__b842153192110">system-view</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001601628757__keyword136861840132114">HUAWEI</span>] <strong id="EN-US_TASK_0000001601628757__b13433316214">sysname DeviceA</strong>
[*<span class="keyword" id="EN-US_TASK_0000001601628757__keyword174313382115">DeviceA</span>] <strong id="EN-US_TASK_0000001601628757__b8431938217">commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword" id="EN-US_TASK_0000001601628757__keyword8438311219">DeviceA</span>] <strong id="EN-US_TASK_0000001601628757__b12431331217">vlan batch 10 20</strong>
[*DeviceA] <strong id="EN-US_TASK_0000001601628757__b3431530219">interface </strong><strong id="EN-US_TASK_0000001601628757__b18438322111"><span>100ge</span> </strong><strong id="EN-US_TASK_0000001601628757__b7431637215"><span>1/0/1</span></strong> 
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001601628757__b3433392116">portswitch</strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001601628757__b204312312213">port link-type trunk</strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001601628757__b1143139214">port trunk allow-pass vlan 10</strong>
[*DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001601628757__b443335219">quit</strong>
[*DeviceA] <strong id="EN-US_TASK_0000001601628757__b1143163132114">interface </strong><strong id="EN-US_TASK_0000001601628757__b204317315212"><span>100ge</span></strong><strong id="EN-US_TASK_0000001601628757__b6446316215"> <span>1/0/2</span></strong> 
[*DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001601628757__b164415332113">portswitch</strong>
[*DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001601628757__b104410332118">port link-type trunk</strong>
[*DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001601628757__b1244031214">port trunk allow-pass vlan 20</strong>
[*DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001601628757__b194483142117">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001601628757__keyword94412317210">DeviceA</span>] <strong id="EN-US_TASK_0000001601628757__b1144538219">interface vlanif 10</strong>
[*<span class="keyword" id="EN-US_TASK_0000001601628757__keyword2443316212">DeviceA-Vlanif10</span>] <strong id="EN-US_TASK_0000001601628757__b944539215">ip address </strong><strong id="EN-US_TASK_0000001601628757__b54417317215">10.1.1.2 255.255.255.0</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword94515312211">*DeviceA-Vlanif10</span>] <strong id="EN-US_TASK_0000001601628757__b54511314219">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001601628757__keyword134517352110">DeviceA</span>]<strong id="EN-US_TASK_0000001601628757__b114503192114"> interface vlanif 20</strong>
[*<span class="keyword" id="EN-US_TASK_0000001601628757__keyword24512317216">DeviceA</span>-Vlanif20]<strong id="EN-US_TASK_0000001601628757__b20454318219"> ip address</strong> <strong id="EN-US_TASK_0000001601628757__b94516342113">10.1.6.2 255.255.255.0</strong>
[*<span class="keyword" id="EN-US_TASK_0000001601628757__keyword1145633211">DeviceA</span>-Vlanif20] <strong id="EN-US_TASK_0000001601628757__b18450322119">quit</strong>
[*<span class="keyword" id="EN-US_TASK_0000001601628757__keyword204517342113">DeviceA</span>] <strong id="EN-US_TASK_0000001601628757__b2453352110">commit</strong></pre>
</p></li><li><span>Set the server port number and enable the Telnet server function.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> undo telnet server disable</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> telnet server port 1025</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>telnet server-source all-interface</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li><li><span>Set parameters for the VTY user interface.</span><p><p># Set the authentication mode and protocol for accessing VTY user interfaces 0 to 4 to AAA and Telnet, respectively.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> user-interface vty 0 4 </strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-vty0-4] <strong>authentication-mode aaa</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-vty0-4] <strong>protocol inbound telnet</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-vty0-4] <strong>user privilege level 3</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-vty0-4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Configure an ACL rule to allow the administrator to log in. The IP address of the administrator's PC is 10.137.217.10.</p>
</p><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> acl 2000</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-acl<span>4</span>-basic-2000]<strong> rule permit source </strong><strong>10.137.217.10 0</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-acl<span>4</span>-basic-2000]<strong> quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> user-interface vty 0 4</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-vty0-4]<strong> acl 2000 inbound</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-vty0-4]<strong> quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001601628757__step972872453175336"><span id="EN-US_TASK_0000001601628757__cmd126829313175336">Configure RADIUS authentication.</span><p><p id="EN-US_TASK_0000001601628757__p9373114672215"># Configure a RADIUS server template for communication between DeviceA and the RADIUS server.</p>
<pre class="screen" id="EN-US_TASK_0000001601628757__screen745313542914">[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword1359912324316"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001601628757__b1758353911180144">radius-server template</strong><strong id="EN-US_TASK_0000001601628757__b13781896219"> template</strong><strong id="EN-US_TASK_0000001601628757__b472762517217">1</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword4508118124011">*</span>DeviceA-radius-template1] <strong id="EN-US_TASK_0000001601628757__b1194759545180144">radius-server authentication 10.1.6.6 1812</strong> <strong id="EN-US_TASK_0000001601628757__b043710362341">weight 80</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword1245516169401">*</span>DeviceA-radius-template1] <strong id="EN-US_TASK_0000001601628757__b346754776180144">radius-server shared-key cipher </strong><strong id="EN-US_TASK_0000001601628757__b185491541125813">YsHsjx_202206</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword8664914174013">*</span>DeviceA-radius-template1] <strong id="EN-US_TASK_0000001601628757__b148166832180144">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword215391212114">*</span>DeviceA] <strong id="EN-US_TASK_0000001601628757__b422917533376">commit</strong></pre>
<p id="EN-US_TASK_0000001601628757__p1357134092918"># Configure an AAA authentication scheme and set the authentication mode to RADIUS.</p>
<pre class="screen" id="EN-US_TASK_0000001601628757__screen1686145582917">[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword1527110242131"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001601628757__b948752124180144">aaa</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword1655150154019">*</span>DeviceA-aaa] <strong id="EN-US_TASK_0000001601628757__b198444264180144">authentication-scheme auth1</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword161321022401">*</span>DeviceA-aaa-authen-auth1] <strong id="EN-US_TASK_0000001601628757__b669094026180144">authentication-mode radius</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword13380144164017">*</span>DeviceA-aaa-authen-auth1] <strong id="EN-US_TASK_0000001601628757__b1720147555180144">quit</strong></pre>
<p id="EN-US_TASK_0000001601628757__p361375972919"># Create a domain, and apply the AAA authentication scheme and RADIUS server template to the domain.</p>
<pre class="screen" id="EN-US_TASK_0000001601628757__screen122312118308">[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword1016496401">*</span>DeviceA-aaa] <strong id="EN-US_TASK_0000001601628757__b357582002180144">domain huawei.com</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword1698075216393">*</span>DeviceA-aaa-domain-huawei.com] <strong id="EN-US_TASK_0000001601628757__b759893035180144">authentication-scheme auth1</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword10188550153919">*</span>DeviceA-aaa-domain-huawei.com] <strong id="EN-US_TASK_0000001601628757__b2116772086180144">radius-server template1</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword12410548163910">*</span>DeviceA-aaa-domain-huawei.com] <strong id="EN-US_TASK_0000001601628757__b236323317180144">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword47887458394">*</span>DeviceA-aaa] <strong id="EN-US_TASK_0000001601628757__b1576618770180144">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword44635616122">*</span>DeviceA] <strong id="EN-US_TASK_0000001601628757__b15646650193914">commit</strong></pre>
<p id="EN-US_TASK_0000001601628757__p092142418305"># Configure the domain <strong id="EN-US_TASK_0000001601628757__b183689167316">huawei.com</strong> as the global default administrative domain so that the administrator does not need to enter the domain name when logging in to the device.</p>
<pre class="screen" id="EN-US_TASK_0000001601628757__screen7292742163016">[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword20118143314394"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001601628757__b807690754180144">domain huawei.com admin</strong>
[<span class="keyword" id="EN-US_TASK_0000001601628757__keyword93641140153916">*</span>DeviceA] <strong id="EN-US_TASK_0000001601628757__b115369584019">commit</strong></pre>
</p></li><li><span>Configure the RADIUS server.</span><p><p>The configuration includes the following steps: add a device, add a user, and set the user privilege level to 3.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001601628757__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Set the IP address of the administrator's PC to 10.137.217.10 and run the following command on the Windows CLI of the administrator's PC to telnet to the device:</p>
<pre class="screen">C:\Documents and Settings\Administrator&gt; <strong>telnet 10.1.1.2 1025</strong></pre>
<div class="p"># In the login window, enter the user name <strong>admin123</strong> and password <strong>YsHsjx_202206</strong> configured on the RADIUS server as prompted, and press <strong>Enter</strong>. If the authentication succeeds, you can successfully log in to DeviceA through Telnet. (The following information is for reference only.)<pre class="screen">Username:<strong>admin123</strong>
Password:
Info: The max number of VTY users is 21, the number of current VTY users online is 1, and total number of terminal users online is 1.
      The current login time is 2020-12-15 14:23:00.
[<span class="keyword">*</span>DeviceA]</pre>
</div>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001601628757__1.3.6"></a><a name="1.3.6"></a><h4 class="sectiontitle">Configuration Scripts</h4><pre class="screen">#
sysname DeviceA
#
acl number 2000
 rule 5 permit source 10.137.217.10 0
#
radius-server template template1                                                        
 radius-server shared-key cipher %+%##!!!!!!!!!"!!!!"!!!!*!!!!SKvr${[Fs.3t@/5k|BENhEu&gt;W(3\<font style="font-size:8pt" Face="Courier New" >~</font>XG!!D;!!!!!2jp5!!!!!!A!!!!3"pK8qv!}9M#(4$jGWvQF/R[CNe/+:W^jk8HUe&amp;W%+%#
 radius-server authentication 10.1.6.6 1812 weight 80                           
#
aaa
 authentication-scheme auth1    
  authentication-mode radius   
 domain huawei.com            
  authentication-scheme auth1     
  radius-server template1      
#  
domain huawei.com admin 
#
vlan batch 10 20
#
interface Vlanif10
 ip address 10.1.1.2 255.255.255.0
#
interface Vlanif20
 ip address 10.1.6.2 255.255.255.0
#
interface <span>100GE</span><span>1/0/1</span>
 port link-type trunk
 port trunk allow-pass vlan 10
#
interface <span>100GE</span><span>1/0/2</span>
 port link-type trunk
 port trunk allow-pass vlan 20
#
telnet server-source all-interface
telnet server port 1025
#
user-interface vty 0 4  
 acl 2000 inbound
 authentication-mode aaa 
 user privilege level 3
 protocol inbound telnet
return </pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_login_cfg_0008.html">Configuring Remote Login Through Telnet
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_login_cfg_0012.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>