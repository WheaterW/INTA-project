
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="PFC">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_dcb_cfg_0004.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_pfc_cfg_0002.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DCB">
<meta name="featuretype" content="DCN and Network Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DCB">
<meta name="featuretype" content="DCN and Network Management">
<meta name="featurename" content="DCB">
<meta name="featuretype" content="DCN and Network Management">
<meta name="featurename" content="DCB">
<meta name="featuretype" content="DCN and Network Management">
<meta name="featuretype" content="DCN and Network Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001563749997">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>PFC</title>
</head>
<body><a name="EN-US_CONCEPT_0000001563749997"></a><a name="EN-US_CONCEPT_0000001563749997"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">PFC</h1>
<div id="conbody1588729792490"><div class="section" id="EN-US_CONCEPT_0000001563749997__section70334519175324"><h4 class="sectiontitle">Context</h4><div class="p" id="EN-US_CONCEPT_0000001563749997__p821076901175324">The Ethernet Pause mechanism ensures lossless transmission. When a downstream device detects that its receive capability is lower than the transmit capability of its upstream device, it sends Pause frames to the upstream device, requesting the upstream device to stop sending traffic for a period of time. The drawback, however, is that it stops all traffic on a link (for the entire interface). This in turn affects link sharing, which is critical to actual services. Link sharing requires:<ul id="EN-US_CONCEPT_0000001563749997__ul972778916175324"><li id="EN-US_CONCEPT_0000001563749997__li2067912742175324">Burst traffic of one type cannot affect forwarding of other types of traffic.</li><li id="EN-US_CONCEPT_0000001563749997__li1482031335175324">A large amount of one type of traffic in a queue cannot occupy buffer resources of other types.</li></ul>
</div>
<p id="EN-US_CONCEPT_0000001563749997__p828521147175324">PFC addresses the conflict between Ethernet Pause and link sharing.</p>
</div>
<div class="section" id="EN-US_CONCEPT_0000001563749997__section481752495175324"><h4 class="sectiontitle">Fundamentals</h4><p id="EN-US_CONCEPT_0000001563749997__p435372532175324">PFC, also called Per Priority Pause or Class Based Flow Control (CBFC), enhances Ethernet Pause. PFC is a kind of priority-based flow control mechanism. As shown in <a href="#EN-US_CONCEPT_0000001563749997__fig_dc_fd_dcb_000401">Figure 1</a>, eight priority queues on the transmit interface of DeviceA correspond to eight receive buffers on the receive interface of DeviceB. When a receive buffer on DeviceB is congested, DeviceB sends a backpressure signal "STOP" to DeviceA, requesting DeviceA to stop sending packets in the corresponding priority queue.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001563749997__fig_dc_fd_dcb_000401"><a name="EN-US_CONCEPT_0000001563749997__fig_dc_fd_dcb_000401"></a><a name="fig_dc_fd_dcb_000401"></a><span class="figcap"><b>Figure 1 </b>PFC working mechanism</span><br><span><img class="vsd" id="EN-US_CONCEPT_0000001563749997__image402836624175324" src="figure/en-us_image_0000001512830130.png"></span></div>
<div class="p" id="EN-US_CONCEPT_0000001563749997__p462468177175324">A backpressure signal is an Ethernet frame, and its format is shown in <a href="#EN-US_CONCEPT_0000001563749997__fig_dc_fd_dcb_000402">Figure 2</a>.<div class="fignone" id="EN-US_CONCEPT_0000001563749997__fig_dc_fd_dcb_000402"><a name="EN-US_CONCEPT_0000001563749997__fig_dc_fd_dcb_000402"></a><a name="fig_dc_fd_dcb_000402"></a><span class="figcap"><b>Figure 2 </b>PFC frame format</span><br><span><img class="vsd" id="EN-US_CONCEPT_0000001563749997__image966174781175324" src="figure/en-us_image_0000001563869657.png"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001563749997__table1401121498175324" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Fields in a PFC frame</caption><thead align="left"><tr id="EN-US_CONCEPT_0000001563749997__row641461885175324"><th align="left" class="cellrowborder" valign="top" width="24%" id="mcps1.3.2.4.3.2.3.1.1" liSelected="liSelected"><p id="EN-US_CONCEPT_0000001563749997__p625472547175324">Field</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="76%" id="mcps1.3.2.4.3.2.3.1.2" liSelected="liSelected"><p id="EN-US_CONCEPT_0000001563749997__p421005224175324">Description</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_CONCEPT_0000001563749997__row402382093175324"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.2.4.3.2.3.1.1 "><p id="EN-US_CONCEPT_0000001563749997__p57502792175324">Destination address</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.2.4.3.2.3.1.2 "><p id="EN-US_CONCEPT_0000001563749997__p293704175175324">Destination MAC address, which has a fixed value of 01-80-c2-00-00-01.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0000001563749997__row1310432824175324"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.2.4.3.2.3.1.1 "><p id="EN-US_CONCEPT_0000001563749997__p415467800175324">Source address</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.2.4.3.2.3.1.2 "><p id="EN-US_CONCEPT_0000001563749997__p601177833175324">Source MAC address.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0000001563749997__row890998190175324"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.2.4.3.2.3.1.1 "><p id="EN-US_CONCEPT_0000001563749997__p923721692175324">Ethertype</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.2.4.3.2.3.1.2 "><p id="EN-US_CONCEPT_0000001563749997__p1924900811175324">Ethernet frame type. The value is 88-08.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0000001563749997__row1942838168175324"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.2.4.3.2.3.1.1 "><p id="EN-US_CONCEPT_0000001563749997__p1942287491175324">Control opcode</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.2.4.3.2.3.1.2 "><p id="EN-US_CONCEPT_0000001563749997__p2105425867175324">Control code. The value is 01-01.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0000001563749997__row1405726889175324"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.2.4.3.2.3.1.1 "><p id="EN-US_CONCEPT_0000001563749997__p1892076351175324">Priority enable vector</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.2.4.3.2.3.1.2 "><p id="EN-US_CONCEPT_0000001563749997__p2137580609175324">Priority-enable vector.</p>
<p id="EN-US_CONCEPT_0000001563749997__p613283266175324">E(<em id="EN-US_CONCEPT_0000001563749997__i1617541402175539">n</em>) corresponds to queue <em id="EN-US_CONCEPT_0000001563749997__i476775222175539">n</em> and determines whether backpressure is enabled for queue <em id="EN-US_CONCEPT_0000001563749997__i502336141175539">n</em>. When E(<em id="EN-US_CONCEPT_0000001563749997__i9740182931018">n</em>) is 1, backpressure is enabled for queue <em id="EN-US_CONCEPT_0000001563749997__i0740152919101">n</em> and the backpressure time is Time(<em id="EN-US_CONCEPT_0000001563749997__i121501036135718">n</em>). When E(<em id="EN-US_CONCEPT_0000001563749997__i18740152910101">n</em>) is 0, backpressure is disabled for queue <em id="EN-US_CONCEPT_0000001563749997__i16741202901017">n</em>.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0000001563749997__row1841131878175324"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.2.4.3.2.3.1.1 "><p id="EN-US_CONCEPT_0000001563749997__p1889219979175324">Time(0) to Time(7)</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.2.4.3.2.3.1.2 "><p id="EN-US_CONCEPT_0000001563749997__p1290135358175324">Backpressure timer.</p>
<p id="EN-US_CONCEPT_0000001563749997__p851717645175324">If Time(<em id="EN-US_CONCEPT_0000001563749997__i15871230135817">n</em>) is 0, backpressure is canceled.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0000001563749997__row517070140175324"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.2.4.3.2.3.1.1 "><p id="EN-US_CONCEPT_0000001563749997__p1572239217175324">Pad(transmit as zero)</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.2.4.3.2.3.1.2 "><p id="EN-US_CONCEPT_0000001563749997__p627646358175324">Reserved.</p>
<p id="EN-US_CONCEPT_0000001563749997__p1433303331175324">The value is 0 during PFC frame transmission.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0000001563749997__row1824221431175324"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.2.4.3.2.3.1.1 "><p id="EN-US_CONCEPT_0000001563749997__p270238429175324">CRC</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.2.4.3.2.3.1.2 "><p id="EN-US_CONCEPT_0000001563749997__p239735805175324">Cyclic Redundancy Check.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p id="EN-US_CONCEPT_0000001563749997__p1710491628175324">When receiving backpressure signals, a device stops only traffic in one or several priority queues, but not on the entire interface. What's more, PFC can pause or restart any queue, without interrupting traffic in other queues. This feature enables traffic of various types to share one link. For priority queues with PFC disabled, the system does not apply the backpressure mechanism. Instead, it directly discards packets in these queues when congestion occurs.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_dcb_cfg_0004.html">PFC
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_pfc_cfg_0002.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>