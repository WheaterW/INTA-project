
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Middle-Point Device">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0043.html">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0050.html">
<meta name="DC.Relation" scheme="URI" content="vrp_snmp_cfg_0045.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563990621">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring the Middle-Point Device</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563990621"></a><a name="EN-US_TASK_0000001563990621"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Middle-Point Device</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001563990621__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring a device to communicate with an NMS using SNMP proxy, complete the following tasks:</p>
<ul><li><p>Configure a routing protocol to ensure that there are reachable routes between the NMS and the middle-point device and between the middle-point device and the managed device.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001563990621__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>This section describes how to use user-defined parameter settings to configure Simple Network Management Protocol (SNMP) proxy on the middle-point device.</p>
<p>In this type of SNMP proxy configuration, you must configure SNMP on the managed device.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563990621__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Set the minimum SNMP password length.</span><p><pre class="screen"><a href="cmdqueryname=snmp-agent+password+min-length"><b><span class="cmdname">snmp-agent password min-length</span></b></a> <i><span class="varname">min-length</span></i></pre>
<p>After this command is run, the length of a configured SNMP password must be longer than or equal to the minimum SNMP password length.</p>
</p></li><li><span>Configure SNMP proxy on the middle-point device.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>SNMP proxy configuration tasks</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="15.340000000000002%" id="mcps1.3.3.3.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="46.01%" id="mcps1.3.3.3.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="38.65%" id="mcps1.3.3.3.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.3.3.3.2.1.2.4.1.1 "><p>Configure a proxy rule for SNMP messages.</p>
</td>
<td class="cellrowborder" valign="top" width="46.01%" headers="mcps1.3.3.3.2.1.2.4.1.2 "><div class="p"><ul><li>If the SNMP message type is GetRequest, SetRequest, or Trap, run the <a href="cmdqueryname=snmp-agent+proxy+rule"><b><span class="cmdname">snmp-agent proxy rule</span></b></a> <i><span class="varname">rule-name</span></i> { <strong><span>read</span></strong> | <strong><span>trap</span></strong> | <strong><span>write</span></strong> } <strong><span>remote-engineid</span></strong> <i><span class="varname">remote-engineid</span></i> <strong><span>target-host</span></strong> <i><span class="varname">target-host-name</span></i> <strong><span>params-in</span></strong> <strong><span>securityname</span></strong> { <i><span class="varname">security-name</span></i> { <strong><span>v1</span></strong> | <strong><span>v2c</span></strong> | <strong><span>v3</span></strong> [ <strong><span>authentication</span></strong> | <strong><span>privacy</span></strong> ] } | <strong><span>cipher</span></strong> <i><span class="varname">cipher-text</span></i> { <strong><span>v1</span></strong> | <strong><span>v2c</span></strong> } } command to configure a proxy rule for SNMP messages.</li><li>If the SNMP message type is Inform, run the <a href="cmdqueryname=snmp-agent+proxy+rule"><b><span class="cmdname">snmp-agent proxy rule</span></b></a> <i><span class="varname">rule-name</span></i> <strong><span>inform</span></strong> <strong><span>remote-engineid</span></strong> <i><span class="varname">remote-engineid</span></i> <strong><span>target-host</span></strong> <i><span class="varname">target-host-name</span></i> <strong><span>params-in</span></strong> <strong><span>securityname</span></strong> { <i><span class="varname">security-name</span></i> { <strong><span>v2c</span></strong> | <strong><span>v3</span></strong> [ <strong><span>authentication</span></strong> | <strong><span>privacy</span></strong> ] } | <strong><span>cipher</span></strong> <i><span class="varname">cipher-text</span></i> <strong><span>v2c</span></strong> } command to configure a proxy rule for SNMP messages.</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="38.65%" headers="mcps1.3.3.3.2.1.2.4.1.3 "><p>In order for an NMS to effectively manage a managed device, configure attributes for the NMS to receive SNMP proxy messages. This allows the middle-point device to filter out SNMP messages that do not match the specified attributes. You must configure correct proxy rules for SNMP messages and ensure that these proxy rules are unique on the middle-point device.</p>
<p>If you specify neither <strong><span>authentication</span></strong> nor <strong><span>privacy</span></strong>, SNMPv3 messages are neither authenticated nor encrypted.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.3.3.3.2.1.2.4.1.1 "><p>Create an SNMP proxy community.</p>
</td>
<td class="cellrowborder" valign="top" width="46.01%" headers="mcps1.3.3.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=snmp-agent+proxy+community"><b><span class="cmdname">snmp-agent proxy community</span></b></a> { <i><span class="varname">community-name</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">cipher-name</span></i> } <strong><span>remote-engineid</span></strong> <i><span class="varname">remote-engineid</span></i> [ <span><strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } </span><span>| <strong><span>alias</span></strong> <i><span class="varname">alias-name</span></i> </span>] <span><sup>*</sup></span></p>
</td>
<td class="cellrowborder" valign="top" width="38.65%" headers="mcps1.3.3.3.2.1.2.4.1.3 "><p>A community is a set of an NMS and SNMP agents and is identified using a community name. The community name acts like a password to regulate access to a managed device. An NMS can access a managed device only if the community name carried in the SNMP request sent by the NMS is the same as that configured on the managed device.</p>
<p>After the weak password dictionary maintenance function is enabled, the value of <i><span class="varname">community-name</span></i> cannot be any password defined in the weak password dictionary. (You can run the <a href="cmdqueryname=display+security+weak-password-dictionary"><b><span class="cmdname">display security weak-password-dictionary</span></b></a> command to view the passwords defined in the weak password dictionary.)</p>
<p>This operation applies only to SNMPv1 and SNMPv2c.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.3.3.3.2.1.2.4.1.1 "><p>Configure attributes of the target hosts for receiving SNMP proxy messages.</p>
</td>
<td class="cellrowborder" valign="top" width="46.01%" headers="mcps1.3.3.3.2.1.2.4.1.2 "><div class="p">Run one of following commands as needed: <ul><li>On an IPv4 network, run the <a href="cmdqueryname=snmp-agent+proxy+target-host"><b><span class="cmdname">snmp-agent proxy target-host</span></b></a> <i><span class="varname">target-host-name</span></i> <strong><span>address</span></strong> <strong><span>udp-domain</span></strong> <i><span class="varname">ip-address</span></i> <strong><span>udp-port</span></strong> <i><span class="varname">port-number</span></i> [ { <strong><span>source</span></strong> { <i><span class="varname">interface-type interface-number</span></i> | <em><i><span class="varname">interface-name</span></i></em> } | { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <span>| <strong><span>public-net</span></strong> </span>} } | { <strong><span>timeout</span></strong> <i><span class="varname">timeout-value</span></i> } ]<sup>*</sup> <strong><span>params</span></strong> <strong><span>securityname</span></strong> { <i><span class="varname">security-name</span></i> { <strong><span>v1</span></strong> | <strong><span>v2c</span></strong> | <strong><span>v3</span></strong> [ <strong><span>authentication</span></strong> | <strong><span>privacy</span></strong> ] } | <strong><span>cipher</span></strong> <i><span class="varname">cipher-text</span></i> { <strong><span>v1</span></strong> | <strong><span>v2c</span></strong> } } command to configure attributes for the target host to receive SNMP proxy messages.</li><li>On an IPv6 network, run the <a href="cmdqueryname=snmp-agent+proxy+target-host"><b><span class="cmdname">snmp-agent proxy target-host</span></b></a> <i><span class="varname">target-host-name</span></i> <strong><span>ipv6 address udp-domain</span></strong> <i><span class="varname">ipv6-address</span></i> <strong><span>udp-port</span></strong> <i><span class="varname">port-number</span></i> [ { <strong><span>source</span></strong> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> } | { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-name</span></i> | <strong><span>public-net</span></strong> } } | { <strong><span>timeout</span></strong> <i><span class="varname">timeout-value</span></i> } ] * <strong><span>params securityname</span></strong> { <i><span class="varname">security-string</span></i> { <strong><span>v1</span></strong> | <strong><span>v2c</span></strong> | <strong><span>v3</span></strong> [ <strong><span>authentication</span></strong> | <strong><span>privacy</span></strong> ] } | <strong><span>cipher</span></strong> <i><span class="varname">security-string-cipher</span></i> { <strong><span>v1</span></strong> | <strong><span>v2c</span></strong> } } command to configure attributes for the target host to receive SNMP proxy messages.</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="38.65%" headers="mcps1.3.3.3.2.1.2.4.1.3 "><p>This operation enables the middle-point device to forward SNMP requests from the NMS to the managed device and forward responses from the managed device to the NMS.</p>
<div class="p"><ul><li>The target host may be either the NMS or the managed device.</li><li>You can run the command multiple times with different parameters set to configure a middle-point device to send SNMP proxy messages to multiple NMSs.</li><li>The default number of the destination UDP port is 162, a well-known port number. If you want to change this number to a non-well-known port number, ensure that the new UDP port number is the same as that on the NMS.</li><li>If you specify neither <strong><span>authentication</span></strong> nor <strong><span>privacy</span></strong>, SNMPv3 messages are neither authenticated nor encrypted.</li><li>If the NMS and managed device need to communicate over a virtual private network (VPN), use the <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> parameter.</li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.3.3.3.2.1.2.4.1.1 "><p>Create an SNMP proxy user.</p>
</td>
<td class="cellrowborder" valign="top" width="46.01%" headers="mcps1.3.3.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=snmp-agent"><b><span class="cmdname">snmp-agent</span></b></a> <strong><span>remote-engineid</span></strong> <i><span class="varname">engine-Id</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="38.65%" headers="mcps1.3.3.3.2.1.2.4.1.3 "><p>SNMPv1 and SNMPv2c use community names for authentication, whereas SNMPv3 uses usernames for authentication.</p>
<p>Unlike SNMPv1 or SNMPv2c, SNMPv3 can implement access control, identity authentication, and data encryption using the local processing model and User-based Security Model (USM). SNMPv3 achieves higher security and confidentiality and is applicable to a wider range than SNMPv1 and SNMPv2c.</p>
<p>This operation applies only to SNMPv3 networking.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.3.3.3.2.1.2.4.1.1 "><p>Configure the priority of SNMP messages.</p>
</td>
<td class="cellrowborder" valign="top" width="46.01%" headers="mcps1.3.3.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=snmp-agent+packet-priority"><b><span class="cmdname">snmp-agent packet-priority</span></b></a> { <strong><span>snmp</span></strong> | <strong><span>trap</span></strong> }<i><span class="varname"> priority-level</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="38.65%" headers="mcps1.3.3.3.2.1.2.4.1.3 "><div class="p">Change the priority of SNMP messages in the following scenarios if necessary:<ul><li>Increase the priority of notifications to ensure that the NMS receives them.</li><li>Increase the priority of GetResponse and SetResponse messages to facilitate management operations performed on the MIB of a managed device by the NMS.</li><li>Reduce the priority of SNMP messages (including GetResponse, SetResponse, Trap, and Inform messages) to prevent frequent message sending when network congestion occurs.</li></ul>
</div>
<p>The default priority of SNMP messages is 6.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Configure the SNMP proxy to receive and respond to requests from the managed device.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Configuring the SNMP proxy to receive and respond to requests from the managed device</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.4.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.4.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.3.4.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.4.2.1.2.4.1.1 "><p>Specify the source interface for the SNMP proxy to receive and respond to requests from the managed device.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=snmp-agent+protocol+source-status"><b><span class="cmdname">snmp-agent proxy protocol source-interface</span></b></a> { <i><span class="varname">protocol-interface-type</span></i> <i><span class="varname">protocol-interface-number</span></i> | <i><span class="varname">protocol-interface-name</span></i> }</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.4.2.1.2.4.1.3 "><p>N/A</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.4.2.1.2.4.1.1 "><p>Enable all IPv4 addresses on the device to be used by the SNMP proxy to receive and respond to requests from the managed device.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=snmp-agent+protocol+source-status"><b><span class="cmdname">snmp-agent proxy protocol source-status all-interface</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.4.2.1.2.4.1.3 "><p>N/A</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.4.2.1.2.4.1.1 "><p>Specify the source IPv6 address for the SNMP proxy to receive and respond to requests from the managed device.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=snmp-agent+protocol+source-status"><b><span class="cmdname">snmp-agent proxy protocol ipv6 source-ip</span></b></a><i><span class="varname"> ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.4.2.1.2.4.1.3 "><p>N/A</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.4.2.1.2.4.1.1 "><p>Enable all IPv6 addresses on the device to be used by the SNMP proxy to receive and respond to requests from the managed device.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=snmp-agent+protocol+source-status"><b><span class="cmdname">snmp-agent proxy protocol source-status ipv6 all-interface</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.3.4.2.1.2.4.1.3 "><p>N/A</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001563990621__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001563990621__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_snmp_cfg_0043.html">Configuring SNMP Proxy Using User-Defined Parameter Settings
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_snmp_cfg_0050.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_snmp_cfg_0045.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>