
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Device to Add Option 82 to a DHCP Message">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../toctopics/en-us_task_0000001563880285.html">
<meta name="DC.Relation" scheme="URI" content="../toctopics/en-us_concept_0000001563880273.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DHCP Snooping">
<meta name="featurename" content="VLAN">
<meta name="featurename" content="VLAN Mapping">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DHCP Snooping">
<meta name="featurename" content="VLAN">
<meta name="featurename" content="VLAN Mapping">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="DHCP Snooping">
<meta name="featurename" content="VLAN">
<meta name="featurename" content="VLAN Mapping">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512681158">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Device to Add Option 82 to a DHCP Message</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512681158"></a><a name="EN-US_TASK_0000001512681158"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Device to Add Option 82 to a DHCP Message</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001512681158__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Option 82 records the location of a DHCP client. A device adds Option 82 to a DHCP request message to send the location of a DHCP client to the DHCP server. This enables the DHCP server to allocate a proper IP address and other configurations to the client based on the content of Option 82, implementing security control on the client.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>DHCP Option 82 must be configured on the user side of a device; otherwise, the DHCP messages sent by the device to the DHCP server do not carry Option 82.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512681158__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable the function of adding Option 82 to DHCP messages in different views.</span><p><ul><li>Configure the device to add Option 82 to DHCP messages in the VLAN view.<pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname9919295335">vlan</span></b></a> <em id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_i1592029173314">vlan-id</em>
<a href="cmdqueryname=dhcp+option82"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname6932910338">dhcp option82</span></b></a> { <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname114851828174817">insert</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname11420134194815">rebuild</span></strong> } <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname85335075213">enable</span></strong>
<a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname13101029193314">quit</span></b></a></pre>
</li><li>Configure the device to add Option 82 to DHCP messages in the interface view.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname1683362611341">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname1899416293539">interface-type interface-number</span></i>
<a href="cmdqueryname=dhcp+option82"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname283422612342">dhcp option82</span></b></a> { <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname4891535195310">insert</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname1714610484530">rebuild</span></strong> } <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname6580135795317">enable</span></strong>
<a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname15127181883511">quit</span></b></a></pre>
</li><li>Configure the device to add Option 82 to DHCP messages in the BD view.<pre class="screen"><a href="cmdqueryname=bridge-domain"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname1404185918466">bridge-domain</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname1761814544465">bd-id</span></i>
<a href="cmdqueryname=dhcp+option82"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname105521572085">dhcp option82</span></b></a> { <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname135521557387">insert</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname355215572817">rebuild</span></strong> } <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname255220571587">enable</span></strong>
<a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname15521857180">quit</span></b></a></pre>
</li></ul>
</p><p><p>By default, Option 82 is not added to DHCP messages.</p>
</p></li><li><span>(Optional) Enable the function of inserting Option 82's suboptions 1, 2, 6, and 9 into DHCPv4 messages. The configuration can be performed in the system, BD, VLAN, or interface view. If the configuration is performed in the system view, it takes effect for all interfaces of the device. If the configuration is performed in the VLAN or BD view, it takes effect for DHCPv4 messages that are received by all interfaces and belong to the VLAN or BD. If the configuration is performed in the interface view, it takes effect only for the specified interface.</span><p><ul id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_ul147854419417"><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li12785141342">Perform the configuration in the system view.<pre class="screen" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_screen5785841440"><a href="cmdqueryname=dhcp+option82+encapsulation"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname1978518411410">dhcp option82 encapsulation</span></b></a> { <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname167856410413">circuit-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname47851341245">remote-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname67851241640">subscriber-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname187851841547">vendor-specific-id</span></strong> } <sup id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_sup77853411420">*</sup></pre>
</li><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li97851641420">Perform the configuration in the BD view.<pre class="screen" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_screen77851941943"><a href="cmdqueryname=bridge-domain"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname15785154440">bridge-domain</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname87851411415">bd-id</span></i>
<a href="cmdqueryname=dhcp+option82+encapsulation"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname27851348415">dhcp option82 encapsulation</span></b></a> { <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname19785648414">circuit-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname77854416419">remote-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname107858416419">subscriber-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname14785124444">vendor-specific-id</span></strong> } <sup id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_sup13785642047">*</sup>
<a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname77851541414">quit</span></b></a></pre>
</li><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li167859415410">Perform the configuration in the VLAN view.<pre class="screen" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_screen137854416410"><a href="cmdqueryname=vlan"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname1878510414416">vlan</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname17851847419">vlan-id</span></i>
<a href="cmdqueryname=dhcp+option82+encapsulation"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname1778534340">dhcp option82 encapsulation</span></b></a> { <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname9785641746">circuit-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname137855411414">remote-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname10786124241">subscriber-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname37865415414">vendor-specific-id</span></strong> } <sup id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_sup878617416413">*</sup>
<a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname378654147">quit</span></b></a></pre>
</li><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li078611410417">Perform the configuration in the interface view.<pre class="screen" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_screen4786045412"><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname1578644549">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname4786114941">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname15786144416">interface-number</span></i>
<a href="cmdqueryname=portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname278617416418">portswitch</span></b></a>
<a href="cmdqueryname=dhcp+option82+encapsulation"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname77868415419">dhcp option82 encapsulation</span></b></a> { <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname078620410417">circuit-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname1278613410415">remote-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname3786441848">subscriber-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname18786144413">vendor-specific-id</span></strong> } <sup id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_sup1786942047">*</sup>
<a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname0786146416">quit</span></b></a></pre>
<p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p137861241641"> Determine whether to run the <a href="cmdqueryname=portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname137861641249">portswitch</span></b></a> command to switch the interface working mode to Layer 2 based on the current interface working mode.</p>
</li></ul>
<p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p107861414410">By default, suboption 1 circuit-id (CID), suboption 2 remote-id (RID), suboption 6 subscriber-id (SID), and suboption 9 vendor-specific information are inserted into Option 82.</p>
</p></li><li><span>(Optional) Configure user-defined formats for Option 82's suboptions 1 and 2.</span><p><p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p18982075170">You can perform the configuration in the system or interface view. If the configuration is performed in the system view, it takes effect for all interfaces of the device. If the configuration is performed in the interface view, it takes effect only for the specified interface.</p>
<div class="notice" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_note5317115111913"><span class="noticetitle"><img src="../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><ul id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_ul94220515175"><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li442185191710"><p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p8431451151716"><a name="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li442185191710"></a><a name="en-us_task_0000001512686998_li442185191710"></a>All Option 82 information configured in the system view or in the same interface view shares a length of 1 to 255 bytes. If their total length exceeds 255 bytes, some Option 82 information is lost.</p>
</li><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li843751181715"><p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p15431519178"><a name="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li843751181715"></a><a name="en-us_task_0000001512686998_li843751181715"></a>There is no limit on the amount of Option 82 information configured on a device. However, configuring a large amount of Option 82 information consumes memory resources and prolongs the device's processing time. To ensure device performance, you are advised to configure Option 82 information based on service requirements and device memory size.</p>
</li></ul>
</div></div>
<ul id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_ul28997184112"><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li17894764115">Configure the format of Option 82 in the system view.<pre class="screen" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_screen6988193919412"><a href="cmdqueryname=dhcp+option82"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname15271048164216">dhcp option82</span></b></a> [ <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname62714816425">vlan</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname132714489421">vlanid</span></i> ] [ <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname1427144810427">ce-vlan</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname1327184810420">ce-vlanid</span></i> ] [ <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname18274487428">circuit-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname142784819420">remote-id</span></strong> ] <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname927848134212">format</span></strong> { <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname132754818423">default</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname127124814421">common</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname182711482427">extend</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname827134854215">user-defined</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname627194817427">text</span></i> }</pre>
</li><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li45933486411">Configure the format of Option 82 in the interface view.<pre class="screen" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_screen83511158184114"><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname57171357114220">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname871715784213">interface-type interface-number</span></i>
<a href="cmdqueryname=portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname77172579428">portswitch</span></b></a>
<a href="cmdqueryname=dhcp+option82"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname14569358104516">dhcp option82</span></b></a> [ <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname1156916581458">vlan</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname1056945811454">vlanid</span></i> ] [ <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname95691858174517">ce-vlan</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname256910581451">ce-vlanid</span></i> ] [ <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname115692581450">circuit-id</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname1056917589459">remote-id</span></strong> ] <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname175694586456">format</span></strong> { <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname115691758134516">default</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname75693580452">common</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname8569165817457">extend</span></strong> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname14569358174519">user-defined</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname205694589455">text</span></i> }</pre>
<p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p47588512122"> Determine whether to run the <a href="cmdqueryname=portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname4758351101217">portswitch</span></b></a> command to switch the interface working mode to Layer 2 based on the current interface working mode.</p>
</li></ul>
<p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p1076918471167">By default, the format of Option 82 in DHCPv4 messages is <strong id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_b195567861610">default</strong>.</p>
</p></li><li><span>(Optional) Configure a user-defined format for Option 82's suboption 6.</span><p><ul id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_ul09291557153512"><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li992935713358">Configure a user-defined format for Option 82's suboption 6 in the system view.<pre class="screen" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_screen135520523710"><a href="cmdqueryname=dhcp+option82+subscriber-id+format"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname25524511379">dhcp option82 subscriber-id format</span></b></a> { <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname35521851378">ascii</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname2055217503718">ascii-text</span></i> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname955219523718">hex</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname115525533711">hex-text</span></i> }</pre>
</li><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li11930175703519">Configure a user-defined format for Option 82's suboption 6 in the interface view.<pre class="screen" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_screen893055719359"><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname69301757153511">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname4930205713512">interface-type interface-number</span></i>
<a href="cmdqueryname=portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname5930157153512">portswitch</span></b></a>
<a href="cmdqueryname=dhcp+option82+subscriber-id+format"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname4800191319375">dhcp option82 subscriber-id format</span></b></a> { <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname10800613183716">ascii</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname13800141312379">ascii-text</span></i> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname14800213133715">hex</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname8800181313717">hex-text</span></i> }</pre>
<p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p324010586127"> Determine whether to run the <a href="cmdqueryname=portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname19241125811120">portswitch</span></b></a> command to switch the interface working mode to Layer 2 based on the current interface working mode.</p>
</li></ul>
</p><p><p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p1166084340180151">By default, no user-defined format is configured for Option 82's suboption 6 in DHCPv4 messages.</p>
</p></li><li><span>(Optional) Configure the DHCPv4 relay agent to insert suboption 9 into Option 82.</span><p><p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p1213900899180151">Option 82's suboption 9 can use either the old or new format. Suboption 9 in the old format carries the hwid or the ID of another company, whereas suboption 9 in the new format does not. If suboption 9 is configured in both the system and interface views, the configuration in the interface view preferentially takes effect. Before configuring the DHCPv4 relay agent to insert suboption 9 into Option 82, you must run the <a href="cmdqueryname=dhcp+relay+information+enable"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname101841885208">dhcp relay information enable</span></b></a> command to enable the relay agent to support Option 82. Otherwise, the function does not take effect.</p>
<ul id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_ul600138018180151"><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li1005760413180151">Configure a user-defined format for Option 82's suboption 9 in the old format.<ul id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_ul19308145917615"><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li1330965914613">Perform the configuration in the system view.<pre class="screen" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_screen250064111167"><a href="cmdqueryname=dhcp+option82+vendor-specific+format"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname19196945131619">dhcp option82 vendor-specific format</span></b></a> <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname019610450168">vendor-sub-option</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname2019618452167">sub-option-num</span></i> { <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname919654521615">ascii</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname181961545101618">ascii-text</span></i> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname1819674511162">hex</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname919624591620">hex-text</span></i> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname181964453169">ip-address</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname7196184551616">ip-address</span></i> &amp;&lt;1-8&gt; | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname181961745121617">sysname</span></strong> }</pre>
</li><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li2027611619717">Perform the configuration in the interface view.<pre class="screen" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_screen1182012141717"><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname254915599137">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname185491559191313">interface-type interface-number</span></i>
<a href="cmdqueryname=undo+portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname15549145921319">undo portswitch</span></b></a>
<a href="cmdqueryname=dhcp+relay+information+enable"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname10256146172218">dhcp relay information enable</span></b></a>
<a href="cmdqueryname=dhcp+option82+vendor-specific+format"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname69121261087">dhcp option82 vendor-specific format</span></b></a> <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname1115016311981">vendor-sub-option</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname852019395812">sub-option-num</span></i> <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname1936516457812">source-ip-address</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname181723541817">ip-address</span></i></pre>
<p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p13763105114127"> Determine whether to run the <a href="cmdqueryname=undo+portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname37637518126">undo portswitch</span></b></a> command to switch the interface working mode to Layer 3 based on the current interface working mode.</p>
</li></ul>
</li><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li1606386403180151"><div class="p" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p371865137180151"><a name="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li1606386403180151"></a><a name="en-us_task_0000001512686998_li1606386403180151"></a>Configure the DHCPv4 relay agent to insert suboption 9 in the new format into Option 82.<ul id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_ul20486171615567"><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li204042198562">Perform the configuration in the VLAN view.<pre class="screen" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_screen94041319195619"><a href="cmdqueryname=vlan"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname114041119185614">vlan</span></b></a> <em id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_i1340411190569">vlan-id</em>
<a href="cmdqueryname=dhcp+option82+append+vendor-specific"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname117978181612">dhcp option82 append vendor-specific</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname140461912565">quit</span></b></a></pre>
</li><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li15405219115617">Perform the configuration in the interface view.<pre class="screen" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_screen1840571975611"><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname5405121911566">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname2405419105616">interface-type interface-number</span></i>
<a href="cmdqueryname=undo+portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname1375421918507">undo portswitch</span></b></a>
<a href="cmdqueryname=dhcp+relay+information+enable"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname1827215141647">dhcp relay information enable</span></b></a>
<a href="cmdqueryname=dhcp+option82+append+vendor-specific"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname1085962713619">dhcp option82 append vendor-specific</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname154057194569">quit</span></b></a></pre>
<p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p42951325205317"> Determine whether to run the <a href="cmdqueryname=undo+portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname729592555319">undo portswitch</span></b></a> command to switch the interface working mode to Layer 3 based on the current interface working mode.</p>
</li></ul>
</div>
</li></ul>
<p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p2071767357180151">By default, suboption 9 is not inserted into Option 82 of DHCPv4 messages.</p>
<div class="note" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_note1475307228180151"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_ul642392734180151"><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li750763173180151">If both the <a href="cmdqueryname=dhcp+option82+append+vendor-specific"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname420402708180151">dhcp option82 append vendor-specific</span></b></a> and <a href="cmdqueryname=dhcp+option82+vendor-specific+format"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname1352924303180151">dhcp option82 vendor-specific format</span></b></a> commands are run, the <a href="cmdqueryname=dhcp+option82+append+vendor-specific"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname6159746142416">dhcp option82 append vendor-specific</span></b></a> command takes effect.</li><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li114655604180151"><div class="p" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p723905069180151"><a name="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li114655604180151"></a><a name="en-us_task_0000001512686998_li114655604180151"></a>Suboption 9 can be inserted into Option 82 only when the format of suboption 9 configured on a device is the same as that in a received DHCPv4 message. If the formats are different:<ul id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_ul1292540644180151"><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li852344117180151">When the <a href="cmdqueryname=dhcp+option82+vendor-specific+format"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname1904861160180151">dhcp option82 vendor-specific format</span></b></a> command is run, suboption 9 in the new format cannot be inserted into Option 82.</li><li id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li708357446180151"><p id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_p1861739601180151"><a name="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_li708357446180151"></a><a name="en-us_task_0000001512686998_li708357446180151"></a>When the <a href="cmdqueryname=dhcp+option82+append+vendor-specific"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname459735126180151">dhcp option82 append vendor-specific</span></b></a> command is run, whether suboption 9 in the old format can be inserted into Option 82 depends on the mode in which Option 82 is added (configured using the <a href="cmdqueryname=dhcp+option82+enable"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname12034922180151">dhcp option82 enable</span></b></a> command). In Insert mode, suboption 9 is not inserted into Option 82. In Rebuild mode, suboption 9 in the old format is rebuilt and then inserted into Option 82.</p>
</li></ul>
</div>
</li></ul>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512681158__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001512681158__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li><p>Run the <a href="cmdqueryname=display+dhcp+option82+configuration"><b><span class="cmdname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdname63590815313">display dhcp option82 configuration</span></b></a> [ <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname14551172335319">vlan</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname206542028165319">vlan-id</span></i> | <strong><span id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_cmdparmname9471165995310">interface</span></strong> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname1624213103540">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0000001512681158__en-us_task_0000001512686998_varname158031917155414">interface-number</span></i> ] command to check the Option 82 configuration.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../toctopics/en-us_task_0000001563880285.html">Configuring a Device to Add Option 82 to a DHCP Message
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../toctopics/en-us_concept_0000001563880273.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>