
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BFD for BGP4+">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp6_cfg_0060.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp6_cfg_0062.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP4+">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130782200">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring BFD for BGP4+</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130782200"></a><a name="EN-US_TASK_0000001130782200"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BFD for BGP4+</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130782200__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring BFD for BGP4+, you have completed the following tasks:</p>
<ul><li><p>Configure link layer protocol parameters and IPv6 addresses for interfaces to ensure that the link layer protocol on the interfaces is up.</p>
</li><li><a href="vrp_bgp6_cfg_0006.html">Configure basic BGP4+ functions</a>.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130782200__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>BFD provides fast detection of forwarding faults to ensure QoS of voice, video, and other VOD services on a network. It also enables service providers to provide users with required VoIP and other real-time services with high availability and scalability.</p>
<p>BGP4+ periodically sends Keepalive messages to a peer to detect its status. This process takes more than one second. When traffic is transmitted at gigabit rates, fault detection adds up and eventually results in packet loss, meaning that the system is unable to satisfy the high reliability requirements of the carrier-class network.</p>
<p>To address this problem, configure BFD for BGP4+ to enable quick fault detection on links between BGP4+ peers, accelerating network convergence.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130782200__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable BFD globally on the local node.</span><p><pre class="screen"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></pre>
</p></li><li><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>Enter the BGP view.</span><p><pre class="screen"><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></pre>
</p></li><li><span>Configure BFD for a peer or peer group, and use default BFD parameters to establish a BFD session.</span><p><pre class="screen"><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv6-address</span></i> } <a href="cmdqueryname=bfd+enable+single-hop-prefer+compatible"><b><span class="cmdname">bfd enable</span></b></a> [ [ <strong><span>single-hop-prefer</span></strong> ]<span> [ <strong><span>compatible</span></strong> ]</span> | [ <strong><span>per-link</span></strong> ] <strong><span>one-arm-echo</span></strong> ]</pre>
</p></li><li><span>(Optional) Specify parameters for establishing a BFD session.</span><p><pre class="screen"><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv6-address</span></i> } <a href="cmdqueryname=bfd+min-tx-interval+min-rx-interval+detect-multiplier"><b><span class="cmdname">bfd</span></b></a> { <strong><span>min-tx-interval</span></strong> <i><span class="varname">min-tx-interval</span></i> | <strong><span>min-rx-interval</span></strong> <i><span class="varname">min-rx-interval</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">multiplier</span></i> } <sup>*</sup></pre>
<p>After BFD is enabled for a peer group, BFD sessions will be created on the peers that belong to this peer group and that are not configured with the <a href="cmdqueryname=peer+bfd+block"><b><span class="cmdname">peer bfd block</span></b></a> command.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>A BFD session can be established only when the corresponding BGP4+ session is in the Established state.</li><li>The BFD configuration of a peer takes precedence over that of the peer group to which the peer belongs. If BFD is not configured on a peer but the peer group to which the peer belongs has BFD enabled, the peer inherits the BFD configurations from the peer group.</li></ul>
</div></div>
</p></li><li><span>(Optional) Prevent a peer from inheriting the BFD function from a peer group.</span><p><pre class="screen"><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <a href="cmdqueryname=bfd+block"><b><span class="cmdname">bfd block</span></b></a></pre>
<p>If BFD is enabled on a peer group, all its peers will inherit the BFD configurations of the peer group and create a BFD session. If you do not want a peer to inherit the BFD configurations of its peer group, you can run this command.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <a href="cmdqueryname=bfd+block"><b><span class="cmdname">bfd block</span></b></a> and <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <a href="cmdqueryname=bfd+enable"><b><span class="cmdname">bfd enable</span></b></a> commands are mutually exclusive. After the <a href="cmdqueryname=peer+bfd+block"><b><span class="cmdname">peer bfd block</span></b></a> command is run, the BFD session is automatically deleted.</p>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130782200__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130782200__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001130782200__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring the function, verify the configuration.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+bgp+ipv6+bfd+session"><b><span class="cmdname">display bgp ipv6 bfd session</span></b></a> { <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> | <strong><span>all</span></strong> } command to check information about BFD sessions established by BGP4+.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp"><b><span class="cmdname">display bgp</span></b></a> <strong><span>ipv6 peer</span></strong> [ <i><span class="varname">ipv6-address</span></i> ] [ <strong><span>verbose</span></strong> ] command to check BGP4+ peer information.</p>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp6_cfg_0060.html">Configuring BFD for BGP4+
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp6_cfg_0062.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>