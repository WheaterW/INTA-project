
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring OpenFlow">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_cfg_openflow_0001.html">
<meta name="DC.Relation" scheme="URI" content="spec/OpenFlow_limitation_CE_v6r23c00.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_dc_cfg_openflow_0005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OpenFlow">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OpenFlow">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513029774">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring OpenFlow</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001513029774"></a><a name="EN-US_TASK_0000001513029774"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring OpenFlow</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001513029774__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Prerequisites</h4><div class="p">Before configuring the OpenFlow agent on a device, complete the following tasks:<ul><li>Configure OpenFlow connection parameters on the controller.</li><li>Ensure reachable routes between the device and controller.</li><li><p>(Optional) <a href="vrp_keychain_cfg_0001.html">Configure a keychain.</a></p>
<p>To enhance network security, configure keychain authentication for the OpenFlow connection. If keychain authentication is configured on the device or controller, make sure to configure it on the other end; otherwise, the OpenFlow connection cannot be set up.</p>
</li><li><p>(Optional) <a href="galaxy_ssl_cfg_0001.html">Configure the SSL policy.</a></p>
<p>To improve network security, configure an SSL policy for the OpenFlow connection. The device functions as an SSL client. If an SSL policy is configured on the device or controller, make sure to configure it on the other end; otherwise, the OpenFlow connection cannot be set up.</p>
<div class="notice"><span class="noticetitle"><img src="public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>If keychain authentication or an SSL policy is not configured, security risks exist. To ensure network security, you are advised to configure keychain authentication or an SSL policy.</p>
</div></div>
</li></ul>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001513029774__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Devices can set up OpenFlow connections with Huawei's iMaster NCE-Fabric, but not third-party controllers.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001513029774__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Configure an OpenFlow-compatible device, and enter the SDN agent view.</span><p><pre class="screen"><a href="cmdqueryname=sdn+agent"><b><span class="cmdname">sdn agent</span></b></a></pre>
</p><p><p>By default, a device is not OpenFlow-compatible.</p>
</p></li><li><span>Configure the global IP address used to establish an OpenFlow connection with the controller.</span><p><div class="p">On an IPv4 network:<pre class="screen"><a href="cmdqueryname=source-ip"><b><span class="cmdname">source-ip</span></b></a> <i><span class="varname">ip-address</span></i></pre>
</div>
<p>After the global IPv4 address is configured, the device uses it to establish an OpenFlow connection with a controller by default.</p>
<p>The device supports only one global IP address used to establish an OpenFlow connection with the controller. To reconfigure this IPv4 address, run the <a href="cmdqueryname=undo+source-ip"><b><span class="cmdname">undo source-ip</span></b></a> [ <i><span class="varname">ip-address</span></i> ] command to delete the existing one first.</p>
<p>By default, the global IPv4 address used to establish an OpenFlow connection with a controller is not configured. The IP address of a loopback interface is recommended.</p>
</p><p><p>On an IPv6 network:</p>
<pre class="screen"><a href="cmdqueryname=source-ipv6"><b><span class="cmdname">source-ipv6</span></b></a> <i><span class="varname">ipv6-address</span></i></pre>
<p>After the global IPv6 address is configured, the device uses it to establish an OpenFlow connection with a controller by default.</p>
<p>The device supports only one global IPv6 address used to establish an OpenFlow connection with a controller. To reconfigure this IPv6 address, run the <a href="cmdqueryname=undo+source-ipv6"><b><span class="cmdname">undo source-ipv6</span></b></a> [ <i><span class="varname">ipv6-address</span></i> ] command to delete the existing one first.</p>
<p>By default, the global IPv6 address used to establish an OpenFlow connection with a controller is not configured. The IP address of a loopback interface is recommended.</p>
</p></li><li><span>(Optional) Configure the description of an OpenFlow-compatible device.</span><p><pre class="screen"><a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">text</span></i></pre>
</p><p><p>There may be many OpenFlow-compatible devices on an SDN network. To facilitate memorization and management, you can run the <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> command on different devices to identify device features, such as the device location and access service.</p>
<p>By default, no description is configured for an OpenFlow-compatible device.</p>
</p></li><li><span>Configure an IP address for the controller that establishes an OpenFlow connection with the device, and enter the Controller-IP view.</span><p><p>On an IPv4 network:</p>
</p><p><pre class="screen"><a href="cmdqueryname=controller-ip"><b><span class="cmdname">controller-ip</span></b></a> <span>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] </span><i><span class="varname">ipv4-address</span></i></pre>
</p><p><p>The device supports a maximum of <span>16</span> controller IPv4 addresses. If you need to reconfigure the IPv4 address of the controller connected to the device, run the <a href="cmdqueryname=undo+controller-ip"><b><span class="cmdname">undo controller-ip</span></b></a> <span>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] </span><i><span class="varname">ip-address</span></i> command to delete the original IPv4 address of the controller first. </p>
</p><p><p>On an IPv6 network:</p>
<pre class="screen"><a href="cmdqueryname=controller-ipv6"><b><span class="cmdname">controller-ipv6</span></b></a> <span>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] </span><i><span class="varname">ipv6-address</span></i></pre>
<p>A maximum of <span>16</span> controller IPv4 and IPv6 addresses can be configured on a device. To reconfigure a controller IPv6 address, run the <a href="cmdqueryname=undo+controller-ipv6"><b><span class="cmdname">undo controller-ipv6</span></b></a> <span>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] </span><i><span class="varname">ipv6-address</span></i> command to delete the existing one first.</p>
<p>By default, the controller IPv6 address used to establish an OpenFlow connection with the device is not configured.</p>
</p></li><li><span>(Optional) Create an OpenFlow agent and enter the OpenFlow agent view.</span><p><pre class="screen"><a href="cmdqueryname=openflow+agent"><b><span class="cmdname">openflow agent</span></b></a></pre>
<p>By default, no OpenFlow agent view is created.</p>
</p></li><li><span>(Optional) Configure the IP address used to establish an OpenFlow connection with the specified controller.</span><p><p>On an IPv4 network:</p>
<pre class="screen"><a href="cmdqueryname=transport-address"><b><span class="cmdname">transport-address</span></b></a> <i><span class="varname">ip-address</span></i></pre>
<p>By default, the IPv4 address used to establish an OpenFlow connection with the specified controller is not configured. The IP address of a loopback interface is recommended.</p>
</p><p><p>On an IPv6 network:</p>
<pre class="screen"><a href="cmdqueryname=transport-address"><b><span class="cmdname">transport-address</span></b></a> <i><span class="varname">ipv6-address</span></i></pre>
<p>By default, the IPv6 address used to establish an OpenFlow connection with the specified controller is not configured. The IP address of a loopback interface is recommended.</p>
</p></li><li><span>(Optional) Configure keychain authentication or an SSL policy for the OpenFlow connection to enhance network security. Keychain authentication and an SSL policy cannot be both configured for the same OpenFlow connection.</span><ol type="a"><li class="substepexpand"><span>Configure keychain authentication for the OpenFlow connection.</span><p><pre class="screen"><a href="cmdqueryname=authentication+keychain"><b><span class="cmdname">authentication keychain</span></b></a> <i><span class="varname">keychain-name</span></i></pre>
<p>By default, keychain authentication is not configured for an OpenFlow connection.</p>
</p></li><li class="substepexpand"><span>Configure an SSL policy for an OpenFlow connection.</span><p><pre class="screen"><a href="cmdqueryname=authentication+ssl"><b><span class="cmdname">authentication ssl</span></b></a> <strong><span>ssl-policy</span></strong> <i><span class="varname">ssl-policy-name</span></i></pre>
<p>By default, no SSL policy is configured for an OpenFlow connection.</p>
</p></li></ol>
</li><li><span>(Optional) Set a heartbeat interval for OpenFlow connections.</span><p><pre class="screen"><a href="cmdqueryname=echo-interval"><b><span class="cmdname">echo-interval</span></b></a> <i><span class="varname">interval</span></i></pre>
<p>As specified by the OpenFlow protocol, the controller and device periodically exchange ECHO packets to detect whether the peer end is still available. If the initiator does not receive any OpenFlow packet after sending five consecutive ECHO_REQUEST packets, it considers the peer device failed and closes the OpenFlow connection. If the initiator receives an OpenFlow before closing the OpenFlow connection, it restarts the counter.</p>
<p>By default, the heartbeat interval of the OpenFlow connection is 5 seconds.</p>
</p></li><li><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>(Optional) Set a DSCP priority for OpenFlow packets.</span><p><pre class="screen"><a href="cmdqueryname=openflow+dscp"><b><span class="cmdname">openflow dscp</span></b></a> <i><span class="varname">dscp-value</span></i></pre>
</p><p><p>If you run the <a href="cmdqueryname=set+priority+dscp"><b><span class="cmdname">set priority dscp</span></b></a> and <a href="cmdqueryname=openflow+dscp"><b><span class="cmdname">openflow dscp</span></b></a> commands to set the DSCP priority of IP packets and OpenFlow packets, respectively, the DSCP priority configured using the <a href="cmdqueryname=openflow+dscp"><b><span class="cmdname">openflow dscp</span></b></a> command takes effect. If neither of these commands is run, the DSCP priority of OpenFlow packets is 0.</p>
<p>By default, the DSCP priority of OpenFlow packets is the DSCP priority configured using the <a href="cmdqueryname=set+priority+dscp"><b><span class="cmdname">set priority dscp</span></b></a> command.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001513029774__en-us_task_0228023023_en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513029774__en-us_task_0228023023_en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001513029774__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+sdn+openflow+session"><b><span class="cmdname">display sdn openflow session</span></b></a> [ <strong><span>slave</span></strong> ] command to check whether the OpenFlow connection is successfully established.</li><li><p>Run the <a href="cmdqueryname=display+this"><b><span class="cmdname">display this</span></b></a> command in the OpenFlow agent view to check the information about OpenFlow connection authentication and configured heartbeat interval.</p>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_cfg_openflow_0001.html">OpenFlow Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="spec/OpenFlow_limitation_CE_v6r23c00.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_dc_cfg_openflow_0005.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>