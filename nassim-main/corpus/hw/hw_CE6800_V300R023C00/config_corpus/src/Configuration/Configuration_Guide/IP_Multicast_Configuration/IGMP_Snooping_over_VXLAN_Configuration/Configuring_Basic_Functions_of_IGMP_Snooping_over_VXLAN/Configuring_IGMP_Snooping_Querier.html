
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IGMP Snooping Querier">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_l2mc_over_vxlan_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="vrp_l2mc_over_vxlan_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="vrp_l2mc_over_vxlan_cfg_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IGMP Snooping over VXLAN">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IGMP Snooping over VXLAN">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP Snooping over VXLAN">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001190860265">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring IGMP Snooping Querier</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001190860265"></a><a name="EN-US_TASK_0000001190860265"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IGMP Snooping Querier</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001190860265__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>By listening to IGMP messages exchanged between an IGMP querier and user hosts, a Layer 2 device on which IGMP snooping is enabled can dynamically create Layer 2 multicast forwarding entries to implement Layer 2 multicast. However, such a device cannot dynamically create these entries in the following situations:</p>
<ul><li><p>The interfaces on the upstream Layer 3 multicast device do not run IGMP. Instead, static multicast groups are configured on them.</p>
</li><li><p>The multicast source is located on the same Layer 2 network as user hosts, and no Layer 3 multicast device is required.</p>
</li></ul>
<p>In these situations, you can configure the IGMP snooping querier function on the Layer 2 multicast device so that this device sends IGMP Query messages to user hosts on behalf of the Layer 3 multicast device.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001190860265__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the BD view.</span><p><pre class="screen"><a href="cmdqueryname=bridge-domain"><b><span class="cmdname">bridge-domain</span></b></a> <i><span class="varname">bd-id</span></i></pre>
</p></li><li><span>Enable the IGMP snooping querier function.</span><p><pre class="screen"><a href="cmdqueryname=igmp+snooping+querier+enable"><b><span class="cmdname">igmp snooping querier enable</span></b></a></pre>
</p><p><p>After the IGMP snooping querier function is enabled, the device periodically broadcasts IGMP Query messages to all the interfaces (including the router ports) in the BD. This may result in the reelection of the IGMP querier if one already exists on the multicast network. In this case, you are advised not to configure the IGMP snooping querier function. However, if this function must be configured, ensure that the source IP address of the General Query messages sent by the device is larger than the IP address of the upstream IGMP querier.</p>
<p>IGMP snooping querier and IGMP snooping proxy cannot both be enabled in the same BD.</p>
</p></li><li><span>(Optional) Configure the querier election function.</span><p><pre class="screen"><a href="cmdqueryname=igmp+snooping+querier-election"><b><span class="cmdname">igmp snooping querier-election</span></b></a></pre>
</p><p><p>If the querier function is enabled on multiple devices in the same BD, the querier election function needs to be enabled. After one of these devices is elected as the querier, it sends Query messages to user hosts on behalf of the upstream device.</p>
</p></li><li><span>(Optional) Set querier parameters.</span><p><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When setting parameters, ensure that the maximum time for the response to IGMP Query messages is shorter than the interval for sending IGMP General Query messages.</p>
</div></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Setting querier parameters</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.5.2.2.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.5.2.2.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.5.2.2.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.2.2.4.1.1 "><p>Set an interval for sending General Query messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.2.2.4.1.2 "><p><a href="cmdqueryname=igmp+snooping+query+interval"><b><span class="cmdname">igmp snooping query interval</span></b></a> <i><span class="varname">QueryIntervalValue</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.2.2.4.1.3 "><p>The querier sends General Query messages at the specified interval to maintain group memberships in the BD.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.2.2.4.1.1 "><p>Configure an IGMP robustness variable.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.2.2.4.1.2 "><p><a href="cmdqueryname=igmp+snooping+robust-count"><b><span class="cmdname">igmp snooping robust-count</span></b></a> <i><span class="varname">robust-count-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.2.2.4.1.3 "><div class="p">The robustness variable defines the following values:<ul><li>Number of times a querier sends General Query messages after startup. The interval for sending such messages in this case is 1/4 of the interval for sending General Query messages.</li><li>Number of times a querier sends IGMP Group-Specific Query messages after a Leave message is received. The interval for sending such messages in this case is the same as that for sending IGMP Group-Specific Query messages.</li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.2.2.4.1.1 "><p>Set the maximum time for response to IGMP Query messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.2.2.4.1.2 "><p><a href="cmdqueryname=igmp+snooping+query+max-response-time"><b><span class="cmdname">igmp snooping query max-response-time</span></b></a> <i><span class="varname">QueryRspIntValue</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.2.2.4.1.3 "><p>When receiving an IGMP Report message from a host, the device determines the aging time of the member port as follows: Interval for sending General Query messages x IGMP robustness variable + Maximum response time.</p>
<p>After a multicast group member receives an IGMP Query message, it must send a Report message before the maximum response time expires if it still requires the traffic of the multicast group. This command is not supported in IGMPv1.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.2.2.4.1.1 "><p>Configure an interval for sending Group-Specific Query messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.2.2.4.1.2 "><p><a href="cmdqueryname=igmp+snooping+query+lastmember-queryinterval"><b><span class="cmdname">igmp snooping query lastmember-queryinterval</span></b></a> <i><span class="varname">LastMemQIValue</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.5.2.2.2.4.1.3 "><p>When receiving a Leave message from a host, the device determines the aging time of the member port as follows: Interval for sending Group-Specific Query messages x IGMP robustness variable. The device continuously sends Group-Specific Query messages (for the number of times specified by the IGMP robustness variable) to check whether the multicast group has other members. This command is not supported in IGMPv1.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>(Optional) Configure a source IP address for IGMP General Query messages.</span><p><pre class="screen"><a href="cmdqueryname=igmp+snooping+send-query+source-address"><b><span class="cmdname">igmp snooping send-query source-address</span></b></a> <i><span class="varname">ip-source-address</span></i></pre>
</p><p><p>By default, the source IP address of General Query messages sent by the IGMP snooping querier is 192.168.0.1. If this address is already in use on the network, use this command to set a different address.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001190860265__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001190860265__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_l2mc_over_vxlan_cfg_0008.html">Configuring Basic Functions of IGMP Snooping over VXLAN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_l2mc_over_vxlan_cfg_0010.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_l2mc_over_vxlan_cfg_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>