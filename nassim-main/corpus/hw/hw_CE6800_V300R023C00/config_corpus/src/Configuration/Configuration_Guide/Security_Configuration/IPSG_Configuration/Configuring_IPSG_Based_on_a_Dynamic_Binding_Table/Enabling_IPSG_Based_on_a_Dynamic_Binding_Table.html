
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling IPSG Based on a Dynamic Binding Table">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_IPSG_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_IPSG_cfg_0012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPSG">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPSG">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSG">
<meta name="featuretype" content="Security">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512849694">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Enabling IPSG Based on a Dynamic Binding Table</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512849694"></a><a name="EN-US_TASK_0000001512849694"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling IPSG Based on a Dynamic Binding Table</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001512849694__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>IPSG based on a dynamic binding table is applicable to LANs that contain many hosts or the hosts obtain IP addresses through DHCP. The interfaces directly or indirectly connected to the DHCP server are configured as trusted interfaces, and other interfaces are untrusted. The device forwards the packets received by the trusted interfaces without checking them against the binding entries. In this case, authorized hosts can obtain IP addresses only from valid DHCP servers. After enabling DHCP snooping on an interface connected to users or in the VLAN, configure the interface connected to the DHCP server as a trusted interface, so that the dynamic DHCP snooping binding table is generated.</p>
<p>After creating a dynamic binding table, you need to enable IPSG on an interface or in a VLAN for IPSG to take effect.</p>
<ul><li>Enabling IPSG on an interface: IPSG checks all packets received by the interface against binding entries. Use this method if you want to perform an IPSG check on specified interfaces and trust other interfaces. This method is suitable for scenarios in which an interface belongs to multiple VLANs, because it eliminates the need to enable IPSG in each VLAN.</li><li>Enabling IPSG in a VLAN: IPSG checks the packets received by all interfaces in the VLAN against binding entries. Use this method if you want to perform an IPSG check in specified VLANs and trust other VLANs. This method is suitable for scenarios in which multiple interfaces belong to the same VLAN, because it eliminates the need to enable IPSG on each interface.</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>If you use both of the preceding methods, only the one that is configured first takes effect.</li></ul>
<ul><li>If ACL resources are insufficient, IPSG configurations exist on the device but the binding table may fail to be delivered. To check whether IPSG takes effect, run the <a href="cmdqueryname=display+ip+source+check+user-bind+status"><b><span class="cmdname">display ip source check user-bind status </span></b></a><strong>dynamic</strong> [ { <strong>interface</strong> <em>interface name</em> | <em>interface-type</em> <em>interface-number </em>| <strong>ip-address</strong> <em>ip-address</em> | <strong>mac-address</strong> <em>mac-address</em> | <strong>vlan </strong><em>vlan-id</em> } * ] [ <strong>valid </strong>|<strong> invalid </strong>] [ <strong>slot</strong> <em>slot-id</em> ] command and check the value of <strong>Status</strong> in the command output.</li></ul>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512849694__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span><a name="EN-US_TASK_0000001512849694__cmd381714015111"></a><a name="cmd381714015111"></a>Configure DHCP snooping so that a dynamic binding table is generated.</span><p><ol type="a"><li>Enable DHCP globally.<pre class="screen"><a href="cmdqueryname=dhcp+enable"><b><span class="cmdname">dhcp enable</span></b></a></pre>
<p>By default, DHCP is disabled globally.</p>
</li><li>Enable DHCP snooping globally.<pre class="screen"><a href="cmdqueryname=dhcp+snooping+enable"><b><span class="cmdname">dhcp snooping enable</span></b></a></pre>
<p>By default, DHCP snooping is disabled globally.</p>
</li><li>Configure a trusted interface.<ul><li>Configure a trusted interface in the interface view.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i>
<a href="cmdqueryname=dhcp+snooping+enable"><b><span class="cmdname">dhcp snooping enable</span></b></a>
<a href="cmdqueryname=dhcp+snooping+trusted"><b><span class="cmdname">dhcp snooping trusted</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Configure a trusted interface in the VLAN view.<pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <em>vlan-id</em>
<a href="cmdqueryname=dhcp+snooping+enable"><b><span class="cmdname">dhcp snooping enable</span></b></a>
<a href="cmdqueryname=dhcp+snooping+trusted+interface"><b><span class="cmdname">dhcp snooping trusted interface</span></b></a> <em>interface-type</em> <em>interface-number </em>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li></ul>
</li></ol>
</p></li><li><span>Enable IPSG.</span><p><ul><li>Enable IPSG in the interface view. <pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i>
<a href="cmdqueryname=ipv4+source+check+user-bind+enable"><b><span class="cmdname">ipv4 source check user-bind enable</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Enable IPSG in the VLAN view. <pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <em>vlan-id</em>
<a href="cmdqueryname=ipv4+source+check+user-bind+enable"><b><span class="cmdname">ipv4 source check user-bind enable</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li></ul>
</p><p><p>By default, IPSG is disabled.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The CE6885-LL in low latency mode does not support <a href="cmdqueryname=ipv4+source+check+user-bind+enable"><b><span class="cmdname">ipv4 source check user-bind enable</span></b></a>.</p>
</div></div>
</p></li><li><span>(Optional) Configure the IP packet check items.</span><p><p>After IPSG is enabled, the device checks received IP packets against the binding table and forwards only those that match the binding entries. Among the four check items of IP packets, the interface is mandatory, and the source IP address, source MAC address, and VLAN are optional.</p>
</p><p><ul><li>Configure IP packet check items in the interface view.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i>
<a href="cmdqueryname=ip+source+check+user-bind+check-item"><b><span class="cmdname">ip source check user-bind check-item</span></b></a> { <strong>ip-address</strong> | <strong>mac-address</strong> | <strong>vlan </strong>} *
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Configure IP packet check items in the VLAN view.<pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <em>vlan-id</em>
<a href="cmdqueryname=ip+source+check+user-bind+check-item"><b><span class="cmdname">ip source check user-bind check-item</span></b></a> { <strong>ip-address</strong> | <strong>mac-address</strong> | <strong>interface</strong> } *
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li></ul>
</p><p><p>By default, the IP packet check items include the IP address, MAC address, VLAN, and interface. If some items are trusted or unfixed (for example, packets from hosts may be received by different interfaces), you can perform this step. The default items are recommended.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The CE6885-LL in low latency mode does not support <strong>ip source check user-bind check-item</strong>.</p>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512849694__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512849694__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001512849694__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+ip+source+check+user-bind+configuration"><b><span class="cmdname">display ip source check user-bind configuration</span></b></a> [ <strong>vlan </strong><i><span class="varname">vlan-id</span></i> | <strong>interface</strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ] command to check the IPSG configuration on an interface or in a VLAN.</li><li>Run the <a href="cmdqueryname=display+ip+source+check+user-bind+statistics"><b><span class="cmdname">display ip source check user-bind statistics</span></b></a> [ <strong>interface</strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ] command to check statistics on packets discarded due to IPSG.</li><li>Run the <a href="cmdqueryname=display+ip+source+check+user-bind+status"><b><span class="cmdname">display ip source check user-bind status</span></b></a> [ [ <strong>dynamic</strong> [ { <strong>interface</strong> <em>interface-type</em> <em>interface-number </em>| <strong>ip-address</strong> <em>ip-address</em> | <strong>mac-address</strong> <em>mac-address</em> | <strong>vlan</strong> <em>vlan-id</em> } * ] [ <strong>valid </strong>|<strong> invalid </strong>] ] | <strong>summary</strong> ] [ <strong>slot</strong> <em>slot-id</em> ] command to check information and status of IPSG dynamic binding entries.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_IPSG_cfg_0010.html">Configuring IPSG Based on a Dynamic Binding Table
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_IPSG_cfg_0012.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>