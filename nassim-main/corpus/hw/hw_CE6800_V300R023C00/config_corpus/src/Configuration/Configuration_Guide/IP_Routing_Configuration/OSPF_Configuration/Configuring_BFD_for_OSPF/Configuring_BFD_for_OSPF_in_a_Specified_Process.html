
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BFD for OSPF in a Specified Process">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0090.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0091.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0093.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176662957">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring BFD for OSPF in a Specified Process</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176662957"></a><a name="EN-US_TASK_0000001176662957"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BFD for OSPF in a Specified Process</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001176662957__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring BFD for OSPF in a specified process, you have completed the following task:</p>
<ul><li><p><a href="vrp_ospf_cfg_0010.html">Configure basic OSPF functions</a>.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176662957__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After BFD for OSPF is configured, upon detection of a link fault, BFD immediately notifies the devices at both ends of the link, triggering rapid OSPF convergence. When the OSPF neighbor relationship goes Down, the BFD session will be dynamically deleted. Perform the following steps on the devices between which a BFD session is to be created for each interface in the specified process.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176662957__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable BFD globally.</span><p><pre class="screen"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></pre>
</p></li><li><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>Enter the OSPF view.</span><p><pre class="screen"><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
<p>The <em id="EN-US_TASK_0000001176662957__en-us_task_0000001130623404_i145692117181812">process-id</em> parameter specifies the ID of a process, and the default value is 1.</p>
</p></li><li><span>Configure BFD for OSPF.</span><p><pre class="screen"><a href="cmdqueryname=bfd+all-interfaces"><b><span class="cmdname">bfd all-interfaces</span></b></a> <strong><span>enable</span></strong></pre>
<p>If BFD is enabled globally and all neighbor relationships in the OSPF process are in the Full state, OSPF creates a BFD session with default parameter values for each interface in the process.</p>
</p></li><li><span>(Optional) Modify BFD session parameters.</span><p><pre class="screen"><a href="cmdqueryname=bfd+all-interfaces"><b><span class="cmdname">bfd all-interfaces</span></b></a> { <strong><span>min-rx-interval</span></strong> <i><span class="varname">receive-interval</span></i> | <strong><span>min-tx-interval</span></strong> <i><span class="varname">transmit-interval</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">multiplier-value</span></i><span> | <strong><span>frr-binding</span></strong></span> } <sup>*</sup></pre>
<p>The default interval at which BFD packets are transmitted and the default detection multiplier are recommended. As such, this step can be skipped.</p>
<p>The parameters need to be configured based on network conditions and requirements on network reliability. A short transmission interval for BFD packets can be set for a link that requires high reliability, and a long transmission interval can be used for a link that has low reliability requirements.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>Actual interval at which BFD packets are transmitted on the local device = Max { <i><span class="varname">transmit-interval</span></i> (interval at which BFD packets are transmitted) set on the local device, <i><span class="varname">receive-interval</span></i> (interval at which BFD packets are received) set on the peer device }</li><li>Actual interval at which BFD packets are received on the local device = Max { <i><span class="varname">transmit-interval</span></i> (interval at which BFD packets are transmitted) set on the peer device, <i><span class="varname">receive-interval</span></i> (interval at which BFD packets are received) set on the local device }</li><li>Actual period for BFD detection on the local device = Actual interval at which BFD packets are received on the local device x Detection multiplier specified by <i><span class="varname">multiplier-value</span></i> on the peer device</li></ul>
<p>For example, if the following conditions are met:</p>
<ul><li>On the local device, the interval at which BFD packets are transmitted is set to 200 ms, the interval at which BFD packets are received is set to 300 ms, and the detection multiplier is set to 4.</li><li>On the peer device, the interval at which BFD packets are transmitted is set to 100 ms, the interval at which BFD packets are received is set to 600 ms, and the detection multiplier is set to 5.</li></ul>
<p>The following results are then obtained:</p>
<ul><li>On the local device, the actual interval at which BFD packets are transmitted is 600 ms (calculated by Max { 200 ms, 600 ms }); the actual interval at which BFD packets are received is 300 ms (calculated by Max { 100 ms, 300 ms }); the actual detection period is 1500 ms (calculated by 300 ms x 5).</li><li>On the peer device, the actual interval at which BFD packets are transmitted is 300 ms (calculated by Max { 100 ms, 300 ms }); the actual interval at which BFD packets are received is 600 ms (calculated by Max { 200 ms, 600 ms }); the actual detection period is 2400 ms (calculated by 600 ms x 4).</li></ul>
</div></div>
</p></li><li><span>(Optional) Enable each interface in an OSPF process to adjust its cost based on the status of an associated BFD session.</span><p><pre class="screen"><a href="cmdqueryname=bfd+all-interfaces+incr-cost"><b><span class="cmdname">bfd all-interfaces incr-cost</span></b></a> { <i><span class="varname">cost</span></i> | <strong><span>max-reachable</span></strong> }</pre>
<p>If the function of adjusting the cost based on the status of an associated BFD session is configured both for a process and an interface, the configuration on the interface takes precedence.</p>
</p></li><li><span>(Optional) Disable a specified interface from dynamically creating a BFD session.</span><ol type="a"><li class="substepexpand"><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Switch the interface working mode to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
<p></p>
<p>Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li class="substepexpand"><span>Disable the interface from dynamically creating a BFD session.</span><p><pre class="screen"><a href="cmdqueryname=ospf+bfd+block"><b><span class="cmdname">ospf bfd block</span></b></a></pre>
<p>After BFD for OSPF is configured, all interfaces on which neighbor relationships are Full in the OSPF process will create BFD sessions. If BFD is not required on specific interfaces, disable these interfaces from dynamically creating BFD sessions.</p>
</p></li></ol>
</li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176662957__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176662957__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001176662957__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+ospf"><b><span class="cmdname">display ospf</span></b></a> [<i><span class="varname">process-id</span></i> ] <strong><span>bfd</span></strong> <strong><span>session</span></strong> { <i><span class="varname">router-id</span></i> | <strong><span>all</span></strong> } command to check information about all the sessions of BFD for OSPF.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospf_cfg_0090.html">Configuring BFD for OSPF
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospf_cfg_0091.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ospf_cfg_0093.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>