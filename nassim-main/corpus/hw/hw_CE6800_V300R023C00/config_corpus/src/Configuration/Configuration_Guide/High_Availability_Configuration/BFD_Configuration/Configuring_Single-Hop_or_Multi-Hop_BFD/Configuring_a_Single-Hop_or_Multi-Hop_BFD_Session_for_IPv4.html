
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Single-Hop or Multi-Hop BFD Session for IPv4">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_0005.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_0008.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130782134">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring a Single-Hop or Multi-Hop BFD Session for IPv4</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130782134"></a><a name="EN-US_TASK_0000001130782134"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Single-Hop or Multi-Hop BFD Session for IPv4</h1>
<div class="taskbody"><div class="steps"><a name="EN-US_TASK_0000001130782134__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enable BFD globally.</span><ol type="a"><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enable BFD globally and enter the global BFD view.</span><p><pre class="screen"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></pre>
<p>You can set BFD parameters only after running the <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> command to enable BFD globally.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure the default multicast address for BFD.</span><p><pre class="screen"><a href="cmdqueryname=default-ip-address"><b><span class="cmdname">default-ip-address</span></b></a> <em><i><span class="varname">default-ip-value</span></i></em></pre>
</p></li><li class="substepexpand"><span>(Optional) Disable the local and remote discriminators of a multicast BFD session from being set to the same value.</span><p><pre class="screen"><a href="cmdqueryname=same+discriminator+disable"><b><span class="cmdname">same discriminator disable</span></b></a></pre>
</p></li></ol>
</li><li><span>Create a BFD session.</span><ol type="a"><li class="substepexpand"><span>Run either of the following commands to configure a BFD for IPv4 binding relationship. The command you run will depend on whether the peer end is configured with an IPv4 address.</span><p><p>Configure a BFD for IPv4 binding relationship on a Layer 3 interface with an IPv4 address.</p>
<pre class="screen"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <span><em><i><span class="varname">session-name</span></i></em> <strong><span>bind</span></strong> <strong><span>peer-ip</span></strong> <i><span class="varname">peer-ip</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-name</span></i> ] [ <strong><span>interface</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> }<span> ] [ [ <strong><span>source-ip</span></strong> <i><span class="varname">source-ip</span></i> ] [ <strong><span>select-board</span></strong> <i><span class="varname">slot-id1</span></i> [ <i><span class="varname">slot-id2</span></i> ] ] | [ <strong><span>select-board</span></strong> <i><span class="varname">slot-id1</span></i> [ <i><span class="varname">slot-id2</span></i> ] ] [ <strong><span>source-ip</span></strong> <i><span class="varname">source-ip</span></i> ] ]</span></span></pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>If a single-hop BFD session for IPv4 is being created for the first time, a peer IPv4 address must be specified for the BFD session, and the BFD session must be bound to the local interface. The configuration of the BFD session cannot be modified after the session is created.</li><li>If a multi-hop BFD session for IPv4 is being created for the first time, a peer (destination device) IPv4 address must be specified for the BFD session. The configuration of the BFD session cannot be modified after the session is created.</li><li>When parameters of a BFD session for IPv4 are being configured, the system checks the validity of the specified IPv4 address. The BFD session for IPv4 will not be established if an incorrect peer IPv4 address or source IPv4 address is specified.</li><li><p>If both <em>slot-id1</em> and <em>slot-id2</em> are configured in <strong><span>select-board</span></strong> <i><span class="varname">slot-id1</span></i> [ <i><span class="varname">slot-id2</span></i> ], preference is given to <em>slot-id1</em>. If the board specified by <em>slot-id1</em> cannot be selected, the board specified by <em>slot-id2</em> is then selected. If neither board is selected, board selection stops.</p>
</li></ul>
</div></div>
<p>Configure a BFD for IPv4 binding relationship on a Layer 2 interface or a Layer 3 physical member interface without an IPv4 address.</p>
<pre class="screen"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <span><i><span class="varname">sessname-value</span></i> </span><strong><span>bind</span></strong> <strong><span>peer-ip</span></strong> <strong><span>default-ip</span></strong> <strong><span>interface</span></strong> <i><span class="varname">interface-type interface-number</span></i> [ <strong><span>source-ip</span></strong> <i><span class="varname">source-ip</span></i> ]</pre>
</p></li><li class="substepexpand"><span>Configure a local discriminator for the BFD session.</span><p><pre class="screen"><a href="cmdqueryname=discriminator"><b><span class="cmdname">discriminator</span></b></a> <strong><span>local</span></strong> <i><span class="varname">discr-value</span></i></pre>
</p></li><li class="substepexpand"><span>Configure a remote discriminator for the BFD session.</span><p><pre class="screen"><a href="cmdqueryname=discriminator"><b><span class="cmdname">discriminator</span></b></a> <strong><span>remote</span></strong> <i><span class="varname">discr-value</span></i></pre>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130782134__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130782134__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
<p><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The local discriminator on one end must be the same as the remote discriminator on the other end. Otherwise, the BFD session cannot be established. </p>
</div></div>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bfd_cfg_0005.html">Configuring Single-Hop or Multi-Hop BFD
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bfd_cfg_0006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bfd_cfg_0008.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>