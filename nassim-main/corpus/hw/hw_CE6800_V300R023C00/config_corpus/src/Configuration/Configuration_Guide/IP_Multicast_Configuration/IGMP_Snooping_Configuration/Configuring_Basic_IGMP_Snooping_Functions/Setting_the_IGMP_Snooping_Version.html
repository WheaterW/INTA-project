
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Setting the IGMP Snooping Version">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc_cfg_0009.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc_cfg_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176661651">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Setting the IGMP Snooping Version</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176661651"></a><a name="EN-US_TASK_0000001176661651"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Setting the IGMP Snooping Version</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176661651__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>IGMP manages group member relationships and runs on the network segment between Layer 3 multicast devices and member hosts. IGMP has three versions: IGMPv1, IGMPv2, and IGMPv3. You can set the IGMP snooping version on a Layer 2 device so that it processes the IGMP messages of a specific version. Generally, set the same version on the Layer 2 device as that on the upstream Layer 3 multicast device. If IGMP is not enabled on the Layer 3 multicast device, the version used on the Layer 2 device should be later than or the same as that running on downstream hosts.</p>
<p>In most cases, you are advised to use the same IGMP version for all hosts in the same VLAN. If user hosts in a VLAN support different versions, the highest IGMP snooping version among them needs to be configured on the device so that it can process the messages from all the hosts.</p>
<div class="p">By default, if IGMP snooping is enabled to process IGMPv3 messages, it complies with the lightweight version of IGMPv3 while processing such messages. The differences between the lightweight and full versions of IGMPv3 are as follows:<ul><li>For an incoming MODE_IS_INCLUDE, ALLOW_NEW_SOURCES, or BLOCK_OLD_SOURCES message that carries a group address in the ASM address range: The device discards the message if the lightweight version is used, but processes the message as normal if the full version is used.</li><li>For an incoming MODE_IS_EXCLUDE, CHANGE_TO_EXCLUDE_MODE, or CHANGE_TO_INCLUDE_MODE message that carries a group address in the ASM address range: The device ignores the number of source addresses carried in the message and instead considers that it contains zero source addresses if the lightweight version is used, but processes the message as normal if the full version is used.</li><li>For an incoming MODE_IS_EXCLUDE or CHANGE_TO_EXCLUDE_MODE message that carries a group address in the SSM address range and a non-zero source address: The device performs multicast source-and-group mapping based on the SSM mapping configuration if the lightweight version is used. If the mapping fails, the device does not process the message. In contrast, if the full version is used, the device processes the message based on the multicast group-and-source mapping information carried in the IGMPv3 message.</li></ul>
</div>
<div class="p">The processing actions in the lightweight and full versions are the same for the following types of messages:<ul><li>Incoming MODE_IS_INCLUDE, CHANGE_TO_INCLUDE_MODE, ALLOW_NEW_SOURCES, or BLOCK_OLD_SOURCES message that carries a group address in the SSM address range</li><li>Incoming MODE_IS_EXCLUDE or CHANGE_TO_EXCLUDE_MODE message that carries a group address in the SSM address range and zero source addresses</li><li>Incoming MODE_IS_EXCLUDE, CHANGE_TO_EXCLUDE_MODE, or CHANGE_TO_INCLUDE_MODE message that carries a group address in the ASM address range and zero source addresses</li></ul>
</div>
<p>You can run the <a href="cmdqueryname=igmp+snooping+version"><b><span class="cmdname">igmp snooping version</span></b></a> <strong><span>3</span></strong> <strong><span>standard-full</span></strong> command to configure IGMP snooping to comply with the full version of IGMPv3 during the processing of IGMPv3 messages.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176661651__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the VLAN view.</span><p><pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i></pre>
</p></li><li><span>Set the version of IGMP messages that can be processed by IGMP snooping.</span><p><pre class="screen"><a href="cmdqueryname=igmp+snooping+version"><b><span class="cmdname">igmp snooping version</span></b></a> <i><span class="varname">number</span></i></pre>
<p>By default, the device can process IGMPv1 and IGMPv2 messages but cannot process IGMPv3 messages.</p>
<p>If IGMP snooping is required to process IGMPv3 messages, perform this step to set the version number to 3. The version is backward compatible. For example, if the version is set to 3, IGMP snooping can process IGMPv1, IGMPv2, and IGMPv3 messages.</p>
</p></li><li><span>(Optional) Configure IGMP snooping to comply with the full version of IGMPv3 during the processing of IGMPv3 messages.</span><p><pre class="screen"><a href="cmdqueryname=igmp+snooping+version"><b><span class="cmdname">igmp snooping version</span></b></a> <strong><span>3</span></strong> <strong><span>standard-full</span></strong></pre>
<p>By default, if IGMP snooping is enabled to process IGMPv3 messages, it complies with the lightweight version of IGMPv3 during the processing of received IGMPv3 messages.</p>
<p>Perform this step if the device is required to comply with the full version of IGMPv3 during the processing of such messages.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_l2mc_cfg_0008.html">Configuring Basic IGMP Snooping Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_l2mc_cfg_0009.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_l2mc_cfg_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>