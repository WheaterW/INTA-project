
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Edge Ports and BPDU Filtering Ports">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_vbst_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_vbst_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_vbst_cfg_0013.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VBST">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VBST">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512848778">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Edge Ports and BPDU Filtering Ports</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512848778"></a><a name="EN-US_TASK_0000001512848778"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Edge Ports and BPDU Filtering Ports</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001512848778__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>VBST defines a port that is located at the network edge and directly connected to a terminal device as an edge port.</p>
<p>Edge ports do not receive or process configuration BPDUs or participate in VBST calculation. They can instantly change from the disable state to the forwarding state, as if VBST were disabled.</p>
<p>Edge ports send BPDUs, which if sent to other networks may cause flapping to occur. BPDU filtering can be configured on the edge ports to disable them from processing and sending BPDUs.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If all ports on a device are configured as edge ports and BPDU filtering ports in the system view, all of the device's ports will be in the forwarding state and none of them will send BPDUs or negotiate parameters related to the spanning tree protocol with directly connected ports on the peer device. However, this may cause network loops, leading to broadcast storms. Exercise caution when configuring these ports.</p>
<p>After a port is configured as an edge port and a BPDU filtering port in the interface view, the port does not process or send BPDUs and cannot negotiate parameters related to the spanning tree protocol with the directly connected port on the peer device. Exercise caution when configuring a port as an edge port and a BPDU filtering port.</p>
<p>Automatic edge port detection is enabled by default after VBST is enabled for a port. If the port does not receive a BPDU within (2 x Hello Timer + 1) seconds, the port will be specified as an edge port automatically. If it receives BPDUs within the specified time, it will be specified as a non-edge port. In VBST, each VLAN has a Hello timer. When a port is added to multiple VLANs, the port is automatically configured as an edge port if it does not receive BPDUs within (2 x min {Hello Timer} + 1). For example, if a port is simultaneously added to VLAN 2 (Hello Timer: 2 seconds), VLAN 3 (Hello Timer: 3 seconds), and VLAN 4 (Hello Timer: 4 seconds) and the port does not receive any BPDU within 5 seconds (2 x 2 + 1), the port is automatically configured as an edge port. If the <a href="cmdqueryname=stp+edged-port+enable"><b><span class="cmdname">stp edged-port enable</span></b></a> or <a href="cmdqueryname=stp+edged-port+disable"><b><span class="cmdname">stp edged-port disable</span></b></a> command is configured in the interface view or the <a href="cmdqueryname=stp+edged-port+default"><b><span class="cmdname">stp edged-port default</span></b></a> command is configured in the system view, automatic edge port detection does not take effect.</p>
<div class="p">When configuring an edge port, pay attention to the following points:<ul><li>After all ports are configured as edge ports and BPDU filtering ports in the system view, no ports on the device send BPDUs or negotiate the VBST status with directly connected ports on the peer device. All ports are in forwarding state, which may cause loops on the network and lead to broadcast storms. Exercise caution when configuring all ports as edge ports and BPDU filtering ports.</li><li>After a port is configured as an edge port and a BPDU filtering port in the interface view, the port does not process or send BPDUs. In this case, the port cannot negotiate the VBST status with the directly connected port on the peer device. Exercise caution when configuring a port as an edge port and a BPDU filtering port.</li></ul>
</div>
</div></div>
<p>Terminal devices cannot participate in VBST calculation or respond to BPDUs. To configure a device port connected to a terminal device, you can use either of the following methods:</p>
<ul><li>Configure the port as an edge port and enable BPDU filtering.</li><li>Disable VBST on the port to keep it in the forwarding state.</li></ul>
<p>For optimal availability and security, you are recommended to configure the port as an edge port. If a loop occurs on the terminal device, the port will automatically become a non-edge port and break the loop. You can enable BPDU protection to prevent malicious BPDU spoofing attacks against the device. For details, see <a href="galaxy_vbst_cfg_0025.html">Configuring BPDU Protection</a>.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001512848778__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configuration in the system view:</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure all ports on the device as edge ports.</span><p><pre class="screen"><a href="cmdqueryname=stp+edged-port+default"><b><span class="cmdname">stp edged-port default</span></b></a></pre>
<p>By default, all ports on a device are non-edge ports.</p>
</p></li><li class="substepexpand"><span>Configure all ports on the device as BPDU filtering ports.</span><p><pre class="screen"><a href="cmdqueryname=stp+bpdu-filter+default"><b><span class="cmdname">stp bpdu-filter default</span></b></a></pre>
<p>By default, all ports on a device are non-BPDU filtering ports.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512848778__en-us_task_0228023023_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512848778__en-us_task_0228023023_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configuration in the interface view:</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Switch the interface working mode to Layer 2.</span><p><pre class="screen" id="EN-US_TASK_0000001512848778__en-us_task_0228023023_screen19877121513395"><a href="cmdqueryname=portswitch"><b><span class="cmdname" id="EN-US_TASK_0000001512848778__en-us_task_0228023023_cmdname290712319390">portswitch</span></b></a></pre>
<p id="EN-US_TASK_0000001512848778__en-us_task_0228023023_p05988367149">Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li class="substepexpand"><span>Configure the port as an edge port.</span><p><pre class="screen"><a href="cmdqueryname=stp+edged-port"><b><span class="cmdname">stp edged-port</span></b></a> <strong><span>enable</span></strong></pre>
<p>By default, all ports on a device are non-edge ports.</p>
</p></li><li class="substepexpand"><span>Configure the port as a BPDU filtering port.</span><p><pre class="screen"><a href="cmdqueryname=stp+bpdu-filter"><b><span class="cmdname">stp bpdu-filter</span></b></a> <strong><span>enable</span></strong></pre>
<p>By default, all ports on a device are non-BPDU filtering ports.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512848778__en-us_task_0228023023_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512848778__en-us_task_0228023023_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0000001512848778__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+stp+vlan"><b><span class="cmdname">display stp vlan</span></b></a> [ <i><span class="varname">vlan-id</span></i> ] <strong><span>information</span></strong> command, check the Edged Port Default field to verify the global edge port configuration, check the Bpdu-filter Default field to verify the global BPDU filtering port configuration, and check the Port Edged field to verify the edge port configuration.</li><li>Run the <a href="cmdqueryname=display+this"><b><span class="cmdname">display this</span></b></a> command in the interface view to check the BPDU filtering port configuration on an interface.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_vbst_cfg_0001.html">VBST Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_vbst_cfg_0006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_vbst_cfg_0013.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>