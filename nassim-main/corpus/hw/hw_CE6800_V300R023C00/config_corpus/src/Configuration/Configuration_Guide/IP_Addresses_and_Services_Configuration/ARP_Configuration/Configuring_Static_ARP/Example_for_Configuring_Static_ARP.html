
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Static ARP">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_0005.html">
<meta name="DC.Relation" scheme="URI" content="vrp_arp_cfg_0007.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ARP">
<meta name="featurename" content="Static ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ARP">
<meta name="featurename" content="IP Address Conflict Detection">
<meta name="featurename" content="Dynamic ARP">
<meta name="featurename" content="Static ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176663593">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="public_sys-resources/imagePopup.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/customQuery.js"></script>
<script language="javascript" type="text/javascript" src="public_sys-resources/imagePopup.js"></script>
<title>Example for Configuring Static ARP</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176663593"></a><a name="EN-US_TASK_0000001176663593"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Static ARP</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176663593__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0000001176663593__fig7672135224615">Figure 1</a>, DeviceA is used to connect the departments of an enterprise, and each department is added to a different VLAN. Fixed IP addresses have been manually assigned to the file backup server and hosts in the president's office, and dynamic IP addresses have been assigned to hosts in the marketing and R&amp;D departments using DHCP. In the marketing department, hosts can access the Internet and are often subject to ARP attacks. Attackers target DeviceA and modify its dynamic ARP entries, interrupting communication between hosts in the president's office and external devices, and preventing hosts in all departments from accessing the file backup server. The enterprise requires that static ARP entries be configured on DeviceA to ensure that the president's office and external devices can communicate securely and that all departments can access the file backup server.</p>
<div class="fignone" id="EN-US_TASK_0000001176663593__fig7672135224615"><a name="EN-US_TASK_0000001176663593__fig7672135224615"></a><a name="fig7672135224615"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring static ARP</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1, interface 2, and interface 3 represent <span>100GE</span> <span>1/0/1</span>, <span>100GE</span> <span>1/0/2</span>, and <span>100GE</span> <span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img class="imgResize" src="figure/en-us_image_0000001176743529.png" width="508.44819375000003" height="448.74781875" title="Click to enlarge"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176663593__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Configure static ARP entries for hosts in the president's office on DeviceA to prevent the ARP entries of the hosts from being modified by ARP attack messages. This ensures that hosts in the president's office and external devices can communicate securely.</li><li>Configure a static ARP entry for the file backup server on DeviceA to prevent the ARP entry of the file backup server from being modified by ARP attack messages. This ensures that all departments can access the file backup server.</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176663593__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create a VLAN on DeviceA and configure an IP address for each interface.</span><p><p># Create VLAN 10, add interface 1 to VLAN 10, and configure an IP address for VLANIF 10.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>A</strong>
<span>[<span><span class="keyword">*</span></span><span class="keyword">HUAWEI</span>] <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>vlan batch 10</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>interface </strong><strong><span>100GE</span></strong><strong><span>1/0/1</span></strong><strong></strong><strong></strong>
<span>[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>portswitch</strong></span>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port link-type access</strong>
[<span><span class="keyword">*</span></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port default vlan 10</strong>
[<span><span class="keyword">*</span></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span><span class="keyword">*</span></span>DeviceA] <strong>interface vlanif 1</strong>
<span>[</span><span><span class="keyword">*</span></span><span>DeviceA-Vlanif10] </span><strong>ip address 10.164.1.20 24</strong>
[<span><span class="keyword">*</span></span>DeviceA-Vlanif10] <strong>quit</strong></pre>
<p># Configure an IP address for interface 2.</p>
<pre class="screen"><span>[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] </span><strong>interface </strong><strong><span>100GE</span></strong><strong><span>1/0/2</span></strong><strong></strong><strong></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>undo portswitch</strong>
[<span><span class="keyword">*</span></span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>ip address 10.164.10.10 24</strong>
[<span><span class="keyword">*</span></span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong></pre>
<p># Configure an IP address for interface 3.</p>
<pre class="screen"><span>[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] </span><strong>interface </strong><strong><span>100GE</span></strong><strong><span>1/0/3</span></strong><strong></strong><strong></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>undo portswitch</strong>
[<span><span class="keyword">*</span></span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>ip address 10.164.20.1 24</strong>
[<span><span class="keyword">*</span></span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong></pre>
</p></li><li><span>Configure static ARP entries on DeviceA.</span><p><pre class="screen"><span>[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] </span><strong>arp static 10.164.1.1 00e0-fc01-0001 vlan 10 interface <span>100GE</span><span>1/0/1</span></strong>
<span>[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] </span><strong>arp static 10.164.10.1 00e0-fc01-003a interface </strong><strong><span>100GE</span></strong><strong><span>1/0/2</span></strong><strong></strong><strong></strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001176663593__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Run the <a href="cmdqueryname=display+arp+static"><b><span class="cmdname">display arp static</span></b></a> command to check the configured static ARP entries.</p>
<h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p>DeviceA</p>
<pre class="screen">#
sysname DeviceA
#
vlan batch 10
#
interface Vlanif10
 ip address 10.164.1.20 255.255.255.0
#
interface <span>100GE</span><span>1/0/1</span>
<span> port link-type access</span>
 port default vlan 10
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 10.164.10.10 255.255.255.0
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ip address 10.164.20.1 255.255.255.0
#
arp static 10.164.1.1 00e0-fc01-0001 vlan 10 interface <span>100GE</span><span>1/0/1</span>
arp static 10.164.10.1 00e0-fc01-003a interface <span>100GE</span><span>1/0/2</span>
#                                                                            
        
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_arp_cfg_0005.html">Configuring Static ARP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_arp_cfg_0007.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>

<script language="JavaScript">
<!--
initImageViewer('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>