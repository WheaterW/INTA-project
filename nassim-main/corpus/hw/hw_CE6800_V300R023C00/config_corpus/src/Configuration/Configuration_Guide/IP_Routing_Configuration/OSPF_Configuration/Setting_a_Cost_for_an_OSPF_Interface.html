
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Setting a Cost for an OSPF Interface">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0036.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0095.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130783194">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Setting a Cost for an OSPF Interface</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130783194"></a><a name="EN-US_TASK_0000001130783194"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Setting a Cost for an OSPF Interface</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130783194__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before setting a cost for an OSPF interface, you have completed the following task:</p>
<ul><li><a href="vrp_ospf_cfg_0010.html">Configure basic OSPF functions</a>.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130783194__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>You can adjust and optimize route selection by setting OSPF interface costs. After the OSPF interface costs are set, the interface with the lowest cost is selected to transmit routing information. The OSPF interface cost can be set or calculated based on the interface bandwidth.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001130783194__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Manually set a cost for an OSPF interface.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Switch the interface working mode to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
<p></p>
<p>Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li class="substepexpand"><span>Set a cost for the OSPF interface.</span><p><pre class="screen"><a href="cmdqueryname=ospf+cost"><b><span class="cmdname">ospf cost</span></b></a> <i><span class="varname">value</span></i></pre>
<p>By default, the OSPF interface cost is calculated using the <span class="menucascade"><b><span class="uicontrol">Interface cost = Bandwidth reference value/Interface bandwidth</span></b></span> formula<span>, in which the bandwidth reference value can be changed using the <a href="cmdqueryname=bandwidth-reference"><b><span class="cmdname">bandwidth-reference</span></b></a> command</span>.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130783194__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130783194__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Set a bandwidth reference value to implement automatic OSPF interface cost calculation.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the OSPF view.</span><p><pre class="screen"><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
</p></li><li class="substepexpand"><span>Set a bandwidth reference value.</span><p><pre class="screen"><a href="cmdqueryname=bandwidth-reference"><b><span class="cmdname">bandwidth-reference</span></b></a> <i><span class="varname">value</span></i></pre>
<p>By default, the bandwidth reference is 100 Mbit/s. Therefore, the interface cost equals 100 Mbit/s (100,000,000 bit/s) divided by the interface bandwidth (in bit/s).</p>
<p>The calculation formula is as follows: <span class="menucascade"><b><span class="uicontrol">Interface cost = Bandwidth reference value/Interface bandwidth</span></b></span>. The integer of the calculation result is used as the cost of the interface. If the result is smaller than 1, the cost is 1.</p>
</p></li><li class="substepexpand"><span>Enable the device to use the configuration bandwidth of the OSPF interface to calculate a cost for the interface.</span><p><pre class="screen"><a href="cmdqueryname=bandwidth-config+enable"><b><span class="cmdname">bandwidth-config enable</span></b></a></pre>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130783194__en-us_task_0234857734_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130783194__en-us_task_0234857734_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0000001130783194__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+ospf"><b><span class="cmdname">display ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>interface</span></strong> [ <strong><span>all</span></strong><span> | <strong><span>no-peer</span></strong></span> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ] [ <strong><span>verbose</span></strong> ] command to check information about the OSPF interface. You can view the interface cost from the <strong>Cost</strong> field in the command output.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospf_cfg_0000.html">OSPF Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospf_cfg_0036.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ospf_cfg_0095.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>