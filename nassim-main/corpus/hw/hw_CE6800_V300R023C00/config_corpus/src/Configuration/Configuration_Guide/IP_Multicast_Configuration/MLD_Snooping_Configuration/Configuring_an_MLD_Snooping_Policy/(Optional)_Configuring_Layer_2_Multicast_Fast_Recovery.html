
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring Layer 2 Multicast Fast Recovery">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc6_cfg_0029.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/fwm_l2mc6_cfg_0059.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc6_cfg_0036.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MLD Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MLD Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MLD Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001372911313">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring Layer 2 Multicast Fast Recovery</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001372911313"></a><a name="EN-US_TASK_0000001372911313"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring Layer 2 Multicast Fast Recovery</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001372911313__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring Layer 2 multicast fast recovery, you have completed the following task:</p>
<ul><li>Set up a scenario with M-LAG master and backup devices.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001372911313__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>In a scenario where an M-LAG is used for Layer 2 multicast access, if an M-LAG member interface fails, the link corresponding to the M-LAG member interface goes down, and Layer 2 multicast entries on the interface are deleted. When the link goes up again, the interface needs to learn the entries again. As a result, the link switching takes a long time, and a large number of packets are lost. To prevent this problem, configure the Layer 2 multicast fast recovery function. After this function is configured, the device ignores the interface down event and retains Layer 2 multicast entries on the interface in the preceding situation. In addition, the device updates the entry aging time based on the packet maintenance entries synchronized from the backup device. After the interface goes up again, it does not need to learn Layer 2 multicast entries again, which speeds up the link switching and shortens the service interruption time.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001372911313__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable MLD snooping globally.</span><p><pre class="screen"><a href="cmdqueryname=mld+snooping+enable"><b><span class="cmdname">mld snooping enable</span></b></a></pre>
</p></li><li><span>Enter the view of an Eth-Trunk interface.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <strong><span>eth-trunk</span></strong> <i><span class="varname">trunk-id</span></i></pre>
</p></li><li><span>Switch the interface working mode from Layer 3 to Layer 2.</span><p><pre class="screen"><a href="cmdqueryname=portswitch"><b><span class="cmdname">portswitch</span></b></a></pre>
</p><p><p>Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li><span>Enable Layer 2 multicast fast recovery.</span><p><pre class="screen"><a href="cmdqueryname=mld+snooping+port-fast-control"><b><span class="cmdname">mld snooping port-fast-control</span></b></a></pre>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=mld+snooping+port-fast-control"><b><span class="cmdname">mld snooping port-fast-control</span></b></a> and <a href="cmdqueryname=mld+snooping+static-group"><b><span class="cmdname">mld snooping static-group</span></b></a> commands are mutually exclusive.</p>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_l2mc6_cfg_0029.html">Configuring an MLD Snooping Policy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/fwm_l2mc6_cfg_0059.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_l2mc6_cfg_0036.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>