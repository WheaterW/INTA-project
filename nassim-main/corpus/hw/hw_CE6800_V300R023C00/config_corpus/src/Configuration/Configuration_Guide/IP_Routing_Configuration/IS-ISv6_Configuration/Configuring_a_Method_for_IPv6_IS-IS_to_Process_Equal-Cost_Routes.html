
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Method for IPv6 IS-IS to Process Equal-Cost Routes">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_isis_ipv6_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="vrp_isis_ipv6_cfg_1130.html">
<meta name="DC.Relation" scheme="URI" content="vrp_isis_ipv6_cfg_0127.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IS-ISv6">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IS-ISv6">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001562825921">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring a Method for IPv6 IS-IS to Process Equal-Cost Routes</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001562825921"></a><a name="EN-US_TASK_0000001562825921"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Method for IPv6 IS-IS to Process Equal-Cost Routes</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001562825921__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring the method for IPv6 IS-IS to process equal-cost routes, you have completed the following task:</p>
<ul><li><p><a href="vrp_isis_ipv6_cfg_0011.html">Configure basic IPv6 IS-IS functions</a>.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001562825921__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When multiple redundant links exist on an IPv6 IS-IS network, multiple equal-cost routes may exist. IPv6 IS-IS load balancing can be configured to improve link utilization and prevent network congestion caused by link overload. IPv6 IS-IS load balancing evenly distributes traffic among multiple equal-cost paths. <a href="#EN-US_TASK_0000001562825921__fig238461885815">Figure 1</a> shows the typical networking for load balancing.</p>
<div class="fignone" id="EN-US_TASK_0000001562825921__fig238461885815"><a name="EN-US_TASK_0000001562825921__fig238461885815"></a><a name="fig238461885815"></a><span class="figcap"><b>Figure 1 </b>Typical networking of IPv6 IS-IS load balancing</span><br><span><img class="vsd" src="figure/en-us_image_0000001514168328.png"></span><ul><li><p>DeviceA, DeviceB, DeviceC, and DeviceD run IS-IS for IP interworking.</p>
</li><li><p>DeviceA, DeviceB, DeviceC, and DeviceD all belong to area 10 and are Level-2 routing devices.</p>
</li><li><p>Without load balancing, traffic from DeviceA is always transmitted along the optimal route obtained using the SPF algorithm, which may cause load imbalance. If load balancing is enabled on DeviceA, traffic to DeviceD is balanced between DeviceB and DeviceC, which relieves the load on the link of the optimal route.</p>
</li></ul>
<p>Load balancing can be implemented per packet or per flow. IPv6 IS-IS supports load balancing among routes in either the same process or different processes.</p>
</div>
<p>Load balancing improves link utilization on a network, but traffic is forwarded randomly, which may affect service traffic management. To resolve this issue, you can configure a weight for each equal-cost route to indicate a priority and specify the maximum number of routes for load balancing. In this case, the specified number of routes with high priorities are preferentially selected for load balancing, with others functioning as backups. This solution does not require any modification on the original configuration. In addition, this solution ensures network reliability and facilitates service traffic management.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001562825921__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure IPv6 IS-IS load balancing.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the IS-IS view.</span><p><pre class="screen"><a href="cmdqueryname=isis"><b><span class="cmdname">isis</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
</p></li><li class="substepexpand"><span>Enable IPv6 for the IS-IS process.</span><p><pre class="screen"><a href="cmdqueryname=ipv6+enable"><b><span class="cmdname">ipv6 enable</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure the maximum number of equal-cost routes for load balancing.</span><p><pre class="screen"><a href="cmdqueryname=ipv6+maximum+load-balancing"><b><span class="cmdname">ipv6 maximum load-balancing</span></b></a> <i><span class="varname">number</span></i></pre>
<p>By default, load balancing is supported, and a maximum of 64 equal-cost routes can participate in load balancing.</p>
<div class="p">When the number of equal-cost routes is greater than the number specified in the <a href="cmdqueryname=ipv6+maximum+load-balancing"><b><span class="cmdname">ipv6 maximum load-balancing</span></b></a> command, valid routes are selected for load balancing based on the following criteria:<ol type="a"><li>Route weight: Routes with small weight values (high priority) are selected for load balancing.</li><li>Next-hop system ID: If routes have the same weight, those with small system IDs are selected for load balancing.</li><li>Outbound interface index: If routes have the same weight and system ID, those with small outbound interface indexes are selected for load balancing.</li><li>Next-hop IP address: If the weights, next-hop system IDs, and local outbound interface indexes of the routes are the same, their next-hop IP addresses are compared. The routes with high IP addresses are selected for load balancing.</li></ol>
</div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001562825921__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001562825921__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure weights for equal-cost IPv6 IS-IS routes.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the IS-IS view.</span><p><pre class="screen"><a href="cmdqueryname=isis"><b><span class="cmdname">isis</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
</p></li><li class="substepexpand"><span>Enable IPv6 for the IS-IS process.</span><p><pre class="screen"><a href="cmdqueryname=ipv6+enable"><b><span class="cmdname">ipv6 enable</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure a weight for an equal-cost IPv6 IS-IS route.</span><p><pre class="screen"><a href="cmdqueryname=ipv6+nexthop"><b><span class="cmdname">ipv6 nexthop</span></b></a> <i><span class="varname">ip-address</span></i> <strong><span>weight</span></strong> <i><span class="varname">weight-value</span></i></pre>
</p><p><p>By default, no weight is set for equal-cost IPv6 IS-IS routes. The lower the <i><span class="varname">weight-value</span></i>, the higher the priority.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001562825921__en-us_task_0234857734_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001562825921__en-us_task_0234857734_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0000001562825921__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li><p>Run the <strong>display isis route</strong> [ <em>process-id</em> | <strong>vpn-instance</strong> <em>vpn-instance-name</em> ] <strong>ipv6</strong> [ <strong>verbose</strong> | [ <strong>level-1</strong> | <strong>level-2</strong> ] | <em>ipv6-address</em> [ <em>prefix-length</em> ] ] command to check IPv6 IS-IS routing information.</p>
</li><li><p>Run the <strong>display isis lsdb</strong> [ <strong>verbose</strong> | { <strong>level-1</strong> | <strong>level-2</strong> } | { <strong>local</strong> | <em>lspid</em> | <strong>is-name</strong> <em>isname</em> } ]  [ <em>process-id</em> | <strong>vpn-instance</strong> <em>vpn-instance-name</em> ] command to check IS-IS LSDB information.</p>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_isis_ipv6_cfg_0001.html">IS-ISv6 Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_isis_ipv6_cfg_1130.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_isis_ipv6_cfg_0127.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>