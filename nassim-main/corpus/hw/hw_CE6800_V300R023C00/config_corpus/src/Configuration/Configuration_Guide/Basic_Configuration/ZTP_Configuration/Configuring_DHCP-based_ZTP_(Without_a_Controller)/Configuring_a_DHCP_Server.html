
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a DHCP Server">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_ztp_cfg_0029.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_ztp_cfg_0132.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_ztp_cfg_0024.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ZTP">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ZTP">
<meta name="featuretype" content="Basic Configuration">
<meta name="featurename" content="ZTP">
<meta name="featuretype" content="Basic Configuration">
<meta name="featurename" content="ZTP">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563754729">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring a DHCP Server</title>
</head>
<body><a name="EN-US_TASK_0000001563754729"></a><a name="EN-US_TASK_0000001563754729"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a DHCP Server</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563754729__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>The DHCP server uses Option parameters to carry network configuration parameters that are required for ZTP. The device can function as a DHCP server. If the device to be deployed and DHCP server are on different network segments, configure a DHCP relay agent to forward DHCP packets exchanged between them.</p>
<p>The device sends a DHCP Discover message that carries DHCP Option parameters when the DHCP discover phase starts. <a href="#EN-US_TASK_0000001563754729__table1153892244716">Table 1</a> describes the DHCP Option parameters.</p>
<p><a href="#EN-US_TASK_0000001563754729__table13809745134517">Table 2</a> describes the DHCPv4 Option parameters. </p>
<p><a href="#EN-US_TASK_0000001563754729__table186467222167">Table 3</a> describes the DHCP Option parameters required in SZTP.</p>
<div class="caution"><span class="cautiontitle"><img src="public_sys-resources/caution_3.0-en-us.png"> </span><div class="cautionbody"><ul><li>The DHCP server does not support authentication and may be spoofed. You are advised to use a trusted DHCP server for deployment on a secure network.</li></ul>
<ul><li>DHCP uses a non-encrypted transmission protocol, so the user name and password of the SFTP file server carried in DHCP Option 66 and Option 67 have security risks. You are advised to use this protocol on a secure network.</li></ul>
</div></div>

<div class="tableBorder"><a name="EN-US_TASK_0000001563754729__table1153892244716"></a><a name="table1153892244716"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0000001563754729__table1153892244716" frame="border" border="1" rules="all"><caption><b>Table 1 </b>DHCPv4 Option parameters in a request</caption><thead align="left"><tr id="EN-US_TASK_0000001563754729__en-us_task_0000001848699449_row195381622194713"><th align="left" class="cellrowborder" valign="top" width="10.3010301030103%" id="mcps1.3.1.6.2.4.1.1" liSelected="liSelected"><p id="EN-US_TASK_0000001563754729__en-us_task_0000001848699449_p165390221479">Option</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="28.8028802880288%" id="mcps1.3.1.6.2.4.1.2" liSelected="liSelected"><p id="EN-US_TASK_0000001563754729__en-us_task_0000001848699449_p11539622154718">Function</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="60.89608960896089%" id="mcps1.3.1.6.2.4.1.3" liSelected="liSelected"><p id="EN-US_TASK_0000001563754729__en-us_task_0000001848699449_p2053912234712">Example</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_TASK_0000001563754729__en-us_task_0000001848699449_row553913229477"><td class="cellrowborder" valign="top" width="10.3010301030103%" headers="mcps1.3.1.6.2.4.1.1 "><p id="EN-US_TASK_0000001563754729__en-us_task_0000001848699449_p453916226477">Option 60</p>
</td>
<td class="cellrowborder" valign="top" width="28.8028802880288%" headers="mcps1.3.1.6.2.4.1.2 "><p id="EN-US_TASK_0000001563754729__en-us_task_0000001848699449_p65395224477">Vendor ID, which indicates the vendor and model of a device.</p>
</td>
<td class="cellrowborder" valign="top" width="60.89608960896089%" headers="mcps1.3.1.6.2.4.1.3 "><p id="EN-US_TASK_0000001563754729__en-us_task_0000001848699449_p12539122154710">"HUAWEI <span class="keyword" id="EN-US_TASK_0000001563754729__en-us_task_0000001848699449_keyword1021385931919">CE6866-48S8CQ-P</span>"</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001563754729__en-us_task_0000001848699449_row15539102274716"><td class="cellrowborder" valign="top" width="10.3010301030103%" headers="mcps1.3.1.6.2.4.1.1 "><p id="EN-US_TASK_0000001563754729__en-us_task_0000001848699449_p12539822114715">Option 61</p>
</td>
<td class="cellrowborder" valign="top" width="28.8028802880288%" headers="mcps1.3.1.6.2.4.1.2 "><p id="EN-US_TASK_0000001563754729__en-us_task_0000001848699449_p765619231324">Client ID, which indicates the ESN and MAC address of a device.</p>
</td>
<td class="cellrowborder" valign="top" width="60.89608960896089%" headers="mcps1.3.1.6.2.4.1.3 "><p id="EN-US_TASK_0000001563754729__en-us_task_0000001848699449_p175391422194720">"2102354LMB0123456517 00e0-fc12-3456"</p>
</td>
</tr>
</tbody>
</table>
</div>

<div class="tableBorder"><a name="EN-US_TASK_0000001563754729__table13809745134517"></a><a name="table13809745134517"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0000001563754729__table13809745134517" frame="border" border="1" rules="all"><caption><b>Table 2 </b>DHCPv4 Option parameters for intermediate file-based ZTP</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.3033303330333%" id="mcps1.3.1.7.2.4.1.1" liSelected="liSelected"><p>Option</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.36333633363336%" id="mcps1.3.1.7.2.4.1.2" liSelected="liSelected"><p>Mandatory or Not</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.1.7.2.4.1.3" liSelected="liSelected"><p>Function</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.3033303330333%" headers="mcps1.3.1.7.2.4.1.1 "><p>Option 1</p>
</td>
<td class="cellrowborder" valign="top" width="33.36333633363336%" headers="mcps1.3.1.7.2.4.1.2 "><p>Yes</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.1.7.2.4.1.3 "><p>Specifies the subnet mask of the IP address.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.3033303330333%" headers="mcps1.3.1.7.2.4.1.1 "><p>Option 3</p>
</td>
<td class="cellrowborder" valign="top" width="33.36333633363336%" headers="mcps1.3.1.7.2.4.1.2 "><p>Yes</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.1.7.2.4.1.3 "><p>Specifies the egress gateway of the DHCP client.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.3033303330333%" headers="mcps1.3.1.7.2.4.1.1 "><p>Option 6</p>
</td>
<td class="cellrowborder" valign="top" width="33.36333633363336%" headers="mcps1.3.1.7.2.4.1.2 "><p>No</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.1.7.2.4.1.3 "><p>Specifies the IP address of the DNS server.</p>
<p>A DNS server is required if a domain name (for example, www.ztp.com) is specified as the host name of the intermediate file server. If an IP address is specified as the host name of the intermediate file server, no DNS server is required.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.3033303330333%" headers="mcps1.3.1.7.2.4.1.1 "><p>Option 7</p>
</td>
<td class="cellrowborder" valign="top" width="33.36333633363336%" headers="mcps1.3.1.7.2.4.1.2 "><p>No</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.1.7.2.4.1.3 "><p>Specifies the IPv4 address of the Syslog server.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.3033303330333%" headers="mcps1.3.1.7.2.4.1.1 "><p>Option 66</p>
</td>
<td class="cellrowborder" valign="top" width="33.36333633363336%" headers="mcps1.3.1.7.2.4.1.2 "><p>No</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.1.7.2.4.1.3 "><p>Specifies the host name of the intermediate file server.</p>
<div class="p">The following file servers are supported:<ul><li>The address format of an SFTP server is sftp://<em>username</em>:<em>password</em>@<em>hostname</em>:<em>port</em>.</li><li>The address format of an HTTP server is http://<em>hostname</em>:<em>port</em>.</li><li>The address format of a TFTP server is tftp://<em>hostname</em>.</li><li>The address format of an FTP server is ftp://<em>username</em>:<em>password</em>@<em>hostname</em>:<em>port</em>.</li></ul>
</div>
<p>In this format, <em>port</em> is optional and <em>hostname</em> can be set to a domain name or an IP address. If <em>hostname</em> is set to a domain name, a DNS server is required.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><ul><li>The configured server URL cannot contain forward slashes (/) or number signs (#).</li><li>The domain name of the SFTP, HTTP, TFTP, or FTP server is in the standard URL format.</li><li>SFTP is recommended because it is more secure than TFTP, FTP, and HTTP.</li></ul>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.3033303330333%" headers="mcps1.3.1.7.2.4.1.1 "><p>Option 150</p>
</td>
<td class="cellrowborder" valign="top" width="33.36333633363336%" headers="mcps1.3.1.7.2.4.1.2 "><p>No</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.1.7.2.4.1.3 "><p>Specifies the host name of the intermediate file server.</p>
<p>This field can be set to the IP address of the TFTP server only. The value format is <em>hostname</em>, for example, 10.1.1.1.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>If both Option 66 and Option 150 are configured, the Option 66 field is preferentially parsed.</p>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.3033303330333%" headers="mcps1.3.1.7.2.4.1.1 "><p>Option 67</p>
</td>
<td class="cellrowborder" valign="top" width="33.36333633363336%" headers="mcps1.3.1.7.2.4.1.2 "><p>Yes</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.1.7.2.4.1.3 "><p>Specifies the name of the intermediate file.</p>
<p>The value format is <em>path</em>/<em>filename</em>, whereby:</p>
<ul><li><em>path</em> may or may not contain the host name of the intermediate file server. For example, the value can be <strong>/script/ztp_script.py</strong> without a host name, or <strong>sftp://sftp_user:Hyx_Hy1234@10.1.3.2/ztp_script.py</strong> with a host name. If the path without a host name is used, you must set Option 66. If the server type is TFTP server, you can also set Option 150.</li><li><em>filename</em> can be <strong>ztp***.ini</strong> or <strong>ztp***.py</strong>, and has a maximum length of 64 characters.</li></ul>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>The configured intermediate file name cannot contain forward slashes (/) or number signs (#).</p>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.3033303330333%" headers="mcps1.3.1.7.2.4.1.1 "><p>Option 148</p>
</td>
<td class="cellrowborder" valign="top" width="33.36333633363336%" headers="mcps1.3.1.7.2.4.1.2 "><p>No</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.1.7.2.4.1.3 "><p>Specifies the Syslog port number.</p>
<p>The value format is <em>syslog_port</em>.</p>
<ul><li><em>syslog_port</em>: port number for sending Syslogs.</li></ul>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>If the Syslog port number corresponding to the Syslog IP address specified by Option 7 is invalid, port 514 is used by default, and the ZTP process is not terminated.</p>
</div></div>
</td>
</tr>
</tbody>
</table>
</div>

<div class="tableBorder"><a name="EN-US_TASK_0000001563754729__table186467222167"></a><a name="table186467222167"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0000001563754729__table186467222167" frame="border" border="1" rules="all"><caption><b>Table 3 </b>DHCP Option parameters for SZTP</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.1.8.2.4.1.1" liSelected="liSelected"><p>Option</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.3033303330333%" id="mcps1.3.1.8.2.4.1.2" liSelected="liSelected"><p>Mandatory or Not</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.36333633363336%" id="mcps1.3.1.8.2.4.1.3" liSelected="liSelected"><p>Function</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.1.8.2.4.1.1 "><p>Option 1</p>
</td>
<td class="cellrowborder" valign="top" width="33.3033303330333%" headers="mcps1.3.1.8.2.4.1.2 "><p>Yes</p>
</td>
<td class="cellrowborder" valign="top" width="33.36333633363336%" headers="mcps1.3.1.8.2.4.1.3 "><p>Specifies the subnet mask of the IP address.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.1.8.2.4.1.1 "><p>Option 3</p>
</td>
<td class="cellrowborder" valign="top" width="33.3033303330333%" headers="mcps1.3.1.8.2.4.1.2 "><p>Yes</p>
</td>
<td class="cellrowborder" valign="top" width="33.36333633363336%" headers="mcps1.3.1.8.2.4.1.3 "><p>Specifies the egress gateway of the DHCP client.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.1.8.2.4.1.1 "><p>Option 6</p>
</td>
<td class="cellrowborder" valign="top" width="33.3033303330333%" headers="mcps1.3.1.8.2.4.1.2 "><p>No</p>
</td>
<td class="cellrowborder" valign="top" width="33.36333633363336%" headers="mcps1.3.1.8.2.4.1.3 "><p>Specifies the IP address of the DNS server.</p>
<p>A DNS server is required if a domain name (for example, www.ztp.com) is specified as the host name of the intermediate file server. If an IP address is specified as the host name of the intermediate file server, no DNS server is required.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.1.8.2.4.1.1 "><p>Option 7</p>
</td>
<td class="cellrowborder" valign="top" width="33.3033303330333%" headers="mcps1.3.1.8.2.4.1.2 "><p>No</p>
</td>
<td class="cellrowborder" valign="top" width="33.36333633363336%" headers="mcps1.3.1.8.2.4.1.3 "><p>Specifies the IP address of the Syslog server.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.1.8.2.4.1.1 "><p>Option 143</p>
</td>
<td class="cellrowborder" valign="top" width="33.3033303330333%" headers="mcps1.3.1.8.2.4.1.2 "><p>Yes</p>
</td>
<td class="cellrowborder" valign="top" width="33.36333633363336%" headers="mcps1.3.1.8.2.4.1.3 "><p>Specifies the bootstrap server address list.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This field must be configured using the <a href="cmdqueryname=option"><b><span class="cmdname">option</span></b></a> <strong>143</strong> <strong><span>hex</span></strong> <i><span class="varname">sub-hex-string</span></i> command.</p>
</div></div>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563754729__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure the DHCP server.</span></li><li><span>(Optional) Configure the DHCP relay agent.</span><p><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If a Huawei device is used as the DHCP relay agent, see "DHCPv4 Configuration" in <span>Configuration Guide</span> &gt; IP Address and Service Configuration.</p>
<p>If a third-party device is used as the DHCP relay agent, see the operation guide of the third-party DHCP server and DHCP relay agent.</p>
</div></div>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_ztp_cfg_0029.html">Configuring DHCP-based ZTP (Without a Controller)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_ztp_cfg_0132.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_ztp_cfg_0024.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>