
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Understanding VBST Protection Functions">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_vbst_cfg_0023.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_vbst_cfg_0025.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VBST">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VBST">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="VBST">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001513048354">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Understanding VBST Protection Functions</title>
</head>
<body><a name="EN-US_CONCEPT_0000001513048354"></a><a name="EN-US_CONCEPT_0000001513048354"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Understanding VBST Protection Functions</h1>
<div><div class="section"><h4 class="sectiontitle">BPDU Protection</h4><p>In <a href="#EN-US_CONCEPT_0000001513048354__en-us_concept_0227126141_fig781314151104">Figure 1</a>, the port connecting DeviceC to a PC is configured as an edge port. When the edge port receives BPDUs, DeviceC automatically sets it to a non-edge port and performs spanning tree recalculation. If the bridge priority in the BPDUs sent by an attacker is higher than the priority of the root bridge, the network topology will change, thereby interrupting service traffic. This is known as a Denial of Service (DoS) attack.</p>
<p>If this situation occurs after BPDU protection is enabled on DeviceC, DeviceC sets the edge port to the error-down state, while keeping the port attributes unchanged.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001513048354__en-us_concept_0227126141_fig781314151104"><a name="EN-US_CONCEPT_0000001513048354__en-us_concept_0227126141_fig781314151104"></a><a name="en-us_concept_0227126141_fig781314151104"></a><span class="figcap"><b>Figure 1 </b>BPDU protection</span><br><span><img class="vsd" src="figure/en-us_image_0000001512689230.png"></span></div>
</div>
<div class="section"><h4 class="sectiontitle">TC Protection</h4><p>A device deletes its MAC address entries and ARP entries after receiving TC BPDUs. If an attacker sends a large number of forged TC BPDUs to the device within a short period, the device frequently deletes these entries, increasing the device load and affecting network stability.</p>
<p>After enabling TC protection on a device, you can set the number of TC BPDUs that the device can process within a specified period. If the number of TC BPDUs received by the device within the specified period exceeds the configured threshold, the device processes only the specified number of TC BPDUs. After the time period, the device processes all the excess TC BPDUs together. This prevents the device from frequently deleting MAC address entries and ARP entries, reducing the device load.</p>
</div>
<div class="section"><h4 class="sectiontitle">Root Protection</h4><p>The root bridge on a network may receive superior BPDUs due to incorrect configurations or malicious attacks. If this occurs, the root bridge can no longer function and the network topology will change incorrectly. As a result, traffic may be switched from high-rate links to low-rate links, leading to network congestion.</p>
<p>In <a href="#EN-US_CONCEPT_0000001513048354__en-us_concept_0227126141_fig661335316334">Figure 2</a>, DeviceA and DeviceB are deployed at the core layer of the network. The bandwidth of the link between these two devices is 100 Gbit/s. DeviceA is the root bridge on the network. The bandwidth of the links between DeviceC and DeviceA and between DeviceC and DeviceB is 10 Gbit/s. Normally, the link between DeviceB and DeviceC is blocked. When a new device, DeviceD, is deployed and connected to DeviceC, DeviceD is elected as the new root bridge because it has a higher bridge priority than DeviceA. If the 100 Gbit/s link between DeviceA and DeviceB is blocked, VLAN traffic is transmitted through the two 10 Gbit/s links. As a result, network congestion and traffic loss may occur.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001513048354__en-us_concept_0227126141_fig661335316334"><a name="EN-US_CONCEPT_0000001513048354__en-us_concept_0227126141_fig661335316334"></a><a name="en-us_concept_0227126141_fig661335316334"></a><span class="figcap"><b>Figure 2 </b>Root Protection</span><br><span><img class="vsd" src="figure/en-us_image_0000001563768701.png"></span></div>
<p>In this case, root protection can be configured on the port of DeviceC connected to DeviceD. If root protection is enabled on a designated port, the port role cannot be changed. When the designated port receives a superior BPDU, it enters the Discarding state and does not forward packets. If the port does not receive any superior BPDUs within a specified period (twice the Forward Delay timer value by default), it automatically enters the Forwarding state.</p>
<p>Root protection takes effect only on designated ports.</p>
</div>
<div class="section"><h4 class="sectiontitle">Loop Prevention</h4><p>On a network running a spanning tree protocol, a device maintains the root port and blocked port states based on BPDUs received from upstream devices. However, if the ports cannot receive BPDUs from upstream devices because of link congestion or unidirectional link failures, the device re-selects a root port. In this case, the original root port becomes a designated port, and the original blocked port changes to the Forwarding state, which may cause network loops. In <a href="#EN-US_CONCEPT_0000001513048354__en-us_concept_0227126141_fig89751225192816">Figure 3</a>, when the link between BP 2 and CP 1 is congested, the root port CP 1 on DeviceC cannot receive BPDUs from the upstream device. After a specified period, the alternate port CP 2 becomes the root port, and CP 1 becomes the designated port, resulting in a loop.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001513048354__en-us_concept_0227126141_fig89751225192816"><a name="EN-US_CONCEPT_0000001513048354__en-us_concept_0227126141_fig89751225192816"></a><a name="en-us_concept_0227126141_fig89751225192816"></a><span class="figcap"><b>Figure 3 </b>Topology change upon link congestion</span><br><span><img class="vsd" src="figure/en-us_image_0000001564008629.png"></span></div>
<p>If the root port or alternate port does not receive BPDUs from the upstream device for a long time, the device enabled with loop prevention sends a notification to the NMS. In this case, the root port enters the Discarding state and becomes the designated port, while the alternate port remains blocked and becomes the designated port. This prevents loops. After link congestion is cleared or unidirectional link failures are rectified, the port receives BPDUs for negotiation and restores its original role and status.</p>
<p>Loop prevention takes effect only on the root port and alternate ports.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_vbst_cfg_0023.html">Configuring VBST Protection Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_vbst_cfg_0025.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>