
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Applying a Traffic Policy">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_mqc_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_mqc_cfg_0007.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_mqc_cfg_0009.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MQC">
<meta name="featuretype" content="QoS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MQC">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513047058">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Applying a Traffic Policy</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001513047058"></a><a name="EN-US_TASK_0000001513047058"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Applying a Traffic Policy</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001513047058__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before applying a traffic policy, <a href="galaxy_mqc_cfg_0008.html">configure the traffic policy</a>.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If a traffic policy fails to be applied due to insufficient ACL resources on the device, you are advised to delete the traffic policy configuration that fails to be applied. Otherwise, after configurations are saved and the device is restarted, the configuration of other services that are running properly cannot be restored.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001513047058__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li id="EN-US_TASK_0000001513047058__step79665371913"><span id="EN-US_TASK_0000001513047058__cmd39662361912">Apply a traffic policy.</span><ul id="EN-US_TASK_0000001513047058__choices19259145919192"><li id="EN-US_TASK_0000001513047058__choice325914592195">Apply a traffic policy to the system.<ol type="a" id="EN-US_TASK_0000001513047058__ol9684101612117"><li id="EN-US_TASK_0000001513047058__li450616256223">Apply a traffic policy to the system.<pre class="screen" id="EN-US_TASK_0000001513047058__screen16590154153116"><a href="cmdqueryname=traffic-policy"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname1308059803175340">traffic-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001513047058__varname1924546263175340">policy-name</span></i> <strong><span id="EN-US_TASK_0000001513047058__cmdparmname286393046175340">global</span></strong><span> </span><span>[ <strong><span id="EN-US_TASK_0000001513047058__cmdparmname708365692175340">slot</span></strong> <i><span class="varname" id="EN-US_TASK_0000001513047058__varname2009116274175340">slot-id</span></i> ]</span> { <strong><span id="EN-US_TASK_0000001513047058__cmdparmname256944024175340">inbound</span></strong> | <strong><span id="EN-US_TASK_0000001513047058__cmdparmname87205768175340">outbound</span></strong> }</pre>
</li><li id="EN-US_TASK_0000001513047058__li1531019012261">Commit the configuration.<pre class="screen" id="EN-US_TASK_0000001513047058__screen5704135202710"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname1784862115612">commit</span></b></a></pre>
</li></ol>
<p id="EN-US_TASK_0000001513047058__p193725171510">The application of a traffic policy in the outbound direction globally is not supported by the <span>CE6885-LL (low latency mode)</span>. That is, only the <strong id="EN-US_TASK_0000001513047058__b1077275910479">inbound</strong> parameter is supported, and the <strong id="EN-US_TASK_0000001513047058__b5746182104814">outbound</strong> parameter is not supported by the <span>CE6885-LL (low latency mode)</span>.</p>
</li><li id="EN-US_TASK_0000001513047058__choice74001730152313">Apply a traffic policy to an interface.<ol type="a" id="EN-US_TASK_0000001513047058__ol1401330162315"><li id="EN-US_TASK_0000001513047058__li640103015231">Enter the interface view.<pre class="screen" id="EN-US_TASK_0000001513047058__screen1327345082015"><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname6642163772919">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001513047058__varname1064283713294">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0000001513047058__varname16421374294">interface-number</span></i></pre>
</li><li id="EN-US_TASK_0000001513047058__li4885132412574">Apply a traffic policy to the interface.<pre class="screen" id="EN-US_TASK_0000001513047058__screen6671142133019"><a href="cmdqueryname=traffic-policy"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname313925976175340">traffic-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001513047058__varname517264962175340">policy-name</span></i> { <strong><span id="EN-US_TASK_0000001513047058__cmdparmname584570000175340">inbound</span></strong> | <strong><span id="EN-US_TASK_0000001513047058__cmdparmname419941659175340">outbound</span></strong> }</pre>
<p id="EN-US_TASK_0000001513047058__p178136269503">The application of a traffic policy in the outbound direction globally is not supported by the <span>CE6885-LL (low latency mode)</span>. That is, only the <strong id="EN-US_TASK_0000001513047058__b132271720122713">inbound</strong> parameter is supported, and the <strong id="EN-US_TASK_0000001513047058__b1622702017275">outbound</strong> parameter is not supported by the <span>CE6885-LL (low latency mode)</span>.</p>
</li><li id="EN-US_TASK_0000001513047058__li93511129185920">Exit the interface view.<pre class="screen" id="EN-US_TASK_0000001513047058__screen15351129145912"><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname103514293593">quit</span></b></a></pre>
</li><li id="EN-US_TASK_0000001513047058__li850218316583">Commit the configuration.<pre class="screen" id="EN-US_TASK_0000001513047058__screen1450210320581"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname350215365820">commit</span></b></a></pre>
</li></ol>
</li><li id="EN-US_TASK_0000001513047058__choice18302189004">Apply a traffic policy to a VLAN.<ol type="a" id="EN-US_TASK_0000001513047058__ol12302149302"><li id="EN-US_TASK_0000001513047058__li143021491905">Create a VLAN and enter the VLAN view.<pre class="screen" id="EN-US_TASK_0000001513047058__screen3381105313301"><a href="cmdqueryname=vlan"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname1698748671175340">vlan</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001513047058__varname1888367191175340">vlan-id</span></i></pre>
</li><li id="EN-US_TASK_0000001513047058__li1330229104">Apply a traffic policy to the VLAN.<pre class="screen" id="EN-US_TASK_0000001513047058__screen0303591906"><a href="cmdqueryname=traffic-policy"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname14303139406">traffic-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001513047058__varname193031896012">policy-name</span></i> { <strong><span id="EN-US_TASK_0000001513047058__cmdparmname2303149407">inbound</span></strong> | <strong><span id="EN-US_TASK_0000001513047058__cmdparmname6303891306">outbound</span></strong> }</pre>
<p id="EN-US_TASK_0000001513047058__p0219194210511">The application of a traffic policy in the outbound direction globally is not supported by the <span>CE6885-LL (low latency mode)</span>. That is, only the <strong id="EN-US_TASK_0000001513047058__b1612922316282">inbound</strong> parameter is supported, and the <strong id="EN-US_TASK_0000001513047058__b71291723162814">outbound</strong> parameter is not supported by the <span>CE6885-LL (low latency mode)</span>.</p>
</li><li id="EN-US_TASK_0000001513047058__li153031292008">Exit the VLAN view.<pre class="screen" id="EN-US_TASK_0000001513047058__screen03031391205"><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname18303179209">quit</span></b></a></pre>
</li><li id="EN-US_TASK_0000001513047058__li1630318911013">Commit the configuration.<pre class="screen" id="EN-US_TASK_0000001513047058__screen43031898019"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname183032091603">commit</span></b></a></pre>
</li></ol>
</li><li id="EN-US_TASK_0000001513047058__choice163839114617">Apply a traffic policy to a VPN instance.<ol type="a" id="EN-US_TASK_0000001513047058__ol3996175818214"><li id="EN-US_TASK_0000001513047058__li97844334916">Create a VPN instance and enter the VPN instance view.<pre class="screen" id="EN-US_TASK_0000001513047058__screen278413324914"><a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname12998458224">ip vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001513047058__varname999915583220">vpn-instance-name</span></i></pre>
</li><li id="EN-US_TASK_0000001513047058__li1679315336494">Apply a traffic policy to the VPN instance.<pre class="screen" id="EN-US_TASK_0000001513047058__screen17793333114918"><a href="cmdqueryname=traffic-policy"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname12793733134912">traffic-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001513047058__varname87937334494">policy-name</span></i> <strong><span id="EN-US_TASK_0000001513047058__cmdparmname107932336499">inbound</span></strong></pre>
<div class="note" id="EN-US_TASK_0000001513047058__note1951611264182"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001513047058__p20630164181112">A traffic policy can be applied to a VPN instance only in the inbound direction.</p>
</div></div>
</li><li id="EN-US_TASK_0000001513047058__li1033231810504">Exit the VPN instance view.<pre class="screen" id="EN-US_TASK_0000001513047058__screen33321918105011"><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname153324186507">quit</span></b></a></pre>
</li><li id="EN-US_TASK_0000001513047058__li3332718155012">Commit the configuration.<pre class="screen" id="EN-US_TASK_0000001513047058__screen733281865010"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname10332518185018">commit</span></b></a></pre>
</li></ol>
</li><li id="EN-US_TASK_0000001513047058__choice112066168582">Apply a traffic policy to a BD.<ol type="a" id="EN-US_TASK_0000001513047058__ol7206141605812"><li id="EN-US_TASK_0000001513047058__li220611160587">Create a BD and enter the BD view.<pre class="screen" id="EN-US_TASK_0000001513047058__screen6206111616587"><a href="cmdqueryname=bridge-domain"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname020671655818">bridge-domain</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001513047058__varname320711614582">bd-id</span></i></pre>
</li><li id="EN-US_TASK_0000001513047058__li2020731695815">Apply a traffic policy to the BD.<pre class="screen" id="EN-US_TASK_0000001513047058__screen320781685819"><a href="cmdqueryname=traffic-policy"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname220791610588">traffic-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001513047058__varname720710168582">policy-name</span></i> { <strong><span id="EN-US_TASK_0000001513047058__cmdparmname162071416175810">inbound</span></strong> | <strong><span id="EN-US_TASK_0000001513047058__cmdparmname1420761617587">outbound</span></strong> }</pre>
<p id="EN-US_TASK_0000001513047058__p1420761645820">After a traffic policy is applied to a BD, the traffic policy takes effect for incoming or outgoing packets that belong to the BD.</p>
</li><li id="EN-US_TASK_0000001513047058__li02074169588">Exit the BD view.<pre class="screen" id="EN-US_TASK_0000001513047058__screen122074161588"><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname112071168582">quit</span></b></a></pre>
</li><li id="EN-US_TASK_0000001513047058__li8207316125818">Commit the configuration.<pre class="screen" id="EN-US_TASK_0000001513047058__screen182071116185819"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname1420761605817">commit</span></b></a> </pre>
</li></ol>
<p id="EN-US_TASK_0000001513047058__p1172992117269">For the CE6820H, CE6820H-K, CE6820S, and <span>CE6885-LL (low latency mode)</span>, a traffic policy cannot be applied in the BD view.</p>
</li><li id="EN-US_TASK_0000001513047058__choice79560582021">Apply a traffic policy to a QoS group.<p id="EN-US_TASK_0000001513047058__p1358312544232"><a name="EN-US_TASK_0000001513047058__choice79560582021"></a><a name="choice79560582021"></a>If the same traffic policy needs to be applied to multiple VLANs and interfaces or multiple traffic classifiers for matching packets from different source IP addresses need to be bound to the same traffic policy, you are advised to add the VLANs, interfaces, or source IP addresses to the same QoS group and apply the traffic policy to the QoS group.</p>
<ol type="a" id="EN-US_TASK_0000001513047058__ol1195615819217"><li id="EN-US_TASK_0000001513047058__li695765810216">Create a QoS group and enter the QoS group view.<pre class="screen" id="EN-US_TASK_0000001513047058__screen1995710588218"><a href="cmdqueryname=qos+group"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname18957185812211">qos group</span></b></a> <em id="EN-US_TASK_0000001513047058__i1871614451911">group-name</em></pre>
</li><li id="EN-US_TASK_0000001513047058__li134291732113519">Add a specified interface, VLAN, or source IP address to the QoS group.<pre class="screen" id="EN-US_TASK_0000001513047058__screen72011948183619"><strong id="EN-US_TASK_0000001513047058__b494293794020"><a href="cmdqueryname=group-member"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname112281223411">group-member</span></b></a> </strong>{ <strong id="EN-US_TASK_0000001513047058__b494220376403"><strong><span id="EN-US_TASK_0000001513047058__cmdparmname1764102764116">interface</span></strong> </strong>{ <em id="EN-US_TASK_0000001513047058__i116821032370">interface-type</em><em id="EN-US_TASK_0000001513047058__i7682173103711"> interface-num</em> | <em id="EN-US_TASK_0000001513047058__i76823310373"><i><span class="varname" id="EN-US_TASK_0000001513047058__varname1461805124215">interface-name</span></i></em> [ <strong id="EN-US_TASK_0000001513047058__b56828353715">to</strong><em id="EN-US_TASK_0000001513047058__i1868213315377"> interface-type</em><em id="EN-US_TASK_0000001513047058__i12682143103716"> interface-num</em> | <em id="EN-US_TASK_0000001513047058__i1868293103713"><i><span class="varname" id="EN-US_TASK_0000001513047058__varname19468714134218">interface-name</span></i></em> ] } &amp;&lt;1-8&gt; | <strong id="EN-US_TASK_0000001513047058__b179259114013"><strong><span id="EN-US_TASK_0000001513047058__cmdparmname584919480413">vlan</span></strong> </strong>{ <em id="EN-US_TASK_0000001513047058__i19459204019"><i><span class="varname" id="EN-US_TASK_0000001513047058__varname877812214213">vlanid</span></i></em> [ <strong id="EN-US_TASK_0000001513047058__b11914596402">to</strong><em id="EN-US_TASK_0000001513047058__i39159194019"> <i><span class="varname" id="EN-US_TASK_0000001513047058__varname2614103624220">vlanid</span></i></em> ] } &amp;&lt;1-8&gt; | <strong id="EN-US_TASK_0000001513047058__b7269199194117"><strong><span id="EN-US_TASK_0000001513047058__cmdparmname165561754174110">ip source</span></strong> </strong><em id="EN-US_TASK_0000001513047058__i162696914413"><i><span class="varname" id="EN-US_TASK_0000001513047058__varname2027684112429">ip-address</span></i></em> { <em id="EN-US_TASK_0000001513047058__i42694914419"><i><span class="varname" id="EN-US_TASK_0000001513047058__varname1765554764220">ip-address-wildcard</span></i></em> | <em id="EN-US_TASK_0000001513047058__i92691591417"><i><span class="varname" id="EN-US_TASK_0000001513047058__varname5644454154214">ip-address-netmask</span></i></em> } }</pre>
<p id="EN-US_TASK_0000001513047058__p20182191164613">Only one type of member can be specified.</p>
<p id="EN-US_TASK_0000001513047058__p4118144143813">Only the <span>CE6866, CE6860-SAN, CE6866K, CE6860-HAM, CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, CE8850-HAM</span> and <span>CE6820H, CE6820H-K, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6820S</span> support the configuration of adding a specified source IP address to a QoS group, that is, <strong id="EN-US_TASK_0000001513047058__b169390219414">group-member</strong> <strong id="EN-US_TASK_0000001513047058__b129393211147">ip source</strong>.</p>
</li><li id="EN-US_TASK_0000001513047058__li895715585219">Apply a traffic policy to the QoS group.<pre class="screen" id="EN-US_TASK_0000001513047058__screen5957115813213"><a href="cmdqueryname=traffic-policy"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname195714588219">traffic-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001513047058__varname49576581726">policy-name</span></i> { <strong><span id="EN-US_TASK_0000001513047058__cmdparmname11957155813213">inbound</span></strong> | <strong><span id="EN-US_TASK_0000001513047058__cmdparmname12957105810218">outbound</span></strong> }</pre>
<p id="EN-US_TASK_0000001513047058__p58539311932">The application of a traffic policy in the outbound direction is not supported by the <span>CE6885-LL (low latency mode)</span>. That is, only the <strong id="EN-US_TASK_0000001513047058__b155114448294">inbound</strong> parameter is supported, and the <strong id="EN-US_TASK_0000001513047058__b145111844112918">outbound</strong> parameter is not supported by the <span>CE6885-LL (low latency mode)</span>.</p>
</li><li id="EN-US_TASK_0000001513047058__li169579581724">Exit the QoS group view.<pre class="screen" id="EN-US_TASK_0000001513047058__screen49571858626"><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname1895755818217">quit</span></b></a></pre>
</li><li id="EN-US_TASK_0000001513047058__li12957175817213">Commit the configuration.<pre class="screen" id="EN-US_TASK_0000001513047058__screen99574581127"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__cmdname3957205811217">commit</span></b></a></pre>
</li></ol>
</li></ul>
</li><li><span>(Optional) Enable the device to accurately deliver the traffic policy that is applied to a VLAN, a VLANIF interface, or an Eth-Trunk.</span><p><pre class="screen"><a href="cmdqueryname=traffic-policy+chip-based-mode"><b><span class="cmdname">traffic-policy chip-based-mode</span></b></a></pre>
<p>When a traffic policy is applied to a VLAN, a VLANIF interface, or an Eth-Trunk and packets match ACL rules, the traffic policy is delivered to all chips of the device. If there is no corresponding VLAN, VLANIF interface, or Eth-Trunk member interface on some chips, the traffic policy is not delivered.</p>
<p>This command is valid only for new traffic policies. If you want to enable this function for an existing traffic policy, delete the traffic policy and re-configure it.</p>
<p>By default, a device is not enabled to accurately deliver the traffic policy that is applied to a VLAN, a VLANIF interface, or an Eth-Trunk.</p>
</p></li><li><span>(Optional) Enable the function of making only one traffic policy among multiple traffic policies take effect.</span><p><pre class="screen"><strong><a href="cmdqueryname=qos+traffic-policy+only-one-effective"><b><span class="cmdname">qos traffic-policy only-one-effective</span></b></a></strong></pre>
<p>After this command is configured, if there are multiple traffic policies in the system, only one traffic policy takes effect and the other traffic policies do not take effect.</p>
<p>By default, the function of making only one traffic policy among multiple traffic policies take effect is disabled.</p>
<p>This function is supported only on the <span>CE6866, CE6860-SAN, CE6866K, CE6860-HAM, CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, CE8850-HAM</span>, <span>CE8855, CE8851-32CQ4BQ, CE6855-48XS8CQ, CE6885, CE6885-SAN, CE6885-LL, CE6885-T, CE6863E-48S8CQ</span> .</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001513047058__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513047058__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_mqc_cfg_0001.html">MQC Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_mqc_cfg_0007.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_mqc_cfg_0009.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>