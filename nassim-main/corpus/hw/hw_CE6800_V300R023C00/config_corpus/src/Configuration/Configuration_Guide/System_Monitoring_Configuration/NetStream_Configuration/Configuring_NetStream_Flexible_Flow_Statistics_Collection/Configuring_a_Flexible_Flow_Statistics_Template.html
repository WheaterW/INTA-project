
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Flexible Flow Statistics Template">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_netstream_cfg_0063.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_netstream_cfg_0030.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001564121337">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring a Flexible Flow Statistics Template</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001564121337"></a><a name="EN-US_TASK_0000001564121337"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Flexible Flow Statistics Template</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001564121337__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Before configuring flexible flow statistics collection, configure a flexible flow statistics template. To obtain more detailed flow statistics, you can configure whether the statistics include the number of packets and bytes and the indexes of the inbound and outbound interfaces.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001564121337__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure an IPv4 flexible flow statistics template.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Create an IPv4 flexible flow statistics template and enter its view.</span><p><pre class="screen"><a href="cmdqueryname=netstream+record"><b><span class="cmdname">netstream record</span></b></a> <i><span class="varname">record-name</span></i> <strong><span>ip</span></strong></pre>
</p></li><li class="substepexpand"><span>(Optional) Configure a description for an IPv4 flexible flow.</span><p><pre class="screen"><a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description-information</span></i></pre>
</p></li><li class="substepexpand"><span>Configure aggregation keywords for the IPv4 flexible flow statistics template.</span><p><pre class="screen"><a href="cmdqueryname=match+ip"><b><span class="cmdname">match ip</span></b></a> { <strong><span>destination-address</span></strong> | <strong><span>destination-port</span></strong> | <strong><span>tos</span></strong> | <strong><span>protocol</span></strong> | <strong><span>source-address</span></strong> | <strong><span>source-port</span></strong> | <strong><span>source-mac</span></strong> | <strong><span>destination-mac</span></strong> | <strong><span>ethernet-type</span></strong> | <strong><span>vlan</span></strong> }</pre>
<p>By default, no aggregation keyword is configured for an IPv4 flexible flow statistics template. If you run this command multiple times, multiple keywords are configured to aggregate flows that match all these keywords.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure the flexible flow statistics to be sent to the NSC to include the number of packets and bytes.</span><p><pre class="screen"><a href="cmdqueryname=collect+counter"><b><span class="cmdname">collect counter</span></b></a> { <strong><span>bytes</span></strong> | <strong><span>packets</span></strong> }</pre>
<p>By default, the flexible flow statistics to be sent to the NSC do not include the number of packets or bytes.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure the flexible flow statistics to be sent to the NSC to include the indexes of the inbound and outbound interfaces, as well as sampling information.</span><p><pre class="screen"><a href="cmdqueryname=collect+interface"><b><span class="cmdname">collect interface</span></b></a> { <strong><span>input</span></strong> | <strong><span>output</span></strong> | <strong><span>sampler-info</span></strong> }</pre>
<p>By default, the flexible flow statistics to be sent to the NSC do not include the indexes of the inbound and outbound interfaces or sampling information.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure an IPv6 flexible flow statistics template.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Create an IPv6 flexible flow statistics template and enter its view.</span><p><pre class="screen"><a href="cmdqueryname=netstream+record"><b><span class="cmdname">netstream record</span></b></a> <i><span class="varname">record-name</span></i> <strong><span>ipv6</span></strong></pre>
</p></li><li class="substepexpand"><span>(Optional) Configure a description for an IPv6 flexible flow.</span><p><pre class="screen"><a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description-information</span></i></pre>
</p></li><li class="substepexpand"><span>Configure aggregation keywords for the IPv6 flexible flow statistics template.</span><p><pre class="screen"><a href="cmdqueryname=match+ipv6"><b><span class="cmdname">match ipv6</span></b></a> { <strong><span>destination-address</span></strong> | <strong><span>destination-port</span></strong> | <strong><span>tos</span></strong> | <strong><span>flow-label</span></strong> | <strong><span>protocol</span></strong> | <strong><span>source-address</span></strong> | <strong><span>source-port</span></strong> | <strong><span>source-mac</span></strong> | <strong><span>destination-mac</span></strong> | <strong><span>ethernet-type</span></strong> | <strong><span>vlan</span></strong> }</pre>
<p>By default, no aggregation keyword is configured for an IPv6 flexible flow statistics template. If you run this command multiple times, multiple keywords are configured to aggregate flows that match all these keywords.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure the flexible flow statistics to be sent to the NSC to include the number of packets and bytes.</span><p><pre class="screen"><a href="cmdqueryname=collect+counter"><b><span class="cmdname">collect counter</span></b></a> { <strong><span>bytes</span></strong> | <strong><span>packets</span></strong> }</pre>
<p>By default, the flexible flow statistics to be sent to the NSC do not include the number of packets or bytes.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure the flexible flow statistics to be sent to the NSC to include the indexes of the inbound and outbound interfaces, as well as sampling information.</span><p><pre class="screen"><a href="cmdqueryname=collect+interface"><b><span class="cmdname">collect interface</span></b></a> { <strong><span>input</span></strong> | <strong><span>output</span></strong> | <strong><span>sampler-info</span></strong> }</pre>
<p>By default, the flexible flow statistics to be sent to the NSC do not include the indexes of the inbound and outbound interfaces or sampling information.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure a VXLAN flexible flow statistics template.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Create a VXLAN flexible flow statistics template and enter its view.</span><p><pre class="screen"><a href="cmdqueryname=netstream+record"><b><span class="cmdname">netstream record</span></b></a> <i><span class="varname">record-name</span></i> <strong><span>vxlan inner-ip</span></strong></pre>
</p></li><li class="substepexpand"><span>(Optional) Configure a description for a VXLAN flexible flow.</span><p><pre class="screen"><a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description-information</span></i></pre>
</p></li><li class="substepexpand"><span>Configure aggregation keywords for the VXLAN flexible flow statistics template.</span><p><pre class="screen"><a href="cmdqueryname=match+inner-ip"><b><span class="cmdname">match inner-ip</span></b></a> { <strong><span>destination-address</span></strong> | <strong><span>destination-port</span></strong> | <strong><span>tos</span></strong> | <strong><span>protocol</span></strong> | <strong><span>source-address</span></strong> | <strong><span>source-port</span></strong> | <strong><span>source-mac</span></strong> | <strong><span>destination-mac</span></strong> | <strong><span>cvlan</span></strong> | <strong><span>ethernet-type</span></strong> }</pre>
<p>By default, no aggregation keyword is configured for a VXLAN flexible flow statistics template. If you run this command multiple times, multiple keywords are configured to aggregate flows that match all these keywords.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure the flexible flow statistics to be sent to the NSC to include the number of packets and bytes.</span><p><pre class="screen"><a href="cmdqueryname=collect+counter"><b><span class="cmdname">collect counter</span></b></a> { <strong><span>bytes</span></strong> | <strong><span>packets</span></strong> }</pre>
<p>By default, the flexible flow statistics to be sent to the NSC do not include the number of packets or bytes.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure the flexible flow statistics to be sent to the NSC to include the indexes of the inbound and outbound interfaces, as well as sampling information.</span><p><pre class="screen"><a href="cmdqueryname=collect+interface"><b><span class="cmdname">collect interface</span></b></a> { <strong><span>input</span></strong> | <strong><span>output</span></strong> | <strong><span>sampler-info</span></strong> }</pre>
<p>By default, the flexible flow statistics to be sent to the NSC do not include the indexes of the inbound and outbound interfaces or sampling information.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_netstream_cfg_0063.html">Configuring NetStream Flexible Flow Statistics Collection
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_netstream_cfg_0030.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>