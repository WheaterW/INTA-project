
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Basic PIM-DM Functions">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_pim_cfg_0005.html">
<meta name="DC.Relation" scheme="URI" content="vrp_pim_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="vrp_pim_cfg_0009.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176743269">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Basic PIM-DM Functions</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176743269"></a><a name="EN-US_TASK_0000001176743269"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Basic PIM-DM Functions</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176743269__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>On a PIM-DM network, PIM-DM must be enabled on interfaces for the <span class="keyword">devices</span> to set up PIM neighbor relationships with neighboring devices to process data from them.</p>
<p>PIM-DM and PIM-SM cannot be both configured in a public network instance. PIM Hello messages do not carry PIM mode information. Therefore, a PIM device cannot determine the PIM mode of its PIM neighbor. If an RPF interface and RPF neighbor run PIM with different modes, they cannot learn PIM routing information from each other. As a result, multicast forwarding entries cannot be correctly created.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To switch between PIM-DM and PIM-SM, you need to run the <a href="cmdqueryname=undo+multicast+routing-enable"><b><span class="cmdname">undo multicast routing-enable</span></b></a> command in the system view to disable multicast routing, run the <a href="cmdqueryname=multicast+routing-enable"><b><span class="cmdname">multicast routing-enable</span></b></a> command to enable multicast routing again, and then configure PIM-DM or PIM-SM.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176743269__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable IP multicast routing in the public network instance.</span><p><pre class="screen"><a href="cmdqueryname=multicast+routing-enable"><b><span class="cmdname">multicast routing-enable</span></b></a></pre>
</p></li><li><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li><span>Switch the interface working mode from Layer 2 to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
<p> Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li><span>Enable PIM-DM.</span><p><pre class="screen"><a href="cmdqueryname=pim+dm"><b><span class="cmdname">pim dm</span></b></a></pre>
</p><p><p>By default, PIM-DM is not enabled on interfaces.</p>
</p><p><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If you run the <a href="cmdqueryname=undo+pim+dm"><b><span class="cmdname">undo pim dm</span></b></a> command, PIM neighbor and protocol status information on the interface will be deleted. If multicast services are running on the interface, the multicast services will be affected in this case.</p>
<p>PIM-DM can only be configured in a public network instance, not in a VPN instance.</p>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001176743269__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+pim"><b><span class="cmdname">display pim</span></b></a> <strong><span>neighbor</span></strong> [ <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">neighbor-address</span></i> | <strong><span>verbose</span></strong> ] <sup>*</sup> command to check PIM neighbor information.</li><li>Run the <a href="cmdqueryname=display+pim+grafts"><b><span class="cmdname">display pim grafts</span></b></a> command to check unacknowledged PIM-DM Graft messages.</li><li>Run the <a href="cmdqueryname=display+pim"><b><span class="cmdname">display pim</span></b></a> <span>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>all-instance</span></strong> ] </span><strong><span>control-message</span></strong> <strong><span>counters</span></strong> [ <strong><span>interface</span></strong> <i><span class="varname">interface-type interface-number</span></i> | <strong><span>message-type</span></strong> { <strong><span>assert</span></strong> | <strong><span>hello</span></strong> | <strong><span>join-prune</span></strong><span> | <strong><span>graft</span></strong> | <strong><span>graft-ack</span></strong> | <strong><span>state-refresh</span></strong></span> | <strong><span>bsr</span></strong><span> | <strong><span>discovery</span></strong></span> } ] <sup>*</sup> command to check the statistics about sent and received PIM control messages.</li><li>Run the <a href="cmdqueryname=display+pim+routing-table"><b><span class="cmdname">display pim routing-table</span></b></a> [ <i><span class="varname">group-address</span></i> [ <strong><span>mask</span></strong> { <i><span class="varname">group-mask-length</span></i> | <i><span class="varname">group-mask</span></i> } ] | <i><span class="varname">source-address</span></i> [ <strong><span>mask</span></strong> { <i><span class="varname">source-mask-length</span></i> | <i><span class="varname">source-mask</span></i> } ] | <strong><span>incoming-interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <strong><span>outgoing-interface</span></strong> { <strong><span>include</span></strong> | <strong><span>exclude</span></strong> | <strong><span>match</span></strong> } <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <strong><span>flags</span></strong> <i><span class="varname">flag-value</span></i> | <strong><span>fsm</span></strong> ] <sup>*</sup> [ <strong><span>outgoing-interface-number</span></strong> [ <i><span class="varname">number</span></i> ] ] ââââcommand to check PIM routing entries.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_pim_cfg_0005.html">Configuring PIM-DM
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_pim_cfg_0006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_pim_cfg_0009.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>