
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Congestion Monitoring">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_congestion_manage_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_congestion_manage_cfg_0054.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_congestion_manage_cfg_0055.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Congestion Management">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001974083396">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Congestion Monitoring</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001974083396"></a><a name="EN-US_TASK_0000001974083396"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Congestion Monitoring</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001974083396__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>Servers store information about voice, video, and data services, and users obtain data from the servers through <span class="keyword">DeviceB</span>. When a large amount of data is transmitted from the servers to hosts, the total rate of inbound interfaces is higher than the rate of the outbound interface. As a result, congestion may occur on the outbound interface of <span class="keyword">DeviceB</span>.</p>
<p>When packet loss occurs on the outbound interface of <span class="keyword">DeviceB</span> due to queue congestion, the administrator needs to know the buffer usage of each queue and information about the packets that cause congestion to determine subsequent network traffic planning and adjustment.</p>
<div class="fignone"><span class="figcap"><b>Figure 1 </b>Network diagram for configuring congestion monitoring</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1, interface 2, and interface 3 represent <span>100GE</span> <span>1/0/1</span>, <span>100GE</span> <span>1/0/2</span>, and <span>100GE</span> <span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img src="figure/en-us_image_0000002010525957.png" width="NaN" height="NaN"></span></div>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This example is supported only by the <span>CE6866, CE6860-SAN, CE6866K, CE6860-HAM, CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, CE8850-HAM</span>, <span>CE8855, CE8851-32CQ4BQ, CE6855-48XS8CQ, CE6885, CE6885-SAN, CE6885-LL, CE6885-T, CE6863E-48S8CQ</span>.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001974083396__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure VLANs for each interface so that devices can communicate with each other at the link layer.</span><p><p># Configure <span>100GE</span> <span>1/0/3</span> on <span class="keyword">DeviceB</span> as a trunk interface. Add <span>100GE</span> <span>1/0/1</span> to VLAN 100, <span>100GE</span> <span>1/0/2</span> to VLAN 200, and <span>100GE</span> <span>1/0/3</span> to VLAN 100 and VLAN 200.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">DeviceB</span></strong>
[*<span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>DeviceB] <strong>vlan batch 100 200</strong>
[*DeviceB] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[*DeviceB-<span>100GE</span><span>1/0/1</span>] <strong>portswitch</strong>
[*DeviceB-<span>100GE</span><span>1/0/1</span>] <strong>port default vlan 100</strong>
[*DeviceB-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[*DeviceB] <strong>interface <span>100ge</span> <span>1/0/2</span></strong>
[*DeviceB-<span>100GE</span><span>1/0/2</span>] <strong>portswitch</strong>
[*DeviceB-<span>100GE</span><span>1/0/2</span>] <strong>port default vlan 200</strong>
[*DeviceB-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[*DeviceB] <strong>interface <span>100ge</span> <span>1/0/3</span></strong>
[*DeviceB-<span>100GE</span><span>1/0/3</span>] <strong>portswitch</strong>
[*DeviceB-<span>100GE</span><span>1/0/3</span>] <strong>port link-type trunk</strong>
[*DeviceB-<span>100GE</span><span>1/0/3</span>] <strong>port trunk allow-pass vlan 100 200</strong>
[*DeviceB-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong>
[*DeviceB] <strong>commit</strong></pre>
</p></li><li><span>Enable congestion monitoring. Use the default lower and upper buffer thresholds.</span><p><pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>DeviceB] <strong>interface <span>100ge</span> <span>1/0/3</span></strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>DeviceB-<span>100GE</span><span>1/0/3</span>] <strong>qos buffer-monitoring enable</strong>
[*DeviceB-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong>
[*DeviceB] <strong>commit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001974083396__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Check real-time congestion monitoring information about queues on <span>100GE</span> <span>1/0/3</span>.</p>
<pre class="screen">&lt;<span class="keyword">DeviceB</span>&gt; <strong>display qos buffer-monitoring result interface</strong> <strong><span>100ge</span> <span>1/0/3</span></strong>
Queue Time                        BufferUsage(Bytes)     Percent(%)  
--------------------------------------------------------------------      
0 2015-11-04 09:46:27.095                      0              0      
1 2015-11-04 09:46:27.101                      0              0      
2 2015-11-04 09:46:27.107                      0              0      
3 2015-11-04 09:46:27.113                1598064            100      
4 2015-11-04 09:46:27.118                      0              0      
5 2015-11-04 09:46:27.124                      0              0      
6 2015-11-04 09:46:27.130                      0              0      
7 2015-11-04 09:46:27.136                      0              0  
-------------------------------------------------------------------- </pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001974083396__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Configuration Scripts</h4><p><span class="keyword">Device</span>B</p>
<pre class="screen">#
sysname <span class="keyword">DeviceB</span>
#
vlan batch 100 200
#
interface <span>100GE</span><span>1/0/1</span>
 port default vlan 100
#
interface <span>100GE</span><span>1/0/2</span>
 port default vlan 200
#
interface <span>100GE</span><span>1/0/3</span>
 port link-type trunk
 port trunk allow-pass vlan 100 200
 qos buffer-monitoring enable
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_congestion_manage_cfg_0001.html">Congestion Management Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_congestion_manage_cfg_0054.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_congestion_manage_cfg_0055.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>