
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Understanding U-BFD Echo">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_0037.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bfd_cfg_0039.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001130622358">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Understanding U-BFD Echo</title>
</head>
<body><a name="EN-US_CONCEPT_0000001130622358"></a><a name="EN-US_CONCEPT_0000001130622358"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Understanding U-BFD Echo</h1>
<div><p>BFD Echo is a rapid fault detection mechanism in which the local system sends BFD Echo packets and the remote system loops back the packets. BFD Echo is classified as either passive Echo or U-BFD Echo. These two functions adopt the same detection mechanism and apply only to single-hop IP links; however, they are used in different scenarios.</p>
<p>In passive Echo, two devices are directly connected, and a BFD session in asynchronous mode is set up on each device (see <a href="vrp_bfd_cfg_0003.html#EN-US_CONCEPT_0000001130622344__section_dc_vrp_bfd_feature_000601">BFD Detection Mechanism</a>). After the Echo and passive Echo functions are enabled on both devices, they work in asynchronous Echo mode and send BFD packets to each other. Before passive Echo is enabled, BFD in asynchronous mode can only adopt the larger detection interval supported by one end; however, after passive Echo is enabled, the smaller interval is adopted for fast link fault detection.</p>
<p>In U-BFD Echo, two devices are directly connected. One device supports BFD, whereas the other device does not. A U-BFD Echo session can be established on the device that supports BFD. After receiving a BFD Echo packet, the device that does not support BFD immediately loops back the packet for quick link fault detection.</p>
<p>U-BFD Echo does not require Echo negotiation capabilities at both ends; that is, BFD can be configured only on one end. The device with U-BFD Echo enabled sends special BFD packets (the source and destination IP addresses in the IP header are the same as the IP address of the local device, and the My Discriminator and Your Discriminator carried in the BFD packet are the same). Upon receiving these packets, the peer device directly loops them back to the local device to check whether the link is normal. This function equips Huawei devices with a stronger adaptability to low-end devices.</p>
<div class="section"><h4 class="sectiontitle">Comparison Between Passive BFD Echo and U-BFD Echo</h4><p>To ensure that passive BFD Echo or U-BFD Echo takes effect, disable strict URPF on devices that send BFD Echo packets.</p>
<p>If strict URPF is enabled on a device, the device obtains the source IP address and inbound interface of a packet and searches the forwarding table for an entry with the destination IP address set to the source IP address of the packet. The device then checks whether the outbound interface for the entry matches the inbound interface. If they do not match, the device considers the source IP address invalid and discards the packet, effectively protecting the device against malicious attacks initiated by modifying the source IP addresses of packets. With strict URPF enabled on a device, the device also checks the source address of a looped back BFD Echo packet, and because the source address is the IP address of the device, the packet is transmitted over the upper layer of the device instead of an interface. This means that URPF considers the packet as a spoofing packet and discards it.</p>
<p><a href="#EN-US_CONCEPT_0000001130622358__table2096851214326">Table 1</a> compares a common static single-hop BFD session, passive BFD Echo session, and U-BFD Echo session.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0000001130622358__table2096851214326"></a><a name="table2096851214326"></a><table cellpadding="4" cellspacing="0" summary="" id="EN-US_CONCEPT_0000001130622358__table2096851214326" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Comparison between BFD Echo and common static single-hop BFD sessions</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="10.18%" id="mcps1.3.5.5.2.5.1.1" liSelected="liSelected"><p>Item</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="18.84%" id="mcps1.3.5.5.2.5.1.2" liSelected="liSelected"><p>Common Static Single-Hop BFD Session</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="18.84%" id="mcps1.3.5.5.2.5.1.3" liSelected="liSelected"><p>Passive BFD Echo Session</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="52.14%" id="mcps1.3.5.5.2.5.1.4" liSelected="liSelected"><p>U-BFD Echo Session</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="10.18%" headers="mcps1.3.5.5.2.5.1.1 "><p>Supported IP types</p>
</td>
<td class="cellrowborder" valign="top" width="18.84%" headers="mcps1.3.5.5.2.5.1.2 "><p>IPv4 and IPv6</p>
</td>
<td class="cellrowborder" valign="top" width="18.84%" headers="mcps1.3.5.5.2.5.1.3 "><p>IPv4 and IPv6</p>
</td>
<td class="cellrowborder" valign="top" width="52.14%" headers="mcps1.3.5.5.2.5.1.4 "><p>IPv4 and IPv6</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="10.18%" headers="mcps1.3.5.5.2.5.1.1 "><p>Session types</p>
</td>
<td class="cellrowborder" valign="top" width="18.84%" headers="mcps1.3.5.5.2.5.1.2 "><p>Static single-hop BFD session</p>
</td>
<td class="cellrowborder" valign="top" width="18.84%" headers="mcps1.3.5.5.2.5.1.3 "><p>Static single-hop BFD session</p>
</td>
<td class="cellrowborder" valign="top" width="52.14%" headers="mcps1.3.5.5.2.5.1.4 "><p>Static single-hop BFD session</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="10.18%" headers="mcps1.3.5.5.2.5.1.1 "><p>Discriminators</p>
</td>
<td class="cellrowborder" valign="top" width="18.84%" headers="mcps1.3.5.5.2.5.1.2 "><p>My Discriminator and Your Discriminator must be configured.</p>
</td>
<td class="cellrowborder" valign="top" width="18.84%" headers="mcps1.3.5.5.2.5.1.3 "><p>My Discriminator and Your Discriminator must be configured.</p>
</td>
<td class="cellrowborder" valign="top" width="52.14%" headers="mcps1.3.5.5.2.5.1.4 "><p>My Discriminator must be configured.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="10.18%" headers="mcps1.3.5.5.2.5.1.1 "><p>Negotiation prerequisites</p>
</td>
<td class="cellrowborder" valign="top" width="18.84%" headers="mcps1.3.5.5.2.5.1.2 "><p>My Discriminator and Your Discriminator must be configured.</p>
</td>
<td class="cellrowborder" valign="top" width="18.84%" headers="mcps1.3.5.5.2.5.1.3 "><p>My Discriminator and Your Discriminator must be configured.</p>
</td>
<td class="cellrowborder" valign="top" width="52.14%" headers="mcps1.3.5.5.2.5.1.4 "><p>My Discriminator must be configured.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="10.18%" headers="mcps1.3.5.5.2.5.1.1 "><p>IP header</p>
</td>
<td class="cellrowborder" valign="top" width="18.84%" headers="mcps1.3.5.5.2.5.1.2 "><p>My Discriminator and Your Discriminator must be configured.</p>
</td>
<td class="cellrowborder" valign="top" width="18.84%" headers="mcps1.3.5.5.2.5.1.3 "><p>My Discriminator and Your Discriminator must be configured.</p>
</td>
<td class="cellrowborder" valign="top" width="52.14%" headers="mcps1.3.5.5.2.5.1.4 "><p>If the source and destination IP addresses are not specified when a U-BFD Echo session is created, the local IP address is used as the source and destination IP addresses.</p>
<p>If URPF is enabled, you need to specify the source IP address when creating a U-BFD Echo session to prevent BFD packets from being incorrectly discarded.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bfd_cfg_0037.html">Configuring U-BFD Echo
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bfd_cfg_0039.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>