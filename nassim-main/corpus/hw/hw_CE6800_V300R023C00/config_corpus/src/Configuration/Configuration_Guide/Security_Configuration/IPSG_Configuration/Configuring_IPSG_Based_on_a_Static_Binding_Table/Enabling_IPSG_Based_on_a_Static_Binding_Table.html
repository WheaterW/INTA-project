
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling IPSG Based on a Static Binding Table">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_IPSG_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_IPSG_cfg_0008.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPSG">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPSG">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSG">
<meta name="featuretype" content="Security">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563769613">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Enabling IPSG Based on a Static Binding Table</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563769613"></a><a name="EN-US_TASK_0000001563769613"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling IPSG Based on a Static Binding Table</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563769613__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>IPSG based on a static binding table is applicable to LANs that contain only a few hosts with fixed IP addresses. After creating a static binding table, you need to enable IPSG on an interface or in a VLAN for IPSG to take effect.</p>
<ul><li>Enabling IPSG on an interface: IPSG checks all packets received by the interface against binding entries. Use this method if you want to perform an IPSG check on specified interfaces and trust other interfaces. This method is suitable for scenarios in which an interface belongs to multiple VLANs, because it eliminates the need to enable IPSG in each VLAN.</li><li>Enabling IPSG in a VLAN: IPSG checks the packets received by all interfaces in the VLAN against binding entries. Use this method if you want to perform an IPSG check in specified VLANs and trust other VLANs. This method is suitable for scenarios in which multiple interfaces belong to the same VLAN, because it eliminates the need to enable IPSG on each interface.</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>If you configure IPSG both in VLANs and on interfaces, only the one that is configured first takes effect.</li></ul>
<ul><li>If ACL resources are insufficient, IPSG configurations exist on the device but the binding table may fail to be delivered. To check whether IPSG takes effect, run the <a href="cmdqueryname=display+ip+source+check+user-bind+status"><b><span class="cmdname">display ip source check user-bind status </span></b></a><strong>static</strong> [ [ { <strong>interface</strong> <em>interface-type</em> <em>interface-number </em>| <strong>ip-address</strong> <em>ip-address</em> | <strong>mac-address</strong> <em>mac-address</em> | <strong>vlan</strong> <em>vlan-id</em> } * ] [ <strong>valid </strong>|<strong> invalid </strong>] |<strong> summary </strong>] [ <strong>slot </strong><em>slot-id</em> ] command and check the value of <strong>Status</strong> in the command output.</li></ul>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563769613__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Configure static binding entries. </span><p><ul><li>Configure IPv4 static binding entries.</li></ul>
</p><p><pre class="screen"><strong><a href="cmdqueryname=user-bind+static"><b><span class="cmdname">user-bind static</span></b></a> </strong>{ <strong>ip-address</strong> { <em>start-ip</em> [ <strong>to</strong><em> end-ip</em> ] } &amp;&lt;1-10&gt; | <strong>mac-address</strong><em> mac-address</em> } <sup>*</sup> [ <strong>interface</strong> { <em>interface-type</em><em> interface-number</em> | <em>interface-name</em> } ] [ <strong>vlan</strong><em> vlan-id</em> [ <strong>ce-vlan</strong><em> ce-vlan-id</em> ] ]</pre>
<p>By default, no static binding table is configured.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>IPSG matches packets against all items in static binding entries. Ensure that the created binding table is correct and contains all the items to check. The device forwards the packets from hosts only when the packets match all items in binding entries, and discards all other packets.</p>
<p>The device can bind IP addresses or IP address segments in batches. For example, it can bind multiple IP addresses to the same interface or MAC address.</p>
<ul><li>To bind non-contiguous IP addresses, enter 1 to 10 IP addresses in <em>start-ip</em>. For example, run the <strong>user-bind static ip-address 10.0.0.1 10.0.0.3 10.0.0.5 interface <span>100GE</span> <span>1/0/1</span></strong> command to bind IP addresses 10.0.0.1, 10.0.0.3, and 10.0.0.5 to the same interface.</li><li>To bind contiguous IP addresses, enter 1 to 10 IP address segments using <em>start-ip</em> <strong>to</strong> <em>end-ip</em>. When the keyword <strong>to</strong> is used, the IP address segments cannot overlap. For example, run the <strong>user-bind static ip-address 10.0.0.1 to 10.0.0.4 mac-address 00e0-fc12-3456</strong> command to bind IP addresses 10.0.0.1 to 10.0.0.4 to the MAC address 00e0-fc12-3456.</li></ul>
</div></div>
</p></li><li><span>(Optional) Configure a trusted interface.</span><p><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the hosts on the network use static IP addresses, you do not need to configure trusted interfaces. However, if the upstream interface is in an IPSG-enabled VLAN, you need to configure the interface as a trusted interface. Otherwise, the return packets will be discarded due to mismatched binding entries. For details, see <a href="galaxy_IPSG_cfg_0019.html">IP Packets Are Discarded Because the Upstream Interface Is Not Trusted</a>. After the upstream interface is configured as trusted, the device forwards the packets received by the interface without checking them against the binding entries.</p>
</div></div>
</p><p><ol type="a"><li>Enable DHCP globally.<pre class="screen"><a href="cmdqueryname=dhcp+enable"><b><span class="cmdname">dhcp enable</span></b></a></pre>
<p>By default, DHCP is disabled globally.</p>
</li><li>Enable DHCP snooping globally.<pre class="screen"><a href="cmdqueryname=dhcp+snooping+enable"><b><span class="cmdname">dhcp snooping enable</span></b></a></pre>
<p>By default, DHCP snooping is disabled globally.</p>
</li><li>Configure a trusted interface.<ul><li>Configure a trusted interface in the interface view.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i>
<a href="cmdqueryname=dhcp+snooping+trusted"><b><span class="cmdname">dhcp snooping trusted</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Configure a trusted interface in the VLAN view.<pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <em>vlan-id</em>
<a href="cmdqueryname=dhcp+snooping+trusted+interface"><b><span class="cmdname">dhcp snooping trusted interface</span></b></a> <em>interface-type</em> <em>interface-number </em>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li></ul>
<p>By default, an interface is untrusted.</p>
</li></ol>
</p></li><li><span>Enable IPSG.</span><p><ul><li>Enable IPSG in the interface view. <pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i>
<a href="cmdqueryname=ipv4+source+check+user-bind+enable"><b><span class="cmdname">ipv4 source check user-bind enable</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li><li>Enable IPSG in the VLAN view. <pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <em>vlan-id</em>
<a href="cmdqueryname=ipv4+source+check+user-bind+enable"><b><span class="cmdname">ipv4 source check user-bind enable</span></b></a>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</li></ul>
</p><p><p>By default, IPSG is disabled.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The CE6885-LL in low latency mode does not support <strong>ipv4 source check user-bind enable</strong>.</p>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001563769613__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001563769613__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001563769613__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+ip+source+check+user-bind+statistics"><b><span class="cmdname">display ip source check user-bind statistics</span></b></a> [ <strong>interface</strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ] command to check statistics on packets discarded due to IPSG.</li><li>Run the <a href="cmdqueryname=display+ip+source+check+user-bind+status"><b><span class="cmdname">display ip source check user-bind status</span></b></a> [ [ <strong>static</strong> [ { <strong>interface</strong> <em>interface-type</em> <em>interface-number </em>| <strong>ip-address</strong> <em>ip-address</em> | <strong>mac-address</strong> <em>mac-address</em> | <strong>vlan</strong> <em>vlan-id</em> } * ] [ <strong>valid </strong>|<strong> invalid</strong> ] ] |<strong> summary </strong>] [ <strong>slot</strong> <em>slot-id</em> ] command to check information and status of IPSG static binding entries.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_IPSG_cfg_0006.html">Configuring IPSG Based on a Static Binding Table
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_IPSG_cfg_0008.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>