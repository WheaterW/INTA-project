
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a DNS Test">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_nqa_cfg_0009.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_nqa_cfg_0012.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_nqa_cfg_0014.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176661841">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring a DNS Test</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176661841"></a><a name="EN-US_TASK_0000001176661841"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a DNS Test</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176661841__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A DNS test is based on UDP packets. In a DNS test, only one UDP packet is sent to detect the time required for a DNS server on a network to resolve a specified domain name into an IP address. The test result clearly reflects the performance of the DNS protocol on the network. <a href="#EN-US_TASK_0000001176661841__dc_vrp_network-monitor_feature_009301">Figure 1</a> shows a network on which a DNS test is performed. A DNS test process is as follows:</p>
<ol><li><p>DeviceA (source) sends a DNS request packet to the DNS server (destination), requesting the DNS server to resolve the DNS name (server.com).</p>
</li><li><p>The DNS server receives the DNS request packet, parses the DNS request packet, finds the IP address corresponding to the domain name, constructs a DNS response packet, and sends the DNS response packet to DeviceA.</p>
</li><li>DeviceA receives the DNS response packet and calculates the time difference between receiving the DNS response packet and sending the DNS request packet, which is the time required for resolving the domain name into an IP address. The time can reflect the network DNS protocol performance.</li></ol>
<div class="fignone" id="EN-US_TASK_0000001176661841__dc_vrp_network-monitor_feature_009301"><a name="EN-US_TASK_0000001176661841__dc_vrp_network-monitor_feature_009301"></a><a name="dc_vrp_network-monitor_feature_009301"></a><span class="figcap"><b>Figure 1 </b>DNS test networking</span><br><span><img class="vsd" src="figure/en-us_image_0000001176741767.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176661841__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable the dynamic DNS function.</span><p><pre class="screen"><a href="cmdqueryname=dns+resolve"><b><span class="cmdname">dns resolve</span></b></a></pre>
<p>By default, the dynamic DNS function is disabled.</p>
</p></li><li><span>Configure an IP address of the DNS server.</span><p><pre class="screen"><a href="cmdqueryname=dns+server"><b><span class="cmdname">dns server</span></b></a> <i><span class="varname">ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</pre>
<p>By default, no IP address of the DNS server is configured.</p>
</p></li><li><span>Create an NQA test instance and set the test instance type to DNS.</span><ol type="a"><li class="substepexpand"><span>Create an NQA test instance and enter its view.</span><p><pre class="screen"><a href="cmdqueryname=nqa"><b><span class="cmdname">nqa</span></b></a> <strong><span>test-instance</span></strong> <i><span class="varname">admin-name test-name</span></i></pre>
</p></li><li class="substepexpand"><span>Set the test instance type to DNS.</span><p><pre class="screen"><a href="cmdqueryname=test-type"><b><span class="cmdname">test-type</span></b></a> <strong><span>dns</span></strong></pre>
</p></li><li class="substepexpand"><span>(Optional) Configure a description for the test instance.</span><p><pre class="screen"><a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description</span></i></pre>
</p></li></ol>
</li><li><span>Specify the IP address of the DNS server in the DNS test instance.</span><p><pre class="screen"><a href="cmdqueryname=dns-server"><b><span class="cmdname">dns-server</span></b></a> <strong><span>ipv4</span></strong> <i><span class="varname">ip-address</span></i></pre>
</p></li><li><span>Specify a destination URL for the NQA test instance.</span><p><pre class="screen"><a href="cmdqueryname=destination-address"><b><span class="cmdname">destination-address</span></b></a> <strong><span>url</span></strong> <i><span class="varname">urlValue</span></i></pre>
</p></li><li><span>(Optional) Set optional parameters for the test instance to simulate packet transmission.</span><ol type="a"><li class="substepexpand"><span>Configure the aging time for the NQA test instance.</span><p><pre class="screen"><a href="cmdqueryname=agetime"><b><span class="cmdname">agetime</span></b></a> <i><span class="varname">ageTimeValue</span></i></pre>
</p></li></ol>
</li><li><span>(Optional) Set the response timeout interval.</span><p><pre class="screen"><a href="cmdqueryname=timeout"><b><span class="cmdname">timeout</span></b></a> <i><span class="varname">time</span></i></pre>
<p>If no response is received within the specified timeout interval, the test is considered as a failure.</p>
</p></li><li><span>(Optional) Set the maximum numbers of historical test records and test results that can be saved for the NQA test instance.</span><p><pre class="screen"><a href="cmdqueryname=records"><b><span class="cmdname">records</span></b></a> { <strong><span>history</span></strong> <i><span class="varname">history-number</span></i> | <strong><span>result</span></strong> <i><span class="varname">result-number</span></i> }</pre>
</p></li><li><span>(Optional) Configure the device to send traps.</span><ol type="a"><li class="substepexpand"><span>Configure the NQA client to send a trap to the NMS when the number of consecutive probe failures reaches a specified value.</span><p><pre class="screen"><a href="cmdqueryname=probe-failtimes"><b><span class="cmdname">probe-failtimes</span></b></a> <i><span class="varname">failTimes</span></i></pre>
</p></li><li class="substepexpand"><span>Configure the NQA client to send a trap to the NMS when the number of consecutive test failures reaches a specified value.</span><p><pre class="screen"><a href="cmdqueryname=test-failtimes"><b><span class="cmdname">test-failtimes</span></b></a> <i><span class="varname">failTimes</span></i></pre>
</p></li><li class="substepexpand"><span>Set the RTD threshold.</span><p><pre class="screen"><a href="cmdqueryname=threshold"><b><span class="cmdname">threshold</span></b></a> <strong><span>rtd</span></strong> <i><span class="varname">thresholdRtd</span></i></pre>
</p></li><li class="substepexpand"><span>Configure the condition for sending a trap.</span><p><pre class="screen"><a href="cmdqueryname=send-trap"><b><span class="cmdname">send-trap</span></b></a> { <strong><span>all</span></strong> | { <strong><span>rtd</span></strong> | <strong><span>testfailure</span></strong> | <strong><span>probefailure</span></strong> | <strong><span>testcomplete</span></strong> | <strong><span>testresult-change</span></strong> } <sup>*</sup> }</pre>
</p></li></ol>
</li><li><span>(Optional) Configure the VPN instance name for the NQA test instance.</span><p><pre class="screen"><a href="cmdqueryname=vpn-instance"><b><span class="cmdname">vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></pre>
</p></li><li><span>Schedule the NQA test instance.</span><ol type="a"><li class="substepexpand"><span>(Optional) Set the interval for performing NQA tests.</span><p><pre class="screen"><a href="cmdqueryname=frequency"><b><span class="cmdname">frequency</span></b></a> <i><span class="varname">frequencyValue</span></i></pre>
</p></li><li class="substepexpand"><span>Start the NQA test instance.</span><p><p>You can start an NQA test instance immediately, at a specified time, after a delay, or periodically.</p>
<ul><li><div class="p">Start the test instance immediately.<pre class="screen"><a href="cmdqueryname=start"><b><span class="cmdname">start</span></b></a> <strong><span>now</span></strong> [ <strong><span>end</span></strong> { <strong><span>at</span></strong> [ <i><span class="varname">yyyy/mm/dd</span></i> ] <i><span class="varname">hh:mm:ss</span></i> | <strong><span>delay</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } | <strong><span>lifetime</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } } ]</pre>
</div>
</li><li><div class="p">Start the test instance at a specified time.<pre class="screen"><a href="cmdqueryname=start"><b><span class="cmdname">start</span></b></a> <strong><span>at</span></strong> [ <i><span class="varname">yyyy/mm/dd</span></i> ] <i><span class="varname">hh:mm:ss</span></i> [ <strong><span>end</span></strong> { <strong><span>at</span></strong> [ <i><span class="varname">yyyy/mm/dd</span></i> ] <i><span class="varname">hh:mm:ss</span></i> | <strong><span>delay</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } | <strong><span>lifetime</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } } ]</pre>
</div>
</li><li><p>Start the test instance after a specified delay.</p>
<pre class="screen"><a href="cmdqueryname=start"><b><span class="cmdname">start</span></b></a> <strong><span>delay</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } [ <strong><span>end</span></strong> { <strong><span>at</span></strong> [ <i><span class="varname">yyyy/mm/dd</span></i> ] <i><span class="varname">hh:mm:ss</span></i> | <strong><span>delay</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } | <strong><span>lifetime</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } } ]</pre>
</li><li><p>Start the test instance at a specified time every day.</p>
<pre class="screen"><a href="cmdqueryname=start"><b><span class="cmdname">start</span></b></a> <strong><span>daily</span></strong> <i><span class="varname">hh:mm:ss</span></i> <strong><span>to</span></strong> <i><span class="varname">hh:mm:ss</span></i> [ <strong><span>begin</span></strong> <i><span class="varname">yyyy/mm/dd</span></i> ] [ <strong><span>end</span></strong> <i><span class="varname">yyyy/mm/dd</span></i> ]</pre>
</li></ul>
</p></li></ol>
</li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176661841__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176661841__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_nqa_cfg_0009.html">Configuring NQA to Test an IP Network
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_nqa_cfg_0012.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_nqa_cfg_0014.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>