
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring VLANIF Interfaces to Implement Inter-VLAN Communication Through a Single Device">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0028.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0031.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vlan_cfg_0033.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="QinQ">
<meta name="featurename" content="VLAN">
<meta name="featurename" content="VLAN Mapping">
<meta name="featurename" content="VLAN Pool">
<meta name="featurename" content="Voice VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130782662">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring VLANIF Interfaces to Implement Inter-VLAN Communication Through a Single Device</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130782662"></a><a name="EN-US_TASK_0000001130782662"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring VLANIF Interfaces to Implement Inter-VLAN Communication Through a Single Device</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130782662__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In <a href="#EN-US_TASK_0000001130782662__fig19632192318597">Figure 1</a>, the two hosts connected to DeviceA are located on different network segments. One belongs to VLAN 2, and the other belongs to VLAN 3. Both hosts need to communicate with each other.</p>
<div class="fignone" id="EN-US_TASK_0000001130782662__fig19632192318597"><a name="EN-US_TASK_0000001130782662__fig19632192318597"></a><a name="fig19632192318597"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for configuring VLANIF interfaces to implement inter-VLAN communication through a single device</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1 and interface 2 represent <span>100GE</span> <span>1/0/1</span> and <span>100GE</span> <span>1/0/2</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001130622924.png"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130782662__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create VLANs and add interfaces to the VLANs.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname DeviceA</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>vlan batch 2 3</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port link-type access</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>port default vlan 2</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>portswitch</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>port link-type access</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>port default vlan 3</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
</p></li><li><span>Configure an IP address for each VLANIF interface.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> interface vlanif 2</strong>
[<span class="keyword">*</span>DeviceA-Vlanif2] <strong>ip address 10.10.10.2 24</strong>
[<span class="keyword">*</span>DeviceA-Vlanif2] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA]<strong> interface vlanif 3</strong>
[<span class="keyword">*</span>DeviceA-Vlanif3] <strong>ip address 10.10.20.2 24</strong>
[<span class="keyword">*</span>DeviceA-Vlanif3] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001130782662__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Set the IP address of the host in VLAN 2 to 10.10.10.1/24 and default gateway address to 10.10.10.2/24 (IP address of VLANIF 2), and set the IP address of the host in VLAN 3 to 10.10.20.1/24 and default gateway address to 10.10.20.2/24 (IP address of VLANIF 3). After the configuration is complete, hosts in VLAN 2 and VLAN 3 can ping each other.</p>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001130782662__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Configuration Scripts</h4><pre class="screen">#
sysname DeviceA
#
vlan batch 2 to 3
# 
interface Vlanif2
 ip address 10.10.10.2 255.255.255.0 
# 
interface Vlanif3
 ip address 10.10.20.2 255.255.255.0 
# 
interface <span>100GE</span><span>1/0/1</span>
 port default vlan 2
#
interface <span>100GE</span><span>1/0/2</span>
 port default vlan 3
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_vlan_cfg_0028.html">Configuring Inter-VLAN Communication
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_vlan_cfg_0031.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_vlan_cfg_0033.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>