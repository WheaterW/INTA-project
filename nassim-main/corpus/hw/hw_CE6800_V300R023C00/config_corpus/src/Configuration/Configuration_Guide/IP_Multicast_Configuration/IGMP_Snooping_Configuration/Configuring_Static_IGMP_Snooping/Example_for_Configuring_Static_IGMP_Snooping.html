
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Static IGMP Snooping">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc_cfg_0020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130622110">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Static IGMP Snooping</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130622110"></a><a name="EN-US_TASK_0000001130622110"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Static IGMP Snooping</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130622110__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the multicast network shown in <a href="#EN-US_TASK_0000001130622110__fig_dc_cfg_vxlan_cfgcase_000201">Figure 1</a>, a router (marked Router) connects to a user network through a Layer 2 device (marked Device). Static IGMP multicast groups 225.1.1.1 to 225.1.1.5 are configured on the user-side Layer 3 VLANIF interface of Router, but IGMP is not configured. UserA and UserB want to receive data from groups 225.1.1.1 to 225.1.1.3 for an extended period, and UserC and UserD want to receive data from groups 225.1.1.4 to 225.1.1.5 for an extended period. To meet these requirements, configure static router ports and static member ports for IGMP snooping on Device.</p>
<div class="fignone" id="EN-US_TASK_0000001130622110__fig_dc_cfg_vxlan_cfgcase_000201"><a name="EN-US_TASK_0000001130622110__fig_dc_cfg_vxlan_cfgcase_000201"></a><a name="fig_dc_cfg_vxlan_cfgcase_000201"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring static ports to implement Layer 2 multicast</span><div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, and interface3 represent <span>100GE</span><span>1/0/1</span>, <span>100GE</span><span>1/0/2</span>, and <span>100GE</span><span>1/0/3</span>, respectively.</p>
</div></div>
<p><span><img class="vsd" src="figure/en-us_image_0000001130622134.png"></span></p>
<p></p>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130622110__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><div class="p">The configuration roadmap is as follows:<ol><li>Create a VLAN on <span class="keyword">Device</span> and add related interfaces to the VLAN.</li><li>Enable IGMP snooping globally and in the VLAN.</li><li>Configure a static router port.</li><li>Configure a static member port.</li></ol>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130622110__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create a VLAN and add related interfaces to the VLAN.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname Device</strong>
<span>[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></span>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>] <strong>vlan 10</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>-vlan10] <strong>quit</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>-<span><span>100GE</span><span>1/0/1</span></span>] <strong>port link-type</strong><strong> access</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>-<span><span>100GE</span><span>1/0/1</span></span>] <strong>port default vlan 10</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>-<span><span>100GE</span><span>1/0/1</span></span>] <strong>quit</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>] <strong>interface <span>100ge</span> <span>1/0/2</span></strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>-<span>100GE</span><span>1/0/2</span>] <strong>port link-type</strong><strong> access</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>-<span>100GE</span><span>1/0/2</span>] <strong>port default vlan 10</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>] <strong>interface <span>100ge</span> <span>1/0/3</span></strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>-<span>100GE</span><span>1/0/3</span>] <strong>port link-type trunk</strong>
[<span><span class="keyword">*</span></span><span class="keyword">Device</span>-<span>100GE</span><span>1/0/3</span>] <strong>port trunk allow-pass vlan 10</strong>
<span>[<span><span class="keyword">*</span></span><span class="keyword">Device</span>-<span>100GE</span><span>1/0/3</span>] <strong>commit</strong></span>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong></pre>
</p></li><li><span>Enable IGMP snooping.</span><p><p># Enable IGMP snooping globally.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>] <strong>igmp snooping enable</strong></pre>
<p># Enable IGMP snooping in VLAN10.</p>
<pre class="screen">[<span><span><span class="keyword">*</span></span></span><span class="keyword">Device</span>] <strong>vlan 10</strong>
[<span><span><span class="keyword">*</span></span></span><span class="keyword">Device</span>-vlan10] <strong>igmp snooping enable</strong>
[<span><span><span class="keyword">*</span></span></span><span class="keyword">Device</span>-vlan10] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-vlan10] <strong>quit</strong></pre>
</p></li><li><span>Configure a static router port.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>] <strong>interface <span>100ge</span> <span>1/0/3</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-<span>100GE</span><span>1/0/3</span>] <strong>igmp snooping static-router-port vlan 10</strong>
[<span><span><span class="keyword">*</span></span></span><span class="keyword">Device</span>-<span>100GE</span><span>1/0/3</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong></pre>
</p></li><li><span>Configure a static member port.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>] <strong>interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-<span><span>100GE</span><span>1/0/1</span></span>] <strong>igmp snooping static-group group-address 225.1.1.1 to 225.1.1.3 vlan 10</strong>
[<span><span><span class="keyword">*</span></span></span><span class="keyword">Device</span>-<span><span>100GE</span><span>1/0/1</span></span>] <strong>quit</strong>
[<span><span><span class="keyword">*</span></span></span><span class="keyword">Device</span>] <strong>interface <span>100ge</span> <span>1/0/2</span></strong>
[<span><span><span class="keyword">*</span></span></span><span class="keyword">Device</span>-<span>100GE</span><span>1/0/2</span>] <strong>igmp snooping static-group group-address 225.1.1.4 to 225.1.1.5 vlan 10</strong>
[<span><span><span class="keyword">*</span></span></span><span class="keyword">Device</span>-<span>100GE</span><span>1/0/2</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001130622110__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Check the router port information on <span class="keyword">Device</span>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>] <strong>display igmp snooping router-port vlan 10</strong> 
 Port Name                       UpTime        Expires       Flags              
 ---------------------------------------------------------------------          
 VLAN 10, 1 router-port(s)                                                     
 <span>100GE</span><span>1/0/3</span>                        00h20m09s     --            STATIC</pre>
<p>The command output shows that <span>100GE</span><span>1/0/3</span> has become a static router port.</p>
<p># Check the member port information on <span class="keyword">Device</span>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>] <strong>display igmp snooping port-info vlan 10</strong> 
 -------------------------------------------------------------------------------
  Flag: S:Static     D:Dynamic     M:Ssm-mapping                                
        A:Active     P:Protocol    <span>T:Trill</span>                               
                     (Source, Group)  Port                                  Flag
 -------------------------------------------------------------------------------
 VLAN 10, 5 Entry(s)                                                            
                      (*, 225.1.1.1)                                        P-- 
                                      <span><span>100GE</span><span>1/0/1</span></span>                             S-- 
                                                        1 port(s) include       
                      (*, 225.1.1.2)                                        P-- 
                                      <span><span>100GE</span><span>1/0/1</span></span>                             S-- 
                                                        1 port(s) include       
                      (*, 225.1.1.3)                                        P-- 
                                      <span><span>100GE</span><span>1/0/1</span></span>                             S-- 
                                                        1 port(s) include       
                      (*, 225.1.1.4)                                        P-- 
                                      <span>100GE</span><span>1/0/2</span>                             S-- 
                                                        1 port(s) include       
                      (*, 225.1.1.5)                                        P-- 
                                      <span>100GE</span><span>1/0/2</span>                             S-- 
                                                        1 port(s) include       
 --------------------------------------------------------------------------------</pre>
<p>The command output shows that groups 225.1.1.1 to 225.1.1.3 have a static member port <span><span>100GE</span><span>1/0/1</span></span> on <span class="keyword">Device</span> and groups 225.1.1.4 to 225.1.1.5 have a static member port <span>100GE</span><span>1/0/2</span> on <span class="keyword">Device</span>.</p>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001130622110__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul><li><span class="keyword">Device</span><pre class="screen">#
sysname <span class="keyword">Device</span>
#
vlan batch 10
#
igmp snooping enable
#
vlan 10
 igmp snooping enable
#
interface <span><span>100GE</span><span>1/0/1</span></span>
 port default vlan 10
 igmp snooping static-group group-address 225.1.1.1 to 225.1.1.3 vlan 10 
#
interface <span>100GE</span><span>1/0/2</span>
 port default vlan 10
 igmp snooping static-group group-address 225.1.1.4 to 225.1.1.5 vlan 10 
#
interface <span>100GE</span><span>1/0/3</span>
 port link-type trunk
 port trunk allow-pass vlan 10
 igmp snooping static-router-port vlan 10 
#
return</pre>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_l2mc_cfg_0015.html">Configuring Static IGMP Snooping
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_l2mc_cfg_0020.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>