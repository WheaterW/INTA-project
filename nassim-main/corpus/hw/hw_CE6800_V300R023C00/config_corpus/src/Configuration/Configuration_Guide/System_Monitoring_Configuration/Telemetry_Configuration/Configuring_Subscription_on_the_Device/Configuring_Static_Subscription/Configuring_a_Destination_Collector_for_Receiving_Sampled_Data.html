
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Destination Collector for Receiving Sampled Data">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_telemetry_cfg_0008_c.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_telemetry_cfg_0009_c.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_telemetry_cfg_0011_c.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001512674994">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring a Destination Collector for Receiving Sampled Data</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001512674994"></a><a name="EN-US_TASK_0000001512674994"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Destination Collector for Receiving Sampled Data</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001512674994__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When configuring static telemetry subscription to collect sampled data, you need to create a destination group and specify its working mode, and configure a destination collector for receiving the sampled data (destination collector for short), including the IP address, port number, transport protocol, priority, and encryption mode.</p>
<div class="p">A destination group works in one of the following modes:<ul><li>default: This is the default working mode of the destination group. In this mode, the device establishes telemetry connections with all destination collectors in the destination group.</li><li>priority: In this mode, the device establishes a telemetry connection with only one destination collector in the destination group. The device first initiates a telemetry connection with the highest-priority destination collector in the destination group. If the connection fails, the device attempts to establish a telemetry connection with the second-priority destination collector, and so on and so forth. If the current connection is not of the highest priority, the device continuously attempts to establish a telemetry connection with a higher-priority destination collector.<p>A device establishes a telemetry connection with a destination collector in descending order of priority: high &gt; medium &gt; low. If destination collectors have the same priority, they are first sorted based on the VPN name, then based on IP addresses (in ascending order), and finally based on port numbers (in ascending order).</p>
<ul><li>Priorities of VPN names: A public VPN has a higher priority than a private VPN. The priorities of private VPNs are sorted in the lexicographic order (ASCII code) of VPN names.</li><li>Priorities of IP addresses: An IPv4 address has a higher priority than an IPv6 address. IP addresses of the same type are sorted in ascending order.</li><li>Priorities of port numbers: Port numbers are sorted in ascending order.</li></ul>
</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001512674994__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the telemetry view.</span><p><pre class="screen"><a href="cmdqueryname=telemetry"><b><span class="cmdname">telemetry</span></b></a> [ <strong><span>openconfig</span></strong> ]</pre>
</p></li><li><span>Create a destination group where a destination collector belongs and enter the destination group view.</span><p><pre class="screen"><a href="cmdqueryname=destination-group"><b><span class="cmdname">destination-group</span></b></a> <em>destination-group-name</em></pre>
<p>By default, no destination group where a destination collector belongs is created.</p>
</p></li><li><span>(Optional) Set the working mode of the destination group to priority.</span><p><pre class="screen"><a href="cmdqueryname=work-mode+priority"><b><span class="cmdname">work-mode priority</span></b></a></pre>
<p>By default, a destination group works in default mode.</p>
</p></li><li><span>Configure a destination collector, including its IP address, port number, transport protocol, priority, and encryption mode.</span><p><div class="p">When the destination group works in default mode, perform the following steps to configure the destination collector.<ul><li>Run the following command if the destination collector uses an IPv4 address:<pre class="screen"><a href="cmdqueryname=ipv4-address"><b><span class="cmdname">ipv4-address</span></b></a> <i><span class="varname">ip-address-ipv4</span></i> <strong><span>port</span></strong> <i><span class="varname">port-value</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-name</span></i> ] [ <strong><span>protocol</span></strong> { <strong><span>grpc</span></strong> [ <strong><span>no-tls</span></strong> ] [ <strong><span>compression gzip</span></strong> ] | <strong><span>udp</span></strong> } ]</pre>
<p>By default, no IPv4 destination collector is configured.</p>
</li><li>Run the following command if the destination collector uses an IPv6 address:<pre class="screen"><strong><a href="cmdqueryname=ipv6-address"><b><span class="cmdname">ipv6-address</span></b></a> </strong><em><i><span class="varname">ip-address-ipv6</span></i> </em><strong>port </strong><i><span class="varname">port-value</span></i> [ <strong>vpn-instance </strong><em>vpn-name</em> ] [ <strong>protocol </strong>{ <strong><span>grpc</span></strong> [ <strong><span>no-tls</span></strong> ] [ <strong><span>compression gzip</span></strong> ] | <strong><span>udp</span></strong> } ]</pre>
<p>By default, no IPv6 destination collector is configured.</p>
</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>A maximum of 10 destination groups can be configured.</li><li>A maximum of 10 IP addresses can be configured for each destination group. That is, the total number of IPv4 and IPv6 addresses cannot exceed 10.</li><li>A maximum of 10 IP addresses can be configured globally. That is, the total number of IPv4 and IPv6 addresses cannot exceed 10.</li></ul>
<div class="p">Both these commands and the <a href="cmdqueryname=protocol"><b><span class="cmdname">protocol</span></b></a><a href="cmdqueryname=%28subscription+view%29"><b><span class="cmdname"> (subscription view)</span></b></a> command can be run to configure a protocol and encryption mode for the destination collector. If the destination collector is associated with a subscription, command configurations take effect based on the following rules:<ul><li><p>If the <a href="cmdqueryname=protocol"><b><span class="cmdname">protocol</span></b></a> command has been run in the subscription view, the protocol and encryption mode configured in the subscription view take effect.</p>
</li><li><p>If the <a href="cmdqueryname=protocol"><b><span class="cmdname">protocol</span></b></a> command has not been run in the subscription view, the protocol and encryption mode configured in the destination group view take effect.</p>
</li></ul>
</div>
</div></div>
</div>
<div class="p">When the destination group works in priority mode, perform the following steps to configure the destination collector.<ul><li>Run the following command if the destination collector uses an IPv4 address:<pre class="screen"><a href="cmdqueryname=ipv4-address"><b><span class="cmdname">ipv4-address</span></b></a> <i><span class="varname">ip-address-ipv4</span></i> <strong><span>port</span></strong> <i><span class="varname">port-value</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-name</span></i> ] [ <strong><span>protocol</span></strong> <strong><span>grpc</span></strong> [ <strong><span>no-tls</span></strong> ] [ <strong><span>compression gzip</span></strong> ] ] <strong><span>priority</span></strong> { <strong><span>low</span></strong> | <strong><span>medium</span></strong> | <strong><span>high</span></strong> }</pre>
<p>By default, no IPv4 destination collector is configured.</p>
</li><li>Run the following command if the destination collector uses an IPv6 address:<pre class="screen"><strong><a href="cmdqueryname=ipv6-address"><b><span class="cmdname">ipv6-address</span></b></a> </strong><em><i><span class="varname">ip-address-ipv6</span></i> </em><strong>port </strong><i><span class="varname">port-value</span></i> [ <strong>vpn-instance </strong><em>vpn-name</em> ] [ <strong>protocol</strong> <strong><span>grpc</span></strong> [ <strong><span>no-tls</span></strong> ] [ <strong><span>compression gzip</span></strong> ] ] <strong><span>priority</span></strong> { <strong><span>low</span></strong> | <strong><span>medium</span></strong> | <strong><span>high</span></strong> }</pre>
<p>By default, no IPv6 destination collector is configured.</p>
</li></ul>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>These commands can be run no more than 40 times for each destination group.</p>
<div class="p">Both these commands and the <a href="cmdqueryname=protocol"><b><span class="cmdname">protocol</span></b></a><a href="cmdqueryname=%28subscription+view%29"><b><span class="cmdname"> (subscription view)</span></b></a> command can be run to configure a protocol and encryption mode for the destination collector. If the destination collector is associated with a subscription, command configurations take effect based on the following rules:<ul><li><p>If the <a href="cmdqueryname=protocol"><b><span class="cmdname">protocol</span></b></a> command has been run in the subscription view, the protocol and encryption mode configured in the subscription view take effect.</p>
</li><li><p>If the <a href="cmdqueryname=protocol"><b><span class="cmdname">protocol</span></b></a> command has not been run in the subscription view, the protocol and encryption mode configured in the destination group view take effect.</p>
</li></ul>
</div>
</div></div>
</div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001512674994__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001512674994__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001512674994__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+telemetry+destination"><b><span class="cmdname">display telemetry destination</span></b></a> [ <i><span class="varname">dest-name</span></i> ] command to check information about the destination group.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_telemetry_cfg_0008_c.html">Configuring Static Subscription
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_telemetry_cfg_0009_c.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_telemetry_cfg_0011_c.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>