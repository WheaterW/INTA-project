
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Setting the BGP Preference">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0022.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0024.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130783908">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Setting the BGP Preference</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130783908"></a><a name="EN-US_TASK_0000001130783908"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Setting the BGP Preference</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130783908__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before setting the BGP preference, you have completed the following task:</p>
<ul><li><a href="vrp_bgp_cfg_0014.html">Configure basic BGP functions</a>.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130783908__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Routing protocols may share and select the same routing information if a device runs multiple dynamic routing protocols at the same time. As such, the system sets a default preference for each routing protocol. When different protocols discover the same route, the route with the highest priority is selected. For example, when BGP routes are imported to OSPF, the imported BGP routes do not take effect if the same routes exist in OSPF and BGP because the default priority of BGP routes is lower than that of OSPF routes. To allow the imported BGP routes to take effect, run the <a href="cmdqueryname=preference"><b><span class="cmdname">preference</span></b></a> command to increase their priority.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130783908__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the BGP view.</span><p><pre class="screen"><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></pre>
</p></li><li><span>(Optional) Enter the IPv4 unicast address family view.</span><p><pre class="screen"><a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></pre>
<p>By default, the configuration is performed in the IPv4 unicast address family view.</p>
</p></li><li><span>Set the BGP preference.</span><p><pre class="screen"><a href="cmdqueryname=preference+route-policy"><b><span class="cmdname">preference</span></b></a> { <i><span class="varname">external</span></i> <i><span class="varname">internal</span></i> <i><span class="varname">local</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> }</pre>
<p>A smaller value indicates a higher priority.</p>
<p>BGP has the following types of routes:</p>
<ul><li><p>Routes learned from external peers (EBGP)</p>
</li><li><p>Routes learned from internal peers (IBGP)</p>
</li><li><p>Locally generated routes: summary routes generated using the <a href="cmdqueryname=summary+automatic"><b><span class="cmdname">summary automatic</span></b></a> or <a href="cmdqueryname=aggregate"><b><span class="cmdname">aggregate</span></b></a> command. The former command is used for automatic summarization, and the latter command for manual summarization.</p>
</li></ul>
<p>By default, the preference of the three types of routes is 255. However, you can set different preferences for all three types of routes.</p>
</p><p><p>You can set a preference for BGP routes that match the filtering rules in a route-policy, and the routes that do not match the filtering rules will use the default preference.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Currently, the <a href="cmdqueryname=peer+route-policy"><b><span class="cmdname">peer route-policy</span></b></a> command cannot be used to set a preference for BGP routes through a route-policy.</p>
</div></div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130783908__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130783908__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp_cfg_0021.html">Configuring BGP Route Attributes
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp_cfg_0022.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bgp_cfg_0024.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>