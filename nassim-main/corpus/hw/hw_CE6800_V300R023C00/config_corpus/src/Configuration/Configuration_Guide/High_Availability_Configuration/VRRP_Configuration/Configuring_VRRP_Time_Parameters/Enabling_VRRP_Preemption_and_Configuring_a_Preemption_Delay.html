
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling VRRP Preemption and Configuring a Preemption Delay">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_vrrp_cfg_0106.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vrrp_cfg_0134.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130624268">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Enabling VRRP Preemption and Configuring a Preemption Delay</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130624268"></a><a name="EN-US_TASK_0000001130624268"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling VRRP Preemption and Configuring a Preemption Delay</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130624268__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p id="EN-US_TASK_0000001130624268__p1082427371214023">If a network is unstable, configure either of the following preemption modes to improve master/backup state stability, and to prevent dual masters from coexisting and hosts from learning an incorrect MAC address of the master device due to frequent master/backup switchovers:</p>
<ul id="EN-US_TASK_0000001130624268__ul444448385214023"><li id="EN-US_TASK_0000001130624268__li1088135086214023">Immediate preemption: The preemption delay is 0s, indicating that a backup device immediately preempts the master role after the master device fails. This mode minimizes service interruption duration.</li><li id="EN-US_TASK_0000001130624268__li534186964214023">Delayed preemption: The master device preempts the master role after a specified preemption delay following recovery. Specifically, the master device waits for other services to recover (for example, route convergence is complete) before it preempts the master role to minimize packet loss.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130624268__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Procedure</h4><ol><li>Enter the system view.<pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</li><li>Enter the view of the interface where a VRRP group resides.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</li><li>Switch the interface working mode to Layer 3.<pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
<p> Determine whether to perform this step based on the current interface working mode.</p>
</li><li>Configure a preemption delay for the device in the VRRP group.<pre class="screen"><span><a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>preempt</span></strong> <strong><span>timer</span></strong> <strong><span>delay</span></strong> <i><span class="varname">delay-time</span></i></span></pre>
<p>The default preemption delay is 5 seconds for a preemption caused by a Startup event or 0 seconds (indicating immediate preemption) for a preemption caused by any other reason.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When the IP address owner recovers from a fault, it immediately becomes the master device despite the configured delay. The preemption delay is a period during which the original master device in the Backup state is waiting to preempt the master role, and it does not apply to the IP address owner. Consequently, in a VRRP group that needs to be configured with a preemption delay, the master device cannot be configured as the IP address owner.</p>
</div></div>
</li><li>(Optional) Configure the VRRP group to work in non-preemption mode.<pre class="screen"><a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>preempt</span></strong> <strong><span>disable</span></strong></pre>
<p>When a VRRP group works in non-preemption mode, a backup device (regardless of priority) cannot preempt the master role as long as the master device is working properly.</p>
</li><li>Commit the configuration.<pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130624268__1.3.3"></a><a name="1.3.3"></a>
<div class="p"><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+vrrp"><b><span class="cmdname">display vrrp</span></b></a> [ <strong><span>interface</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } ] [ <i><span class="varname">virtual-router-id</span></i> ] [ <strong><span>verbose</span></strong> ] command to check the VRRP group status.</p>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_vrrp_cfg_0106.html">Configuring VRRP Time Parameters
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_vrrp_cfg_0134.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>