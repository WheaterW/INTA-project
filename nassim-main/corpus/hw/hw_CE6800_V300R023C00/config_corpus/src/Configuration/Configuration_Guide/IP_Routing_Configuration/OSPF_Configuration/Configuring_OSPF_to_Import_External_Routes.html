
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring OSPF to Import External Routes">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0045.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0047.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176742853">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring OSPF to Import External Routes</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176742853"></a><a name="EN-US_TASK_0000001176742853"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring OSPF to Import External Routes</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001176742853__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring OSPF to import external routes, you have completed the following tasks:</p>
<ul><li><a href="vrp_ospf_cfg_0010.html">Configure basic OSPF functions</a>.</li><li>To use a route-policy to filter the routes to be imported, create the route-policy first.</li><li>To use an IP prefix list to filter the routes to be imported, create the IP prefix list first.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176742853__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When a device on an OSPF network needs to access a device running a non-OSPF routing protocol, the device needs to import the routes of the non-OSPF routing protocol into the OSPF network.</p>
<p>OSPF provides loop-free intra-area routes and inter-area routes; however, OSPF cannot prevent external routing loops. Therefore, you should exercise caution when configuring OSPF to import external routes.</p>
<p>Perform the following steps on the ASBR running OSPF.</p>
<div class="notice"><span class="noticetitle"><img src="../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>OSPF and other dynamic routing protocols such as IS-IS and BGP often import routes from each other. If no routing policy is configured or a routing policy is incorrectly configured on a device where IS-IS, OSPF, and BGP import routes from each other, a Layer 3 routing loop may occur due to a route selection result change. As a result, services are compromised. For details about the cause of the routing loop, see <a href="vrp_ospf_cfg_0302.html">Understanding Routing Loop Detection for Routes Imported to OSPF</a>.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176742853__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the OSPF view.</span><p><pre class="screen"><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</pre>
</p></li><li><span>Import routes from another protocol.</span><p><pre class="screen"><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> { <strong><span>bgp</span></strong> [ <strong><span>permit-ibgp</span></strong> ] | <strong><span>direct</span></strong> | <strong><span>rip</span></strong> [ <i><span class="varname">process-id-rip</span></i> ] | <strong><span>static</span></strong> | <strong><span>isis</span></strong> [ <i><span class="varname">process-id-isis</span></i> ] | <strong><span>ospf</span></strong> [ <i><span class="varname">process-id-ospf</span></i> ] } [ { <strong><span>inherit-cost</span></strong> | <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> } | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>type</span></strong> <i><span class="varname">type</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup></pre>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> command cannot be used to import external default routes.</p>
</div></div>
</p></li><li><span>(Optional) Set the default values of parameters (the cost, tag, and type) for the imported routes.</span><p><pre class="screen"><a href="cmdqueryname=default"><b><span class="cmdname">default</span></b></a> { <strong><span>cost</span></strong> { <i><span class="varname">costvalue</span></i> | <strong><span>inherit-metric</span></strong> } | <strong><span>tag</span></strong> <i><span class="varname">tagvalue</span></i> | <strong><span>type</span></strong> <i><span class="varname">typevalue</span></i> } <sup>*</sup></pre>
<p>You can set default values for the parameters (such as the cost, route tag, and route type) of the external routes imported by OSPF. The route tag can be used to differentiate AS numbers carried in BGP routes imported by OSPF.</p>
<p>The default values are as follows:</p>
<ul><li>The cost of the external routes imported by OSPF is 1.</li><li>A maximum of 2,147,483,647 routes can be imported each time.</li><li>The type of the imported external routes is Type 2.</li><li>The tag value of the imported routes is 1.</li></ul>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">Run one of the following commands to set a cost for imported routes. The commands are listed in descending order of priority:<ul><li>Run the <a href="cmdqueryname=apply+cost"><b><span class="cmdname">apply cost</span></b></a> command to apply a cost to routes filtered by a route-policy.</li><li>Run the <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> command to set a cost for imported routes.</li><li>Run the <a href="cmdqueryname=default"><b><span class="cmdname">default</span></b></a> command to set a default cost for imported routes.</li></ul>
</div>
</div></div>
</p></li><li><span>(Optional) Set a limit on the number of LSAs generated when OSPF imports routes.</span><p><pre class="screen"><a href="cmdqueryname=import-route+limit"><b><span class="cmdname">import-route limit</span></b></a> <i><span class="varname">limit-number</span></i> [ <strong><span>threshold-alarm</span></strong> { <strong><span>upper-limit</span></strong> <i><span class="varname">upper-limit-value</span></i> | <strong><span>lower-limit</span></strong> <i><span class="varname">lower-limit-value</span></i> }<sup>*</sup> ]</pre>
<div class="p">If OSPF imports a large number of external routes and advertises them to a device with a small routing table capacity, the device may restart unexpectedly. To address this problem, set a limit on the number of LSAs generated when OSPF imports external routes. This ensures stable device running. You can check the overload status based on the value of the <strong>Current status</strong> field in the <a href="cmdqueryname=display+ospf+brief"><b><span class="cmdname">display ospf brief</span></b></a> command output.<ul><li>Normal: The number is less than or equal to the lower alarm threshold.</li><li>Approach limit: The number has reached or exceeded 90% of the upper alarm threshold.</li><li>Exceed limit: The number has reached or exceeded the limit.</li></ul>
</div>
<p>Ensure that <i><span class="varname">upper-limit-value</span></i> is greater than or equal to <i><span class="varname">lower-limit-value</span></i>.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176742853__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176742853__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001176742853__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+ospf"><b><span class="cmdname">display ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>routing</span></strong> command to check information about the OSPF routing table.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospf_cfg_0000.html">OSPF Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospf_cfg_0045.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ospf_cfg_0047.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>