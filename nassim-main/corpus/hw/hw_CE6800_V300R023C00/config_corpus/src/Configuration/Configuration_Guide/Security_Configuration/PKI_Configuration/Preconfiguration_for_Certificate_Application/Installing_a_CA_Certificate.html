
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Installing a CA Certificate">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="security_pki_cfg_0041.html">
<meta name="DC.Relation" scheme="URI" content="security_pki_cfg_0042.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security Protection">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security Protection">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security Protection">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security Protection">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513166006">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Installing a CA Certificate</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001513166006"></a><a name="EN-US_TASK_0000001513166006"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Installing a CA Certificate</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001513166006__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After the CA certificate is downloaded, the device automatically stores the CA certificate in <strong>flash:/pki/public</strong>. </p>
<p>After obtaining a CA certificate in out-of-band mode (for example, by disk or email), you need to upload the CA certificate to the specified storage directory on the device. Before installing a CA certificate, you need to upload the CA certificate to <strong>flash:/pki/public</strong>. </p>
<p>After the CA certificate is saved to the specified directory, you also need to import it to the device memory. After the device restarts, the system automatically loads the certificate.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To prevent a certificate installation failure, ensure that the CA certificate file size does not exceed 1 MB.</p>
<p><span>By default, the PKI realm named <strong>default</strong> exists.</span> The <strong>default</strong> realm can be modified but cannot be deleted.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001513166006__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><strong>Optional: </strong><span>Enter the user view and download the CA certificate to the <strong>flash:/pki/public</strong> directory.</span><p><p>If you obtain the CA certificate in out-of-band mode and upload it to the device storage through FTP or SFTP, perform this step. SFTP is recommended because it is more secure than FTP.</p>
</p><p><pre class="screen"><a href="cmdqueryname=cd+pki"><b><span class="cmdname">cd pki</span></b></a>
<a href="cmdqueryname=cd+public"><b><span class="cmdname">cd public</span></b></a><strong><a href="cmdqueryname=%2F"><b><span class="cmdname">/</span></b></a></strong>
<a href="cmdqueryname=ftp+172.16.104.110"><b><span class="cmdname">ftp 172.16.104.110</span></b></a>
Trying 172.16.104.110...
Press CTRL+K to abort
Connected to 172.16.104.110.
220 FTP service ready.
User(172.16.104.110:(none)):ftpuser
331 Password required for ftpuser
Enter password:
230 User logged in.
<a href="cmdqueryname=get+ca.cer"><b><span class="cmdname">get ca.cer</span></b></a>
200 Port command okay.
150 Opening ASCII mode data connection for temp1.c.
226 Transfer complete.
FTP: 4 byte(s) received in 8.190 second(s) .48byte(s)/sec.</pre>
</p></li><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><strong>Optional: </strong><span>Import the initial CA certificate to the <strong>default</strong> realm.</span><p><pre class="screen"><a href="cmdqueryname=pki+import-certificate"><b><span class="cmdname">pki import-certificate</span></b></a> <strong><span>default_ca</span></strong> <strong><span>realm</span></strong> <strong><span>default</span></strong></pre>
<p>The initial CA certificate has been saved to the NVRAM before the device is delivered. To use the initial CA certificate, run this command to load the certificate to the <strong>default</strong> realm. The initial CA certificate can be deleted. After it is deleted, you can import other CA certificates to the <strong>default</strong> realm. However, <strong>default_ca.cer</strong> is the name reserved for the initial CA certificate. An imported certificate cannot be named <strong>default_ca.cer</strong>. To restore the initial CA certificate after it is deleted, run this command to load the certificate to the <strong>default</strong> realm.</p>
</p></li><li><span>Create a PKI realm.</span><p><pre class="screen"><a href="cmdqueryname=pki+realm"><b><span class="cmdname">pki realm</span></b></a> <i><span class="varname">realm-name</span></i>
<a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>Import the CA certificate to the device memory.</span><p><pre class="screen"><a href="cmdqueryname=pki+import-certificate"><b><span class="cmdname">pki import-certificate</span></b></a> <strong><span>ca</span></strong> [ [ <strong><span>realm</span></strong> <i><span class="varname">realm-name</span></i> ] { <strong><span>der</span></strong> | <strong><span>pkcs12</span></strong> | <strong><span>pem</span></strong> } ] <strong><span>filename</span></strong> <i><span class="varname">file-name</span></i><span> [ <strong>cert-name</strong> <em>cert-name</em> ] [ <strong>no-check-hash-alg</strong> ] [ <strong><span>no-check-same-name</span></strong> ]</span></pre>
</p></li><li><strong>Optional: </strong><span>Set the number of days in advance you are notified that the CA certificate in the memory is about to expire.</span><p><pre class="screen"><a href="cmdqueryname=pki+set-certificate+expire-prewarning"><b><span class="cmdname">pki set-certificate expire-prewarning</span></b></a> <i><span class="varname">day</span></i></pre>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001513166006__en-us_task_0228023023_en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001513166006__en-us_task_0228023023_en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001513166006__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+pki+certificate"><b><span class="cmdname">display pki certificate</span></b></a> <strong><span>ca</span></strong> [ <strong><span>realm</span></strong> <i><span class="varname">realm-name</span></i> | <strong><span>filename</span></strong> <i><span class="varname">file-name</span></i> ] command to check the CA certificate that has been loaded on the device.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="security_pki_cfg_0041.html">Preconfiguration for Certificate Application
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="security_pki_cfg_0042.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>