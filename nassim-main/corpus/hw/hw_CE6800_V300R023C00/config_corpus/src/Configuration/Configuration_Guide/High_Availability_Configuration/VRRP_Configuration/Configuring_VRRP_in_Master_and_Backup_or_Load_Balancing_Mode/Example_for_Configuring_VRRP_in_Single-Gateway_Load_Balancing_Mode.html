
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring VRRP in Single-Gateway Load Balancing Mode">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_vrrp_cfg_0104.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vrrp_cfg_0132.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130624254">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring VRRP in Single-Gateway Load Balancing Mode</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130624254"></a><a name="EN-US_TASK_0000001130624254"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring VRRP in Single-Gateway Load Balancing Mode</h1>
<div class="taskbody" id="taskbody1581929158311"><div class="context"><a name="EN-US_TASK_0000001130624254__1.3.1"></a><a name="1.3.1"></a>
<div class="p" id="EN-US_TASK_0000001130624254__context1327989906214023"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0000001130624254__p1706995858214023">A VRRP group working in master/backup mode can be configured on gateways to implement gateway redundancy. To reduce the traffic load on the master device, configure VRRP groups working in single-gateway load balancing mode to balance uplink traffic.</p>
<p id="EN-US_TASK_0000001130624254__p1140026669214023">As shown in <a href="#EN-US_TASK_0000001130624254__fig_dc_vrp_vrrp_cfg_013001">Figure 1</a>, DeviceD is dual-homed to DeviceA and DeviceB. Traffic of some hosts needs to be forwarded using DeviceA, with DeviceB serving as the backup; whereas traffic of other hosts needs to be forwarded using DeviceB, with DeviceA serving as the backup. When DeviceA and DeviceB function as master devices in different backup groups, they can back up each other and balance data traffic.</p>
<div class="fignone" id="EN-US_TASK_0000001130624254__fig_dc_vrp_vrrp_cfg_013001"><a name="EN-US_TASK_0000001130624254__fig_dc_vrp_vrrp_cfg_013001"></a><a name="fig_dc_vrp_vrrp_cfg_013001"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring VRRP in single-gateway load balancing mode</span><div class="note" id="EN-US_TASK_0000001130624254__note1993735110158"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001130624254__p151905481214023">In this example, interface 1, interface 2, and interface 3 represent <span>100GE</span><span>1/0/1</span>, <span>100GE</span><span>1/0/2</span>, and <span>100GE</span><span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0000001130624254__image1002537640214023" src="figure/en-us_image_0000001130624278.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130624254__1.3.2"></a><a name="1.3.2"></a>
<div class="p" id="EN-US_TASK_0000001130624254__context1041203648214023"><h4 class="sectiontitle">Precautions</h4><p id="EN-US_TASK_0000001130624254__p1970711305214023">DeviceA's interface (<span>100GE</span><span>1/0/3</span>) and DeviceB's interface (<span>100GE</span><span>1/0/3</span>) must be on the same network segment.</p>
<p id="EN-US_TASK_0000001130624254__p13842139514">To improve security, you are advised to configure a VRRP security policy. For details, see <a href="vrp_vrrp_cfg_0121.html">Example for Configuring VRRP in Master/Backup Mode</a>.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130624254__1.3.3"></a><a name="1.3.3"></a>
<div class="p" id="EN-US_TASK_0000001130624254__context1575775413214023"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001130624254__p1389156813214023">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001130624254__ol1215540179214023"><li id="EN-US_TASK_0000001130624254__li1169967069214023"><p id="EN-US_TASK_0000001130624254__p1276256751214023"><a name="EN-US_TASK_0000001130624254__li1169967069214023"></a><a name="li1169967069214023"></a>Assign an IP address to each interface of the devices and configure a routing protocol to ensure IP connectivity.</p>
</li><li id="EN-US_TASK_0000001130624254__li1165957552214023"><p id="EN-US_TASK_0000001130624254__p460297589214023"><a name="EN-US_TASK_0000001130624254__li1165957552214023"></a><a name="li1165957552214023"></a>Configure two VRRP groups on user-side gateways. To balance traffic, configure VRRP group 1 as an LBRG with DeviceA being the master and VRRP group 2 as an LBRG member group with DeviceB being the master.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130624254__1.3.4"></a><a name="1.3.4"></a>
<div class="p" id="EN-US_TASK_0000001130624254__context1143854412412"><h4 class="sectiontitle">Procedure</h4><ol id="EN-US_TASK_0000001130624254__ol75161411458"><li id="EN-US_TASK_0000001130624254__li151717119511">Assign an IP address to each interface on DeviceA, DeviceB, and DeviceC. Configure OSPF to ensure that the devices can communicate. For details about DeviceD's configurations, see <a href="#EN-US_TASK_0000001130624254__example1700881952214023">Configuration Scripts</a>.<p id="EN-US_TASK_0000001130624254__p118345219349"># Configure DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001130624254__screen08348214341">&lt;<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1083442103415">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001130624254__b4834226347">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword201925297376"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001130624254__keyword1435220916112">HUAWEI</span>] <strong id="EN-US_TASK_0000001130624254__b133521910119">sysname DeviceA</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword11192192903710">*</span><span class="keyword" id="EN-US_TASK_0000001130624254__keyword41925293379">HUAWEI</span>]<strong id="EN-US_TASK_0000001130624254__b319202933711"> commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword15221326204913"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130624254__b73522917119">interface <span>100ge</span> <span>1/0/3</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword65431831144913"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b3424122485418">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword419222913719">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b63531891013">ip address 10.1.1.1 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1112531835019">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b1535319211">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword11432121913509">*</span>DeviceA] <strong id="EN-US_TASK_0000001130624254__b53531092118">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword178922255010">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130624254__b1998110262813">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword171921324135016">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130624254__b1354491519">ip address 192.168.1.1 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword2612172555013">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130624254__b13354159617">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1522727165011">*</span>DeviceA] <strong id="EN-US_TASK_0000001130624254__b113541691114">ospf 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword16919628175018">*</span>DeviceA-ospf-1] <strong id="EN-US_TASK_0000001130624254__b3355159117">area 0</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1070313035010">*</span>DeviceA-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001130624254__b1335519920113">network 10.1.1.0 0.0.0.255</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword37051732155013">*</span>DeviceA-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001130624254__b835513911114">network 192.168.1.0 0.0.0.255</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword149101233115012">*</span>DeviceA-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001130624254__b18355109416">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword12586153575010">*</span>DeviceA-ospf-1] <strong id="EN-US_TASK_0000001130624254__b435529813">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1419312943717">*</span>DeviceA] <strong id="EN-US_TASK_0000001130624254__b1319312292370">commit</strong></pre>
<p id="EN-US_TASK_0000001130624254__p683816214347"># Configure DeviceB.</p>
<pre class="screen" id="EN-US_TASK_0000001130624254__screen2838152153417">&lt;<span class="keyword" id="EN-US_TASK_0000001130624254__keyword98381273413">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001130624254__b7838102143420">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword111343196534"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001130624254__keyword158385214349">HUAWEI</span>] <strong id="EN-US_TASK_0000001130624254__b383832163415">sysname DeviceB</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword95161424519">*</span><span class="keyword" id="EN-US_TASK_0000001130624254__keyword10516112105117">HUAWEI</span>]<strong id="EN-US_TASK_0000001130624254__b1951616235116"> commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword187281221165414"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001130624254__b10839122173416">interface <span>100ge</span> <span>1/0/3</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword146016264545"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b15677159786">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword6800833125413">*</span>DeviceB-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b1583912103419">ip address 10.1.1.2 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword11703163535411">*</span>DeviceB-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b48401921349">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword12651837185416">*</span>DeviceB] <strong id="EN-US_TASK_0000001130624254__b784010215348">interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword117781439135420">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130624254__b1231584814811">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword883317401541">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130624254__b68406283415">ip address 192.168.2.1 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword154201242145415">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130624254__b2084116253412">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword16883144335413">*</span>DeviceB] <strong id="EN-US_TASK_0000001130624254__b1884110283411">ospf 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword23407469549">*</span>DeviceB-ospf-1] <strong id="EN-US_TASK_0000001130624254__b8841172143418">area 0</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword10845547165418">*</span>DeviceB-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001130624254__b084116253419">network 10.1.1.0 0.0.0.255</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1032814911548">*</span>DeviceB-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001130624254__b14841132163412">network 192.168.2.0 0.0.0.255</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword17501150165412">*</span>DeviceB-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001130624254__b10842152153413">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword17798151165417">*</span>DeviceB-ospf-1] <strong id="EN-US_TASK_0000001130624254__b17842122133410">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword13100121313518">*</span>DeviceB] <strong id="EN-US_TASK_0000001130624254__b9100161345112">commit</strong></pre>
<p id="EN-US_TASK_0000001130624254__p1384272183410"># Configure DeviceC.</p>
<pre class="screen" id="EN-US_TASK_0000001130624254__screen13842162153412">&lt;<span class="keyword" id="EN-US_TASK_0000001130624254__keyword784219293411">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001130624254__b68424213346">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword156254814566"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001130624254__keyword3842102143410">HUAWEI</span>] <strong id="EN-US_TASK_0000001130624254__b14842132193415">sysname DeviceC</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword33821710105618"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001130624254__b98436213349">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword92281812205618"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-<span>100GE</span><span>1/0/1</span>]<strong id="EN-US_TASK_0000001130624254__b790825201311"> undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1051415910559">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130624254__b88431827346">ip address 192.168.1.2 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1111111105510">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130624254__b188437213341">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1047315124554">*</span>DeviceC] <strong id="EN-US_TASK_0000001130624254__b20844122163416">interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1985141435516">*</span>DeviceC-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130624254__b012311519147">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword13819915115515">*</span>DeviceC-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130624254__b14844429347">ip address 192.168.2.2 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1593271617554">*</span>DeviceC-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130624254__b584519220347">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword91312197552">*</span>DeviceC] <strong id="EN-US_TASK_0000001130624254__b28455273418">interface <span>100ge</span> <span>1/0/3</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword7934321125519">*</span>DeviceC-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b491911533176">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword20957112225512">*</span>DeviceC-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b11845729345">ip address 172.16.1.1 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword0481724125513">*</span>DeviceC-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b684692133410">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword0760924155511">*</span>DeviceC] <strong id="EN-US_TASK_0000001130624254__b484617212348">ospf 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1696212252558">*</span>DeviceC-ospf-1] <strong id="EN-US_TASK_0000001130624254__b155621249102019">area 0</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword91202027195515">*</span>DeviceC-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001130624254__b2846202193419">network 192.168.1.0 0.0.0.255</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword7158128105514">*</span>DeviceC-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001130624254__b1784642113410">network 192.168.2.0 0.0.0.255</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword9536142915510">*</span>DeviceC-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001130624254__b88472263416">network 172.16.1.0 0.0.0.255</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword104118314557">*</span>DeviceC-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001130624254__b78478211345">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1195532165511">*</span>DeviceC-ospf-1] <strong id="EN-US_TASK_0000001130624254__b1284702173417">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword9868726165119">*</span>DeviceC] <strong id="EN-US_TASK_0000001130624254__b986872618514">commit</strong></pre>
</li><li id="EN-US_TASK_0000001130624254__li7363823451">Configure a VRRP group on DeviceA and DeviceB.<p id="EN-US_TASK_0000001130624254__p1896267819214023"><a name="EN-US_TASK_0000001130624254__li7363823451"></a><a name="li7363823451"></a># Create VRRP groups 1 and 2 on DeviceA's interface. Set the priority to 120 for DeviceA to ensure that it functions as the master in VRRP group 1, and use the default priority 100 for DeviceA to ensure that it functions as the backup in VRRP group 2.</p>
<pre class="screen" id="EN-US_TASK_0000001130624254__screen111539630214023">[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword690724675914"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong id="EN-US_TASK_0000001130624254__b532995111214023"> interface <span>100ge</span><span>1/0/3</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1875719489590"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b1767148978214023">vrrp vrid 1 virtual-ip 10.1.1.111</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword189001453714">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b715632691214023">vrrp vrid 1 priority 120</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword47216541911">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b1923034835214023">vrrp vrid 2</strong></pre>
<p id="EN-US_TASK_0000001130624254__p1542233959214023"># On DeviceA's GE<span>0/1/3</span>, configure VRRP group 1 as an LBRG and add VRRP group 2 to the LBRG.</p>
<pre class="screen" id="EN-US_TASK_0000001130624254__screen1696918924214023">[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword1117919241627"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b183433321428">vrrp vrid 1 load-balance</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword01799241927">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b156031037528">vrrp vrid 2 join load-balance-vrrp vrid 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword151794241927">*</span>DeviceA-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b137202430218">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword114314224514">*</span>DeviceA] <strong id="EN-US_TASK_0000001130624254__b1143522356">commit</strong></pre>
<p id="EN-US_TASK_0000001130624254__p1506431609214023"># Create VRRP groups 1 and 2 on DeviceB's interface. Use the default priority 100 for DeviceB to ensure that it functions as the backup in VRRP group 1, and set the priority to 120 for DeviceB to ensure that it functions as the master in VRRP group 2.</p>
<pre class="screen" id="EN-US_TASK_0000001130624254__screen1557507953214023">[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword193911054145912"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001130624254__b509827531214023">interface <span>100ge</span><span>1/0/3</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword9692457105916"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b817658842214023">vrrp vrid 1 virtual-ip 10.1.1.111</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword19916841621">*</span>DeviceB-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b1226484502214023">vrrp vrid 2</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword10775954219">*</span>DeviceB-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b49192788214023">vrrp vrid 2 priority 120</strong></pre>
<p id="EN-US_TASK_0000001130624254__p1129824842214023"># On DeviceB's GE<span>0/1/3</span>, configure VRRP group 1 as an LBRG and add VRRP group 2 to the LBRG.</p>
<pre class="screen" id="EN-US_TASK_0000001130624254__screen153482523414">[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword13348552949"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b53485521443">vrrp vrid 1 load-balance</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword103481852247">*</span>DeviceB-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b1134820523413">vrrp vrid 2 join load-balance-vrrp vrid 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword113491652542">*</span>DeviceB-<span>100GE</span><span>1/0/3</span>] <strong id="EN-US_TASK_0000001130624254__b13349145216415">quit</strong>

[<span class="keyword" id="EN-US_TASK_0000001130624254__keyword14571952134212">*</span>DeviceB] <strong id="EN-US_TASK_0000001130624254__b1457125211426">commit</strong></pre>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130624254__1.3.5"></a><a name="1.3.5"></a>
<div class="p" id="EN-US_TASK_0000001130624254__context6832791688"><h4 class="sectiontitle">Verifying the Configuration</h4><p id="EN-US_TASK_0000001130624254__p117915382818"># Check the VRRP status on DeviceA and DeviceB.</p>
<pre class="screen" id="EN-US_TASK_0000001130624254__screen1926139796214023">&lt;DeviceA&gt; <strong id="EN-US_TASK_0000001130624254__b1135931256214023">display vrrp verbose</strong>
<span>100GE</span><span>1/0/3</span> | Virtual Router 1
<strong id="EN-US_TASK_0000001130624254__b1156217431214023">State           : Master</strong>
<strong id="EN-US_TASK_0000001130624254__b1027073995214023">Virtual IP      : 10.1.1.111</strong>
Master IP         : 10.1.1.1
PriorityRun       : 120
PriorityConfig    : 120
MasterPriority    : 120
Preempt           : YES   Delay Time : 0s   <span>Remain : --</span>
TimerRun          : 1s
TimerConfig       : 1s
Auth Type         : NONE
Virtual MAC       : 00e0-fc12-3456
Check TTL         : YES
<strong id="EN-US_TASK_0000001130624254__b1572097853214023">Config Type     : Load-Balance</strong>
Create Time       : 2020-10-19 03:29:46
Last Change Time  : 2020-10-19 03:29:51

<span>100GE</span><span>1/0/3</span> | Virtual Router 2
<strong id="EN-US_TASK_0000001130624254__b357243932214023">State          : Backup</strong>
<strong id="EN-US_TASK_0000001130624254__b732464884214023">Virtual IP     : 0.0.0.0</strong>
Master IP        : 10.1.1.2
PriorityRun      : 100
PriorityConfig   : 100
MasterPriority   : 120
Preempt          : YES   Delay Time : 0s   <span>Remain : --</span>
TimerRun         : 1s
TimerConfig      : 1s
Auth Type        : NONE
Virtual MAC      : 00e0-fc12-3457
Check TTL        : YES
<strong id="EN-US_TASK_0000001130624254__b1290470975214023">Config Type    : Load-Balance-Member</strong>
Create Time      : 2020-10-19 03:30:17
Last Change Time : 2020-10-19 03:33:05
                                           </pre>
<pre class="screen" id="EN-US_TASK_0000001130624254__screen435018171014">&lt;DeviceB&gt; <strong id="EN-US_TASK_0000001130624254__b368448818214023">display vrrp verbose</strong>
<span>100GE</span><span>1/0/3</span> | Virtual Router 1
<strong id="EN-US_TASK_0000001130624254__b843588805214023">State           : Backup</strong>
<strong id="EN-US_TASK_0000001130624254__b1722599835214023">Virtual IP      : 10.1.1.111</strong>
Master IP         : 10.1.1.1
PriorityRun       : 100
PriorityConfig    : 100
MasterPriority    : 120
Preempt           : YES   Delay Time : 0s   <span>Remain : --</span>
TimerRun          : 1s
TimerConfig       : 1s
Auth Type         : NONE
Virtual MAC       : 00e0-fc12-3456
Check TTL         : YES
<strong id="EN-US_TASK_0000001130624254__b694371299214023">Config Type     : Load-Balance</strong>
Create Time       : 2012-10-19 03:32:29
Last Change Time  : 2012-10-19 03:32:31

<span>100GE</span><span>1/0/3</span> | Virtual Router 2
<strong id="EN-US_TASK_0000001130624254__b1560790208214023">State           : Master</strong>
<strong id="EN-US_TASK_0000001130624254__b2136086795214023">Virtual IP      : 0.0.0.0</strong>
Master IP         : 10.1.1.2
PriorityRun       : 120
PriorityConfig    : 120
MasterPriority    : 120
Preempt           : YES   Delay Time : 0s   <span>Remain : --</span>
TimerRun          : 1s
TimerConfig       : 1s
Auth Type         : NONE
Virtual MAC       : 00e0-fc12-3457
Check TTL         : YES
<strong id="EN-US_TASK_0000001130624254__b857943311214023">Config Type     : Load-Balance-Member</strong>
Create Time       : 2020-10-19 03:32:51
Last Change Time  : 2020-10-19 03:33:04                            </pre>
<p id="EN-US_TASK_0000001130624254__p290143110101">The command outputs show that DeviceA functions as the master in the LBRG and as the backup in the LBRG member group and DeviceB functions as the backup in the LBRG and as the master in the LBRG member group.</p>
<p id="EN-US_TASK_0000001130624254__p761714513107"># Check information about the LBRG and its member group.</p>
<pre class="screen" id="EN-US_TASK_0000001130624254__screen2065926225214023">&lt;DeviceA&gt; <strong id="EN-US_TASK_0000001130624254__b1604201621214023">display vrrp load-balance member-vrrp</strong>
Interface: <span>100GE</span><span>1/0/3</span>, <strong id="EN-US_TASK_0000001130624254__b1375170305214023">load-balance-vrrp vrid: 1, state: Master</strong>
  Member-vrrp number: 1
    <strong id="EN-US_TASK_0000001130624254__b821556618214023">Member-vrrp vrid: 2, state: Backup</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001130624254__screen692478865214023">&lt;DeviceB&gt; <strong id="EN-US_TASK_0000001130624254__b333466040214023">display vrrp load-balance member-vrrp</strong>
Interface: <span>100GE</span><span>1/0/3</span>, <strong id="EN-US_TASK_0000001130624254__b1688889436214023">load-balance-vrrp vrid: 1, state: Backup</strong>
  Member-vrrp number: 1
    <strong id="EN-US_TASK_0000001130624254__b946112466214023">Member-vrrp vrid: 2, state: Master</strong></pre>
<p id="EN-US_TASK_0000001130624254__p1717515573214023">The command outputs show information about the LBRG and its member group on DeviceA and DeviceB, respectively.</p>
</div></div>
<div class="example" id="EN-US_TASK_0000001130624254__example1700881952214023"><a name="EN-US_TASK_0000001130624254__example1700881952214023"></a><a name="example1700881952214023"></a><a name="EN-US_TASK_0000001130624254__1.3.6"></a><a name="1.3.6"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul id="EN-US_TASK_0000001130624254__ul765958111214023"><li id="EN-US_TASK_0000001130624254__li1490140255214023"><p id="EN-US_TASK_0000001130624254__p832974471214023"><a name="EN-US_TASK_0000001130624254__li1490140255214023"></a><a name="li1490140255214023"></a>DeviceA</p>
<pre class="screen" id="EN-US_TASK_0000001130624254__screen1160054262214023">#
sysname DeviceA
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.1.1 255.255.255.0
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ip address 10.1.1.1 255.255.255.0
 vrrp vrid 1 virtual-ip 10.1.1.111
 vrrp vrid 1 load-balance
 vrrp vrid 1 priority 120
 vrrp vrid 2
 vrrp vrid 2 join load-balance-vrrp vrid 1
#
ospf 1
 area 0.0.0.0
  network 192.168.1.0 0.0.0.255
  network 10.1.1.0 0.0.0.255
#
return</pre>
</li><li id="EN-US_TASK_0000001130624254__li16497164214545">DeviceB<pre class="screen" id="EN-US_TASK_0000001130624254__screen2136750585214023">#
sysname DeviceB
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 192.168.2.1 255.255.255.0
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ip address 10.1.1.2 255.255.255.0
 vrrp vrid 1 virtual-ip 10.1.1.111
 vrrp vrid 1 load-balance
 vrrp vrid 2
 vrrp vrid 2 priority 120
 vrrp vrid 2 join load-balance-vrrp vrid 1
#
ospf 1
 area 0.0.0.0
  network 192.168.2.0 0.0.0.255
  network 10.1.1.0 0.0.0.255
#
return</pre>
</li><li id="EN-US_TASK_0000001130624254__li16782171810558">DeviceC<pre class="screen" id="EN-US_TASK_0000001130624254__screen258760090214023">#
 sysname DeviceC
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.1.2 255.255.255.0
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 192.168.2.2 255.255.255.0
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ip address 172.16.1.1 255.255.255.0
#
ospf 1
 area 0.0.0.0
  network 192.168.1.0 0.0.0.255
  network 192.168.2.0 0.0.0.255
  network 172.16.1.0 0.0.0.255
#
return</pre>
</li><li id="EN-US_TASK_0000001130624254__li1089905827214023"><p id="EN-US_TASK_0000001130624254__p11725479214023"><a name="EN-US_TASK_0000001130624254__li1089905827214023"></a><a name="li1089905827214023"></a>DeviceD</p>
<pre class="screen" id="EN-US_TASK_0000001130624254__screen725175369214023">#
sysname DeviceD
#
vlan batch 10
#
interface <span>100GE</span><span>1/0/1</span>
 port default vlan 10
#
interface <span>100GE</span><span>1/0/2</span>
 port default vlan 10
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_vrrp_cfg_0104.html">Configuring VRRP in Master/Backup or Load Balancing Mode
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_vrrp_cfg_0132.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>