
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an Anycast RP Peer">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_pim_cfg_0037.html">
<meta name="DC.Relation" scheme="URI" content="vrp_pim_cfg_0040.html">
<meta name="DC.Relation" scheme="URI" content="vrp_pim_cfg_0042.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130783640">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring an Anycast RP Peer</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130783640"></a><a name="EN-US_TASK_0000001130783640"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an Anycast RP Peer</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130783640__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When sending a Register message to an anycast RP peer, the local anycast RP needs to convert the destination address of the message into the local address of the anycast RP peer.</p>
<p>The <span class="keyword">devices</span> functioning as anycast RPs can be identified by the same logical address so that the RP in the PIM-SM domain is unique. These devices, however, need to distinguish one another during communication. Therefore, the configured anycast RP address cannot be used. In this case, you need to configure a local address for an anycast RP and an anycast RP peer relationship.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130783640__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Configure a basic or an advanced ACL as needed.</span><p><ul><li><p>Configure a basic ACL.</p>
<ol type="a"><li>Create a basic ACL and enter its view.<pre class="screen"><span><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> [ <strong><span>number</span></strong> ] <i><span class="varname">basic-acl-number</span></i> </span></pre>
</li><li>Configure a rule for the basic ACL.<pre class="screen"><span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> }</span></pre>
</li></ol>
</li><li><p>Configure an advanced ACL.</p>
<ol type="a"><li>Create an advanced ACL and enter its view.<pre class="screen"><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> { <strong><span>name</span></strong> <i><span class="varname">advance-acl-name</span></i> [ <strong><span>advance</span></strong> | [ <strong><span>advance</span></strong> ] <strong><span>number</span></strong> <i><span class="varname">advance-acl-number</span></i> ] | [ <strong><span>number</span></strong> ] <i><span class="varname">advance-acl-number</span></i> } [ <strong><span>match-order</span></strong> { <strong><span>config</span></strong> | <strong><span>auto</span></strong> } ]</pre>
</li><li>Configure a rule for the advanced ACL.<pre class="screen"><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>ip</span></strong> [ <strong><span>destination</span></strong> { <i><span class="varname">destination-ip-address</span></i> { <i><span class="varname">destination-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } ]</pre>
</li></ol>
</li></ul>
</p></li><li><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>Enter the PIM view.</span><p><pre class="screen"><a href="cmdqueryname=pim"><b><span class="cmdname">pim </span></b></a>[ <span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span></pre>
</p></li><li><span>Configure an anycast RP and enter its view.</span><p><pre class="screen"><a href="cmdqueryname=anycast-rp"><b><span class="cmdname">anycast-rp</span></b></a> <i><span class="varname">rp-address</span></i></pre>
</p></li><li><span>Configure an anycast RP peer.</span><p><pre class="screen"><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> [ <strong><span>fwd-msdp-sa</span></strong> [ <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> ] ]</pre>
</p><p><p><i><span class="varname">peer-address</span></i> specifies the local address of an anycast RP peer.</p>
<p>If <strong><span>fwd-msdp-sa</span></strong> is specified, the local RP extracts source and group information from received Multicast Source Discovery Protocol (MSDP) Source Active (SA) messages, encapsulates the information into Register messages, and sends the messages to anycast RP peers.</p>
<p>In a PIM-SM domain, all the devices deployed with anycast RP must be fully connected logically. Anycast RP peer relationships need to be configured between every two devices deployed with anycast RP.</p>
<p>If no ACL is configured, the device extracts source and group information from received MSDP SA messages, encapsulates the information into a Register message, and sends the message to anycast RP peers.</p>
<div class="p">If an ACL is configured, the device uses configured ACL rules to filter multicast group addresses in MSDP SA messages to be forwarded.<ul><li>If an MSDP SA message matches an ACL rule and the action is <strong>permit</strong>, the device forwards this message.</li><li>If an MSDP SA message matches an ACL rule and the action is <strong>deny</strong>, the device does not forward this message.</li><li>If an MSDP SA message does not match any ACL rule, the device does not forward this message.</li><li>If a specified ACL does not exist or contain rules, the device does not forward any MSDP SA messages.</li></ul>
</div>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_pim_cfg_0037.html">Configuring PIM-SM Anycast RP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_pim_cfg_0040.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_pim_cfg_0042.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>