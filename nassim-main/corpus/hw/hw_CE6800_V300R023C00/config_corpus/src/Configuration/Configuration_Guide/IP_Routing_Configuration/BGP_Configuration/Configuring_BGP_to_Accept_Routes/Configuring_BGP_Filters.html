
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP Filters">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0045.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0148.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0047.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176663675">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP Filters</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176663675"></a><a name="EN-US_TASK_0000001176663675"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP Filters</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176663675__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Configuring BGP filters allows you to flexibly filter received routes.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001176663675__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure an ACL.</span><p><p>An ACL is a series of sequential rules composed of permit and deny clauses. These rules specify source addresses, destination addresses, port numbers, and other information of data packets. ACL rules are used to classify data packets, and after the rules are applied to a device interface, it uses the rules to permit or deny data packets.</p>
<p>For details about ACL configuration, see <span> Configuration Guide</span> &gt; IP Addresses and Services &gt; ACL Configuration.</p>
<p>An ACL can be used as a matching condition of a route-policy or directly used in the <a href="cmdqueryname=filter-policy"><b><span class="cmdname">filter-policy</span></b></a> { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } <strong><span>import</span></strong> or <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv4-address</span></i> } <strong><span>filter-policy</span></strong> { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } <strong><span>import</span></strong> command.</p>
</p></li><li><span>Configure an IP prefix list.</span><p><p>An IP prefix list is a type of filter used to filter routes based on destination addresses, and is identified by its name. An IP prefix list can be used flexibly to implement precise filtering. For example, it can be used to filter a specific route or routes to a network segment. If a large number of routes with different prefixes need to be filtered, configuring an IP prefix list to filter the routes is very complex.</p>
<p>An IP prefix list can be used as a matching condition of a route-policy or directly used in the <a href="cmdqueryname=filter-policy"><b><span class="cmdname">filter-policy</span></b></a> <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> <strong><span>import</span></strong> or <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv4-address</span></i> } <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> <strong><span>import</span></strong> command.</p>
</p><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure an IPv4 prefix list. </span><p><pre class="screen"><a href="cmdqueryname=ip+ip-prefix+index+permit+deny+greater-equal+less-equal"><b><span class="cmdname">ip ip-prefix</span></b></a> <i><span class="varname">ip-prefix-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">ip-address</span></i> <i><span class="varname">mask-length</span></i> [ <strong><span>greater-equal</span></strong> <i><span class="varname">greater-equal-value</span></i> ] [ <strong><span>less-equal</span></strong> <i><span class="varname">less-equal-value</span></i> ]</pre>
<p>The range of the mask length must meet the following requirements: <i><span class="varname">mask-length</span></i> &lt;= <i><span class="varname">greater-equal-value</span></i> &lt;= <i><span class="varname">less-equal-value</span></i> &lt;= 32. If only <strong><span>greater-equal</span></strong> is specified, the prefix range is [<i><span class="varname">greater-equal-value</span></i>, 32]. If only <strong><span>less-equal</span></strong> is specified, the prefix range is [<i><span class="varname">mask-length</span></i>, <i><span class="varname">less-equal-value</span></i>].</p>
<p>An IPv4 prefix list is identified by its name, and each list contains one or multiple entries. Each entry is identified by an index, and can uniquely specify a matching range in the form of a network prefix. An IPv4 prefix list named <strong>abcd</strong> is used as an example.</p>
<pre class="screen">#</pre>
<pre class="screen">ip ip-prefix abcd index 10 permit 1.0.0.0 8</pre>
<pre class="screen">ip ip-prefix abcd index 20 permit 10.0.0.0 8</pre>
<p>During route matching, a device checks entries that are identified by indexes in ascending order. If a route matches an entry, the route does not continue to match against the next entry.</p>
<p>By default, the device denies all routes that do not match any entries. If all entries in an IPv4 prefix list are set to deny mode, all routes will be denied based on the IPv4 prefix list. In this case, after multiple entries are set to deny mode, define an entry <strong>permit 0.0.0.0 0 less-equal 32</strong> to allow all the other IPv4 routes to be permitted by the IPv4 prefix list.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If more than one entry is defined in an IPv4 prefix list, at least one entry should be set to permit mode.</p>
</div></div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176663675__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176663675__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure an AS_Path filter.</span><p><div class="p">An AS_Path filter is used to filter BGP routes based on the AS_Path lists they carry. If you do not want traffic to traverse specific ASs, you can configure an AS_Path filter to filter out routes carrying the AS numbers matching those in the AS_Path filter. If the BGP routing table of each device on a network contains a large number of BGP routes, configuring ACLs or IP prefix lists to filter BGP routes is a complex process, which complicates maintenance of new routes. To address this issue, use an AS_Path filter to filter routes.<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the AS_Path information is lost after route summarization, an AS_Path filter can no longer filter summary routes. However, it can still filter specific routes which carry AS_Path information.</p>
</div></div>
</div>
<p>An AS_Path filter can be used as a filtering condition of a route-policy or directly used in the <a href="cmdqueryname=peer+as-path-filter"><b><span class="cmdname">peer as-path-filter</span></b></a> command.</p>
</p><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure an AS_Path filter.</span><p><pre class="screen"><a href="cmdqueryname=ip+as-path-filter+index+permit+deny"><b><span class="cmdname">ip as-path-filter</span></b></a> { <i><span class="varname">as-path-filter-number</span></i> | <i><span class="varname">as-path-filter-name</span></i> } <span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span>{ <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular-expression</span></i></pre>
<p>AS_Path filters use regular expressions to define matching rules. A regular expression is composed of the following parts:</p>
<ul><li><p>Metacharacter: defines a matching rule.</p>
</li><li><p>Literal character: defines a matching object.</p>
</li></ul>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Description of metacharacters</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="24.68%" id="mcps1.3.2.3.3.2.2.4.2.3.1.1" liSelected="liSelected"><p>Special Character</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="75.32%" id="mcps1.3.2.3.3.2.2.4.2.3.1.2" liSelected="liSelected"><p>Function</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>\</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Defines an escape character, which is used to mark the next character (common or special) as a common character.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>^</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Matches the start position of a string.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>$</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Matches the end position of a string.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>*</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Matches a sub-regular expression that it follows zero or multiple times.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>+</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Matches a sub-regular expression that it follows once or multiple times.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>?</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Matches a sub-regular expression that it follows once or zero times.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>.</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Matches any single character.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>()</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Matches a sub-regular expression within the parentheses, and obtains the matching result. The parentheses can also be empty.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>_</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Matches regular expressions with a sign, such as a comma (,), left brace ({), right brace (}), left parenthesis ((), right parenthesis ()), or space. In addition, the underscore (_) can be used at the beginning of a regular expression with the same function as the caret sign (^) or at the end of a regular expression with the same function as the dollar sign ($).</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>x|y</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Matches <em>x</em> or <em>y</em>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>[xyz]</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Matches any character contained in a regular expression.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>[^xyz]</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Matches any character that is not contained in a regular expression.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>[a-z]</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Matches any character within a specified range in a regular expression.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="24.68%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.1 "><p>[^a-z]</p>
</td>
<td class="cellrowborder" valign="top" width="75.32%" headers="mcps1.3.2.3.3.2.2.4.2.3.1.2 "><p>Matches any character beyond a specified range.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>For example, ^10 matches only the AS_Path attribute beginning with 10, with ^ indicating that the beginning of a character string is matched.</p>
<p>Multiple rules (permit or deny) can be specified in a filter, and the relationship between them is OR, which means that a route matches the AS_Path filter if it meets one of the matching rules.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For details about how to use regular expressions, see <span> Configuration Guide</span> &gt; Basic Configuration &gt; CLI Overview.</p>
</div></div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176663675__en-us_task_0234857734_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176663675__en-us_task_0234857734_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure a community filter.</span><p><p>A BGP community attribute is used to identify a group of routes with the same properties. Routes can be classified manually by using community attributes, which facilitates route management.</p>
<p>In actual application, some AS internal routes may not need to be advertised to other ASs, while some AS external routes need to be advertised to other ASs. Both internal and external routes may have different prefixes (making an IP prefix list unsuitable), and may come from different ASs (making an AS_Path filter unsuitable). In this case, you can set a community value for the AS internal routes and another community value for the AS external routes on an AS edge device to control and filter routes.</p>
</p><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure a community filter.</span><p><ul><li><p>Configure a standard community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+community-filter+basic+index+permit+deny+internet"><b><span class="cmdname">ip community-filter</span></b></a> <strong><span>basic</span></strong> <i><span class="varname">comm-filter-name</span></i> <span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span>{ <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } [ <i><span class="varname">community-number</span></i> | <i><span class="varname">aa:nn</span></i> | <strong><span>internet</span></strong><span> [ <strong><span>strict-match</span></strong> ]</span> | <strong><span>no-export-subconfed</span></strong> | <strong><span>no-advertise</span></strong> | <strong><span>no-export</span></strong> ] &amp;&lt;1-20&gt;</pre>
<p>or</p>
<pre class="screen"><a href="cmdqueryname=ip+community-filter+index+permit+deny+internet"><b><span class="cmdname">ip community-filter</span></b></a> <i><span class="varname">basic-comm-filter-num</span></i> <span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span>{ <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } [ <i><span class="varname">community-number</span></i> | <i><span class="varname">aa:nn</span></i> | <strong><span>internet</span></strong> | <strong><span>no-export-subconfed</span></strong> | <strong><span>no-advertise</span></strong> | <strong><span>no-export</span></strong> ] &amp;&lt;1-20&gt;</pre>
</li><li><p>Configure an advanced community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+community-filter+advanced+index+permit+deny"><b><span class="cmdname">ip community-filter</span></b></a> { <strong><span>advanced</span></strong> <i><span class="varname">comm-filter-name</span></i> | <i><span class="varname">adv-comm-filter-num</span></i> } <span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span>{ <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular-expression</span></i></pre>
</li></ul>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176663675__en-us_task_0234857734_screen14848162118611_2"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176663675__en-us_task_0234857734_cmdname1784862115612_2">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure a Large-Community filter.</span><p><p>The Large-Community attribute can represent a 2-byte or 4-byte AS number completely, and has two 4-byte LocalData IDs. This enables the administrator to apply policies more flexibly. The Large-Community attribute extends and can be used together with the community attribute.</p>
</p><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure a Large-Community filter.</span><p><ul><li><p>Configure a basic Large-Community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+large-community-filter+basic+index+permit+deny"><b><span class="cmdname">ip large-community-filter</span></b></a> <strong><span>basic</span></strong> <i><span class="varname">large-comm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <i><span class="varname">aa:bb:cc</span></i> } &amp;&lt;1-16&gt;</pre>
</li><li><p>Configure an advanced Large-Community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+large-community-filter+advanced+index+permit+deny"><b><span class="cmdname">ip large-community-filter</span></b></a> <strong><span>advanced</span></strong> <i><span class="varname">large-comm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular-expression</span></i></pre>
</li></ul>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176663675__en-us_task_0234857734_screen14848162118611_3"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176663675__en-us_task_0234857734_cmdname1784862115612_3">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure an extended community filter.</span><p><p>A BGP extended community filter is similar to a community filter and is mainly used to filter VPN routes.</p>
</p><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Perform either of the following operations as needed to configure an extended community filter.</span><p><p>Configure a VPN-Target extended community filter.</p>
<ul><li><p>Configure a basic VPN-Target extended community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+extcommunity-filter+basic+index+deny+permit+rt"><b><span class="cmdname">ip extcommunity-filter</span></b></a> { <i><span class="varname">basic-extcomm-filter-num</span></i> | <strong><span>basic</span></strong> <i><span class="varname">basic-extcomm-filter-name</span></i> }<span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span> { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } { <strong><span>rt</span></strong> { <i><span class="varname">as-number:nn</span></i> | <i><span class="varname">4as-number:nn</span></i> | <i><span class="varname">ipv4-address</span></i>:<i><span class="varname">nn</span></i> } } &amp;&lt;1-16&gt;</pre>
</li><li><p>Configure an advanced VPN-Target extended community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+extcommunity-filter+advanced+index+deny+permit"><b><span class="cmdname">ip extcommunity-filter</span></b></a> { <i><span class="varname">advanced-extcomm-filter-num</span></i> | <strong><span>advanced</span></strong> <i><span class="varname">advanced-extcomm-filter-name</span></i> }<span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span> { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <i><span class="varname">regular-expression</span></i></pre>
</li></ul>
<p>Configure an SoO extended community filter.</p>
<ul><li><p>Configure a basic SoO extended community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+extcommunity-list+soo+basic+index+permit+deny"><b><span class="cmdname">ip extcommunity-list soo basic</span></b></a> <i><span class="varname">basic-extcomm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <i><span class="varname">site-of-origin</span></i> } &amp;&lt;1-16&gt;</pre>
</li><li><p>Configure an advanced SoO extended community filter.</p>
<pre class="screen"><a href="cmdqueryname=ip+extcommunity-list+soo+advanced+index+permit+deny"><b><span class="cmdname">ip extcommunity-list soo advanced</span></b></a> <i><span class="varname">advanced-extcomm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular-expression</span></i></pre>
</li></ul>
<p>Multiple entries (or rules) can be defined in an extended community filter, and the relationship between them is OR, which means that the route matches the extcommunity filter if it matches one of the rules.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176663675__en-us_task_0234857734_screen14848162118611_4"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176663675__en-us_task_0234857734_cmdname1784862115612_4">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure a route-policy.</span><p><p>A route-policy is used to match routes or route attributes, and to change the attributes of routes that meet specific conditions. As the preceding filters can be used as matching conditions of a route-policy, the route-policy offers powerful functions and can be used flexibly.</p>
</p><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Create a route-policy node and enter the route-policy view.</span><p><pre class="screen"><a href="cmdqueryname=route-policy+permit+deny+node"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <strong><span>node</span></strong> <i><span class="varname">node</span></i></pre>
<div class="p">A route-policy consists of multiple nodes. For example, the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example permit node 10</strong> command defines node 10 and the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example deny node 20</strong> command defines node 20. Both the nodes belong to the route-policy named <strong>route-policy-example</strong>, and the relationship between the nodes of a route-policy is OR. The details are as follows:<ul><li>If a route matches one node, it matches the route-policy and will not be matched against the next node. In the preceding example, if a route matches the node defined using the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example permit node 10</strong> command, the route will not be matched against the node defined using the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example deny node 20</strong> command.</li><li>If a route does not match any node, the route fails to match the route-policy.</li></ul>
</div>
<p>When a route-policy is used to filter routes, the routes are first matched against the node with the smallest node ID. For example, if two nodes are configured using the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example permit node 10</strong> and <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example deny node 20</strong> commands, routes are first matched against the node configured using the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example permit node 10</strong> command.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>A route-policy denies all unmatched routes by default. If more than one node is defined in a route-policy, at least one should be set to permit mode.</p>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Configure <strong>if-match</strong> clauses for the current route-policy node.</span><p><p><strong>if-match</strong> clauses are used to filter routes. If no <strong>if-match</strong> clause is specified, all routes will match the route-policy node.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 2 </b><strong>if-match</strong> clauses</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="16.73%" id="mcps1.3.2.7.3.3.2.2.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="32.07%" id="mcps1.3.2.7.3.3.2.2.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="51.2%" id="mcps1.3.2.7.3.3.2.2.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.1 "><p>Match routes against an ACL.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.2 "><p><a href="cmdqueryname=if-match+acl"><b><span class="cmdname">if-match acl</span></b></a> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> }</p>
<p><a href="cmdqueryname=if-match+ip+next-hop+acl"><b><span class="cmdname">if-match ip next-hop acl</span></b></a> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> }</p>
<p><a href="cmdqueryname=if-match+ip+route-source+acl"><b><span class="cmdname">if-match ip route-source acl</span></b></a> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> }</p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.3 "><p>An ACL has been configured.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.1 "><p>Match routes against an IPv4 prefix list.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.2 "><p><a href="cmdqueryname=if-match+ip-prefix"><b><span class="cmdname">if-match ip-prefix</span></b></a> <i><span class="varname">ip-prefix-name</span></i></p>
<p><a href="cmdqueryname=if-match+ip+next-hop+ip-prefix"><b><span class="cmdname">if-match ip next-hop </span></b></a><strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i></p>
<p><a href="cmdqueryname=if-match+ip+route-source+ip-prefix"><b><span class="cmdname">if-match ip route-source </span></b></a><strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.3 "><p>An IPv4 prefix list has been configured.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>If the <a href="cmdqueryname=if-match+acl"><b><span class="cmdname">if-match acl</span></b></a> and <a href="cmdqueryname=if-match+ip-prefix"><b><span class="cmdname">if-match ip-prefix</span></b></a> commands are both run in the same route-policy node, the latter configuration overrides the previous one.</p>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.1 "><p>Match BGP routes against an AS_Path filter.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.2 "><p><a href="cmdqueryname=if-match+as-path-filter"><b><span class="cmdname">if-match as-path-filter</span></b></a> <i><span class="varname">apfIndex</span></i> &amp;&lt;1-16&gt;</p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.1 "><p>Match BGP routes against a community filter.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.2 "><ul><li><p><a href="cmdqueryname=if-match+community-filter+whole-match"><b><span class="cmdname">if-match community-filter</span></b></a> { <i><span class="varname">basic-comm-filter-num</span></i> [ <strong><span>whole-match</span></strong> ] | <i><span class="varname">adv-comm-filter-num</span></i> } <sup>*</sup> &amp;&lt;1-16&gt;</p>
</li><li><p><a href="cmdqueryname=if-match+community-filter+whole-match"><b><span class="cmdname">if-match community-filter</span></b></a> <i><span class="varname">comm-filter-name</span></i> [ <strong><span>whole-match</span></strong> ]</p>
</li><li><p><a href="cmdqueryname=if-match+community-filter+sort-match"><b><span class="cmdname">if-match community-filter</span></b></a> { <i><span class="varname">adv-comm-filter-num</span></i> <strong><span>sort-match</span></strong> } <sup>*</sup> &amp;&lt;1-16&gt;</p>
</li><li><p><a href="cmdqueryname=if-match+community-filter+sort-match"><b><span class="cmdname">if-match community-filter</span></b></a> <i><span class="varname">comm-filter-name</span></i> <strong><span>sort-match</span></strong></p>
</li></ul>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.1 "><p>Match BGP routes against a Large-Community filter.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.2 "><p><a href="cmdqueryname=if-match+large-community-filter+whole-match"><b><span class="cmdname">if-match large-community-filter</span></b></a> <i><span class="varname">large-comm-filter-name</span></i> [ <strong><span>whole-match</span></strong> ]</p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.1 "><p>Match BGP routes against a VPN-Target extended community filter.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.2 "><p><a href="cmdqueryname=if-match+extcommunity-filter"><b><span class="cmdname">if-match extcommunity-filter</span></b></a> { { <i><span class="varname">basic-extcomm-filter-num</span></i> [ <strong><span>matches-all</span></strong> | <strong><span>whole-match</span></strong> ] | <i><span class="varname">adv-extcomm-filter-num</span></i> } &amp;&lt;1-16&gt; | <i><span class="varname">extcomm-filter-name</span></i> [ <strong><span>matches-all</span></strong> | <strong><span>whole-match</span></strong> ] }</p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.1 "><p>Match BGP routes against an SoO extended community filter.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.2 "><p><a href="cmdqueryname=if-match+extcommunity-list+soo"><b><span class="cmdname">if-match extcommunity-list soo</span></b></a> <i><span class="varname">extcomm-filter-name</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.3.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>There is no sequence between <strong>if-match</strong> clauses, and a node may have multiple <strong>if-match</strong> clauses or none at all.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The relationship between <strong>if-match</strong> clauses in a route-policy node is AND, meaning that a route must match all matching conditions before the action defined by an <strong>apply</strong> clause is taken on this route. For example, if two <strong>if-match</strong> clauses (<strong>if-match acl 2003</strong> and <strong>if-match as-path-filter 100</strong>) are defined in the route-policy node specified using the <b><span class="cmdname">route-policy</span></b> <strong>route-policy-example permit node 10</strong> command, a route is considered to match node 10 only when it matches both <strong>if-match</strong> clauses.</p>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Configure <strong>apply</strong> clauses for the current route-policy node.</span><p><p><strong>apply</strong> clauses can be used to set attributes for the routes matching the <strong>if-match</strong> clauses. If this step is not performed, the attributes of these routes remain unchanged.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 3 </b><strong>apply</strong> clauses</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="16.73%" id="mcps1.3.2.7.3.4.2.2.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="32.07%" id="mcps1.3.2.7.3.4.2.2.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="51.2%" id="mcps1.3.2.7.3.4.2.2.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.1 "><p>Replace or add a specified AS number in the AS_Path attribute of matched BGP routes.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.2 "><p><a href="cmdqueryname=apply+as-path+additive+overwrite+delete"><b><span class="cmdname">apply as-path</span></b></a> <i><span class="varname">as-path-value</span></i> &amp;&lt;1-128&gt; { <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> }</p>
<p><a href="cmdqueryname=apply+as-path+additive+overwrite+delete"><b><span class="cmdname">apply as-path</span></b></a> <i><span class="varname">asValues</span></i> { <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> }</p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.1 "><p>Delete a specified community attribute from matched BGP routes.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.2 "><p><a href="cmdqueryname=apply+comm-filter+delete"><b><span class="cmdname">apply comm-filter</span></b></a> { <i><span class="varname">basIndex</span></i> | <i><span class="varname">advIndex</span></i> } <strong><span>delete</span></strong></p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.3 "><div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>The <a href="cmdqueryname=apply+comm-filter+delete"><b><span class="cmdname">apply comm-filter delete</span></b></a> command deletes a specified community attribute from matched routes based on the referenced community filter. To delete multiple community attributes through one community filter, you need to run the <a href="cmdqueryname=ip+community-filter"><b><span class="cmdname">ip community-filter</span></b></a> command multiple times to configure multiple indexes for the filter, with each index corresponding to only one community attribute. If multiple community attributes are specified in the same index of the same community filter, none of them can be deleted in this case.</p>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.1 "><p>Delete all the community attributes from a matched BGP route.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.2 "><p><a href="cmdqueryname=apply+community+none"><b><span class="cmdname">apply community</span></b></a> <strong><span>none</span></strong></p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.1 "><p>Set community attributes for matched BGP routes.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.2 "><ul><li><a href="cmdqueryname=apply+community+internet+no-advertise+no-export"><b><span class="cmdname">apply community</span></b></a> { { <i><span class="varname">community-number</span></i> | <i><span class="varname">aa:nn</span></i> } <span>&amp;&lt;1-32&gt;</span> | <strong><span>internet</span></strong> | <strong><span>no-advertise</span></strong> | <strong><span>no-export</span></strong> | <strong><span>no-export-subconfed</span></strong> } <sup>*</sup> [ <strong><span>additive</span></strong> ]</li><li><span><a href="cmdqueryname=apply+community+community-list+additive"><b><span class="cmdname">apply community community-list </span></b></a><i><span class="varname">community-list-name</span></i> [ <strong><span>additive</span></strong> ]</span></li></ul>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.3 "><div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>Before running the <a href="cmdqueryname=apply+community"><b><span class="cmdname">apply community</span></b></a> <strong><span>community-list</span></strong> <i><span class="varname">community-list-name</span></i> command, you need to run the <a href="cmdqueryname=ip+community-list"><b><span class="cmdname">ip community-list</span></b></a> command to configure a BGP community list and run the <a href="cmdqueryname=community"><b><span class="cmdname">community</span></b></a> command to configure community attributes for the list.</p>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.1 "><p>Delete the Large-Community attribute from matched BGP routes.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.2 "><p><a href="cmdqueryname=apply+large-community+none"><b><span class="cmdname">apply large-community</span></b></a> <strong><span>none</span></strong></p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.1 "><p>Set Large-Community attributes for matched BGP routes.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.2 "><ul><li><a href="cmdqueryname=apply+large-community+additive+overwrite+delete"><b><span class="cmdname">apply large-community</span></b></a> { <i><span class="varname">aa:bb:cc</span></i> } &amp;&lt;1-16&gt; { <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> }</li><li><span><a href="cmdqueryname=apply+large-community-list+additive+overwrite+delete"><b><span class="cmdname">apply large-community-list</span></b></a> <i><span class="varname">large-community-list-name</span></i> { <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> }</span></li></ul>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.3 "><div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>Before running the <a href="cmdqueryname=apply+large-community-list"><b><span class="cmdname">apply large-community-list</span></b></a> <i><span class="varname">large-community-list-name</span></i> command to set the BGP Large-Community attribute, run the <a href="cmdqueryname=ip+large-community-list"><b><span class="cmdname">ip large-community-list</span></b></a> command to configure a BGP Large-Community list and run the <a href="cmdqueryname=large-community"><b><span class="cmdname">large-community</span></b></a> command to configure values for the Large-Community list.</p>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.1 "><p>Set VPN-Target extended community attributes for matched BGP routes.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.2 "><p><a href="cmdqueryname=apply+extcommunity+rt+additive"><b><span class="cmdname">apply extcommunity</span></b></a> { <strong><span>rt</span></strong> { <i><span class="varname">as-number:nn</span></i> | <i><span class="varname">ipv4-address:nn</span></i> } } &amp;&lt;1-16&gt; [ <strong><span>additive</span></strong> ]</p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.1 "><p>Set SoO extended community attributes for matched BGP routes.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.2 "><p><a href="cmdqueryname=apply+extcommunity+soo+additive"><b><span class="cmdname">apply extcommunity soo</span></b></a> { <i><span class="varname">site-of-origin</span></i> } &amp;&lt;1-16&gt; <strong><span>additive</span></strong></p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.1 "><p>Set the link bandwidth extended community attribute.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.2 "><ul><li><a href="cmdqueryname=apply+extcommunity+bandwidth+none"><b><span class="cmdname">apply extcommunity bandwidth</span></b></a> {<i><span class="varname"> extCmntyString</span></i> | <strong><span>none</span></strong> }</li><li><a href="cmdqueryname=apply+extcommunity+bandwidth+aggregate+limit"><b><span class="cmdname">apply extcommunity bandwidth</span></b></a> <strong><span>aggregate</span></strong> [ <strong><span>limit</span></strong> <i><span class="varname">bandwidth-value</span></i> ]</li></ul>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.1 "><p>Set the Local_Pref for matched BGP routes.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.2 "><p><a href="cmdqueryname=apply+local-preference+%2B+-"><b><span class="cmdname">apply local-preference</span></b></a> <span>[ <strong><span>+</span></strong> | <strong><span>-</span></strong> ] </span><i><span class="varname">preference</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.1 "><p>Set the Origin attribute for matched BGP routes.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.2 "><p><a href="cmdqueryname=apply+origin+egp+igp+incomplete"><b><span class="cmdname">apply origin</span></b></a> { <strong><span>egp</span></strong> { <i><span class="varname">egpVal</span></i> } | <strong><span>igp</span></strong> | <strong><span>incomplete</span></strong> }</p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.1 "><p>Set the PrefVal for matched BGP routes.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.2 "><p><a href="cmdqueryname=apply+preferred-value"><b><span class="cmdname">apply preferred-value</span></b></a> <i><span class="varname">preferredVal</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.73%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.1 "><p>Set the dampening parameters for matched EBGP routes.</p>
</td>
<td class="cellrowborder" valign="top" width="32.07%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.2 "><p><a href="cmdqueryname=apply+dampening"><b><span class="cmdname">apply dampening</span></b></a> <i><span class="varname">half-life-reach</span></i> <i><span class="varname">reuse</span></i> <i><span class="varname">suppress</span></i> <i><span class="varname">ceiling</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="51.2%" headers="mcps1.3.2.7.3.4.2.2.2.4.1.3 "><p>-</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>The <strong>apply</strong> clauses can be applied in any order, and a node may have multiple <strong>apply</strong> clauses or none at all.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176663675__en-us_task_0234857734_screen14848162118611_5"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176663675__en-us_task_0234857734_cmdname1784862115612_5">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp_cfg_0045.html">Configuring BGP to Accept Routes
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp_cfg_0148.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bgp_cfg_0047.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>