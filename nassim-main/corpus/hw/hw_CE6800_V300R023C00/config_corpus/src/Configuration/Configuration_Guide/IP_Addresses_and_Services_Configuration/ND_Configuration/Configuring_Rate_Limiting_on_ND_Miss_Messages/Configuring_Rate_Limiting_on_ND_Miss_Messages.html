
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Rate Limiting on ND Miss Messages">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_nd_cfg_0044.html">
<meta name="DC.Relation" scheme="URI" content="vrp_nd_cfg_0045.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130782318">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Rate Limiting on ND Miss Messages</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130782318"></a><a name="EN-US_TASK_0000001130782318"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Rate Limiting on ND Miss Messages</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001130782318__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When a device sends IPv6 packets, if the MAC address corresponding to the destination IPv6 address of the packets does not exist, the device generates ND Miss messages. This consumes CPU resources and prevents the device from processing normal services. Rate limiting on ND Miss messages can be deployed to help reduce CPU resource consumption by ND Miss messages, protecting other services.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001130782318__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure rate limiting on ND Miss messages globally.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure rate limiting on ND Miss messages.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring rate limiting on ND Miss messages</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.1.2.2.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.1.2.2.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.1.2.2.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.1 "><p>Configure rate limiting on ND Miss messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+miss+anti-attack+rate-limit"><b><span class="cmdname">ipv6 nd miss anti-attack rate-limit </span></b></a><i><span class="varname">limit-number</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.3 "><p>When a device sends IPv6 packets, if the MAC address corresponding to the destination IPv6 address of the packets does not exist, the device generates ND Miss messages. This consumes CPU resources and prevents the device from processing normal services. Running this command resolves the problem, as it enables the device to process only the allowed number of ND Miss messages within a specified period, protecting other services.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND Miss messages based on a specified source IPv6 address.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+miss+anti-attack+rate-limit+source-ip"><b><span class="cmdname">ipv6 nd miss anti-attack rate-limit source-ip </span></b></a><i><span class="varname">ipv6-address</span></i> <strong><span>maximum</span></strong> <i><span class="varname">max-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.3 "><p>If a device is attacked, it receives a large number of ND Miss messages within a short period. As a result, the device consumes many CPU resources to learn and respond to ND entries, affecting the processing of other services. To resolve this issue, configure a rate limit for receiving ND Miss messages based on a specified source IPv6 address. After the configuration is complete, the device counts the number of ND Miss messages received per period based on the specified source IPv6 address. If the number exceeds the configured limit, the device does not process excess ND Miss messages.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND Miss messages based on any source IPv6 address.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+miss+anti-attack+rate-limit+source-ip+all+maximum"><b><span class="cmdname">ipv6 nd miss anti-attack rate-limit source-ip all maximum </span></b></a><i><span class="varname">max-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.1.2.2.2.1.2.4.1.3 "><p>If a device is attacked, it receives a large number of ND Miss messages within a short period. As a result, the device consumes many CPU resources to learn and respond to ND entries, affecting the processing of other services. To resolve this issue, configure a rate limit for receiving ND Miss messages based on any source IPv6 address. After the configuration is complete, the device counts the number of ND Miss messages received per period based on any source IPv6 address. If the number exceeds the configured limit, the device does not process excess ND Miss messages.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>(Optional) Configure an interval for recording ND logs for potential attacks and sending the corresponding ND traps.</span><p><pre class="screen"> <a href="cmdqueryname=ipv6+nd+anti-attack+log-trap-timer"><b><span class="cmdname">ipv6 nd anti-attack log-trap-timer</span></b></a> <i><span class="varname">time-value</span></i></pre>
</p><p><p>After a rate limit is configured for ND Miss messages, the device counts the number of received ND Miss messages. If the number of ND Miss messages received in a specified period exceeds the configured limit, the device discards excess ND Miss messages. The device considers this is a potential attack, and records ND logs for the potential attack and sends the corresponding ND traps to the NMS. If potential attacks frequently occur, the device generates a large number of logs and traps. To resolve this issue, configure a large interval for recording ND logs and sending ND traps.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130782318__en-us_task_0234857734_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130782318__en-us_task_0234857734_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure rate limiting on ND Miss messages on an interface.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Switch the interface working mode to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enable IPv6.</span><p><pre class="screen"><a href="cmdqueryname=ipv6+enable"><b><span class="cmdname">ipv6 enable</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure rate limiting on ND Miss messages.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Configuring rate limiting on ND Miss messages</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.2.2.5.2.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.2.2.5.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.3.2.2.2.5.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.5.2.1.2.4.1.1 "><p>Configure rate limiting on ND Miss messages.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.5.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+miss+anti-attack+rate-limit"><b><span class="cmdname">ipv6 nd miss anti-attack rate-limit </span></b></a><i><span class="varname">limit</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.5.2.1.2.4.1.3 "><p>When a device sends IPv6 packets, if the MAC address corresponding to the destination IPv6 address of the packets does not exist, the device generates ND Miss messages. This consumes CPU resources and prevents the device from processing normal services. Running this command resolves the problem, as it enables the device to process only the allowed number of ND Miss messages within a specified period, protecting other services.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.5.2.1.2.4.1.1 "><p>Configure a rate limit for receiving ND Miss messages based on a specified source IPv6 address.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.5.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+miss+anti-attack+rate-limit+source-ip"><b><span class="cmdname">ipv6 nd miss anti-attack rate-limit source-ip </span></b></a><i><span class="varname">ipv6-address</span></i> <strong><span>maximum</span></strong> <i><span class="varname">max-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.3.2.2.2.5.2.1.2.4.1.3 "><p>If a device is attacked, it receives a large number of ND Miss messages within a short period. As a result, the device consumes many CPU resources to learn and respond to ND entries, affecting the processing of other services. To resolve this issue, configure a rate limit for receiving ND Miss messages based on a specified source IPv6 address. After the configuration is complete, the device counts the number of ND Miss messages received per period based on the specified source IPv6 address. If the number exceeds the configured limit, the device does not process excess ND Miss messages.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130782318__en-us_task_0234857734_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130782318__en-us_task_0234857734_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_nd_cfg_0044.html">Configuring Rate Limiting on ND Miss Messages
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_nd_cfg_0045.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>