
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Association Between VRRP and BFD">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_vrrp_cfg_0013.html">
<meta name="DC.Relation" scheme="URI" content="vrp_vrrp_cfg_0015.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130784062">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Association Between VRRP and BFD</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130784062"></a><a name="EN-US_TASK_0000001130784062"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Association Between VRRP and BFD</h1>
<div class="taskbody" id="taskbody1571797909614"><div class="context"><a name="EN-US_TASK_0000001130784062__1.3.1"></a><a name="1.3.1"></a>
<div class="p" id="EN-US_TASK_0000001130784062__context544211210214023"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0000001130784062__p1447831088214023">To improve link reliability, a user gateway is usually dual-homed to an upper-layer network, and VRRP is configured to determine the primary/secondary status of dual-homing links and perform a primary/secondary link switchover if the primary link fails.</p>
<p id="EN-US_TASK_0000001130784062__p1976616706214023">If a link fails, an extended period may be required to negotiate the VRRP status. To speed up link switchovers, you can deploy BFD to monitor links and configure a VRRP group to track a BFD session. If an interface or link on the master device fails, BFD rapidly detects the fault and notifies the VRRP group. The backup device then preempts the master role and takes over traffic forwarding.</p>
<div class="p" id="EN-US_TASK_0000001130784062__p1349199937214023">On the network shown in <a href="#EN-US_TASK_0000001130784062__fig_dc_vrp_vrrp_cfg_012601">Figure 1</a>:<ul id="EN-US_TASK_0000001130784062__ul742187571214023"><li id="EN-US_TASK_0000001130784062__li1023682162214023"><p id="EN-US_TASK_0000001130784062__p1534600617214023"><a name="EN-US_TASK_0000001130784062__li1023682162214023"></a><a name="li1023682162214023"></a>DeviceE is dual-homed to DeviceA and DeviceB through DeviceC and DeviceD.</p>
</li><li id="EN-US_TASK_0000001130784062__li1582094452214023"><p id="EN-US_TASK_0000001130784062__p118937610214023"><a name="EN-US_TASK_0000001130784062__li1582094452214023"></a><a name="li1582094452214023"></a>A VRRP group is configured on DeviceA (master) and DeviceB (backup).</p>
</li></ul>
</div>
<p id="EN-US_TASK_0000001130784062__p1131033860214023">If DeviceA or the link between DeviceA and DeviceB fails, the VRRP group is required to perform a master/backup switchover within 1 second, implementing rapid route convergence on the bearer network. To meet this requirement, associate the VRRP group with a BFD session.</p>
<div class="fignone" id="EN-US_TASK_0000001130784062__fig_dc_vrp_vrrp_cfg_012601"><a name="EN-US_TASK_0000001130784062__fig_dc_vrp_vrrp_cfg_012601"></a><a name="fig_dc_vrp_vrrp_cfg_012601"></a><span class="figcap"><b>Figure 1 </b>Network diagram of associating a VRRP group with a BFD session</span><div class="note" id="EN-US_TASK_0000001130784062__note32471011131717"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001130784062__p1991039344214038">In this example, interface 1 represents <span>100GE</span><span>1/0/1</span>.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0000001130784062__image569926817214023" src="figure/en-us_image_0000001176743751.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130784062__1.3.2"></a><a name="1.3.2"></a>
<div class="p" id="EN-US_TASK_0000001130784062__context401310449214023"><h4 class="sectiontitle">Precautions</h4><p id="EN-US_TASK_0000001130784062__p250994560214023">DeviceA's interface (<span>100GE</span><span>1/0/1</span>) and DeviceB's interface (<span>100GE</span><span>1/0/1</span>) must be on the same network segment.</p>
<p id="EN-US_TASK_0000001130784062__p13842139514">To improve security, you are advised to configure a VRRP security policy. For details, see <a href="vrp_vrrp_cfg_0121.html">Example for Configuring VRRP in Master/Backup Mode</a>.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130784062__1.3.3"></a><a name="1.3.3"></a>
<div class="p" id="EN-US_TASK_0000001130784062__context325974736214023"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001130784062__p907786213214023">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001130784062__ol1213073107214023"><li id="EN-US_TASK_0000001130784062__li753205052214023"><p id="EN-US_TASK_0000001130784062__p1848693546214023"><a name="EN-US_TASK_0000001130784062__li753205052214023"></a><a name="li753205052214023"></a>Configure a BFD session on DeviceA and DeviceB to monitor DeviceA and DeviceB as well as the link DeviceA -&gt; DeviceC -&gt; DeviceD -&gt; DeviceB.</p>
</li><li id="EN-US_TASK_0000001130784062__li141678024017"><p id="EN-US_TASK_0000001130784062__p416516034010"><a name="EN-US_TASK_0000001130784062__li141678024017"></a><a name="li141678024017"></a>Configure a VRRP group on <span>100GE</span><span>1/0/1</span> of DeviceA and DeviceB. DeviceA is the master, and DeviceB is the backup.</p>
</li><li id="EN-US_TASK_0000001130784062__li2117342054214023"><p id="EN-US_TASK_0000001130784062__p216387141214023"><a name="EN-US_TASK_0000001130784062__li2117342054214023"></a><a name="li2117342054214023"></a>Configure a VRRP group on <span>100GE</span><span>1/0/1</span> of DeviceA and DeviceB. DeviceA is the master, and DeviceB is the backup.</p>
</li><li id="EN-US_TASK_0000001130784062__li1106663267214023"><p id="EN-US_TASK_0000001130784062__p333661802214023"><a name="EN-US_TASK_0000001130784062__li1106663267214023"></a><a name="li1106663267214023"></a>Configure DeviceB (backup) in the VRRP group to track the BFD session. If the BFD session goes down, a master/backup VRRP switchover is performed.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130784062__1.3.4"></a><a name="1.3.4"></a>
<div class="p" id="EN-US_TASK_0000001130784062__context351935515"><h4 class="sectiontitle">Procedure</h4><ol id="EN-US_TASK_0000001130784062__ol1338219058"><li id="EN-US_TASK_0000001130784062__li133388191354">Configure a BFD session on DeviceA and DeviceB.<p id="EN-US_TASK_0000001130784062__p1731476538214023"><a name="EN-US_TASK_0000001130784062__li133388191354"></a><a name="li133388191354"></a># Configure DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001130784062__screen1237073530214023">&lt;<span class="keyword" id="EN-US_TASK_0000001130784062__keyword1947034965214023">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001130784062__b115578091214023">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword173112011412"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001130784062__keyword531378290214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001130784062__b2005530582214023">sysname DeviceA</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword37362410388">*</span><span class="keyword" id="EN-US_TASK_0000001130784062__keyword609583901214023">HUAWEI</span>]<strong id="EN-US_TASK_0000001130784062__b54165603214023"> commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword11926341112615"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784062__b53646507214023">bfd</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword422816435263"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-bfd] <strong id="EN-US_TASK_0000001130784062__b715246795214023">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword1834219450269"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784062__b2081805510214023">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword058650152616"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b584820346420">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword3263357102519">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b1991730050214023">ip address 10.1.1.1 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword1396518514270">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b776907742214023">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword14347117142716">*</span>DeviceA] <strong id="EN-US_TASK_0000001130784062__b1194973726214023">bfd trackbfd bind peer-ip 10.1.1.2 interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword12958149162720">*</span>DeviceA-bfd-session-trackbfd] <strong id="EN-US_TASK_0000001130784062__b356632928214023">discriminator local 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword4900121022716">*</span>DeviceA-bfd-session-trackbfd] <strong id="EN-US_TASK_0000001130784062__b487926459214023">discriminator remote 2</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword764891272715">*</span>DeviceA-bfd-session-trackbfd] <strong id="EN-US_TASK_0000001130784062__b1008932669214023">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword742014334582">*</span>DeviceA] <strong id="EN-US_TASK_0000001130784062__b842003305816">commit</strong></pre>
<p id="EN-US_TASK_0000001130784062__p1429453744214023"># Configure DeviceB.</p>
<pre class="screen" id="EN-US_TASK_0000001130784062__screen567082796214023">&lt;<span class="keyword" id="EN-US_TASK_0000001130784062__keyword1460036252214023">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001130784062__b1307578582214023">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword1072533710270"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001130784062__keyword1785550144214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001130784062__b1203604404214023">sysname DeviceB</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword984420551819">*</span><span class="keyword" id="EN-US_TASK_0000001130784062__keyword7844851181">HUAWEI</span>]<strong id="EN-US_TASK_0000001130784062__b2844154184"> commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword224644218276"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001130784062__b1069131417214023">bfd</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword1397594352715"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-bfd] <strong id="EN-US_TASK_0000001130784062__b420079429214023">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword1397364462714"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001130784062__b1110046051214023">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword17786647142714"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b1247021183715">undo portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword19746023102718">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b79176933214023">ip address 10.1.1.2 24</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword192731025112719">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b25912077214023">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword191592613276">*</span>DeviceB] <strong id="EN-US_TASK_0000001130784062__b1541432007214023">bfd trackbfd bind peer-ip 10.1.1.1 interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword6281227182714">*</span>DeviceB-bfd-session-trackbfd] <strong id="EN-US_TASK_0000001130784062__b8202605214023">discriminator local 2</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword9226128202710">*</span>DeviceB-bfd-session-trackbfd] <strong id="EN-US_TASK_0000001130784062__b867978584214023">discriminator remote 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword8474142912716">*</span>DeviceB-bfd-session-trackbfd] <strong id="EN-US_TASK_0000001130784062__b1162899931214023">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword024655902219">*</span>DeviceB] <strong id="EN-US_TASK_0000001130784062__b112461059152215">commit</strong></pre>
<p id="EN-US_TASK_0000001130784062__p1622597071214023">After completing the configurations, run the <a href="cmdqueryname=display+bfd+session+all"><b><span class="cmdname" id="EN-US_TASK_0000001130784062__cmdname868662814214023">display bfd session all</span></b></a> command on DeviceA and DeviceB. The command outputs show that a BFD session has been established and is in the <strong id="EN-US_TASK_0000001130784062__b12854613103216">Up</strong> state. The following example uses the command output on DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001130784062__screen855171821214023">[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword6724162193019"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784062__b459064359214023">display bfd session all</strong>
S: Static session
D: Dynamic session
IP: IP session
IF: Single-hop session
PEER: Multi-hop session
AUTO: Automatically negotiated session
VXLAN: VXLAN session
<span>(w): State in WTR  (*): State is invalid</span>
Total UP/DOWN Session Number : 1/0
------------------------------------------------------------------------------
Local Remote PeerIpAddr      State     Type        InterfaceName
------------------------------------------------------------------------------
1     2      10.1.1.2        <strong id="EN-US_TASK_0000001130784062__b2070788897214023">Up</strong>        S_IP_IF     <span>100GE</span><span>1/0/1</span>
------------------------------------------------------------------------------</pre>
</li><li id="EN-US_TASK_0000001130784062__li2059115229515">Configure VRRP group 1 on DeviceA and DeviceB.<p id="EN-US_TASK_0000001130784062__p1331990049214023"><a name="EN-US_TASK_0000001130784062__li2059115229515"></a><a name="li2059115229515"></a># Configure VRRP group 1 on DeviceA, and set the VRRP priority of DeviceA to 120 so that it functions as the master.</p>
<pre class="screen" id="EN-US_TASK_0000001130784062__screen1043254613214023">[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword1627117715306"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784062__b183635024214023">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword171191911103016"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b813302272214023">vrrp vrid 1 virtual-ip 10.1.1.111</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword10679155373718">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b490379486214023">vrrp vrid 1 priority 120</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword220685510379">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b1282809590214023">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword1148829122311">*</span>DeviceA] <strong id="EN-US_TASK_0000001130784062__b64881697235">commit</strong></pre>
<p id="EN-US_TASK_0000001130784062__p166305318214023"># Configure VRRP group 1 on DeviceB, and use the default priority so that it functions as the backup.</p>
<pre class="screen" id="EN-US_TASK_0000001130784062__screen1326641840214023">[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword1438212136303"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001130784062__b283890924214023">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword1243021473019"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b1900259753214023">vrrp vrid 1 virtual-ip 10.1.1.111</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword5982205753715">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b919430146214023">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword1466514115239">*</span>DeviceB] <strong id="EN-US_TASK_0000001130784062__b1966611116230">commit</strong></pre>
<p id="EN-US_TASK_0000001130784062__p417528529214023">After completing the configurations, run the <a href="cmdqueryname=display+vrrp+verbose"><b><span class="cmdname" id="EN-US_TASK_0000001130784062__cmdname2101537106214023">display vrrp verbose</span></b></a> command on DeviceA and DeviceB. The command outputs show that the VRRP status of DeviceA is <strong id="EN-US_TASK_0000001130784062__b18991226133518">Master</strong> and that of DeviceB is <strong id="EN-US_TASK_0000001130784062__b10968938103520">Backup</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001130784062__screen1296084866214023">[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword151340174306"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784062__b783205477214023">display vrrp verbose</strong>
<span>100GE</span><span>1/0/1</span> | Virtual Router 1
State             :<strong id="EN-US_TASK_0000001130784062__b5377163911113"> Master</strong>
Virtual IP        : 10.1.1.111
Master IP         : 10.1.1.1
PriorityRun       : 120
PriorityConfig    : 120
MasterPriority    : 120
Preempt           : YES      Delay Time : 0s    Remain : --
Hold Multiplier   : 4
TimerRun          : 1s
TimerConfig       : 1s
Auth Type         : NONE
Virtual MAC       : 00-e0-fc-12-78-90
Check TTL         : YES
Config Type       : <span>Normal</span>
Create Time       : 2020-12-29 05:41:23
Last Change Time  : 2020-12-29 05:41:33</pre>
<pre class="screen" id="EN-US_TASK_0000001130784062__screen1408681502214023">[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword56471120153016"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001130784062__b245276693214023">display vrrp verbose</strong>
<span>100GE</span><span>1/0/1</span> | Virtual Router 1
<strong id="EN-US_TASK_0000001130784062__b1568570784214023">State           : Backup</strong>
Virtual IP        : 10.1.1.111
Master IP         : 10.1.1.1
PriorityRun       : 100
PriorityConfig    : 100
MasterPriority    : 120
Preempt           : YES      Delay Time : 0s    Remain : --
Hold Multiplier   : 4
TimerRun          : 1s
TimerConfig       : 1s
Auth Type         : NONE
Virtual MAC       : 00-e0-fc-12-78-90
Check TTL         : YES
Config Type       : <span>Normal</span>
Create Time       : 2020-12-29 05:41:23
Last Change Time  : 2020-12-29 05:41:33</pre>
</li><li id="EN-US_TASK_0000001130784062__li2675173010513">Configure DeviceB in the VRRP group to track the BFD session.<pre class="screen" id="EN-US_TASK_0000001130784062__screen1951641148214023">[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword651842323014"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001130784062__b1803616726214023">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword1645716247303"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b1528370480214023">vrrp vrid 1 track bfd 2 increase 40</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword425916220386">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b1191124960214023">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword651932111238">*</span>DeviceB] <strong id="EN-US_TASK_0000001130784062__b135195216236">commit</strong></pre>
<p id="EN-US_TASK_0000001130784062__p1284920593214023">After completing the configurations, run the <a href="cmdqueryname=display+vrrp+verbose"><b><span class="cmdname" id="EN-US_TASK_0000001130784062__cmdname1053569841214023">display vrrp verbose</span></b></a> command on DeviceB to view the tracked BFD session and its status.</p>
<pre class="screen" id="EN-US_TASK_0000001130784062__screen1034937717214023">[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword19137327153014"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001130784062__b1742607421214023">display vrrp verbose</strong>
<span>100GE</span><span>1/0/1</span> | Virtual Router 1
<strong id="EN-US_TASK_0000001130784062__b933303746214023">State             : Backup</strong>
Virtual IP        <strong id="EN-US_TASK_0000001130784062__b1716024716531">  </strong>: 10.1.1.111
Master IP         <strong id="EN-US_TASK_0000001130784062__b9631154620531">  </strong>: 10.1.1.1
PriorityRun       <strong id="EN-US_TASK_0000001130784062__b6935114411532">  </strong>: 100
PriorityConfig    <strong id="EN-US_TASK_0000001130784062__b138401543165313">  </strong>: 100
MasterPriority    <strong id="EN-US_TASK_0000001130784062__b1128594314535">  </strong>: 120
Preempt           <strong id="EN-US_TASK_0000001130784062__b19777124215537">  </strong>: YES      Delay Time : 0s    Remain : --
Hold Multiplier   <strong id="EN-US_TASK_0000001130784062__b211824235313">  </strong>: 4
TimerRun          <strong id="EN-US_TASK_0000001130784062__b105401341185312">  </strong>: 1s
TimerConfig       <strong id="EN-US_TASK_0000001130784062__b782941185319">  </strong>: 1s
Auth Type         <strong id="EN-US_TASK_0000001130784062__b14522339175313">  </strong>: NONE
Virtual MAC       <strong id="EN-US_TASK_0000001130784062__b19940153817535">  </strong>: 00-e0-fc-12-78-90
Check TTL        <strong id="EN-US_TASK_0000001130784062__b16451438195316">  </strong> : YES
Config Type       <strong id="EN-US_TASK_0000001130784062__b1094113710535">  </strong>: <span>Normal</span>
<strong id="EN-US_TASK_0000001130784062__b1116837765214023">Track BFD         : 2</strong>                     
Priority Increased : 40
<strong id="EN-US_TASK_0000001130784062__b563512172214023">BFD-Session State : UP</strong>
Create Time       <strong id="EN-US_TASK_0000001130784062__b086245075319">  </strong>: 2020-12-29 05:41:23
Last Change Time  <strong id="EN-US_TASK_0000001130784062__b648195245319">  </strong>: 2020-12-29 05:41:33</pre>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130784062__1.3.5"></a><a name="1.3.5"></a>
<div class="p" id="EN-US_TASK_0000001130784062__context1239710443144"><h4 class="sectiontitle">Verifying the Configuration</h4><p id="EN-US_TASK_0000001130784062__p2028482467214023"># Run the <a href="cmdqueryname=shutdown"><b><span class="cmdname" id="EN-US_TASK_0000001130784062__cmdname977357134214023">shutdown</span></b></a> command on DeviceA's <strong id="EN-US_TASK_0000001130784062__b8395164713911"><span>100ge</span> <span>1/0/1</span></strong> to simulate a link fault.</p>
<pre class="screen" id="EN-US_TASK_0000001130784062__screen291379738214023">[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword18626730153015"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784062__b111973374214023">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword165081532133016"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b455965267214023">shutdown</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword4185131333810">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784062__b1140703708214023">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword94051628122314">*</span>DeviceA] <strong id="EN-US_TASK_0000001130784062__b194050286232">commit</strong></pre>
<p id="EN-US_TASK_0000001130784062__p1429658946214023">Check the VRRP status on DeviceA. The command output shows that DeviceA is in the <strong id="EN-US_TASK_0000001130784062__b16636423133915">Initialize</strong> state.</p>
<pre class="screen" id="EN-US_TASK_0000001130784062__screen426895228214023">[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword11385173603017"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784062__b55438929214023">display vrrp verbose</strong>
<span>100GE</span><span>1/0/1</span> | Virtual Router 1
<strong id="EN-US_TASK_0000001130784062__b1373725880214023">State              : Initialize</strong>
Virtual IP           : 10.1.1.111
Master IP            : 0.0.0.0
PriorityRun          : 0
PriorityConfig       : 120
MasterPriority       : 0   
Preempt              : YES      Delay Time : 0s    Remain : --
Hold Multiplier      : 4
TimerRun             : 1s
TimerConfig          : 1s
Auth Type            : NONE
Virtual MAC          : 00-e0-fc-12-78-90
Check TTL            : YES
Config Type          : <span>Normal</span>
Create Time          : 2020-12-29 05:41:23
Last Change Time     : 2020-12-29 05:41:33</pre>
<p id="EN-US_TASK_0000001130784062__p1041598270214023">Check the VRRP status on DeviceB. The command output shows that the VRRP priority of DeviceB has been increased by 40 and the VRRP status of DeviceB has changed to <strong id="EN-US_TASK_0000001130784062__b5259164133712">Master</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001130784062__screen1238796339214023">[<span class="keyword" id="EN-US_TASK_0000001130784062__keyword173049103111"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001130784062__b1107355590214023">display vrrp verbose</strong>
<span>100GE</span><span>1/0/1</span> | Virtual Router 1
<strong id="EN-US_TASK_0000001130784062__b662790774214023">State              : Master</strong>
Virtual IP           : 10.1.1.111
Master IP            : 10.1.1.2
PriorityRun          : 140
PriorityConfig       : 100
MasterPriority       : 140
Preempt              : YES      Delay Time : 0s    Remain : --
Hold Multiplier      : 4
TimerRun             : 1s
TimerConfig          : 1s
Auth Type            : NONE
Virtual MAC          : 00-e0-fc-12-78-90
Check TTL            : YES
Config Type          : <span>Normal</span>
<strong id="EN-US_TASK_0000001130784062__b1653802774214023">Track BFD          : 2</strong>              
Priority Increased :40
<strong id="EN-US_TASK_0000001130784062__b1922662983214023">BFD-Session State  : DOWN</strong>
Create Time          : 2020-12-29 05:41:23
Last Change Time     : 2020-12-29 05:41:33</pre>
</div></div>
<div class="example" id="EN-US_TASK_0000001130784062__example731903242214023"><a name="EN-US_TASK_0000001130784062__1.3.6"></a><a name="1.3.6"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul id="EN-US_TASK_0000001130784062__ul2119565018214023"><li id="EN-US_TASK_0000001130784062__li629965064214023"><p id="EN-US_TASK_0000001130784062__p728450938214023"><a name="EN-US_TASK_0000001130784062__li629965064214023"></a><a name="li629965064214023"></a>DeviceA</p>
<pre class="screen" id="EN-US_TASK_0000001130784062__screen1526354439214023">#
sysname DeviceA
#
bfd
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 10.1.1.1 255.255.255.0
 vrrp vrid 1 virtual-ip 10.1.1.111
 vrrp vrid 1 priority 120
#
bfd trackbfd bind peer-ip 10.1.1.2 interface <span><span>100GE</span><span>1/0/1</span></span>
 discriminator local 1
 discriminator remote 2
#
return</pre>
</li><li id="EN-US_TASK_0000001130784062__li2075347552214023"><p id="EN-US_TASK_0000001130784062__p936911890214023"><a name="EN-US_TASK_0000001130784062__li2075347552214023"></a><a name="li2075347552214023"></a>DeviceB</p>
<pre class="screen" id="EN-US_TASK_0000001130784062__screen1099098300214023">#
sysname DeviceB
#
bfd
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 10.1.1.2 255.255.255.0
 vrrp vrid 1 virtual-ip 10.1.1.111
 <span>vrrp vrid 1 track bfd 2 increase 40</span>
#
bfd trackbfd bind peer-ip 10.1.1.1 interface <span>100GE</span><span>1/0/1</span>
 discriminator local 2
 discriminator remote 1
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_vrrp_cfg_0013.html">Configuring Association Between VRRP and BFD
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_vrrp_cfg_0015.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>