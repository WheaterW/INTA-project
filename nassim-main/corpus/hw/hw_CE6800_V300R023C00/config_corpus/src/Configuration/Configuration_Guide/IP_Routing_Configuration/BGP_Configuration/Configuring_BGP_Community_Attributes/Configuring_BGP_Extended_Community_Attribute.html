
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP Extended Community Attribute">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0081.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0083.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0085.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130783938">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP Extended Community Attribute</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130783938"></a><a name="EN-US_TASK_0000001130783938"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP Extended Community Attribute</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130783938__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring BGP extended community attributes, you have completed the following task:</p>
<ul><li><p><a href="vrp_bgp_cfg_0014.html">Configure basic BGP functions.</a></p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130783938__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Create a route-policy node and enter the route-policy view.</span><p><pre class="screen"><a href="cmdqueryname=route-policy+deny+permit+node"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>node</span></strong> <i><span class="varname">node</span></i></pre>
</p></li><li><span>(Optional) Configure an if-match clause for the route-policy. The extended community attribute of routes can be added or modified only if the routes match the if-match clause.</span><p><p>For details about the configuration, see <a href="vrp_route-policy_cfg_0014.html">(Optional) Configuring an if-match Clause</a>.</p>
</p></li><li><span>Configure extended community attributes for BGP routes.</span><p><pre class="screen"><a href="cmdqueryname=apply+extcommunity+rt+additive"><b><span class="cmdname">apply extcommunity</span></b></a> { <strong><span>rt</span></strong> { <i><span class="varname">as-number:nn</span></i> | <i><span class="varname">ipv4-address:nn</span></i> } } &amp;&lt;1-16&gt; [ <strong><span>additive</span></strong> ]</pre>
<p>or</p>
<pre class="screen"><a href="cmdqueryname=apply+extcommunity+soo+additive"><b><span class="cmdname">apply extcommunity soo</span></b></a> { <i><span class="varname">site-of-origin</span></i> } &amp;&lt;1-16&gt; <strong><span>additive</span></strong></pre>
<p>or</p>
<pre class="screen"><a href="cmdqueryname=apply+extcommunity+bandwidth+none"><b><span class="cmdname">apply extcommunity bandwidth</span></b></a> {<i><span class="varname"> extCmntyString</span></i> | <strong><span>none</span></strong> } or <a href="cmdqueryname=apply+extcommunity+bandwidth+aggregate+limit"><b><span class="cmdname">apply extcommunity bandwidth</span></b></a> <strong><span>aggregate</span></strong> [ <strong><span>limit</span></strong> <i><span class="varname">bandwidth-value</span></i> ]</pre>
</p></li><li><span>Exit the route-policy view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>Enter the BGP view.</span><p><pre class="screen"><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></pre>
</p></li><li><span>Enter the BGP-IPv4 unicast address family view.</span><p><pre class="screen"><a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></pre>
</p></li><li><span>Configure an export route-policy.</span><p><pre class="screen"><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> | <i><span class="varname">peerIpv6Addr</span></i> } <a href="cmdqueryname=route-policy+export"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> <strong><span>export</span></strong></pre>
</p></li><li><span>Enable the device to advertise extended community attributes to the specified peer or peer group.</span><p><pre class="screen"><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> | <i><span class="varname">peerIpv6Addr</span></i> } <a href="cmdqueryname=advertise-ext-community"><b><span class="cmdname">advertise-ext-community</span></b></a></pre>
<p><span>By default, a device does not advertise extended community attributes to any peer or peer group.</span></p>
<p>After the <a href="cmdqueryname=peer+advertise-ext-community"><b><span class="cmdname">peer advertise-ext-community</span></b></a> command is run, BGP advertises the routes with extended community attributes to the specified peer. If the peer only needs to accept the routes but not the extended community attributes, you can run the <a href="cmdqueryname=peer+discard-ext-community"><b><span class="cmdname">peer discard-ext-community</span></b></a> command on the peer to discard the extended community attributes in the received routing information.</p>
</p></li><li><span>(Optional) Configure the device to advertise the Link Bandwidth extended community attribute to a specified EBGP peer.</span><p><pre class="screen"><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">peerIpv6Addr</span></i> } <a href="cmdqueryname=advertise-ext-community"><b><span class="cmdname">advertise-ext-community</span></b></a></pre>
<p>Alternatively, configure the device to convert the Link Bandwidth extended community attribute (optional non-transitive) carried in BGP routes into an optional transitive attribute before advertising the routes to a specified peer.</p>
<pre class="screen"><a href="cmdqueryname=peer+advertise+link-bandwidth+transitive"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">peerIpv4Addr</span></i> | <i><span class="varname">peerIpv6Addr</span></i> } <strong><span>advertise link-bandwidth transitive</span></strong></pre>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130783938__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130783938__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001130783938__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+bgp+routing-table"><b><span class="cmdname">display bgp routing-table</span></b></a> <i><span class="varname">ipv4-address</span></i> [ <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i>] command to check detailed information about a specified BGP route.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp_cfg_0081.html">Configuring BGP Community Attributes
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp_cfg_0083.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bgp_cfg_0085.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>