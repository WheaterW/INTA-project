
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Telnet Login for IPv4 Users (Local Authentication)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_login_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="vrp_login_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="vrp_login_cfg_0012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Telnet">
<meta name="featurename" content="CLI-based Device Login">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Telnet">
<meta name="featurename" content="CLI-based Device Login">
<meta name="featuretype" content="Basic Configuration">
<meta name="featurename" content="Console">
<meta name="featurename" content="Stelnet">
<meta name="featurename" content="Telnet">
<meta name="featurename" content="CLI-based Device Login">
<meta name="featuretype" content="Basic Configuration">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563893025">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Telnet Login for IPv4 Users (Local Authentication)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563893025"></a><a name="EN-US_TASK_0000001563893025"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Telnet Login for IPv4 Users (Local Authentication)</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563893025__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>Users want to easily configure and manage the device shown in <a href="#EN-US_TASK_0000001563893025__fig_dc_cfg_login_001501">Figure 1</a>. AAA authentication needs to be configured for Telnet users on the server, and an ACL needs to be configured to ensure that only the users matching the ACL can log in to the device.</p>
<div class="fignone" id="EN-US_TASK_0000001563893025__fig_dc_cfg_login_001501"><a name="EN-US_TASK_0000001563893025__fig_dc_cfg_login_001501"></a><a name="fig_dc_cfg_login_001501"></a><span class="figcap"><b>Figure 1 </b>Network diagram of Telnet login</span><br><span><img class="vsd" src="figure/en-us_image_0000001512693928.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001563893025__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Configure an IP address for the management interface on the Telnet server.</li><li>Configure Telnet login, that is, enable the Telnet server function and configure the server port number to remotely maintain network devices.</li><li>Set VTY user interface parameters, including an ACL policy, to ensure that only users matching the ACL can log in to the device.</li><li>Configure the user name and password for the administrator, and configure an AAA authentication policy to ensure that only users passing the authentication can log in to the device.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001563893025__1.3.3"></a><a name="1.3.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Precautions</h4><p>In insecure network environments, you are advised to use a secure password authentication mode, encryption authentication algorithm, and protocol. For details about the configuration example of secure authentication, see <a href="vrp_login_cfg_0016.html">Example for Configuring STelnet Login for IPv4 Users (Local Authentication)</a>.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563893025__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Log in to the device. If you log in to the device for the first time, perform operations in <span><a href="vrp_first_cfg_0004.html">First Login Through the Console Port</a></span> and then perform the following steps to set up the Telnet login environment.</span></li><li><span>Run the <strong>install feature-software WEAKEA</strong> command in the user view to install the weak security algorithm/protocol feature package (WEAKEA).</span></li><li><span>Set an IP address of the management interface for the Telnet server.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong>    
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname Telnet Server</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Telnet Server] <strong>interface <span>meth</span> <span>0/0/0</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Telnet Server-<span>MEth</span><span>0/0/0</span>] <strong>ip address 10.137.217.177 255.255.255.0</strong>
[<span class="keyword">*</span>Telnet Server-<span>MEth</span><span>0/0/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>Telnet Server] <strong>commit</strong></pre>
</p></li><li><span>Set the server port number and enable the server function.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Telnet Server]<strong> undo telnet server disable</strong>
[<span class="keyword">*</span>Telnet Server]<strong> telnet server port 1025</strong>
[<span class="keyword">*</span>Telnet Server] <strong>telnet server-source </strong><strong>all-interface</strong>
[<span class="keyword">*</span>Telnet Server] <strong>commit</strong></pre>
</p></li><li><span>Set parameters for the VTY user interface.</span><p><p># Set the maximum number of VTY user interfaces.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Telnet Server] <strong>user-interface maximum-vty 8</strong>
[<span class="keyword">*</span>Telnet Server] <strong>commit</strong></pre>
<p># Configure an ACL rule that allows device login from specified host addresses. The IP address of PC1 is 10.137.217.10, and the IP address of PC2 is 10.137.217.20. </p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Telnet Server] <strong>acl 2001</strong>
[<span class="keyword">*</span>Telnet Server-acl4-basic-2001] <strong>rule permit source 10.137.217.10 0</strong>
[<span class="keyword">*</span>Telnet Server-acl4-basic-2001] <strong>rule deny source 10.137.217.20 0</strong>
[<span class="keyword">*</span>Telnet Server-acl4-basic-2001] <strong>quit</strong>
[<span class="keyword">*</span>Telnet Server] <strong>user-interface vty 0 7</strong>
[<span class="keyword">*</span>Telnet Server-ui-vty0-7] <strong>acl 2001 inbound</strong>
[<span class="keyword">*</span>Telnet Server-ui-vty0-7] <strong>commit</strong></pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>You can determine whether to configure ACL rules as required.</li><li>If the management interface is bound to the VPN instance <strong>_management_vpn_</strong> by default, the commands for creating ACL rules are as follows:<ul><li><strong>rule permit vpn-instance _management_vpn_ source 10.137.217.10 0</strong></li><li><strong>rule deny vpn-instance _management_vpn_ source 10.137.217.20 0</strong></li></ul>
</li></ul>
</div></div>
<p># Configure terminal attributes for the VTY user interface.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Telnet Server-ui-vty0-7] <strong>shell</strong>
[<span class="keyword">*</span>Telnet Server-ui-vty0-7] <strong>idle-timeout 20</strong>
[<span class="keyword">*</span>Telnet Server-ui-vty0-7] <strong>screen-length 30</strong>
[<span class="keyword">*</span>Telnet Server-ui-vty0-7] <strong>history-command max-size 20</strong>
[<span class="keyword">*</span>Telnet Server-ui-vty0-7] <strong>commit</strong></pre>
<p># Configure the authentication mode for the VTY user interface.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Telnet Server-ui-vty0-7] <strong>authentication-mode aaa</strong>
[<span class="keyword">*</span>Telnet Server-ui-vty0-7] <strong>user privilege level 3</strong>
[<span class="keyword">*</span>Telnet Server-ui-vty0-7] <strong>protocol inbound telnet</strong>
[<span class="keyword">*</span>Telnet Server-ui-vty0-7] <strong>quit</strong>
[<span class="keyword">*</span>Telnet Server] <strong>commit</strong></pre>
</p></li><li><span>Configure information about the administrator who logs in to the device.</span><p><p># Configure the authentication mode for the login user.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Telnet Server] <strong>aaa</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Telnet Server-aaa] <strong>local-user admin1234 password</strong>
Please configure the login password (8-128)
It is recommended that the password consist of four types of characters, including lowercase letters, uppercase letters, numerals and special characters. 
Please enter password:                                      
Please confirm password:                               
[<span class="keyword">*</span>Telnet Server-aaa] <strong>local-user admin1234 service-type telnet</strong>
[<span class="keyword">*</span>Telnet Server-aaa] <strong>local-user admin1234 privilege level 3</strong>
[<span class="keyword">*</span>Telnet Server-aaa]<strong> quit</strong>
[<span class="keyword">*</span>Telnet Server] <strong>commit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001563893025__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Run the following command on the CLI of PC1 to telnet to the device:</p>
<pre class="screen">C:\Documents and Settings\Administrator&gt; <strong>telnet 10.137.217.177 1025</strong></pre>
<div class="p"># Press <strong>Enter</strong>, and enter the user name and password configured for AAA authentication in the login window. If the authentication is successful, the command line prompt for the user view is displayed, indicating that you have successfully logged in to the device.<pre class="screen">Username:<strong>admin1234</strong>
Password:
Info: The max number of VTY users is 21, the number of current VTY users online is 1, and total number of terminal users online is 1.
      The current login time is 2020-12-15 14:23:00.
&lt;Telnet Server&gt;</pre>
</div>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001563893025__1.3.6"></a><a name="1.3.6"></a><h4 class="sectiontitle">Configuration Scripts</h4><pre class="screen">#
sysname Telnet Server
#
telnet server-source all-interface
telnet server port 1025
#
acl number 2001
 rule 5 permit source 10.137.217.10 0
 rule 10 deny source 10.137.217.20 0 
#
aaa
 local-user admin1234 password irreversible-cipher <span>$1d$g8wLJ`LjL!$CyE(V{3qg5DdU:PM[6=6O$UF-.fQ,Q}&gt;^)OBzgoU$</span>
 local-user admin1234 service-type telnet
 local-user admin1234 privilege level 3
#
interface <span>MEth</span><span>0/0/0</span>
 ip address 10.137.217.177 255.255.255.0
#
user-interface maximum-vty 8
#
user-interface vty 0 7
 acl 2001 inbound
 authentication-mode aaa
 user privilege level 3
 protocol inbound telnet
 history-command max-size 20
 idle-timeout 20 0
 screen-length 30
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_login_cfg_0008.html">Configuring Remote Login Through Telnet
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_login_cfg_0010.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_login_cfg_0012.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>