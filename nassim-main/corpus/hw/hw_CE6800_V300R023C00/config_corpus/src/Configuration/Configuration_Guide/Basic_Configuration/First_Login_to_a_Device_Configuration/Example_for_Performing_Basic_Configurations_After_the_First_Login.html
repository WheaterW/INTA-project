
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Performing Basic Configurations After the First Login">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_first_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="vrp_first_cfg_0010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="First Login to a Device">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="First Login to a Device">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001564121621">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Performing Basic Configurations After the First Login</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001564121621"></a><a name="EN-US_TASK_0000001564121621"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Performing Basic Configurations After the First Login</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001564121621__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>You must perform basic configurations after logging in to the device through the console port for the first time. You must also set the privilege level to 3 and the authentication mode to AAA authentication for users 0 to 4 who log in remotely through STelnet. This example assumes that there are reachable routes between PC2 and the device.</p>
<div class="fignone"><span class="figcap"><b>Figure 1 </b>Performing basic configurations after the first login through the console port</span><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1 represents the management interface <strong><span>MEth</span><span>0/0/0</span></strong>. </p>
</div></div>
<br><span><img src="figure/en-us_image_0000001593603196.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001564121621__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><ol><li><p>Log in to the device through the console port.</p>
</li><li><p>Perform basic configurations on the device.</p>
</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001564121621__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Connect the DB9 connector of the prepared console cable to the PC's serial port (COM), and the RJ45 connector to the device's console port. If there is no DB9 serial port on your terminal (PC), use a DB9-to-USB cable to connect the USB port to the terminal.</span></li><li><span>Start a terminal emulation program on PC1. Create a connection and set the port and communication parameters. (This section uses the third-party software PuTTY as an example.)</span><ol type="a"><li class="substepexpand"><span>Click <span class="uicontrol"><b>Session</b></span> to create a connection, as shown in <a href="#EN-US_TASK_0000001564121621__fig17349175114917">Figure 2</a>.</span><p><div class="fignone" id="EN-US_TASK_0000001564121621__fig17349175114917"><a name="EN-US_TASK_0000001564121621__fig17349175114917"></a><a name="fig17349175114917"></a><span class="figcap"><b>Figure 2 </b>Creating a connection</span><br><span><img class="vsd" src="figure/en-us_image_0000001864110517.png" width="NaN" height="NaN"></span></div>
</p></li><li class="substepexpand"><span>Click <strong>Serial</strong> and set the port to be connected and the communication parameters, as shown in <a href="#EN-US_TASK_0000001564121621__fig195331415132713">Figure 3</a>.</span><p><ol class="substepthirdol"><li>Select the port based on actual situations. For example, on Windows, you can open <strong>Device Manager</strong> to view port information and select the port to be connected.</li><li>Set the communication parameters. Ensure that the communication parameter settings in the terminal emulation software are consistent with the default parameter settings (9600 bit/s transmission rate, 8 data bits, 1 stop bit, no parity check, and no flow control) of the device's console port.</li><li>Click <strong>Open</strong>.</li></ol>
</p><p><div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>PC1 may have multiple ports that can be connected to the device. In this step, you need to select the port to be connected to a console cable. In most cases, COM1 is used.</p>
<p>If the device's console port communication parameters are modified, you need to modify those on the PC accordingly and re-establish the connection.</p>
</div></div>
</p></li></ol>
<p><div class="fignone" id="EN-US_TASK_0000001564121621__fig195331415132713"><a name="EN-US_TASK_0000001564121621__fig195331415132713"></a><a name="fig195331415132713"></a><span class="figcap"><b>Figure 3 </b>Setting the connection port and communication parameters</span><br><span><img src="figure/en-us_image_0000001817270956.png" width="NaN" height="NaN"></span></div>
</p></li><li><span>Press <strong>Enter</strong> until information similar to the following is displayed. Enter a password and confirm the password as prompted. (The following information is for reference only.)</span><p><pre class="screen">User interface con0 is available

Please Press ENTER.

Please configure the login password (8-16)
Enter Password: 
Confirm Password:       //Enter the password for logging in to the device through the console port.
Info: Save the password now. Please wait for a moment.
Info: The max number of VTY users is 21, the number of current VTY users online is 0, and total number of terminal users online is 1.
      The current login time is 2020-06-30 18:15:10+08:00
&lt;<span class="keyword">HUAWEI</span>&gt;</pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>You must set a login password upon first login to the device through the console port. By default, you can use the console port to perform administrator operations after successfully logging in to the device.</p>
</li><li><p>The password is a string of 8 to 16 case-sensitive characters. It must contain at least two of the following character types: uppercase letters, lowercase letters, digits, and special characters. Special characters do not include question marks (?) or spaces.</p>
</li><li><p>The password entered in interactive mode will not be displayed on the terminal screen.</p>
</li><li>For security purposes, change the password periodically.</li></ul>
</div></div>
</p></li><li><span>Perform basic configurations on the device.</span><p><p># Set the date, time, and time zone.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> clock timezone BJ add 08:00:00</strong>
&lt;<span class="keyword">HUAWEI</span>&gt;<strong> clock datetime 20:20:00 2023-05-08</strong></pre>
<div class="notice"><span class="noticetitle"><img src="public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>Before configuring the current time and date, run the <a href="cmdqueryname=clock+timezone"><b><span class="cmdname">clock timezone</span></b></a> command to configure the time zone. If no time zone is configured, running the <a href="cmdqueryname=clock+datetime"><b><span class="cmdname">clock datetime</span></b></a> command will configure the Coordinated Universal Time (UTC).</p>
</div></div>
<p># Set the device name and IP address of the management interface.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname Device</strong> 
<span>[*<span class="keyword">HUAWEI</span>]</span> <strong>commit</strong>
<span>[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Device]<strong> interface</strong></span> <strong><span>meth</span></strong> <strong><span>0/0/0</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span>Device</span>-<span>MEth</span><span>0/0/0</span>] <strong>ip address 10.137.217.203 255.255.255.0</strong>
[<span class="keyword">*</span><span>Device</span>-<span>MEth</span><span>0/0/0</span>] <strong>quit</strong>
<span>[*Device]</span> <strong>commit</strong></pre>
<div class="p"># Configure a default route for the device with a gateway address of 10.137.217.1.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Device]<strong> ip route-static 0.0.0.0 0 10.137.217.1</strong>
<span>[*Device]</span> <strong>commit</strong></pre>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Run the <strong>display this</strong> command in the management interface view to check whether the management interface is in <strong>_management_vpn_</strong> by default. If so, run the <strong>ip route-static vpn-instance _management_vpn_ 0.0.0.0 0 10.137.217.1</strong> command to configure a route for the device.</p>
</div></div>
</div>
<div class="p"># Configure the SSH client encryption algorithm, HMAC authentication algorithm, key exchange algorithm list, and public key algorithm.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>] <strong>ssh server cipher aes128_ctr aes256_ctr aes192_ctr aes128_gcm aes256_gcm</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>] <strong>ssh server hmac sha2_256 sha2_512</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>] <strong>ssh server key-exchange dh_group_exchange_sha256</strong> <strong>dh_group16_sha512</strong>
[<span class="keyword">*</span><span class="keyword">Device</span><span class="keyword"></span>] <strong>ssh server publickey rsa_sha2_256 rsa_sha2_512</strong>
[<span class="keyword">*</span><span class="keyword">Device</span><span class="keyword"></span>] <strong>ssh server dh-exchange min-len 3072</strong>
<span>[*Device]</span> <strong>commit</strong></pre>
</div>
<div class="p"># Set parameters for the SSH user and the local user for SSH login.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>] <strong>user-interface vty 0 4</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-ui-vty0-4] <strong>authentication-mode aaa</strong> 
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-ui-vty0-4] <strong>user privilege level 3</strong>   
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-ui-vty0-4] <strong>protocol inbound ssh</strong>
[<span class="keyword">*</span>Device-ui-vty0-4] <strong>quit</strong>
[*Device] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span><span class="keyword"></span>] <strong>aaa</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Device-aaa] <strong>local-user admin123 password</strong>
Please configure the login password (8-128)
It is recommended that the password consist of four types of characters, including lowercase letters, uppercase letters, numerals and special characters. 
Please enter password:                                      
Please confirm password:                               
Info: Add a new user.
[<span class="keyword">*</span>Device-aaa] <strong>local-user admin123 service-type ss</strong><strong>h</strong>
[<span class="keyword">*</span>Device-aaa] <strong>local-user admin123 privilege level 3</strong>
[<span class="keyword">*</span>Device-aaa] <strong>quit</strong>
[*Device] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span><span class="keyword"></span>] <strong>ssh user admin123</strong>    
[<span class="keyword">*Device</span><span class="keyword"></span>] <strong>ssh user admin123 authentication-type password</strong>    
[<span class="keyword">*Device</span><span class="keyword"></span>] <strong>ssh user admin123 service-type stelnet</strong>   
[<span class="keyword">*</span><span class="keyword">Device</span><span class="keyword"></span>] <strong>ssh server-source</strong> <strong>all-interface</strong>
[<span class="keyword">*</span><span class="keyword">Device</span><span class="keyword"></span>] <strong>stelnet server enable</strong>   
<span>[*Device]</span> <strong>commit</strong></pre>
</div>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001564121621__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Log in to the device using STelnet from PC2. The third-party software OpenSSH and Windows CLI are used in the following example.</p>
<ul><li><p>For details about how to install OpenSSH, see the OpenSSH installation guide.</p>
</li><li><p>To use OpenSSH to connect to the device using STelnet, run the OpenSSH commands. For details about OpenSSH commands, see the OpenSSH help.</p>
</li><li><p>The Windows CLI can identify OpenSSH commands only when OpenSSH is installed on the terminal.</p>
</li></ul>
<p>Access the Windows CLI and run the OpenSSH commands to connect to the device. (The following information is for reference only.)</p>
<pre class="screen">C:\Users\User1&gt;<strong> ssh admin123@10.137.217.203</strong>
admin123@10.137.217.203's password:
Info: The max number of VTY users is 21, the number of current VTY users online is 1, and total number of terminal users online is 2.
      The current login time is 2020-12-15 14:23:00.
<span>&lt;Device</span>&gt;</pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001564121621__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Configuration Scripts</h4><p>Device</p>
<pre class="screen">#
sysname Device
#
stelnet server enable
#
clock timezone BJ add 08:00:00
#
aaa
 local-user admin123 password irreversible-cipher $1d$+,JS+))\\2$KVNj(.3`_5x0FCKGv}H&amp;.kUTI`Ff&amp;H*eBqO.ua&gt;)$
 local-user admin123 service-type ssh
 local-user admin123 privilege level 3
#
interface <span>MEth</span><span>0/0/0</span>
 ip address 10.137.217.203 255.255.255.0
#
ip route-static 0.0.0.0 0.0.0.0 10.137.217.1
#
ssh user admin123
ssh user admin123 authentication-type password
ssh user admin123 service-type stelnet
ssh server-source all-interface
#
ssh server cipher aes128_ctr aes256_ctr aes192_ctr aes128_gcm aes256_gcm
ssh server hmac sha2_256 sha2_512
ssh server key-exchange dh_group_exchange_sha256 dh_group16_sha512
ssh server publickey rsa_sha2_256 rsa_sha2_512
ssh server dh-exchange min-len 3072
#
user-interface vty 0 4
 authentication-mode aaa
 user privilege level 3
 protocol inbound ssh
#
return</pre>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_first_cfg_0001.html">First Login to a Device Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_first_cfg_0010.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>