
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring OSPF DR Election">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospf_cfg_0025.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001356100582">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring OSPF DR Election</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001356100582"></a><a name="EN-US_TASK_0000001356100582"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring OSPF DR Election</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001356100582__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0000001356100582__fig_dc_cfg_ospf_009101">Figure 1</a>, DeviceA has the highest priority (100) on the network and is elected as the DR; DeviceC has the second highest priority and is elected as the BDR. DeviceB has the priority of 0 and cannot be elected as a DR or a BDR; no priority is configured for DeviceD, and therefore, and DeviceD uses the default value (1).</p>
<div class="fignone" id="EN-US_TASK_0000001356100582__fig_dc_cfg_ospf_009101"><a name="EN-US_TASK_0000001356100582__fig_dc_cfg_ospf_009101"></a><a name="fig_dc_cfg_ospf_009101"></a><span class="figcap"><b>Figure 1 </b>Configuring OSPF DR election</span><div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1 represents <span>100GE</span> <span>1/0/1</span>.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001356101138.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001356100582__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>To improve security, OSPF area authentication or interface authentication is recommended. For details, see "Improving OSPF Network Security." OSPF area authentication is used as an example. For details, see "Example for Configuring Basic OSPF Functions."</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001356100582__1.3.3"></a><a name="1.3.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure a router ID, enable OSPF, and specify a network segment on each device.</p>
</li><li><p>Check the DR/BDR status of each device when the default priority is used.</p>
</li><li><p>Configure DR priorities for interfaces and check the DR/BDR status.</p>
</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001356100582__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IP address to each interface. For detailed configurations, see Configuration Scripts.</span></li><li><span>Configure basic OSPF functions.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>router id 1.1.1.1</strong>
[<span class="keyword">*</span>DeviceA] <strong>ospf 1</strong>
[<span class="keyword">*</span>DeviceA-ospf-1] <strong>area 0</strong>
[<span class="keyword">*</span>DeviceA-ospf-1-area-0.0.0.0] <strong>network 192.168.1.0 0.0.0.255</strong>
[<span class="keyword">*</span>DeviceA-ospf-1-area-0.0.0.0] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA-ospf-1] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceA] <strong>commit</strong></span></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>router id 2.2.2.2</strong>
[<span class="keyword">*</span>DeviceB] <strong>ospf 1</strong>
[<span class="keyword">*</span>DeviceB-ospf-1] <strong>area 0</strong>
[<span class="keyword">*</span>DeviceB-ospf-1-area-0.0.0.0] <strong>network 192.168.1.0 0.0.0.255</strong>
[<span class="keyword">*</span>DeviceB-ospf-1-area-0.0.0.0] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB-ospf-1] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceB] <strong>commit</strong></span></pre>
<p># Configure DeviceC.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong>router id 3.3.3.3</strong>
[<span class="keyword">*</span>DeviceC] <strong>ospf 1</strong>
[<span class="keyword">*</span>DeviceC-ospf-1] <strong>area 0</strong>
[<span class="keyword">*</span>DeviceC-ospf-1-area-0.0.0.1] <strong>network 192.168.1.0 0.0.0.255</strong>
[<span class="keyword">*</span>DeviceC-ospf-1-area-0.0.0.1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceC-ospf-1] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceC] <strong>commit</strong></span></pre>
<p># Configure DeviceD.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong>router id 4.4.4.4</strong>
[<span class="keyword">*</span>DeviceD] <strong>ospf 1</strong>
[<span class="keyword">*</span>DeviceD-ospf-1] <strong>area 0</strong>
[<span class="keyword">*</span>DeviceD-ospf-1-area-0.0.0.2] <strong>network 192.168.1.0 0.0.0.255</strong>
[<span class="keyword">*</span>DeviceD-ospf-1-area-0.0.0.2] <strong>quit</strong>
[<span class="keyword">*</span>DeviceD-ospf-1] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceD] <strong>commit</strong></span></pre>
<p># Check the DR/BDR status.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>display ospf peer</strong>
          OSPF Process 1 with Router ID 1.1.1.1
                  Neighbors
 Area 0.0.0.0 interface 192.168.1.1(<span>100GE</span><span>1/0/1</span>)'s neighbors
 Router ID: 2.2.2.2      Address: 192.168.1.2
<strong>State: 2-Way</strong>  Mode:Nbr is  Master  Priority: 1
<strong>DR: 192.168.1.4  BDR: 192.168.1.3</strong>  MTU: 0
   Dead timer due in 32  sec
   Retrans timer interval: 5
   Neighbor is up for 00:04:21
   Authentication Sequence: [ 0 ]
 Router ID: 3.3.3.3      Address: 192.168.1.3
<strong>State: Full</strong>  Mode:Nbr is  Master  Priority: 1
<strong>DR: 192.168.1.4  BDR: 192.168.1.3</strong>  MTU: 0
   Dead timer due in 37  sec
   Retrans timer interval: 5
   Neighbor is up for 00:04:06
   Authentication Sequence: [ 0 ]
 Router ID: 4.4.4.4      Address: 192.168.1.4
<strong>State: Full</strong>  Mode:Nbr is  Master  Priority: 1
<strong>DR: 192.168.1.4  BDR: 192.168.1.3</strong>  MTU: 0
   Dead timer due in 37  sec
   Retrans timer interval: 5
   Neighbor is up for 00:03:53
   Authentication Sequence: [ 0 ]
</pre>
<p>Check information about the neighbors of DeviceA, including DR priorities and neighbor status. By default, the DR priority is 1. DeviceD functions as the DR, and DeviceC functions as the BDR.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When the priorities are the same, the device with the highest router ID is elected as the DR. If a new device is added after the DR and BDR are elected, the new device cannot immediately become the new DR on the network segment even if it has the highest DR priority.</p>
</div></div>
</p></li><li><span>Set DR priorities for interfaces.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>interface</strong> <strong><span>100GE</span><span>1/0/1</span> </strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>ospf dr-priority 100</strong>
[<span class="keyword">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceA] <strong>commit</strong></span></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>interface</strong> <strong><span>100GE</span><span>1/0/1</span> </strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong>ospf dr-priority 0</strong>
[<span class="keyword">*</span>DeviceB-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceB] <strong>commit</strong></span></pre>
<p># Configure DeviceC.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong>interface</strong> <strong><span>100GE</span><span>1/0/1</span> </strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong>ospf dr-priority 2</strong>
[<span class="keyword">*</span>DeviceC-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
<span>[<span class="keyword">*</span>DeviceC] <strong>commit</strong></span></pre>
<p># Check the DR/BDR status.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong>display ospf peer</strong>
          OSPF Process 1 with Router ID 4.4.4.4
                  Neighbors
 Area 0.0.0.0 interface 192.168.1.4(<span>100GE</span><span>1/0/1</span>)'s neighbors
 Router ID: 1.1.1.1      Address: 192.168.1.1
   State: Full  Mode:Nbr is  Slave  Priority: 100
<strong>DR: 192.168.1.4  BDR: 192.168.1.3</strong>  MTU: 0
   Dead timer due in 31  sec
   Retrans timer interval: 5
   Neighbor is up for 00:11:17
   Authentication Sequence: [ 0 ]
 Router ID: 2.2.2.2      Address: 192.168.1.2
   State: Full  Mode:Nbr is  Slave  Priority: 0
<strong>DR: 192.168.1.4  BDR: 192.168.1.3</strong>  MTU: 0
   Dead timer due in 35  sec
   Retrans timer interval: 5
   Neighbor is up for 00:11:19
   Authentication Sequence: [ 0 ]
 Router ID: 3.3.3.3      Address: 192.168.1.3
   State: Full  Mode:Nbr is  Slave  Priority: 2
<strong>DR: 192.168.1.4  BDR: 192.168.1.3</strong>  MTU: 0
   Dead timer due in 33  sec
   Retrans timer interval: 5
   Neighbor is up for 00:11:15
   Authentication Sequence: [ 0 ]</pre>
</p></li><li><span>Restart an OSPF process.</span><p><p>Run the <strong>reset ospf 1 process</strong> command in the user view of each device to restart the OSPF process.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001356100582__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p># Check OSPF neighbor information on DeviceD.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong>display ospf peer</strong>
          OSPF Process 1 with Router ID 4.4.4.4
                  Neighbors
 Area 0.0.0.0 interface 192.168.1.4(<span>100GE</span><span>1/0/1</span>)'s neighbors
 Router ID: 1.1.1.1      Address: 192.168.1.1
<strong>State: Full</strong>  Mode:Nbr is  Slave  Priority: 100
<strong>DR: 192.168.1.1  BDR: 192.168.1.3</strong>  MTU: 0
   Dead timer due in 35  sec
   Retrans timer interval: 5
   Neighbor is up for 00:07:19
   Authentication Sequence: [ 0 ]
 Router ID: 2.2.2.2      Address: 192.168.1.2
<strong>State: 2-Way</strong>  Mode:Nbr is  Master  Priority: 0
<strong>DR: 192.168.1.1  BDR: 192.168.1.3</strong>  MTU: 0
   Dead timer due in 35  sec
   Retrans timer interval: 5
   Neighbor is up for 00:07:19
   Authentication Sequence: [ 0 ]
 Router ID: 3.3.3.3      Address: 192.168.1.3
<strong>State: Full</strong>  Mode:Nbr is  Slave  Priority: 2
<strong>DR: 192.168.1.1  BDR: 192.168.1.3</strong>  MTU: 0
   Dead timer due in 37  sec
   Retrans timer interval: 5
   Neighbor is up for 00:07:17
   Authentication Sequence: [ 0 ]</pre>
<p># Check the status of OSPF interfaces on DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>display ospf</strong> <strong>interface</strong>
          OSPF Process 1 with Router ID 1.1.1.1
                  Interfaces
 Area: 0.0.0.0
 IP Address  Type        State    Cost  Pri   DR              BDR
 192.168.1.1 Broadcast   <strong>DR</strong>     1     <strong>100</strong> <strong>192.168.1.1</strong> <strong>192.168.1.3</strong>
OSPF Process 1 with Router ID 1.1.1.1</pre>
<p># Check the status of OSPF interfaces on DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>display ospf</strong> <strong>interface</strong>
          OSPF Process 1 with Router ID 2.2.2.2
                  Interfaces
 Area: 0.0.0.0
 IP Address      Type         State    Cost  Pri   DR              BDR
 192.168.1.2     Broadcast    <strong>DROther</strong>  1     <strong>0</strong> <strong>192.168.1.1</strong> <strong>192.168.1.3</strong></pre>
<p>If the neighbor is in the Full state, an adjacency has been established with the neighbor. If the neighbor remains in the 2-Way state, it is not the DR or BDR, and the two ends do not need to exchange LSAs.</p>
<p>If the status of an OSPF interface is DROther, it indicates that the interface is neither a DR nor a BDR.</p>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001356100582__1.3.6"></a><a name="1.3.6"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p>DeviceA</p>
<pre class="screen">#
sysname DeviceA
#
router id 1.1.1.1
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.1.1 255.255.255.0
 ospf dr-priority 100
#
ospf 1
 area 0.0.0.0
  network 192.168.1.0 0.0.0.255
#
return</pre>
</li><li><p>DeviceB</p>
<pre class="screen">#
sysname DeviceB
#
router id 2.2.2.2
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.1.2 255.255.255.0
 ospf dr-priority 0
#
ospf 1
 area 0.0.0.0
  network 192.168.1.0 0.0.0.255
#
return</pre>
</li><li><p>DeviceC</p>
<pre class="screen">#
sysname DeviceB
#
router id 3.3.3.3
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.1.3 255.255.255.0
 ospf dr-priority 2
#
ospf 1
 area 0.0.0.0
  network 192.168.1.0 0.0.0.255
#
return</pre>
</li><li><p>DeviceD</p>
<pre class="screen">#
sysname DeviceB
#
router id 4.4.4.4
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 192.168.1.4 255.255.255.0
#
ospf 1
 area 0.0.0.0
  network 192.168.1.0 0.0.0.255
#
return</pre>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospf_cfg_0020.html">Configuring Network Types for OSPF Interfaces
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospf_cfg_0025.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>