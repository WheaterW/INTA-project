
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP Route Dampening">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0094.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0095.html">
<meta name="DC.Relation" scheme="URI" content="vrp_bgp_cfg_0097.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176743617">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP Route Dampening</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176743617"></a><a name="EN-US_TASK_0000001176743617"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP Route Dampening</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001176743617__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring BGP route dampening, you have completed the following task:</p>
<ul><li><p><a href="vrp_bgp_cfg_0014.html">Configure basic BGP functions.</a></p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001176743617__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>The main cause of route instability is route flapping, whereby a route repeatedly appears and disappears in the routing table. BGP is generally applied to complex networks where routes change frequently. Frequent route flapping consumes extensive bandwidth and CPU resources and can even seriously impact network operations.</p>
<p>BGP route dampening prevents frequent route flapping by using a penalty value to measure route stability. When a route flaps, it is assigned a penalty; the more it flaps, the more penalties accumulate. If the penalty value of a route exceeds the pre-defined threshold, the route will not be advertised until the penalty value reduces to the reuse threshold.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176743617__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the BGP view.</span><p><pre class="screen"><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></pre>
</p></li><li><span>Enter the IPv4 unicast address family view.</span><p><pre class="screen"><a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></pre>
</p></li><li><span>Configure BGP route dampening parameters.</span><p><pre class="screen"><a href="cmdqueryname=dampening+route-policy+update-standard"><b><span class="cmdname">dampening</span></b></a> [ <i><span class="varname">half-life-reach</span></i> <i><span class="varname">reuse</span></i> <i><span class="varname">suppress</span></i> <i><span class="varname">ceiling</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup><span> [ <strong><span>update-standard</span></strong> ]</span>
<a href="cmdqueryname=dampening+ibgp+route-policy+update-standard"><b><span class="cmdname">dampening ibgp</span></b></a> [ <i><span class="varname">half-life-reach</span></i> <i><span class="varname">reuse</span></i> <i><span class="varname">suppress</span></i> <i><span class="varname">ceiling</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup> [ <strong><span>update-standard</span></strong> ]</pre>
<p>The values of <i><span class="varname">reuse</span></i>, <i><span class="varname">suppress</span></i>, and <i><span class="varname">ceiling</span></i> must meet the following condition: <i><span class="varname">reuse</span></i> &lt; <i><span class="varname">suppress</span></i> &lt; <i><span class="varname">ceiling</span></i>.</p>
<p>If the <a href="cmdqueryname=dampening"><b><span class="cmdname">dampening</span></b></a> command is run with a route-policy referenced, BGP applies the route dampening parameters only to the routes that match the route-policy.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001176743617__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001176743617__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001176743617__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring the function, verify the configuration.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+bgp+routing-table+flap-info+regular-expression"><b><span class="cmdname">display bgp routing-table flap-info</span></b></a> [ <strong><span>regular-expression</span></strong> <i><span class="varname">as-regular-expression</span></i> | <strong><span>as-path-filter</span></strong> { <i><span class="varname">as-path-filter-number</span></i> | <i><span class="varname">as-path-filter-name</span></i> } | <i><span class="varname">network-address</span></i> [ { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } [ <strong><span>longer-match</span></strong> ] ] ] command to check route flapping statistics.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+routing-table"><b><span class="cmdname">display bgp routing-table</span></b></a> <strong><span>time-range</span></strong> <i><span class="varname">start-time</span></i> <i><span class="varname">end-time</span></i> command to view the routes that flap within a specified period.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+routing-table+dampened"><b><span class="cmdname">display bgp routing-table dampened</span></b></a> command to check dampened BGP routes.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+routing-table+dampening+parameter"><b><span class="cmdname">display bgp routing-table dampening parameter</span></b></a> command to check configured BGP route dampening parameters.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_bgp_cfg_0094.html">Configuring BGP Route Dampening
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_bgp_cfg_0095.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_bgp_cfg_0097.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>