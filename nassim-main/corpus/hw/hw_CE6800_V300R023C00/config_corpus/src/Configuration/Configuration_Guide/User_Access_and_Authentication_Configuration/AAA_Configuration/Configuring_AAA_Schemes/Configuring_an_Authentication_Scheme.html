
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an Authentication Scheme">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0011.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_aaa_cfg_0013.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="AAA">
<meta name="featurename" content="AD">
<meta name="featurename" content="HWTACACS">
<meta name="featurename" content="LDAP">
<meta name="featurename" content="RADIUS">
<meta name="featurename" content="Local User">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="AAA">
<meta name="featurename" content="AD">
<meta name="featurename" content="HWTACACS">
<meta name="featurename" content="LDAP">
<meta name="featurename" content="RADIUS">
<meta name="featurename" content="Local User">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featurename" content="AAA">
<meta name="featurename" content="AD">
<meta name="featurename" content="HWTACACS">
<meta name="featurename" content="LDAP">
<meta name="featurename" content="RADIUS">
<meta name="featurename" content="Local User">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563875633">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring an Authentication Scheme</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563875633"></a><a name="EN-US_TASK_0000001563875633"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an Authentication Scheme</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563875633__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>An authentication scheme defines the authentication methods used for user authentication and the order in which authentication methods take effect. To prevent authentication failures caused by a single authentication method failing to respond, you can configure local authentication as the backup authentication method in the authentication scheme.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0000001563875633__en-us_concept_0000001512676526_ul7267122431613"><li id="EN-US_TASK_0000001563875633__en-us_concept_0000001512676526_li15267162451613">If the authentication method is set to non-authentication using the <a href="cmdqueryname=authentication-mode"><b><span class="cmdname" id="EN-US_TASK_0000001563875633__en-us_concept_0000001512676526_en-us_task_0176366373_cmdname1305721388180143">authentication-mode</span></b></a> <a href="cmdqueryname=none"><b><span class="cmdname" id="EN-US_TASK_0000001563875633__en-us_concept_0000001512676526_cmdname21826474579">none</span></b></a> command, an access user will be authenticated successfully after entering any user name and password for login. Therefore, for security purposes, you are advised to set an authentication method other than non-authentication to ensure that only authenticated users can access the device or network.</li><li id="EN-US_TASK_0000001563875633__en-us_concept_0000001512676526_li18281438104811">If the authentication method is set to non-authentication using the <a href="cmdqueryname=authentication-mode"><b><span class="cmdname" id="EN-US_TASK_0000001563875633__en-us_concept_0000001512676526_cmdname1719132915153">authentication-mode</span></b></a> <a href="cmdqueryname=none"><b><span class="cmdname" id="EN-US_TASK_0000001563875633__en-us_concept_0000001512676526_cmdname5191629151511">none</span></b></a> command, administrators are not allowed to go online. If the authentication method of administrators is set to AAA authentication using the <strong id="EN-US_TASK_0000001563875633__en-us_concept_0000001512676526_b13643154041815">authentication-mode</strong> command in the user interface view, the device does not allow administrators to log in from the user interface view.</li><li id="EN-US_TASK_0000001563875633__en-us_concept_0000001512676526_li8679161319486">Third-party authentication may lack security mechanisms such as password complexity check and brute force attack defense. Check whether third-party authentication is used.</li></ul>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563875633__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the AAA view.</span><p><pre class="screen"><a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></pre>
</p></li><li><span>Create an authentication scheme and enter the authentication scheme view.</span><p><pre class="screen"><a href="cmdqueryname=authentication-scheme"><b><span class="cmdname">authentication-scheme</span></b></a> <i><span class="varname">authentication-scheme-name</span></i></pre>
</p></li><li><span>Configure an authentication method.</span><p><pre class="screen"><a href="cmdqueryname=authentication-mode"><b><span class="cmdname">authentication-mode</span></b></a> { <strong><span>hwtacacs</span></strong> | { <strong><span>local</span></strong> | <strong><span>local-case</span></strong> } | <strong><span>radius</span></strong> | <strong>ldap</strong> | } <sup>*</sup> [ <strong><span>none</span></strong> ]</pre>
<p>If <strong>local</strong> is specified, user names are case-insensitive. If <strong>local-case</strong> is specified, user names are case-sensitive.</p>
<p>If you run the <a href="cmdqueryname=authentication-mode"><b><span class="cmdname">authentication-mode</span></b></a> <a href="cmdqueryname=none"><b><span class="cmdname">none</span></b></a> command to set the authentication mode to non-authentication and AAA authentication is configured for administrators in the user interface view, the device does not allow administrators in the user interface view to log in to the device.</p>
</p></li><li><span>(Optional) Configure administrators to replace PAP authentication with CHAP authentication during RADIUS authentication.</span><p><pre class="screen"><a href="cmdqueryname=authentication-type+radius+chap+access-type+admin"><b><span class="cmdname">authentication-type radius chap access-type admin</span></b></a> [ <strong><span>ftp</span></strong> | <strong><span>ssh</span></strong> | <strong><span>telnet</span></strong> | <strong><span>terminal</span></strong> |<strong> http </strong>| <strong>snmp</strong> | <strong>md-cli </strong>] <sup>*</sup></pre>
</p><p><p>By default, administrators use PAP authentication during RADIUS authentication.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the Federal Information Processing Standards (FIPS) mode is enabled, CHAP authentication is used by default during RADIUS authentication.</p>
</div></div>
</p></li><li><span>(Optional) Configure the device not to send accounting packets when local authentication is triggered because the server does not respond to users' authentication requests.</span><p><pre class="screen"><a href="cmdqueryname=undo+server+no-response+accounting"><b><span class="cmdname">undo server no-response accounting</span></b></a></pre>
<p>By default, if server accounting is configured, the device does not send accounting packets when local authentication is triggered because the server does not respond to users' authentication requests.</p>
</p></li><li><span>(Optional) Configure the device to perform local authorization without sending authorization packets when local authentication is triggered because the server does not respond to users' authentication requests.</span><p><pre class="screen"><strong>undo server no-response authorization</strong></pre>
<p>By default, if both server authentication and local authentication are configured, the device directly requests local authorization when local authentication is triggered because the server does not respond to users' authentication requests.</p>
</p></li><li><span>(Optional) Configure local authentication for administrators if RADIUS authentication is rejected.</span><p><pre class="screen"><a href="cmdqueryname=radius-reject+local"><b><span class="cmdname">radius-reject local</span></b></a></pre>
<p>By default, local authentication is not configured for administrators if RADIUS authentication is rejected. After the RADIUS server responds with an Access-Reject packet, the authentication process ends and the user fails authentication.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>This function takes effect only for administrators.</li><li>The authentication method must be RADIUS authentication+local authentication.</li></ul>
</div></div>
</p></li><li><span>Return to the AAA view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>(Optional) Configure the system to lock out accounts that fail remote AAA authentication.</span><p><ul><li>Enable the system to lock out administrators that fail remote authentication, and configure the authentication retry interval, maximum number of consecutive failed password attempts, and account lockout duration.<pre class="screen"><strong>administrator remote authen-fail</strong><strong> retry-interval </strong><em>retry-interval </em><strong>retry-time </strong><em>retry-time </em><strong>block-time</strong><em> block-time</em></pre>
<div class="p">Alternatively, enable the system to lock out access users who fail remote authentication, and configure the authentication retry interval, maximum number of consecutive failed password attempts, and account lockout duration.<pre class="screen"><a href="cmdqueryname=access-user+remote+authen-fail"><b><span class="cmdname">access-user remote authen-fail</span></b></a> <strong><span>retry-interval</span></strong> <i><span class="varname">retry-interval</span></i> <strong><span>retry-time</span></strong> <i><span class="varname">retry-time</span></i> <strong><span>block-time</span></strong> <i><span class="varname">block-time</span></i></pre>
</div>
<p>By default, the account locking function is enabled for administrators who fail remote authentication and is disabled for access users who fail remote authentication. When users fail remote authentication, the authentication retry interval defaults to 5 minutes, the maximum number of consecutive failed password attempts defaults to 30, and the account lockout duration defaults to 5 minutes.</p>
</li><li id="EN-US_TASK_0000001563875633__li6597871415">Configure users to access the network using a specified IP address when user accounts are locked out.<pre class="screen" id="EN-US_TASK_0000001563875633__screen18771103816147"><strong id="EN-US_TASK_0000001563875633__b14218121615249"><a href="cmdqueryname=aaa-quiet+administrator+except-list"><b><span class="cmdname" id="EN-US_TASK_0000001563875633__cmdname35314219246">aaa-quiet administrator except-list</span></b></a></strong><strong id="EN-US_TASK_0000001563875633__b1525832218361"> </strong>{<em id="EN-US_TASK_0000001563875633__i1574521662413"> ipv4-address</em> | <em id="EN-US_TASK_0000001563875633__i544311116195">ipv6-address</em> }  &amp;&lt;1-32&gt;</pre>
<p id="EN-US_TASK_0000001563875633__p1376084419255">By default, users cannot access the network when their accounts are locked out.</p>
<p id="EN-US_TASK_0000001563875633__p2065612562270">This function takes effect only for administrators.</p>
<p id="EN-US_TASK_0000001563875633__p122004315253">To check information about the specified IP address, run the <a href="cmdqueryname=display+aaa-quiet+administrator+except-list"><b><span class="cmdname" id="EN-US_TASK_0000001563875633__cmdname1560119516261">display aaa-quiet administrator except-list</span></b></a> command.</p>
</li><li>Unlock the account that is locked out after remote AAA authentication fails.<pre class="screen"><a href="cmdqueryname=remote-user+authen-fail+unblock"><b><span class="cmdname">remote-user authen-fail unblock</span></b></a> { <strong><span>all</span></strong> | <strong><span>username</span></strong> <i><span class="varname">username</span></i> }</pre>
</li></ul>
</p></li><li><span>(Optional) Configure the system to lock out accounts that fail local authentication.</span><p><ul><li>Enable the system to lock out accounts that fail local authentication, and configure the authentication retry interval, maximum number of consecutive failed password attempts, and account lockout duration.<pre class="screen"><strong><a href="cmdqueryname=local-aaa-user+wrong-password"><b><span class="cmdname">local-aaa-user wrong-password</span></b></a></strong> <strong><span>retry-interval</span></strong> <i><span class="varname">retry-interval</span></i> <strong><span>retry-time</span></strong> <i><span class="varname">retry-time</span></i> <strong><span>block-time</span></strong> <i><span class="varname">block-time</span></i></pre>
<p>By default, the function of locking out accounts that fail local authentication is enabled, the authentication retry interval is 5 minutes, the maximum number of consecutive failed password attempts is 3, and the account lockout duration is 5 minutes.</p>
</li><li>Configure users to access the network using a specified IP address when user accounts are locked out.<pre class="screen" id="EN-US_TASK_0000001563875633__en-us_task_0000001563875633_screen18771103816147"><strong id="EN-US_TASK_0000001563875633__en-us_task_0000001563875633_b14218121615249"><a href="cmdqueryname=aaa-quiet+administrator+except-list"><b><span class="cmdname" id="EN-US_TASK_0000001563875633__en-us_task_0000001563875633_cmdname35314219246">aaa-quiet administrator except-list</span></b></a></strong><strong id="EN-US_TASK_0000001563875633__en-us_task_0000001563875633_b1525832218361"> </strong>{<em id="EN-US_TASK_0000001563875633__en-us_task_0000001563875633_i1574521662413"> ipv4-address</em> | <em id="EN-US_TASK_0000001563875633__en-us_task_0000001563875633_i544311116195">ipv6-address</em> }  &amp;&lt;1-32&gt;</pre>
<p id="EN-US_TASK_0000001563875633__en-us_task_0000001563875633_p1376084419255">By default, users cannot access the network when their accounts are locked out.</p>
<p id="EN-US_TASK_0000001563875633__en-us_task_0000001563875633_p2065612562270">This function takes effect only for administrators.</p>
<p id="EN-US_TASK_0000001563875633__en-us_task_0000001563875633_p122004315253">To check information about the specified IP address, run the <a href="cmdqueryname=display+aaa-quiet+administrator+except-list"><b><span class="cmdname" id="EN-US_TASK_0000001563875633__en-us_task_0000001563875633_cmdname1560119516261">display aaa-quiet administrator except-list</span></b></a> command.</p>
</li><li>Unlock the account that is locked out after local authentication fails.<pre class="screen"><strong><a href="cmdqueryname=local-user"><b><span class="cmdname">local-user</span></b></a></strong> <em><i><span class="varname">user-name</span></i></em><strong> <strong><span>state</span></strong></strong><strong> <strong><span>active</span></strong></strong></pre>
</li></ul>
</p></li><li><span>(Optional) Configure a trusted host IP address. After this step is performed, only the administrator using this IP address is authenticated based on the user name and password. The administrators using other IP addresses are not allowed to log in.</span><p><pre class="screen"><a href="cmdqueryname=aaa-bind+administrator+ip"><b><span class="cmdname">aaa-bind administrator ip</span></b></a> { <em>ipv4-address</em> | <em>ipv6-address</em> } &amp;&lt;1-8&gt;</pre>
<p>By default, no trusted host IP address is configured on the device.</p>
<p>The CE6885-LL supports the <em>ipv6-address</em> parameter only in standard forwarding mode.</p>
<p>This function takes effect only for administrators.</p>
<p>To check the configured trusted host IP address, run the <a href="cmdqueryname=display+aaa-bind+administrator+ip"><b><span class="cmdname">display aaa-bind administrator ip</span></b></a> command.</p>
</p></li><li><span>(Optional) Disable the device from disconnecting or re-authenticating users when the RADIUS server delivers the Session-Timeout attribute with the value 0.</span><p><pre class="screen"><strong>aaa-author session-timeout invalid-value enable</strong></pre>
<p>By default, when the RADIUS server delivers the Session-Timeout attribute with the value 0, this attribute does not take effect.</p>
</p></li><li><span>Return to the system view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li><span>(Optional) Enable the bypass authentication function.</span><p><pre class="screen"><a href="cmdqueryname=aaa-"><b><span class="cmdname">aaa-</span></b></a><strong>authen</strong><a href="cmdqueryname=-bypass"><b><span class="cmdname">-bypass</span></b></a> <strong><span>enable</span></strong> <strong><span>time</span></strong> <i><span class="varname">time-value</span></i></pre>
<p>By default, the bypass authentication function is disabled.</p>
</p></li><li><span>(Optional) Enable system log suppression.</span><p><ol type="a"><li>Enable system log suppression.<pre class="screen"><strong>access-user syslog-restrain enable</strong></pre>
<p>By default, the system log suppression function is disabled.</p>
</li><li>Configure the system log suppression period.<pre class="screen"><strong><a href="cmdqueryname=access-user+syslog-restrain+period"><b><span class="cmdname">access-user syslog-restrain period</span></b></a> </strong><em>period</em></pre>
<p>By default, the system log suppression period is 300s.</p>
</li></ol>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001563875633__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001563875633__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001563875633__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <strong>display authentication-scheme </strong>[ <strong>name</strong> <em>authentication-scheme-name</em> ] command to check the authentication scheme configuration.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_aaa_cfg_0011.html">Configuring AAA Schemes
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_aaa_cfg_0013.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>