
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Layer 2/Layer 3 Mode Switching on an Ethernet Interface">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_ethernet-int_0023.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_ethernet-int_0022.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_ethernet-int_0124.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="featuretype" content="Interface Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001513040962">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring Layer 2/Layer 3 Mode Switching on an Ethernet Interface</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001513040962"></a><a name="EN-US_TASK_0000001513040962"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Layer 2/Layer 3 Mode Switching on an Ethernet Interface</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001513040962__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Ethernet interfaces on Layer 3 devices typically work in Layer 3 mode. To add such interfaces to a VLAN or perform other Layer 2 configurations, switch their working mode to Layer 2. You can switch the working mode of an interface between Layer 2 and Layer 3 as required. In Layer 2 mode, the interface functions as a Layer 2 Ethernet interface. In Layer 3 mode, the interface functions as a Layer 3 Ethernet interface.</p>
<div class="note"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Determine whether to switch the working mode of an interface between Layer 2 and Layer 3 based on the interface type.</p>
<p>Eth-Trunk member interfaces do not support the configuration of switching between Layer 2 and Layer 3 modes.</p>
</div></div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001513040962__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Switch the working mode of a single Ethernet interface to Layer 2 in the Ethernet interface view.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the Ethernet interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Switch the working mode of the interface to Layer 2.</span><p><pre class="screen"><a href="cmdqueryname=portswitch"><b><span class="cmdname">portswitch</span></b></a></pre>
<p>The mode switching function takes effect when the interface only has attribute configurations, such as <a href="cmdqueryname=shutdown"><b><span class="cmdname">shutdown</span></b></a> and <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> configurations, or configurations supported by both Layer 2 and Layer 3 modes. Before switching the working mode, ensure that the configurations on the interface still support the new working mode. If unsupported configurations exist on the interface, delete the configurations before running the <a href="cmdqueryname=portswitch"><b><span class="cmdname">portswitch</span></b></a> command.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Switch the working mode of a single Ethernet interface to Layer 3 in the Ethernet interface view.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the Ethernet interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Switch the working mode of the interface to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
<p>The mode switching function takes effect when the interface only has attribute configurations, such as <a href="cmdqueryname=shutdown"><b><span class="cmdname">shutdown</span></b></a> and <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> configurations, or configurations supported by both Layer 2 and Layer 3 modes. Configurations that are not supported by the target working mode cannot exist on the interface. If unsupported configurations exist on the interface, delete the configurations before running the <a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a> command.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Switch the working modes of Ethernet interfaces to Layer 2 in batches in the system view.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Switch the working modes of Ethernet interfaces to Layer 2 in batches.</span><p><pre class="screen"><a href="cmdqueryname=portswitch+batch"><b><span class="cmdname">portswitch batch</span></b></a> <i><span class="varname">interface-type</span></i> { <i><span class="varname">interface-number1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">interface-number2</span></i> ] } &amp;&lt;1-10&gt;</pre>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Switch the working modes of Ethernet interfaces to Layer 3 in batches in the system view.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Switch the working modes of Ethernet interfaces to Layer 3 in batches.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch+batch"><b><span class="cmdname">undo portswitch batch</span></b></a> <i><span class="varname">interface-type</span></i> { <i><span class="varname">interface-number1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">interface-number2</span></i> ] } &amp;&lt;1-10&gt;</pre>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0000001513040962__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+interface"><b><span class="cmdname">display interface</span></b></a> [ <i><span class="varname">interface-type</span></i> [ <i><span class="varname">interface-number</span></i> ] ] command in any view or the <a href="cmdqueryname=display+this+interface"><b><span class="cmdname">display this interface</span></b></a> command in the interface view to check the current interface status. If the <strong>Switch Port</strong> field is displayed in the command output, the interface is a Layer 2 interface; if the <strong>Route Port</strong> field is displayed, it is a Layer 3 interface.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_ethernet-int_0023.html">Configuring General Attributes for Ethernet Optical or Electrical Interfaces
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_ethernet-int_0022.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_ethernet-int_0124.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>