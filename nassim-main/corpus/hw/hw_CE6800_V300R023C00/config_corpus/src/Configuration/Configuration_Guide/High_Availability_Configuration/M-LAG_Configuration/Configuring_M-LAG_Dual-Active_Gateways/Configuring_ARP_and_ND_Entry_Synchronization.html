
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring ARP and ND Entry Synchronization">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../dc/dc_cfg_m-lag_0015.html">
<meta name="DC.Relation" scheme="URI" content="../dc/dc_cfg_m-lag_0040.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_cfg_vxlan_0001_CE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="M-LAG">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="M-LAG">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="M-LAG">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001564009073">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Configuring ARP and ND Entry Synchronization</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001564009073"></a><a name="EN-US_TASK_0000001564009073"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring ARP and ND Entry Synchronization</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001564009073__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When M-LAG master and backup devices function as Layer 3 gateways, M-LAG member interfaces need to periodically synchronize learned ARP and ND entries so that the M-LAG works properly. In this case, the two devices synchronize ARP and ND entries in batches to improve their synchronization efficiency. To ensure that the devices run properly when synchronization efficiency is improved, you can run commands to set proper ARP and ND entry synchronization rates.</p>
<p>For the <span>CE6820H, CE6820H-K, and CE6820S</span>: VXLAN-related configurations are not supported.</p>
<p>For the <span>CE6885-LL (low latency mode)</span>: VXLAN and IPv6-related configurations are not supported.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001564009073__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>(Optional) Configure ARP entry synchronization.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Set the rate at which ARP entries are synchronized.</span><p><pre class="screen"><a href="cmdqueryname=arp+remote-backup-rate+limit"><b><span class="cmdname">arp remote-backup-rate limit</span></b></a> <i><span class="varname">ratelimit</span></i></pre>
<p>By default, the system synchronizes 2000 ARP entries per second in an M-LAG.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>Changing the rate at which ARP entries are synchronized using this command may affect the CPU usage.</li><li>If the dynamic ARP entries learned through an M-LAG member interface are deleted, the device is triggered to learn the ARP entries again when receiving corresponding traffic.</li><li>This command takes effect for synchronization of dynamic ARP entries and interface ARP entries.</li><li>The ARP entries that are synchronized from the remote end are also dynamic ARP entries, and share the specifications with dynamic ARP entries on the local end.</li><li>If the device fails to learn dynamic ARP entries through the M-LAG member interface because the number of ARP entries on the device reaches the maximum value, you can delete other ARP entries based on service requirements so that the device can be triggered to learn the dynamic ARP entries again when receiving corresponding traffic.</li></ul>
</div></div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001564009073__en-us_task_0228023023_screen14848162118611"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001564009073__en-us_task_0228023023_cmdname1784862115612">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure ND entry synchronization.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the VLANIF or VBDIF interface view.</span><p><ul><li>Enter the VLANIF interface view.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <strong><span>vlanif</span></strong> <i><span class="varname">vlan-id</span></i></pre>
</li></ul>
<ul><li>Enter the VBDIF interface view.<pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <strong><span>vbdif</span></strong> <i><span class="varname">bd-id</span></i> </pre>
</li></ul>
</p></li><li class="substepexpand"><span>Enable IPv6 on the interface.</span><p><pre class="screen"><a href="cmdqueryname=ipv6+enable"><b><span class="cmdname">ipv6 enable</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure the device to generate ND entries on the interface upon receipt of valid NA messages if no ND entry exists on the interface.</span><p><pre class="screen"><a href="cmdqueryname=ipv6+nd+na+glean"><b><span class="cmdname">ipv6 nd na glean</span></b></a></pre>
<p>By default, the device does not generate ND entries on an interface upon receipt of valid NA messages if no ND entry exists on the interface.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To synchronize ND entries in an M-LAG, configure the <a href="cmdqueryname=ipv6+nd+na+glean"><b><span class="cmdname">ipv6 nd na glean</span></b></a> command. This configuration enables the M-LAG backup device to generate ND entries upon receipt of valid NA messages if no ND entry exists. After learning the entries, the M-LAG backup device synchronizes the entries to the M-LAG master device.</p>
</div></div>
</p></li><li class="substepexpand"><span>Exit the interface view.</span><p><pre class="screen"><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></pre>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001564009073__en-us_task_0228023023_screen14848162118611_1"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001564009073__en-us_task_0228023023_cmdname1784862115612_1">commit</span></b></a></pre>
</p></li><li class="substepexpand"><span>(Optional) Set the rate at which ND entries are synchronized.</span><p><pre class="screen"><a href="cmdqueryname=ipv6+nd+remote-backup-rate+limit"><b><span class="cmdname">ipv6 nd remote-backup-rate limit</span></b></a> <i><span class="varname">ratelimit</span></i></pre>
<p>By default, the system synchronizes 2000 ND entries per second in an M-LAG.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>If the dynamic ND entries learned through an M-LAG member interface are deleted, the device is triggered to learn the ND entries again when receiving corresponding traffic.</li><li>This command takes effect only for synchronization of dynamic ND entries.</li><li>After a dynamic entry is switched to a static or remote entry, the entry is not synchronized to the remote end, and the local end does not instruct the remote end to delete the entry.</li><li>The ND entries that are synchronized from the remote end are also dynamic ND entries, and share the specifications with dynamic ND entries on the local end.</li><li>If the device fails to learn dynamic ND entries through the M-LAG member interface because the number of ND entries on the device reaches the maximum value, you can delete other ND entries based on service requirements so that the device can be triggered to learn the dynamic ND entries again when receiving corresponding traffic.</li></ul>
</div></div>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001564009073__en-us_task_0228023023_screen14848162118611_2"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001564009073__en-us_task_0228023023_cmdname1784862115612_2">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../dc/dc_cfg_m-lag_0015.html">Configuring M-LAG Dual-Active Gateways
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../dc/dc_cfg_m-lag_0040.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_cfg_vxlan_0001_CE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>