
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling IGMP Snooping">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_l2mc_cfg_0010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001176661649">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Enabling IGMP Snooping</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001176661649"></a><a name="EN-US_TASK_0000001176661649"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling IGMP Snooping</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001176661649__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Configuring basic IGMP snooping functions is the prerequisite for implementing Layer 2 multicast, and involves enabling IGMP snooping, setting the version for IGMP messages that can be processed by IGMP snooping, and setting the IGMP snooping forwarding mode.</p>
<p>After IGMP snooping is enabled on a Layer 2 device, it listens to and records the IGMP Report messages sent from hosts to a Layer 3 device, and sets up mappings between interfaces and multicast group addresses. The Layer 2 device can then forward multicast data only to the interfaces connected to group members based on the mapping information.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>If IGMP snooping is configured in a VLAN, PIM-DM cannot be configured on the corresponding VLANIF interface. Similarly, if PIM-DM is configured on a VLANIF interface, IGMP snooping cannot be configured in the corresponding VLAN.</li><li>When configuring IGMP snooping in an M-LAG scenario, ensure that either the configuration of IGMP snooping querier or IGMP snooping proxy is consistent on the primary and backup M-LAG devices.</li><li>If IGMP snooping is configured in an M-LAG scenario and there are many multicast routing entries and multicast outbound interfaces, high CPU usage will occur due to the high number of entries that need to be delivered, adversely affecting the forwarding of protocol packets. To prevent such an issue, you are advised to reduce the CAR value of IGMP multicast services to 100 on the master and backup M-LAG devices, reducing the CPU usage.</li><li>IGMP snooping cannot be used together with VLAN mapping.</li><li>The following pairs of functions cannot be both configured in the same VLAN:<p>IGMP snooping querier and IGMP snooping proxy</p>
<p>Report and Leave message suppression and IGMP snooping proxy</p>
</li><li>In a scenario where both Layer 2 multicast and Layer 3 multicast are enabled (that is, Layer 2 multicast is configured in a VLAN, and Layer 3 multicast is configured on the corresponding VLANIF interface), you must perform the following operations to ensure that multicast traffic can be forwarded normally:<p>Enable IGMP snooping in the VLAN.</p>
<p>Enable PIM and IGMP on the corresponding VLANIF interface.</p>
</li></ul>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001176661649__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enable IGMP snooping globally.</span><p><pre class="screen"><a href="cmdqueryname=igmp+snooping+enable"><b><span class="cmdname">igmp snooping enable</span></b></a></pre>
<p><span>By default, IGMP snooping is disabled.</span></p>
</p></li><li><span>Enter the VLAN view.</span><p><pre class="screen"><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i></pre>
</p></li><li><span>Enable IGMP snooping in the VLAN.</span><p><pre class="screen"><a href="cmdqueryname=igmp+snooping+enable"><b><span class="cmdname">igmp snooping enable</span></b></a></pre>
<p><span>To enable IGMP snooping for multiple VLANs in a batch, run the <span><a href="cmdqueryname=igmp+snooping+enable"><b><span class="cmdname">igmp snooping enable</span></b></a><span> [ <strong><span>vlan</span></strong> { <i><span class="varname">vlan-id1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">vlan-id2</span></i> ] } &amp;&lt;1-10&gt; ]</span></span> command in the system view.</span></p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_l2mc_cfg_0008.html">Configuring Basic IGMP Snooping Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_l2mc_cfg_0010.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>