
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Setting the Network Type to NBMA">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0019.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0022.html">
<meta name="DC.Relation" scheme="URI" content="../vrp/vrp_ospfv3_cfg_0024.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130623210">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Setting the Network Type to NBMA</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130623210"></a><a name="EN-US_TASK_0000001130623210"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Setting the Network Type to NBMA</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001130623210__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before setting the network type to NBMA, you have completed the following task:</p>
<ul><li><p><a href="vrp_ospfv3_cfg_0009.html">Configure basic OSPFv3 functions</a>.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130623210__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Enter the interface view.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li><span>Switch the interface working mode from Layer 2 to Layer 3.</span><p><pre class="screen"><a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a></pre>
<p></p>
<p>Determine whether to perform this step based on the current interface working mode.</p>
</p></li><li><span>Set the network type of the OSPFv3 interface to NBMA.</span><p><pre class="screen"><a href="cmdqueryname=ospfv3+network-type"><b><span class="cmdname">ospfv3 network-type</span></b></a> <strong><span>nbma</span></strong> [ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ]</pre>
<p>The default network type of an Ethernet interface is broadcast. If a device that does not support multicast exists on the broadcast network, you can change the network type of the device interface to NBMA.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The NBMA network must be fully meshed. That is, any two devices on the NBMA network must be directly reachable. In most cases, however, this requirement cannot be met. To address this issue, <a href="vrp_ospfv3_cfg_0024.html">change the network type to P2MP</a>.</p>
</div></div>
</p></li><li><span>Configure a neighbor on the NBMA network.</span><p><pre class="screen"><strong><a href="cmdqueryname=ospfv3+peer+router-id"><b><span class="cmdname">ospfv3 peer router-id</span></b></a> </strong><em>router-id-value </em><em>prefix</em> [ <strong>dr-eligible</strong> | <strong>cost</strong><em> cost-value</em> | <strong>instance</strong><em> instance-id</em> | <strong>poll</strong><em> poll-interval</em> ] <sup>*</sup></pre>
<p>An NBMA interface cannot broadcast Hello packets to discover neighboring devices. Therefore, you need to specify the IP address of a neighboring device in the process, and determine whether the neighboring device can participate in DR election. You can also set other parameters such as the cost.</p>
<p>By default, no IP address is configured for the neighboring device on an NBMA network, and whether the neighboring device can participate in DR election is not specified.</p>
</p></li><li><span>(Optional) Set the interval at which polling packets are sent by the NBMA interface.</span><p><pre class="screen"><a href="cmdqueryname=ospfv3+timer+poll"><b><span class="cmdname">ospfv3 timer poll</span></b></a> <i><span class="varname">interval</span></i> [ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ]</pre>
<p>The default interval is 120 seconds.</p>
<p>After the neighbor relationship on the NBMA network becomes invalid, the device sends Hello packets at the interval set using this command.</p>
</p></li><li><span>(Optional) Set a DR priority for the OSPFv3 interface.</span><p><pre class="screen"><a href="cmdqueryname=ospfv3+dr-priority"><b><span class="cmdname">ospfv3 dr-priority</span></b></a> <i><span class="varname">priovalue</span></i> [ <strong><span>instance</span></strong> <i><span class="varname">instanceId</span></i> ]</pre>
<p>By default, the DR priority of an interface is 1. A larger value indicates a higher priority.</p>
<p>The priority of an interface determines whether the interface is qualified to be a DR or BDR. The interface with the highest priority is elected as the DR. However, if the priority of an interface on a device is 0, the device cannot be elected as a DR or BDR. On an NBMA network, you can set the DR priority of an interface to control the DR or BDR election. When the DR and BDR are elected on a network segment, they send DD packets to all neighboring nodes and set up adjacencies with all neighboring nodes.</p>
</p></li><li><span>(Optional) Set a wait interval for the OSPFv3 interface.</span><p><pre class="screen"><a href="cmdqueryname=ospfv3+timer+wait"><b><span class="cmdname">ospfv3 timer wait</span></b></a> <i><span class="varname">interval</span></i> [ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ]</pre>
<p>By default, the wait interval is 40 seconds.</p>
<p>If no Backup Seen event is received within the specified interval, the DR election starts. Setting a proper interval for the wait timer can slow down changes of the DR and BDR on the network, reducing network flapping. The interval of the wait timer cannot be greater than that of the Dead timer (set using the <a href="cmdqueryname=ospfv3+timer+dead"><b><span class="cmdname">ospfv3 timer dead</span></b></a> command).</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001130623210__en-us_task_0234857734_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001130623210__en-us_task_0234857734_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001130623210__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+ospfv3"><b><span class="cmdname">display ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>interface</span></strong> [ <span><strong><span>no-peer</span></strong> | </span><strong><span>area</span></strong> <i><span class="varname">area-id</span></i> ] [ <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ] command to check OSPFv3 interface information.</li><li>Run the <a href="cmdqueryname=display+ospfv3"><b><span class="cmdname">display ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>peer</span></strong> command to check information about OSPFv3 neighbors.</li></ul>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001130623210__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><div class="notice"><span class="noticetitle"><img src="../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>Changing the DR priority leads to DR/BDR re-election and terminates the OSPFv3 adjacency between devices. Therefore, changing the DR priority is typically not recommended.</p>
</div></div>
<p>You can use either of the following methods to trigger DR/BDR re-election:</p>
<ul><li><p>Restart all devices.</p>
</li><li><p>Run the <a href="cmdqueryname=shutdown"><b><span class="cmdname">shutdown</span></b></a> and <a href="cmdqueryname=undo+shutdown"><b><span class="cmdname">undo shutdown</span></b></a> commands in sequence on each of the interfaces that are used to establish OSPFv3 neighbor relationships.</p>
</li></ul>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../vrp/vrp_ospfv3_cfg_0019.html">Configuring Network Types for OSPFv3 Interfaces
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../vrp/vrp_ospfv3_cfg_0022.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../vrp/vrp_ospfv3_cfg_0024.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>