
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the CPCAR Value">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="galaxy_localattackdefense_cfg_0005.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_localattackdefense_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="galaxy_localattackdefense_cfg_0008.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security Protection">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563756889">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Configuring the CPCAR Value</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563756889"></a><a name="EN-US_TASK_0000001563756889"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the CPCAR Value</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001563756889__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>To reduce the total number of packets reaching the CPU, and to mitigate the impact that different types of packets have on one another in order to protect the CPU, the device can rate-limit packets to be sent to the CPU at different levels. This includes CPCAR based on protocol packets, rate limiting on all packets sent to the CPU, and rate limiting based on protocol association.</p>
<ul><li>Rate limiting based on protocol association has the highest priority and therefore takes precedence over CPCAR based on protocol packets as well as rate limiting on all protocol packets sent to the CPU.</li><li>If only CPCAR based on protocol packets and rate limiting on all protocol packets sent to the CPU are configured, the device rate-limits packets based on the smaller value of the two.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001563756889__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li><span>Create an attack defense policy and enter the attack defense policy view.</span><p><pre class="screen"><a href="cmdqueryname=cpu-defend+policy"><b><span class="cmdname">cpu-defend policy</span></b></a> <i><span class="varname">policy-name</span></i></pre>
</p></li><li><span>Configure the method used to rate-limit packets sent to the CPU.</span><p><ul><li>Set a CPCAR value for protocol packets of a specified type. <pre class="screen"><strong><a href="cmdqueryname=car+packet-type"><b><span class="cmdname"><span>car packet-type</span></span></b></a></strong><span> <em><i><span class="varname">packet-type</span></i></em> <strong>pps</strong> <em>pps-value</em></span></pre>
</li><li>Set a CPCAR value for all packets sent to the CPU.<pre class="screen"><strong><a href="cmdqueryname=car+all-packets"><b><span class="cmdname">car all-packets</span></b></a> pps</strong> <em>pps-value</em></pre>
</li><li id="EN-US_TASK_0000001563756889__li43569481291">Configure rate limiting based on protocol association.<ol type="a" id="EN-US_TASK_0000001563756889__ol17377181819114"><li id="EN-US_TASK_0000001563756889__li104008378266">Enable protocol association.<pre class="screen" id="EN-US_TASK_0000001563756889__screen8400133752610"><a href="cmdqueryname=application-apperceive"><b><span class="cmdname" id="EN-US_TASK_0000001563756889__cmdname7401173719267">application-apperceive</span></b></a> { <strong id="EN-US_TASK_0000001563756889__b14401537132619">bgp</strong> | <strong id="EN-US_TASK_0000001563756889__b440153716262">bgp4plus</strong> | <strong id="EN-US_TASK_0000001563756889__b12401133710268">isis</strong> |<strong id="EN-US_TASK_0000001563756889__b156261712876"> ftp</strong> | <strong id="EN-US_TASK_0000001563756889__b174011437102618">ssh</strong> | <strong id="EN-US_TASK_0000001563756889__b54018376263">telnet</strong> | <strong id="EN-US_TASK_0000001563756889__b9401103782610">tftp</strong><strong id="EN-US_TASK_0000001563756889__b20401163713268"> </strong>|<strong id="EN-US_TASK_0000001563756889__b24013376260"> ospf </strong>|<strong id="EN-US_TASK_0000001563756889__b124011837142619"> ospfv3 </strong> | <strong id="EN-US_TASK_0000001563756889__b394182910473">m-lag</strong><strong id="EN-US_TASK_0000001563756889__b79412954718"> </strong>| <strong id="EN-US_TASK_0000001563756889__b1894132910478">m-lag-sync</strong><strong id="EN-US_TASK_0000001563756889__b16941229164720"> </strong>} <strong id="EN-US_TASK_0000001563756889__b4401203716260">enable</strong></pre>
<p id="EN-US_TASK_0000001563756889__p16856107115110">The CE6885-LL in low latency mode does not support bgp4plus or ospfv3.</p>
</li><li id="EN-US_TASK_0000001563756889__li3172113092416">Set a CPCAR value for packets of a specific protocol upon the establishment of the protocol connection.<pre class="screen" id="EN-US_TASK_0000001563756889__screen20172123082412"><a href="cmdqueryname=linkup-car"><b><span class="cmdname" id="EN-US_TASK_0000001563756889__cmdname31721330112412">linkup-car</span></b></a> <strong id="EN-US_TASK_0000001563756889__b8172173019244">packet-type</strong> { <strong id="EN-US_TASK_0000001563756889__b1517263082419">bgp</strong> | <strong id="EN-US_TASK_0000001563756889__b16172133012417">bgp4plus</strong> | <strong id="EN-US_TASK_0000001563756889__b11172430152418">isis</strong> | <strong id="EN-US_TASK_0000001563756889__b71721230182412">ftp</strong> | <strong id="EN-US_TASK_0000001563756889__b191721030132417">ssh</strong> | <strong id="EN-US_TASK_0000001563756889__b917283015246">telnet</strong> | <strong id="EN-US_TASK_0000001563756889__b31721930132417">tftp</strong><strong id="EN-US_TASK_0000001563756889__b917253042413"> </strong>| <strong id="EN-US_TASK_0000001563756889__b191722302247">m-lag</strong><strong id="EN-US_TASK_0000001563756889__b17172143022418"> </strong>| <strong id="EN-US_TASK_0000001563756889__b1217203019243">m-lag-sync</strong><strong id="EN-US_TASK_0000001563756889__b18172103015245"> </strong>|<strong id="EN-US_TASK_0000001563756889__b8172630202411"> ospf </strong>|<strong id="EN-US_TASK_0000001563756889__b111728301248"> ospfv3 </strong> } <strong id="EN-US_TASK_0000001563756889__b13172183082410">pps</strong> <em id="EN-US_TASK_0000001563756889__i1217253013246">pps-value</em></pre>
<p id="EN-US_TASK_0000001563756889__p4134530133818">The CE6885-LL in low latency mode does not support bgp4plus or ospfv3.</p>
</li><li id="EN-US_TASK_0000001563756889__li12432827103116">Configure the penalty ratio threshold for protocol association.<pre class="screen" id="EN-US_TASK_0000001563756889__screen174933596317"><a href="cmdqueryname=linkup+session+anti-attack+ratio-threshold"><b><span class="cmdname" id="EN-US_TASK_0000001563756889__cmdname961120549612">linkup session anti-attack ratio-threshold</span></b></a> <em id="EN-US_TASK_0000001563756889__i92261758322">rate-value-percent</em> </pre>
<p id="EN-US_TASK_0000001563756889__p1132072719325">By default, the threshold is 50%.</p>
</li></ol>
</li></ul>
</p></li><li><span>(Optional) Configure the device to discard packets to be sent to the CPU. </span><p></p><p><pre class="screen"><strong>deny packet-type</strong> <em>packet-type</em></pre>
<p>By default, the device does not discard the packets to be sent to the CPU.</p>
</p></li><li><span>(Optional) Configure the description of the attack defense policy.</span><p><pre class="screen"><a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <em><i><span class="varname">description</span></i></em></pre>
<p>By default, no description is configured for an attack defense policy.</p>
</p></li><li id="EN-US_TASK_0000001563756889__step20679152111246"><span id="EN-US_TASK_0000001563756889__cmd116795213242">Return to the system view.</span><p><pre class="screen" id="EN-US_TASK_0000001563756889__screen1060848102417"><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001563756889__cmdname16697145422412">quit</span></b></a></pre>
</p></li><li id="EN-US_TASK_0000001563756889__step1359382510712"><span id="EN-US_TASK_0000001563756889__cmd75933251075">Apply the attack defense policy.</span><p><ul id="EN-US_TASK_0000001563756889__ul187417318538"><li id="EN-US_TASK_0000001563756889__li6741173125310">Configure attack defense policies in batches.<pre class="screen" id="EN-US_TASK_0000001563756889__screen1214533413538"><a href="cmdqueryname=cpu-defend-policy"><b><span class="cmdname" id="EN-US_TASK_0000001563756889__cmdname221512514546">cpu-defend-policy</span></b></a> <em id="EN-US_TASK_0000001563756889__i1821585165416">policy-name</em> <strong id="EN-US_TASK_0000001563756889__b17956929185412">batch</strong><strong id="EN-US_TASK_0000001563756889__b7956629185418"> slot</strong> { <em id="EN-US_TASK_0000001563756889__i1795682955418">start-slot</em> [ <strong id="EN-US_TASK_0000001563756889__b1595602965419">to</strong><em id="EN-US_TASK_0000001563756889__i0956729135411"> end-slot</em> ] } &amp;&lt;1-12&gt;</pre>
</li><li id="EN-US_TASK_0000001563756889__li20136134065316">Configure an attack defense policy separately.<pre class="screen" id="EN-US_TASK_0000001563756889__screen07011461574"><a href="cmdqueryname=cpu-defend-policy"><b><span class="cmdname" id="EN-US_TASK_0000001563756889__cmdname15559175725716">cpu-defend-policy</span></b></a> <em id="EN-US_TASK_0000001563756889__i555915713574">policy-name</em> [ <strong id="EN-US_TASK_0000001563756889__b4233161617221">slot</strong><em id="EN-US_TASK_0000001563756889__i13233516152214"> slot-id</em> ]</pre>
</li></ul>
<p id="EN-US_TASK_0000001563756889__p8122345193912">After an attack defense policy is created, you must apply the policy in the system view. Otherwise, the policy does not take effect.</p>
</p></li><li><span>Commit the configuration.</span><p><pre class="screen" id="EN-US_TASK_0000001563756889__en-us_task_0228023023_screen163801330213"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001563756889__en-us_task_0228023023_en-us_concept_0141113565_cmdname1667501373175340">commit</span></b></a></pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="galaxy_localattackdefense_cfg_0005.html">Configuring CPU Attack Defense
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="galaxy_localattackdefense_cfg_0006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="galaxy_localattackdefense_cfg_0008.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>