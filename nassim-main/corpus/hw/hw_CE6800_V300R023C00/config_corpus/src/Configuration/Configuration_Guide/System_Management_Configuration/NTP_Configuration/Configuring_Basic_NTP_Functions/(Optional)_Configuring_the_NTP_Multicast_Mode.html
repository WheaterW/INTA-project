
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring the NTP Multicast Mode">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_ntp_cfg_0012.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ntp_cfg_0017.html">
<meta name="DC.Relation" scheme="URI" content="vrp_ntp_cfg_0019.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001563755717">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring the NTP Multicast Mode</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001563755717"></a><a name="EN-US_TASK_0000001563755717"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring the NTP Multicast Mode</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001563755717__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When the multicast mode is used, you need to perform the following configurations on both the multicast server<span> and client</span>.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001563755717__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure an NTP multicast server.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Configure an NTP authentication key.</span><p><pre class="screen"><a href="cmdqueryname=ntp+authentication-keyid"><b><span class="cmdname">ntp authentication-keyid</span></b></a><i><span class="varname"> </span></i><i><span class="varname">keyId</span></i> <strong><span>authentication-mode</span></strong> { <strong>md5</strong> | <strong>hmac-sha256</strong> |<strong><span> aes-128-cmac</span></strong> | <strong><span>aes-256-cmac</span></strong> } { <em>password</em> | <strong>cipher</strong> <em>password</em> }</pre>
</p><p><p>MD5 is a weak security algorithm. It can be used only after the weak security algorithm or protocol feature package is installed after the <strong><span>install feature-software WEAKEA</span></strong> command is run. You are advised to use other security algorithms for NTP key authentication. </p>
</p></li><li class="substepexpand"><span>Enter the view of the interface used for sending NTP multicast packets.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Configure the local device as the NTP multicast server.</span><p><p>Run either of the following commands depending on whether the server IP address is an IPv4 or IPv6 address:</p>
<pre class="screen"><a href="cmdqueryname=ntp+multicast-server"><b><span class="cmdname">ntp multicast-server </span></b></a>[ <i><span class="varname">ip-address</span></i> ] [ <strong><span>authentication-keyid</span></strong> <i><span class="varname">key-id</span></i> | <strong><span>ttl</span></strong> <i><span class="varname">ttl-number</span></i> | <strong><span>version</span></strong> <i><span class="varname">number</span></i> | <strong><span>port</span></strong> <i><span class="varname">port-number</span></i> ] <sup>*</sup></pre>
<pre class="screen"><a href="cmdqueryname=ntp+multicast-server+ipv6"><b><span class="cmdname">ntp multicast-server ipv6 </span></b></a>[ <i><span class="varname">ipv6Addr</span></i> ] [ <strong><span>authentication-keyid</span></strong> <i><span class="varname">keyid</span></i> | <strong><span>ttl</span></strong> <i><span class="varname">ttl-number</span></i> | <strong><span>port</span></strong> <i><span class="varname">portNumber</span></i> ] <sup>*</sup></pre>
<p>After the configuration is complete, the local device functions as the NTP multicast server periodically sending clock synchronization packets to the configured destination multicast address from a specified interface.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li><li><span>Configure an NTP multicast client.</span><ol><li class="substepexpand"><span>Enter the system view.</span><p><pre class="screen"><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></pre>
</p></li><li class="substepexpand"><span>Enter the view of the interface used for receiving NTP multicast packets.</span><p><pre class="screen"><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></pre>
</p></li><li class="substepexpand"><span>Configure the local device as the NTP multicast client.</span><p><pre class="screen"><a href="cmdqueryname=ntp+multicast-client"><b><span class="cmdname">ntp multicast-client</span></b></a> [ <i><span class="varname">ip-address</span></i> <span>| <strong><span>ipv6</span></strong> <i><span class="varname">ipv6-address</span></i> </span>]</pre>
<p>After the configuration is complete, the local device functions as the NTP multicast client listening for the NTP multicast packets sent from the server and synchronizing the local clock with the server.</p>
</p></li><li class="substepexpand"><span>Commit the configuration.</span><p><pre class="screen"><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></pre>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_ntp_cfg_0012.html">Configuring Basic NTP Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_ntp_cfg_0017.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="vrp_ntp_cfg_0019.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>