
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Dynamic BFD for IS-IS">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="vrp_isis_ipv4_cfg_0057.html">
<meta name="DC.Relation" scheme="URI" content="vrp_isis_ipv4_cfg_0062.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001130784126">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Dynamic BFD for IS-IS</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001130784126"></a><a name="EN-US_TASK_0000001130784126"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Dynamic BFD for IS-IS</h1>
<div class="taskbody" id="taskbody1575894706547"><div class="context"><a name="EN-US_TASK_0000001130784126__1.3.1"></a><a name="1.3.1"></a>
<div class="p" id="EN-US_TASK_0000001130784126__context1677625172748"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0000001130784126__p226840918214037">On the network shown in <a href="#EN-US_TASK_0000001130784126__fig_dc_vrp_isis_cfg_008701">Figure 1</a>, IS-IS runs on DeviceA, DeviceB, and DeviceC. BFD for IS-IS is enabled on DeviceA, DeviceB, and DeviceC. Service traffic is transmitted over the primary link DeviceA -&gt; DeviceB. The link DeviceA -&gt; DeviceC -&gt; DeviceB serves as the backup link. BFD is configured for the interfaces on the link between DeviceA and DeviceB. If the link fails, BFD can fast detect the failure and notify IS-IS of the failure so that service traffic can be transmitted through the backup link.</p>
<div class="fignone" id="EN-US_TASK_0000001130784126__fig_dc_vrp_isis_cfg_008701"><a name="EN-US_TASK_0000001130784126__fig_dc_vrp_isis_cfg_008701"></a><a name="fig_dc_vrp_isis_cfg_008701"></a><span class="figcap"><b>Figure 1 </b>Network diagram of dynamic BFD for IS-IS</span><div class="note" id="EN-US_TASK_0000001130784126__note14873189203319"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001130784126__p208739914336">Interface 1, interface 2, and interface 3 in this example represent <span>100GE</span> <span>1/0/1</span>, <span>100GE</span> <span>1/0/2</span>, and <span>100GE</span> <span>1/0/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0000001130784126__image420601858214037" src="figure/en-us_image_0000001130784172.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130784126__1.3.2"></a><a name="1.3.2"></a>
<div class="p" id="EN-US_TASK_0000001130784126__context58072256259"><h4 class="sectiontitle">Configuration Precautions</h4><p id="EN-US_TASK_0000001130784126__p2031124116257">To improve security, you are advised to configure IS-IS authentication. For details, see Configuring IS-IS Authentication. IS-IS interface authentication is used as an example. For details, see Example for Configuring Basic IS-IS Functions.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001130784126__1.3.3"></a><a name="1.3.3"></a>
<div class="p" id="EN-US_TASK_0000001130784126__context098817292423"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001130784126__p485817579214037">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001130784126__ol1680895428214037"><li id="EN-US_TASK_0000001130784126__li1501264470214037"><p id="EN-US_TASK_0000001130784126__p966578687214037"><a name="EN-US_TASK_0000001130784126__li1501264470214037"></a><a name="li1501264470214037"></a>Enable basic IS-IS functions on each device for interworking.</p>
</li><li id="EN-US_TASK_0000001130784126__li1749064878214037"><p id="EN-US_TASK_0000001130784126__p1777244410214037"><a name="EN-US_TASK_0000001130784126__li1749064878214037"></a><a name="li1749064878214037"></a>Configure an IS-IS cost for each interface on each device (except the switch).</p>
</li><li id="EN-US_TASK_0000001130784126__li80255185214037"><p id="EN-US_TASK_0000001130784126__p229163979214037"><a name="EN-US_TASK_0000001130784126__li80255185214037"></a><a name="li80255185214037"></a>Enable BFD globally.</p>
</li><li id="EN-US_TASK_0000001130784126__li403277733214037"><p id="EN-US_TASK_0000001130784126__p430468599214037"><a name="EN-US_TASK_0000001130784126__li403277733214037"></a><a name="li403277733214037"></a>Enable BFD for IS-IS on DeviceA, DeviceB, and DeviceC.</p>
</li><li id="EN-US_TASK_0000001130784126__li271059393214037"><p id="EN-US_TASK_0000001130784126__p882402864214037"><a name="EN-US_TASK_0000001130784126__li271059393214037"></a><a name="li271059393214037"></a>Enable BFD for the interfaces on DeviceA and DeviceB.</p>
</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001130784126__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001130784126__steps10132325172748"><li id="EN-US_TASK_0000001130784126__step132523854214038"><span id="EN-US_TASK_0000001130784126__cmd387872239214038">Configure IPv4 addresses for interfaces on each device.</span><p><p id="EN-US_TASK_0000001130784126__p13451853104317"># Configure DeviceA.</p>
</p><p><pre class="screen" id="EN-US_TASK_0000001130784126__screen929412472422"><span class="keyword" id="EN-US_TASK_0000001130784126__keyword1999619179211">&lt;HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001130784126__b5996111718211">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword173112011412"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001130784126__keyword14483024162213">HUAWEI</span>] <strong id="EN-US_TASK_0000001130784126__b1099715174214">sysname DeviceA</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword37362410388">*</span><span class="keyword" id="EN-US_TASK_0000001130784126__keyword609583901214023">HUAWEI</span>]<strong id="EN-US_TASK_0000001130784126__b54165603214023"> commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword19963113431520"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b1899720174216">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword18879203811519"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784126__b16554354118">undo </strong><strong id="EN-US_TASK_0000001130784126__b6127183916412">portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword1286816126128">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784126__b477726134818">ip address 10.1.1.1 255.255.255.0</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword146000101613">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784126__b399751772116">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword1055518218162">*</span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b54965285412">interface </strong><strong id="EN-US_TASK_0000001130784126__b1792693713010"><span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword5778194201614">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b4496528114112">undo </strong><strong id="EN-US_TASK_0000001130784126__b204961828164115">portswitch</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword18153614163">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b749672884116">ip address 10.1.3.1 255.255.255.0</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword124410111614">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b11496828174110">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword461319484231">*</span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b18613124812236">commit</strong></pre>
<p id="EN-US_TASK_0000001130784126__p4193157133119">The configurations of DeviceB and DeviceC are similar to the configuration of DeviceA. For detailed configurations, see <a href="#EN-US_TASK_0000001130784126__postreq24192593172748">Configuration Scripts</a>.</p>
</p></li><li id="EN-US_TASK_0000001130784126__step179941428144514"><span id="EN-US_TASK_0000001130784126__cmd9994132813459">Configure basic IS-IS functions.</span><p><p id="EN-US_TASK_0000001130784126__p19158435194511"># Configure DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen16584153216551">[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword10645121155815"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b66561132115519">isis</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword753516207162">*</span>DeviceA-isis-1] <strong id="EN-US_TASK_0000001130784126__b196562032195510">is-level level-2</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword15959322181613">*</span>DeviceA-isis-1] <strong id="EN-US_TASK_0000001130784126__b66561832165510">network-entity 10.0000.0000.0001.00</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword68814241166">*</span>DeviceA-isis-1] <strong id="EN-US_TASK_0000001130784126__b20657173213558">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword9443428181618">*</span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b166576322559">interface <span>100ge</span> <span>1/0/1</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword78097309161">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784126__b965711327550">isis enable 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword46981132151617">*</span>DeviceA-<span>100GE</span><span>1/0/1</span>] <strong id="EN-US_TASK_0000001130784126__b16571332125511">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword66121353166">*</span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b11658532105512">interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword184131396165">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b1265813205510">isis enable 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword295834212165">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b065893215553">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword0455558132617">*</span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b194551558152617">commit</strong></pre>
</p><p><p id="EN-US_TASK_0000001130784126__p15994158174512">The configurations of DeviceB and DeviceC are similar to the configuration of DeviceA. For detailed configurations, see <a href="#EN-US_TASK_0000001130784126__postreq24192593172748">Configuration Scripts</a>.</p>
<p id="EN-US_TASK_0000001130784126__p1261429338214037"># Run the <a href="cmdqueryname=display+isis+peer"><b><span class="cmdname" id="EN-US_TASK_0000001130784126__cmdname41700787214037">display isis peer</span></b></a> command. The command output shows that an IS-IS neighbor relationship has been established between DeviceA and DeviceB, and between DeviceA and DeviceC. DeviceA is used as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen9861175265512">[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword18372714584"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b08891452175515">display isis peer</strong>
Peer information for ISIS(1)
----------------------------------------------------------------------------------
                                                                
System ID        Interface        Circuit ID          State HoldTime Type      PR
----------------------------------------------------------------------------------
0000.0000.0002  <span>100GE</span><span>1/0/2</span>            0000.0000.0002.01 Up   9s       L2       64
0000.0000.0003  <span>100GE</span><span>1/0/1</span>            0000.0000.0001.02 Up   21s      L2       64
Total Peer(s): 2</pre>
<p id="EN-US_TASK_0000001130784126__p224930136214037"># Devices have learned routes from each other. The following example uses the command output on Device A.</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen182555905519">[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword599253055818"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b7108195945518">display ip routing-table</strong>
<span class="keyword" id="EN-US_TASK_0000001130784126__keyword1010945917554">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table: _public_
         Destinations : 8        Routes : 9
Destination/Mask      Proto   Pre  Cost     Flags NextHop          Interface
        10.1.1.0/24    Direct  0    0           D  10.1.1.1        <span>100GE</span><span>1/0/1</span>
        10.1.1.1/32    Direct  0    0           D  127.0.0.1       InLoopBack0
        10.1.2.0/24    ISIS    15   20          D  10.1.1.2         <span>100GE</span><span>1/0/1</span>
        10.1.3.0/24    Direct  0    0           D  10.1.3.1         <span>100GE</span><span>1/0/2</span>
        10.1.3.1/32    Direct  0    0           D  127.0.0.1       InLoopBack0
        127.0.0.0/8    Direct  0    0           D  127.0.0.1       InLoopBack0
      127.0.0.1/32     Direct  0    0           D  127.0.0.1       InLoopBack0
      <strong id="EN-US_TASK_0000001130784126__b31106592555">172.16.1.0/24</strong> <strong id="EN-US_TASK_0000001130784126__b181101459185513"> ISIS</strong>   <strong id="EN-US_TASK_0000001130784126__b161102592551">15</strong>   <strong id="EN-US_TASK_0000001130784126__b211035915516">20</strong>          <strong id="EN-US_TASK_0000001130784126__b1711019591553">D</strong>  <strong id="EN-US_TASK_0000001130784126__b12111105935513">10.1.3.2</strong>        <strong id="EN-US_TASK_0000001130784126__b4950171311015"><span>100GE</span></strong><strong id="EN-US_TASK_0000001130784126__b169510138010"><span>1/0/2</span></strong></pre>
<p id="EN-US_TASK_0000001130784126__p1283844877214037">According to the preceding command output, the next hop address of the route to 172.16.1.0/24 is 10.1.3.2, and traffic is transmitted on the primary link DeviceA -&gt; DeviceB.</p>
</p></li><li id="EN-US_TASK_0000001130784126__step479117513465"><span id="EN-US_TASK_0000001130784126__cmd1979195113466">Configure an IS-IS cost for each interface on each device.</span><p><p id="EN-US_TASK_0000001130784126__p1225981990214037"># Configure DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen13599442564">[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword36661734135816"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b1622144185612">interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword36129357586"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b166224455617">isis cost 5</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword147834508169">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b7622642569">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword270794172711">*</span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b370719462715">commit</strong></pre>
<p id="EN-US_TASK_0000001130784126__p742917508475">The configuration of DeviceB is similar to the configuration of DeviceA. For detailed configurations, see <a href="#EN-US_TASK_0000001130784126__postreq24192593172748">Configuration Scripts</a>.</p>
</p></li><li id="EN-US_TASK_0000001130784126__step242916580472"><span id="EN-US_TASK_0000001130784126__cmd6429145854717">Enable BFD for IS-IS.</span><p><p id="EN-US_TASK_0000001130784126__p862501968214037"># Enable BFD for IS-IS on DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen14839171275615">[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword145621038115818"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b2870181265616">bfd</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword362615565167">*</span>DeviceA-bfd] <strong id="EN-US_TASK_0000001130784126__b487131218566">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword88681058201611">*</span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b78711212155615">isis</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword461616041711">*</span>DeviceA-isis-1] <strong id="EN-US_TASK_0000001130784126__b12871612195612">bfd all-interfaces enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword7952928176">*</span>DeviceA-isis-1] <strong id="EN-US_TASK_0000001130784126__b1287121255613">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword121881016272">*</span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b11218151013274">commit</strong></pre>
<p id="EN-US_TASK_0000001130784126__p97929134914">The configurations of DeviceB and DeviceC are similar to the configuration of DeviceA. For detailed configurations, see <a href="#EN-US_TASK_0000001130784126__postreq24192593172748">Configuration Scripts</a>.</p>
<p id="EN-US_TASK_0000001130784126__p1501982481214037"># Run the <a href="cmdqueryname=display+isis+bfd"><b><span class="cmdname" id="EN-US_TASK_0000001130784126__cmdname1514491901214037">display isis bfd</span></b></a> <strong><span id="EN-US_TASK_0000001130784126__cmdparmname1754222193214037">session</span></strong> <strong><span id="EN-US_TASK_0000001130784126__cmdparmname737537714214037">all</span></strong> command on DeviceA, DeviceB, or DeviceC. The command output shows that the BFD session is up. The following example uses the command output on DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen953423375617">[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword9751174135818"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b86032338567">display isis bfd session all</strong>
BFD session information for ISIS(1)                    
-----------------------------------------------------------------
Peer System ID : 0000.0000.0002        Interface : <span>100GE</span><span>1/0/2</span>
TX : 10            BFD State : up      Peer IP Address : 10.1.3.2
RX : 10            LocDis : 16385      Local IP Address: 10.1.3.1
Multiplier : 3     RemDis : 16388      Type : L2
Diag : No diagnostic information

Peer System ID : 0000.0000.0003        Interface : <span>100GE</span><span>1/0/1</span>
TX : 10            BFD State : up      Peer IP Address : 10.1.1.2
RX : 10            LocDis : 16386      Local IP Address: 10.1.1.1
Multiplier : 3     RemDis : 16387      Type : L2
Diag : No diagnostic information
Total BFD session(s): 2                       </pre>
<p id="EN-US_TASK_0000001130784126__p1278073780214037">According to the preceding command output, the BFD sessions between DeviceA and DeviceB and between DeviceA and DeviceC are up.</p>
</p></li><li id="EN-US_TASK_0000001130784126__step155006109506"><span id="EN-US_TASK_0000001130784126__cmd9500101019501">Configure BFD for interfaces.</span><p><p id="EN-US_TASK_0000001130784126__p2118142149214037"># Configure BFD on <span>100GE</span> <span>1/0/2</span> of DeviceA, set the minimum interval at which BFD packets are sent to 100 ms, the minimum interval at which BFD packets are received to 100 ms, and the local detection multiplier to 4.</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen115639436565">[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword4838154535819"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b8606104311565">interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword69713461585"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b11607114325613">isis bfd enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword565018103179">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b8607543125615">isis bfd min-tx-interval 100 min-rx-interval 100 detect-multiplier 4</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword2441813171713">*</span>DeviceA-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b186072431561">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword1822571616278">*</span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b5225121616271">commit</strong></pre>
<p id="EN-US_TASK_0000001130784126__p1318364569214037"># Configure BFD on <span>100GE</span> <span>1/0/2</span> of DeviceB, set the minimum interval at which BFD packets are sent to 100 ms, the minimum interval at which BFD packets are received to 100 ms, and the local detection multiplier to 4.</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen13347104825614">[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword665211499582"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001130784126__b9391148175613">interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword175562506582"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b83915485568">isis bfd enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword2039682217174">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b43911648145612">isis bfd min-tx-interval 100 min-rx-interval 100 detect-multiplier 4</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword2791024191710">*</span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b139210485565">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword2511519172717">*</span>DeviceB] <strong id="EN-US_TASK_0000001130784126__b85141932718">commit</strong></pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001130784126__example121226172748"><a name="EN-US_TASK_0000001130784126__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p id="EN-US_TASK_0000001130784126__p1541644035214037"># Run the <a href="cmdqueryname=display+isis+bfd"><b><span class="cmdname" id="EN-US_TASK_0000001130784126__cmdname1097694939214037">display isis bfd</span></b></a> <strong><span id="EN-US_TASK_0000001130784126__cmdparmname118009261214037">session</span></strong> <strong><span id="EN-US_TASK_0000001130784126__cmdparmname1460080078214037">all</span></strong> command on DeviceB. The command output shows that BFD parameters have taken effect.</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen6302182518510">[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword12214576585"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001130784126__b94911559563">display isis bfd session all</strong>
BFD session information for ISIS(1)                    
-----------------------------------------------------------------
Peer System ID : 0000.0000.0001        Interface : <span>100GE</span><span>1/0/2</span>
TX : 100           BFD State : up      Peer IP Address : 10.1.3.1
RX : 100           LocDis : 16385      Local IP Address: 10.1.3.2
Multiplier : 4     RemDis : 16385      Type : L2
Diag : No diagnostic information

Peer System ID : 0000.0000.0003        Interface : <span>100GE</span><span>1/0/1</span>
TX : 10            BFD State : up      Peer IP Address : 10.1.2.1
RX : 10            LocDis : 16385      Local IP Address: 10.1.2.2
Multiplier : 4     RemDis : 16385      Type : L2
Diag : No diagnostic information
Total BFD session (s):2                    </pre>
<p id="EN-US_TASK_0000001130784126__p11785326115212"># Run the <a href="cmdqueryname=shutdown"><b><span class="cmdname" id="EN-US_TASK_0000001130784126__cmdname987365915214037">shutdown</span></b></a> command on <span>100GE</span> <span>1/0/2</span> of DeviceB to simulate a failure of the primary link.</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen1966746575">[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword937462155918"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001130784126__b16711162812525">interface <span>100ge</span> <span>1/0/2</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword81701395917"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-<span>100GE</span><span>1/0/2</span>] <strong id="EN-US_TASK_0000001130784126__b17711162818525">shutdown</strong>
[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword18319191045912">*</span>DeviceB] <strong id="EN-US_TASK_0000001130784126__b14319141014599">commit</strong></pre>
<p id="EN-US_TASK_0000001130784126__p1239139978214037"># Check the IP routing table of DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen987231155717">[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword66621167595"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b19992141113579">display ip routing-table</strong>
<span class="keyword" id="EN-US_TASK_0000001130784126__keyword1099241110575">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table : _public_
         Destinations : 9        Routes : 9

Destination/Mask    Proto  Pre  Cost        Flags NextHop         Interface

        10.1.1.0/24  Direct 0    0             D  10.1.1.1        <span>100GE</span><span>1/0/1</span>
        10.1.1.1/32  Direct 0    0             D  127.0.0.1       <span>100GE</span><span>1/0/1</span>
      10.1.1.255/32  Direct 0    0             D  127.0.0.1       <span>100GE</span><span>1/0/1</span>
        10.1.2.0/24  ISIS  15   20             D  10.1.1.2        <span>100GE</span><span>1/0/1</span>
      127.0.0.0/8    Direct 0    0             D  127.0.0.1       InLoopBack0
      127.0.0.1/32   Direct 0    0             D  127.0.0.1       InLoopBack0
127.255.255.255/32   Direct 0    0             D  127.0.0.1       InLoopBack0
  <strong id="EN-US_TASK_0000001130784126__b1825295320525">172.16.1.0/24   ISIS  15   30           D  10.1.1.2      <span>100GE</span><span>1/0/1</span></strong>
255.255.255.255/32   Direct 0    0             D  127.0.0.1       InLoopBack0   </pre>
<p id="EN-US_TASK_0000001130784126__p1524916138214037">According to the preceding command output, the backup link DeviceA -&gt; DeviceC -&gt; DeviceB takes effect, and the next hop address of the route to 172.16.1.0/24 becomes 10.1.1.2.</p>
<p id="EN-US_TASK_0000001130784126__p582613150214037"># Run the <a href="cmdqueryname=display+isis+bfd"><b><span class="cmdname" id="EN-US_TASK_0000001130784126__cmdname231576794214037">display isis bfd</span></b></a> <strong><span id="EN-US_TASK_0000001130784126__cmdparmname92906236214037">session</span></strong> <strong><span id="EN-US_TASK_0000001130784126__cmdparmname830448666214037">all</span></strong> command on DeviceA. The command output shows that only the BFD session between DeviceA and DeviceC is up.</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen778013445532">[<span class="keyword" id="EN-US_TASK_0000001130784126__keyword6629132095914"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001130784126__b5405172414570">display isis bfd session all</strong>
BFD session information for ISIS(1)                    
-----------------------------------------------------------------
Peer System ID : 0000.0000.0003        Interface : <span>100GE</span><span>1/0/1</span>
TX : 10            BFD State : <strong id="EN-US_TASK_0000001130784126__b192110144539">up </strong>     Peer IP Address : 10.1.1.2
RX : 10            LocDis : 16385      Local IP Address: 10.1.1.1
Multiplier : 3     RemDis : 16388      Type : L2
Diag : No diagnostic information
Total BFD session (s):1                       </pre>
</div>
<div class="postreq"><a name="EN-US_TASK_0000001130784126__postreq24192593172748"></a><a name="postreq24192593172748"></a><a name="EN-US_TASK_0000001130784126__1.3.6"></a><a name="1.3.6"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul id="EN-US_TASK_0000001130784126__ul93742314211"><li id="EN-US_TASK_0000001130784126__li1522814685214037"><p id="EN-US_TASK_0000001130784126__p236305849214037"><a name="EN-US_TASK_0000001130784126__li1522814685214037"></a><a name="li1522814685214037"></a>DeviceA</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen1883003716579">#
sysname DeviceA
#
bfd
#
isis 1
 is-level level-2
 bfd all-interfaces enable
 network-entity 10.0000.0000.0001.00
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 10.1.1.1 255.255.255.0
 isis enable 1
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 10.1.3.1 255.255.255.0
 isis enable 1
 isis cost 5
 isis bfd enable
 isis bfd min-tx-interval 100 min-rx-interval 100 detect-multiplier 4
#
return</pre>
</li><li id="EN-US_TASK_0000001130784126__li1527384361214037"><p id="EN-US_TASK_0000001130784126__p52687952216"><a name="EN-US_TASK_0000001130784126__li1527384361214037"></a><a name="li1527384361214037"></a>DeviceB</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen17502482577">#
sysname DeviceB
#
bfd
#
isis 1
 is-level level-2
 bfd all-interfaces enable
 network-entity 10.0000.0000.0002.00
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 10.1.2.2 255.255.255.0
 isis enable 1
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 10.1.3.2 255.255.255.0
 isis enable 1
 isis cost 5
 isis bfd enable
 isis bfd min-tx-interval 100 min-rx-interval 100 detect-multiplier 4
#
interface <span>100GE</span><span>1/0/3</span>
 undo portswitch
 ip address 172.16.1.1 255.255.255.0
 isis enable 1
#
return</pre>
</li><li id="EN-US_TASK_0000001130784126__li602308353214037"><p id="EN-US_TASK_0000001130784126__p1906060560214037"><a name="EN-US_TASK_0000001130784126__li602308353214037"></a><a name="li602308353214037"></a>DeviceC</p>
<pre class="screen" id="EN-US_TASK_0000001130784126__screen2411185511577">#
sysname DeviceC
#
bfd
#
isis 1
 is-level level-2
 bfd all-interfaces enable
 network-entity 10.0000.0000.0003.00
#
interface <span>100GE</span><span>1/0/1</span>
 undo portswitch
 ip address 10.1.1.2 255.255.255.0
 isis enable 1
#
interface <span>100GE</span><span>1/0/2</span>
 undo portswitch
 ip address 10.1.2.1 255.255.255.0
 isis enable 1
#
return</pre>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="vrp_isis_ipv4_cfg_0057.html">Configuring Dynamic BFD for IS-IS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="vrp_isis_ipv4_cfg_0062.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>