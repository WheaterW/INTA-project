{
    "PageTitle": "peer public-as-only limited (BGP-VPN-Target address family view) (group)",
    "FuncDef": "The peer public-as-only limited command configures the AS-Path attribute in a BGP Update message to private AS numbers from the leftmost one to delete the local or a public AS number except the private AS number of a specified peer.\nThe undo peer public-as-only limited command restores the default setting. The peer public-as-only limited command configures the AS-Path attribute in a BGP Update message to private AS numbers from the leftmost one to delete the local or a public AS number except the private AS number of a specified peer. The undo peer public-as-only limited command restores the default setting. By default, the AS-Path attribute in a BGP Update message is allowed to carry private AS numbers.",
    "CLIs": [
        "peer <group-name> public-as-onlylimited [ replace ] [ include-peer-as ]",
        "undo peer <group-name> public-as-onlylimited [ replace ] [ include-peer-as ]"
    ],
    "ParentView": [
        "BGP-VPN-target address family view"
    ],
    "ParaDef": [
        {
            "Parameters": "<group-name>",
            "Info": "Specifies the name of a peer group.\nThe name is a string of 1 to 47 case-sensitive characters, with spaces not supported. When double quotation marks are used around the string, spaces are allowed in the string."
        },
        {
            "Parameters": "limited",
            "Info": "Deletes private AS numbers from the leftmost one to the local or a public AS number except the private AS number of a specified peer group.\n-"
        },
        {
            "Parameters": "replace",
            "Info": "Replaces private AS numbers in an AS_Path list with a local AS number:\nIf both limited and replace are specified, private AS numbers starting from the leftmost one in an AS_Path list, except the local or private AS number of a specified peer group, are replaced with the local AS number.\n-"
        },
        {
            "Parameters": "include-peer-as",
            "Info": "Deletes AS numbers:\nIf both limited and include-peer-as are specified, the AS numbers starting from the leftmost one in an AS_Path list, except the local and public AS numbers, are deleted.\nIf limited, replace, and include-peer-as are specified, private AS numbers starting from the leftmost one in an AS_Path list, except the local or private AS numbers, are replaced with the local AS number.\n-"
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[*HUAWEI] bgp 100",
            "[*HUAWEI-bgp] group test internal",
            "[*HUAWEI-bgp] ipv4-family vpn-target",
            "[*HUAWEI-bgp-af-vpn-target] peer test enable",
            "[*HUAWEI-bgp-af-vpn-target] peer test public-as-only limited"
        ]
    ],
    "ExtraInfo": "Generally, AS numbers range from 1 to 4294967295, including the public, private, and reserved AS numbers. If the private-4-byte-as enable command is not run, private AS numbers range from 64512 to 65534, and the AS number 65535 is reserved for special use. If the private-4-byte-as enable command is run, private AS numbers range from 64512 to 65534 and from 4200000000 to 4294967294, and the AS numbers 65535 and 4294967295 are reserved for special use.\nPublic AS numbers can be used over the Internet, whereas private AS numbers cannot be advertised to the Internet. If private AS numbers are advertised to the Internet, routing loops may occur. Therefore, private AS numbers are used only within a routing domain.\nThis command enables BGP to process the private and reserved AS numbers in the AS_Path attribute of BGP routes as required. Reserved AS numbers are processed the same as private AS numbers. The following uses private AS numbers as an example to illustrate the processing modes:\nIf the peer public-as-only command is run without any optional parameter specified and the AS_Path attribute of BGP routes contains only private AS numbers, BGP deletes these private AS numbers before advertising the routes. BGP does not delete private AS numbers in either of the following scenarios if the peer public-as-only command is run, without any parameter following public-as-only specified:\n\u00e2\u0080\u00a2\tThe AS_Path attribute of a route carries the AS number of the remote peer. In this case, deleting private AS numbers may lead to a routing loop.\n\u00e2\u0080\u00a2\tThe AS_Path attribute carries both public and private AS numbers, which indicates that the route has passed through the public network. In this case, deleting private AS numbers may lead to a traffic forwarding error.\nParameters that are used to delete or replace private AS numbers are described as follows:\n\u00e2\u0080\u00a2\tlimited: deletes private AS numbers from the leftmost one to the local or a public AS number except the private AS number of a specified peer group.\n\u00e2\u0080\u00a2\tlimited replace: replaces private AS numbers from the leftmost one to the local or a public AS number in the AS_Path attribute with the local AS number except the private AS number of a specified peer group.\n\u00e2\u0080\u00a2\tlimited include-peer-as: deletes private AS numbers from the leftmost one to the local or a public AS number. This parameter ensures that all private AS numbers of the local network are deleted.\n\u00e2\u0080\u00a2\tlimited replace include-peer-as: replaces private AS numbers from the leftmost one to the local or a public AS number in the AS_Path attribute with the local AS number.\nSelect one of the preceding parameters based on the network topology to prevent routing loops or forwarding errors."
}