{
    "PageTitle": "port vlan-stacking",
    "FuncDef": "The port vlan-stacking vlan command enables VLAN stacking on an interface. That is, it configures the interface to add a VLAN tag to each received single-tagged packet.\nThe port vlan-stacking untagged command configures a device to add double VLAN tags to an untagged packet.\nThe undo port vlan-stacking command restores the default configuration.\nThe undo port vlan-stacking untagged command cancels the configuration of adding double VLAN tags to an untagged packet. The port vlan-stacking vlan command enables VLAN stacking on an interface. That is, it configures the interface to add a VLAN tag to each received single-tagged packet. The port vlan-stacking untagged command configures a device to add double VLAN tags to an untagged packet. The undo port vlan-stacking command restores the default configuration. The undo port vlan-stacking untagged command cancels the configuration of adding double VLAN tags to an untagged packet. By default, VLAN stacking is not configured on interfaces. This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.",
    "CLIs": [
        "port vlan-stacking vlan <vlan-id1> [ to <vlan-id2> ] stack-vlan <vlan-id3>",
        "port vlan-stacking vlan <vlan-id1> [ to <vlan-id2> ] stack-vlan <vlan-id3> remark-8021p <8021p-value3>",
        "port vlan-stacking untagged stack-vlan <vlan-id3> stack-inner-vlan <stackInnerVid>",
        "undo port vlan-stacking vlan <vlan-id1> [ to <vlan-id2> ] [ stack-vlan <vlan-id3> ]",
        "undo port vlan-stacking untagged [ stack-vlan <vlan-id3> stack-inner-vlan <stackInnerVid> ]",
        "undo port vlan-stacking vlan <vlan-id1> [ to <vlan-id2> ] stack-vlan <vlan-id3> remark-8021p <8021p-value3>",
        "undo port vlan-stacking all"
    ],
    "ParentView": [
        "Layer 2 100GE interface view,Layer 2 10GE interface view,Layer 2 200GE interface view,25GE-L2 view,400GE-L2 view,Layer 2 50GE interface view,Layer 2 Eth-Trunk interface view,Layer 2 GE interface view,Interface group view"
    ],
    "ParaDef": [
        {
            "Parameters": "<vlan-id1>",
            "Info": "Indicates the start value of the inner VLAN range.\nThe value is an integer ranging from 1 to 4094."
        },
        {
            "Parameters": "<vlan-id2>",
            "Info": "Indicates the end value of the inner VLAN range.\nThe value is an integer ranging from 1 to 4094."
        },
        {
            "Parameters": "stack-vlan <vlan-id3>",
            "Info": "Specifies the VLAN ID in the outer tag to be added to a packet.\nThe value is an integer ranging from 1 to 4094."
        },
        {
            "Parameters": "remark-8021p <8021p-value3>",
            "Info": "Specifies the VLAN priority.\nThe value is an integer ranging from 0 to 7."
        },
        {
            "Parameters": "untagged",
            "Info": "Specifies the untagged packet type.\n-"
        },
        {
            "Parameters": "stack-inner-vlan <stackInnerVid>",
            "Info": "Specifies the inner VLAN tag added to an untagged frame.\nThe value is an integer ranging from 1 to 4094."
        },
        {
            "Parameters": "all",
            "Info": "Deletes all non-untagged VLAN stacking configurations on the interface.\n-"
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] vlan 100",
            "[*HUAWEI] q",
            "[*HUAWEI] interface 100GE 1/0/1",
            "[*HUAWEI-100GE1/0/1] portswitch",
            "[*HUAWEI-100GE1/0/1] port link-type hybrid",
            "[*HUAWEI-100GE1/0/1] port hybrid untagged vlan 100",
            "[*HUAWEI-100GE1/0/1] port vlan-stacking untagged stack-vlan 100 stack-inner-vlan 200"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] vlan 20",
            "[*HUAWEI] q",
            "[*HUAWEI] interface 100GE 1/0/1",
            "[*HUAWEI-100GE1/0/1] portswitch",
            "[*HUAWEI-100GE1/0/1] port link-type trunk",
            "[*HUAWEI-100GE1/0/1] port trunk allow-pass vlan 20",
            "[*HUAWEI-100GE1/0/1] port vlan-stacking vlan 40 to 50 stack-vlan 20"
        ]
    ],
    "ExtraInfo": "VLAN stacking, also known as selective QinQ, is a Layer 2 technology that adds outer VLAN tags to packets based on their VLAN IDs.\nOn access networks of carriers, users must be differentiated based on their applications and access locations or devices.  After VLAN stacking is configured on an interface, the interface adds different outer VLAN tags to packets based on their VLAN IDs to differentiate users.\nA VLAN stacking interface has the following features:"
}