
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer public-as-only limited (BGP-VPN-Target address family view) (group)">
<meta name="DC.subject" content="peer public-as-only limited (BGP-VPN-Target address family view) (group)">
<meta name="keywords" content="peer public-as-only limited (BGP-VPN-Target address family view) (group)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/GROUP-VPNTARGET-PUBLIC-AS-ONLY-IMPORT(BGPVPNTARGET).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-VRF-GROUP-IPV4-REFCLIENT(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPVPNTARGET">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942844653">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer public-as-only limited (BGP-VPN-Target address family view) (group)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942844653"></a><a name="EN-US_CLIREF_0000001942844653"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer public-as-only limited (BGP-VPN-Target address family view) (group)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942844653__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer public-as-only limited</span></b> command configures the AS-Path attribute in a BGP Update message to private AS numbers from the leftmost one to delete the local or a public AS number except the private AS number of a specified peer.</p>
<p>The <b><span class="cmdname">undo peer public-as-only limited</span></b> command restores the default setting.</p>
</p>
<p>By default, the AS-Path attribute in a BGP Update message is allowed to carry private AS numbers.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942844653__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">group-name</span></i> <strong><span>public-as-only</span></strong> <strong><span>limited</span></strong> [ <strong><span>replace</span></strong> ] [ <strong><span>include-peer-as</span></strong> ]</p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">group-name</span></i> <strong><span>public-as-only</span></strong> <strong><span>limited</span></strong> [ <strong><span>replace</span></strong> ] [ <strong><span>include-peer-as</span></strong> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942844653__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">group-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a peer group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The name is a string of 1 to 47 case-sensitive characters, with spaces not supported. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>limited</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Deletes private AS numbers from the leftmost one to the local or a public AS number except the private AS number of a specified peer group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>replace</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Replaces private AS numbers in an AS_Path list with a local AS number:</p>
<p>If both limited and replace are specified, private AS numbers starting from the leftmost one in an AS_Path list, except the local or private AS number of a specified peer group, are replaced with the local AS number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>include-peer-as</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Deletes AS numbers:</p>
<p>If both limited and include-peer-as are specified, the AS numbers starting from the leftmost one in an AS_Path list, except the local and public AS numbers, are deleted.</p>
<p>If limited, replace, and include-peer-as are specified, private AS numbers starting from the leftmost one in an AS_Path list, except the local or private AS numbers, are replaced with the local AS number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942844653__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-VPN-target address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942844653__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942844653__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>Generally, AS numbers range from 1 to 4294967295, including the public, private, and reserved AS numbers. If the <b><span class="cmdname">private-4-byte-as enable</span></b> command is not run, private AS numbers range from 64512 to 65534, and the AS number 65535 is reserved for special use. If the <b><span class="cmdname">private-4-byte-as enable</span></b> command is run, private AS numbers range from 64512 to 65534 and from 4200000000 to 4294967294, and the AS numbers 65535 and 4294967295 are reserved for special use.<p></p>
<span>Public AS numbers can be used over the Internet</span>, whereas private AS numbers cannot be advertised to the Internet. If private AS numbers are advertised to the Internet, routing loops may occur. Therefore, private AS numbers are used only within a routing domain.<p></p>
<span>This command enables BGP to process the private and</span> reserved AS numbers in the AS_Path attribute of BGP routes as required. Reserved AS numbers are processed the same as private AS numbers. The following uses private AS numbers as an example to illustrate the processing modes:<p></p>
<span>If the</span> <b><span class="cmdname">peer public-as-only</span></b> command is run without any optional parameter specified and the AS_Path attribute of BGP routes contains only private AS numbers, BGP deletes these private AS numbers before advertising the routes. BGP does not delete private AS numbers in either of the following scenarios if the <b><span class="cmdname">peer public-as-only</span></b> command is run, without any parameter following public-as-only specified:<p></p>
â¢	The AS_Path attribute of a route carries the AS number of the remote peer. In this case, deleting private AS numbers may lead to a routing loop.<p></p>
â¢	The AS_Path attribute carries both public and private AS numbers, which indicates that the route has passed through the public network. In this case, deleting private AS numbers may lead to a traffic forwarding error.<p></p>
<span>Parameters that are used to delete or replace private</span> AS numbers are described as follows:<p></p>
â¢	limited: deletes private AS numbers from the leftmost one to the local or a public AS number except the private AS number of a specified peer group.<p></p>
â¢	limited replace: replaces private AS numbers from the leftmost one to the local or a public AS number in the AS_Path attribute with the local AS number except the private AS number of a specified peer group.<p></p>
â¢	limited include-peer-as: deletes private AS numbers from the leftmost one to the local or a public AS number. This parameter ensures that all private AS numbers of the local network are deleted.<p></p>
â¢	limited replace include-peer-as: replaces private AS numbers from the leftmost one to the local or a public AS number in the AS_Path attribute with the local AS number.<p></p>
<span>Select one of the preceding parameters based on the</span> network topology to prevent routing loops or forwarding errors.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<p><p>If the <b><span class="cmdname">peer public-as-only</span></b> command is run for a peer group, the peers of the peer group inherit the configuration.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942844653__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable a device to delete private AS numbers from the AS_Path attribute, starting from the leftmost one and stopping at the local or a public AS number (except the private AS number of a specified peer group), when the device sends BGP Update messages to the peer group.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>group test internal</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv4-family vpn-target</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-vpn-target] <strong>peer test enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-vpn-target] <strong>peer test public-as-only limited</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/GROUP-VPNTARGET-PUBLIC-AS-ONLY-IMPORT(BGPVPNTARGET).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BGP-MULI-VRF-GROUP-IPV4-REFCLIENT(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>