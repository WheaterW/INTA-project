
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="import-route (OSPF view)">
<meta name="DC.subject" content="import-route (OSPF view)">
<meta name="keywords" content="import-route (OSPF view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PUBLIC-IMPORT-ROUTE(OSPFCOMMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IMPORT-ROUTE-LIMIT(OSPFCOMMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_OSPFCOMMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907603260">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>import-route (OSPF view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907603260"></a><a name="EN-US_CLIREF_0000001907603260"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">import-route (OSPF view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907603260__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">import-route</span></b> command imports routes learned by other protocols.</p>
<p>The <b><span class="cmdname">undo import-route</span></b> command cancels the configuration.</p>
</p>
<p>By default, routes learned by other protocols are not imported.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907603260__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p><b><span class="cmdname">import-route </span></b>{ <strong><span>direct</span></strong> | <strong><span>static</span></strong> | <strong><span>bgp</span></strong> [ <strong><span>permit-ibgp</span></strong> ] } [ { <strong><span>inherit-cost</span></strong> | <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> } | { <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> } | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>type</span></strong> <i><span class="varname">type</span></i> ] <sup>*</sup></p>



<p><b><span class="cmdname">import-route </span></b>{ <strong><span>ospf</span></strong> | <strong><span>isis</span></strong> | <strong><span>rip</span></strong> } [ <i><span class="varname">process-id-rip</span></i> ] [ { <strong><span>inherit-cost</span></strong> | <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> } | { <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> } | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>type</span></strong> <i><span class="varname">type</span></i> ] <sup>*</sup></p>





<p><b><span class="cmdname">undo import-route </span></b>{ <strong><span>direct</span></strong> | <strong><span>static</span></strong> | <strong><span>bgp</span></strong> }</p>


<p><b><span class="cmdname">undo import-route </span></b>{ <strong><span>ospf</span></strong> | <strong><span>isis</span></strong> | <strong><span>rip</span></strong> } [ <i><span class="varname">process-id-rip</span></i> ]</p>




</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907603260__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>direct</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports direct routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>static</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports static routes.<p>After the parameter is specified, only active static routes can be imported.</p>
</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>bgp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports BGP routes.</p>
<p>For an OSPF process that is not bound to a VPN instance or is bound to a VPN instance but the vpn-instance-capability simple command is run, the parameter imports only EBGP routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>permit-ibgp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports IBGP routes.<p>NOTICE:</p>
</p>
<p>For an OSPF process that is not bound to a VPN instance or is bound to a VPN instance but the vpn-instance-capability simple command is run, importing IBGP routes may cause routing loops. Therefore, exercise caution when using this parameter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>inherit-cost</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Retains the original costs of the imported routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>cost</span></strong> <i><span class="varname">cost</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a route cost.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 16777214. The default value is 1.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of the route-policy.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 200 case-sensitive characters without spaces. The character string can contain spaces if it is enclosed with double quotation marks (").</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>tag</span></strong> <i><span class="varname">tag</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the tag of the external LSA.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 4294967295. The default value is 1.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>type</span></strong> <i><span class="varname">type</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the type of the external routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is 1 or 2.</p>
<ul><li>1: Type 1 external route</li><li>2: Type 2 external route</li></ul>
<p>The default value is 2.</p>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ospf</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports OSPF routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>isis</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports IS-IS routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>rip</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports RIP routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">process-id-rip</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the process ID of the protocol whose routes are imported.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4294967295. The default value is 1.</p>
</td>
</tr>


</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907603260__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>OSPF view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907603260__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907603260__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>Importing the routes discovered by other routing protocols can enrich OSPF routing information.<p></p>
<span>OSPF routes are classified into the following types</span> in the descending order of priorities:</p>

<ul><li>Intra-area routes: refer to the routes in an area within an AS.</li><li>Inter-area routes: refer to the routes between areas of the same AS. Intra-area routes and area external routes are internal routes of an AS.</li><li>Type 1 external routes: When the cost of external routes is almost the same as that of AS internal routes and can be compared with the cost of OSPF routes, these external routes have a high reliability and can be configured as Type 1 external routes.</li><li>Type 2 external routes: When the cost of the routes from an ASBR to the destination outside an AS is greater than the cost of the internal routes to the ASBR, these external routes have a low reliability and can be configured as Type 2 external routes.</li></ul>
</div>
<p><strong>Prerequisites</strong></p>
<p>A route-policy has been created using the <b><span class="cmdname">route-policy</span></b> command if you want to import external routes using the route-policy.</p>
<p><strong>Implementation Procedure</strong></p>
<p>The costs of a Type 1 external route and a Type 2 external route are as follows:</p>

<ul><li>The cost of a Type 1 external route equals the cost for the OSPF device to reach an ASBR plus the cost of the route from the ASBR to the destination.</li><li>The cost of a Type 2 external route equals the cost of the route from an ASBR to the destination.</li></ul>
<p><strong>Configuration Impact</strong></p>
<p>OSPF does not have a good mechanism to prevent loops of imported external routes. Therefore, exercise caution when configuring OSPF to import external routes to prevent loops caused by manual configurations. You are advised to specify a tag, route-filter, or route-policy when importing routes and configure the policy to inherit the cost mode.<p></p>
<span>If the cost parameter is not specified</span>, the default cost value is used.<p></p>
<span>To inherit the cost</span>, you need to configure the cost inheritance mode in the policy, use the default cost inherit-metric mode, or specify the inherit-cost parameter.<p></p>
<span>After a policy for importing routes is configured</span> using the route-filter or route-policy parameter in the command, the OSPF process can import only the routes that meet the specified conditions. This prevents the device from passively importing unnecessary routes. If no policy is specified for importing routes, a large number of unexpected routes may be imported. As a result, the number of routes exceeds the upper limit or the memory is overloaded.<p></p>
<span>Running the</span> <b><span class="cmdname">import-route bgp</span></b> command may import a large number of routes. Therefore, you are advised to run the <b><span class="cmdname">import-route limit</span></b> command together with the <b><span class="cmdname">import-route bgp</span></b> command.</p>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>You can run the default (OSPF) command to set default parameters for an OSPF process on a public network or an OSPF process on a private network for which the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is run. The default parameters include the cost, type (Type 1 or Type 2), tag, and number of routes imported by OSPF.</li><li>The import-route (OSPF) command cannot import the default route of an external route. To advertise the default route of an external route that is learned when OSPF updates the routing table in a common OSPF area, run the default-route-advertise (OSPF) command.</li><li>Exercise caution when configuring OSPF to import external routes to prevent loops caused by manual configurations. You are advised to specify a tag or route-policy when importing routes and configure the policy to inherit the cost mode.</li><li>If an OSPF process is not bound to any VPN instance or is bound to a VPN instance but the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is run, only EBGP routes are imported after the <b><span class="cmdname">import-route bgp</span></b> command is run, and IBGP routes are also imported after the <b><span class="cmdname">import-route bgp permit-ibgp</span></b> command is run. In this case, routing loops may occur. You can run the preference (OSPF) and preference (BGP) commands to specify the preference values of OSPF and BGP routes to prevent loops. To import IBGP routes, run the <b><span class="cmdname">import-route bgp permit-ibgp</span></b> command, and change the preference values of OSPF ASE routes to be larger than those of IBGP routes to ensure that the active routes are IBGP routes.</li><li>If an OSPF process is bound to a VPN instance and the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is not run for the OSPF process, running the <b><span class="cmdname">import-route bgp</span></b> command imports BGP routes, including EBGP and IBGP routes. Whether the <b><span class="cmdname">import-route bgp permit-ibgp</span></b> command is run does not affect the imported routes.</li><li>If tag is not specified, the default tag value (specified using the <b><span class="cmdname">default tag</span></b> command) is used for the process that is not bound to any VPN instance or the process that is bound to a VPN instance but has the <b><span class="cmdname">vpn-instance-capability simple</span></b> command configured. This cannot prevent loops caused by manual configurations.</li><li>If the cost parameter is not specified, the default cost value (specified by the <b><span class="cmdname">default cost</span></b> command) is used. To inherit the cost, you need to configure the cost inheritance mode in the policy, use the default cost inherit-metric mode, or specify the inherit-cost parameter.</li><li>For details about the rules for generating the tag values carried in the routes imported using the import-route (OSPF) command, see the usage scenario description of the <b><span class="cmdname">route-tag</span></b> command.</li><li>An OSPF process bound to a VPN instance can import only the routes of the same VPN instance.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907603260__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Import Type 2 OSPF routes, with tag 33 and cost 50.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospf 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospf-100] <strong>import-route isis 1 type 2 tag 33 cost 50</strong>
</pre>
</div>


</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">OSPF Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PUBLIC-IMPORT-ROUTE(OSPFCOMMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/IMPORT-ROUTE-LIMIT(OSPFCOMMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>