
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="stp bpdu-filter">
<meta name="DC.subject" content="stp bpdu-filter">
<meta name="keywords" content="stp bpdu-filter">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/STPBPDUVLAN(L2PTOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/STPBPDUFILTERDEFAULT(MSTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_MSTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942841181">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>stp bpdu-filter</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942841181"></a><a name="EN-US_CLIREF_0000001942841181"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">stp bpdu-filter</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942841181__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">stp bpdu-filter enable</span></b> command specifies a port as a bridge protocol data unit (BPDU)-filter port.</p>
<p>The <b><span class="cmdname">stp bpdu-filter disable</span></b> command specifies a port as a non-BPDU-filter port.</p>
<p>The <b><span class="cmdname">undo stp bpdu-filter</span></b> command restores the default setting.</p>
</p>
<p>By default, ports are non-BPDU-filter ports.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942841181__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">stp bpdu-filter </span></b>{ <strong><span>enable</span></strong> | <strong><span>disable</span></strong> }</p>

<p><b><span class="cmdname">undo stp bpdu-filter</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942841181__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>enable</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a port as a bridge protocol data unit (BPDU)-filter port.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>disable</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a port as a non-BPDU-filter port.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942841181__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Layer 2 100GE interface view,</span><span>Layer 2 10GE interface view,</span><span>Layer 2 200GE interface view,</span><span>25GE-L2 view,</span><span>400GE-L2 view,</span><span>Layer 2 50GE interface view,</span><span>Layer 2 Eth-Trunk interface view,</span><span>Layer 2 GE interface view,</span><span>Interface group view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942841181__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942841181__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>On a network running STP, if a port is configured as an edge port using the <b><span class="cmdname">stp edged-port enable</span></b> command, the port will not participate in the spanning tree calculation. This speeds up network convergence and improves network stability. However, this port may send BPDUs to other networks, causing network flapping.<p></p>
<span>To prevent this problem</span>, run the <b><span class="cmdname">stp bpdu-filter enable</span></b> command on the edge port. The port becomes a BPDU-filter port and will not process BPDUs.<p></p>
<span>Running the</span> <b><span class="cmdname">stp bpdu-filter enable</span></b> command in the interface view configures only the current port as a BPDU-filter port. If multiple BPDU-filter ports are required on a device, run the <b><span class="cmdname">stp bpdu-filter default</span></b> command in the system view to configure all the ports as BPDU-filter ports, and then run the <b><span class="cmdname">stp bpdu-filter disable</span></b> command in the view of the interfaces that need to participate in spanning tree calculation. If a port has been configured as a non-BPDU filter port using the <b><span class="cmdname">stp bpdu-filter disable</span></b> command, it remains a non-BPDU filter port, even if the <b><span class="cmdname">stp bpdu-filter default</span></b> command is run.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>After the <b><span class="cmdname">stp bpdu-filter disable</span></b> command is run on a port, the port becomes a non-BPDU-filter port. The port remains a non-BPDU-filter port even if the <b><span class="cmdname">stp bpdu-filter default enable</span></b> command is run in the system view. After the <b><span class="cmdname">undo stp bpdu-filter</span></b> command is run on the port, the port restores to the default setting.<p></p>
<span>A BPDU-filter port cannot process and send BPDUs</span>. Consequently, it cannot negotiate the STP status with the directly connected port on the remote device. Therefore, exercise caution when using the <b><span class="cmdname">stp bpdu-filter enable</span></b> command. Running the <b><span class="cmdname">stp bpdu-filter enable</span></b> command only on edge ports is recommended.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942841181__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">


<div class="p"># Configure <span>100GE</span><span>1/0/2</span> on a network edge device as a BPDU-filter port.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/2</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/2</span>] <strong>portswitch</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/2</span>] <strong>stp bpdu-filter enable</strong>
</pre>
</div>

<div class="p"># Configure <span>100GE</span><span>1/0/1</span> on a network edge device as a non-BPDU-filter port.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>portswitch</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>stp bpdu-filter disable</strong>
</pre>
</div>




</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">STP/RSTP/MSTP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/STPBPDUVLAN(L2PTOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/STPBPDUFILTERDEFAULT(MSTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>