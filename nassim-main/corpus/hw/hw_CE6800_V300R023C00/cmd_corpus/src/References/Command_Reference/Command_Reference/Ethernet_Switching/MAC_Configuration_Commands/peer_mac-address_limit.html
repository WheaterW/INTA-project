
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer mac-address limit">
<meta name="DC.subject" content="peer mac-address limit">
<meta name="keywords" content="peer mac-address limit">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_MAC_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SETMACADR(MACOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PORTBRIDGEENABLE(VLANOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_MACOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942840901">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer mac-address limit</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942840901"></a><a name="EN-US_CLIREF_0000001942840901"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer mac-address limit</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942840901__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer mac-address limit</span></b> command configures a MAC address learning limit rule to control the maximum number of MAC addresses that can be learned from a remote VTEP of a static VXLAN tunnel.</p>
<p>The <b><span class="cmdname">undo peer mac-address limit</span></b> command cancels the configuration.</p>
</p>
<p>By default, no MAC address learning limit rule is configured for a remote VTEP of a static VXLAN tunnel.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942840901__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">ip-address</span></i> <strong><span>mac-address</span></strong> <strong><span>limit</span></strong> { <strong><span>maximum</span></strong> <i><span class="varname">max</span></i> | <strong><span>action</span></strong> { <strong><span>discard</span></strong> | <strong><span>forward</span></strong> } | <strong><span>alarm</span></strong> { <strong><span>enable</span></strong> | <strong><span>disable</span></strong> } } <sup>*</sup></p>

<p><b><span class="cmdname">source </span></b><i><span class="varname">sourceIP</span></i> <strong><span>peer</span></strong> <i><span class="varname">ip-address</span></i> <strong><span>mac-address</span></strong> <strong><span>limit</span></strong> { <strong><span>maximum</span></strong> <i><span class="varname">max</span></i> | <strong><span>action</span></strong> { <strong><span>discard</span></strong> | <strong><span>forward</span></strong> } | <strong><span>alarm</span></strong> { <strong><span>enable</span></strong> | <strong><span>disable</span></strong> } } <sup>*</sup></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">ip-address</span></i> <strong><span>mac-address</span></strong> <strong><span>limit</span></strong> [ <strong><span>maximum</span></strong> <i><span class="varname">max</span></i> | <strong><span>action</span></strong> { <strong><span>discard</span></strong> | <strong><span>forward</span></strong> } | <strong><span>alarm</span></strong> { <strong><span>enable</span></strong> | <strong><span>disable</span></strong> } ] <sup>*</sup></p>

<p><b><span class="cmdname">undo source </span></b><i><span class="varname">sourceIP</span></i> <strong><span>peer</span></strong> <i><span class="varname">ip-address</span></i> <strong><span>mac-address</span></strong> <strong><span>limit</span></strong> [ <strong><span>maximum</span></strong> <i><span class="varname">max</span></i> | <strong><span>action</span></strong> { <strong><span>discard</span></strong> | <strong><span>forward</span></strong> } | <strong><span>alarm</span></strong> { <strong><span>enable</span></strong> | <strong><span>disable</span></strong> } ] <sup>*</sup></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">ip-address</span></i> <strong><span>mac-address</span></strong> <strong><span>limit</span></strong> <strong><span>all</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942840901__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ip-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IP address of a remote VTEP.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>maximum</span></strong> <i><span class="varname">max</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum number of MAC address entries that can be learned.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 32767.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>action</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an action to be taken when the number of MAC address entries in the MAC address table reaches the limit.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>discard</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the packet with the source MAC address not contained in the MAC address table is discarded.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>forward</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>The packet with the source MAC address not contained in the MAC address table is forwarded but its MAC address is not recorded.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>alarm</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies whether an alarm is generated when the number of the MAC address entries in the MAC address table reaches the limit.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>enable</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the system generates an alarm when the number of MAC address entries reaches the limit.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>disable</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the system does not send an alarm when the number of MAC address entries reaches the limit.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>source</span></strong> <i><span class="varname">sourceIP</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the source IP address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>all</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the limit on all MAC addresses.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942840901__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>NVE interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942840901__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942840901__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>A MAC address table has limited capacity. When the number of dynamically learned and stored MAC addresses reaches the upper limit of the MAC address table, a device fails to learn source MAC addresses from subsequent incoming packets. Attackers may use this vulnerability of the MAC address table to attack a device.<p></p>
<span>To protect the device against such attacks and control</span> the access user quantity, run the peer mac-address limit command to limit the maximum number of MAC addresses that can be learned from a specified remote VTEP of a static VXLAN tunnel. When the maximum number of MAC addresses learned from the specified remote VTEP is reached, the device can discard subsequent packets and report an alarm as configured.</p>
<p><strong>Prerequisites</strong></p>
<p>The <b><span class="cmdname">vni head-end peer-list</span></b> command has been run in the NVE interface view to set an IP address for the target remote VTEP of a static VXLAN tunnel.<p></p>
<span>The</span> <b><span class="cmdname">reset mac-address</span></b> command has been run to clear existing MAC address entries, if present. If the existing MAC address entries are not cleared, MAC addresses that have been learned before the peer mac-address limit command is run are also counted into the current number of learned MAC addresses. As a result, the configured MAC address learning limit rule fails to function as expected.</p>
<p><strong>Configuration Impact</strong></p>
<p>After the peer mac-address limit command is run, the device cannot identify trusted MAC addresses. If a malicious user attacks an enterprise or a home user by changing MAC addresses, only the enterprise or home network is affected, but other networks are not.</p>
<p><strong>Precautions</strong></p>
<p><p>After the <b><span class="cmdname">vtep-src ip-address</span></b> command is run (namely, when the source VTEP address of a VXLAN tunnel is configured in a BD instance), run the source peer mac-address limit { maximum | action { discard | forward } | alarm { enable | disable } } command to configure the maximum number of MAC addresses that can be learned from a remote VTEP.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942840901__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Allow NVE1 to learn a maximum of 1000 MAC addresses from the remote VTEP 2.2.2.2.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface nve 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Nve1] <strong>vni 1 head-end peer-list 2.2.2.2</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Nve1] <strong>peer 2.2.2.2 mac-address limit maximum 1000</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_MAC_Configuration_Commands_title.html">MAC Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/SETMACADR(MACOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PORTBRIDGEENABLE(VLANOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>