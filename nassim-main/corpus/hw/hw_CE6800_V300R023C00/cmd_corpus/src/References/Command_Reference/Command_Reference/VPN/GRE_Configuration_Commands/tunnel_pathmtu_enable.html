
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="tunnel pathmtu enable">
<meta name="DC.subject" content="tunnel pathmtu enable">
<meta name="keywords" content="tunnel pathmtu enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_GRE_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/GRESTATENABLE(GREOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/TUNNEL_PIPE_DSCP.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="GRE">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="GRE">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="GRE">
<meta name="featuretype" content="VPN">
<meta name="featuretype" content="VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Creator" content="SUBSYS_ID_GREOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942846021">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>tunnel pathmtu enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942846021"></a><a name="EN-US_CLIREF_0000001942846021"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">tunnel pathmtu enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942846021__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">tunnel pathmtu enable</span></b> command enables path MTU auto-discovery on a tunnel.</p>
<p>The <b><span class="cmdname">undo tunnel pathmtu enable</span></b> command disables path MTU auto-discovery on a tunnel.</p>
</p>
<p>By default, path MTU auto-discovery is disabled for a tunnel.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942846021__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">tunnel pathmtu enable</span></b></p>

<p><b><span class="cmdname">undo tunnel pathmtu enable</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942846021__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942846021__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Tunnel interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942846021__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942846021__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>If a GRE tunnel is set up between two BGP nodes on which the <b><span class="cmdname">peer path-mtu auto-discovery</span></b> command has been run, path MTU auto-discovery can be enabled on the tunnel interface. This prevents TCP packets that contain BGP data from being fragmented multiple times during transmission, improving efficiency of BGP data transmission.</p>
<p><strong>Prerequisites</strong></p>
<p>The <b><span class="cmdname">tunnel-protocol gre</span></b> command has been configured in the tunnel interface view.</p>
<p><strong>Precautions</strong></p>
<div class="p"><p>The tunnel pathmtu enable and <b><span class="cmdname">mtu</span></b> commands cannot be run on the same tunnel interface. If the <b><span class="cmdname">mtu</span></b> command has been run on a tunnel interface, the <b><span class="cmdname">tunnel pathmtu enable</span></b> command cannot be executed on the interface.</p>

<ul><li>In a scenario where path MTU (PMTU) learning is enabled for an IPv4 GRE tunnel and the smallest IPv4 MTU of the tunnel is less than 1312 bytes (1280+32), the IPv6 MTU learned by the IPv4 GRE interface is less than 1280 bytes. If the ingress sends an IPv6 packet longer than the learned IPv6 MTU, the IPv6 packet is dropped. To address this problem, perform either of the following operations:</li><li>Disable PMTU learning for the IPv4 GRE tunnel.</li><li>If the IPv4 GRE tunnel must have PMTU learning enabled and must carry IPv6 packets, ensure that the tunnel's transit nodes each have an IPv4 MTU no less than 1312 bytes.</li><li>PMTU learning is always enabled for IPv6 GRE tunnels. In a scenario where the smallest IPv6 MTU of an IPv6 GRE tunnel is less than 1332 bytes (1280+52), the MTU learned by the IPv6 GRE interface is less than 1280 bytes. If the ingress sends an IPv6 packet longer than the learned IPv6 MTU, the IPv6 packet is dropped. To address this problem, ensure that the tunnel's transit nodes each have an IPv6 MTU no less than 1332 bytes.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942846021__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable path MTU auto-discovery on interface Tunnel 10.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface Tunnel 10</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Tunnel10] <strong>tunnel-protocol gre</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Tunnel10] <strong>tunnel pathmtu enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_GRE_Configuration_Commands_title.html">GRE Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/GRESTATENABLE(GREOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/TUNNEL_PIPE_DSCP.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>