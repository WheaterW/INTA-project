
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ptp clock-source">
<meta name="DC.subject" content="ptp clock-source">
<meta name="keywords" content="ptp clock-source">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-1588v2(PTP)_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PTP_ASYMMETRY-CORRECTION.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PTP_CLOCK-STEP.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="1588v2 (PTP)">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="1588v2 (PTP)">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="1588v2 (PTP)">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Creator" content="SUBSYS_ID_CLKSYNC">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907760748">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ptp clock-source</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907760748"></a><a name="EN-US_CLIREF_0000001907760748"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">ptp clock-source</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907760748__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ptp clock-source</span></b> command sets clock source parameters.</p>
<p>The <b><span class="cmdname">undo ptp clock-source</span></b> command restores default clock source parameters.</p>
</p>
<p>For details about the default parameter values of each attribute, see the parameter description.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H-48S6CQ, CE6881H-48S6CQ-K, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907760748__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">ptp clock-source local </span></b>{ <strong><span>time-source</span></strong> <i><span class="varname">time-source-value</span></i> | <strong><span>clock-accuracy</span></strong> <i><span class="varname">clock-accuracy-value</span></i> | <strong><span>clock-class</span></strong> <i><span class="varname">clock-class-value</span></i> | <strong><span>priority1</span></strong> <i><span class="varname">priority1-value</span></i> | <strong><span>priority2</span></strong> <i><span class="varname">priority2-value</span></i> }</p>

<p><b><span class="cmdname">undo ptp clock-source local </span></b>{ <strong><span>time-source</span></strong> | <strong><span>clock-accuracy</span></strong> | <strong><span>clock-class</span></strong> | <strong><span>priority1</span></strong> | <strong><span>priority2</span></strong> }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907760748__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>time-source</span></strong> <i><span class="varname">time-source-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the value of a time source attribute. This parameter is configured only for the grandmaster clock.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is an integer ranging from 1 to 8. The default value for local is 8. The values supported (mapping between time-source-value values and time-source attributes) are as follows:</p>
<ul><li>1 ATOMIC_CLOCK</li><li>2 GPS</li><li>3 TERRESTRIAL_RADIO</li><li>4 PTP</li><li>5 NTP</li><li>6 HAND_SET</li><li>7 OTHER</li><li>8 INTERNAL_OSCILLATOR</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>clock-accuracy</span></strong> <i><span class="varname">clock-accuracy-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the precision of the clock source.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is a 2-digit hexadecimal number. The default value for local is 0x31. In 1588v2 mode, the values supported (mapping between clock-accuracy-value values and clock-accuracy attributes) are as follows:</p>
<ul><li>20 The time is accurate to within 25 ns.</li><li>21 The time is accurate to within 100 ns.</li><li>22 The time is accurate to within 250 ns.</li><li>23 The time is accurate to within 1 Î¼s.</li><li>24 The time is accurate to within 2.5 Î¼s.</li><li>25 The time is accurate to within 10 Î¼s.</li><li>26 The time is accurate to within 25 Î¼s.</li><li>27 The time is accurate to within 100 Î¼s.</li><li>28 The time is accurate to within 250 Î¼s.</li><li>29 The time is accurate to within 1 ms.</li><li>2A The time is accurate to within 2.5 ms.</li><li>2B The time is accurate to within 10 ms.</li><li>2C The time is accurate to within 25 ms.</li><li>2D The time is accurate to within 100 ms.</li><li>2E The time is accurate to within 250 ms.</li><li>2F The time is accurate to within 1s.</li><li>30 The time is accurate to within 10s.</li><li>31 The time is accurate to larger than 10s.</li><li>80-FD Reserved for a PTP template.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>clock-class</span></strong> <i><span class="varname">clock-class-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the class of a clock source.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is an integer ranging from 0 to 255. The default value for local is 187. The values supported (mapping between clock-class-value values and clock-class attributes) are as follows:</p>
<ul><li>6. A clock of class 6 traces clock signals of the primary reference time source. The timescale distributed is the Precise Time Protocol (PTP). A clock of class 6 cannot function as a slave clock for other clocks in the same domain.</li><li>7. If a clock of class 6 becomes incapable of tracing clock signals of the primary reference time source, the clock obtains class 7 and works in hold mode. The timescale distributed is PTP. A clock of class 7 cannot function as a slave clock for other clocks in the same domain.</li><li>13. A clock of class 13 synchronizes clock signals with a specific clock source. The timescale distributed is arbitrary waveform (ARB). A clock of class 13 cannot function as a slave clock for other clocks in the same domain.</li><li>14. If a clock of class 13 becomes incapable of tracing clock signals of a specific clock source, the clock obtains class 14 and works in hold mode. The timescale distributed is ARB. A clock of class 14 cannot function as a slave clock for other clocks in the same domain.</li><li>52. A clock of class 7 becomes an alternative A clock because this clock of class 7 cannot meet hold requirements. A clock of class 52 cannot function as a slave clock for other clocks in the same domain.</li><li>58. A clock of class 14 becomes an alternative A clock because this clock of class 14 cannot meet hold requirements. A clock of class 58 cannot function as a slave clock for other clocks in the same domain.</li><li>187. A clock of class 7 becomes an alternative B clock because this clock of class 7 cannot meet hold requirements. A clock of class 187 can function as a slave clock for other clocks in the same domain.</li><li>193. A clock of class 14 becomes an alternative B clock because this clock of class 14 cannot meet hold requirements. A clock of class 193 can function as a slave clock for other clocks in the same domain.</li><li>248. Default clock class. A clock obtains class 248 if no class is defined for it.</li><li>255. A clock of class 255 works in slave-only mode.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>priority1</span></strong> <i><span class="varname">priority1-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the priority 1 value of clock signals.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 255. The default value is 128. A smaller value indicates a higher priority.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>priority2</span></strong> <i><span class="varname">priority2-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the priority 2 value of clock signals.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 255. The default value is 128. A smaller value indicates a higher priority.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>local</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates a local clock source.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907760748__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907760748__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907760748__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>In dynamic 1588v2 scenarios, the BMC clock source selection algorithm can automatically select the grandmaster clock and master node. This command is used to configure BMC parameters for the local clock source or external clock source.</p>
<p><strong>Precautions</strong></p>
<p>When a 1588v2-enabled device performs the dynamic BMC clock source selection algorithm, the device selects a clock source in the sequence of priority1&gt; clock-class&gt; clock-accuracy&gt; priority2. That is, the device compares priority1 of the selected clock source first. If priority1 is the same, the device compares clock-class. The clock source with a higher priority becomes the master clock.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907760748__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the class of the local clock to 10.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ptp enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ptp clock-source local clock-class 10</strong>
</pre>
</div>

<div class="p"># Set the priority 1 value of the local clock to 1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ptp enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ptp clock-source local priority1 1</strong>
</pre>
</div>

<div class="p"># Set the time precision of the local clock to be greater than 10s.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ptp enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ptp clock-source local clock-accuracy 31</strong>
</pre>
</div>

<div class="p"># Select an atomic clock as a local clock source.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ptp enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ptp clock-source local time-source 1</strong>
</pre>
</div>

<div class="p"># Set the priority 2 value of the local clock to 1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ptp enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ptp clock-source local priority2 1</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-1588v2(PTP)_Configuration_Commands_title.html">1588v2 (PTP) Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PTP_ASYMMETRY-CORRECTION.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PTP_CLOCK-STEP.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>