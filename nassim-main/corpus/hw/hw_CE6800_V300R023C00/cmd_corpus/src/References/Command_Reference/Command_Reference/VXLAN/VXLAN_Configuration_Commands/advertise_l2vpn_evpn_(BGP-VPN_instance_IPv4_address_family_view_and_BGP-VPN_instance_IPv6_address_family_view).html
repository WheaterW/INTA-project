
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="advertise l2vpn evpn (BGP-VPN instance IPv4 address family view/BGP-VPN instance IPv6 address family view)">
<meta name="DC.subject" content="advertise l2vpn evpn (BGP-VPN instance IPv4 address family view/BGP-VPN instance IPv6 address family view)">
<meta name="keywords" content="advertise l2vpn evpn (BGP-VPN instance IPv4 address family view/BGP-VPN instance IPv6 address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_VXLAN_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-ADVERTISE-L2VPN-EVPN(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-ADVERTISE-L2VPN-EVPN-ROUTE-TYPE(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907766816">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>advertise l2vpn evpn (BGP-VPN instance IPv4 address family view/BGP-VPN instance IPv6 address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907766816"></a><a name="EN-US_CLIREF_0000001907766816"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">advertise l2vpn evpn (BGP-VPN instance IPv4 address family view/BGP-VPN instance IPv6 address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907766816__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">advertise l2vpn evpn</span></b> command enables a VPN instance to advertise EVPN IP prefix routes.</p>
<p>The <b><span class="cmdname">undo advertise l2vpn evpn</span></b> command restores the default configuration.</p>
</p>
<p>By default, a VPN instance is disabled from advertising EVPN IP prefix routes.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907766816__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">advertise l2vpn evpn </span></b>{ <strong><span>best-route</span></strong> | <strong><span>valid-routes</span></strong> } [ <strong><span>import-route-multipath</span></strong> ] [ <strong><span>include-local-cross-route</span></strong> ]</p>



<p><b><span class="cmdname">undo advertise l2vpn evpn </span></b>{ <strong><span>best-route</span></strong> | <strong><span>valid-routes</span></strong> } [ <strong><span>import-route-multipath</span></strong> ] [ <strong><span>include-local-cross-route</span></strong> ]</p>



</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907766816__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>best-route</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Advertises only optimal routes in a VPN instance as EVPN IP prefix routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>valid-routes</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Advertises only valid routes in a VPN instance as EVPN IP prefix routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>import-route-multipath</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Advertises all routes with the same destination address in a VPN instance as EVPN IP prefix routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>include-local-cross-route</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Advertises all locally leaked routes in a VPN instance as EVPN IP prefix routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907766816__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-VPN instance IPv4 address family view,</span><span>BGP-VPN instance IPv6 address family view,</span><span>BGP multi-instance VPN instance IPv6 address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907766816__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907766816__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>If EVPN IP prefix routes are used to advertise IP routes between devices, you need to enable the VPN instance to advertise EVPN IP prefix routes so that the local VPN instance can advertise IP routes to the peer device through BGP EVPN peer relationships.<p></p>
<span>By default</span>, the device advertises external routes in the VPN instance routing table, including invalid routes and non-optimal routes, as EVPN IP prefix routes. To prevent invalid routes from being advertised, you can specify valid-routes. If you want to advertise only the optimal VPN routes as EVPN IP prefix routes, specify best-route.<p></p>
<span>If the</span> <b><span class="cmdname">advertise l2vpn evpn</span></b> command does not contain the import-route-multipath parameter when it is run, the VPN instance advertises only optimal locally imported routes as EVPN IP prefix routes. In load-balancing scenarios, the import-route-multipath parameter must be specified in the <b><span class="cmdname">advertise l2vpn evpn</span></b> command, so that the VPN instance advertises all locally imported routes with the same destination address as EVPN IP prefix routes.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907766816__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable the VPN instance vpna to advertise valid routes as EVPN IP prefix routes.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>route-distinguisher 1:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv4-family vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-vpna] <strong>advertise l2vpn evpn valid-routes</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_VXLAN_Configuration_Commands_title.html">VXLAN Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/BGP-MULI-ADVERTISE-L2VPN-EVPN(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BGP-MULI-ADVERTISE-L2VPN-EVPN-ROUTE-TYPE(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>