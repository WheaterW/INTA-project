
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="stp timer">
<meta name="DC.subject" content="stp timer">
<meta name="keywords" content="stp timer">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/STPPORTTCNRESTRICTIONL2(MSTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PROCSTPTIMER(MSTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_MSTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907761976">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>stp timer</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907761976"></a><a name="EN-US_CLIREF_0000001907761976"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">stp timer</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907761976__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">stp timer</span></b> command sets a Forward Delay value, an interval (Hello time) at which BPDUs are sent, a Max Age value (BPDU aging time).</p>
<p>The <b><span class="cmdname">undo stp timer</span></b> command restores the default setting.</p>
</p>
<p>The default Forward Delay value is 1500 centiseconds, the interval at which BPDUs are sent is 200 centiseconds, the max age value is 2000 centiseconds.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907761976__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">stp timer </span></b>{ <strong><span>forward-delay</span></strong> <i><span class="varname">forward-delay</span></i> | <strong><span>hello</span></strong> <i><span class="varname">hello-time</span></i> | <strong><span>max-age</span></strong> <i><span class="varname">max-age</span></i> }</p>

<p><b><span class="cmdname">undo stp timer </span></b>{ <strong><span>forward-delay</span></strong> | <strong><span>hello</span></strong> | <strong><span>max-age</span></strong> }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907761976__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>forward-delay</span></strong> <i><span class="varname">forward-delay</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the value of the Forward Delay.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 400 to 3000, in centiseconds. The step is 100.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>hello</span></strong> <i><span class="varname">hello-time</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the interval at which BPDUs are sent.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is an integer ranging from 100 to 1000 with a step of 100, in centiseconds.</p>
<p>To ensure proper working of a spanning tree, the Hello Time, Forward Delay, and Max Age must meet the following requirements. Otherwise, network flapping frequently occurs.</p>
<ul><li>2 Ã (Forward Delay-1.0 second) &gt;= Max Age</li><li>Max Age &gt;= 2 Ã (Hello Time + 1.0 second)</li></ul>
<p>Setting a network diameter using the stp bridge-diameter command is recommended. After the stp bridge-diameter command is run, the device sets optimal values for the Hello Time, Forward Delay, and Max Age.</p>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>max-age</span></strong> <i><span class="varname">max-age</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the BPDU aging time on a port.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 600 to 4000 with a step of 100, in centiseconds.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907761976__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907761976__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907761976__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><ul><li>On a network running STP, a device checks whether the BPDUs received from an upstream device time out based on the Max Age value. To set a Max Age value, run the stp timer max-age command. If the received BPDUs time out, the device ages the BPDUs and blocks the port that receives the BPDUs. Then, the device sends the BPDUs with itself as the root bridge. This aging mechanism effectively controls the radius of the spanning tree and timeout period of received BPDUs.</li><li>On a network running STP, if the network topology is changed, it takes time for new configuration BPDUs to be advertised across the network. During this time, interfaces blocked may be unblocked before required interfaces are blocked. As a result, a temporary loop may occur. To prevent this problem, run the stp timer forward-delay command to set a Forward Delay value. During the delay time, all interfaces are blocked temporarily.</li><li>On a network running STP, a device periodically sends BPDUs to other devices on the same spanning tree at the interval of the Hello Time to ensure that the spanning tree is stable. To set such an interval, run the stp timer hello command.</li><li>If no BPDUs are received from the upstream device within the timeout period (Timeout period = Hello Time x 3 x Timer Factor), the spanning tree is calculated again.<p></p>
<span>In a spanning tree where two devices are connected</span> to each other, the device closer to the root bridge is the upstream device of another device.</li></ul>
</div>
<p><strong>Configuration Impact</strong></p>
<div class="p"><ul><li>The Forward Delay value set on the root bridge is advertised to other devices of the same spanning tree using BPDUs. Then it becomes the Forward Delay value of all devices on the spanning tree.</li><li>The Hello Time set on the root bridge is advertised to other devices of the same spanning tree using BPDUs. Then it becomes the Hello Time value of all devices on the spanning tree.</li><li>The Max Age value set on the root bridge is advertised to other devices of the same spanning tree using BPDUs. Then it becomes the MaxAge value of all devices on the spanning tree.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907761976__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">



<div class="p"># Set the Max Age to 1000 centiseconds.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>stp timer max-age 1000</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">STP/RSTP/MSTP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/STPPORTTCNRESTRICTIONL2(MSTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PROCSTPTIMER(MSTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>