
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ntp access">
<meta name="DC.subject" content="ntp access">
<meta name="keywords" content="ntp access">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_NTP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/UNSYNC-POLL(NTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/AUTHENTICATION-ENABLE(NTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Creator" content="SUBSYS_ID_NTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000002158962776">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ntp access</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000002158962776"></a><a name="EN-US_CLIREF_0000002158962776"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1"><span>ntp access</span></h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000002158962776__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ntp access</span></b> command sets the access control authority of a local NTP service.</p>
<p>The <b><span class="cmdname">undo ntp access</span></b> command deletes the access control authority.</p>
</p>
<p>By default, no access authority is set.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000002158962776__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">



<p><b><span class="cmdname">ntp access </span></b>{ <strong><span>peer</span></strong> | <strong><span>query</span></strong> | <strong><span>server</span></strong> | <strong><span>synchronization</span></strong> | <strong><span>limited</span></strong> } { { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">aclname</span></i> } [ <strong><span>ipv6</span></strong> { <i><span class="varname">acl6-number</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl6name</span></i> } ] | <strong><span>ipv6</span></strong> { <i><span class="varname">acl6-number</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl6name</span></i> } [ { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">aclname</span></i> } ] }</p>




<p><b><span class="cmdname">undo ntp access </span></b>{ { <strong><span>peer</span></strong> | <strong><span>query</span></strong> | <strong><span>server</span></strong> | <strong><span>synchronization</span></strong> | <strong><span>limited</span></strong> } | { <strong><span>peer</span></strong> | <strong><span>query</span></strong> | <strong><span>server</span></strong> | <strong><span>synchronization</span></strong> | <strong><span>limited</span></strong> } { { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">aclname</span></i> } [ <strong><span>ipv6</span></strong> { <i><span class="varname">acl6-number</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl6name</span></i> } ] | <strong><span>ipv6</span></strong> [ { <i><span class="varname">acl6-number</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl6name</span></i> } | { <i><span class="varname">acl6-number</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl6name</span></i> } { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">aclname</span></i> } ] | <strong><span>all</span></strong> } }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000002158962776__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>peer</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><p>Indicates to maximum access. Both time request and control query can be performed on the local NTP service, and the local clock can be synchronized to the remote server.</p>
<p>If the matching result is configured as permit for the source IP address configured in the ACL:</p>
<ul><li>The local clock can be synchronized with the peer clock.</li><li>The peer clock can be synchronized with the local clock.</li></ul>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>query</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates to minimum access. Only control query can be performed on the local NTP service.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>server</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><p>Permits server access and query. Both time requests and control query can be performed on the local NTP service, but the local clock cannot be synchronized to the remote server.</p>
<p>If the matching result is configured as permit for the source IP address configured in the ACL:</p>
<ul><li>The local clock cannot be synchronized with the peer clock.</li><li>The peer clock can be synchronized with the local clock.</li></ul>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>synchronization</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><p>Permits server access only. Only time request can be performed on the local NTP service.</p>
<p>If the matching result is configured as permit for the source IP address configured in the ACL:</p>
<ul><li>The local clock cannot be synchronized with the peer clock.</li><li>The peer clock can be synchronized with the local clock.</li></ul>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>limited</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Controls the incoming packet rate and kiss code is sent when KoD is enabled.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">acl-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a basic ACL number for IPv4 addresses.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of case-sensitive characters, spaces not supported. The value is an integer ranging from 2000 to 2999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl-name</span></strong> <i><span class="varname">aclname</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a named basic ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of 1 to 32 case-sensitive characters. It cannot contain spaces. The value must start with a digit ranging from 0 to 9 or a letter ranging from a to z (or A to Z).</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv6</span></strong> <i><span class="varname">acl6-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of a basic IPv6 ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of case-sensitive characters, spaces not supported. The value is an integer ranging from 2000 to 2999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl6-name</span></strong> <i><span class="varname">acl6name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a named basic IPv6 ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of 1 to 32 case-sensitive characters. It cannot contain spaces. The value must start with a digit ranging from 0 to 9 or a letter ranging from a to z (or A to Z).</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>all</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the IP address can be of both IPv6 and IPv4 types.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000002158962776__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000002158962776__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000002158962776__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>Compared with NTP authentication, the <b><span class="cmdname">ntp access</span></b> command provides a simple security measure. When receiving an access query, the NTP server matches it with peer, server, synchronization, and query in order, that is, from the minimum access restriction to the maximum access restriction. The first match takes priority.<p></p>
</p>
</p>
<p><strong>Precautions</strong></p>
<div class="p"><p>Based on the access limitation to be implemented, configure this command for devices accordingly. The details are as follows:</p>

<ul><li>Unicast NTP server/client mode: In this mode, the client cannot be synchronized with the server.</li><li>Unicast NTP server/client mode: In this mode, the server cannot process time synchronization requests from the client.</li><li>NTP peer mode: In this mode, the active peer cannot process time requests.</li><li>NTP peer mode: In this mode, the passive peer cannot process time requests.</li><li>NTP multicast mode: In this mode, the NTP multicast client cannot be synchronized with the server.</li><li>NTP broadcast mode: In this mode, the NTP broadcast client cannot be synchronized with the server.</li><li>NTP manycast mode: In this mode, the NTP manycast client cannot be synchronized with the server.</li><li>NTP manycast mode: In this mode, the NTP manycast server cannot process time synchronization requests from the client.</li></ul>

<p>If this command is the first NTP configuration command, the system automatically adds the ntp server disable and ntp ipv6 server disable commands to the configuration file to disable the NTP server function. If this command is the last NTP configuration command to be deleted, the system automatically deletes the ntp server disable and ntp ipv6 server disable commands from the configuration file when you delete this command.<p></p>
<span>Before configuring access control using an ACL</span>, check the ACL rule settings.</p>

<ul><li>If the ACL rule is based on a source IP address and the permit mode is set, packets originating from this address are permitted.</li><li>If the ACL rule is based on a source IP address and the deny mode is set, packets originating from this address are denied.</li><li>If a source IP address does not match the ACL rule, packets originating from this address are denied.</li><li>If no rule exists in the ACL or the referenced ACL does not exist, packets originating from all source IP addresses are denied.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000002158962776__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">




<div class="p"># Enable a peer in IPv4 ACL 2000 to perform time request, query control, and time synchronization on a local device.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl 2000</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-basic-2000] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ntp access peer 2000</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_NTP_Configuration_Commands_title.html">NTP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/UNSYNC-POLL(NTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/AUTHENTICATION-ENABLE(NTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>