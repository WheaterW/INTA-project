
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="filter-policy (BGP-VPN instance IPv4 address family view)">
<meta name="DC.subject" content="filter-policy (BGP-VPN instance IPv4 address family view)">
<meta name="keywords" content="filter-policy (BGP-VPN instance IPv4 address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/FILTER-POLICY(BGPIPV6).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/VRF6-FILTER-POLICY(BGPVPNBASE).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942843069">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>filter-policy (BGP-VPN instance IPv4 address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942843069"></a><a name="EN-US_CLIREF_0000001942843069"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">filter-policy (BGP-VPN instance IPv4 address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942843069__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">filter-policy export</span></b> command configures a device to use an export policy to filter the routes to be advertised so that only the routes that match the export policy are advertised.</p>
<p>The <b><span class="cmdname">undo filter-policy export</span></b> command restores the default configuration.</p>
<p>The <b><span class="cmdname">filter-policy import</span></b> command configures a device to filter received routes.</p>
<p>The <b><span class="cmdname">undo filter-policy import</span></b> command restores the default configuration.</p>
</p>
<p>By default, received routes or the routes to be advertised are not filtered.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942843069__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p><b><span class="cmdname">filter-policy </span></b>{ <i><span class="varname">acl-number</span></i> | <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } { <strong><span>import</span></strong> | <strong><span>export</span></strong> [ <strong><span>direct</span></strong> | <strong><span>isis</span></strong> <i><span class="varname">process-id</span></i> | <strong><span>ospf</span></strong> <i><span class="varname">process-id</span></i> | <strong><span>rip</span></strong> <i><span class="varname">process-id</span></i> | <strong><span>static</span></strong> ] }</p>


<p><b><span class="cmdname">undo filter-policy </span></b>[ <i><span class="varname">acl-number</span></i> | <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> ] { <strong><span>import</span></strong> | <strong><span>export</span></strong> [ <strong><span>direct</span></strong> | <strong><span>isis</span></strong> <i><span class="varname">process-id</span></i> | <strong><span>ospf</span></strong> <i><span class="varname">process-id</span></i> | <strong><span>rip</span></strong> <i><span class="varname">process-id</span></i> | <strong><span>static</span></strong> ] }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942843069__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">acl-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a basic ACL number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 2000 to 2999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of an IPv4 prefix list.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 169 case-sensitive characters, with spaces not supported. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a named basic ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of 1 to 32 case-sensitive characters, spaces not supported.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>direct</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures a device to filter the direct routes to be advertised.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>isis</span></strong> <i><span class="varname">process-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the ID of an IS-IS process.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4294967295.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ospf</span></strong> <i><span class="varname">process-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>process-id Specifies the ID of an OSPF process.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4294967295.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>rip</span></strong> <i><span class="varname">process-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a RIPng process ID.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4294967295.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>static</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Filters the static routes to be advertised.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942843069__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-VPN instance IPv4 address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942843069__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942843069__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p>Using the <b><span class="cmdname">filter-policy export</span></b> command, you can filter the routes to be advertised by the BGP-VPN instance IPv4 address family. After the <b><span class="cmdname">filter-policy export</span></b> command is run, BGP filters the routes imported using the <b><span class="cmdname">import-route</span></b> command before importing them. Only the routes that pass the filtering can be added to the local BGP routing table and advertised by BGP.<p></p>
<span>You can run the</span> <b><span class="cmdname">filter-policy import</span></b> command to filter the routes received by the BGP-VPN instance IPv4 address family on a BGP device and determine whether to add the routes to the BGP routing table.<p></p>
<span>If a protocol is specified</span>, only the routes imported from the specified protocol are filtered. The routes imported from other protocols are not affected. If protocol is not specified, the routes imported from any protocol are filtered.<p></p>
<span>For a named ACL</span>, when the <b><span class="cmdname">rule</span></b> command is used to configure a filtering rule, the filtering rule is valid only when the source address range is specified by the source parameter and the time period is specified by the time-range parameter.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942843069__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Use ACL 2000 to filter all the routes to be advertised by BGP.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl 2000</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-basic-2000] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpn1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpn1] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpn1-af-ipv4] <strong>route-distinguisher 100:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpn1-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpn1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv4-family vpn-instance vpn1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-vpn1] <strong>filter-policy 2000 export</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/FILTER-POLICY(BGPIPV6).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/VRF6-FILTER-POLICY(BGPVPNBASE).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>