
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="aggregate (BGP-VPN instance IPv6 address family view) (IPv6)">
<meta name="DC.subject" content="aggregate (BGP-VPN instance IPv6 address family view) (IPv6)">
<meta name="keywords" content="aggregate (BGP-VPN instance IPv6 address family view) (IPv6)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/VRF-AGGREGATE(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-AGGREGATE-DEFAULT(BGPUCASTVPNOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942842773">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>aggregate (BGP-VPN instance IPv6 address family view) (IPv6)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942842773"></a><a name="EN-US_CLIREF_0000001942842773"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">aggregate (BGP-VPN instance IPv6 address family view) (IPv6)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942842773__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">aggregate</span></b> command adds a summarized route to the BGP routing table. The outbound interface of the summarized route on the local Router is NULL 0. When receiving the summarized route, each of the other devices automatically adds its local outbound interface to the summarized route.</p>
<p>The <b><span class="cmdname">undo aggregate</span></b> command disables the function.</p>
</p>
<p>By default, no routes are summarized.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942842773__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">aggregate </span></b><i><span class="varname">ipv6-address</span></i> <i><span class="varname">mask-length</span></i> [ <strong><span>as-set</span></strong> | <strong><span>detail-suppressed</span></strong> | <strong><span>attribute-policy</span></strong> <i><span class="varname">route-policy-name1</span></i> | <strong><span>origin-policy</span></strong> <i><span class="varname">route-policy-name2</span></i> | <strong><span>suppress-policy</span></strong> <i><span class="varname">route-policy-name3</span></i> ] <sup>*</sup></p>

<p><b><span class="cmdname">undo aggregate </span></b><i><span class="varname">ipv6-address</span></i> <i><span class="varname">mask-length</span></i> [ <strong><span>as-set</span></strong> | <strong><span>detail-suppressed</span></strong> | <strong><span>attribute-policy</span></strong> <i><span class="varname">route-policy-name1</span></i> | <strong><span>origin-policy</span></strong> <i><span class="varname">route-policy-name2</span></i> | <strong><span>suppress-policy</span></strong> <i><span class="varname">route-policy-name3</span></i> ] <sup>*</sup></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942842773__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ipv6-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an IPv6 address of the summarized route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a 32-digit hexadecimal number, in the format of X:X:X:X:X:X:X:X.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">mask-length</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the network mask length of the summary route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 128.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>as-set</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Generates a route carrying the AS-Set attribute.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>detail-suppressed</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Advertises only the summary route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>attribute-policy</span></strong> <i><span class="varname">route-policy-name1</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a route-policy for setting attributes of a summary route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 200 case-sensitive characters. It cannot contain spaces. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>origin-policy</span></strong> <i><span class="varname">route-policy-name2</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of the route-policy that allows route summarization.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 200 case-sensitive characters. It cannot contain spaces. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>suppress-policy</span></strong> <i><span class="varname">route-policy-name3</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of the route-policy for suppressing the advertisement of specified routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 200 case-sensitive characters. It cannot contain spaces. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942842773__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-VPN instance IPv6 address family view,</span><span>BGP multi-instance VPN instance IPv6 address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942842773__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942842773__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>BGP route summarization is classified into manual summarization and automatic summarization. The <b><span class="cmdname">aggregate</span></b> command is used to implement manual summarization. Manual summarization takes precedence over automatic summarization. The aggregate ipv4-address { mask | mask-length } command can be used to summarize specific routes in the local BGP routing table and advertise all summary routes and specific routes. The summary route inherits the Origin attribute of the specific routes. If the Origin attributes of the specific routes are different, the route with the largest Origin attribute priority (incomplete\ &gt; egp\ &gt; igp) is selected. In addition, the generated summary route carries the atomic-aggregate attribute. Except the Origin and Atomic-aggregate attributes, the summary route discards all other attributes of the specific routes.<p></p>
<span>To ensure that summary routes can prevent loops</span>, you can specify the as-set keyword to create a summary route for loop detection. The summary route inherits the Origin, AS_Path (loop-proof), community, and large-community attributes of specific routes. The summary route also carries the community attributes of all specific routes. When the number of community attributes of the summary route exceeds 255, the summarization stops and the routes that are not summarized are advertised as specific routes. If multiple AS_Paths need to be summarized, exercise caution when using this parameter because frequent changes of specific routes may cause route flapping.<p></p>
<span>detail-suppressed is used to suppress the advertisement</span> of all specific routes corresponding to the summary route. Only the summary route is advertised. The summary route carries the atomic-aggregate attribute but does not carry the community attribute of the specific routes.<p></p>
<span>The suppress-policy keyword can be used to generate</span> summary routes but suppress the advertisement of specified routes. You can use the if-match clause of the route-policy to selectively suppress some specific routes. That is, the routes that match the route-policy are suppressed, but the routes that do not match the route-policy are still advertised. You can also run the <b><span class="cmdname">peer route-policy</span></b> command to achieve the same effect.<p></p>
<span>If origin-policy is specified</span>, a summary route is generated only when the route-policy is matched.<p></p>
<span>The attribute-policy keyword can be used to set the</span> attributes of the summary route. If the AS_Path attribute is set in the policy through the <b><span class="cmdname">apply as-path</span></b> command and the keyword as-set is set in the <b><span class="cmdname">aggregate</span></b> command, the <b><span class="cmdname">apply as-path</span></b> command in the policy does not take effect. You can also run the <b><span class="cmdname">peer route-policy</span></b> command to achieve the same effect.</p>
<p><strong>Configuration Impact</strong></p>
<p><p>If detail-suppressed is configured in the command, the advertisement of specific routes will be suppressed. If suppress-policy is configured in the command, the advertisement of the specific routes that match the policy will be suppressed.</p>
</p>
<p><strong>Precautions</strong></p>
<div class="p"><p>When you run the <b><span class="cmdname">undo aggregate</span></b> command, the system checks the optional parameters (attribute-policy, origin-policy, suppress-policy, as-set, and detail-suppressed). If any of the optional parameters is not enabled, the <b><span class="cmdname">undo aggregate</span></b> command fails to be executed.<p></p>
<span>After the</span> <b><span class="cmdname">aggregate</span></b> command is run, the summary route may be preferentially selected to guide traffic forwarding after being leaked to another VPN because this route has a high priority. As a result, traffic is discarded. Therefore, you need to properly plan the mask length of the summary route.<p></p>
<span>If some summary routes are withdrawn</span>, black holes may occur, causing traffic loss.<p></p>
<span>After route summarization is configured</span>, it takes effect only when there is a BGP route whose mask is greater than the mask of the summary route. When configuring route summarization, analyze or configure special policies in advance if routes change. This prevents packet loss caused by external route changes.<p></p>
<span>Conditions for BGP specific routes to participate</span> in summarization:</p>

<ol><li>They are optimal routes in the BGP routing table;</li><li>They are non-summary routes;</li><li>They are non-labeled routes;</li><li>A specific route whose mask is greater than the mask of the summary route exists.</li></ol>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942842773__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Create a summarized route carrying the AS_Path attribute that contains the AS_Path information of specific routes.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>ipv6-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv6] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv6-family vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-6-vpna] <strong>aggregate 2001:db8:1::1 64 as-set</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/VRF-AGGREGATE(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BGP-AGGREGATE-DEFAULT(BGPUCASTVPNOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>