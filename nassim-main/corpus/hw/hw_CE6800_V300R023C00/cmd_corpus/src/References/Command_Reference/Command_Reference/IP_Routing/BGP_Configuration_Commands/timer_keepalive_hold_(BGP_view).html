
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="timer keepalive hold (BGP view)">
<meta name="DC.subject" content="timer keepalive hold (BGP view)">
<meta name="keywords" content="timer keepalive hold (BGP view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/TIMER-CONNECT-RETRY(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-TIMER-SEND-HOLD-TIME(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942844321">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>timer keepalive hold (BGP view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942844321"></a><a name="EN-US_CLIREF_0000001942844321"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">timer keepalive hold (BGP view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942844321__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">timer keepalive hold</span></b> command sets the Keepalive time and hold time.</p>
<p>The <b><span class="cmdname">undo timer keepalive hold</span></b> command restores the default Keepalive time and hold time.</p>
</p>
<p>By default, the Keepalive time is 60s, and the hold time is 180s.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942844321__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">timer keepalive </span></b><i><span class="varname">keepalive-time</span></i> <strong><span>hold</span></strong> <i><span class="varname">hold-time</span></i> [ <strong><span>min-holdtime</span></strong> <i><span class="varname">min-hold-value</span></i> ]</p>

<p><b><span class="cmdname">undo timer keepalive hold </span></b>[ <strong><span>min-holdtime</span></strong> ]</p>

<p><b><span class="cmdname">undo timer keepalive </span></b><i><span class="varname">keepalive-time</span></i> <strong><span>hold</span></strong> <i><span class="varname">hold-time</span></i> [ <strong><span>min-holdtime</span></strong> <i><span class="varname">min-hold-value</span></i> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942844321__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>hold</span></strong> <i><span class="varname">hold-time</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the hold time.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is 0 or an integer ranging from 3 to 65535, in seconds. The default value is 180.</p>
<p>It is recommended that the configured hold time be related to the total number of BGP address family peers. For details, see the mapping between the total number of BGP peers in each address family and the recommended minimum hold time in the usage guide of the peer timer command.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>min-holdtime</span></strong> <i><span class="varname">min-hold-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the minimum hold time. On the same device, min-hold-value must be less than hold-time.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 20 to 65535, in seconds.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>keepalive</span></strong> <i><span class="varname">keepalive-time</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the Keepalive time.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 21845, in seconds. The default value is 60.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942844321__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942844321__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942844321__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>After a connection is established between peers, keepalive-time and hold-time are negotiated by the peers.</p>

<ul><li>The smaller hold-time carried by Open messages of both peers is used as the hold-time.</li><li>The smaller value of one third of hold-time and the locally configured keepalive-time is used as the keepalive-time.<p></p>
<span>If the hold time configured on a remote device is</span> less than the min-hold-value configured on the local device, no BGP peer relationship can be established between the two devices. However, if the hold time configured on the remote device is 0s, a BGP peer relationship can be established between the two devices.</li></ul>
<p><strong>Configuration Impact</strong></p>
<p><p>The timers configured for a specific peer or peer group using the <b><span class="cmdname">peer timer</span></b> command override the timers configured for all BGP peers using the <b><span class="cmdname">timer</span></b> command.</p>
</p>
<p><strong>Precautions</strong></p>
<div class="p"><p>If the value of a timer changes, the BGP peer relationship between devices is interrupted. This is because the peers need to renegotiate the values of keepalive-time and hold-time. Exercise caution when changing the value of the timer.<p></p>
<span>In actual configuration</span>, the hold time must be at least three times the Keepalive time. Avoid the following situations:</p>

<ul><li>Both keepalive-time and hold-time are set to 0. In this case, the BGP timers become invalid. That is, BGP does not detect link faults based on the timers.</li><li>The hold-time value is much greater than the keepalive-time value. For example, if the <b><span class="cmdname">timer keepalive 1 hold 65535</span></b> command is run, link faults cannot be detected in time.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942844321__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the Keepalive time, hold time, and minimum hold time to 30s, 90s, and 60s, respectively.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>timer keepalive 30 hold 90 min-holdtime 60</strong>
</pre>
</div>

<div class="p"># Set the BGP Keepalive time to 30s and hold time to 90s.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>timer keepalive 30 hold 90</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/TIMER-CONNECT-RETRY(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BGP-TIMER-SEND-HOLD-TIME(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>