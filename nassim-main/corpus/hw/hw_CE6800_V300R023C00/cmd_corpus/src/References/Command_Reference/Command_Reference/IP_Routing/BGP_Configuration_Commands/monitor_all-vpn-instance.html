
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="monitor all-vpn-instance">
<meta name="DC.subject" content="monitor all-vpn-instance">
<meta name="keywords" content="monitor all-vpn-instance">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-VRF-MAXIMUM-LOADBALAN-MIX(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SESSION-MONITOR-PEER-IP(BMPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BMPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907605252">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>monitor all-vpn-instance</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907605252"></a><a name="EN-US_CLIREF_0000001907605252"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">monitor all-vpn-instance</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907605252__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">monitor all-vpn-instance</span></b> command displays the BMP-Monitor view and allows the BGP running status of BGP peers in all VPN instance address families to be monitored.</p>
<p>The <b><span class="cmdname">undo monitor all-vpn-instance</span></b> command restores the default configuration.</p>
</p>
<p>By default, the BGP running status of BGP peers is not monitored.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907605252__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">monitor all-vpn-instance</span></b></p>

<p><b><span class="cmdname">undo monitor all-vpn-instance</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907605252__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907605252__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BMP session view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907605252__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907605252__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>BMP is used to monitor BGP running status of devices in real time, such as the establishment and termination status of BGP peer relationships and route update status. To allow the BGP running status of BGP peers in all VPN instance address families to be monitored, run the monitor all-vpn-instance command. After a TCP connection is established between the device and the monitoring server, the device reports BGP running status to the monitoring server, improving network monitoring efficiency.</p>
</p>
<p><strong>Follow-up Procedure</strong></p>
<div class="p"><p>Perform either of the following operations as required:</p>

<ul><li>Run the route-mode { { ipv4-family | ipv6-family } unicast } adj-rib-in { pre-policy | post-policy } command to set the type of RIB-in route (received from all peers in a specified address family of a specified VPN instance) whose statistics are to be sent by the device to the monitoring server.</li><li>Run the route-mode { { ipv4-family | ipv6-family } unicast } adj-rib-out { pre-policy | post-policy } command to set the type of RIB-out route (to be advertised or already advertised to all peers in a specified address family of a specified VPN instance) whose statistics are to be sent by the device to the monitoring server.</li><li>Run the route-mode { { ipv4-family | ipv6-family } unicast } local-rib [ add-path ] command to configure the device to send statistics about Local-RIB routes of all BGP peers in a specified address family of the VPN instance to the monitoring server.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907605252__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Display the BMP-Monitor view and allow the BGP running status of all BGP peers in all VPN instance address families to be monitored.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bmp</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bmp] <strong>bmp-session 10.1.1.1 alias a</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bmp-session-10.1.1.1-a] <strong>monitor all-vpn-instance</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/BGP-VRF-MAXIMUM-LOADBALAN-MIX(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/SESSION-MONITOR-PEER-IP(BMPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>