
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="preference (BGP-IPv6 unicast address family view)">
<meta name="DC.subject" content="preference (BGP-IPv6 unicast address family view)">
<meta name="keywords" content="preference (BGP-IPv6 unicast address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-IPV4-PREFERENCE(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-VRF-PREFERENCE(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPIPV6">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907764952">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>preference (BGP-IPv6 unicast address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907764952"></a><a name="EN-US_CLIREF_0000001907764952"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">preference (BGP-IPv6 unicast address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907764952__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">preference</span></b> command sets a priority for EBGP routes, IBGP routes, or local BGP routes. BGP routes are configured with different priorities in different address family views.</p>
<p>The <b><span class="cmdname">undo preference</span></b> command restores the default setting.</p>
</p>
<p>By default, the priorities of EBGP routes, IBGP routes, and local BGP routes are all 255.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907764952__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">preference </span></b>{ <i><span class="varname">external</span></i> <i><span class="varname">internal</span></i> <i><span class="varname">local</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> }</p>

<p><b><span class="cmdname">undo preference</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907764952__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">external</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the priority of an EBGP route. An EBGP route is the optimal route learned from a peer outside the local AS.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255. The smaller the value is, the higher the priority is.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">internal</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a protocol preference of IBGP external routes, which are the optimal routes learned from peers inside the local AS.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255. The smaller the value is, the higher the priority is.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">local</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a protocol preference of a local BGP route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is an integer that ranges from 1 to 255. A smaller value indicates a higher priority.</p>
<p>This parameter takes effect for the following routes:</p>
<ul><li>Summary routes that are generated using the aggregate (BGP) command.</li><li>Automatic summary routes generated using the summary automatic command.</li><li>Remotely leaked routes.</li><li>Locally leaked routes.</li></ul>
<p>For details about how to identify the preceding types of routes, see Precautions.</p>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a route-policy.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 200 case-sensitive characters without spaces. The character string can contain spaces if it is enclosed with double quotation marks (").</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907764952__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-IPv6 unicast address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907764952__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907764952__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Running the <b><span class="cmdname">preference</span></b> command to set priorities for BGP routes affects route selection among BGP routes and routes of other routing protocols.<p></p>
<span>After a route-policy is configured on a device</span>, the device sets priorities only for the routes received from peers, which meet the matching rules. The routes that do not meet the rules use the default priority.<p></p>
<span>The smaller the priority value</span>, the higher the priority.</p>
<p><strong>Prerequisites</strong></p>
<p>If the <b><span class="cmdname">preference</span></b> command uses the route-policy to set the preference, you need to create a route-policy first.</p>
<p><strong>Precautions</strong></p>
<p>Currently, the <b><span class="cmdname">peer route-policy</span></b> command cannot be used to apply a routing policy to a peer to set the preference of BGP.<p></p>
<span>The</span> <b><span class="cmdname">preference</span></b> command cannot be used to change the preference of the routes imported using the network or <b><span class="cmdname">import-route</span></b> command. The priority of the route imported using the network or <b><span class="cmdname">import-route</span></b> command inherits the priority of the referenced route.<p></p>
<span>In this command</span>, the local parameter specifies the protocol preference of the summary route and leaked route. This parameter takes effect for the following types of routes:</p>

<ul><li>Summary routes manually generated using the aggregate (BGP) command. The route type of such a route is displayed as Aggregated route.</li><li>Summary routes automatically generated using the <b><span class="cmdname">summary automatic</span></b> command. The route type of such a route is displayed as Summary automatic route.</li><li>Remotely leaked routes. The route type of such a route is displayed as Remote-Cross route.</li><li>Locally leaked routes. The route type of such a route is displayed as Local-Cross route.<p></p>
<span>If</span> <strong>route-policy</strong> <em>route-policy-name</em>is configured, the following items can be matched: AS_Path filter, AS_Path length, community filter, route cost, destination address of IPv6 routes, VPN-Target extended community filter, bandwidth extended community filter, MPLS label, Large-Community filter, next-hop address ACL list of routing information, next-hop address ACL list of IPv6 routing information, next-hop address prefix list of routing information, next-hop address prefix list based on IPv6 routing information, route priority, destination address prefix list of IPv6 routing information, route modulo, route source IP address ACL list, route source IPv6 address ACL list, route source IP address prefix list, route source IPv6 address prefix list, and route type. The route priority attribute can be set.<p></p>
<span>If</span> the referenced policy contains unsupported attribute matching or setting behaviors, unexpected results may occur. For some attribute matching behaviors, the device may display warning-level messages.<p></p>
<span>Setting the BGP preference affects route selection</span> between BGP and other routing protocols, such as the type and direction of active routes. In addition, routes may fail to be imported.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907764952__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the priority to 2 for EBGP routes, 2 for IBGP routes, and 20 for local BGP routes.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv6-family unicast</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv6] <strong>preference 2 2 20</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/BGP-IPV4-PREFERENCE(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BGP-VRF-PREFERENCE(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>