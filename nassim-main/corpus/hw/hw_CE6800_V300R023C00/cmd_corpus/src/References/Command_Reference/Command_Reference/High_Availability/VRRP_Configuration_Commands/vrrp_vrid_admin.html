
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="vrrp vrid admin">
<meta name="DC.subject" content="vrrp vrid admin">
<meta name="keywords" content="vrrp vrid admin">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_VRRP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CREATEVRRP(VRRPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/AUTHENTICATION-MODE(VRRPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Creator" content="SUBSYS_ID_VRRPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907607404">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>vrrp vrid admin</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907607404"></a><a name="EN-US_CLIREF_0000001907607404"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">vrrp vrid admin</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907607404__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">vrrp vrid admin</span></b> command creates a management Virtual Router Redundancy Protocol (mVRRP) group or configure a common VRRP group as an mVRRP group.</p>
<p>The <b><span class="cmdname">undo vrrp vrid admin</span></b> command deletes an mVRRP group or restores an mVRRP group to a common VRRP group.</p>
</p>
<p>By default, no mVRRP group is configured.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907607404__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">vrrp vrid </span></b><i><span class="varname">virtual-router-id</span></i> <strong><span>admin</span></strong> [ <strong><span>ignore-if-down</span></strong> ]</p>

<p><b><span class="cmdname">undo vrrp vrid </span></b><i><span class="varname">virtual-router-id</span></i> <strong><span>admin</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907607404__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ignore-if-down</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that an mVRRP group ignores an interface Down event.</p>
<p>If an interface on which an mVRRP group is configured goes Down, the status of the mVRRP group becomes Master, not Initialize.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vrid</span></strong> <i><span class="varname">virtual-router-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the ID of an mVRRP group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907607404__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100GE interface view,</span><span>10GE interface view,</span><span>200GE interface view,</span><span>25GE interface view,</span><span>400GE interface view,</span><span>50GE interface view,</span><span>Eth-Trunk interface view,</span><span>VLANIF interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907607404__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907607404__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>A large number of VRRP packets are sent by multiple master devices when multiple common VRRP groups are configured. The VRRP packets consume network bandwidth resources and burden the system. The vrrp vrid admin command can be run to configure an mVRRP group. The mVRRP group sends VRRP packets and determines the status of services VRRP groups that are bound to the mVRRP group. Using mVRRP reduces resource consumption.</p>

<ul><li>An mVRRP group functioning as a gateway processes both protocol and service packets. An mVRRP group that does not function as a gateway processes only protocol packets.</li><li>Before a VRRP group is bound to an mVRRP group, the VRRP group is a common VRRP group and is able to process both protocol and service packets.</li><li>After the VRRP group is bound to the mVRRP group, the VRRP group becomes a service VRRP group and is able to process only service packets.<p></p>
<span>ignore-if-down must be configured in the vrrp vrid</span> admin command in the following scenario:<p></p>
<span>If a user-side device cannot broadcast packets</span>, mVRRP can be enabled on directly connected interfaces on devices in a VRRP group. The master device sends VRRP packets along the direct link. If a device on one end of the direct link fails, the VRRP-enabled interface on the other device also goes down. The mVRRP status on both devices becomes Initialize, causing service packet interruptions. To prevent the preceding problem, specify the ignore-if-down parameter in the admin-vrrp vridvrrp vrid admin command on both the master and devices. The parameter enables the mVRRP group to ignore the event that a directly connected interface goes Down. This setting allows the VRRP-enabled interface on one end of the direct link to continue forwarding service packets if the VRRP-enabled interface on the other end goes down.</li></ul>
<p><strong>Prerequisites</strong></p>
<p>A VRRP group has been created using the <b><span class="cmdname">vrrp vrid virtual-ip</span></b> command in the interface view if an mVRRP group is used as a gateway.</p>
<p><strong>Follow-up Procedure</strong></p>
<p>After the admin-vrrp vrid command is run, run the <b><span class="cmdname">vrrp vrid track admin-vrrp</span></b> command on the interface on which a service VRRP group is configured to bind the service VRRP group to the mVRRP group.</p>
<p><strong>Precautions</strong></p>
<p>After the <b><span class="cmdname">undo vrrp vrid admin</span></b> command is run to delete an mVRRP group, the association between other service VRRP groups and the mVRRP group is automatically deleted.<p></p>
<span>If the status of the mVRRP group configured with the</span> ignore-if-down function is Initialize and does not change, the ignore-if-down function cannot work properly when the mVRRP group receives a message indicating that the interface goes Down.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907607404__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">



<div class="p"># Create VRRP group 2 on <span>100GE</span> <span>1/0/1</span>, configure it as an mVRRP group, and enable the mVRRP group to ignore interface down events.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ip address 10.2.1.1 24</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>vrrp vrid 2 virtual-ip 10.2.1.111</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>vrrp vrid 2 admin ignore-if-down</strong>
</pre>
</div>

<div class="p"># Create VRRP group 1 on <span>100GE</span> <span>1/0/1</span> and configure it as an mVRRP group.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ip address 10.1.1.1 24</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>vrrp vrid 1 virtual-ip 10.1.1.111</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>vrrp vrid 1 admin</strong>
</pre>
</div>



</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_VRRP_Configuration_Commands_title.html">VRRP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/CREATEVRRP(VRRPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/AUTHENTICATION-MODE(VRRPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>