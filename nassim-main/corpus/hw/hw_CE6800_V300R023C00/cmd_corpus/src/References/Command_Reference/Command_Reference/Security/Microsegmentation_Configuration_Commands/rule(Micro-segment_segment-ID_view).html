
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="rule(Micro-segment segment-ID view)">
<meta name="DC.subject" content="rule(Micro-segment segment-ID view)">
<meta name="keywords" content="rule(Micro-segment segment-ID view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-Microsegmentation_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/RESET_TRAFFIC-SEGMENT_STATISTICS.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SEGMENT_BEHAVIOR.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Microsegmentation">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Microsegmentation">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Microsegmentation">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="DC.Creator" content="SUBSYS_ID_MSEG">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907608540">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>rule(Micro-segment segment-ID view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907608540"></a><a name="EN-US_CLIREF_0000001907608540"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">rule(Micro-segment segment-ID view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907608540__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">rule</span></b> command configures a policy rule in the microsegmentation classifier view.</p>
<p>The <b><span class="cmdname">undo rule</span></b> command deletes a policy rule in the microsegmentation classifier view.</p>
</p>
<p>By default, no policy rule is configured in the microsegmentation classifier view.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE8850-SAN, CE8851K, CE8851-32CQ8DQ-P and CE8850-HAM.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907608540__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">rule </span></b>[ <i><span class="varname">priority</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <strong><span>source-segment</span></strong> <i><span class="varname">id-value</span></i> | <strong><span>destination-segment</span></strong> <i><span class="varname">id-value</span></i> } <sup>*</sup> [ [ <strong><span>protocol</span></strong> <i><span class="varname">protocol-number-1</span></i> ] | [ <strong><span>protocol</span></strong> { <strong><span>tcp</span></strong> | <strong><span>udp</span></strong> | <i><span class="varname">protocol-number-2</span></i> } [ <strong><span>source-port</span></strong> { <strong><span>eq</span></strong> <i><span class="varname">port-num</span></i> | <strong><span>gt</span></strong> <i><span class="varname">gt-port-num</span></i> | <strong><span>lt</span></strong> <i><span class="varname">lt-port-num</span></i> | <strong><span>range</span></strong> <i><span class="varname">begin-port-num</span></i> <i><span class="varname">end-port-num</span></i> } ] [ <strong><span>destination-port</span></strong> { <strong><span>eq</span></strong> <i><span class="varname">port-num</span></i> | <strong><span>gt</span></strong> <i><span class="varname">gt-port-num</span></i> | <strong><span>lt</span></strong> <i><span class="varname">lt-port-num</span></i> | <strong><span>range</span></strong> <i><span class="varname">begin-port-num</span></i> <i><span class="varname">end-port-num</span></i> } ] ] ]</p>

<p><b><span class="cmdname">undo rule </span></b>[ <i><span class="varname">priority</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <strong><span>source-segment</span></strong> <i><span class="varname">id-value</span></i> | <strong><span>destination-segment</span></strong> <i><span class="varname">id-value</span></i> } <sup>*</sup> [ [ <strong><span>protocol</span></strong> <i><span class="varname">protocol-number-1</span></i> ] | [ <strong><span>protocol</span></strong> { <strong><span>tcp</span></strong> | <strong><span>udp</span></strong> | <i><span class="varname">protocol-number-2</span></i> } [ <strong><span>source-port</span></strong> { <strong><span>eq</span></strong> <i><span class="varname">port-num</span></i> | <strong><span>gt</span></strong> <i><span class="varname">gt-port-num</span></i> | <strong><span>lt</span></strong> <i><span class="varname">lt-port-num</span></i> | <strong><span>range</span></strong> <i><span class="varname">begin-port-num</span></i> <i><span class="varname">end-port-num</span></i> } ] [ <strong><span>destination-port</span></strong> { <strong><span>eq</span></strong> <i><span class="varname">port-num</span></i> | <strong><span>gt</span></strong> <i><span class="varname">gt-port-num</span></i> | <strong><span>lt</span></strong> <i><span class="varname">lt-port-num</span></i> | <strong><span>range</span></strong> <i><span class="varname">begin-port-num</span></i> <i><span class="varname">end-port-num</span></i> } ] ] ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907608540__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">priority</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Rule priority.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 4095.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>permit</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Allows packets to pass.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>deny</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Discards the packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>source-segment</span></strong> <i><span class="varname">id-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Microsegmentation source group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>destination-segment</span></strong> <i><span class="varname">id-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Microsegmentation destination group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>protocol</span></strong> <i><span class="varname">protocol-number-2</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>TCP or UDP protocol number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is 6 or 17.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>protocol</span></strong> <i><span class="varname">protocol-number-1</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Protocol number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 5, 7 to 16, or 18 to 255.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>tcp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>TCP protocol.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>udp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>UDP protocol.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>source-port</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Source port.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>eq</span></strong> <i><span class="varname">port-num</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>The value is the same as the specified port number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>gt</span></strong> <i><span class="varname">gt-port-num</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>The value is greater than the specified port number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 65534.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>lt</span></strong> <i><span class="varname">lt-port-num</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>The value is smaller than the specified port number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>range</span></strong> <i><span class="varname">begin-port-num</span></i> <i><span class="varname">end-port-num</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Range of port numbers.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>destination-port</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Destination port.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907608540__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Micro-segment segment-ID view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907608540__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907608540__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>On a data center network, servers are grouped into EPGs based on certain rules. If you do not want to use the default microsegmentation policy for packets matching EPGs but specify GBPs for the packets, configure and apply GBPs as follows:</p>

<ol><li>Create a segment classifier and configure rules for matching EPG packets in the segment classifier view.</li><li>Create a segment behavior and configure a traffic control behavior for the EPG in the segment behavior view.</li><li>Create a segment policy and bind the segment classifier and segment behavior to the segment policy in the segment policy view.</li><li>Apply the segment policy.</li></ol>
<p><strong>Precautions</strong></p>
<ol><li>When range begin-port-num end-port-num is specified in the <b><span class="cmdname">rule</span></b> command, begin-port-num must be smaller than or equal to end-port-num.</li><li>If no rule priority is configured (that is, the priority parameter is not configured), the default value of priority is 0. If a policy rule has been configured, the value of priority is the next value of the configured maximum value.</li></ol>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907608540__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a matching rule based on the source EPG 32768 and destination EPG 49151 in the segment classifier class1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>traffic-segment enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>segment classifier class1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-segmentclassifier-class1] <strong>rule permit source-segment 32768 destination-segment 49151</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-Microsegmentation_Configuration_Commands_title.html">Microsegmentation Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/RESET_TRAFFIC-SEGMENT_STATISTICS.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/SEGMENT_BEHAVIOR.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>