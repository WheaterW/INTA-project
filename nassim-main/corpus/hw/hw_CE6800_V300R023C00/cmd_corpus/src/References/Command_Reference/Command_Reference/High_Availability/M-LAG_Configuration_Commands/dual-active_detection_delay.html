
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="dual-active detection delay">
<meta name="DC.subject" content="dual-active detection delay">
<meta name="keywords" content="dual-active detection delay">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-M-LAG_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DISPLAY_M-LAG_UNPAIRED-PORT_SUSPEND.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DUAL-ACTIVE_DETECTION_ERROR-DOWN.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="M-LAG">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="M-LAG">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="M-LAG">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Creator" content="SUBSYS_ID_MCLAG">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907607268">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>dual-active detection delay</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907607268"></a><a name="EN-US_CLIREF_0000001907607268"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">dual-active detection delay</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907607268__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">dual-active detection delay</span></b> command sets the dual-active detection delay upon failure of the peer-link.</p>
<p>The <b><span class="cmdname">undo dual-active detection delay</span></b> command restores the default dual-active detection delay upon failure of the peer-link.</p>
</p>
<p>By default, the dual-active detection delay upon failure of the peer-link is 3 seconds.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907607268__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">dual-active detection delay </span></b><i><span class="varname">delaytime</span></i></p>

<p><b><span class="cmdname">undo dual-active detection delay </span></b><i><span class="varname">delaytime</span></i></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907607268__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">delaytime</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Dual-active detection delay upon failure of the peer-link.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 10000, in milliseconds. The value must be a multiple of 100. The default value is 3000.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907607268__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>DFS group view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907607268__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907607268__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>If the peer-link fails but the DAD heartbeat status is normal, accelerated DAD is triggered immediately and three DAD packets are separately sent at intervals of 200 ms. As a result, exceptions occur in the following scenarios:</p>

<ul><li>If the peer-link fails because the master device restarts unexpectedly, interfaces on the backup device are triggered to enter the Error-Down state. As a result, both the master and backup devices are abnormal.</li></ul>

<p>To solve the preceding problem, when the peer-link fails but the DAD heartbeat status is normal, three DAD packets are separately sent at intervals of 200 ms after the DAD delay (3s by default). This prevents DAD acceleration from being incorrectly triggered and prevents interfaces on the backup device from entering the Error-Down state.</p>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>When both M-LAG and BFD are configured, set delaytime to a value less than 1s to prevent BFD session flapping upon failure of the peer-link.</li><li>In an M-LAG multicast traffic forwarding scenario, set delaytime to a value less than 1s to reduce excess multicast packets upon failure of the peer-link.</li><li>If the DFS configuration exists and the <b><span class="cmdname">dual-active detection delay</span></b> command is not supported before an upgrade, a configuration with delaytime being 3000 is generated by default after the upgrade.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907607268__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the dual-active detection delay upon failure of the peer-link.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>dfs-group 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-dfs-group-1] <strong>dual-active detection delay 100</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-M-LAG_Configuration_Commands_title.html">M-LAG Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/DISPLAY_M-LAG_UNPAIRED-PORT_SUSPEND.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/DUAL-ACTIVE_DETECTION_ERROR-DOWN.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>