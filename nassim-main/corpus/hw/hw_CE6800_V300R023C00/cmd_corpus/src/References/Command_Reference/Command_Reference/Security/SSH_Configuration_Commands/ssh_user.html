
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ssh user">
<meta name="DC.subject" content="ssh user">
<meta name="keywords" content="ssh user">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_SSH_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SERVER-SOURCE-INTERF(SSHS).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SSH-VERIFY-SAN(SSHS).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="SSH">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="SSH">
<meta name="featuretype" content="Security">
<meta name="featurename" content="SSH">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="DC.Creator" content="SUBSYS_ID_SSHS">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000002194450517">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ssh user</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000002194450517"></a><a name="EN-US_CLIREF_0000002194450517"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">ssh user</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000002194450517__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ssh user</span></b> command creates an SSH user.</p>
<p>The <b><span class="cmdname">ssh user assign</span></b> command assigns an existing public key to an SSH user.</p>
<p>The <b><span class="cmdname">ssh user authentication-type</span></b> command configures the authentication type of an SSH user.</p>
<p>The <b><span class="cmdname">ssh user service-type</span></b> command configures the service type for the SSH user.</p>
<p>The <b><span class="cmdname">ssh user sftp-directory</span></b> command configures the authorized directory of the SFTP service for SSH users.</p>
<p>The <b><span class="cmdname">undo ssh user</span></b> command deletes an SSH user.</p>
<p>The <b><span class="cmdname">undo ssh user assign</span></b> command deletes the binding between an SSH user and a public key.</p>
<p>The <b><span class="cmdname">undo ssh user authentication-type</span></b> command deletes the configured authentication mode.</p>
<p>The <b><span class="cmdname">undo ssh user service-type</span></b> command restores the default service type of an SSH user.</p>
<p>The <b><span class="cmdname">undo ssh user sftp-directory</span></b> command cancels the authorized SFTP service directory for an SSH user.</p>
</p>
<p>By default, no ssh user is created, public key is not assigned to the user, the authentication type of the SSH user is not configured, the service type of the SSH user is not configured, the authorized directory of the SFTP service for the SSH user is not configured.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000002194450517__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">ssh user </span></b><i><span class="varname">user-name</span></i></p>


<p><b><span class="cmdname">ssh user </span></b><i><span class="varname">user-name</span></i> <strong><span>assign</span></strong> { <strong><span>rsa-key</span></strong> | <strong><span>dsa-key</span></strong> | <strong><span>ecc-key</span></strong> | <strong><span>sm2-key</span></strong> } <i><span class="varname">key-name</span></i></p>


<p><b><span class="cmdname">ssh user </span></b><i><span class="varname">user-name</span></i> <strong><span>authentication-type</span></strong> { <strong><span>password</span></strong> | <strong><span>rsa</span></strong> | <strong><span>password-rsa</span></strong> | <strong><span>dsa</span></strong> | <strong><span>password-dsa</span></strong> | <strong><span>all</span></strong> | <strong><span>ecc</span></strong> | <strong><span>password-ecc</span></strong> | <strong><span>sm2</span></strong> | <strong><span>password-sm2</span></strong> | <strong><span>password-x509v3-rsa</span></strong> | <strong><span>x509v3-rsa</span></strong> }</p>


<p><b><span class="cmdname">ssh user </span></b><i><span class="varname">user-name</span></i> <strong><span>service-type</span></strong> { <strong><span>sftp</span></strong> | <strong><span>stelnet</span></strong> | <strong><span>snetconf</span></strong> } <sup>*</sup></p>

<p><b><span class="cmdname">ssh user </span></b><i><span class="varname">user-name</span></i> <strong><span>sftp-directory</span></strong> <i><span class="varname">directoryname</span></i></p>



<p><b><span class="cmdname">ssh user </span></b><i><span class="varname">user-name</span></i> <strong><span>assign</span></strong> <strong><span>pki</span></strong> <i><span class="varname">pki-name</span></i></p>

<p><b><span class="cmdname">undo ssh user </span></b>[ <i><span class="varname">user-name</span></i> ]</p>


<p><b><span class="cmdname">undo ssh user </span></b><i><span class="varname">user-name</span></i> <strong><span>assign</span></strong> { <strong><span>rsa-key</span></strong> | <strong><span>dsa-key</span></strong> | <strong><span>ecc-key</span></strong> | <strong><span>sm2-key</span></strong> }</p>


<p><b><span class="cmdname">undo ssh user </span></b><i><span class="varname">user-name</span></i> <strong><span>authentication-type</span></strong></p>

<p><b><span class="cmdname">undo ssh user </span></b><i><span class="varname">user-name</span></i> <strong><span>service-type</span></strong></p>

<p><b><span class="cmdname">undo ssh user </span></b><i><span class="varname">user-name</span></i> <strong><span>sftp-directory</span></strong></p>

<p><b><span class="cmdname">undo ssh user </span></b><i><span class="varname">user-name</span></i> <strong><span>assign</span></strong> <strong><span>pki</span></strong></p>


</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000002194450517__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">user-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the name of an SSH user.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 253 case-insensitive characters.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>rsa-key</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies to assign an RSA public key to a user.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>dsa-key</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies to assign a DSA public key to a user.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ecc-key</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Assigns an ECC public key to a user.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>sm2-key</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Assigns an SM2 public key to a user.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">key-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of an ECC public key generated on the client.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 40 case-sensitive characters, spaces not supported.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>password</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates password authentication.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>rsa</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the SSH user authentication mode to RSA.</p>
<p>To ensure high security, do not use the RSA algorithm whose length is less than 3072 bits as the authentication type for SSH users. You are advised to use a more secure ECC authentication algorithm to improve security.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>password-rsa</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that both password authentication and RSA authentication must be adopted.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>dsa</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates DSA authentication.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>password-dsa</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that both password authentication and DSA authentication must be adopted.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>all</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates all authentication modes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ecc</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates ECC authentication.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>password-ecc</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that both password authentication and ECC authentication must be adopted.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>sm2</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates SM2 authentication.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>password-sm2</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that both password authentication and SM2 authentication must be adopted.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>password-x509v3-rsa</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that both password authentication and X509V3-SSH-RSA authentication must be adopted.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>x509v3-rsa</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates X509V3-SSH-RSA authentication.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>



<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>sftp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the SFTP service type.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>stelnet</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the STelnet and SCP service type.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>snetconf</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the SNETCONF service type.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>sftp-directory</span></strong> <i><span class="varname">directoryname</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the directory name of the SFTP server.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 255 characters.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pki</span></strong> <i><span class="varname">pki-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates PKI domain.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of 1 to 64 case-insensitive characters without spaces. If an initial certificate is loaded to the specified PKI realm, the certificate is delivered in interactive mode.</p>
</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000002194450517__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000002194450517__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>3: Management level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000002194450517__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><ul><li>You can create an SSH user in either of the following ways:</li><li>Run the <b><span class="cmdname">ssh user</span></b> command to create an SSH user.</li><li>When you run the ssh user authentication-type, ssh user service-type or <b><span class="cmdname">ssh user sftp-directory</span></b> command, if the system detects that user-name does not exist, the system creates an SSH user named user-name.</li><li>The highest privilege level of an SSH user is set to aaa or root using the <b><span class="cmdname">ssh authorization-type default aaa</span></b> or <b><span class="cmdname">ssh authorization-type default root</span></b> command.</li><li>When you run the <b><span class="cmdname">ssh user assign</span></b> command to assign a public key to an SSH user:
<ul><li>If a public key has been assigned to a user, the last assigned public key takes effect.</li><li>The newly configured public key takes effect upon the next login.</li><li>When ECC/DSA/RSA authentication is performed for an SSH user, the ECC/DSA/RSA public key generated on the client needs to be sent to the server, and then the server assigns the public key to the SSH user.</li><li>Before running this command, ensure that the public key on the SSH client is valid.</li><li>To ensure high security, do not use the RSA algorithm whose length is less than 3072 bits as the authentication mode for SSH users. You are advised to use a more secure ECC authentication algorithm.</li></ul>

</li><li>You must specify an authentication mode for a new SSH user. Otherwise, the user cannot log in to the system. The newly configured authentication mode takes effect upon the next login.</li><li>If an authentication type has been configured, running this command deletes the original authentication type and the new authentication type is used.</li><li>Run the <b><span class="cmdname">ssh user service-type</span></b> command to configure the service type for the SSH user.</li><li>When you run the <b><span class="cmdname">ssh user sftp-directory</span></b> command to configure an authorized SFTP service directory for an SSH user:
<ul><li>If user-name does not exist, create an SSH user named user-name and set the authorized SFTP service directory to the configured directory. Alternatively, use the user name configured in local-user &lt;user-name&gt; ftp-directory &lt;directory&gt; [ access-permission { read execute | read write execute } ] to log in.</li><li>If neither the configured directory nor the directory specified by local-user &lt;user-name&gt; ftp-directory &lt;directory&gt; [ access-permission { read execute | read write execute } ] exists, the SFTP client fails to connect to the SSH server.</li><li>When an SFTP user logs in to the device, the path configured using the <b><span class="cmdname">ssh user sftp-directory</span></b> command takes precedence over the path configured using the local-user &lt;user-name&gt; ftp-directory &lt;directory&gt; [ access-permission { read execute | read write execute } ] command. The path configured using the <b><span class="cmdname">sftp server default-directory</span></b> command has the lowest priority.</li></ul>

</li><li>These commands are valid for both IPv4 and IPv6.</li><li>You can run the <b><span class="cmdname">display ssh user-information</span></b> command to view the configurations of all SSH users.</li><li>If ssh user authentication-type all is executed, all can be any of the following types: password-rsa, password-dsa, password-ecc, password-sm2, and password-x509v3-rsa. The public key type in the end user authentication mode depends on the public key algorithm type negotiated during connection establishment. The priorities of public key algorithm negotiation are as follows: ECC, RSA_SHA2_512, RSA_SHA2_256, SM2, X509-RSA-SHA2-256, X509V3-SSH-RSA, RSA, DSA in descending order.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000002194450517__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Assign a PKI certificate to an SSH user.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ssh user testuser assign pki default</strong>
Warning: A preset certificate is loaded to the specified PKI domain. The current operation has security risks. Continue? [Y/N]:Y
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]
</pre>
</div>

<div class="p"># Configure the service type for SSH user testuser.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ssh user testuser service-type all</strong>
</pre>
</div>

<div class="p"># Configure the SFTP service authorized directory of SSH users as flash:/ssh.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ssh user testuser sftp-directory flash:/ssh</strong>
</pre>
</div>

<div class="p"># Delete the ssh user user123.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>undo ssh user user123</strong>
</pre>
</div>


<div class="p"># Assign the key named sm2key001 to user testuser.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ssh user testuser assign sm2-key sm2key001</strong>
</pre>
</div>

<div class="p"># Assign an ECC public key named key1 to the user named testuser.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ssh user testuser assign ecc-key key1</strong>
</pre>
</div>

<div class="p"># Create an SSH user named testuser.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ssh user testuser</strong>
</pre>
</div>

<div class="p"># Set the authentication type to ECC to the SSH user named ssh_user1@dom1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ssh user ssh_user1@dom1 authentication-type ecc</strong>
</pre>
</div>



</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_SSH_Configuration_Commands_title.html">SSH Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/SERVER-SOURCE-INTERF(SSHS).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/SSH-VERIFY-SAN(SSHS).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>