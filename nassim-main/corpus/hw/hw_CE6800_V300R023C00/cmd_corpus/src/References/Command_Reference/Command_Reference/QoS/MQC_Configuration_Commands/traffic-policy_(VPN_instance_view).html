
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="traffic-policy (VPN instance view)">
<meta name="DC.subject" content="traffic-policy (VPN instance view)">
<meta name="keywords" content="traffic-policy (VPN instance view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-MQC_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/TRAFFIC-POLICY_(VLANVIEW).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/TRAFFIC-POLICY_ATOMIC-UPDATE-MODE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MQC">
<meta name="featuretype" content="QoS">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="MQC">
<meta name="featuretype" content="QoS">
<meta name="featurename" content="MQC">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="DC.Creator" content="SUBSYS_ID_DC_MQC">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907608656">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>traffic-policy (VPN instance view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907608656"></a><a name="EN-US_CLIREF_0000001907608656"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">traffic-policy (VPN instance view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907608656__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">traffic-policy</span></b> command applies a traffic policy to a VPN instance.</p>
<p>The <b><span class="cmdname">undo traffic-policy</span></b> command unbinds a traffic policy from a VPN instance.</p>
</p>
<p>By default, no traffic policy is applied to a VPN instance.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907608656__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">traffic-policy </span></b><i><span class="varname">policy-name</span></i> <strong><span>inbound</span></strong></p>

<p><b><span class="cmdname">undo traffic-policy </span></b><i><span class="varname">policy-name</span></i> <strong><span>inbound</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907608656__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">policy-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a traffic policy.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>inbound</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Applies a traffic policy to a VPN instance in the inbound direction.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907608656__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>VPN instance view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907608656__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907608656__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Packets are classified based on Layer 2 information, Layer 3 information, or ACL rules. To implement differentiated services for service flows of the packets, bind a traffic classifier and a traffic behavior to the created traffic policy and apply the traffic policy. The <b><span class="cmdname">traffic-policy</span></b> command applies a traffic policy to a VPN instance.</p>
<p><strong>Prerequisites</strong></p>
<p>A traffic policy has been created by using the <b><span class="cmdname">traffic policy</span></b> command.</p>
<p><strong>Precautions</strong></p>
<ul><li>After a traffic policy is applied to a VPN instance, the traffic policy takes effect for packets received and sent in the VPN instance.</li><li>After a traffic policy is applied to a VPN instance, you cannot directly delete the traffic policy or the traffic classifier and traffic behavior in the traffic policy. To delete the traffic policy that has been applied, run the <b><span class="cmdname">undo traffic-policy</span></b> command in the corresponding view to unbind the traffic policy and then run the <b><span class="cmdname">undo traffic policy</span></b> command in the system view to delete the traffic policy.</li><li>You can change the traffic classification rules, ACL rules, actions defined by the traffic behavior, and relationship between the traffic classifier and traffic behaviors of an applied traffic policy. However, the changes may lead to a failure in delivering the traffic policy. If the traffic policy fails to be delivered, a message indicating the failure cause will be displayed. To view the traffic policy delivery failure cause, run the <b><span class="cmdname">display traffic-policy applied-record</span></b> command.</li><li>A traffic policy can be applied to a VPN instance only in the inbound direction.</li><li>When a traffic policy is applied to a VPN instance, traffic classifiers bound to the traffic policy cannot match IPv6 packets.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907608656__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Create a traffic policy p1, bind the created traffic classifier c1 and traffic behavior b1 to the traffic policy, and apply the traffic policy to the VPN instance test in the inbound direction.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>traffic classifier c1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-classifier-c1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>traffic behavior b1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-behavior-b1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>traffic policy p1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-trafficpolicy-p1] <strong>classifier c1 behavior b1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-trafficpolicy-p1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-test] <strong>traffic-policy p1 inbound</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-MQC_Configuration_Commands_title.html">MQC Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/TRAFFIC-POLICY_(VLANVIEW).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/TRAFFIC-POLICY_ATOMIC-UPDATE-MODE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>