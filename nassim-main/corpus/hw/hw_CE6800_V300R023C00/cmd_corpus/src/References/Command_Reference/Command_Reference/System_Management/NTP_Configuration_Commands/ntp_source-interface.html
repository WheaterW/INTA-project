
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ntp source-interface">
<meta name="DC.subject" content="ntp source-interface">
<meta name="keywords" content="ntp source-interface">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_NTP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/NTP-SERVER-SOURCE-INTERFACE-ALL(NTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/NTP-SOURCE-PORT(NTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Creator" content="SUBSYS_ID_NTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000002194449329">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ntp source-interface</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000002194449329"></a><a name="EN-US_CLIREF_0000002194449329"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1"><span>ntp source-interface</span></h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000002194449329__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ntp source-interface</span></b> command enables an IPv4 interface to send NTP messages.</p>
<p>The <b><span class="cmdname">undo ntp source-interface</span></b> command disables an IPv4 interface from sending NTP messages.</p>
</p>
<p>By default, no interface is specified for sending NTP messages.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000002194449329__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">


<p><b><span class="cmdname">ntp </span></b>[ <strong><span>ipv6</span></strong> ] <strong><span>source-interface</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface_type</span></i> <i><span class="varname">interface_num</span></i> } [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpnName</span></i> ]</p>



<p><b><span class="cmdname">undo ntp </span></b>[ <strong><span>ipv6</span></strong> ] <strong><span>source-interface</span></strong> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpnName</span></i> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000002194449329__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv6</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the NTP IPv6 service.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the interface for sending NTP messages.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 47 case-sensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface_type</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the type and number of a local interface that sends NTP packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface_num</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the type and number of a local interface that sends NTP packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 47 case-sensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpnName</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a VPN instance name.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters, spaces not supported. The VPN instance name cannot be _public_. If the character string is quoted by double quotation marks, the character string can contain spaces.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000002194449329__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000002194449329__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000002194449329__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>In the unicast mode, if you want only one IP address to send the NTP request or response packets, specify the interface of which an IP address is used as a source interface.<p></p>
</p>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>In the broadcast and multicast modes, the NTP service is enabled on the specified interface that actually is the source interface. Therefore, the <b><span class="cmdname">ntp source-interface</span></b> command is invalid for the broadcast and multicast modes.</li><li>If you have specified a VPN instance when configuring a source IP address using this command, the source IP address can be used only by the NTP client mapping the specified VPN instance instead of other VPN instances or NTP clients that do not have the specified VPN instance.</li><li>If this command is the first NTP configuration command, the system automatically adds the ntp [ ipv6 ] server disable command to the configuration file to disable the NTP server function. To enable the NTP service, run the undo ntp [ ipv6 ] server disable command. If this command is the last NTP configuration command to be deleted, the system automatically deletes the ntp [ ipv6 ] server disable command from the configuration file when you delete this command.</li><li>If a VPN instance is specified, the instance must have been created using the <b><span class="cmdname">ip vpn-instance vpn-instance-name</span></b> command, and the corresponding address family must have been enabled using the ipv4-family (VPN instance view) or ipv6-family (VPN instance view) command based on the IPv4 or IPv6 service configured for the NTP peer. Otherwise, this command fails to be executed.</li><li>When the <b><span class="cmdname">ntp source-interface</span></b> command is run on the server, the destination IP address sent by the client rather than the IP address of the interface is specified as the source IP address in the packet. If the <b><span class="cmdname">ntp source-interface</span></b> command is run on the client, the IP address of the interface is specified as the client IP address in the packet.</li><li>If the VPN instance or source interface specified in the command is deleted, the source interface configuration of the corresponding NTP server is also deleted.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000002194449329__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Specify the IPv6 address of Vlanif 100 as the source IPv6 address for sending all NTP packets.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>vlan batch 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface Vlanif 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-Vlanif100] <strong>ipv6 enable</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-Vlanif100] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ntp ipv6 source-interface Vlanif 100</strong>
</pre>
</div>

<div class="p"># Specify the IPv4 address of Vlanif 100 as the source IPv4 address for sending NTP packets.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>vlan batch 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ntp source-interface Vlanif 100</strong>
</pre>
</div>






</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_NTP_Configuration_Commands_title.html">NTP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/NTP-SERVER-SOURCE-INTERFACE-ALL(NTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/NTP-SOURCE-PORT(NTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>