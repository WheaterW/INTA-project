
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="vpn-target (VPN instance IPv4 address family view)">
<meta name="DC.subject" content="vpn-target (VPN instance IPv4 address family view)">
<meta name="keywords" content="vpn-target (VPN instance IPv4 address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_MPLS_IP_VPN_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SRIMPORTRTSYS(STATICRTOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/VPN-TARGET(L3VPNOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv4 L3VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="IPv4 L3VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="IPv4 L3VPN">
<meta name="featuretype" content="VPN">
<meta name="featuretype" content="VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Creator" content="SUBSYS_ID_L3VPNOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907766760">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>vpn-target (VPN instance IPv4 address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907766760"></a><a name="EN-US_CLIREF_0000001907766760"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">vpn-target (VPN instance IPv4 address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907766760__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">vpn-target</span></b> command configures VPN targets for a VPN instance IPv4 address family.</p>
<p>The <b><span class="cmdname">undo vpn-target</span></b> command deletes the VPN targets of a VPN instance IPv4 address family.</p>
</p>
<p>By default, no VPN target is configured for a VPN instance IPv4 address family.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907766760__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">vpn-target </span></b>{ <i><span class="varname">vpn-target</span></i> } &amp;&lt;1-8&gt; [ <i><span class="varname">vrfRtType</span></i> ]</p>

<p><b><span class="cmdname">undo vpn-target </span></b>{ <i><span class="varname">vpn-target</span></i> } &amp;&lt;1-8&gt; [ <i><span class="varname">vrfRtType</span></i> ]</p>

<p><b><span class="cmdname">undo vpn-target all</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907766760__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">vpn-target</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a VPN target to be configured for a VPN instance IPv4 address family.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The format of a VPN target can be as follows:</p>
<ul><li>2-byte AS number: 4-byte user-defined number, for example, 1:3. An AS number is an integer ranging from 0 to 65535, and a user-defined number is an integer ranging from 0 to 4294967295. The AS and user-defined numbers cannot be both 0s. This means that a VPN target cannot be 0:0.</li><li>Integral 4-byte AS number: 2-byte user-defined number, for example, 65537:3. An AS number is an integer ranging from 65536 to 4294967295, and a user-defined number is an integer ranging from 0 to 65535.</li><li>4-byte AS number in dotted notation: 2-byte user-defined number, for example, 0.0:3 or 0.1:0. A 4-byte AS number in dotted notation is in the format of x.y, where x and y are integers ranging from 0 to 65535. A user-defined number is an integer ranging from 0 to 65535. The AS and user-defined numbers cannot be both 0s. This means that a VPN target cannot be 0.0:0.</li><li>32-bit IP address: 2-byte user-defined number. For example, 192.168.122.15:1. An IP address ranges from 0.0.0.0 to 255.255.255.255, and a user-defined number is an integer ranging from 0 to 65535.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">vrfRtType</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Adds a VPN target to the VPN target list of a VPN instance IPv4 address family.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is an enumerated type:</p>
<ul><li>both: adds a VPN target to both the import and export VPN target lists of a VPN instance IPv4 address family. If both, export-extcommunity, and import-extcommunity are not configured in the vpn-target command, a VPN target is added to both lists by default.</li><li>export-extcommunity: adds a VPN target to the export VPN target list of a VPN instance IPv4 address family.</li><li>import-extcommunity: adds a VPN target to the import VPN target list of a VPN instance IPv4 address family.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>all</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Deletes all the VPN targets of a VPN instance IPv4 address family.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907766760__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>VPN instance IPv4 address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907766760__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907766760__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>When a local PE advertises VPNv4 routes to peer PEs, the VPNv4 routes carry all the export VPN targets of the local VPN instance IPv4 address family. The received VPNv4 routes can be added to the routing table of the local VPN instance IPv4 address family only when their VPN targets belong to the list of import VPN targets of the local VPN instance IPv4 address family. To configure VPN targets for a VPN instance IPv4 address family, run the <b><span class="cmdname">vpn-target</span></b> command.<p></p>
<span>A maximum of eight VPN targets can be specified in</span> the <b><span class="cmdname">vpn-target</span></b> command. If you want to configure more VPN targets in a VPN instance IPv4 address family view, run the <b><span class="cmdname">vpn-target</span></b> command more than once.</p>
<p><strong>Prerequisites</strong></p>
<p><p>A route distinguisher (RD) has been configured for the VPN instance IPv4 address family using the <b><span class="cmdname">route-distinguisher</span></b> command.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<p><p>If the <b><span class="cmdname">vpn-target</span></b> command is not used, a PE does not install received VPNv4 routes into the routing table of its VPN instance IPv4 address family.<p></p>
<span>If all the VPN targets of the IPv4 address family</span> of a VPN instance are deleted using the <b><span class="cmdname">undo vpn-target</span></b> command, all routes learned by the IPv4 address family of the VPN instance from other VPN instances will be deleted.</p>
</p>
<p><strong>Follow-up Procedure</strong></p>
<p><p>Run the <b><span class="cmdname">ipv4-family vpn-instance</span></b> command in the BGP view to synchronize the VPN targets of the VPN instance IPv4 address family to the BGP VPN instance IPv4 address family.</p>
</p>
<p><strong>Precautions</strong></p>
<p>Adding, modifying, or deleting VPN targets may cause BGP peers in a BGP VPN instance to update large numbers of sent, received, locally leaked, and remotely leaked routes.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907766760__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Add 3:3 to the export VPN target list and 4:4 to the import VPN target list of VPN instance vrf1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vrf1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vrf1] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vrf1-af-ipv4] <strong>route-distinguisher 100:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vrf1-af-ipv4] <strong>vpn-target 3:3 export-extcommunity</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vrf1-af-ipv4] <strong>vpn-target 4:4 import-extcommunity</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_MPLS_IP_VPN_Configuration_Commands_title.html">IPv4 L3VPN Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/SRIMPORTRTSYS(STATICRTOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/VPN-TARGET(L3VPNOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>