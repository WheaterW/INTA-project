
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="pim join-policy">
<meta name="DC.subject" content="pim join-policy">
<meta name="keywords" content="pim join-policy">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IPv4_PIM_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PIM-IGNORE(PIMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/MCAST-MIB-CFG(MRMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Creator" content="SUBSYS_ID_PIMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942845529">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>pim join-policy</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942845529"></a><a name="EN-US_CLIREF_0000001942845529"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">pim join-policy</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942845529__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">pim join-policy</span></b> command enables an interface to filter join information in Join/Prune messages.</p>
<p>The <b><span class="cmdname">undo pim join-policy</span></b> command restores the default configuration.</p>
</p>
<p>By default, an interface does not filter join information in Join/Prune messages.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942845529__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">pim join-policy </span></b>{ <i><span class="varname">advanced-acl-number</span></i> | { <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } | { <strong><span>asm</span></strong> { <i><span class="varname">basic-acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } | <strong><span>ssm</span></strong> { <i><span class="varname">advanced-acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } } }</p>

<p><b><span class="cmdname">undo pim join-policy</span></b></p>

<p><b><span class="cmdname">undo pim join-policy ssm</span></b></p>

<p><b><span class="cmdname">undo pim join-policy asm</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942845529__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">advanced-acl-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of an advanced ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 3000 to 3999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">acl-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a named ACL for ASM.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters, spaces not supported. The name must start with a letter or digit, and cannot contain only digits.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a named ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters, spaces not supported. The name must start with a letter or digit, and cannot contain only digits.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>asm</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables an interface to filter join information of group addresses in the ASM address range.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">basic-acl-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a basic ACL for ASM.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 2000 to 2999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ssm</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables an interface to filter join information sent by specified source addresses to group addresses in the SSM address range.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942845529__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100ge sub-interface view,</span><span>100GE interface view,</span><span>10GE sub-interface view,</span><span>10GE interface view,</span><span>200GE sub-interface view,</span><span>200GE interface view,</span><span>25GE sub-interface view,</span><span>25GE interface view,</span><span>400GE sub-interface view,</span><span>400GE interface view,</span><span>50GE sub-interface view,</span><span>50GE interface view,</span><span>Eth-Trunk sub-interface view,</span><span>Eth-Trunk interface view,</span><span>Loopback interface view,</span><span>VBDIF interface view,</span><span>VLANIF interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942845529__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942845529__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>To protect a Router against Join/Prune message attacks, run the pim join-policy command to configure a join information filter policy by setting valid source and group address ranges for Join/Prune messages. The policy enables the Router to discard join information that does not match the specified filter policy.</p>
<p><strong>Prerequisites</strong></p>
<p>The multicast routing-enable command has been run in the instance to which the interface belongs. This command is valid only for PIM-SM.</p>
<p><strong>Configuration Impact</strong></p>
<p>If asm or ssm is configured more than once, the latest configuration overrides the previous one. You can configure both a basic ACL and an advanced ACL to filter the join information with group addresses in the ASM address range and SSM address range, respectively.<p></p>
<span>After the pim join-policy command is run</span>:</p>

<ul><li>If join information carried in a Join/Prune message matches the permit clause defined in the ACL, the join information is accepted, and an (S, G) entry is created for the join information.</li><li>If join information carried in a Join/Prune message matches the deny clause defined in the ACL or no action is defined for the join information, the join information is discarded, and no (S, G) entry is created for the join information.</li><li>If the ACL specified by the advanced-acl-number parameter does not exist, all join information is discarded.</li></ul>
<p><strong>Precautions</strong></p>
<p>The command can be used to filter PIM Join messages in either of the following modes:</p>

<ol><li>The pim join-policy { asm { &lt;basic-acl-number&gt; | acl-name &lt;acl-name&gt; } | ssm { &lt;advanced-acl-number&gt; | acl-name &lt;acl-name&gt; } } command is used to specify whether to filter Join messages in the ASM group address range or SSM group address range. If PIM Join messages with multicast group addresses in the ASM address range need to be filtered, the asm parameter must be specified in the command. If PIM Join messages with multicast group addresses in the SSM address range need to be filtered, the ssm parameter must be specified in the command.<p></p>
<span>You do not need to specify the ASM or SSM mode in</span> the pim join-policy {&lt;advanced-acl-number&gt; | acl-name &lt;acl-name&gt; } } command. The pim join-policy {&lt;advanced-acl-number&gt; | acl-name &lt;acl-name&gt; } } command can filter the join requests of the ASM or SSM group range. The filtering rules are as follows:<p></p>
<span>When configuring filtering rules for an advanced ACL</span> or a named ACL:<p></p>
<span>For the rules used to filter PIM Join messages with</span> multicast group addresses in the ASM address range:</li><li>Filtering (*, G) entries only: The source address in the ACL rule must be set to 127.255.255.254, and the destination address must be set to the group address to be filtered.</li><li>Filtering (S, G) entries with any source address: If the source address of an ACL rule is set to Any and the destination address is a multicast group address, (S, G) entries with any source address can be filtered.</li><li>Filtering (S, G) entries: If the source address in an ACL rule specifies a multicast source address and the destination address specifies a multicast group address, packets are filtered based on the source/group address. If the source address in an ACL rule specifies a multicast source address and the destination address is set to Any, packets are filtered based on the source address. If the source address in an ACL rule is set to Any and the destination address is a multicast group address, packets are filtered based on multicast groups.</li><li>(S, G, RPT) is not filtered.<p></p>
<span>For the rules used to filter PIM Join messages with</span> multicast group addresses in the SSM address range:<p></p>
<span>Filtering</span> (S, G) entries: If the source address in an ACL rule specifies a multicast source address and the destination address specifies a multicast group address, packets are filtered based on the source/group address. If the source address in an ACL rule specifies a multicast source address and the destination address is set to Any, packets are filtered based on the source address. If the source address in an ACL rule is set to Any and the destination address is a multicast group address, packets are filtered based on multicast groups.</li></ol>
<p><p>Only CE6866, CE6860-SAN, CE6866K, CE6860-HAM, CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, CE8850-HAM, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE8855, CE8851-32CQ4BQ, CE6855-48XS8CQ, CE6885-SAN, CE6885, CE6885-LL(standard forwarding mode), CE6885-T, CE6863E-48S8CQ support this command in the VBDIF interface view.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942845529__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># In the public network instance, enable an interface to accept join information in which the source address is in the 10.10.0.0/16 range and group address in the 225.1.0.0/16 range, so that the device can create (S, G) entries for join information that meets the specified filter conditions.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl number 3000</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-advance-3000] <strong>rule permit ip source 10.10.0.0 0.0.255.255 destination 225.1.0.0 0.0.255.255</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-advance-3000] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>multicast routing-enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>vlan 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vlan1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface Vlanif 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Vlanif1] <strong>pim join-policy ssm 3000</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IPv4_PIM_Configuration_Commands_title.html">PIM Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PIM-IGNORE(PIMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/MCAST-MIB-CFG(MRMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>