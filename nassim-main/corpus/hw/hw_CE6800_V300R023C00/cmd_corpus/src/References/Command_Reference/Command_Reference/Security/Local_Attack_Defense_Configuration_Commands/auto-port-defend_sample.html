
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="auto-port-defend sample">
<meta name="DC.subject" content="auto-port-defend sample">
<meta name="keywords" content="auto-port-defend sample">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-Local_Attack_Defense_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/AUTO-PORT-DEFEND_PROTOCOL_THRESHOLD.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/AUTO-PORT-DEFEND_WHITELIST.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="DC.Creator" content="SUBSYS_ID_CPUDEFEND">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907767892">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>auto-port-defend sample</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907767892"></a><a name="EN-US_CLIREF_0000001907767892"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">auto-port-defend sample</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907767892__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">auto-port-defend sample</span></b> command sets the protocol packet sampling ratio for port attack defense.</p>
<p>The <b><span class="cmdname">undo auto-port-defend sample</span></b> command restores the default protocol packet sampling ratio for port attack defense.</p>
</p>
<p>By default, the packet sampling ratio is 8. That is, one packet is sampled in every 8 packets.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907767892__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">auto-port-defend sample </span></b><i><span class="varname">sample-value</span></i></p>

<p><b><span class="cmdname">undo auto-port-defend sample</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907767892__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">sample-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the packet sampling ratio for auto port defend.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer in the range from 1 to 1024.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907767892__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Attack defense policy view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907767892__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907767892__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>A device with port attack defense enabled identifies attacks by analyzing sampled packets. There may be errors in attack packet identification or packet rate calculation. Errors influence the attack defense effect. An appropriate sampling ratio helps you control attack defense accuracy.<p></p>
<span>A small sampling ratio improves attack defense accuracy</span>, but consumes more CPU resources. When the sampling ratio is set to 1, the device analyzes every packet. The attack packets can be detected quickly, but CPU usage becomes high and services are affected. Therefore, make a balance between the attack defense requirement and CPU usage to decide a sampling ratio.</p>
<p><strong>Precautions</strong></p>
<p>If the protocol packet rate threshold for port attack defense is set to a small value, the attack identification error caused by packet sampling ratio is large.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907767892__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the protocol packet sampling ratio to 4 in the attack defense policy test view.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>cpu-defend policy test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-cpu-defend-policy-test] <strong>auto-port-defend sample 4</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-Local_Attack_Defense_Configuration_Commands_title.html">Local Attack Defense Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/AUTO-PORT-DEFEND_PROTOCOL_THRESHOLD.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/AUTO-PORT-DEFEND_WHITELIST.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>