
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="vrrp vrid preempt timer delay">
<meta name="DC.subject" content="vrrp vrid preempt timer delay">
<meta name="keywords" content="vrrp vrid preempt timer delay">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_VRRP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PREEMPT-MODE(VRRPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PRIORITY(VRRPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Creator" content="SUBSYS_ID_VRRPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942846605">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>vrrp vrid preempt timer delay</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942846605"></a><a name="EN-US_CLIREF_0000001942846605"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">vrrp vrid preempt timer delay</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942846605__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">vrrp vrid preempt timer delay</span></b> command sets a preemption delay for a device in a VRRP group.</p>
<p>The <b><span class="cmdname">undo vrrp vrid preempt timer delay</span></b> command restores the default preemption delay.</p>
</p>
<p>The default preemption delay is 5 seconds for a preemption caused by an interface Up event or  0 seconds (indicating immediate preemption) for a preemption caused by other reasons.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942846605__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">vrrp vrid </span></b><i><span class="varname">virtual-router-id</span></i> <strong><span>preempt</span></strong> <strong><span>timer</span></strong> <strong><span>delay</span></strong> <i><span class="varname">delay-time</span></i></p>

<p><b><span class="cmdname">undo vrrp vrid </span></b><i><span class="varname">virtual-router-id</span></i> <strong><span>preempt</span></strong> <strong><span>timer</span></strong> <strong><span>delay</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942846605__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>delay</span></strong> <i><span class="varname">delay-time</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the preempt delay.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 3600, in seconds.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vrid</span></strong> <i><span class="varname">virtual-router-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the ID of a VRRP group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942846605__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100GE interface view,</span><span>10GE interface view,</span><span>200GE interface view,</span><span>25GE interface view,</span><span>400GE interface view,</span><span>50GE interface view,</span><span>Eth-Trunk interface view,</span><span>VLANIF interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942846605__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942846605__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Set the preemption delay to 0 on the backup device to allow it to become a master device immediately after its priority changes; set the preemption delay to a non-0 value on the master device so that it can preempt the Master state after a specified delay if a master/backup VRRP switchover is performed. After the faulty master device in the VRRP group recovers, receives protocol packets, and has a lot of service configurations, the master device slowly delivers the VRRP forwarding table. An immediate traffic switchback leads to packet loss on the master device. To prevent packet loss, properly set a delay time in this situation.</p>
<p><strong>Prerequisites</strong></p>
<p>A VRRP group has been configured using the <b><span class="cmdname">vrrp vrid virtual-ip</span></b> command.</p>
<p><strong>Configuration Impact</strong></p>
<p>After the vrrp vrid preempt-mode timer delay command is run, the device in the specified VRRP group on a specified interface preempts the master device after the preemption delay expires.</p>
<p><strong>Precautions</strong></p>
<ul><li>When the IP address owner (the VRRP device uses the virtual IP address of the VRRP group as the real interface address) recovers from a fault, it immediately switches to the master device without waiting for the preemption delay to expire. The preemption delay is a period during which a backup device is waiting to preempt the master role. Therefore, the preemption delay does not take effect on the IP address owner. For the VRRP group that needs to support the preemption delay, the master device cannot be configured as the IP address owner.</li><li>To enable rapid VRRP switchback in mVRRP scenarios, run the vrrp vrid fast-resume command to set the preemption delay to 0. Otherwise, rapid VRRP switchback is automatically disabled.</li><li>If the VRRP group is associated with a BFD session or an interface in increase mode and the new VRRP priority is higher than the VRRP priority of the master, the VRRP group immediately preempts the master role without waiting for the preemption delay to expire.</li><li>When a device or board is restarted and a large number of services are configured, the backup device may fail to receive protocol packets from the master device immediately after the restart. As a result, the backup device becomes the master device due to a timeout and the configured preemption delay does not take effect. Therefore, you are advised to set a proper status recovery delay by using the vrrp recover-delay command.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942846605__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the preemption delay in VRRP group 1 to 5 seconds.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ip address 10.1.1.1 24</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>vrrp vrid 1 virtual-ip 10.1.1.111</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>vrrp vrid 1 preempt timer delay 5</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_VRRP_Configuration_Commands_title.html">VRRP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PREEMPT-MODE(VRRPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PRIORITY(VRRPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>