
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="certificate auto-update enable">
<meta name="DC.subject" content="certificate auto-update enable">
<meta name="keywords" content="certificate auto-update enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-PKI_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CA-NAME.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CERTIFICATE_UPDATE_EXPIRE-TIME.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="DC.Creator" content="SUBSYS_ID_SEC_PKI">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907608108">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>certificate auto-update enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907608108"></a><a name="EN-US_CLIREF_0000001907608108"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">certificate auto-update enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907608108__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">certificate auto-update enable</span></b> command enables CMPv2-based automatic certificate update.</p>
<p>The <b><span class="cmdname">undo certificate auto-update enable</span></b> command disables CMPv2-based automatic certificate update.</p>
</p>
<p>By default, the CMPv2-based automatic certificate update is disabled.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907608108__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">certificate auto-update enable</span></b></p>

<p><b><span class="cmdname">undo certificate auto-update enable</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907608108__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907608108__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>PKI CMP session view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907608108__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907608108__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>If a certificate obtained through CMPv2 is about to expire, run this command to enable CMPv2-based automatic certificate update to ensure certificate validity. After the command is executed, the system performs checks (for example, referenced PKI entity, URL for the CMPv2 server, RSA key pair for CMPv2-based certificate application). The configuration is successful only when the conditions are met. After this command is configured, the system checks configurations. If conditions are met, configurations succeed. When the system detects that the remaining validity period of the local certificate has reached the value specified in certificate update expire-time, the system automatically initiates the certificate update request and decides whether to create an RSA key pair based on the cmp-request rsa local-key-pair configuration. After the new certificate is obtained, the system replaces the previous certificate and RSA key pair with the new ones.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907608108__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable CMPv2-based automatic certificate update.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki entity entity_test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-entity-entity_test] <strong>common-name e1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-entity-entity_test] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki rsa local-key-pair create key1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki import-certificate local filename cert_local.cer</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki cmp session test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-cmp-session-test] <strong>cmp-request entity entity_test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-cmp-session-test] <strong>cmp-request ca-name "C=cn,ST=beijing,L=shangdi,O=BB,OU=BB,CN=BB"</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-cmp-session-test] <strong>cmp-request server url http://172.16.73.168:8080</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-cmp-session-test] <strong>cmp-request rsa local-key-pair key1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-cmp-session-test] <strong>cmp-request authentication-cert cert_local.cer</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-cmp-session-test] <strong>certificate auto-update enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-PKI_Configuration_Commands_title.html">PKI Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/CA-NAME.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/CERTIFICATE_UPDATE_EXPIRE-TIME.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>