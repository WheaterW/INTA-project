
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="isis authentication-mode (P2P interface)">
<meta name="DC.subject" content="isis authentication-mode (P2P interface)">
<meta name="keywords" content="isis authentication-mode (P2P interface)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IS-IS_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/ISIS-AUTHENTICATION-MODE_LAN(ISISCOMMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/ISIS-BFD-BLOCK(ISISCOMMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IS-IS">
<meta name="featurename" content="IS-ISv6">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="IS-IS">
<meta name="featurename" content="IS-ISv6">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="IS-IS">
<meta name="featurename" content="IS-ISv6">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_ISISCOMMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907605692">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>isis authentication-mode (P2P interface)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907605692"></a><a name="EN-US_CLIREF_0000001907605692"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">isis authentication-mode (P2P interface)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907605692__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">isis authentication-mode</span></b> command configures an IS-IS P2P interface to authenticate Hello packets using the specified authentication mode and password.</p>
<p>The <b><span class="cmdname">undo isis authentication-mode</span></b> command cancels the authentication and deletes the password.</p>
</p>
<p><p>
By default, no password is set and no authentication is performed. Configuring authentication is recommended to ensure system security.
</p>
<p>
It is recommended that you enable authentication and use the HMAC-SHA256 algorithm to improve security, preventing route information from being modified by unauthorized users.
</p>
</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907605692__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">isis authentication-mode </span></b>{ <strong><span>simple</span></strong> { [ <strong><span>cipher</span></strong> ] <i><span class="varname">simple-cipher</span></i> | <strong><span>plain</span></strong> <i><span class="varname">simple-plain</span></i> } | <strong><span>md5</span></strong> { [ <strong><span>cipher</span></strong> ] <i><span class="varname">cipher</span></i> | <strong><span>plain</span></strong> <i><span class="varname">plain</span></i> } } [ <strong><span>ip</span></strong> | <strong><span>osi</span></strong> ] [ <strong><span>send-only</span></strong> ]</p>

<p><b><span class="cmdname">isis authentication-mode keychain </span></b><i><span class="varname">keychain-name</span></i> [ <strong><span>send-only</span></strong> ]</p>

<p><b><span class="cmdname">isis authentication-mode hmac-sha256 key-id </span></b><i><span class="varname">key-id</span></i> { [ <strong><span>cipher</span></strong> ] <i><span class="varname">cipher</span></i> | <strong><span>plain</span></strong> <i><span class="varname">plain</span></i> } [ <strong><span>send-only</span></strong> ]</p>

<p><b><span class="cmdname">undo isis authentication-mode</span></b></p>

<p><b><span class="cmdname">undo isis authentication-mode </span></b>{ <strong><span>simple</span></strong> { <strong><span>cipher</span></strong> <i><span class="varname">simple-cipher</span></i> | <strong><span>plain</span></strong> <i><span class="varname">simple-plain</span></i> } | <strong><span>md5</span></strong> { <strong><span>cipher</span></strong> <i><span class="varname">cipher</span></i> | <strong><span>plain</span></strong> <i><span class="varname">plain</span></i> } } [ <strong><span>ip</span></strong> | <strong><span>osi</span></strong> ] [ <strong><span>send-only</span></strong> ]</p>

<p><b><span class="cmdname">undo isis authentication-mode keychain </span></b><i><span class="varname">keychain-name</span></i> [ <strong><span>send-only</span></strong> ]</p>

<p><b><span class="cmdname">undo isis authentication-mode hmac-sha256 key-id </span></b><i><span class="varname">key-id</span></i> { <strong><span>cipher</span></strong> <i><span class="varname">cipher</span></i> | <strong><span>plain</span></strong> <i><span class="varname">plain</span></i> } [ <strong><span>send-only</span></strong> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907605692__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>simple</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the simple authentication.</p>
<p>For security purposes, you are advised to configure a password in ciphertext mode. To further improve device security, periodically change the password.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>cipher</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the password is in ciphertext mode. You can enter a cleartext or ciphertext. When you view the configuration file, the password is displayed in ciphertext. The ciphertext mode is used by default.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>cipher</span></strong> <i><span class="varname">simple-cipher</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the ciphertext mode. The simple text or ciphertext can be entered. The password in the configuration file is displayed as a ciphertext. MD5 authentication uses the ciphertext mode by default.</p>
<p>A ciphertext password is a character string that is encrypted using a special algorithm. A ciphertext is used for configuration restoration. The parameter value must be the same as the ciphertext in the configuration file.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is a string of case-sensitive characters that can be letters or digits.</p>
<p>In simple authentication, the value is a string of 1 to 16 characters in the simple text mode or a string of 24 to 128 characters in the ciphertext mode. In MD5 or hmac-sha256 authentication, the value is a string of 1 to 255 characters in the simple text mode or a string of 20 to 432 characters in the ciphertext mode.</p>
<ul><li>A 24-character ciphertext password configured in an earlier version is also supported in this version.</li><li>A password cannot contain a question mark (?), but can contain spaces if surrounded by double quotation marks (""). In this case, the double quotation marks are part of the password.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">cipher</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a ciphertext password.</p>
<p>A ciphertext password is a character string that is encrypted using a special algorithm. A ciphertext is used for configuration restoration. The parameter value must be the same as the ciphertext in the configuration file.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is a string of case-sensitive characters that can be letters or digits.</p>
<ul><li>In simple authentication, the value is a string of 1 to 16 characters in a simple text, or a string of 24 to 128 characters in a ciphertext.</li><li>In md5 or hmac-sha256 authentication, the value is a string of 1 to 255 characters in a simple text, or a string of 20 to 432 characters in a ciphertext.</li><li>A 24-character ciphertext password configured in an earlier version is also supported in this version.</li><li>A password cannot contain a question mark (?), but can contain spaces if surrounded by double quotation marks (""). In this case, the double quotation marks are part of the password.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">simple-cipher</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a simple-text or ciphertext password.</p>
<p>A ciphertext password is a character string that is encrypted using a special algorithm. A ciphertext is used for configuration restoration. The parameter value must be the same as the ciphertext in the configuration file.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is a string of case-sensitive characters that can be letters or digits.</p>
<ul><li>In simple authentication, the value is a string of 1 to 16 characters in a simple text, or a string of 24 to 128 characters in a ciphertext.</li><li>In md5 or hmac-sha256 authentication, the value is a string of 1 to 255 characters in a simple text, or a string of 20 to 432 characters in a ciphertext.</li><li>A 24-character ciphertext password configured in an earlier version is also supported in this version.</li><li>A password cannot contain a question mark (?), but can contain spaces if surrounded by double quotation marks (""). In this case, the double quotation marks are part of the password.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>plain</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the simple text mode. Only the simple text can be entered. The password in the configuration file is displayed as a simple text. Simple authentication used the simple text mode by default.</p>
<p>When configuring an authentication password, select the ciphertext mode because the password is saved in the configuration file as a simple text if you select the simple text mode, which has a high risk. To ensure device security, change the password periodically.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">plain</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a cleartext password.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of case-sensitive characters that can be letters or digits.</p>
<p>When the authentication mode is simple, the value is a string of 1 to 16 characters. When the authentication mode is md5 or hmac-sha256, the value is a string of 1 to 255 characters.</p>
<p>The value cannot contain question marks (?) or spaces. However, when double quotation marks are used around the password, spaces are allowed in the password. In this case, the double quotation marks are used as a part of the password.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">simple-plain</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a simple-text password.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of case-sensitive characters that can be letters or digits.</p>
<p>In simple authentication, the value is a string of 1 to 16 characters. In MD5 or hmac-sha256 authentication, the value is a string of 1 to 255 characters.</p>
<p>A password cannot contain a question mark (?), but can contain spaces if surrounded by double quotation marks (""). In this case, the double quotation marks are part of the password.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>md5</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the password is transmitted after being encrypted using HMAC-MD5.</p>
<p>For the sake of security, using the HMAC-SHA256 algorithm rather than the MD5 algorithm is recommended.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ip</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the IP authentication password. This parameter cannot be configured when keychain authentication is used.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>osi</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the OSI authentication password. This parameter cannot be configured when keychain authentication is used.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>send-only</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Encapsulates the Hello packets to be sent with authentication information and ignores checking authentication information carried in received Hello packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>keychain</span></strong> <i><span class="varname">keychain-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the keychain that changes with time.</p>
<p>Before configuring this parameter, run the keychain command to create a keychain, and run the key-id, key-string, and algorithm commands to configure the key ID, password, and authentication algorithm for the keychain. Otherwise, the authentication fails.</p>
<p>Keychain authentication supports only HMAC-MD5, HMAC-SHA256, HMAC-SHA384, and HMAC-SHA512 algorithms.</p>
<p>If the dependent keychain is deleted, the neighbor relationship may be interrupted. Therefore, exercise caution when deleting the keychain.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of 1 to 47 case-insensitive characters.</p>
<p>The value cannot contain question marks (?) and spaces. However, when double quotation marks are used around the password, spaces are allowed in the password. In this case, the double quotation marks are used as a part of the password.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>hmac-sha256</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Encapsulates generated packets with the HMAC-SHA256 authentication and a password encrypted using the HMAC-SHA256 algorithm and authenticates received packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>key-id</span></strong> <i><span class="varname">key-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the key ID in MD5, HMAC-MD5, or HMAC-SHA256 authentication mode. The key ID must be the same as the key ID on the peer device.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 65535.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907605692__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100GE interface view,</span><span>10GE interface view,</span><span>200GE interface view,</span><span>25GE sub-interface view,</span><span>25GE interface view,</span><span>400GE interface view,</span><span>50GE sub-interface view,</span><span>50GE interface view,</span><span>Eth-Trunk sub-interface view,</span><span>Loopback interface view,</span><span>Tunnel interface view,</span><span>VBDIF interface view,</span><span>VLANIF interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907605692__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907605692__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>To ensure network security, you can enable a router to authenticate received packets based on the pre-defined authentication mode or add authentication information to the packets to be sent. Only the packets that are authenticated can be forwarded on the network.<p></p>
<span>The</span> <b><span class="cmdname">isis authentication-mode</span></b> command enables the local node to discard all the Hello packets with authentication passwords that are different from the one set using this command. You can also enable the device to add the set authentication password to all the Hello packets to be sent.</p>
<p><strong>Prerequisites</strong></p>
<p><p>IS-IS has been enabled on the interface using the <b><span class="cmdname">isis enable</span></b> command.</p>
</p>
<p><strong>Precautions</strong></p>
<p>The md5 parameter in this command can be used only after the weak security algorithm/protocol feature package WEAKEA has been installed using the <b><span class="cmdname">install feature-software WEAKEA</span></b> command.<p></p>
<span>If the keychain password is used</span>, the ip or osi parameter cannot be configured.<p></p>
<span>When a broadcast interface is emulated as a P2P interface</span> through the <b><span class="cmdname">isis circuit-type</span></b> command or an emulated P2P interface is restored to a broadcast interface through the <b><span class="cmdname">undo isis circuit-type</span></b> command, the IS-IS interface authentication is restored to the default configuration.<p></p>
<span>If MD5 authentication is negotiated for IS-IS and</span> then changed to keychain authentication, IS-IS needs to renegotiate the authentication mode. If keychain authentication is not configured on the peer end, IS-IS services may be interrupted.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907605692__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the authentication password using HMAC-SHA256.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>isis 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-isis-1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span><span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>isis enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>isis authentication-mode hmac-sha256 key-id 1 cipher YsHsjx_202206</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IS-IS_Configuration_Commands_title.html">IS-IS Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/ISIS-AUTHENTICATION-MODE_LAN(ISISCOMMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/ISIS-BFD-BLOCK(ISISCOMMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>