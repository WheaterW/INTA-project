
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="dhcp relay server-ip">
<meta name="DC.subject" content="dhcp relay server-ip">
<meta name="keywords" content="dhcp relay server-ip">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-DHCP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DHCP_RELAY_SERVER-GROUP.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DHCP_RELAY_SOURCE-IP-ADDRESS.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Creator" content="SUBSYS_ID_ESAP_DHCPRELAY">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942841709">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>dhcp relay server-ip</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942841709"></a><a name="EN-US_CLIREF_0000001942841709"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">dhcp relay server-ip</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942841709__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">dhcp relay server-ip</span></b> command configures a DHCP server address on an interface enabled with DHCP relay.</p>
<p>The <b><span class="cmdname">undo dhcp relay server-ip</span></b> command deletes a specified or all DHCP server addresses on an interface enabled with DHCP relay.</p>
</p>
<p>By default, no DHCP server address is configured on an interface.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942841709__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">dhcp relay server-ip </span></b><i><span class="varname">ip-address</span></i></p>

<p><b><span class="cmdname">dhcp relay server-ip </span></b><i><span class="varname">ip-address</span></i> { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>public-net</span></strong> }</p>

<p><b><span class="cmdname">undo dhcp relay server-ip </span></b>{ <i><span class="varname">ip-address</span></i> | <strong><span>all</span></strong> }</p>

<p><b><span class="cmdname">undo dhcp relay server-ip </span></b><i><span class="varname">ip-address</span></i> { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>public-net</span></strong> }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942841709__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ip-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IP address of a DHCP server.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a VPN instance to which a DHCP server belongs.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters. The VPN instance name cannot be _public_. The character string can contain spaces if it is enclosed with double quotation marks (").</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>public-net</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the DHCP server is the public network server. After the public-net parameter is specified, the DHCPv6 packets sent by interfaces do not carry VPN information.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>all</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Deletes all DHCP server addresses on a VLANIF interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942841709__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100ge sub-interface view,</span><span>100GE interface view,</span><span>10GE sub-interface view,</span><span>10GE interface view,</span><span>200GE sub-interface view,</span><span>200GE interface view,</span><span>25GE sub-interface view,</span><span>25GE interface view,</span><span>400GE sub-interface view,</span><span>400GE interface view,</span><span>50GE sub-interface view,</span><span>50GE interface view,</span><span>Eth-Trunk sub-interface view,</span><span>Eth-Trunk interface view,</span><span>VBDIF interface view,</span><span>VLANIF interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942841709__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942841709__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>When a DHCP relay agent is used to forward a DHCP Request message from a DHCP client to a DHCP server on a different network segment, run the <b><span class="cmdname">dhcp relay server-ip</span></b> command on the DHCP relay agent to configure a DHCP server address.<p></p>
<span>The vpn-instance vpn-instance-name parameter must</span> be specified in this command if the DHCP clients and DHCP server are in different VPNs. When the DHCP clients and DHCP server are in the same VPN, do not specify the vpn-instance vpn-instance-name parameter. This is because the VPN to which the DHCP server belongs is by default the same as the VPN to which the DHCP relay interface belongs. In this case, you only need to bind the DHCP relay interface to the VPN and use the VPN information.</p>
<p><strong>Prerequisites</strong></p>
<p>DHCP relay has been enabled on the VLANIF interface using the <b><span class="cmdname">dhcp select relay</span></b> command.</p>
<p><strong>Precautions</strong></p>
<p>A DHCP relay interface can have a maximum of 20 source IP addresses configured. The DHCP relay agent sends DHCP request packets to all servers and DHCP reply packets to all clients.<p></p>
<span>If the</span> <b><span class="cmdname">dhcp relay server-ip</span></b> command has been run for multiple times, the latest configuration will not override the previous one.<p></p>
<span>Multi-level DHCP relay is not supported in inter-VPN</span> scenarios.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942841709__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">


<div class="p"># Set the server IP 10.1.1.1 and 10.2.1.1 on the interface <span>100GE</span><span>1/0/1</span>.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>dhcp select relay</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>dhcp relay server-ip 10.1.1.1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>dhcp relay server-ip 10.2.1.1</strong>
</pre>
</div>


</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-DHCP_Configuration_Commands_title.html">DHCPv4 Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/DHCP_RELAY_SERVER-GROUP.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/DHCP_RELAY_SOURCE-IP-ADDRESS.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>