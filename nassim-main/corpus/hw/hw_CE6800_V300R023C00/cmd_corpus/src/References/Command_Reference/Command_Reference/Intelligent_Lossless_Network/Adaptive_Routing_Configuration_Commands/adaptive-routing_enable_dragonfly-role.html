
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="adaptive-routing enable dragonfly-role">
<meta name="DC.subject" content="adaptive-routing enable dragonfly-role">
<meta name="keywords" content="adaptive-routing enable dragonfly-role">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-Adaptive_Routing_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/ADAPTIVE-ROUTING_ENABLE.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/ADJUST_ORIGINAL-DSCP.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Adaptive Routing">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Adaptive Routing">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="featurename" content="Adaptive Routing">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="DC.Creator" content="SUBSYS_ID_AIS">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907769368">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>adaptive-routing enable dragonfly-role</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907769368"></a><a name="EN-US_CLIREF_0000001907769368"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">adaptive-routing enable dragonfly-role</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907769368__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">adaptive-routing enable dragonfly-role</span></b> command enables the adaptive routing function on an interface and configures the role of the interface on a direct network.</p>
<p>The <b><span class="cmdname">undo adaptive-routing enable dragonfly-role</span></b> command disables the adaptive routing function on an interface and cancels the role configuration of the interface on a direct network.</p>
</p>
<p>By default, the adaptive routing function is disabled on an interface, and no role is configured for the interface on a direct network.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P and CE8850-HAM.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907769368__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">adaptive-routing enable dragonfly-role </span></b>{ <strong><span>global</span></strong> | <strong><span>local</span></strong> }</p>

<p><b><span class="cmdname">undo adaptive-routing enable dragonfly-role </span></b>{ <strong><span>global</span></strong> | <strong><span>local</span></strong> }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907769368__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>global</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Global role.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>local</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Local role.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907769368__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100GE interface view,</span><span>200GE interface view,</span><span>400GE interface view,</span><span>Interface group view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907769368__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907769368__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>After a role is configured for an interface on a direct network, when congestion occurs on the direct network, the interface performs corresponding operations based on the role to quickly adjust network paths and prevent services from being blocked.</p>
<p><strong>Precautions</strong></p>
<ul><li>Before running this command to configure the role of an interface in a direct topology, you must run the <b><span class="cmdname">adaptive-routing enable</span></b> command in the system view to enable the global adaptive routing function.</li><li>Before running this command to configure the role of an interface in a direct topology, you must run the <b><span class="cmdname">undo portswitch</span></b> command to switch the interface to Layer 3 mode.</li><li>If adaptive routing is enabled globally on a device, an interface is added to a direct topology and participates in adaptive routing calculation only if the role of the interface is configured in the direct topology.</li><li>If PFC or antilocking PFC has been enabled on an interface, PFC resources on the interface are occupied. To release PFC resources on the interface, disable PFC or antilocking PFC on the interface and restart the device.</li><li>This command can be delivered only to physical interfaces. It cannot be delivered to split interfaces or logical interfaces such as sub-interfaces, Eth-Trunk interfaces, VLANIF interfaces, and VBDIF interfaces.</li></ul>

<p>For the CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, and CE8850-HAM:</p>

<ul><li>PFC and dragonfly antilocking PFC cannot be both enabled on an interface.</li><li>Antilocking PFC and dragonfly antilocking PFC cannot be both enabled on an interface.</li><li>Currently, PFC or antilocking PFC can be enabled on a maximum of 127 interfaces. If the accumulated number of interfaces where PFC or antilocking PFC has been enabled has reached 127, disable the delivered configurations to reduce the number of such interfaces and restart the device. Then you can enable PFC or antilocking PFC on more interfaces.</li></ul>

<p>For the CE8855 and CE8851-32CQ4BQ:</p>

<ul><li>If dragonfly deadlock prevention has been enabled, you must enable PFC for the priority queue corresponding to the deadlock prevention function on the interface before running this command to configure the role of the interface in the direct topology.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907769368__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the global role for an interface on a direct network.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>adaptive-routing enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>adaptive-routing enable dragonfly-role global</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-Adaptive_Routing_Configuration_Commands_title.html">Adaptive Routing Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/ADAPTIVE-ROUTING_ENABLE.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/ADJUST_ORIGINAL-DSCP.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>