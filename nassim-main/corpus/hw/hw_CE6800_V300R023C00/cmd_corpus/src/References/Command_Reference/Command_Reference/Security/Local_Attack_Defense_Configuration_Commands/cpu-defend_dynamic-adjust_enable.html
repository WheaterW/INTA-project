
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="cpu-defend dynamic-adjust enable">
<meta name="DC.subject" content="cpu-defend dynamic-adjust enable">
<meta name="keywords" content="cpu-defend dynamic-adjust enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-Local_Attack_Defense_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CAR_PACKET-TYPE.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CPU-DEFEND_HOST-CAR.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="DC.Creator" content="SUBSYS_ID_CPUDEFEND">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942847145">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>cpu-defend dynamic-adjust enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942847145"></a><a name="EN-US_CLIREF_0000001942847145"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">cpu-defend dynamic-adjust enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942847145__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">cpu-defend dynamic-adjust enable</span></b> command enables adaptive CPCAR adjustment for protocol packets.</p>
<p>The <b><span class="cmdname">undo cpu-defend dynamic-adjust enable</span></b> command disables adaptive CPCAR adjustment for protocol packets and restores the default CPCAR values of protocol packets.</p>
</p>
<p>By default, adaptive CPCAR adjustment for protocol packets is enabled.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942847145__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">






<p>For CE6855-48XS8CQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN, CE8850-SAN, CE8851-32CQ8DQ-P, CE8850-HAM, CE8851K, CE8855, CE8851-32CQ4BQ: </p>

<p><b><span class="cmdname">cpu-defend dynamic-adjust </span></b>[ <strong><span>packet-type</span></strong> { <strong><span>arp-reply</span></strong> | <strong><span>arp-request</span></strong> | <strong><span>arp-request-uc</span></strong> | <strong><span>dhcp-reply</span></strong> | <strong><span>dhcp-request</span></strong> | <strong><span>nd</span></strong> } ] <strong><span>enable</span></strong></p>

<p><b><span class="cmdname">undo cpu-defend dynamic-adjust </span></b>[ <strong><span>packet-type</span></strong> { <strong><span>arp-reply</span></strong> | <strong><span>arp-request</span></strong> | <strong><span>arp-request-uc</span></strong> | <strong><span>dhcp-reply</span></strong> | <strong><span>dhcp-request</span></strong> | <strong><span>nd</span></strong> } ] <strong><span>enable</span></strong></p>

<p>For CE6885-LL (low latency mode): </p>

<p><b><span class="cmdname">cpu-defend dynamic-adjust </span></b>[ <strong><span>packet-type</span></strong> { <strong><span>arp-reply</span></strong> | <strong><span>arp-request</span></strong> | <strong><span>arp-request-uc</span></strong> | <strong><span>dhcp-reply</span></strong> | <strong><span>dhcp-request</span></strong> } ] <strong><span>enable</span></strong></p>

<p><b><span class="cmdname">undo cpu-defend dynamic-adjust </span></b>[ <strong><span>packet-type</span></strong> { <strong><span>arp-reply</span></strong> | <strong><span>arp-request</span></strong> | <strong><span>arp-request-uc</span></strong> | <strong><span>dhcp-reply</span></strong> | <strong><span>dhcp-request</span></strong> } ] <strong><span>enable</span></strong></p>

<p>For CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, CE6881H-K: </p>

<p><b><span class="cmdname">cpu-defend dynamic-adjust </span></b>[ <strong><span>packet-type</span></strong> { <strong><span>arp-reply</span></strong> | <strong><span>arp-request</span></strong> | <strong><span>arp-request-uc</span></strong> | <strong><span>dhcp-discovery</span></strong> | <strong><span>dhcp-reply</span></strong> | <strong><span>dhcp-request</span></strong> | <strong><span>nd</span></strong> } ] <strong><span>enable</span></strong></p>

<p><b><span class="cmdname">undo cpu-defend dynamic-adjust </span></b>[ <strong><span>packet-type</span></strong> { <strong><span>arp-reply</span></strong> | <strong><span>arp-request</span></strong> | <strong><span>arp-request-uc</span></strong> | <strong><span>dhcp-discovery</span></strong> | <strong><span>dhcp-reply</span></strong> | <strong><span>dhcp-request</span></strong> | <strong><span>nd</span></strong> } ] <strong><span>enable</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942847145__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>packet-type</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the packet type.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>arp-reply</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies ARP reply packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>arp-request</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies ARP request packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>arp-request-uc</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies unicast ARP request packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>dhcp-discovery</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies DHCP discovery packets.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6820H, CE6820H-K and CE6820S.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>dhcp-reply</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies DHCP reply packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>dhcp-request</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies DHCP request packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>nd</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the ND packets.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>











</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942847145__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942847145__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942847145__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>If the fixed default CPCAR value cannot meet the dynamic requirements on the rate at which protocol packets are sent, you can run this command to enable the switch to dynamically adjust the default CPCAR value for protocol packets.<p></p>
<span>If adaptive adjustment of the default CPCAR value</span> is enabled for a specific type of protocol packets, the device checks for packet loss of such protocol packets at a specified interval. When detecting a packet loss, the device dynamically adjusts the CPCAR value for the protocol packets based on the CPU usage. When the CPU usage is lower than 50%, increase the CPCAR value. The adjusted CPCAR value cannot exceed the maximum CPCAR value. When the CPU usage is higher than 68%, decrease the CPCAR value. The adjusted CPCAR value cannot be smaller than the default value. If packet loss occurs due to congestion in the queue where the detected protocol packets reside, the device restores the default CPCAR value for the protocol packets. You can run the <b><span class="cmdname">display cpu-defend dynamic-adjust history-record</span></b> command to view records of dynamic CPCAR adjustment.<p></p>
<span>The following table lists the types of protocol packets</span> for which CPCAR values can be dynamically adjusted and the maximum CPCAR values after adjustment.</p>

<ul><li>The adjusted maximum CPCAR value for ARP reply packets is twice the default value.</li><li>The adjusted maximum CPCAR value for ARP request packets is twice the default value.</li><li>The adjusted maximum CPCAR value for unicast ARP request packets is twice the default value.</li><li>The adjusted maximum CPCAR value for DHCP reply packets is 1.5 times the default value.</li><li>The adjusted maximum CPCAR value for DHCP request packets is 1.5 times the default value.</li><li>The adjusted maximum CPCAR value for IPv6 ND packets is twice the default value.</li></ul>
</div>
<p><p>For the CE6820H, CE6863H-K, CE6881H and CE6881H-K series, the adjusted maximum CPCAR value for DHCP discovery packets is 1.5 times the default value.</p>
</p>
<p><strong>Precautions</strong></p>
<p>This function takes effect only when the default CPCAR values of protocol packets are not manually modified.<p></p>
<span>After adaptive CPCAR adjustment for protocol packets</span> is enabled globally, this function takes effect for all supported types of protocol packets.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942847145__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable adaptive CPCAR adjustment for ARP request packets.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>cpu-defend dynamic-adjust packet-type arp-request enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-Local_Attack_Defense_Configuration_Commands_title.html">Local Attack Defense Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/CAR_PACKET-TYPE.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/CPU-DEFEND_HOST-CAR.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>