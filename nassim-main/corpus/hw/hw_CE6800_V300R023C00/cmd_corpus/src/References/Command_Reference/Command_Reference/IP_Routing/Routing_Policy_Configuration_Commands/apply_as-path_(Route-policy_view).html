
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="apply as-path (Route-policy view)">
<meta name="DC.subject" content="apply as-path (Route-policy view)">
<meta name="keywords" content="apply as-path (Route-policy view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IP_Routing_Policy_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/APPLY-AS-PATH(RTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/APPLY-AS-PATH-MOST-RECENT(RTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_RTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907765912">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>apply as-path (Route-policy view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907765912"></a><a name="EN-US_CLIREF_0000001907765912"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">apply as-path (Route-policy view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907765912__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">apply as-path</span></b> command replaces the original AS_Path attribute, or adds, deletes a specified AS number to the AS_Path attribute.</p>
<p>The <b><span class="cmdname">undo apply as-path</span></b> command cancels the configuration.</p>
</p>
<p>By default, the original AS_Path attribute is not replaced and no AS number is added to or deleted from the AS_Path attribute.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907765912__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">apply as-path </span></b><i><span class="varname">asValues</span></i> { <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> }</p>

<p><b><span class="cmdname">undo apply as-path </span></b><i><span class="varname">asValues</span></i> { <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907765912__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">asValues</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an AS number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>AS_Path attribute value. The value is a string of 1 to 3071 characters. The attribute is used together with double quotation marks (" "). A minimum of 129 groups of AS numbers and a maximum of 256 groups of AS numbers can be configured in the AS_Path attribute, and divide them with space in the middle. The AS numbers in each group can be in the following formats:</p>
<ul><li>Integer format: The value is an integer ranging from 1 to 4294967295.</li><li>x.y format: x and y are both integers ranging from 1 to 65535 and from 0 to 65535, respectively.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>additive</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Adds the specified AS number to the original AS_Path attribute.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>overwrite</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Replaces the AS numbers in the original AS_Path attribute.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>delete</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Deletes the specified AS number from the original AS_Path attribute.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907765912__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Route-policy view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907765912__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907765912__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>The AS_Path attribute is a private attribute of BGP used to record all ASs that a route passes through from the local area to the destination in distance-vector (DV) order. The AS_Path attribute can be used to control route selection and prevent routing loops. When the filtering conditions specified by if-match clauses are met and the matching mode is set to permit, you can use the <b><span class="cmdname">apply as-path</span></b> command to set the AS_Path attributes of the routes that match the filtering conditions.</p>

<ul><li>Run the <b><span class="cmdname">route-policy</span></b> command to enter the Route-policy view.</li><li>A route-policy may consist of multiple nodes. The relationship between the nodes is "OR". The system matches a route against the nodes in sequence. If the route matches a node, the system no longer matches it against other nodes.</li><li>Each node comprises a set of if-match and apply clauses. The if-match clauses define the filtering rules that are used to match certain route attributes. The relationship among if-match clauses of the same node that are based on different route attributes is AND. A route matches a node only when the route matches all the filtering rules specified in the if-match clauses of the node. The apply clauses specify actions. The relationship among if-match clauses of the same node that are based on the same route attribute is OR. The system matches routes against the if-match clauses in order. If a route matches an if-match clause, the system no longer matches the route against the rest if-match clauses. For example, the if-match community-filter 1 and if-match as-path-filter 1 configurations in node 10 are based on different route attributes. Therefore, the relationship among if-match clauses of this node is AND. The if-match community-filter 1 and if-match community-filter 2 configurations in node 20 are both based on the community attribute. Therefore, the relationship among if-match clauses of this node is OR. The apply clauses specify actions. If a route matches a node, the apply clauses set some attributes for the route.</li></ul>
</div>
<p><strong>Prerequisites</strong></p>
<p><p>A route-policy has been configured using the <b><span class="cmdname">route-policy</span></b> command.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>Running this command directly affects the path through which network traffic passes. Therefore, you must be familiar with the network topology and the impact of running this command before running this command.<p></p>
<span>The function of the</span> <b><span class="cmdname">apply as-path</span></b> command is the same as that of the apply as-path(enhance) command. The difference is that the apply as-path(enhance) command supports a maximum of 128 groups of AS numbers, whereas the apply as-path(enhance) command supports a minimum of 129 groups of AS numbers and a maximum of 256 groups of AS numbers.<p></p>
<span>If the overwrite or delete parameter is used</span>, the AS_Path will be modified, which may cause routing loops.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907765912__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Change the AS number in the original AS_Path attribute.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>route-policy policy permit node 10</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-route-policy] <strong>apply as-path "1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129" overwrite</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IP_Routing_Policy_Configuration_Commands_title.html">Routing Policy Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/APPLY-AS-PATH(RTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/APPLY-AS-PATH-MOST-RECENT(RTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>