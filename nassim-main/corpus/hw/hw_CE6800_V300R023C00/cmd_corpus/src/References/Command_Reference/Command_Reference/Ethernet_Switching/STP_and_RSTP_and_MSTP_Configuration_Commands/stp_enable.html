
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="stp enable">
<meta name="DC.subject" content="stp enable">
<meta name="keywords" content="stp enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/STPEDGEDPORTDEFAULT(MSTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/GLOBALSTPFLUSH(MSTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_MSTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907602024">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>stp enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907602024"></a><a name="EN-US_CLIREF_0000001907602024"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">stp enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907602024__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">stp enable</span></b> command enables STP/RSTP/MSTP on a device.</p>
<p>The <b><span class="cmdname">stp disable</span></b> command disables STP/RSTP/MSTP on a device.</p>
<p>The <b><span class="cmdname">undo stp enable</span></b> command cancels the stp enable command configuration.</p>
<p>The <b><span class="cmdname">undo stp disable</span></b> command cancels the stp disable command configuration.</p>
</p>
<p>By default, STP/RSTP/MSTP is enabled on a device.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907602024__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">stp </span></b>{ <strong><span>enable</span></strong> | <strong><span>disable</span></strong> }</p>

<p><b><span class="cmdname">undo stp </span></b>{ <strong><span>enable</span></strong> | <strong><span>disable</span></strong> }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907602024__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>enable</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables STP/RSTP/MSTP.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>disable</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Disables STP/RSTP/MSTP.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907602024__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907602024__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907602024__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><ul><li>On a complex Layer 2 network, STP/RSTP/MSTP can be configured on devices to prevent or break loops.</li><li>To enable STP/RSTP/MSTP, run the <b><span class="cmdname">stp enable</span></b> command. The devices running STP/RSTP/MSTP exchange information to discover loops on the network and block some interfaces to trim the ring topology into a loop-free tree topology. This prevents packet replication and circular propagation and device performance deterioration.</li><li>Spanning tree calculation consumes system resources. Therefore, run the <b><span class="cmdname">stp disable</span></b> command to disable STP/RSTP/MSTP on devices or interfaces that do not need to participate in spanning tree calculation.</li></ul>
</div>
<p><strong>Prerequisites</strong></p>
<div class="p"><p>After STP/RSTP/MSTP is enabled on a ring network, STP/RSTP/MSTP immediately calculates spanning trees on the network. Configurations on a device, such as the device priority, port priority, and port path cost, will affect spanning tree calculation. Any change of the configurations may cause network flapping. Therefore, ensure that basic configurations have been complete before enabling STP/RSTP/MSTP. For example:</p>

<ul><li>The working mode of the device has been configured using the stp mode { mstp | rstp | stp } command.</li><li>The priority of the device on a spanning tree has been set using the <b><span class="cmdname">stp priority</span></b> command</li><li>The priority of an interface on a spanning tree instance has been configured using the <b><span class="cmdname">stp port priority</span></b> command.</li><li>The device has been set as the primary root bridge of a spanning tree using the <b><span class="cmdname">stp root primary</span></b> command.</li><li>The device has been set as a secondary root bridge of a spanning tree using the <b><span class="cmdname">stp root secondary</span></b> command.</li><li>The path cost of an interface on a spanning tree instance has been set using the stp cost cost command.</li><li>If the spanning tree protocol is MSTP, an MST region has been configured using the <b><span class="cmdname">region-name</span></b>, <b><span class="cmdname">instance vlan</span></b> and <b><span class="cmdname">revision-level</span></b> commands.<p></p>
<span>Other configurations are completed as required</span>.</li></ul>
</div>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>Running the <b><span class="cmdname">undo stp enable</span></b> or <b><span class="cmdname">stp disable</span></b> command in the system view disables STP, RSTP, or MSTP globally, which may cause loops.</li><li>STP, RSTP, or MSTP must be enabled on all interfaces that participate in spanning tree calculation. Otherwise, network loops may occur.</li><li>For security purposes, after the <b><span class="cmdname">configuration re-authentication enable</span></b> command is configured, you need to enter the password and pass the authentication to make the STP disabling configuration take effect.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907602024__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable STP/RSTP/MSTP on a device.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>stp enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">STP/RSTP/MSTP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/STPEDGEDPORTDEFAULT(MSTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/GLOBALSTPFLUSH(MSTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>