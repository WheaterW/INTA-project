
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="route loop-detect ospfv3 enable">
<meta name="DC.subject" content="route loop-detect ospfv3 enable">
<meta name="keywords" content="route loop-detect ospfv3 enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_OSPFv3_Configuration_Command_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPFV3-RETRANSMISSION-LIMIT(OSPFCOMMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPFV3ROUTETAG(OSPFCOMMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_OSPFCOMMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907603540">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>route loop-detect ospfv3 enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907603540"></a><a name="EN-US_CLIREF_0000001907603540"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">route loop-detect ospfv3 enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907603540__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">route loop-detect ospfv3 enable</span></b> command enables loop detection for OSPFv3 imported routes.</p>
<p>The <b><span class="cmdname">undo route loop-detect ospfv3 enable</span></b> command disables loop detection for OSPFv3 imported routes.</p>
</p>
<p>By default, loop detection is disabled for OSPFv3 imported routes.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907603540__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">route loop-detect ospfv3 enable</span></b></p>

<p><b><span class="cmdname">undo route loop-detect ospfv3 enable</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907603540__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907603540__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907603540__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907603540__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Routing loops may occur when an OSPFv3 process imports routes. To prevent routing loops, run the <b><span class="cmdname">route loop-detect ospfv3 enable</span></b> command to enable loop detection for the imported routes. When a device detects that it has imported a route advertised by itself, it advertises a large cost for the route to other devices. After learning this route, other devices preferentially select another path, preventing routing loops.</p>
<p><strong>Precautions</strong></p>
<ul><li>Before enabling routing loop detection, check whether non-Huawei devices exist on the network and ensure that OSPFv3 services are not affected when non-Huawei devices receive LSAs advertised by a Huawei device and private TLVs carried in the LSAs.</li></ul>

<ol><li>According to the protocol, non-Huawei devices must be able to receive and flood E-AS-External LSAs with the Type field set to U-bit. The establishment of neighbor relationships cannot be affected even if the LSAs cannot be recognized.</li><li>If a non-Huawei device receives an E-AS-External LSA but cannot identify the TLV or sub-TLV carried in the LSA, the non-Huawei device needs to ignore the TLV without affecting the processing of other TLVs.</li><li>If a non-Huawei device uses the same private TLV type and the TLV values of the two functions conflict, do not configure this function.<p></p>
<span>Note</span>: OSPFv3 advertises loop detection information through the sub-TLV (TLV type value 32770) of the External-Prefix TLV in the E-AS-External LSA.</li></ol>

<ul><li>After a loop is removed, the device cannot automatically exit the routing loop state and the alarm cannot be automatically cleared. Manual intervention is required. For example, after a routing policy or route tag is correctly configured, run the <b><span class="cmdname">clear route loop-detect ospfv3 alarm-state</span></b> command to exit the routing loop state and clear the alarm.</li><li>A single process supports routing loop detection for a maximum of 100,000 routes. If more than 100,000 routes are imported, loops cannot be detected for the excess routes. The system checks the number of routes for loop detection at 03:00 every day. If the number of routes for loop detection is less than 100,000, the system performs loop detection on the previously excess imported routes. The maximum number of imported routes for loop detection is still 100,000.</li><li>When a large cost is advertised upon a routing loop, the <b><span class="cmdname">apply cost</span></b> command does not take effect.</li><li>Summary routes and NSSA routes do not support routing loop detection.</li><li>The default route advertised using the <b><span class="cmdname">default-route-advertise</span></b> command supports only loop detection and does not support self-healing.</li><li>Only loops caused by inter-process route import between two devices can be detected. If more than two devices import routes between processes, loops cannot be detected.</li><li>Router ID conflicts are not supported, including intra-AS and inter-AS router ID conflicts. A router ID conflict may trigger incorrect detection.</li><li>When the OSPF process that imports routes calculates routes with the same prefix and the calculated routes participate in load balancing with the imported routes, loops cannot be detected.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907603540__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable OSPFv3 loop detection.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>route loop-detect ospfv3 enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_OSPFv3_Configuration_Command_title.html">OSPFv3 Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/OSPFV3-RETRANSMISSION-LIMIT(OSPFCOMMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/OSPFV3ROUTETAG(OSPFCOMMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>