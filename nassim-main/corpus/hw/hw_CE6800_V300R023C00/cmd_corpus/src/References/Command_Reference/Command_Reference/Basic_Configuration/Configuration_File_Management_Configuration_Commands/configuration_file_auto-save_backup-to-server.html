
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="configuration file auto-save backup-to-server">
<meta name="DC.subject" content="configuration file auto-save backup-to-server">
<meta name="keywords" content="configuration file auto-save backup-to-server">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Configuration_Management_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/AUTOSAVEDC(CFGOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/REAUTHENENABLESWITCH(CLIOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Configuration File Management">
<meta name="featurename" content="FTP">
<meta name="featurename" content="SFTP">
<meta name="featurename" content="SCP">
<meta name="featurename" content="TFTP">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Configuration File Management">
<meta name="featurename" content="FTP">
<meta name="featurename" content="SFTP">
<meta name="featurename" content="SCP">
<meta name="featurename" content="TFTP">
<meta name="featuretype" content="Basic Configuration">
<meta name="featurename" content="Configuration File Management">
<meta name="featurename" content="FTP">
<meta name="featurename" content="SFTP">
<meta name="featurename" content="SCP">
<meta name="featurename" content="TFTP">
<meta name="featuretype" content="Basic Configuration">
<meta name="featuretype" content="Basic Configuration">
<meta name="featuretype" content="Basic Configuration">
<meta name="DC.Creator" content="SUBSYS_ID_CFGOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000002158962548">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>configuration file auto-save backup-to-server</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000002158962548"></a><a name="EN-US_CLIREF_0000002158962548"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">configuration file auto-save backup-to-server</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000002158962548__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">configuration file auto-save backup-to-server server</span></b> command configures the system to periodically save the configuration file to an IPv4 server.</p>
<p>The <b><span class="cmdname">undo configuration file auto-save backup-to-server server</span></b> command disables the system from periodically saving the configuration file to an IPv4 server.</p>
<p>The <b><span class="cmdname">configuration file auto-save backup-to-server server ipv6</span></b> command configures the system to periodically save the configuration file to an IPv6 server.</p>
<p>The <b><span class="cmdname">undo configuration file auto-save backup-to-server server ipv6</span></b> command disables the system from periodically saving the configuration file to an IPv6 server.</p>
</p>
<p>By default, the system does not periodically save configurations to a server.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000002158962548__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">configuration file auto-save backup-to-server server </span></b><i><span class="varname">server-ip</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <strong><span>transport-type</span></strong> { <strong><span>tftp</span></strong> | { <strong><span>ftp</span></strong> | <strong><span>sftp</span></strong> } [ <strong><span>port</span></strong> <i><span class="varname">port-value</span></i> ] <strong><span>user</span></strong> <i><span class="varname">user-name</span></i> <strong><span>password</span></strong> <i><span class="varname">password</span></i> } [ <strong><span>path</span></strong> <i><span class="varname">folder</span></i> ]</p>

<p><b><span class="cmdname">configuration file auto-save backup-to-server server </span></b><i><span class="varname">server-ip</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <strong><span>transport-type</span></strong> { <strong><span>sftp</span></strong> [ <strong><span>port</span></strong> <i><span class="varname">port-value</span></i> ] <strong><span>user</span></strong> <i><span class="varname">user-name</span></i> <strong><span>password</span></strong> }</p>

<p><b><span class="cmdname">configuration file auto-save backup-to-server server </span></b><i><span class="varname">server-ip</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <strong><span>path</span></strong> <i><span class="varname">folder</span></i></p>

<p><b><span class="cmdname">configuration file auto-save backup-to-server server ipv6 </span></b><i><span class="varname">server-ip</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <strong><span>transport-type</span></strong> { <strong><span>tftp</span></strong> | { <strong><span>ftp</span></strong> | <strong><span>sftp</span></strong> } [ <strong><span>port</span></strong> <i><span class="varname">port-value</span></i> ] <strong><span>user</span></strong> <i><span class="varname">user-name</span></i> <strong><span>password</span></strong> <i><span class="varname">password</span></i> } [ <strong><span>path</span></strong> <i><span class="varname">folder</span></i> ]</p>

<p><b><span class="cmdname">configuration file auto-save backup-to-server server ipv6 </span></b><i><span class="varname">server-ip</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <strong><span>path</span></strong> <i><span class="varname">folder</span></i></p>

<p><b><span class="cmdname">configuration file auto-save backup-to-server server ipv6 </span></b><i><span class="varname">server-ip</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <strong><span>transport-type</span></strong> { <strong><span>sftp</span></strong> [ <strong><span>port</span></strong> <i><span class="varname">port-value</span></i> ] <strong><span>user</span></strong> <i><span class="varname">user-name</span></i> <strong><span>password</span></strong> }</p>

<p><b><span class="cmdname">undo configuration file auto-save backup-to-server server </span></b>[ <i><span class="varname">server-ip</span></i> | <i><span class="varname">server-ip</span></i> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <i><span class="varname">server-ip</span></i> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <strong><span>port</span></strong> <i><span class="varname">port-value</span></i> ]</p>

<p><b><span class="cmdname">undo configuration file auto-save backup-to-server server ipv6 </span></b>[ <i><span class="varname">server-ip</span></i> | <i><span class="varname">server-ip</span></i> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <i><span class="varname">server-ip</span></i> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <strong><span>port</span></strong> <i><span class="varname">port-value</span></i> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000002158962548__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a VPN instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters. If spaces are used, the string must be enclosed in double quotation marks (" ").</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>transport-type</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the transmission mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value can be ftp, tftp, or sftp.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>tftp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the transmission mode is TFTP.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ftp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the transmission mode is FTP.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>sftp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the transmission mode is SFTP.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>port</span></strong> <i><span class="varname">port-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the port number used to send a configuration file to a server.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>user</span></strong> <i><span class="varname">user-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of the user that accesses the server using FTP or SFTP.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of 1 to 64 characters without spaces.</p>
<p>Except the question mark (?) and space. However, when quotation marks (") are used around the password, spaces are allowed in the password.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>password</span></strong> <i><span class="varname">password</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the password of the user that accesses the server using FTP or SFTP.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>In the case of a password in plaintext, the value is a string of 1 to 255 case-sensitive characters without spaces. In the case of a ciphertext password, the value is a string of 20 to 432 case-sensitive characters without spaces. A 24-character ciphertext password configured in an earlier version is also supported in this version.</p>
<p>Except the question mark (?) and space. However, when quotation marks (") are used around the password, spaces are allowed in the password.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>path</span></strong> <i><span class="varname">folder</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the path of the configuration file on the server. If this parameter is not configured, the root path of FTP, SFTP, or TFTP services is used by default.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 64 case-sensitive characters.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>server</span></strong> <i><span class="varname">server-ip</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IP address of the server to which the system periodically saves the configuration file.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The IP address is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv6</span></strong> <i><span class="varname">server-ip</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv6 address of the server to which the system periodically saves the configuration file.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a 32-digit hexadecimal number, in the format of X:X:X:X:X:X:X:X.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000002158962548__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000002158962548__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>3: Management level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000002158962548__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<ul><li>To back up the configuration file, you can run this command to specify a server. The configuration file is automatically saved to the specified server, improving database security.</li><li>The format of the configuration file backed up to the server is the same as that of the configuration file for next startup. If the configuration file for next startup is in .dat format, the generated configuration file is in .dat format. If the configuration file for next startup is in .cfg or .zip format, the generated configuration file is in .zip format. The configuration file backed up to the server is named in the format of date, time, and system name. The names of the configuration files backed up at different time are different and do not overwrite the previous backup files.</li><li>You can run this command multiple times to configure multiple file servers.</li></ul>
<p><strong>Prerequisites</strong></p>
<p>Before running this command, run the <b><span class="cmdname">configuration file auto-save</span></b> command to enable the automatic saving function and enable the FTP, SFTP, or TFTP service on the server.<p></p>
<span>The interval for periodically saving configurations</span> depends on the interval configured using the <b><span class="cmdname">configuration file auto-save</span></b> command.<p></p>
<span>Alternatively</span>, run the <b><span class="cmdname">configuration current backup-to-server monthly</span></b> command to enable monthly configuration backup to the server. (Note that this function does not save the configuration file for the next startup and only uploads the current running configuration to the server.)</p>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>The system supports a maximum of five file servers. The servers are independent of each other. If the file fails to be uploaded to a server path, the system reports an alarm to the NMS and records a log on the device.</li><li>During the configuration file upload, if the automatic saving time arrives, the device does not save the configuration file until all configuration files are uploaded.</li><li>The time of the configuration file generated by running this command is the UTC time.</li><li>After the bound VPN is deleted, the configuration is not cleared, and the VPN ID is set to the default value. If a VPN with the same name is reconfigured, the corresponding VPN ID is updated.</li><li>If the same IP address but different VPN instances are configured using the <b><span class="cmdname">configuration file auto-save backup-to-server</span></b> command, only the latest configuration takes effect.</li><li>When you run this command to save the configuration file to the server, the system supports only the binary transfer mode. The server must support the binary transfer mode.</li><li>The configuration file auto-save backup-to-server server [ ipv6 ] server-ip [ vpn-instance vpn-instance-name ] transport-type { sftp [ port port-value ] user user-name password } command is supported only in FIPS mode.</li><li>The configuration file auto-save backup-to-server server [ ipv6 ] server-ip [ vpn-instance vpn-instance-name ] path folder command is supported only in FIPS mode.</li><li>The specified path parameter folder can be a relative path or an absolute path. If the value is a relative path, the root path of the relative path is the root path of the FTP, SFTP, or TFTP server.</li><li>The value of port-value must be the same as the port number of the FTP, SFTP, or TFTP server.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000002158962548__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the system to periodically save configuration files to a server using the transmission mode TFTP.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>configuration file auto-save backup-to-server server 10.1.1.1 transport-type tftp</strong>
</pre>
</div>

<div class="p"># Configure the system to periodically save configuration files to a server by FTP with the port number of 88.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>configuration file auto-save backup-to-server server 10.1.1.1 transport-type ftp port 88 user huawei password YsHsjx_202206</strong>
</pre>
</div>

<div class="p"># Configure the system to periodically save the configuration file to the server. Set the transfer mode to FTP, port number to 88, and path to D:/FTP/TEST.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>configuration file auto-save backup-to-server server 10.1.1.1 transport-type ftp port 88 user huawei password YsHsjx_202206 path D:/FTP/TEST</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Configuration_Management_Commands_title.html">Configuration File Management Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/AUTOSAVEDC(CFGOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/REAUTHENENABLESWITCH(CLIOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>