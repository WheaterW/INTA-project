
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="policy vpn-target (BGP-MVPN address family view)">
<meta name="DC.subject" content="policy vpn-target (BGP-MVPN address family view)">
<meta name="keywords" content="policy vpn-target (BGP-MVPN address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SESSION-IPV6-PEER-GTSM(BGPIPV6).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-PREFERENCE(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPMVPN">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907764948">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>policy vpn-target (BGP-MVPN address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907764948"></a><a name="EN-US_CLIREF_0000001907764948"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">policy vpn-target (BGP-MVPN address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907764948__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">policy vpn-target</span></b> command configures a device to implement VPN target-based filtering for received routes.</p>
<p>The <b><span class="cmdname">undo policy vpn-target</span></b> command cancels VPN target-based filtering.</p>
</p>
<p>By default, BGP MVPN target-based filtering is enabled for VPN routes.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE6885-LL (low latency mode), CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907764948__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">policy vpn-target</span></b></p>

<p><b><span class="cmdname">undo policy vpn-target</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907764948__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907764948__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-MVPN address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907764948__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907764948__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>By default, a device compares whether the export RT of a VPN route matches the import RT of a local VPN instance. A VPN instance must exist on the device.</p>

<ul><li>Generally, VPN instances have been configured on PEs and do not need to be reconfigured.</li><li>In an inter-AS VPN Option B scenario, no VPN instance is configured on the RR. Therefore, a VPN instance must be configured on the RR. In addition, the import RT of the VPN instance must match the export RT of the received VPN route; otherwise, the VPN route may be discarded because there is no matched import RT.</li></ul>

<p>After the <b><span class="cmdname">undo policy vpn-target</span></b> command is run, the device does not compare whether the export RT of a VPN route matches the import RT of the local VPN instance.</p>
<p><strong>Configuration Impact</strong></p>
<p>After the policy vpn-target command is run on a device, the device accepts a VPN route if one export RT attribute contained in the VPN route matches the import RT of the local VPN instance, and then adds the VPN route to the VPN routing tables of the VPN instances of which the import RT matches the export RT of the VPN route.</p>
<p><strong>Precautions</strong></p>
<p>Running the <b><span class="cmdname">undo policy vpn-target</span></b> command cancels VPN target-based filtering for VPN routes, which may cause the device to accept a large number of routes. Therefore, exercise caution when running this command.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907764948__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a device to implement VPN target-based filtering for received MVPN routes.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv4-family mvpn</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-mvpn] <strong>policy vpn-target</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/SESSION-IPV6-PEER-GTSM(BGPIPV6).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BGP-PREFERENCE(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>