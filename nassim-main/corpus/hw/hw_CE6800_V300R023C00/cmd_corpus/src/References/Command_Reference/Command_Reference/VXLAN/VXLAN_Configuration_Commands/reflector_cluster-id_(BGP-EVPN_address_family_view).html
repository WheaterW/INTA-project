
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="reflector cluster-id (BGP-EVPN address family view)">
<meta name="DC.subject" content="reflector cluster-id (BGP-EVPN address family view)">
<meta name="keywords" content="reflector cluster-id (BGP-EVPN address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_VXLAN_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/EVPN-REFLECT-SAME-SPLIT-GROUP(BGPEVPNOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/REFRESH(BGPEVPNOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="DC.Creator" content="SUBSYS_ID_BGPEVPNOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907607140">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>reflector cluster-id (BGP-EVPN address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907607140"></a><a name="EN-US_CLIREF_0000001907607140"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">reflector cluster-id (BGP-EVPN address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907607140__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">reflector cluster-id</span></b> command sets a cluster ID for an RR.</p>
<p>The <b><span class="cmdname">undo reflector cluster-id</span></b> command deletes the cluster ID configured for an RR.</p>
</p>
<p>By default, each RR uses its router ID as the cluster ID.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907607140__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">reflector cluster-id </span></b>{ <i><span class="varname">cluster-id-value</span></i> | <i><span class="varname">cluster-id-ipv4</span></i> }</p>

<p><b><span class="cmdname">undo reflector cluster-id</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907607140__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">cluster-id-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the cluster ID of an RR.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4294967295.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">cluster-id-ipv4</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv4 address of an RR.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907607140__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-EVPN address family view,</span><span>bgp-muli-instance-af-evpn view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907607140__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907607140__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Sometimes, more than one RR needs to be configured in a cluster to improve network reliability and prevent a single point of failure (SPOF). If a cluster has more than one RR, the <b><span class="cmdname">reflector cluster-id</span></b> command needs to be used to set the same cluster ID for the RRs. This helps to identify the cluster and avoid routing loops.<p></p>
<span>Configuring an RR allows IBGP peers to advertise routes</span> learned in the local AS to each other. The Cluster_List attribute is introduced to avoid loops within an AS. The Cluster_List is composed of a series of Cluster_IDs, and records all the RRs through which a route passes.</p>
<p><strong>Configuration Impact</strong></p>
<p>If the <b><span class="cmdname">reflector cluster-id</span></b> command is run several times, the latest configuration overrides the previous one.</p>
<p><strong>Precautions</strong></p>
<p>To ensure that a client can learn the routes reflected by an RR, the Cluster ID configured on the RR must be different from the Cluster ID of the client (By default, the client uses its Router ID as the cluster ID). If the Cluster ID is the same as the Cluster ID of the client, the client discards received routes.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907607140__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the cluster ID to 50 in the BGP-EVPN address family view.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer 1.1.1.1 as-number 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>l2vpn-family evpn</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-evpn] <strong>peer 1.1.1.1 enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-evpn] <strong>peer 1.1.1.1 reflect-client</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-evpn] <strong>reflector cluster-id 50</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_VXLAN_Configuration_Commands_title.html">VXLAN Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/EVPN-REFLECT-SAME-SPLIT-GROUP(BGPEVPNOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/REFRESH(BGPEVPNOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>