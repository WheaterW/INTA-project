
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="maximum load-balancing mixed (BGP-VPN instance IPv4 address family view)">
<meta name="DC.subject" content="maximum load-balancing mixed (BGP-VPN instance IPv4 address family view)">
<meta name="keywords" content="maximum load-balancing mixed (BGP-VPN instance IPv4 address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULTI-VRF-MAXIMUM-LOADBALAN-MIX(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SESSION-MONITOR-ALLVPNINSTANCE(BMPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942844429">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>maximum load-balancing mixed (BGP-VPN instance IPv4 address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942844429"></a><a name="EN-US_CLIREF_0000001942844429"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">maximum load-balancing mixed (BGP-VPN instance IPv4 address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942844429__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p>By default, the maximum number of equal-cost BGP routes for load balancing with routes of other protocols is 0, and load balancing is not implemented.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942844429__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">maximum load-balancing mixed </span></b><i><span class="varname">number</span></i></p>

<p><b><span class="cmdname">undo maximum load-balancing mixed</span></b></p>

<p><b><span class="cmdname">undo maximum load-balancing mixed </span></b><i><span class="varname">number</span></i></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942844429__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum number of equal-cost BGP routes for load balancing with routes of other protocols.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 128.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942844429__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-VPN instance IPv4 address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942844429__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942844429__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>The <b><span class="cmdname">maximum load-balancing mixed</span></b> command is used in the scenario where traffic is transmitted between different VNFs in the symmetric telco cloud. To set the maximum number of equal-cost BGP routes for load balancing with routes of other protocols, run this command so that the BGP routes and routes of other protocols can implement load balancing.<p></p>
<span>Description</span>:<p></p>
<span>BGP equal-cost routes can be generated only when the</span> following conditions are met:</p>

<ul><li>The original next hops are different.</li><li>The preferred values (PrefVal) are the same.</li><li>The Local_Pref values are the same.</li><li>All routes are summary routes or none of them is a summary route.</li><li>The AS_Path lengths are the same.</li><li>Origin types (IGP, EGP, and Incomplete) are the same.</li><li>The Multi_Exit Discriminator (MED) values are the same.</li><li>The AS_Path attributes are the same.<p></p>
<span>Among the routes with the same prefix in the BGP routing</span> table:</li><li>If the optimal route is a labeled route, the selected routes for load balancing are also labeled routes. The number of routes for load balancing is controlled by the <b><span class="cmdname">maximum load-balancing ingress-lsp</span></b> or <b><span class="cmdname">maximum load-balancing transit-lsp</span></b> command.</li><li>If the optimal route is a common route, the selected routes for load balancing are also common routes. The <b><span class="cmdname">maximum load-balancing mixed</span></b> command controls the number of routes for load balancing.<p></p>
<span>If BGP labeled routes work in load balancing mode</span> and the routes meet the conditions for creating ingress LSPs, ingress LSPs are created for the labeled routes. If BGP labeled routes work in load balancing mode and the routes meet the conditions for creating transit LSPs, transit LSPs are created for the labeled routes.<p></p>
<span>BGP equal-cost routes can implement inter-protocol</span> load balancing with routes of other protocols in the IP routing table only when the following conditions are met:</li><li>The BGP route is the optimal or sub-optimal route.</li><li>BGP routes have the same priority as routes of other protocols.</li></ul>
<p><strong>Configuration Impact</strong></p>
<p>If the command is run more than once, the latest configuration overrides the previous one.</p>
<p><strong>Precautions</strong></p>
<p>After this command is run, EBGP and IBGP routes can load-balance traffic, and leaked routes and non-leaked routes can also load-balance traffic.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942844429__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the maximum number of equal-cost BGP routes for load balancing with routes of other protocols to 3.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>route-distinguisher 100:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>vpn-target 1:1 both</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-instance-vpna] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv4-family vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>maximum load-balancing mixed 3</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/BGP-MULTI-VRF-MAXIMUM-LOADBALAN-MIX(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/SESSION-MONITOR-ALLVPNINSTANCE(BMPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>