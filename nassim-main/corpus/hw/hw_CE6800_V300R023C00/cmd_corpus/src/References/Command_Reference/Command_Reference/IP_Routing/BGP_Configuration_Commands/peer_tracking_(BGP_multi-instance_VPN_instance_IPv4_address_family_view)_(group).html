
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer tracking (BGP multi-instance VPN instance IPv4 address family view) (group)">
<meta name="DC.subject" content="peer tracking (BGP multi-instance VPN instance IPv4 address family view) (group)">
<meta name="keywords" content="peer tracking (BGP multi-instance VPN instance IPv4 address family view) (group)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-VRF-PEER-TRACKING(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/GROUP-UNNUMBERED-INTERFACE(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942844693">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer tracking (BGP multi-instance VPN instance IPv4 address family view) (group)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942844693"></a><a name="EN-US_CLIREF_0000001942844693"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer tracking (BGP multi-instance VPN instance IPv4 address family view) (group)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942844693__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer tracking</span></b> command enables BGP Peer Tracking. That is, you can configure BGP to fast detect the unreachable state of a peer and re-establish the connection between the local device and the peer.</p>
<p>The <b><span class="cmdname">undo peer tracking</span></b> command disables BGP Peer Tracking.</p>
</p>
<p>By default, BGP Peer Tracking is disabled.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942844693__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">group-name</span></i> <strong><span>tracking</span></strong> [ <strong><span>delay</span></strong> <i><span class="varname">delay-time</span></i> ]</p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">group-name</span></i> <strong><span>tracking</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942844693__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">group-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a peer group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 47 case-sensitive characters and cannot contain spaces. If the character string is quoted by double quotation marks, the character string can contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>delay</span></strong> <i><span class="varname">delay-time</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the interval between when BGP detects the peer unreachable and when BGP tears down the corresponding connection.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>An integer ranging from 0 to 65535, in seconds.</p>
</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942844693__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP multi-instance VPN instance IPv4 address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942844693__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942844693__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>In a network where BFD is unsuitable to be deployed, you can configure BGP Peer Tracking on the local device to implement fast network convergence by rapidly detecting the unreachable state of the peer.<p></p>
<span>A BGP peer is considered unreachable in either of</span> the following situations:</p>

<ul><li>The BGP peer's IP address does not match any route in the IP routing table.</li><li>The BGP peer's IP address matches a route with the outbound interface being a Null0 interface in the IP routing table.<p></p>
<span>A proper value of delay-time can ensure network stability</span> when a peer is detected unreachable.</li><li>If delay-time is set to 0, BGP immediately tears down the connection between the local device and its peer after the peer is detected unreachable.</li><li>If IGP route flapping occurs and delay-time for an IBGP peer is set to 0, the peer relationship between the local device and the peer alternates between Up and Down. Therefore, delay-time for an IBGP peer should be set to a value greater than the actual IGP route convergence time.</li><li>When BGP neighbors successfully perform the GR negotiation, the master/slave switchover occurs on the BGP neighbors, to prevent the failure of GR, delay-time should be set to a value greater than GR convergence time. If delay-time is set to be smaller than the GR convergence time, the connection between the local device and the BGP peer will be torn down, which leads to the failure of GR.</li></ul>
</div>
<p><strong>Prerequisites</strong></p>
<p><p>The <b><span class="cmdname">peer as-number</span></b> command has been run to create BGP peers or BGP peer groups.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>IGP is configured with GR, and the BGP neighbor relationship is established based on IGP routes. In such a situation, when a node fails on the network and the master/slave switchover occurs on the node, IGP does not delete the routes from the node, and BGP neighbors cannot sense the fault on the node. Therefore, the BGP Peer Tracking function does not take effect.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942844693__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure BGP Peer Tracking.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>route-distinguisher 100:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>vpn-target 111:1 both</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-instance-vpna] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100 instance a</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a] <strong>ipv4-family vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a-vpna] <strong>group test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a-vpna] <strong>peer test tracking</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/BGP-MULI-VRF-PEER-TRACKING(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/GROUP-UNNUMBERED-INTERFACE(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>