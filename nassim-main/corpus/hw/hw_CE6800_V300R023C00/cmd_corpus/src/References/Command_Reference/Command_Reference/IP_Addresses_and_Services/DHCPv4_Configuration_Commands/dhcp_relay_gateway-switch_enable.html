
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="dhcp relay gateway-switch enable">
<meta name="DC.subject" content="dhcp relay gateway-switch enable">
<meta name="keywords" content="dhcp relay gateway-switch enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-DHCP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DHCP_RELAY_GATEWAY.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DHCP_RELAY_GIADDR_OUTGOING-INTERFACE-ADDRESS.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Creator" content="SUBSYS_ID_ESAP_DHCPRELAY">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907762428">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>dhcp relay gateway-switch enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907762428"></a><a name="EN-US_CLIREF_0000001907762428"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">dhcp relay gateway-switch enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907762428__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">dhcp relay gateway-switch enable</span></b> command enables DHCP relay gateway switching.</p>
<p>The <b><span class="cmdname">undo dhcp relay gateway-switch enable</span></b> command disables DHCP relay gateway switching.</p>
</p>
<p>By default, DHCP relay gateway switching is disabled.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907762428__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">dhcp relay gateway-switch enable</span></b></p>

<p><b><span class="cmdname">undo dhcp relay gateway-switch enable</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907762428__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907762428__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100ge sub-interface view,</span><span>100GE interface view,</span><span>10GE sub-interface view,</span><span>10GE interface view,</span><span>200GE sub-interface view,</span><span>200GE interface view,</span><span>25GE sub-interface view,</span><span>25GE interface view,</span><span>400GE sub-interface view,</span><span>400GE interface view,</span><span>50GE sub-interface view,</span><span>50GE interface view,</span><span>Eth-Trunk sub-interface view,</span><span>Eth-Trunk interface view,</span><span>VBDIF interface view,</span><span>VLANIF interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907762428__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907762428__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>The <b><span class="cmdname">dhcp relay gateway-switch enable</span></b> command is used on DHCP relay agents. This command allows a DHCP relay agent to use a secondary IP address as the gateway address to apply for IP addresses for users when it fails to use the primary IP address to apply for IP addresses.</p>
<p><strong>Prerequisites</strong></p>
<ol><li>Global DHCP has been enabled by using the <b><span class="cmdname">dhcp enable</span></b> command in the system view.</li><li>DHCP relay has been enabled on an interface by using the <b><span class="cmdname">dhcp select relay</span></b> command.</li></ol>
<p><strong>Precautions</strong></p>
<ul><li>After VRRP is configured, the gateway address for the DHCP relay agent switches among IP addresses of the VRRP groups.</li><li>The gateway address switches from the primary IP address to a secondary IP address only when a user fails to obtain an IP address by using the primary IP address for at least three times and the interval between the last failure and first failure exceeds 24 seconds.</li><li>Before running this command on an interface, ensure that the interface has a primary IP address and at least one secondary IP address.</li><li>If a primary IP address and multiple secondary IP addresses are configured on an interface, the system tries the secondary IP addresses one by one until users successfully obtain IP addresses.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907762428__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">



<div class="p"># Enable DHCP relay gateway switching on <span>100GE</span><span>1/0/1</span>.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>dhcp enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ip address 192.168.30.1 255.255.255.0</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ip address 192.168.31.1 255.255.255.0 sub</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>dhcp select relay</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>dhcp relay server-ip 192.168.20.1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>dhcp relay gateway-switch enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-DHCP_Configuration_Commands_title.html">DHCPv4 Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/DHCP_RELAY_GATEWAY.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/DHCP_RELAY_GIADDR_OUTGOING-INTERFACE-ADDRESS.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>