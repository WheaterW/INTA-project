
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="if-match rocev2">
<meta name="DC.subject" content="if-match rocev2">
<meta name="keywords" content="if-match rocev2">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-MQC_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IF-MATCH_QOS-LOCAL-ID.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IF-MATCH_SOURCE-MAC.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MQC">
<meta name="featuretype" content="QoS">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="MQC">
<meta name="featuretype" content="QoS">
<meta name="featurename" content="MQC">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="DC.Creator" content="SUBSYS_ID_QOS">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907608620">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>if-match rocev2</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907608620"></a><a name="EN-US_CLIREF_0000001907608620"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">if-match rocev2</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907608620__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">if-match rocev2</span></b> command configures a matching rule based on RoCEv2 packet information in a traffic classifier.</p>
<p>The <b><span class="cmdname">undo if-match rocev2</span></b> command deletes a matching rule based on RoCEv2 packet information in a traffic classifier.</p>
</p>
<p>By default, a matching rule based on RoCEv2 packet information is not configured in a traffic classifier.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE6885-LL (low latency mode), CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907608620__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6855-48XS8CQ, CE6885-LL (low latency mode), CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN: </p>

<p><b><span class="cmdname">if-match rocev2 </span></b>{ <strong><span>opcode</span></strong> <i><span class="varname">opcode-value</span></i> | <strong><span>qpair</span></strong> <i><span class="varname">qpair-value</span></i> | <strong><span>nack</span></strong> <i><span class="varname">nack-value</span></i> | <strong><span>udf</span></strong> <strong><span>base</span></strong> <strong><span>l4-head</span></strong> { <i><span class="varname">udf-data</span></i> <i><span class="varname">udf-mask</span></i> <strong><span>offset</span></strong> <i><span class="varname">offset-value</span></i> } &amp;&lt;1-4&gt; } <sup>*</sup></p>

<p><b><span class="cmdname">undo if-match rocev2 </span></b>[ <strong><span>opcode</span></strong> <i><span class="varname">opcode-value</span></i> | <strong><span>qpair</span></strong> <i><span class="varname">qpair-value</span></i> | <strong><span>nack</span></strong> <i><span class="varname">nack-value</span></i> | <strong><span>udf</span></strong> <strong><span>base</span></strong> <strong><span>l4-head</span></strong> { <i><span class="varname">udf-data</span></i> <i><span class="varname">udf-mask</span></i> <strong><span>offset</span></strong> <i><span class="varname">offset-value</span></i> } &amp;&lt;1-4&gt; ] <sup>*</sup></p>

<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN: </p>

<p><b><span class="cmdname">if-match ipv6 rocev2 </span></b>{ <strong><span>opcode</span></strong> <i><span class="varname">opcode-value</span></i> | <strong><span>qpair</span></strong> <i><span class="varname">qpair-value</span></i> | <strong><span>nack</span></strong> <i><span class="varname">nack-value</span></i> | <strong><span>udf</span></strong> <strong><span>base</span></strong> <strong><span>l4-head</span></strong> { <i><span class="varname">udf-data</span></i> <i><span class="varname">udf-mask</span></i> <strong><span>offset</span></strong> <i><span class="varname">offset-value</span></i> } &amp;&lt;1-4&gt; } <sup>*</sup></p>

<p><b><span class="cmdname">undo if-match ipv6 rocev2 </span></b>[ <strong><span>opcode</span></strong> <i><span class="varname">opcode-value</span></i> | <strong><span>qpair</span></strong> <i><span class="varname">qpair-value</span></i> | <strong><span>nack</span></strong> <i><span class="varname">nack-value</span></i> | <strong><span>udf</span></strong> <strong><span>base</span></strong> <strong><span>l4-head</span></strong> { <i><span class="varname">udf-data</span></i> <i><span class="varname">udf-mask</span></i> <strong><span>offset</span></strong> <i><span class="varname">offset-value</span></i> } &amp;&lt;1-4&gt; ] <sup>*</sup></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907608620__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>opcode</span></strong> <i><span class="varname">opcode-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the value of the Opcode field in RoCEv2 packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 255.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>qpair</span></strong> <i><span class="varname">qpair-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the value of the Qpair field in RoCEv2 packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 16777215.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>nack</span></strong> <i><span class="varname">nack-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the value of the Nack field in RoCEv2 packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 31.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>udf</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Matches user-defined fields in RoCEv2 packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>base</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the packet header that matches a user-defined rule.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>l4-head</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Packet L4-header.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">udf-data</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the value of the user-defined packet field.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 3 to 10 case-insensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">udf-mask</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the mask of the packet field that is customized by the user.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 3 to 10 case-insensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>offset</span></strong> <i><span class="varname">offset-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the offset of the packet field that is customized by the user.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 8 to 20.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv6</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the IPv6 packets.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907608620__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Traffic classifier view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907608620__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907608620__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>You can run the <b><span class="cmdname">if-match rocev2</span></b> command to classify RoCEv2 packets so that the device processes RoCEv2 packets matching the same traffic classifier in the same manner and provides fine-granular services.</p>
<p><strong>Precautions</strong></p>
<ul><li>If udf or nack is specified in the <b><span class="cmdname">if-match rocev2</span></b> command, UDF resources are used to deliver rules. In this case, a traffic policy containing a traffic classifier that defines if-match rocev2 can be applied only in the system view.</li><li>If UDF resources are used, the <b><span class="cmdname">if-match rocev2</span></b> command supports only eight fields, including two fields occupied by RoCEv2 by default, one field occupied by opcode, one to two fields occupied by qpair (two fields will be occupied if the value exceeds 16 bit width), and one to two fields occupied by customized UDF items. Each field supports a 16 bit width.</li><li>If UDF resources are used and the <b><span class="cmdname">if-match rocev2</span></b> command is configured with the other if-match commands, the traffic policy will fail to be applied.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907608620__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a matching rule based on the Opcode value of 10 in RoCEv2 packets in the traffic classifier class1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>traffic classifier class1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-classifier-class1] <strong>if-match rocev2 opcode 10</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-MQC_Configuration_Commands_title.html">MQC Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/IF-MATCH_QOS-LOCAL-ID.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/IF-MATCH_SOURCE-MAC.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>