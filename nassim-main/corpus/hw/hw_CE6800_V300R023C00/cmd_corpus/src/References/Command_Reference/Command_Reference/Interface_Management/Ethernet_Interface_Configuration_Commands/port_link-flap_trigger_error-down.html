
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="port link-flap trigger error-down">
<meta name="DC.subject" content="port link-flap trigger error-down">
<meta name="keywords" content="port link-flap trigger error-down">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Ethernet_Interface_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PORTLINKFLAPSETTING(PICDRIVER).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PORTMODE10G(PICDRIVER).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="featuretype" content="Interface Management">
<meta name="featuretype" content="Interface Management">
<meta name="DC.Creator" content="SUBSYS_ID_PICDRIVER">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000002194483481">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>port link-flap trigger error-down</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000002194483481"></a><a name="EN-US_CLIREF_0000002194483481"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">port link-flap trigger error-down</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000002194483481__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">port link-flap trigger error-down</span></b> command enables an Ethernet interface to transit to the Error-Down state due to link flapping.</p>
<p>The <b><span class="cmdname">undo port link-flap trigger error-down</span></b> command disables an Ethernet interface from transiting to the Error-Down state due to link flapping.</p>
</p>
<p>By default, link flapping protection is enabled on an interface.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000002194483481__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">port link-flap trigger error-down</span></b></p>

<p><b><span class="cmdname">undo port link-flap trigger error-down</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000002194483481__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000002194483481__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000002194483481__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000002194483481__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Faults such as network cable faults or active/standby switchover may cause the interface status to frequently alternate between Up and Down. As a result, the network topology changes frequently. If some Layer 2 protocols are configured on an interface, the interface sends TC BPDUs to update ARP entries. If ARP entries are not updated in a timely manner, user network services are interrupted, affecting user communication.<p></p>
<span>To solve this problem</span>, configure an interface to enter the Error-Down state due to link flapping. After this function is configured, the device checks the number of interface flapping times and interval when receiving an interface Up/Down message. If the number of interface flapping times within a specified period reaches the specified value, the interface enters the Error-Down state to protect the network. After this function is enabled, an interface enters the Error-Down state if the interface status changes five times within 10s by default. When a device detects a fault on an interface, the device sets the interface status to Error-Down. The interface cannot send or receive packets, and the interface indicator is off.</p>
<p><strong>Follow-up Procedure</strong></p>
<ul><li>The link flapping detection interval and number of link flapping times are configured on the interface.</li><li>If an interface enters the Error-Down state, you are advised to check whether the optical modules at both ends of the optical interface are properly installed or whether the optical modules or optical fibers are faulty, and check whether the network cables at both ends of the electrical interface are properly installed.<p></p>
<span>You can use either of the following methods to restore</span> the interface status:</li><li>Manually rectify the fault (after the Error-Down event occurs).<p></p>
<span>If only a few interfaces are in Error-Down state</span>, run the <b><span class="cmdname">shutdown</span></b> and <b><span class="cmdname">undo shutdown</span></b> commands in the interface view or run the <b><span class="cmdname">restart</span></b> command in the interface view to restart the interfaces. For an optical interface, you can also remove and install the transmission medium to restore the interface status.</li><li>Automatic recovery (before an Error-Down event occurs)<p></p>
<span>If a large number of interfaces are in Error-Down</span> state, manually restoring the interfaces one by one will cause a lot of repeated work and some interfaces may not be configured. To prevent this problem, run the <b><span class="cmdname">error-down auto-recovery cause link-flap interval</span></b> command in the system view to enable the auto-recovery function and set the auto-recovery delay. You can run the <b><span class="cmdname">display error-down recovery</span></b> command to check information about automatic interface recovery.</li></ul>
<p><strong>Precautions</strong></p>
<p>This method does not take effect on interfaces that are already in Error-Down state. It takes effect only on interfaces that enter Error-Down state after this command is run.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000002194483481__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable link flapping protection.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>port link-flap trigger error-down</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Ethernet_Interface_Configuration_Commands_title.html">Ethernet Interface Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PORTLINKFLAPSETTING(PICDRIVER).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PORTMODE10G(PICDRIVER).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>