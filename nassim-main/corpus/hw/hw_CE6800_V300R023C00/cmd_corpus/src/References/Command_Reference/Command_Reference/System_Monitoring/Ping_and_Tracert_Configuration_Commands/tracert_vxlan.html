
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="tracert vxlan">
<meta name="DC.subject" content="tracert vxlan">
<meta name="keywords" content="tracert vxlan">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Ping_and_Tracert_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/VXLANPING(DGNLINKOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PING(DGNIP4OM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Ping and Tracert">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Ping and Tracert">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="Ping and Tracert">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Creator" content="SUBSYS_ID_DGNLINKOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907608960">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>tracert vxlan</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907608960"></a><a name="EN-US_CLIREF_0000001907608960"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">tracert vxlan</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907608960__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">tracert vxlan</span></b> command detects the gateways that packets pass through when traveling from the source host to the destination host on a VXLAN.</p>
</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907608960__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">tracert vxlan </span></b>[ <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-r</span></strong> <i><span class="varname">replymode</span></i> | <strong><span>-a</span></strong> <i><span class="varname">innersrc-address</span></i> | <strong><span>-h</span></strong> <i><span class="varname">maxttl</span></i> ] <sup>*</sup> <strong><span>vni</span></strong> <i><span class="varname">vniid</span></i> <strong><span>source</span></strong> <i><span class="varname">source-address</span></i> <strong><span>peer</span></strong> <i><span class="varname">dest-address</span></i> [ <strong><span>udp-port</span></strong> <i><span class="varname">dest-port</span></i> ] [ <strong><span>pipe</span></strong> ] [ <strong><span>load-balance</span></strong> { <strong><span>vxlan-source-udpport</span></strong> <i><span class="varname">vxlan-source-udpport</span></i> | { <strong><span>source-address</span></strong> <i><span class="varname">lb-src-address</span></i> <strong><span>destination-address</span></strong> <i><span class="varname">lb-dst-address</span></i> <strong><span>protocol</span></strong> { <strong><span>udp</span></strong> | <i><span class="varname">lb-protocolid</span></i> } <strong><span>source-port</span></strong> <i><span class="varname">lb-src-port</span></i> <strong><span>destination-port</span></strong> <i><span class="varname">lb-dst-port</span></i> <strong><span>source-mac</span></strong> <i><span class="varname">lb-sourcemac</span></i> <strong><span>destination-mac</span></strong> <i><span class="varname">lb-destinationmac</span></i> } } ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907608960__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-t</span></strong> <i><span class="varname">timeout</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the timeout interval for receiving a response packet.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 65535. The default value is 2000.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-r</span></strong> <i><span class="varname">replymode</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the mode in which the peer end returns response packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is 1, 2, or 3.</p>
<p>Each mode is described as follows:</p>
<p>1: do not reply</p>
<p>2: reply with an IPv4 or IPv6 UDP packet</p>
<p>3: reply through the control channel of the application plane</p>
<p>The default value is 2.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-a</span></strong> <i><span class="varname">innersrc-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an inner source IPv4 address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation. The default value is the IP address of the outbound interface.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-h</span></strong> <i><span class="varname">maxttl</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum number of hops on a detected path.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255. The default value is 30.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vni</span></strong> <i><span class="varname">vniid</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a VXLAN network indicator (NI).</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 16777215.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>source</span></strong> <i><span class="varname">source-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a source IPv4 address for a VXLAN tunnel.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>source-address</span></strong> <i><span class="varname">lb-src-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a load balance source IPv4 address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>peer</span></strong> <i><span class="varname">dest-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a peer IPv4 address for a VXLAN tunnel.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>udp-port</span></strong> <i><span class="varname">dest-port</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a destination UDP port number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pipe</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the TTL copy mode to pipe.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>load-balance</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates load balancing.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vxlan-source-udpport</span></strong> <i><span class="varname">vxlan-source-udpport</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a source port number for VXLAN packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 49152 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>destination-address</span></strong> <i><span class="varname">lb-dst-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a load balance destination IPv4 address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>protocol</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a protocol type.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>udp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the UDP protocol type.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">lb-protocolid</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the protocol number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>source-port</span></strong> <i><span class="varname">lb-src-port</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a load balance source port number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>destination-port</span></strong> <i><span class="varname">lb-dst-port</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a load balance destination port number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>source-mac</span></strong> <i><span class="varname">lb-sourcemac</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a load balance source MAC address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in the format of H-H-H.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>destination-mac</span></strong> <i><span class="varname">lb-destinationmac</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a load balance destination MAC address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in the format of H-H-H.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907608960__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>All views</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907608960__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>0: Visit level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907608960__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>To detect a VXLAN tunnel fault, run the <b><span class="cmdname">tracert vxlan</span></b> command. In practice, if a fault occurs on a VXLAN forwarding path, causing traffic on a VXLAN tunnel to be interrupted, you can use the tracert vxlan and <b><span class="cmdname">ping vxlan</span></b> commands to detect and locate the faulty node.<p></p>
<span>The</span> <b><span class="cmdname">tracert vxlan</span></b> command uses both vxlanecho request packets and vxlanecho reply packets to check VXLAN connectivity. Packets are transmitted in the UDP format, and the port number can be configured. The receiver distinguishes vxlanecho request and vxlanecho reply packets according to the UDP port number. A vxlanecho request packet carries FEC information to be detected, and is sent along the same VXLAN tunnel as other packets carrying the same FEC information. In this manner, VXLAN connectivity is checked. Vxlanecho request packets are transmitted to the destination through VXLAN, whereas vxlanecho reply packets are transmitted to the source through IP.<p></p>
<span>If a fault occurs when a VXLAN tunnel is detected</span> using the <b><span class="cmdname">ping vxlan</span></b> command, and packets transmitted along this VXLAN tunnel cannot reach the egress, you can run the <b><span class="cmdname">tracert vxlan</span></b> command to locate the fault. Both the tracert vxlan and <b><span class="cmdname">ping vxlan</span></b> commands can check VXLAN connectivity and locate faults.</p>
<p><strong>Prerequisites</strong></p>
<p>Basic VXLAN configurations have been complete.<p></p>
<span>The</span> <b><span class="cmdname">nqa vxlanecho enable</span></b> command has been run on the responder to enable the VXLAN ping/tracert function.</p>
<p><strong>Precautions</strong></p>
<p>By default, the source IP address used to perform a ping or tracert operation on a VXLAN network is on the underlay network. If you are not sure whether there is a route from the remote end to the local end, specify the -a parameter to configure the IP address of the tunnel as the source IP address.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907608960__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Locate the IPv4 VXLAN tunnel fault.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>tracert vxlan vni 111 source 1.1.1.1 peer 2.2.2.2 udp-port 5000</strong>
TRACERT VXLAN: vni 111 source 1.1.1.1 peer 2.2.2.2, press CTRL_C to break
TTL   Replier            Time    Ingress Port           Egress Port                 
1     10.1.2.2           94 ms   <span>100GE</span><span>1/0/1</span>              <span>100GE</span><span>1/0/2</span>  
2     2.2.2.2            94 ms   <span>100GE</span><span>1/0/1</span>              --
</pre>
</div>


<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Description of the <b><span class="cmdname">tracert vxlan</span></b> command output</caption>
    
    
<thead align="left">
<tr>
<th align="left" class="cellrowborder" valign="top" width="44.5%" id="mcps1.3.7.2.2.3.1.1" liSelected="liSelected">Item</th>

<th align="left" class="cellrowborder" valign="top" width="55.50000000000001%" id="mcps1.3.7.2.2.3.1.2" liSelected="liSelected">Description</th>

</tr>

</thead>

<tbody>
<tr>

<td class="cellrowborder" valign="top" width="44.5%" headers="mcps1.3.7.2.2.3.1.1 ">TTL</td>

<td class="cellrowborder" valign="top" width="55.50000000000001%" headers="mcps1.3.7.2.2.3.1.2 "><p>TTL in an echo request packet, indicating the number of hops through which an echo request packet passes from the source node to this node.</p>
</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="44.5%" headers="mcps1.3.7.2.2.3.1.1 ">Replier</td>

<td class="cellrowborder" valign="top" width="55.50000000000001%" headers="mcps1.3.7.2.2.3.1.2 "><p>IP address of the node sending the echo reply packet.</p>
</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="44.5%" headers="mcps1.3.7.2.2.3.1.1 ">Time</td>

<td class="cellrowborder" valign="top" width="55.50000000000001%" headers="mcps1.3.7.2.2.3.1.2 "><p>Packet processing time, in ms.</p>
</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="44.5%" headers="mcps1.3.7.2.2.3.1.1 ">Ingress Port</td>

<td class="cellrowborder" valign="top" width="55.50000000000001%" headers="mcps1.3.7.2.2.3.1.2 "><p>Inbound interface.</p>
</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="44.5%" headers="mcps1.3.7.2.2.3.1.1 ">Egress Port</td>

<td class="cellrowborder" valign="top" width="55.50000000000001%" headers="mcps1.3.7.2.2.3.1.2 "><p>Outbound interface.</p>
</td>

</tr>

</tbody>

</table>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Ping_and_Tracert_Configuration_Commands_title.html">Ping and Tracert Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/VXLANPING(DGNLINKOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PING(DGNIP4OM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>