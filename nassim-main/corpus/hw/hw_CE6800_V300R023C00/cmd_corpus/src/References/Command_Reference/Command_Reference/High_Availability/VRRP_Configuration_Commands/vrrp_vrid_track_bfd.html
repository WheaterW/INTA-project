
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="vrrp vrid track bfd">
<meta name="DC.subject" content="vrrp vrid track bfd">
<meta name="keywords" content="vrrp vrid track bfd">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_VRRP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/TRACKADMINVRRP(VRRPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/TRACKIF(VRRPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Creator" content="SUBSYS_ID_VRRPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907607420">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>vrrp vrid track bfd</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907607420"></a><a name="EN-US_CLIREF_0000001907607420"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">vrrp vrid track bfd</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907607420__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">vrrp vrid track bfd</span></b> command enables a VRRP group to track a BFD session.</p>
<p>The <b><span class="cmdname">undo vrrp vrid track bfd</span></b> command disables a VRRP group from tracking a BFD session.</p>
</p>
<p>By default, a VRRP group does not track a BFD session.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907607420__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">vrrp vrid </span></b><i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>bfd</span></strong> <i><span class="varname">bfd-session-id</span></i> [ <strong><span>increase</span></strong> <i><span class="varname">value-increased</span></i> | <strong><span>reduce</span></strong> <i><span class="varname">value-reduced</span></i> ]</p>

<p><b><span class="cmdname">vrrp vrid </span></b><i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>bfd</span></strong> <strong><span>session-name</span></strong> <i><span class="varname">bfd-configure-name</span></i> [ <strong><span>increase</span></strong> <i><span class="varname">value-increased</span></i> | <strong><span>reduce</span></strong> <i><span class="varname">value-reduced</span></i> ]</p>

<p><b><span class="cmdname">vrrp vrid </span></b><i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>bfd</span></strong> <i><span class="varname">bfd-session-id</span></i> { <strong><span>peer</span></strong> | <strong><span>link</span></strong> }</p>

<p><b><span class="cmdname">vrrp vrid </span></b><i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>bfd</span></strong> <strong><span>session-name</span></strong> <i><span class="varname">bfd-configure-name</span></i> { <strong><span>peer</span></strong> | <strong><span>link</span></strong> }</p>

<p><b><span class="cmdname">undo vrrp vrid </span></b><i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>bfd</span></strong> [ <i><span class="varname">bfd-session-id</span></i> | <strong><span>session-name</span></strong> <i><span class="varname">bfd-configure-name</span></i> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907607420__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">virtual-router-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the ID of a VRRP group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">bfd-session-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the local discriminator of a BFD session tracked by a VRRP group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 16384.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>increase</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Increases the priority of the VRRP group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">value-increased</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a value by which the priority of the VRRP group specified by virtual-router-id increases when the status of the tracked BFD session changes from up to down. This parameter takes effect regardless of whether the VRRP group is in the master or backup state.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255. As 255 is the priority of an IP address owner, the largest priority can be set to 254.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>reduce</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Reduces the priority of the VRRP group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">value-reduced</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the value by which the priority of the VRRP group decreases when the tracked BFD session changes from up to down. This parameter takes effect regardless of whether the VRRP group is in the master or backup state.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255. The smallest priority is 1. By default, the priority reduces by 10 if the tracked BFD session goes Down.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>session-name</span></strong> <i><span class="varname">bfd-configure-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of the BFD session tracked by the VRRP group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is a string of 1 to 15 characters excluding spaces. If spaces are used, the string must start and end with double quotation marks (").</p>
<ul><li>When you configure the name of a BFD session, the uppercase and lowercase letters in the name must be consistent with the name entered by the user.</li><li>BFD session names are case-insensitive. For example, ABC and abc are regarded as the same BFD session.  If a BFD session named ABC has been configured and abc is specified, the system directly displays the ABC view.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>peer</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that a monitored BFD session is a peer BFD session.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>link</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that a monitored BFD session is a link BFD session.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907607420__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100GE interface view,</span><span>10GE interface view,</span><span>200GE interface view,</span><span>25GE interface view,</span><span>400GE interface view,</span><span>50GE interface view,</span><span>Eth-Trunk interface view,</span><span>VLANIF interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907607420__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907607420__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>If a link between devices in a VRRP group fails, the VRRP group performs a master/backup switchover after a period of three times the interval at which VRRP packets are sent. Packet loss may occur during this period. BFD can rapidly monitor links and detect link faults, which helps prevent the preceding problem. The <b><span class="cmdname">vrrp vrid track bfd-session</span></b> command is used to configure a VRRP group to track BFD sessions. If the tracked BFD session status changes, the BFD module notifies the VRRP module of the change. After receiving the notification, the VRRP module adjusts the priorities of VRRP devices or directly changes VRRP status to rapidly implement a master/backup VRRP switchover.</p>

<ul><li>The vrrp vrid virtual-router-id track bfd { bfd-session-id | session-name bfd-configure-name } [ increase value-increased | reduce value-reduced ] command is used to configure a VRRP group to track a common BFD session. If the BFD session detects a fault and goes Down, it notifies the VRRP module of the status change. After receiving the notification, the VRRP module increases or reduces the VRRP priorities of devices to perform a master/backup VRRP switchover. Backup devices use BFD sessions to monitor the status of the master device.</li><li>The vrrp vrid virtual-router-id track bfd { bfd-session-id | session-name bfd-configure-name } [ peer | link ] command is used to configure the VRRP group to track a peer or link BFD session. If the peer or link BFD session detects a fault and goes Down, it notifies the VRRP module of the status change. After receiving the notification, the VRRP module directly performs a master/backup VRRP switchover without changing VRRP priorities of devices. VRRP devices identify a local fault after receiving BFD packets from a peer BFD session and a remote fault after receiving BFD packets from a link BFD session.</li></ul>
<p><strong>Prerequisites</strong></p>
<ul><li>A VRRP group has been configured using the <b><span class="cmdname">vrrp vrid virtual-ip</span></b> command.</li><li>BFD has been enabled using the <b><span class="cmdname">bfd</span></b> command.</li><li>A static BFD session has been created using the <b><span class="cmdname">bfd bind peer-ip</span></b> command, and a local discriminator has been configured using the <b><span class="cmdname">discriminator</span></b> command on each end of the BFD session. Or a static BFD session with automatically negotiated discriminators has been created using the <b><span class="cmdname">bfd bind peer-ip source-ip auto</span></b> command.</li></ul>
<p><strong>Configuration Impact</strong></p>
<p>When configuring a VRRP group to track a link BFD session, use either of the following parameters as needed:</p>

<ul><li>session-name bfd-configuration: allows a static BFD session or a static BFD session with automatically negotiated discriminators to be bound to the VRRP group.</li><li>session-id: allows only a static BFD session to be bound to the VRRP group.<p></p>
<span>After the VRRP group is configured to track a link</span> BFD session, the type of the BFD session cannot be changed. To change the BFD session type, delete existing BFD configurations and reconfigure a BFD session of a desired type.</li></ul>
<p><strong>Precautions</strong></p>
<p>If a VRRP device is an IP address owner, the association between the VRRP group and BFD does not take effect.<p></p>
<span>The increase value-increased or reduce value-reduced</span> parameter in the <b><span class="cmdname">vrrp vrid track bfd-session</span></b> command affects the change in device status in a VRRP group. The increased or reduced value must ensure that changes in VRRP priorities can trigger a master/backup switchover. For example, the priorities of the master and backup devices in a VRRP group are 120 and 110 (displayed using the <b><span class="cmdname">display vrrp</span></b> command), respectively. If the increased 20 parameter is configured on the backup device, the priority of the backup device becomes 130, a value greater than the priority of the master device. As a result, a master/backup switchover is triggered.<p></p>
<span>The VRRP considers that the BFD session detects a</span> Down event in the following situations:</p>

<ul><li>No BFD session is configured on a peer device.</li><li>The peer BFD session is shut down.</li><li>The peer BFD session is deleted.</li><li>BFD session negotiation fails.</li><li>The BFD session is Down.<p></p>
<span>The VRRP considers that the BFD session detects a</span>n Up event in the following situations:</li><li>BFD session negotiation is successful.</li><li>The BFD session changes from Down to Up.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907607420__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure VRRP group 3 to track a peer BFD session on <span>100GE</span> <span>1/0/2</span>.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bfd</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bfd] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ip address 10.1.20.1 24</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bfd peer1 bind peer-ip 10.1.20.2 interface <span>100GE</span><span>1/0/1</span> source-ip 10.1.20.1 auto</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-session-peer1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/2</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/2</span>] <strong>vrrp vrid 3 virtual-ip 10.1.20.11</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/2</span>] <strong>vrrp vrid 3 track bfd session-name peer1 peer</strong>
</pre>
</div>



<div class="p"># Configure VRRP group 1 to track a BFD session with the local discriminator set to 1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bfd</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bfd] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/2</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/2</span>] <strong>ip address 10.1.10.1 24</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/2</span>] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bfd test bind peer-ip 10.1.1.1 interface <span>100GE</span> <span>1/0/2</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-session-test] <strong>discriminator local 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-session-test] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>vrrp vrid 1 virtual-ip 10.1.1.11</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>vrrp vrid 1 track bfd 1 reduce 20</strong>
</pre>
</div>

<div class="p"># Configure VRRP group 2 to track a static BFD session named atob with automatically negotiated discriminators.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bfd</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bfd] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/3</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/3</span>] <strong>ip address 10.1.10.1 24</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bfd atob bind peer-ip 10.1.10.2 interface <span>100GE</span><span>1/0/3</span> source-ip 10.1.10.1 auto</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-session-atob] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/4</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/4</span>] <strong>vrrp vrid 2 virtual-ip 10.1.10.11</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/4</span>] <strong>vrrp vrid 2 track bfd session-name atob reduce 20</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_VRRP_Configuration_Commands_title.html">VRRP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/TRACKADMINVRRP(VRRPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/TRACKIF(VRRPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>