
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="import-rib vpn-instance protocol isis">
<meta name="DC.subject" content="import-rib vpn-instance protocol isis">
<meta name="keywords" content="import-rib vpn-instance protocol isis">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IS-IS_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/VRF-IPV6-IMPORT-ROUTE(ISISCOMMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IMPORT-ROUTE(ISISCOMMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IS-IS">
<meta name="featurename" content="IS-ISv6">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="IS-IS">
<meta name="featurename" content="IS-ISv6">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="IS-IS">
<meta name="featurename" content="IS-ISv6">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_ISISCOMMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907605644">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>import-rib vpn-instance protocol isis</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907605644"></a><a name="EN-US_CLIREF_0000001907605644"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">import-rib vpn-instance protocol isis</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907605644__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ip import-rib vpn-instance protocol isis</span></b> command imports routes in a VPN instance routing table to the public network routing table.</p>
<p>The <b><span class="cmdname">undo ip import-rib vpn-instance protocol isis</span></b> command restores the default configuration.</p>
<p>The <b><span class="cmdname">ipv6 import-rib vpn-instance protocol isis</span></b> command enables a device to import IPv6 routes from a VPN instance to the public network instance's IPv6 routing table.</p>
<p>The <b><span class="cmdname">undo ipv6 import-rib vpn-instance protocol isis</span></b> command disables a device from importing IPv6 routes from a VPN instance to the public network instance's IPv6 routing table.</p>
</p>
<p><p>
By default, routes in VPN instance routing tables are not imported to the public network routing table.
</p>
<p>
By default, a device does not import IPv6 routes from a VPN instance to the public network instance's IPv6 routing table.
</p>
</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907605644__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">



<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN: </p>

<p><b><span class="cmdname"></span></b>{ <strong><span>ip</span></strong> | <strong><span>ipv6</span></strong> } <strong><span>import-rib</span></strong> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <strong><span>protocol</span></strong> <strong><span>isis</span></strong> <i><span class="varname">process-id</span></i> [ <strong><span>valid-route</span></strong> ] [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]</p>

<p><b><span class="cmdname">undo </span></b>{ <strong><span>ip</span></strong> | <strong><span>ipv6</span></strong> } <strong><span>import-rib</span></strong> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <strong><span>protocol</span></strong> <strong><span>isis</span></strong> <i><span class="varname">process-id</span></i> [ <strong><span>valid-route</span></strong> ] [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]</p>

<p>For CE6885-LL (low latency mode): </p>

<p><b><span class="cmdname">undo ip import-rib vpn-instance </span></b><i><span class="varname">vpn-instance-name</span></i> <strong><span>protocol</span></strong> <strong><span>isis</span></strong> <i><span class="varname">process-id</span></i> [ <strong><span>valid-route</span></strong> ] [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | <strong><span>route-filter</span></strong> <i><span class="varname">route-filter-name</span></i> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907605644__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a VPN instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters, spaces not supported. In addition, the VPN instance name must not be _public_. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>protocol</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the type of routes to be imported.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>isis</span></strong> <i><span class="varname">process-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports IS-IS routes of an IS-IS process with the specified ID.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4294967295.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>valid-route</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports valid routes of the corresponding route type.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a route-policy.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The name is a string of 1 to 200 case-sensitive characters, with spaces not supported. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>route-filter</span></strong> <i><span class="varname">route-filter-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a route-filter.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6885-LL (low latency mode).</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 200 case-sensitive characters without spaces. The character string can contain spaces if it is enclosed with double quotation marks ("). If parameters are included in the referenced route-filter, specify values for them in the format of (var1, var2, ...var8) behind the route-filter name. Each value ranges from 1 to 200 characters.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907605644__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907605644__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907605644__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>In the VPN scenario, one VPN can communicate with another VPN if they have matching VPN targets, but VPNs cannot communicate with the public network. To enable a VPN to communicate with the public network, you have to ensure that the VPN and public network can obtain routes to each other. To import the VPN instance routes to public network, run the <b><span class="cmdname">ip import-rib vpn-instance</span></b> command.<p></p>
<span>In an intelligent traffic control scenario</span>, traffic of different users are distributed to different VPNs. To enable public-network traffic to reach the VPNs, run the <b><span class="cmdname">ip import-rib vpn-instance</span></b> command to import routes in each VPN instance routing table to the public network routing table.<p></p>
<span>Traffic forwarding relies on direct routes</span> (Vlink direct routes) generated based on user entries. When VLAN tag termination sub-interfaces are used for route import between VPN and public network, Vlink direct routes cannot be imported. As a result, traffic forwarding is interrupted. To solve this problem, route import between VPN and public network newly supports import of Vlink direct routes.<p></p>
<span>In the IPv6 VPN networking</span>, IPv6 users of two VPNs with matching VPN targets can communicate, but IPv6 VPN users cannot communicate with IPv6 public network users. To enable IPv6 VPN users to communicate with IPv6 public network users, you must configure IPv6 route import between VPN and public network instances. To enable a device to import IPv6 routes from a VPN instance to the public network instance, run the <b><span class="cmdname">ipv6 import-rib vpn-instance</span></b> command.<p></p>
<span>Traffic forwarding relies on direct routes</span> (Vlink direct routes) generated based on user entries. When VLAN tag termination sub-interfaces are used for route import between VPN and public network, Vlink direct routes cannot be imported. As a result, traffic forwarding is interrupted. To solve this problem, route import between VPN and public network newly supports import of Vlink direct routes.</p>
<p><strong>Configuration Impact</strong></p>
<p>Exercise caution when importing routes in a VPN instance to the public network routing table or importing IPv6 routes in a VPN instance to the public network IPv6 routing table to prevent routing loops caused by manual configurations.<p></p>
<span>After the route-policy parameter is specified in the</span> command, only the network segment routes that meet the specified conditions can be imported to the public network routing table. This prevents the device from passively importing unnecessary routes. If no policy is specified for importing routes, a large number of unexpected routes may be imported. As a result, the number of routes exceeds the upper limit or the memory is overloaded.</p>
<p><strong>Precautions</strong></p>
<p>If you run the <b><span class="cmdname">ip import-rib vpn-instance</span></b> command without specifying the valid-route parameter, the system imports the optimal routes of the specified type in the VPN instance to the corresponding public network IPv4 routing table. If these routes can be preferentially selected, they are advertised to other devices on the public network and sent to the public network IPv4 routing table to guide traffic forwarding.<p></p>
<span>If valid-route is specified</span>, the system imports valid routes of the specified type in the VPN instance to the public network IPv4 routing table of the corresponding type. If these routes can be selected, they are advertised to other devices on the public network and sent to the public network IPv4 routing table to guide traffic forwarding.<p></p>
<span>If you run the</span> <b><span class="cmdname">ipv6 import-rib vpn-instance</span></b> command without specifying the valid-route parameter, the system imports the optimal routes of the specified type in the VPN instance to the public network instance's IPv6 routing table. If these routes can be selected, they are advertised to other devices on the public network and sent to the public network IPv6 routing table to guide traffic forwarding.<p></p>
<span>If valid-route is specified</span>, the system imports valid routes of the specified type in the VPN instance to the public network IPv6 routing table of the corresponding type. If these routes can be preferentially selected, they are advertised to other devices on the public network and sent to the public network IPv6 routing table to guide traffic forwarding.<p></p>
<span>If route-policy route-policy-name is specified in</span> this command, the following items can be matched: the outbound interface, next hop address ACL list of IP routing information, next hop address prefix list of IP routing information, route cost, route type, route tag, IPv6 route next-hop address ACL list, IPv6 route next-hop address prefix list, routing protocol type, and route priority. The route cost, route tag, and route priority can be set.<p></p>
<span>If the referenced policy contains unsupported attribute</span> matching or setting an action, unexpected results may occur.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907605644__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the device to import IS-IS routes in the routing table of the VPN instance vrf1 to the public network routing table.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vrf1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vrf1] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vrf1-af-ipv4] <strong>route-distinguisher 100:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vrf1-af-ipv4] <strong>vpn-target 111:1 both</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vrf1-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vrf1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ip import-rib vpn-instance vrf1 protocol isis 1 valid-route</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IS-IS_Configuration_Commands_title.html">IS-IS Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/VRF-IPV6-IMPORT-ROUTE(ISISCOMMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/IMPORT-ROUTE(ISISCOMMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>