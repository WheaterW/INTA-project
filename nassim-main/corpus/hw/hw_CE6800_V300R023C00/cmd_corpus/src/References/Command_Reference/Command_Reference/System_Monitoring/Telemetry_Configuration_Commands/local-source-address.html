
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="local-source-address">
<meta name="DC.subject" content="local-source-address">
<meta name="keywords" content="local-source-address">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Telemetry_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/LEVEL(TELEMETRYOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/LOCAL-SOURCE-INTERFACE(TELEMETRYOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Creator" content="SUBSYS_ID_TELEMETRYOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942848313">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>local-source-address</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942848313"></a><a name="EN-US_CLIREF_0000001942848313"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">local-source-address</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942848313__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">local-source-address ipv4</span></b> command sets a source IPv4 address and a source port number when UDP or gRPC is used for data sending.</p>
<p>The <b><span class="cmdname">undo local-source-address ipv4</span></b> command deletes the source IPv4 address and source port number configured when UDP or gRPC is used for data sending.</p>
<p>The <b><span class="cmdname">local-source-address ipv6</span></b> command sets a source IPv6 address and a source port number when UDP or gRPC is used for data sending.</p>
<p>The <b><span class="cmdname">undo local-source-address ipv6</span></b> command deletes the source IPv6 address and source port number configured when UDP or gRPC is used for data sending.</p>
</p>
<p>By default, the source IP address is the IP address of route's outbound interface selected by UDP or gRPC and the source port number is randomly selected.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942848313__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">local-source-address ipv4 </span></b><i><span class="varname">ipv4-address</span></i> [ <strong><span>port</span></strong> <i><span class="varname">port-value</span></i> ]</p>


<p><b><span class="cmdname">local-source-address ipv6 </span></b><i><span class="varname">ipv6-address</span></i> [ <strong><span>port</span></strong> <i><span class="varname">port-value6</span></i> ]</p>


<p><b><span class="cmdname">undo local-source-address ipv4</span></b></p>

<p><b><span class="cmdname">undo local-source-address ipv4 </span></b><i><span class="varname">ipv4-address</span></i> [ <strong><span>port</span></strong> <i><span class="varname">port-value</span></i> ]</p>


<p><b><span class="cmdname">undo local-source-address ipv6</span></b></p>

<p><b><span class="cmdname">undo local-source-address ipv6 </span></b><i><span class="varname">ipv6-address</span></i> [ <strong><span>port</span></strong> <i><span class="varname">port-value6</span></i> ]</p>


</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942848313__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>port</span></strong> <i><span class="varname">port-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a IPv4 source port number when UDP is used for data sending.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>port</span></strong> <i><span class="varname">port-value6</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a IPv6 source port number when UDP is used for data sending.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1025 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv4</span></strong> <i><span class="varname">ipv4-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a source IPv4 address for data sending.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv6</span></strong> <i><span class="varname">ipv6-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a source IPv6 address for data sending.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a 32-bit hexadecimal string in the format of X:X:X:X:X:X:X:X.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942848313__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Subscription view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942848313__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>3: Management level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942848313__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>To statically subscribe to sampled data, you need to configure the source IP address and source port number (only for UDP) in the subscription view to ensure that the device and collector can communicate with each other.<p></p>
<span>Only one combination of the source IP address and</span> source port number can be configured for a subscription. After the configuration is complete:</p>

<ul><li>The configured source IP address and source port number are filled in the UDP message header of the data sent through UDP.</li><li>The configured source IP address is filled in the gRPC message header of the data sent through gRPC.</li></ul>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>The configured IP address must be routable to the collector's IP address.</li><li>If a source IPv6 address has been configured, the address cannot be directly changed to a source IPv4 address. To change the address to a source IPv4 address, you must delete the source IPv6 address first.</li><li>After a source IPv4 address is configured for a subscription, this address takes effect only for the IPv4 collector in the subscription. The IPv6 collector in the subscription uses an outbound interface's IPv6 address as the source address.</li><li>After a source IPv6 address is configured for a subscription, this address takes effect only for the IPv6 collector in the subscription. The IPv4 collector in the subscription uses an outbound interface's IPv4 address as the source address.</li><li>A maximum of two pairs of source IP addresses and source ports can be configured for all subscriptions in each VS. If more than two pairs of source IP addresses and source ports are configured, an error message is displayed.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942848313__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the source IPv4 address to 10.10.1.1 and the source port number to 11111 when UDP is used for data sending.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>telemetry</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-telemetry] <strong>subscription test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-telemetry-subscription-test] <strong>local-source-address ipv4 10.10.1.1 port 11111</strong>
</pre>
</div>

<div class="p"># Set the source IPv4 address to 10.10.1.1 when gRPC is used for data sending.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>telemetry</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-telemetry] <strong>subscription test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-telemetry-subscription-test] <strong>local-source-address ipv4 10.10.1.1</strong>
</pre>
</div>

<div class="p"># Set the source IPv6 address to 2001:db8:4::1 when gRPC is used for data sending.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>telemetry</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-telemetry] <strong>subscription test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-telemetry-subscription-test] <strong>local-source-address ipv6 2001:db8:4::1</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Telemetry_Configuration_Commands_title.html">Telemetry Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/LEVEL(TELEMETRYOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/LOCAL-SOURCE-INTERFACE(TELEMETRYOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>