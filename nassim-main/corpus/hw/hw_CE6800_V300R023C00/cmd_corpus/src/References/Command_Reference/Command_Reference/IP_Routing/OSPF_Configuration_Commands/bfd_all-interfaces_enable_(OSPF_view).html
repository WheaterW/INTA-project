
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="bfd all-interfaces enable (OSPF view)">
<meta name="DC.subject" content="bfd all-interfaces enable (OSPF view)">
<meta name="keywords" content="bfd all-interfaces enable (OSPF view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPF-BFD-FEATURE_1(OSPFCOMMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CLEAR-OSPF-LOOP-DETECT(OSPFCOMMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_OSPFCOMMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942842385">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>bfd all-interfaces enable (OSPF view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942842385"></a><a name="EN-US_CLIREF_0000001942842385"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">bfd all-interfaces enable (OSPF view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942842385__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">bfd all-interfaces enable</span></b> command enables BFD in an OSPF process.</p>
<p>The <b><span class="cmdname">undo bfd all-interfaces enable</span></b> command disables BFD in an OSPF process.</p>
<p>The <b><span class="cmdname">bfd all-interfaces incr-cost</span></b> command enables an OSPF process to adjust the cost based on BFD.</p>
<p>The <b><span class="cmdname">undo bfd all-interfaces incr-cost</span></b> command disables an OSPF process from adjusting the cost based on BFD.</p>
</p>
<p><p>
By default, BFD is disabled.
</p>
<p>
By default, an OSPF process does not adjust the cost based on BFD.
</p>
</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942842385__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">bfd all-interfaces enable</span></b></p>


<p><b><span class="cmdname">bfd all-interfaces incr-cost </span></b>{ <i><span class="varname">cost</span></i> | <strong><span>max-reachable</span></strong> }</p>

<p><b><span class="cmdname">undo bfd all-interfaces enable</span></b></p>


<p><b><span class="cmdname">undo bfd all-interfaces incr-cost </span></b>[ <i><span class="varname">cost</span></i> | <strong><span>max-reachable</span></strong> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942842385__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>incr-cost</span></strong> <i><span class="varname">cost</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a cost adjustment value.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 1 to 65534 .</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>max-reachable</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Adjusts the link cost to the maximum link cost 65535.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>


</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942842385__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>OSPF view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942842385__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942842385__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>BFD can fast detect a fault on a network, minimizing the impact of the fault on services.<p></p>
<span>You can enable BFD either on an interface or in an</span> OSPF process. The configurations of BFD on an interface take precedence over those in an OSPF process. When BFD detects a fault, which is rectified soon, the corresponding interface is disconnected due to the BFD Down event. As a result, the link is unstable, and traffic is lost.<p></p>
<span>To ensure network reliability and solve the preceding</span> problems, run the <b><span class="cmdname">bfd all-interfaces incr-cost</span></b> command for OSPF to adjust the link cost. When the OSPF process detects that the BFD session goes down, OSPF automatically increases the cost of the corresponding interface so that the problem link associated with the BFD session is not preferentially selected; in this case, traffic is transmitted over other links.<p></p>
<span>When the device detects that the BFD session goes</span> up, the cost of the interface is automatically restored to the original value. If link quality changes frequently, BFD status changes frequently too, causing link instability, which may in turn lead to traffic loss. To solve the preceding problem, you can run the bfd all-interfaces incr-cost wtr command on the OSPF interface for delayed interface cost restoration. BFD status changes within the delay do not cause path calculation changes, ensuring network reliability.</p>
</p>
<p><strong>Prerequisites</strong></p>
<p>Before running the <b><span class="cmdname">bfd all-interfaces incr-cost</span></b> command, you need to run the <b><span class="cmdname">bfd all-interfaces enable</span></b> command to enable BFD in the OSPF process.</p>
<p><strong>Precautions</strong></p>
<p>The cost value association with BFD configured on an interface takes precedence over that configured in a process.<p></p>
<span>A BFD session can be established only after global</span> BFD is configured on both ends and the <b><span class="cmdname">bfd all-interfaces enable</span></b> command is run. In addition, OSPF establishes BFD sessions only with neighbors in the Exstart state.<p></p>
<span>The</span> <b><span class="cmdname">bfd all-interfaces</span></b> command and the ospf bfd block command are mutually exclusive.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942842385__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">


<div class="p"># Configure an OSPF process to adjust the link cost to 5 based on BFD.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospf 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospf-100] <strong>bfd all-interfaces enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospf-100] <strong>bfd all-interfaces incr-cost 5</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">OSPF Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/OSPF-BFD-FEATURE_1(OSPFCOMMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/CLEAR-OSPF-LOOP-DETECT(OSPFCOMMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>