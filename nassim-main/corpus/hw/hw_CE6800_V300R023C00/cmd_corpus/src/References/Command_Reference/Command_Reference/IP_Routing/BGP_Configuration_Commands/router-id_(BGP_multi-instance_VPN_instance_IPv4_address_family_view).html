
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="router-id (BGP multi-instance VPN instance IPv4 address family view)">
<meta name="DC.subject" content="router-id (BGP multi-instance VPN instance IPv4 address family view)">
<meta name="keywords" content="router-id (BGP multi-instance VPN instance IPv4 address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-INSTANCE-ROUTER-ID(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULTI-ROUTER-ID-ALLOW-SAME(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942844737">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>router-id (BGP multi-instance VPN instance IPv4 address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942844737"></a><a name="EN-US_CLIREF_0000001942844737"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">router-id (BGP multi-instance VPN instance IPv4 address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942844737__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">router-id</span></b> command configures a router ID for the BGP-VPN instance IPv6 address family.</p>
<p>The <b><span class="cmdname">undo router-id</span></b> command deletes the router ID configured for the BGP-VPN instance IPv6 address family.</p>
</p>
<p>By default, if no router ID is configured for the BGP VPN instance IPv4/IPv6 address family, the BGP router ID (if any) is used. If no BGP router ID exists, an interface IP address in the VPN instance is used.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942844737__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">router-id </span></b>{ <i><span class="varname">router-id-value</span></i> | <strong><span>auto-select</span></strong> }</p>

<p><b><span class="cmdname">undo router-id</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942844737__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">router-id-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a router ID in the IPv4 address format. The router ID 0.0.0.0 is not supported.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>auto-select</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Automatically selects a router ID for the IPv4 or IPv6 address family of an existing BGP VPN instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942844737__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP multi-instance VPN instance IPv4 address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942844737__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942844737__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>After a router ID is configured for the BGP-VPN instance IPv4 address family, the router ID of the BGP-VPN instance IPv4 address family can be distinguished from the router ID of BGP, meeting the requirements of specific scenarios.<p></p>
<span>For example</span>, two VPN instances vrf1 and vrf2 are configured on a BGP device. To establish a BGP session between vrf1 and vrf2 through the bound interfaces, you can configure different router IDs for the BGP-VPN instance IPv4 address family. If the router ID is not configured, the BGP peer relationship cannot be established because the router IDs in the BGP-VPN instance IPv4 address family are the same as the BGP router ID.<p></p>
<span>The rules for selecting a router ID for a BGP-VPN</span> instance are as follows:</p>

<ul><li>If loopback interfaces configured with IP addresses are bound to the VPN instance, the largest IP address among the IP addresses of the loopback interfaces is selected as the router ID.</li><li>If no loopback interface configured with an IP address is bound to the VPN instance, the largest IP address among the other interfaces bound to the VPN instance is selected as the router ID, regardless of whether the interface is Up or Down.</li></ul>
</div>
<p><strong>Configuration Impact</strong></p>
<p><p>When you change the router ID of a BGP-VPN instance IPv4 address family or delete a configured router ID, the BGP session will be reset if there are established BGP sessions in the BGP-VPN instance IPv4 address family. Exercise caution when running this command.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>If two devices have different router IDs, an IBGP or EBGP connection can be established between them. If the router IDs are the same and the <b><span class="cmdname">router-id allow-same enable</span></b> command is run in the BGP multi-instance view, an EBGP connection can be established.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942844737__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a Router ID for the Device.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>route-distinguisher 100:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>vpn-target 111:1 both</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100 instance a</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a] <strong>ipv4-family vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a-vpna] <strong>router-id 10.1.1.1</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/BGP-MULI-INSTANCE-ROUTER-ID(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BGP-MULTI-ROUTER-ID-ALLOW-SAME(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>