
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="stp loop-protection (Layer 2 interface view)">
<meta name="DC.subject" content="stp loop-protection (Layer 2 interface view)">
<meta name="keywords" content="stp loop-protection (Layer 2 interface view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/STPLINKSHAREPROTECTION(MSTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/GLOBALSTPMAXHOPS(MSTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_MSTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907602028">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>stp loop-protection (Layer 2 interface view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907602028"></a><a name="EN-US_CLIREF_0000001907602028"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">stp loop-protection (Layer 2 interface view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907602028__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">stp loop-protection</span></b> command enables loop protection on a port.</p>
<p>The <b><span class="cmdname">undo stp loop-protection</span></b> command disables loop protection on a port.</p>
</p>
<p>By default, loop protection is disabled on ports.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907602028__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">stp loop-protection</span></b></p>

<p><b><span class="cmdname">undo stp loop-protection</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907602028__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907602028__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Layer 2 100GE interface view,</span><span>Layer 2 10GE interface view,</span><span>Layer 2 200GE interface view,</span><span>25GE-L2 view,</span><span>400GE-L2 view,</span><span>Layer 2 50GE interface view,</span><span>Layer 2 Eth-Trunk interface view,</span><span>Layer 2 GE interface view,</span><span>Interface group view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907602028__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907602028__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>On a network running STP, a device maintains the status of the root port and blocked port by continually receiving Bridge Protocol Data Units (BPDUs) from the upstream device. If ports cannot receive BPDUs from the upstream device due to link congestion or unidirectional link failures, the device will re-select a root port. Then, the previous root port becomes a designated port and the previous blocked port enters the Forwarding state. As a result, loops may occur on the network.<p></p>
<span>To prevent network loops</span>, run the stp loop-protection command to configure loop protection. If the root port or the Alternate port cannot receive BPDUs from the upstream device for a long period of time after the loop protection function is enabled, the root port or the Alternate port will send a notification message to the NMS. The root port will enter the Discarding state, and the Alternate port remains in the blocked state and no longer forwards packets. This prevents loops on the network. The root port or Alternate port restores the Forwarding state after receiving BPDUs.<p></p>
<span>An Alternate port is the backup of the root port</span>. When the root port can normally send and receive BPDUs, the Alternate port is in the blocked state.<p></p>
<span>Between two interconnected devices on a spanning tree</span>, the device closer to the root bridge is the upstream device of the other device.</p>
</p>
<p><strong>Prerequisites</strong></p>
<p><p>If loop protection needs to be configured on an interface in a non-zero process, the <b><span class="cmdname">stp binding process</span></b> command must have been run to bind this interface to the process.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907602028__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">


<div class="p"># Enable loop protection on <span>100GE</span><span>1/0/1</span>.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>portswitch</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>stp loop-protection</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">STP/RSTP/MSTP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/STPLINKSHAREPROTECTION(MSTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/GLOBALSTPMAXHOPS(MSTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>