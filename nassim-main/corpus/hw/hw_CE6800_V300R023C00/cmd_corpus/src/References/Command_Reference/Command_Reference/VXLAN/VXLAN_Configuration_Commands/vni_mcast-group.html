
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="vni mcast-group">
<meta name="DC.subject" content="vni mcast-group">
<meta name="keywords" content="vni mcast-group">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_VXLAN_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/VNIHEADENDIPLIST_2(NVO3).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/VNI_RESERVED_FOR_M-LAG.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="DC.Creator" content="SUBSYS_ID_NVO3">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907607184">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>vni mcast-group</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907607184"></a><a name="EN-US_CLIREF_0000001907607184"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">vni mcast-group</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907607184__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">vni mcast-group</span></b> command enables the multicast replication mode for forwarding BUM packets and sets the multicast replication address of a specific VNI.</p>
<p>The <b><span class="cmdname">undo vni mcast-group</span></b> command restores the default setting.</p>
</p>
<p>By default, BUM packets are forwarded in ingress replication mode, and no multicast replication address is set.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907607184__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">vni </span></b><i><span class="varname">vni-id</span></i> <strong><span>mcast-group</span></strong> <i><span class="varname">ip-address</span></i></p>

<p><b><span class="cmdname">undo vni </span></b><i><span class="varname">vni-id</span></i> <strong><span>mcast-group</span></strong> <i><span class="varname">ip-address</span></i></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907607184__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">vni-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a VNI.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer ranging from 1 to 16777215.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ip-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a multicast replication address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a multicast IP address in dotted decimal notation and ranges from 224.0.1.0 to 239.255.255.255.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907607184__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>NVE interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907607184__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907607184__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Using the ingress replication mode to forward a large number of Broadcast&amp;Unknown-unicast&amp;Multicast (BUM) packets on a VXLAN network increases the network load and consumes lots of network bandwidth resources. To resolve the issue, run the <b><span class="cmdname">vni mcast-group</span></b> command on each VTEP to configure the multicast replication mode. In multicast replication mode, all VTEPs with the same VNI join the same multicast group. A multicast routing protocol, such as PIM, is used to create a multicast forwarding entry for the multicast group. When a VTEP receives a BUM packet from a local VM, it adds a multicast destination IP address to the BUM packet before sends the packet to the remote VTEPs based on the created multicast forwarding entry.<p></p>
<span>After you run the</span> <b><span class="cmdname">vni mcast-group</span></b> command, mappings between VNIs and multicast groups are established. After receiving a VXLAN multicast packet, the VTEP checks the UNI in the packet. If no matching mapping between the VNI and multicast group is found, the VTEP will discard the packet.</p>
<p><strong>Precautions</strong></p>
<ul><li>This command is mutually exclusive with the <b><span class="cmdname">vni flood-vtep</span></b> command. In other words, multicast replication and centralized replication of BUM packets cannot be configured together.</li><li>After configuring multicast replication, you can still run the <b><span class="cmdname">vni head-end peer-list</span></b> command to generate a remote VTEP address list for VXLAN tunnel establishment. However, multicast replication, instead of ingress replication, is used for BUM packets.</li><li>One VNI can be configured with only one multicast replication address, and multiple VNIs can share one multicast replication address. That is, one VNI can correspond to only one multicast group, but one multicast group can correspond to multiple VNIs.</li><li>This command cannot be used if BIDIR-PIM or PIM-DM has been enabled.</li><li>If a VXLAN VNI has been configured in the BD view and IGMP snooping has been enabled in the BD view, multicast replication of BUM packets for the VNI cannot be enabled on an NVE interface.</li><li>If a VXLAN VNI has been configured in the BD view and IGMP has been enabled (using the igmp enable command) in the VBDIF view of the BD, multicast replication of BUM packets for the VNI cannot be enabled on an NVE interface.</li><li>The multicast replication address of a VNI specified on an NVE interface cannot be the same as the share-group address (multicast-domain share-group).</li><li>A multicast group address in the switch-MDT switch-address pool (multicast-domain switch-group-pool) cannot be used as a multicast replication address for a specified VNI on an NVE's interface.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907607184__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure multicast replication address 224.1.1.1 for VNI 10.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface nve 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Nve1] <strong>vni 10 mcast-group 224.1.1.1</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_VXLAN_Configuration_Commands_title.html">VXLAN Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/VNIHEADENDIPLIST_2(NVO3).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/VNI_RESERVED_FOR_M-LAG.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>