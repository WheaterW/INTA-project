
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="spt-switch-threshold group-policy (IPv6)">
<meta name="DC.subject" content="spt-switch-threshold group-policy (IPv6)">
<meta name="keywords" content="spt-switch-threshold group-policy (IPv6)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IPv6_PIM_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PIM-IPV6-SPT-SWITCH-THRESHOLD(PIMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PIM-IPV6-SPT-SWITCH-THRESHOLD_3(PIMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Creator" content="SUBSYS_ID_PIMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942845909">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>spt-switch-threshold group-policy (IPv6)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942845909"></a><a name="EN-US_CLIREF_0000001942845909"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">spt-switch-threshold group-policy (IPv6)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942845909__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">spt-switch-threshold group-policy</span></b> command sets a multicast data forwarding rate threshold at which a receiver's designated router (DR) performs a switchover from the rendezvous point tree (RPT) to the shortest path tree (SPT).</p>
<p>The <b><span class="cmdname">undo spt-switch-threshold group-policy</span></b> command restores the default value.</p>
</p>
<p>By default, a receiver's DR performs a switchover from the RPT to the SPT immediately after receiving the first multicast data packet.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942845909__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">spt-switch-threshold </span></b><i><span class="varname">traffic-rate</span></i> <strong><span>group-policy</span></strong> { <i><span class="varname">basic-acl6-number</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl6-name</span></i> } [ <strong><span>order</span></strong> <i><span class="varname">order-value</span></i> ]</p>

<p><b><span class="cmdname">undo spt-switch-threshold </span></b>[ <i><span class="varname">traffic-rate</span></i> ] <strong><span>group-policy</span></strong> { <i><span class="varname">basic-acl6-number</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl6-name</span></i> }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942845909__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">traffic-rate</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a multicast data forwarding rate threshold at which a receiver's DR performs a switchover from the RPT to the SPT.</p>
<p>Multicast data forwarding rate = Number of multicast data bytes received in a period/Duration of the period (the duration can be specified using the timer spt-switch command).</p>
<p>When the multicast data forwarding rate exceeds traffic-rate, the system performs a switchover from the RPT to the SPT. After the switchover is complete, the system does not switch traffic back to the RPT any more.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4194304, in kbit/s.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">basic-acl6-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specify a basic ACL6.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 2000 to 2999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl6-name</span></strong> <i><span class="varname">acl6-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a named basic IPv6 ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters, spaces not supported. The name must start with a letter or digit, and cannot contain only digits.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>order</span></strong> <i><span class="varname">order-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the order of an IPv6 ACL in the group policy.</p>
<p>If a multicast group matches more than one IPv6 ACL, the system determines the threshold to be used based on order-value of the IPv6 ACLs.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer and is any value other than original one in the current group-policy list. If this parameter is not specified, the original IPv6 ACL order is used.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942845909__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>IPv6 PIM view,</span><span>VPN instance IPv6 PIM view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942845909__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942845909__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p>In PIM-SM, a source's DR encapsulates multicast data packets in a Register message and sends the Register message to the rendezvous point (RP). The RP then transmits the multicast data packets along the RPT. The RP and the receiver's DR are responsible for checking the rate of multicast data packets.<p></p>
<span>If a rate threshold is configured on the receiver</span>'s DR, the receiver's DR sends a Join message to the source only it finds that the rate of multicast data packets exceeds the threshold and then triggers the switchover from the RPT to the SPT. To set such a rate threshold, run the spt-switch-threshold command.<p></p>
<span>This command takes effect on the Router that functions</span> as the receiver's DR, but does not take effect on the RP.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942845909__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># In the public network instance, configure a group policy: Set the ACL number to 2010 and rate threshold to 100 kbit/s. Insert the ACL at the first place.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl ipv6 2010</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl6-basic-2010] <strong>rule permit source ff02:: 96</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl6-basic-2010] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>multicast ipv6 routing-enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>pim ipv6</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pim6] <strong>spt-switch-threshold 100 group-policy 2010 order 1</strong>
</pre>
</div>

<div class="p"># In the public network instance, configure a group policy: Set the ACL name to myacl6 and rate threshold to 100 kbit/s. Insert the ACL at the first place.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl ipv6 name myacl6 basic</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl6-basic-myacl6] <strong>rule permit source ff03::101 128</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl6-basic-myacl6] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>multicast ipv6 routing-enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>pim ipv6</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pim6] <strong>spt-switch-threshold 100 group-policy acl6-name myacl6 order 1</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IPv6_PIM_Configuration_Commands_title.html">IPv6 PIM Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PIM-IPV6-SPT-SWITCH-THRESHOLD(PIMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PIM-IPV6-SPT-SWITCH-THRESHOLD_3(PIMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>