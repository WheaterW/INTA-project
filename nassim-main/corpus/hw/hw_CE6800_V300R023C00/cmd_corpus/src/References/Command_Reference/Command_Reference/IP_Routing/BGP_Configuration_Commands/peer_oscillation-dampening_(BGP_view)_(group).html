
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer oscillation-dampening (BGP view) (group)">
<meta name="DC.subject" content="peer oscillation-dampening (BGP view) (group)">
<meta name="keywords" content="peer oscillation-dampening (BGP view) (group)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PEER-OSCILLATION-DAMPENING(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/VRF-PEER-OSCILLATION-DAMPENING(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907604680">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer oscillation-dampening (BGP view) (group)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907604680"></a><a name="EN-US_CLIREF_0000001907604680"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer oscillation-dampening (BGP view) (group)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907604680__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer oscillation-dampening disable</span></b> command disables a device from suppressing the establishment of BGP connections with peers in a BGP peer group that flap continuously.</p>
<p>The <b><span class="cmdname">undo peer oscillation-dampening disable</span></b> command cancels the configuration of disabling a device from suppressing the establishment of BGP connections with peers in a BGP peer group that flap continuously.</p>
<p>The <b><span class="cmdname">peer oscillation-dampening</span></b> command suppresses the establishment of peer relationships that flap continuously in a BGP peer group.</p>
<p>The <b><span class="cmdname">undo peer oscillation-dampening</span></b> command cancels the configuration of suppressing the establishment of BGP connections with peers in a BGP peer group that flap continuously and restores the default configuration.</p>
</p>
<p>By default, BGP suppresses the establishment of a specified peer group's peer relationships that flap continuously.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907604680__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">peerGroupName</span></i> <strong><span>oscillation-dampening</span></strong> <strong><span>disable</span></strong></p>

<p><b><span class="cmdname">peer </span></b><i><span class="varname">peerGroupName</span></i> <strong><span>oscillation-dampening</span></strong></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">peerGroupName</span></i> <strong><span>oscillation-dampening</span></strong> <strong><span>disable</span></strong></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">peerGroupName</span></i> <strong><span>oscillation-dampening</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907604680__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">peerGroupName</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a peer group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The name is a string of 1 to 47 case-sensitive characters, with spaces not supported. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907604680__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907604680__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907604680__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>After a BGP peer relationship is established, the local device learns all routes from the peer and also advertises its local routes to the peer. If the peer relationship is disconnected, the local device deletes all the routes learned from the peer.<p></p>
<span>Generally</span>, a large number of BGP routes exist, and in this case, a large number of routes change and a large amount of data is processed when the BGP peer relationship is flapping. As a result, a high volume of resources are consumed, causing high CPU usage. To prevent high CPU usage in this case, BGP needs to be enabled to suppress the establishment of the peer relationship if it flaps continuously. Such suppression is implemented for a BGP peer relationship that flaps for more than five times consecutively, and the suppression period increases as the number of flapping times increases. You can run the <b><span class="cmdname">display bgp peer verbose</span></b> command to check the remaining time that BGP waits to establish the BGP peer relationship.<p></p>
<span>After the peer relationship stops flapping for a certain</span> period, suppression on the peer relationship establishment is automatically removed. To immediately remove the suppression, you can run the <b><span class="cmdname">peer oscillation-dampening disable</span></b> command. Alternatively, you can run a <b><span class="cmdname">reset</span></b> command or another command that can cause the peer relationship to be disconnected and re-established.</p>
<p><strong>Precautions</strong></p>
<p>By default, the initial time that the device waits to establish a peer relationship is 10s. If the <b><span class="cmdname">peer timer connect-retry</span></b> command is run, the configured ConnectRetry interval is used as the initial waiting time.<p></p>
<span>If peer dampening is configured and the initial time</span> of waiting for peer relationship establishment is less than 600s, the actual time that the device waits to establish the peer relationship equals the initial waiting time plus the dampening period. The dampening time increases with the number of flapping times until the waiting time for establishing a peer relationship reaches 600s.<p></p>
<span>If the peer oscillation-dampening</span> [ disable ] command is run on the local peer and the specified peer is added to the peer group, the configuration of the peer takes precedence over the configuration of the peer group.<p></p>
<span>If the peer oscillation-dampening</span> [ disable ] command is not run on a local peer, the peer inherits the configurations of the peer group after being added to the peer group, and retains the configurations of the peer group even after being removed from the peer group.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907604680__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Disable BGP from suppressing the establishment of a specified peer group's peer relationships that flap continuously.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>group test internal</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer test oscillation-dampening disable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PEER-OSCILLATION-DAMPENING(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/VRF-PEER-OSCILLATION-DAMPENING(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>