
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ip extcommunity-filter advanced">
<meta name="DC.subject" content="ip extcommunity-filter advanced">
<meta name="keywords" content="ip extcommunity-filter advanced">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IP_Routing_Policy_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/ADVANCED-EXTCOMMUNITY-FILTER(RTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/EXT-COMMNUNITY-FILTER_1(RTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_RTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942845249">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ip extcommunity-filter advanced</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942845249"></a><a name="EN-US_CLIREF_0000001942845249"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">ip extcommunity-filter advanced</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942845249__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ip extcommunity-filter advanced</span></b> command adds an advanced VPN-Target extended community filter.</p>
<p>The <b><span class="cmdname">undo ip extcommunity-filter advanced</span></b> command deletes a specified advanced VPN-Target extended community filter.</p>
</p>
<p>By default, no advanced VPN-Target extended community filter is configured.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942845249__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">ip extcommunity-filter advanced </span></b><i><span class="varname">advanced-extcomm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] <i><span class="varname">matchMode</span></i> <i><span class="varname">regular-expression</span></i></p>

<p><b><span class="cmdname">undo ip extcommunity-filter advanced </span></b><i><span class="varname">advanced-extcomm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] [ [ <i><span class="varname">matchMode</span></i> ] <i><span class="varname">regular-expression</span></i> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942845249__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>index</span></strong> <i><span class="varname">index-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the sequence number of an advanced VPN-Target extended community filter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4294967295.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">matchMode</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the matching mode of the advanced VPN-Target extended community filter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is an enumerated type:</p>
<ul><li>permit: Sets the matching mode of the VPN-Target extended community filter to permit.</li><li>deny: Sets the matching mode of the VPN-Target extended community filter to deny.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">regular-expression</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the regular expression matched the VPN-Target extended community.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 1024 characters, spaces supported.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>advanced</span></strong> <i><span class="varname">advanced-extcomm-filter-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of the advanced VPN-Target extended community filter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The name is a string of 1 to 51 case-sensitive characters, spaces not supported. The string cannot be all digits. The character string can contain spaces if it is enclosed with double quotation marks (").</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942845249__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942845249__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942845249__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>A VPN-Target extended community filter can be used as a matching condition of a route-policy using a command, such as the if-match extcommunity-filter zz command.<p></p>
<span>The relationship between the rules of the VPN-Target</span> extended community filter is "OR", which is different from that of an RD filter. This is because each route has only one RD but can have multiple communities.<p></p>
<span>The</span> <b><span class="cmdname">undo ip extcommunity-filter</span></b> command deletes a specified VPN-Target extended community filter.<p></p>
<span>The</span> display ip extcommunity-filter command displays detailed configurations of the VPN-Target extended community filter.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<p><p>The ip extcommunity-filter command filters routes based on the RT attributes of the routes. The routes that match the filtering are permitted to pass through, and the routes that fail to match the filtering are denied.</p>
</p>
<p><strong>Precautions</strong></p>
<div class="p"><p>The extended community attributes of a route include VPN-Target and Source of Origin (SoO). This command is used to match VPN-Target.<p></p>
<span>The</span> default action of a VPN-Target extended community filter is deny. That is, if a route is not permitted in a filtering, the route cannot pass the filtering. If all filtering rules in a filter are deny, no route can pass the filter. In this case, you need to set permit after deny for multiple times or one time to allow all the other routes to pass the filter.<p></p>
<span>For an advanced VPN-Target extended community filter</span>, if the attribute value is in the format of 4-byte AS number:2-byte user-defined number, the filtering rule using the regular expression is affected by the <b><span class="cmdname">as-notation plain</span></b> command.</p>

<ul><li>If the <b><span class="cmdname">as-notation plain</span></b> command is run, a regular expression in the format of 4-byte AS number:2-byte user-defined number must be configured so that routes can match the regular expression.</li><li>If the <b><span class="cmdname">as-notation plain</span></b> command is not run, you need to configure a regular expression in the format of 4-byte AS number in dotted notation:2-byte user-defined number so that routes can match the regular expression.<p></p>
<span>Note</span>: If the <b><span class="cmdname">as-notation plain</span></b> command is run, you need to reconfigure the regular expression. Otherwise, routes may fail to match the inbound or outbound policy, causing network faults.<p></p>
<span>Regular expression matching is CPU-intensive processing</span>. When a large number of regular expressions are configured in a policy to match route attributes and the corresponding route attributes are long, the policy processing performance deteriorates. To improve the processing performance of the routing policy, reduce the number of regular expressions or use non-regular expression matching commands.<p></p>
<span>If too many regular expressions are configured</span>, the performance is affected, and even the protocol peer flapping occurs.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942845249__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a VPN-Target extended community filter named aa.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip extcommunity-filter advanced aa permit 200:*</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IP_Routing_Policy_Configuration_Commands_title.html">Routing Policy Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/ADVANCED-EXTCOMMUNITY-FILTER(RTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/EXT-COMMNUNITY-FILTER_1(RTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>