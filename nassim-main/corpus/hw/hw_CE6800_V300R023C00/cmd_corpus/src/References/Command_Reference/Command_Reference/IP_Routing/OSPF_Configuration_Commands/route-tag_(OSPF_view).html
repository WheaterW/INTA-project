
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="route-tag (OSPF view)">
<meta name="DC.subject" content="route-tag (OSPF view)">
<meta name="keywords" content="route-tag (OSPF view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPF-LOOP-DETECT-ENABLE(OSPFCOMMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SAFE-SYNC(OSPFCOMMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_OSPFCOMMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942842561">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>route-tag (OSPF view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942842561"></a><a name="EN-US_CLIREF_0000001942842561"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">route-tag (OSPF view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942842561__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">route-tag</span></b> command sets the VPN route tag for imported VPN routes.</p>
<p>The <b><span class="cmdname">undo route-tag</span></b> command restores the default setting.</p>
</p>
<p>By default, the first two bytes of a tag value are fixed at 0xD000, and the last two bytes are the local BGP AS number. For example, if the local BGP AS number is 100, the default tag value in decimal notation is 3489661028; if the BGP AS number is greater than 65535, the tag value is 0, and you can manually change the tag value. If BGP is not configured, the default tag value is 0.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942842561__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">route-tag </span></b><i><span class="varname">tag</span></i></p>

<p><b><span class="cmdname">route-tag disable</span></b></p>

<p><b><span class="cmdname">undo route-tag</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942842561__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">tag</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the VPN route tag.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 4294967295.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>disable</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the VPN route tag is not used to detect loops.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942842561__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>OSPF view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942842561__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942842561__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>The <b><span class="cmdname">route-tag</span></b> command applies only to VPN scenarios. It is used as the tag value in Type 5 LSAs and Type 7 LSAs to prevent external loops when a CE is dual-homed to PEs. On a network where a CE is connected to two PEs, PE1 generates Type 5 LSAs and Type 7 LSAs based on imported BGP routes and sends them to the CE. The CE then sends the LSAs to PE2. Because OSPF routes have a higher priority than BGP routes, PE2 replaces BGP routes with OSPF routes, causing a routing loop. After the <b><span class="cmdname">route-tag</span></b> command is run, if the PE finds that the tag value of an LSA is the same as the local tag value, the PE ignores the LSA during route calculation to prevent routing loops.<p></p>
<span>The priorities of the tag set through the</span> <b><span class="cmdname">route-tag</span></b> command and the tag set through other commands are as follows:</p>

<ul><li>If a route-policy or route-filter is configured using the <b><span class="cmdname">import-route</span></b> command and the <b><span class="cmdname">apply tag</span></b> command is configured in the policy, the tag value configured in the policy has the highest priority.</li><li>If a route-policy or route-filter is configured in the <b><span class="cmdname">import-route</span></b> command but the <b><span class="cmdname">apply tag</span></b> command is not configured in the policy, but the tag parameter is specified in the <b><span class="cmdname">import-route</span></b> command, the tag parameter has the highest priority.</li><li>If a route-policy or route-filter is configured in the <b><span class="cmdname">import-route</span></b> command, the <b><span class="cmdname">apply tag</span></b> command is not configured in the policy, and the tag parameter is not specified in the <b><span class="cmdname">import-route</span></b> command, the priority is as follows:</li></ul>

<ol><li>If the current process is bound to a VPN instance and the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is not run, the value of route-tag is used. The values of route-tag are as follows:<p></p>
(1) If the <b><span class="cmdname">route-tag</span></b> command is configured, the configured value is used.<p></p>
(2) If the <b><span class="cmdname">route-tag</span></b> command is not configured, the default value is used.<p></p>
(3) If route-tag disable is configured, the value of route-tag is 0.</li><li>If the current process is not bound to any VPN instance or is bound to a VPN instance and the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is executed, the default value is used.<p></p>
(1) If the <b><span class="cmdname">default tag</span></b> command is configured, the configured value is used.<p></p>
(2) If the <b><span class="cmdname">default tag</span></b> command is not configured, the default value 1 is used.</li></ol>

<ul><li>If no route-policy or route-filter is configured in the <b><span class="cmdname">import-route</span></b> command but the tag parameter is specified in the <b><span class="cmdname">import-route</span></b> command, the tag parameter has the highest priority.</li><li>If no route-policy or route-filter is configured in the <b><span class="cmdname">import-route</span></b> command and the tag parameter is not specified in the <b><span class="cmdname">import-route</span></b> command, the priority is as follows:</li></ul>

<ol><li>If the current process is bound to a VPN instance and the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is not run, the value of route-tag is used. The values of route-tag are as follows:<p></p>
(1) If the <b><span class="cmdname">route-tag</span></b> command is configured, the configured value is used.<p></p>
(2) If the <b><span class="cmdname">route-tag</span></b> command is not configured, the default value is used.<p></p>
(3) If route-tag disable is configured, the value of route-tag is 0.</li><li>If the current process is not bound to any VPN instance or is bound to a VPN instance and the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is executed, the default value is used.<p></p>
(1) If the <b><span class="cmdname">default tag</span></b> command is configured, the configured value is used.<p></p>
(2) If the <b><span class="cmdname">default tag</span></b> command is not configured, the default value 1 is used.</li></ol>
<p><strong>Precautions</strong></p>
<ul><li>It is recommended that the same route tag be configured on the PEs in the same area.</li><li>Different OSPF processes can be configured with the same tag value.</li><li>The route tag is not transmitted through a BGP extended community attribute. It is configured and takes effect only on the PEs that receive BGP routes and generate Type 5 and Type 7 LSAs.</li><li>This command can be executed only in the OSPF VPN process and takes effect only when the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is not executed in the OSPF VPN process.</li><li>If the route tag is deleted or modified, route calculation may fail or a routing loop may occur.</li><li>If BGP is not configured on the routers at both ends, you are advised to run the <b><span class="cmdname">route-tag disable</span></b> command to disable tag check.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942842561__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the VPN route tag for OSPF process 100 to 100 in the VPN instance named huawei.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance huawei</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-huawei] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-huawei-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-huawei] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ospf 100 vpn-instance huawei</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospf-100] <strong>route-tag 100</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">OSPF Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/OSPF-LOOP-DETECT-ENABLE(OSPFCOMMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/SAFE-SYNC(OSPFCOMMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>