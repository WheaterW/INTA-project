
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="default-route-advertise (OSPF view)">
<meta name="DC.subject" content="default-route-advertise (OSPF view)">
<meta name="keywords" content="default-route-advertise (OSPF view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DEFAULT-COST-AREA(OSPFCOMMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPF-AREA-DESCRIPTION(OSPFCOMMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_OSPFCOMMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907763136">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>default-route-advertise (OSPF view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907763136"></a><a name="EN-US_CLIREF_0000001907763136"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">default-route-advertise (OSPF view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907763136__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">default-route-advertise</span></b> command advertises default routes to a common OSPF area.</p>
<p>The <b><span class="cmdname">undo default-route-advertise</span></b> command disables advertisement of default routes to a common OSPF area.</p>
</p>
<p>By default, default routes are not advertised to a common OSPF area.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907763136__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p><b><span class="cmdname">default-route-advertise </span></b>[ [ <strong><span>always</span></strong> | <strong><span>permit-calculate-other</span></strong> ] | <strong><span>cost</span></strong> <i><span class="varname">costvalue</span></i> | <strong><span>type</span></strong> <i><span class="varname">typevalue</span></i> | { <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> } | <strong><span>distribute-delay</span></strong> <i><span class="varname">delaytimer</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tagvalue</span></i> ] <sup>*</sup></p>

<p><b><span class="cmdname">default-route-advertise summary cost </span></b><i><span class="varname">costvalue</span></i></p>


<p><b><span class="cmdname">default-route-advertise </span></b>[ <strong><span>permit-calculate-other</span></strong> | <strong><span>cost</span></strong> <i><span class="varname">costvalue</span></i> | <strong><span>type</span></strong> <i><span class="varname">typevalue</span></i> | { <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> } | <strong><span>distribute-delay</span></strong> <i><span class="varname">delaytimer</span></i> | <strong><span>permit-ibgp</span></strong> | <strong><span>tag</span></strong> <i><span class="varname">tagvalue</span></i> | <strong><span>permit-preference-less-than</span></strong> <i><span class="varname">preference-val</span></i> ] <sup>*</sup></p>

<p><b><span class="cmdname">undo default-route-advertise</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907763136__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>always</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Generates and advertises an LSA that describes a default route, regardless of whether the local device has active default routes from processes other than the local OSPF process.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>permit-calculate-other</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures the device to calculate default Type 5 LSAs from other devices if this parameter is specified and the OSPF process has advertised Type 5 LSAs that describe a default route. If this parameter is not specified, the OSPF process does not calculate default Type 5 LSAs from other devices.</p>
<p>If an OSPF process does not advertise Type 5 LSAs that describe a default route, the OSPF process calculates the default Type 5 LSAs from other devices, regardless of whether this parameter is specified.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>cost</span></strong> <i><span class="varname">costvalue</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><p>Specifies the cost of external routes.</p>
<ul><li>Cost of a Type 1 external route = Cost of the route from the Router to the related ASBR + Cost of the route from the ASBR to the destination.</li><li>Cost of a Type 2 external route = Cost of the route from the ASBR to the destination.</li></ul>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 16777214. The default value is 1.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>type</span></strong> <i><span class="varname">typevalue</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the type of the external routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is 1 or 2.</p>
<ul><li>1: Type 1 external route</li><li>2: Type 2 external route</li></ul>
<p>The default value is 2.</p>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a route-policy. When a device's routing table contains matching default routes that are generated from processes other than the local OSPF process, a device advertises the default routes based on the route-policy configuration.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 200 case-sensitive characters without spaces. The character string can contain spaces if it is enclosed with double quotation marks (").</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>distribute-delay</span></strong> <i><span class="varname">delaytimer</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the delay timer for advertising the default route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 65535, in seconds.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>tag</span></strong> <i><span class="varname">tagvalue</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the tag of the routes imported into VPN.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 4294967295. The default value is 1.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>summary</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Advertises the Type 3 summary LSA of the specified default route. Before specifying this parameter, ensure that VPN is enabled. Otherwise, routes cannot be advertised.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>permit-ibgp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports IBGP routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>permit-preference-less-than</span></strong> <i><span class="varname">preference-val</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Allows the device to import the default route whose preference value is smaller than the configured value.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 256.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907763136__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>OSPF view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907763136__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907763136__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>The import-route (OSPF) command cannot be used to import external default routes. To import the default route generated by other protocols, you must run the <b><span class="cmdname">default-route-advertise</span></b> command on the ASBR to advertise the default route to the entire common OSPF area.<p></p>
<span>If the ASBR already has a default route</span>, running the <b><span class="cmdname">default-route-advertise</span></b> command will advertise the default route 0.0.0.0 in the entire OSPF area.<p></p>
<span>If the ASBR does not have a default route</span>, run the <b><span class="cmdname">default-route-advertise</span></b> command with always specified.</p>

<ul><li>If always is configured, the ASBR advertises the default route 0.0.0.0 in the entire OSPF area regardless of whether the ASBR has a default route, and does not calculate the default routes from other devices.</li><li>If always is not configured, the LSA that describes the default route is generated only when there are active default routes of other OSPF processes (except BGP) in the routing table of the local device.</li></ul>

<p>When there are active BGP default routes in the routing table of the local device:</p>

<ul><li>If the <b><span class="cmdname">ospf process-id vpn-instance vpn-instance-name</span></b> command is not run, the active default EBGP route in the routing table can be imported to OSPF after the <b><span class="cmdname">default-route-advertise</span></b> command is run. In this case, the OSPF process cannot import IBGP routes. To import active default IBGP routes in the routing table to OSPF, run the <b><span class="cmdname">default-route-advertise permit-ibgp</span></b> command.</li><li>If the <b><span class="cmdname">ospf process-id vpn-instance vpn-instance-name</span></b> command is configured:</li><li>In addition, the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is run. After the <b><span class="cmdname">default-route-advertise</span></b> command is run, the active default EBGP route in the routing table can be imported to OSPF. In this case, the OSPF process cannot import IBGP default routes. To import active default IBGP routes in the routing table to OSPF, run the <b><span class="cmdname">default-route-advertise permit-ibgp</span></b> command.</li><li>If the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is not run and the <b><span class="cmdname">default-route-advertise</span></b> command is run, active BGP (including EBGP and IBGP) default routes in the routing table can be imported to OSPF.</li></ul>

<p>Importing IBGP routes may cause routing loops. Therefore, exercise caution when performing this operation.<p></p>
<span>In a primary</span>/backup path scenario, packets may get lost after traffic switches back to the primary path from the backup path. The severity of packet loss is proportional to the number of routes stored on the intermediate device. To solve this problem, run the <b><span class="cmdname">default-route-advertise distribute-delay delaytimer</span></b> command on the device on the primary path to delay sending the OSPF default route. This ensures that traffic is switched back after the device on the primary path completes updating forwarding entries.</p>
<p><strong>Configuration Impact</strong></p>
<p>After the <b><span class="cmdname">default-route-advertise</span></b> command is configured on the ASBR, the ASBR will generate a Type 5 ASE LSA with link state ID 0.0.0.0 and mask 0.0.0.0. In addition, it will advertise the ASE LSA in an entire OSPF area.<p></p>
<span>If a route-policy is configured</span>, default routes are advertised based on the following principles:</p>

<ul><li>If a default route matches the route-policy, a new default route is generated on an OSPF device based on the parameters configured in the route-policy. Parameters such as cost, tag, and type can be configured in the route-policy.</li><li>If the default route does not match the route-policy, and always is configured, the default route is still advertised.</li><li>If always is not configured, the OSPF device will not advertise the default route.</li><li>If always is configured, OSPF devices will advertise the default route. In addition, only always configured in the <b><span class="cmdname">default-route-advertise</span></b> command takes effect on advertisement of default routes.</li></ul>
<p><strong>Precautions</strong></p>
<ul><li>The OSPF default route advertisement mode depends on the type of the area where the default route is imported. This command is used only to advertise the default route to a common OSPF area. For stub areas, totally stub areas, and totally NSSAs, default routes are automatically advertised. In an NSSA, to advertise default routes, run the <b><span class="cmdname">nssa default-route-advertise</span></b> command.</li><li>If the <b><span class="cmdname">default-route-advertise</span></b> command is run in an OSPF process and always is not specified, the default LSA is advertised based on the active default route of a non-local OSPF process in the IP routing table. The priority of the depended default route must be higher than that of the OSPF route; otherwise, OSPF may fail to advertise the default LSA or a loop may occur. To prevent loops, you are advised to specify permit-preference-less-than to prevent low-priority active default routes from being imported. This parameter is used only when always is not specified.</li><li>After always is configured, the device advertises default routes unconditionally. Therefore, if some route sources are unreachable due to faults, route blackholes may occur. You are advised to select always based on the networking plan.</li><li>If permit-calculate-other is not specified and OSPF advertises default routes first, the device does not calculate default routes from other devices. Conversely, if OSPF learns the default route first and the default route is active, OSPF does not advertise the default route. When a device restarts or route flapping occurs, the sequence in which OSPF learns and advertises default routes may change. As a result, service traffic changes. Therefore, you are advised to configure permit-calculate-other to prevent this problem.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907763136__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Advertise the ASE LSA of the default route to the OSPF area, with no default route on the local device.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospf 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospf-1] <strong>default-route-advertise always</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">OSPF Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/DEFAULT-COST-AREA(OSPFCOMMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/OSPF-AREA-DESCRIPTION(OSPFCOMMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>