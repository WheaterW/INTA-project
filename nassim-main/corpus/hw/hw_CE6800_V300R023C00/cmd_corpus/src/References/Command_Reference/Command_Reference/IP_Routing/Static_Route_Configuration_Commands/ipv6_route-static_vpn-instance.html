
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ipv6 route-static vpn-instance">
<meta name="DC.subject" content="ipv6 route-static vpn-instance">
<meta name="keywords" content="ipv6 route-static vpn-instance">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Static_Route_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IPV6BFDADMDWN(STATICRTOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DELPUBROUTEALL(STATICRTOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv4 Static Route">
<meta name="featurename" content="IPv6 Static Route">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="IPv4 Static Route">
<meta name="featurename" content="IPv6 Static Route">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="IPv4 Static Route">
<meta name="featurename" content="IPv6 Static Route">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_STATICRTOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907603176">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ipv6 route-static vpn-instance</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907603176"></a><a name="EN-US_CLIREF_0000001907603176"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">ipv6 route-static vpn-instance</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907603176__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ipv6 route-static vpn-instance</span></b> command configures IPv6 static routes for an IPv6 address family-enabled VPN instance.</p>
<p>The <b><span class="cmdname">undo ipv6 route-static vpn-instance</span></b> command deletes the IPv6 static routes configured for an IPv6 address family-enabled VPN instance.</p>
</p>
<p>By default, no IPv6 static routes are configured for an IPv6 address family-enabled VPN instance.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907603176__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">




















<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN: </p>

<p><b><span class="cmdname">ipv6 route-static vpn-instance </span></b><i><span class="varname">vpn-source-name</span></i> <i><span class="varname">dest-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-destination-name</span></i> <i><span class="varname">nexthop-ipv6-address</span></i> | <i><span class="varname">nexthop-ipv6-address</span></i> [ <strong><span>public</span></strong> ] } [ <strong><span>recursive-lookup</span></strong> <strong><span>host-route</span></strong> ] [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <sup>*</sup> [ <strong><span>bfd</span></strong> <strong><span>enable</span></strong> | <strong><span>track</span></strong> { <strong><span>bfd-session</span></strong> <i><span class="varname">cfg-name</span></i> | <strong><span>nqa</span></strong> <i><span class="varname">admin-name</span></i> <i><span class="varname">test-name</span></i> } ] [ <strong><span>inter-protocol-ecmp</span></strong> ] [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</p>

<p><b><span class="cmdname">ipv6 route-static vpn-instance </span></b><i><span class="varname">vpn-source-name</span></i> <i><span class="varname">dest-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-destination-name</span></i> | <strong><span>public</span></strong> } [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <sup>*</sup> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</p>

<p><b><span class="cmdname">undo ipv6 route-static vpn-instance </span></b><i><span class="varname">vpn-source-name</span></i> <i><span class="varname">dest-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> [ { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } [ <i><span class="varname">nexthop-ipv6-address</span></i> ] | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-destination-name</span></i> <i><span class="varname">nexthop-ipv6-address</span></i> | <i><span class="varname">nexthop-ipv6-address</span></i> [ <strong><span>public</span></strong> ] ]</p>

<p><b><span class="cmdname">undo ipv6 route-static vpn-instance </span></b><i><span class="varname">vpn-source-name</span></i> <i><span class="varname">dest-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-destination-name</span></i> | <strong><span>public</span></strong> }</p>





<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN: </p>

<p><b><span class="cmdname">ipv6 route-static vpn-instance </span></b><i><span class="varname">vpn-source-name</span></i> <i><span class="varname">dest-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } [ <i><span class="varname">nexthop-ipv6-address</span></i> ] [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <sup>*</sup> [ <strong><span>bfd</span></strong> <strong><span>enable</span></strong> | <strong><span>track</span></strong> { <strong><span>bfd-session</span></strong> <i><span class="varname">cfg-name</span></i> | <strong><span>nqa</span></strong> <i><span class="varname">admin-name</span></i> <i><span class="varname">test-name</span></i> } ] [ <strong><span>inter-protocol-ecmp</span></strong> ] [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</p>

<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN, CE6885-LL (low latency mode): </p>

<p><b><span class="cmdname">ipv6 route-static vpn-instance </span></b><i><span class="varname">vpn-source-name</span></i> <i><span class="varname">dest-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-destination-name</span></i> <i><span class="varname">nexthop-ipv6-address</span></i> | <i><span class="varname">nexthop-ipv6-address</span></i> [ <strong><span>public</span></strong> ] } [ <strong><span>recursive-lookup</span></strong> <strong><span>host-route</span></strong> ] [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <sup>*</sup> [ <strong><span>bfd</span></strong> <strong><span>enable</span></strong> | <strong><span>track</span></strong> { <strong><span>bfd-session</span></strong> <i><span class="varname">cfg-name</span></i> | <strong><span>nqa</span></strong> <i><span class="varname">admin-name</span></i> <i><span class="varname">test-name</span></i> } ] <strong><span>inherit-cost</span></strong> [ <strong><span>inter-protocol-ecmp</span></strong> ] [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907603176__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">vpn-source-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a source VPN instance. Each VPN instance has its own routing table. The configured static routes are added to the routing table of the specified VPN instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters. It cannot contain spaces. In addition, the VPN instance name must not be _public_. The character string can contain spaces if it is enclosed in double quotation marks ("").</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">dest-ipv6-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a destination IPv6 address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a 32-digit hexadecimal number, in the format of X:X:X:X:X:X:X:X</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">prefix-length</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the length of an IPv6 prefix.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>It is an integer ranging from 0 to 128.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-destination-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the destination VPN instance. A static route searches the destination VPN instance for an outbound interface based on the configured nexthop-ipv6-address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p><p>The value is a string of 1 to 31 case-sensitive characters without spaces. The VPN instance name cannot be _public_. The character string can contain spaces if it is enclosed with double quotation marks (").</p>
<p>If nexthop-ipv6-address is not specified, the next-table function is configured. After receiving a packet, the device searches the forwarding table of the source VPN instance for the destination VPN instance, and then searches the forwarding table of the destination VPN instance for the forwarding path.</p>
</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">nexthop-ipv6-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the next hop IPv6 address of the device.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a 32-digit hexadecimal number, in the format of X:X:X:X:X:X:X:X</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>public</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the public network address of a gateway. After a certain Device is configured in an IPv6 address family-enabled VPN instance, the next hop or the next hop gateway of the Device belongs to this IPv6 address family-enabled VPN instance and the public network. If the keyword public is specified in the command, the next hop is specified as a public network device.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>recursive-lookup</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Recursive route lookup policy.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>host-route</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Recurses the static route to a 128-bit host route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>preference</span></strong> <i><span class="varname">preference</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the priority of a route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 1 to 255. The default value is 60. A smaller value indicates a higher preference.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>tag</span></strong> <i><span class="varname">tag</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the tag value of a static route. You can configure different tag values to classify static routes and implement different routing management policies.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4294967295. The default value is 0.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>bfd</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Associates a dynamic BFD session with the static route to fast detect faults.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>enable</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Associates a dynamic BFD session with the static route to fast detect faults.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>track</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specify a track object.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>bfd-session</span></strong> <i><span class="varname">cfg-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Associates a static BFD session with the static route to fast detect faults.</p>
<p>The undo ip route-static [ track bfd-session ] all command with track bfd-session cfg-name specified dissociates the static route from the current BFD session only without deleting the static route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 64 case-sensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>nqa</span></strong> <i><span class="varname">admin-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Associates the static route with an NQA test instance to fast detect faults so that the system determines whether to activate the static route based on the NQA link detection result to control route advertisement and guide remote traffic.</p>
<p>Currently, only ICMP NQA test instances and TCP NQA test instances can be bound to static routes to implement fast fault detection.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">test-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Associates the static route with an NQA test instance to fast detect faults so that the system determines whether to activate the static route based on the NQA link detection result to control route advertisement and guide remote traffic.</p>
<p>Currently, only ICMP NQA test instances and TCP NQA test instances can be bound to static routes to implement fast fault detection.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters.</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>inter-protocol-ecmp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><p>If a static route is the optimal or suboptimal route and the optimal and suboptimal routes share the same priority, the static route and the routes of dynamic routing protocols can participate in inter-protocol load balancing.</p>
<p>If inter-protocol load balancing among static routes and the routes of dynamic routing protocols is enabled for any static route in the routing table, the other static routes in the routing table that have the same prefix as that of this static route can also participate in inter-protocol load balancing with the routes of dynamic routing protocols.</p>
<p>Intra-protocol and inter-process load balancing and inter-protocol load balancing are mutually exclusive. If you configure them both, the former takes effect.</p>
<p>Inter-protocol load balancing does not take effect in the following cases:</p>
<ul><li>Among routes imported using the import-rib command and other routes.</li><li>Among black-hole routes and non-black-hole routes.</li><li>Among Vlink routes and non-Vlink routes.</li></ul>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>description</span></strong> <i><span class="varname">text</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a description of a static route.</p>
<p>You can run the display this (system view) and display current-configuration commands to view the description.</p>
<p>Other command parameters, such as bfd and preference, cannot be configured after the description keyword. The content is only used as the description. For example, if ipv6 route-static 2001:db8:1::1 128 NULL0 description aa preference 10 is configured, aa preference 10 is used as the description.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 150 characters, spaces supported.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-type</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the type of an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 63 case-sensitive characters, spaces not supported.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>inherit-cost</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables a static route to inherit the cost of recursive routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907603176__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907603176__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907603176__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>To configure static routes for a simple IPv6 VPN, run the <b><span class="cmdname">ipv6 route-static vpn-instance</span></b> command.<p></p>
<span>If the destination address and mask of a static route</span> are all 0s, the static route is a default route.</p>
<p><strong>Prerequisites</strong></p>
<p>A VPN instance has been configured using the <b><span class="cmdname">ip vpn-instance</span></b> command.<p></p>
<span>BFD has been enabled so that static routes can be</span> associated with the BFD session.<p></p>
<span>An NQA test instance has been created so that static</span> routes can be associated with the NQA test instance.</p>
<p><strong>Configuration Impact</strong></p>
<p>A static route can be bound to only one BFD session. To bind a static route to another session, you need to unbind the static route from the current BFD session first.</p>
<p><strong>Follow-up Procedure</strong></p>
<p>After a static route is configured, import it to the routing protocol running between PEs if you want the route to be sent to the peer PE.</p>
<p><strong>Precautions</strong></p>
<p><p>If a network fault occurs or the network topology changes, static routes do not change automatically. Therefore, exercise caution when configuring static routes.<p></p>
<span>When you configure a static route for a VPN instance</span>, the next hop address can belong to either the VPN instance or the public network. If the next hop of a static route is a public network address, you need to specify public after nexthop-address.<p></p>
<span>If the outbound interface is a broadcast interface</span>, you must specify the next hop address.<p></p>
<span>If a static route with a specified next-hop IP address</span> or outbound interface and a static route with only a VPN instance specified as the next hop (no outbound interface or next-hop address, that is, the Next-Table function is configured) are configured for the same destination address, and the two static routes have the same priority, the last configured static route takes effect, and the previous static route is overwritten.<p></p>
<span>For static routes with the same prefix but different</span> priorities, you can configure both a static route with a specified next-hop IP address and a static route with only a VPN instance specified as the next-hop IP address, and a static route with a specified outbound interface and a static route with only a VPN instance specified as the next-hop IP address. Multiple static routes with only VPN instances specified as next hops can be configured at the same time.<p></p>
<span>After the static route configuration is saved and</span> the device is restarted in CFG mode, the configuration file sequence may be different from that before the restart.<p></p>
<span>When a static route is associated with a BFD session</span>, if the negotiation status of the BFD session is Up or Admin down, the static route is active. If the negotiation status of the BFD session is Detect Down or the negotiation times out, the static route is inactive. After the device is restarted, the BFD status may change. Whether the static route is active is subject to the latest BFD status.<p></p>
<span>If vpn-instance is incorrectly configured</span>, traffic diversion may be abnormal.<p></p>
<span>For example</span>, to recurse the static route 2001:db8:1::1 in vpn1 to the route 2001:db8:2::2 in vpn1, run the ipv6 route-static vpn-instance vpn1 2001:db8:1::1 128 2001:db8:2::2 command. However, if the ipv6 route-static 2001:db8:1::1 128 vpn-instance vpn1 2001:db8:2::2 command is run, the public network static route is recursed to the route 2001:db8:2::2 of vpn1, which is not as expected.<p></p>
<span>If the default static route is incorrectly configured</span> or deleted, unexpected changes may occur in route selection.<p></p>
<span>The network segment of the static route must be properly</span> planned. If the mask of the static route is incorrectly configured, traffic will be abnormal.<p></p>
<span>After the</span> <b><span class="cmdname">undo bfd</span></b> command is run, the BFD parameters bound to the static route are deleted. As a result, the static route status may change and services may be interrupted.<p></p>
<span>After the</span> <b><span class="cmdname">undo nqa all-test-instance</span></b> command is run, the <b><span class="cmdname">NQA</span></b> command parameters bound to the static route are deleted. As a result, the static route status may change and services may be interrupted.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907603176__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure an IPv6 static route for the VPN instance named vpn1 and enable inter-protocol load balancing among static routes and the routes of dynamic routing protocols.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpn1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpn1] <strong>ipv6-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpn1-af-ipv6] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpn2</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpn2] <strong>ipv6-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpn2-af-ipv6] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ipv6 route-static vpn-instance vpn1 :: 0 vpn-instance vpn2 2001:db8:1::2 inter-protocol-ecmp</strong>
</pre>
</div>

<div class="p"># Configure a default route with next hop 2001:db8:1::1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpn1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpn1] <strong>ipv6-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpn1-af-ipv6] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ipv6 route-static vpn-instance vpn1 :: 0 2001:db8:1::1</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Static_Route_Configuration_Commands_title.html">Static Route Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/IPV6BFDADMDWN(STATICRTOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/DELPUBROUTEALL(STATICRTOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>