
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer advertise add-path path-number(BGP-IPv6 unicast address family view)">
<meta name="DC.subject" content="peer advertise add-path path-number(BGP-IPv6 unicast address family view)">
<meta name="keywords" content="peer advertise add-path path-number(BGP-IPv6 unicast address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PEER-IPV4-ADV-ADDPATH-POLICY-IPV4UNI(BGPUCASTOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PEER-IPV6-ADV-ADDPATH-POLICY-IPV6UNI(BGPUCASTOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPUCASTOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942843197">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer advertise add-path path-number(BGP-IPv6 unicast address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942843197"></a><a name="EN-US_CLIREF_0000001942843197"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer advertise add-path path-number(BGP-IPv6 unicast address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942843197__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer advertise add-path path-number</span></b> command sets the number of preferred routes to be advertised to a specified peer.</p>
<p>The <b><span class="cmdname">undo peer advertise add-path</span></b> command restores the default configurations.</p>
</p>
<p>By default, the device sends only the optimal route to peers.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942843197__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p><b><span class="cmdname">peer </span></b><i><span class="varname">peerIpv4Addr</span></i> <strong><span>advertise</span></strong> <strong><span>add-path</span></strong> <strong><span>path-number</span></strong> <i><span class="varname">number</span></i> [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]</p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">peerIpv4Addr</span></i> <strong><span>advertise</span></strong> <strong><span>add-path</span></strong></p>


<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">peerIpv4Addr</span></i> <strong><span>advertise</span></strong> <strong><span>add-path</span></strong> <strong><span>path-number</span></strong> <i><span class="varname">number</span></i> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942843197__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">peerIpv4Addr</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an IPv4 peer address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>path-number</span></strong> <i><span class="varname">number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of preferred routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 2 to 64.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a route-policy.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 200 case-sensitive characters without spaces.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942843197__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-IPv6 unicast address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942843197__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942843197__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>After BGP Add-Path is configured on an RR, the RR needs to send BGP Add-Path routes to a specified BGP peer. To configure the maximum number of routes that the RR can send to a specified BGP peer, run the <b><span class="cmdname">peer advertise add-path path-number</span></b> command. The actual number of preferred routes advertised to the peer is the smaller value between the number of routes configured using the <b><span class="cmdname">peer advertise add-path path-number</span></b> command and the number of selected routes. If the number of routes that the RR can send to the peer is less than the actual number of routes selected by the RR, the RR selects routes based on the BGP route selection rules.</p>
<p><strong>Prerequisites</strong></p>
<p>The <b><span class="cmdname">peer advertise add-path path-number</span></b> command takes effect only if the following conditions are met:</p>

<ul><li>BGP Add-Path has been enabled and the number of routes that the device can select has been configured using the <b><span class="cmdname">bestroute add-path</span></b> command.</li><li>The device has been enabled to send Add-Path routes to a specified peer using the <b><span class="cmdname">peer capability-advertise add-path send</span></b> command.</li></ul>
<p><strong>Precautions</strong></p>
<p>To allow a device to accept Add-Path routes received from a specified peer, run the <b><span class="cmdname">peer capability-advertise add-path receive</span></b> command.<p></p>
<span>A device can advertise Add-Path routes to IBGP</span>/EBGP peers, and Add-Path routes are advertised based on existing route advertisement rules.<p></p>
<span>This command supports only if-match</span>, but not the apply action.<p></p>
<span>Deploying BGP Add-Path may cause traffic loops</span>. Therefore, exercise caution when configuring BGP Add-Path.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942843197__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the device to advertise three preferred routes to a peer.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>route-policy test-policy permit node 10</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-route-policy] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer 172.16.1.1 as-number 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv6-family unicast</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv6] <strong>peer 172.16.1.1 enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv6] <strong>bestroute add-path path-number 6</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv6] <strong>peer 172.16.1.1 capability-advertise add-path send</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv6] <strong>peer 172.16.1.1 advertise add-path path-number 3 route-policy test-policy</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PEER-IPV4-ADV-ADDPATH-POLICY-IPV4UNI(BGPUCASTOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PEER-IPV6-ADV-ADDPATH-POLICY-IPV6UNI(BGPUCASTOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>