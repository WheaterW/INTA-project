
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="netstream sampler (system view)">
<meta name="DC.subject" content="netstream sampler (system view)">
<meta name="keywords" content="netstream sampler (system view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-NetStream_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/NETSTREAM_SAMPLER_(INTERFACE-VIEW).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/NETSTREAM_TIMEOUT_ACTIVE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Creator" content="SUBSYS_ID_NSM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942848261">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>netstream sampler (system view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942848261"></a><a name="EN-US_CLIREF_0000001942848261"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">netstream sampler (system view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942848261__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">netstream sampler</span></b> command configures packet sampling on interfaces.</p>
<p>The <b><span class="cmdname">undo netstream sampler</span></b> command restores the default setting.</p>
</p>
<p>By default, packet sampling is not configured on interfaces.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942848261__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">netstream sampler random-packets </span></b><i><span class="varname">packet-number</span></i> { <strong><span>inbound</span></strong> | <strong><span>outbound</span></strong> }</p>


<p><b><span class="cmdname">undo netstream sampler </span></b>[ <strong><span>random-packets</span></strong> <i><span class="varname">packet-number</span></i> ] { <strong><span>inbound</span></strong> | <strong><span>outbound</span></strong> }</p>


</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942848261__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>inbound</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Samples incoming traffic on an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>outbound</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Samples outgoing traffic on an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>



<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>random-packets</span></strong> <i><span class="varname">packet-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of packets between two sampled packets in packet-based random sampling mode. In this mode, one packet is randomly sampled out of packet-number packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer in the range from 1 to 32768 and must be 2^n (n = 0, 1, 2...).</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942848261__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942848261__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>3: Management level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942848261__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>After the NetStream function is enabled on an interface, the system stores the NetStream information in the corresponded interface information table. If every packet passing an interface is captured and counted, forwarding performance on the interface will deteriorate, especially on the interface with a high forwarding rate. To understand interface traffic attributes without compromising forwarding performance, configure packet sampling on the interface. A low sampling rate can significantly reduce impact of NetStream on device performance.</p>
<p><strong>Precautions</strong></p>
<p><p>The packet sampling function configured in the system view takes effect on all interfaces on the device. If the function is configured in both the interface view and system view, the configuration in the interface view has priority.<p></p>
<span>After NetStream is configured in inbound or outbound</span> direction and a sampling interval is configured, flow sampling will be performed based on the configuration.<p></p>
<span>If you run the</span> <b><span class="cmdname">netstream sampler</span></b> command multiple times in the same view, only the latest configuration takes effect.<p></p>
<span>For the CE6866</span>, CE6860-SAN, CE6866K, CE6860-HAM, CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, and CE8850-HAM, if the sampling rate is less than or equal to 64, packets are sampled at a fixed interval. If the sampling rate is greater than 64, packets are sampled at a random interval.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942848261__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure packet-based random sampling on an interface in the inbound direction and set the sampling rate to 8192.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>netstream sampler random-packets 8192 inbound</strong>
</pre>
</div>

<div class="p"># Configure packet-based random sampling on an interface in the outbound direction and set the sampling rate to 8192.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>netstream sampler random-packets 8192 outbound</strong>
</pre>
</div>



</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-NetStream_Configuration_Commands_title.html">NetStream Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/NETSTREAM_SAMPLER_(INTERFACE-VIEW).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/NETSTREAM_TIMEOUT_ACTIVE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>