
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="scp">
<meta name="DC.subject" content="scp">
<meta name="keywords" content="scp">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_SSH_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/RSA-PEER-PUBLIC-KEY(RSA).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SCP-CLIENT-SOURCE-A(SSHC).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="SSH">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="SSH">
<meta name="featuretype" content="Security">
<meta name="featurename" content="SSH">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="DC.Creator" content="SUBSYS_ID_SSHC">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000002158963932">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>scp</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000002158963932"></a><a name="EN-US_CLIREF_0000002158963932"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">scp</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000002158963932__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">scp</span></b> command upload files to or download files from the SCP server.</p>
</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000002158963932__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">scp </span></b>[ <strong><span>-a</span></strong> <i><span class="varname">source-ip-address</span></i> ] [ <strong><span>-force-receive-pubkey</span></strong> ] [ [ <strong><span>-port</span></strong> <i><span class="varname">server-port</span></i> ] | [ <strong><span>public-net</span></strong> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] | [ <strong><span>identity-key</span></strong> <i><span class="varname">identity-key-type</span></i> ] | [ <strong><span>user-identity-key</span></strong> <i><span class="varname">user-key</span></i> ] | <strong><span>-r</span></strong> | <strong><span>-c</span></strong> | [ <strong><span>-cipher</span></strong> <i><span class="varname">cipher</span></i> ] | [ <strong><span>-prefer-kex</span></strong> { <i><span class="varname">prefer-kex</span></i> } ] ] <sup>*</sup> <i><span class="varname">source-filename</span></i> <i><span class="varname">destination-filename</span></i></p>

<p><b><span class="cmdname">scp ipv6 </span></b>[ [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] | <strong><span>public-net</span></strong> ] [ <strong><span>-force-receive-pubkey</span></strong> ] [ [ <strong><span>-port</span></strong> <i><span class="varname">server-port</span></i> ] | [ <strong><span>identity-key</span></strong> <i><span class="varname">identity-key-type</span></i> ] | [ <strong><span>user-identity-key</span></strong> <i><span class="varname">user-key</span></i> ] | [ [ <strong><span>-a</span></strong> <i><span class="varname">source-ipv6-address</span></i> ] | [ <strong><span>-oi</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } ] ] | <strong><span>-r</span></strong> | <strong><span>-c</span></strong> | [ <strong><span>-cipher</span></strong> <i><span class="varname">cipher</span></i> ] | [ <strong><span>-prefer-kex</span></strong> { <i><span class="varname">prefer-kex</span></i> } ] ] <sup>*</sup> <i><span class="varname">source-filename</span></i> <i><span class="varname">destination-filename</span></i></p>

<p><b><span class="cmdname">scp -i </span></b>{ <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } [ <strong><span>-force-receive-pubkey</span></strong> ] [ [ <strong><span>-port</span></strong> <i><span class="varname">server-port</span></i> ] | [ <strong><span>identity-key</span></strong> <i><span class="varname">identity-key-type</span></i> ] | [ <strong><span>user-identity-key</span></strong> <i><span class="varname">user-key</span></i> ] | <strong><span>-r</span></strong> | <strong><span>-c</span></strong> | [ <strong><span>-cipher</span></strong> <i><span class="varname">cipher</span></i> ] | [ <strong><span>-prefer-kex</span></strong> { <i><span class="varname">prefer-kex</span></i> } ] ] <sup>*</sup> <i><span class="varname">source-filename</span></i> <i><span class="varname">destination-filename</span></i></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000002158963932__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-a</span></strong> <i><span class="varname">source-ip-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the source IPv4 address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-a</span></strong> <i><span class="varname">source-ipv6-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the source IPv6 address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a 32-digit hexadecimal number, in the format of X:X:X:X:X:X:X:X.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-force-receive-pubkey</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that a server forcibly receives public key authentication.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-port</span></strong> <i><span class="varname">server-port</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the port number of the remote SCP server.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 65535. The default value is 22.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>public-net</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the public network where the server resides.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the VPN instance name on the remote SCP server.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters, spaces not supported. The VPN instance name cannot be _public_. If the character string is quoted by double quotation marks, the character string can contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>identity-key</span></strong> <i><span class="varname">identity-key-type</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a public key algorithm for server authentication.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p><p>Currently, RSA_SHA2_512, RSA_SHA2_256, RSA, DSA, and ECC are supported. The default public key algorithms are RSA_SHA2_512 and RSA_SHA2_256.</p>
<p>To ensure high security, do not use the RSA algorithm whose length is less than 3072 bits. Use the more secure RSA SHA2-512 or RSA SHA2-256 authentication algorithm.</p>
</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>user-identity-key</span></strong> <i><span class="varname">user-key</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a public key algorithm for user authentication.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p><p>Currently, RSA_SHA2_512, RSA_SHA2_256, RSA, DSA, and ECC are supported. The default public key algorithms are RSA_SHA2_512 and RSA_SHA2_256.</p>
<p>To ensure high security, do not use the RSA algorithm whose length is less than 3072 bits. Use the more secure RSA SHA2-512 or RSA SHA2-256 authentication algorithm.</p>
</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-r</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Uploads or downloads files in batches.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-c</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables compression.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-cipher</span></strong> <i><span class="varname">cipher</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an encryption algorithm for file upload or download.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>Encryption algorithms supported depend on the ssh client cipher command settings.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-prefer-kex</span></strong> <i><span class="varname">prefer-kex</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the preferred key exchange algorithm.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The preferred key exchange algorithms supported depend on the algorithm type configured using the ssh client key-exchange command.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">source-filename</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of the source file to be uploaded or downloaded.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 256 case-sensitive characters without spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">destination-filename</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of the destination file to uploaded or downloaded.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 256 case-sensitive characters without spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv6</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv6 SCP.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-oi</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the source interface for the IPv6 client, including the name, type and number of the interface. The IPv6 address configured in this interface view is the source IPv6 address of the packet. If no IPv6 address is configured for the source interface, the connection cannot be set up.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-type</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the type the outbound interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of the outbound interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>-i</span></strong> <i><span class="varname">interface-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of the outbound interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000002158963932__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000002158963932__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>3: Management level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000002158963932__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>SCP is a secure file transfer method based on SSH2.0. Different from SFTP, SCP supports batch file upload or download.</p>

<ul><li>If a VPN instance name is specified, the SCP client logs in to the SCP server in the specified VPN instance.</li><li>To enhance security, use -a to configure a loopback address as the source IP address or use -i to configure a loopback interface as the outbound interface.</li><li>If -r is specified, you can use the wildcard (*) to upload or download files in batches, for example, <em>.txt or huawei.</em>.</li><li>If -c is specified, files are compressed before being transferred. File compression may take a long time and affect the file transfer rate. Therefore, compression is not recommended.<p></p>
<span>Files on the SCP server are in the format of username</span>@hostname:[ path ] [ filename ].</li><li>username is the user name for logging in to the SCP server.</li><li>hostname is the name or IP address of the SCP server.</li><li>path is the working directory on the SCP server.</li><li>filename is the name of a file.<p></p>
<span>If filename and path are not specified</span>, the system uploads files to the root directory of the working directory on the SCP server. If filename is specified, the system uploads files to the SCP server If hostname is an IPv6 address, the IPv6 address must be included in square brackets ([ ]), for example, john@[2001:db8:1::1]:.</li><li>If the destination host address is an IPv6 link-local address, the local outbound interface must be specified.</li><li>If the destination file has the same name as an existing directory, the source file is copied to the specified directory and the name of the newly generated file is the same as the source file name. If the destination file has the same name as an existing file, the system prompts you to replace the existing file and names each file with filename. If path is specified but filename is not specified, the system uploads files to the specified path on the SCP server.</li></ul>
<p><strong>Prerequisites</strong></p>
<p>A VPN instance has been configured.<p></p>
<span>The SCP service function has been enabled using the</span> <b><span class="cmdname">scp server enable</span></b> command.</p>
<p><strong>Precautions</strong></p>
<ul><li>If a source IP address or a source interface is not specified, the system uses the source IP address or source interface specified in the <b><span class="cmdname">scp client-source</span></b> command.</li><li>If a source IP address or source interface has been specified, the system does not use the source IP address or source interface specified in the <b><span class="cmdname">scp client-source</span></b> command.</li><li>If a source IP address has been specified and VPN instance name is not specified, then the system uses Global VPN If it is configured else uses public vpn.</li><li>in the source-filename and destination-filename fields, specifying the full file directory names as command keywords is recommended. If you specify the file names as command keywords, the command fails to be run because the command keywords are the same as the file names.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000002158963932__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Use aes256_ctr to encrypt the file license.txt, and use port 1026 to upload the file to the working directory on the remote SCP server. The SCP client and SCP server belong to the same VPN instance vpn1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpn1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpn1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>scp -a 10.1.1.1 -port 1026 vpn-instance vpn1 -cipher aes256_ctr license.txt john@10.10.10.1:</strong>
Trying 10.10.10.1 ...
Press CTRL+K to abort
Connected to 10.10.10.1 ...
Enter password:
license.txt                       100%     38529827Bytes          165Kb/s
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_SSH_Configuration_Commands_title.html">SSH Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/RSA-PEER-PUBLIC-KEY(RSA).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/SCP-CLIENT-SOURCE-A(SSHC).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>