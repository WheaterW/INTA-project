
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ntp unicast-peer">
<meta name="DC.subject" content="ntp unicast-peer">
<meta name="keywords" content="ntp unicast-peer">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_NTP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SYNC-INTERVAL(NTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/RESET-NTP-STAT-PKT-ALL(NTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Creator" content="SUBSYS_ID_NTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000002158962816">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ntp unicast-peer</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000002158962816"></a><a name="EN-US_CLIREF_0000002158962816"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1"><span>ntp unicast-peer</span></h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000002158962816__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ntp unicast-peer</span></b> command configures the NTP peer mode.</p>
<p>The <b><span class="cmdname">undo ntp unicast-peer</span></b> command cancels the NTP peer mode.</p>
</p>
<p>By default, no NTP peer or NTP server is configured.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000002158962816__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">



<p><b><span class="cmdname">ntp unicast-peer </span></b>{ <i><span class="varname">ipv4Addr</span></i> [ <strong><span>version</span></strong> <i><span class="varname">number</span></i> | <strong><span>port</span></strong> <i><span class="varname">port-number</span></i> | <strong><span>authentication-keyid</span></strong> <i><span class="varname">key-id</span></i> | <strong><span>source-interface</span></strong> { <i><span class="varname">ifName</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>preferred</span></strong> | <strong><span>maxpoll</span></strong> <i><span class="varname">max-number</span></i> | <strong><span>minpoll</span></strong> <i><span class="varname">min-number</span></i> | <strong><span>preempt</span></strong> ] <sup>*</sup> | <strong><span>ipv6</span></strong> <i><span class="varname">ipv6Addr</span></i> [ <strong><span>authentication-keyid</span></strong> <i><span class="varname">key-id</span></i> | <strong><span>port</span></strong> <i><span class="varname">port-number</span></i> | <strong><span>source-interface</span></strong> { <i><span class="varname">ifName</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>preferred</span></strong> | <strong><span>maxpoll</span></strong> <i><span class="varname">max-number</span></i> | <strong><span>minpoll</span></strong> <i><span class="varname">min-number</span></i> | <strong><span>preempt</span></strong> ] <sup>*</sup> | <strong><span>domain</span></strong> <i><span class="varname">domain-name</span></i> [ <strong><span>version</span></strong> <i><span class="varname">number</span></i> | <strong><span>port</span></strong> <i><span class="varname">port-number</span></i> | <strong><span>authentication-keyid</span></strong> <i><span class="varname">key-id</span></i> | <strong><span>source-interface</span></strong> { <i><span class="varname">ifName</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>preferred</span></strong> | <strong><span>maxpoll</span></strong> <i><span class="varname">max-number</span></i> | <strong><span>minpoll</span></strong> <i><span class="varname">min-number</span></i> | <strong><span>preempt</span></strong> ] <sup>*</sup> }</p>








<p><b><span class="cmdname">undo ntp unicast-peer </span></b>{ <i><span class="varname">ipv4Addr</span></i> | <strong><span>ipv6</span></strong> <i><span class="varname">ipv6Addr</span></i> | <strong><span>domain</span></strong> <i><span class="varname">domain-name</span></i> } [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</p>






</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000002158962816__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ipv4Addr</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv4 address of a remote server.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an IPv4 address in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>version</span></strong> <i><span class="varname">number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the NTP version number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4. The default value is 3.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>port</span></strong> <i><span class="varname">port-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the destination port of NTP unicast packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is 123 or an integer ranging from 1025 to 65535. The default value is 123.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>authentication-keyid</span></strong> <i><span class="varname">key-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the authentication key ID used when transmitting messages to the remote peer.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is an integer ranging from</p>
<ul><li>1â4294967295 (versions 1 to 3)</li><li>1â65535 (version 4)</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>source-interface</span></strong> <i><span class="varname">ifName</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the source interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 47 case-sensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-type</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the type of an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an interface number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 47 case-sensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the VPN instance name.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters. It cannot contain spaces. The VPN instance name cannot be _public_. If the character string is quoted by double quotation marks, the character string can contain spaces.</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>maxpoll</span></strong> <i><span class="varname">max-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum NTP polling interval. The polling interval is the nth power of 2, in seconds. For example, if maxpoll is set to 11, the maximum polling interval is 2048 seconds.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 10 to 17, in seconds. The default value is 10.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>minpoll</span></strong> <i><span class="varname">min-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the minimum NTP polling interval. The polling interval is the nth power of 2, in seconds. For example, if minpoll is set to 5, the minimum polling interval is 32 seconds.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer ranging from 3 to 6, in seconds. The default value is 6.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>preempt</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies that a peer can be preempted.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv6</span></strong> <i><span class="varname">ipv6Addr</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the IPv6 address of the remote server. ipv6-address is a host address and cannot be a multicast address, loopback address, or reference clock address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a 32-digit hexadecimal number, in the format of X:X:X:X:X:X:X:X.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>preferred</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the remote server as the preferred one. By default, the remote server is not preferred.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>domain</span></strong> <i><span class="varname">domain-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a domain name.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 255 characters. It cannot contain spaces.</p>
</td>
</tr>




</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000002158962816__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000002158962816__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000002158962816__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>A remote node with a specified IP address or NEID can be configured as the peer of a local device. The local device runs in the symmetric active mode. The local and remote devices can be synchronized to each other.<p></p>
</p>
<p><strong>Configuration Impact</strong></p>
<p>If a key ID is configured using NTPv1, authentication may fail because of non-standard NTPv1 authentication.</p>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>If this command is the first NTP configuration command, the system automatically adds the ntp [ ipv6 ] server disable command to the configuration file to disable the NTP service. To enable the NTP service, run the undo ntp [ ipv6 ] server disable command. If this command is the last NTP configuration command to be deleted, the system automatically deletes the ntp [ ipv6 ] server disable command from the configuration file when you delete this command.</li><li>If a VPN instance is specified for the NTP peer, the instance must have been created using the <b><span class="cmdname">ip vpn-instance</span></b> command, and the corresponding address family must have been enabled using the ipv4-family (VPN instance view) or ipv6-family (VPN instance view) command based on the IPv4 or IPv6 service configured for the NTP peer. Otherwise, this command fails to be executed.</li><li>If a source interface is specified for the NTP peer, the interface must exist. Otherwise, this command fails to be executed.</li><li>If an NTP IPv6 peer is configured and a source interface is specified, IPv6 must be enabled on the interface. Otherwise, this command fails to be executed.</li><li>If both the VPN instance and source interface are specified, the source interface must be bound to the VPN instance. Otherwise, this command fails to be executed.</li><li>If the VPN instance or source interface specified in the command is deleted, the corresponding NTP peer is also deleted.</li><li>If the IPv4 or IPv6 address family of the VPN instance specified in the command is disabled, the corresponding NTP peer is deleted.</li><li>If a source interface is specified for the NTP IPv6 peer and the IPv6 function is disabled on the source interface, the corresponding NTP peer is deleted.</li><li>If the preference field is specified in this command, the clock source configured with the preference field is selected as the synchronization clock source of the device only when the following conditions are met: (1) The <b><span class="cmdname">display ntp sessions</span></b> command output shows that the clock status of the clock source contains the selected field. (2) The <b><span class="cmdname">display ntp sessions</span></b> command output shows that the clock stratum value of any clock source that contains the selected field is not smaller than that of this clock source.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000002158962816__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the IPv6 peer 2001:db8::1 to provide the synchronization time for the local device. The local peer can also provide the synchronization time for the peer. The IP address of the NTP packet is obtained from Vlanif 100.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>vlan batch 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface Vlanif 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-Vlanif100] <strong>ipv6 enable</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-Vlanif100] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ntp unicast-peer ipv6 2001:db8::1 source-interface Vlanif 100</strong>
</pre>
</div>

<div class="p"># Configure the remote node with the domain name www.example.com as the peer of the local device.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ntp unicast-peer domain www.example.com</strong>
</pre>
</div>


<div class="p"># Configure the peer 10.10.1.1 to provide the synchronizing time for the local device. The local device can also provide synchronizing time for the peer. Set the version number to 3.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ntp unicast-peer 10.10.1.1 version 3</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_NTP_Configuration_Commands_title.html">NTP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/SYNC-INTERVAL(NTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/RESET-NTP-STAT-PKT-ALL(NTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>