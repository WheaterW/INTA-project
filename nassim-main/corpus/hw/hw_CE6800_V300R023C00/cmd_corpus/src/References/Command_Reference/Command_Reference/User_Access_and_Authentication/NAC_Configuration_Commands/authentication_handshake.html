
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="authentication handshake">
<meta name="DC.subject" content="authentication handshake">
<meta name="keywords" content="authentication handshake">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-NAC_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/AUTHENTICATION_EVENT_CLIENT-NO-RESPONSE_ACTION_AUTHORIZE.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/AUTHENTICATION_IP-CONFLICT-CHECK_ENABLE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NAC">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="NAC">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featurename" content="NAC">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Creator" content="SUBSYS_ID_ESAP_CFGMGR">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907767736">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>authentication handshake</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907767736"></a><a name="EN-US_CLIREF_0000001907767736"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">authentication handshake</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907767736__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">authentication handshake</span></b> command enables the handshake with pre-connection users and authorized users.</p>
<p>The <b><span class="cmdname">undo authentication handshake</span></b> command disables the handshake with pre-connection users and authorized users.</p>
</p>
<p>By default, the handshake with pre-connection users and authorized users is enabled.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6820H, CE6820H-K and CE6820S.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907767736__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">authentication handshake</span></b></p>

<p><b><span class="cmdname">undo authentication handshake</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907767736__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907767736__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Authentication profile view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907767736__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907767736__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>The device creates entries for pre-connection users, users who fail to be authenticated and are assigned network access rights, and users who are authenticated. After users go offline in normal situations, the system immediately deletes the corresponding user entries. However, if some users go offline due to exceptions such as network disconnections, the system cannot immediately delete the corresponding user entries. If there are a large number of such user entries, other users may fail to access the network.<p></p>
<span>To solve this problem</span>, run the <b><span class="cmdname">authentication handshake</span></b> command to enable the handshake with pre-connection users and authorized users. If a user does not respond to the handshake request from the device within the handshake period (handshake interval x number of handshakes) (configured using the <b><span class="cmdname">authentication timer handshake-period handshake-times</span></b> command), the device deletes the user entry.</p>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>802.1X authentication users support this function when they are in the pre-connection phase, fail or succeed the authentication.</li><li>This function takes effect only for wired users who have obtained IP addresses. If a user does not obtain an IP address, the device does not detect the user within 30 minutes. After 30 minutes, the device waits for another handshake period. If a user does not generate traffic within the handshake period, the device disconnects the user.</li><li>The handshake function is implemented using ARP probe packets or neighbor discovery (ND) probe packets.</li><li>The handshake function can also be implemented by detecting whether there is user traffic on the access device. Assuming that the handshake period is 3n, the device will detect user traffic at n and 2n. The 0-n time range is used as an example. The n-2n time range is similar to the 0-n time range.</li><li>If user traffic passes through the device within the period from 0 to n, the device considers that the user is online at n, does not send probe packets at that time, and resets the number of handshakes.</li><li>If no user traffic passes the device during the 0-n period, the device cannot detect whether the user is online at n and sends a probe packet.</li><li>If the device receives the response packet from the user, it considers the user online and resets the number of handshakes. If the device does not receive the response packet, it considers the user offline.</li><li>If user traffic passes through the device within the period from 2n to 3n, the device considers that the user is online at 3n and resets the number of handshakes.</li><li>If no user traffic passes through the device within the period from 2n to 3n, the device cannot detect whether the user is online at 3n and considers that the user is offline.</li><li>If the device considers that the user is offline at n, 2n, or 3n, the device deletes all entries of the user. To prevent users from going offline unexpectedly when no operation is performed on the PC, do not set a short handshake period.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907767736__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># In the authentication profile p1, enable the handshake with pre-connection users and authorized users.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>authentication-profile name p1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-authen-profile-p1] <strong>authentication handshake</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-NAC_Configuration_Commands_title.html">NAC Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/AUTHENTICATION_EVENT_CLIENT-NO-RESPONSE_ACTION_AUTHORIZE.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/AUTHENTICATION_IP-CONFLICT-CHECK_ENABLE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>