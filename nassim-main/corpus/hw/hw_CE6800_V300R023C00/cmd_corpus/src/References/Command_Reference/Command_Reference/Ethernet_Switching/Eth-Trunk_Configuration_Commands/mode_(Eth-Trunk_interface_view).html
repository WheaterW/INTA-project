
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="mode (Eth-Trunk interface view)">
<meta name="DC.subject" content="mode (Eth-Trunk interface view)">
<meta name="keywords" content="mode (Eth-Trunk interface view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Eth-Trunk_Interface_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SETETHTRUNKMAX(IFMTRUNKOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/MODE_SYMMETRY.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_IFMTRUNKOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942841061">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>mode (Eth-Trunk interface view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942841061"></a><a name="EN-US_CLIREF_0000001942841061"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">mode (Eth-Trunk interface view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942841061__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">mode</span></b> command configures or changes the working mode of an Eth-Trunk interface.</p>
<p>The <b><span class="cmdname">undo mode</span></b> command restores the default working mode of an Eth-Trunk interface.</p>
</p>
<p>By default, an Eth-Trunk interface works in manual load balancing mode.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942841061__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">




<p><b><span class="cmdname">mode </span></b>{ <strong><span>lacp-static</span></strong> | <strong><span>lacp-dynamic</span></strong> | <strong><span>manual</span></strong> <strong><span>load-balance</span></strong> }</p>

<p><b><span class="cmdname">undo mode</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942841061__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>lacp-static</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the static LACP mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>manual</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the manual mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>load-balance</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the manual load balancing mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>lacp-dynamic</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the dynamic Link Aggregation Control Protocol (LACP) mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942841061__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Layer 2 Eth-Trunk interface view,</span><span>Eth-Trunk interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942841061__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942841061__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>Currently, the device supports the following Eth-Trunk working modes:</p>

<ul><li>Dynamic LACP Mode<p></p>
<span>The source server connects to the target server through</span> the local device. You can run the <b><span class="cmdname">mode lacp-dynamic</span></b> command on the local device to configure the Eth-Trunk interface to work in dynamic LACP mode to connect to the target server. If the source server is unconfigured after being restarted, LACP negotiation times out. Dynamic LACP ensures that the data obtained from the target server is successfully forwarded to the source server.<p></p>
<span>If a device configured with an Eth-Trunk interface</span> in dynamic LACP mode can receive LACPDUs from the peer device, the two devices negotiate aggregation parameters using LACPDUs. After the negotiation succeeds, the functions of the aggregated link are the same as those of the Eth-Trunk interface in static LACP mode at both ends. The dynamic LACP mode applies only to the scenario where the local device is connected to the source server. In other scenarios, the static LACP mode is recommended. If the dynamic LACP mode is deployed, loops may occur on the network.</li><li>Static LACP mode<p></p>
<span>When two devices that form an Eth-Trunk are directly</span> connected and both support LACP, you can run the <b><span class="cmdname">mode lacp-static</span></b> command to create an Eth-Trunk interface to work in static LACP mode. In this mode, both load balancing and redundancy backup can be implemented. In static LACP mode, you must manually create an Eth-Trunk and add member interfaces to the Eth-Trunk. Different from link aggregation in manual load balancing mode, active interfaces are selected by sending LACPDUs. That is, after a group of interfaces are added to an Eth-Trunk interface, which interfaces are active and which interfaces are inactive need to be determined through LACP packet negotiation.</li><li>Manual load balancing mode<p></p>
<span>If one of the devices at both ends of an Eth-Trunk</span> link does not support LACP, you can run the <b><span class="cmdname">mode manual load-balance</span></b> command to configure the Eth-Trunk to work in manual load balancing mode and add multiple member interfaces to the Eth-Trunk to increase bandwidth and reliability. The manual load balancing mode is a basic link aggregation mode. In this mode, you need to manually create an Eth-Trunk, add interfaces to the Eth-Trunk, and specify active interfaces. LACP is not involved. In this mode, all active interfaces forward data and load balance traffic. Therefore, this mode is called load balancing mode. In manual load balancing mode, all member interfaces evenly load balance traffic. You can also set weights for member interfaces so that some interfaces can load balance more traffic. If an active link is faulty, the remaining active links in the LAG automatically share the traffic evenly or based on the weight.</li></ul>
</div>
<p><strong>Prerequisites</strong></p>
<p><p>The Eth-Trunk interface has been correctly configured.<p></p>
<span>Before configuring an Eth-Trunk interface to work</span> in manual 1:1 master/backup mode, switch the Eth-Trunk interface to Layer 2 mode.</p>
</p>
<p><strong>Precautions</strong></p>
<div class="p"><p>If an Eth-Trunk interface does not work in manual load balancing mode, ensure that the Eth-Trunk interface does not have any member interface before changing the working mode of the Eth-Trunk interface.<p></p>
<span>It is recommended that the gateway and dynamic LACP</span> be deployed on different devices. Otherwise, LACP mode switching may cause service flapping, such as ARP, BFD, and MAC flapping.<p></p>
<span>When the manual load balancing mode is switched to</span> the LACP mode, to ensure that services are not affected, the Eth-Trunk interface mode can be successfully switched only after the 90-second protection time expires.<p></p>
<span>When an Eth-Trunk interface is configured to work</span> in lacp-dynamic mode and is in the Indep state, its member interfaces function as independent physical interfaces and inherit only the VLAN configuration of the Eth-Trunk interface. Other configurations such as Layer 2 and Layer 3 sub-interfaces are not inherited.<p></p>
<span>When changing the working mode of an Eth-Trunk from</span> manual mode to LACP mode, pay attention to the following points:</p>

<ul><li>If an Eth-Trunk interface has member interfaces, the protection time for mode switching is 90 seconds.</li><li>During the mode switching, if the peer device does not switch the mode, the status of the local interface is the same as that before the switching.</li><li>After the mode switching protection time expires, if the peer end does not switch the mode, the negotiation on the local interface fails, and the protocol status of the Eth-Trunk interface goes Down. As a result, services are affected.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942841061__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Change Eth-Trunk 1 and configure it to work in static LACP mode.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface eth-trunk 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Eth-Trunk1] <strong>mode lacp-static</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Eth-Trunk_Interface_Configuration_Commands_title.html">Eth-Trunk Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/SETETHTRUNKMAX(IFMTRUNKOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/MODE_SYMMETRY.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>