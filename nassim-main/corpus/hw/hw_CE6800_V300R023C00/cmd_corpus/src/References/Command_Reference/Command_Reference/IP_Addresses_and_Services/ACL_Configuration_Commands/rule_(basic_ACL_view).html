
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="rule (basic ACL view)">
<meta name="DC.subject" content="rule (basic ACL view)">
<meta name="keywords" content="rule (basic ACL view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_ACL_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/RULE-USER(ACLOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/RULE-ARP-DES(ACLOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Creator" content="SUBSYS_ID_ACLOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907762744">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>rule (basic ACL view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907762744"></a><a name="EN-US_CLIREF_0000001907762744"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">rule (basic ACL view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907762744__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">rule</span></b> command creates or modifies an ACL rule in the basic ACL view.</p>
<p>The <b><span class="cmdname">undo rule</span></b> command deletes an ACL rule in the basic ACL view.</p>
</p>
<p>By default, no basic ACL rule is created.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907762744__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">



<p><b><span class="cmdname">rule </span></b>[ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } [ <strong><span>fragment-type</span></strong> <strong><span>fragment</span></strong> | <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> | <i><span class="varname">src-netmask</span></i> } | <strong><span>any</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>logging</span></strong> ] <sup>*</sup></p>








<p><b><span class="cmdname">undo rule </span></b>[ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } [ <strong><span>fragment-type</span></strong> <strong><span>fragment</span></strong> | <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> | <i><span class="varname">src-netmask</span></i> } | <strong><span>any</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>logging</span></strong> ] <sup>*</sup></p>





<p><b><span class="cmdname">undo rule </span></b><i><span class="varname">rule-id</span></i> [ <strong><span>to</span></strong> <i><span class="varname">end-rule-id</span></i> ]</p>


</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907762744__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">rule-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the ID of an ACL rule.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 4294967294.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>name</span></strong> <i><span class="varname">rule-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of an ACL rule.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters. It cannot contain spaces or start with an underscore (_).</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>permit</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Permits packets that match conditions.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>deny</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Denies the packets that match the rule.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>fragment-type</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Matches packets based on the fragment type of the packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>fragment</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Checks fragmented packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>





<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>source</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Matches packets based on source IP addresses.</p>
<p>If source is not configured, packets from any source IP address are matched.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">source-ip-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><p>Specifies the source IP address.</p>
<ul><li>This parameter specifies the source address of a packet when it is used for packet filtering and access control.</li><li>This parameter specifies the route prefix when it is used for route filtering.</li><li>This parameter specifies the multicast source address or multicast group address when it is used for multicast.</li></ul>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is in dotted decimal notation.</p>
<ul><li>The parameter indicates source of the traffic in most case.</li><li>The parameter indicates the route prefix if the ACL application is routing protocol.</li><li>The parameter indicates multicast source address or multicast group address if the ACL application is multicast protocol.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">source-wildcard</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the wildcard of a source IP address.</p>
<p>A wildcard mask is a 32-bit number string that indicates which bits of an IP address are checked. Its form is the same as that of an IP address. A source or destination IP address range can be determined by a wildcard mask and an IP address of criteria conditions. If a packet address is within this range, the packet meets the criteria conditions; otherwise, the packet does not. Among bits of wildcard masks, 0 represents "Check corresponding bits", and 1 "Do not check corresponding bits".</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is in dotted decimal notation.</p>
<p>The wildcard of a source IP address can be 0, equivalent to 0.0.0.0, indicating that the source IP address is a host address.</p>
<p>192.168.1.16 0.0.0.15 indicates that the IP address ranges from 192.168.1.16 to 192.168.1.31.</p>
<p>The wildcard mask 255.255.255.255 indicates all IP addresses. If all bits are set to 1, all 32 bits are not checked. In this case, you can use any to replace it. The wildcard mask 0.0.0.0 indicates that all 32 bits need to be matched.</p>
<p>The wildcard mask and IP subnet mask work in different ways. Among subnet masks, number 1 and 0 decide the network, subnet, or corresponding host IP addresses.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>0</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Wildcard bits : 0.0.0.0 ( a host ).</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">src-netmask</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the mask length of a specified IP address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 32.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>any</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Matches packets with any source IP address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a time range during which an ACL rule takes effect.</p>
<p>A time range is configured using the time-range command.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Matches packets based on a VPN instance name.</p>
<p>The parameter indicates the L3VPN that the traffic belongs to.  If the traffic is from L3VPN, this option must be configured in the ACL.  If this option is not configured, it indicates the traffic belongs to the public network rather than L3VPN.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of 1 to 31 case-sensitive characters. It cannot contain spaces. The VPN instance name cannot be _public_. If the character string is quoted by double quotation marks, the character string can contain spaces.</p>
</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>logging</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates whether to log the matched packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>rule</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an ACL rule.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>to</span></strong> <i><span class="varname">end-rule-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an end rule ID for ACL rules to be deleted in batches.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 4294967294.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907762744__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Basic ACL view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907762744__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907762744__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>After a basic ACL is created, run the <b><span class="cmdname">rule</span></b> command to add rules to the ACL.<p></p>
"rule permit" and "rule permit source any" have the same matching result.<p></p>
"rule deny" and "rule deny source any" have the same matching result.<p></p>
<span>Advanced ACL rules with the fragment-type can prevent</span> such attacks by permitting only non-fragmented packets. In normal situations, Maximum Transmission Unit (MTU) is set on networks so that packets cannot be fragmented.</p>
</p>
<p><strong>Prerequisites</strong></p>
<p><p>A basic ACL has been created using the <b><span class="cmdname">acl</span></b> command in the system view.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<div class="p"><p>When specifying an ACL rule ID, note the following:</p>

<ul><li>If a rule with a specified rule ID already exists, and the new rule conflicts with the existing one, the conflicting part in the new rule overwrites that in the existing rule.</li><li>If no rule with the specified rule ID exists, a rule with the specified rule ID is created.<p></p>
<span>When an ACL rule ID is not specified and a rule is</span> added, the system automatically allocates an ID to this rule. ACL rules are arranged in ascending order of rule IDs, with the difference between two adjacent rules as an ACL increment.<p></p>
<span>The rule IDs automatically generated by the system</span> start from the ACL increment. For example, if the ACL increment is 5, the rule ID starts from 5; if the ACL increment is 2, the rule ID starts from 2. This allows you to add rules before the first rule.<p></p>
<span>By default</span>, if an ACL is not configured with the fragment-type,</li><li>If only Layer 3 information is configured to the rule, the ACL rules will filter all packets (including the first fragment of a packet, non-first fragments, and non-fragmented packets).</li><li>If both Layer 3 and Layer 4 information is configured to the rule,
<ul><li>The ACL filters the first fragment of a packet and non-fragmented packets, as these packets contain Layer 3 and Layer 4 information.</li><li>Only Layer 3 information about non-first fragments is filtered, as they contain Layer 3 information never Layer 4 information. If Layer 3 information matches the "permit" rule, the non-first fragment is allowed to pass through; if Layer 3 information matches the "deny" rule, continue matching the non-first fragment against the next rule. (Note: this is different to the normal ACL working process.)</li></ul>

</li></ul>
</div>
<p><strong>Precautions</strong></p>
<p><p>If auto is configured when you run the <b><span class="cmdname">acl</span></b> command to create an ACL, you cannot specify a rule ID when creating a rule. The system automatically uses the ACL increment as the start rule ID, and the subsequent rules are numbered by an ACL increment in ascending order.<p></p>
<span>You must specify the rule ID when deleting a rule</span>. To check rule IDs, run the <b><span class="cmdname">display acl</span></b> command.<p></p>
<span>Before deleting an ACL rule</span>, run the <b><span class="cmdname">display acl</span></b> command to check whether the ACL rule has been applied to other services. Delete the rule only when it is not applied to other services.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907762744__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Create a basic ACL numbered 2999 and add a rule to ACL 2999 to match packets with the source IP address 10.1.1.1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl number 2999</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-basic-2999] <strong>rule deny source 10.1.1.1 0</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_ACL_Configuration_Commands_title.html">ACL Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/RULE-USER(ACLOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/RULE-ARP-DES(ACLOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>