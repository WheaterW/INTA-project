
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="test-aaa">
<meta name="DC.subject" content="test-aaa">
<meta name="keywords" content="test-aaa">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-AAA_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/TASK-GROUP_(AAA-VIEW).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/TIME-RANGE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="AAA">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="AAA">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featurename" content="AAA">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featuretype" content="User Access and Authentication">
<meta name="featuretype" content="User Access and Authentication">
<meta name="DC.Creator" content="SUBSYS_ID_ESAP_RADIUS">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907607788">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>test-aaa</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907607788"></a><a name="EN-US_CLIREF_0000001907607788"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">test-aaa</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907607788__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">test-aaa</span></b> command tests the connectivity between the device and the authentication server or accounting server, and tests whether a user can be authenticated using authentication server and whether the accounting server can charge a user.</p>
</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907607788__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p><b><span class="cmdname">test-aaa </span></b><i><span class="varname">user-name</span></i> <i><span class="varname">user-password</span></i> <strong><span>hwtacacs-template</span></strong> <i><span class="varname">template-name</span></i> [ <strong><span>accounting</span></strong> [ <strong><span>start</span></strong> | <strong><span>realtime</span></strong> | <strong><span>stop</span></strong> ] ]</p>


<p><b><span class="cmdname">test-aaa </span></b><i><span class="varname">user-name</span></i> <i><span class="varname">user-password</span></i> <strong><span>ldap-template</span></strong> <i><span class="varname">template-name</span></i></p>

<p><b><span class="cmdname">test-aaa </span></b><i><span class="varname">user-name</span></i> <i><span class="varname">user-password</span></i> <strong><span>radius-template</span></strong> <i><span class="varname">template-name</span></i> [ <strong><span>chap</span></strong> | <strong><span>pap</span></strong> | <strong><span>accounting</span></strong> [ <strong><span>start</span></strong> | <strong><span>realtime</span></strong> | <strong><span>stop</span></strong> ] ] [ <strong><span>called-station-id</span></strong> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907607788__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">user-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a user name.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 253 case-insensitive characters. When the user name contains spaces, it must be enclosed in double quotation marks ("").</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">user-password</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a user password.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 128 case-sensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>radius-template</span></strong> <i><span class="varname">template-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a RADIUS server template.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The RADIUS server template must already exist.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>chap</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates Challenge Handshake Authentication Protocol (CHAP) authentication.</p>
<p>The NAS device sends the user name, encrypted password, and 16-byte random code to the RADIUS server. The RADIUS server searches for the database according to the user name and obtains the password that is the same as the encrypted password at the user side. The RADIUS server then encrypts the received 16-byte random code and compares the result with the password. If they are the same, the user is authenticated. If they are different, the user fails to be authenticated. In addition, if the user is authenticated, the RADIUS server generates a 16-byte random code to challenge the user.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pap</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates Password Authentication Protocol (PAP) authentication.</p>
<p>The NAS device adds the user name and encrypted password to the corresponding fields of authentication request packets, and then sends the packets to the RADIUS server. The NAS device determines whether to allow the user go online based on the result returned by the RADIUS server.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>accounting</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates accounting. By default, an accounting-start packet is sent.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>start</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the sent packet is an accounting-start packet.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>realtime</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the sent packet is a real-time accounting packet.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>stop</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the sent packet is an accounting-stop packet.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>hwtacacs-template</span></strong> <i><span class="varname">template-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of an HWTACACS server template.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The HWTACACS server template must already exist.</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ldap-template</span></strong> <i><span class="varname">template-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of an LDAP server template.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The LDAP server template must already exist.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907607788__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>All views</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907607788__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>3: Management level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907607788__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>The <b><span class="cmdname">test-aaa</span></b> command tests service reachability of the server. The device sends an authentication or accounting request packet to the server. If the server returns an authentication or accounting success packet, the device and server can communicate with each other. If the server's response times out, the device and server cannot communicate with each other.<p></p>
<span>In PAP authentication mode</span>, passwords are transmitted in clear text. In CHAP authentication mode, passwords are transmitted after being encrypted. Both the PAP and CHAP authentication modes pose security risks.</p>
<p><strong>Prerequisites</strong></p>
<p>An authentication server template or accounting server template has been created, an authentication server or accounting server has been specified in the authentication server template or accounting server template, and the authentication server or accounting server has been configured.</p>
<p><strong>Follow-up Procedure</strong></p>
<p>If the test result indicates that the user fails to be authenticated by using authentication server or the accounting server fails to charge the user, check whether the configuration of the authentication server template and the authentication server is correct, and check the connectivity between the device and the authentication server.</p>
<p><strong>Precautions</strong></p>
<p><p>Before running this command, you only need to create a server template and configure the authentication server.<p></p>
<span>When the user name is enclosed in double quotation</span> marks (""), the double quotation marks ("") are not sent to the LDAP server as a part of the user name during LDAP server detection.<p></p>
<span>When the user name is enclosed in double quotation</span> marks (""), the double quotation marks ("") are sent to the RADIUS or HWTACACS server as a part of the user name during RADIUS or HWTACACS server detection.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907607788__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Test whether the user user1 can be authenticated using CHAP authentication in the RADIUS server template huawei.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>test-aaa user1 YsHsjx_202206 radius-template huawei chap</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-AAA_Configuration_Commands_title.html">AAA Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/TASK-GROUP_(AAA-VIEW).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/TIME-RANGE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>