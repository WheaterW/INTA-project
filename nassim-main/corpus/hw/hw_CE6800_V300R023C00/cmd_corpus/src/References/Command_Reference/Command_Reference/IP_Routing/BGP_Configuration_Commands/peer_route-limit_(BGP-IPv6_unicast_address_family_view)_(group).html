
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer route-limit (BGP-IPv6 unicast address family view) (group)">
<meta name="DC.subject" content="peer route-limit (BGP-IPv6 unicast address family view) (group)">
<meta name="keywords" content="peer route-limit (BGP-IPv6 unicast address family view) (group)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PEER-IPV6-ROUTE-LIMIT-IPV4UNICAST(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PEER-IPV6-ROUTE-LIMIT(BGPIPV6).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPIPV6">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907764736">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer route-limit (BGP-IPv6 unicast address family view) (group)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907764736"></a><a name="EN-US_CLIREF_0000001907764736"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer route-limit (BGP-IPv6 unicast address family view) (group)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907764736__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer route-limit</span></b> command sets the maximum number of routes that can be received from a peer group.</p>
<p>The <b><span class="cmdname">undo peer route-limit</span></b> command restores the default setting.</p>
</p>
<p>By default, there is no limit on the number of routes that can be accepted from a peer.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907764736__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">group-name</span></i> <strong><span>route-limit</span></strong> [ <strong><span>accept-prefix</span></strong> ] <i><span class="varname">limit</span></i> [ <i><span class="varname">percentage</span></i> ] [ <strong><span>alert-only</span></strong> | <strong><span>idle-forever</span></strong> | <strong><span>idle-timeout</span></strong> <i><span class="varname">times</span></i> ]</p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">group-name</span></i> <strong><span>route-limit</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907764736__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">group-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a peer group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The name is a string of 1 to 47 case-sensitive characters, with spaces not supported. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>accept-prefix</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><p>Specifies the number of routes that match a policy.</p>
<ul><li>If accept-prefix is specified and the keep-all-routes command is run, only the routes that match the policy are counted into the maximum number of routes that can be accepted.</li><li>If accept-prefix and alert-only are both set, the system keeps receiving routes and the routes are valid after the proportion of the number of received routes to the limit reaches percentage or 100%.</li></ul>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">limit</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum number of routes that can be accepted from a peer.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4294967295.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">percentage</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><p>Specifies the proportion threshold of the number of received routes to limit.</p>
<ul><li>If the proportion reaches percentage and is less than 100%, the device sends a threshold-reaching alarm named BGP_1.3.6.1.4.1.2011.5.25.177.1.3.1 ROUTETHRESHOLDEXCEED and properly receives routes.</li><li>If the proportion reaches 100%, the device sends a threshold-crossing alarm named BGP_1.3.6.1.4.1.2011.5.25.177.1.3.6 ROUTEEXCEED and stops receiving routes.</li></ul>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 100. The default value is 75.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>alert-only</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables the device to send a threshold alarm or limit-exceeding alarm and stop accepting excess routes if accept-prefix is not specified and the percentage of the number of received routes to the maximum number of routes that can be accepted reaches 100%. In this case, the peer relationship is not disconnected.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>idle-forever</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables the device to report a threshold-crossing alarm if the percentage of the number of received routes to the maximum number of routes that can be received exceeds the specified percentage, and to tear down the peer relationship after the number of routes exceeds the upper limit without attempting to automatically re-establish it before the reset bgp command is run. Therefore, you are advised not to configure this parameter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>idle-timeout</span></strong> <i><span class="varname">times</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables the device to send an alarm if the proportion of the number of received routes to limit reaches percentage. After the number of received routes exceeds the limit, the connection is interrupted, and the device does not automatically re-establish the connection until the timer expires.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 1200, in minutes.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907764736__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-IPv6 unicast address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907764736__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907764736__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>The <b><span class="cmdname">peer route-limit</span></b> command is used to set the maximum number of routes that a BGP device is allowed to receive from its peer group. This provides a mechanism for controlling the routes received from peer group in addition to distribution lists, filtering lists, and route mappings.</p>
<p><strong>Configuration Impact</strong></p>
<p>If the <b><span class="cmdname">peer route-limit</span></b> command is run for a peer group, the peers of the peer group inherit the configuration.<p></p>
<span>When the peer relationship between peers is Established</span>:</p>

<ul><li>If the <b><span class="cmdname">peer route-limit</span></b> command is run for the first time or the upper limit is reduced and the number of routes received by the device exceeds the upper limit:</li><li>If alert-only is specified in the command, the peer relationship is not interrupted and the received routes are not withdrawn, and for the new routes that are received, the system performs limit-exceeding processing.</li><li>If idle-forever is specified in the command, the local device terminates the connection with its peer. To reestablish the connection, run the <b><span class="cmdname">reset bgp</span></b> command.</li><li>If idle-timeout is specified in the command, the local device terminates the connection with its peer and starts the timer for automatic connection re-establishment. To re-establish the connection before the timer expires, you can run the <b><span class="cmdname">reset bgp</span></b> command.</li><li>If the upper limit is increased to a value greater than the number of received routes, the device sends Refresh messages to receive routes again. If the device does not support the route-refresh capability, the device reestablishes the connection.</li><li>If the upper limit is reduced but is still greater than the number of received routes, the device only changes the configuration parameter.<p></p>
<span>If alert-only</span>, idle-forever, or idle-timeout is not configured and the percentage of the number of received routes to the maximum number of routes that can be accepted is greater than the specified percentage, the device sends a threshold alarm. When the number of received routes exceeds the limit, the peer relationship is interrupted. After 30 seconds, the system automatically attempts to reestablish the peer relationship.</li><li>If the upper limit remains unchanged, the device only changes the configuration parameter.</li><li>If accept-prefix is specified, the device continues to accept excess routes in the alert-only scenario, and all received routes are valid. If accept-prefix is not specified in the alert-only scenario, the device only sends the threshold alarm or limit-exceeding alarm and does not accept excess routes. In this case, the peer relationship is not disconnected.</li></ul>
<p><strong>Precautions</strong></p>
<p>If a specified peer has this capability and the peer relationship is interrupted because the number of routes exceeds the upper limit, the same peer relationship in all address families is affected, and the peer relationship is re-established.<p></p>
<span>Adding</span>, modifying, or deleting the peer route-limit configuration of a BGP peer may cause the BGP peer to learn a large number of routes.<p></p>
<span>If idle-forever is configured</span>, the peer relationship is interrupted after the number of routes exceeds the upper limit. In addition, the connection is not automatically re-established, which may cause network interruption and cannot be automatically restored. Therefore, configuring idle-forever is not recommended.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907764736__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the maximum number of routes that can be received from a peer group to 10000.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>group test</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv6-family unicast</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv6] <strong>peer test enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv6] <strong>peer test route-limit 10000</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PEER-IPV6-ROUTE-LIMIT-IPV4UNICAST(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PEER-IPV6-ROUTE-LIMIT(BGPIPV6).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>