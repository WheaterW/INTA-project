
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="graceful-restart (OSPF view)">
<meta name="DC.subject" content="graceful-restart (OSPF view)">
<meta name="keywords" content="graceful-restart (OSPF view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPF-FRR-ROUTE-POLICY(OSPFFRROM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPF-HOSTNAME(OSPFCOMMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_OSPFCOMMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907763196">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>graceful-restart (OSPF view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907763196"></a><a name="EN-US_CLIREF_0000001907763196"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">graceful-restart (OSPF view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907763196__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">graceful-restart</span></b> command configures a device as a GR helper.</p>
<p>The <b><span class="cmdname">undo graceful-restart</span></b> command cancels the configuration.</p>
</p>
<p>By default, the device does not function as a GR helper.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907763196__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">graceful-restart </span></b>[ <strong><span>helper-role</span></strong> { { { <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> | <strong><span>acl-number</span></strong> <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } | <strong><span>ignore-external-lsa</span></strong> | <strong><span>planned-only</span></strong> } <sup>*</sup> } ]</p>

<p><b><span class="cmdname">graceful-restart helper-role never</span></b></p>

<p><b><span class="cmdname">graceful-restart non-ietf</span></b></p>

<p><b><span class="cmdname">undo graceful-restart </span></b>[ <strong><span>helper-role</span></strong> [ { { <strong><span>ip-prefix</span></strong> [ <i><span class="varname">ip-prefix-name</span></i> ] | <strong><span>acl-number</span></strong> [ <i><span class="varname">acl-number</span></i> ] | <strong><span>acl-name</span></strong> [ <i><span class="varname">acl-name</span></i> ] } | <strong><span>ignore-external-lsa</span></strong> | <strong><span>planned-only</span></strong> } <sup>*</sup> ] ]</p>

<p><b><span class="cmdname">undo graceful-restart helper-role never</span></b></p>

<p><b><span class="cmdname">undo graceful-restart non-ietf</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907763196__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>helper-role</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the GR Helper mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of an IP prefix list.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The name is a string of 1 to 169 case-sensitive characters except spaces. When double quotation marks are used to include the string, spaces are allowed in the string.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl-number</span></strong> <i><span class="varname">acl-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the basic ACL number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 2000 to 2999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a named basic ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of 1 to 32 case-sensitive characters, spaces not supported.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ignore-external-lsa</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Prevents the device from checking Type 5 and Type 7 LSAs.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>planned-only</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the device supports only planned GR.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>By default, the device supports both planned GR and unplanned GR.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>never</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the router does not support the Helper mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>non-ietf</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables the non-IETF mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907763196__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>OSPF view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907763196__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907763196__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>After an OSPF process is restarted through GR, the restarter and the helper reestablish the neighbor relationship, exchange routing information, synchronize LSDBs, and update routing tables and FIBs to ensure network stability.</p>
<p><strong>Prerequisites</strong></p>
<p>The Opaque-LSA capability has been enabled using the <b><span class="cmdname">opaque-capability enable</span></b> command.</p>
<p><strong>Precautions</strong></p>
<p>The graceful-restart non-ietf and graceful-restart [ helper-role { { { { ip-prefix | acl-number | acl-name } | ignore-external-lsa | planned-only } * } | never } ] commands are mutually exclusive.<p></p>
<span>If the GR restarter fails to complete GR within 18</span>00s, the GR helper in non-IETF mode exits the helper mode.<p></p>
<span>In non-IETF mode</span>, only broadcast interfaces can be simulated as P2P interfaces.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907763196__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a device as an OSPF GR helper and configure the helper to support only planned GR.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospf 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospf-1] <strong>opaque-capability enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospf-1] <strong>graceful-restart helper-role planned-only</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">OSPF Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/OSPF-FRR-ROUTE-POLICY(OSPFFRROM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/OSPF-HOSTNAME(OSPFCOMMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>