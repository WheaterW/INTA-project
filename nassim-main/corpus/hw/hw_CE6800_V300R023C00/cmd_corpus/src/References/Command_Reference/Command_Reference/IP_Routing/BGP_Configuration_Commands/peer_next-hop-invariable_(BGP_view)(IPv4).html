
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer next-hop-invariable (BGP view)(IPv4)">
<meta name="DC.subject" content="peer next-hop-invariable (BGP view)(IPv4)">
<meta name="keywords" content="peer next-hop-invariable (BGP view)(IPv4)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/GROUP-IPV4-NEXTHOP-INVARIABLE(BGPUCASTVPNOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PEER-IPV6-NEXTHOP-INVARIABLE-IPV4UNICAST(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPUCASTVPNOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907764568">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer next-hop-invariable (BGP view)(IPv4)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907764568"></a><a name="EN-US_CLIREF_0000001907764568"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer next-hop-invariable (BGP view)(IPv4)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907764568__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer next-hop-invariable</span></b> command configures the device not to change the next hop of a route when advertising the route to a peer group.</p>
<p>The <b><span class="cmdname">undo peer next-hop-invariable</span></b> command restores the default configuration.</p>
</p>
<div class="p"><p>
By default:
</p>
<ul><li>
A device sets its interface IP address as the Next_Hops of routes when advertising these routes to EBGP peers.
</li><li>
A device does not modify the Next_Hops of non-labeled routes if the routes are learned from EBGP peers and are to be advertised to IBGP peers; the device sets its interface IP address as the Next_Hops of labeled routes if the routes are learned from EBGP peers and are to be advertised to IBGP peers.
</li><li>
A device does not change the Next_Hops of routes if the routes are learned from an IBGP peer and are to be advertised to another IBGP peer.
</li><li>
A device sets its interface IP address as the Next_Hops of routes when advertising imported IGP routes to IBGP peers.
</li><li>
A device modifies the Next_Hop of imported static routes to the local interface's IP address when advertising the routes to IBGP peers.
</li></ul>
</div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907764568__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">ipv4-address</span></i> <strong><span>next-hop-invariable</span></strong> [ <strong><span>include-static-route</span></strong> | <strong><span>include-unicast-route</span></strong> ] <sup>*</sup></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">ipv4-address</span></i> <strong><span>next-hop-invariable</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907764568__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ipv4-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv4 address of a peer.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>It is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>include-static-route</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures the device to retain the original Next_Hop of static routes when advertising the routes to the peer.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907764568__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-IPv4 unicast address family view,</span><span>BGP view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907764568__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907764568__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>The <b><span class="cmdname">peer next-hop-invariable</span></b> command has the following functions:</p>

<ul><li>A BGP speaker does not change the next hop of a route when advertising the route to an EBGP peer group.</li><li>A BGP speaker does not change the next hop of a labeled route when advertising the route to an IBGP peer group.</li><li>A BGP speaker uses the next hop address of an imported IGP route when advertising the route to an IBGP peer group.<p></p>
<span>If the</span> <b><span class="cmdname">peer next-hop-invariable include-static-route</span></b> command is run, the BGP speaker retains the original next hop address of an imported static route when it advertises the static route to the specified IBGP peer. However, the local interface address is used as the next hop in the following situations: (1) The imported static route is a public network static route, and its original next hop is invalid. (2) The imported static route is a public network static route, and its original next hop recurses to a VPN route. (3) The imported static route is a VPN static route and is imported from the public network instance.<p></p>
<span>Using the</span> <b><span class="cmdname">peer next-hop-invariable include-unicast-route</span></b> command, you can configure a BGP speaker not to change the next hop address when advertising unicast routes learned from other peers to EBGP peers.</li></ul>
</div>
<p><strong>Prerequisites</strong></p>
<p>A peer has been created using the <b><span class="cmdname">peer as-number</span></b> command.</p>
<p><strong>Precautions</strong></p>
<p>The <b><span class="cmdname">peer next-hop-invariable</span></b> command takes effect only on received routes. In the IPv4 unicast address family view, the command takes effect only on received labeled IPv4 unicast routes. If include-unicast-route is specified, the command also takes effect on unlabeled routes.<p></p>
<span>If both the peer next-hop-invariable and peer next</span>-hop-local commands are run, the latest configuration overrides the previous one.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907764568__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a BGP speaker to use the next hop address of an imported static route when advertising the route to an IBGP peer group.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer 10.1.1.2 as-number 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer 10.1.1.2 next-hop-invariable include-static-route</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/GROUP-IPV4-NEXTHOP-INVARIABLE(BGPUCASTVPNOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PEER-IPV6-NEXTHOP-INVARIABLE-IPV4UNICAST(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>