
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="pim ecmp-priority">
<meta name="DC.subject" content="pim ecmp-priority">
<meta name="keywords" content="pim ecmp-priority">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IPv4_PIM_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PIM-DM(PIMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PIM-IPV4-SM_1(PIMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Creator" content="SUBSYS_ID_PIMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942845513">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>pim ecmp-priority</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942845513"></a><a name="EN-US_CLIREF_0000001942845513"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">pim ecmp-priority</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942845513__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">pim ecmp-priority</span></b> command sets the PIM ECMP priority of an interface.</p>
<p>The <b><span class="cmdname">undo pim ecmp-priority</span></b> command deletes the PIM ECMP priority of an interface.</p>
</p>
<p>By default, no PIM ECMP priority is configured on an interface.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE6885-LL (low latency mode), CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942845513__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">pim ecmp-priority </span></b><i><span class="varname">priorityValue</span></i></p>

<p><b><span class="cmdname">undo pim ecmp-priority </span></b>[ <i><span class="varname">priorityValue</span></i> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942845513__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">priorityValue</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an ECMP priority value.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 128.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942845513__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100ge sub-interface view,</span><span>100GE interface view,</span><span>10GE sub-interface view,</span><span>10GE interface view,</span><span>200GE sub-interface view,</span><span>200GE interface view,</span><span>25GE sub-interface view,</span><span>25GE interface view,</span><span>400GE sub-interface view,</span><span>400GE interface view,</span><span>50GE sub-interface view,</span><span>50GE interface view,</span><span>Eth-Trunk sub-interface view,</span><span>Eth-Trunk interface view,</span><span>Loopback interface view,</span><span>VBDIF interface view,</span><span>VLANIF interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942845513__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942845513__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<ul><li>In a PIM FRR scenario where multicast PIM FRR is implemented using unicast route ECMP, the primary and backup inbound interfaces for PIM FRR are selected based on the next-hop IP addresses of unicast routes. The interface with the largest next-hop IP address is selected as the primary inbound interface, and the interface with the second largest next-hop IP address is selected as the backup inbound interface. In this scenario, the selection of the primary and backup inbound interfaces depends on the next-hop IP addresses, which is not flexible. In this case, you can configure the PIM ECMP priority function. After the PIM ECMP priority function is configured, the device selects the primary and backup inbound interfaces based on the PIM ECMP priority. The interface with the highest PIM ECMP priority is selected as the PIM FRR primary inbound interface, and the interface with the second highest PIM ECMP priority is selected as the backup inbound interface.</li><li>In a common PIM multicast scenario, if PIM entries are generated using ECMP for unicast routes, the upstream interface of a PIM entry is selected based on the next-hop IP address of the unicast route. The interface with the largest next-hop IP address is selected as the upstream interface. In this scenario, the selection of the upstream inbound interface depends on the next-hop IP address, which is not flexible. In this case, you can configure the PIM ECMP priority function. After the PIM ECMP priority function is configured, the device selects the upstream inbound interface based on the PIM ECMP priority. The interface with the highest PIM ECMP priority is selected as the upstream inbound interface.</li></ul>
<p><strong>Prerequisites</strong></p>
<p>The <b><span class="cmdname">multicast routing-enable</span></b> command is run in the public network instance view or the VPN instance view.</p>
<p><strong>Precautions</strong></p>
<ol><li>The PIM ECMP priority function takes effect only after PIM-SM is enabled on an interface.</li><li>This configuration takes effect only when the unicast routes to the multicast source or RP on inbound interfaces are ECMP routes.</li><li>There is no default PIM ECMP priority. In common PIM multicast, the PIM ECMP priority takes effect only when it is configured on two or more ECMP route interfaces. In PIM FRR scenarios, the PIM ECMP priority takes effect only when it is configured on both the primary and backup inbound interfaces. If more than two ECMP inbound interfaces need to be planned, you need to configure PIM ECMP priorities for all these inbound interfaces so that inbound interfaces can be selected based on priorities when routes change.</li><li>Inbound interfaces configured with PIM ECMP priorities do not support multicast load splitting.</li><li>After the PIM ECMP priority is configured, PIM entries are reconverged. After the PIM ECMP priority is configured on the multicast source DR, the PIM entry on the multicast source DR contains the registration outbound interface for a short period of time.</li></ol>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942845513__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the PIM ECMP priority of <span>100GE</span><span>1/0/1</span> to 10.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>multicast routing-enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span><span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>pim sm</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>pim ecmp-priority 10</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IPv4_PIM_Configuration_Commands_title.html">PIM Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PIM-DM(PIMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PIM-IPV4-SM_1(PIMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>