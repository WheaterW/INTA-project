
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer connect-interface (BGP multi-instance VPN instance IPv4 address family view) (group)">
<meta name="DC.subject" content="peer connect-interface (BGP multi-instance VPN instance IPv4 address family view) (group)">
<meta name="keywords" content="peer connect-interface (BGP multi-instance VPN instance IPv4 address family view) (group)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-INSTANCE-GROUP-CONNECT-INTERFACE(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-VRF-PEER-CONNECT-INTERFACE(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942844521">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer connect-interface (BGP multi-instance VPN instance IPv4 address family view) (group)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942844521"></a><a name="EN-US_CLIREF_0000001942844521"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer connect-interface (BGP multi-instance VPN instance IPv4 address family view) (group)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942844521__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer connect-interface</span></b> command specifies a source interface from which BGP packets are sent, and a source address used for initiating a connection.</p>
<p>The <b><span class="cmdname">undo peer connect-interface</span></b> command restores the default setting.</p>
</p>
<p>By default, the outbound interface of a BGP packet serves as the source interface of a BGP packet.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942844521__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">group-name</span></i> <strong><span>connect-interface</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">ipv4-source-addr</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> <i><span class="varname">ipv4-source-addr</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> <i><span class="varname">ipv4-source-addr</span></i> }</p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">group-name</span></i> <strong><span>connect-interface</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942844521__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">group-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a peer group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The name is a string of 1 to 47 case-sensitive characters, with spaces not supported. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an interface name.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ipv4-source-addr</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an IPv4 source address used for establishing a connection.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-type</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the type of an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an interface number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 63  case-sensitive characters, spaces not supported.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942844521__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP multi-instance VPN instance IPv4 address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942844521__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942844521__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>It is recommended that you run the <b><span class="cmdname">peer connect-interface</span></b> command when two devices establish multiple peer groups through multiple links.<p></p>
<span>If a physical interface is configured with multiple</span> IP addresses, you must specify ipv4-source-address in the <b><span class="cmdname">peer connect-interface</span></b> command.</p>
</p>
<p><strong>Prerequisites</strong></p>
<p><p>The corresponding peer group relationship has been established using the <b><span class="cmdname">group</span></b> command.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<p><p>If the <strong>peer connect-interface</strong> or <strong>undo peer connect-interface</strong> command is run, the peer session is disconnected and then re-established. Therefore, exercise caution when running this command.<p></p>
<span>BGP in all address families on a device shares a TCP</span> connection. Therefore, the connect-interface information configured in the BGP view can be inherited by both the IPv4 unicast address family and VPNv4 address family.</p>
</p>
<p><strong>Precautions</strong></p>
<div class="p"><p>To enable a device to send BGP messages even if a physical interface fails, you can configure a loopback interface as the source interface for sending BGP messages. When the loopback interface is used as the source interface for sending BGP messages to the peer, pay attention to the following points:</p>

<ul><li>Ensure that the loopback interface address of the BGP peer is reachable.</li><li>In the case of an EBGP connection, you also need to run the <b><span class="cmdname">peer ebgp-max-hop</span></b> command to allow EBGP to establish the peer relationship in indirect mode.</li></ul>

<p>Note:<p></p>
<span>If the specified interface borrows the IP address</span> of another interface and the IP address is changed, BGP still uses the borrowed IP address to maintain the connection and can send and receive data normally if BGP is not triggered to re-establish the connection. If the re-establishment of the connection is triggered, BGP uses the new IP address to establish the connection.<p></p>
<span>By default</span>, an interface on a device is a Layer 3 interface. After you run the <b><span class="cmdname">peer connect-interface</span></b> command to specify an interface, changing the interface type to Layer 2 may affect Layer 3 services. Therefore, exercise caution when changing the interface type.</p>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942844521__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Specify a source interface for sending BGP packets for initiating a connection.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface LoopBack 0</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-LoopBack0] <strong>ip address 10.1.1.1 32</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-LoopBack0] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>route-distinguisher 100:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>vpn-target 111:1 both</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-instance-vpna] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100 instance a</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a] <strong>ipv4-family vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a-vpna] <strong>group test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a-vpna] <strong>peer test connect-interface LoopBack 0</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/BGP-MULI-INSTANCE-GROUP-CONNECT-INTERFACE(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BGP-MULI-VRF-PEER-CONNECT-INTERFACE(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>