
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer keep-all-routes (BGP-IPv6 unicast address family view)">
<meta name="DC.subject" content="peer keep-all-routes (BGP-IPv6 unicast address family view)">
<meta name="keywords" content="peer keep-all-routes (BGP-IPv6 unicast address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PEER-IPV6-KEEP-ALL-ROUTES-IPV4UNICAST(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/GROUP-IPV6-KEEP-ALL-ROUTES(BGPIPV6).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPIPV6">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907604524">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer keep-all-routes (BGP-IPv6 unicast address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907604524"></a><a name="EN-US_CLIREF_0000001907604524"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer keep-all-routes (BGP-IPv6 unicast address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907604524__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer keep-all-routes</span></b> command saves all the BGP routing updates from the specified peer or the peer group after the BGP connection is set up, even though those routes do not pass the configured ingress policy.</p>
<p>The <b><span class="cmdname">undo peer keep-all-routes</span></b> command disables this function.</p>
</p>
<p>By default, only the BGP routing updates received from the peers and passing the configured ingress policy are saved.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907604524__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">ipv4-address</span></i> <strong><span>keep-all-routes</span></strong></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">ipv4-address</span></i> <strong><span>keep-all-routes</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907604524__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ipv4-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an IPv4 peer address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907604524__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-IPv6 unicast address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907604524__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907604524__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>After changing a BGP import policy, you can reset BGP connections for the new import policy to take effect immediately, interrupting these BGP connections temporarily. If a device's peer does not support route-refresh, the <b><span class="cmdname">peer keep-all-routes</span></b> command can be used on the device to remain all routing updates received from the peer so that the device can refresh its routing table without closing the connection with the peer.</p>
<p><strong>Implementation Procedure</strong></p>
<p>If the <b><span class="cmdname">peer keep-all-routes</span></b> command is run but no peer exists, a message is displayed, indicating that the peer does not exist.</p>
<p><strong>Precautions</strong></p>
<p>If the route does not support the route-refresh capability, the <b><span class="cmdname">peer keep-all-routes</span></b> command needs to be run on the route and its peer. If the <b><span class="cmdname">peer keep-all-routes</span></b> command is run on a device for the first time, the sessions between the device and its peers will be re-established.<p></p>
<span>If the route supports the route-refresh capability</span>, running this command does not result in re-establishment of the sessions between the route and its peers. After the <b><span class="cmdname">refresh bgp</span></b> command is run on the route, however, the route does not refresh its routing table.<p></p>
<span>After the</span> <b><span class="cmdname">keep-all-routes</span></b> command is run, the <b><span class="cmdname">undo peer keep-all-routes</span></b> command becomes ineffective. To have the <b><span class="cmdname">undo peer keep-all-routes</span></b> command become effective, run the <b><span class="cmdname">undo keep-all-routes</span></b> command and then the <b><span class="cmdname">peer keep-all-routes</span></b> command.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907604524__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a device to save all BGP routing updates received from its peers.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer 1.1.1.1 as-number 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv6-family unicast</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv6] <strong>peer 1.1.1.1 enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv6] <strong>peer 1.1.1.1 keep-all-routes</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PEER-IPV6-KEEP-ALL-ROUTES-IPV4UNICAST(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/GROUP-IPV6-KEEP-ALL-ROUTES(BGPIPV6).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>