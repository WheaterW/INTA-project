
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="keepalive (Tunnel interface view)">
<meta name="DC.subject" content="keepalive (Tunnel interface view)">
<meta name="keywords" content="keepalive (Tunnel interface view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_GRE_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DISPKPALIVEPKTCNT(GREOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/MTU_CHECK_ENABLE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="GRE">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="GRE">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="GRE">
<meta name="featuretype" content="VPN">
<meta name="featuretype" content="VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Creator" content="SUBSYS_ID_GREOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907766736">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>keepalive (Tunnel interface view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907766736"></a><a name="EN-US_CLIREF_0000001907766736"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">keepalive (Tunnel interface view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907766736__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">keepalive</span></b> command enables the Keepalive function for a GRE tunnel.</p>
<p>The <b><span class="cmdname">undo keepalive</span></b> command disables the Keepalive function for a GRE tunnel.</p>
</p>
<p>By default, the Keepalive function of a GRE tunnel is disabled.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907766736__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">keepalive </span></b>[ <strong><span>period</span></strong> <i><span class="varname">period</span></i> [ <strong><span>retry-times</span></strong> <i><span class="varname">retry-times</span></i> ] ]</p>

<p><b><span class="cmdname">undo keepalive </span></b>[ <strong><span>period</span></strong> <i><span class="varname">period</span></i> [ <strong><span>retry-times</span></strong> <i><span class="varname">retry-times</span></i> ] ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907766736__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>period</span></strong> <i><span class="varname">period</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the interval for sending Keepalive messages.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 32767, in seconds. The default value is 5.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>retry-times</span></strong> <i><span class="varname">retry-times</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the count of the unreachable counter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255. The default value is 3.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907766736__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Tunnel interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907766736__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907766736__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>To prevent an unavailable GRE tunnel from being selected to transmit packets, enable the Keepalive function for GRE tunnels. Before the Keepalive function is enabled, the local tunnel interface may be Up even if the peer tunnel interface is unreachable. After the Keepalive function is enabled, the local tunnel interface goes Down if the peer tunnel interface is unreachable.<p></p>
<span>After the Keepalive function is enabled on a GRE tunnel</span>, the tunnel periodically sends Keepalive messages. The unreachable counter increases by one each time a message is sent. If no Keepalive response message is received when the value of the counter reaches the configured retry-times, the peer is considered unreachable.<p></p>
<span>The Keepalive function immediately takes effect after</span> the <b><span class="cmdname">keepalive</span></b> command is run on a GRE tunnel interface. The <b><span class="cmdname">undo keepalive</span></b> command disables this function.</p>
<p><strong>Prerequisites</strong></p>
<p>A tunnel interface has been created using the <b><span class="cmdname">interface tunnel</span></b> command.<p></p>
<span>The tunnel encapsulation type has been set to GRE</span> using the <b><span class="cmdname">tunnel-protocol gre</span></b> command.</p>
<p><strong>Configuration Impact</strong></p>
<p>If the <b><span class="cmdname">keepalive</span></b> command is run more than once, the latest configuration overrides the previous one.</p>
<p><strong>Follow-up Procedure</strong></p>
<p>After configuring the Keepalive function, you can run the <b><span class="cmdname">display keepalive packets count</span></b> command to check the numbers of Keepalive messages and Keepalive response messages sent and received by a GRE tunnel interface.</p>
<p><strong>Precautions</strong></p>
<p>The keepalive function is unidirectional. To enable the keepalive function on both ends of a tunnel, run the <b><span class="cmdname">keepalive</span></b> command on each end of the tunnel. The keepalive configuration takes effect on one end even if the function is disabled on the other end. However, it is recommended that you enable the keepalive function on both ends.<p></p>
<span>Using the default values for the interval at which</span> Keepalive packets are sent and the unreachability counter are recommended.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907766736__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable the Keepalive function for the GRE tunnel using default parameters.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface tunnel 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Tunnel100] <strong>tunnel-protocol gre</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Tunnel100] <strong>keepalive</strong>
</pre>
</div>

<div class="p"># Enable the Keepalive function for the GRE tunnel. Specify the interval for sending Keepalive messages as 12 seconds and configure the unreachable counter to use default parameters.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface tunnel 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Tunnel100] <strong>tunnel-protocol gre</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Tunnel100] <strong>keepalive period 12</strong>
</pre>
</div>

<div class="p"># Enable the Keepalive function for the GRE tunnel. Specify the interval for sending Keepalive messages as 12 seconds and set the retry-times to 4.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface tunnel 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Tunnel100] <strong>tunnel-protocol gre</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Tunnel100] <strong>keepalive period 12 retry-times 4</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_GRE_Configuration_Commands_title.html">GRE Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/DISPKPALIVEPKTCNT(GREOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/MTU_CHECK_ENABLE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>