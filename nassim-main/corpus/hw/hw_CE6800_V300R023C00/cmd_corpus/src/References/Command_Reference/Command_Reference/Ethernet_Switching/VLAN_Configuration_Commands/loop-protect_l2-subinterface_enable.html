
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="loop-protect l2-subinterface enable">
<meta name="DC.subject" content="loop-protect l2-subinterface enable">
<meta name="keywords" content="loop-protect l2-subinterface enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_VLAN_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IFPOLICYSUBVLAN(VLANOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IFPOLICYVLAN(VLANOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_VLANOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907761816">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>loop-protect l2-subinterface enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907761816"></a><a name="EN-US_CLIREF_0000001907761816"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">loop-protect l2-subinterface enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907761816__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">loop-protect l2-subinterface enable</span></b> command enables Layer 2 sub-interfaces to inherit the blocked/forwarding status of the main interface.</p>
<p>The <b><span class="cmdname">undo loop-protect l2-subinterface enable</span></b> command disables Layer 2 sub-interfaces from inheriting the blocked/forwarding status of the main interface.</p>
</p>
<p>By default, Layer 2 sub-interfaces do not inherit the blocked/forwarding status of the main interface.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907761816__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">loop-protect l2-subinterface enable</span></b></p>

<p><b><span class="cmdname">undo loop-protect l2-subinterface enable</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907761816__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907761816__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Layer 2 100GE interface view,</span><span>Layer 2 10GE interface view,</span><span>Layer 2 200GE interface view,</span><span>25GE-L2 view,</span><span>400GE-L2 view,</span><span>Layer 2 50GE interface view,</span><span>Layer 2 Eth-Trunk interface view,</span><span>Layer 2 GE interface view,</span><span>Interface group view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907761816__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907761816__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>To prevent or eliminate loops on a complex Layer 2 network, STP, RSTP, or MSTP can be configured on the device.<p></p>
<span>Running the</span> <b><span class="cmdname">stp enable</span></b> command enables STP/RSTP/MSTP. The devices running STP/RSTP/MSTP discover loops on the network by exchanging information with each other, so that the ring topology can be trimmed into a loop-free tree topology by blocking a certain interface. In this manner, replication and circular propagation of packets are prevented on the network. In addition, the processing performance of devices is prevented from deteriorating.<p></p>
<span>If you want Layer 2 sub-interfaces to be blocked when</span> their main interface is blocked due to loops, run the <b><span class="cmdname">loop-protect l2-subinterface enable</span></b> command to enable the Layer 2 sub-interfaces to inherit the blocked/forwarding status of the main interface.</p>
<p><strong>Prerequisites</strong></p>
<p>Basic STP/RSTP functions have been configured.</p>
<p><strong>Precautions</strong></p>
<p>The <b><span class="cmdname">loop-protect l2-subinterface enable</span></b> command can be applied only to STP and RSTP scenarios and cannot work with MSTP or VBST. If MSTP or VBST is enabled, the device displays an error message when you run the <b><span class="cmdname">loop-protect l2-subinterface enable</span></b> command.<p></p>
<span>The</span> <b><span class="cmdname">loop-protect l2-subinterface enable</span></b> command can be run only for Layer 2 interfaces. To run the command for a Layer 3 interface, run the <b><span class="cmdname">portswitch</span></b> command to switch the interface to a Layer 2 interface first.<p></p>
<span>Currently</span>, only Layer 2 dot1q and QinQ sub-interfaces can inherit the loop status of the main interface.<p></p>
<span>A Layer 2 sub-interface cannot be configured to inherit</span> the loop status of its main interface in the following situation:</p>

<ul><li>A physical interface has been added to an Eth-Trunk interface.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907761816__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable the sub-interfaces of the Layer 2 interface to inherit the blocked/forwarding status of <span>100GE</span> .<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>stp mode rstp</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>loop-protect l2-subinterface enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_VLAN_Configuration_Commands_title.html">VLAN Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/IFPOLICYSUBVLAN(VLANOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/IFPOLICYVLAN(VLANOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>