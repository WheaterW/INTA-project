
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="nexthop (ICMP Ping test instance)">
<meta name="DC.subject" content="nexthop (ICMP Ping test instance)">
<meta name="keywords" content="nexthop (ICMP Ping test instance)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_NQA_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/UDPJITTERPACKETNUM(NQAIP4OM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/TRACENEXTHOP(NQAIP4OM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Creator" content="SUBSYS_ID_NQAIP4OM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907768756">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>nexthop (ICMP Ping test instance)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907768756"></a><a name="EN-US_CLIREF_0000001907768756"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">nexthop (ICMP Ping test instance)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907768756__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">nexthop</span></b> command configures a next-hop IP address for an NQA ping test instance.</p>
<p>The <b><span class="cmdname">undo nexthop</span></b> command deletes the configured next-hop IP address.</p>
</p>
<p>By default, a device searches the routing table for the next-hop IP address during packet sending.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907768756__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">nexthop ipv4 </span></b><i><span class="varname">ipv4Address</span></i></p>

<p><b><span class="cmdname">nexthop ipv6 </span></b><i><span class="varname">ipv6Address</span></i></p>

<p><b><span class="cmdname">undo nexthop</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907768756__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv6</span></strong> <i><span class="varname">ipv6Address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a next hop IPv6 address on an ingress.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The address is a 32-digit hexadecimal number, in the format of X:X:X:X:X:X:X:X.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv4</span></strong> <i><span class="varname">ipv4Address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a next hop IP address on an ingress.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907768756__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>NQA view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907768756__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907768756__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>In a scenario where NQA is associated with static routes, if a link is faulty, the NQA ICMP test fails, and the associated static route goes Down. As the device needs to search the routing table when sending ICMP test packets, the ICMP test still fails even if the link fault is rectified. In addition, the associated static route keeps being Down, and service traffic cannot be switched back to the original link.<p></p>
<span>To resolve this problem</span>, specify a next-hop IP address for the ICMP test packets so that the packets can be properly sent after the link fault is rectified. This configuration also causes the test to succeed and the associated static route to go Up.</p>
<p><strong>Configuration Impact</strong></p>
<p>After a next-hop IP address is specified, test packets are directly sent based on the IP address, freeing the device from searching the routing table for packet sending.</p>
<p><strong>Precautions</strong></p>
<p>When specifying a next-hop IP address, run the <b><span class="cmdname">source-interface</span></b> command to specify an outbound interface. In this situation, the test must meet the following conditions. Otherwise, the test fails.</p>

<ul><li>The specified next-hop IP address and outbound interface match each other.</li><li>The specified outbound interface cannot be a member interface of a logical interface.<p></p>
<span>No VPN is specified when you specify a next-hop IP</span> address.<p></p>
<span>No simulated inbound interface is specified when you</span> specify a next-hop IP address.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907768756__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Specify a next-hop IP address.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>nqa test-instance user test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-nqa-user-test] <strong>test-type icmp</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-nqa-user-test] <strong>nexthop ipv4 10.1.1.1</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_NQA_Configuration_Commands_title.html">NQA Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/UDPJITTERPACKETNUM(NQAIP4OM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/TRACENEXTHOP(NQAIP4OM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>