
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="reset bgp flap-info">
<meta name="DC.subject" content="reset bgp flap-info">
<meta name="keywords" content="reset bgp flap-info">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-RESET-BGP-DAMPENING(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-RESET(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907765480">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>reset bgp flap-info</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907765480"></a><a name="EN-US_CLIREF_0000001907765480"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">reset bgp flap-info</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907765480__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">reset bgp flap-info</span></b> command clears route flapping statistics.</p>
</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907765480__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">reset bgp </span></b>[ <strong><span>instance</span></strong> <i><span class="varname">instance-name</span></i> ] [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <strong><span>ipv4-family</span></strong> ] <strong><span>flap-info</span></strong> <i><span class="varname">network-address</span></i> [ <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> ]</p>

<p><b><span class="cmdname">reset bgp </span></b>[ <strong><span>instance</span></strong> <i><span class="varname">instance-name</span></i> ] [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <strong><span>ipv4-family</span></strong> ] <i><span class="varname">ipv4-address</span></i> <strong><span>flap-info</span></strong></p>

<p><b><span class="cmdname">reset bgp </span></b>[ <strong><span>instance</span></strong> <i><span class="varname">instance-name</span></i> ] [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <strong><span>ipv4-family</span></strong> ] <strong><span>flap-info</span></strong></p>

<p><b><span class="cmdname">reset bgp </span></b>[ <strong><span>instance</span></strong> <i><span class="varname">instance-name</span></i> ] [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <strong><span>ipv4-family</span></strong> ] <strong><span>flap-info</span></strong> <strong><span>as-path-filter</span></strong> { <i><span class="varname">as-path-filter-number</span></i> | <i><span class="varname">as-path-filter-name</span></i> }</p>

<p><b><span class="cmdname">reset bgp </span></b>[ <strong><span>instance</span></strong> <i><span class="varname">instance-name</span></i> ] [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <strong><span>ipv4-family</span></strong> ] <strong><span>flap-info</span></strong> <strong><span>regexp</span></strong> <i><span class="varname">as-path-regexp</span></i></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907765480__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>instance</span></strong> <i><span class="varname">instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a BGP multi-instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters without any spaces. The character string can contain spaces if it is enclosed with double quotation marks (").</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Clears the route flapping information of a specified VPN instance enabled with an IPv4 address family.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters, spaces not supported. In addition, the VPN instance name cannot be _public_. If the string is enclosed in double quotation marks (" "), the string can contain spaces..</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv4-family</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the IPv4 address family.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">network-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the network address of an IPv4 peer.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">mask</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the network mask that is used to filter the BGP IPv4 routes. If neither of the mask nor mask length is specified, the address is considered as a classful address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">mask-length</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the network mask length that is used to filter the BGP IPv4 routes. If neither of the mask nor mask length is specified, the address is considered as a classful address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer in the range from 0 to 32.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ipv4-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an IPv4 peer address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>as-path-filter</span></strong> <i><span class="varname">as-path-filter-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Clears route flapping statistics based on a specified AS_Path filter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 256.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">as-path-filter-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Clears route flapping statistics based on a specified AS_Path filter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 51 case-sensitive characters. If spaces are used, the string must start and end with double quotation marks (").</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>regexp</span></strong> <i><span class="varname">as-path-regexp</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Clear statistics about the flapping routes that match the AS_Path regular expression.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 80 case-sensitive characters with spaces supported.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907765480__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>User view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907765480__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907765480__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>The process of adding a route to and then deleting the route from a routing table is called route flapping.<p></p>
<span>When route flapping occurs</span>, the routing protocol sends Update packets to neighbors. The neighbors that receive the Update packets need to recalculate routes and modify its routing table. Therefore, frequent route flapping consumes great bandwidth and CPU resources and even seriously affects network operations.<p></p>
<span>The</span> <b><span class="cmdname">reset bgp flap-info</span></b> command is used to clear the flapping information about routes. This allows the device to re-collect statistics about flapping routes and helps to monitor route changes and locate network problems.</p>
</p>
<p><strong>Prerequisites</strong></p>
<p><p>You can use <b><span class="cmdname">display bgp routing-table flap-info</span></b> command to view the information about BGP route flapping.<p></p>
<span>If there are a large number of flapping routes</span>, define an AS_Path filter or an AS_Path regular expression to be referenced in the <b><span class="cmdname">reset bgp flap-info</span></b> command. The flapping statistics of the routes matching the AS_Path filter or the AS_Path regular expression are then cleared.</p>
</p>
<p><strong>Follow-up Procedure</strong></p>
<p><p>After the flapping statistics of routes are cleared, you can run the <b><span class="cmdname">display bgp routing-table flap-info</span></b> command again to view the flapping statistics of BGP routes to locate the fault.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907765480__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Clear the flapping statistics about the routes that match AS_Path filter 10.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>reset bgp flap-info as-path-filter 10</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/BGP-MULI-RESET-BGP-DAMPENING(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BGP-MULI-RESET(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>