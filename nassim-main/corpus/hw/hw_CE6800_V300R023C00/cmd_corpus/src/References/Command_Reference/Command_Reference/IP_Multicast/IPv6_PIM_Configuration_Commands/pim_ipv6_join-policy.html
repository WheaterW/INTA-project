
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="pim ipv6 join-policy">
<meta name="DC.subject" content="pim ipv6 join-policy">
<meta name="keywords" content="pim ipv6 join-policy">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IPv6_PIM_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PIM-IPV6-SM_8(PIMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PIM-IPV6-SM_12(PIMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Creator" content="SUBSYS_ID_PIMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907766612">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>pim ipv6 join-policy</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907766612"></a><a name="EN-US_CLIREF_0000001907766612"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">pim ipv6 join-policy</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907766612__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">pim ipv6 join-policy</span></b> command enables an interface to filter join information in IPv6 Join/Prune messages.</p>
<p>The <b><span class="cmdname">undo pim ipv6 join-policy</span></b> command restores the default configuration.</p>
</p>
<p>By default, an interface does not filter join information in IPv6 Join/Prune messages.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907766612__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">pim ipv6 join-policy </span></b>{ <i><span class="varname">jpPolicyAclNum</span></i> | { <strong><span>acl6-name</span></strong> <i><span class="varname">jpPolicyName</span></i> } | { <strong><span>asm</span></strong> { <i><span class="varname">joinPruneAsmPolicyAclNum</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">jpAsmPolicyName</span></i> } | <strong><span>ssm</span></strong> { <i><span class="varname">joinPruneSsmPolicyAclNum</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">jpSsmPolicyName</span></i> } } }</p>

<p><b><span class="cmdname">undo pim ipv6 join-policy</span></b></p>

<p><b><span class="cmdname">undo pim ipv6 join-policy ssm</span></b></p>

<p><b><span class="cmdname">undo pim ipv6 join-policy asm</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907766612__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">jpPolicyAclNum</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of an advanced IPv6 ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 3000 to 3999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl6-name</span></strong> <i><span class="varname">jpPolicyName</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a named IPv6 ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters without spaces.The name must start with a letter or digit, and cannot contain only digits.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>asm</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables an interface to filter join information of group addresses in the ASM address range.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">joinPruneAsmPolicyAclNum</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of a basic ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 2000 to 2999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">jpAsmPolicyName</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a named IPv6 ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters without spaces.The name must start with a letter or digit, and cannot contain only digits.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ssm</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables an interface to filter join information sent by specified source addresses to group addresses in the SSM address range.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">joinPruneSsmPolicyAclNum</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of an advanced IPv6 ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 3000 to 3999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">jpSsmPolicyName</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a named IPv6 ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters without spaces.The name must start with a letter or digit, and cannot contain only digits.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907766612__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100ge sub-interface view,</span><span>100GE interface view,</span><span>10GE sub-interface view,</span><span>10GE interface view,</span><span>200GE sub-interface view,</span><span>200GE interface view,</span><span>25GE sub-interface view,</span><span>25GE interface view,</span><span>400GE sub-interface view,</span><span>400GE interface view,</span><span>50GE sub-interface view,</span><span>50GE interface view,</span><span>Eth-Trunk sub-interface view,</span><span>Eth-Trunk interface view,</span><span>Loopback interface view,</span><span>VLANIF interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907766612__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907766612__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>To protect a Router against IPv6 Join/Prune message attacks, run the pim ipv6 join-policy command to configure a join information filter policy by setting valid source and group address ranges for IPv6 Join/Prune messages. The policy enables the Router to discard join information that does not match the specified filter policy.</p>
<p><strong>Precautions</strong></p>
<p>The command can be used to filter PIM Join messages in either of the following modes:(1) The pim ipv6 join-policy { asm { &lt;basic-acl6-number&gt; | acl6-name &lt;acl6-name&gt; } | ssm { &lt;advanced-acl6-number&gt; | acl6-name &lt;acl6-name&gt; } } command filters PIM Join messages with multicast group addresses in the ASM or SSM address range. If PIM Join messages with multicast group addresses in the ASM address range need to be filtered, the asm parameter must be specified in the command. If PIM Join messages with multicast group addresses in the SSM address range need to be filtered, the ssm parameter must be specified in the command.(2) The pim ipv6 join-policy {&lt;advanced-acl6-number&gt; | acl6-name &lt;acl6-name&gt; } } command filters PIM Join messages with multicast group addresses both in the ASM and SSM address ranges.The precautions for configuring filtering rules are as follows:When configuring filtering rules for an advanced ACL or a named ACL:<p></p>
<span>For the rules used to filter PIM Join messages with</span> multicast group addresses in the ASM address range:<p></p>
(1) To filter (*, G) PIM Join messages, the source address in the ACL rule must be set to 0::0 or any, and the destination address must be set to the multicast group address based on which the messages are to be filtered.<p></p>
(2) To filter (S, G) PIM Join messages:<p></p>
<span>In an ACL rule</span>, if the source address is set to a multicast source address and the destination address is set to a multicast group address, the messages are filtered based on the multicast source address and multicast group address.<p></p>
<span>In an ACL rule</span>, if the source address is set to a multicast source address and the destination address is set to any, the messages are filtered based on the multicast source address.<p></p>
<span>In an ACL rule</span>, if the source address is set to any and the destination address is set to a multicast group address, the messages are filtered based on the multicast group address.<p></p>
(3) The filtering rules do not take effect on (S, G, RPT) PIM Join messages.For the rules used to filter PIM Join messages with multicast group addresses in the SSM address range:<p></p>
(1) To filter (S, G) PIM Join messages:<p></p>
<span>In an ACL rule</span>, if the source address is set to a multicast source address and the destination address is set to a multicast group address, the messages are filtered based on the multicast source address and multicast group address.<p></p>
<span>In an ACL rule</span>, if the source address is set to a multicast source address and the destination address is set to any, the messages are filtered based on the multicast source address.<p></p>
<span>In an ACL rule</span>, if the source address is set to any and the destination address is set to a multicast group address, the messages are filtered based on the multicast group address.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907766612__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># In the public network instance, configure <span>100GE</span><span>1/0/1</span> to accept the join information with the group address FF25::1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl ipv6 number 2001</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl6-basic-2001] <strong>rule permit source ff25::1 128</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl6-basic-2001] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>multicast ipv6 routing-enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>pim ipv6 join-policy asm 2001</strong>
</pre>
</div>

<div class="p"># In the public network instance, use a named ACL6 to configure <span>100GE</span><span>1/0/1</span> to accept the join information with the source address 2001:db8:4::4 and group address FF35::1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl ipv6 name myacl</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl6-advance-myacl] <strong>rule permit ipv6 source 2001:db8:4::4 128 destination ff35::1 128</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl6-advance-myacl] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>multicast ipv6 routing-enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>pim ipv6 join-policy ssm acl6-name myacl</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IPv6_PIM_Configuration_Commands_title.html">IPv6 PIM Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PIM-IPV6-SM_8(PIMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PIM-IPV6-SM_12(PIMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>