
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ip vpn-instance(System view)">
<meta name="DC.subject" content="ip vpn-instance(System view)">
<meta name="keywords" content="ip vpn-instance(System view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_MPLS_IP_VPN_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DRIMPORTRTSYS(DIRECTRTOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IPV4-FAMILY-UNICAST(L3VPNOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv4 L3VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="IPv4 L3VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="IPv4 L3VPN">
<meta name="featuretype" content="VPN">
<meta name="featuretype" content="VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Creator" content="SUBSYS_ID_L3VPNOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907606852">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ip vpn-instance(System view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907606852"></a><a name="EN-US_CLIREF_0000001907606852"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">ip vpn-instance(System view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907606852__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ip vpn-instance</span></b> command creates a VPN instance and displays the VPN instance view.</p>
<p>The <b><span class="cmdname">undo ip vpn-instance</span></b> command deletes a specified VPN instance.</p>
</p>
<p>By default, no VPN instance is created.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907606852__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">ip vpn-instance </span></b><i><span class="varname">vpn-instance-name</span></i></p>

<p><b><span class="cmdname">undo ip vpn-instance </span></b><i><span class="varname">vpn-instance-name</span></i></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907606852__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a VPN instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of 1 to 31 case-sensitive characters, spaces not supported. In addition, the VPN instance name must not be _public_. When double quotation marks are used around the string, spaces are allowed in the string.</p>
<p>_public_ refers to a public network VPN instance.</p>
</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907606852__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907606852__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907606852__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>If private network data needs to travel across a public network, you must configure VPN instances on public network PEs.<p></p>
<span>VPN instances are required for all L3VPN configurations</span>.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<p><p>After the ip vpn-instance command is run on a PE, a virtual routing table is created on the PE and consumes resources on the PE.<p></p>
<span>After the</span> <b><span class="cmdname">undo ip vpn-instance</span></b> command is used to delete a VPN instance, all the configurations of this VPN instance are deleted.</p>
</p>
<p><strong>Follow-up Procedure</strong></p>
<div class="p"><p>After creating a VPN instance, perform the following configurations in the VPN instance view:</p>

<ul><li>Enable the IPv4 or IPv6 address family for the VPN instance. A VPN instance supports the IPv4 and IPv6 address families. You need to run the ipv4-family (VPN instance view) or ipv6 family (VPN instance view) command to enable the IPv4 or IPv6 address family based on the type of the protocol stack used to advertise VPN routes in the VPN instance.</li><li>Configure a Route Distinguisher (RD) for the IPv4 or IPv6 address family of the VPN instance. You are allowed to perform VPN configurations in the address family view only after using the <b><span class="cmdname">route-distinguisher</span></b> command to configure an RD for the address family.</li><li>Configure a VPN target for the IPv4 or IPv6 address family of the VPN instance using the <b><span class="cmdname">vpn-target</span></b> command. VPN targets control route learning between VPN instances.</li><li>Bind the VPN instance to a VPN-connected interface on the PE using the <b><span class="cmdname">ip binding vpn-instance</span></b> command.</li></ul>
</div>
<p><strong>Precautions</strong></p>
<p><p>After a VPN instance is deleted using the <b><span class="cmdname">undo ip vpn-instance</span></b> command, configurations in the VPN instance as well as the VPN instance-related configurations in the BGP view will be deleted. Exercise caution when you run this command.<p></p>
<span>When the</span> <b><span class="cmdname">undo ip vpn-instance</span></b> command is run to delete a VPN instance, if a large number of routes are imported between VPN and public network instances, the commit operation may time out, but the VPN instance data can be correctly deleted.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907606852__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Create a VPN instance named vrf1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vrf1</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_MPLS_IP_VPN_Configuration_Commands_title.html">IPv4 L3VPN Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/DRIMPORTRTSYS(DIRECTRTOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/IPV4-FAMILY-UNICAST(L3VPNOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>