
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="cpu-defend host-car pps">
<meta name="DC.subject" content="cpu-defend host-car pps">
<meta name="keywords" content="cpu-defend host-car pps">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-Local_Attack_Defense_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CPU-DEFEND_HOST-CAR_ENABLE.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CPU-DEFEND_LOCAL-HOST_ANTI-ATTACK_ENABLE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="DC.Creator" content="SUBSYS_ID_CPUDEFEND">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942847153">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>cpu-defend host-car pps</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942847153"></a><a name="EN-US_CLIREF_0000001942847153"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">cpu-defend host-car pps</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942847153__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">cpu-defend host-car pps</span></b> command sets the rate limit for the user-level rate limiting.</p>
<p>The <b><span class="cmdname">undo cpu-defend host-car</span></b> command restores the default rate limit for the user-level rate limiting.</p>
</p>
<p>By default, the rate limit for the user-level rate limiting is 10 pps.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942847153__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">cpu-defend host-car </span></b>[ <strong><span>mac-address</span></strong> <i><span class="varname">mac-address</span></i> | <strong><span>car-id</span></strong> <i><span class="varname">car-id</span></i> ] <strong><span>pps</span></strong> <i><span class="varname">pps-value</span></i></p>


<p><b><span class="cmdname">undo cpu-defend host-car </span></b>[ <strong><span>mac-address</span></strong> <i><span class="varname">mac-address</span></i> | <strong><span>car-id</span></strong> <i><span class="varname">car-id</span></i> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942847153__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>mac-address</span></strong> <i><span class="varname">mac-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the rate limit for the specified MAC address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in the format of H-H-H.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>car-id</span></strong> <i><span class="varname">car-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the rate limit for the specified bucket.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 8191.</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pps</span></strong> <i><span class="varname">pps-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the rate limit, in pps.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 1 to 128. The default value is 10.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942847153__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942847153__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942847153__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>User-level rate limiting identifies users based on user MAC addresses and rate-limits specified user packets (ARP, ND, DHCP Request, and DHCPv6 Request packets). By default, the user-level rate limit is 10 pps. You can set different rate limits for different users.</p>
</p>
<p><strong>Precautions</strong></p>
<ul><li>Before using this command, run the <strong>cpu-defend host-car enable</strong> command to enable user-level rate limiting.</li><li>If the rate limit is too high, attacks cannot be prevented and CPU may be overloaded.</li><li>If both the <strong>cpu-defend host-car mac-address</strong> &lt;<em>mac-address</em>&gt; <strong>pps</strong> &lt;<em>pps-value</em>&gt; and <strong>cpu-defend host-car pps</strong> &lt;<em>pps-value</em>&gt; commands are run, the rate limit for the specified MAC address is determined by the former command, and the rate limit for other MAC addresses is determined by the latter command.</li><li>The user-level rate limiting performs a hash calculation for the source MAC addresses of specified packets, and places the packets into different buckets. When two user MAC addresses are mapped to the same bucket index, the two users share the same rate limit (in pps mode). If the two users modify the rate limit for the bucket simultaneously, the setting will be overwritten. To avoid this situation, the rate limit for the specified MAC address cannot be set upon hash conflict.</li><li>When the <strong>cpu-defend host-car mac-address</strong> &lt;<em>mac-address</em>&gt; <strong>pps</strong> &lt;<em>pps-value</em>&gt; and <strong>cpu-defend host-car pps</strong> &lt;<em>pps-value</em>&gt; commands are run to configure the rate limit for multiple MAC addresses, the settings are displayed in the alphabetic order in the configuration file.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942847153__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the rate limit for the user with MAC address 00e0-fc12-3456 to 30 pps.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>cpu-defend host-car enable</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>cpu-defend host-car mac-address 00e0-fc12-3456 pps 30</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-Local_Attack_Defense_Configuration_Commands_title.html">Local Attack Defense Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/CPU-DEFEND_HOST-CAR_ENABLE.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/CPU-DEFEND_LOCAL-HOST_ANTI-ATTACK_ENABLE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>