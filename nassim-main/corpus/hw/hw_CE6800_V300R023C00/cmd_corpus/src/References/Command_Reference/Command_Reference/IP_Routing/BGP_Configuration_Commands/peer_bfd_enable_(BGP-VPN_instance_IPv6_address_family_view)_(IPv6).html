
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer bfd enable (BGP-VPN instance IPv6 address family view) (IPv6)">
<meta name="DC.subject" content="peer bfd enable (BGP-VPN instance IPv6 address family view) (IPv6)">
<meta name="keywords" content="peer bfd enable (BGP-VPN instance IPv6 address family view) (IPv6)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/VRF6-GROUP-BFD-ENABLE(BGPVPNBASE).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SESSION-PEER-BFD-ENABLE(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPVPNBASE">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907604180">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer bfd enable (BGP-VPN instance IPv6 address family view) (IPv6)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907604180"></a><a name="EN-US_CLIREF_0000001907604180"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer bfd enable (BGP-VPN instance IPv6 address family view) (IPv6)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907604180__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer bfd enable</span></b> command enables a device to establish a BFD session with its peer using default detection parameter values.</p>
<p>The <b><span class="cmdname">undo peer bfd enable</span></b> command cancels this function.</p>
</p>
<p>By default, a BGP device does not establish any BFD session with its peer.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907604180__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">ipv6-address</span></i> <strong><span>bfd</span></strong> <strong><span>enable</span></strong> [ <strong><span>single-hop-prefer</span></strong> ] [ <strong><span>compatible</span></strong> ]</p>

<p><b><span class="cmdname">peer </span></b><i><span class="varname">ipv6-address</span></i> <strong><span>bfd</span></strong> <strong><span>enable</span></strong> <strong><span>per-link</span></strong> <strong><span>one-arm-echo</span></strong></p>

<p><b><span class="cmdname">peer </span></b><i><span class="varname">ipv6-address</span></i> <strong><span>bfd</span></strong> <strong><span>enable</span></strong> <strong><span>one-arm-echo</span></strong></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">ipv6-address</span></i> <strong><span>bfd</span></strong> <strong><span>enable</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907604180__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ipv6-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv6 address of a peer.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The format is X:X:X:X:X:X:X:X.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>single-hop-prefer</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures the BGP peer to preferentially use the single-hop mode when establishing BFD sessions.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>compatible</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the compatibility mode and sets the TTL value in sent BFD packets to 255.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>per-link</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Establishes a BFD session to monitor the link between member interfaces.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>one-arm-echo</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates a one-arm BFD echo session.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907604180__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-VPN instance IPv6 address family view,</span><span>BGP multi-instance VPN instance IPv6 address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907604180__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907604180__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>BGP uses BFD to quickly detect faults in links between BGP peers. This accelerates network convergence. You can run this command to create a BFD session with default detection parameters for a peer or peer group.<p></p>
<span>If single-hop-prefer is specified</span>, single-hop detection is preferentially used when a BFD session is established between BGP peers. This parameter is used to detect IP connectivity between BGP peers. That is, only one BFD session exists on a specified BGP interface. This parameter is used to ensure that the local and peer ends use the same detection mode when a Huawei device is connected to a non-Huawei device.<p></p>
<span>The per-link one-arm-echo parameter enables one-arm</span> BFD echo for each link. This parameter ensures that the local and peer ends use the same detection mode when a Huawei device is connected to a non-Huawei device.<p></p>
<span>After a peer is added to a peer group</span>, the peer inherits the BFD configuration of the peer group regardless of whether BFD is enabled on the peer. If the peer does not need to inherit the configuration of the peer group, run the <b><span class="cmdname">peer bfd block</span></b> command on the peer to prevent the peer from inheriting the BFD function of the peer group.<p></p>
<span>If neither single-hop-prefer nor compatible is specified</span>, the multi-hop mode is used by default when a BFD session is established between BGP peers, and the TTL value in BFD packets is 253 by default.</p>
</p>
<p><strong>Prerequisites</strong></p>
<p><p>If a BGP peer is in the Established state, after the <b><span class="cmdname">peer bfd enable</span></b> command is run to create a BFD session for the peer, the BFD state machine starts about 1 to 20 seconds later. Before the BFD state machine starts, the BFD session cannot be established.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<p><p>After this command is run, a BFD session with default parameters can be established between peers or peer groups to rapidly detect link faults.<p></p>
<span>The BFD configuration for a peer takes precedence</span> over that for a peer group. If BFD is not configured on a peer and the peer group to which the peer belongs is enabled with BFD, the peer inherits the BFD configuration from the peer group.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>Before enabling BFD on a BGP peer, enable BFD in the system view. If no BFD detection parameter is specified, a BFD session is established using default parameter values.<p></p>
<span>If the command is run more than once</span>, the latest configuration overrides the previous one.<p></p>
<span>NOTE</span>:<p></p>
<span>The</span> <b><span class="cmdname">peer bfd block</span></b> command and the <b><span class="cmdname">peer bfd enable</span></b> command are mutually exclusive. After the <b><span class="cmdname">peer bfd block</span></b> command is run, the BFD session is deleted automatically.<p></p>
<span>The</span> per-link one-arm-echo parameter takes effect only when the VLANIF interface has only one Eth-Trunk interface.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907604180__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure BFD for a peer.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>ipv6-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpn1-af-ipv6] <strong>route-distinguisher 100:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv6] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv6-family vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-6-vpna] <strong>peer 2001:DB8:1::1 as-number 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-6-vpna] <strong>peer 2001:DB8:1::1 bfd enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/VRF6-GROUP-BFD-ENABLE(BGPVPNBASE).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/SESSION-PEER-BFD-ENABLE(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>