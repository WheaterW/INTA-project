
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="redirect remote">
<meta name="DC.subject" content="redirect remote">
<meta name="keywords" content="redirect remote">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-Redirection_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/REDIRECT_OBSERVE-PORT_GROUP.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Redirection">
<meta name="featuretype" content="QoS">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Redirection">
<meta name="featuretype" content="QoS">
<meta name="featurename" content="Redirection">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="DC.Creator" content="SUBSYS_ID_DC_MQC">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907608684">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>redirect remote</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907608684"></a><a name="EN-US_CLIREF_0000001907608684"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">redirect remote</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907608684__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">redirect remote</span></b> command configures an action of redirecting packets to the remote next hop in a traffic behavior.</p>
<p>The <b><span class="cmdname">undo redirect remote</span></b> command cancels the redirection configuration.</p>
</p>
<p>By default, the action of redirecting packets to a remote next hop is not configured in a traffic behavior.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907608684__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6855-48XS8CQ, CE6885-LL (low latency mode), CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN: </p>

<p><b><span class="cmdname">undo redirect</span></b></p>

<p>For CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, CE6881H-K: </p>

<p><b><span class="cmdname">redirect remote ipv6 </span></b>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <i><span class="varname">ipv6-address</span></i> &amp;&lt;1-16&gt; [ <strong><span>exact</span></strong> ]</p>

<p><b><span class="cmdname">undo redirect remote ipv6 </span></b>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <i><span class="varname">ipv6-address</span></i> &amp;&lt;1-16&gt; [ <strong><span>exact</span></strong> ]</p>

<p>For CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, CE6881H-K: </p>

<p><b><span class="cmdname">redirect remote </span></b>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] { <i><span class="varname">ip-address</span></i> [ <strong><span>track</span></strong> <strong><span>nqa</span></strong> <i><span class="varname">admin-name</span></i> <i><span class="varname">test-name</span></i> [ <strong><span>reaction</span></strong> <strong><span>probe-failtimes</span></strong> <i><span class="varname">fail-times</span></i> ] ] } &amp;&lt;1-16&gt; [ <strong><span>exact</span></strong> ] [ <strong><span>low-precedence</span></strong> ]</p>

<p><b><span class="cmdname">undo redirect remote </span></b>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] { <i><span class="varname">ip-address</span></i> [ <strong><span>track</span></strong> <strong><span>nqa</span></strong> <i><span class="varname">admin-name</span></i> <i><span class="varname">test-name</span></i> [ <strong><span>reaction</span></strong> <strong><span>probe-failtimes</span></strong> <i><span class="varname">fail-times</span></i> ] ] } &amp;&lt;1-16&gt; [ <strong><span>exact</span></strong> ] [ <strong><span>low-precedence</span></strong> ]</p>

<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6820H, CE6820H-K, CE6820S, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN: </p>

<p><b><span class="cmdname">redirect remote ipv6 </span></b>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <i><span class="varname">ipv6-address</span></i> &amp;&lt;1-16&gt; [ <strong><span>exact</span></strong> ] [ <strong><span>local</span></strong> ]</p>

<p><b><span class="cmdname">undo redirect remote ipv6 </span></b>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <i><span class="varname">ipv6-address</span></i> &amp;&lt;1-16&gt; [ <strong><span>exact</span></strong> ] [ <strong><span>local</span></strong> ]</p>

<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN: </p>

<p><b><span class="cmdname">redirect remote </span></b>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] { <i><span class="varname">ip-address</span></i> [ <strong><span>track</span></strong> <strong><span>nqa</span></strong> <i><span class="varname">admin-name</span></i> <i><span class="varname">test-name</span></i> [ <strong><span>reaction</span></strong> <strong><span>probe-failtimes</span></strong> <i><span class="varname">fail-times</span></i> ] ] } &amp;&lt;1-16&gt; [ <strong><span>exact</span></strong> ] [ <strong><span>low-precedence</span></strong> ] [ <strong><span>local</span></strong> ]</p>

<p><b><span class="cmdname">undo redirect remote </span></b>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] { <i><span class="varname">ip-address</span></i> [ <strong><span>track</span></strong> <strong><span>nqa</span></strong> <i><span class="varname">admin-name</span></i> <i><span class="varname">test-name</span></i> [ <strong><span>reaction</span></strong> <strong><span>probe-failtimes</span></strong> <i><span class="varname">fail-times</span></i> ] ] } &amp;&lt;1-16&gt; [ <strong><span>exact</span></strong> ] [ <strong><span>low-precedence</span></strong> ] [ <strong><span>local</span></strong> ]</p>




<p>For CE6885-LL (low latency mode): </p>

<p><b><span class="cmdname">redirect remote </span></b>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] { <i><span class="varname">ip-address</span></i> [ <strong><span>track</span></strong> <strong><span>nqa</span></strong> <i><span class="varname">admin-name</span></i> <i><span class="varname">test-name</span></i> [ <strong><span>reaction</span></strong> <strong><span>probe-failtimes</span></strong> <i><span class="varname">fail-times</span></i> ] ] } &amp;&lt;1-16&gt; [ <strong><span>exact</span></strong> ] [ <strong><span>local</span></strong> ]</p>

<p><b><span class="cmdname">undo redirect remote </span></b>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] { <i><span class="varname">ip-address</span></i> [ <strong><span>track</span></strong> <strong><span>nqa</span></strong> <i><span class="varname">admin-name</span></i> <i><span class="varname">test-name</span></i> [ <strong><span>reaction</span></strong> <strong><span>probe-failtimes</span></strong> <i><span class="varname">fail-times</span></i> ] ] } &amp;&lt;1-16&gt; [ <strong><span>exact</span></strong> ] [ <strong><span>local</span></strong> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907608684__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv6</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the remote IPv6 next hop.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a VPN instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters. It cannot contain spaces. The VPN instance name cannot be _public_. The character string can contain spaces if it is enclosed with double quotation marks ("").</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ipv6-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv6 address of the remote next hop.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a 32-bit hexadecimal string in format X:X:X:X:X:X:X:X.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>exact</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Redirects packets to the remote next hop accurately.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ip-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IP address of the remote next hop.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>track</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the object to be traced.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>nqa</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an NQA test instance to be traced.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">admin-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the administrator name of an NQA test instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters including digits (0 to 9) and letters (a to z). It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">test-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the administrator name and the name of an NQA test instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters including digits (0 to 9) and letters (a to z). It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>reaction</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Cancels redirection.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>probe-failtimes</span></strong> <i><span class="varname">fail-times</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum number of link detection failures in an NQA test instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer in the range from 1 to 15.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>low-precedence</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the low priority of the PBR.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>local</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates local preferential forwarding.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE6885-LL (low latency mode), CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>


</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907608684__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Traffic behavior view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907608684__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907608684__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>To redirect packets to the IP address of the indirectly-connected next hop, run the <b><span class="cmdname">redirect remote</span></b> command.  After redirection to an indirect next hop address is configured, the device searches the IP routing table. If the IP routing table contains a route to the IP address, the device forwards the packet based on the route.</p>

<ul><li>When ip-address or ipv6-address matches multiple entries in the IP routing table, the device selects the route according to the longest match rule.</li><li>If an NQA test instance is configured following ip-address and the number of NQA probe failures is greater than or equal to the specified value, the current next hop is automatically canceled.</li><li>When exact is specified, the IP routing table on the device must contain 32-bit host routes that match ip-address or ipv6-address; otherwise, the device cannot redirect packets. For example, when redirect remote 10.1.1.1 exact is configured, the IP routing table of the device must contain a route to 10.1.1.1/32; otherwise, the device cannot redirect packets.</li><li>When multiple remote next hops are configured, the device redirects packets in active/standby mode. The IP address of the next hop configured first has a higher priority. Therefore, the first configured next-hop IP address is used as the active link, and other links are used as standby links. If the primary link goes Down, the switch automatically selects the path to the next-hop address with a higher priority as the primary link. When the high-priority link recovers, traffic is switched back to the high-priority link. When all links to which packets are redirected are unavailable, packets are forwarded through the interface found based on the destination address.</li></ul>
<p><strong>Follow-up Procedure</strong></p>
<p>Run the <b><span class="cmdname">traffic policy</span></b> command to create a traffic policy and run the <b><span class="cmdname">classifier behavior</span></b> command in the traffic policy view to bind the traffic classifier to the traffic behavior containing redirection to a next-hop IP address.</p>
<p><strong>Precautions</strong></p>
<p><p>IPv6 PBR does not support redirection based on routes created using OSPFv3.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907608684__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure an action of redirecting packets to the remote next hop 10.0.0.1 in the traffic behavior b1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>traffic behavior b1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-behavior-b1] <strong>redirect remote 10.0.0.1</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-Redirection_Configuration_Commands_title.html">Redirection Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/REDIRECT_OBSERVE-PORT_GROUP.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>