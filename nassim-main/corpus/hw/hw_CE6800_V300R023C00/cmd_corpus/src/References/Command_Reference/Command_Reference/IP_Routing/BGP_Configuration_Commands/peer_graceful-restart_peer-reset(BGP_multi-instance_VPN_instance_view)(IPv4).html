
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer graceful-restart peer-reset(BGP multi-instance VPN instance view)(IPv4)">
<meta name="DC.subject" content="peer graceful-restart peer-reset(BGP multi-instance VPN instance view)(IPv4)">
<meta name="keywords" content="peer graceful-restart peer-reset(BGP multi-instance VPN instance view)(IPv4)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SESSION-PEER-GROUP-GR-PEER-RESET(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-INSTANCE-PEER-ADDR-GRACEFUL-RESTART-TIMER-RESTART(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942843589">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer graceful-restart peer-reset(BGP multi-instance VPN instance view)(IPv4)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942843589"></a><a name="EN-US_CLIREF_0000001942843589"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer graceful-restart peer-reset(BGP multi-instance VPN instance view)(IPv4)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942843589__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer graceful-restart peer-reset</span></b> command enables a device to reset the BGP connection with a specified peer in graceful restart (GR) mode.</p>
<p>The <b><span class="cmdname">undo peer graceful-restart peer-reset</span></b> command restores the default configuration.</p>
<p>The <b><span class="cmdname">peer graceful-restart peer-reset disable</span></b> command disables a peer from inheriting from a peer group the configuration of resetting the BGP connection with a specified peer in GR mode.</p>
<p>The <b><span class="cmdname">undo peer graceful-restart peer-reset disable</span></b> command restores the default configuration.</p>
</p>
<p>By default, a device is not enabled to reset the BGP connection with a specified peer in GR mode.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942843589__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN, CE6885-LL (low latency mode): </p>

<p><b><span class="cmdname">peer </span></b><i><span class="varname">peerIpv4Addr</span></i> <strong><span>graceful-restart</span></strong> <strong><span>peer-reset</span></strong></p>

<p><b><span class="cmdname">peer </span></b><i><span class="varname">peerIpv4Addr</span></i> <strong><span>graceful-restart</span></strong> <strong><span>peer-reset</span></strong> <strong><span>disable</span></strong></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">peerIpv4Addr</span></i> <strong><span>graceful-restart</span></strong> <strong><span>peer-reset</span></strong></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">peerIpv4Addr</span></i> <strong><span>graceful-restart</span></strong> <strong><span>peer-reset</span></strong> <strong><span>disable</span></strong></p>

<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN: </p>

<p><b><span class="cmdname">peer </span></b><i><span class="varname">peerIpv6Addr</span></i> <strong><span>graceful-restart</span></strong> <strong><span>peer-reset</span></strong></p>

<p><b><span class="cmdname">peer </span></b><i><span class="varname">peerIpv6Addr</span></i> <strong><span>graceful-restart</span></strong> <strong><span>peer-reset</span></strong> <strong><span>disable</span></strong></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">peerIpv6Addr</span></i> <strong><span>graceful-restart</span></strong> <strong><span>peer-reset</span></strong></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">peerIpv6Addr</span></i> <strong><span>graceful-restart</span></strong> <strong><span>peer-reset</span></strong> <strong><span>disable</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942843589__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">peerIpv4Addr</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an IPv4 peer address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">peerIpv6Addr</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv6 address of a peer.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a 32-digit hexadecimal number, in the format of X:X:X:X:X:X:X:X.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942843589__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP multi-instance VPN instance session view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942843589__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942843589__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Currently, BGP does not support dynamic capability negotiation. Therefore, BGP capability changes cause peer relationships to be re-established and routing entries to be deleted, interrupting services. To solve this problem, run the <b><span class="cmdname">peer graceful-restart peer-reset</span></b> command to reset the BGP connection with a specified peer in GR mode after GR is enabled on the BGP peer.<p></p>
<span>After the function of resetting the BGP connection</span> with a specified peer in GR mode is configured, if a BGP peer relationship in another address family is established based on the BGP IPv4 unicast peer session, BGP starts to reset the BGP connection with the specified peer in GR mode and renegotiates capabilities. During this process, the BGP IPv4 unicast peer session is re-established, but the original routing entries are not deleted. The forwarding module can still forward packets based on the routing information, ensuring uninterrupted IPv4 services.</p>
<p><strong>Prerequisites</strong></p>
<p>The GR function has been enabled on a peer using the <b><span class="cmdname">peer capability-advertise graceful-restart</span></b> command. If GR is enabled on a peer for the first time, all sessions and instances are deleted and re-established, causing service interruptions.</p>
<p><strong>Precautions</strong></p>
<p>If the <b><span class="cmdname">peer capability-advertise graceful-restart</span></b> command is run but the <b><span class="cmdname">peer graceful-restart peer-reset</span></b> command is not run, the peer relationship reestablishment triggered by the reset bgp command or dynamic capability negotiation will not reset the BGP connection in GR mode. The peer relationship reestablishment triggered by the reset bgp command or dynamic capability negotiation resets the BGP connection in GR mode only after both the peer capability-advertise graceful-restart and <b><span class="cmdname">peer graceful-restart peer-reset</span></b> commands are run.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942843589__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable a device to use the GR mode to reset the BGP connection with a specified peer.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>route-distinguisher 100:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>bgp 100 instance dd</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-dd] <strong>vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-dd-instance-vpna] <strong>peer 10.1.1.1 as-number 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-dd-instance-vpna] <strong>peer 10.1.1.1 capability-advertise graceful-restart</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-dd-instance-vpna] <strong>peer 10.1.1.1 graceful-restart peer-reset</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/SESSION-PEER-GROUP-GR-PEER-RESET(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BGP-MULI-INSTANCE-PEER-ADDR-GRACEFUL-RESTART-TIMER-RESTART(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>