
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="igmp snooping query ip-source-policy">
<meta name="DC.subject" content="igmp snooping query ip-source-policy">
<meta name="keywords" content="igmp snooping query ip-source-policy">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Layer_2_Multicast_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IGMP-SNOOPING-INST-ENABLE-BD-DC_7(L2MCOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IGMP-SNOOPING-INST-ENABLE-BD-DC_23(L2MCOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP Snooping">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Creator" content="SUBSYS_ID_L2MCOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942845645">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>igmp snooping query ip-source-policy</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942845645"></a><a name="EN-US_CLIREF_0000001942845645"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">igmp snooping query ip-source-policy</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942845645__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">igmp snooping query ip-source-policy</span></b> command configures a policy to filter IGMP Query messages based on source IP addresses in a VLAN.</p>
<p>The <b><span class="cmdname">undo igmp snooping query ip-source-policy</span></b> deletes the IGMP Query message filtering policy from a VLAN.</p>
</p>
<p>By default, no IGMP Query message filtering policy is configured in a VLAN.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942845645__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">igmp snooping query ip-source-policy </span></b>{ <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> }</p>

<p><b><span class="cmdname">undo igmp snooping query ip-source-policy</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942845645__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">acl-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of a basic ACL or an advanced ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 2000 to 3999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a basic ACL or an advanced ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters, spaces not supported.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942845645__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>VLAN range view,</span><span>VLAN view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942845645__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942845645__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>If an attacker forges itself as an IGMP querier and sends a Query message with a smaller IP address than the IP address of the current IGMP querier, the IGMP snooping-enabled device forwards the IGMP Membership Report message to the attacker's network interface. As a result, multicast traffic cannot be forwarded normally. To improve Layer 2 multicast network security, you can configure a source address-based IGMP Query message filtering policy to allow only IGMP Query messages with specified source IP addresses to pass through and deny other IGMP Query messages.</p>
<p><strong>Prerequisites</strong></p>
<p>IGMP snooping has been enabled globally.</p>
<p><strong>Configuration Impact</strong></p>
<p>After an IGMP Query message filtering policy is configured, the system uses the ACL specified in the command to filter IGMP Query messages. IGMP Query messages are accepted only when their source IP addresses are permitted by the referenced ACL (within the address range following permit in the ACL rule).</p>
<p><strong>Precautions</strong></p>
<p>The configuration takes effect only after you run the <b><span class="cmdname">igmp snooping enable</span></b> command to enable IGMP snooping in the VLAN.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942845645__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure an IGMP Query message filtering policy in VLAN 3 to permit IGMP Query messages with source IP address 10.0.0.1 and drop other IGMP Query messages.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl 2000</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-basic-2000] <strong>rule permit source 10.0.0.1 0</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-basic-2000] <strong>rule deny source any</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-basic-2000] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>igmp snooping enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>vlan 3</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vlan3] <strong>igmp snooping enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vlan3] <strong>igmp snooping query ip-source-policy 2000</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Layer_2_Multicast_Commands_title.html">IGMP Snooping Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/IGMP-SNOOPING-INST-ENABLE-BD-DC_7(L2MCOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/IGMP-SNOOPING-INST-ENABLE-BD-DC_23(L2MCOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>