
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="capture-packet local-host">
<meta name="DC.subject" content="capture-packet local-host">
<meta name="keywords" content="capture-packet local-host">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-Packet_Capture_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CAPTURE-PACKET_INTERFACE.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DISPLAY_CAPTURE-PACKET_CONFIG-STATE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Packet Capture">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Packet Capture">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="Packet Capture">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Creator" content="SUBSYS_ID_CPUDEFEND">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942848169">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>capture-packet local-host</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942848169"></a><a name="EN-US_CLIREF_0000001942848169"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">capture-packet local-host</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942848169__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">capture-packet local-host</span></b> command configures a packet obtaining instance for the packets to be sent to a host.</p>
<p>The <b><span class="cmdname">undo capture-packet</span></b> command deletes a packet obtaining instance.</p>
</p>
<p>By default, no packet capture instance is configured for the packets to be sent to the host.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942848169__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN: </p>

<p><b><span class="cmdname">capture-packet local-host </span></b>[ <strong><span>interface</span></strong> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> } &amp;&lt;1-4&gt; ] [ <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <strong><span>name</span></strong> <i><span class="varname">acl-name</span></i> } | <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> | <strong><span>inner-vlan</span></strong> <i><span class="varname">cvlan-id</span></i> ] <sup>*</sup> <strong><span>destination</span></strong> { <strong><span>file</span></strong> <i><span class="varname">filename</span></i> | <strong><span>terminal</span></strong> } [ <strong><span>time-out</span></strong> <i><span class="varname">time-value</span></i> | <strong><span>packet-num</span></strong> <i><span class="varname">number</span></i> | <strong><span>packet-len</span></strong> <i><span class="varname">length</span></i> ] <sup>*</sup></p>

<p><b><span class="cmdname">capture-packet local-host </span></b>[ <strong><span>interface</span></strong> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> } &amp;&lt;1-4&gt; ] [ <strong><span>acl</span></strong> <strong><span>ipv6</span></strong> { <i><span class="varname">acl-number2</span></i> | <strong><span>name</span></strong> <i><span class="varname">acl-name</span></i> } | <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> | <strong><span>inner-vlan</span></strong> <i><span class="varname">cvlan-id</span></i> ] <sup>*</sup> <strong><span>destination</span></strong> { <strong><span>file</span></strong> <i><span class="varname">filename</span></i> | <strong><span>terminal</span></strong> } [ <strong><span>time-out</span></strong> <i><span class="varname">time-value</span></i> | <strong><span>packet-num</span></strong> <i><span class="varname">number</span></i> | <strong><span>packet-len</span></strong> <i><span class="varname">length</span></i> ] <sup>*</sup></p>

<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6855-48XS8CQ, CE6885-LL (low latency mode), CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN: </p>

<p><b><span class="cmdname">undo capture-packet </span></b>[ <i><span class="varname">capture-index</span></i> ]</p>

<p>For CE6885-LL (low latency mode): </p>

<p><b><span class="cmdname">capture-packet local-host </span></b>[ <strong><span>interface</span></strong> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> } &amp;&lt;1-4&gt; ] [ <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <strong><span>name</span></strong> <i><span class="varname">acl-name</span></i> } | <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> ] <sup>*</sup> <strong><span>destination</span></strong> { <strong><span>file</span></strong> <i><span class="varname">filename</span></i> | <strong><span>terminal</span></strong> } [ <strong><span>time-out</span></strong> <i><span class="varname">time-value</span></i> | <strong><span>packet-num</span></strong> <i><span class="varname">number</span></i> | <strong><span>packet-len</span></strong> <i><span class="varname">length</span></i> ] <sup>*</sup></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942848169__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><p>Obtains packets on a specified interface.</p>
<ul><li>interface-type: indicates the interface type.</li><li>interface-number: indicates the interface number.</li></ul>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 128 case-insensitive characters without spaces but with spaces between type and number.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Obtains packets on a specified interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 128 case-insensitive characters without spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures an ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv6</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures an IPv6 address.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">acl-number2</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Obtains packets that match a specified ACL.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 2000 to 3999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>name</span></strong> <i><span class="varname">acl-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Creates an ACL with a name.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters without spaces. The value must start with a letter or digit, and cannot contain only digits.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Obtains packets from a specified VLAN.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>For the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ:The value is an integer ranging from 1 to 4094.</p>
<p>For the CE6885-LL (low latency mode):For device models in low latency mode, the value can be changed using a command. The value is in the range from 1 to 1023.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>destination</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the destination to which obtained packet information is sent.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>file</span></strong> <i><span class="varname">filename</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Saves obtained packet information to a file. The file name extension must be .cap.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 5 to 64 case-sensitive characters. It cannot contain spaces and paths. It cannot contain the following special characters: ~ ? * \ : / | &lt; &gt; [ ].</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>terminal</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Displays information about the obtained packets on the terminal.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>time-out</span></strong> <i><span class="varname">time-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the timeout period for obtaining packets. The device stops the packet capture instance when the timeout period expires.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer ranging from 1 to 86400, in seconds.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>packet-num</span></strong> <i><span class="varname">number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of packets to be obtained. The device stops the packet capture instance when the specified number of packets are obtained.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer in the range from 1 to 5000. The default value is 100.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>packet-len</span></strong> <i><span class="varname">length</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the length of obtained packets to be displayed on the terminal or stored on the storage medium.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer in the range from 20 to 64, in bytes. The default value is 64 bytes.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">acl-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Obtains packets that match a specified ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 2000 to 4999 .</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>inner-vlan</span></strong> <i><span class="varname">cvlan-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Obtains packets with a specified inner VLAN ID.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4094.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">capture-index</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Deletes the packet capture instance with a specified index.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 8.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942848169__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>User view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942848169__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>3: Management level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942848169__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Devices on a network transmit various services, and network administrators often need to obtain packets on devices to locate faults. The device does not support the remote packet capture function; therefore, administrators need to obtain packets onsite by connecting a PC to the switch. If packets need to be obtained on an optical interface, an optical-to-electrical converter must be installed on the interface, reducing maintenance efficiency. Running the <b><span class="cmdname">capture-packet local-host</span></b> command can remotely obtain the packets to be sent to the CPU and analyze the obtained packets, to greatly improve maintenance efficiency and reduce maintenance cost.</p>
<p><strong>Precautions</strong></p>
<p>The following are constraints on obtaining packets to be sent to the CPU:<p></p>
<span>If the ACL and VLAN parameters as well as the specified</span> interfaces in an instance you want to configure are the same as those in an existing instance, the device considers that this instance has been enabled.<p></p>
<span>If the file for storing obtained packets is deleted</span> during packet obtaining, contents of subsequent packets cannot be written into the file.<p></p>
<span>When configuring an instance for obtaining packets</span>, note the following two points:<p></p>
<span>The device can obtain packets of protocols sent to</span> the CPU.<p></p>
<span>You can set the timeout period specified by time and</span> the number of obtained packets specified by number. If the timeout period for obtaining packets expires or the specified number of packets are obtained, the system stops obtaining packets.<p></p>
<span>When the IPv4 ACL-based packet capture function is</span> configured, the fragment flag cannot be matched.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942848169__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Obtain packets sent to the CPU on <span>100GE</span><span>1/0/1</span>, set the timeout period to 360s and number of packets to be obtained to 100.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>capture-packet local-host interface <span>100GE</span> <span>1/0/1</span> destination file capture1.cap time-out 360 packet-num 100</strong>
Warning: The capture packet may disclosure the personal information.
Warning: Capture-packet data will be saved to flash:/logfile/capture1.cap.
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-Packet_Capture_Configuration_Commands_title.html">Packet Capture Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/CAPTURE-PACKET_INTERFACE.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/DISPLAY_CAPTURE-PACKET_CONFIG-STATE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>