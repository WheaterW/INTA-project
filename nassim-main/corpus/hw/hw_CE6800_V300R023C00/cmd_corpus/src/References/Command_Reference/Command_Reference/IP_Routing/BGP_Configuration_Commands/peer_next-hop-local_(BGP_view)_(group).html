
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer next-hop-local (BGP view) (group)">
<meta name="DC.subject" content="peer next-hop-local (BGP view) (group)">
<meta name="keywords" content="peer next-hop-local (BGP view) (group)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PEER-IPV6-NEXTHOP-INVARIABLE-IPV6UNICAST(BGPIPV6).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-PEER-NEXT-HOP-LOCAL(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907764596">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer next-hop-local (BGP view) (group)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907764596"></a><a name="EN-US_CLIREF_0000001907764596"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer next-hop-local (BGP view) (group)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907764596__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer next-hop-local</span></b> command configures a BGP device to set its IP address as the next hop of routes when the BGP device advertises routes to an IBGP peer group.</p>
<p>The <b><span class="cmdname">undo peer next-hop-local</span></b> command restores the default setting.</p>
</p>
<div class="p"><p>
By default:
</p>
<ul><li>
When advertising routes to EBGP peers, BGP sets the next hops of the routes to the IP address of its interface connected to the EBGP peers.
</li><li>
When advertising an unlabeled route from an EBGP peer to an IBGP peer, a BGP device does not change the next hop of the route. When advertising a labeled route, a BGP device changes the next hop of the route to the IP address of its interface connected to the IBGP peer.
</li><li>
BGP does not change the next hop of a route when advertising the route from an IBGP peer to another IBGP peer.
</li><li>
When advertising locally generated routes to IBGP peers, BGP sets the next hops of the routes to the IP address of its interface connected to the IBGP peers.
</li><li>
When advertising a VPN instance route to a VPN peer, BGP sets the next hop of the route to the IP address of the interface connected to the peer.
</li></ul>
</div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907764596__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">group-name</span></i> <strong><span>next-hop-local</span></strong></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">group-name</span></i> <strong><span>next-hop-local</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907764596__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">group-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a peer group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The name is a string of 1 to 47 case-sensitive characters, with spaces not supported. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907764596__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907764596__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907764596__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>The <b><span class="cmdname">peer next-hop-local</span></b> command is usually run on an ASBR. By default, when an ASBR forwards a route learned from an EBGP peer to its IBGP peers, the ASBR does not change the Next_Hop of the route. Therefore, the Next_Hop address of the route remains the EBGP peer IP address. After being forwarded to the IBGP peers, the route cannot become active because of the unreachable Next_Hop. The <b><span class="cmdname">peer next-hop-local</span></b> command needs to be run to configure the ASBR to modify the Next_Hop of the route to the local IP address before advertising the route to IBGP peers. After being forwarded to the IBGP peers, the route can be active because the Next_Hop is reachable (an IGP is configured in the AS).</p>
<p><strong>Configuration Impact</strong></p>
<p>If the command is run more than once, the latest configuration overrides the previous one.</p>
<p><strong>Precautions</strong></p>
<p>The <b><span class="cmdname">peer next-hop-local</span></b> command is applicable only to IBGP peers.<p></p>
<span>If you run both the peer next-hop-local and peer next</span>-hop-invariable commands, the latest configuration overrides the previous one.<p></p>
<span>If this command is run on a route reflector</span>, the command takes effect for BGP labeled routes, VPNv4 routes, and VPNv6 routes.<p></p>
<span>Except BGP labeled routes</span>, VPNv4 routes, and VPNv6 routes, running this command on an RR or a peer in a BGP confederation to change the next hop of BGP routes does not take effect.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907764596__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a BGP device to set its IP address as the next hop of routes when advertising the routes to peer group.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>group test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer test as-number 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer test next-hop-local</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PEER-IPV6-NEXTHOP-INVARIABLE-IPV6UNICAST(BGPIPV6).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BGP-PEER-NEXT-HOP-LOCAL(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>