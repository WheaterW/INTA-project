
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="nexthop third-party (BGP-IPv4 unicast address family view)">
<meta name="DC.subject" content="nexthop third-party (BGP-IPv4 unicast address family view)">
<meta name="keywords" content="nexthop third-party (BGP-IPv4 unicast address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/NEXTHOP-THIRD-PARTY(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IPV6-NEXTHOP-THIRD-PARTY(BGPIPV6).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942843181">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>nexthop third-party (BGP-IPv4 unicast address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942843181"></a><a name="EN-US_CLIREF_0000001942843181"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">nexthop third-party (BGP-IPv4 unicast address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942843181__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">nexthop third-party</span></b> command prevents a BGP speaker from changing the next hop address of a route when the BGP speaker advertises the route to its peers in the following scenarios:</p>
<p><b><span class="cmdname">-</span></b> The route is learned from a directly connected peer and is to be advertised to a directly connected EBGP peer, the original next hop of the route resides on the same network segment as the local interface that is used to establish the BGP peer relationship with the EBGP peer, and all directly connected interfaces are broadcast interfaces.</p>
<p><b><span class="cmdname">-</span></b> The route is locally imported and is to be advertised to a directly connected IBGP or EBGP peer, the next hop to which the route recurses resides on the same network segment as the local interface that is used to establish the BGP peer relationship with the IBGP or EBGP peer, and all directly connected interfaces are broadcast interfaces.</p>
<p>The <b><span class="cmdname">undo nexthop third-party</span></b> command restores the default configurations.</p>
</p>
<div class="p"><p>
The default configurations are as follows:
</p>
<ul><li>
Before advertising a route that is learned from a directly connected peer to a directly connected EBGP peer, the device changes the next hop of the route to the IP address of the local interface that is used to establish the BGP peer relationship with the EBGP peer.
</li><li>
Before advertising a locally imported route to a directly connected IBGP or EBGP peer, the device changes the next hop of the route to the IP address of the local interface that is used to establish the BGP peer relationship with the IBGP or EBGP peer.
</li></ul>
</div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942843181__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">nexthop third-party</span></b></p>

<p><b><span class="cmdname">undo nexthop third-party</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942843181__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942843181__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-IPv4 unicast address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942843181__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942843181__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>In a Layer 2 protocol tunneling scenario, to ensure that traffic is transmitted along the optimal route, run the <b><span class="cmdname">nexthop third-party</span></b> command.</p>
<p><strong>Precautions</strong></p>
<p><p>If the command and load balancing function are both configured, this command does not take effect.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942843181__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Prevent a BGP speaker from changing the next hop address of a route when the BGP speaker advertises the route to a peer.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv4-family unicast</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv4] <strong>nexthop third-party</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/NEXTHOP-THIRD-PARTY(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/IPV6-NEXTHOP-THIRD-PARTY(BGPIPV6).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>