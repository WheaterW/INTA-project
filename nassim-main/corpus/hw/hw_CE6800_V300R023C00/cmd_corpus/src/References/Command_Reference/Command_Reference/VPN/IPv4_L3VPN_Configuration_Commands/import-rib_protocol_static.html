
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="import-rib protocol static">
<meta name="DC.subject" content="import-rib protocol static">
<meta name="keywords" content="import-rib protocol static">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_MPLS_IP_VPN_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/VPN-IMPORT-POLICY(L3VPNOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IPBINDVPN(IFMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv4 L3VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="IPv4 L3VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="IPv4 L3VPN">
<meta name="featuretype" content="VPN">
<meta name="featuretype" content="VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Creator" content="SUBSYS_ID_STATICRTOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942846029">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>import-rib protocol static</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942846029"></a><a name="EN-US_CLIREF_0000001942846029"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">import-rib protocol static</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942846029__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">import-rib protocol static</span></b> command imports public network or other VPN instance routes to a VPN instance routing table.</p>
<p>The <b><span class="cmdname">undo import-rib protocol static</span></b> command restores the default configuration.</p>
</p>
<p>By default, public network or other VPN instance routes are not imported to VPN instance routing tables.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942846029__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p><b><span class="cmdname">import-rib </span></b>{ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>public</span></strong> } <strong><span>protocol</span></strong> <strong><span>static</span></strong> [ <strong><span>valid-route</span></strong> ] [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]</p>

<p><b><span class="cmdname">undo import-rib </span></b>{ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>public</span></strong> } <strong><span>protocol</span></strong> <strong><span>static</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942846029__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a VPN instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters, spaces not supported. In addition, the VPN instance name must not be _public_. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>public</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the public network instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>protocol</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a protocol type of route to be imported to a VPN instance routing table.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>static</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports static routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>valid-route</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports valid routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a route-policy to filter routes to be imported.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 200 case-sensitive characters without spaces. The character string can contain spaces if it is enclosed with double quotation marks (").</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942846029__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>VPN instance IPv4 address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942846029__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942846029__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>In the VPN scenario, one VPN can communicate with another VPN if they have matching VPN targets, but VPNs cannot communicate with the public network. To enable a VPN to communicate with the public network, you have to ensure that the VPN and public network can obtain routes to each other. To import public network routes to a VPN instance, run the <b><span class="cmdname">import-rib public</span></b> command.<p></p>
<span>In an intelligent traffic control scenario</span>, traffic of different users are distributed to different VPNs. To enable the traffic to reach the public network, run the <b><span class="cmdname">import-rib public</span></b> command to import public network routes to each VPN instance routing table.<p></p>
<span>Traffic forwarding relies on direct routes</span> (Vlink direct routes) generated based on user entries. When VLAN tag termination sub-interfaces are used for route import between VPN and public network, Vlink direct routes cannot be imported. As a result, traffic forwarding is interrupted. To solve this problem, route import between VPN and public network newly supports import of Vlink direct routes.</p>
<p><strong>Precautions</strong></p>
<p><p>If you run the <b><span class="cmdname">import-rib public</span></b> command on a device without adding the valid-route keyword, the device will import all routes of the specified type from the public network instance's corresponding routing table to the specified VPN instance. If an imported route is preferred in this routing table, the device will advertise the route to other devices and deliver the route to the VPN IPv4 routing table to guide traffic forwarding.<p></p>
<span>If you run the command with the valid-route parameter</span>, the device will import valid routes of the specified type in the public network routing table to the specified VPN instance. If imported routes are preferred in the VPN instance, the device will advertise the routes to other devices and deliver these routes to the VPN IPv4 routing tables of the devices to guide traffic forwarding.<p></p>
<span>If the routes imported using the import-rib command</span> are imported by other routing protocols, routing loops may occur. For details, see the precautions for IGP or BGP route import commands.<p></p>
<span>When a route-policy is specified to filter routes</span>, if the address family of the route does not match the address family of the if-match clause in the route-policy, the default matching result depends on whether the <b><span class="cmdname">route-policy address-family mismatch-deny</span></b> command is configured. For details, see the precautions for the <b><span class="cmdname">route-policy address-family mismatch-deny</span></b> command and the scenario description and precautions for the route-policy command.<p></p>
<span>When a route-policy is specified to filter routes</span>, the IPv4 destination address ACL list, IPv4 destination address prefix list, IPv4 next hop ACL list, IPv4 next hop prefix list, IPv6 next hop ACL list, IPv6 next hop prefix list, route cost, route modulo, route preference, and route tag can be matched. If the referenced route-policy contains an unsupported attribute matching behavior, unexpected results may occur.<p></p>
<span>When a route-policy is specified to filter routes</span>, the route cost, route preference, and route tag attributes can be set. If the referenced route-policy contains an unsupported attribute setting behavior, unexpected results may occur.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942846029__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the device to import static routes to the VPN instance vrf1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vrf1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vrf1] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vrf1] <strong>import-rib public protocol static</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_MPLS_IP_VPN_Configuration_Commands_title.html">IPv4 L3VPN Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/VPN-IMPORT-POLICY(L3VPNOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/IPBINDVPN(IFMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>