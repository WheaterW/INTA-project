
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="bsr-policy(VPN instance PIM view/PIM view of a public network instance)">
<meta name="DC.subject" content="bsr-policy(VPN instance PIM view/PIM view of a public network instance)">
<meta name="keywords" content="bsr-policy(VPN instance PIM view/PIM view of a public network instance)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IPv4_PIM_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IPV4-BSM-FRAG(PIMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IPV4-C-BSR-ADMIN-SCOPE(PIMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Creator" content="SUBSYS_ID_PIMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942845465">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>bsr-policy(VPN instance PIM view/PIM view of a public network instance)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942845465"></a><a name="EN-US_CLIREF_0000001942845465"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">bsr-policy(VPN instance PIM view/PIM view of a public network instance)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942845465__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">bsr-policy</span></b> command limits the range of valid bootstrap router (BSR) addresses, so that a Router discards messages received from the BSRs not in the specified address range, preventing BSR spoofing.</p>
<p>The <b><span class="cmdname">undo bsr-policy</span></b> command restores the default configuration.</p>
</p>
<p>By default, the range of valid BSR addresses is not limited, so that a Router considers messages received from all BSRs valid.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942845465__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">bsr-policy </span></b>{ <i><span class="varname">bsrPolicyAclNum</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> }</p>

<p><b><span class="cmdname">undo bsr-policy</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942845465__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">bsrPolicyAclNum</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of a basic ACL, which defines a policy for filtering BSR messages based on source addresses.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer ranging from 2000 to 2999.</p>
<p>The value of this parameter must be the same as that of the basic-acl-number parameter specified in the acl command.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a named basic ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters, spaces not supported. The name must start with a letter or digit, and cannot contain only digits.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942845465__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>VPN instance PIM view,</span><span>PIM view of a public network instance</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942845465__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942845465__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>On a PIM-SM network that uses the BSR mechanism, any Router can be configured as a candidate-bootstrap router (C-BSR) and participate in a BSR election. The winner of the BSR election is responsible for advertising RP information on the network. These mechanisms leave chances for BSR spoofing.</p>

<ul><li>Some malicious hosts construct pseudo BSR messages and send the messages to the Routers, attempting to change rendezvous point (RP) mappings on the Routers.<p></p>
<span>Common preventive measures for such attacks</span>: BSR messages are multicast packets with the TTL being 1. Such BSR spoofing commonly occurs on network edge Routers. Since the BSR resides inside the network while hosts reside outside the network, you can enable the Routers to perform neighbor and RPF checks on received BSR messages to filter out pseudo BSR messages.</li><li>Attackers control some Routers on the network or a Router accesses the network illegally. The attacker can set the controlled Router as a C-BSR and make the C-BSR win the BSR election to control RP information advertisement on the network.<p></p>
<span>Common preventive measures for such attacks</span>: A Router will flood BSR messages on the network after being configured as a C-BSR. BSR messages are multicast packets being forwarded hop by hop, with the TTL being 1. Therefore, you can configure neighbors not to accept the BSR messages flooded by this Router using the <b><span class="cmdname">bsr-policy</span></b> command on each Router to set the range of valid BSR addresses. For example, you can set the addresses on 1.1.1.1/32 and 1.1.1.2/32 as valid BSR addresses. The Routers then do not accept or forward the messages from the BSR beyond the ranges, preventing invalid BSRs.<p></p>
<span>The preceding two solutions can ensure the BSR security</span> on the network; however, if an attacker controls a valid BSR, such a problem still exists.</li></ul>
<p><strong>Prerequisites</strong></p>
<p>The multicast routing function has been enabled using the <b><span class="cmdname">multicast routing-enable</span></b> command in the public network instance view or VPN instance view.</p>
<p><strong>Configuration Impact</strong></p>
<p>After the <b><span class="cmdname">bsr-policy</span></b> command is run, the Router accepts only the BSR messages passing the filtration.</p>
<p><strong>Precautions</strong></p>
<p>The <b><span class="cmdname">bsr-policy</span></b> command requires an ACL configured using the <b><span class="cmdname">acl</span></b> command. To set the range of source addresses of BSR messages, specify the source parameter in the <b><span class="cmdname">rule</span></b> command.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942845465__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># In the public network instance, specify addresses on 10.1.1.0/24 as valid BSR addresses.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl number 2001</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-basic-2001] <strong>rule permit source 10.1.1.0 0.0.0.255</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-basic-2001] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>multicast routing-enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>pim</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pim] <strong>bsr-policy 2001</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IPv4_PIM_Configuration_Commands_title.html">PIM Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/IPV4-BSM-FRAG(PIMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/IPV4-C-BSR-ADMIN-SCOPE(PIMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>