<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="DC.Type" content="cliref"> 
  <meta name="DC.Title" content="ptp udp-egress"> 
  <meta name="DC.subject" content="ptp udp-egress"> 
  <meta name="keywords" content="ptp udp-egress"> 
  <meta name="product" content=""> 
  <meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-1588v2(PTP)_Configuration_Commands_title.html"> 
  <meta name="DC.Relation" scheme="URI" content="../v3r23c00/PTP_TIME-ADJUSTMENT_DISABLE.html"> 
  <meta name="DC.Relation" scheme="URI" content="../v3r23c00/PTP_UTC-OFFSET.html"> 
  <meta name="prodname" content=""> 
  <meta name="version" content=""> 
  <meta name="brand" content="Product Documentation"> 
  <meta name="DC.Publisher" content="20230413"> 
  <meta name="featurename" content="1588v2 (PTP)"> 
  <meta name="featuretype" content="System Management"> 
  <meta name="DC.Audience.Job" content="Reference"> 
  <meta name="featurename" content="1588v2 (PTP)"> 
  <meta name="featuretype" content="System Management"> 
  <meta name="featurename" content="1588v2 (PTP)"> 
  <meta name="featuretype" content="System Management"> 
  <meta name="featuretype" content="System Management"> 
  <meta name="featuretype" content="System Management"> 
  <meta name="DC.Creator" content="SUBSYS_ID_CLKSYNC"> 
  <meta name="DC.Format" content="XHTML"> 
  <meta name="DC.Identifier" content="EN-US_CLIREF_0000001907760768"> 
  <meta name="DC.Language" content="en-us"> 
  <link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css"> 
  <link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css"> 
  <script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script> 
  <title>ptp udp-egress</title> 
  <style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style> 
 </head> 
 <body>
  <a name="EN-US_CLIREF_0000001907760768"></a>
  <a name="EN-US_CLIREF_0000001907760768"></a> 
  <div class="articleBoxWithoutHead"> 
   <h1 class="topicTitle-h1">ptp udp-egress</h1> 
   <div> 
    <div class="clifunc">
     <a name="EN-US_CLIREF_0000001907760768__1.3.1"></a>
     <a name="1.3.1"></a>
     <h2 class="sectiontitle">Function</h2> 
     <div class="clifuncbody"> 
      <p></p>
      <p>The <b><span class="cmdname">ptp udp-egress</span></b> command configures UDP encapsulation for 1588v2 packets sent by an interface and configures the destination MAC address, source IP address, and destination IP address for UDP-encapsulated 1588v2 packets.</p> 
      <p>The <b><span class="cmdname">undo ptp udp-egress</span></b> command restores the default UDP encapsulation on an interface.</p> 
      <p></p> 
      <p>By default, 1588v2 messages are encapsulated in multicast UDP mode.</p> 
      <div class="note">
       <img src="../public_sys-resources/note_3.0-en-us.png">
       <span class="notetitle"> </span>
       <div class="notebody">
        <p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H-48S6CQ, CE6881H-48S6CQ-K, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p> 
       </div>
      </div> 
     </div>
    </div> 
    <div class="cliformat">
     <a name="EN-US_CLIREF_0000001907760768__1.3.2"></a>
     <a name="1.3.2"></a>
     <h2 class="sectiontitle">Format</h2> 
     <div class="cliformatbody"> 
      <p><b><span class="cmdname">ptp udp-egress source-ip </span></b><i><span class="varname">source-ip</span></i> [ <strong><span>destination-ip</span></strong> <i><span class="varname">destination-ip</span></i> ]</p> 
      <p><b><span class="cmdname">ptp udp-egress destination-mac </span></b><i><span class="varname">destination-mac</span></i></p> 
      <p><b><span class="cmdname">ptp udp-egress source-ip </span></b><i><span class="varname">source-ip</span></i> [ <strong><span>dscp</span></strong> <i><span class="varname">dscp</span></i> ] <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> [ <strong><span>priority</span></strong> <i><span class="varname">priority-value</span></i> ]</p> 
      <p><b><span class="cmdname">undo ptp udp-egress </span></b>{ <strong><span>source-ip</span></strong> | <strong><span>destination-ip</span></strong> | <strong><span>destination-mac</span></strong> }</p> 
      <p><b><span class="cmdname">undo ptp udp-egress </span></b>{ <strong><span>dscp</span></strong> | <strong><span>vlan</span></strong> | <strong><span>priority</span></strong> }</p> 
     </div>
    </div> 
    <div class="cliparam">
     <a name="EN-US_CLIREF_0000001907760768__1.3.3"></a>
     <a name="1.3.3"></a>
     <h2 class="sectiontitle">Parameters</h2> 
     <div class="cliparambody"> 
      <div class="tableBorder">
       <table cellpadding="4" cellspacing="0" summary=""> 
        <tbody>
         <tr> 
          <th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th> 
          <th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th> 
          <th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th> 
         </tr> 
         <tr> 
          <td valign="top" headers="mcps1.3.3.1-type"><strong><span>source-ip</span></strong> <i><span class="varname">source-ip</span></i></td> 
          <td valign="top" headers="mcps1.3.3.1-desc"> <p></p><p>Specifies a source IP address for UDP 1588v2 packets.</p> <p></p> </td> 
          <td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p> </td> 
         </tr> 
         <tr> 
          <td valign="top" headers="mcps1.3.3.1-type"><strong><span>destination-ip</span></strong> <i><span class="varname">destination-ip</span></i></td> 
          <td valign="top" headers="mcps1.3.3.1-desc"> <p></p><p>Specifies a destination IP address for UDP 1588v2 packets.</p> <p></p> </td> 
          <td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p> </td> 
         </tr> 
         <tr> 
          <td valign="top" headers="mcps1.3.3.1-type"><strong><span>destination-mac</span></strong> <i><span class="varname">destination-mac</span></i></td> 
          <td valign="top" headers="mcps1.3.3.1-desc"> <p></p><p>Specifies a destination MAC address for 1588v2 packets.</p> <p></p> </td> 
          <td valign="top" headers="mcps1.3.3.1-value"><p>The value is in the format of H-H-H, where H is a 4-digit hexadecimal number.</p> </td> 
         </tr> 
         <tr> 
          <td valign="top" headers="mcps1.3.3.1-type"><strong><span>dscp</span></strong> <i><span class="varname">dscp</span></i></td> 
          <td valign="top" headers="mcps1.3.3.1-desc"> <p></p><p>A DiffServ Code Point (DSCP) value for UDP-encapsulated 1588v2 packets.</p> <p></p> </td> 
          <td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 63. The default value is 56.</p> </td> 
         </tr> 
         <tr> 
          <td valign="top" headers="mcps1.3.3.1-type"><strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i></td> 
          <td valign="top" headers="mcps1.3.3.1-desc"> <p></p><p>VLAN ID that is encapsulated in the transmitted packets and identified in the receive packets.</p> <p></p> </td> 
          <td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4094.</p> </td> 
         </tr> 
         <tr> 
          <td valign="top" headers="mcps1.3.3.1-type"><strong><span>priority</span></strong> <i><span class="varname">priority-value</span></i></td> 
          <td valign="top" headers="mcps1.3.3.1-desc"> <p></p><p>The priority value for VLAN encapsulation packets.</p> <p></p> </td> 
          <td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 7. The default value is 7, indicating the highest priority.</p> </td> 
         </tr> 
        </tbody>
       </table>
      </div> 
     </div>
    </div> 
    <div class="cliview">
     <a name="EN-US_CLIREF_0000001907760768__1.3.4"></a>
     <a name="1.3.4"></a>
     <h2 class="sectiontitle">Views</h2> 
     <div class="cliviewbody"> 
      <p>100GE interface view,10GE interface view,200GE interface view,25GE interface view,400GE interface view,50GE interface view</p> 
     </div>
    </div> 
    <div class="clidefaultlevel">
     <a name="EN-US_CLIREF_0000001907760768__1.3.5"></a>
     <a name="1.3.5"></a>
     <h2 class="sectiontitle">Default Level</h2> 
     <div class="clidefaultlevelbody"> 
      <p>2: Configuration level</p> 
     </div>
    </div> 
    <div class="clidesc">
     <a name="EN-US_CLIREF_0000001907760768__1.3.6"></a>
     <a name="1.3.6"></a>
     <h2 class="sectiontitle">Usage Guidelines</h2> 
     <div class="clidescbody"> 
      <p><strong>Usage Scenario</strong></p> 
      <div class="p">
       <p>PTP packets can be encapsulated into Layer 2 and Layer 3 packets for transmission. Select the packet encapsulation type according to the actual networking environment, and configure the source and destination addresses and transmission priorities for packet transmission.</p>
       <p></p> 
       <span>Before configuring the encapsulation mode of PTP packets</span>, check the link type used for PTP packet transmission.
       <p></p> 
       <ul>
        <li>For Layer 2 link transmission, run the <b><span class="cmdname">ptp mac-egress</span></b> command to configure the MAC encapsulation mode.</li>
        <li>For Layer 3 link transmission, run this command to select the UDP encapsulation mode.<p></p> <span>For unicast encapsulation</span>, you can directly run this command to configure a destination MAC address for unicast encapsulation.</li>
       </ul> 
      </div> 
      <p><strong>Prerequisites</strong></p> 
      <p>1588v2 has been enabled on an interface using the <b><span class="cmdname">ptp enable</span></b> command.</p> 
      <p><strong>Precautions</strong></p> 
      <p></p>
      <p>The higher the priority-value of multicast packets, the better the clock service. The higher the priority of multicast packets, the more timely the forwarding and processing, and the less the impact of delayed blocking of multicast packets on the clock recovery performance. The default value is the highest value and generally does not need to be changed.</p> 
      <p></p> 
     </div>
    </div> 
    <div class="cliexample">
     <a name="EN-US_CLIREF_0000001907760768__1.3.7"></a>
     <a name="1.3.7"></a>
     <h2 class="sectiontitle">Example</h2> 
     <div class="cliexamplebody"> 
      <div class="p">
       # Encapsulate 1588v2 packets with the source IP address 192.168.2.2 and destination IP address 192.168.1.1 in UDP unicast mode.
       <pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" face="Courier New">~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" face="Courier New">~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ptp udp-egress  source-ip 192.168.2.2 destination-ip 192.168.1.1</strong>
</pre> 
      </div> 
     </div>
    </div> 
   </div> 
  </div> 
  <div class="footerNavBar clearfix"> 
   <div class="parentlink">
     Parent Topic: 
    <a href="../v3r23c00/dc_PNF-1588v2(PTP)_Configuration_Commands_title.html">1588v2 (PTP) Configuration Commands </a> 
   </div> 
   <div class="copyrightBottomBar">
     Copyright ? Huawei Technologies Co., Ltd.
   </div> 
   <div class="copyrightBottomBar_responsive">
     Copyright ? Huawei Technologies Co., Ltd.
   </div> 
   <div class="bottomNavBtn clearfix"> 
    <a href="../v3r23c00/PTP_TIME-ADJUSTMENT_DISABLE.html"><span class="font-st">&lt; </span>Previous topic</a> 
    <a href="../v3r23c00/PTP_UTC-OFFSET.html">Next topic<span class="font-st"> &gt;</span></a> 
   </div> 
  </div>  
 </body>
</html>