
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer soo (BGP multi-instance VPN instance IPv4 address family view)">
<meta name="DC.subject" content="peer soo (BGP multi-instance VPN instance IPv4 address family view)">
<meta name="keywords" content="peer soo (BGP multi-instance VPN instance IPv4 address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/GROUP-VPNTRT-ROUTE-UPDATE-INTERVAL(BGPVPNTARGET).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-VRF-GROUP-SOO(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907765440">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer soo (BGP multi-instance VPN instance IPv4 address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907765440"></a><a name="EN-US_CLIREF_0000001907765440"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer soo (BGP multi-instance VPN instance IPv4 address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907765440__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer soo</span></b> command configures the Site-of-Origin (SoO) attribute for a BGP peer in a BGP VPN instance.</p>
<p>The <b><span class="cmdname">undo peer soo</span></b> command cancels the configuration.</p>
</p>
<p>By default, SoO is not configured for BGP peers in a BGP VPN instance.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907765440__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">ipv4-address</span></i> <strong><span>soo</span></strong> <i><span class="varname">site-of-origin</span></i></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">ipv4-address</span></i> <strong><span>soo</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907765440__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ipv4-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv4 address of a BGP peer.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">site-of-origin</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the SoO attribute.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The SoO attribute value can be expressed in any of the following formats:</p>
<ul><li>2-byte AS number:4-byte user-defined number, for example, 1:3. The AS number is an integer ranging from 0 to 65535, and the user-defined number is an integer ranging from 0 to 4294967295. The AS number and user-defined number cannot both be set to 0. That is, the SoO must not be 0:0.</li><li>IPv4 address:2-byte user-defined number, for example, 192.168.122.15:1. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number is an integer ranging from 0 to 65535.</li><li>4-byte AS number in integer format:2-byte user-defined number, for example, 65537:3. An AS number ranges from 65536 to 4294967295, and a user-defined number ranges from 0 to 65535.</li><li>4-byte AS number in dotted notation:2-byte user-defined number, for example, 0.0:3 or 0.1:0. A 4-byte AS number in dotted notation is in the format of x.y, where x and y are integers that range from 0 to 65535. A user-defined number also ranges from 0 to 65535. The AS number and user-defined number must not be both 0s. That is, the SoO must not be 0.0:0.</li></ul>
</div>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907765440__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP multi-instance VPN instance IPv4 address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907765440__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907765440__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>In an L3VPN scenario, if the ASs where two VPN sites reside use private AS numbers, the AS numbers of the two VPN sites may be the same. As a result, different sites in the same VPN cannot communicate with each other. In this case, you need to run the <b><span class="cmdname">peer substitute-as</span></b> command on the PE to enable AS number substitution.<p></p>
<span>However</span>, enabling AS number substitution causes another problem. When multiple CEs at a VPN site access different PEs on the L3VPN backbone network through BGP and routing protocols are deployed between the CEs, if AS number substitution is configured on the PEs, the AS numbers of the VPN routes at the VPN site will be replaced on the PEs. In this case, the routes may be sent back to the VPN site through the backbone network and other CEs. As a result, a routing loop occurs. To solve this problem, run the <b><span class="cmdname">peer soo</span></b> command on the PEs to configure the SoO feature for the specified CE.<p></p>
<span>After this command is run on a PE</span>, the PE adds the SoO attribute to the routes received from a CE and advertises the routes to other PE peers. When advertising these routes to the connected CE, the other PE peers check the SoO attribute carried in the VPN routes. If the SoO attribute is the same as the locally configured SoO attribute, the PEs do not advertise the routes to the CE. This prevents routing loops in the VPN site.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>After the <b><span class="cmdname">peer substitute-as</span></b> command is run, the AS number of the route is replaced, which may cause routing loops. To solve this problem, run the <b><span class="cmdname">peer soo</span></b> command to configure the SoO feature. Disabling the SoO feature may cause routing loops. Therefore, exercise caution when running the <b><span class="cmdname">undo peer soo</span></b> command.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907765440__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure SoO for BGP peers.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>route-distinguisher 100:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>vpn-target 111:1 both</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-instance-vpna] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100 instance a</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a] <strong>ipv4-family vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a-vpna] <strong>peer 10.2.3.4 as-number 200</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a-vpna] <strong>peer 10.2.3.4 soo 10.2.2.2:45</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/GROUP-VPNTRT-ROUTE-UPDATE-INTERVAL(BGPVPNTARGET).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BGP-MULI-VRF-GROUP-SOO(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>