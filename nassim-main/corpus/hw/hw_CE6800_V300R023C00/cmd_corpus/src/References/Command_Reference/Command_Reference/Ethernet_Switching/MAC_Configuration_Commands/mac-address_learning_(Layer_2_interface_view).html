
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="mac-address learning (Layer 2 interface view)">
<meta name="DC.subject" content="mac-address learning (Layer 2 interface view)">
<meta name="keywords" content="mac-address learning (Layer 2 interface view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_MAC_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SETMACFDTGERRDN(MACOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SETBDMACLEARNDISABLE(MACOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_MACOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907761616">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>mac-address learning (Layer 2 interface view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907761616"></a><a name="EN-US_CLIREF_0000001907761616"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">mac-address learning (Layer 2 interface view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907761616__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">mac-address learning disable</span></b> command disables MAC address learning.</p>
<p>The <b><span class="cmdname">undo mac-address learning disable</span></b> command enables MAC address learning.</p>
<p>The <b><span class="cmdname">mac-address learning priority</span></b> command sets a MAC address learning priority on an interface.</p>
<p>The <b><span class="cmdname">undo mac-address learning priority</span></b> command restores the default MAC address learning priority on an interface.</p>
</p>
<p>By default, MAC address learning is enabled, the MAC address learning priority is 0.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907761616__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p><b><span class="cmdname">mac-address learning disable </span></b>[ <strong><span>action</span></strong> { <strong><span>discard</span></strong> | <strong><span>forward</span></strong> } ]</p>

<p><b><span class="cmdname">mac-address learning priority </span></b><i><span class="varname">priority-id</span></i></p>

<p><b><span class="cmdname">undo mac-address learning priority</span></b></p>




<p><b><span class="cmdname">undo mac-address learning disable</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907761616__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>action</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates an action that a Layer 2 interface takes when MAC address learning is disabled on the Layer 2 interface.</p>
<p>By default, a Layer 2 interface takes the forward action when MAC address learning is disabled on the Layer 2 interface.</p>
<p>This parameter indicates whether packets are forwarded when a Layer 2 interface does not need to learn MAC addresses.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>discard</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that a Layer 2 interface discards packets with a newly learned MAC address after MAC address learning is disabled on the Layer 2 interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>forward</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that a Layer 2 interface forwards packets with a newly learned MAC address but does not record MAC address entries after MAC address learning is disabled on the Layer 2 interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">priority-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a MAC address learning priority on an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 3. A larger value indicates a higher priority.</p>
</td>
</tr>

</table></div>


</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907761616__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Layer 2 100GE interface view,</span><span>Layer 2 10GE interface view,</span><span>Layer 2 200GE interface view,</span><span>25GE-L2 view,</span><span>400GE-L2 view,</span><span>Layer 2 50GE interface view,</span><span>Layer 2 Eth-Trunk interface view,</span><span>Layer 2 GE interface view,</span><span>Interface group view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907761616__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907761616__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>If a network is stable, MAC address learning can be disabled on an interface or in a VLAN to save space of the MAC address table.<p></p>
<span>After MAC address learning is disabled on an interface</span> or in a VLAN using the <b><span class="cmdname">mac-address learning disable</span></b> command, the device will not learn new MAC addresses from this interface, Bridge Domain (BD) or the interfaces in this VLAN.<p></p>
<span>After MAC address learning is enabled</span>, a device can receive Ethernet frames from other devices, parse the source MAC address of each frame, locate the interface that receives each frame, and add new entries to the MAC address table. After that, when receiving an Ethernet frame destined for the MAC address contained in the MAC address table, the device can search the MAC address table to locate the corresponding outbound interface. This reduces broadcast traffic.<p></p>
<span>For a device whose uplink interface connects to a</span> server and downlink interface connects to user terminals, you can set the MAC address learning priority on the interface connecting the server to a larger value to prevent unauthorized users from intruding the device by forging the server's MAC address. After different MAC address learning priorities are configured on interfaces, if the interfaces learn the same MAC address entry, the MAC address entry learned by the interface with a higher priority overwrites the entry learned by the interface with a lower priority. This mechanism prevents the device from learning forged server MAC address from other interfaces, so that users can access the correct server and normally use network resources.<p></p>
<span>If interfaces have the same MAC address learning priority</span>, you can run the <b><span class="cmdname">mac-address learning priority allow-flapping</span></b> command to disable MAC address entry overwriting on interfaces with the same priority. Both the mac-address learning priority and the <b><span class="cmdname">mac-address learning priority allow-flapping</span></b> commands help improve network security. The differences are as follows:</p>

<ul><li>After the <b><span class="cmdname">mac-address learning priority allow-flapping</span></b> command is executed, the network device can learn forged MAC address after being powered off, but cannot learn correct MAC addresses after being powered on.</li><li>After the <b><span class="cmdname">mac-address learning priority</span></b> command is executed, the network device can learn forged MAC address after being powered off, and can still learn correct MAC addresses after being powered on.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907761616__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the MAC address learning priority on the interface to 3.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>mac-address learning priority 3</strong>
</pre>
</div>

<div class="p"># Disable MAC address learning on the interface.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>mac-address learning disable</strong>
</pre>
</div>


</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_MAC_Configuration_Commands_title.html">MAC Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/SETMACFDTGERRDN(MACOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/SETBDMACLEARNDISABLE(MACOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>