
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="port forwarding-path statistics">
<meta name="DC.subject" content="port forwarding-path statistics">
<meta name="keywords" content="port forwarding-path statistics">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Ethernet_Interface_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CRCERRORDOWN(PICDRIVER).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PORTHIGHPERMODE(PICDRIVER).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="featuretype" content="Interface Management">
<meta name="featuretype" content="Interface Management">
<meta name="DC.Creator" content="SUBSYS_ID_FWM_TRUNK">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942839617">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>port forwarding-path statistics</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942839617"></a><a name="EN-US_CLIREF_0000001942839617"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">port forwarding-path statistics</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942839617__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">port forwarding-path statistics</span></b> command configures a rule for collecting statistics on packets containing specified 5-tuple information.</p>
<p>The <b><span class="cmdname">undo port forwarding-path statistics</span></b> command deletes a rule for collecting statistics on packets containing specified 5-tuple information.</p>
</p>
<p>By default, no rule for collecting statistics on packets containing specified 5-tuple information is configured.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942839617__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">port forwarding-path path-id </span></b><i><span class="varname">pathnum</span></i> { <strong><span>src-ip</span></strong> <i><span class="varname">src-ip-data</span></i> [ <i><span class="varname">srcip-mask-len</span></i> ] | <strong><span>dst-ip</span></strong> <i><span class="varname">dst-ip-data</span></i> [ <i><span class="varname">dstip-mask-len</span></i> ] | <strong><span>protocol</span></strong> { <i><span class="varname">protocolnum</span></i> | <strong><span>tcp</span></strong> [ <strong><span>l4-src-port</span></strong> <i><span class="varname">src-port-data</span></i> | <strong><span>l4-dst-port</span></strong> <i><span class="varname">dst-port-data</span></i> ] <sup>*</sup> | <strong><span>udp</span></strong> [ <strong><span>l4-src-port</span></strong> <i><span class="varname">src-port-data</span></i> | <strong><span>l4-dst-port</span></strong> <i><span class="varname">dst-port-data</span></i> ] <sup>*</sup> } } <sup>*</sup> <strong><span>statistics</span></strong> <strong><span>precedence</span></strong> <i><span class="varname">precedencenum</span></i></p>

<p><b><span class="cmdname">undo port forwarding-path path-id </span></b><i><span class="varname">pathnum</span></i> [ { <strong><span>src-ip</span></strong> <i><span class="varname">src-ip-data</span></i> [ <i><span class="varname">srcip-mask-len</span></i> ] | <strong><span>dst-ip</span></strong> <i><span class="varname">dst-ip-data</span></i> [ <i><span class="varname">dstip-mask-len</span></i> ] | <strong><span>protocol</span></strong> { <i><span class="varname">protocolnum</span></i> | <strong><span>tcp</span></strong> [ <strong><span>l4-src-port</span></strong> <i><span class="varname">src-port-data</span></i> | <strong><span>l4-dst-port</span></strong> <i><span class="varname">dst-port-data</span></i> ] <sup>*</sup> | <strong><span>udp</span></strong> [ <strong><span>l4-src-port</span></strong> <i><span class="varname">src-port-data</span></i> | <strong><span>l4-dst-port</span></strong> <i><span class="varname">dst-port-data</span></i> ] <sup>*</sup> } } <sup>*</sup> <strong><span>statistics</span></strong> <strong><span>precedence</span></strong> <i><span class="varname">precedencenum</span></i> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942839617__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>src-ip</span></strong> <i><span class="varname">src-ip-data</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a source IPv4 address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">srcip-mask-len</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the mask length of the source IPv4 address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 1 to 32. The default value is 32.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>dst-ip</span></strong> <i><span class="varname">dst-ip-data</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a destination IPv4 address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">dstip-mask-len</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the mask length of the destination IPv4 address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 1 to 32. The default value is 32.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>protocol</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the protocol type.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">protocolnum</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the protocol number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 255. The default value is 0.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>tcp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the TCP protocol type.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>l4-src-port</span></strong> <i><span class="varname">src-port-data</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the source port number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>l4-dst-port</span></strong> <i><span class="varname">dst-port-data</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the destination port number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>udp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the UDP protocol type.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>precedence</span></strong> <i><span class="varname">precedencenum</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a priority corresponding to the path ID.</p>
<p>A smaller value of precedencenum indicates a higher priority.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 1 to 2000.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>path-id</span></strong> <i><span class="varname">pathnum</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the path ID.</p>
<p>A path ID indicates a matching rule.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 1 to 128.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942839617__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942839617__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942839617__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>The 5-tuple information includes the source and destination IP addresses, source/destination port numbers in TCP or UDP packets, and protocol type. Traffic transmitted on each device interface contains different 5-tuple information. If the outbound interface is an Eth-Trunk or packets have multiple ECMP next hops, you can use the <b><span class="cmdname">port forwarding-path statistics</span></b> command to configure rules for collecting statistics on the packets containing specified 5-tuple information and the <b><span class="cmdname">display port forwarding-path statistics</span></b> command to check the statistics (including the outbound interface), facilitating fault locating and traffic forwarding path identification.</p>
<p><strong>Precautions</strong></p>
<p>The <b><span class="cmdname">port forwarding-path statistics</span></b> command can be used to collect statistics only on IPv4 packets.<p></p>
<span>The path ID specified by pathnum and priority specified</span> by precedencenum are globally unique and cannot be overwritten. To change a traffic statistics collection rule, you need to delete the current settings for the rule and then configure a new rule.<p></p>
<span>If a packet matches multiple rules</span>, only the rule with the highest priority takes effect for this packet.<p></p>
<span>For tunnel packets</span>, the system collects statistics on packets by matching 5-tuple information in tunnel-encapsulated outer packets. In addition, the system matches 5-tuple information in tunnel-encapsulated outer packets in both the inbound and outbound directions.<p></p>
<span>Running the</span> <b><span class="cmdname">port forwarding-path statistics</span></b> command requires a large number of ACL rules to be dynamically delivered, which may exhaust ACL resources. Consequently, an alarm indicating that ACL resource usage exceeds the limit may be generated. Due to insufficient ACL resources, the outbound interface of the traffic may fail to be queried. In this case, you can run the display system tcam fail-record [ slot slot-id ] command in any view to check information on the TCAM delivery failure and determine whether ACL resources are insufficient.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942839617__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a rule for collecting statistics on the packets containing specified 5-tuple information.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>port forwarding-path path-id 2 src-ip 10.1.1.1 32 dst-ip 10.2.2.2 32 statistics precedence 10</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Ethernet_Interface_Configuration_Commands_title.html">Ethernet Interface Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/CRCERRORDOWN(PICDRIVER).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PORTHIGHPERMODE(PICDRIVER).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>