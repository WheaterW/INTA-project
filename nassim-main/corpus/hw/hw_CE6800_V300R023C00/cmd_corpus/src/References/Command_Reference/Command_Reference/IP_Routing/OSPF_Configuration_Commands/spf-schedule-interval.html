
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="spf-schedule-interval">
<meta name="DC.subject" content="spf-schedule-interval">
<meta name="keywords" content="spf-schedule-interval">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPF-SILENT-INTERFACE(OSPFCOMMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPF-STUB-AREA(OSPFCOMMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_OSPFCOMMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907763284">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>spf-schedule-interval</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907763284"></a><a name="EN-US_CLIREF_0000001907763284"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">spf-schedule-interval</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907763284__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">spf-schedule-interval</span></b> command sets the interval for OSPF to calculate routes.</p>
<p>The <b><span class="cmdname">undo spf-schedule-interval</span></b> command restores the default setting.</p>
</p>
<p>By default, the intelligent timer is enabled. The maximum interval for the SPF calculation is 5000 ms, the initial interval is 50 ms, and the Holdtime interval is 200 ms.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907763284__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">spf-schedule-interval </span></b><i><span class="varname">interval1</span></i></p>

<p><b><span class="cmdname">spf-schedule-interval intelligent-timer </span></b><i><span class="varname">max-interval</span></i> <i><span class="varname">start-interval</span></i> <i><span class="varname">hold-interval</span></i> [ <strong><span>conservative</span></strong> ]</p>

<p><b><span class="cmdname">spf-schedule-interval millisecond </span></b><i><span class="varname">interval2</span></i></p>

<p><b><span class="cmdname">undo spf-schedule-interval</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907763284__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interval1</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the interval for OSPF to perform the SPF calculation.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 1 to 10, in seconds.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>intelligent-timer</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the interval for the SPF calculation of OSPF through an intelligent timer.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">max-interval</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum interval for OSPF to perform the SPF calculation.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value ranges from 1 to 300000, in milliseconds.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">start-interval</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the initial interval for OSPF to perform the SPF calculation.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 60000, in milliseconds.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">hold-interval</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the Holdtime interval for OSPF to perform the SPF calculation.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 60000, in milliseconds.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>conservative</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables conservative mode for OSPF to perform the SPF calculation.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>millisecond</span></strong> <i><span class="varname">interval2</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the interval for OSPF to perform the SPF calculation.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value ranges from 1 to 10000, in milliseconds.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907763284__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>OSPF view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907763284__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907763284__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p>Based on the LSDB, the device that runs OSPF calculates the SPT with itself as the root based on the SPF arithmetic, and determines the next hop to the destination network according to the SPT. By adjusting SPF calculation interval, you can reduce bandwidth and router resources that are consumed by the frequent change of the network.<p></p>
<span>On a network where the convergence time of routes</span> is required to be shorter, set millisecond as the unit of interval to increase the frequency of calculating routes. This increases route convergence. In other networking environments, the default value is recommended.<p></p>
<span>When an OSPF LSDB changes</span>, shortest paths must be recalculated. If a network changes frequently, the shortest path is calculated accordingly, resulting in excessive consumption of system resources, affecting device efficiency. You can configure an intelligent timer and set a proper interval for the SPF calculation to prevent the excessive consumption of device memory and bandwidth resources.<p></p>
<span>If the intelligent timer is enabled using intelligent</span>-timer, the interval for SPF calculation is as follows:</p>

<ul><li>The initial interval for SPF calculation is specified by the parameter start-interval.</li><li>The interval for the SPF calculation for the nth (nâ¥2) time is equal to hold-interval x 2^(n-2).</li><li>When the interval specified by hold-interval x 2^(n-2) reaches the maximum interval specified by max-interval, OSPF always uses the maximum interval for SPF calculation.</li><li>If the interval between the last SPF calculation and the current SPF calculation exceeds max-interval and no flapping occurs within max-interval, the intelligent timer exits.</li><li>If no flapping occurs in the previous SPF calculation but flapping occurs in the current SPF calculation, the SPF calculation is delayed by start-interval. After the SPF calculation is complete, the current interval is used.<p></p>
<span>If a common timer is used</span>, the interval for the SPF calculation is as follows:</li><li>The interval for the first SPF calculation is 0. That is, the SPF calculation is performed immediately after the first route change is received.</li><li>The interval for the SPF calculation for the nth (nâ¥2) time is specified by interval1 or millisecond interval2.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907763284__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the interval for OSPF to calculate routes to 6s.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospf 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospf-100] <strong>spf-schedule-interval 6</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">OSPF Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/OSPF-SILENT-INTERFACE(OSPFCOMMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/OSPF-STUB-AREA(OSPFCOMMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>