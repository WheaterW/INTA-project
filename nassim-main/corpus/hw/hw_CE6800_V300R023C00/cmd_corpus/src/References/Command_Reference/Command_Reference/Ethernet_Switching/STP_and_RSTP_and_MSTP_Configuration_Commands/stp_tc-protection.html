
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="stp tc-protection">
<meta name="DC.subject" content="stp tc-protection">
<meta name="keywords" content="stp tc-protection">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/STPTCNOTIFY(MSTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PROCSTPTCPROTECTION(MSTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_MSTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907602064">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>stp tc-protection</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907602064"></a><a name="EN-US_CLIREF_0000001907602064"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">stp tc-protection</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907602064__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">stp tc-protection</span></b> command enables the TC BPDU protection function for an MSTP process.</p>
<p>The <b><span class="cmdname">undo stp tc-protection</span></b> command disables the TC BPDU protection function of the MSTP process.</p>
</p>
<p><p>
By default, the TC BPDU protection function of an MSTP process is disabled. That is, each time when an MSTP process receives a TC BPDU, the MSTP process updates the forwarding entries. The time for a device to process the maximum number of TC BPDUs is the Hello time. A device processes one TC BPDU within a specified period.
</p>
<p>
The Hello time is the value of the Hello timer and specifies the interval at which the device sends BPDUs. You can configure the Hello time using the stp timer hello command.
</p>
</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907602064__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">stp tc-protection </span></b>[ <strong><span>threshold</span></strong> <i><span class="varname">threshold</span></i> | <strong><span>interval</span></strong> <i><span class="varname">interval-value</span></i> ]</p>

<p><b><span class="cmdname">undo stp tc-protection </span></b>[ <strong><span>threshold</span></strong> | <strong><span>interval</span></strong> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907602064__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>threshold</span></strong> <i><span class="varname">threshold</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum number of TC BPDUs that a device processes within a specified period.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>interval</span></strong> <i><span class="varname">interval-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the time for a device to process the maximum number of TC BPDUs.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 600, in seconds.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907602064__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907602064__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907602064__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>On a Layer 2 network running STP, a device that receives TC BPDUs will delete its MAC and ARP entries. Frequent deletion operations lead to high CPU usage. In this case, run the <b><span class="cmdname">stp tc-protection</span></b> command to enable the TC BPDU protection function.<p></p>
<span>After the TC BPDU protection function is enabled using</span> the <b><span class="cmdname">stp tc-protection</span></b> command, you can run the <b><span class="cmdname">stp tc-protection interval</span></b> command to set the time for a device to process the maximum number of TC BPDUs specified by the <b><span class="cmdname">stp tc-protection threshold</span></b> command. If the number of received TC BPDUs exceeds the maximum number, the device processes the excess TC BPDUs after the time specified by the <b><span class="cmdname">stp tc-protection interval</span></b> command expires. For example, if the time is set to 10 seconds and the maximum number is set to 5, when a device receives TC BPDUs, the device processes only the first 5 TC BPDUs within 10 seconds and processes the other TC BPDUs after the time expires. In this way, the device does not frequently update its MAC and ARP entries, reducing CPU usage.</p>
</p>
<p><strong>Prerequisites</strong></p>
<p><p>The TC BPDU protection function has been enabled using the <b><span class="cmdname">stp tc-protection</span></b> command.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<p><p>The device processes only the maximum number of TC BPDUs specified by the <b><span class="cmdname">stp tc-protection threshold</span></b> command within the time specified by the <b><span class="cmdname">stp tc-protection interval</span></b> command. Other TC BPDUs are delayed processing, which may slow down spanning tree convergence.</p>
</p>
<p><strong>Follow-up Procedure</strong></p>
<p><p>Run the <b><span class="cmdname">stp tc-protection threshold</span></b> command to set the maximum number of TC BPDUs that the device processes within a specified time.<p></p>
<span>Run the</span> <b><span class="cmdname">stp tc-protection interval</span></b> command to set the time for a device to process the maximum number of TC BPDUs.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>TC alarms can be reported only after TC BPDU protection is enabled using the <b><span class="cmdname">stp tc-protection</span></b> command.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907602064__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable TC BPDU protection.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>stp tc-protection</strong>
</pre>
</div>

<div class="p"># Set the time for a device to process the maximum number of TC BPDUs to 10 seconds.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>stp tc-protection</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>stp tc-protection interval 10</strong>
</pre>
</div>

<div class="p"># Configure a device to process a maximum of 5 TC BPDUs within a specified period.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>stp tc-protection</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>stp tc-protection threshold 5</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">STP/RSTP/MSTP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/STPTCNOTIFY(MSTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PROCSTPTCPROTECTION(MSTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>