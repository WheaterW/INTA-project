
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="graceful-restart peer-reset (BGP multi-instance view)">
<meta name="DC.subject" content="graceful-restart peer-reset (BGP multi-instance view)">
<meta name="keywords" content="graceful-restart peer-reset (BGP multi-instance view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-INSTANCE-GRACEFUL-RESTART(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-INSTANCE-GR-TIMER-RESTART(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942844397">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>graceful-restart peer-reset (BGP multi-instance view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942844397"></a><a name="EN-US_CLIREF_0000001942844397"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">graceful-restart peer-reset (BGP multi-instance view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942844397__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">graceful-restart peer-reset</span></b> command enables the device to reset a BGP connection in GR mode.</p>
<p>The <b><span class="cmdname">undo graceful-restart peer-reset</span></b> command restores the default configuration.</p>
</p>
<p>By default, the device is not enabled to reset a BGP connection in GR mode.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942844397__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">graceful-restart peer-reset</span></b></p>

<p><b><span class="cmdname">undo graceful-restart peer-reset</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942844397__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942844397__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP multi-instance view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942844397__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942844397__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>Currently, BGP does not support dynamic capability negotiation. Therefore, BGP capability changes cause peer relationships to be re-established and routing entries to be deleted, interrupting services. To solve this problem, run the <b><span class="cmdname">graceful-restart peer-reset</span></b> command to enable the device to reset BGP connections in GR mode after GR is enabled globally.<p></p>
<span>After the function of resetting a BGP connection in</span> GR mode is configured, if a BGP peer relationship in another address family is established based on the BGP IPv4 unicast peer session, BGP enters GR and renegotiates capabilities. During this process, the BGP IPv4 unicast peer session is re-established. The original routing entries, however, are not deleted, and the forwarding module can still guide packet forwarding according to the routing information. This ensures that IPv4 services are not interrupted.<p></p>
<span>It is recommended that you enable this function when</span> establishing BGP peers.</p>
</p>
<p><strong>Prerequisites</strong></p>
<p><p>GR has been enabled using the <b><span class="cmdname">graceful-restart</span></b> command in the BGP view. Running the <b><span class="cmdname">graceful-restart</span></b> command for the first time deletes and re-establishes all sessions and instances, causing service interruptions.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>If the <b><span class="cmdname">graceful-restart</span></b> command is run but the <b><span class="cmdname">graceful-restart peer-reset</span></b> command is not run, the peer relationship reestablishment triggered by the reset bgp command or dynamic capability negotiation will not reset the BGP connection in GR mode. The peer relationship reestablishment triggered by the reset bgp command or dynamic capability negotiation resets the BGP connection in GR mode only after both the graceful-restart and <b><span class="cmdname">graceful-restart peer-reset</span></b> commands are run.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942844397__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable the device to reset a BGP connection in GR mode.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>graceful-restart</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>bgp 100 instance a</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a] <strong>graceful-restart peer-reset</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/BGP-MULI-INSTANCE-GRACEFUL-RESTART(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BGP-MULI-INSTANCE-GR-TIMER-RESTART(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>