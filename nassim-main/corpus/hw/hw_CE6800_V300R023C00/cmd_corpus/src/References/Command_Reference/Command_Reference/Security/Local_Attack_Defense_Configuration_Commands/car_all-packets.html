
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="car all-packets">
<meta name="DC.subject" content="car all-packets">
<meta name="keywords" content="car all-packets">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-Local_Attack_Defense_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/AUTO-SOURCE-TRACE_STATISTICS_INTERVAL.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CAR_PACKET-TYPE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="DC.Creator" content="SUBSYS_ID_CPUDEFEND">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907607968">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>car all-packets</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907607968"></a><a name="EN-US_CLIREF_0000001907607968"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">car all-packets</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907607968__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">car all-packets</span></b> command limits the number of packets sent to the CPU per second.</p>
<p>The <b><span class="cmdname">undo car all-packets</span></b> command restores the default maximum number of packets sent to the CPU per second.</p>
</p>
<p>By default, you can run the display cpu-defend configuration command to view the CAR of packets sent to the CPU.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907607968__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">car all-packets pps </span></b><i><span class="varname">pps-value</span></i></p>

<p><b><span class="cmdname">undo car all-packets</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907607968__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pps</span></strong> <i><span class="varname">pps-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum number of packets that are sent to the CPU per second.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer ranging from 5000 to 100000.</p>
</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907607968__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Attack defense policy view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907607968__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907607968__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>If a large number of packets are sent to the CPU, CPU performance deteriorates. The device limits the number of packets sent to the CPU per second to protect the CPU. The device provides 2-level CAR:</p>

<ul><li>Level-1 CAR: limits the number of packets based on packet types using the <b><span class="cmdname">car</span></b> command.</li><li>Level-2 CAR: limits the number of all packets sent to the CPU regardless of the protocol types or queues. This function is configured using the <b><span class="cmdname">car all-packets</span></b> command.<p></p>
<span>The</span> <b><span class="cmdname">car all-packets</span></b> command is applicable to the scenario where burst packets are sent to the CPU. The maximum number of packets sent to the CPU specified using the <b><span class="cmdname">car all-packets</span></b> command must be smaller than that specified by level-1 CAR; otherwise, the <b><span class="cmdname">car all-packets</span></b> command takes no effect.</li></ul>
<p><strong>Precautions</strong></p>
<p>If you run the <b><span class="cmdname">car all-packets</span></b> command in the same attack defense policy view multiple times, only the latest configuration takes effect.<p></p>
<span>The</span> <b><span class="cmdname">car all-packets</span></b> command is required only when the current CAR configuration cannot reduce the high CPU usage.<p></p>
<span>When the actual and configured rates of packets sent</span> to the CPU are large, the CPU usage may be high and the performance may deteriorate. In the worst situation, the device breaks.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907607968__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the attack defense policy named test to limit the rate of packets sent to the CPU to 5000 pps.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>cpu-defend policy test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-cpu-defend-policy-test] <strong>car all-packets pps 5000</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-Local_Attack_Defense_Configuration_Commands_title.html">Local Attack Defense Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/AUTO-SOURCE-TRACE_STATISTICS_INTERVAL.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/CAR_PACKET-TYPE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>