
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="port link-flap">
<meta name="DC.subject" content="port link-flap">
<meta name="keywords" content="port link-flap">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Ethernet_Interface_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SET-PORT-DETECT-TIME(PICDRIVER).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/LINK-FLAPENABLE(PICDRIVER).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="Interface Management">
<meta name="featuretype" content="Interface Management">
<meta name="featuretype" content="Interface Management">
<meta name="DC.Creator" content="SUBSYS_ID_PICDRIVER">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000002194483477">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>port link-flap</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000002194483477"></a><a name="EN-US_CLIREF_0000002194483477"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">port link-flap</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000002194483477__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">port link-flap</span></b> command sets the link flapping detection interval and maximum number of link flapping events on an interface.</p>
<p>The <b><span class="cmdname">undo port link-flap</span></b> command restores the default link flapping detection interval and maximum number of link flapping events on an interface.</p>
</p>
<p>By default, the link flapping detection interval on an interface is 10s and the maximum number of link flapping events is 5.The threshold configuration for the second group of link flapping does not take effect.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000002194483477__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">port link-flap </span></b>{ <strong><span>interval</span></strong> <i><span class="varname">interval-value</span></i> [ <strong><span>threshold</span></strong> <i><span class="varname">threshold-value</span></i> ] | <strong><span>threshold</span></strong> <i><span class="varname">threshold-value</span></i> } [ <strong><span>second-interval</span></strong> <i><span class="varname">second-interval-value</span></i> <strong><span>second-threshold</span></strong> <i><span class="varname">second-threshold-value</span></i> ]</p>






<p><b><span class="cmdname">undo port link-flap </span></b>{ <strong><span>interval</span></strong> <i><span class="varname">interval-value</span></i> <strong><span>threshold</span></strong> <i><span class="varname">threshold-value</span></i> <strong><span>second-interval</span></strong> <i><span class="varname">second-interval-value</span></i> <strong><span>second-threshold</span></strong> <i><span class="varname">second-threshold-value</span></i> }</p>

<p><b><span class="cmdname">undo port link-flap </span></b>{ <strong><span>threshold</span></strong> [ <i><span class="varname">threshold-value</span></i> ] }</p>

<p><b><span class="cmdname">undo port link-flap </span></b>{ <strong><span>interval</span></strong> [ <i><span class="varname">interval-value</span></i> ] <strong><span>threshold</span></strong> [ <i><span class="varname">threshold-value</span></i> ] }</p>

<p><b><span class="cmdname">undo port link-flap </span></b>{ <strong><span>interval</span></strong> [ <i><span class="varname">interval-value</span></i> ] }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000002194483477__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>interval</span></strong> <i><span class="varname">interval-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the link flapping detection interval on an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The&middot;value&middot;is&middot;an&middot;integer&middot;that&middot;ranges&middot;from&middot;5&middot;to&middot;86400,&middot;in&middot;seconds.&middot;The&middot;default&middot;value&middot;is&middot;10.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>threshold</span></strong> <i><span class="varname">threshold-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum number of link flapping events on an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is 0 or an integer that ranges from 2 to 1200. The default value is 5.</p>
<p>If the value is 0, link flapping protection is disabled on the interface.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>second-interval</span></strong> <i><span class="varname">second-interval-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the second link flapping detection interval on an interface. You can configure two link flapping detection intervals and two maximum numbers of link flapping events. An alarm is generated when either group of the intervals and maximum numbers is reached.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 5 to 86400.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>second-threshold</span></strong> <i><span class="varname">second-threshold-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the second maximum number of link flapping events on an interface. You can configure two link flapping detection intervals and two maximum numbers of link flapping events. An alarm is generated when either group of the intervals and maximum numbers is reached.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 2 to 1200.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000002194483477__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Layer 2 100GE interface view,</span><span>100GE interface view,</span><span>Layer 2 10GE interface view,</span><span>10GE interface view,</span><span>Layer 2 200GE interface view,</span><span>200GE interface view,</span><span>25GE-L2 view,</span><span>25GE interface view,</span><span>400GE-L2 view,</span><span>400GE interface view,</span><span>Layer 2 50GE interface view,</span><span>50GE interface view,</span><span>Interface group view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000002194483477__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000002194483477__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>After link flapping protection is enabled on the device, you can set the link flapping detection interval and maximum number of link flapping events on an interface. When the device receives an interface Up/Down message, the device checks the number of interface flapping events that occur within the specified link flapping detection interval. If the number of interface flapping events reaches the maximum value, the device sets the status of the interface to Error-Down.</p>
<p><strong>Precautions</strong></p>
<p>This command must be used together with the <b><span class="cmdname">port link-flap trigger error-down</span></b> command. After an Ethernet interface is enabled to transit to the Error-Down state due to link flapping using the <b><span class="cmdname">port link-flap trigger error-down</span></b> command, run the <b><span class="cmdname">port link-flap</span></b> command to set the link flapping detection time and number of link flappings on the interface.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000002194483477__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the link flapping interval to 50 seconds and the number of link flapping times to 6 on <span>100GE</span><span>1/0/1</span>.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port link-flap interval 50 threshold 6</strong>
</pre>
</div>


<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Description of the <b><span class="cmdname">port link-flap</span></b> command output</caption>
    
    
<thead align="left">
<tr>
<th align="left" class="cellrowborder" valign="top" width="44.5%" id="mcps1.3.7.2.2.3.1.1" liSelected="liSelected">Item</th>

<th align="left" class="cellrowborder" valign="top" width="55.50000000000001%" id="mcps1.3.7.2.2.3.1.2" liSelected="liSelected">Description</th>

</tr>

</thead>

<tbody>
<tr>

<td class="cellrowborder" valign="top" width="44.5%" headers="mcps1.3.7.2.2.3.1.1 ">port link-flap interval</td>

<td class="cellrowborder" valign="top" width="55.50000000000001%" headers="mcps1.3.7.2.2.3.1.2 "><p>Link flapping interval.</p>
</td>

</tr>

</tbody>

</table>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Ethernet_Interface_Configuration_Commands_title.html">Ethernet Interface Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/SET-PORT-DETECT-TIME(PICDRIVER).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/LINK-FLAPENABLE(PICDRIVER).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>