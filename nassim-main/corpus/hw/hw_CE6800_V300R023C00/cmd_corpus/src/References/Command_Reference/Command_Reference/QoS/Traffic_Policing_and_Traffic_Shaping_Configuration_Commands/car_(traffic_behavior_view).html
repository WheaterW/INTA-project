
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="car (traffic behavior view)">
<meta name="DC.subject" content="car (traffic behavior view)">
<meta name="keywords" content="car (traffic behavior view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-Traffic_Policing_and_Traffic_Shaping_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CAR_SHARE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Traffic Policing">
<meta name="featurename" content="Traffic Shaping">
<meta name="featuretype" content="QoS">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Traffic Policing">
<meta name="featurename" content="Traffic Shaping">
<meta name="featuretype" content="QoS">
<meta name="featurename" content="Traffic Policing">
<meta name="featurename" content="Traffic Shaping">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="DC.Creator" content="SUBSYS_ID_DC_MQC">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942847897">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>car (traffic behavior view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942847897"></a><a name="EN-US_CLIREF_0000001942847897"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">car (traffic behavior view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942847897__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">car</span></b> command configures traffic policing in a traffic behavior.</p>
<p>The undo car command deletes traffic policing from a traffic behavior.</p>
</p>
<p>By default, traffic policing is not configured in a traffic behavior.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942847897__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">



<p><b><span class="cmdname">undo car</span></b></p>


<p><b><span class="cmdname">car </span></b>{ <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i> [ <strong><span>kbps</span></strong> | <strong><span>mbps</span></strong> | <strong><span>gbps</span></strong> ] [ <strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i> [ <strong><span>kbps</span></strong> | <strong><span>mbps</span></strong> | <strong><span>gbps</span></strong> ] ] } [ <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i> [ <strong><span>bytes</span></strong> | <strong><span>kbytes</span></strong> | <strong><span>mbytes</span></strong> ] <strong><span>pbs</span></strong> <i><span class="varname">pbs-value</span></i> [ <strong><span>bytes</span></strong> | <strong><span>kbytes</span></strong> | <strong><span>mbytes</span></strong> ] ] [ <strong><span>share</span></strong> ] [ <strong><span>mode</span></strong> { <strong><span>color-blind</span></strong> | <strong><span>color-aware</span></strong> } ] [ <strong><span>green</span></strong> <strong><span>pass</span></strong> [ <strong><span>service-class</span></strong> <i><span class="varname">class</span></i> <strong><span>color</span></strong> <i><span class="varname">color</span></i> ] | <strong><span>yellow</span></strong> { <strong><span>discard</span></strong> | <strong><span>pass</span></strong> [ <strong><span>service-class</span></strong> <i><span class="varname">class</span></i> <strong><span>color</span></strong> <i><span class="varname">color</span></i> ] } | <strong><span>red</span></strong> { <strong><span>discard</span></strong> | <strong><span>pass</span></strong> [ <strong><span>service-class</span></strong> <i><span class="varname">class</span></i> <strong><span>color</span></strong> <i><span class="varname">color</span></i> ] } ] <sup>*</sup></p>



</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942847897__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the committed information rate (CIR), which is the guaranteed average transmission rate.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer in the range from 24 to 400000000.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>kbps</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the rate is expressed in kbit/s.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>mbps</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the rate is expressed in Mbit/s.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>gbps</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the rate is expressed in Gbit/s.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the peak information rate (PIR), which is the maximum rate of traffic that can pass through an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer that ranges from 1 to 400000000.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the committed burst size (CBS), which is the average volume of burst traffic that can pass through an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer that ranges from 1 to 33554432.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>bytes</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the CBS is expressed in bytes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>kbytes</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the CBS is expressed in kbytes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>mbytes</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the CBS is expressed in mbytes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pbs</span></strong> <i><span class="varname">pbs-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the peak burst size (PBS), which is the maximum volume of burst traffic that can pass through an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer that ranges from 1 to 33554432.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>share</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the level-1 shared CAR. If a traffic behavior is bound to a traffic classifier that contains multiple matching rules, all traffic matching the traffic classifier is restricted by the level-1 shared CAR.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>mode</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the color mode for traffic policing.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>color-blind</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the color-blind mode. In color-blind mode, the original packet color does not affect the traffic policing action.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>green</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the action taken for packets if the packet rate is less than or equal to the CIR value.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The default value is pass.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pass</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Allows packets to pass through.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>yellow</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the action taken for packets if the packet rate is greater than the CIR value and less than or equal to the PIR value.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The default value is pass.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>discard</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Discards packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>red</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the action taken for packets if the packet rate is greater than the PIR value.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The default value is discard.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>color-aware</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the color-aware mode. In color-aware mode, the original packet color affects the traffic policing action.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>service-class</span></strong> <i><span class="varname">class</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><p>Specifies the class of service (CoS).</p>
<ul><li>Assured Forwarding (AF): applies to key data services that require guaranteed bandwidth and low delay. Provides forwarding quality assurance for the traffic that does not exceed the bandwidth limit, and lowers the CoS for the traffic that exceeds the bandwidth limit and forwards the traffic instead of discarding the traffic.</li><li>Best-Effort (BE): applies to best-effort services that do not require strict QoS guarantee. BE focuses only on reachability and does not have any requirements on other aspects. For example, traditional IP packet transmission is in BE mode.</li><li>Expedited Forwarding (EF): indicates the highest QoS on a DiffServ network. It is used for services with low packet loss rate, low delay, and high bandwidth. In any case, the information traffic can obtain a rate equal to or higher than the configured rate.</li><li>Class Selector (CS): indicates the class selection code. The CoS represented by CS is the same as that represented by IP Precedence.</li></ul>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value can be af1, af2, af3, af4, be, cs6, cs7, or ef.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>color</span></strong> <i><span class="varname">color</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the color corresponding to the CoS.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value can be:</p>
<ul><li>red</li><li>green</li><li>yellow</li></ul>
</div>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942847897__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Traffic behavior view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942847897__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942847897__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Flow-based traffic policing controls traffic that matches traffic classification rules and discards the excess traffic to limit traffic within a proper range and to protect network resources.<p></p>
<span>When data is sent from a high-speed link to a low-speed</span> link, the bandwidth on the interface of the low-speed link is insufficient. As a result, a large number of packets are discarded. To solve this problem, configure traffic policing for outgoing traffic on the interface of the high-speed link. The interface then discards the packets whose rate exceeds the traffic policing rate so that the outgoing traffic rate is limited within a proper range. You can also configure traffic policing for incoming traffic on the interface of the low-speed link. The interface then discards the received packets whose rate exceeds the traffic policing rate.<p></p>
<span>Traffic policing based on traffic policies controls</span> rates of packets of different types.</p>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>When a traffic policy containing traffic policing actions is applied, you do not need to run the <b><span class="cmdname">undo traffic-policy</span></b> command to unbind the traffic policy if you need to modify traffic policing parameters.</li><li>It is recommended that the CIR be greater than 2 Mbit/s.</li><li>If the class of service (CoS) of a packet is re-marked as EF, BE, CS6, or CS7, the packet can be re-marked only green.</li><li>If you run this command multiple times in the same traffic behavior view, only the latest configuration takes effect.</li><li>The relationships between CIR, PIR, CBS, and PBS in this command are as follows:</li><li>It is recommended that the PIR be greater than the configured CIR.</li><li>It is recommended that the CBS be greater than the configured CIR.</li><li>It is recommended that the PBS be greater than the configured PIR.</li><li>The following is recommended: PBS â¥ CBS = CIR/8 x (1-1.5) x 1000</li><li>If a DiffServ domain is bound to the inbound interface, traffic policing is configured, and the CBS value and PBS value are set:</li><li>If the color-blind mode is used in traffic policing, the packet color is determined by the packet color defined in traffic policing, regardless of the packet color defined in the DiffServ domain.</li><li>If the color-aware mode is used in traffic policing and the two color marking rules conflict and take effect for the same packet, the packet color complies with the following rules:</li><li>If the packet color defined in the DiffServ domain is green and that defined in traffic policing is yellow, the final packet color is yellow.</li><li>If the packet color defined in the DiffServ domain is green and that defined in traffic policing is red, the final packet color is red.</li><li>If the packet color defined in the DiffServ domain is yellow and that defined in traffic policing is green, the final packet color is yellow.</li><li>If the packet color defined in the DiffServ domain is yellow and that defined in traffic policing is red, the final packet color is red.</li><li>If the packet color defined in the DiffServ domain is red and that defined in traffic policing is green, the final packet color is red.</li><li>If the packet color defined in the DiffServ domain is red and that defined in traffic policing is yellow, the final packet color is red.</li><li>If a CoS is specified for packets with a specified color and the color corresponding to the CoS is specified, the final packet color is determined by the color corresponding to the CoS.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942847897__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">


<div class="p"># Configure traffic policing in the traffic behavior b1 as follows: Set the CIR to 200000 kbit/s and the PIR to 2500000 kbit/s. Then apply the traffic policy p1 containing the traffic behavior to the inbound direction of <span>100GE</span><span>1/0/1</span>.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>traffic classifier c1 type and</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-classifier-c1] <strong>if-match any</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-classifier-c1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>traffic behavior b1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-behavior-b1] <strong>car cir 200000 kbps pir 2500000 kbps</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-behavior-b1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>traffic policy p1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-trafficpolicy-p1] <strong>classifier c1 behavior b1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-trafficpolicy-p1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>traffic-policy p1 inbound</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-Traffic_Policing_and_Traffic_Shaping_Commands_title.html">Traffic Policing and Traffic Shaping Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/CAR_SHARE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>