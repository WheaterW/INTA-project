
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="arp l2-proxy learning dynamic-user">
<meta name="DC.subject" content="arp l2-proxy learning dynamic-user">
<meta name="keywords" content="arp l2-proxy learning dynamic-user">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_ARP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CFGBDCONFIGGW(ARPSERVICEOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CFGBDCONFIG_3(ARPSERVICEOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="ARP">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Creator" content="SUBSYS_ID_ARPSERVICEOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942841525">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>arp l2-proxy learning dynamic-user</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942841525"></a><a name="EN-US_CLIREF_0000001942841525"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">arp l2-proxy learning dynamic-user</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942841525__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">arp l2-proxy learning dynamic-user disable</span></b> command disables ARP snooping entry learning on an interface.</p>
<p>The <b><span class="cmdname">undo arp l2-proxy learning dynamic-user disable</span></b> command enables ARP snooping entry learning on an interface.</p>
<p>The <b><span class="cmdname">arp l2-proxy learning dynamic-user max-user</span></b> command configures the maximum number of ARP snooping entries that an interface can learn.</p>
<p>The <b><span class="cmdname">undo arp l2-proxy learning dynamic-user max-user</span></b> command restores the default configuration.</p>
</p>
<p>By default, ARP snooping entry learning is enabled. The default maximum number of ARP snooping entries that an interface can learn is set to 0, indicating that the maximum number of ARP snooping entries is not limited.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942841525__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">arp l2-proxy learning dynamic-user disable</span></b></p>

<p><b><span class="cmdname">arp l2-proxy learning dynamic-user max-user </span></b><i><span class="varname">max-user-number</span></i></p>

<p><b><span class="cmdname">undo arp l2-proxy learning dynamic-user disable</span></b></p>

<p><b><span class="cmdname">undo arp l2-proxy learning dynamic-user max-user </span></b>[ <i><span class="varname">max-user-number</span></i> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942841525__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>max-user</span></strong> <i><span class="varname">max-user-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum number of ARP snooping entries that an interface can learn.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 131072.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942841525__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100GE Layer 2 sub-interface view,</span><span>200GE Layer 2 sub-interface view,</span><span>400GE Layer 2 sub-interface view,</span><span>50GE Layer 2 sub-interface view,</span><span>Eth-Trunk Layer 2 sub-interface view,</span><span>Layer 2 sub-interface view,</span><span>Interface group view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942841525__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942841525__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>After receiving an ARP request packet, a device broadcasts the packet in its broadcast domain (BD). If a device receives a large number of ARP request packets within a period and broadcasts the packets, many network resources are consumed, causing network congestion. As a result, network performance deteriorates and user services are affected. Layer 2 proxy ARP can relieve the pressure on processing ARP packets by isolating ARP BDs. With this function enabled, a device preferentially uses learned ARP snooping entries to respond to received ARP request packets.<p></p>
<span>When Layer 2 proxy ARP is enabled on a device</span>, ARP snooping is automatically enabled. The device then creates ARP snooping entries by snooping ARP packets. The entries record senders' information. When most users obtain IP addresses through DHCP, attackers may frequently send bogus ARP packets to attack ARP snooping entries, causing Layer 2 proxy ARP failures. To prevent the preceding issue, run the <b><span class="cmdname">arp l2-proxy learning dynamic-user disable</span></b> command to disable ARP snooping entry learning on an interface, or run the arp l2-proxy learning dynamic-user max-use command to configure the maximum number of ARP snooping entries that an interface can learn.</p>
</p>
<p><strong>Prerequisites</strong></p>
<div class="p"><ol><li>A Layer 2 sub-interface has been added to a BD.</li><li>Layer 2 proxy ARP has been enabled using the <b><span class="cmdname">arp l2-proxy enable</span></b> command in the BD view.</li></ol>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942841525__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Disable ARP snooping entry learning on <span>100GE</span> <span>1/0/1</span>.1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bridge-domain 10</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-bd10] <strong>arp l2-proxy enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span><span>1/0/1</span>.1 mode l2</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>.1] <strong>encapsulation dot1q vid 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>.1] <strong>bridge-domain 10</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>.1] <strong>arp l2-proxy learning dynamic-user disable</strong>
</pre>
</div>

<div class="p"># Set the maximum number of ARP snooping entries that <span>100GE</span> <span>1/0/1</span>.1 can learn to 50.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bridge-domain 10</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-bd10] <strong>arp l2-proxy enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span><span>1/0/1</span>.1 mode l2</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>.1] <strong>encapsulation dot1q vid 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>.1] <strong>bridge-domain 10</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>.1] <strong>arp l2-proxy learning dynamic-user max-user 50</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_ARP_Configuration_Commands_title.html">ARP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/CFGBDCONFIGGW(ARPSERVICEOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/CFGBDCONFIG_3(ARPSERVICEOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>