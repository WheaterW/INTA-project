
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer next-hop-invariable (BGP-EVPN address family view) (IPv6)">
<meta name="DC.subject" content="peer next-hop-invariable (BGP-EVPN address family view) (IPv6)">
<meta name="keywords" content="peer next-hop-invariable (BGP-EVPN address family view) (IPv6)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_VXLAN_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PEER-EVPN-NEXTHOP-INVARIABLE(BGPEVPNOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/GROUP-EVPN-NEXTHOP-INVARIABLE(BGPEVPNOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="featuretype" content="VXLAN">
<meta name="DC.Creator" content="SUBSYS_ID_BGPEVPNOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907766996">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer next-hop-invariable (BGP-EVPN address family view) (IPv6)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907766996"></a><a name="EN-US_CLIREF_0000001907766996"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer next-hop-invariable (BGP-EVPN address family view) (IPv6)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907766996__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer next-hop-invariable</span></b> command enables a BGP EVPN speaker to keep the next hops of routes unchanged when the speaker advertises these routes to EBGP EVPN peers and to apply the original next hops of locally imported routes when the speaker advertises these routes to IBGP EVPN peers.</p>
<p>The <b><span class="cmdname">undo peer next-hop-invariable</span></b> command restores the default configuration.</p>
</p>
<p>By default, the function of keeping the next hops of routes unchanged is not enabled.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907766996__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">peerIpv6Addr</span></i> <strong><span>next-hop-invariable</span></strong></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">peerIpv6Addr</span></i> <strong><span>next-hop-invariable</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907766996__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">peerIpv6Addr</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv6 address of a peer.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a 32-digit hexadecimal number, in the format of X:X:X:X:X:X:X:X.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907766996__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-EVPN address family view,</span><span>bgp-muli-instance-af-evpn view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907766996__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907766996__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>By default:<p></p>
<span>A BGP EVPN speaker changes the next hops of routes</span> to the interface that it uses to establish EBGP EVPN peer relationships before advertising these routes to EBGP EVPN peers.<p></p>
<span>A BGP EVPN speaker changes the next hops of routes</span> imported from EBGP EVPN to the interface that it uses to establish IBGP EVPN peer relationships before advertising these routes to IBGP EVPN peers.<p></p>
<span>An RR does not change the next hops of routes imported</span> from IBGP EVPN when advertising these routes to IBGP EVPN peers.<p></p>
<span>A BGP EVPN speaker changes the next hops of routes</span> to the interface that it uses to establish IBGP EVPN peer relationships before advertising these routes to IBGP EVPN peers.</p>

<p>In an inter-AS scenario where an EVPN Route Reflector (RR) is used, the <b><span class="cmdname">peer next-hop-invariable</span></b> command needs to be run on the RR to prevent the RR from modifying the Next_Hops of routes before advertising the routes to EBGP peers. This ensures that the remote PE recurses routes to the LSP destined for the local PE during traffic transmission.<p></p>
<span>In a VXLAN scenario</span>, when an EBGP EVPN peer relationship is established between VTEPs, to ensure that EVPN routes can be correctly sent, run the <b><span class="cmdname">peer next-hop-invariable</span></b> command on the VTEPs.</p>
<p><strong>Prerequisites</strong></p>
<p>The specified peer has been enabled in the BGP-EVPN address family view.</p>
<p><strong>Precautions</strong></p>
<p>If both the peer next-hop-invariable and peer next-hop-local commands are run, the latest configuration overrides the previous one.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907766996__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a BGP device not to change the Next_Hop of a route when the BGP device advertises it to its EBGP peer in the BGP-EVPN address family view.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer 2001:db8:1::1 as-number 200</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>l2vpn-family evpn</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-evpn] <strong>peer 2001:db8:1::1 enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-evpn] <strong>peer 2001:db8:1::1 next-hop-invariable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_VXLAN_Configuration_Commands_title.html">VXLAN Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PEER-EVPN-NEXTHOP-INVARIABLE(BGPEVPNOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/GROUP-EVPN-NEXTHOP-INVARIABLE(BGPEVPNOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>