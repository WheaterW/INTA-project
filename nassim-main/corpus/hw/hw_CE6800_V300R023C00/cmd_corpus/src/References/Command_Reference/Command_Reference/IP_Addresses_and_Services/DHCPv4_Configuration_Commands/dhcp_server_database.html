
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="dhcp server database">
<meta name="DC.subject" content="dhcp server database">
<meta name="keywords" content="dhcp server database">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-DHCP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DHCP_SERVER_CONFLICT_AUTO-RECYCLE_INTERVAL.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DHCP_SERVER_DNS-LIST.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Creator" content="SUBSYS_ID_ESAP_DHCPSERVER">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907762468">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>dhcp server database</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907762468"></a><a name="EN-US_CLIREF_0000001907762468"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">dhcp server database</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907762468__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">dhcp server database</span></b> command enables the function to save the current DHCP data to storage devices.</p>
<p>The <b><span class="cmdname">undo dhcp server database</span></b> command disables the function to save the DHCP data to storage devices.</p>
</p>
<p>By default, the function of saving DHCP data to storage devices is disabled.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907762468__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">dhcp server database </span></b>{ <strong><span>enable</span></strong> | <strong><span>write-delay</span></strong> <i><span class="varname">interval</span></i> }</p>

<p><b><span class="cmdname">undo dhcp server database </span></b>{ <strong><span>enable</span></strong> | <strong><span>write-delay</span></strong> }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907762468__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>enable</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables the function of storing DHCP data.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>write-delay</span></strong> <i><span class="varname">interval</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the interval at which DHCP data is saved.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 300 to 86400, in seconds. The default value is 3600 seconds.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907762468__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907762468__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907762468__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>When the device functions as a DHCP server, run the <b><span class="cmdname">dhcp server database enable</span></b> command to enable the device to save DHCP data to storage devices. This avoids data loss caused by device faults. Then the system generates lease.txt and conflict.txt files in the storage device. The two files save address lease information and address conflict information respectively. After the <b><span class="cmdname">dhcp server database enable</span></b> command is run, current DHCP data is automatically saved at the specified interval, and previous data files are overwritten. The interval can be set using the <b><span class="cmdname">dhcp server database write-delay interval</span></b> command.<p></p>
<span>If a fault occurs on the device</span>, DHCP data can be restored from storage devices after the system restarts.<p></p>
<span>Run the</span> <b><span class="cmdname">display dhcp server database</span></b> command to check the storage device for saving DHCP data.</p>
<p><strong>Prerequisites</strong></p>
<p>The <b><span class="cmdname">dhcp server database enable</span></b> command has been run to enable the device to save DHCP data to storage devices and recover automatically, and ensure that the storage devices work properly.</p>
<p><strong>Precautions</strong></p>
<ul><li>The lease.txt and conflict.txt files are overwritten periodically; therefore, you are advised to back up and save the two files to other locations.</li><li>The time displayed in the lease.txt and conflict.txt files is the UTC time rather than the system time, and you do not need to pay attention to time zone information.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907762468__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable the device to save the current DHCP data to storage devices and to recover automatically, and set the interval at which DHCP data is saved to 3600s.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>dhcp server database enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>dhcp server database write-delay 3600</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-DHCP_Configuration_Commands_title.html">DHCPv4 Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/DHCP_SERVER_CONFLICT_AUTO-RECYCLE_INTERVAL.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/DHCP_SERVER_DNS-LIST.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>