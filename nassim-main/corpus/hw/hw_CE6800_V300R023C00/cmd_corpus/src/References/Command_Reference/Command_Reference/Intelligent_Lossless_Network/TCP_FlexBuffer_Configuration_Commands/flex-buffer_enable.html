
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="flex-buffer enable">
<meta name="DC.subject" content="flex-buffer enable">
<meta name="keywords" content="flex-buffer enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-TCP_FlexBuffer_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DISPLAY_FLEX-BUFFER_STATE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="TCP FlexBuffer">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="TCP FlexBuffer">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="featurename" content="TCP FlexBuffer">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="featuretype" content="Intelligent Lossless Network">
<meta name="DC.Creator" content="SUBSYS_ID_AIS">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907609488">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>flex-buffer enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907609488"></a><a name="EN-US_CLIREF_0000001907609488"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">flex-buffer enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907609488__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">flex-buffer enable</span></b> command enables TCP FlexBuffer.</p>
<p>The <b><span class="cmdname">undo flex-buffer enable</span></b> command disables TCP FlexBuffer.</p>
</p>
<p>By default, TCP FlexBuffer is disabled.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907609488__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">flex-buffer enable</span></b></p>

<p><b><span class="cmdname">undo flex-buffer enable</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907609488__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907609488__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>mice-elephant-flow view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907609488__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907609488__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>A data center network is dominated by delay-sensitive mice flows, with many typical services made up of mice flows only. Differentiated flow scheduling can prevent mice flows from being hindered by elephant flows. However, it is largely ineffective when only mice flows exist, and also fails to address the packet loss problem caused by burst traffic and incast traffic.<p></p>
<span>The most effective solution to this packet loss problem</span> is to increase the queue buffer to absorb traffic. TCP FlexBuffer can dynamically adjust the buffer for mice- and elephant-flow queues to improve performance.</p>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>When TCP FlexBuffer is enabled, differentiated flow scheduling can be enabled for only one queue.</li><li>If TCP FlexBuffer is enabled on the device, a queue cannot have both the WRED drop profile bound and differentiated flow scheduling enabled. If a queue has both the WRED drop profile bound and differentiated flow scheduling enabled, TCP FlexBuffer cannot be enabled.</li><li>TCP FlexBuffer takes effect only for interface queues enabled with differentiated flow scheduling.</li></ul>

<p>For the CE6866, CE6866K, CE6860-SAN, CE6860-HAM, CE8851-32CQ8DQ-P, CE8851K, CE8850-SAN, and CE8850-HAM:</p>

<ul><li>If TCP FlexBuffer is enabled on the device, a queue cannot have both static ECN and differentiated flow scheduling enabled. If a queue has both static ECN and differentiated flow scheduling enabled, TCP FlexBuffer cannot be enabled.</li><li>Global ECN and TCP FlexBuffer cannot be both enabled. That is, the <b><span class="cmdname">qos ecn enable</span></b> and <b><span class="cmdname">flex-buffer enable</span></b> commands are mutually exclusive.</li><li>TCP FlexBuffer occupies four WRED drop profiles. After TCP FlexBuffer is enabled, the number of WRED drop profiles that can be configured on the device decreases by four.</li></ul>

<p>For the CE6820H, CE6820S, CE6820H-K, CE6863H, CE6863H-K, CE6881H, and CE6881H-K:</p>

<ul><li>TCP FlexBuffer occupies nine WRED drop profiles. After TCP FlexBuffer is enabled, the number of WRED drop profiles that can be configured on the device decreases by nine.</li><li>TCP FlexBuffer takes effect only when the dynamic threshold of the queue-level service buffer for the elephant-flow queue is set to 9 using the qos buffer queue queue-index shared-threshold dynamic dynamic-value command.</li></ul>

<p>For the CE8855, CE8851-32CQ4BQ, CE6855-48XS8CQ, CE6885, CE6885-SAN, CE6885-LL (standard forwarding mode), CE6885-T, and CE6863E-48S8CQ:</p>

<ul><li>If TCP FlexBuffer is enabled on the device, a queue cannot have both static ECN and differentiated flow scheduling enabled. If a queue has both static ECN and differentiated flow scheduling enabled, TCP FlexBuffer cannot be enabled.</li><li>Global ECN and TCP FlexBuffer cannot be both enabled. That is, the <b><span class="cmdname">qos ecn enable</span></b> and <b><span class="cmdname">flex-buffer enable</span></b> commands are mutually exclusive.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907609488__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable TCP FlexBuffer.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ai-service</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ai-service] <strong>mice-elephant-flow</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ai-service-mice-elephant-flow] <strong>flex-buffer enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-TCP_FlexBuffer_Configuration_Commands_title.html">TCP FlexBuffer Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/DISPLAY_FLEX-BUFFER_STATE.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>