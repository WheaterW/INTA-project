
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="pki import-certificate">
<meta name="DC.subject" content="pki import-certificate">
<meta name="keywords" content="pki import-certificate">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-PKI_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PKI_IMPORT_WHITELIST.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PKI_IMPORT-CERTIFICATE_PEER.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="DC.Creator" content="SUBSYS_ID_SEC_PKI">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907608208">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>pki import-certificate</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907608208"></a><a name="EN-US_CLIREF_0000001907608208"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">pki import-certificate</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907608208__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">pki import-certificate</span></b> command imports a certificate to the device memory. You can import a key pair when importing a certificate.</p>
</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907608208__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">pki import-certificate ocsp </span></b>[ <strong><span>realm</span></strong> <i><span class="varname">realm-name</span></i> ] { <strong><span>der</span></strong> | <strong><span>pkcs12</span></strong> | <strong><span>pem</span></strong> } <strong><span>filename</span></strong> <i><span class="varname">file-name</span></i> [ <strong><span>cert-name</span></strong> <i><span class="varname">cert-name</span></i> ] [ <strong><span>no-check-same-name</span></strong> ]</p>

<p><b><span class="cmdname">pki import-certificate </span></b>{ <strong><span>ca</span></strong> | <strong><span>local</span></strong> } [ [ <strong><span>realm</span></strong> <i><span class="varname">realm-name</span></i> ] { <strong><span>pkcs12</span></strong> | <strong><span>pem</span></strong> } ] <strong><span>filename</span></strong> <i><span class="varname">file-name</span></i> [ <strong><span>cert-name</span></strong> <i><span class="varname">cert-name</span></i> ] [ <strong><span>no-check-same-name</span></strong> ] { <strong><span>include-rsa-key</span></strong> | <strong><span>include-sm2-key</span></strong> } [ <strong><span>exportable</span></strong> ] [ <strong><span>password</span></strong> <i><span class="varname">password</span></i> ]</p>

<p><b><span class="cmdname">pki import-certificate </span></b>{ <strong><span>local</span></strong> | <strong><span>ca</span></strong> } <strong><span>realm</span></strong> <i><span class="varname">realm-name</span></i> { <strong><span>der</span></strong> | <strong><span>pkcs12</span></strong> | <strong><span>pem</span></strong> } <strong><span>filename</span></strong> <i><span class="varname">file-name</span></i> [ <strong><span>cert-name</span></strong> <i><span class="varname">cert-name</span></i> ] [ <strong><span>replace</span></strong> ]</p>

<p><b><span class="cmdname">pki import-certificate </span></b>{ <strong><span>local</span></strong> | <strong><span>ca</span></strong> } [ [ <strong><span>realm</span></strong> <i><span class="varname">realm-name</span></i> ] { <strong><span>der</span></strong> | <strong><span>pkcs12</span></strong> | <strong><span>pem</span></strong> } ] <strong><span>filename</span></strong> <i><span class="varname">file-name</span></i> [ <strong><span>cert-name</span></strong> <i><span class="varname">cert-name</span></i> ] [ <strong><span>no-check-hash-alg</span></strong> ] [ <strong><span>no-check-same-name</span></strong> ]</p>


</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907608208__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>realm</span></strong> <i><span class="varname">realm-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the PKI realm name of the imported certificate.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The PKI realm name must already exist.</p>
<p>The realm name cannot contain spaces. Otherwise, the certificate cannot be imported.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>der</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports a certificate in DER format.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pkcs12</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports a certificate in PKCS12 format.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pem</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports a certificate in PEM format.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>filename</span></strong> <i><span class="varname">file-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of the imported certificate.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The file name must already exist.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>cert-name</span></strong> <i><span class="varname">cert-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of the peer certificate to be saved.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 64 case-sensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>no-check-same-name</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates whether to check the Issuer and Subject fields in the imported certificate.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ca</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports a CA certificate.</p>
<p>For example, when the device works as an SSL proxy, import the SSL proxy CA certificate and use the private key in the certificate to sign the SSL client certificate again.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>local</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports a local certificate.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>include-rsa-key</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports an RSA key pair.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>include-sm2-key</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports an SM2 key pair.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>exportable</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>The key pair can be exported.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>password</span></strong> <i><span class="varname">password</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the decryption password of an RSA or SM2 key pair file. The value must be the same as the password set during the export.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 characters.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>replace</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Deletes the original certificate and the corresponding key pair, and imports the new certificate. The issuer and user information of the certificate before and after the replacement must be the same.</p>
<p>If the key pair of the original certificate is not referenced by other realms, the certificate and key pair are deleted. If the key pair of the original certificate is referenced by other realms or a CMP session, only the original certificate is deleted but the key pair is not deleted.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>no-check-hash-alg</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies whether a check is performed on the hash algorithm used for the signature of the imported certificate.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ocsp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports the Online Certificate Status Protocol (OCSP) server's certificate.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907608208__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907608208__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907608208__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>After a certificate is saved to the storage, run this command to import the certificate to the memory for it to take effect.<p></p>
<span>Multiple certificates can be imported to the device</span>, and the key pair can be imported when a certificate is imported. The imported certificate can be a CA certificate or a local certificate. You can use the keyword cert-name to rename the certificate and use the keyword no-check-same-name to import certificates with the same subject and issuer repeatedly.<p></p>
<span>If you do not know the format of the certificate you</span> want to import, configure each format in turn and check whether the certificate is successfully imported. If you do not specify the format of the CA certificate or local certificate to be imported, the system automatically identifies and imports the certificate.</p>
<p><strong>Prerequisites</strong></p>
<p><p>The certificate file already exists on the storage device.</p>
</p>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>default_ca.cer and default_local.cer are the names of the initial CA certificate and local certificate reserved in the system. A newly imported certificate cannot be named default_ca.cer or default_local.cer.</li><li>A local certificate cannot be imported to the default PKI realm default.</li><li>If the certificate file contains a key pair file, you can run the <b><span class="cmdname">pki import-certificate</span></b> command to import the certificate separately or import the key pair together with the certificate. If a certificate with the same name has been imported, you can use the keyword cert-name to rename the certificate and then import it.</li><li>Do not import multiple local certificates to the same PKI realm. Otherwise, certificate-related services may use certificates that do not match services in the PKI realm. As a result, services are unavailable.</li><li>When a certificate in PKCS12 format is imported, the PKI system deletes the file name extension of the original certificate, adds _local.cer or _ca.cer to generate a new file name, and saves it to the device storage. Therefore, it is recommended that the name of the certificate file to be imported contain fewer than 50 characters. If the certificate file name contains more than 64 characters, a new certificate file name cannot be generated correctly.</li><li>The device supports the import of the peer certificates generated using the RSA encryption algorithm.</li><li>Before importing a certificate or key pair, ensure that the certificate or key pair is stored in the specified directory (public directory in the system). Perform the following steps:<p></p>
&lt;huawei&gt; cd pki<p></p>
&lt;huawei&gt; cd public/<p></p>
<span>After the import succeeds</span>, the source files in the public directory are deleted by default. If you do not need to delete them, select N as prompted to keep them.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907608208__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># When certificates with the same name are imported into the PKI realm in the file mode, use cert-name to rename the certificates and import them.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki import-certificate ca realm default pem filename ca.cer cert-name ca1.cer include-rsa-key exportable password YsHsjx_202206</strong>
Info: Succeeded in importing the certificate.                                                                                       
Warning: The file in the flash will be deleted. Please select 'N' if you want to keep it. Please select [Y/N]:n                     
Info: The file will keep in the flash.
</pre>
</div>

<div class="p"># Import the key pair when importing a CA certificate to the PKI realm in file mode.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki import-certificate ca realm default pem filename ca.cer include-rsa-key exportable password YsHsjx_202206</strong>
Info: Succeeded in importing the certificate.                                                                                       
Warning: The file in the flash will be deleted. Please select 'N' if you want to keep it. Please select [Y/N]:n                     
Info: The file will keep in the flash.
</pre>
</div>

<div class="p"># Import the key pair when importing the local certificate to the PKI realm in file mode.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki import-certificate local realm default pem filename local.cer include-rsa-key exportable password YsHsjx_202206</strong>
Info: Succeeded in importing the certificate.                                                                                       
Warning: The file in the flash will be deleted. Please select 'N' if you want to keep it. Please select [Y/N]:n                     
Info: The file will keep in the flash.
</pre>
</div>

<div class="p"># Import a CA certificate to a PKI realm in file mode.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki import-certificate ca realm default  pem filename ca.cer</strong>
 The CA's Subject is /C=CN/ST=Zhejiang/L=Hangzhou/O=Huawei/OU=FW/CN=bzh1_sha256                                                     
 The CA's fingerprint is:                                                                                                           
   SHA1   fingerprint:C4:4C:0D:F8:BF:D8:44:2C:30:50:51:44:B9:0B:64:31:C0:0B:3C:A7                                                   
   SHA256 fingerprint:05:F0:F9:E4:8B:F7:63:41:9B:A4:2B:59:59:E9:82:6D:74:9D:A4:06:37:9F:FA:E5:E0:3E:C6:4C:DA:34:98:04               
 Is the fingerprint correct? [Y/N]:y
Info: Succeeded in importing the certificate.                                                                                       
Warning: The file in the flash will be deleted. Please select 'N' if you want to keep it. Please select [Y/N]:n                     
Info: The file will keep in the flash.
</pre>
</div>

<div class="p"># Import a local certificate to a PKI realm in file mode.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki import-certificate local realm default der filename local.cer</strong>
Info: Succeeded in importing the certificate.                                                                                       
Warning: The file in the flash will be deleted. Please select 'N' if you want to keep it. Please select [Y/N]:n                     
Info: The file will keep in the flash.
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-PKI_Configuration_Commands_title.html">PKI Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PKI_IMPORT_WHITELIST.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PKI_IMPORT-CERTIFICATE_PEER.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>