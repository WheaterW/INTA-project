
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="qos queue shaping">
<meta name="DC.subject" content="qos queue shaping">
<meta name="keywords" content="qos queue shaping">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-Traffic_Policing_and_Traffic_Shaping_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/QOS_CAR_IFG_DISABLE.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/RESET_QOS_CAR_STATISTICS.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Traffic Policing">
<meta name="featurename" content="Traffic Shaping">
<meta name="featuretype" content="QoS">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Traffic Policing">
<meta name="featurename" content="Traffic Shaping">
<meta name="featuretype" content="QoS">
<meta name="featurename" content="Traffic Policing">
<meta name="featurename" content="Traffic Shaping">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="featuretype" content="QoS">
<meta name="DC.Creator" content="SUBSYS_ID_QOS">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907768620">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>qos queue shaping</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907768620"></a><a name="EN-US_CLIREF_0000001907768620"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">qos queue shaping</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907768620__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">qos queue shaping</span></b> command enables traffic shaping for a queue on a specified interface and sets traffic shaping parameters.</p>
<p>The <b><span class="cmdname">undo qos queue shaping</span></b> command restores the default scheduling parameters of each queue on an interface.</p>
</p>
<p>The following table describes the default scheduling parameters on an interface.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907768620__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">


<p><b><span class="cmdname">qos queue </span></b><i><span class="varname">queue-index</span></i> <strong><span>shaping</span></strong> { <strong><span>percent</span></strong> <strong><span>cir</span></strong> <i><span class="varname">cir-percent-value</span></i> [ <strong><span>pir</span></strong> <i><span class="varname">pir-percent-value</span></i> ] | <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i> [ <strong><span>kbps</span></strong> | <strong><span>mbps</span></strong> | <strong><span>gbps</span></strong> ] [ <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i> [ <strong><span>bytes</span></strong> | <strong><span>kbytes</span></strong> | <strong><span>mbytes</span></strong> ] | <strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i> [ <strong><span>kbps</span></strong> | <strong><span>mbps</span></strong> | <strong><span>gbps</span></strong> ] [ <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i> [ <strong><span>bytes</span></strong> | <strong><span>kbytes</span></strong> | <strong><span>mbytes</span></strong> ] <strong><span>pbs</span></strong> <i><span class="varname">pbs-value</span></i> [ <strong><span>bytes</span></strong> | <strong><span>kbytes</span></strong> | <strong><span>mbytes</span></strong> ] ] ] }</p>


<p><b><span class="cmdname">undo qos queue </span></b><i><span class="varname">queue-index</span></i> <strong><span>shaping</span></strong></p>



</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907768620__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">queue-index</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the queue index.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 7.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>percent</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specify the QoS queue shaping percent.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the absolute value of the committed information rate (CIR).</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer that ranges from 1 to 400000000.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>cir</span></strong> <i><span class="varname">cir-percent-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the percentage value of the CIR.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer that ranges from 1 to 100. The default value is 100.</p>
<p>The CBS is calculated as follows: CBS = cir-percent-value x Maximum bandwidth of an interface x 8</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pir</span></strong> <i><span class="varname">pir-percent-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the percentage value of the PIR.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer that ranges from 1 to 100. The default value is 100, which is the same as cir-percent-value.</p>
<p>The PBS is calculated as follows: PBS = pir-percent-value x Maximum bandwidth of an interface x 8</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the absolute value of the peak information rate (PIR).</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer that ranges from 1 to 400000000.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>kbps</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the rate unit is kbit/s.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>mbps</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the rate unit is Mbit/s.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>gbps</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the rate unit is Gbit/s.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the absolute value of the committed burst size (CBS), which is the volume of committed burst traffic that can pass through an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>For the CE6855-48XS8CQ, CE6885-SAN, CE8855, CE8851-32CQ4BQ, CE6885-LL (low latency mode), CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ:The value is an integer that ranges from 1 to 8388608.</p>
<p>For the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE8850-SAN, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K and CE6820S:The value is an integer that ranges from 1 to 33554432.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>bytes</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the CBS is expressed in bytes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>kbytes</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the CBS is expressed in Kbytes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pbs</span></strong> <i><span class="varname">pbs-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the absolute value of the peak burst size (PBS), which is the maximum volume of burst traffic that can pass through an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>For the CE6855-48XS8CQ, CE6885-SAN, CE8855, CE8851-32CQ4BQ, CE6885-LL (low latency mode), CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ:The value is an integer that ranges from 1 to 8388608.</p>
<p>For the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE8850-SAN, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K and CE6820S:The value is an integer that ranges from 1 to 33554432.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>mbytes</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the CBS is expressed in Mbytes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907768620__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100GE interface view,</span><span>10GE interface view,</span><span>200GE interface view,</span><span>25GE interface view,</span><span>400GE interface view,</span><span>Interface group view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907768620__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907768620__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>When the traffic rate of an interface on a downstream device is lower than that of the connected interface on the upstream device, traffic congestion may occur on the interface of the downstream device. You can configure traffic shaping for queues on the outbound interface of the upstream device and adjust the transmit rate of the interface.<p></p>
<span>The</span> <b><span class="cmdname">qos queue shaping</span></b> command configures traffic shaping on packets of a specific service on an interface.</p>
<p><strong>Prerequisites</strong></p>
<p>Priority mapping based on simple traffic classification has been configured to map packet priorities to PHBs and colors, or internal priority re-marking based on complex traffic classification has been configured so that packets of different services enter different queues.</p>
<p><strong>Precautions</strong></p>
<p>If traffic shaping is configured both on an interface queue and an interface (using the <b><span class="cmdname">qos lr</span></b> command), the CIR of the interface cannot be lower than the sum of CIR values of all the queues on the interface; otherwise, traffic shaping result may be incorrect. For example, the queue with a lower priority may occupy the bandwidth of the queue with a higher priority.<p></p>
<span>If you run the</span> <b><span class="cmdname">qos queue shaping</span></b> command multiple times on the same interface, only the latest configuration takes effect.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907768620__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set absolute values of the CIR and PIR for queue 4 on the <span>100GE</span><span>1/0/1</span> to 10000 kbit/s and 20000 kbit/s, respectively.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>qos queue 4 shaping cir 10000 kbps pir 20000 kbps</strong>
</pre>
</div>

<div class="p"># Set percentage values of the CIR and PIR for queue 4 on the <span>100GE</span><span>1/0/1</span> to 50% and 80%, respectively.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>qos queue 4 shaping percent cir 50 pir 80</strong>
</pre>
</div>



</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-Traffic_Policing_and_Traffic_Shaping_Commands_title.html">Traffic Policing and Traffic Shaping Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/QOS_CAR_IFG_DISABLE.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/RESET_QOS_CAR_STATISTICS.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>