
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="vpn-target (VPN instance IPv4 address family MVPN view)">
<meta name="DC.subject" content="vpn-target (VPN instance IPv4 address family MVPN view)">
<meta name="keywords" content="vpn-target (VPN instance IPv4 address family MVPN view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IPv4_Multicast_VPN_Configuration_Commands_in_NG_MVPN_Mode_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/NG-MVPN-VIEW_5(MVPNOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/NG-VXLANSTATIC(MVPNOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv4 Layer 3 Multicast over VXLAN">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="IPv4 Layer 3 Multicast over VXLAN">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv4 Layer 3 Multicast over VXLAN">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Creator" content="SUBSYS_ID_MVPNOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907766448">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>vpn-target (VPN instance IPv4 address family MVPN view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907766448"></a><a name="EN-US_CLIREF_0000001907766448"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">vpn-target (VPN instance IPv4 address family MVPN view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907766448__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">vpn-target</span></b> command configures a multicast virtual private network (MVPN) target for the VPN instance MVPN address family.</p>
<p>The <b><span class="cmdname">undo vpn-target</span></b> command deletes the MVPN target of the VPN instance MVPN address family.</p>
</p>
<p>By default, no MVPN target is configured for the VPN instance MVPN address family. The VPN instance MVPN address family uses the VPN target configured in the VPN instance IPv4 address family view as the MVPN target.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907766448__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">vpn-target </span></b>{ <i><span class="varname">vrfRT</span></i> } &amp;&lt;1-8&gt; [ <i><span class="varname">vrfRTType</span></i> ]</p>

<p><b><span class="cmdname">undo vpn-target </span></b>{ <i><span class="varname">vrfRT</span></i> } &amp;&lt;1-8&gt; [ <i><span class="varname">vrfRTType</span></i> ]</p>

<p><b><span class="cmdname">undo vpn-target all</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907766448__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">vrfRT</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the MVPN target to be added to the import or export VPN target extended community list of the VPN instance MVPN address family.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The available MVPN target formats are as follows:</p>
<ul><li>16-bit AS number: 32-bit user-defined number. For example, 1:3. An AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot both be 0s. This means that the VPN target value cannot be 0:0.</li><li>32-bit IP address: 16-bit user-defined number. For example, 192.168.122.15:1. An IP address ranges from 0.0.0.0 to 255.255.255.255, and a user-defined number ranges from 0 to 65535.</li><li>Integral 4-byte AS number: 2-byte user-defined number, for example, 65537:3. An AS number ranges from 65536 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot both be 0s. This means that the VPN target value cannot be 0:0.</li><li>4-byte AS number in dotted notation: 2-byte user-defined number, for example, 0.0:3 or 0.1:0. A 4-byte AS number in dotted notation is in the format of x.y, where x and y are integers that range from 0 to 65535. A user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot both be 0s. This means that the VPN target value cannot be 0:0.0.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">vrfRTType</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>vrfRT type.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The parameters are as follows:</p>
<ul><li>both: Adds a VPN target to both the import and export VPN target extended community lists of the VPN instance MVPN address family.</li><li>export-extcommunity: Indicates the export MVPN target. A maximum of 500 export MVPN targets can be configured.</li><li>import-extcommunity: Indicates the import MVPN target. A maximum of 4096 import MVPN targets can be configured.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>all</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Deletes all MVPN targets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907766448__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>VPN instance IPv4 address family MVPN view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907766448__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907766448__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>The MVPN target controls route learning between MVPN sites. An MVPN target can be an import or export MVPN target. An export MVPN target is contained in an MVPN route to be advertised to a remote Multiprotocol Border Gateway Protocol (MP-BGP) peer. After receiving an MVPN route, an MP-BGP peer compares the received export MVPN target with the local import MVPN target to determine whether the MVPN route can be added to the MVPN routing table of the local VPN instance.</p>
<p><strong>Configuration Impact</strong></p>
<p>After an MVPN target is configured for the VPN instance MVPN address family, the VPN instance MVPN address family accepts only the MVPN routes that match the MVPN target. When MVPN routes are advertised between VPN instances, if one of the MVPN targets carried in the MVPN routes matches the import VPN target of the local VPN instance MVPN address family, the routes will be added to the MVPN routing table of the local VPN instance.<p></p>
<span>If all MVPN targets of the VPN instance MVPN address</span> family are deleted using the <b><span class="cmdname">undo vpn-target</span></b> command, all routes learned by the VPN instance MVPN address family from other VPN instances will be deleted.</p>
<p><strong>Precautions</strong></p>
<p>The command configuration does not overwrite the previously configured MVPN target. If the number of configured MVPN targets reaches the maximum value, no more MVPN target can be added.<p></p>
<span>Multiple MVPN targets can be configured in the VPN</span> instance MVPN address family. A maximum of eight MVPN targets can be configured using the target command. To configure more MVPN targets in the VPN instance MVPN address family view, run the <b><span class="cmdname">vpn-target</span></b> command multiple times.<p></p>
<span>If the configured MVPN import target is the same as</span> the MVPN import target configured for another VPN instance or the MVPN import address family target configured for another VPN instance, the MVPN corresponding to the tunnel may be incorrectly selected. As a result, multicast traffic cannot be forwarded.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907766448__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the export and import MVPN targets for the VPN instance MVPN address family.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>multicast mvpn 2.2.2.2</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance mcast1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-mcast1] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-mcast1-af-ipv4] <strong>route-distinguisher 1:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-mcast1-af-ipv4] <strong>multicast routing-enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-mcast1-af-ipv4] <strong>multicast mvpn route-import local-admin-id 2</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-mcast1-af-ipv4] <strong>mvpn</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-mcast1-af-ipv4-mvpn] <strong>vpn-target 1:1 2:2 3:3 both</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IPv4_Multicast_VPN_Configuration_Commands_in_NG_MVPN_Mode_title.html">IPv4 Layer 3 Multicast over VXLAN Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/NG-MVPN-VIEW_5(MVPNOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/NG-VXLANSTATIC(MVPNOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>