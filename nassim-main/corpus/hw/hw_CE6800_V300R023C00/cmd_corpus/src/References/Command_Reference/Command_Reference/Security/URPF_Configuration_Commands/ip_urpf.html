
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ip urpf">
<meta name="DC.subject" content="ip urpf">
<meta name="keywords" content="ip urpf">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-URPF_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IP_URPF_DISABLE.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IP_URPF_ENABLE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="URPF">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="URPF">
<meta name="featuretype" content="Security">
<meta name="featurename" content="URPF">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="DC.Creator" content="SUBSYS_ID_FWM_IPV4">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907608064">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ip urpf</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907608064"></a><a name="EN-US_CLIREF_0000001907608064"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">ip urpf</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907608064__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ip urpf</span></b> command configures the URPF check mode on an interface.</p>
<p>The <b><span class="cmdname">undo ip urpf</span></b> command cancels the configuration of the URPF check mode on an interface.</p>
</p>
<p>By default, URPF check is disabled on an interface. If URPF check is enabled on an interface, URPF loose check is enabled on the interface by default.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907608064__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">ip urpf </span></b>{ <strong><span>loose</span></strong> | <strong><span>strict</span></strong> | <strong><span>allow</span></strong> <strong><span>default-route</span></strong> }</p>


<p><b><span class="cmdname">undo ip urpf </span></b>{ <strong><span>strict</span></strong> | <strong><span>allow</span></strong> <strong><span>default-route</span></strong> }</p>


</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907608064__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>loose</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates URPF check in loose mode. If the source address of a packet exists in the FIB table, the packet is forwarded regardless of whether the outbound interface of the packet is the same as the inbound interface of the packet.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>strict</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates URPF check in strict mode. A packet can be forwarded only when the source address of the packet exists in the FIB table and the outbound interface of the packet is the same as the inbound interface of the packet. ( The ECMP and local loopback address support only the loose mode. Even if the strict mode is configured, packets are still forwarded in loose mode.).</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>allow</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Allows special processing for the default route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>default-route</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Allows special processing for the default route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907608064__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100ge sub-interface view,</span><span>100GE interface view,</span><span>10GE sub-interface view,</span><span>10GE interface view,</span><span>200GE sub-interface view,</span><span>200GE interface view,</span><span>25GE sub-interface view,</span><span>25GE interface view,</span><span>400GE sub-interface view,</span><span>400GE interface view,</span><span>50GE sub-interface view,</span><span>50GE interface view,</span><span>Eth-Trunk sub-interface view,</span><span>Eth-Trunk interface view,</span><span>VLANIF interface view,</span><span>Sub-interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907608064__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907608064__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>The <b><span class="cmdname">ip urpf</span></b> command configures the URPF check mode on an interface.<p></p>
<span>The</span> <b><span class="cmdname">undo ip urpf</span></b> command cancels the configuration of the URPF check mode on an interface.<p></p>
<span>By default</span>, URPF check is disabled on an interface. If URPF check is enabled on an interface, URPF loose check is enabled on the interface by default.</p>
<p><strong>Configuration Impact</strong></p>
<div class="p"><p>URPF determines the processing mode for the default route according to whether the allow default-route parameter is configured. After this command is run, routing entries are deleted and re-delivered. As a result, traffic may be interrupted for a short period of time.<p></p>
<span>When the allow default-route parameter is not configured</span>, if the source address of a packet is not found in the FIB table, the packet is discarded during either strict or loose check even if the default route is found.<p></p>
<span>When the allow default-route parameter is configured</span>, if the source address of a packet does not exist in the FIB table, the following action is as follows:</p>

<ul><li>In strict check mode, if the outbound interface of the default route is the same as the inbound interface of the packet, the packet passes the URPF check and is forwarded normally. If the outbound interface of the default route is different from the inbound interface of the packet, the packet is discarded.</li><li>In loose check mode, a packet passes the URPF check and is forwarded regardless of whether the outbound interface of the default route is the same as the inbound interface of the packet.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907608064__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Disable strict URPF check on <span>100GE</span><span>1/0/1</span>.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo ip urpf strict</strong>
</pre>
</div>

<div class="p"># Enable strict URPF check on <span>100GE</span><span>1/0/1</span> and allow special processing for the default route.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ip urpf enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ip urpf strict</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ip urpf allow default-route</strong>
</pre>
</div>

<div class="p"># Enable strict URPF check on the VLANIF interface and allow special processing for the default route.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>vlan 25</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vlan25] <strong>interface vlanif 25</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vlanif25] <strong>ip urpf enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vlanif25] <strong>ip urpf strict</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vlanif25] <strong>ip urpf allow default-route</strong>
</pre>
</div>

<div class="p"># Enable strict URPF check on <span>100GE</span><span>1/0/1</span>.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ip urpf enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ip urpf strict</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-URPF_Configuration_Commands_title.html">URPF Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/IP_URPF_DISABLE.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/IP_URPF_ENABLE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>