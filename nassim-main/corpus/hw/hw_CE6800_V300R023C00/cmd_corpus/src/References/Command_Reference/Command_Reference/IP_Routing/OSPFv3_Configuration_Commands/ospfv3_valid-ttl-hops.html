
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ospfv3 valid-ttl-hops">
<meta name="DC.subject" content="ospfv3 valid-ttl-hops">
<meta name="keywords" content="ospfv3 valid-ttl-hops">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_OSPFv3_Configuration_Command_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPFV3-TRANS-DELAY(OSPFCOMMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPFV3-PREFERENCE(OSPFCOMMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_OSPFCOMMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907603516">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ospfv3 valid-ttl-hops</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907603516"></a><a name="EN-US_CLIREF_0000001907603516"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">ospfv3 valid-ttl-hops</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907603516__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ospfv3 valid-ttl-hops</span></b> command enables OSPFv3 GTSM and sets the TTL value to be checked.</p>
<p>The <b><span class="cmdname">undo ospfv3 valid-ttl-hops</span></b> command disables OSPFv3 GTSM.</p>
</p>
<p>By default, OSPFv3 GTSM is disabled.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907603516__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">ospfv3 valid-ttl-hops </span></b><i><span class="varname">ttl</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</p>


<p><b><span class="cmdname">undo ospfv3 valid-ttl-hops </span></b>[ <i><span class="varname">ttl</span></i> ] [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</p>


</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907603516__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ttl</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the TTL value to be checked.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 1 to 255. If you specify the parameter hops, the valid range of the TTL value in the packet to be checked is [ 255-hops+1, 255 ].</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a VPN instance. If this parameter is specified, it indicates that only the TTL value of the packets in the specified VPN instance needs to be checked.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 characters.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907603516__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907603516__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907603516__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>If an OSPFv3 network requires high security, you can configure GTSM to improve network security. GTSM defends against attacks through TTL detection. If an attacker continuously sends simulated OSPFv3 unicast packets to a device, the device directly sends the packets to OSPFv3 on the control plane after receiving them, without checking the validity of these packets. As a result, the control plane of the device is busy processing these packets, and the CPU usage is high. GTSM protects a device by checking whether the TTL value in the IP packet header is within a pre-defined range to enhance system security.<p></p>
<span>The</span> <b><span class="cmdname">ospfv3 valid-ttl-hops</span></b> command enables OSPFv3 GTSM. To check the TTL values of the packets that match the GTSM policy, you need to specify vpn-instance in the command.<p></p>
<span>For example</span>, if you run the <b><span class="cmdname">ospfv3 valid-ttl-hops</span></b> command, OSPFv3 GTSM is enabled on both the public network and VPNs. If the <b><span class="cmdname">ospfv3 valid-ttl-hops 5 vpn-instance</span></b> command is run, OSPFv3 GTSM is enabled on both the public network and VPNs, the TTL values of OSPFv3 packets in the specified VPN instance are checked, and the default action is taken on the OSPFv3 packets that do not match GTSM policies in the public network and other VPN instances.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>If a VPN instance is specified in the <b><span class="cmdname">ospfv3 valid-ttl-hops</span></b> command and the interface is bound to the VPN instance, if the configured TTL value is smaller than the actual TTL value on the network, all unicast packets sent to the interface are discarded.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907603516__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable OSPFv3 GTSM, and set the maximum number of TTL hops to 5 for the packets that can be received from the public network.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospfv3 valid-ttl-hops 5</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_OSPFv3_Configuration_Command_title.html">OSPFv3 Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/OSPFV3-TRANS-DELAY(OSPFCOMMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/OSPFV3-PREFERENCE(OSPFCOMMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>