
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ntp server { source-interface | source-address }">
<meta name="DC.subject" content="ntp server { source-interface | source-address }">
<meta name="keywords" content="ntp server { source-interface | source-address }">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_NTP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/NTP-SERVICE-SERVER-DISABLE(NTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/NTP-SERVER-SOURCE-INTERFACE-ALL(NTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Creator" content="SUBSYS_ID_NTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000002194483665">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ntp server { source-interface | source-address }</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000002194483665"></a><a name="EN-US_CLIREF_0000002194483665"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1"><span>ntp server { source-interface | source-address }</span></h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000002194483665__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ntp server source-interface</span></b> command configures a listening interface for an NTP IPv4 server.</p>
<p>The <b><span class="cmdname">undo ntp server source-interface</span></b> command cancels the listening interface of the NTP IPv4 server.</p>
<p>The <b><span class="cmdname">ntp ipv6 server source-address</span></b> command configures a listening address for an NTP IPv6 server.</p>
<p>The <b><span class="cmdname">undo ntp ipv6 server source-address</span></b> command deletes the listening IP address of the NTP IPv6 server.</p>
</p>
<p>By default, the NTP server does not listen to any interface.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000002194483665__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">


<p><b><span class="cmdname">ntp server source-interface </span></b>{ <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> }</p>

<p><b><span class="cmdname">ntp ipv6 server source-address </span></b><i><span class="varname">ipv6Addr</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpnName</span></i> ]</p>



<p><b><span class="cmdname">ntp server physic-isolate source-interface </span></b>{ <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } <strong><span>source-address</span></strong> <i><span class="varname">ipv4Addr</span></i></p>

<p><b><span class="cmdname">ntp ipv6 server physic-isolate source-interface </span></b>{ <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } <strong><span>source-address</span></strong> <i><span class="varname">ipv6Addr</span></i></p>



<p><b><span class="cmdname">undo ntp server source-interface </span></b>{ <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> }</p>

<p><b><span class="cmdname">undo ntp ipv6 server source-address </span></b><i><span class="varname">ipv6Addr</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpnName</span></i> ]</p>



<p><b><span class="cmdname">undo ntp server physic-isolate source-interface </span></b>{ <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } <strong><span>source-address</span></strong> <i><span class="varname">ipv4Addr</span></i></p>

<p><b><span class="cmdname">undo ntp ipv6 server physic-isolate source-interface </span></b>{ <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } <strong><span>source-address</span></strong> <i><span class="varname">ipv6Addr</span></i></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000002194483665__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the type and number of a local interface that receives NTP packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 47 case-sensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-type</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the type and number of a local interface that receives NTP packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 47 case-sensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the type and number of a local interface that receives NTP packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 47 case-sensitive characters. It cannot contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>source-address</span></strong> <i><span class="varname">ipv6Addr</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv6 address that the server listens to. The ipv6-address is a host address and cannot be a multicast address, loopback address, or IP address of a reference clock.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a 32-bit hexadecimal string in format X:X:X:X:X:X:X:X.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>source-address</span></strong> <i><span class="varname">ipv4Addr</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv4 address listened by the server. ipv4-address is a host address and cannot be a multicast address, loopback address, or reference clock address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an IPv4 address in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpnName</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the VPN instance name.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters. It cannot be _public_. If spaces are used, the string must be enclosed in double quotation marks (" ").</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>physic-isolate</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Set the isolation attribute of an NTP server interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000002194483665__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000002194483665__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000002194483665__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>If you want the NTP server to listen to the packets from a specified interface and IP address, you can specify the interface as the source interface of the NTP server. After this interface is specified, the host can receive only the NTP packets from this interface.</p>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>If this command is the first NTP configuration command, the system automatically adds the ntp [ ipv6 ] server disable command to the configuration file to disable the NTP server function. To enable the NTP service, run the undo ntp [ ipv6 ] server disable command. If this command is the last NTP configuration command to be deleted, the system automatically deletes the ntp [ ipv6 ] server disable command from the configuration file.</li><li>If an NTP IPv6 source address is specified in a VPN instance, the VPN instance must have been created using the <b><span class="cmdname">ip vpn-instance</span></b> command and the IPv6 address family must have been enabled using the ipv6-family (VPN instance view) command. Otherwise, the command fails to be executed.</li><li>If an NTP IPv4 source interface is specified, the interface must exist. Otherwise, the command fails to be executed.</li><li>If the VPN instance or source interface specified in the command is deleted, the configuration of the corresponding NTP server source interface is also deleted.</li><li>To enhance system security, the NTP server does not process packets received by any interface or address by default. You can run this command on the NTP server to specify the source interface of the NTP server. The interface and address verification is added. Only the packets from the trusted source specified by the user are received and processed.</li><li>After the IPv4 source interface of the NTP server is specified, the NTP server uses only the primary IP address of the interface as the trusted source address and does not process packets whose destination address is a sub-IP address.</li><li>If the ntp [ipv6] server source-interface all enable, ntp server source-interface, and ntp ipv6 server source-address commands are configured, the ntp [ipv6] server source-interface all enable command takes effect. The server receives and processes the packets received by all interfaces and addresses.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000002194483665__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">


<div class="p"># Configure the NTP server to listen to NTP packets sent from the interface with the IPv6 address 2001:db8:1::1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ntp ipv6 server source-address 2001:db8:1::1</strong>
</pre>
</div>




<div class="p"># Configure the NTP server to listen to the packets sent from vlanif 100.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>vlan batch 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface Vlanif 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-Vlanif100] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ntp server source-interface Vlanif 100</strong>
</pre>
</div>

<div class="p"># Configure the NTP server to listen to the packets received from VLANIF 100 and destined for 10.1.1.1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>vlan batch 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface Vlanif 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-Vlanif100] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ntp server physic-isolate source-interface Vlanif 100 source-address 10.1.1.1</strong>
</pre>
</div>

<div class="p"># Configure the NTP server to listen to the packets received from VLANIF 100 and destined for 2001:db8:2::1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>vlan batch 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface Vlanif 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-Vlanif100] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ntp ipv6 server physic-isolate source-interface Vlanif 100 source-address 2001:db8:2::1</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_NTP_Configuration_Commands_title.html">NTP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/NTP-SERVICE-SERVER-DISABLE(NTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/NTP-SERVER-SOURCE-INTERFACE-ALL(NTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>