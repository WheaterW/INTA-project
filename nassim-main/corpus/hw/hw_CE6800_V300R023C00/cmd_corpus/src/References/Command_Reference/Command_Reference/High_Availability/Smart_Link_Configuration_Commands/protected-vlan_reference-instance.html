
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="protected-vlan reference-instance">
<meta name="DC.subject" content="protected-vlan reference-instance">
<meta name="keywords" content="protected-vlan reference-instance">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Smart_Link_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/ADDPORT(SMLKOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/RESET_FWM_SMART-LINK.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Smart Link">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Smart Link">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="Smart Link">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Creator" content="SUBSYS_ID_SMLKOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907607520">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>protected-vlan reference-instance</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907607520"></a><a name="EN-US_CLIREF_0000001907607520"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">protected-vlan reference-instance</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907607520__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">protected-vlan reference-instance</span></b> command configures a Smart Link protection instance.</p>
<p>The <b><span class="cmdname">undo protected-vlan reference-instance</span></b> command deletes a Smart Link protection instance.</p>
</p>
<p>By default, all instances are Smart Link protection instances.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6820H, CE6820H-K and CE6820S.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907607520__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">protected-vlan reference-instance </span></b>{ <i><span class="varname">instance-id1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">instance-id2</span></i> ] } &amp;&lt;1-10&gt;</p>

<p><b><span class="cmdname">undo protected-vlan reference-instance </span></b>{ <strong><span>all</span></strong> | { <i><span class="varname">instance-id1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">instance-id2</span></i> ] } &amp;&lt;1-10&gt; }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907607520__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">instance-id1</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the first ID of a Smart Link load-balancing instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 48.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>to</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the range.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">instance-id2</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the last ID of a Smart Link load-balancing instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer ranging from 0 to 48.</p>
<p>&lt;endInst&gt; must be greater than &lt;beginInst&gt;. &lt;beginInst&gt; and instance-id1 specify an instance ID range. If you do not specify to &lt;endInst&gt;, only one load-balancing instance with the ID &lt;beginInst&gt; is specified.</p>
<p>In one load-balance instance command, a maximum of 10 instance ID ranges can be specified using to.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>all</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Deletes all Smart Link load-balancing instance IDs.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907607520__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Smart Link group view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907607520__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907607520__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>After a protection instance is bound to a Smart Link group, Smart Link takes effect only on packets from VLANs mapped to the protection instance. If you want packets from some VLANs to be forwarded without being influenced by Smart Link, run the protected-vlan reference-<b><span class="cmdname">instance</span></b> command to configure protection instances to which only the other VLANs are mapped.</p>
<p><strong>Prerequisites</strong></p>
<p>A Smart Link group has been created using the <b><span class="cmdname">smart-link group</span></b> command, and mappings between VLANs and an MSTI have been configured using the <b><span class="cmdname">instance</span></b> command in the MST domain view or VLAN instance view.</p>
<p><strong>Configuration Impact</strong></p>
<p>If the protected-vlan reference-<b><span class="cmdname">instance</span></b> command is run more than once, all configurations take effect.</p>
<p><strong>Precautions</strong></p>
<p>When configuring protection instances for a Smart Link group, ensure that the VLAN ranges mapped to the protection instances contain all service VLANs and the VLANs mapped to load-balancing instances. Smart Link does not take effect on packets from VLANs that are not mapped to the protection instances.<p></p>
<span>After protection instances are configured</span>, packets from VLANs that are not mapped to the protection instances may cause broadcast storms on the network.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907607520__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure protection instance 10 for the Smart Link group.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>stp region-configuration</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mst-region] <strong>instance 10 vlan 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mst-region] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>smart-link group 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-smlk-group1] <strong>protected-vlan reference-instance 10</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Smart_Link_Configuration_Commands_title.html">Smart Link Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/ADDPORT(SMLKOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/RESET_FWM_SMART-LINK.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>