
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="dhcp relay reply forward all enable">
<meta name="DC.subject" content="dhcp relay reply forward all enable">
<meta name="keywords" content="dhcp relay reply forward all enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-DHCP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DHCP_RELAY_RELEASE.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DHCP_RELAY_REQUEST_SERVER-MATCH_ENABLE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Creator" content="SUBSYS_ID_ESAP_DHCPRELAY">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942841705">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>dhcp relay reply forward all enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942841705"></a><a name="EN-US_CLIREF_0000001942841705"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">dhcp relay reply forward all enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942841705__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">dhcp relay reply forward all enable</span></b> command configures a DHCP relay agent to forward all DHCP ACK messages.</p>
<p>The <b><span class="cmdname">undo dhcp relay reply forward all enable</span></b> command restores the default setting.</p>
</p>
<p>By default, a DHCP relay agent forwards only the first received DHCP ACK message.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942841705__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">dhcp relay reply forward all enable</span></b></p>

<p><b><span class="cmdname">undo dhcp relay reply forward all enable</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942841705__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942841705__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942841705__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942841705__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>As defined in RFC2131, the DHCP server that provides only IP addresses for DHCP clients replies with DHCP ACK messages. After receiving a DHCP ACK message, a DHCP relay agent searches for the entry based on the DHCP client's MAC address contained in the message, forwards the message to the corresponding client, and then immediately deletes the entry matching the client.<p></p>
<span>If multiple DHCP servers are deployed on the network</span>, the design of a server does not comply with standards, and a DHCP client requests for an IP address, the server does not provide an IP address for the DHCP client but replies with a DHCP ACK message. If the DHCP relay agent first receives the DHCP ACK message replied by the server, it incorrectly forwards the message to the client and deletes the corresponding entry. After the DHCP relay agent receives the correct DHCP ACK message, it cannot forward the message because the entry matching the client has been deleted. As a result, the client cannot obtain an IP address.<p></p>
<span>To resolve this issue</span>, you can run the <b><span class="cmdname">dhcp relay reply forward all enable</span></b> command, so that the DHCP relay agent does not immediately delete the entry matching a client after forwarding a DHCP ACK message to the client. Instead, the DHCP relay agent deletes the entry that has been aged out to ensure that the subsequently received DHCP ACK messages can be forwarded to the client.</p>
<p><strong>Prerequisites</strong></p>
<p>DHCP has been enabled globally using the <b><span class="cmdname">dhcp enable</span></b> command.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942841705__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a DHCP relay agent to forward all DHCP ACK messages.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>dhcp enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>dhcp relay reply forward all enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-DHCP_Configuration_Commands_title.html">DHCPv4 Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/DHCP_RELAY_RELEASE.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/DHCP_RELAY_REQUEST_SERVER-MATCH_ENABLE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>