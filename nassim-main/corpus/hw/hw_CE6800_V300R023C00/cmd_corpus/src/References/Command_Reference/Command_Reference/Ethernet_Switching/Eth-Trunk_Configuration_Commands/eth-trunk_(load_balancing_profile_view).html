
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="eth-trunk (load balancing profile view)">
<meta name="DC.subject" content="eth-trunk (load balancing profile view)">
<meta name="keywords" content="eth-trunk (load balancing profile view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Eth-Trunk_Interface_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PORTADDTOETHTRUNK(IFMTRUNKOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/ETH-TRUNK_MODE_FLOWLET-GAP-TIME.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_FWM_TRUNK">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942840961">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>eth-trunk (load balancing profile view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942840961"></a><a name="EN-US_CLIREF_0000001942840961"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">eth-trunk (load balancing profile view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942840961__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">eth-trunk</span></b> command configures an Eth-Trunk load balancing mode in a load balancing profile.</p>
<p>The <b><span class="cmdname">undo eth-trunk</span></b> command restores the default Eth-Trunk load balancing mode in a load balancing profile.</p>
</p>
<p><p>
By default, for the CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE6860-SAN, CE6866, CE6860-HAM, and CE6866K, the load balancing modes are seed(1) and hash-mode(1).
</p>
<p>
By default, for the CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, and CE6881H-K, the load balancing modes are universal-id(1) and hash-mode(1).
</p>
<p>
By default, for the CE8855, CE8851-32CQ4BQ, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6885-SAN, and CE6885-LL (low latency mode), the load balancing modes are universal-id(1), seed(1), and hash-mode(1).
</p>
</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942840961__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">



<p>For CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE8855, CE8851-32CQ4BQ, CE6860-SAN, CE6866, CE6860-HAM, CE6866K, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN, CE6885-LL (low latency mode): </p>

<p><b><span class="cmdname">eth-trunk </span></b>{ <strong><span>seed</span></strong> <i><span class="varname">seed-data</span></i> | <strong><span>hash-mode</span></strong> <i><span class="varname">hash-mode-id</span></i> } <sup>*</sup></p>

<p><b><span class="cmdname">undo eth-trunk </span></b>[ <strong><span>seed</span></strong> [ <i><span class="varname">seed-data</span></i> ] | <strong><span>hash-mode</span></strong> [ <i><span class="varname">hash-mode-id</span></i> ] ] <sup>*</sup></p>




<p>For CE8855, CE8851-32CQ4BQ, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6863E-48S8CQ, CE6885-SAN, CE6885-LL (low latency mode): </p>

<p><b><span class="cmdname">eth-trunk universal-id </span></b><i><span class="varname">universal-id</span></i></p>

<p><b><span class="cmdname">undo eth-trunk universal-id </span></b>[ <i><span class="varname">universal-id</span></i> ]</p>

<p>For CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, CE6881H-K: </p>

<p><b><span class="cmdname">eth-trunk </span></b>{ <strong><span>universal-id</span></strong> <i><span class="varname">universal-id</span></i> | <strong><span>hash-mode</span></strong> <i><span class="varname">hash-mode-id</span></i> } <sup>*</sup></p>

<p><b><span class="cmdname">undo eth-trunk </span></b>[ <strong><span>universal-id</span></strong> [ <i><span class="varname">universal-id</span></i> ] | <strong><span>hash-mode</span></strong> [ <i><span class="varname">hash-mode-id</span></i> ] ] <sup>*</sup></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942840961__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>universal-id</span></strong> <i><span class="varname">universal-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the offset of the hash algorithm.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6863H, CE6863H-K, CE6855-48XS8CQ, CE6885-SAN, CE8855, CE8851-32CQ4BQ, CE6885-LL (low latency mode), CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 16. The default value is 1.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>hash-mode</span></strong> <i><span class="varname">hash-mode-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the hash algorithm for Eth-Trunk load balancing.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer that ranges from 1 to 13. The default value is 1.</p>
<p>The value is an integer that ranges from 1 to 3. The default value is 1.</p>
<p>The value is an integer that ranges from 1 to 9. The default value is 1.</p>
<p>For the CE6855-48XS8CQ, CE6885-SAN, CE8855, CE8851-32CQ4BQ, CE6885-LL (low latency mode), CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ:The value is an integer that ranges from 1 to 13. The default value is 1.</p>
<p>For the CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE8850-SAN, CE8851K, CE8851-32CQ8DQ-P and CE8850-HAM:The value is an integer that ranges from 1 to 9. The default value is 1.</p>
<p>For the CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6820H, CE6820H-K and CE6820S:The value is an integer that ranges from 1 to 3. The default value is 1.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>seed</span></strong> <i><span class="varname">seed-data</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the start hash value of the load balancing hash algorithm.</p>
</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>This parameter is supported only on the CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE6885-LL (low latency mode), CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 1 to 65535. The default value is 1.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942840961__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Load balancing profile view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942840961__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942840961__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>On a hierarchical network, the access layer is connected to the aggregation layer through Eth-Trunks, and the aggregation layer is also connected to the core layer through Eth-Trunks. If the same hash algorithm is configured on devices at both the access layer and aggregation layer, the same hash result will be obtained. As a result, traffic sent by devices at the aggregation layer may not be load balanced on Eth-Trunk member links.</p>

<p>For the CE6820H, CE6820H-K, CE6820S, CE6863H, CE6863H-K, CE6881H, and CE6881H-K, you can configure different universal-id values on aggregation devices and access devices so that aggregation devices can obtain different hash results from access devices, implementing even load balancing. Different load balancing results will be obtained for traffic sent from an Eth-Trunk when different hash algorithms are used. You can select a proper hash-mode-id for load balancing based on the traffic model. The recommended configurations are as follows:</p>

<ul><li>The default hash mode is hash mode 1. The scenario where the source and destination are the same is supported.</li><li>In an underlay scenario, hash mode 2 can be used.</li><li>In an overlay scenario, hash mode 3 can be used.</li><li>If the hash mode of Eth-Trunk load balancing is the same as that of ECMP load balancing, hash polarization may occur.</li></ul>

<p>For the CE8851-32CQ8DQ-P, CE8850-HAM, CE8850-SAN, CE8851K, CE6860-SAN, CE6866, CE6860-HAM, and CE6866K, different load balancing results will be obtained for traffic sent from an Eth-Trunk when different hash algorithms are used. You can select a proper hash-mode-id for load balancing based on the traffic model.</p>

<ul><li>If the source MAC address and source IP address change, you are advised to set hash-mode to 8.</li><li>If the source or destination MAC address changes, you are advised to set hash-mode to 9.</li><li>If the source and destination IP addresses change, you are advised to set hash-mode to 8.</li><li>If the destination MAC address and destination IP address change, you are advised to set hash-mode to 1 or 7.</li><li>If the source MAC address changes, you are advised to set hash-mode to 1, 2, or 7.</li><li>If the destination IP address changes, you are advised to set hash-mode to 7.</li><li>If the source IP address changes, you are advised to set hash-mode to 1, 7, or 9.</li><li>Other hash-mode-id values are applicable to the scenario where incoming traffic is uneven. You are advised to use the default hash algorithm.</li></ul>

<p>For the CE8855, CE8851-32CQ4BQ, CE6855-48XS8CQ, CE6885, CE6885-T, CE6885-LL (standard forwarding mode), CE6885-SAN, and CE6885-LL (low latency mode), you can configure different universal-id values on aggregation devices and access devices so that aggregation devices can obtain different hash results from access devices, implementing even load balancing.</p>

<ul><li>If the source IP address changes, you are advised to set hash-mode to 2.</li><li>If the destination IP address changes, you are advised to set hash-mode to 1 or 5.</li><li>If the source and destination IP addresses change, you are advised to set hash-mode to 4 or 5.</li><li>If the source or destination MAC address changes, you are advised to set hash-mode to 1.</li><li>If the source and destination MAC addresses change, you are advised to set hash-mode to 2 or 5.</li><li>If the source port number changes, you are advised to set hash-mode to 2 or 3.</li><li>If the destination port number changes, you are advised to set hash-mode to 2 or 6.</li><li>Other hash-mode-id values are applicable to the scenario where incoming traffic is uneven. You are advised to use the default hash algorithm.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942840961__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">


<div class="p"># Set the load balancing hash algorithm to 3 in a load balancing profile.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>load-balance profile default</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-load-balance-profile-default] <strong>eth-trunk hash-mode 3</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Eth-Trunk_Interface_Configuration_Commands_title.html">Eth-Trunk Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/PORTADDTOETHTRUNK(IFMTRUNKOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/ETH-TRUNK_MODE_FLOWLET-GAP-TIME.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>