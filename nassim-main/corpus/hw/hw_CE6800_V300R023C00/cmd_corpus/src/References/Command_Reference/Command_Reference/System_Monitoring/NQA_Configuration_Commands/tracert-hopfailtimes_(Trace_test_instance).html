
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="tracert-hopfailtimes (Trace test instance)">
<meta name="DC.subject" content="tracert-hopfailtimes (Trace test instance)">
<meta name="keywords" content="tracert-hopfailtimes (Trace test instance)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_NQA_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/UDPJITTERTOS(NQAIP4OM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/TRACELIVETIME(NQAIP4OM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitoring">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="featuretype" content="System Monitoring">
<meta name="DC.Creator" content="SUBSYS_ID_NQAIP4OM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942848113">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>tracert-hopfailtimes (Trace test instance)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942848113"></a><a name="EN-US_CLIREF_0000001942848113"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">tracert-hopfailtimes (Trace test instance)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942848113__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">tracert-hopfailtimes</span></b> command sets the maximum hop failures in a probe for a trace test instance. When the number of hop failures reaches the set value, the probe is considered failed.</p>
<p>The <b><span class="cmdname">undo tracert-hopfailtimes</span></b> command restores the default maximum hop.</p>
</p>
<p>By default, a probe is considered failed when there are five hop failures in the probe.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942848113__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">tracert-hopfailtimes </span></b><i><span class="varname">hopFailTimes</span></i></p>

<p><b><span class="cmdname">undo tracert-hopfailtimes</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942848113__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">hopFailTimes</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of continuous hop failures.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942848113__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>NQA view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942848113__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942848113__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>In the test, the operation of sending a test packet is called a probe. Multiple packets can be sent during a test, which means that a test contains multiple probes.<p></p>
<span>An NQA trace test is used to monitor the forwarding</span> path between the NQA client and a destination and collect statistics about devices along the forwarding path. The process of a test is as follows:<p></p>
<span>1</span>.The client constructs a UDP packet with TTL 1 and sends the packet to the destination.<p></p>
<span>2</span>.After the first-hop device receives the UDP packet, it checks the TTL field and finds that the TTL decreases to 0. Then, it discards the UDP packet and sends an ICMP Time Exceeded packet to the client.<p></p>
<span>3</span>.After the client receives the ICMP Time Exceeded packet, it records the IP address of the first-hop device and re-constructs a UDP packet with TTL 2.<p></p>
<span>4</span>.After the second-hop device receives the UDP packet, it checks the TTL field and finds that the TTL decreases to 0. Then, it discards the UDP packets and returns an ICMP Time Exceeded packet.<p></p>
<span>5</span>.The procedure repeats after the packet reaches the last-hop device. The last-hop device returns an ICMP Port Unreachable packet to the client.<p></p>
<span>In this process</span>, the client may fail to receive the ICMP Time Exceeded packet because the devices between the client and destination are configured with the firewall or configured not to respond to ICMP packets. In this case, the probe of this hop fails. In actual applications, the client may fail to receive the ICMP Time Exceeded packet due to a node fault on the path.<p></p>
<span>By default</span>, the maximum TTL is 30. To prevent continuous hop failures for a long time, you can run the <b><span class="cmdname">tracert-hopfailtimes</span></b> command to set the maximum hop failures for a trace test instance. When the number of hop failures reaches the set value, the probe fails.</p>
<p><strong>Configuration Impact</strong></p>
<p>The <b><span class="cmdname">tracert-livetime</span></b> command sets the minimum and maximum lifetime of a test instance. This prevents endless traveling of test packets in routing on the network. You are advised to use the <b><span class="cmdname">tracert-livetime</span></b> command and the <b><span class="cmdname">tracert-hopfailtimes</span></b> command together to improve efficiency in performing trace tests.</p>
<p><strong>Precautions</strong></p>
<p>If parameters need to be changed during the running of the test instance, the system prompts you whether to terminate the test instance. Press "Y" or "N" as required.</p>

<ul><li>If you press "Y", the test instance is terminated and parameters changed. The settings take effect after being committed. To restart the test instance, run the <b><span class="cmdname">start</span></b> command.</li><li>If you press "N", the test instance keeps running, and the parameters fail to be modified.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942848113__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the maximum hop failures for the test instance named user test to 10.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>nqa test-instance user test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-nqa-user-test] <strong>test-type trace</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-nqa-user-test] <strong>tracert-hopfailtimes 10</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_NQA_Configuration_Commands_title.html">NQA Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/UDPJITTERTOS(NQAIP4OM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/TRACELIVETIME(NQAIP4OM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>