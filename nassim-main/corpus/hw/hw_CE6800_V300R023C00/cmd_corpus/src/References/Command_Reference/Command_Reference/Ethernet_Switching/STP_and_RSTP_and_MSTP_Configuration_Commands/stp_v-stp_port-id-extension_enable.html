
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="stp v-stp port-id-extension enable">
<meta name="DC.subject" content="stp v-stp port-id-extension enable">
<meta name="keywords" content="stp v-stp port-id-extension enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/GLOBALVSTPENABLE(MSTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/GLOBALVLANMAPPINGMODULO(MSTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_MSTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907761988">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>stp v-stp port-id-extension enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907761988"></a><a name="EN-US_CLIREF_0000001907761988"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">stp v-stp port-id-extension enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907761988__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">stp v-stp port-id-extension enable</span></b> command enables extension of the port ID carried in BPDUs sent by M-LAG interfaces in V-STP mode. This ID is calculated by subtracting the M-LAG ID from 4096.</p>
</p>
<p>By default, BPDUs sent by an M-LAG interface in V-STP mode carry the port ID 1.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907761988__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">stp v-stp port-id-extension enable</span></b></p>

<p><b><span class="cmdname">undo stp v-stp port-id-extension enable</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907761988__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907761988__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907761988__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907761988__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>Virtual Spanning Tree Protocol (V-STP) is a Layer 2 topology management feature in the M-LAG solution. The core idea of V-STP is to virtualize STP of two devices into STP of one device and present the two devices as one device for STP calculation. The default port ID carried in BPDUs sent by an M-LAG interface is 1. When a device is connected to a downstream network or transparently transmits BPDUs, the BPDUs sent by the M-LAG interface are looped back to the two V-STP devices. As a result, as the system MAC address and port number are the same, the system incorrectly considers that a self-loop occurs on the M-LAG interface and blocks the M-LAG interface. To solve this problem, the port ID extension function is introduced for BPDUs sent by M-LAG interfaces.<p></p>
<span>After this function is configured</span>, because different M-LAG interfaces send different port IDs, the M-LAG interface with a larger V-STP port ID is blocked after transparent transmission loopback is performed on the peer end. You can run the <b><span class="cmdname">display stp v-stp</span></b> command to view the port ID.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>If the V-STP mode is configured on the device but the peer device of the M-LAG interface is not configured to transparently transmit STP packets, you are not advised to run this command.<p></p>
<span>In V-STP mode</span>, the configuration of the STP port ID extension function must be the same on the two devices. Otherwise, STP flapping may occur.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907761988__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable the port ID extension function for M-LAG interfaces.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>stp v-stp enable</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>stp v-stp port-id-extension enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">STP/RSTP/MSTP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/GLOBALVSTPENABLE(MSTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/GLOBALVLANMAPPINGMODULO(MSTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>