
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="mac-address vlan (System view)">
<meta name="DC.subject" content="mac-address vlan (System view)">
<meta name="keywords" content="mac-address vlan (System view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_MAC_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/MAC-ADDRESS_UPDATE_ARP_ENABLE.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SETVXLANMACLIMIT(MACOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_MACOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907761632">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>mac-address vlan (System view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907761632"></a><a name="EN-US_CLIREF_0000001907761632"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">mac-address vlan (System view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907761632__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">mac-address blackhole</span></b> command configures a static blackhole MAC address entry.</p>
<p>The <b><span class="cmdname">undo mac-address blackhole</span></b> command deletes a static blackhole MAC address entry.</p>
<p>The <b><span class="cmdname">mac-address static vlan</span></b> command configures static MAC address entries for a VLAN to direct data forwarding.</p>
<p>The <b><span class="cmdname">undo mac-address static vlan</span></b> command deletes static MAC address entries for a VLAN.</p>
</p>
<p>By default, no static blackhole MAC address entry or VLAN-based static MAC address entry is configured.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907761632__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">mac-address blackhole </span></b><i><span class="varname">mac-address</span></i> <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i></p>

<p><b><span class="cmdname">mac-address static </span></b><i><span class="varname">mac-address</span></i> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> } <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i></p>

<p><b><span class="cmdname">undo mac-address </span></b><i><span class="varname">mac-address</span></i> <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i></p>

<p><b><span class="cmdname">undo mac-address </span></b>{ { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> } <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> | <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> [ <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> ] }</p>

<p><b><span class="cmdname">undo mac-address blackhole </span></b>[ <i><span class="varname">mac-address</span></i> ] <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i></p>

<p><b><span class="cmdname">undo mac-address static </span></b>{ { <i><span class="varname">mac-address</span></i> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> } <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> } | { { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> } <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> | <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> [ <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> ] } }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907761632__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">mac-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a destination MAC address entry.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in the H-H-H format. H is a 4-digit hexadecimal number, such as 00e0 or fc01. If an H contains fewer than 4 digits, the left-most digits are padded with zeros. For example, e0 is displayed as 00e0. The MAC address cannot be set to FFFF-FFFF-FFFF.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the ID of a VLAN to which the outbound interface belongs.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>For the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ:The value is an integer ranging from 1 to 4094.</p>
<p>For the CE6885-LL (low latency mode):The value is an integer ranging from 1 to 1023.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>static</span></strong> <i><span class="varname">mac-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates a static MAC address entry.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in the H-H-H format. H is a 4-digit hexadecimal number, such as 00e0 or fc01. If an H contains fewer than 4 digits, the left-most digits are padded with zeros. For example, e0 is displayed as 00e0. The MAC address cannot be set to FFFF-FFFF-FFFF.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-type</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an interface type.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an interface number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of an interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>blackhole</span></strong> <i><span class="varname">mac-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates a blackhole entry.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in the H-H-H format. H is a 4-digit hexadecimal number, such as 00e0 or fc01. If an H contains fewer than 4 digits, the left-most digits are padded with zeros. For example, e0 is displayed as 00e0. The MAC address cannot be set to FFFF-FFFF-FFFF.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907761632__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907761632__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907761632__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<ul><li>MAC address table capacity attack<p></p>
<span>The attack source sends packets with different source</span> MAC addresses to a network device. After receiving these packets, the network device learns the source MAC addresses. Since the capacity of a MAC address table is limited, when the number of the MAC addresses in the MAC address table reaches the limit, the source MAC addresses of valid packets cannot be learned. These packets sent from the attack source are also broadcast in the VLAN, consuming lots of bandwidth on the network. This may also affect the hosts attached to the network device.</li><li>MAC address entry attack<p></p>
<span>When a device learns source MAC addresses and creates</span> a MAC address table, the system cannot identify whether the packets are from authorized users or hackers. This brings security threats. If hackers send attack packets with forged source MAC addresses and access a device through other interfaces, the device will learn incorrect MAC address entries. As a result, the packets that should be forwarded to authorized users are forwarded to hackers.<p></p>
<span>To improve interface security</span>, a network administrator can run the <b><span class="cmdname">mac-address static</span></b> command to add specific MAC address entries to the MAC address table. User devices are bound to interfaces to prevent unauthorized users from obtaining data.</li></ul>
<p><strong>Configuration Impact</strong></p>
<p><p>After static MAC address entries are configured, when receiving a frame with a specific MAC address, a device directly forwards the frame through the corresponding outbound interface. Static MAC address entries will not be aged and they will not be lost after the system resets or the board is hot-swapped.<p></p>
<span>The device that has MAC flapping enabled will send</span> its received packets through all interfaces except the interface that receives the packets. This ensures that the silent host receives the packets.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>Manually configured MAC address entries take precedence over automatically generated entries. Static and static blackhole MAC address entries that are configured by users will not be overwritten by dynamic MAC address entries. Dynamic MAC address entries, however, can be overwritten by static and blackhole MAC address entries.<p></p>
<span>The network administrator is familiar with the MAC</span> addresses of the network devices that need to use static MAC address entries for communication; otherwise, the configuration will interrupt authorized users' communication.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907761632__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a static MAC address entry with the outbound interface belonging to a specified VLAN.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>vlan 10</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vlan10] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>vlan 20</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vlan20] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/3</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/3</span>] <strong>portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/3</span>] <strong>port default vlan 10</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/3</span>] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port link-type trunk</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port trunk allow-pass vlan 20</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mac-address static 00e0-fc12-3457 <span>100GE</span> <span>1/0/3</span> vlan 10</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mac-address static 00e0-fc12-3456 <span>100GE</span> <span>1/0/1</span> vlan 20</strong>
</pre>
</div>

<div class="p"># Configure a static MAC address entry based on a specified interface and VLAN.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>vlan 40</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vlan40] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port link-type trunk</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port trunk allow-pass vlan 40</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mac-address static 1-1-1 <span>100GE</span> <span>1/0/1</span> vlan 40</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_MAC_Configuration_Commands_title.html">MAC Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/MAC-ADDRESS_UPDATE_ARP_ENABLE.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/SETVXLANMACLIMIT(MACOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>