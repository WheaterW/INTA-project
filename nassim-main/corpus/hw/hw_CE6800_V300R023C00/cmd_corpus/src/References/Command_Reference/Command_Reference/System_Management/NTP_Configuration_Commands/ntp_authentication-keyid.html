
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ntp authentication-keyid">
<meta name="DC.subject" content="ntp authentication-keyid">
<meta name="keywords" content="ntp authentication-keyid">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_NTP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/AUTHENTICATION-ENABLE(NTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BROADCAST-CLIENT-SERVER(NTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Creator" content="SUBSYS_ID_NTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000002158962780">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ntp authentication-keyid</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000002158962780"></a><a name="EN-US_CLIREF_0000002158962780"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1"><span>ntp authentication-keyid</span></h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000002158962780__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ntp authentication-keyid authentication-mode</span></b> command sets the NTP verification key.</p>
<p>The <b><span class="cmdname">undo ntp authentication-keyid</span></b> command cancels the NTP verification key.</p>
</p>
<p>By default, no authentication key is set.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000002158962780__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p><b><span class="cmdname">ntp authentication-keyid </span></b><i><span class="varname">keyId</span></i> <strong><span>authentication-mode</span></strong> { <strong><span>md5</span></strong> | <strong><span>hmac-sha256</span></strong> | <strong><span>aes-128-cmac</span></strong> | <strong><span>aes-256-cmac</span></strong> } { <i><span class="varname">password</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">password</span></i> }</p>


<p><b><span class="cmdname">undo ntp authentication-keyid </span></b><i><span class="varname">keyId</span></i></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000002158962780__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>md5</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates MD5 authentication.</p>
<p>The MD5 algorithm is insecure and is not recommended. You are advised to use other encryption algorithms for NTP key authentication.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>hmac-sha256</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates HMAC-SHA256 authentication.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>aes-128-cmac</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates AES-128-CMAC authentication.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>aes-256-cmac</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates AES-256-CMAC authentication.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">password</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><p>Sets an authentication password, which is in simple text.</p>
<ul><li>When password complexity-check is disabled: the new password is at least eight characters long and contains at least two of the following types: upper-case letters, lower-case letters, digits, and special characters.</li><li>When password complexity-check is enabled: the password must consist of at least 12 characters, and consist 4 types of characters, including lowercase letters, uppercase letters, digits, and special characters.</li><li>For security purposes, you are advised to configure a password in ciphertext mode. To further improve device security, periodically change the password.</li></ul>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p><p>If the password complexity check is enabled, the value is a string of 12 to 255 case-sensitive characters, spaces supported.</p>
<p>If the password complexity check is disabled, the value is a string of 1 to 255 case-sensitive characters, spaces supported.</p>
<p>In aes-128-cmac mode, the value is a string of case-sensitive characters, spaces supported.  Its length is 16 in cleartext mode.</p>
<p>In AES-256-CMAC authentication mode, the value is a string of case-sensitive characters, spaces supported. Its length is 32 in cleartext mode.</p>
</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>cipher</span></strong> <i><span class="varname">password</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets a ciphertext authentication password.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The password is a string of case-sensitive characters, with spaces supported. A ciphertext password is a string of 20 to 432 characters.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>authentication-keyid</span></strong> <i><span class="varname">keyId</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Authentication key number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer in the range from 1 to 4294967295.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000002158962780__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000002158962780__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000002158962780__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>On some networks that require high security, you need to enable the authentication function when running the NTP protocol. Password authentication on the client and server ensures that the client synchronizes only with the authenticated device, improving network security.</p>
<p><strong>Follow-up Procedure</strong></p>
<p><p>After the NTP verification key is configured, you need to run the <b><span class="cmdname">ntp trusted authentication-keyid</span></b> command to set the key to be reliable.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>If this command is the first NTP configuration command, the system automatically adds the ntp [ ipv6 ] server disable command to the configuration file to disable the NTP server function. To enable the NTP server function, run the undo ntp [ ipv6 ] server disable command. If this command is the last NTP configuration command to be deleted, the system automatically deletes the ntp [ ipv6 ] server disable command from the configuration file when you delete this command.<p></p>
<span>The md5 parameter in this command can be used only</span> after the weak security algorithm/protocol feature package (WEAKEA) has been installed using the <b><span class="cmdname">install feature-software WEAKEA</span></b> command.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000002158962780__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the HMAC-SHA256 authentication.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ntp authentication-keyid 10 authentication-mode hmac-sha256 YsHsjx_202206</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_NTP_Configuration_Commands_title.html">NTP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/AUTHENTICATION-ENABLE(NTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BROADCAST-CLIENT-SERVER(NTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>