
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ip extcommunity-filter basic">
<meta name="DC.subject" content="ip extcommunity-filter basic">
<meta name="keywords" content="ip extcommunity-filter basic">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IP_Routing_Policy_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/ADVANCED-EXTCOMMUNITY-FILTER_1(RTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/ADVANCED-ENC(RTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_RTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907606072">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ip extcommunity-filter basic</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907606072"></a><a name="EN-US_CLIREF_0000001907606072"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">ip extcommunity-filter basic</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907606072__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ip extcommunity-filter basic</span></b> command adds a basic VPN-Target extended community filter.</p>
<p>The <b><span class="cmdname">undo ip extcommunity-filter basic</span></b> command deletes a specified basic VPN-Target extended community filter.</p>
</p>
<p>By default, no basic VPN-Target extended community filter is configured.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907606072__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">ip extcommunity-filter basic </span></b><i><span class="varname">basic-extcomm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] <i><span class="varname">matchMode</span></i> { <strong><span>rt</span></strong> <i><span class="varname">extCmntyStr</span></i> } &amp;&lt;1-16&gt;</p>

<p><b><span class="cmdname">undo ip extcommunity-filter basic </span></b><i><span class="varname">basic-extcomm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] [ <i><span class="varname">matchMode</span></i> { <strong><span>rt</span></strong> <i><span class="varname">extCmntyStr</span></i> } &amp;&lt;1-16&gt; ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907606072__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>index</span></strong> <i><span class="varname">index-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the sequence number of a basic VPN-Target extended community filter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4294967295.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">matchMode</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the matching mode of the basic VPN-Target extended community filter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is an enumerated type:</p>
<ul><li>permit: Sets the matching mode of the VPN-Target extended community filter to permit.</li><li>deny: Sets the matching mode of the VPN-Target extended community filter to deny.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>rt</span></strong> <i><span class="varname">extCmntyStr</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the value of basic VPN-Target extended community.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value of basic VPN-Target extended community can be expressed in any of the following formats:</p>
<ul><li>2-byte AS number:4-byte user-defined number, for example, 1:3. The AS number ranges from 0 to 65535, and the user-defined number ranges from 0 to 4294967295.</li><li>IPv4-address:2-byte user-defined number, for example, 192.168.122.15:1. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.</li><li>Integral 4-byte AS number:2-byte user-defined number, for example, 0:3 or 65537:3. An AS number ranges from 65536 to 4294967295. A user-defined number ranges from 0 to 65535.</li><li>4-byte AS number in dotted notation:2-byte user-defined number, for example, 0.0:3 or 0.1:0. A 4-byte AS number in dotted notation is in the format of x.y, where x and y are integers ranging from 0 to 65535. A user-defined number ranges from 0 to 65535.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>basic</span></strong> <i><span class="varname">basic-extcomm-filter-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of the basic VPN-Target extended community filter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The name is a string of 1 to 51 case-sensitive characters, spaces not supported. The string cannot be all digits. The character string can contain spaces if it is enclosed with double quotation marks (").</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907606072__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907606072__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907606072__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>A VPN-Target extended community filter can be used as a matching condition of a route-policy using a command, such as the if-match extcommunity-filter zz command.<p></p>
<span>Only the extended community number can be specified</span> for a basic VPN-Target extended community filter. The regular expression can be used as a matching rule in an advanced VPN-Target extended community filter.<p></p>
<span>The relationship between the rules of the VPN-Target</span> extended community filter is "OR", which is different from that of an RD filter. This is because each route has only one RD but can have multiple communities.<p></p>
<span>For example</span>, a VPN-Target extended community filter can be set in either of the following formats, with the same filtering result:<p></p>
<span>Format 1</span>:<p></p>
<span>ip extcommunity-filter 1 permit rt 100</span>:1 rt 200:1 rt 300:1<p></p>
<span>The filter has one rule</span>, which consists of three VPN-Targets: 100:1, 200:1, and 300:1. The relationship between them is "OR."<p></p>
<span>Format 2</span>:<p></p>
<span>ip extcommunity-filter 1 permit rt 100</span>:1<p></p>
<span>ip extcommunity-filter 1 permit rt 200</span>:1 rt 300:1<p></p>
<span>The filter has two rules</span>. Rule 1 consists of VPN-Target 100:1, and rule 2 consists of VPN-Targets 200:1 and 300:1. The relationship between the two rules is "OR."<p></p>
<span>In format 2</span>, the VPN-Target extended community defined in each rule must be a sub-set of route VPN-Target extended communities so that the rule can be matched.<p></p>
<span>The</span> <b><span class="cmdname">undo ip extcommunity-filter</span></b> command deletes a specified VPN-Target extended community filter.<p></p>
<span>The</span> display ip extcommunity-filter command displays detailed configurations of the VPN-Target extended community filter.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<p><p>The ip extcommunity-filter command filters routes based on the RT attributes of the routes. The routes that match the filtering are permitted to pass through, and the routes that fail to match the filtering are denied.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>The extended community attributes of a route include VPN-target and Source of Origin (SoO). The ip extcommunity-filter command adds a VPN-Target extended community filter.<p></p>
<span>By default</span>, VPN-Target extended community filters work in deny mode. If all matching rules in a filter are configured to work in deny mode, all routes are denied by the filter; to prevent this problem, configure one matching rule in permit mode after one or multiple matching rules in deny mode so that the routes except for those denied by preceding matching rules are permitted by the filter.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907606072__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure VPN-target extended community filter named aa.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip extcommunity-filter basic aa deny rt 200:200</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IP_Routing_Policy_Configuration_Commands_title.html">Routing Policy Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/ADVANCED-EXTCOMMUNITY-FILTER_1(RTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/ADVANCED-ENC(RTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>