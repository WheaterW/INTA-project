
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ip community-filter basic">
<meta name="DC.subject" content="ip community-filter basic">
<meta name="keywords" content="ip community-filter basic">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IP_Routing_Policy_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/ADVANCED-COMMUNITY-FILTER_1(RTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/COMMUNITY-LIST(RTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_RTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907766004">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ip community-filter basic</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907766004"></a><a name="EN-US_CLIREF_0000001907766004"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">ip community-filter basic</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907766004__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ip community-filter basic</span></b> command adds a basic community filter.</p>
<p>The <b><span class="cmdname">undo ip community-filter basic</span></b> command deletes a basic community filter.</p>
</p>
<p>By default, no basic community filter exists.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907766004__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p><b><span class="cmdname">ip community-filter basic </span></b><i><span class="varname">basCfName</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-val</span></i> ] <i><span class="varname">matchMode</span></i> [ <i><span class="varname">cmntyStr</span></i> | <i><span class="varname">cmntyNum</span></i> | <strong><span>internet</span></strong> | <strong><span>no-advertise</span></strong> | <strong><span>no-export</span></strong> | <strong><span>no-export-subconfed</span></strong> ] &amp;&lt;1-20&gt;</p>


<p><b><span class="cmdname">undo ip community-filter basic </span></b><i><span class="varname">basCfName</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-val</span></i> ] [ <i><span class="varname">matchMode</span></i> ] [ <i><span class="varname">cmntyStr</span></i> | <i><span class="varname">cmntyNum</span></i> | <strong><span>internet</span></strong> | <strong><span>no-advertise</span></strong> | <strong><span>no-export</span></strong> | <strong><span>no-export-subconfed</span></strong> ] &amp;&lt;1-20&gt;</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907766004__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>index</span></strong> <i><span class="varname">index-val</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the sequence number of a basic community filter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4294967295.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">matchMode</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the matching mode of the community filter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is an enumerated type:</p>
<ul><li>permit: Sets the matching mode of the community filter to permit.</li><li>deny: Sets the matching mode of the community filter to deny.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">cmntyStr</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a community number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in the format of aa:nn. The values of aa, and nn are integers ranging from 0 to 65535.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">cmntyNum</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a community number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 4294967295.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>internet</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Allows the routes that match the community filter to be sent to all peers.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>no-advertise</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Prevents routes from being advertised to other peers.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>no-export</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Prevents routes from being advertised outside an AS. If an AS confederation is used, routes are not advertised outside the AS confederation, but to other sub-ASs in the AS confederation.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>no-export-subconfed</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Prevents routes from being advertised outside an AS. If an AS confederation is used, routes are not advertised to any other sub-ASs in the AS confederation.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>basic</span></strong> <i><span class="varname">basCfName</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a basic community filter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 51 case-sensitive characters. The string cannot be all digits.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907766004__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907766004__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907766004__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>The community attribute is a private attribute of BGP and can be used to filter only BGP routes. The community attribute can be used as a matching condition of a route-policy using a command, such as the <b><span class="cmdname">if-match community-filter</span></b> command.</p>
</p>
<p><strong>Follow-up Procedure</strong></p>
<p><p>Run the <b><span class="cmdname">display ip community-filter</span></b> command to view detailed community filter configurations.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>Only a community number or well-known community attribute can be specified in a basic community filter. Only a regular expression can be specified as a matching rule in an advanced community filter.<p></p>
<span>The relationship between the rules of the community</span> filter is "AND", which is different from that of an RD filter. This is because each route has only one RD but can have multiple communities.<p></p>
<span>A community filter in different formats may lead to</span> different matching results. For example:<p></p>
<span>Format 1</span>:<p></p>
<span>ip community-filter 1 permit 100</span>:1 200:1 300:1<p></p>
<span>The relationship between 100</span>:1, 200:1, and 300:1 is "AND."<p></p>
<span>Format 2</span>:<p></p>
<span>ip community-filter 1 permit 100</span>:1<p></p>
<span>ip community-filter 1 permit 200</span>:1 300:1<p></p>
<span>The relationship between 200</span>:1 and 300:1 is "AND", and the relationship between 100:1 and 200:1 or 300:1 is "OR. "<p></p>
<span>In the preceding configuration of the community filter</span>, the community defined in each rule must be a sub-set of the route community set so that the rule can be matched.<p></p>
<span>The RD filters in the following formats have the same</span> matching result:<p></p>
<span>Format 1</span>:<p></p>
<span>ip rd-filter 100 permit 100</span>:1 200:1 2.2.2.2:1 3.3.3.3:1<p></p>
<span>Format 2</span>:<p></p>
<span>ip rd-filter 100 permit 100</span>:1 200:1<p></p>
<span>ip rd-filter 100 permit 2</span>.2.2.2:1<p></p>
<span>ip rd-filter 100 permit 3</span>.3.3.3:1<p></p>
<span>The</span> <b><span class="cmdname">apply comm-filter delete</span></b> command run in the Route-Policy view deletes the specified community attribute from routes. An <b><span class="cmdname">ip community-filter</span></b> command can be used to specify community attributes but one such command specifies only one community attribute each time. To delete more than one community attribute, run the corresponding command multiple times. If multiple community attributes are specified in one filter, none of them can be deleted. For details, see the <b><span class="cmdname">apply comm-filter delete</span></b> command.<p></p>
<span>By default</span>, Community filters work in deny mode. If a route is not permitted, the route cannot pass the filter. If all filtering rules in a filter work in deny mode, all routes are denied by this filter. To prevent this problem, configure a filtering rule in permit mode after configuring one or more filtering rules in deny mode so that other routes can pass the filter.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907766004__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a basic community filter named aa.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip community-filter basic aa deny 1</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IP_Routing_Policy_Configuration_Commands_title.html">Routing Policy Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/ADVANCED-COMMUNITY-FILTER_1(RTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/COMMUNITY-LIST(RTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>