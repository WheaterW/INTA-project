
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="import-rib(BGP multi-instance VPN instance IPv4 address family view)">
<meta name="DC.subject" content="import-rib(BGP multi-instance VPN instance IPv4 address family view)">
<meta name="keywords" content="import-rib(BGP multi-instance VPN instance IPv4 address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-MULI-VRF-INSTANCE-IMPORT-INVARIABLE(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IP-MULI-VRF-IMPORT-DIRANDSTA-ROUTE(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942844409">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>import-rib(BGP multi-instance VPN instance IPv4 address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942844409"></a><a name="EN-US_CLIREF_0000001942844409"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">import-rib(BGP multi-instance VPN instance IPv4 address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942844409__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">import-rib vpn-instance</span></b> command imports BGP routes from a VPN instance into a BGP multi-instance VPN instance routing table.</p>
<p>The <b><span class="cmdname">undo import-rib vpn-instance</span></b> command cancels the configuration.</p>
</p>
<p>By default, a device does not import BGP routes from a VPN instance into a BGP multi-instance VPN instance routing table.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942844409__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">


<p><b><span class="cmdname">import-rib </span></b>{ <strong><span>base-instance</span></strong> { <strong><span>public</span></strong> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> } | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> } [ <strong><span>include-label-route</span></strong> ] [ <strong><span>valid-route</span></strong> ] [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]</p>




<p><b><span class="cmdname">undo import-rib </span></b>{ <strong><span>base-instance</span></strong> { <strong><span>public</span></strong> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> } | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> } [ <strong><span>include-label-route</span></strong> ] [ <strong><span>valid-route</span></strong> ] [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]</p>


</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942844409__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>base-instance</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the BGP base-instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>public</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports routes from the public network BGP routing table.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a VPN instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters without spaces. The VPN instance name cannot be _public_. If the character string is quoted by double quotation marks, the character string can contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>include-label-route</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Includes labeled routes received from peers as well as leaked VPN routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>valid-route</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports valid routes of a specified type. Valid routes include optimal routes, routes for load balancing, FRR routes, and reachable routes that are not selected for packet forwarding. If this parameter is not specified, only optimal routes, load balancing routes, and FRR routes can be imported.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a route-policy.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 200 case-sensitive characters without spaces. The character string can contain spaces if it is enclosed with double quotation marks (").</p>
</td>
</tr>


</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942844409__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP multi-instance VPN instance IPv4 address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942844409__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942844409__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>To configure a device to import BGP routes from a specified VPN instance into a BGP multi-instance VPN instance IPv4 routing table, run the <b><span class="cmdname">import-rib vpn-instance</span></b> command in the BGP multi-instance VPN instance IPv4 address family view.<p></p>
<span>If the valid-route parameter is specified in the</span> <b><span class="cmdname">import-rib vpn-instance</span></b> command, all valid BGP routes in the specified VPN instance are imported. If the valid-route parameter is not specified, only active BGP routes among valid BGP routes are imported.<p></p>
<span>If you want newly imported BGP routes to be preferentially</span> selected, specify the route-policy route-policy-name parameter so that the BGP attribute values in the filtered routes to be imported can be changed using the specified route-policy.</p>

<p>If base-instance is specified in the <b><span class="cmdname">import-rib vpn-instance</span></b> command, routes can be imported from the VPN instance of the BGP base instance. If base-instance is not specified, routes are imported only from the current BGP multi-instance.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>If the source of the non-valid-route routes imported using the <b><span class="cmdname">import-rib</span></b> command matches the instance and address family to which the <b><span class="cmdname">routing-table rib-only</span></b> command belongs, the two commands are mutually exclusive.<p></p>
<span>If route-policy-name is specified in the command</span>, the if-match interface or if-match route-type command configured in the routie-policy does not take effect.<p></p>
<span>BGP IPv4 route import between VPN and public network</span> instances does not take effect on non-labeled routes that are remotely or locally leaked, or routes imported in import or network mode.<p></p>
<span>Route import between VPN and public network instances</span> may cause BGP routing loops.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942844409__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a device to import valid BGP routes from the public network instance to a VPN instance's BGP routing table.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>route-distinguisher 100:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>vpn-target 111:1 both</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-instance-vpna] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpnb</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpnb] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpnb-af-ipv4] <strong>route-distinguisher 100:2</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpnb-af-ipv4] <strong>vpn-target 111:1 both</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpnb-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-instance-vpnb] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100 instance a</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a] <strong>ipv4-family vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-instance-a-vpna] <strong>import-rib vpn-instance vpnb</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/BGP-MULI-VRF-INSTANCE-IMPORT-INVARIABLE(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/IP-MULI-VRF-IMPORT-DIRANDSTA-ROUTE(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>