
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="route-mode (BMP monitor view)">
<meta name="DC.subject" content="route-mode (BMP monitor view)">
<meta name="keywords" content="route-mode (BMP monitor view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/RESET-BMP-SESSION(BMPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/MONITOR-ROUTE-MODE-PUB-LOC(BMPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BMPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907765492">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>route-mode (BMP monitor view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907765492"></a><a name="EN-US_CLIREF_0000001907765492"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">route-mode (BMP monitor view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907765492__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">route-mode adj-rib-in</span></b> command sets the type of RIB-in route whose statistics are to be sent by the BMP device to the monitoring server in a specified address family.</p>
<p>The <b><span class="cmdname">undo route-mode adj-rib-in</span></b> command restores the default configuration.</p>
<p>The <b><span class="cmdname">route-mode adj-rib-out</span></b> command sets the type of RIB-out route whose statistics are to be sent by the BMP device to the monitoring server in a specified address family.</p>
<p>The <b><span class="cmdname">undo route-mode adj-rib-out</span></b> command restores the default configuration.</p>
</p>
<p>By default, a BMP device is not enabled to report any routing information to any server.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907765492__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p><b><span class="cmdname">route-mode </span></b>{ <strong><span>ipv4-family</span></strong> | <strong><span>ipv6-family</span></strong> } <strong><span>unicast</span></strong> { <strong><span>adj-rib-in</span></strong> | <strong><span>adj-rib-out</span></strong> } { <strong><span>pre-policy</span></strong> | <strong><span>post-policy</span></strong> }</p>


<p><b><span class="cmdname">undo route-mode </span></b>{ <strong><span>ipv4-family</span></strong> | <strong><span>ipv6-family</span></strong> } <strong><span>unicast</span></strong> { <strong><span>adj-rib-in</span></strong> | <strong><span>adj-rib-out</span></strong> } { <strong><span>pre-policy</span></strong> | <strong><span>post-policy</span></strong> }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907765492__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv4-family</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the type of RIB-in or RIB-out route whose statistics are to be sent by the BMP device to the monitoring server in the IPv4 address family.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv6-family</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the type of RIB-in or RIB-out route whose statistics are to be sent by the BMP device to the monitoring server in the IPv6 address family.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>unicast</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the type of RIB-in or RIB-out route whose statistics are to be sent by the BMP device to the monitoring server in the unicast address family.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pre-policy</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sends statistics about all received routes to the monitoring server.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>post-policy</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sends statistics about only accepted routes to the monitoring server.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907765492__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BMP monitor view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907765492__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907765492__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>To set the type of RIB-in route (received from peers) whose statistics are to be sent by the BMP device to the monitoring server in a specified address family, run the <b><span class="cmdname">route-mode adj-rib-in</span></b> command. To configure the device to send statistics about all received routes to the monitoring server, specify pre-policy in the command. To configure the device to send statistics about only accepted routes (delivered to the routing table) to the monitoring server, specify post-policy in the command.<p></p>
<span>To set the type of RIB-out route whose statistics</span> are to be sent by the BMP device to the monitoring server in a specified address family, run the <b><span class="cmdname">route-mode adj-rib-out</span></b> command. If you want the monitoring server to monitor all the routes to be advertised, regardless of whether they match the export policy, specify pre-policy in the command. If you want the monitoring server to monitor only the advertised routes (those that match the export policy), specify post-policy in the command.</p>
</p>
<p><strong>Prerequisites</strong></p>
<div class="p"><p>The BMP-Monitor view has been displayed using any of the following commands:</p>

<ul><li>monitor public: The BMP device sends statistics about RIB-IN or RIB-OUT routes of all BGP peers in the public network address family to the monitoring server.</li><li>monitor all-vpn-instance: The BMP device sends statistics about RIB-IN or RIB-OUT routes of all BGP peers in all VPN instance address families to the monitoring server.</li><li>monitor peer: The BMP device sends statistics about RIB-IN or RIB-OUT routes of a specified BGP peer in the public network address family to the monitoring server.</li><li>monitor vpn-instance: The BMP device sends statistics about RIB-IN or RIB-OUT routes of all BGP peers in a specified VPN instance address family to the monitoring server.</li><li>monitor vpn-instance peer: The BMP device sends statistics about RIB-IN or RIB-OUT routes of a specified BGP peer in a specified VPN instance address family to the monitoring server.</li></ul>
</div>
<p><strong>Precautions</strong></p>
<p><p>If pre-policy is specified in the command, run the keep-all-routes command in the BGP view to save the routes carried in the BGP Update messages that are received from all BGP peers or peer groups after BGP connections are established, or run the peer keep-all-routes command to save the routes carried in the BGP Update messages that are received from a specified BGP peer or peer group after the BGP connection is established.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907765492__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the BMP device to send statistics about all the routes to be advertised to all BGP peers in the IPv4 unicast address family to the monitoring server.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bmp</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bmp] <strong>bmp-session 10.1.1.1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bmp-session-10.1.1.1] <strong>monitor public</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bmp-session-10.1.1.1-public] <strong>route-mode ipv4-family unicast adj-rib-out pre-policy</strong>
</pre>
</div>

<div class="p"># Configure the BMP device to send statistics about all the routes received from all BGP peers in the IPv4 unicast address family to the monitoring server.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bmp</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bmp] <strong>bmp-session 10.1.1.1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bmp-session-10.1.1.1] <strong>monitor public</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bmp-session-10.1.1.1-public] <strong>route-mode ipv4-family unicast adj-rib-in pre-policy</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/RESET-BMP-SESSION(BMPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/MONITOR-ROUTE-MODE-PUB-LOC(BMPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>