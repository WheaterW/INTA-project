
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="certificate-check">
<meta name="DC.subject" content="certificate-check">
<meta name="keywords" content="certificate-check">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-PKI_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CERTIFICATE_UPDATE_EXPIRE-TIME.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/CMP-REQUEST_AUTHENTICATION-CERT.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="DC.Creator" content="SUBSYS_ID_SEC_PKI">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907768044">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>certificate-check</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907768044"></a><a name="EN-US_CLIREF_0000001907768044"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">certificate-check</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907768044__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">certificate-check</span></b> command sets the method of checking whether a certificate in the PKI realm is revoked.</p>
<p>The <b><span class="cmdname">undo certificate-check</span></b> command cancels the method of checking whether a certificate in the PKI realm is revoked.</p>
</p>
<p>By default, the system does not check whether a certificate in the PKI realm is revoked.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907768044__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">certificate-check </span></b>{ { <strong><span>crl</span></strong> | <strong><span>ocsp</span></strong> } <sup>*</sup> [ <strong><span>none</span></strong> ] | <strong><span>none</span></strong> }</p>

<p><b><span class="cmdname">undo certificate-check</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907768044__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>crl</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the check method to Certificate Revocation List (CRL).</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ocsp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the check method to Online Certificate Status Protocol (OCSP).</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>none</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the system does not check whether a certificate is revoked.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907768044__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>PKI domain view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907768044__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907768044__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>When a PKI entity verifies the peer certificate, it often needs to check whether the peer certificate is valid, for example, whether the peer certificate has expired or has been added to the CRL. In this case, you can run this command to check the peer certificate status.<p></p>
<span>The following methods can be used to check the certificate</span> revocation status in a PKI realm:</p>

<ul><li>CRL mode<p></p>
<span>LDAP mode and LDAPv3 template mode</span>: A PKI entity obtains a CRL from an LDAP server by sending a CRL query request packet carrying the attributes and identifier of the LDAP server.</li><li>None mode<p></p>
<span>If no CRL server is available for the PKI entity or</span> the PKI entity does not need to check the peer certificate status, the None mode can be used. In this mode, the PKI entity does not check whether a certificate has been revoked; the system does not check whether the certificate chain is complete, but still verifies the certificate validity period and issuer.<p></p>
<span>You can perform the following operations as required</span>:</li><li>If the <b><span class="cmdname">certificate-check crl</span></b> command is configured, use only the CRL mode.</li><li>If the <b><span class="cmdname">certificate-check crl none</span></b> command is configured, use the CRL mode first. If the CRL mode is unavailable, use the None mode.</li><li>If the <b><span class="cmdname">certificate-check ocsp none</span></b> command is configured, use the OCSP mode first. If the OCSP mode is unavailable, use the None mode.</li><li>If the <b><span class="cmdname">certificate-check crl ocsp</span></b> command is configured for a certificate, the CRL mode is used first. If the CRL mode is unavailable, use the OCSP mode. If neither of the modes is unavailable, the certificate is considered invalid.</li><li>If the <b><span class="cmdname">certificate-check ocsp crl</span></b> command is configured for a certificate, use the OCSP mode first. If the OCSP mode is unavailable, use the CRL mode. If neither of the modes is unavailable, the certificate is considered invalid.</li><li>If the <b><span class="cmdname">certificate-check crl ocsp none</span></b> command is configured, use the CRL mode first. If the CRL mode is unavailable, use the OCSP mode. If neither of the modes is available, use the None mode.</li><li>If the <b><span class="cmdname">certificate-check ocsp crl none</span></b> command is configured, use the OCSP mode first. If the OCSP mode is unavailable, use the CRL mode. If neither of the modes is available, use the None mode.</li><li>If the <b><span class="cmdname">certificate-check none</span></b> command is configured, use the None mode. That is, the device does not check the certificate revocation status.</li></ul>
</div>
<p><strong>Precautions</strong></p>
<p>If this command is not executed in a PKI realm, the global certificate check method takes effect. The global certificate check method is configured by the <b><span class="cmdname">pki certificate-check</span></b> command in the system view.<p></p>
<span>The device can use the method configured in the PKI</span> realm to check certificate status only after the PKI realm is associated with a certain CA using the <b><span class="cmdname">ca-name</span></b> command.<p></p>
<span>After the</span> <b><span class="cmdname">certificate-check crl</span></b> command is configured, if the device does not have the CRL file, the device fails the certificate verification, and the certificate becomes invalid.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907768044__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the certificate check method to crl none in PKI realm test. If the CRL mode is unavailable, the certificate is regarded as valid.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki realm test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-realm-test] <strong>certificate-check crl none</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-PKI_Configuration_Commands_title.html">PKI Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/CERTIFICATE_UPDATE_EXPIRE-TIME.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/CMP-REQUEST_AUTHENTICATION-CERT.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>