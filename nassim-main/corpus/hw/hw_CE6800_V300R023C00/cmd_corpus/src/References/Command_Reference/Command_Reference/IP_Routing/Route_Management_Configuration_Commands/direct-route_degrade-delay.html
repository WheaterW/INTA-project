
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="direct-route degrade-delay">
<meta name="DC.subject" content="direct-route degrade-delay">
<meta name="keywords" content="direct-route degrade-delay">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IP_Routing_Basic_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IPV4VLINKENABLETAG(EUMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DIRECTPREFERENCE(DIRECTRTOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Route Management">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Route Management">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="Route Management">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_RGMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907762968">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>direct-route degrade-delay</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907762968"></a><a name="EN-US_CLIREF_0000001907762968"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">direct-route degrade-delay</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907762968__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">direct-route degrade-delay</span></b> command enables the cost recovery delay function for IPv4 direct routes on an interface after the interface changes from Down to Up.</p>
<p>The <b><span class="cmdname">undo direct-route degrade-delay</span></b> command disables a cost recovery delay for IPv4 direct routes on an interface.</p>
</p>
<p>By default, there is no such function on the interface.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907762968__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">direct-route degrade-delay </span></b><i><span class="varname">delay-time</span></i> <strong><span>degrade-cost</span></strong> <i><span class="varname">cost</span></i></p>

<p><b><span class="cmdname">undo direct-route degrade-delay</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907762968__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">delay-time</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the delay after which the original cost of the IPv4 direct route is restored on a specified interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 3600, in seconds.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>degrade-cost</span></strong> <i><span class="varname">cost</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the cost of the IPv4 direct route on a specified interface.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4294967295.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907762968__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Eth-Trunk sub-interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907762968__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907762968__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>In an M-LAG dual-active scenario, a CE is dual-homed to PE1 and PE2 through an Eth-Trunk interface working in LACP mode, and traffic is load-balanced. If either PE1 or PE2 fails and restarts, a traffic switchback is triggered. For example, PE1 restarts. After that, the Eth-Trunk member interface on PE1 detects the link Up state. In this case, PE1 successfully negotiates with the CE on LACP. The Eth-Trunk interface becomes Up, and the Eth-Trunk sub-interface entries are delivered. Since the entry information is huge, the delivery is time consuming. As a result, traffic sent from the network side to PE1 and the CE is dropped because the delivery of PE1's Eth-Trunk sub-interface entries is not complete.<p></p>
<span>To address the preceding problem</span>, run the <b><span class="cmdname">direct-route degrade-delay</span></b> command to increase the route cost. After the <b><span class="cmdname">direct-route degrade-delay</span></b> command is run, the cost of the direct IPv4 route on PE1 increases first. The route advertised by PE1 is no longer preferentially selected, and network-to-user traffic passes through PE2 through the backup link. After a specified delay time, the original cost of the direct IPv4 route on PE1 is restored. The route advertised by PE1 is preferentially selected again. Since PE1 has learned the MAC address of the base station, a network-to-user traffic switchback does not result in traffic loss.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>The direct-route degrade-delay, and <b><span class="cmdname">direct-route track vrrp</span></b> commands cannot all be configured simultaneously. If you run the commands, the latest configuration overrides the previous one.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907762968__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set degrade-cost cost to 50 and delay-time to 10s on Eth-Trunk1.1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface Eth-Trunk 1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-Eth-Trunk1] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Eth-Trunk1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface Eth-Trunk 1.1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Eth-Trunk1.1] <strong>direct-route degrade-delay 20 degrade-cost 50</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IP_Routing_Basic_Configuration_Commands_title.html">Route Management Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/IPV4VLINKENABLETAG(EUMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/DIRECTPREFERENCE(DIRECTRTOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>