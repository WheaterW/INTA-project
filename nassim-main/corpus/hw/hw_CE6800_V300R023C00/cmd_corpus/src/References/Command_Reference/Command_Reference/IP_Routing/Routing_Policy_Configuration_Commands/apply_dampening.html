
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="apply dampening">
<meta name="DC.subject" content="apply dampening">
<meta name="keywords" content="apply dampening">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IP_Routing_Policy_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/APPLY-COST-TYPE(RTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/APPLY-EXT-CMNTY(RTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="Routing Policy">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_RTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907605988">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>apply dampening</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907605988"></a><a name="EN-US_CLIREF_0000001907605988"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">apply dampening</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907605988__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">apply dampening</span></b> command sets BGP route dampening parameters.</p>
<p>The <b><span class="cmdname">undo apply dampening</span></b> command cancels the configuration.</p>
</p>
<p>By default, BGP route dampening parameters are not set.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907605988__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">apply dampening </span></b><i><span class="varname">half-life-reach</span></i> <i><span class="varname">reuse</span></i> <i><span class="varname">suppress</span></i> <i><span class="varname">ceiling</span></i></p>

<p><b><span class="cmdname">undo apply dampening</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907605988__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">half-life-reach</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the half-life of a reachable route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 45, in minutes.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">reuse</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the threshold for routes to be released from the dampening state. When the penalty value falls below the threshold, routes are reused.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 19998.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">suppress</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the threshold for routes to enter the dampening state. When the penalty value exceeds the threshold, routes are suppressed.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 2 to 19999. The configured value of suppress must be greater than the value of reuse.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ceiling</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the upper limit of the penalty value of routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1001 to 20000. The configured value of ceiling must be greater than the value of suppress.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907605988__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Route-policy view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907605988__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907605988__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>This command is used to suppress the impact of frequent route flapping on all devices on the network. This command is mainly used in BGP.<p></p>
<span>Different dampening parameters can be configured for</span> different nodes in the same route-policy as required. When route flapping occurs, BGP uses different dampening parameters to dampen the routes that match the route-policy.</p>
</p>
<p><strong>Implementation Procedure</strong></p>
<p><p>If the apply dampening command is run more than once, the latest configuration overwrites the previous one.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<p><p>If the apply dampening command is run, each time route flapping occurs, BGP adds a certain penalty value to this route.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>The parameters in this command do not have default values and must be configured explicitly. The values of reused, suppressed, and ceiling increase in ascending order. That is, the following condition must be met: reused &lt;suppressed &lt;ceiling. According to the formula MaxSuppressTime (second) = half-life-reach (minute) *60*(ln(ceiling/reused)/ln(2)), if the value of MaxSuppressTime is smaller than 1, dampening does not take effect. Therefore, to ensure that the value of MaxSuppressTime is greater than or equal to 1, the value of ceiling/reused must be large enough.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907605988__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set dampening parameters for BGP routes.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>route-policy aa permit node 10</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-route-policy] <strong>apply dampening 20 2000 10000 16000</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IP_Routing_Policy_Configuration_Commands_title.html">Routing Policy Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/APPLY-COST-TYPE(RTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/APPLY-EXT-CMNTY(RTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>