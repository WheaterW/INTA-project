
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ipv6 icmp-error">
<meta name="DC.subject" content="ipv6 icmp-error">
<meta name="keywords" content="ipv6 icmp-error">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IPv6_Basic_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/ICMP6SOURCEADDRESS(PP6OM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SETPATHMTU(PP6OM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IPv6 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="IPv6 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="IPv6 Basic">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Creator" content="SUBSYS_ID_PP6OM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907762188">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ipv6 icmp-error</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907762188"></a><a name="EN-US_CLIREF_0000001907762188"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">ipv6 icmp-error</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907762188__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ipv6 icmp-error</span></b> command limits the rate of sending ICMPv6 error messages.</p>
<p>The <b><span class="cmdname">undo ipv6 icmp-error</span></b> command restores the default.</p>
</p>
<p>By default, the size of the token buckets is 10 and the interval for placing tokens into the bucket is 100 milliseconds.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907762188__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">ipv6 icmp-error </span></b>{ <strong><span>ratelimit</span></strong> <i><span class="varname">interval</span></i> | <strong><span>bucket</span></strong> <i><span class="varname">bucket-size</span></i> } <sup>*</sup></p>

<p><b><span class="cmdname">undo ipv6 icmp-error</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907762188__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ratelimit</span></strong> <i><span class="varname">interval</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the interval for placing tokens into the bucket.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 2147483647, in milliseconds.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>bucket</span></strong> <i><span class="varname">bucket-size</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of tokens the bucket contains.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>It is an integer ranging from 1 to 200.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907762188__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907762188__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907762188__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>In the case that a network does not suffer any attacks, a Router can correctly send ICMPv6 error messages to notify other devices of abnormalities in message transmission. If an attacker frequently sends ICMPv6 message to network devices, the network devices need to respond with ICMPv6 messages, which greatly affects the throughput and CPU usage of the system. Therefore, to prevent the system from sending a great number of ICMPv6 messages, you can run the <b><span class="cmdname">ipv6 icmp-error</span></b> command to limit the rate at which ICMPv6 messages are sent.<p></p>
<span>The token bucket algorithm is used for counting ICMPv</span>6 messages. One token represents an ICMPv6 message. The system places tokens into the virtual bucket at a certain interval until the number of tokens in the bucket reaches the upper limit. Once the number of ICMPv6 messages exceeds the maximum tokens that the bucket can contain, the excessive messages are discarded. You can limit the rate at which ICMPv6 messages are sent by setting the bucket size and the interval for placing tokens into the bucket.</p>
<p><strong>Configuration Impact</strong></p>
<p>The <b><span class="cmdname">ipv6 icmp-error</span></b> command is circular in nature. That is, if the bucket sizes and intervals set two times are different, the latest setting takes effect.<p></p>
<span>If the interval for placing tokens into the bucket</span> is 0, it indicates that the interval is not limited.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907762188__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the bucket size of ICMPv6 to 50.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ipv6 icmp-error bucket 50</strong>
</pre>
</div>

<div class="p"># Set the interval for placing tokens into the bucket to 120 milliseconds and the bucket size to 50.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ipv6 icmp-error bucket 50 ratelimit 120</strong>
</pre>
</div>

<div class="p"># Set the interval for placing tokens into the bucket to 120 milliseconds.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ipv6 icmp-error ratelimit 120</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IPv6_Basic_Configuration_Commands_title.html">IPv6 Basic Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/ICMP6SOURCEADDRESS(PP6OM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/SETPATHMTU(PP6OM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>