
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="load-balance ecmp stateful enhanced enable">
<meta name="DC.subject" content="load-balance ecmp stateful enhanced enable">
<meta name="keywords" content="load-balance ecmp stateful enhanced enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-Load_Balancing_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/LOAD-BALANCE_ECMP_STATEFUL_ENABLE.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/LOCAL-PREFERENCE_ENHANCED.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Load Balancing">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Load Balancing">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="Load Balancing">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Creator" content="SUBSYS_ID_FWM_FIB">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907762228">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>load-balance ecmp stateful enhanced enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907762228"></a><a name="EN-US_CLIREF_0000001907762228"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">load-balance ecmp stateful enhanced enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907762228__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">load-balance ecmp stateful enhanced enable</span></b> command enables the ECMP load balancing consistency enhancement function.</p>
<p>The <b><span class="cmdname">undo load-balance ecmp stateful enhanced enable</span></b> command disables the ECMP load balancing consistency enhancement function.</p>
</p>
<p>By default, ECMP load balancing consistency enhancement is disabled.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907762228__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">load-balance ecmp stateful enhanced enable</span></b></p>

<p><b><span class="cmdname">undo load-balance ecmp stateful enhanced enable</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907762228__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907762228__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907762228__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907762228__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>When an ECMP member link fails, the ECMP load balancing consistency function ensures that the forwarding path of a normal link remains unchanged. However, if a faulty member link recovers or a new link is added, traffic is forwarded along another path. The ECMP load balancing consistency function cannot ensure that the original forwarding path remains unchanged. After ECMP load balancing consistency enhancement is enabled using the <b><span class="cmdname">load-balance ecmp stateful enhanced enable</span></b> command, if a faulty link is removed, only traffic on the faulty link is hashed again. If a new link is added, not all traffic is hashed again.</p>
<p><strong>Prerequisites</strong></p>
<p>Before running the <b><span class="cmdname">load-balance ecmp stateful enhanced enable</span></b> command to enable the ECMP load balancing consistency enhancement function, run the <strong>load-balance ecmp stateful enable</strong> command in the system view to enable the ECMP load balancing consistency function.</p>
<p><strong>Precautions</strong></p>
<ul><li>Before applying ECMP consistency enhancement, ensure that routes are symmetrically deployed. Specifically, multiple equal-cost paths to different destination addresses are either all the same or all different.</li><li>After ECMP consistency enhancement is enabled, you cannot change the configured load balancing hash algorithm, hash algorithm offset, or load balancing mode. Otherwise, this function may not take effect.</li><li>When the outbound interfaces of equal-cost links are intermittently disconnected, the ECMP load balancing consistency enhancement function may not take effect.</li><li>ECMP consistency enhancement may not take effect if outbound interfaces of equal-cost links are intermittently disconnected.</li><li>If ECMP members include IP tunnels, VXLAN tunnels, and VBDIF interfaces (next hops), the hash consistency function is not supported.</li><li>After ECMP consistency enhancement is configured, traffic will not be evenly hashed if the number of paths to the next hop is not a power of 2.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907762228__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable load balancing consistency enhancement.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>load-balance ecmp stateful enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>load-balance ecmp stateful enhanced enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-Load_Balancing_Configuration_Commands_title.html">Load Balancing Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/LOAD-BALANCE_ECMP_STATEFUL_ENABLE.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/LOCAL-PREFERENCE_ENHANCED.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>