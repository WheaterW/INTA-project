
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="dhcp option82 append vendor-specific">
<meta name="DC.subject" content="dhcp option82 append vendor-specific">
<meta name="keywords" content="dhcp option82 append vendor-specific">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-DHCP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DHCP_ENABLE.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DHCP_OPTION82_ENABLE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Creator" content="SUBSYS_ID_ESAP_DHCP">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942841685">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>dhcp option82 append vendor-specific</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942841685"></a><a name="EN-US_CLIREF_0000001942841685"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">dhcp option82 append vendor-specific</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942841685__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">dhcp option82 append vendor-specific</span></b> command inserts the Sub9 suboption into Option 82.</p>
<p>The <b><span class="cmdname">undo dhcp option82 append vendor-specific</span></b> command restores the default configuration.</p>
</p>
<p>By default, Sub9 suboption is not inserted into the Option 82 field of DHCP messages.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942841685__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">dhcp option82 append vendor-specific</span></b></p>

<p><b><span class="cmdname">undo dhcp option82 append vendor-specific</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942841685__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942841685__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100GE interface view,</span><span>10GE interface view,</span><span>200GE interface view,</span><span>25GE interface view,</span><span>400GE interface view,</span><span>50GE interface view,</span><span>Eth-Trunk interface view,</span><span>VLAN view,</span><span>Interface group view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942841685__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942841685__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>After the <b><span class="cmdname">dhcp option82 append vendor-specific</span></b> command is run on a DHCP relay agent, the device will insert the Sub9 suboption into the Option 82 field of a received DHCP message. When this DHCP message is forwarded to the DHCP server, the server obtains the DHCP client location information from the Sub9 suboption.<p></p>
<span>The Sub9 suboption has old and new formats</span>. The old format contains the vendor ID, for example, hwid. The new format does not contain the vendor ID.<p></p>
<span>Both the dhcp option82 append vendor-specific and</span> <b><span class="cmdname">dhcp option82 vendor-specific format</span></b> commands can insert the Sub9 into the Option 82 field of the DHCP message, except that the Sub9 formats are different:</p>

<ul><li>dhcp option82 append vendor-specific: inserts the Sub9 of the new format. The new format includes the location information such as the node identifier, system name, node chassis ID, node slot ID, node port number, and user VLAN.</li><li>dhcp option82 vendor-specific format: inserts the Sub9 of the old format.</li></ul>
<p><strong>Prerequisites</strong></p>
<p>The global DHCP function has been enabled using the <b><span class="cmdname">dhcp enable</span></b> command.</p>
<p><strong>Precautions</strong></p>
<p>If both the dhcp option82 append vendor-specific and <b><span class="cmdname">dhcp option82 vendor-specific format</span></b> commands are configured, the <b><span class="cmdname">dhcp option82 append vendor-specific</span></b> command takes effect.<p></p>
<span>If the insertion mode is set to insert and the packet</span> carries the Option 82 field:<p></p>
<span>When the</span> <b><span class="cmdname">dhcp option82 append vendor-specific</span></b> command is run, the device performs the following operations:</p>

<ul><li>If the Option 82 field does not contain suboption 9, the device inserts suboption 9 in the new format.</li><li>If the Option 82 field carries suboption 9 in the new format, the device adds suboption 9 to the original packet. If the Option 82 field carries suboption 9 in the old format, the device does not process the packet.</li></ul>

<p>If the <b><span class="cmdname">dhcp option82 vendor-specific format</span></b> command is run, the device performs the following operations:</p>

<ul><li>If the Option 82 field does not contain suboption 9, the device inserts suboption 9 in the old format.</li><li>If the Option 82 field carries suboption 9 in the new format, the device does not process the suboption. If the carried suboption 9 is in the old format and contains the HWID but does not contain the configured subcode, the corresponding subcode is added after the HWID. If the carried suboption 9 is in the old format but does not contain the HWID, the device adds the HWID and the corresponding suboption 9.</li></ul>

<p>If the Option 82 insertion mode is set to rebuild or packets do not carry the Option 82 field:</p>

<ul><li>If the <b><span class="cmdname">dhcp option82 append vendor-specific</span></b> command is run, the device replaces or adds suboption 9 in the original packet based on the new format.</li><li>If the <b><span class="cmdname">dhcp option82 vendor-specific format</span></b> command is run, the device replaces or adds suboption 9 in the original packet according to the old format.</li></ul>

<p>The total length of the Option 82 field cannot exceed 255 bytes.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942841685__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Insert the Sub9 suboption into the Option 82 field of DHCP messages in the <span>100GE</span> <span>1/0/1</span> interface view.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>dhcp enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>dhcp option82 insert enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>dhcp option82 append vendor-specific</strong>
</pre>
</div>


</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-DHCP_Configuration_Commands_title.html">DHCPv4 Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/DHCP_ENABLE.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/DHCP_OPTION82_ENABLE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>