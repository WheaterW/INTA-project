
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ntp unicast-server">
<meta name="DC.subject" content="ntp unicast-server">
<meta name="keywords" content="ntp unicast-server">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_NTP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/MULTICAST-CLIENT-SERVER_1(NTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/UNSYNC-POLL(NTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Creator" content="SUBSYS_ID_NTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000002194449301">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ntp unicast-server</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000002194449301"></a><a name="EN-US_CLIREF_0000002194449301"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">ntp unicast-server</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000002194449301__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ntp unicast-server</span></b> command configures an NTP server on a local device.</p>
<p>The <b><span class="cmdname">undo ntp unicast-server</span></b> command deletes the NTP server configuration.</p>
</p>
<p>By default, no NTP server is set.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000002194449301__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">ntp unicast-server </span></b>{ <i><span class="varname">ipv4-address</span></i> [ <strong><span>version</span></strong> <i><span class="varname">number</span></i> | <strong><span>authentication-keyid</span></strong> <i><span class="varname">key-id</span></i> | <strong><span>port</span></strong> <i><span class="varname">port-number</span></i> | <strong><span>source-interface</span></strong> { <i><span class="varname">ifName</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>preferred</span></strong> | <strong><span>maxpoll</span></strong> <i><span class="varname">max-number</span></i> | <strong><span>minpoll</span></strong> <i><span class="varname">min-number</span></i> | <strong><span>burst</span></strong> | <strong><span>iburst</span></strong> | <strong><span>preempt</span></strong> ] <sup>*</sup> | <strong><span>ipv6</span></strong> <i><span class="varname">ipv6-address</span></i> [ <strong><span>authentication-keyid</span></strong> <i><span class="varname">key-id</span></i> | <strong><span>port</span></strong> <i><span class="varname">port-number</span></i> | <strong><span>source-interface</span></strong> { <i><span class="varname">ifName</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>preferred</span></strong> | <strong><span>maxpoll</span></strong> <i><span class="varname">max-number</span></i> | <strong><span>minpoll</span></strong> <i><span class="varname">min-number</span></i> | <strong><span>burst</span></strong> | <strong><span>iburst</span></strong> | <strong><span>preempt</span></strong> ] <sup>*</sup> | <strong><span>domain</span></strong> <i><span class="varname">domain-name</span></i> [ <strong><span>version</span></strong> <i><span class="varname">number</span></i> | <strong><span>authentication-keyid</span></strong> <i><span class="varname">key-id</span></i> | <strong><span>port</span></strong> <i><span class="varname">port-number</span></i> | <strong><span>source-interface</span></strong> { <i><span class="varname">ifName</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>preferred</span></strong> | <strong><span>maxpoll</span></strong> <i><span class="varname">max-number</span></i> | <strong><span>minpoll</span></strong> <i><span class="varname">min-number</span></i> | <strong><span>burst</span></strong> | <strong><span>iburst</span></strong> | <strong><span>preempt</span></strong> ] <sup>*</sup> }</p>


<p><b><span class="cmdname">undo ntp unicast-server </span></b>{ <i><span class="varname">ipv4-address</span></i> | <strong><span>ipv6</span></strong> <i><span class="varname">ipv6-address</span></i> | <strong><span>domain</span></strong> <i><span class="varname">domain-name</span></i> } [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</p>


</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000002194449301__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ipv4-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv4 address of a remote server.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>version</span></strong> <i><span class="varname">number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an NTP version number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4. The default value is 3.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>authentication-keyid</span></strong> <i><span class="varname">key-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an authentication key number used when messages are transmitted to a remote server.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer and ranges as: 1 to 4294967295 (version 1 to 3), or 1 to 65535 (version 4).</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>port</span></strong> <i><span class="varname">port-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the destination port number to transmit NTP unicast packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is 123 or an integer ranging from 1025 to 65535. The default value is 123.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>source-interface</span></strong> <i><span class="varname">ifName</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specify interface whose address should be used as source.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 47 case-sensitive characters, spaces not supported.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-type</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specify the interface type.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">interface-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specify the interface number.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 47 case-sensitive characters, spaces not supported.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a VPN instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters, spaces not supported. In addition, the VPN instance name must not be _public_. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>preferred</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the remote server as a preferred one. By default, the remote server is not preferred.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>maxpoll</span></strong> <i><span class="varname">max-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum NTP polling interval. The value that takes effect is 2 to the power of max-number, in seconds.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 10 to 17, in seconds. The default value is 10.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>minpoll</span></strong> <i><span class="varname">min-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the minimum NTP polling interval. The value that takes effect is 2 to the power of min-number, in seconds.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 3 to 6, in seconds. The default value is 6.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>burst</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies that a burst of packets will be sent at every poll interval. This is useful to accurately measure a jitter with long poll intervals.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>iburst</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies that a burst of packets will be sent when an unreachable server sends a reply. This is useful to rapidly synchronize the clock.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>preempt</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables the preemption mode for the server. The specified server is marked unavailable for selection if any error (authentication failure) is detected on a connection between the local device and reference clock. The server is marked available for selection if no other connections are available and no error is detected on the connection between the local device and reference clock.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ipv6</span></strong> <i><span class="varname">ipv6-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv6 address of a remote server. The ipv6-address is a host address and cannot be a multicast address, loopback address, or IP address of a reference clock.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a 32-digit hexadecimal number, in the format of X:X:X:X:X:X:X:X.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>domain</span></strong> <i><span class="varname">domain-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a domain name of a remote server.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 255 characters, spaces not supported.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000002194449301__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000002194449301__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000002194449301__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>A specified remote server can be configured as the local time server. The local device works in client mode. The local client can be synchronized to the time of the remote server, and the remote server cannot be synchronized to the time of the local client.<p></p>
</p>
<p><strong>Precautions</strong></p>
<ul><li>If this command is the first NTP configuration command, the system automatically adds the ntp [ ipv6 ] server disable command to the configuration file to disable the NTP server function when you run this command. To enable the NTP server function, run the undo ntp [ ipv6 ] server disable command. If this command is the last NTP configuration command to be deleted, the system automatically deletes the ntp [ ipv6 ] server disable command from the configuration file when you delete this command.</li><li>If a VPN instance is specified for an NTP peer, the VPN instance must have been created using the <b><span class="cmdname">ip vpn-instance</span></b> command, and the IPv4 or IPv6 address family must have been enabled using the ipv4-family (VPN instance view) or ipv6-family (VPN instance view) command based on the IPv4 or IPv6 service configured for the NTP peer. Otherwise, the command cannot be executed successfully.</li><li>If the source interface of the NTP peer is specified, the interface must exist. Otherwise, the command cannot be executed successfully.</li><li>If an NTP IPv6 peer is configured and a source interface is specified, the IPv6 function must be enabled on the interface. Otherwise, the command cannot be executed.</li><li>If both a VPN instance and a source interface are specified, the specified source interface must be bound to the specified VPN instance. Otherwise, the command cannot be executed successfully.</li><li>If the VPN instance or source interface specified in the command is deleted, the corresponding NTP peer is deleted.</li><li>If the IPv4 or IPv6 address family of the VPN instance specified in the command is disabled, the corresponding NTP peer is deleted.</li><li>If a source interface is specified for an NTP IPv6 peer and the IPv6 function is disabled on the source interface, the corresponding NTP peer is deleted.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000002194449301__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the local device to have time synchronized with the server whose IP address is 10.10.1.1 and version number is 3.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ntp unicast-server 10.10.1.1 version 3</strong>
</pre>
</div>

<div class="p"># Configure the local device to have time synchronized with a server whose VPN instance is named abc and IP address is 10.10.1.1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance abc</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-vpn-instance-abc] <strong>route-distinguisher 100:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-abc-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-abc] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ntp unicast-server 10.10.1.1 vpn-instance abc</strong>
</pre>
</div>

<div class="p"># Configure the server 10.10.1.1 to provide time synchronization for the local device, with the NTP version number of V3 and the port number of 5000.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ntp unicast-server 10.10.1.1 version 3 port 5000</strong>
</pre>
</div>

<div class="p"># Configure the server 1.1.1.1 with maxpoll 11, minpoll 4, burst, and preempt options.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ntp unicast-server 1.1.1.1 burst iburst maxpoll 11 minpoll 4 preempt</strong>
</pre>
</div>

<div class="p"># Configure the local device to use the IPv6 server 2001:db8::1 to provide time synchronization.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ntp unicast-server ipv6 2001:db8::1</strong>
</pre>
</div>

<div class="p"># Configure the local device to have time synchronized with the server whose domain name is www.example.com.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ntp unicast-server domain www.example.com</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_NTP_Configuration_Commands_title.html">NTP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/MULTICAST-CLIENT-SERVER_1(NTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/UNSYNC-POLL(NTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>