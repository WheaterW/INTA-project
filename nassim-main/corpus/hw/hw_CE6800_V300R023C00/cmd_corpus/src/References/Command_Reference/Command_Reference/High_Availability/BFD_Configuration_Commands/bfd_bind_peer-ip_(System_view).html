
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="bfd bind peer-ip (System view)">
<meta name="DC.subject" content="bfd bind peer-ip (System view)">
<meta name="keywords" content="bfd bind peer-ip (System view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BFD_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BFDBIND_12(BFDOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BFDBIND_13(BFDOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Creator" content="SUBSYS_ID_BFDOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907607336">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>bfd bind peer-ip (System view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907607336"></a><a name="EN-US_CLIREF_0000001907607336"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">bfd bind peer-ip (System view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907607336__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">bfd bind peer-ip</span></b> command creates a BFD session, specifies the peer IP address, and displays the BFD session view.</p>
<p>The <b><span class="cmdname">bfd bind peer-ip source-ip auto</span></b> command creates a static BFD session with automatically negotiated discriminators.</p>
</p>
<p>By default, no binding between a BFD session and a peer IP address is created.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907607336__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">bfd </span></b><i><span class="varname">session-name</span></i> <strong><span>bind</span></strong> <strong><span>peer-ip</span></strong> <i><span class="varname">peer-ip</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-name</span></i> ] [ <strong><span>interface</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } ] [ [ <strong><span>source-ip</span></strong> <i><span class="varname">source-ip</span></i> ] [ <strong><span>select-board</span></strong> <i><span class="varname">slot-id1</span></i> [ <i><span class="varname">slot-id2</span></i> ] ] | [ <strong><span>select-board</span></strong> <i><span class="varname">slot-id1</span></i> [ <i><span class="varname">slot-id2</span></i> ] ] [ <strong><span>source-ip</span></strong> <i><span class="varname">source-ip</span></i> ] ]</p>



<p><b><span class="cmdname">bfd </span></b><i><span class="varname">session-name</span></i> <strong><span>bind</span></strong> <strong><span>peer-ip</span></strong> <i><span class="varname">peer-ip</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-name</span></i> ] [ <strong><span>interface</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } ] { <strong><span>source-ip</span></strong> <i><span class="varname">source-ip</span></i> [ <strong><span>select-board</span></strong> <i><span class="varname">slot-id1</span></i> [ <i><span class="varname">slot-id2</span></i> ] ] | [ <strong><span>select-board</span></strong> <i><span class="varname">slot-id1</span></i> [ <i><span class="varname">slot-id2</span></i> ] ] <strong><span>source-ip</span></strong> <i><span class="varname">source-ip</span></i> } <strong><span>auto</span></strong></p>



</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907607336__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">session-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies&middot;the&middot;name&middot;of&middot;a&middot;BFD&middot;session.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 64 case-insensitive characters without spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>peer-ip</span></strong> <i><span class="varname">peer-ip</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the peer IP address bound to a BFD session.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a VPN instance bound to a BFD session.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters. It cannot contain spaces. The VPN instance name cannot be _public_. If the character string is quoted by double quotation marks, the character string can contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the local Layer 3 interface to which a BFD session is bound.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>interface</span></strong> <i><span class="varname">interface-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the local Layer 3 interface to which a BFD session is bound.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>source-ip</span></strong> <i><span class="varname">source-ip</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the source IPv4 address carried in BFD packets.</p>
<p>If this parameter is not specified, the system searches the local routing table for the IP address of an outbound interface connected to the remote end and uses the IP address as the source IP address before sending BFD packets. This parameter usually does not need to be specified.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>select-board</span></strong> <i><span class="varname">slot-id1</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><p>Specifies the board that a BFD session state machine forcibly selects.</p>
<p>If both slot-id1 and slot-id2 are specified, only one board is selected. The board specified by slot-id1 is preferentially selected. If this board fails to be selected, the board specified by slot-id2 is then selected. If both the boards fail to be selected, the BFD session state machine no longer selects boards. Forcible board selection is not supported by the BFD session bound to a physical interface.</p>
<ul><li>slot-id1: specifies the slot ID of a board.</li><li>slot-id2: specifies the slot ID of another board.</li></ul>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 19  case-sensitive characters, spaces not supported.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">slot-id2</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><p>Specifies the board that a BFD session state machine forcibly selects.</p>
<p>If both slot-id1 and slot-id2 are specified, only one board is selected. The board specified by slot-id1 is preferentially selected. If this board fails to be selected, the board specified by slot-id2 is then selected. If both the boards fail to be selected, the BFD session state machine no longer selects boards. Forcible board selection is not supported by the BFD session bound to a physical interface.</p>
<ul><li>slot-id1: specifies the slot ID of a board.</li><li>slot-id2: specifies the slot ID of another board.</li></ul>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 19  case-sensitive characters, spaces not supported.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907607336__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907607336__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907607336__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>To rapidly detect link faults on a network, create a BFD session.<p></p>
<span>When creating the binding between a BFD session and</span> a peer IP address:</p>

<ul><li>If only the peer IP address is specified, BFD detects faults in a multi-hop link.</li><li>If both the peer IP address and local interface are specified, BFD detects faults in a single-hop link. That is, BFD monitors a fixed route whose outbound interface is this interface and the next-hop address is the peer IP address.</li><li>If both the peer IP address and the VPN instance are specified, BFD detects faults in the multi-hop link for a specified VPN instance.</li><li>If the peer IP address, the VPN instance, and the local interface are specified, BFD detects faults in the single-hop link for a specified VPN instance.<p></p>
<span>A BFD session is established to rapidly detect faults</span> in links on a network. A device needs to establish a BFD session with a remote device on which a dynamic BFD session is established to detect faults in static routes. In this case, the <b><span class="cmdname">bfd bind peer-ip source-ip auto</span></b> command is used to create a BFD session with automatically negotiated discriminators.<p></p>
<span>When creating a static BFD session with automatically</span> negotiated discriminators:</li><li>If only the peer IP address is specified, BFD detects faults in a multi-hop link.</li><li>If both the peer IP address and local interface are specified, BFD detects faults in a single-hop link. That is, BFD monitors a fixed route whose outbound interface is this interface and the next-hop address is the peer IP address.</li><li>If the source IP address is specified for the interface whose physical status is to be monitored by BFD, BFD packets are correctly forwarded after URPF has been enabled. The source-ip parameter must be configured correctly because the system checks only the validity of the source IP address. A multicast or broadcast address is an invalid source IP address.</li><li>If both the peer IP address and the VPN instance are specified, BFD detects faults in the multi-hop link for a specified VPN instance.</li><li>If the peer IP address, the VPN instance, and the local interface are specified, BFD detects faults in the single-hop link for a specified VPN instance.<p></p>
<span>One-arm BFD echo is used when two devices are directly</span> connected and only one of them supports BFD. A one-arm BFD echo session can be established on the device that supports BFD. After receiving a one-arm BFD echo session packet, the device that does not support BFD immediately loops back the packet, implementing quick link failure detection.<p></p>
<span>When a one-arm BFD echo session is created</span>:</li><li>If the source IP address is specified and URPF is enabled, BFD packets can be correctly forwarded. The source IP address must be configured correctly because the system checks only the validity of the source IP address format. A multicast or broadcast address is invalid.</li><li>If a VPN instance is specified, a single-hop link for VPN routes is monitored.</li><li>If the source IP address is specified, the device searches the routing table for the outbound interface address based on the value of peer-ip, and uses the address as the destination address in BFD packets. The device uses the value of source-ip as the source address.</li><li>If no source address is specified, the device searches the routing table for the outbound interface address based on the value of peer-ip, and uses the address as the source and destination addresses in BFD packets.</li></ul>
</div>
<p><strong>Prerequisites</strong></p>
<p>BFD has been globally enabled using the <b><span class="cmdname">bfd</span></b> command in the system view.</p>
<p><strong>Configuration Impact</strong></p>
<p><p>You can run the <b><span class="cmdname">bfd bind peer-ip</span></b> command to create the binding between a static BFD session and a peer IP address.</p>
</p>
<p><strong>Follow-up Procedure</strong></p>
<p>Run the <strong>discriminator</strong> command to create local and remote discriminators for the BFD session.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907607336__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Create a BFD session named session so that BFD can detect faults in the multi-hop link to the IP address 10.10.20.2.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bfd</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bfd] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bfd session bind peer-ip 10.10.20.2</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bfd-session-session]
</pre>
</div>

<div class="p"># Create a static BFD session with automatically negotiated discriminators.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bfd</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bfd] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ip address 10.1.1.1 24</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bfd atob bind peer-ip 10.1.1.2 interface <span>100GE</span> <span>1/0/1</span> source-ip 10.1.1.1 auto</strong>
</pre>
</div>

<div class="p"># Create a BFD session named atob so that BFD can detect faults in the single-hop link from the local interface to the peer interface whose IP address is 10.2.2.1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bfd</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bfd] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ip address 10.2.2.2 24</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bfd atob bind peer-ip 10.2.2.1 interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bfd-session-atob]
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BFD_Configuration_Commands_title.html">BFD Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/BFDBIND_12(BFDOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/BFDBIND_13(BFDOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>