
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer load-balancing (BGP-VPN instance IPv6 address family view) (IPv6)">
<meta name="DC.subject" content="peer load-balancing (BGP-VPN instance IPv6 address family view) (IPv6)">
<meta name="keywords" content="peer load-balancing (BGP-VPN instance IPv6 address family view) (IPv6)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/VRF6-GROUP-IPV6-LOAD-BALANCING(BGPVPNBASE).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PEER-LOCAL-AS-DC(BGPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPVPNBASE">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907764504">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer load-balancing (BGP-VPN instance IPv6 address family view) (IPv6)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907764504"></a><a name="EN-US_CLIREF_0000001907764504"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer load-balancing (BGP-VPN instance IPv6 address family view) (IPv6)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907764504__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p>By default, BGP load balancing is not enabled.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907764504__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">ipv6-address</span></i> <strong><span>load-balancing</span></strong> [ <strong><span>as-path-ignore</span></strong> | <strong><span>as-path-relax</span></strong> ]</p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">ipv6-address</span></i> <strong><span>load-balancing</span></strong> [ <strong><span>as-path-ignore</span></strong> | <strong><span>as-path-relax</span></strong> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907764504__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ipv6-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the IPv6 address of a peer.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a 32-bit hexadecimal string in format X:X:X:X:X:X:X:X.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>as-path-ignore</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Prevents the device from comparing the AS_Path attributes of routes when selecting routes for load balancing.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>as-path-relax</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Prevents the device from comparing the AS_Path attributes of the same length when selecting routes for load balancing.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907764504__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-VPN instance IPv6 address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907764504__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907764504__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>On a large-scale network, there may be multiple valid routes to the same destination, but BGP advertises only the optimal route to its peers. This may cause unbalanced traffic load. This section describes how to configure BGP load balancing to implement load balancing among multiple BGP routes.<p></p>
<span>After the</span> <strong>peer load-balancing</strong> command is run, the following conditions must be met to implement load balancing:</p>

<ul><li>From the specified peer.</li><li>The route is the optimal route or is equal-cost with the optimal route.</li><li>If the AS_Path attribute of the route is the same as that of the optimal route or the <em>as-path-ignore</em>or <em>as-path-relax</em>parameter is configured for the peer when load balancing is enabled on the peer:<p></p>
<em>as-path-ignore</em>: ignores the AS_Path attribute and does not compare the AS_Path attributes of the routes to be used for load balancing. That is, load balancing can be implemented even if the AS_Path attributes of the routes are different.<p></p>
<em>as-path-relax</em>: The device ignores the AS_Path attributes of the same length and does not compare the AS_Path attributes of the same length when load balancing is performed among the routes. That is, load balancing cannot be performed among the routes with different AS_Path lengths. For example, the AS_Path attribute of route A is 10, and the AS_Path attribute of route B is 10 20. Because the AS_Path lengths of the two routes are different, load balancing cannot be implemented.</li></ul>
<p><strong>Precautions</strong></p>
<p>The maximum load-balancing and <b><span class="cmdname">peer load-balancing</span></b> commands are mutually exclusive.<p></p>
<span>By default</span>, a BGP device does not change the next hop addresses of routes to a local address before sending the routes to its IBGP peer. However, after peer-based load balancing is enabled, a BGP device changes the next hop addresses of routes to a local address before sending the routes to its IBGP peer.<p></p>
<span>If the</span> <strong>load-balancing as-path-ignore</strong> or <strong>load-balancing as-path-relax</strong> command is run but the <strong>peer load-balancing</strong> command does not contain the <em>as-path-ignore</em>or <em>as-path-relax</em>parameter, the <strong>load-balancing as-path-ignore</strong> or <strong>load-balancing as-path-relax</strong> configuration takes effect. If <em>as-path-ignore</em>or <em>as-path-relax</em>is specified in the <strong>peer load-balancing</strong> command, the configuration specified in the <strong>peer load-balancing</strong> command takes effect.<p></p>
<span>Running the load-balancing as-path-ignore or load-balancing</span> as-path-relax command may cause BGP routing loops.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907764504__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable peer-based load balancing among BGP routes without comparing the AS_Path attributes of the same length.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>ipv6-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna-af-ipv6] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vpn-instance-vpna] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv6-family vpn-instance vpna</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-6-vpna] <strong>peer 2001:DB8:1::1 as-number 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-6-vpna] <strong>peer 2001:DB8:2::2 as-number 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-6-vpna] <strong>peer 2001:DB8:1::1 load-balancing as-path-relax</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-6-vpna] <strong>peer 2001:DB8:2::2 load-balancing as-path-relax</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/VRF6-GROUP-IPV6-LOAD-BALANCING(BGPVPNBASE).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PEER-LOCAL-AS-DC(BGPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>