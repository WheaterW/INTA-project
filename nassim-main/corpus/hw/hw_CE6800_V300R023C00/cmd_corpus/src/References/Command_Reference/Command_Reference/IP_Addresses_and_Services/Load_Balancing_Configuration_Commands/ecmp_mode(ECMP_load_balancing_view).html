
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ecmp mode(ECMP load balancing view)">
<meta name="DC.subject" content="ecmp mode(ECMP load balancing view)">
<meta name="keywords" content="ecmp mode(ECMP load balancing view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-Load_Balancing_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DISPLAY_LOAD-BALANCE_FORWARDING-PATH_UNICAST_INTERFACE_ECMP.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/ECMP_SEED.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Load Balancing">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Load Balancing">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="Load Balancing">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Creator" content="SUBSYS_ID_FWM_FIB">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942841481">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ecmp mode(ECMP load balancing view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942841481"></a><a name="EN-US_CLIREF_0000001942841481"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">ecmp mode(ECMP load balancing view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942841481__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ecmp mode</span></b> command configures the dynamic load balancing mode for an ECMP.</p>
<p>The <b><span class="cmdname">undo ecmp mode</span></b> command restores the default dynamic load balancing mode for an ECMP.</p>
</p>
<p>By default, the dynamic load balancing mode of an ECMP is eligible, and the interval in a flowlet is 2000.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P and CE8850-HAM.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942841481__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">ecmp mode </span></b>{ <strong><span>spray</span></strong> | <strong><span>fixed</span></strong> | <strong><span>eligible</span></strong> [ <strong><span>flowlet-gap-time</span></strong> <i><span class="varname">gap-time</span></i> ] }</p>

<p><b><span class="cmdname">undo ecmp mode </span></b>{ <strong><span>spray</span></strong> | <strong><span>fixed</span></strong> | <strong><span>eligible</span></strong> [ <strong><span>flowlet-gap-time</span></strong> <i><span class="varname">gap-time</span></i> ] }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942841481__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>spray</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables the spray dynamic load balancing mode for an ECMP.</p>
<p>In spray dynamic load balancing mode, a device selects a member link with the lightest load to forward data packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>fixed</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the dynamic load balancing mode of an ECMP to fixed.</p>
<p>In this mode, the to-be-forwarded data packet is forwarded along the forwarding path of the previous data packet in the flow to which the to-be-forwarded data packet belongs at an interval of 2 seconds. If the data packet to be forwarded is the first data packet in the flow to which the data packet belongs, the device selects a member link to forward the data packet based on the hash result in static load balancing mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>eligible</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables the eligible dynamic load balancing mode for an ECMP.</p>
<p>In eligible dynamic load balancing mode, based on the flowlet, a device selects a member link with the lightest load to forward data packets. Data packets in the same flowlet are forwarded through the same link.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>flowlet-gap-time</span></strong> <i><span class="varname">gap-time</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the interval at which data packets in a flowlet are transmitted.  The device splits data flows into flowlets based on the flowlet interval.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 16 to 32000. The unit is 1024 nanoseconds.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942841481__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>ECMP load balancing view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942841481__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942841481__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>You can change the dynamic load balancing mode for an ECMP based on the network traffic to provide maximum load balancing between member links. The eligible dynamic load balancing mode is recommended.</p>
<p><strong>Precautions</strong></p>
<ul><li>If you run this command multiple times, only the latest configuration takes effect.</li><li>Load balancing is valid only for outgoing traffic. Therefore, the load balancing modes of the devices at both ends of a link can be different and do not affect each other.</li><li>After the dynamic load balancing mode is set to Spray, if the interval between two adjacent data packets of the same flow is less than the maximum transmission delay of each member link, and the device selects different forwarding links for the two data packets, in this case, packet disorder may occur at the receive end. Therefore, dynamic load balancing in spray mode applies only to scenarios where the packet time sequence is not concerned.</li><li>If the value of flowlet-gap-time is less than the maximum transmission delay of each member link in load balancing mode, packet disorder may occur on the receive end. Therefore, the value of flowlet-gap-time must be greater than or equal to the maximum transmission delay of each member link in load balancing mode.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942841481__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable the fixed dynamic load balancing mode for an ECMP in the dynamic load balancing profile test.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>load-balance ecmp</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ecmp] <strong>ecmp mode fixed</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-Load_Balancing_Configuration_Commands_title.html">Load Balancing Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/DISPLAY_LOAD-BALANCE_FORWARDING-PATH_UNICAST_INTERFACE_ECMP.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/ECMP_SEED.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>