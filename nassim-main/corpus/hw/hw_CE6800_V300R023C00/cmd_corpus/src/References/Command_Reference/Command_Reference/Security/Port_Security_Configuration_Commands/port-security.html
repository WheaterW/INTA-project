
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="port-security">
<meta name="DC.subject" content="port-security">
<meta name="keywords" content="port-security">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Port_Security_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SHOWPORTSEC(MACOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/UNDOMACADRSECURITY(MACOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Port Security">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Port Security">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Port Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="Security">
<meta name="DC.Creator" content="SUBSYS_ID_MACOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942847733">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>port-security</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942847733"></a><a name="EN-US_CLIREF_0000001942847733"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">port-security</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942847733__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">port-security enable</span></b> command enables the port security function and configures the maximum number of MAC addresses that can be learned.</p>
<p>The <b><span class="cmdname">undo port-security enable</span></b> command disables the port security function or restores the default maximum number of MAC addresses that can be learned.</p>
<p>The <b><span class="cmdname">port-security aging-time</span></b> command sets the aging time of secure dynamic MAC addresses.</p>
<p>The <b><span class="cmdname">undo port-security aging-time</span></b> command restores the default aging time of secure dynamic MAC addresses.</p>
<p>The <b><span class="cmdname">port-security protect-action</span></b> command configures the protection action to be taken when the number of MAC addresses learned by an interface enabled with the port security function reaches the limit.</p>
<p>The <b><span class="cmdname">undo port-security protect-action</span></b> command restores the default protection action to be taken when the number of MAC addresses learned by an interface enabled with the port security function reaches the limit.</p>
<p>The <b><span class="cmdname">port-security mac-address sticky</span></b> command enables the sticky MAC function on an interface and adds sticky MAC address entries.</p>
<p>The <b><span class="cmdname">undo port-security mac-address sticky</span></b> command disables the sticky MAC function on an interface and deletes sticky MAC address entries.</p>
</p>
<p><p>
By default, the port security function is disabled on an interface.
</p>
<p>
By default, the sticky MAC function is disabled.
</p>
<p>
By default, the aging function of secure dynamic MAC addresses is disabled on an interface.
</p>
<p>
By default, the maximum number of MAC addresses that can be learned on an interface enabled with the port security function is 1.
</p>
<p>
By default, the restrict action is taken when the number of MAC addresses learned by an interface enabled with the port security function reaches the limit.
</p>
</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6820H, CE6820H-K and CE6820S.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942847733__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">port-security enable </span></b>[ <strong><span>maximum</span></strong> <i><span class="varname">max-number</span></i> ]</p>

<p><b><span class="cmdname">port-security mac-address sticky </span></b><i><span class="varname">mac-address</span></i> <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i></p>

<p><b><span class="cmdname">port-security protect-action </span></b>{ <strong><span>protect</span></strong> | <strong><span>restrict</span></strong> | <strong><span>error-down</span></strong> }</p>

<p><b><span class="cmdname">port-security mac-address sticky</span></b></p>

<p><b><span class="cmdname">port-security aging-time </span></b><i><span class="varname">time</span></i> [ <strong><span>type</span></strong> { <strong><span>absolute</span></strong> | <strong><span>inactivity</span></strong> | <strong><span>force</span></strong> } ]</p>


<p><b><span class="cmdname">undo port-security enable </span></b>[ <strong><span>maximum</span></strong> <i><span class="varname">max-number</span></i> ]</p>

<p><b><span class="cmdname">undo port-security mac-address sticky </span></b><i><span class="varname">mac-address</span></i> <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i></p>

<p><b><span class="cmdname">undo port-security protect-action</span></b></p>

<p><b><span class="cmdname">undo port-security mac-address sticky</span></b></p>

<p><b><span class="cmdname">undo port-security aging-time</span></b></p>


</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942847733__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>maximum</span></strong> <i><span class="varname">max-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum number of MAC addresses that can be learned.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer ranging from 1 to 4096.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>mac-address</span></strong> <i><span class="varname">mac-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a secure static MAC address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in the H-H-H format, of which H indicates a hexadecimal number of four characters, such as 00e0 and fc01. If less than four characters are entered, the remaining characters are 0s. For example, e0 is displayed as 00e0.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>sticky</span></strong> <i><span class="varname">mac-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a sticky MAC address.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in the H-H-H format, of which H indicates a hexadecimal number of four characters, such as 00e0 and fc01. If less than four characters are entered, the remaining characters are 0s. For example, e0 is displayed as 00e0.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a VLAN ID.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 4094.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>protect</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the packets with the source MAC address not contained in the MAC address table are discarded when the number of learned MAC addresses reaches the limit.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>restrict</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the packets with the source MAC address not contained in the MAC address table are discarded and an alarm is generated when the number of learned MAC addresses reaches the limit.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>error-down</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that after an error Down event is generated on an interface, the interface is automatically shut down and cannot automatically restore and an alarm is generated.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>aging-time</span></strong> <i><span class="varname">time</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the aging time of secure dynamic MAC address entries.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 1 to 1440, in minutes.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>type</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the aging type of secure dynamic MAC address entries.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>absolute</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies that the secure dynamic MAC address entries age out based on an absolute time.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>inactivity</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies that the secure dynamic MAC address entries age out based on a relative time.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>force</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that secure dynamic MAC address entries are forcibly aged out based on an absolute time.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942847733__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Layer 2 100GE interface view,</span><span>Layer 2 10GE interface view,</span><span>Layer 2 200GE interface view,</span><span>25GE-L2 view,</span><span>400GE-L2 view,</span><span>Layer 2 50GE interface view,</span><span>Layer 2 Eth-Trunk interface view,</span><span>Layer 2 GE interface view,</span><span>Interface group view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942847733__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942847733__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Port security is a security function that converts dynamic MAC addresses learned by an interface into secure MAC addresses.<p></p>
<span>After port security is enabled on an interface</span>, the switch converts dynamic MAC addresses learned by the interface into secure MAC addresses. In this case, the dynamic MAC address entries learned by the interface are deleted. When the number of MAC addresses learned by the interface reaches the upper limit, the interface no longer learns new MAC addresses. If the source MAC address of a packet received by an interface does not exist in the MAC address entries, the interface considers the packet as an attack packet and discards the packet, reports an alarm, or shuts down the interface.</p>
<p><strong>Prerequisites</strong></p>
<p><p>You can configure the aging time of secure dynamic MAC addresses only after port security is enabled.<p></p>
<span>When enabling port security</span>, you can set the maximum number of MAC addresses that can be learned.<p></p>
<span>You can configure the protection action after the</span> number of MAC addresses learned by an interface enabled with port security reaches the limit only after port security is enabled.<p></p>
<span>Sticky MAC can be enabled only after port security</span> is enabled. A sticky MAC address entry can be manually added only after the sticky MAC function is enabled.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942847733__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">


<div class="p"># Enable the sticky MAC function on <span>100GE</span><span>1/0/1</span>.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port-security enable</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port-security mac-address sticky</strong>
</pre>
</div>

<div class="p"># Set the maximum number of MAC addresses that can be learned by <span>100GE</span><span>1/0/1</span> to 5.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port-security enable maximum 5</strong>
</pre>
</div>

<div class="p"># Set the aging time of secure dynamic MAC address entries to 6 minutes on <span>100GE</span><span>1/0/1</span> and configure the MAC address entries to be aged out based on the absolute aging time.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port-security aging-time 6 type absolute</strong>
</pre>
</div>

<div class="p"># Set the protection action on <span>100GE</span><span>1/0/1</span> to protect.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port-security enable</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port-security protect-action protect</strong>
</pre>
</div>

<div class="p"># Enable port security on <span>100GE</span><span>1/0/1</span>.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port-security enable</strong>
</pre>
</div>

<div class="p"># Manually add a sticky MAC address entry with the MAC address 1-1-3 and the VLAN ID 10 on <span>100GE</span><span>1/0/1</span>.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port-security enable</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port-security mac-address sticky</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>port-security mac-address sticky 1-1-3 vlan 10</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Port_Security_Configuration_Commands_title.html">Port Security Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/SHOWPORTSEC(MACOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/UNDOMACADRSECURITY(MACOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>