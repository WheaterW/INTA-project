
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="snmp-agent usm-user">
<meta name="DC.subject" content="snmp-agent usm-user">
<meta name="keywords" content="snmp-agent usm-user">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_SNMP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SNMPPORTNUM(SNMPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/USMUSERCOMPLEXCHK(SNMPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Creator" content="SUBSYS_ID_SNMPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000002194449389">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>snmp-agent usm-user</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000002194449389"></a><a name="EN-US_CLIREF_0000002194449389"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">snmp-agent usm-user</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000002194449389__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">snmp-agent usm-user</span></b> command adds a user to an SNMP user list.</p>
<p>The <b><span class="cmdname">undo snmp-agent usm-user</span></b> command deletes a user from an SNMP user list.</p>
</p>
<p>By default, an SNMP user list does not have any user.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000002194449389__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">snmp-agent </span></b>[ <strong><span>remote-engineid</span></strong> <i><span class="varname">engine-Id</span></i> ] <strong><span>usm-user</span></strong> <strong><span>v3</span></strong> <i><span class="varname">user-name</span></i> <i><span class="varname">group-name</span></i> [ <strong><span>authentication-mode</span></strong> <i><span class="varname">authen-protocol</span></i> <i><span class="varname">authKey</span></i> [ <strong><span>privacy-mode</span></strong> <i><span class="varname">privacy-protocol</span></i> <i><span class="varname">privKey</span></i> ] ] [ <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">aclName</span></i> } ]</p>



<p><b><span class="cmdname">snmp-agent </span></b>[ <strong><span>remote-engineid</span></strong> <i><span class="varname">engine-Id</span></i> ] <strong><span>usm-user</span></strong> <strong><span>v3</span></strong> <i><span class="varname">user-name</span></i> <strong><span>authentication-mode</span></strong> <i><span class="varname">authen-protocol</span></i></p>


<p><b><span class="cmdname">snmp-agent </span></b>[ <strong><span>remote-engineid</span></strong> <i><span class="varname">engine-Id</span></i> ] <strong><span>usm-user</span></strong> <strong><span>v3</span></strong> <i><span class="varname">user-name</span></i> <strong><span>privacy-mode</span></strong> <i><span class="varname">privacy-protocol</span></i></p>


<p><b><span class="cmdname">snmp-agent </span></b>[ <strong><span>remote-engineid</span></strong> <i><span class="varname">engine-Id</span></i> ] <strong><span>usm-user</span></strong> <strong><span>v3</span></strong> <i><span class="varname">user-name</span></i> [ <strong><span>group</span></strong> <i><span class="varname">group-name</span></i> | <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">aclName</span></i> } ] <sup>*</sup></p>



<p><b><span class="cmdname">snmp-agent </span></b>[ <strong><span>remote-engineid</span></strong> <i><span class="varname">engine-Id</span></i> ] <strong><span>usm-user</span></strong> <strong><span>v3</span></strong> <i><span class="varname">user-name</span></i> <strong><span>authentication-mode</span></strong> <i><span class="varname">authen-protocol</span></i> [ <strong><span>localized-configuration</span></strong> ] <strong><span>cipher</span></strong> <i><span class="varname">authKey</span></i></p>


<p><b><span class="cmdname">snmp-agent </span></b>[ <strong><span>remote-engineid</span></strong> <i><span class="varname">engine-Id</span></i> ] <strong><span>usm-user</span></strong> <strong><span>v3</span></strong> <i><span class="varname">user-name</span></i> <strong><span>privacy-mode</span></strong> <i><span class="varname">privacy-protocol</span></i> [ <strong><span>localized-configuration</span></strong> ] <strong><span>cipher</span></strong> <i><span class="varname">privKey</span></i></p>


<p><b><span class="cmdname">undo snmp-agent </span></b>[ <strong><span>remote-engineid</span></strong> <i><span class="varname">engine-Id</span></i> ] <strong><span>usm-user</span></strong> <strong><span>v3</span></strong> <i><span class="varname">user-name</span></i> [ <strong><span>group</span></strong> | <strong><span>acl</span></strong> | <strong><span>authentication-mode</span></strong> | <strong><span>privacy-mode</span></strong> ]</p>



</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000002194449389__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>remote-engineid</span></strong> <i><span class="varname">engine-Id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the ID of an engine associated with a user.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 10 to 64 case-insensitive characters, spaces not supported. The value cannot be all 0s or all Fs.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>v3</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables the SNMPv3 security mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">user-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a username.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of 1 to 32 case-sensitive characters, spaces not supported.</p>
<p>The character string can contain spaces if it is enclosed with double quotation marks (").</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>authentication-mode</span></strong> <i><span class="varname">authen-protocol</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the security level to authentication.</p>
<p>Authentication allows an agent (or management station) to verify that received information is sent by an authorized management station (or agent) and is not modified during transmission. Related standards define keyed hash-based message authentication code (HMAC), which is an effective tool that uses a security hash function and a key to generate a message authentication code, and is widely applied in the Internet. SNMP uses six types of HMACs: HMAC-MD5-96, HMAC-SHA-96, HMAC-SHA2-224, HMAC-SHA2-256, HMAC-SHA2-384, and HMAC-SHA2-512.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><ul><li>md5: HMAC-MD5-96 (Hashed Message Authentication Code for Message Digest 5-96) is used as the authentication protocol.</li><li>sha: HMAC-SHA-96 is used as the authentication protocol.</li><li>sha2-224: HMAC-SHA2-224 is used as the authentication protocol.</li><li>sha2-256: HMAC-SHA2-256 is used as the authentication protocol.</li><li>sha2-384: HMAC-SHA2-384 is used as the authentication protocol.</li><li>sha2-512: HMAC-SHA2-512 is used as the authentication protocol.<p>SHA2-256 and more complex algorithms are more secure than SHA2-224, SHA, and MD5, and are therefore recommended.</p>
</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">authKey</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an authentication password. The password can be in plaintext or ciphertext.</p>
<p>In ciphertext mode, you need to enter cipher and then a character string that has been processed by the encryption algorithm.</p>
<p>If the password is in plaintext, you do not need to enter cipher. After the authentication protocol is selected, the password is delivered in interactive mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The password is a string of 8 to 255 characters in plaintext or a string of 32 to 432 characters in ciphertext.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>privacy-mode</span></strong> <i><span class="varname">privacy-protocol</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Enables encryption.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><ul><li>3des168: Sets the encryption algorithm to Advanced Encryption Standard (3DES168 (Triple Data Encryption Standard 168)).</li><li>aes128: Sets the encryption algorithm to Advanced Encryption Standard (AES128 (Advanced Encryption Standard 128)).</li><li>aes192: Sets the encryption algorithm to Advanced Encryption Standard (AES192 (Advanced Encryption Standard 192)).</li><li>aes256: Sets the encryption algorithm to Advanced Encryption Standard (AES256 (Advanced Encryption Standard 256)).</li><li>des56: specifies DES56 (Data Encryption Standard 56) as the encryption algorithm.<p>AES128 and higher-level encryption algorithms are more secure than DES56 and 3DES168. and are therefore recommended.</p>
</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">privKey</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the encryption password. The password can be in plaintext or ciphertext.</p>
<p>In ciphertext mode, you need to enter cipher and then a character string that has been processed by the encryption algorithm.</p>
<p>If the password is in plaintext, you do not need to enter cipher. After the authentication protocol is selected, the password is delivered in interactive mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The password is a string of 8 to 255 characters in plaintext or a string of 32 to 432 characters in ciphertext.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl</span></strong> <i><span class="varname">acl-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the ACL of the access view.</p>
<p>Currently, SNMP supports only basic ACL4 and ACL6.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 2000 to 2999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl</span></strong> <i><span class="varname">aclName</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a basic named ACL.</p>
<p>If no matching rule is configured for the referenced ACL, the matching rule is permit by default.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of 1 to 32 case-sensitive characters without spaces.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>group</span></strong> <i><span class="varname">group-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Name of the SNMP user list to which a user belongs.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is a string of 1 to 32 case-sensitive characters, spaces not supported.</p>
<p>The character string can contain spaces if it is enclosed with double quotation marks (").</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>localized-configuration</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the localized password configuration mode. The ciphertext password in the configuration file relates to the engine ID of the device.</p>
<p>After the SNMPv3 authentication and encryption passwords are configured through MIB, the ciphertext password in the configuration file is a localized password.</p>
<p>You are advised not to set this parameter when configuring the SNMPv3 authentication and encryption passwords in CLI mode. If you want to set this parameter, the cipher password value must be a localized password. If you copy a ciphertext password with localized-configuration from the configuration file of another device, the password cannot be used.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>cipher</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies that the password is entered in encrypted text.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000002194449389__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>System view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000002194449389__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>3: Management level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000002194449389__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Different from SNMPv1 or SNMPv2c, SNMPv3 implements access control, identity authentication, and data encryption using the local processing module and user-based security module. SNMPv3 helps achieve higher security and confidentiality and is applicable to a wider range than SNMPv1 and SNMPv2c.<p></p>
<span>The</span> <b><span class="cmdname">snmp-agent usm-user</span></b> command configures a user in an SNMP user group, configures an authentication password and privacy password, and grants this user view-specific access.</p>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>In this command, parameters md5, sha, sha2-224, DES56, and 3DES168 can be used only after the weak security algorithm/protocol feature package (WEAKEA) has been installed using the <b><span class="cmdname">install feature-software WEAKEA</span></b> command.</li><li>After the weak password dictionary maintenance function is enabled, the passwords defined in the weak password dictionary cannot be used. To check the passwords defined in the weak password dictionary, run the <b><span class="cmdname">display security weak-password-dictionary</span></b> command.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000002194449389__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># In confirmation mode, set the authentication mode to sha2-512 and the authentication password to hello123 for the SNMP user named John.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>snmp-agent usm-user v3 John authentication-mode sha2-512</strong>
Please configure the authentication password (8-255)
Enter Password:
Confirm Password:
</pre>
</div>

<div class="p"># Add user John to SNMP user list Johngroup and associate the user with ACL 2001.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl 2001</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-basic-2001] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>snmp-agent usm-user v3 John group Johngroup acl 2001</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_SNMP_Configuration_Commands_title.html">SNMP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/SNMPPORTNUM(SNMPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/USMUSERCOMPLEXCHK(SNMPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>