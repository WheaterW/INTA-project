
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="queue">
<meta name="DC.subject" content="queue">
<meta name="keywords" content="queue">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-DCB_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/QOS_BUFFER_HEADROOM-POOL.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/QUEUE_SHAPING.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DCB">
<meta name="featuretype" content="DCN and Network Management">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="DCB">
<meta name="featuretype" content="DCN and Network Management">
<meta name="featurename" content="DCB">
<meta name="featuretype" content="DCN and Network Management">
<meta name="featuretype" content="DCN and Network Management">
<meta name="featuretype" content="DCN and Network Management">
<meta name="DC.Creator" content="SUBSYS_ID_DCB">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907607916">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>queue</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907607916"></a><a name="EN-US_CLIREF_0000001907607916"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">queue</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907607916__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">queue</span></b> command configures a scheduling mode for an interface queue.</p>
<p>The <b><span class="cmdname">undo queue</span></b> command restores the default scheduling mode for an interface queue.</p>
</p>
<p>By default, an interface queue uses priority queuing PQ.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907607916__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">queue </span></b>{ <i><span class="varname">start-queue-index</span></i> [ <strong><span>to</span></strong> <i><span class="varname">end-queue-index</span></i> ] } &amp;&lt;1-8&gt; { <strong><span>pq</span></strong> | <strong><span>lpq</span></strong> | <strong><span>drr</span></strong> [ <strong><span>weight</span></strong> <i><span class="varname">weight-value</span></i> ] }</p>

<p><b><span class="cmdname">undo queue </span></b><i><span class="varname">start-queue-index</span></i> { <strong><span>lpq</span></strong> | <strong><span>drr</span></strong> <strong><span>weight</span></strong> <i><span class="varname">weight-value</span></i> }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907607916__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">start-queue-index</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies queue-start value.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 7 .</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>to</span></strong> <i><span class="varname">end-queue-index</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies queue-end value.</p>
<p>end-queue-index must be larger than or equal to start-queue-index. start-queue-index and end-queue-index determine a range of queues. If end-queue-index is not specified, a scheduling mode is configured for the queue specified by start-queue-index.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 7 .</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>pq</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the scheduling mode to PQ.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>lpq</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the scheduling mode to LPQ.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>drr</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the scheduling mode to DRR.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>weight</span></strong> <i><span class="varname">weight-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the DRR weight.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 1 to 100 .</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907607916__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>ETS view of the DCB</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907607916__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907607916__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>ETS supports two-level scheduling: scheduling based on priority groups and queues. ETS provides fine-grained QoS services.<p></p>
<span>ETS uses the following scheduling modes for queues</span> in priority groups:</p>

<ul><li>PQ scheduling<p></p>
<span>Priority queuing</span> (PQ) schedules packets in descending order of priority. Queues with lower priories are processed only after all the queues with higher priorities have been processed. By using PQ scheduling, the device puts packets of delay-sensitive key services into queues with higher priorities and packets of other services into queues with lower priorities so that packets of key services can be transmitted first. In PQ scheduling, if a lot of packets exist in queues with higher priorities when congestion occurs, packets in queues with lower priorities cannot be transmitted for a long time.</li><li>DRR scheduling<p></p>
<span>Deficit Round Robin</span> (DRR) ensures that packets in all the queues are scheduled in turn.<p></p>
<span>When eight output queues are configured on an interface</span>, each queue is configured with a weight, namely, w7, w6, w5, w4, w3, w2, w1, and w0. The weight values represent the percentage of resources that the queues can obtain. In addition, DRR schedules packets based on the packet length. If the packet length is too long, DRR allows the negative weight value so that long packets can be scheduled. In the next round, the queue with the negative weight value is not scheduled until its weight value becomes positive. DRR offsets the disadvantages of PQ scheduling and DRR scheduling. (PQ scheduling can cause starvation of packets in queues with lower priorities, and DRR scheduling cannot allocate bandwidth evenly when the packet length in each queue is different or variable.) However, DRR has its own disadvantage. It cannot schedule delay-sensitive services such as voice services in a timely manner.</li><li>LPQ scheduling<p></p>
<span>LPQ scheduling applies to LPQ queues</span>. The difference is that when congestion occurs, the PQ queue can preempt the bandwidth of the DRR queue whereas the LPQ queue cannot. After packets in the PQ and DRR queues are all scheduled, the remaining bandwidth can be assigned to packets in the LPQ queue.<p></p>
<span>In the actual application</span>, best effort (BE) flows can be put into the LPQ queue. When the network is overloaded, BE flows can be limited so that other services can be processed preferentially.</li><li>PQ+DRR scheduling<p></p>
<span>PQ and DRR have their own advantages and disadvantages</span>. If only PQ scheduling is used, packets in queues with lower priorities cannot obtain bandwidth. If only DRR scheduling is used, delay-sensitive services, such as voice services, cannot be scheduled in a timely manner. PQ+DRR scheduling integrates the advantages of PQ scheduling and DRR scheduling and offsets their disadvantages. PQ+DRR scheduling puts protocol packets and packets of delay-sensitive services into the PQ queue, and allocates bandwidth to the PQ queue. Then, other packets are put into DRR queues based on their priorities. The DRR queues can be scheduled in a polling manner.</li></ul>
<p><strong>Precautions</strong></p>
<p><p>For the CE8855, CE8851-32CQ4BQ, CE6855-48XS8CQ, CE6885, CE6885-SAN, CE6885-LL (standard forwarding mode), CE6885-T, and CE6863E-48S8CQ:<p></p>
<span>The default scheduling mode of the CIR token bucket</span> based on interface queues is DRR scheduling and the default rate limit is 0. The interface queueâbased scheduling mode configured for the CIR token bucket does not take effect. The configured scheduling mode takes effect only for the EIR (EIR = PIR â CIR) token bucket.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907607916__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure PQ for queue 5. Configure DRR for queues 6 and 7, and set the DRR weights to 30.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>dcb ets-profile myets</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ets-myets] <strong>queue 5 pq</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ets-myets] <strong>queue 6 7 drr weight 30</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-DCB_Configuration_Commands_title.html">DCB Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/QOS_BUFFER_HEADROOM-POOL.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/QUEUE_SHAPING.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>