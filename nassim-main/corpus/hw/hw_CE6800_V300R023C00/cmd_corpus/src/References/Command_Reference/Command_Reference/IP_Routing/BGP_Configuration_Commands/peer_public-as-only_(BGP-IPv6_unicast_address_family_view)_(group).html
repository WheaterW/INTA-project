
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="peer public-as-only (BGP-IPv6 unicast address family view) (group)">
<meta name="DC.subject" content="peer public-as-only (BGP-IPv6 unicast address family view) (group)">
<meta name="keywords" content="peer public-as-only (BGP-IPv6 unicast address family view) (group)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IPV4-PEER-PUBLIC-AS-ONLY(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/PEER-IPV6-PUBLIC-AS-ONLY(BGPIPV6).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPIPV6">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907604768">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>peer public-as-only (BGP-IPv6 unicast address family view) (group)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907604768"></a><a name="EN-US_CLIREF_0000001907604768"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">peer public-as-only (BGP-IPv6 unicast address family view) (group)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907604768__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">peer public-as-only</span></b> command configures the AS-Path attribute in a BGP Update message not to carry the private AS number. Only the public AS number is contained in the update messages.</p>
<p>The <b><span class="cmdname">undo peer public-as-only</span></b> command allows the AS-Path attribute in a BGP Update message to carry the private AS number.</p>
</p>
<p>By default, the AS-Path attribute in a BGP Update message is allowed to carry private AS numbers.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907604768__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">peer </span></b><i><span class="varname">group-name</span></i> <strong><span>public-as-only</span></strong></p>

<p><b><span class="cmdname">peer </span></b><i><span class="varname">group-name</span></i> <strong><span>public-as-only</span></strong> <strong><span>force</span></strong> [ <strong><span>replace</span></strong> ] [ <strong><span>include-peer-as</span></strong> ]</p>

<p><b><span class="cmdname">peer </span></b><i><span class="varname">group-name</span></i> <strong><span>public-as-only</span></strong> <strong><span>limited</span></strong> [ <strong><span>replace</span></strong> ] [ <strong><span>include-peer-as</span></strong> ]</p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">group-name</span></i> <strong><span>public-as-only</span></strong></p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">group-name</span></i> <strong><span>public-as-only</span></strong> <strong><span>force</span></strong> [ <strong><span>replace</span></strong> ] [ <strong><span>include-peer-as</span></strong> ]</p>

<p><b><span class="cmdname">undo peer </span></b><i><span class="varname">group-name</span></i> <strong><span>public-as-only</span></strong> <strong><span>limited</span></strong> [ <strong><span>replace</span></strong> ] [ <strong><span>include-peer-as</span></strong> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907604768__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">group-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a BGP peer group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 47 case-sensitive characters and cannot contain spaces. If the character string is quoted by double quotation marks, the character string can contain spaces.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>force</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Deletes all private AS numbers from the AS_Path attribute. The AS_Path attribute of a specified peer is ignored during the deletion.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>replace</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Replaces AS numbers with the local AS number.</p>
<p>If both force and replace are specified, all private AS numbers in the AS_Path list are replaced with the local AS number, and the AS number of the specified peer is ignored during the replacement.</p>
<p>If both limited and replace are specified, the device replaces all private AS numbers in the AS_Path list with the local AS number from the left, and stops the replacement until the local or public AS number is encountered. During the replacement, the device ignores the AS number of the specified peer.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>include-peer-as</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Deletes AS numbers.</p>
<p>If both force and include-peer-as are specified, all private AS numbers are forcibly deleted.</p>
<p>If force, replace, and include-peer-as are specified, private AS numbers in the AS_Path list are replaced with the local AS number.</p>
<p>If both limited and include-peer-as are specified, the AS numbers on the left are deleted, and the deletion stops when the local or public AS number is encountered.</p>
<p>If limited, replace, and include-peer-as are specified at the same time, the private AS numbers in the AS_Path list are replaced with the local AS number from the leftmost one, and the replacement stops when the local or public AS number is encountered.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>limited</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Deletes private AS numbers from the leftmost one to the local or a public AS number except the private AS number of a specified peer group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907604768__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-IPv6 unicast address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907604768__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907604768__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Generally, AS numbers range from 1 to 4294967295, including public AS numbers, private AS numbers, and reserved AS numbers. If the <b><span class="cmdname">private-4-byte-as enable</span></b> command is not configured, the private AS number ranges from 64512 to 65534. 65535 is reserved for special applications. After the <b><span class="cmdname">private-4-byte-as enable</span></b> command is run, private AS numbers range from 64512 to 65534 and from 4200000000 to 4294967294. 65535 and 4294967295 are reserved for special applications.<p></p>
<span>Public AS numbers can be directly used on the Internet</span>. Private AS numbers cannot be directly advertised to the Internet. Otherwise, loops may occur. Therefore, private AS numbers are used only in internal routing domains.<p></p>
<span>You can run this command to process private AS numbers</span> and reserved AS numbers in the AS_Path attribute of BGP routes as required. The processing of reserved AS numbers is the same as that of private AS numbers. The following describes how to process private AS numbers.<p></p>
<span>If the</span> <b><span class="cmdname">peer public-as-only</span></b> command is run without any optional parameter and the AS_Path attribute of BGP routes contains only private AS numbers, BGP deletes these private AS numbers and then advertises the routes. BGP does not delete private AS numbers in the following situations:</p>

<ul><li>The AS_Path attribute of a route contains the AS number of the peer. In this case, deleting the private AS number may cause routing loops.</li><li>The AS_Path list contains both public and private AS numbers. This list indicates that the route has passed through the public network. Deleting the private AS number may cause a forwarding error.<p></p>
<span>To delete or replace private AS numbers in the AS_Path</span> list, set the following parameters:</li><li>force: indicates that all private AS numbers are directly deleted. The AS numbers of the specified peer group are ignored during the deletion.</li><li>force replace: replaces the private AS number in the AS_Path list with the local AS number and ignores the AS number of the specified peer group.</li><li>force include-peer-as: deletes all private AS numbers.</li><li>force replace include-peer-as: replaces the private AS numbers in the AS_Path list with the local AS number. The purpose of replacement is to ensure that the lengths of the AS_Path lists are the same without affecting the route selection result.</li><li>limited: deletes the AS numbers from the leftmost one until a local or public AS number is found. The AS number of the specified peer is ignored during the deletion.</li><li>limited replace: replaces the private AS numbers in the AS_Path list from the left with the local AS number until the local or public AS number is found. The AS number of the specified peer group is ignored during the replacement.</li><li>limited include-peer-as: deletes the AS numbers from the leftmost AS number. The purpose is to delete the private AS numbers of the network where the local device resides.</li><li>limited replace include-peer-as: replaces the private AS numbers in the AS_Path list from the left with the local AS number until the local or public AS number is found.</li></ul>
<p><strong>Configuration Impact</strong></p>
<p>If the <b><span class="cmdname">peer public-as-only</span></b> command is run for a peer group, the peers of the peer group inherit the configuration.</p>
<p><strong>Precautions</strong></p>
<p>Analyze the network structure with caution and select proper optional parameters to prevent routing loops or forwarding errors.<p></p>
<span>This command takes effect after an export routing</span> policy is configured.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907604768__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a device to remove all private AS numbers from the AS_Path attribute when sending a BGP Update message to its peer group.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>group test</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv6-family unicast</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv6] <strong>peer test enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv6] <strong>peer test public-as-only</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/IPV4-PEER-PUBLIC-AS-ONLY(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/PEER-IPV6-PUBLIC-AS-ONLY(BGPIPV6).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>