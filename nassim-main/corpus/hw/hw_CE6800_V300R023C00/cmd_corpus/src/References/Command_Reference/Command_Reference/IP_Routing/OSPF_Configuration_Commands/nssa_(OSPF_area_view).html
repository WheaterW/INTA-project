
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="nssa (OSPF area view)">
<meta name="DC.subject" content="nssa (OSPF area view)">
<meta name="keywords" content="nssa (OSPF area view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPF-NEXTHOP(OSPFCOMMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPF-OPAQUE-CAPABILITY(OSPFCOMMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_OSPFCOMMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907603280">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>nssa (OSPF area view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907603280"></a><a name="EN-US_CLIREF_0000001907603280"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">nssa (OSPF area view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907603280__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">nssa</span></b> command configures an NSSA.</p>
<p>The <b><span class="cmdname">undo nssa</span></b> command cancels the configuration of an NSSA.</p>
</p>
<p>By default, an OSPF area is not configured as an NSSA.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907603280__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">nssa </span></b>[ { <strong><span>default-route-advertise</span></strong> [ <strong><span>backbone-peer-ignore</span></strong> ] } | <strong><span>no-import-route</span></strong> | <strong><span>no-summary</span></strong> | <strong><span>set-n-bit</span></strong> | <strong><span>suppress-forwarding-address</span></strong> | <strong><span>translator-always</span></strong> | <strong><span>translator-interval</span></strong> <i><span class="varname">interval-value</span></i> | <strong><span>zero-address-forwarding</span></strong> ] <sup>*</sup></p>

<p><b><span class="cmdname">undo nssa</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907603280__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>default-route-advertise</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configure the ABR or ASBR to generate default Type 7 LSAs and advertise them to the NSSA.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>backbone-peer-ignore</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Prevents the ABR from checking the neighbor status when the ABR generates default Type 7 LSAs and advertises them to the NSSA. Specifically, the ABR generates default Type 7 LSAs and advertises them to the NSSA as long as an interface that is Up exist in the backbone area.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>no-import-route</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that no external route is imported to an NSSA.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>no-summary</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that an ABR is prevented from sending summary LSAs to the NSSA.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>set-n-bit</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the N-bit is set in DD packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>suppress-forwarding-address</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the forwarding address (FA) of the Type 5 LSA translated by the NSSA ABR to 0.0.0.0.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>translator-always</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates an ABR in an NSSA as an all-the-time translator. Multiple ABRs in an NSSA can be configured as translators.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>translator-interval</span></strong> <i><span class="varname">interval-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the timeout period of a translator.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 120, in seconds. The default value is 40 seconds.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>zero-address-forwarding</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the FA of the generated NSSA LSAs to 0.0.0.0 when external routes are imported by the ABR in an NSSA.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907603280__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>OSPF area view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907603280__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907603280__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>If you need to import AS external routes to an area and prevent these routes from consuming resources, you can configure the area as an NSSA. The NSSA imports AS external routes and transmits them to the entire OSPF AS.<p></p>
<span>NSSA attributes must be configured on all devices</span> in the NSSA using the <b><span class="cmdname">nssa</span></b> command. The application scenarios of the parameters are as follows:</p>

<ul><li>The conditions for generating default Type 7 LSAs and advertising them to the NSSA are as follows:</li></ul>

<ol><li>A neighbor in the Full state exists in the backbone area.</li><li>An interface in the Up state exists in the backbone area, and the default-route-advertise backbone-peer-ignore parameter is configured.</li><li>The nssa default-route-advertise parameter is configured.</li><li>The route 0.0.0.0 of another process exists in the local routing table.</li><li>The OSPF process is bound to a VPN instance, and the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is not run in the OSPF process view.<p></p>
<span>If condition 1</span>, 2, or 5 is met, the ABR can generate default Type 7 LSAs and advertise them to the NSSA. If conditions 3 and 4 are met, the ASBR can generate default Type 7 LSAs and advertise them to the NSSA.</li></ol>

<ul><li>If an ASBR also functions as an ABR, you can specify no-import-route in the command to prevent external routes imported using the <b><span class="cmdname">import-route</span></b> command from being advertised to the NSSA.</li><li>To reduce the number of LSAs to be transmitted to the NSSA, set no-summary on an ABR. This prevents the ABR from transmitting summary LSAs (Type 3 LSAs) to the NSSA.<p></p>
<span>After the</span> <b><span class="cmdname">nssa default-route-advertise backbone-peer-ignore no-summary</span></b> command is run, an ABR generates both default Type 7 LSAs and default Type 3 LSAs as long as an interface in the Up state exists in the backbone area, regardless of whether a neighbor in the Full state exists. The default Type 3 LSAs take effect preferentially.</li><li>After the set-n-bit keyword is set, the N-bit is set in the DD packets during the synchronization between the local device and neighbors.<p></p>
<span>If there are multiple ABRs in an NSSA</span>, the system automatically selects an ABR as the translator according to certain rules (generally, the device with the largest router ID is selected in the NSSA) to translate Type 7 LSAs into Type 5 LSAs. You can also configure the parameter translator-always on an ABR to specify the ABR as an all-the-time translator. To specify two ABRs for load balancing, configure the parameter translator-always on two ABRs to specify the ABRs as all-the-time translators. This prevents LSA flooding caused by translator role changes.</li><li>The translator-interval parameter is used to ensure smooth translator switching. The interval-value value must be greater than the flooding period.<p></p>
<span>The rules for setting the forwarding address of NSSA</span> LSAs are as follows:</li></ul>

<ol><li>The primary IP address of an active interface in the NSSA is selected as the forwarding address of NSSA LSAs. The IP address of an interface suppressed by the <b><span class="cmdname">suppress-reachability</span></b> command is not selected as the forwarding address of NSSA LSAs.</li><li>The IP address of the loopback interface is preferred over the IP addresses of other interfaces. If the priorities are the same, the IP address of the interface with a smaller index is preferred.</li><li>When a new interface with a better IP address is available in the area, the LSA forwarding address is updated after a delay of 10s. When the IP address of the interface that functions as the FA is unavailable, the LSA forwarding address is updated immediately.</li></ol>
</div>
<p><strong>Configuration Impact</strong></p>
<p>Configuring or deleting NSSA attributes may trigger routing updates in the area. A second configuration of NSSA attributes can be implemented or canceled only after a routing update is complete.</p>
<p><strong>Precautions</strong></p>
<ul><li>According to the FA selection rules of NSSA LSAs, the interface indexes are compared during FA selection. If the interface index changes after the restart, the FA address may change after the restart.</li><li>You are advised to configure a loopback address for the device in the NSSA so that the loopback address can be automatically selected as the FA. If other devices have paths of the same cost to the device in the NSSA, load balancing is performed.</li><li>When the last common area (not a stub area or NSSA) in an OSPF process is deleted, useless Type 5 LSAs on the local device in the area where LSAs are flooded are deleted immediately. The local device, however, still reserves useless Type 5 LSAs from other devices. These useless Type 5 LSAs are deleted only when the aging time reaches 3600s.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907603280__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure area 1 as an NSSA.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospf 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospf-1] <strong>area 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospf-1-area-0.0.0.1] <strong>nssa</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_OSPF_Configuration_Commands_title.html">OSPF Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/OSPF-NEXTHOP(OSPFCOMMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/OSPF-OPAQUE-CAPABILITY(OSPFCOMMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>