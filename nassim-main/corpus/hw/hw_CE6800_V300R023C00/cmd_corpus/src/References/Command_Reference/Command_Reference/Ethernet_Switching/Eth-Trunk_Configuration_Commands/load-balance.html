
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="load-balance">
<meta name="DC.subject" content="load-balance">
<meta name="keywords" content="load-balance">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Eth-Trunk_Interface_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/SETETHTRUNKLEAST(IFMTRUNKOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/LOAD-BALANCE_DYNAMIC.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_FWM_TRUNK">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907761768">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>load-balance</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907761768"></a><a name="EN-US_CLIREF_0000001907761768"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">load-balance</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907761768__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">load-balance</span></b> command sets a load balancing mode of an Eth-Trunk.</p>
<p>The <b><span class="cmdname">undo load-balance</span></b> command restores the default load balancing mode of an Eth-Trunk.</p>
</p>
<p>By default, the load balancing mode is enhanced mode.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE6820H, CE6820H-K and CE6820S.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907761768__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">load-balance </span></b>{ <strong><span>dst-ip</span></strong> | <strong><span>src-ip</span></strong> | <strong><span>src-dst-ip</span></strong> | <strong><span>dst-mac</span></strong> | <strong><span>src-mac</span></strong> | <strong><span>src-dst-mac</span></strong> | <strong><span>round-robin</span></strong> | <strong><span>enhanced</span></strong> <strong><span>profile</span></strong> <i><span class="varname">profile-name</span></i> }</p>


<p><b><span class="cmdname">undo load-balance </span></b>[ <strong><span>dst-ip</span></strong> | <strong><span>src-ip</span></strong> | <strong><span>src-dst-ip</span></strong> | <strong><span>dst-mac</span></strong> | <strong><span>src-mac</span></strong> | <strong><span>src-dst-mac</span></strong> | <strong><span>round-robin</span></strong> | <strong><span>enhanced</span></strong> <strong><span>profile</span></strong> <i><span class="varname">profile-name</span></i> ]</p>


</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907761768__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>dst-ip</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates load balancing based on dst-ip mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>src-ip</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates load balancing based on src-ip mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>src-dst-ip</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates load balancing based on src-dst-ip mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>dst-mac</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates load balancing based on dst-mac mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>src-mac</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates load balancing based on src-mac mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>src-dst-mac</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates load balancing based on src-dst-mac mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>round-robin</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the load balancing based on round-robin mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>enhanced</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates load balancing based on enhanced mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>profile</span></strong> <i><span class="varname">profile-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the profile name.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters. The string cannot contain the following characters: | &gt; $. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907761768__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>Eth-Trunk interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907761768__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907761768__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>To ensure proper load balancing between physical links of an Eth-Trunk and avoid link congestion, use the <b><span class="cmdname">load-balance</span></b> command to set the load balancing mode of the Eth-Trunk.</p>

<p>Load balancing is valid only for outgoing traffic; therefore, the load balancing modes for the interfaces at both ends of the link can be different and do not affect each other.</p>

<p>You can set the load balancing mode based on traffic models. When a parameter of traffic changes frequently, you can set the load balancing mode based on this parameter to ensure that the traffic is load balanced evenly. For example, if IP addresses in packets change frequently, use the load balancing mode based on dst-ip, src-ip, or src-dst-ip so that traffic can be properly load balanced among physical links. If MAC addresses in packets change frequently and IP addresses are fixed, use the load balancing mode based on dst-mac, src-mac, or src-dst-mac so that traffic can be properly load balanced among physical links.</p>

<p>The device supports the following load balancing modes:</p>

<ul><li>
<p>dst-ip: load balancing based on destination IP address. In this mode, the system obtains the destination IP address in incomimg packets  to perform the Exclusive-OR calculation, and then selects the outgoing interface from the Eth-Trunk table according to the calculation result.</p>

</li><li>
<p>dst-mac: load balancing based on destination MAC address. In this mode, the system obtains the destination MAC address in incomimg packets  to perform the Exclusive-OR calculation, and then selects the outgoing interface from the Eth-Trunk table according to the calculation result.</p>

</li><li>
<p>src-ip: load balancing based on source IP address. In this mode, the system obtains the source IP address in incoming packets to perform the Exclusive-OR calculation, and then selects the outgoing interface from the Eth-Trunk table according to the calculation result.</p>

</li><li>
<p>src-mac: load balancing based on source MAC address. In this mode, the system obtains the source MAC address in incomimg packets to perform the Exclusive-OR calculation, and then selects the outgoing interface from the Eth-Trunk table according to the calculation result.</p>

</li><li>
<p>src-dst-ip: load balancing based on the Exclusive-OR result of the source IP address and the destination IP address. In this mode, the system obtains the source IP address and destination IP address in incomimg packets to perform the Exclusive-OR calculation, and then selects the outgoing interface from the Eth-Trunk table according to the calculation result.</p>

</li><li>
<p>src-dst-mac: load balancing based on the Exclusive-OR result of the source MAC address and the destination MAC address. In this mode, the system obtains the source MAC address and the destination MAC address in incomimg packets to perform the Exclusive-OR calculation, and then selects the outgoing interface from the Eth-Trunk table according to the calculation result.</p>

</li><li>
<p>round-robin: Each Eth-Trunk member interface forwards traffic in turn. For known unicast traffic, if packets have approximate lengths, configure this load balancing mode to achieve even load balancing. This mode may cause the mis-sequencing problem. Ensure that the receive device or terminal supports assembly of mis-sequenced packets.</p>

</li><li>
<p>enhanced load balancing: The devices select interfaces to forward packets according to the load balancing mode defined for different packets by the enhanced load balancing profile.</p>

</li></ul>
</div>
<p><strong>Prerequisites</strong></p>
<p><p>Ensure that the <b><span class="cmdname">load-balance profile profile-name</span></b> command has been executed to create a load balancing profile before you run the load-balance enhanced profile profile-name command.</p>
</p>
<p><strong>Precautions</strong></p>
<p>If you run the <b><span class="cmdname">load-balance</span></b> command multiple times, only the latest configuration takes effect.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907761768__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the load balancing mode of Eth-Trunk 1 to src-dst-ip.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface Eth-Trunk 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Eth-Trunk1] <strong>load-balance src-dst-ip</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Eth-Trunk_Interface_Configuration_Commands_title.html">Eth-Trunk Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/SETETHTRUNKLEAST(IFMTRUNKOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/LOAD-BALANCE_DYNAMIC.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>