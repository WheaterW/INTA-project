
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="stp mode (MSTP process view)">
<meta name="DC.subject" content="stp mode (MSTP process view)">
<meta name="keywords" content="stp mode (MSTP process view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/GLOBALSTPMODE(MSTPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/STPMODEVBST(MSTPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featurename" content="STP">
<meta name="featurename" content="RSTP">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="featuretype" content="Ethernet Switching">
<meta name="DC.Creator" content="SUBSYS_ID_MSTPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907761960">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>stp mode (MSTP process view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907761960"></a><a name="EN-US_CLIREF_0000001907761960"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">stp mode (MSTP process view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907761960__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">stp mode</span></b> command sets an operation mode for a spanning tree protocol in a Multiple Spanning Tree Protocol (MSTP) process.</p>
<p>The <b><span class="cmdname">undo stp mode</span></b> command restores the default operation mode of a spanning tree protocol in an MSTP process.</p>
</p>
<p>By default, the operation mode of a spanning tree protocol in an MSTP process is MSTP.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907761960__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">stp mode </span></b>{ <strong><span>mstp</span></strong> | <strong><span>rstp</span></strong> | <strong><span>stp</span></strong> }</p>

<p><b><span class="cmdname">undo stp mode</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907761960__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>mstp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that all the ports bound to an MSTP process work in the MSTP mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>rstp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that all the ports bound to an MSTP process work in the RSTPmode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>stp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that all the ports bound to an MSTP process work in the STP mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907761960__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>MSTP process view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907761960__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907761960__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><ul><li>After an MSTP process is created on an MSTP network, all ports bound to the MSTP process operate in MSTP mode by default. These ports may be connected to STP/RSTP devices, and spanning trees cannot be properly calculated because devices running different spanning tree protocols cannot exchange packets.</li><li>To address this problem, run the stp mode command to set an operation mode for a device. The operation mode can be MSTP, RSTP, or STP.</li><li>By default, if a port bound to an MSTP process is connected to an STP device, the operation mode of this port is automatically switched to STP and the operation mode of the other ports remains MSTP.</li></ul>
</div>
<p><strong>Configuration Impact</strong></p>
<div class="p"><ul><li>After the <b><span class="cmdname">stp mode mstp</span></b> command is run in an MSTP process, all MSTP process-binding ports except the port directly connected to an STP port operate in MSTP mode and send MST BPDUs. The port directly connected to an STP port operates in STP mode.</li><li>After the <b><span class="cmdname">stp mode rstp</span></b> command is run in an MSTP process, all MSTP process-binding ports except the port directly connected to an STP port operate in RSTP mode and send RST BPDUs. The port directly connected to an STP port operates in STP mode.</li><li>After the <b><span class="cmdname">stp mode stp</span></b> command is run in an MSTP process, all ports bound to the MSTP process operate in STP mode and send STP configuration BPDUs.</li></ul>
</div>
<p><strong>Precautions</strong></p>
<p><p>A port operating in MSTP mode can communicate with a port operating in RSTP mode.<p></p>
<span>Running the</span> <b><span class="cmdname">stp mode rstp</span></b> command on a device that supports MSTP is not recommended. The function of the <b><span class="cmdname">stp mode rstp</span></b> command can be implemented by the <b><span class="cmdname">stp mode mstp</span></b> command by default.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907761960__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the operation mode of MSTP process 1 to STP.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>stp process 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mst-process-1] <strong>stp mode stp</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_Spanning_Tree_Protocol_Configuration_Commands_title.html">STP/RSTP/MSTP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/GLOBALSTPMODE(MSTPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/STPMODEVBST(MSTPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>