
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="nexthop recursive-lookup delay (BGP-IPv4 unicast address family view)">
<meta name="DC.subject" content="nexthop recursive-lookup delay (BGP-IPv4 unicast address family view)">
<meta name="keywords" content="nexthop recursive-lookup delay (BGP-IPv4 unicast address family view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_BGP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/BGP-NEXTHOP-RECURSIVE-DELAY(BGPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IPV6-BGP-NEXTHOP-RECURSIVE-DELAY(BGPIPV6).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_BGPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942843161">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>nexthop recursive-lookup delay (BGP-IPv4 unicast address family view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942843161"></a><a name="EN-US_CLIREF_0000001942843161"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">nexthop recursive-lookup delay (BGP-IPv4 unicast address family view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942843161__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">nexthop recursive-lookup delay</span></b> command configures a delay in responding to next hop recursion changes.</p>
<p>The <b><span class="cmdname">undo nexthop recursive-lookup delay</span></b> command cancels the configuration of the delay in responding to next hop recursion changes.</p>
<p>The <b><span class="cmdname">nexthop recursive-lookup non-critical-event delay</span></b> command configures a delay in responding to non-critical next hop recursion changes.</p>
<p>The <b><span class="cmdname">undo nexthop recursive-lookup non-critical-event delay</span></b> command cancels the configuration of the delay in responding to non-critical next hop recursion changes.</p>
</p>
<p>By default, the delay in responding to non-critical next hop recursion changes is 10s, and the device does not delay responding to critical next hop recursion changes.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942843161__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p><b><span class="cmdname">nexthop recursive-lookup delay </span></b>[ <i><span class="varname">delay-time</span></i> ]</p>

<p><b><span class="cmdname">nexthop recursive-lookup non-critical-event delay </span></b>[ <i><span class="varname">nonCrit-delay-time</span></i> ]</p>

<p><b><span class="cmdname">undo nexthop recursive-lookup delay</span></b></p>

<p><b><span class="cmdname">undo nexthop recursive-lookup non-critical-event delay</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942843161__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">delay-time</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the delay in responding to recursion changes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 100, in seconds. By default, the value is 5s.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">nonCrit-delay-time</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the delay in responding to non-critical changes of the next hop.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 100, in seconds. The default value is 10s.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942843161__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>BGP-IPv4 unicast address family view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942843161__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942843161__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>If the recursion result of BGP routes changes frequently, you can run the <b><span class="cmdname">nexthop recursive-lookup delay</span></b> command to configure BGP to respond to the recursion result change after a specified period of time. This reduces unnecessary route re-selection and re-advertisement. However, this affects network convergence. Therefore, recursion result changes are classified into two types:</p>

<ul><li>Critical recursion result change: When the recursion result of the next hop changes, the reachability also changes. For example, if a fault occurs on the network, BGP routes cannot find the next hop route or tunnel to which BGP routes can be recursed. As a result, traffic is interrupted.</li><li>Non-critical recursion result change: The recursion result of the next hop changes, but the reachability does not change. For example, the interface or type of the tunnel to which the next hop of a BGP route is recursed changes. That is, the tunnel to which the next hop of a BGP route is recursed changes from tunnel A to tunnel B, but traffic is not interrupted. Only the tunnel to which the next hop of a BGP route is recursed changes.</li></ul>
<p><strong>Configuration Impact</strong></p>
<p>The rules for configuring a delay in response to next hop recursion changes and configuring a dedicated delay in response to non-critical recursion changes are as follows:</p>

<ul><li>nexthop recursive-lookup delay                       //Configure the device to delay for 5s in response to critical recursion changes and delay for 10s in response to non-critical recursion changes.</li><li>nexthop recursive-lookup non-critical-event delay    //Configure the device not to delay the responses to critical recursion changes but to delay for 10s in response to non-critical recursion changes.</li><li>nexthop recursive-lookup delay 3                       //Configure the device to delay for 3s in response to critical recursion changes and delay for 10s in response to non-critical recursion changes.</li><li>nexthop recursive-lookup non-critical-event delay 6  //Configure the device not to delay the responses to critical recursion changes but to delay for 6s in response to non-critical recursion changes.</li><li>nexthop recursive-lookup delay<p></p>
<span>nexthop recursive-lookup non-critical-event delay</span> 0  //Configure the device to delay for 5s in response to both critical and non-critical recursion changes.</li><li>nexthop recursive-lookup delay<p></p>
<span>nexthop recursive-lookup non-critical-event delay</span>    //Configure the device to delay for 5s in response to critical recursion changes and delay for 10s in response to non-critical recursion changes.</li><li>nexthop recursive-lookup delay 3<p></p>
<span>nexthop recursive-lookup non-critical-event delay</span>    //Configure the device to delay for 3s in response to critical recursion changes and delay for 10s in response to non-critical recursion changes.</li><li>nexthop recursive-lookup delay 3<p></p>
<span>nexthop recursive-lookup non-critical-event delay</span> 6  //Configure the device to delay for 3s in response to critical recursion changes and delay for 6s in response to non-critical recursion changes.</li><li>nexthop recursive-lookup delay<p></p>
<span>nexthop recursive-lookup non-critical-event delay</span> 6  //Configure the device to delay for 5s in response to critical recursion changes and delay for 6s in response to non-critical recursion changes.</li></ul>
<p><strong>Precautions</strong></p>
<p><p>Delayed response to BGP next hop recursion changes applies only to scenarios where multiple links exist between the downstream device and the same destination. If there is only one link between the downstream device and the destination, configuring delayed response to BGP next hop recursion changes may cause heavier traffic loss when the link fails because link switching is impossible.<p></p>
<span>After the</span> <b><span class="cmdname">nexthop recursive-lookup delay</span></b> command is run, if the delay in response to non-critical recursion changes is set to 0 using the <b><span class="cmdname">nexthop recursive-lookup non-critical-event delay</span></b> command, the actual delay in response to non-critical recursion changes is the same as the delay in response to next hop recursion changes specified in the <b><span class="cmdname">nexthop recursive-lookup delay</span></b> command.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942843161__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the delay in responding to non-critical recursion changes to 20 seconds.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv4-family unicast</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv4] <strong>nexthop recursive-lookup non-critical-event delay 20</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_BGP_Configuration_Commands_title.html">BGP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/BGP-NEXTHOP-RECURSIVE-DELAY(BGPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/IPV6-BGP-NEXTHOP-RECURSIVE-DELAY(BGPIPV6).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>