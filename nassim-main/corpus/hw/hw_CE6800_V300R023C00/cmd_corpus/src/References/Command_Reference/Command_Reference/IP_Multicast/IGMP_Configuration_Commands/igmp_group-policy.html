
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="igmp group-policy">
<meta name="DC.subject" content="igmp group-policy">
<meta name="keywords" content="igmp group-policy">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_IGMP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IGMP-EXPLICIT-TRACK-DC(DGMPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/IGMP-INTERFACE-VIEW-CMD_9(DGMPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Creator" content="SUBSYS_ID_DGMPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942845309">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>igmp group-policy</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942845309"></a><a name="EN-US_CLIREF_0000001942845309"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">igmp group-policy</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942845309__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The  <b><span class="cmdname">igmp group-policy</span></b> command configures an IGMP group policy on an interface to limit the range of multicast groups that hosts connected to the interface can join.</p>
<p>The <b><span class="cmdname">undo igmp group-policy</span></b> command restores the default configuration.</p>
</p>
<p>By default, no IGMP group policy is configured on an interface, so that hosts connected to this interface can join any multicast groups.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942845309__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">igmp group-policy </span></b>{ <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } { <strong><span>1</span></strong> | <strong><span>2</span></strong> | <strong><span>3</span></strong> }</p>

<p><b><span class="cmdname">igmp group-policy </span></b>{ <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> }</p>

<p><b><span class="cmdname">undo igmp group-policy</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942845309__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">acl-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of a basic ACL or an advanced ACL. The ACL defines a multicast group range.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The number of a basic ACL is an integer ranging from 2000 to 2999; the number of an advanced ACL is an integer ranging from 3000 to 3999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a named ACL.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 32 case-sensitive characters, spaces not supported.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>1</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the range of multicast groups that an IGMPv1 host can join.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>2</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the range of multicast groups that an IGMPv2 host can join.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>3</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets the range of multicast groups that an IGMPv3 host can join.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942845309__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100ge sub-interface view,</span><span>100GE interface view,</span><span>10GE sub-interface view,</span><span>10GE interface view,</span><span>200GE sub-interface view,</span><span>200GE interface view,</span><span>25GE sub-interface view,</span><span>25GE interface view,</span><span>400GE sub-interface view,</span><span>400GE interface view,</span><span>50GE sub-interface view,</span><span>50GE interface view,</span><span>Eth-Trunk sub-interface view,</span><span>Eth-Trunk interface view,</span><span>Loopback interface view,</span><span>VBDIF interface view,</span><span>VLANIF interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942845309__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942845309__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>To restrict the range of multicast groups that user hosts can join, run the <b><span class="cmdname">igmp group-policy</span></b> command to apply an ACL to the Router interface connected to the user hosts. IGMP security is thus improved.</p>
<p><strong>Prerequisites</strong></p>
<p>The <b><span class="cmdname">multicast routing-enable</span></b> command must be run in the instance to which the interface belongs and the ACL to be referenced must be configured.</p>
<p><strong>Configuration Impact</strong></p>
<p>If the <b><span class="cmdname">igmp group-policy</span></b> command is run more than once, the latest configuration overrides the previous one.<p></p>
<span>After the</span> <b><span class="cmdname">igmp group-policy</span></b> command is run on an interface:</p>

<ul><li>The interface filters received Report messages based on the ACL and maintains memberships only for multicast groups permitted by the ACL.</li><li>The interface discards Report messages denied by the ACL. If entries have been already created for multicast groups denied by the ACL, the device deletes these entries after the specified timeout period expires.<p></p>
<span>If an IGMP version is not specified</span>, the ACL applies to IGMPv1, IGMPv2, and IGMPv3 hosts.</li></ul>
<p><strong>Precautions</strong></p>
<p>The <b><span class="cmdname">igmp group-policy</span></b> command and the <b><span class="cmdname">acl</span></b> command are used together. For numbered ACLs and named ACLs:</p>

<ul><li>In the basic ACL view, you can set the range of multicast groups that an interface is allowed to join by specifying the source parameter in the <b><span class="cmdname">rule</span></b> command.</li><li>In the advanced ACL view, you can set the range of multicast sources that an interface is allowed to join by specifying the source parameter in the <b><span class="cmdname">rule</span></b> command, and set the range of multicast groups that an interface is allowed to join by specifying the destination parameter in the <b><span class="cmdname">rule</span></b> command.<p></p>
<span>For IGMPv1</span>/v2 and IGMPv3 MODE_IS_EXCLUDE/CHANGE_TO_EXCLUDE_MODE Report messages, the source parameter in the <b><span class="cmdname">rule</span></b> command must match 255.255.255.255.<p></p>
<span>The group-policy command takes effect only for dynamic</span> IGMP join requests. Static IGMP join requests are not controlled by the group-policy command.</li></ul>
<p><p>Only CE6866, CE6860-SAN, CE6866K, CE6860-HAM, CE8851-32CQ8DQ-P, CE8850-SAN, CE8851K, CE8850-HAM, CE6863H, CE6863H-K, CE6881H, CE6881H-K, CE8855, CE8851-32CQ4BQ, CE6855-48XS8CQ, CE6885-SAN, CE6885, CE6885-LL(standard forwarding mode), CE6885-T, CE6863E-48S8CQ support this command in the VBDIF interface view.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942845309__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Create ACL 2005, and configure a rule for ACL 2005 to allow hosts to receive messages from multicast group 225.1.1.1. Configure a filter on vlanif 1 to allow hosts connected to the interface to join only multicast group 225.1.1.1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl number 2005</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-basic-2005] <strong>rule permit source 225.1.1.1 0</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-basic-2005] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>multicast routing-enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>vlan 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Vlan1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface vlanif 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Vlanif1] <strong>igmp group-policy 2005</strong>
</pre>
</div>

<div class="p"># Create an ACL named myacl, and configure a rule for the ACL to allow hosts to receive messages from multicast group 225.1.0.0/16. Configure a filter on vlanif 1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl name myacl</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-advance-myacl] <strong>rule permit ip destination 225.1.0.0 0.0.255.255</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-advance-myacl] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>multicast routing-enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>vlan 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Vlan1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface vlanif 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Vlanif1] <strong>igmp group-policy acl-name myacl</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_IGMP_Configuration_Commands_title.html">IGMP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/IGMP-EXPLICIT-TRACK-DC(DGMPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/IGMP-INTERFACE-VIEW-CMD_9(DGMPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>