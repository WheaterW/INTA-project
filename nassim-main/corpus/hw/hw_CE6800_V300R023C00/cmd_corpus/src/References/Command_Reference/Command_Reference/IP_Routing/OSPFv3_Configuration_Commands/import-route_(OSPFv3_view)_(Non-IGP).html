
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="import-route (OSPFv3 view) (Non-IGP)">
<meta name="DC.subject" content="import-route (OSPFv3 view) (Non-IGP)">
<meta name="keywords" content="import-route (OSPFv3 view) (Non-IGP)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_OSPFv3_Configuration_Command_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/VRF-IPV6-IMPORT-ROUTE(OSPFCOMMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPFV3-IMPORT-ROUTE_1(OSPFCOMMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_OSPFCOMMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942842645">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>import-route (OSPFv3 view) (Non-IGP)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942842645"></a><a name="EN-US_CLIREF_0000001942842645"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">import-route (OSPFv3 view) (Non-IGP)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942842645__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">import-route</span></b> command imports external routes. Before the routes are imported, the OSPFv3 process of the route must be active.</p>
<p>The <b><span class="cmdname">undo import-route</span></b> command cancels the configuration.</p>
</p>
<p>By default, routes learned by other protocols are not imported.</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942842645__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p><b><span class="cmdname">import-route </span></b>{ <strong><span>direct</span></strong> | <strong><span>static</span></strong> | <strong><span>bgp</span></strong> [ <strong><span>permit-ibgp</span></strong> ] } [ { <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>inherit-cost</span></strong> } | <strong><span>type</span></strong> <i><span class="varname">type</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | { <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> } ] <sup>*</sup></p>





<p><b><span class="cmdname">undo import-route </span></b>{ <strong><span>direct</span></strong> | <strong><span>static</span></strong> | <strong><span>bgp</span></strong> }</p>



</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942842645__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>direct</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports direct routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>static</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports static routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>bgp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports BGP routes.</p>
<p>For an OSPF process that is not bound to a VPN instance or is bound to a VPN instance but the vpn-instance-capability simple command is run, the parameter imports only EBGP routes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>permit-ibgp</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports IBGP routes.</p>
<p>For an OSPF process that is not bound to a VPN instance or is bound to a VPN instance but the vpn-instance-capability simple command is run, importing IBGP routes may cause routing loops. Therefore, exercise caution when using this parameter.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>cost</span></strong> <i><span class="varname">cost</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the cost of the imported route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 16777214.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>inherit-cost</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the imported route inherits the original cost.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>type</span></strong> <i><span class="varname">type</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the type of the imported route.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is 1 or 2.</p>
<ul><li>1: Type 1 external route</li><li>2: Type 2 external route</li></ul>
<p>The default value is 2.</p>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>tag</span></strong> <i><span class="varname">tag</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the tag of the external LSA.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 4294967295. The default value is 1.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Imports only the route that matches the specified route-policy.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 200 case-sensitive characters without spaces. The character string can contain spaces if it is enclosed with double quotation marks (").</p>
</td>
</tr>


</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942842645__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>OSPFv3 view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942842645__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942842645__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>By importing routes of other routing protocols, you can expand OSPFv3 routing information.<p></p>
<span>OSPFv3 uses four types of routes</span>, which are listed in descending order of priority:</p>

<ul><li>Intra-area routes: refer to the routes within an AS area.</li><li>Inter-area routes: refer to the routes between different areas in an AS. Both intra-area routes and external routes are internal routes of an AS.</li><li>Type 1 external route: When the cost of an external route is equal to the cost of an AS internal route and is comparable to the cost of an OSPFv3 route, the external route has a high reliability and can be configured as a Type 1 external route.</li><li>Type 2 external routes: When the cost of the route from an ASBR to the destination outside an AS is greater than the cost of the internal route to the ASBR, Type 2 external routes have low reliability and can be configured as Type 2 external routes.<p></p>
<span>If an OSPFv3 process is not bound to any VPN instance</span> or is bound to a VPN instance but the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is run, only EBGP routes are imported after the <b><span class="cmdname">import-route bgp</span></b> command is run, and IBGP routes are also imported after the <b><span class="cmdname">import-route bgp permit-ibgp</span></b> command is run, routing loops may occur. In this case, run the preference (OSPFv3) and preference (BGP) commands to specify the priorities of OSPFv3 and BGP routes to prevent loops. To import IBGP routes, run the <b><span class="cmdname">import-route bgp permit-ibgp</span></b> command, change the priority of OSPFv3 ASE routes to be smaller than that of IBGP routes to ensure that active routes are IBGP routes. That is, the OSPFv3 priority configured using the preference (OSPFv3) and preference (BGP) commands is greater than the IBGP priority.<p></p>
<span>If an OSPFv3 process is bound to a VPN instance and</span> the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is not run for the OSPFv3 process, running the <b><span class="cmdname">import-route bgp</span></b> command imports BGP routes, including EBGP and IBGP routes. Whether the <b><span class="cmdname">import-route bgp permit-ibgp</span></b> command is run does not affect the imported routes. If both the import-route bgp permit-ibgp and default-route-advertise (OSPFv3) commands are run, active IBGP default routes in the routing table can be imported into OSPFv3.</li></ul>
</div>
<p><strong>Prerequisites</strong></p>
<p>A route-policy has been created using the <b><span class="cmdname">route-policy</span></b> command if you want to import external routes using the route-policy.</p>
<p><strong>Implementation Procedure</strong></p>
<p>The costs of a Type 1 external route and a Type 2 external route are as follows:</p>

<ul><li>The cost of a Type 1 external route equals the cost for the OSPF device to reach an ASBR plus the cost of the route from the ASBR to the destination.</li><li>The cost of a Type 2 external route equals the cost of the route from an ASBR to the destination.</li></ul>
<p><strong>Configuration Impact</strong></p>
<p><p>OSPFv3 does not have a good mechanism to prevent loops of imported external routes. Therefore, exercise caution when configuring OSPFv3 to import external routes to prevent loops caused by manual configurations. You are advised to specify a tag, route-filter, or route-policy when importing routes and configure the policy to inherit the cost mode.<p></p>
<span>If the cost parameter is not specified</span>, the default cost value is used.<p></p>
<span>To inherit the cost</span>, you need to configure the cost inheritance mode in the policy or specify the inherit-cost parameter.<p></p>
<span>After a policy for importing routes is configured</span> using the route-filter or route-policy parameter in the command, the OSPFv3 process can import only the network segment routes that meet the specified conditions. This prevents the device from passively importing unnecessary routes. If no policy is specified for importing routes, a large number of unexpected routes may be imported. As a result, the number of routes exceeds the upper limit or the memory is overloaded.</p>
</p>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>You can run the default (OSPFv3) command to set default parameters for importing external routes, including the cost, type (Type 1 or Type 2), tag, and number of routes.</li><li>The import-route (OSPFv3) command cannot import the default route of an external routing table. To advertise the default route of an external routing table that is learned when OSPF updates the routing table in a common OSPF area, run the default-route-advertise (OSPFv3) command.</li><li>Exercise caution when configuring OSPFv3 to import external routes to prevent loops caused by manual configurations. You are advised to specify a tag or route-policy when importing routes and configure the policy to inherit the cost mode.</li><li>If an OSPFv3 process is not bound to any VPN instance or is bound to a VPN instance but the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is run, only EBGP routes are imported after the <b><span class="cmdname">import-route bgp</span></b> command is run, and IBGP routes are also imported after the <b><span class="cmdname">import-route bgp permit-ibgp</span></b> command is run, routing loops may occur. To prevent routing loops, run the preference (OSPFv3) and preference (BGP) commands to specify OSPFv3 and BGP route priorities. To import IBGP routes, run the <b><span class="cmdname">import-route bgp permit-ibgp</span></b> command, change the priority of OSPFv3 ASE routes to be smaller than that of IBGP routes to ensure that active routes are IBGP routes. That is, the preference configured for OSPFv3 is greater than that configured for IBGP.</li><li>If an OSPFv3 process is bound to a VPN instance and the <b><span class="cmdname">vpn-instance-capability simple</span></b> command is not run for the OSPFv3 process, running the <b><span class="cmdname">import-route bgp</span></b> command imports BGP routes, including EBGP and IBGP routes. Whether the <b><span class="cmdname">import-route bgp permit-ibgp</span></b> command is run does not affect the imported routes. If both the import-route bgp permit-ibgp and default-route-advertise (OSPFv3) commands are run, active IBGP default routes in the routing table can be imported to OSPFv3.</li><li>If tag is not specified, the default tag value is used for the process that is not bound to any VPN instance or the process that is bound to a VPN instance but has the <b><span class="cmdname">vpn-instance-capability simple</span></b> command configured. This cannot prevent loops caused by manual configuration.</li><li>If the cost parameter is not specified, the default cost value is used. To inherit the cost, you need to configure the cost inheritance mode in the policy or specify the inherit-cost parameter.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942842645__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Import the bgp routes to OSPFv3 process 100.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospfv3 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospfv3-100] <strong>import-route bgp</strong>
</pre>
</div>

<div class="p"># Import type 1 static routes, with cost 10.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospfv3 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospfv3-1] <strong>import-route static cost 10 type 1</strong>
</pre>
</div>

<div class="p"># Import type 2 direct routes, with cost 10.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospfv3 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospfv3-1] <strong>import-route direct cost 10 type 2</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_OSPFv3_Configuration_Command_title.html">OSPFv3 Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/VRF-IPV6-IMPORT-ROUTE(OSPFCOMMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/OSPFV3-IMPORT-ROUTE_1(OSPFCOMMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>