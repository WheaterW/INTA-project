
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="dhcp relay giaddr outgoing-interface-address">
<meta name="DC.subject" content="dhcp relay giaddr outgoing-interface-address">
<meta name="keywords" content="dhcp relay giaddr outgoing-interface-address">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_PNF-DHCP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DHCP_RELAY_GATEWAY-SWITCH_ENABLE.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/DHCP_RELAY_GIADDR_SOURCE-INTERFACE.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featurename" content="DHCPv4">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="featuretype" content="IP Addresses and Services">
<meta name="DC.Creator" content="SUBSYS_ID_ESAP_DHCPRELAY">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001942841697">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>dhcp relay giaddr outgoing-interface-address</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001942841697"></a><a name="EN-US_CLIREF_0000001942841697"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">dhcp relay giaddr outgoing-interface-address</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001942841697__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">dhcp relay giaddr outgoing-interface-address</span></b> command configures the relay agent address as the IP address of the outbound interface.</p>
<p>The <b><span class="cmdname">undo dhcp relay giaddr outgoing-interface-address</span></b> command deletes the configuration.</p>
</p>
<p>By default, a DHCP relay interface uses its primary IP address as the relay agent address.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001942841697__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">dhcp relay giaddr outgoing-interface-address</span></b></p>

<p><b><span class="cmdname">undo dhcp relay giaddr outgoing-interface-address</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001942841697__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001942841697__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100ge sub-interface view,</span><span>100GE interface view,</span><span>10GE sub-interface view,</span><span>10GE interface view,</span><span>200GE sub-interface view,</span><span>200GE interface view,</span><span>25GE sub-interface view,</span><span>25GE interface view,</span><span>400GE sub-interface view,</span><span>400GE interface view,</span><span>50GE sub-interface view,</span><span>50GE interface view,</span><span>Eth-Trunk sub-interface view,</span><span>Eth-Trunk interface view,</span><span>VBDIF interface view,</span><span>VLANIF interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001942841697__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001942841697__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>By default, the primary IP address of the DHCP relay interface is used as the relay agent address, and the relay agent address is added to the GiAddr field of packets. The DHCP server then uses the relay agent address to identify the network segment where a user resides and allocates an appropriate IP address for the user to allow for communication with the DHCP relay.<p></p>
<span>If the user and the DHCP server are located in different</span> VPNs, the DHCP server fails to use this relay agent address to communicate with the DHCP relay, and DHCP reply packets are unreachable.<p></p>
<span>To address this issue</span>, run the <b><span class="cmdname">dhcp relay giaddr outgoing-interface-address</span></b> command to configure the relay agent address as the IP address of the outbound interface in DHCP request packets. In this manner, the DHCP reply packets sent by the DHCP server can be successfully forwarded to the DHCP relay.<p></p>
<span>Generally</span>, the DHCP server allocates IP addresses based on the GiAddr field. A modification of the GiAddr field may cause a user online failure.</p>

<ul><li>If the DHCP server supports the suboption link-selection of the Option 82 field, run the <b><span class="cmdname">dhcp option82</span></b> command on the DHCP relay so that the suboption link-selection can be added to the Option 82 field in DHCP request packets. As the suboption link-selection carries GiAddr information, the DHCP server can allocate IP addresses to users based on this suboption.</li><li>If the DHCP server does not support the suboption link-selection of the Option 82 field, the <b><span class="cmdname">dhcp relay giaddr outgoing-interface-address</span></b> command cannot be run.</li></ul>
<p><strong>Precautions</strong></p>
<p><p>When a distributed VXLAN gateway functions as a DHCPv4 relay agent, it selects the smallest local IP address in the same VPN as the DHCPv4 server as the relay agent address.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001942841697__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">



<div class="p"># On interface <span>100GE</span><span>1/0/1</span>, configure the relay agent address as the IP address of the outbound interface.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span><span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>dhcp relay giaddr outgoing-interface-address</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_PNF-DHCP_Configuration_Commands_title.html">DHCPv4 Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/DHCP_RELAY_GATEWAY-SWITCH_ENABLE.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/DHCP_RELAY_GIADDR_SOURCE-INTERFACE.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>