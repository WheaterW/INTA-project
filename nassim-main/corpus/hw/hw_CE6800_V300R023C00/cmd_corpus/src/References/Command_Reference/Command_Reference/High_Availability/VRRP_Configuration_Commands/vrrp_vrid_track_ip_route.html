
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="vrrp vrid track ip route">
<meta name="DC.subject" content="vrrp vrid track ip route">
<meta name="keywords" content="vrrp vrid track ip route">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_VRRP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/TRACKIF(VRRPOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/LINKBFDDOWNNUMBER(VRRPOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="featuretype" content="High Availability">
<meta name="DC.Creator" content="SUBSYS_ID_VRRPOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907607424">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>vrrp vrid track ip route</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907607424"></a><a name="EN-US_CLIREF_0000001907607424"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">vrrp vrid track ip route</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907607424__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">vrrp vrid track ip route</span></b> command configures a VRRP group to track a specified route.</p>
<p>The <b><span class="cmdname">undo vrrp vrid track ip route</span></b> command disables a VRRP group from tracking a specified route.</p>
</p>
<p>By default, a VRRP group tracks no route.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907607424__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">vrrp vrid </span></b><i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>ip</span></strong> <strong><span>route</span></strong> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask-address</span></i> | <i><span class="varname">mask-length</span></i> } <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> [ { <strong><span>reduce</span></strong> <i><span class="varname">value-reduced</span></i> | <strong><span>increase</span></strong> <i><span class="varname">increased-value</span></i> } ]</p>

<p><b><span class="cmdname">vrrp vrid </span></b><i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>ip</span></strong> <strong><span>route</span></strong> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask-address</span></i> | <i><span class="varname">mask-length</span></i> } [ { <strong><span>reduce</span></strong> <i><span class="varname">value-reduced</span></i> | <strong><span>increase</span></strong> <i><span class="varname">increased-value</span></i> } ]</p>

<p><b><span class="cmdname">undo vrrp vrid </span></b><i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>ip</span></strong> <strong><span>route</span></strong> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask-address</span></i> | <i><span class="varname">mask-length</span></i> } <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></p>

<p><b><span class="cmdname">undo vrrp vrid </span></b><i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>ip</span></strong> <strong><span>route</span></strong> [ <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask-address</span></i> | <i><span class="varname">mask-length</span></i> } ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907607424__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">virtual-router-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the ID of a VRRP group.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ip-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the destination IP address of a route to be tracked.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">mask-address</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the destination IP address mask of a route to be tracked.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is in dotted decimal notation.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">mask-length</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the length of the destination IP address mask of a route to be tracked.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 32.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a VPN instance.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 31 case-sensitive characters, spaces not supported. In addition, the VPN instance name must not be _public_. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>reduce</span></strong> <i><span class="varname">value-reduced</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates that the master device reduces its priority if the tracked route is withdrawn or becomes inactive.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255. The default value is 10.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>increase</span></strong> <i><span class="varname">increased-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the value by which the master device's priority increases if the tracked route is withdrawn or becomes inactive.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 255. The default value is 10.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907607424__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100GE interface view,</span><span>10GE interface view,</span><span>200GE interface view,</span><span>25GE interface view,</span><span>400GE interface view,</span><span>50GE interface view,</span><span>Eth-Trunk interface view,</span><span>VLANIF interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907607424__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907607424__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>To improve device reliability, two user gateways working in master/backup mode are connected to a network, and VRRP is enabled on these gateways to determine their master/backup status. If a VRRP group has been configured and an uplink route to a network becomes unreachable, access-side users still use the VRRP group to forward traffic along the uplink route, which causes user traffic loss.<p></p>
<span>Association between a VRRP group and a route can prevent</span> user traffic loss. A VRRP group can be configured to track the uplink route to a network. If the route is withdrawn or becomes inactive, the route management (RM) module notifies the VRRP group of the change. After receiving the notification, the VRRP group changes its master device's VRRP priority and performs a master/backup switchover.</p>
<p><strong>Prerequisites</strong></p>
<p>A VRRP group has been configured using the <b><span class="cmdname">vrrp vrid</span></b> command.</p>
<p><strong>Precautions</strong></p>
<p>When running the vrrp vrid track ip route command, note the following aspects:</p>

<ul><li>The route specified using the ip-address { mask-address | mask-length } parameter must be the same as a route in the routing table of a VRRP device. Otherwise, the VRRP group considers the route unreachable.</li><li>The vrrp vrid virtual-router-id1 track admin-vrrp interface interface-type interface-number vrid virtual-router-id2 [ unflowdown ] command is run in an interface view to bind a VRRP group to an mVRRP group. Then, the VRRP group is a service VRRP group. Service VRRP groups do not support route monitoring.</li><li>If a VRRP device is an IP address owner, the association between a VRRP group and a specified route does not take effect.</li></ul>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907607424__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure VRRP group 1 to track a route with an IP address of 10.2.1.0/24, and enable the master device's VRRP priority to decrease by 20 if the tracked route is withdrawn or becomes inactive.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>vrrp vrid 1 virtual-ip 10.1.1.1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>vrrp vrid 1 track ip route 10.2.1.0 24 reduce 20</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_VRRP_Configuration_Commands_title.html">VRRP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/TRACKIF(VRRPOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/LINKBFDDOWNNUMBER(VRRPOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>