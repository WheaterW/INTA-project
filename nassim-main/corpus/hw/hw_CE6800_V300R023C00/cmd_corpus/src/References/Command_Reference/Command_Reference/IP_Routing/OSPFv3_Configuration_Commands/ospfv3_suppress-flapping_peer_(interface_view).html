
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ospfv3 suppress-flapping peer (interface view)">
<meta name="DC.subject" content="ospfv3 suppress-flapping peer (interface view)">
<meta name="keywords" content="ospfv3 suppress-flapping peer (interface view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/dc_OSPFv3_Configuration_Command_title.html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPFV3-SUPPRESS-FLAPPING-INTERFACE-DISABLE(OSPFCOMMOM).html">
<meta name="DC.Relation" scheme="URI" content="../v3r23c00/OSPFV3-DEAD-INTERVAL(OSPFCOMMOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation">
<meta name="DC.Publisher" content="20230413">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Audience.Job" content="Reference">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="featuretype" content="IP Routing">
<meta name="DC.Creator" content="SUBSYS_ID_OSPFCOMMOM">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001907763436">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>ospfv3 suppress-flapping peer (interface view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001907763436"></a><a name="EN-US_CLIREF_0000001907763436"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">ospfv3 suppress-flapping peer (interface view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001907763436__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">ospfv3 suppress-flapping peer</span></b> command configures detection parameters for OSPFv3 neighbor relationship flapping suppression.</p>
<p>The <b><span class="cmdname">undo ospfv3 suppress-flapping peer</span></b> command restores the default detection parameters.</p>
<p>The <b><span class="cmdname">ospfv3 suppress-flapping peer disable</span></b> command disables OSPFv3 neighbor relationship flapping suppression from an interface.</p>
<p>The <b><span class="cmdname">undo ospfv3 suppress-flapping peer disable</span></b> command enables OSPFv3 neighbor relationship flapping suppression on an interface.</p>
<p>The <b><span class="cmdname">ospfv3 suppress-flapping peer hold-down</span></b> command configures the Hold-down mode and sets duration for this mode.</p>
<p>The <b><span class="cmdname">undo ospfv3 suppress-flapping peer hold-down</span></b> command cancels the Hold-down mode.</p>
<p>The <b><span class="cmdname">ospfv3 suppress-flapping peer hold-max-cost disable</span></b> command disables the Hold-max-cost mode.</p>
<p>The <b><span class="cmdname">undo ospfv3 suppress-flapping peer hold-max-cost disable</span></b> command enables the Hold-max-cost mode.</p>
</p>
<p><p>
By default, the detection interval of OSPFv3 neighbor flapping suppression is 60s, the suppression threshold is 10, and the interval for exiting from suppression is 120s.
</p>
<p>
By default, OSPFv3 neighbor flapping suppression is enabled on all interfaces.
</p>
<p>
By default, the Hold-down mode is disabled and the Hold-max-cost mode is enabled.
</p>
</p>
<div class="note"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.</p>
</div></div>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001907763436__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">ospfv3 suppress-flapping peer disable </span></b>[ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ]</p>

<p><b><span class="cmdname">ospfv3 suppress-flapping peer hold-down </span></b><i><span class="varname">interval</span></i> [ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ]</p>

<p><b><span class="cmdname">ospfv3 suppress-flapping peer hold-max-cost disable </span></b>[ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ]</p>

<p><b><span class="cmdname">ospfv3 suppress-flapping peer </span></b>{ <strong><span>detecting-interval</span></strong> <i><span class="varname">detecting-interval</span></i> | <strong><span>threshold</span></strong> <i><span class="varname">threshold</span></i> | <strong><span>resume-interval</span></strong> <i><span class="varname">resume-interval</span></i> } <sup>*</sup> [ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ]</p>

<p><b><span class="cmdname">undo ospfv3 suppress-flapping peer disable </span></b>[ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ]</p>

<p><b><span class="cmdname">undo ospfv3 suppress-flapping peer hold-down </span></b>[ <i><span class="varname">interval</span></i> ] [ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ]</p>

<p><b><span class="cmdname">undo ospfv3 suppress-flapping peer hold-max-cost disable </span></b>[ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ]</p>

<p><b><span class="cmdname">undo ospfv3 suppress-flapping peer </span></b>{ <strong><span>detecting-interval</span></strong> <i><span class="varname">detecting-interval</span></i> | <strong><span>threshold</span></strong> <i><span class="varname">threshold</span></i> | <strong><span>resume-interval</span></strong> <i><span class="varname">resume-interval</span></i> } <sup>*</sup> [ <strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001907763436__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>instance</span></strong> <i><span class="varname">instance-id</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the interface instance ID.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 0 to 255.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>hold-down</span></strong> <i><span class="varname">interval</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the duration of the Hold-down mode.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 86400, in seconds.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>detecting-interval</span></strong> <i><span class="varname">detecting-interval</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the detection interval of OSPFv3 neighbor relationship flapping suppression.</p>
<p>Each OSPF interface on which OSPFv3 neighbor relationship flapping suppression is enabled starts a flapping counter. If the interval between two successive neighbor status changes from Full to a non-Full state is shorter than detecting-interval, a valid flapping_event is recorded, and the flapping_count increases by 1.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 300, in seconds. The default value is 60s.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>threshold</span></strong> <i><span class="varname">threshold</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the threshold of OSPF neighbor relationship flapping suppression.</p>
<p>When the flapping_count reaches or exceeds threshold, flapping suppression takes effect.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 1000. The default value is 10.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>resume-interval</span></strong> <i><span class="varname">resume-interval</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<div class="p"><ul><li>Specifies a flapping detection clearance threshold for OSPFv3 neighbor flapping suppression.</li></ul>
<p>If the interval between two successive neighbor status changes from Full to a non-Full state is greater than resume-interval, the flapping_count is cleared.</p>
<ul><li>If OSPFv3 neighbor flapping suppression works in Hold-max-cost mode, resume-interval specifies the duration of the Hold-max-cost mode.</li></ul>
<p>The value of resume-interval must be greater than that of detecting-interval.</p>
</div>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 2 to 1000, in seconds.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001907763436__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100GE interface view,</span><span>10GE interface view,</span><span>200GE interface view,</span><span>25GE sub-interface view,</span><span>25GE interface view,</span><span>400GE interface view,</span><span>50GE sub-interface view,</span><span>50GE interface view,</span><span>Eth-Trunk interface view,</span><span>VBDIF interface view,</span><span>VLANIF interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001907763436__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>


<div class="clidesc"><a name="EN-US_CLIREF_0000001907763436__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>To configure detection parameters for OSPFv3 neighbor relationship flapping suppression on an interface, run the ospfv3 suppress-flapping peer command. However, keeping the default configurations is recommended.<p></p>
<span>By default</span>, OSPFv3 neighbor relationship flapping suppression is enabled on all interfaces in the same OSPFv3 process. To disable the function from one of the interfaces, run the <b><span class="cmdname">ospfv3 suppress-flapping peer disable</span></b> command.<p></p>
<span>Flapping suppression works in either Hold-down or</span> Hold-max-cost mode.</p>

<ul><li>Hold-down mode: In the case of frequent flooding and topology changes during neighbor relationship establishment, interfaces prevent neighbor relationship reestablishment during Hold-down suppression, which minimizes LSDB synchronization attempts and packet exchanges.</li><li>Hold-max-cost mode: If the traffic forwarding path changes frequently, interfaces use 65535 as the cost of the flapping link during Hold-max-cost suppression, which prevents traffic from passing through the flapping link.<p></p>
<span>Flapping suppression can also work first in Hold-down</span> mode and then in Hold-max-cost mode.<p></p>
<span>By default</span>, the Hold-max-cost mode takes effect. To configure the Hold-down mode and set duration for this mode, run the ospfv3 suppress-flapping peer hold-down command.</li></ul>
<p><strong>Prerequisites</strong></p>
<p><p>OSPFv3 neighbor flapping suppression must have been enabled globally before you set detection parameters for OSPFv3 neighbor flapping suppression. By default, OSPFv3 neighbor flapping suppression is enabled. If OSPFv3 neighbor flapping suppression is disabled, run the <b><span class="cmdname">undo suppress-flapping peer disable</span></b> command to enable it globally.<p></p>
<span>OSPFv3 neighbor flapping suppression must have been</span> enabled globally before you run the <b><span class="cmdname">undo ospfv3 suppress-flapping peer disable</span></b> command to enable OSPFv3 neighbor flapping suppression on a specified interface. By default, OSPFv3 neighbor flapping suppression is enabled. If OSPFv3 neighbor flapping suppression is disabled, you can run the <b><span class="cmdname">undo suppress-flapping peer disable</span></b> command to enable it globally.<p></p>
<span>OSPFv3 neighbor flapping suppression must have been</span> enabled globally before you configure the Hold-down peer flapping mode and set duration for this mode. By default, OSPFv3 neighbor flapping suppression is enabled. If it is disabled, run the <b><span class="cmdname">undo suppress-flapping peer disable</span></b> command to enable it globally.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>The Hold-max-cost mode takes effect only unidirectionally. If a remote device does not support OSPFv3 neighbor relationship flapping suppression, bidirectional traffic between the local and remote devices may travel along different paths.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001907763436__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the Hold-down mode and set its duration to 200s on an interface.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospfv3 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospfv3-1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 1 area 0</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 suppress-flapping peer hold-down 200</strong>
</pre>
</div>

<div class="p"># Set the detection interval of OSPFv3 neighbor relationship flapping suppression to 5s, the suppression threshold to 40, and the interval for exiting from suppression to 20s on an interface.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospfv3 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospfv3-1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 1 area 0</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 suppress-flapping peer detecting-interval 5 threshold 40 resume-interval 20</strong>
</pre>
</div>

<div class="p"># Disable OSPFv3 neighbor relationship flapping suppression from an interface.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospfv3 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospfv3-1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 1 area 0</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 suppress-flapping peer disable</strong>
</pre>
</div>

<div class="p"># Disable the Hold-max-cost mode on an interface.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ospfv3 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ospfv3-1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>100GE</span> <span>1/0/1</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>undo portswitch</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ipv6 enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 1 area 0</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>100GE</span><span>1/0/1</span>] <strong>ospfv3 suppress-flapping peer hold-max-cost disable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../v3r23c00/dc_OSPFv3_Configuration_Command_title.html">OSPFv3 Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../v3r23c00/OSPFV3-SUPPRESS-FLAPPING-INTERFACE-DISABLE(OSPFCOMMOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../v3r23c00/OSPFV3-DEAD-INTERVAL(OSPFCOMMOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>