display configuration changes
=============================

display configuration changes

Function
--------



The **display configuration changes** command displays the difference between a configuration file and the current running configuration file on the device.




Format
------

**display configuration commit changes** [ **at** *commit-id* | **since** *commit-id* | **last** *number-of-commits* ]

**display configuration changes** [ **running** **file** *file-name* | **file** *file-name* **running** ]

**display configuration changes** { **running** **label** *label* | **label** *label* **running** }

**display configuration commit changes** *latest-number-of-commits*


Parameters
----------

| Parameter | Description | Value |
| --- | --- | --- |
| **at** *commit-id* | Displays configuration changes at a configuration rollback point. | The id is a string of 1 to 20 characters and generated by the system automatically. |
| **since** *commit-id* | Displays configuration changes since the specified configuration rollback point was generated. | The id is a string of 1 to 20 characters and generated by the system automatically. |
| **last** *number-of-commits* | Specifies the number of the latest configuration rollback points. Configuration changes in these rollback points are displayed. | The value is an integer ranging from 1 to 80. |
| **running** | Displays the running configuration, that is, the configuration data in the running/ database. | - |
| **file** *file-name* | Specifies a configuration file. | The name is a string of 5 to 64 characters in the format of .zip, .cfg, or .dat. |
| **label** *label* | Specifies a label. | The value is a string of 1 to 256 characters. |
| *latest-number-of-commits* | The number of latest commit changes. | The value is an integer ranging from 1 to 80. |



Views
-----

All views


Default Level
-------------

3: Management level


Usage Guidelines
----------------

**Usage Scenario**

* If a misoperation is performed or some configurations fail, the system must roll back to a specified historical configuration. In this case, you can run the **display configuration commit changes** command to check configuration changes at configuration rollback points.
* To view the difference between the current running configuration file and a specified configuration file, run the **display configuration changes running file file-name** command.
* To view the difference between a specified configuration file and the current running configuration file, run the **display configuration changes file file-name running** command.
* The **display configuration changes running label label** command displays the difference between the current configuration and the configuration of a specified user label.
* The **display configuration changes label label running** command displays the difference between the configuration of a specified user label and the current configuration.
* This command can only compare the current running configuration file with a configuration file. When you run this command, the first specified configuration file is called source configuration, and the later specified configuration file is called target configuration. If the target configuration is different from the source configuration, the difference is displayed based on the following rules:
* A command that exists in the target configuration rather than the source configuration is prefixed with "+".
* A command that exists in the source configuration rather than the target configuration is prefixed with "-".
* If a command is modified in the target configuration, the original command is prefixed with "-" and the new command is prefixed with "+".

* The **display configuration commit changes latest-number-of-commits** command displays information about the configuration changes of each of the recent configuration rollback points. Assume that the configuration rollback points are 1000000001, 1000000002, and 1000000003. The **display configuration commit changes 3** command displays the configuration changes of each of these configuration rollback points 1000000001, 1000000002, and 1000000003.
* The **display configuration commit changes last number-of-commits** command displays the final differences between the recent configuration rollback points. Assume that the configuration rollback points are 1000000001, 1000000002, and 1000000003. The **display configuration commit changes last 3** command displays the configuration changes of the configuration rollback points from 1000000001 to 1000000003.

**Precautions**

When a configuration difference comparison command is run, if repeated commands exist in the same view, the current command fails to be executed.The specified configuration file specified by file-name must exist on the device.


Example
-------

![](../public_sys-resources/note_3.0-en-us.png) 

The actual command output varies according to the device. The command output here is only an example.


# Display configuration changes since configuration rollback point 1000000067 was generated.
```
<HUAWEI> display configuration commit changes since 1000000067
Building configuration...
  #
- snmp-agent
  #
- snmp-agent local-engineid 800007DB0338AB7F111100
  #
- snmp-agent community write public mib-view abc
  #
- snmp-agent community write private mib-view abc
  #

```

# Display configuration changes at all the available configuration rollback points.
```
<HUAWEI> display configuration commit changes
Building configuration
Commit changes of commitId 1000000114 2015-06-18 03:04:59
  #
- sysname HUAWEI
  #
+ sysname test
  #

```

# Display configurations (with the specified tag) that are different between the latest two configuration rollback points.
```
<HUAWEI> display configuration commit changes last 2 with-tag
Building configuration
  #
+ <cmd-script:vlan batch></cmd>vlan batch 1 to 1000
  <view-entry></view>aaa
+  domain abc
  #

```

# Display configuration changes at the latest two configuration rollback points.
```
<HUAWEI> display configuration commit changes last 2
Building configuration...
  #
- info-center logfile size 16
  #
+ info-center logfile size 32
  #

```

# Display the difference between the current running configuration file and the configuration file a.cfg.
```
<HUAWEI> display configuration changes running file a.cfg
Building configuration
Warning: The specified configuration file is not the same as the current configuration. There are several differences as follow:
  #
- sysname HUAWEI

```

# Display the difference between the current running configuration file and specified commit label.
```
<HUAWEI> display configuration changes running label a
2021-03-05 11:37:53.415
Building configuration
.
  #
- sysname HUAWEI
  #
+ sysname HUAWEI-A
  #

```

# Display configuration changes at the latest two configuration rollback points.
```
<HUAWEI> display configuration commit changes 2
Building configuration
Commit changes of commitId 1000000004 2021-03-29 09:03:52
  #
+ acl number 3000
  #

Commit changes of commitId 1000000003 2021-03-29 09:03:43
  #
+ acl number 2000
  #

```

# Display the differences between the configuration file for next startup and the running file.
```
<HUAWEI> display configuration changes
Building configuration
  #
  aaa
+  local-user huawei password cipher @%@%ym<*-4`Hu=kF;b-%AiAF&C:1@%@%
+  local-user huawei service-type ftp

```

**Table 1** Description of the **display configuration changes** command output
| Item | Description |
| --- | --- |
| Building configuration | Building configuration. |
| + | Added configuration information.  For the modified configuration, two records are displayed. One record is marked with "-", indicating that the old configuration is deleted. The other record is marked with "+", indicating that the new configuration is created. |
| - | Deleted configuration information.  For the modified configuration, two records are displayed. One record is marked with "-", indicating that the old configuration is deleted. The other record is marked with "+", indicating that the new configuration is created. |
| Commit changes of commitId | Label of the configuration rollback point, which uniquely identifies the configuration rollback point. |