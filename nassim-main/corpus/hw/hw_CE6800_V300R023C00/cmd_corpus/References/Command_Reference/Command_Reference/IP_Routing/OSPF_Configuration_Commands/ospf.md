ospf
====

ospf

Function
--------



The **ospf** command creates and runs an OSPF process.

The **undo ospf** command terminates an OSPF process.



By default, OSPF is disabled, that is, no OSPF process runs.


Format
------

**ospf** *process-id* [ **router-id** *route-id* | **vpn-instance** *vpname* ] \*

**ospf** [ **router-id** *route-id* | **vpn-instance** *vpname* ] \*

**undo ospf** *process-id*


Parameters
----------

| Parameter | Description | Value |
| --- | --- | --- |
| *process-id* | Specifies the ID of an OSPF process. | The value is an integer ranging from 1 to 4294967295. The default value is 1. |
| **router-id** *route-id* | Specifies a router ID. | The value is in dotted decimal notation. |
| **vpn-instance** *vpname* | Specifies the name of a VPN instance. | The value is a string of 1 to 31 case-sensitive characters. |



Views
-----

System view


Default Level
-------------

2: Configuration level


Usage Guidelines
----------------

**Usage Scenario**

Creating an OSPF process is a prerequisite for configuring OSPF parameters.OSPF multi-process allows multiple OSPF processes to independently run on the same device. Route exchange between different OSPF processes is similar to that between different routing protocols.Router IDs can be manually configured. If no router ID is specified using the command, OSPF uses the system ID or an interface IP address as the router ID.In any of the following situations, router ID re-selection is performed:

* This command is run to re-configure an OSPF router ID.
* The system router ID is re-configured, and the OSPF process is restarted.
* The system ID or IP address of the original router ID is deleted, and the OSPF process is restarted.
* If the OSPF router ID conflict self-healing function is enabled and an OSPF router ID conflict occurs on the network, a new OSPF router ID is selected, and the OSPF process is automatically restarted.

If the device is restarted in DB mode, the router ID after the restart is the data saved in the DB table before the restart. If the device is restarted in CFG mode and the **router id** command is not configured on the device, the router ID after the restart is the IP address of the interface whose configuration is restored first.Note:To improve network stability, you are advised to manually configure a router ID.

**Configuration Impact**

After an OSPF process is disabled using **undo ospf** command, the receive end still maintains the LSAs generated by this OSPF process. These invalid LSAs occupy system memory and are not deleted until the LSA age field (aging time) reaches 3600 seconds.

**Precautions**

An interface on a device belongs to only one OSPF process.If a VPN instance is specified, the OSPF process specified in this command belongs to this VPN instance. If no VPN instance is specified, the OSPF process specified in this command belongs to the global VPN instance. vpn-instance-name cannot be changed after being specified.Setting a unique router ID for each process on a device is recommended. If an incorrect operation or planning causes a router ID conflict between processes, route flapping occurs.Running the **undo ospf process-id** command will also delete all configurations from the OSPF view. Therefore, exercise caution when running this command.


Example
-------

# Run an OSPF process.
```
<HUAWEI> system-view
[~HUAWEI] ip vpn-instance huawei
[*HUAWEI-vpn-instance-huawei] ipv4-family
[*HUAWEI-vpn-instance-huawei-af-ipv4] quit
[*HUAWEI-vpn-instance-huawei] quit
[*HUAWEI] ospf 100 router-id 10.10.10.1 vpn-instance huawei

```