stub-router (OSPFv3 view)
=========================

stub-router (OSPFv3 view)

Function
--------



The **stub-router** command configures a stub device.

The **undo stub-router** command restores the default configuration.



By default, a device is a non-stub device.

![](../public_sys-resources/note_3.0-en-us.png) 

This command is supported only on the CE6863H, CE6863H-K, CE6860-SAN, CE6866K, CE6866, CE6860-HAM, CE6855-48XS8CQ, CE6885-SAN, CE8850-SAN, CE8855, CE8851-32CQ4BQ, CE8851K, CE8851-32CQ8DQ-P, CE8850-HAM, CE6881H, CE6881H-K, CE6820H, CE6820H-K, CE6820S, CE6885, CE6885-T, CE6885-LL (standard forwarding mode) and CE6863E-48S8CQ.



Format
------

**stub-router** [ [ **on-startup** [ *interval* ] ] | [ **intra-area-prefix-lsa** ] | [ **external-lsa** [ *externallsa-metric* ] ] | [ **inter-area-prefix-lsa** [ *interareaprefixlsa\_metric* ] ] ] \*

**undo stub-router**


Parameters
----------

| Parameter | Description | Value |
| --- | --- | --- |
| **on-startup** *interval* | Specifies an interval for the device to remain as a stub device after being restarted. | The value is an integer ranging from 5 to 65535, in seconds. The default value is 500 seconds. |
| **intra-area-prefix-lsa** | Indicates that intra-area-prefix-LSAs with the cost 65535 are advertised. | - |
| **external-lsa** *externallsa-metric* | Advertises external-LSAs with the configured or default maximum cost. | The value is an integer ranging from 1 to 16777215. The default value is 16711680. |
| **inter-area-prefix-lsa** *interareaprefixlsa\_metric* | Advertises inter-area-prefix-LSAs with the configured or default maximum cost. | The value is an integer ranging from 1 to 16777215. The default value is 16711680. |



Views
-----

OSPFv3 view


Default Level
-------------

2: Configuration level


Usage Guidelines
----------------

After the **stub-router** command is run on a device, the device instructs other OSPFv3 devices not to use the stub device to forward data by increasing the metric (65535) of the links in the device-LSA generated by the device. However, because the metric is not infinite, other devices can still have a route to the local stub device. In the device-LSA generated by a stub device, when the stub device functions as a transit node, the metric of all links is set to 65535.By default, the external-lsa, inter-area-prefix-LSA metric of the intra-area-prefix-LSA generated by the local device (for example, the route to the loopback interface of the local device) remains unchanged.

* To change the metric value of the local intra-area-prefix-LSA, you need to add the intra-area-prefix-LSA parameter.
* To change the metric of the local external LSA, add the external-lsa parameter.
* To change the metric value of the local inter-area-prefix-LSA, you need to add the inter-area-prefix-lsa parameter.

Example
-------

# Configure a stub device to advertise external-LSAs and inter-area-prefix-LSAs with cost 16777214.
```
<HUAWEI> system-view
[~HUAWEI] ospfv3 1
[*HUAWEI-ospfv3-1] stub-router on-startup 65535 intra-area-prefix-lsa external-lsa 16777214 inter-area-prefix-lsa 16777214

```

# Configure the stub router.
```
<HUAWEI> system-view
[~HUAWEI] ospfv3 1
[*HUAWEI-ospfv3-1] stub-router

```