save
====

save

Function
--------



The **save** command saves all configurations to a storage device.

The **save shareable-configuration** command saves the configuration to a specified file and generates a root key based on the password entered by the user.




Format
------

**save** [ *configuration-file* ]

**save shareable-configuration** *configuration-file* [ **password** ]


Parameters
----------

| Parameter | Description | Value |
| --- | --- | --- |
| *configuration-file* | Specifies the name of a configuration file. | The value is a string of 5 to 64 characters in the format of .zip, .cfg, or .dat. |
| **password** | Password for saving a configuration file. | - |



Views
-----

User view


Default Level
-------------

2: Configuration level


Usage Guidelines
----------------

**Usage Scenario**

* When a group of configurations are complete and the desired functions are achieved, all the configurations should be saved to the storage device.
* If you run the save [ <configuration-file> ] command without specifying the configuration-file parameter, all configurations are saved to the configuration file for the next startup by default. If no next-startup configuration file exists, the system prompts you to determine whether to save configurations to the vrpcfg.zip file. You can save configurations to the file or specify another file for saving the configurations. Then the specified file is configured as the next-startup configuration file. You can run the **display startup** command to view the name of the configuration file for next startup.
* The save [ <configuration-file> ] command backs up all configurations to the specified file on the storage device. This command does not affect the current startup configuration file. If the storage path and name of the configuration file specified using configuration-file are the same as those of the next-startup configuration file, the save configuration-file command functions the same as the **save** command.
* If you run the save [ <configuration-file> ] command without specifying the optional parameter configuration-file when saving the configuration file for the first time, the system asks you whether to save the file as vrpcfg.zip. The vrpcfg.zip file is the default configuration file, and it is empty initially.
* If a configuration-level user runs the **save** command, the configuration file can be saved only to the root directory.
* The **save shareable-configuration** command saves configurations to a specified file, generates a root key based on the entered password, and saves the root key to the file.
* The configuration-file parameter must be specified when you run the **save shareable-configuration** command. If the system has the next startup file, the specified file name cannot be the same as the next startup file name.
* If the password parameter is not specified, the preset password (default value) generated by the device is used. The preset password is generated based on the system master key of the device and cannot be viewed.

**Configuration Impact**

When you run the **save** command several times, the latest configuration overrides the previous configuration. If the file of the same name already exists, the contents of the original file are changed.Running this command causes a temporary high CPU usage, but services are not affected.

**Precautions**

* A configuration file can contain only configuration commands, view switching commands, and # symbols (used to switch to the system view). If you load other types of commands, such as display commands used for query, reset/save/ping commands used for maintenance, quit, return, and upgrade-compatible commands, the device reports an error and continues the loading of follow-up commands.
* Repeated commands cannot coexist in the same view.
* Command lines must be indented correctly. Specifically, a command line in the current view must be indented by one character compared with a command line in the previous view.
* If the pound sign (#) is left-aligned, the system view is displayed. If the pound sign (#) is indented, it is used only to isolate command blocks; in this case, the pound sign (#) must be aligned with the first command in the following command block. If the pound sign (#) is incorrectly used, configurations may be lost, or commands may be run in an unexpected view.
* The configuration for entering a command view must be present. Otherwise, no commands can be executed in the command view.
* The command execution sequence and dependency must be correct.
* Interactive commands in the configuration file only support automatic interaction in Y/N mode, the default is Y.
* The extension of the configuration file name must be .zip, .cfg or .dat. The system configuration file must be saved in the root directory of the storage device.
* A .cfg file is a text file. You can directly view the content of a .cfg file. After a .cfg file is specified as the configuration file, the system restores the commands in the file one by one when startup.
* A .zip file is the compression of a .cfg file, occupying less space. After a .zip file is specified as the configuration file, the system decompresses the file into a .cfg file, and then restores the commands in the file one by one when startup.
* A .dat file is a binary file. If the startup software version and the .dat file version are the same, the system restores all configurations in the .dat file in batches when the device starts. This speeds up the system startup.
* After the weak password dictionary maintenance function is enabled, the passwords (which can be queried using the **display security weak-password-dictionary** command) defined in the weak password dictionary are unavailable for the command save shareable-configuration.


Example
-------

# Save all current configurations and key information to the configuration file.
```
<HUAWEI> save shareable-configuration test.cfg
Warning: Are you sure to save the configuration to flash:/test.cfg? [Y/N]:y
Info: Save the configuration successfully.

```

# Save all configurations to the next startup configuration file.
```
<HUAWEI> save
Warning: all configuration will be written to the device.
Are you sure to continue?[Y/N]y
Now saving all configuration to the slot 1
Info: Save the configuration successfully.

```