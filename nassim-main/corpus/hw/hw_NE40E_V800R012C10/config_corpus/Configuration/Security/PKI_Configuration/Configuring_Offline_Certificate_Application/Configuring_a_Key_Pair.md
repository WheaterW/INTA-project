Configuring a Key Pair
======================

Before applying for and using a certificate, configure a key pair.

#### Context

Generating a key pair is important for applying for a certificate. A key pair consists of a private key and a public key. The public key is sent by the PKI entity to the CA, and the peer uses this key to encrypt cleartext. In contrast, the private key is retained by the PKI entity, which uses it to digitally sign and decrypt the peer's ciphertext. The private key is encrypted on the device. If the private key is disclosed, the user must delete the old key pair, create a new key pair, and reapply for a certificate.

You can configure a key pair using either of the following methods:

* Creating a key pair: You can directly create a key pair on the device without importing it to the device memory.
* Importing a key pair: To use the key pair generated by another PKI entity, upload the key pair to the device through FTP or SFTP and then import it to the device memory. If you do not import it, the key pair does not take effect on the device.

![](../../../../public_sys-resources/note_3.0-en-us.png) 

* If a local existing key pair has been named, it will be overridden when a new key pair is created. If a local existing key pair has been named, delete it before recreating or renaming it.
* After a key pair is deleted or replaced, the existing certificate becomes invalid. To ensure the consistency between a new key pair and the existing certificate, you must apply for a new certificate.
* SFTP is recommended because it is more secure than FTP.


#### Procedure

1. Run [**system-view**](cmdqueryname=system-view)
   
   
   
   The system view is displayed.
2. Configure an RSA/SM2 key pair as required.
   
   
   * Create an RSA/SM2 key pair.
     + Run the [**rsa pki local-key-pair**](cmdqueryname=rsa+pki+local-key-pair+create) [ *keypair-name* ] **create** command to create an RSA key pair.
     + Run the [**sm2 pki local-key-pair**](cmdqueryname=sm2+pki+local-key-pair+create) *keypair-name* **create** command to create an SM2 key pair.
   * Import an RSA/SM2 key pair.
     + Run the [**pki import rsa-key-pair**](cmdqueryname=pki+import+rsa-key-pair+der+pem+password) *keypair-name* { **der** *key-filename* | **pem** *key-filename* **password** *password-val* } command to import an RSA key pair.
     + Run the [**pki import sm2-key-pair**](cmdqueryname=pki+import+sm2-key-pair+der+pem+password) *keypair-name* { **der** *key-filename* | **pem** *key-filename* **password** *password-val* } command to import an SM2 key pair.