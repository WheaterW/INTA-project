Configuring IP FPM Hop-by-Hop Performance Measurement
=====================================================

IP Flow Performance Measurement (FPM) hop-by-hop performance measurement helps locate faulty nodes when packet loss or delay occurs.

#### Usage Scenario

IP FPM hop-by-hop performance measurement helps locate faults hop by hop from the source node that initiates traffic. Hop-by-hop performance measurement applies only to unidirectional target flows:

* When a target flow is unidirectional, you can directly implement hop-by-hop performance measurement for the flow.
* When a target flow is bidirectional, two situations are available:
  + If the target flow is symmetrical, you can implement hop-by-hop performance measurement for the forward or reverse flow, and the measurement is the same either way.
  + If the target flow is asymmetrical, you must implement hop-by-hop performance measurement for both the forward and reverse flows to obtain their respective measurement results.

The packet loss and delay data obtained through IP FPM hop-by-hop performance measurement serves as a reliable reference for network O&M. Network administrators can diagnose network faults based on the data and adjust user services in a timely manner to ensure network reliability and improve user experience.


#### Pre-configuration Tasks

Before configuring IP FPM hop-by-hop performance statistics collection, complete the following tasks:

* Configure a dynamic routing protocol or static routes so that devices are reachable at the network layer.
* Configure NTP or 1588v2 to synchronize clocks of all devices on the network.
  
  ![](../../../../public_sys-resources/note_3.0-en-us.png) 
  
  Compared with NTP, 1588v2 implements inter-device clock synchronization with higher precision. To obtain accurate performance statistics, it is recommended that 1588v2 be deployed to implement clock synchronization between all devices with clocks when you use IP FPM for performance measurement, especially for one-way delay measurement.


[Configuring an MCP](../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipfpm_cfg_0017.html)

A Measurement Control Point (MCP) collects statistics reported by Data Collecting Points (DCPs), summarizes and calculates the statistics, and reports measurement results to user terminals or the network management system (NMS).

[Configuring a DCP](../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipfpm_cfg_0018.html)

A Data Collecting Point (DCP) manages and controls Target Logical Ports (TLPs), collects statistics generated by TLPs, and reports the statistics to a Measurement Control Point (MCP).

[Checking the Configurations](../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipfpm_cfg_0019.html)

After configuring the MCP, DCPs, and TLPs, check the IP FPM hop-by-hop performance statistics collection function.