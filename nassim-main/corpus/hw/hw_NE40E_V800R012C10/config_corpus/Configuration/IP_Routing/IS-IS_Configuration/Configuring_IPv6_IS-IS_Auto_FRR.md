Configuring IPv6 IS-IS Auto FRR
===============================

IPv6 IS-IS Auto FRR can rapidly switch traffic from a faulty link to a backup link, ensuring that the traffic interruption time is less than 50 ms and improving IS-IS network reliability.

#### Usage Scenario

As networks develop, services such as voice over IP (VoIP) and online video services have higher requirements for real-time transmission. On a live network, to switch traffic to a new link after a failure occurs, IS-IS must complete a series of operations involving failure detection, LSP update, LSP flooding, route calculation, and FIB entry delivery. This is a lengthy process, in which the traffic interruption time is much longer than 50 ms. As a result, the requirements for real-time transmission cannot be met.

With IPv6 IS-IS Auto FRR, devices can rapidly switch traffic from a faulty link to an alternate one without interrupting the traffic, which significantly improves IS-IS network reliability.

IPv6 IS-IS Auto FRR is applicable to the services that are sensitive to packet delay and packet loss.

![](../../../../public_sys-resources/note_3.0-en-us.png) 

IPv6 IS-IS Auto FRR can only take effect in the standard topology.



#### Pre-configuration Tasks

Before configuring IPv6 IS-IS Auto FRR, complete the following tasks:

* Configure the link layer protocol on interfaces.
* Configure IP addresses for interfaces to ensure that neighboring devices are reachable at the network layer.
* [Configure basic IPv6 IS-IS functions](dc_vrp_isis_cfg_1023.html).
* [Configure a local LDP session](dc_vrp_ldp-p2p_cfg_0003.html) on the source node, the PQ node, and the nodes between them if remote LFA FRR is required.

#### Procedure

* Configure the LFA algorithm.
  1. Run [**system-view**](cmdqueryname=system-view)
     
     
     
     The system view is displayed.
  2. Run [**isis**](cmdqueryname=isis) [ *process-id* ]
     
     
     
     The IS-IS process is enabled, and the IS-IS view is displayed.
  3. Run [**ipv6 frr**](cmdqueryname=ipv6+frr)
     
     
     
     The IS-IS IPv6 FRR view is displayed.
  4. (Optional) Run [**ecmp disable**](cmdqueryname=ecmp+disable) { **level-1** | **level-2** }
     
     
     
     IPv6 IS-IS ECMP FRR is disabled.
     
     
     
     With ECMP FRR, the IGP pre-calculates backup paths for load balancing links based on the LSDBs on the entire network and stores the backup paths in the forwarding table. The backup paths are used for traffic protection in the case of link failures. If the network topology changes, ECMP FRR triggers calculation of new backup paths, which increases the system calculation pressure. In addition, the backup entries generated by the ECMP FRR function increase the memory usage of the system. In this case, you can run this command to disable the ECMP FRR function.
  5. Run [**loop-free-alternate**](cmdqueryname=loop-free-alternate) [ **level-1** | **level-2** | **level-1-2** ]
     
     
     
     IPv6 IS-IS Auto FRR is enabled to generate loop-free backup links.
     
     
     
     If no level is specified, IPv6 IS-IS Auto FRR is enabled for both Level-1 and Level-2.
  6. (Optional) Run [**frr-policy route**](cmdqueryname=frr-policy+route) **route-policy** *route-policy-name*
     
     
     
     A route-policy is configured to filter backup routes so that only the matched backup routes are added to the routing table.
  7. (Optional) Run [**tiebreaker**](cmdqueryname=tiebreaker) { **node-protecting** | **lowest-cost** | **non-ecmp** | **srlg-disjoint** | **hold-max-cost** } **preference** *preference* [ **level-1** | **level-2** | **level-1-2** ]
     
     
     
     The solution of selecting a backup path for IPv6 IS-IS Auto FRR is set.
  8. Run [**commit**](cmdqueryname=commit)
     
     
     
     The configuration is committed.
* Configure the remote LFA algorithm.
  1. Run [**system-view**](cmdqueryname=system-view)
     
     
     
     The system view is displayed.
  2. Run [**isis**](cmdqueryname=isis) [ *process-id* ]
     
     
     
     The IS-IS process is enabled, and the IS-IS view is displayed.
  3. Run [**frr**](cmdqueryname=frr)
     
     
     
     The IS-IS FRR view is displayed.
  4. Run [**remote-lfa**](cmdqueryname=remote-lfa) **tunnel** **ldp** [ **maximum-reachable-cost** *cost-value* ] [ **level-1** | **level-2** | **level-1-2** ]
     
     
     
     Remote LFA Auto FRR is enabled.
  5. Run [**quit**](cmdqueryname=quit)
     
     
     
     Return to the IS-IS view.
  6. Run [**ipv6 frr**](cmdqueryname=ipv6+frr)
     
     
     
     The IS-IS IPv6 FRR view is displayed.
  7. (Optional) Run [**ecmp disable**](cmdqueryname=ecmp+disable) { **level-1** | **level-2** }
     
     
     
     IPv6 IS-IS ECMP FRR is disabled.
     
     
     
     With ECMP FRR, an IGP pre-calculates backup paths for load balancing links based on the LSDBs on the entire network and saves the backup paths in the forwarding table for traffic protection in the case of a fault. If the network topology changes, ECMP FRR triggers calculation of new backup paths, which increases the system calculation pressure. In addition, the backup entries generated by the ECMP FRR function increase the memory usage of the system. In this case, you can run this command to disable ECMP FRR.
  8. (Optional) Run [**remote-lfa**](cmdqueryname=remote-lfa) **tunnel** **ldp over-ipv4** [ **level-1** | **level-2** | **level-1-2** ]
     
     
     
     Remote LFA Auto FRR is enabled.
     
     
     
     LFA FRR cannot be used to calculate backup links on large-scale networks, especially on ring networks. As a result, reliability requirements cannot be met. In this case, IPv6 IS-IS Remote LFA FRR can be implemented. To enable IPv6 IS-IS Remote LFA, run the [**remote-lfa**](cmdqueryname=remote-lfa) command. Remote LFA computes a PQ node based on the protection path and establishes a tunnel between the source and PQ node to provide backup next-hop protection. If the protection link fails, traffic is automatically switched to the tunnel backup path, improving network reliability.
  9. (Optional) Run [**tiebreaker**](cmdqueryname=tiebreaker) { **node-protecting** | **lowest-cost** | **non-ecmp** | **srlg-disjoint** } **preference** *preference* [ **level-1** | **level-2** | **level-1-2** ]
     
     
     
     A solution for selecting a backup path for IPv6 IS-IS auto FRR is set.
  10. Run [**commit**](cmdqueryname=commit)
      
      
      
      The configuration is committed.

#### Verifying the Configuration

After configuring IPv6 IS-IS Auto FRR, check the configurations.

* Run the [**display isis route**](cmdqueryname=display+isis+route) [ **level-1** | **level-2** ] [ *process-id* | **vpn-instance** *vpn-instance-name* ] **ipv6** [ *ipv6-address* [ *prefix-length* ] ] [ **verbose** ] command to check information about the primary and backup links after IPv6 IS-IS Auto FRR is enabled.
* Run the [**display isis**](cmdqueryname=display+isis) [ *process-id* ] **srlg** { *srlgGroupId* | **all** } command to check shared risk link group information.