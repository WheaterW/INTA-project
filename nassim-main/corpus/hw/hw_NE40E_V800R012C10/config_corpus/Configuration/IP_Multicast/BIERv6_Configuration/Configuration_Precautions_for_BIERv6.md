Configuration Precautions for BIERv6
====================================

Configuration Precautions for BIERv6

#### Feature Requirements

**Table 1** Feature requirements
| Feature Requirements | Series | Models |
| --- | --- | --- |
| In the extranet GTM4 scenario, if the source VRF is Rosen, extranet GTM4 requires a public network RP, and the route to the RP is a unicast extranet route. Rosen also requires a public network RP, and the route to the RP is a common unicast route. Therefore, two RPs with different ACLs need to be configured on the public network, they are used by the extranet GTM4 and Rosen public network respectively to avoid mutual impact. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The PSP function can be deployed only after the penultimate segment endpoint and ultimate segment endpoint are upgraded to versions that support this function. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| After penultimate hop popping (PHP) is enabled for PSP requests, BIERv6 flow statistics collection does not take effect. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When BIER load balancing is configured and the outbound interfaces contain Eth-Trunk interfaces, traffic may not be evenly load balanced on the Eth-Trunk interfaces.  Ensure that the number of BIER load balancing outbound interfaces is not a multiple of the number of Eth-Trunk member interfaces. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| If the route to the multicast source or RP carries the import RT attribute, only the import RT attribute can be used as the upstream neighbor of multicast entries. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| If the route to the multicast source or RP carries the import RT attribute, only the import RT attribute can be used as the upstream neighbor of multicast entries. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| MVPNv4 over BIERv6 applies only to physical interfaces and their sub-interfaces (including breakout interfaces), Eth-Trunk interfaces and their sub-interfaces, dot1q/QinQ VLAN tag termination sub-interfaces, and POS interfaces. If BIERv6 selects an unsupported interface as the outbound interface to a next hop, traffic cannot be forwarded. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In a scenario where multicast packets are transmitted through a BIERv6 tunnel, if the total length of a multicast VPN IPv4 packet and BIERv6 header is greater than the MTU of the outbound interface, the packet fails to be forwarded. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The SRv6 locator used by BIERv6 cannot be associated with Flex-Algo. When the SRv6 locator used by BIERv6 is associated with Flex-Algo, BIERv6 cannot generate a forwarding table, causing a forwarding failure. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Only a simple automatic traversal solution is supported. That is, if the next hop does not support BIER in an automatic traversal scenario, the BFER node is considered as an indirectly connected BFR neighbor, and the next hop of the IS-IS route to the BFER node is considered as the next hop of the indirectly connected BFR neighbor, routes of other protocols cannot be recursed. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| 1. The IP address of a statically configured BFR-neighbor must be the IP address of the END.BIER, and the route must be reachable.  2. The SD/BSL/SI of a statically configured BFR-neighbor must be the same as the locally configured SD/BSL/SI. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When the BIERv6 root and leaf nodes are deployed at different levels, the root and leaf nodes must be able to leak routes to each other. Currently, only 128-bit host routes can be leaked. When a device on the network learns a large number of routes, many resources are occupied. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Multicast services depend on unicast routes. When VPN unicast routes are recursed to a public IPv6 network for SRv6 forwarding, multicast MVPN supports only BIERv6 tunnels.  It is recommended that unicast routes be preferentially selected as supported routes. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In a GTMv4 over BIERv6 scenario, the same RT cannot be configured for the GTM instance on the source PE and other NG MVPN instances. Otherwise, an error occurs when the ILM table is delivered to the receiver PE. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In the GTMv6 over BIERv6 scenario, if the unicast route from the leaf to the source is an IGP route, traffic is forwarded through the PIM forwarding tree. If the unicast route from the leaf to the RP is a BGP route, traffic is forwarded through GTM6. In this case, the traffic from the RP to the leaf cannot be pruned, and two copies of traffic exist. As a result, the leaf discards the traffic forwarded through GTM6 because the RPF check fails. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In a GTMv4 over BIERv6 dual-root 1+1 scenario, after the MVPN configuration in the instance is deleted from the primary root node, the root node does not perform an active/standby switchover. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In a GTMv6 over BIERv6 scenario, the GTM instance on the source PE and other NG MVPN instances cannot be configured with the same RT. Otherwise, an error occurs when the ILM table of the receive PE is delivered. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In a GTM over BIERv6 scenario, the tail-end subcard does not allow an I-PMSI/S-PMSI A-D route to be crossed to multiple VPN instances (including the public network instance with the VRF ID of 0). As a result, one Src-DT6 SID corresponds to two VPNs, as a result, multicast traffic of a VPN instance fails to be forwarded. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In a GTMv6 over BIERv6 dual-root 1+1 scenario, after the MVPN configuration in the instance is deleted from the primary root node, the root node does not perform an active/standby switchover. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In a GTMv4 over BIERv6 scenario, the same RT cannot be configured for the receiver PE and other NG MVPN instances. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In a GTMv6 over BIERv6 scenario, the same RT cannot be configured for the receiver PE and other NG MVPN instances. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In the GTMv4 over BIERv6 scenario, if the unicast route from the leaf to the source is an IGP route, traffic is forwarded through the PIM forwarding tree. If the unicast route from the leaf to the RP is a BGP route, traffic is forwarded through GTM4. In this case, the traffic from the RP to the leaf cannot be pruned, and two copies of traffic exist. As a result, the leaf discards the traffic forwarded through GTM4 because the RPF check fails. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| MVPN/GTM over BIERv6 network slicing is deployed on a non-enhanced TM board or non-enhanced TM subcard. If downstream TM replication or DUNE replication is configured on the board, bandwidth isolation and rate limiting cannot be ensured for BIERv6 slices. | NE40E-M2 | NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| For MVPN/GTM over BIERv6 network slicing, the same slice ID must be deployed on the entire network, regardless of the inter-AS or intra-AS BIERv6 public network tunnel scenario. If no slice interface is deployed, traffic is forwarded through the outbound interface of the BIERv6 tunnel. | NE40E-M2 | NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| MVPN/GTM over BIERv6 network slicing uses the HBH header and does not support interworking with devices running earlier versions. | NE40E-M2 | NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In the MVPN/GTM over BIERv6 1+1 traffic detection + BIERv6 network slicing scenario, if the network slicing interface fails but the basic interface does not fail, a switchover and switchback may occur. The switchover and switchback can be performed within 50 ms, but end-to-end switching within 50 ms is not guaranteed. | NE40E-M2 | NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Multicast services support only BIERv6 network slices. | NE40E-M2 | NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |