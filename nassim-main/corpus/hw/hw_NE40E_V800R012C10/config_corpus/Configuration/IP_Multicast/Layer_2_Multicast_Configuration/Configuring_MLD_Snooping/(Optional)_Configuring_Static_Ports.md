(Optional) Configuring Static Ports
===================================

On a network with a stable topology, you can configure static ports, including static router ports and static multicast group member ports.

#### Context

Router ports receive multicast data packets from an upstream device and are dynamic router ports by default. If a port needs to receive multicast data packets for a long time, configure it as a static router port to prevent multicast service interruptions.

Multicast group member ports are used to receive Group-specific multicast data or Group-and-Source-Specific multicast data and are dynamic multicast group member ports by default. If the hosts connected to a port need to receive Group-specific multicast data or Group-and-Source-Specific multicast data for a long time, you can configure the port as a static multicast group member port.

On a network with a stable topology, set PWs/sub-interfaces in a VPLS scenario or interfaces in a VLAN scenario as static ports.

A static port does not age, and can be deleted only through a command.


#### Procedure

* Static router ports can be configured on different positions on the network to receive multicast data for a long time. Static multicast group member ports can be configured so that hosts connected to them can receive Group-specific multicast data or Group-and-Source-Specific multicast data for a long time. The following configurations are parallel. You can configure one or more items as required. For details, see [Table 1](#EN-US_TASK_0172367922__tab_dc_vrp_l2mc_cfg_007401).
  
  
  
  **Table 1** Configuring static ports
  | Objective | Usage Scenario | Position | Configuration Procedure | Description |
  | --- | --- | --- | --- | --- |
  | **Configure static router ports.** | VLAN | Interface | 1. Run the [**system-view**](cmdqueryname=system-view) command to enter the system view. 2. Run the [**interface**](cmdqueryname=interface) *interface-typeinterface-number* command to enter the Ethernet interface view. 3. Run the [**mld-snooping static-router-port**](cmdqueryname=mld-snooping+static-router-port) **vlan** *vlan-id* command to set the interface in a specified VLAN as a static router port. 4. Run the [**commit**](cmdqueryname=commit) command to commit the configuration. | Before running the command, add the interface to a specified VLAN; otherwise, the configuration is invalid. |
  | VPLS | Sub-interface | 1. Run the [**system-view**](cmdqueryname=system-view) command to enter the system view. 2. Run the [**interface**](cmdqueryname=interface) *interface-type* *interface-number.subnumber* command to enter the sub-interface view. 3. Run the [**l2 binding**](cmdqueryname=l2+binding) **vsi** *vsi-name* command to bind the sub-interface to a VSI. 4. Run the [**mld-snooping static-router-port**](cmdqueryname=mld-snooping+static-router-port) **vsi** *vsi-name* command to configure the sub-interface as a static router port of the specified VSI. 5. Run the [**commit**](cmdqueryname=commit) command to commit the configuration. | + A sub-interface that is not bound to a VSI cannot be configured as a static router port. + After a sub-interface configured as a static router port is unbound from a VSI, all static router port configurations will be deleted from the sub-interface. The sub-interface can be a common sub-interface or a Dot1q termination sub-interface. |
  | PW | 1. Run the [**system-view**](cmdqueryname=system-view) command to enter the system view. 2. Run the [**vsi**](cmdqueryname=vsi) *vsi-name* [ **static** ] command to enter the VSI view. 3. Run the [**mld-snooping static-router-port**](cmdqueryname=mld-snooping+static-router-port) **remote-peer** *ip-address* [ **negotiation-vc-id** *vc-id* ] command to configure a PW as a static router port in the specified VSI. 4. Run the [**commit**](cmdqueryname=commit) command to commit the configuration. | When this function is configured, the PW negotiation mode is LDP.  If no IP address is set for the remote peer, you can still configure the PW as a static router port of a VSI. The configuration, however, takes effect only after an IP address is set for the remote peer. |
  | **Configure static multicast group member ports.** | VLAN | Interface | 1. Run the [**system-view**](cmdqueryname=system-view) command to enter the system view. 2. Run the [**interface**](cmdqueryname=interface) *interface-type interface-number* command to enter the interface view. The interface needs to be connected to static users of multicast groups. 3. (Optional) Run the [**undo mld-snooping learning**](cmdqueryname=undo+mld-snooping+learning) **vlan** { *vlan-id* { [ *&<1-10>* ][**to** *vlan-id* ] | **all** } } command to disable dynamic learning on multicast group member ports. After an interface is disabled from dynamically learning forwarding entries, you can only add the interface to a multicast group statically. 4. Run the [**l2-multicast ipv6 static-group**](cmdqueryname=l2-multicast+ipv6+static-group) [ **source-address** *source--address* ] **group-address** *group-address* **vlan** { { *vlan-id1* [ **to** *vlan-id2* ] } & <1-10> } command to configure the interfaces in the specified VLANs as static multicast group member ports. 5. (Optional) Run the [**quit**](cmdqueryname=quit) command to return to the system view. 6. (Optional) Run the [**vlan**](cmdqueryname=vlan) *vlan-id* command to enter the VLAN view. 7. (Optional) Run the [**mld-snooping static-group suppress-dynamic-join**](cmdqueryname=mld-snooping+static-group+suppress-dynamic-join) command to disable interfaces from forwarding Report and Done messages to upstream devices with static groups configured. 8. Run the [**commit**](cmdqueryname=commit) command to commit the configuration. | Before running the command, add the interface to a specified VLAN; otherwise, the configuration is invalid. |
  | VPLS | Sub-interface | 1. Run the [**system-view**](cmdqueryname=system-view) command to enter the system view. 2. Run the [**interface**](cmdqueryname=interface) *interface-type* *interface-number.subnumber* command to enter the sub-interface view. 3. Run the [**l2 binding**](cmdqueryname=l2+binding) **vsi** *vsi-name* command to bind the sub-interface to a VSI. 4. Run the [**l2-multicast ipv6 static-group**](cmdqueryname=l2-multicast+ipv6+static-group) [ **source-address** *source-address-ip-address* ] **group-address** *group-address* **vsi** *vsi-name* command to configure the sub-interface as a static multicast group member port of the VSI. 5. Run the [**commit**](cmdqueryname=commit) command to commit the configuration. | + A sub-interface that is not bound to a VSI cannot be configured as a static multicast group member port. + After a sub-interface configured as a static multicast group member port is unbound from a VSI, all static multicast group member port configurations will be deleted from the sub-interface. + A sub-interface can be bound to only one VSI and can be configured as a static multicast group member port of only one VSI. |
  | PW | 1. Run the [**system-view**](cmdqueryname=system-view) command to enter the system view. 2. Run the [**vsi**](cmdqueryname=vsi) *vsi-name* [ **static** ] command to enter the VSI view. 3. Run the [**l2-multicast ipv6 static-group**](cmdqueryname=l2-multicast+ipv6+static-group) [ **source-address** *source-address-ip-address* ] **group-address** *group-address* **remote-peer** *ip-address* [ **negotiation-vc-id** *vc-id* ] command to configure a PW as a static multicast group member port in the specified VSI. 4. Run the [**commit**](cmdqueryname=commit) command to commit the configuration. | When this function is configured, the PW negotiation mode is LDP.  If no IP address is set for the remote peer, you can still configure the PW as a static multicast group member port of a VSI. The configuration, however, takes effect only after an IP address is set for the remote peer. |