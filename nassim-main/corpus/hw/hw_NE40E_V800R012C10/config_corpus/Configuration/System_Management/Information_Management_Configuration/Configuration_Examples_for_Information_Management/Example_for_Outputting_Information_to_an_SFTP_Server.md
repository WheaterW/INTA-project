Example for Outputting Information to an SFTP Server
====================================================

Information of specified modules and severities can be output to an information file on the local device, and then the information file can be sent to an SFTP server. By checking the information on the SFTP server, maintenance engineers can learn about the running status of the device and locate faults on the device.

#### Networking Requirements

Information can be saved in the form of files on the device. When faults occur on the device, information can be output from the information file and used for fault location. As shown in [Figure 1](#EN-US_TASK_0172361200__fig_dc_vrp_logs_cfg_203901), logs can be output to the information files of DeviceA. Storing excessive information files consumes a large number of memory resources. Generally, these files can be transmitted to an SFTP server for unified maintenance. Maintenance engineers can query logs on the SFTP server to learn the operation of DeviceA and locate the fault on DeviceA.

![](../../../../public_sys-resources/note_3.0-en-us.png) 

In this example, logs are output to an information file.


**Figure 1** Outputting information to the SFTP server  
![](images/fig_dc_vrp_logs_cfg_203901.png)
![](../../../../public_sys-resources/note_3.0-en-us.png) 

Interface1 in this example represents GE 0/1/0.



#### Configuration Roadmap

The configuration roadmap is as follows:

1. Enable the information management function.
2. Configure the information output channel.
3. Configure rules for outputting information.
4. Send information files to the SFTP server.

#### Data Preparation

To complete the configuration, you need the following data:

* IP address of each interface and routing protocol
* Information channel number
* Module and severity of the information to be output
* IP address of the SFTP server, and the username and password for logging in to the SFTP server

#### Procedure

1. Configure a routing protocol to allow the Router and SFTP server to be reachable.
2. Configure the IP address of the SFTP server, and the username and password for logging in to the SFTP server.
3. Enable the information management function.
   
   
   
   # Enable the information management function.
   
   ```
   <DeviceA> system-view
   ```
   ```
   [~DeviceA] info-center enable
   ```
4. Configure the channel through which information is output.
   
   
   
   # Specify channel 8 as the channel through which information is output to an information file.
   
   ```
   [*DeviceA] info-center logfile channel channel8
   ```
5. Configure rules for outputting information.
   
   
   
   # Output the information of warning or higher levels generated by the IM module through a channel.
   
   ```
   [*DeviceA] info-center source im channel channel8 log level warning
   ```
   ```
   [*DeviceA] commit
   ```
   ```
   [~DeviceA] quit
   ```
6. Transmit information files to the SFTP server.
   
   
   
   # Switch to the path of the information file.
   
   ```
   <DeviceA> cd cfcard:
   ```
   
   # Log in to the SFTP server.
   
   ```
   <DeviceA> sftp 10.2.1.2
   ```
   
   # Transmit information files to the SFTP server.
   
   ```
   sftp-client> put log_17_20110504041811.log
   ```
   ```
   sftp-client> quit
   ```
7. Verify the configuration.
   
   
   
   # Check the channel information carried in the output information.
   
   ```
   <DeviceA> display info-center
   ```
   ```
   Information Center:enabled
   Log host:
           10.0.0.1, channel number 2, channel name loghost,
   language English , host facility local7
   Console:
           channel number : 0, channel name : console
   Monitor:
           channel number : 1, channel name : monitor
   SNMP Agent:
           channel number : 5, channel name : snmpagent
   Log buffer:
           enabled,max buffer size 10240, current buffer size 512,
   current messages 10, channel number : 4, channel name : logbuffer
   dropped messages 0, overwritten messages 0
   Trap buffer:
           enabled,max buffer size 1024, current buffer size 256,
   current messages 3, channel number:3, channel name:trapbuffer
   dropped messages 0, overwritten messages 0
   logfile:
           channel number : 8, channel name : channel8, language : English
   Information timestamp setting:
           log - date, trap - date, debug - date millisecond
   
   ```
   
   # Check the information files received on the SFTP server.

#### Configuration Files

```
#
```
```
sysname DeviceA
```
```
#
```
```
info-center logfile channel 8
```
```
info-center source im channel channel 8 log level warning
```
```
#
```
```
interface GigabitEthernet0/1/0
```
```
 undo shutdown
```
```
 ip address 10.2.1.1 255.255.0.0
```
```
#
```
```
return
```