
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling NAT Statistics Collection">
<meta name="abstract" content="Before checking the usage of IP addresses in an address pool and the number of packets and bytes matching ACL rules in the traffic diversion policy on the outbound interface, enable the NAT statistics collection function. Perform the following steps on the NE40E:">
<meta name="description" content="Before checking the usage of IP addresses in an address pool and the number of packets and bytes matching ACL rules in the traffic diversion policy on the outbound interface, enable the NAT statistics collection function. Perform the following steps on the NE40E:">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0046.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0048.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0083_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001092997678">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Enabling NAT Statistics Collection</title>
</head>
<body><a name="EN-US_TASK_0000001092997678"></a><a name="EN-US_TASK_0000001092997678"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling NAT Statistics Collection</h1>
<div class="taskbody"><p>Before checking the usage of IP addresses in an address pool and the number of packets and bytes matching ACL rules in the traffic diversion policy on the outbound interface, enable the NAT statistics collection function. Perform the following steps on the <span class="keyword" id="en-us_task_0172374571_keyword1671667779214415">NE40E</span>:</p>
<div class="steps-unordered"><a name="EN-US_TASK_0000001092997678__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ul id="EN-US_TASK_0000001092997678__en-us_task_0172374571_steps-unordered581578566214110"><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_step2084344117568"><span id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmd7843641165619">Enable collection of NAT forwarding payload statistics<span> in the system view</span>.</span><p><div class="note" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_note611420258192"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p151144256193">Only the <span class="keyword" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_keyword8114122515191">NE40E</span><span class="keyword" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_keyword31141925131914">-M2K</span> and <span class="keyword" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_keyword161141225111915">NE40E</span><span class="keyword" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_keyword10114225191915">-M2K-B</span> support this configuration.</p>
</div></div>
<div class="note" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_note158431241175610"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p18843541135610">In VS mode, this configuration process is supported only by the admin-VS.</p>
</div></div>
<ol id="EN-US_TASK_0000001092997678__en-us_task_0172374571_ol584324116568"><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_li1284310419565"><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p28432419560"><a name="EN-US_TASK_0000001092997678__en-us_task_0172374571_li1284310419565"></a><a name="en-us_task_0172374571_li1284310419565"></a>Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname16843164118562">system-view</span></b></a></p>
<p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p7101151613123">The system view is displayed.</p>
</li><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_li884324145617"><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p1429884614159"><a name="EN-US_TASK_0000001092997678__en-us_task_0172374571_li884324145617"></a><a name="en-us_task_0172374571_li884324145617"></a>Run <a href="cmdqueryname=nat+statistics+payload+slot+enable"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname984344175618">nat statistics payload</span></b></a> <strong><span id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdparmname8843114135614">slot</span></strong> <i><span class="varname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_varname484394111569">slot-id</span></i> <strong><span id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdparmname198432419562">enable</span></strong></p>
<p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p155682333120">Collection of NAT forwarding payload statistics is enabled. After this function is enabled, the average and maximum values of the outbound and inbound forwarding payloads on the service board can be obtained.</p>
<p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p1284311412564">After this function is enabled, the system samples packets every 10 minutes and records the data collected within the last 72 hours. To check the NAT forwarding payload statistics, run the <a href="cmdqueryname=display+nat+statistics+payload"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname884304118561">display nat statistics payload</span></b></a> command.</p>
</li><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_li584318417562"><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p584344115618"><a name="EN-US_TASK_0000001092997678__en-us_task_0172374571_li584318417562"></a><a name="en-us_task_0172374571_li584318417562"></a>Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname1684374135618">commit</span></b></a></p>
<p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p1870173619138">The configuration is committed.</p>
</li></ol>
</p></li><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_step1769680160214110"><span id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmd365938170214110">Enable collection of NAT forwarding payload statistics in the NAT instance view.</span><p><div class="note" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_note93603251917"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p1036103251918">Only the <span class="keyword" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_keyword23718324199">NE40E</span><span class="keyword" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_keyword337932191916">-M2K</span> and <span class="keyword" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_keyword437103281917">NE40E</span><span class="keyword" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_keyword15371832201910">-M2K-B</span> support this configuration.</p>
</div></div>
<ol id="EN-US_TASK_0000001092997678__en-us_task_0172374571_ol2032218777214110"><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_li2039229859214110"><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p1644717740214110"><a name="EN-US_TASK_0000001092997678__en-us_task_0172374571_li2039229859214110"></a><a name="en-us_task_0172374571_li2039229859214110"></a>Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname1373159409214110">system-view</span></b></a></p>
<p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p201641558165715">The system view is displayed.</p>
</li><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_li192791754214110"><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p1845669802214110"><a name="EN-US_TASK_0000001092997678__en-us_task_0172374571_li192791754214110"></a><a name="en-us_task_0172374571_li192791754214110"></a>Run <a href="cmdqueryname=nat+instance+id"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname854087717214110">nat instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_varname1259725413214110">instance-name</span></i> [ <strong><span id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdparmname1217915927214110">id</span></strong> <i><span class="varname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_varname917614539214110">id</span></i> ]</p>
<p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p2235108175817">The NAT instance view is displayed.</p>
</li><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_li788609899214110"><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p3369133843115"><a name="EN-US_TASK_0000001092997678__en-us_task_0172374571_li788609899214110"></a><a name="en-us_task_0172374571_li788609899214110"></a>Run <a href="cmdqueryname=nat+statistics+payload+enable"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname1761124735214110">nat statistics payload enable</span></b></a></p>
<p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p9150203343113">Collection of NAT forwarding payload statistics is enabled.</p>
<p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p1750881021214110">After this function is enabled, the system samples packets every 10 minutes and records the data collected within the last 72 hours. To check the NAT forwarding payload statistics, run the <a href="cmdqueryname=display+nat+statistics+payload"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname1726981877214110">display nat statistics payload</span></b></a> command.</p>
</li><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_li1536430211214110"><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p1439184749214110"><a name="EN-US_TASK_0000001092997678__en-us_task_0172374571_li1536430211214110"></a><a name="en-us_task_0172374571_li1536430211214110"></a>Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname1316059335214110">commit</span></b></a></p>
<p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p879845915819">The configuration is committed.</p>
</li></ol>
</p></li><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_step88811639145711"><span id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmd4881173911577">Enable the NAT statistics collection function.</span><p><ol id="EN-US_TASK_0000001092997678__en-us_task_0172374571_ol58811939155716"><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_li10881153914574">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname988173920577">system-view</span></b></a><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p9446647697">The system view is displayed.</p>
</li><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_li1288111395578">Run <a href="cmdqueryname=nat+instance+id"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname18881113945711">nat instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_varname488133935710">instance-name</span></i> [ <strong><span id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdparmname688123919578">id</span></strong> <i><span class="varname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_varname1488112397577">id</span></i> ]<p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p121748504109">The NAT instance view is displayed.</p>
</li><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_li9881173913577"><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p20422142116126"><a name="EN-US_TASK_0000001092997678__en-us_task_0172374571_li9881173913577"></a><a name="en-us_task_0172374571_li9881173913577"></a>Run <a href="cmdqueryname=nat+statistics+address-pool-usage+enable"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname18881103915715">nat statistics</span></b></a> <span>{ <strong><span id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdparmname188123911572">port-usage</span></strong> | <strong><span id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdparmname1881153935717">session-usage</span></strong> | </span><strong><span id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdparmname7881123995717">address-pool-usage</span></strong> <span>} </span><strong><span id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdparmname1088113945713">enable</span></strong></p>
<p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p1837547161119">The NAT statistics collection function is enabled.</p>
<p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p78811839155713">After running this command, wait for 10 minutes before running the <a href="cmdqueryname=display+nat+statistics"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname18881133975719">display nat statistics</span></b></a> command to check statistics.</p>
<div class="note" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_note98102031145210"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p18810531185214">The <span><strong><span id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdparmname1647323481613">port-usage</span></strong></span> and <span><strong><span id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdparmname526441151614">session-usage</span></strong></span> parameters are supported only on the <span class="keyword" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_keyword1152414571330">NE40E</span><span class="keyword" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_keyword3501321048">-M2K</span> and <span class="keyword" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_keyword84407551658">NE40E</span><span class="keyword" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_keyword18823101016414">-M2K-B</span>.</p>
</div></div>
</li><li id="EN-US_TASK_0000001092997678__en-us_task_0172374571_li388123955717">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001092997678__en-us_task_0172374571_cmdname88812039185718">commit</span></b></a><p id="EN-US_TASK_0000001092997678__en-us_task_0172374571_p4926165510115">The configuration is committed.</p>
</li></ol>
</p></li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0046.html">Maintaining NAT
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0048.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0083_1.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>