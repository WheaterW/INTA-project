
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a NAT64 Conversion Policy">
<meta name="abstract" content="You can configure NAT64 conversion policies to determine whether to implement ACL-based filtering of the traffic introduced to a service board and to redistribute the traffic to different NAT64 address pools for NAT64 treatment.">
<meta name="description" content="You can configure NAT64 conversion policies to determine whether to implement ACL-based filtering of the traffic introduced to a service board and to redistribute the traffic to different NAT64 address pools for NAT64 treatment.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0013.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0014.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0016.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT64">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT64">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT64">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT64">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001390245740">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a NAT64 Conversion Policy</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001390245740"></a><a name="EN-US_TASK_0000001390245740"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a NAT64 Conversion Policy</h1>
<div class="taskbody"><p>You can configure NAT64 conversion policies to determine whether to implement ACL-based filtering of the traffic introduced to a service board and to redistribute the traffic to different NAT64 address pools for NAT64 treatment.</p>
<div class="context"><a name="EN-US_TASK_0000001390245740__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_context1093893575214111"><div class="p" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p461813058214111">A NAT64 conversion policy for user traffic distributed to a service board supports either of the following modes:<ul id="EN-US_TASK_0000001390245740__en-us_task_0172374908_ul397180846214111"><li id="EN-US_TASK_0000001390245740__en-us_task_0172374908_li2095238671214111"><p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p239499991214111"><a name="EN-US_TASK_0000001390245740__en-us_task_0172374908_li2095238671214111"></a><a name="en-us_task_0172374908_li2095238671214111"></a>Match ACL rules:</p>
<p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p164171306214111">An ACL and a NAT64 address pool must be specified. If packets match the ACL, and the action specified in the ACL rule is <strong id="EN-US_TASK_0000001390245740__en-us_task_0172374908_b349300727214417">permit</strong>, NAT64 translates the packets using addresses in the NAT64 address pool.</p>
</li><li id="EN-US_TASK_0000001390245740__en-us_task_0172374908_li1213992674214111"><p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p332741771214111"><a name="EN-US_TASK_0000001390245740__en-us_task_0172374908_li1213992674214111"></a><a name="en-us_task_0172374908_li1213992674214111"></a>Not match ACL rules:</p>
<p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p1245926927214111">User traffic distributed to a service board does not need to match any ACL rule. By default, NAT64 is performed for user traffic using addresses from a specified NAT64 address pool.</p>
</li></ul>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001390245740__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul id="EN-US_TASK_0000001390245740__en-us_task_0172374908_steps-unordered935288763214111"><li id="EN-US_TASK_0000001390245740__en-us_task_0172374908_step343979682214111"><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmd240537650214111">Configure a NAT64 conversion policy in which ACL rules are used to filter packets for translation.</span><ol id="EN-US_TASK_0000001390245740__en-us_task_0172374908_substeps1134485834214111"><li class="substepexpand" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_substep610132887214111"><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmd38598750214417">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmdname1997322010214417">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p816277639214417">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_substep1092535379214111"><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmd1484679916214417">Run <span><a href="cmdqueryname=nat64+instance"><b><span class="cmdname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmdname613482106214417">nat64 instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_varname783869170214417">instance-name</span></i> <strong><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmdparmname1624793158214417">id</span></strong> <i><span class="varname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_varname1397744555214417">id</span></i></span></span><p><p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p1172596762214417">The NAT64 instance view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_substep1034668590214111"><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmd1499902371214111">Run <a href="cmdqueryname=nat64+outbound"><b><span class="cmdname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmdname670080899214111">nat64 outbound</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_varname1257636256214111">acl-number</span></i> <strong><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmdparmname899871432214111">address-group</span></strong> <i><span class="varname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_varname666720515214111">address-group-name</span></i></span><p><p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p9783114718282">A NAT64 conversion policy in which the ACL is bound to the address pool is configured.</p>
</p><p><div class="note" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_note20999286282"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p5991528142817">When performing this step, ensure that the address range of the ACL rule used in the conversion policy covers the address range of the ACL rule used in the traffic diversion policy. Otherwise, service interruptions may occur. To prevent such interruptions, use either of the following measures:</p>
<ul id="EN-US_TASK_0000001390245740__en-us_task_0172374908_ul13991328192814"><li id="EN-US_TASK_0000001390245740__en-us_task_0172374908_li1599132812810">Keep <i><span class="varname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_varname699152832814">acl-number</span></i> in this step consistent with that in the traffic diversion policy.</li><li id="EN-US_TASK_0000001390245740__en-us_task_0172374908_li09919283281">Configure a default address pool in this step for translating the addresses unmatched by the configured traffic conversion policy. For example:<pre class="screen" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_screen29916283281">The ACL rule referenced by the traffic diversion policy is as follows:
#
acl ipv6 3000
 rule 1 permit ipv6 source 2001:db8::1 64
#
acl ipv6 3999 //Default address pool configuration
rule 1 permit ipv6 //Default address pool configuration
The conversion policy is as follows:
nat64 instance nat1 id 1
 nat64 address-group group1 group-id 1 10.10.1.0 10.10.1.254
 nat64 address-group group2 group-id 2 10.10.1.255 10.10.1.255 //Default address pool configuration
 nat64 outbound 3000 address-group address-group1
 nat64 outbound 3999 address-group address-group2 //Default address pool configuration</pre>
<p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p139902812815"></p>
</li></ul>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_substep371345379214111"><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmd2935167214417">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmdname1732442122214417">commit</span></b></a></span></span><p><p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p1728811147214417">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0000001390245740__en-us_task_0172374908_step598577910214111"><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmd1485530822214111">Configure a NAT64 conversion policy in which ACL rules are not used to filter packets for translation.</span><ol id="EN-US_TASK_0000001390245740__en-us_task_0172374908_substeps833143241214111"><li class="substepexpand" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_substep273952116214111"><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmd278680333214417">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmdname1730623035214417">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p671110529214417">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_substep340089220214111"><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmd1145788776214417">Run <span><a href="cmdqueryname=nat64+instance"><b><span class="cmdname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmdname551758889214417">nat64 instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_varname207916306214417">instance-name</span></i> <strong><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmdparmname826203789214417">id</span></strong> <i><span class="varname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_varname399651537214417">id</span></i></span></span><p><p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p361763536214417">The NAT64 instance view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_substep1256717385214111"><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmd1441343407214417">Run <span><a href="cmdqueryname=nat64+outbound"><b><span class="cmdname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmdname944725108214417">nat64 outbound</span></b></a> <strong><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmdparmname1323016491214417">any</span></strong> <strong><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmdparmname2043110096214417">address-group</span></strong> <i><span class="varname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_varname790285294214417">address-group-name</span></i></span></span><p><p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p752181714214417">A NAT64 conversion policy is configured to not allow packets to match against ACL rules.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_substep1936842489214111"><span id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmd1717407889214417">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001390245740__en-us_task_0172374908_cmdname661718870214417">commit</span></b></a></span></span><p><p id="EN-US_TASK_0000001390245740__en-us_task_0172374908_p46677251214417">The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0013.html">(Optional) Configuring Centralized NAT64 Translation
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0014.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0016.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>