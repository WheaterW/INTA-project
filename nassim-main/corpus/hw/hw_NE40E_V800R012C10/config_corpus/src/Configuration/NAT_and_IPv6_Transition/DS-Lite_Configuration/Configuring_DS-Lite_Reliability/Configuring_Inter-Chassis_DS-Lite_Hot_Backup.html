
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Inter-Chassis DS-Lite Hot Backup">
<meta name="abstract" content="You can configure the dual-device inter-chassis DS-Lite hot backup to improve the reliability of a DS-Lite device.">
<meta name="description" content="You can configure the dual-device inter-chassis DS-Lite hot backup to improve the reliability of a DS-Lite device.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0034.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0035.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0070.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374725">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Inter-Chassis DS-Lite Hot Backup</title>
</head>
<body><a name="EN-US_TASK_0172374725"></a><a name="EN-US_TASK_0172374725"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Inter-Chassis DS-Lite Hot Backup</h1>
<div class="taskbody"><p>You can configure the dual-device inter-chassis DS-Lite hot backup to improve the reliability of a DS-Lite device.</p>
<div class="context"><a name="EN-US_TASK_0172374725__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If multiple DS-Lite devices with service boards exist on a network, you can configure a service board on a master device and a service board on a backup device to implement inter-chassis backup. The inter-chassis backup mechanism ensures that the data stored on CPUs of the service boards on the master and backup devices is consistent. If the master device, the service board on it, or the link between the master and backup devices fails, a master/backup switchover is performed to ensure that services run properly. In this situation, services are properly transmitted, and users are unaware of the fault.</p>
<ul><li><p>If multiple DS-Lite devices with service boards exist on a network and provide access services for a limited number of users, you can apply inter-chassis 1:1 backup. In this case, when the service board on the master device processes services, the service board on the backup device does not work. The service board on the master device backs up the user, session, and address pool entries to the service board on the backup device. Once the master device, the service board on it, or the link between the master and backup devices fails, the backup device becomes the master and processes services.</p>
</li><li><p>If multiple DS-Lite devices with service boards exist on a network and provide access services for a large number of users, you can apply inter-chassis 1+1 backup. In this case, both service boards on the master and backup devices process services and back up their user, session, and address pool entries to each other. Once a service board, a device, or the link between the master and backup devices fails, the service board on the other device processes all services.</p>
</li></ul>
<div class="p">Perform the following steps on the master and backup devices:<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>Configure the same DS-Lite parameters on both devices.</li><li>Configure the same name and ID of a DS-Lite instance on both devices.</li><li>Configure the same DS-Lite functions on both devices.</li><li>Inter-board backup and inter-chassis backup cannot be configured simultaneously.</li></ul>
</div></div>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172374725__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure basic high availability (HA) hot backup functions.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=service-ha+hot-backup+enable"><b><span class="cmdname">service-ha hot-backup enable</span></b></a></span></span><p><p>HA hot backup is enabled.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure a Virtual Router Redundancy Protocol (VRRP) group for dual-device inter-chassis HA hot backup.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This section provides commonly used steps for configuring VRRP. For more information, see "VRRP Configuration."</p>
</div></div>
</p><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>virtual-ip</span></strong> <i><span class="varname">virtual-address</span></i></span></span><p><p>A VRRP group is created, and a virtual IP address is assigned to the VRRP group.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <i><span class="varname">virtual-router-id</span></i> and <i><span class="varname">virtual-address</span></i> values configured on both devices must be the same.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=admin-vrrp+vrid"><b><span class="cmdname">admin-vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> [ <strong><span>ignore-if-down</span></strong> ]</span></span><p><p>The VRRP group is configured as a management VRRP (mVRRP) backup group.</p>
</p><p><p>The VRRP type must be mVRRP.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>priority</span></strong> <i><span class="varname">priority-value</span></i></span></span><p><p>The priority of a device in the VRRP group is set.</p>
</p><p><p>The DS-Lite devices must be assigned different VRRP priorities. The DS-Lite device with a higher priority serves as the master one.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>Configure an HA backup group for dual-device inter-chassis HA hot backup and bind it to a VRRP group.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=service-location"><b><span class="cmdname">service-location</span></b></a> <i><span class="varname">service-location-id</span></i></span></span><p><p>A service-location group is created, and the service-location group view is displayed</p>
</p><p><p>The <i><span class="varname">service-location-id</span></i> value configured on both devices must be the same.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=location"><b><span class="cmdname">location</span></b></a> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> </span><p><p>The CPU of the service board is bound in the service-location group view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup+interface"><b><span class="cmdname">remote-backup interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ip-address</span></i> [ <strong><span>authentication-key</span></strong> <i><span class="varname">key-value</span></i> <strong><span>hash-algorithm</span></strong> <strong><span>hmac-sha256</span></strong> ]</span><p><p>A VRRP outbound interface is configured on the local device for inter-chassis backup, and the IP address of the peer device is specified.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The service-location group is bound to the VRRP group.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>Create a service instance group and associate the service instance group with the HA backup group.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=service-instance-group"><b><span class="cmdname">service-instance-group</span></b></a> <i><span class="varname">service-instance-group-name</span></i></span></span><p><p>A service-instance group is created, and the service-instance group view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=service-location"><b><span class="cmdname">service-location</span></b></a> <i><span class="varname">service-location-id</span></i> [ <strong><span>weight</span></strong> <i><span class="varname">weight-value</span></i> ]</span><p><p>The service-location group is bound to the service-instance group.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>Bind a DS-Lite instance to a service-instance group to implement dual-device inter-chassis HA hot backup for DS-Lite services.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ds-lite+instance"><b><span class="cmdname">ds-lite instance</span></b></a> <i><span class="varname">instance-name</span></i> <strong><span>id</span></strong> <i><span class="varname">id</span></i></span><p><p>The DS-Lite instance view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=service-instance-group"><b><span class="cmdname">service-instance-group</span></b></a> <i><span class="varname">service-instance-group-name</span></i></span><p><p>The DS-Lite instance is bound to the service-instance group.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>Associate a service-instance group with a VRRP group on an interface on which mVRRP is configured.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>service-location</span></strong> <i><span class="varname">service-location-id</span></i> [ <strong><span>reduced</span></strong> <i><span class="varname">value-reduced</span></i> ]</span></span><p><p>The VRRP group can track the status of a service-location group so that VRRP priorities can be adjusted.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0034.html">Configuring DS-Lite Reliability
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0035.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0070.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>