
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a NAT Conversion Policy">
<meta name="abstract" content="Before converting private IP addresses of user traffic into public IP addresses from a NAT address pool, configure a NAT conversion policy to determine whether to filter the user traffic diverted to a NAT service board using ACL rules.">
<meta name="description" content="Before converting private IP addresses of user traffic into public IP addresses from a NAT address pool, configure a NAT conversion policy to determine whether to filter the user traffic diverted to a NAT service board using ACL rules.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0068_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0070_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0072_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001092837990">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a NAT Conversion Policy</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001092837990"></a><a name="EN-US_TASK_0000001092837990"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a NAT Conversion Policy</h1>
<div class="taskbody"><p>Before converting private IP addresses of user traffic into public IP addresses from a NAT address pool, configure a NAT conversion policy to determine whether to filter the user traffic diverted to a NAT service board using ACL rules.</p>
<div class="context"><a name="EN-US_TASK_0000001092837990__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_context742162382214109"><div class="p" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p938132498214109">There are two NAT conversion policies:<ul id="EN-US_TASK_0000001092837990__en-us_task_0172374508_ul1658165171214109"><li id="EN-US_TASK_0000001092837990__en-us_task_0172374508_li2081717013214109"><p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p614260567214109"><a name="EN-US_TASK_0000001092837990__en-us_task_0172374508_li2081717013214109"></a><a name="en-us_task_0172374508_li2081717013214109"></a>ACL-based</p>
<p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p701684211214109">In this policy, an ACL and a NAT address pool are configured, and NAT can be performed only for user packets that match a <strong id="EN-US_TASK_0000001092837990__en-us_task_0172374508_b1393183115814">permit</strong> ACL rule.</p>
</li><li id="EN-US_TASK_0000001092837990__en-us_task_0172374508_li712583775214109"><p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p2026690753214109"><a name="EN-US_TASK_0000001092837990__en-us_task_0172374508_li712583775214109"></a><a name="en-us_task_0172374508_li712583775214109"></a>Non-ACL-based</p>
<p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p1932366051214109">In this policy, packets diverted to a NAT service board are not matched against ACL rules. By default, the IP addresses of these packets are converted into public IP addresses from a specified NAT address pool.</p>
</li></ul>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001092837990__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul id="EN-US_TASK_0000001092837990__en-us_task_0172374508_steps-unordered462878790214109"><li id="EN-US_TASK_0000001092837990__en-us_task_0172374508_step461677066214109"><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmd548031651214109">Configure an ACL-based NAT conversion policy.</span><ol id="EN-US_TASK_0000001092837990__en-us_task_0172374508_substeps487330619214109"><li class="substepexpand" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_substep1541249154214109"><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmd792793010214415">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmdname1621393531214415">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p1917654066214415">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_substep2020420098214109"><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmd118183807214415">Run <span><a href="cmdqueryname=nat+instance"><b><span class="cmdname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmdname1216486400214415">nat instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_varname467885294214415">instance-name</span></i> [ <strong><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmdparmname694040616214415">id</span></strong> <i><span class="varname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_varname577929367214415">id</span></i> ]</span></span><p><p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p592606006214415">The NAT instance view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_substep1135692642214109"><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmd751579558214109">Run <a href="cmdqueryname=nat+outbound"><b><span class="cmdname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmdname1445124478214109">nat outbound</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_varname1741865232214109">acl-number</span></i> <strong><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmdparmname1816097503214109">address-group</span></strong> <i><span class="varname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_varname1915362833214109">address-group-name</span></i></span><p><p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p10260131982916">A NAT conversion policy in which the ACL bound to the address pool is used to filter packets for translation.</p>
</p><p><div class="note" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_note385164135214109"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p69827516445">When performing this step, ensure that the address range of the ACL rule used in the conversion policy covers the address range of the ACL rule used in the traffic diversion policy. Otherwise, service interruptions may occur.  To prevent such interruptions, use either of the following measures:</p>
<ul id="EN-US_TASK_0000001092837990__en-us_task_0172374508_ul1515213275582"><li id="EN-US_TASK_0000001092837990__en-us_task_0172374508_li8152132735811">Keep <i><span class="varname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_varname201155813277">acl-number</span></i> in this step consistent with that in the traffic diversion policy.</li><li id="EN-US_TASK_0000001092837990__en-us_task_0172374508_li76202610598">Configure a default address pool in this step for translating the addresses unmatched by the configured traffic conversion policy.  For example:<pre class="screen" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_screen2877141414417">The ACL rule referenced by the traffic diversion policy is as follows:
#
acl number 3000
 rule 1 permit source 1.1.1.1 0.0.0.255
#
acl number 3999 //Default address pool configuration
 rule 1 permit ip //Default address pool configuration
The conversion policy is as follows:
nat instance nat1 id 1
 nat address-group group1 group-id 1 10.10.1.0 10.10.1.254
 nat address-group group2 group-id 2 10.10.1.255 10.10.1.255 //Default address pool configuration
 nat outbound 3000 address-group address-group1
 nat outbound 3999 address-group address-group2 //Default address pool configuration</pre>
<p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p1238972614261"></p>
</li></ul>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_substep1017769773214109"><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmd1578731794214415">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmdname1857386147214415">commit</span></b></a></span></span><p><p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p760933279214415">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0000001092837990__en-us_task_0172374508_step1649363323214109"><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmd1130454185214109">Configure a non-ACL-based NAT conversion policy.</span><ol id="EN-US_TASK_0000001092837990__en-us_task_0172374508_substeps1468124399214109"><li class="substepexpand" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_substep351060459214109"><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmd1186811573214415">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmdname3133602214415">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p2084552894214415">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_substep1206319608214109"><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmd1236783978214415">Run <span><a href="cmdqueryname=nat+instance"><b><span class="cmdname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmdname391582662214415">nat instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_varname1044748205214415">instance-name</span></i> [ <strong><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmdparmname111041277214415">id</span></strong> <i><span class="varname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_varname1899520008214415">id</span></i> ]</span></span><p><p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p153118971214415">The NAT instance view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_substep1248971161214109"><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmd375947193214415">Run <span><a href="cmdqueryname=nat+outbound"><b><span class="cmdname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmdname1922176836214415">nat outbound</span></b></a> <strong><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmdparmname1034248619214415">any</span></strong> <strong><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmdparmname2124426467214415">address-group</span></strong> <i><span class="varname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_varname165766676214415">address-group-name</span></i></span></span><p><p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p1752156979214415">A non-ACL-based NAT conversion policy is configured.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_substep970109528214109"><span id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmd460167519214415">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001092837990__en-us_task_0172374508_cmdname982869065214415">commit</span></b></a></span></span><p><p id="EN-US_TASK_0000001092837990__en-us_task_0172374508_p699493948214415">The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0068_1.html">Configuring Distributed NAT
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0070_1.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0072_1.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>