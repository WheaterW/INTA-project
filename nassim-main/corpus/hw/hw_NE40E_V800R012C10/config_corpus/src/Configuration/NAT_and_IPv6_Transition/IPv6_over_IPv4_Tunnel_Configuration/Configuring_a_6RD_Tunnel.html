
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a 6RD Tunnel">
<meta name="abstract" content="A 6RD tunnel is a point-to-multipoint (P2MP) tunnel that connects IPv6 sites through a carrier's IPv4 network. 6RD tunnels have been widely deployed on carriers' networks.">
<meta name="description" content="A 6RD tunnel is a point-to-multipoint (P2MP) tunnel that connects IPv6 sites through a carrier's IPv4 network. 6RD tunnels have been widely deployed on carriers' networks.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_6o4tnl_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_6o4tnl_cfg_0004.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_6o4tnl_cfg_0008.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv6 over IPv4">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv6 over IPv4">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="IPv6 over IPv4">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00425560">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365291">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a 6RD Tunnel</title>
</head>
<body><a name="EN-US_TASK_0172365291"></a><a name="EN-US_TASK_0172365291"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a 6RD Tunnel</h1>
<div class="taskbody"><p>A 6RD tunnel is a point-to-multipoint (P2MP) tunnel that connects IPv6 sites through a carrier's IPv4 network. 6RD tunnels have been widely deployed on carriers' networks.</p>
<div class="context"><a name="EN-US_TASK_0172365291__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>A 6RD tunnel is a P2MP tunnel and is an enhancement to the 6to4 solution. 6RD tunneling allows carriers to use one of their own IPv6 prefixes as the 6RD prefix, mitigating the IPv4 address shortage of the 6to4 solution.</p>
<div class="p">6RD is used in the following scenarios:<ul><li><p>6RD domain-6RD domain</p>
<p>Connects different 6RD domains. 6RD CEs are deployed at either end of a tunnel, which enables hosts or devices in different 6RD domains to communicate with each other. </p>
</li><li><p>6RD domain-IPv6 network</p>
<p>Connects a 6RD domain to a native IPv6 network. A 6RD CE and a 6RD BR are deployed at either end of a tunnel, which enables hosts or devices in the 6RD domain and on the IPv6 network to access each other. </p>
</li></ul>
</div>
<h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring a 6RD tunnel, complete the following tasks:</p>
<ul><li><p>Connect interfaces and set their physical parameters to ensure that the physical status of the interfaces is Up.</p>
</li><li><p>Configure link-layer protocol parameters for interfaces to go Up at the link layer.</p>
</li><li><p>Ensure reachable routes between the source and destination interfaces.</p>
</li><li><p>Enable IPv4/IPv6 dual stack on the interfaces.</p>
</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365291__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">interface-number</span></i></span></span><p><p>A tunnel interface is created, and the tunnel interface view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=tunnel-protocol"><b><span class="cmdname">tunnel-protocol</span></b></a> <strong><span>ipv6-ipv4</span></strong> <strong><span>6rd</span></strong></span></span><p><p>The tunnel encapsulation mode is set to 6RD.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=source"><b><span class="cmdname">source</span></b></a> { <i><span class="varname">ip-address</span></i> | <i><span class="varname">interface-type interface-number</span></i> }</span></span><p><p>The source address or source interface is specified for the 6RD tunnel interface.</p>
</p></li><li><span>Run <a href="cmdqueryname=ipv6-prefix"><b><span class="cmdname">ipv6-prefix</span></b></a> { <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">i</span></i><i><span class="varname">pv6-prefix-mask</span></i> }</span><p><p>The 6RD prefix and 6RD prefix length are configured.</p>
</p><p><p>A 6RD prefix is the IPv6 prefix assigned by a carrier for a 6RD address. The 6RD delegated prefix is calculated by combining the 6RD prefix and part or all bits of an IPv4 address. The 6RD delegated prefix is used to assign IPv6 address prefixes to devices or hosts in a 6RD domain.</p>
<p>The 6RD prefix for each 6RD domain must be unique.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ipv4-prefix+length"><b><span class="cmdname">ipv4-prefix length</span></b></a> <i><span class="varname">ipv4-prefix-length</span></i></span></span><p><p>The IPv4 prefix length of the 6RD tunnel is configured.</p>
</p><p><p>The IPv4 prefix length indicates the number of high-order bits to be deleted from the source tunnel address (an IPv4 address). The remaining bits of the IPv4 address and the 6RD prefix together form the 6RD delegated prefix.</p>
<p>You are advised to set <i><span class="varname">ipv4-prefix-length</span></i> to 0 when the carrier network is an IPv4 network. On an IPv4 carrier network, the source tunnel address is entirely embedded in the 6RD delegated prefix, which is used to search for the destination tunnel address.</p>
<p>The IPv4 prefix length of the 6RD tunnel in each 6RD domain must be unique.</p>
<p>The 6RD delegated prefix can be automatically calculated based on the configured source tunnel address or source interface, 6RD prefix, IPv6 prefix length, and IPv4 prefix length. You can run the <a href="cmdqueryname=display+this+interface"><b><span class="cmdname">display this interface</span></b></a> command in the tunnel interface view to check the calculated 6RD delegated prefix.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ipv6+enable"><b><span class="cmdname">ipv6 enable</span></b></a></span></span><p><p>IPv6 is enabled on the interface.</p>
</p></li><li><span>Run <a href="cmdqueryname=ipv6+address"><b><span class="cmdname">ipv6 address</span></b></a> { <i><span class="varname">ipv6-address prefix-length</span></i> | <i><span class="varname">i</span></i><i><span class="varname">pv6-address-mask</span></i> }</span><p><p>An IPv6 address is configured for the tunnel interface, and the address prefix is the 6RD delegated prefix.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=border-relay+address"><b><span class="cmdname">border-relay address</span></b></a> <i><span class="varname">br-ipv4-address</span></i></span> The IPv4 address of the 6RD BR is configured.</span><p><p>The IPv4 address of the 6RD BR needs to be configured on a 6RD CE only in a relay scenario where a 6RD domain interworks with a native IPv6 network.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172365291__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verify the configuration.</h4><p>After configuring the 6RD tunnel, check the configurations.</p>
<p>Run the <a href="cmdqueryname=display+ipv6+interface+tunnel"><b><span class="cmdname">display ipv6 interface tunnel</span></b></a> <i><span class="varname">interface-number</span></i> command to check the IPv6 attribute on the tunnel interface.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_6o4tnl_cfg_0000.html">IPv6 over IPv4 Tunnel Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_6o4tnl_cfg_0004.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_6o4tnl_cfg_0008.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>