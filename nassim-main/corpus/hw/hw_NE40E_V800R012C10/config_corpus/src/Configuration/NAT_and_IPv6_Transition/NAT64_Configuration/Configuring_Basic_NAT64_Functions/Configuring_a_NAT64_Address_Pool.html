
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a NAT64 Address Pool">
<meta name="abstract" content="You can create a NAT64 address pool and assign available public IPv4 address segments to a specified NAT64 instance to translate between private IPv6 addresses and public IPv4 addresses.">
<meta name="description" content="You can create a NAT64 address pool and assign available public IPv4 address segments to a specified NAT64 instance to translate between private IPv6 addresses and public IPv4 addresses.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0006.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT64">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT64">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT64">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT64">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374898">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a NAT64 Address Pool</title>
</head>
<body><a name="EN-US_TASK_0172374898"></a><a name="EN-US_TASK_0172374898"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a NAT64 Address Pool</h1>
<div class="taskbody"><p>You can create a NAT64 address pool and assign available public IPv4 address segments to a specified NAT64 instance to translate between private IPv6 addresses and public IPv4 addresses.</p>
<div class="context"><a name="EN-US_TASK_0172374898__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">A NAT64 address pool is essential to NAT64 implementation. When IPv6 user data packets are sent to a NAT64 CGN device, an IPv4 address must be allocated from the NAT64 address pool to the packets so that the packets are transmitted over an IPv4 network. NAT64 supports the following address translation methods:<ul><li><p>Port address translation (PAT): NAT64 translates both IP addresses and port numbers between private and public networks. PAT implements more efficient IP address sharing and is the most commonly used mode in address translation.</p>
</li><li><p>No-Port Address Translation (No-PAT): Only the IP address in a packet is replaced.</p>
</li></ul>
</div>
<div class="p">The following address translation modes are supported based on NAT64 address translation methods:<ul><li>Symmetric mode: also called the 5-tuple mode. A 5-tuple entry contains a source IP address, source port number, protocol type, destination IP address, and destination port number and is used to allocate addresses and filter packets. If packets carrying the same source IP address and port number but different destination IP addresses and port numbers are translated by a device using NAT64, the source IP address and port number in the packets are translated into different external IP addresses and port numbers. In addition, the device allows only the external network hosts with these destination IP addresses to use the translated IP addresses and port numbers to visit internal network hosts.</li><li>Full-cone mode: also known as the 3-tuple mode that is not concerned with destination addresses or destination port numbers. In this mode, a device assigns IP addresses and filters packets based on the source address, source port number, and protocol type. If packets carrying the same source IP address and port number are translated by a device using NAT64, the source IP address and port number in the packets are translated into the same external IP address and port number. In addition, the device allows external network hosts to use the translated IP addresses and port numbers to visit internal network hosts.</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172374898__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=nat64+instance"><b><span class="cmdname">nat64 instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <strong><span>id</span></strong> <i><span class="varname">id</span></i> ]</span></span><p><p>The NAT64 instance view is displayed.</p>
</p></li><li><span>Create a NAT64 address pool and specify the mode of assigning address ranges. Perform either of the following operations:</span><p><ul><li>Run the <a href="cmdqueryname=nat64+address-group"><b><span class="cmdname">nat64 address-group</span></b></a> <i><span class="varname">address-group-name</span></i> <strong><span>group-id</span></strong> <i><span class="varname">group-id</span></i> <i><span class="varname">start-address</span></i> { <strong><span>mask</span></strong> { <i><span class="varname">mask-length</span></i> | <i><span class="varname">mask-ip</span></i> } | <i><span class="varname">end-address</span></i> } [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] [ <strong><span>no-pat</span></strong> ] command to create an address pool by specifying an address range in the NAT64 instance view.</li><li>Run the <a href="cmdqueryname=nat64+address-group"><b><span class="cmdname">nat64 address-group</span></b></a> <i><span class="varname">address-group-name</span></i> <strong><span>group-id</span></strong> <i><span class="varname">group-id</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] [ <strong><span>no-pat</span></strong> ] command to enter the NAT64 address pool view and run the <a href="cmdqueryname=section"><b><span class="cmdname">section</span></b></a> <i><span class="varname">section-id</span></i> <i><span class="varname">start-address</span></i> { <strong><span>mask</span></strong> { <i><span class="varname">mask-length</span></i> | <i><span class="varname">mask-ip</span></i> } | <i><span class="varname">end-address</span></i> } command to specify an address range in the NAT64 address pool view.</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>A NAT64 address pool cannot contain a DHCP server address. You need to properly allocate address segments. Otherwise, NAT traffic cannot be forwarded.</p>
</div></div>
</p></li><li><span>(Optional) Exclude a specific IP address or a range of IP addresses in an address range from NAT64 translation.</span><p><ul><li>If the <strong><a href="cmdqueryname=nat64+address-group"><b><span class="cmdname">nat64 address-group</span></b></a></strong> command is used to allocate addresses from an address pool, run the <strong><a href="cmdqueryname=nat64+address-group"><b><span class="cmdname">nat64 address-group</span></b></a></strong> <em><i><span class="varname">address-group-name</span></i></em><i><span class="varname"> </span></i><strong><a href="cmdqueryname=exclude-ip-address"><b><span class="cmdname">exclude-ip-address</span></b></a></strong> <em><i><span class="varname">start-address</span></i></em> [ <em><i><span class="varname">end-address</span></i></em> ] command.</li><li>If the <strong><a href="cmdqueryname=section"><b><span class="cmdname">section</span></b></a></strong> command is used to allocate addresses from an address pool, run the <strong><a href="cmdqueryname=section"><b><span class="cmdname">section</span></b></a></strong> <em><i><span class="varname">section-id</span></i></em> <strong><a href="cmdqueryname=exclude-ip-address"><b><span class="cmdname">exclude-ip-address</span></b></a></strong><b><span class="cmdqueryname"> </span></b><em><i><span class="varname">start-address</span></i></em><i><span class="varname"> </span></i>[ <em><i><span class="varname">end-address</span></i></em> ] command.</li></ul>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=nat64+filter+mode+full-cone"><b><span class="cmdname">nat64 filter mode full-cone</span></b></a></span><p><p>The full-cone mode (3-tuple mode) is configured for all addresses in the NAT64 instance.</p>
</p><p><p>By default, the address translation mode is the symmetric (5-tuple) mode.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0005.html">Configuring Basic NAT64 Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0007.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0006.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>