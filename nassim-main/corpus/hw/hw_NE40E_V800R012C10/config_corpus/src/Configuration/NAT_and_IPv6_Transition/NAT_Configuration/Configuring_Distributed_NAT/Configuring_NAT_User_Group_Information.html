
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring NAT User Group Information">
<meta name="abstract" content="In a distributed NAT scenario, the NAT device identifies user traffic from each CPE by checking user identities. Therefore, NAT user group information must be configured on the NAT device.">
<meta name="description" content="In a distributed NAT scenario, the NAT device identifies user traffic from each CPE by checking user identities. Therefore, NAT user group information must be configured on the NAT device.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0068_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0070_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001092709514">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring NAT User Group Information</title>
</head>
<body><a name="EN-US_TASK_0000001092709514"></a><a name="EN-US_TASK_0000001092709514"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring NAT User Group Information</h1>
<div class="taskbody"><p>In a distributed NAT scenario, the NAT device identifies user traffic from each CPE by checking user identities. Therefore, NAT user group information must be configured on the NAT device.</p>
<div class="context"><a name="EN-US_TASK_0000001092709514__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_context749379150214109"><p id="EN-US_TASK_0000001092709514__en-us_task_0172374505_p1971268042214109">Multiple associations between user groups and NAT instances can be configured in a domain. After a user goes online, the system checks the number of users in each user group and adds the user to the group that has the least number of members so that the user's traffic can be allocated to the least busy NAT instance to implement load balancing among NAT instances.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001092709514__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001092709514__en-us_task_0172374505_steps17571338214109"><li id="EN-US_TASK_0000001092709514__en-us_task_0172374505_step2008403944214109"><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmd1097123262214109">Configure a user access mode.</span><p><p id="EN-US_TASK_0000001092709514__en-us_task_0172374505_p1830912380214109">For detailed configurations, see the <span class="keyword" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_keyword1070706602214415">HUAWEI</span> <span class="keyword" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_keyword380889332214415">NE40E</span> Configuration Guide - User Access.</p>
</p></li><li id="EN-US_TASK_0000001092709514__en-us_task_0172374505_step986553982214109"><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmd291536987214109">Associate a NAT user group with a NAT instance.</span><ol type="a" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_substeps2134393045214109"><li class="substepexpand" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_substep359612225214109"><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmd248517130214415">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdname181752188214415">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0000001092709514__en-us_task_0172374505_p7678449214415">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_substep238719507214109"><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmd131727148214415">Run <span><a href="cmdqueryname=user-group"><b><span class="cmdname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdname228433906214415">user-group</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_varname307949013214415">group-name</span></i></span></span><p><p id="EN-US_TASK_0000001092709514__en-us_task_0172374505_p940911369214415">A new user group is created.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_substep1872294458214109"><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmd1528647920214415">Run <span><a href="cmdqueryname=aaa"><b><span class="cmdname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdname245602072214415">aaa</span></b></a></span></span><p><p id="EN-US_TASK_0000001092709514__en-us_task_0172374505_p1553645342214415">The AAA view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_substep466260174214109"><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmd1665641668214415">(Optional) Run <span><a href="cmdqueryname=cut+access-user+cgn-pub-user"><b><span class="cmdname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdname452287041214415">cut access-user cgn-pub-user</span></b></a> [ <strong><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdparmname728948728214415">dhcp</span></strong> | <strong><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdparmname1039596058214415">exclude-dhcp</span></strong> ]</span></span><p><p id="EN-US_TASK_0000001092709514__en-us_task_0172374505_p1815141747214415">CGN public network user offline is triggered to make the user access the network with a private IP address.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_substep3814102923819"><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmd198144294387">(Optional) Run <a href="cmdqueryname=load-balance+user-group+refer-service-location"><b><span class="cmdname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdname5814202913816">load-balance user-group refer-service-location</span></b></a></span><p><p id="EN-US_TASK_0000001092709514__en-us_task_0172374505_p1345619276184">The device is enabled to check the active/standby status of service-location groups when performing load balancing in scenarios where multiple user groups are configured in the AAA domain and bound to a NAT instance.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_substep579995402214109"><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmd130327772214415">Run <span><a href="cmdqueryname=domain"><b><span class="cmdname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdname328609730214415">domain</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_varname1960809070214415">domain-name</span></i></span></span><p><p id="EN-US_TASK_0000001092709514__en-us_task_0172374505_p1357630374214415">The AAA domain view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_substep1992316111214109"><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmd1291853553214109">Run <a href="cmdqueryname=user-group"><b><span class="cmdname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdname2075565671214109">user-group</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_varname88782191204">user-group-name</span></i> <a href="cmdqueryname=bind"><b><span class="cmdname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdname1058015522214109">bind</span></b></a> <a href="cmdqueryname=nat+instance"><b><span class="cmdname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdname833559233214109">nat instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_varname1760098585214109">instance-name</span></i><span> [ <strong><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdparmname222819561174">ip-pool</span></strong> <i><span class="varname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_varname9298131385">pool-name</span></i> ]</span></span><p><p id="EN-US_TASK_0000001092709514__en-us_task_0172374505_p87253261242">A NAT instance is bound to the NAT user group.</p>
</p><p><div class="note" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_note1510793630214109"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0000001092709514__en-us_task_0172374505_ul61897282214109"><li id="EN-US_TASK_0000001092709514__en-us_task_0172374505_li1216235561214109">One user group can be bound to only one NAT instance.</li><li id="EN-US_TASK_0000001092709514__en-us_task_0172374505_li2006741839214109">One NAT instance can be bound to multiple user groups.</li><li id="EN-US_TASK_0000001092709514__en-us_task_0172374505_li152751607919">If a static source tracing algorithm policy has been applied to a NAT instance, you are advised to specify the <a href="cmdqueryname=ip-pool"><b><span class="cmdname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdname18136723126">ip-pool</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_varname162021912185918">pool-name</span></i> parameter in the command to bind the private address pool whose address segment is a subset of the static source tracing address segments to the NAT instance. In this way, private IP addresses are assigned from the address pool specified by the NAT instance, and the address pool configured in the domain or the address pool delivered by the RADIUS server will not be used.</li></ul>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_substep530176150214109"><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmd760901647214109">(Optional) Run <a href="cmdqueryname=public-address+nat+enable"><b><span class="cmdname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdname1376262710214109">public-address nat enable</span></b></a></span><p><p id="EN-US_TASK_0000001092709514__en-us_task_0172374505_p2061767693214109">NAT is implemented for users who go online from a domain before user data is forwarded based on a routing table in distributed CGN scenarios.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_substep837423466214109"><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmd2115854271214109">(Optional) Run <span><a href="cmdqueryname=public-address+nat-instance-down"><b><span class="cmdname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdname188612838214415">public-address nat-instance-down</span></b></a></span></span><p><p id="EN-US_TASK_0000001092709514__en-us_task_0172374505_p311334280214109">The function of allowing CGN users to access the network with a public IP address in the event of a CGN service board fault is enabled.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_substep1276232564214109"><span id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmd450768692214415">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001092709514__en-us_task_0172374505_cmdname1619403882214415">commit</span></b></a></span></span><p><p id="EN-US_TASK_0000001092709514__en-us_task_0172374505_p250495168214415">The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0068_1.html">Configuring Distributed NAT
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0070_1.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>