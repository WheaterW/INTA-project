
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Single-Chassis Inter-Board Hot Backup for NAT">
<meta name="abstract" content="You can configure the single-chassis inter-board hot backup function to improve the reliability of a NAT device.">
<meta name="description" content="You can configure the single-chassis inter-board hot backup function to improve the reliability of a NAT device.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0035_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0065_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001139739801">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Single-Chassis Inter-Board Hot Backup for NAT</title>
</head>
<body><a name="EN-US_TASK_0000001139739801"></a><a name="EN-US_TASK_0000001139739801"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Single-Chassis Inter-Board Hot Backup for NAT</h1>
<div class="taskbody"><p>You can configure the single-chassis inter-board hot backup function to improve the reliability of a NAT device.</p>
<div class="context"><a name="EN-US_TASK_0000001139739801__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_context1803481670214110"><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p1532233932214110">When a NAT device is equipped with two service boards, you can configure the active and standby service boards in the same chassis on the NAT device to implement inter-board backup on the single device. The inter-board backup mechanism verifies that the data stored on the active NAT service board is consistent with that stored on the standby NAT service board. If the active NAT service board fails, an active/standby NAT service board switchover is performed to ensure that services are running properly. In this situation, users are unaware of this fault.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001139739801__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001139739801__en-us_task_0172374553_steps908838858214110"><li id="EN-US_TASK_0000001139739801__en-us_task_0172374553_step343342151214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd262972368214110">(Optional) Configure value-added service management (VSM) high availability (HA) hot backup functions.</span><ol type="a" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substeps1827574824214110"><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep32419126214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd1518525822214415">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname2134142782214415">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p1090442960214415">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep719074243711"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd3190194219378">Run <a href="cmdqueryname=service-ha+hot-backup+enable"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname131901642203714">service-ha hot-backup enable</span></b></a></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p1922034416305">HA hot standby is enabled.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep1304114633214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd1036535549214110">Run <span><a href="cmdqueryname=service-ha+delay-time"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname960403030214110">service-ha delay-time</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_varname1734444489214415">delay-time</span></i></span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p17621728153319">The delay time is set for VSM HA hot backup.</p>
</p><p><div class="note" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_note818289087214110"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p499409821214110">On a device with the <a href="cmdqueryname=service-ha+delay-time"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname1765956752214415">service-ha delay-time</span></b></a> command run, session entries can be backed up only if the active time of session traffic is longer than the delay time configured for VSM HA hot backup.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep194005216398"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd4400428391">(Optional) Run <a href="cmdqueryname=service-ha+preempt-time"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname1140020218398">service-ha preempt-time</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_varname44001524393">preempt-time</span></i></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p121503443111">The delay for active/standby revertive switching is set.</p>
</p><p><div class="note" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_note1140018217399"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p20400162103918">When the active service board recovers, it takes over services from the standby service board after the specified delay elapses.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep1877725609214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd1573022974214415">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname192112545214415">commit</span></b></a></span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p232786342214415">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0000001139739801__en-us_task_0172374553_step732428828214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd555047592214110">Configure a service-location group that implements single-chassis inter-board VSM HA hot backup.</span><ol type="a" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substeps1260008858214110"><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep476992276214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd537432463214415">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname779934436214415">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p2068114831214415">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep1206229198214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd350051055214415">Run <span><a href="cmdqueryname=service-location"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname425172335214415">service-location</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_varname378149542214415">service-location-id</span></i></span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p698129597214415">A service-location group is created, and its view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep6329452161119"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd17329652161111"><span>Run <a href="cmdqueryname=location"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname8329105251110">location</span></b></a> <strong><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_span210882982910">slot</span></strong> <i><span class="varname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_varname910892962912">slot-id</span></i> <strong><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_span11108172992910">backup</span></strong> <strong><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_span1110852914295">slot</span></strong> <i><span class="varname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_varname2108152932913">backup-slot-id</span></i></span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p989110617353">The service-location group is bound to the CPUs of the active and standby service boards.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep950482124214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd1333996938214415">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname310693132214415">commit</span></b></a></span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p2103480941214415">The configuration is committed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep1594097754214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd1902069467214415">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname966088727214415">quit</span></b></a></span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p189638232214415">Return to the system view.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0000001139739801__en-us_task_0172374553_step1813369464214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd212663224214110">Create a service-instance group and bind it to the service-location group.</span><ol type="a" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substeps1910303791214110"><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep750857614214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd193310191214415">Run <span><a href="cmdqueryname=service-instance-group"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname331009720214415">service-instance-group</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_varname279790778214415">service-instance-group-name</span></i></span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p516823105214415">A service-instance group is created, and its view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep1436409107214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd5192825172014">Run <a href="cmdqueryname=service-location"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname211774009214110">service-location</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_varname650642161214110">service-location-id</span></i> [ <strong><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdparmname168401320174315">weight</span></strong> <i><span class="varname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_varname511261417439">weight-value</span></i> ]</span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p1477431711209">The service-location group is bound to the service-instance group.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep1473312402214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd716706606214415">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname2031387963214415">commit</span></b></a></span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p467414675214415">The configuration is committed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep1108386536214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd269846175214415">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname8530493214415">quit</span></b></a></span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p1588755777214415">Return to the system view.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0000001139739801__en-us_task_0172374553_step391900198214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd334282437214110">Bind a NAT instance to a service-instance group.</span><ol type="a" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substeps1102788465214110"><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep1021982100214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd263765166214415">Run <span><a href="cmdqueryname=nat+instance"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname513799257214415">nat instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_varname277140670214415">instance-name</span></i> [ <strong><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdparmname534073555214415">id</span></strong> <i><span class="varname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_varname1291972975214415">id</span></i> ]</span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p1507386566214415">The NAT instance view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep2051008895214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd2046480268214110">Run <span><a href="cmdqueryname=service-instance-group"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname727347510214415">service-instance-group</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_varname1377192327214415">service-instance-group-name</span></i></span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p580412219114">The NAT instance is bound to the service-instance group.</p>
<div class="note" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_note1941232901114"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p11412182941113">Each NAT instance group can only be bound to a single service-instance group. Different NAT instance groups can be bound to the same service-instance group.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_substep1921254428214110"><span id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmd1436342478214415">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001139739801__en-us_task_0172374553_cmdname1871751954214415">commit</span></b></a></span></span><p><p id="EN-US_TASK_0000001139739801__en-us_task_0172374553_p1353073572214415">The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0035_1.html">Configuring NAT Reliability
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0065_1.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>