
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the NAT Alarm Function">
<meta name="abstract" content="You can configure the NAT alarm function to strengthen the device administrator's capability to monitor NAT services in real time.">
<meta name="description" content="You can configure the NAT alarm function to strengthen the device administrator's capability to monitor NAT services in real time.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0046.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0047.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0050_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374570">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the NAT Alarm Function</title>
</head>
<body><a name="EN-US_TASK_0172374570"></a><a name="EN-US_TASK_0172374570"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the NAT Alarm Function</h1>
<div class="taskbody"><p>You can configure the NAT alarm function to strengthen the device administrator's capability to monitor NAT services in real time.</p>
<div class="context"><a name="EN-US_TASK_0172374570__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>NAT sessions and ports available are important resources for NAT services. If these resources are exhausted, NAT cannot be performed for traffic sent by newly logged-in users. Therefore, the usage of these resources must be properly monitored. The NAT alarm function enables a NAT device to generate an alarm when resource usage reaches a specified alarm threshold, which instructs the customer to implement capacity expansion or service adjustment.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172374570__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Set a maximum number of alarm packets that a NAT service board sends every second.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In VS mode, this configuration process is supported only by the admin-VS.</p>
</div></div>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+alarm+rate"><b><span class="cmdname">nat alarm rate</span></b></a> <em>threshold-value</em></span><p><p>The maximum number of alarm packets that a NAT service board can send every second is set.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure a device to generate an alarm when the number of NAT sessions on a NAT service board reaches the alarm threshold.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In VS mode, this configuration process is supported only by the admin-VS.</p>
</div></div>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=undo+nat+alarm+session-number+log+trap+disable"><b><span class="cmdname">undo nat alarm session-number</span></b></a> { <strong><span>log</span></strong> | <strong><span>trap</span></strong> } <strong><span>disable</span></strong></span><p><p>The trap or log function for the total number of NAT sessions is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+alarm+session-number+threshold"><b><span class="cmdname">nat alarm session-number threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span><p><p>An alarm threshold is set for the total number of sessions on a service board.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Set an alarm threshold for user tables.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In VS mode, this configuration process is supported only by the admin-VS.</p>
</div></div>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=undo+nat+alarm+user-table+log+trap+disable"><b><span class="cmdname">undo nat alarm user-table</span></b></a> { <strong><span>log</span></strong> | <strong><span>trap</span></strong> } <strong><span>disable</span></strong></span><p><p>The log or trap function is enabled for user tables.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+alarm+user-table+threshold"><b><span class="cmdname">nat alarm user-table threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span><p><p>An alarm threshold is configured for user tables.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Set an alarm threshold for the port usage of a NAT PAT address pool.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Only the <span class="keyword">NE40E</span><span class="keyword">-M2K</span> and <span class="keyword">NE40E</span><span class="keyword">-M2K-B</span> support this configuration.</p>
</div></div>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+instance+id"><b><span class="cmdname">nat instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <strong><span>id</span></strong> <i><span class="varname">id</span></i> ]</span><p><p>The NAT instance view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=nat+alarm+port-number+log+trap+address-group+disable"><b><span class="cmdname">nat alarm port-number</span></b></a> { <strong><span>log</span></strong> | <strong><span>trap</span></strong> } <strong><span>address-group disable</span></strong></span><p><p>The log or trap function for the port usage of a public address pool is disabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+alarm+address-group+port-number+threshold"><b><span class="cmdname">nat alarm address-group port-number threshold</span></b></a><i><span class="varname"> threshold</span></i></span><p><p>An alarm threshold is set for the port usage based on the NAT address pool.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The PAT address pool on a value-added service processing board does not support alarms based on a single IP address.</p>
<p>Port usage of a NAT PAT address pool = Number of ports used by the public network addresses in the PAT address pool/Total number of ports available for the public network addresses in the PAT address pool</p>
</div></div>
</p></li></ol>
</li><li><span>Set an alarm threshold for the user-based port usage.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Only the <span class="keyword">NE40E</span><span class="keyword">-M2K</span> and <span class="keyword">NE40E</span><span class="keyword">-M2K-B</span> support this configuration.</p>
</div></div>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+instance+id"><b><span class="cmdname">nat instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <strong><span>id</span></strong> <i><span class="varname">id</span></i> ]</span><p><p>The NAT instance view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=nat+alarm+port-number+log+trap+user+enable"><b><span class="cmdname">nat alarm port-number</span></b></a> [ <strong><span>log</span></strong> | <strong><span>trap</span></strong> ] <strong><span>user enable</span></strong></span><p><p>The log or trap function for the port usage of users is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+alarm+user+port-number+threshold"><b><span class="cmdname">nat alarm user port-number threshold</span></b></a> <i><span class="varname">threshold</span></i></span><p><p>An alarm threshold is set for the user-based port usage.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The number of user-specific pre-allocated ports is equal to the number of ports configured using the <a href="cmdqueryname=port-range%EF%BC%88NAT%E5%AE%9E%E4%BE%8B%E8%A7%86%E5%9B%BE%EF%BC%89"><b><span class="cmdname">port-range</span></b></a> command run in the NAT instance view. Usage of user-specific ports is equal to the number of user-specific ports in use divided by the number of user-specific pre-allocated ports. The <a href="cmdqueryname=nat+alarm+user+port-number+threshold"><b><span class="cmdname">nat alarm user port-number threshold</span></b></a> command takes effect only after the <a href="cmdqueryname=port-range%EF%BC%88NAT%E5%AE%9E%E4%BE%8B%E8%A7%86%E5%9B%BE%EF%BC%89"><b><span class="cmdname">port-range</span></b></a> command is run in the NAT instance view. If usage of user-specific ports is greater than the alarm threshold <i><span class="varname">threshold-value</span></i> (80% by default), an alarm indicating that usage of user-specific ports exceeds the threshold is generated.</p>
</div></div>
</p></li></ol>
</li><li><span>Set an alarm threshold for No-PAT address pool usage.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+instance+id"><b><span class="cmdname">nat instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <strong><span>id</span></strong> <i><span class="varname">id</span></i> ]</span><p><p>The NAT instance view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=nat+alarm+no-pat+address-group+log+trap+disable"><b><span class="cmdname">nat alarm no-pat address-group</span></b></a> { <strong><span>log</span></strong> | <strong><span>trap</span></strong> } <strong><span>disable</span></strong></span><p><p>The log or trap function is disabled for the No-PAT public address pool.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+alarm+no-pat+address-group+threshold"><b><span class="cmdname">nat alarm no-pat address-group threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span><p><p>An alarm threshold is set for No-PAT address pool usage.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the log or trap function for CPU forwarding performance on dedicated boards.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Only the <span class="keyword">NE40E</span><span class="keyword">-M2K</span> and <span class="keyword">NE40E</span><span class="keyword">-M2K-B</span> support this configuration.</p>
</div></div>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In VS mode, this configuration process is supported only by the admin-VS.</p>
</div></div>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=vsm+alarm+cpu-performance+log+trap+disable"><b><span class="cmdname">vsm alarm cpu-performance</span></b></a> { <strong><span>log</span></strong> | <strong><span>trap</span></strong> } <strong><span>disable</span></strong></span><p><p>The log or trap function is disabled for CPU forwarding performance on the dedicated board.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vsm+alarm+cpu-performance+threshold"><b><span class="cmdname">vsm alarm cpu-performance threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span><p><p>An alarm threshold is set for CPU forwarding performance on the dedicated board.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure an alarm threshold for the address usage of the global static address pool.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Only the <span class="keyword">NE40E</span><span class="keyword">-M2K</span> and <span class="keyword">NE40E</span><span class="keyword">-M2K-B</span> support this configuration.</p>
</div></div>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+ip-pool+vpn-instance+no-pat+slave"><b><span class="cmdname">nat ip-pool</span></b></a> <i><span class="varname">pool-name</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] [ <strong><span>no-pat</span></strong> ] [ <strong><span>slave</span></strong> ]</span><p><p>A global static address pool is created, and its view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=nat+alarm+ip+log+trap+disable"><b><span class="cmdname">nat alarm ip</span></b></a> { <strong><span>log</span></strong> | <strong><span>trap</span></strong> } <strong><span>disable</span></strong></span><p><p>The log or trap function for the global static address pool is disabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+alarm+ip+threshold"><b><span class="cmdname">nat alarm ip threshold</span></b></a> <i><span class="varname">value</span></i></span><p><p>An alarm threshold for the global static address pool is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the upper and lower alarm thresholds for the global static address pool usage.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Only the <span class="keyword">NE40E</span><span class="keyword">-M2K</span> and <span class="keyword">NE40E</span><span class="keyword">-M2K-B</span> support this configuration.</p>
</div></div>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+ip-pool+vpn-instance+no-pat+slave"><b><span class="cmdname">nat ip-pool</span></b></a> <i><span class="varname">pool-name</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] [ <strong><span>no-pat</span></strong> ] [ <strong><span>slave</span></strong> ]</span><p><p>A global static address pool is created, and its view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=nat+alarm+ip+log+trap+disable"><b><span class="cmdname">nat alarm ip</span></b></a> { <strong><span>log</span></strong> | <strong><span>trap</span></strong> } <strong><span>disable</span></strong></span><p><p>The log or trap function for the global static address pool is disabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat-instance+ip+used-threshold+upper-limit+lower-limit"><b><span class="cmdname">nat-instance ip used-threshold upper-limit</span></b></a> <i><span class="varname">upper-value</span></i> <strong><span>lower-limit</span></strong> <i><span class="varname">lower-value</span></i></span><p><p>The upper and lower thresholds for the number of address segments in the global static address pool are set.</p>
</p><p><p>Using the default upper limit
and lower limit of an address segment in a global address pool is
recommended, and the difference between <i><span class="varname" id="EN-US_TASK_0172374570__en-us_cliref_0172385781_varname850798986214558">upper-value</span></i> and <i><span class="varname" id="EN-US_TASK_0172374570__en-us_cliref_0172385781_varname2018071051214558">lower-value</span></i> must be over 60. For example, <strong id="EN-US_TASK_0172374570__en-us_cliref_0172385781_b1510377501214558">nat-instance ip used-threshold upper-limit 90 lower-limit 20</strong>.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure an alarm threshold for the pre-allocation rate of reserved PCP ports in scenarios where a RADIUS authentication user with Huawei proprietary attributes 162 and 163 requests to go online in a NAT instance.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Only the <span class="keyword">NE40E</span><span class="keyword">-M2K</span> and <span class="keyword">NE40E</span><span class="keyword">-M2K-B</span> support this configuration.</p>
</div></div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Pre-allocation rate of reserved PCP ports in scenarios where a RADIUS authentication user with Huawei proprietary attributes 162 and 163 requests to go online in a NAT instance = Number of PCP ports pre-allocated to this user in the NAT instance/Number of available reserved PCP ports of all public IP addresses in the NAT address pool</p>
</div></div>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+instance+id"><b><span class="cmdname">nat instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <strong><span>id</span></strong> <i><span class="varname">id</span></i> ]</span><p><p>The NAT instance view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <strong>undo</strong> <a href="cmdqueryname=nat+alarm+port-number"><b><span class="cmdname">nat alarm port-number</span></b></a> { <strong>log</strong> | <strong>trap</strong> } <strong>pcp-reservation disable</strong></span><p><p>The log or trap function is enabled for the pre-allocation rate of the reserved PCP ports in scenarios where a RADIUS authentication user with Huawei proprietary attributes 162 and 163 requests to go online in the NAT instance. The log and tap functions are enabled by default.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+alarm+pcp-reservation+port-number+threshold"><b><span class="cmdname">nat alarm pcp-reservation port-number threshold</span></b></a> <em>threshold</em></span><p><p>An alarm threshold is specified for the pre-allocation rate of reserved PCP ports in scenarios where a RADIUS authentication user with Huawei proprietary attributes 162 and 163 requests to go online in the NAT instance.</p>
</p><p><p>In a distributed NAT scenario, when a RADIUS authentication user with Huawei proprietary attributes 162 and 163 requests to go online, PCP ports are pre-allocated to the user from a reserved PCP port range. If the pre-allocation rate of the reserved PCP ports is high, the user may fail to go online. If the alarm function for the threshold of the pre-allocation rate of the reserved PCP ports is enabled and the pre-allocation rate reaches the threshold, an alarm is reported. A proper threshold provides effective monitoring.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the device to generate an alarm when server mapping entry usage exceeds a specified threshold.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In VS mode, this configuration process is supported only by the admin-VS.</p>
</div></div>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=nat+alarm+server-map+log+trap+disable"><b><span class="cmdname">nat alarm server-map</span></b></a> [ <strong><span>log</span></strong> | <strong><span>trap</span></strong> ] <strong><span>disable</span></strong></span><p><p>The log or trap function for server mapping entries is disabled.</p>
<p>By default, the log and trap functions are enabled for server mapping entries. To disable the functions, run the <a href="cmdqueryname=nat+alarm+server-map+disable"><b><span class="cmdname">nat alarm server-map disable</span></b></a> command.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+alarm+server-map+threshold"><b><span class="cmdname">nat alarm server-map threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span><p><p>An alarm threshold for the usage of server mapping entries is set.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Run the <a href="cmdqueryname=display+nat+memory-usage+servermap"><b><span class="cmdname">display nat memory-usage servermap</span></b></a> command to query the number of used server mapping entries and the number of server mapping entries supported by the service board. Server mapping entry usage is as follows:</p>
<p>Server mapping entry usage = Number of used server mapping entries/Number of server mapping entries supported by the service board</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure an alarm threshold for users with upstream traffic but without downstream traffic.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+alarm+vsu-service-fault+unidirectional-traffic-user+log+trap"><b><span class="cmdname">nat alarm vsu-service-fault unidirectional-traffic-user</span></b></a> { <strong><span>log</span></strong> | <strong><span>trap</span></strong> } <strong><span>disable</span></strong></span><p><p>An alarm threshold is configured for users with upstream traffic but without downstream traffic.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0046.html">Maintaining NAT
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0047.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0050_1.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>