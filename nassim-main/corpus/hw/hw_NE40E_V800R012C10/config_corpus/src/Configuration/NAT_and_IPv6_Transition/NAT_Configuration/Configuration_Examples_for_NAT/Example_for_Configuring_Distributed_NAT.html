
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Distributed NAT">
<meta name="abstract" content="This section provides an example for configuring the distributed NAT function to implement multiple-to-multiple conversions between private addresses of home users and external public addresses, so that users can access the Internet after NAT. You can view the networking diagram to understand the configuration procedures. The example provides the networking requirements, configuration roadmap, configuration procedure, and configuration files.">
<meta name="description" content="This section provides an example for configuring the distributed NAT function to implement multiple-to-multiple conversions between private addresses of home users and external public addresses, so that users can access the Internet after NAT. You can view the networking diagram to understand the configuration procedures. The example provides the networking requirements, configuration roadmap, configuration procedure, and configuration files.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0056.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0057_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001140094137">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Distributed NAT</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001140094137"></a><a name="EN-US_TASK_0000001140094137"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Distributed NAT</h1>
<div class="taskbody"><p>This section provides an example for configuring the distributed NAT function to implement multiple-to-multiple conversions between private addresses of home users and external public addresses, so that users can access the Internet after NAT. You can view the networking diagram to understand the configuration procedures. The example provides the networking requirements, configuration roadmap, configuration procedure, and configuration files.</p>
<div class="context"><a name="EN-US_TASK_0000001140094137__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_context1335043453214110"><h4 class="sectiontitle">Networking Requirements</h4><div class="note" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_note98102031145210"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001140094137__en-us_task_0172374588_p18810531185214">Only the <span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1152414571330">NE40E</span><span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword3501321048">-M2K</span> and <span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword84407551658">NE40E</span><span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword18823101016414">-M2K-B</span> support this configuration.</p>
</div></div>
<p id="EN-US_TASK_0000001140094137__en-us_task_0172374588_p963006183214110">As shown in <a href="#EN-US_TASK_0000001140094137__en-us_task_0172374588_fig_dc_ne_cfg_nat_0012">Figure 1</a>, home users access the Internet through the BRAS using PPPoE, IPoE, web authentication, or other ways. As well as implementing user authentication, authorization, and accounting, the BRAS also provides the NAT service to translate home users' private IP addresses into public ones.</p>
<div class="p" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_p1881297350214110">IP addresses of interfaces are shown in <a href="#EN-US_TASK_0000001140094137__en-us_task_0172374588_fig_dc_ne_cfg_nat_0012">Figure 1</a>. The configuration requirements are as follows:<ul id="EN-US_TASK_0000001140094137__en-us_task_0172374588_ul1642257081214110"><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li2141454808214110">Household users of user group 1 can access the Internet.</li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li354212434214110">Household users of user group 2 cannot access the Internet.</li></ul>
</div>
<div class="fignone" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_fig_dc_ne_cfg_nat_0012"><a name="EN-US_TASK_0000001140094137__en-us_task_0172374588_fig_dc_ne_cfg_nat_0012"></a><a name="en-us_task_0172374588_fig_dc_ne_cfg_nat_0012"></a><span class="figcap"><b>Figure 1 </b>Network diagram of basic NAT applications</span><div class="note" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_note1543285071214110"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001140094137__en-us_task_0172374588_p684699831214110">Interfaces 1 and 2 in this example represent GE <span>0/2/0</span>.1 and GE <span>0/2/0</span>.2, respectively.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_image1656823384214110" src="images/fig_dc_ne_cfg_nat_0012.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001140094137__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_context1906074830214110"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001140094137__en-us_task_0172374588_p107359548214110">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001140094137__en-us_task_0172374588_ol1030727913214110"><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li1832752494214110">Configure basic NAT functions.</li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li1573290976214110">Configure NAT user information and RADIUS authentication on the BRAS.</li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li1776008250214110">Configure a NAT traffic diversion policy.</li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li2066495855214110">Configure a NAT conversion policy.</li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li712912313214110">Configure user-side interfaces.</li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li885219415116">Advertise UNRs to the dynamic routing protocol.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001140094137__1.4.3"></a><a name="1.4.3"></a>
<div class="p" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_context874673032214110"><h4 class="sectiontitle">Data Preparation</h4><ul id="EN-US_TASK_0000001140094137__en-us_task_0172374588_ul342881430214110"><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li1927508062214110">Name of a NAT instance</li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li474667076214110">NAT address pool's number and start and end IP addresses</li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li1924906252214110">User group name</li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li1584185420214110">ACL number and UCL number</li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li1494163362214110">Information about the NAT traffic diversion policy</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001140094137__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001140094137__en-us_task_0172374588_steps207198915214110"><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_step434964833317"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd1334964813339">Set the dedicated NAT working mode.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen75851222123912">&lt;<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword165851622183910">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b115857220395">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen35852022163915">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1058518225397"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword155851122163910">HUAWEI</span>] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b8585152243913">sysname BRAS_NAT</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1158512223912">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword16585192283914">*</span><span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword5585162273919">HUAWEI</span>] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1658532223912">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen38493744012">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword12701816194015"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1544412236419"> vsm on-board-mode disable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen3941113744119">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword42461543104118">*</span>BRAS_NAT]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b611893919414"> commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_setp_nat_basic"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd1990795301214110">Set the maximum number of sessions that can be created on the service board in slot <span>1</span> to 6M.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen809874815214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1799496708214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1591777340214110">license</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1116718770214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword2112602478214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-license] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b390610143214110">active nat session-table size 6 slot <span>1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen68168362486">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword209692034182211">*</span>BRAS_NAT-license] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b57258379485">active nat bandwidth-enhance 40 slot <span>1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen151918193236">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword8626131912231">*</span>BRAS_NAT-license]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b156261419112315"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1598867712214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword794579554214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-license]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b79335607214110"> quit</strong></pre>
</p></li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_step166247209168"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd176241420161619">Create a NAT instance named <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1090447324214415">nat1</strong> with ID 1 and bind the NAT instance to the service board.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen393973697214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1481690637214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b222090690214110">service-location 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen278721064214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword574387192214110">*</span>BRAS_NAT-service-location-1]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1660958668214110"> location slot <span>1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen424335480214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1009035470214110">*</span>BRAS_NAT-service-location-1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1893651459214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen925435863214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1046645345214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-service-location-1]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1399388694214110"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1205412835214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword247569229214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1707182945214110">service-instance-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1161867309214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword2022312556214110">*</span>BRAS_NAT-service-instance-group-group1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1181960004214110">service-location 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1288163608214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1638187815214110">*</span>BRAS_NAT-service-instance-group-group1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1606718088214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen998874391214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword53670343214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-service-instance-group-group1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b444754741214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1926994571214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1359850038214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b440063560214110">nat instance nat1 id 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen697518851214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1822575257214110">*</span>BRAS_NAT-nat-instance-nat1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b64945847214110">service-instance-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen136288952214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword632283939214110">*</span>BRAS_NAT-nat-instance-nat1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1749144001214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen76081398214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1743241136214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-nat-instance-nat1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b493106163214110">quit</strong></pre>
</p></li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_step456178814214110"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd480707108214110">Configure a NAT address pool and specify a range of IP addresses of 11.11.11.101 through 11.11.11.105 in the pool.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen2067894558214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword585426370214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1783448347214110">nat instance nat1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1786633453214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1353360433214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-nat-instance-nat1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1969881878214110">nat address-group address-group1 group-id 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1821214873211">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1921591273317">*</span>BRAS_NAT-nat-instance-nat1-nat-address-group-address-group1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1887915543211">section 1 11.11.11.101 11.11.11.105</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen156193018398">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword15146136123913">*</span>BRAS_NAT-nat-instance-nat1-nat-address-group-address-group1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1639642103920">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen290826087214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1164421217401"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-nat-instance-nat1-nat-address-group-address-group1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b363634565214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen799942843214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword449202243214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-nat-instance-nat1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1016122864214110">quit</strong></pre>
</p></li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_step_nat_user"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd1668255105214110">Configure NAT user information.</span><ol type="a" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_substeps251328573214110"><li class="substepexpand" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_substep13184174091516"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd121841340121510">Configure address pools.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen388674715814">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword674610311918"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b17512714141118"> ip pool pool1 bas local</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen117491520194">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword165563180120">*</span>BRAS_NAT-ip-pool-pool1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b333792261118">gateway 10.110.10.101 255.255.255.0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen16472192615919">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword17612319161216">*</span>BRAS_NAT-ip-pool-pool1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b17352192591117">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen177761728498">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword145313314125"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-ip-pool-pool1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b825512817111">section 1 10.110.10.1 10.110.10.100</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen02408311192">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword750114171216"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-ip-pool-pool1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b170913218116">dns-server 192.168.7.252</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen192581123495">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword268972161218">*</span>BRAS_NAT-ip-pool-pool1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1538463501115">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen20517653093">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword11927858121"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-ip-pool-pool1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1677811377116">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen333256594">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword46127151213"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1687634071111">ip pool pool2 bas local</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen14359205815912">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1573215227121">*</span>BRAS_NAT-ip-pool-pool2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1677264315119">gateway 10.110.12.101 255.255.255.0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen84441871101">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1966652331217">*</span>BRAS_NAT-ip-pool-pool2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b23367466115">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen14210161013108">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword10688158191212"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-ip-pool-pool2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b54721449151115">section 2 10.110.12.1 10.110.12.100</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1060501912106">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword672629141216"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-ip-pool-pool2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b64376527110">dns-server 192.168.7.252</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1565337104">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword19631834161215">*</span>BRAS_NAT-ip-pool-pool2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b68556541114">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen13216935151015">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword91771511181220"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-ip-pool-pool2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b78111588117">quit</strong></pre>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_substep1266152689214110"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd812785900214110">Configure a RADIUS server.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen349725810161">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword8497105801615"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b134971058131610"> radius-server group rd1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen14497958141613">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword449795817169">*</span>BRAS_NAT-radius-rd1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1615892518173">radius-server authentication 192.168.7.249 1645 weight 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen15219182916179">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword19740729131715">*</span>BRAS_NAT-radius-rd1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b547214407174">radius-server accounting 192.168.7.249 1646 weight 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen53784591716">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword177215501176">*</span>BRAS_NAT-radius-rd1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b084712403257">radius-server shared-key YsHsjx_202206</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen186867481820">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword52721013181814">*</span>BRAS_NAT-radius-rd1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b35971918121811">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1340322991814">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1456514189"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-radius-rd1]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b165901944141813"> radius-server type plus11</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen139701330191819">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1247655815185"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-radius-rd1]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b113072701920"> radius-server traffic-unit kbyte</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen5630183218185">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1138862212196"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-radius-rd1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1878162410194">quit</strong></pre>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_substep120719191518"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd976783519567">Configure authentication and accounting schemes.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1255582320214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword439085593214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1522030148214110">aaa</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen333151939214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword368652168214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1659796402214110">authentication-scheme auth1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1045965389214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1596367330214110">*</span>BRAS_NAT-aaa-authen-auth1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1400614501214110">authentication-mode radius</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1079721498214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1412069483214110">*</span>BRAS_NAT-aaa-authen-auth1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1070057355214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1423839276214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword78183881214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa-authen-auth1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1664704671214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen719272289214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword2078189166214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b512671652214110">accounting-scheme acct1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen317361683214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1767835776214110">*</span>BRAS_NAT-aaa-accounting-acct1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1665154295214110">accounting-mode radius</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1892777791214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword160305771214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa-accounting-acct1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1168069877214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen37023157214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword390535325214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa-accounting-acct1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1808766581214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen713001384214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword2135406888214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1789287506214110">domain isp1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1914357754214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1451440298214110">*</span>BRAS_NAT-aaa-domain-isp1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b903614040214110">authentication-scheme auth1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen336533336214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1404198714214110">*</span>BRAS_NAT-aaa-domain-isp1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b2046634562214110">accounting-scheme acct1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen908037337214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1847675279214110">*</span>BRAS_NAT-aaa-domain-isp1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b872882478214110">radius-server group rd1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen184481640142717">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword23284102717">*</span>BRAS_NAT-aaa-domain-isp1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1039734519272">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen998678612214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword49548548272"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa-domain-isp1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b306933877214110">ip-pool pool1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1088560393214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword763378435214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa-domain-isp1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1838443145214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1976256737214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword2121737480214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b299907735214110">domain isp2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen233918615214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword478057496214110">*</span>BRAS_NAT-aaa-domain-isp2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1350983129214110">authentication-scheme auth1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1304368317214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword734878152214110">*</span>BRAS_NAT-aaa-domain-isp2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1436274686214110">accounting-scheme acct1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen778378249214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword455719010214110">*</span>BRAS_NAT-aaa-domain-isp2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1267430800214110">radius-server group rd1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen10675039202818">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword622911402286">*</span>BRAS_NAT-aaa-domain-isp2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b5114643182815">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen121383732214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword131451455162817"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa-domain-isp2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1492846048214110">ip-pool pool2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1510773821214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1715710067214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa-domain-isp2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b661733254214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1228231830214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword526634664214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1851301710214110">quit</strong></pre>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_substep1120143049214110"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd1402574941214110">Configure user groups named <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b2043523913214415">group1</strong> and <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1493832681214415">group2</strong>.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1550857071214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1815760403214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b447888118214110">user-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen810300218214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword192343186502">*</span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1896871697214110">user-group group2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1162093105014">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword9489524145015">*</span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b3126030155019">commit</strong></pre>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_substep1497058320214110"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd1140775988214110">Specify the domains to which the users belong.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen840317225214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword247182582214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b222901968214110">aaa</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1811356975214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword62698945214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1168682145214110">domain isp1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen849783097214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1888210466713">*</span>BRAS_NAT-aaa-domain-isp1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1171167363214110">user-group group1 bind nat instance nat1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen18643105318711">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword98236015819">*</span>BRAS_NAT-aaa-domain-isp1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b193441761985">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen619357314214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword330395709214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa-domain-isp1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1661837101214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1116243877214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1307672623214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b955184619214110">domain isp2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen110880947214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword180115201285">*</span>BRAS_NAT-aaa-domain-isp2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b2081656806214110">user-group group2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen51871927584">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword17371183016818">*</span>BRAS_NAT-aaa-domain-isp2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b144713389819">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen477169042214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword762514738214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa-domain-isp2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b135475968214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen380693809214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1279163654214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-aaa] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1546811867214110">quit</strong></pre>
</p></li></ol>
</li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_step_nat_policy"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd1372301658214110">Configure a traffic classification rule, a NAT behavior, and a NAT traffic diversion policy. Then apply the policy.</span><ol type="a" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_substeps948904942214110"><li class="substepexpand" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_substep491343079214110"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd928506038214110">Configure ACLs numbered 6001 and 6002 and ACL rules numbered 1 and 2.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1761836852214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1248115214214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1282895128214110"> acl 6001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1195641883214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1505708931214110">*</span>BRAS_NAT-acl-ucl-6001] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b797041385214110">rule 1 permit ip source user-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1807034045214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword813249338214110">*</span>BRAS_NAT-acl-ucl-6001] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b277914869214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen344365752214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword709395725214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-acl-ucl-6001] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1255671957214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1840782076214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1569006830214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b2146884181214110"> acl 6002</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1220399857214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1803921434214110">*</span>BRAS_NAT-acl-ucl-6002] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b885640821214110">rule 2 permit ip source user-group group2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1468101031214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword834172705214110">*</span>BRAS_NAT-acl-ucl-6002] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1170597441214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen419168503214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1597517688214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-acl-ucl-6002] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b427574191214110">quit</strong></pre>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_substep668598158214110"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd1494800402214110">Configure a traffic classifier.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1238078069214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1599493831214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1456808559214110">traffic classifier c1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1286113566214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1659060083214110">*</span>BRAS_NAT-classifier-c1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1534243496214110">if-match acl 6001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen2011931739214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1810530661214110">*</span>BRAS_NAT-classifier-c1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1102356483214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1114758416214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword761539752214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-classifier-c1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1205114910214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1545653187214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword975850316214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b269401460214110">traffic classifier c2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen367090156214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword363718975214110">*</span>BRAS_NAT-classifier-c2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1024778292214110">if-match acl 6002</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1861464065214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1756828530214110">*</span>BRAS_NAT-classifier-c2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b2110998284214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen110336601214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword959442145214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-classifier-c2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1298443746214110">quit</strong></pre>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_substep854865303214110"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd1055549091214110">Configure two traffic behaviors: b1 and b2. The action of b1 binds traffic to the NAT instance named <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b882294410214415">nat1</strong>, and the action of b2 is deny.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1801367215214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword203399762214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1722982900214110">traffic behavior b1</strong> </pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen624987997214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1592161167214110">*</span>BRAS_NAT-behavior-b1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b589746957214110">nat bind instance nat1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen618352823214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1351846913214110">*</span>BRAS_NAT-behavior-b1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1812878393214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen2121193446214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword237556236214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-behavior-b1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1810448977214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen2105904182214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword304349552214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1916507946214110">traffic behavior b2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen377189802214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword569596034214110">*</span>BRAS_NAT-behavior-b2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b960955372214110">deny</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen294577860214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword301393500214110">*</span>BRAS_NAT-behavior-b2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b753181302214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1150772304214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1126516875214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-behavior-b2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b93311789214110">quit</strong></pre>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_substep719112954214110"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd93452562214110">Define a NAT policy to associate the ACL rule with the traffic behavior.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1911012033214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword2009605352214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b91802827214110">traffic policy p1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1737034543214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1534367600214110">*</span>BRAS_NAT-trafficpolicy-p1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b649696360214110">classifier c1 behavior b1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen341592206214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword481433193214110">*</span>BRAS_NAT-trafficpolicy-p1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b742861978214110">classifier c2 behavior b2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1034609135214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword452291156214110">*</span>BRAS_NAT-trafficpolicy-p1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b551808278214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen788576142214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1076214391214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-trafficpolicy-p1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1202557939214110">quit</strong></pre>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_substep790147883214110"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd2124080180214110">Apply the NAT traffic diversion policy in the system view.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1659970302214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1950825011214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b2808810214110">traffic-policy p1 inbound</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1405988482214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword165459113214110">*</span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1615230262214110">commit</strong></pre>
</p></li></ol>
</li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_step_nat_action"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd1661752639214110">Configure a NAT conversion policy to perform NAT for user traffic.</span><p><ol type="a" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_ol126721951175919"><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li767285135916">Configure an ACL numbered 3001 to match user traffic.<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen375373976214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1137191310214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1316471227214110"> acl 3001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen759565212214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword2012138819214110">*</span>BRAS_NAT-acl4-advance-3001] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1478032948214110">rule 10 permit ip source 10.110.10.0 0.0.0.255</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1680714004214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1261441902214110">*</span>BRAS_NAT-acl4-advance-3001] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1417744379214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1645115898214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword992306420214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-acl4-advance-3001] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1389558803214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li667142717010">Configure a NAT conversion policy.<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen217948113214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1533296573214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1674858644214110">nat instance nat1 id 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1039860309214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword50958466214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-nat-instance-nat1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1943061973214110">nat outbound 3001 address-group address-group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen329674399214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword540924624214110">*</span>BRAS_NAT-nat-instance-nat1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1273745260214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen339822542214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1150768223214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-nat-instance-nat1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1543744145214110">quit</strong></pre>
</li></ol>
</p></li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_step46216367265"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd962636192616">Configure a user-side sub-interface.</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen4186656142613">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword618635632611"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b218675611262"> interface Virtual-Template 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen13187145652615">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword4187175692617">*</span>BRAS_NAT-Virtual-Template1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1886093417274">ppp authentication-mode auto</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen582144315274">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword16821174322714">*</span>BRAS_NAT-Virtual-Template1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b555344812272">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1818765614267">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword118715612618"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-Virtual-Template1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1718745614260">quit</strong></pre>
</p><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen4903598288">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword290315914289"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b29034992814"> interface GigabitEthernet <span>0/2/0</span></strong><strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b173244317342">.1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen71001738162819">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword3845161062915">*</span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.1]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b6100438182817"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen598041562913">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword9677239102920"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.1]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b15602151652917"> user-vlan 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen07041655172910">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1870455520293"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.1-vlan-1-1]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b207047555297"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen931816139304">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword14318171313305"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.1]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1631820139307"> pppoe-server bind Virtual-Template 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen17520454183012">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword9890205413011">*</span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.1]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b8890105443015"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen244815312318">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword6163171014313"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.1]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b138394333114"> bas</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen13736175312">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword74648176312"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.1-bas]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b54641717123120"> access-type layer2-subscriber default-domain authentication isp1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen162551550164316">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword10252102734611">*</span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.1-bas] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b638555714463">authentication-method ppp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen01314344419">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword63018289465">*</span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.1-bas] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b163651859476">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen14641201714410">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword16983676463"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.1-bas] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b16121286473">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen101341020114414">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword15981178104616"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b165771910164715">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen0263112315442">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword19269121004612"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b2169014144714">interface GigabitEthernet <span>0/2/0</span></strong><strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b183721653103419">.2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen138987534418">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1293882964613">*</span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b164131161477">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen9972572445">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1724181254618"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b16985418164720">user-vlan 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen6761310134417">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword64681313461"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.2-vlan-2-2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b193091021134716">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen8589141214411">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword7250171434614"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b96761724154713">pppoe-server bind Virtual-Template 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen162463854517">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword57841332184620">*</span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1366232715471">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen653151020456">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword715151794616"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1239593018473">bas</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen10783191264517">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword20313185461"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.2-bas] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b177325331476">access-type layer2-subscriber default-domain authentication isp2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen12874192612457">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword935493518463">*</span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.2-bas] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b875143716475">authentication-method ppp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen121651933154514">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword194270362467">*</span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.2-bas] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b2443940184720">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen14828163813451">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1252032010468"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.2-bas]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b17994317475"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1754724444514">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1357602110463"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-GigabitEthernet<span>0/2/0</span>.2] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b17611545174718">quit</strong></pre>
</p></li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_step1632737025214110"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd865137809214110">Configure the route of the NAT address pool as the static black-hole route and advertise it to the routing protocol. In this example, OSPF with process ID as 1 is used. (Assume that OSPF is used as an IGP to advertise routes on the enterprise's internal network.)</span><p><pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen493521532214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1546847158214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1629645451214110"> ip route-static 11.11.11.0 24 null 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen176335473214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword192412411214110">*</span>BRAS_NAT] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b2049201545214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1479313319214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword2044374584214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1965947446214110"> ospf 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1401333488214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword993142883214110">*</span>BRAS_NAT-ospf-1]<strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b300534621214110"> import-route static</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen658815256214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword1222377397214110">*</span>BRAS_NAT-ospf-1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b166603960214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen846736788214110">[<span class="keyword" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_keyword500297264214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS_NAT-ospf-1] <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1118060971214110">quit</strong></pre>
</p></li><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_step_nat_display"><span id="EN-US_TASK_0000001140094137__en-us_task_0172374588_cmd1670822692214110">Verify the configuration.</span><p><ul id="EN-US_TASK_0000001140094137__en-us_task_0172374588_ul228691280214110"><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li298134105214110"><p id="EN-US_TASK_0000001140094137__en-us_task_0172374588_p660554284214110"><a name="EN-US_TASK_0000001140094137__en-us_task_0172374588_li298134105214110"></a><a name="en-us_task_0172374588_li298134105214110"></a>Check NAT user information on the device.</p>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1000411413214110">&lt;BRAS_NAT&gt; <strong id="EN-US_TASK_0000001140094137__en-us_task_0172374588_b1674209762214110">display nat user-information slot <span>1</span> verbose</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen1608949137214110">This operation will take a few minutes. Press 'Ctrl+C' to break ...             
Slot: <span>1</span>                                                               
Total number:  1.                                                               
  ---------------------------------------------------------------------------   
  User Type                             :  NAT444                               
  CPE IP                                :  10.110.10.100                        
  User ID                               :  2                                    
  VPN Instance                          :  -                                    
  Address Group                         :  address-group1                                     
  NAT Instance                          :  nat1                                  
  Public IP                             :  11.11.11.101                           
  Start Port                            :  -                                 
  Port Range                            :  -                                  
  Port Total                            :  -                                  
  Extend Port Alloc Times               :  0                                    
  Extend Port Alloc Number              :  0                                    
  First/Second/Third Extend Port Start  :  0/0/0                                
  Total/TCP/UDP/ICMP Session Limit      :  8192/10240/10240/512                 
  Total/TCP/UDP/ICMP Session Current    :  0/0/0/0                              
  Total/TCP/UDP/ICMP Rev Session Limit  :  8192/10240/10240/512                 
  Total/TCP/UDP/ICMP Rev Session Current:  0/0/0/0                              
  Total/TCP/UDP/ICMP Port Limit         :  0/0/0/0                              
  Total/TCP/UDP/ICMP Port Current       :  0/0/0/0                              
  Nat ALG Enable                        :  NULL                                 
  Token/TB/TP                           :  0/0/0                                
  Port Forwarding Flag                  :  Non Port Forwarding                  
  Port Forwarding Ports                 :  0 0 0 0 0                            
  Aging Time(s)                         :  -                                    
  Left Time(s)                          :  -                                    
  Port Limit Discard Count              :  0                                    
  Session Limit Discard Count           :  0                                    
  Fib Miss Discard Count                :  0                                    
  --&gt;Transmit Packets                   :  0                                    
  --&gt;Transmit Bytes                     :  0                                    
  --&gt;Drop Packets                       :  0                                    
  &lt;--Transmit Packets                   :  0                                    
  &lt;--Transmit Bytes                     :  0                                    
  &lt;--Drop Packets                       :  0                                    
  ---------------------------------------------------------------------------  </pre>
</li></ul>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_example2072208106214110"><a name="EN-US_TASK_0000001140094137__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul id="EN-US_TASK_0000001140094137__en-us_task_0172374588_ul1265489707214110"><li id="EN-US_TASK_0000001140094137__en-us_task_0172374588_li2097497791214110"><p id="EN-US_TASK_0000001140094137__en-us_task_0172374588_p1701307832214110"><a name="EN-US_TASK_0000001140094137__en-us_task_0172374588_li2097497791214110"></a><a name="en-us_task_0172374588_li2097497791214110"></a>BRAS configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001140094137__en-us_task_0172374588_screen369207125214110">#
sysname BRAS_NAT
#
vsm on-board-mode disable
#
radius-server group rd1
 radius-server authentication 192.168.7.249 1645 weight 0
 radius-server accounting 192.168.7.249 1646 weight 0
 radius-server shared-key %^%#x*CgITP4C<font style="font-size:8pt" Face="Courier New" >~</font>;q,*+DEW'JBWe#)"Q&amp;|7bX]b:Y&lt;{w'%^%#
 radius-server type plus11
 radius-server traffic-unit kbyte
#
interface Virtual-Template1
 ppp authentication-mode auto
#
interface GigabitEthernet2/0/0.1
 user-vlan 1
 pppoe-server bind Virtual-Template 1
 bas
  access-type layer2-subscriber default-domain authentication isp1
  authentication-method ppp
#
interface GigabitEthernet2/0/0.2
 user-vlan 2
 pppoe-server bind Virtual-Template 1
 bas
  access-type layer2-subscriber default-domain authentication isp2
  authentication-method ppp
#
ip pool pool1 bas local
 gateway 10.110.10.101 255.255.255.0
 section 1 10.110.10.1 10.110.10.100
 dns-server  192.168.7.252
#
ip pool pool2 bas local
 gateway 10.110.12.101 255.255.255.0
 section 2 10.110.12.1 10.110.12.100
 dns-server  192.168.7.252
#
license
 active nat session-table size 6 slot <span>1</span>
 active nat bandwidth-enhance 40 slot <span><span>1</span></span>
#
service-location 1
 location slot <span>1</span>
#
service-instance-group group1
 service-location 1
#
nat instance nat1 id 1
 service-instance-group group1
 nat address-group address-group1 group-id 1 
  section 1 11.11.11.101 11.11.11.105
 nat outbound 3001 address-group address-group1
#
user-group group1
user-group group2
#
acl number 3001
 rule 10 permit ip source 10.110.10.0 0.0.0.255
#
acl number 6001
 rule 1 permit ip source user-group group1
#
acl number 6002
 rule 2 permit ip source user-group group2
#
traffic classifier c1 operator or
 if-match acl 6001 precedence 1
#
traffic classifier c2 operator or
 if-match acl 6002 precedence 1
#
traffic behavior b1
 nat bind instance nat1
#
traffic behavior b2
 deny
#
traffic policy p1
 classifier c1 behavior b1 precedence 1 
 classifier c2 behavior b2 precedence 2
#
traffic-policy p1 inbound
#
aaa
 authentication-scheme auth1
  authentication-mode RADIUS
#
 accounting-scheme acct1
  accounting-mode RADIUS
#
 domain isp1
  authentication-scheme auth1
  accounting-scheme acct1
  radius-server group rd1
  ip-pool pool1
  user-group group1 bind nat instance nat1
#
 domain isp2
  authentication-scheme auth1
  accounting-scheme acct1
  radius-server group rd1
  ip-pool pool2
  user-group group2
#
ip route-static 11.11.11.0 255.255.255.0 NULL0
#
ospf 1
 import-route static
#
 return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0056.html">Configuration Examples for NAT
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0057_1.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>