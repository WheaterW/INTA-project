
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Centralized DS-Lite">
<meta name="abstract" content="This section provides an example for configuring centralized DS-Lite. Centralized DS-Lite allows private IPv4 users to pass through an IPv6 network to access a public IPv4 network.">
<meta name="description" content="This section provides an example for configuring centralized DS-Lite. Centralized DS-Lite allows private IPv4 users to pass through an IPv6 network to access a public IPv4 network.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0058.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0061.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0095.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="m00390128">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374755">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Centralized DS-Lite</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172374755"></a><a name="EN-US_TASK_0172374755"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Centralized DS-Lite</h1>
<div class="taskbody"><p>This section provides an example for configuring centralized DS-Lite. Centralized DS-Lite allows private IPv4 users to pass through an IPv6 network to access a public IPv4 network.</p>
<div class="context"><a name="EN-US_TASK_0172374755__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In <a href="#EN-US_TASK_0172374755__dc_ne_cfg_dslite_005701">Figure 1</a>, a home user's PC with a private IPv4 address accesses an IPv6 MAN through an IPv4 and IPv6 dual-stack-capable and DS-Lite-capable CPE. The CPE and DS-Lite device establish a DS-Lite tunnel. The CPE transmits traffic with the private IPv4 address along the DS-Lite tunnel to the DS-Lite device. The DS-Lite device decapsulates traffic, uses a Network Address Translation (NAT) technique to translate the private IPv4 address to a public IPv4 address, and forwards traffic to the IPv4 Internet. The DS-Lite device is equipped with DS-Lite boards in slots <span>1</span> and <span>2</span>, respectively. The DS-Lite device's GE <span>0/2/1</span> is connected to an IPv6 MAN, and GE <span>0/2/2</span> is connected to the Internet. IPv4 home users need to access the IPv4 Internet through the IPv6 MAN. The carrier provides 11 public IPv4 addresses from 11.11.11.100 to 11.11.11.110.</p>
<div class="p">The configuration requirements are as follows:<ul><li>The private IPv4 home users' PCs can access the IPv4 Internet through the IPv6 MAN.</li><li>The private IPv4 addresses of home users can be mapped to multiple public IP addresses in many-to-many translation mode.</li></ul>
</div>
<div class="fignone" id="EN-US_TASK_0172374755__dc_ne_cfg_dslite_005701"><a name="EN-US_TASK_0172374755__dc_ne_cfg_dslite_005701"></a><a name="dc_ne_cfg_dslite_005701"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for a DS-Lite application</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 and 2 in this example represent GE <span>0/2/1</span> and GE <span>0/2/2</span>, respectively. </p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_ne_ds-lite_cfg_0060.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172374755__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Configure basic license functions.</li><li>Configure a DS-Lite instance and bind it to a DS-Lite board.</li><li>Configure a local IPv6 address and a remote IPv6 address for a DS-Lite tunnel.</li><li>Configure a DS-Lite address pool with addresses ranging from 11.11.11.100 to 11.11.11.110.</li><li>Configure a traffic policy for the DS-Lite tunnel.</li><li>Bind the DS-Lite tunnel to the address pool.</li><li>Configure interfaces and a routing protocol.</li><li>Enable the device to advertise the local IP route to the IPv6 network and the address pool route to the IPv4 network.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172374755__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><ul><li><p>DS-Lite instance name (ds-lite1)</p>
</li><li><p>Slot IDs (<span>1</span> and <span>2</span>) of DS-Lite boards to which a DS-Lite instance is bound</p>
</li><li><p>Local IP address (2001:DB8::1) and remote IP address (2001:DB8:2::1) of a DS-Lite tunnel</p>
</li><li><p>DS-Lite address pool number (1) and address segment (11.11.11.100 to 11.11.11.110)</p>
</li><li><p>ACL6 rule numbers used in DS-Lite traffic classification and used to be bound to a DS-Lite address pool</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172374755__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure basic license functions.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>sysname DS-Lite</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite]<strong> vsm on-board-mode disable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>license</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-license] <strong>active ds-lite vsuf slot <span>1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-license] <strong>active ds-lite vsuf slot <span>2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-license] <strong>active nat session-table size 16 slot <span>1</span> </strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-license] <strong>active nat session-table size 16 slot <span>2</span> </strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-license]<strong> active nat bandwidth-enhance 40 slot <span>1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-license]<strong> active nat bandwidth-enhance 40 slot <span>2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-license] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-license] <strong>quit</strong></pre>
</p></li><li><span>Configure a DS-Lite instance and bind it to a DS-Lite board.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>service-location 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-service-location-1] <strong>location slot <span>1</span>  backup slot <span>2</span> </strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-service-location-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-service-location-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>service-instance-group 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-instance-group-1] <strong>service-location 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-instance-group-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-instance-group-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>ds-lite instance ds-lite1 id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-ds-lite-instance-ds-lite1] <strong>service-instance-group 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-ds-lite-instance-ds-lite1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite] <strong>commit</strong></pre>
</p></li><li><span>Configure a local IPv6 address and a remote IPv6 address for a DS-Lite tunnel.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>ds-lite instance ds-lite1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-ds-lite-instance-ds-lite1] <strong>local-ipv6 2001:DB8::1 prefix-length 128</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-ds-lite-instance-ds-lite1] <strong>remote-ipv6 2001:DB8:2::1 prefix-length 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-ds-lite-instance-ds-lite1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-ds-lite-instance-ds-lite1] <strong>quit</strong></pre>
</p></li><li><span>Configure a DS-Lite address pool with addresses ranging from 11.11.11.100 to 11.11.11.110.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>ds-lite instance ds-lite1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-ds-lite-instance-ds-lite1] <strong>ds-lite address-group group1 group-id 1 11.11.11.100 11.11.11.110</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-ds-lite-instance-ds-lite1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-ds-lite-instance-ds-lite1] <strong>quit</strong></pre>
</p></li><li><span>Configure a traffic policy for the DS-Lite tunnel.</span><ol type="a"><li class="substepexpand"><span>Configure IPv6 ACL-based traffic classification rules.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>acl ipv6 3500</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-acl6-basic-3500] <strong>rule permit ipv6 source 2001:DB8:2::1 64 destination 2001:DB8::1 128</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-acl6-basic-3500] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-acl6-basic-3500] <strong>quit</strong></pre>
</p></li><li class="substepexpand"><span>Configure a traffic classifier.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>traffic classifier c1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-classifier-c1] <strong>if-match ipv6 acl 3500</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-classifier-c1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-classifier-c1] <strong>quit</strong></pre>
</p></li><li class="substepexpand"><span>Configure a traffic behavior and bind the traffic behavior to the DS-Lite instance named <strong>ds-lite1</strong>.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>traffic behavior b1</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-behavior-b1] <strong>ds-lite bind instance ds-lite1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-behavior-b1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-behavior-b1] <strong>quit</strong></pre>
</p></li><li class="substepexpand"><span>Configure a DS-Lite traffic diversion policy and associate the IPv6 ACL-based traffic classification rule with the traffic behavior.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>traffic policy p1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-trafficpolicy-p1] <strong>classifier c1 behavior b1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-trafficpolicy-p1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-trafficpolicy-p1] <strong>quit</strong></pre>
</p></li><li class="substepexpand"><span>Apply the policy to GE <span>0/2/1</span>.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>interface GigabitEthernet <span>0/2/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-GigabitEthernet<span>0/2/1</span>] <strong>traffic-policy p1 inbound</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-GigabitEthernet<span>0/2/1</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-GigabitEthernet<span>0/2/1</span>] <strong>quit</strong></pre>
</p></li></ol>
</li><li><span>Bind the DS-Lite tunnel to the address pool.</span><ol type="a"><li class="substepexpand"><span>Configure the IPv6 ACL-based traffic classification rule and use the address pool named <strong>group1</strong> to translate the source addresses in the range of 2001:DB8:2::1/64 in tunnel packets.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>acl ipv6 3000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-acl6-adv-3000] <strong>rule permit ipv6 source 2001:DB8:2::1 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-acl6-adv-3000] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-acl6-adv-3000] <strong>quit</strong></pre>
</p></li><li class="substepexpand"><span>Associate the ACL rule with the DS-Lite address pool. In the DS-Lite instance named <strong>ds-lite1</strong>, bind the IPv6 ACL numbered 3000 to the address pool named <strong>group1</strong>.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite]<strong> ds-lite instance ds-lite1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-ds-lite-instance-ds-lite1] <strong>ds-lite outbound 3000 address-group group1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-ds-lite-instance-ds-lite1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-ds-lite-instance-ds-lite1] <strong>quit</strong></pre>
</p></li></ol>
</li><li><span>Configure interfaces and a routing protocol.</span><ol type="a"><li class="substepexpand"><span>Configure IS-IS.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>isis 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-isis-100] <strong>network-entity 10.1000.1000.1000.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-isis-100] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-isis-100] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>isis 1000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-isis-1000] <strong>network-entity 10.1000.1000.1002.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-isis-1000] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-isis-1000] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-isis-1000] <strong>quit</strong></pre>
</p></li><li class="substepexpand"><span>Configure the DS-Lite device's interface connected to the IPv6 network.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite]<strong> interface GigabitEthernet<span>0/2/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-GigabitEthernet<span>0/2/1</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-GigabitEthernet<span>0/2/1</span>] <strong>ipv6 address 2001:DB8:1::2:1 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-GigabitEthernet<span>0/2/1</span>] <strong>isis ipv6 enable 1000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-GigabitEthernet<span>0/2/1</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-GigabitEthernet<span>0/2/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>ipv6 route-static 2001:DB8:2:: 64 2001:DB8:1::2:2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite]<strong> commit</strong></pre>
</p></li><li class="substepexpand"><span>Configure the DS-Lite device's interface connected to the IPv4 network.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite]<strong> interface GigabitEthernet<span>0/2/2</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-GigabitEthernet<span>0/2/2</span>] <strong>ip address 192.168.10.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-GigabitEthernet<span>0/2/2</span>] <strong>isis enable 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-GigabitEthernet<span>0/2/2</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-GigabitEthernet<span>0/2/2</span>] <strong>quit</strong></pre>
</p></li></ol>
</li><li><span>Enable the device to advertise the local IP route to the IPv6 network and the address pool route to the IPv4 network. Import the local IP route and address pool route to the IS-IS routing table. In this example, UNRs are used as the local IP route and address pool route.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite]<strong> isis 1000</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-isis-1000]<strong> ipv6 import-route unr</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-isis-1000] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-isis-1000] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite]<strong> isis 100</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-isis-100]<strong> import-route unr</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DS-Lite-isis-100] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite-isis-100] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># After the configuration is complete, the DS-Lite device can establish connections with other devices. The CPE has a local IP address and a route to the address pool.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>display ipv6 routing-table 2001:DB8::1</strong></pre>
<pre class="screen">Routing Table : Public
Summary Count : 1
 Destination  : 2001:DB8::1                         PrefixLength : 128
 NextHop      : FE80::218:82FF:FE84:CCF             Preference   : 15
 Cost         : 10                                  Protocol     : Unr
 RelayNextHop : ::                                  TunnelID     : 0x0
 Interface    : InLoopBack0                         Flags        : D   </pre>
<p># Display detailed information about users of CPU 0 on the service board in slot <span>1</span>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DS-Lite] <strong>display nat user-information slot <span>1</span>  verbose</strong></pre>
<pre class="screen">This operation will take a few minutes. Press 'Ctrl+C' to break ...             
Slot: <span>1</span>                                                                
Total number:  1.                                                               
  ---------------------------------------------------------------------------   
  User Type                             :  DS-Lite                               
  CPE IP                                :  2001:DB8:2::1/128                        
  User ID                               :  -                                    
  VPN Instance                          :  -                                    
  Address Group                         :  group1                                    
  DS-Lite Instance                      :  ds-lite1                                  
  Public IP                             :  11.11.11.101                           
  Start Port                            :  1024                                 
  Port Range                            :  256                                  
  Port Total                            :  256                                  
  Extend Port Alloc Times               :  0                                    
  Extend Port Alloc Number              :  0                                    
  First/Second/Third Extend Port Start  :  0/0/0                                
  Total/TCP/UDP/ICMP Session Limit      :  8192/10240/10240/512                 
  Total/TCP/UDP/ICMP Session Current    :  0/0/0/0                              
  Total/TCP/UDP/ICMP Rev Session Limit  :  8192/10240/10240/512                 
  Total/TCP/UDP/ICMP Rev Session Current:  0/0/0/0                              
  Total/TCP/UDP/ICMP Port Limit         :  0/0/0/0                              
  Total/TCP/UDP/ICMP Port Current       :  0/0/0/0                              
  Nat ALG Enable                        :  NULL                                 
  Token/TB/TP                           :  0/0/0                                
  Port Forwarding Flag                  :  Non Port Forwarding                  
  Port Forwarding Ports                 :  0 0 0 0 0                            
  Aging Time(s)                         :  -                                    
  Left Time(s)                          :  -                                    
  Port Limit Discard Count              :  0                                    
  Session Limit Discard Count           :  0                                    
  Fib Miss Discard Count                :  0                                    
  --&gt;Transmit Packets                   :  0                                    
  --&gt;Transmit Bytes                     :  0                                    
  --&gt;Drop Packets                       :  0                                    
  &lt;--Transmit Packets                   :  0                                    
  &lt;--Transmit Bytes                     :  0                                    
  &lt;--Drop Packets                       :  0                                    
  ---------------------------------------------------------------------------  </pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172374755__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><p>DS-Lite device configuration file</p>
<pre class="screen">#                                                                               
 sysname DS-Lite  
#
vsm on-board-mode disable
#
license
 active ds-lite vsuf slot <span>1</span>
 active ds-lite vsuf slot <span>2</span>
 active nat session-table size 16 slot <span>1</span> 
 active nat session-table size 16 slot <span>2</span> 
 active nat bandwidth-enhance 40 slot <span>1</span>
 active nat bandwidth-enhance 40 slot <span>2</span>
#
service-location 1
 location slot <span>1</span>  backup slot <span>2</span> 
#
service-instance-group 1
 service-location 1
#     
ds-lite instance ds-lite1 id 1
 service-instance-group 1
 ds-lite address-group group1 group-id 1 11.11.11.100 11.11.11.110
 ds-lite outbound 3000 address-group group1
 local-ipv6 2001:DB8::1  prefix-length 128
 remote-ipv6 2001:DB8:2::1  prefix-length 64
#   
acl ipv6 number 3500                                                            
 rule 5 permit ipv6 source 2001:DB8:2::1 64 destination 2001:DB8::1 128  
#                                                                               
acl ipv6 number 3000                                                            
 rule 0 permit ipv6 source 2001:DB8:2::1/64                                           
#         
traffic classifier c1 operator or  
 if-match ipv6 acl 3500  precedence 1
#                                                                               
traffic behavior b1
 ds-lite bind instance ds-lite1                                                             
#    
traffic policy p1                                                               
 share-mode  
 classifier c1 behavior b1 precedence 1
#                                                                               
isis 100  
 network-entity 10.1000.1000.1000.00                                                                     
 import-route unr   
#                                                                               
isis 1000                                                                       
 network-entity 10.0000.0000.0002.000                                            
 #                                                                              
 ipv6 enable topology ipv6                                                  
 ipv6 import-route unr                                                          
 #                                                                              
#                                                                                
interface GigabitEthernet<span>0/2/1</span>                                                  
 undo shutdown                                                                  
 ipv6 enable                                                                                                             
 ipv6 address 2001:DB8:1::2:1/64 
 traffic-policy p1 inbound
 isis ipv6 enable 1000 
# 
interface GigabitEthernet<span>0/2/2</span>                                                  
 undo shutdown    
 ip address 192.168.10.2 255.255.255.0 
 isis enable 100
#
ipv6 route-static 2001:DB8:2:: 64 2001:DB8:1::2:2    
#    
return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0058.html">Configuration Examples for DS-Lite
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0061.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0095.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>