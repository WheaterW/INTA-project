
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Creating a NAT Policy Template">
<meta name="abstract" content="Configure NAT policy templates so that NAT configuration policies can be issued by a RADIUS server.">
<meta name="description" content="Configure NAT policy templates so that NAT configuration policies can be issued by a RADIUS server.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0014_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001139739787">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Creating a NAT Policy Template</title>
</head>
<body><a name="EN-US_TASK_0000001139739787"></a><a name="EN-US_TASK_0000001139739787"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Creating a NAT Policy Template</h1>
<div class="taskbody"><p>Configure NAT policy templates so that NAT configuration policies can be issued by a RADIUS server.</p>
<div class="context"><a name="EN-US_TASK_0000001139739787__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_context1217318512178"><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p1970013159214109">To enable a RADIUS server to issue NAT configuration policies, configure a NAT template on a device and define some NAT configuration policies, such as a limit on the number of NAT sessions in the template. After the RADIUS server issues a template name to the device, the device finds the configured NAT policy template and applies it to a specified NAT instance.</p>
<div class="note" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_note98102031145210"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p18810531185214">Only the <span class="keyword" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_keyword1152414571330">NE40E</span><span class="keyword" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_keyword3501321048">-M2K</span> and <span class="keyword" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_keyword84407551658">NE40E</span><span class="keyword" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_keyword18823101016414">-M2K-B</span> support this configuration.</p>
</div></div>
<div class="note" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_note1176373660214109"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p1577649338214109">The configurations in a NAT policy template take effect only after the NAT policy template is issued by a RADIUS server. The implementation is supported only in the distributed CGN scenario.</p>
</div></div>
<div class="note" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_note829037074214109"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p752200982214109">In VS mode, this configuration process is supported only by the admin-VS.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001139739787__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cfg_nat_policy"><li id="EN-US_TASK_0000001139739787__en-us_task_0172374499_step2091456946214109"><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmd262444382214415">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdname1158288705214109">system-view</span></b></a></span><p><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p491425843214415">The system view is displayed.</p>
</p></li><li id="EN-US_TASK_0000001139739787__en-us_task_0172374499_step759546141214109"><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmd1049194019214109">Run <a href="cmdqueryname=nat-policy+template"><b><span class="cmdname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdname1271952711214109">nat-policy template</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_varname25771917214109">template-name</span></i></span><p><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p1746011341786">A NAT policy template is created, and its view is displayed.</p>
</p></li><li id="EN-US_TASK_0000001139739787__en-us_task_0172374499_step283403815214109"><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmd1674146265214415">Run <a href="cmdqueryname=nat+session-limit+tcp+udp+icmp+total"><b><span class="cmdname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdname2028033285214109">nat session-limit</span></b></a> { <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname1577706084214109">tcp</span></strong> | <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname1996911021214109">udp</span></strong> | <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname896612568214109">icmp</span></strong> | <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname703850948214109">total</span></strong> } <i><span class="varname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_varname731904470214109">session-number</span></i></span><p><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p649063548214415">The maximum number of NAT sessions that can be established is set.</p>
</p></li><li id="EN-US_TASK_0000001139739787__en-us_task_0172374499_step1548039853214109"><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmd1141425966214109">Run <a href="cmdqueryname=nat+reverse-session-limit+tcp+udp+icmp+total"><b><span class="cmdname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdname1925899572214109">nat reverse-session-limit</span></b></a> { <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname1323572754214109">tcp</span></strong> | <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname504094843214109">udp</span></strong> | <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname562360877214109">icmp</span></strong> | <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname1407603484214109">total</span></strong> } <i><span class="varname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_varname108815784214109">session-number</span></i></span><p><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p3113197455">The maximum number of reverse NAT sessions that can be established for each user IP address is set.</p>
</p><p><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p150481571710">The limit on the number of forward or reverse NAT sessions configured in the NAT policy template is used. If a limit is set in the template, the setting takes effect. If no limit is set in the NAT policy template, the default value in the template takes effect. If a delivered NAT policy template is invalid, the setting in the NAT instance takes effect.</p>
<p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p1771122291712">Whether the limit on the number of forward or reverse NAT sessions takes effect is determined by the configuration in a NAT instance. If the limit function is disabled in the NAT instance, forward or reverse NAT sessions can be established without restriction.</p>
</p></li><li id="EN-US_TASK_0000001139739787__en-us_task_0172374499_step2081970642214109"><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmd582035876214109">Run <a href="cmdqueryname=nat+alg+all+ftp+pptp+rtsp+sip"><b><span class="cmdname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdname1608487107214109">nat alg</span></b></a> { <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname1570437365214109">all</span></strong> | <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname360656988214109">ftp</span></strong> | <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname1330645791214109">pptp</span></strong> | <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname1365842216214109">rtsp</span></strong> | <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname1478023159214109">sip</span></strong> }</span><p><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p1539718314399">The application protocol types that the NAT ALG detects are configured.</p>
</p><p><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p582563792214109">If the <a href="cmdqueryname=nat+alg"><b><span class="cmdname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdname1400106864214109">nat alg</span></b></a> command is run in both the NAT policy template and NAT instance views, both command instances take effect.</p>
</p></li><li id="EN-US_TASK_0000001139739787__en-us_task_0172374499_step32417818214109"><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmd1532904435214109">Run <a href="cmdqueryname=port-range+extended-port-range+extended-times"><b><span class="cmdname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdname1749662189214109">port-range</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_varname111265683214109">port-num</span></i> [ <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname542165385214109"> extended-port-range</span></strong> <i><span class="varname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_varname893179755214109">extended-port-range</span></i> <strong><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdparmname1191543843214109">extended-times</span></strong> <i><span class="varname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_varname857969296214109">extended-times</span></i> ]</span><p><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p5310955458">A port pre-allocation mode is configured.</p>
</p><p><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p1319378923214109">If the <a href="cmdqueryname=port-range"><b><span class="cmdname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdname545746132214109">port-range</span></b></a> command is run in both the NAT policy template view and NAT instance view, the configuration in the NAT policy template takes effect. If the command is not run in the NAT policy template view, the configuration in the NAT instance view takes effect.</p>
<p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p2076258741214109">If the <a href="cmdqueryname=port-single+enable"><b><span class="cmdname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdname867701655214109">port-single enable</span></b></a> command is run in the NAT instance view, the per-port allocation mode configured in the instance takes effect, regardless of whether the <a href="cmdqueryname=port-range"><b><span class="cmdname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdname1278694579214109">port-range</span></b></a> command is run in the NAT policy template view. If the <a href="cmdqueryname=port-single+enable"><b><span class="cmdname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdname760933704214109">port-single enable</span></b></a> command is not run in the NAT instance view, the <a href="cmdqueryname=port-range"><b><span class="cmdname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdname1245497660214109">port-range</span></b></a> command run in the NAT policy template view takes effect.</p>
</p></li><li id="EN-US_TASK_0000001139739787__en-us_task_0172374499_step1119958291214109"><span id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmd468699490214415">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001139739787__en-us_task_0172374499_cmdname678720328214109">commit</span></b></a></span><p><p id="EN-US_TASK_0000001139739787__en-us_task_0172374499_p1346419371214415">The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0010.html">Configuring Basic NAT Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0014_1.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>