
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the DS-Lite Alarm Function">
<meta name="abstract" content="You can configure the DS-Lite alarm function to strengthen the device administrator's capability to monitor DS-Lite services in real time.">
<meta name="description" content="You can configure the DS-Lite alarm function to strengthen the device administrator's capability to monitor DS-Lite services in real time.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0047.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0048.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0050.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="m00390128">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374738">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the DS-Lite Alarm Function</title>
</head>
<body><a name="EN-US_TASK_0172374738"></a><a name="EN-US_TASK_0172374738"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the DS-Lite Alarm Function</h1>
<div class="taskbody"><p>You can configure the DS-Lite alarm function to strengthen the device administrator's capability to monitor DS-Lite services in real time.</p>
<div class="context"><a name="EN-US_TASK_0172374738__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>DS-Lite sessions and ports available are important resources for DS-Lite services. If these resources are exhausted, DS-Lite cannot be performed for traffic sent by newly logged-in users. Therefore, the usage of these resources must be properly monitored. The DS-Lite alarm function generates an alarm when the resource usage reaches a certain extent, notifying the customer of the necessity to implement capacity expansion or service adjustment.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172374738__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure the maximum number of alarm packets that a service board is allowed to send every second.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nat+alarm+rate"><b><span class="cmdname">nat alarm rate</span></b></a> <i><span class="varname">threshold-value</span></i></span><p><p>The maximum number of alarm packets that the service board sends every second is set.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure a device to generate an alarm when the number of sessions on a service board reaches a specified alarm threshold.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=undo+nat+alarm+session-number"><b><span class="cmdname">undo nat alarm session-number</span></b></a> { <strong><span>log</span></strong> | <strong><span>trap</span></strong> } <strong><span>disable</span></strong></span></span><p><p>The trap and log functions for the number of NAT sessions are disabled.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=nat+alarm+session-number+threshold"><b><span class="cmdname">nat alarm session-number threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span></span><p><p>An alarm threshold for the total number of sessions on a service board is configured.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Enable a device to generate an alarm when the number of used ports in a DS-Lite PAT address pool exceeds a configured threshold.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ds-lite+instance"><b><span class="cmdname">ds-lite instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <strong><span>id</span></strong> <i><span class="varname">id</span></i> ]</span></span><p><p>The DS-Lite instance view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=ds-lite+alarm+port-number"><b><span class="cmdname">ds-lite alarm port-number</span></b></a> { <strong><span>log</span></strong> | <strong><span>trap</span></strong> } <strong><span>address-group disable</span></strong></span></span><p><p>The log and alarm functions for the port usage of a public IP address pool are disabled.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ds-lite+alarm+address-group+port-number+threshold"><b><span class="cmdname">ds-lite alarm address-group port-number threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span></span><p><p>An alarm threshold is set for the port usage rate of a DS-Lite address pool.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The PAT address pool does not support alarms based on a single IP address.</p>
<p>Port usage of a DS-Lite PAT address pool = Number of ports used by the public network addresses in the PAT address pool/Total number of ports available for the public network addresses in the PAT address pool</p>
</div></div>
</p></li></ol>
</li><li><span>Enable the device to generate an alarm when the number of ports used by a DS-Lite user exceeds a configured threshold.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ds-lite+instance"><b><span class="cmdname">ds-lite instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <strong><span>id</span></strong> <i><span class="varname">id</span></i> ]</span></span><p><p>The DS-Lite instance view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=ds-lite+alarm+port-number"><b><span class="cmdname">ds-lite alarm port-number</span></b></a> [ <strong><span>log</span></strong> | <strong><span>trap</span></strong> ] <strong><span>user enable</span></strong></span><p><p>The log or trap function for user port usage is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ds-lite+alarm+user+port-number+threshold"><b><span class="cmdname">ds-lite alarm user port-number threshold</span></b></a> <em>alarm-threshold-value</em></span><p><p>An alarm threshold for user-based port usage is set.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The number of user-specific pre-allocated ports is equal to the number of ports configured using the <a href="cmdqueryname=port-range"><b><span class="cmdname">port-range</span></b></a> command in the DS-Lite instance view. Usage of user-specific ports is equal to the number of user-specific ports in use divided by the number of user-specific pre-allocated ports. The <a href="cmdqueryname=ds-lite+alarm+user+port-number+threshold"><b><span class="cmdname">ds-lite alarm user port-number threshold</span></b></a> command takes effect only after the <a href="cmdqueryname=port-range"><b><span class="cmdname">port-range</span></b></a> command is run in the DS-Lite instance view. If the usage of user-specific ports is greater than the corresponding alarm threshold value (80% by default), an alarm indicating that the usage of user-specific ports exceeds the threshold is generated.</p>
</div></div>
</p></li></ol>
</li><li><span>Configure an alarm threshold for the pre-allocation rate of reserved PCP ports in scenarios where a RADIUS authentication user with Huawei proprietary attributes 162 and 163 requests to go online in a DS-Lite instance. </span><p><p>Pre-allocation rate of reserved PCP ports in scenarios where a RADIUS authentication user with Huawei proprietary attributes 162 and 163 requests to go online in a DS-Lite instance = Number of PCP ports pre-allocated to this user in the DS-Lite instance/Number of available reserved PCP ports of all public IP addresses in the DS-Lite address pool</p>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ds-lite+instance"><b><span class="cmdname">ds-lite instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <strong><span>id</span></strong> <i><span class="varname">id</span></i> ]</span><p><p>The DS-Lite instance view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <strong>undo</strong> <a href="cmdqueryname=ds-lite+alarm+port-number"><b><span class="cmdname">ds-lite alarm port-number</span></b></a> { <strong>log</strong> | <strong>trap</strong> } <strong>pcp-reservation disable</strong></span><p><p>The log or trap function is enabled for the pre-allocation usage rate of the reserved PCP ports in scenarios where a RADIUS authentication user with Huawei proprietary attributes 162 and 163 requests to go online in the DS-Lite instance. The log and trap functions are enabled by default.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ds-lite+alarm+pcp-reservation+port-number+threshold"><b><span class="cmdname">ds-lite alarm pcp-reservation port-number threshold</span></b></a> <em>threshold-value</em></span><p><p>An alarm threshold is specified for the pre-allocation usage rate of reserved PCP ports in scenarios where a RADIUS authentication user with Huawei proprietary attributes 162 and 163 requests to go online in the DS-Lite instance.</p>
</p><p><p>In a distributed DS-Lite scenario, when a RADIUS authentication user with Huawei proprietary attributes 162 and 163 requests to go online, PCP ports are pre-allocated to the user from a reserved PCP port range. If the usage rate of the reserved PCP ports is high, the PCP user may fail to go online. If the alarm function for the usage rate of the reserved PCP ports is enabled and the usage rate reaches the threshold, an alarm is reported. A proper threshold provides effective monitoring.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the device to generate an alarm when server mapping entry usage exceeds a specified threshold.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=nat+alarm+server-map"><b><span class="cmdname">nat alarm server-map</span></b></a> [ <strong><span>log</span></strong> | <strong><span>trap</span></strong> ] <strong><span>disable</span></strong></span><p><p>The log and trap functions for server mapping entries are disabled.</p>
</p><p><p>The log and trap functions are enabled by default. To disable the functions, run the <a href="cmdqueryname=nat+alarm+server-map+disable"><b><span class="cmdname">nat alarm server-map disable</span></b></a> command.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=nat+alarm+server-map+threshold"><b><span class="cmdname">nat alarm server-map threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span></span><p><p>The alarm threshold for the usage of server mapping entries is set.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Run the <a href="cmdqueryname=display+nat+memory-usage+servermap"><b><span class="cmdname">display nat memory-usage servermap</span></b></a> command to query the number of used server mapping entries and the number of supported server mapping entries. Server mapping entry usage rate = Number of used server mapping entries/Number of server mapping entries supported by the service board</p>
</div></div>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0047.html">Maintaining DS-Lite
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0048.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0050.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>