
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the DS-Lite ALG Function">
<meta name="abstract" content="The IP packets of some protocols, such as FTP and ICMP, contain IP addresses and port numbers in the data field. To implement DS-Lite translation for these protocol packets, you need to enable the DS-Lite ALG function.">
<meta name="description" content="The IP packets of some protocols, such as FTP and ICMP, contain IP addresses and port numbers in the data field. To implement DS-Lite translation for these protocol packets, you need to enable the DS-Lite ALG function.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0027.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0034.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="g00814582">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374722">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the DS-Lite ALG Function</title>
</head>
<body><a name="EN-US_TASK_0172374722"></a><a name="EN-US_TASK_0172374722"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the DS-Lite ALG Function</h1>
<div class="taskbody"><p>The IP packets of some protocols, such as FTP and ICMP, contain IP addresses and port numbers in the data field. To implement DS-Lite translation for these protocol packets, you need to enable the DS-Lite ALG function.</p>
<div class="context"><a name="EN-US_TASK_0172374722__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>DS-Lite translates only the IP addresses contained in user data packets and the port information in the TCP/UDP headers of data packets. For special protocols, for example, FTP, the Data field in a packet contains IP address or port information. If the IP address or port information in the data field is not translated, inconsistency and errors occur. A good way to solve the DS-Lite translation issue for these special protocols is to use the ALG function. Functioning as a special conversion agent for application protocols, the ALG interacts with the DS-Lite device to establish states. The ALG uses DS-Lite state information to change the specific data in the Data field of IP packets and to complete other necessary work, so that application protocols can run across internal and external networks.</p>
<h4 class="sectiontitle">Pre-configuration Tasks</h4><div class="p">Before configuring DS-Lite ALG, complete the following tasks:<ul><li>Configure basic DS-Lite functions.</li><li>Configure distributed or centralized DS-Lite translation function.</li></ul>
</div>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172374722__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Enable the DS-Lite ALG function in the DS-Lite instance view or the NAT policy template view:</span><ol type="a"><li class="substepexpand"><span>Enable the DS-Lite ALG function in the DS-Lite instance view.</span><p><ol class="substepthirdol"><li><p>Run <span><a href="cmdqueryname=ds-lite+instance"><b><span class="cmdname">ds-lite instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <strong><span>id</span></strong> <i><span class="varname">id</span></i> ]</span></p>
<p>The DS-Lite instance view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=ds-lite+alg"><b><span class="cmdname">ds-lite alg</span></b></a> {<strong><span> all</span></strong> | <strong><span>ftp</span></strong> [ <strong><span>rate-threshold</span></strong> <i><span class="varname">rate-threshold-value</span></i> ] | <strong><span>pptp</span></strong> | <strong><span>rtsp</span></strong> | <strong><span>sip</span></strong><span> [ <strong><span>separate-translation</span></strong></span> ] }</p>
<p>The DS-Lite ALG function is enabled for one or more application layer protocols.</p>
<p>To configure DS-Lite for the SIP control channel and data channel separately, run the <a href="cmdqueryname=ds-lite+alg"><b><span class="cmdname">ds-lite alg</span></b></a> <strong><span>sip</span></strong> <strong><span>separate-translation</span></strong> command.</p>
</li><li><p>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></p>
<p>The configuration is committed.</p>
</li></ol>
</p></li><li class="substepexpand"><span>Enable the DS-Lite ALG function in the NAT policy template view.</span><p><ol class="substepthirdol"><li><p>Run <span><a href="cmdqueryname=nat-policy+template"><b><span class="cmdname">nat-policy template</span></b></a> <i><span class="varname">template-name</span></i></span> A NAT policy template is configured.</p>
</li><li><p>Run <span><a href="cmdqueryname=nat+alg"><b><span class="cmdname">nat alg</span></b></a> { <strong><span>all</span></strong> | <strong><span>ftp</span></strong> | <strong><span>pptp</span></strong> | <strong><span>rtsp</span></strong> | <strong><span>sip</span></strong> }</span> The DS-Lite ALG function is enabled for one or more application layer protocols.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In VS mode, this configuration process is supported only by the admin VS.</p>
</div></div>
</li><li><p>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></p>
<p>The configuration is committed.</p>
</li></ol>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The configurations in a NAT policy template take effect only after the NAT policy template is issued by a RADIUS server. If packets of users to go online match the NAT policy template, the configuration in the template takes effect on the users.</p>
<p>If the DS-Lite ALG function is enabled in the DS-Lite instance view and the NAT policy template view, the later configuration takes effect.</p>
</div></div>
</p></li></ol>
</li></ol></div>
<div class="example"><a name="EN-US_TASK_0172374722__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring the DS-Lite ALG function, you can run the display commands to check the DS-Lite instance configuration or NAT policy template.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+ds-lite+instance"><b><span class="cmdname">display ds-lite instance</span></b></a> [ <i><span class="varname">instance-name</span></i> ] command to check the ALG configuration of a DS-Lite instance.</p>
</li><li><p>Run the <a href="cmdqueryname=display+nat-policy+template"><b><span class="cmdname">display nat-policy template</span></b></a> [ <i><span class="varname">template-name</span></i> ] command to check the ALG configuration in a NAT policy template.</p>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0001.html">DS-Lite Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0027.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0034.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>