
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring OSPF SR to Communicate with LDP">
<meta name="abstract" content="This section describes how to configure OSPF SR to communicate with LDP.">
<meta name="description" content="This section describes how to configure OSPF SR to communicate with LDP.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0018.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0165.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="segment_routing_vrp,w00604599,l00455378,l00587852,w00606909,w00800033">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00425560">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368829">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring OSPF SR to Communicate with LDP</title>
</head>
<body><a name="EN-US_TASK_0172368829"></a><a name="EN-US_TASK_0172368829"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring OSPF SR to Communicate with LDP</h1>
<div class="taskbody"><p>This section describes how to configure OSPF SR to communicate with LDP.</p>
<div class="context"><a name="EN-US_TASK_0172368829__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p id="EN-US_TASK_0172368829__en-us_task_0172368826_p1312110083214048">The SR and LDP interworking technique allows both segment routing and LDP to work within the same network. This technique connects an SR network to an LDP network to implement MPLS forwarding.</p>
<p id="EN-US_TASK_0172368829__en-us_task_0172368826_p253760141214048">On the network shown in <a href="#EN-US_TASK_0172368829__en-us_task_0172368826_fig_dc_vrp_sr_all_cfg_001801">Figure 1</a>, an SR domain is created between PE1 that functions as a mapping client and the P device that functions as a mapping server. Mappings between prefixes and SIDs need to be configured on the P device and advertised to PE1, which receives the mappings. An LDP domain lies between the P device and PE2, which supports only LDP. To enable PE1 and PE2 to communicate with each other, you need to establish an SR LSP and an LDP LSP, and establish the mapping between the SR LSP and LDP LSP on the P device.</p>
<div class="fignone" id="EN-US_TASK_0172368829__en-us_task_0172368826_fig_dc_vrp_sr_all_cfg_001801"><a name="EN-US_TASK_0172368829__en-us_task_0172368826_fig_dc_vrp_sr_all_cfg_001801"></a><a name="en-us_task_0172368826_fig_dc_vrp_sr_all_cfg_001801"></a><span class="figcap"><b>Figure 1 </b>Communication between SR and LDP</span><br><span><img class="vsd" id="EN-US_TASK_0172368829__en-us_task_0172368826_image140966722214048" src="images/fig_dc_vrp_sr_all_cfg_001801.png" width="NaN" height="NaN"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368829__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before you configure OSPF SR to communicate with LDP, complete the following tasks:</p>
<ul><li>Configure an SR LSP from PE1 to the P. See <a href="dc_vrp_sr_all_cfg_0001.html">Configuring an OSPF SR-MPLS BE Tunnel</a>.</li><li>Configure an LDP LSP from the P to PE2. See <a href="dc_vrp_ldp-p2p_cfg_0015.html">Configuring an LDP LSP</a>.</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172368829__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure the mapping server.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=segment-routing"><b><span class="cmdname">segment-routing</span></b></a></span></span><p><p>Segment routing is globally enabled, and the Segment Routing view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mapping-server+prefix-sid-mapping"><b><span class="cmdname">mapping-server prefix-sid-mapping</span></b></a> <i><span class="varname">ip-address</span></i> <i><span class="varname">mask-length</span></i> <i><span class="varname">begin-value</span></i> [ <strong><span>range</span></strong> <i><span class="varname">range-value</span></i> ] [ <strong><span>attached</span></strong> ]</span></span><p><p>Mapping between the prefix and SID is configured.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Exist the SR view.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span></span><p><p>The OSPF view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=segment-routing+mapping-server"><b><span class="cmdname">segment-routing mapping-server</span></b></a> <strong><span>send</span></strong></span></span><p><p>The local node is enabled to advertise the local SID label mapping.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=segment-routing+mapping-server"><b><span class="cmdname">segment-routing mapping-server</span></b></a> <strong><span>receive</span></strong></span></span><p><p>The local node is enabled to receive SID label mapping messages.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure the mapping client.</span><p><p>A device that is not configured as a mapping server functions as a mapping client by default.</p>
</p><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span></span><p><p>The OSPF view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=segment-routing+mapping-server"><b><span class="cmdname">segment-routing mapping-server</span></b></a> <strong><span>receive</span></strong></span></span><p><p>The local node is enabled to receive SID label mapping messages.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the device connecting the LDP domain and the SR domain.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls"><b><span class="cmdname">mpls</span></b></a></span></span><p><p>The MPLS view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=lsp-trigger+segment-routing-interworking+best-effort+host"><b><span class="cmdname">lsp-trigger segment-routing-interworking best-effort host</span></b></a></span></span><p><p>A policy for triggering backup LDP LSP establishment is configured.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0172368829__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Checking the Configurations</h4><p>After completing the configurations, run the <a href="cmdqueryname=display+segment-routing+prefix+mpls+forwarding"><b><span class="cmdname">display segment-routing prefix mpls forwarding</span></b></a> command to check the label forwarding information base of Segment Routing.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0000.html">Segment Routing MPLS Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0018.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0165.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>