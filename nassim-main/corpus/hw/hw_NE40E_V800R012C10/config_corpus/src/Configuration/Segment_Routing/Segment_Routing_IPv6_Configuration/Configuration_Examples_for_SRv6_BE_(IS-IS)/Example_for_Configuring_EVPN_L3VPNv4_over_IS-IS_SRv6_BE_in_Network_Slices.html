
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring EVPN L3VPNv4 over IS-IS SRv6 BE in Network Slices">
<meta name="abstract" content="This section provides an example for configuring EVPN L3VPNv4 over SRv6 BE in network slices.">
<meta name="description" content="This section provides an example for configuring EVPN L3VPNv4 over SRv6 BE in network slices.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0010.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0015.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0269.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001116288820">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring EVPN L3VPNv4 over IS-IS SRv6 BE in Network Slices</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001116288820"></a><a name="EN-US_TASK_0000001116288820"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring EVPN L3VPNv4 over IS-IS SRv6 BE in Network Slices</h1>
<div class="taskbody"><p>This section provides an example for configuring EVPN L3VPNv4 over SRv6 BE in network slices.</p>
<div class="context"><a name="EN-US_TASK_0000001116288820__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0000001116288820__fig3691666259">Figure 1</a>, PE1, the P, and PE2 belong to the same AS and need to run IS-IS to implement IPv6 network connectivity. and a bidirectional SRv6 BE path must be deployed between PE1 and PE2 to carry EVPN L3VPNv4 services. In addition, to guarantee the SLAs of the VPN instance <strong>vpn1</strong> (between CE1 and CE2) and <strong>vpn2</strong> (between CE3 and CE4), two network slices (20 and 30) need to be created on the public network to respectively carry <strong>vpn1</strong>'s and <strong>vpn2</strong>'s services.</p>
<div class="fignone" id="EN-US_TASK_0000001116288820__fig3691666259"><a name="EN-US_TASK_0000001116288820__fig3691666259"></a><a name="fig3691666259"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for configuring EVPN L3VPNv4 over SRv6 BE in network slices</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, and interface3 represent GE <span>0/1/0</span>, GE <span>0/2/0</span>, and GE <span>0/3/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001116288824.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001116288820__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>To implement color-based SRv6 BE traffic steering into network slices, you need to configure the color attribute using an import or export route-policy.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001116288820__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Enable IPv6 forwarding and configure an IPv6 address for involved interfaces on PE1, the P, and PE2.</p>
</li><li><p>Enable IS-IS, configure an IS-IS level, and specify a network entity title (NET) on PE1, the P, and PE2.</p>
</li><li>Create network slice instances on PE1, the P, and PE2, specify base interfaces, and create network slice interfaces.</li><li><p>Configure an EVPN L3VPN instance on each PE and bind the EVPN L3VPN instance to an access-side interface.</p>
</li><li><p>Establish an EBGP peer relationship between each PE and its connected CE.</p>
</li><li><p>Establish a BGP EVPN peer relationship between the PEs.</p>
</li><li>Configure SRv6 BE on the PEs and enable IS-IS SRv6.</li><li><p>Configure route-policies on PE1 and PE2 to implement VPN route coloring.</p>
</li><li><p>Configure the mapping between the colors of SRv6 BE routes and slice IDs.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001116288820__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>IPv6 addresses of interfaces on PE1, the P, and PE2</p>
</li><li><p>IS-IS process ID of PE1, the P, and PE2</p>
</li><li><p>IS-IS level of PE1, the P, and PE2</p>
</li><li><p>VPN instance names, RDs, and RTs on PE1 and PE2</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001116288820__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enable IPv6 forwarding and configure an IPv6 address for each interface.</span><p><p># Configure PE1. The configurations of the P and PE2 are similar to the configuration of PE1. For configuration details, see Configuration Files.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname PE1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 enable</strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address 2001:DB8:10::1 64</strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>interface LoopBack 1</strong>
[<span class="keyword">*</span>PE1-LoopBack1] <strong>ipv6 enable</strong>
[<span class="keyword">*</span>PE1-LoopBack1] <strong>ipv6 address 2001:DB8:1::1 128</strong>
[<span class="keyword">*</span>PE1-LoopBack1] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
</p></li><li><span>Configure IS-IS.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>isis 1</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>is-level level-1</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>cost-style wide</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>network-entity 10.0000.0000.0001.00</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>ipv6 enable topology ipv6</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>interface loopback1</strong>
[<span class="keyword">*</span>PE1-LoopBack1] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>PE1-LoopBack1] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p># Configure the P.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>P] <strong>isis 1</strong> 
[<span class="keyword">*</span>P-isis-1] <strong>is-level level-1</strong>
[<span class="keyword">*</span>P-isis-1] <strong>cost-style wide</strong>
[<span class="keyword">*</span>P-isis-1] <strong>network-entity 10.0000.0000.0002.00</strong>
[<span class="keyword">*</span>P-isis-1] <strong>ipv6 enable topology ipv6</strong>
[<span class="keyword">*</span>P-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>P] <strong>interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>P] <strong>interface gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>P] <strong>commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>isis 1</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>is-level level-1</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>cost-style wide</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>network-entity 10.0000.0000.0003.00</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>ipv6 enable topology ipv6</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>PE2] <strong>interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>PE2] <strong>interface loopback1</strong>
[<span class="keyword">*</span>PE2-LoopBack1] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>PE2-LoopBack1] <strong>quit</strong>
[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
</p><p><p>After the configuration is complete, perform the following operations to check whether IS-IS is successfully configured.</p>
<p># Display IS-IS neighbor information. The following example uses the command output on PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>display isis peer</strong></pre>
<pre class="screen">                          Peer information for ISIS(1)
                         
  System Id     Interface         Circuit Id        State HoldTime Type     PRI
--------------------------------------------------------------------------------
0000.0000.0002* GE<span>0/1/0</span>           0000.0000.0002.01  Up   8s       L1       64 

Total Peer(s): 1</pre>
</p></li><li><span>Create network slice instances on PE1, the P, and PE2, specify base interfaces, and create network slice interfaces.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>network-slice instance 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-network-slice-instance-10] <strong>description Basic</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-network-slice-instance-10] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>network-slice instance 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-network-slice-instance-20] <strong>description vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-network-slice-instance-20] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>network-slice instance 30</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-network-slice-instance-30] <strong>description vpn2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-network-slice-instance-30] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>network-slice 10 data-plane</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>interface gigabitethernet <span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>vlan-type dot1q 11</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>ipv6 address auto link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>mode channel enable</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>mode channel </strong><strong>bandwidth 500</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>basic-slice 10</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>network-slice 20 data-plane</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>interface gigabitethernet <span>0/1/0</span>.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.2] <strong>vlan-type dot1q 22</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.2] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.2] <strong>ipv6 address auto link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.2] <strong>mode channel enable</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.2] <strong>mode channel </strong><strong>bandwidth 500</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.2] <strong>basic-slice 10</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.2] <strong>network-slice 30 data-plane</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p># Configure the P.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>P] <strong>network-slice instance 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-network-slice-instance-10] <strong>description Basic</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-network-slice-instance-10] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P] <strong>network-slice instance 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-network-slice-instance-20] <strong>description vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-network-slice-instance-20] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P] <strong>network-slice instance 30</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-network-slice-instance-30] <strong>description vpn2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-network-slice-instance-30] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>] <strong>network-slice 10 data-plane</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P] <strong>interface gigabitethernet <span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.1] <strong>vlan-type dot1q 11</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.1] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.1] <strong>ipv6 address auto link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.1] <strong>mode channel enable</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.1] <strong>mode channel </strong><strong>bandwidth 500</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.1] <strong>basic-slice 10</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.1] <strong>network-slice 20 data-plane</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P] <strong>interface gigabitethernet <span>0/1/0</span>.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.2] <strong>vlan-type dot1q 22</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.2] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.2] <strong>ipv6 address auto link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.2] <strong>mode channel enable</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.2] <strong>mode channel </strong><strong>bandwidth 500</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.2] <strong>basic-slice 10</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.2] <strong>network-slice 30 data-plane</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/0</span>.2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>] <strong>network-slice 10 data-plane</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P] <strong>interface gigabitethernet </strong><strong><span>0/2/0</span></strong><strong>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.1] <strong>vlan-type dot1q 11</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.1] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.1] <strong>ipv6 address auto link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.1] <strong>mode channel enable</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.1] <strong>mode channel </strong><strong>bandwidth 500</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.1] <strong>basic-slice 10</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.1] <strong>network-slice 20 data-plane</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P] <strong>interface gigabitethernet </strong><strong><span>0/2/0</span></strong><strong>.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.2] <strong>vlan-type dot1q 22</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.2] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.2] <strong>ipv6 address auto link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.1] <strong>mode channel enable</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.1] <strong>mode channel </strong><strong>bandwidth 500</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.2] <strong>basic-slice 10</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.2] <strong>network-slice 30 data-plane</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/2/0</span>.2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P] <strong>commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>network-slice instance 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-network-slice-instance-10] <strong>description Basic</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-network-slice-instance-10] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>network-slice instance 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-network-slice-instance-20] <strong>description vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-network-slice-instance-20] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>network-slice instance 30</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-network-slice-instance-30] <strong>description vpn2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-network-slice-instance-30] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>network-slice 10 data-plane</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>interface gigabitethernet <span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.1] <strong>vlan-type dot1q 11</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.1] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.1] <strong>ipv6 address auto link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.1] <strong>mode channel enable</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.1] <strong>mode channel </strong><strong>bandwidth 500</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.1] <strong>basic-slice 10</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.1] <strong>network-slice 20 data-plane</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>interface gigabitethernet <span>0/1/0</span>.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.2] <strong>vlan-type dot1q 22</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.2] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.2] <strong>ipv6 address auto link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.2] <strong>mode channel enable</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.2] <strong>mode channel </strong><strong>bandwidth 500</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.2] <strong>basic-slice 10</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.2] <strong>network-slice 30 data-plane</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
<p>After the configuration is complete, perform the following operations to check the bindings between the base and slice interfaces in slice instances. The following example uses the command output on PE1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1]<strong> display network-slice 10 binding-list</strong> 
        Slice-ID            Basic-Interface          Slicing-Interface 
        10                  GigabitEthernet<span>0/1/0</span>     GigabitEthernet<span>0/1/0</span>.1
                                                     GigabitEthernet<span>0/1/0</span>.2</pre>
</p></li><li><span>Configure an EVPN L3VPN instance on each PE and bind the EVPN L3VPN instance to an access-side interface.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>ip vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>route-distinguisher 100:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>vpn-target 1:1 evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>interface gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/0</span>] <strong>ip binding vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/0</span>] <strong>ip address 10.11.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>ip vpn-instance vpn2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn2] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn2-af-ipv4] <strong>route-distinguisher 100:2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn2-af-ipv4] <strong>vpn-target 2:2 evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn2-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>interface gigabitethernet<span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/3/0</span>] <strong>ip binding vpn-instance vpn2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/3/0</span>] <strong>ip address 10.33.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>ip vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1-af-ipv4] <strong>route-distinguisher 200:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1-af-ipv4] <strong>vpn-target 1:1 evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>interface gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong>ip binding vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong>ip address 10.22.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>ip vpn-instance vpn2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn2] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn2-af-ipv4] <strong>route-distinguisher 200:2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn2-af-ipv4] <strong>vpn-target 2:2 evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn2-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>interface gigabitethernet<span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/3/0</span>] <strong>ip binding vpn-instance vpn2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/3/0</span>] <strong>ip address 10.44.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
</p></li><li><span>Establish an EBGP peer relationship between each PE and its connected CE.</span><p><p># Configure CE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-LoopBack1] <strong>ip address 11.1.1.1 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-LoopBack1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1] <strong>bgp 65410</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-bgp] <strong>router-id 11.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-bgp] <strong>peer 10.11.1.1 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-bgp] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1] <strong>commit</strong></pre>
<p># Configure CE3.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE3] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE3-LoopBack1] <strong>ip address 33.3.3.3 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE3-LoopBack1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE3] <strong>bgp 65430</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE3-bgp] <strong>router-id </strong><strong>33.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE3-bgp] <strong>peer 10.33.1.1 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE3-bgp] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE3-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE3] <strong>commit</strong></pre>
<p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-bgp] <strong>router-id 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>ipv4-family vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-vpn1] <strong>peer 10.11.1.2 as-number 65410</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-vpn1] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-vpn1] <strong>advertise l2vpn evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>ipv4-family vpn-instance vpn2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-vpn2] <strong>peer 10.33.1.2 as-number 65430</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-vpn2] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-vpn2] <strong>advertise l2vpn evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-vpn2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p># Configure CE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-LoopBack1] <strong>ip address 22.2.2.2 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-LoopBack1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2] <strong>bgp 65420</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-bgp] <strong>router-id </strong><strong>22.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-bgp] <strong>peer 10.22.1.1 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-bgp] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2] <strong>commit</strong></pre>
<p># Configure CE4.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE4] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE4-LoopBack1] <strong>ip address 44.4.4.4 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE4-LoopBack1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE4] <strong>bgp 65440</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE4-bgp] <strong>router-id </strong><strong>44.4.4.4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE4-bgp] <strong>peer 10.44.1.1 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE4-bgp] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE4-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE4] <strong>commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-bgp] <strong>router-id 3.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp] <strong>ipv4-family vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-vpn1] <strong>peer 10.22.1.2 as-number 65420</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-vpn1] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-vpn1] <strong>advertise l2vpn evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp] <strong>ipv4-family vpn-instance vpn2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-vpn2] <strong>peer 10.44.1.2 as-number 65440</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-vpn2] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-vpn2] <strong>advertise l2vpn evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-vpn2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
<p>After the configuration is complete, run the <strong>display bgp vpnv4 vpn-instance peer</strong> command on each PE to check whether a BGP peer relationship has been established between the PE and its connected CE. If the <strong>Established</strong> state is displayed in the command output, the BGP peer relationship has been established successfully.</p>
<p>The following example uses the peer relationship between PE1 and CE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>display bgp vpnv4 vpn-instance vpn1 peer</strong>

 BGP local router ID : 1.1.1.1                               
 Local AS number : 100                             

 VPN-Instance vpn1, Router ID 1.1.1.1:                       
 Total number of peers : 1                 Peers in established state : 1                   

  Peer                             V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State  PrefRcv 
  10.11.1.2                        4       65410       16       19     0 00:10:44 <strong>Established</strong>        2 </pre>
</p></li><li><span>Establish a BGP EVPN peer relationship between the PEs.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-bgp] <strong>peer 2001:DB8:3::3 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>peer 2001:DB8:3::3 connect-interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>l2vpn-family evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-af-evpn] <strong>peer 2001:DB8:3::3 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-af-evpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-bgp] <strong>peer 2001:DB8:1::1 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp] <strong>peer 2001:DB8:1::1 connect-interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp] <strong>l2vpn-family evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-af-evpn] <strong>peer 2001:DB8:1::1 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-af-evpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
<p>After the configuration is complete, run the <strong>display bgp evpn peer</strong> command on the PEs to check whether a BGP EVPN peer relationship has been established between the PEs. If the <strong>Established</strong> state is displayed in the command output, the BGP EVPN peer relationship has been established successfully.</p>
<p>The following example uses the command output on PE1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong>display bgp evpn peer</strong>

 BGP local router ID : 1.1.1.1
 Local AS number : 100
 Total number of peers : 1                 Peers in established state : 1

  Peer                             V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State  PrefRcv
  2001:DB8:3::3                    4         100       49       49     0 00:30:41 <strong>Established</strong>        2</pre>
</p></li><li><span>Establish an SRv6 BE path between the PEs.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001116288820__en-us_task_0172368972_p13414842202714">An End.DT4 SID can be either dynamically allocated through BGP or manually configured. If a dynamically allocated SID and a manually configured SID both exist, the latter takes effect. If you want to run the <span><a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname" id="EN-US_TASK_0000001116288820__en-us_task_0172368972_cmdname175640204576">segment-routing ipv6 locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001116288820__en-us_task_0172368972_varname165646206572">locator-name</span></i></span> command to enable dynamic End.DT4 SID allocation through BGP or the <span><a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname" id="EN-US_TASK_0000001116288820__en-us_task_0172368972_cmdname5915391314">segment-routing ipv6 locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001116288820__en-us_task_0172368972_varname7925361319">locator-name</span></i></span> <a href="cmdqueryname=end-dt46"><b><span class="cmdname" id="EN-US_TASK_0000001116288820__en-us_task_0172368972_cmdname15469174113155">end-dt46</span></b></a> command to enable dynamic End.DT46 SID allocation through BGP in the future, you do not need to run the <strong id="EN-US_TASK_0000001116288820__en-us_task_0172368972_b14130427277">opcode</strong> <em id="EN-US_TASK_0000001116288820__en-us_task_0172368972_i10413164212710">func-opcode</em> <strong id="EN-US_TASK_0000001116288820__en-us_task_0172368972_b54130425272">end-dt4</strong> <strong id="EN-US_TASK_0000001116288820__en-us_task_0172368972_b1541314222715">vpn-instance</strong> <em id="EN-US_TASK_0000001116288820__en-us_task_0172368972_i1741314219275">vpn-instance-name</em> or <strong id="EN-US_TASK_0000001116288820__en-us_task_0172368972_b10930145741911">opcode</strong> <em id="EN-US_TASK_0000001116288820__en-us_task_0172368972_i1393025781918">func-opcode</em> <strong id="EN-US_TASK_0000001116288820__en-us_task_0172368972_b1193020571190">end-dt46</strong> <strong id="EN-US_TASK_0000001116288820__en-us_task_0172368972_b19930105751920">vpn-instance</strong> <em id="EN-US_TASK_0000001116288820__en-us_task_0172368972_i393014571194">vpn-instance-name</em> command to configure an opcode for static SIDs.</p>
<p id="EN-US_TASK_0000001116288820__en-us_task_0172368972_p722259122814">In this example, SIDs are dynamically allocated through BGP.</p>
</div></div>
<p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>segment-routing ipv6</strong>
[<span class="keyword">*</span>PE1-segment-routing-ipv6] <strong>encapsulation source-address 2001:DB8:1::1</strong>
[<span class="keyword">*</span>PE1-segment-routing-ipv6] <strong>locator PE1 ipv6-prefix 2001:DB8:100:: 64 static 32</strong>
[<span class="keyword">*</span>PE1-segment-routing-ipv6-locator] <strong>quit</strong>
[<span class="keyword">*</span>PE1-segment-routing-ipv6] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>bgp 100</strong>
[<span class="keyword">*</span>PE1-bgp] <strong>l2vpn-family evpn</strong>
[<span class="keyword">*</span>PE1-bgp-af-evpn] <strong>peer 2001:DB8:3::3 advertise encap-type srv6</strong>
[<span class="keyword">*</span>PE1-bgp-af-evpn] <strong>quit</strong>
[<span class="keyword">*</span>PE1-bgp] <strong>ipv4-family vpn-instance vpn1</strong>
[<span class="keyword">*</span>PE1-bgp-vpn1] <strong>segment-routing ipv6 best-effort</strong><strong> evpn</strong>
[<span class="keyword">*</span>PE1-bgp-vpn1] <strong>segment-routing ipv6 locator PE1</strong><strong> evpn</strong>
[<span class="keyword">*</span>PE1-bgp-vpn1] <strong>quit</strong>
[<span class="keyword">*</span>PE1-bgp] <strong>ipv4-family vpn-instance vpn2</strong>
[<span class="keyword">*</span>PE1-bgp-vpn2] <strong>segment-routing ipv6 best-effort</strong><strong> evpn</strong>
[<span class="keyword">*</span>PE1-bgp-vpn2] <strong>segment-routing ipv6 locator PE1</strong><strong> evpn</strong>
[<span class="keyword">*</span>PE1-bgp-vpn2] <strong>quit</strong>
[<span class="keyword">*</span>PE1-bgp] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>isis 1</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>segment-routing ipv6 locator PE1</strong><strong> auto-sid-disable</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-isis-1] <strong>quit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>segment-routing ipv6</strong>
[<span class="keyword">*</span>PE2-segment-routing-ipv6] <strong>encapsulation source-address 2001:DB8:3::3</strong>
[<span class="keyword">*</span>PE2-segment-routing-ipv6] <strong>locator PE2 ipv6-prefix 2001:DB8:130:: 64 static 32</strong>
[<span class="keyword">*</span>PE2-segment-routing-ipv6-locator] <strong>quit</strong>
[<span class="keyword">*</span>PE2-segment-routing-ipv6] <strong>quit</strong>
[<span class="keyword">*</span>PE2] <strong>bgp 100</strong>
[<span class="keyword">*</span>PE2-bgp] <strong>l2vpn-family evpn</strong>
[<span class="keyword">*</span>PE2-bgp-af-evpn] <strong>peer 2001:DB8:1::1 advertise encap-type srv6</strong>
[<span class="keyword">*</span>PE2-bgp-af-evpn] <strong>quit</strong>
[<span class="keyword">*</span>PE2-bgp] <strong>ipv4-family vpn-instance vpn1</strong>
[<span class="keyword">*</span>PE2-bgp-vpn1] <strong>segment-routing ipv6 best-effort</strong><strong> evpn</strong>
[<span class="keyword">*</span>PE2-bgp-vpn1] <strong>segment-routing ipv6 locator PE2</strong><strong> evpn</strong>
[<span class="keyword">*</span>PE2-bgp-vpn1] <strong>quit</strong>
[<span class="keyword">*</span>PE2-bgp] <strong>ipv4-family vpn-instance vpn2</strong>
[<span class="keyword">*</span>PE2-bgp-vpn2] <strong>segment-routing ipv6 best-effort</strong><strong> evpn</strong>
[<span class="keyword">*</span>PE2-bgp-vpn2] <strong>segment-routing ipv6 locator PE2</strong><strong> evpn</strong>
[<span class="keyword">*</span>PE2-bgp-vpn2] <strong>quit</strong>
[<span class="keyword">*</span>PE2-bgp] <strong>quit</strong>
[<span class="keyword">*</span>PE2] <strong>isis 1</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>segment-routing ipv6 locator PE2</strong><strong> auto-sid-disable</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-isis-1] <strong>quit</strong></pre>
</p></li><li><span>Configure route-policies for VPN route coloring.</span><p><p># Configure PE1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong>route-policy rp11 permit node 10</strong>
[*PE1-route-policy] <strong>apply extcommunity color 0:101</strong>
[*PE1-route-policy] <strong>quit</strong>
[*PE1] <strong>route-policy rp22 permit node 10</strong>
[*PE1-route-policy] <strong>apply extcommunity color 0:202</strong>
[*PE1-route-policy] <strong>quit</strong>
[*PE1] <strong>ip vpn-instance vpn1</strong>
[*PE1-vpn-instance-vpn1] <strong>ipv4-family</strong>
[*PE1-vpn-instance-vpn1-af-ipv4] <strong>import route-policy rp11 evpn</strong>
[*PE1-vpn-instance-vpn1-af-ipv4] <strong>quit</strong>
[*PE1-vpn-instance-vpn1] <strong>quit</strong>
[*PE1] <strong>ip vpn-instance vpn2</strong>
[*PE1-vpn-instance-vpn2] <strong>ipv4-family</strong>
[*PE1-vpn-instance-vpn2-af-ipv4] <strong>import route-policy rp22 evpn</strong>
[*PE1-vpn-instance-vpn2-af-ipv4] <strong>quit</strong>
[*PE1-vpn-instance-vpn2] <strong>quit</strong>
[*PE1] <strong>commit</strong></pre>
</p><p><p># Configure PE2.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE2] <strong>route-policy rp11 permit node 10</strong>
[*PE2-route-policy] <strong>apply extcommunity color 0:101</strong>
[*PE2-route-policy] <strong>quit</strong>
[*PE2] <strong>route-policy rp22 permit node 10</strong>
[*PE2-route-policy] <strong>apply extcommunity color 0:202</strong>
[*PE2-route-policy] <strong>quit</strong>
[*PE2] <strong>ip vpn-instance vpn1</strong>
[*PE2-vpn-instance-vpn1] <strong>ipv4-family</strong>
[*PE2-vpn-instance-vpn1-af-ipv4] <strong>import route-policy rp11</strong><strong> evpn</strong>
[*PE2-vpn-instance-vpn1-af-ipv4] <strong>quit</strong>
[*PE2-vpn-instance-vpn1] <strong>quit</strong>
[*PE2] <strong>ip vpn-instance vpn2</strong>
[*PE2-vpn-instance-vpn2] <strong>ipv4-family</strong>
[*PE2-vpn-instance-vpn2-af-ipv4] <strong>import route-policy rp22</strong><strong> evpn</strong>
[*PE2-vpn-instance-vpn2-af-ipv4] <strong>quit</strong>
[*PE2-vpn-instance-vpn2] <strong>quit</strong>
[*PE2] <strong>commit</strong></pre>
</p></li><li><span>Configure the mapping between the colors of SRv6 BE routes and slice IDs.</span><p><p># Configure PE1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong>network-slice color-mapping</strong>
[*PE1-network-slice-color-mapping] <strong>color 101 network-slice 20</strong>
[*PE1-network-slice-color-mapping] <strong>color 202 network-slice 30</strong>
[*PE1-network-slice-color-mapping] <strong>quit</strong>
[*PE1-route-policy] <strong>commit</strong></pre>
</p><p><p># Configure PE2.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE2] <strong>network-slice color-mapping</strong>
[*PE2-network-slice-color-mapping] <strong>color 101 network-slice 20</strong>
[*PE2-network-slice-color-mapping] <strong>color 202 network-slice 30</strong>
[*PE2-network-slice-color-mapping] <strong>quit</strong>
[*PE2-route-policy] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>Check that CEs belonging to the same VPN instance can ping each other. For example:</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>CE1] <strong>ping -a 11.1.1.1 22.2.2.2</strong>                                                 
  PING 22.2.2.2: 56  data bytes, press CTRL_C to break                          
    Reply from 22.2.2.2: bytes=56 Sequence=1 ttl=253 time=7 ms                       
    Reply from 22.2.2.2: bytes=56 Sequence=2 ttl=253 time=4 ms                     
    Reply from 22.2.2.2: bytes=56 Sequence=3 ttl=253 time=3 ms                       
    Reply from 22.2.2.2: bytes=56 Sequence=4 ttl=253 time=4 ms                    
    Reply from 22.2.2.2: bytes=56 Sequence=5 ttl=253 time=3 ms                    

  --- 22.2.2.2 ping statistics ---                                        
    5 packet(s) transmitted                                                 
    5 packet(s) received                                                  
    0.00% packet loss                                            
    round-trip min/avg/max = 3/4/7 ms</pre>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>CE3] <strong>ping -a 33.3.3.3 44.4.4.4</strong>                                                 
  PING 44.4.4.4: 56  data bytes, press CTRL_C to break                          
    Reply from 44.4.4.4: bytes=56 Sequence=1 ttl=253 time=9 ms                       
    Reply from 44.4.4.4: bytes=56 Sequence=2 ttl=253 time=5 ms                     
    Reply from 44.4.4.4: bytes=56 Sequence=3 ttl=253 time=4 ms                       
    Reply from 44.4.4.4: bytes=56 Sequence=4 ttl=253 time=5 ms                    
    Reply from 44.4.4.4: bytes=56 Sequence=5 ttl=253 time=4 ms                    

  --- 44.4.4.4 ping statistics ---                                        
    5 packet(s) transmitted                                                 
    5 packet(s) received                                                  
    0.00% packet loss                                            
    round-trip min/avg/max = 4/5/9 ms</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001116288820__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>PE1 configuration file</p>
<pre class="screen">#
sysname PE1
#
ip vpn-instance vpn1
 ipv4-family
  route-distinguisher 100:1
  apply-label per-instance
  import route-policy rp11 evpn
  vpn-target 1:1 export-extcommunity evpn
  vpn-target 1:1 import-extcommunity evpn
#
ip vpn-instance vpn2
 ipv4-family
  route-distinguisher 100:2
  apply-label per-instance
  import route-policy rp22 evpn
  vpn-target 2:2 export-extcommunity evpn
  vpn-target 2:2 import-extcommunity evpn      
# 
network-slice instance 10
 description Basic                                         
#                                                    
network-slice instance 20
 description vpn1 
#                                                    
network-slice instance 30
 description vpn2
#               
segment-routing ipv6
 encapsulation source-address 2001:DB8:1::1
 locator PE1 ipv6-prefix 2001:DB8:100:: 64 static 32
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0001.00
 #              
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE1 auto-sid-disable
 #              
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:10::1/64
 isis ipv6 enable 1 
 network-slice 10 data-plane
#               
interface GigabitEthernet<span>0/1/0</span>.1 
 vlan-type dot1q 11
 ipv6 enable    
 ipv6 address auto link-local
 mode channel enable 
 mode channel bandwidth 500
 basic-slice 10 
 network-slice 20 data-plane
#               
interface GigabitEthernet<span>0/1/0</span>.2 
 vlan-type dot1q 22
 ipv6 enable    
 ipv6 address auto link-local
 mode channel enable 
 mode channel bandwidth 500
 basic-slice 10 
 network-slice 30 data-plane
#
network-slice color-mapping
 color 101 network-slice 20
 color 202 network-slice 30
#               
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown  
 ip binding vpn-instance vpn1
 ip address 10.11.1.1 255.255.255.0
#               
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown  
 ip binding vpn-instance vpn2
 ip address 10.33.1.1 255.255.255.0
#               
interface LoopBack1
 ipv6 enable    
 ipv6 address 2001:DB8:1::1/128
 isis ipv6 enable 1
#               
bgp 100         
 router-id 1.1.1.1
 peer 2001:DB8:3::3 as-number 100
 peer 2001:DB8:3::3 connect-interface LoopBack1
 #              
 ipv4-family unicast
  undo synchronization
 #              
 ipv4-family vpn-instance vpn1
  import-route direct
  advertise l2vpn evpn
  segment-routing ipv6 locator PE1 evpn
  segment-routing ipv6 best-effort evpn
  peer 10.11.1.2 as-number 65410
 #              
 ipv4-family vpn-instance vpn2
  import-route direct
  advertise l2vpn evpn
  segment-routing ipv6 locator PE1 evpn
  segment-routing ipv6 best-effort evpn
  peer 10.33.1.2 as-number 65430
 #              
 l2vpn-family evpn
  policy vpn-target
  peer 2001:DB8:3::3 enable
  peer 2001:DB8:3::3 advertise encap-type srv6
#               
route-policy rp11 permit node 10                                                        
 apply extcommunity color 0:101                                                                             
#               
route-policy rp22 permit node 10                                                        
 apply extcommunity color 0:202  
#               
return </pre>
</li><li><p>P configuration file</p>
<pre class="screen">#
sysname P
# 
network-slice instance 10
 description Basic 
#                                                    
network-slice instance 20
 description vpn1
#                                                    
network-slice instance 30
 description vpn2
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0002.00
 #              
 ipv6 enable topology ipv6
 #              
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:10::2/64
 isis ipv6 enable 1
 network-slice 10 data-plane
#               
interface GigabitEthernet<span>0/1/0</span>.1 
 vlan-type dot1q 11
 ipv6 enable    
 ipv6 address auto link-local
 mode channel enable 
 mode channel bandwidth 500
 basic-slice 10 
 network-slice 20 data-plane
#               
interface GigabitEthernet<span>0/1/0</span>.2 
 vlan-type dot1q 22
 ipv6 enable    
 ipv6 address auto link-local
 mode channel enable 
 mode channel bandwidth 500
 basic-slice 10 
 network-slice 30 data-plane
#               
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:20::1/64
 isis ipv6 enable 1
 network-slice 10 data-plane
#               
interface GigabitEthernet<span>0/2/0</span>.1
 vlan-type dot1q 11 
 ipv6 enable    
 ipv6 address auto link-local
 mode channel enable 
 mode channel bandwidth 500
 basic-slice 10 
 network-slice 20 data-plane
#               
interface GigabitEthernet<span>0/2/0</span>.2 
 vlan-type dot1q 22
 ipv6 enable    
 ipv6 address auto link-local
 mode channel enable 
 mode channel bandwidth 500
 basic-slice 10 
 network-slice 30 data-plane
#               
return </pre>
</li><li><p>PE2 configuration file</p>
<pre class="screen">#
sysname PE2
#
ip vpn-instance vpn1
 ipv4-family
  route-distinguisher 200:1
  apply-label per-instance
  import route-policy rp11 evpn
  vpn-target 1:1 export-extcommunity evpn
  vpn-target 1:1 import-extcommunity evpn
#
ip vpn-instance vpn2
 ipv4-family
  route-distinguisher 200:2
  apply-label per-instance
  import route-policy rp22 evpn
  vpn-target 2:2 export-extcommunity evpn
  vpn-target 2:2 import-extcommunity evpn        
# 
network-slice instance 10
 description Basic 
#                                                    
network-slice instance 20
 description vpn1
#                                                    
network-slice instance 30
 description vpn2
#               
segment-routing ipv6
 encapsulation source-address 2001:DB8:3::3
 locator PE2 ipv6-prefix 2001:DB8:130:: 64 static 32
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0003.00
 #              
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE2 auto-sid-disable
 #              
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:20::2/64
 isis ipv6 enable 1 
 network-slice 10 data-plane
#               
interface GigabitEthernet<span>0/1/0</span>.1 
 vlan-type dot1q 11
 ipv6 enable    
 ipv6 address auto link-local
 mode channel enable 
 mode channel bandwidth 500
 basic-slice 10 
 network-slice 20 data-plane
#               
interface GigabitEthernet<span>0/1/0</span>.2 
 vlan-type dot1q 22
 ipv6 enable    
 ipv6 address auto link-local
 mode channel enable 
 mode channel bandwidth 500
 basic-slice 10 
 network-slice 30 data-plane
#
network-slice color-mapping
 color 101 network-slice 20
 color 202 network-slice 30
#               
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown  
 ip binding vpn-instance vpn1
 ip address 10.22.1.1 255.255.255.0 
#               
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown  
 ip binding vpn-instance vpn2
 ip address 10.44.1.1 255.255.255.0
#               
interface LoopBack1
 ipv6 enable    
 ipv6 address 2001:DB8:3::3/128
 isis ipv6 enable 1
#               
bgp 100         
 router-id 3.3.3.3
 peer 2001:DB8:1::1 as-number 100
 peer 2001:DB8:1::1 connect-interface LoopBack1
 #              
 ipv4-family unicast
  undo synchronization
 #              
 ipv4-family vpn-instance vpn1
  import-route direct
  advertise l2vpn evpn
  segment-routing ipv6 locator PE2 evpn
  segment-routing ipv6 best-effort evpn
  peer 10.22.1.2 as-number 65420
 #              
 ipv4-family vpn-instance vpn2
  import-route direct
  advertise l2vpn evpn
  segment-routing ipv6 locator PE2 evpn
  segment-routing ipv6 best-effort evpn
  peer 10.44.1.2 as-number 65440
 #              
 l2vpn-family evpn
  policy vpn-target
  peer 2001:DB8:1::1 enable
  peer 2001:DB8:1::1 advertise encap-type srv6
#                             
route-policy rp11 permit node 10                                                        
 apply extcommunity color 0:101                                                                             
#               
route-policy rp22 permit node 10                                                        
 apply extcommunity color 0:202
#               
return</pre>
</li><li><p>CE1 configuration file</p>
<pre class="screen">#
sysname CE1
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ip address 10.11.1.2 255.255.255.0
#               
interface LoopBack1
 ip address 11.1.1.1 32
#               
bgp 65410       
 router-id 11.1.1.1
 peer 10.11.1.1 as-number 100
 #              
 ipv4-family unicast
  undo synchronization
  import-route direct
  peer 10.11.1.1 enable
#  
return </pre>
</li><li><p>CE2 configuration file</p>
<pre class="screen">#
sysname CE2
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ip address 10.22.1.2 255.255.255.0
#               
interface LoopBack1
 ip address 22.2.2.2 32
#               
bgp 65420       
 router-id 22.2.2.2
 peer 10.22.1.1 as-number 100
 #              
 ipv4-family unicast
  undo synchronization
  import-route direct
  peer 10.22.1.1 enable
#
return</pre>
</li><li><p>CE3 configuration file</p>
<pre class="screen">#
sysname CE3
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ip address 10.33.1.2 255.255.255.0
#               
interface LoopBack1
 ip address 33.3.3.3 32
#               
bgp 65430       
 router-id 33.3.3.3
 peer 10.33.1.1 as-number 100
 #              
 ipv4-family unicast
  undo synchronization
  import-route direct
  peer 10.33.1.1 enable
#  
return</pre>
</li><li><p>CE4 configuration file</p>
<pre class="screen">#
sysname CE4
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ip address 10.44.1.2 255.255.255.0
#               
interface LoopBack1
 ip address 44.4.4.4 32
#               
bgp 65440       
 router-id 44.4.4.4
 peer 10.44.1.1 as-number 100
 #              
 ipv4-family unicast
  undo synchronization
  import-route direct
  peer 10.44.1.1 enable
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0010.html">Configuration Examples for SRv6 BE (IS-IS)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0015.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0269.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>