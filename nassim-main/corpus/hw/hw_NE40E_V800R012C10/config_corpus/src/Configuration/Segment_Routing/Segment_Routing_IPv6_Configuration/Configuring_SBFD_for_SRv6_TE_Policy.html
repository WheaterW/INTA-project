
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring SBFD for SRv6 TE Policy">
<meta name="abstract" content="This section describes how to configure seamless bidirectional forwarding detection (SBFD) for SRv6 TE Policy.">
<meta name="description" content="This section describes how to configure seamless bidirectional forwarding detection (SBFD) for SRv6 TE Policy.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0236.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ona-arm-bfd_over_srv6-te_poliy.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00587852">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001129242189">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring SBFD for SRv6 TE Policy</title>
</head>
<body><a name="EN-US_TASK_0000001129242189"></a><a name="EN-US_TASK_0000001129242189"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring SBFD for SRv6 TE Policy</h1>
<div class="taskbody"><p>This section describes how to configure seamless bidirectional forwarding detection (SBFD) for SRv6 TE Policy.</p>
<div class="context"><a name="EN-US_TASK_0000001129242189__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>SBFD for SRv6 TE Policy can quickly detect segment list faults. If all the segment lists of a candidate path are faulty, SBFD triggers a hot-standby candidate path switchover to minimize the impact on services.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001129242189__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring SBFD for SRv6 TE Policy, complete the following tasks:</p>
<ul><li><p>Configure an SRv6 TE Policy.</p>
</li><li><p>Run the <a href="cmdqueryname=te+ipv6-router-id"><b><span class="cmdname">te ipv6-router-id</span></b></a><strong> </strong><i><span class="varname">ipv6Addr</span></i> command to configure a global TE IPv6 router ID.</p>
</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001129242189__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure an SBFD initiator.</span><ol><li class="substepexpand"><span>Run <strong><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></strong></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <strong class="cmdqueryname"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></strong></span><p><p>BFD is enabled globally.</p>
</p><p><p>BFD-related configuration can be performed only after BFD is enabled globally using the <strong><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></strong> command.</p>
</p></li><li class="substepexpand"><span>Run <strong><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></strong></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <strong><a href="cmdqueryname=sbfd"><b><span class="cmdname">sbfd</span></b></a></strong></span><p><p>SBFD is enabled globally, and the SBFD view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <strong><a href="cmdqueryname=destination+ipv6"><b><span class="cmdname">destination ipv6</span></b></a></strong> <em><i><span class="varname">Ipv6Address</span></i></em> <strong><a href="cmdqueryname=remote-discriminator"><b><span class="cmdname">remote-discriminator</span></b></a></strong> <i><span class="varname">discriminator-value</span></i></span><p><p>The mapping between the IPv6 address and discriminator of the SBFD reflector is configured.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The IPv6 address of the SBFD reflector must be the same as the endpoint of the corresponding SRv6 TE Policy.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <strong><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></strong></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a></span><p><p>The SRv6 view is displayed.</p>
</p></li><li class="substepexpand"><span>Configure SBFD for SRv6 TE Policy.</span><p><p>SBFD for SRv6 TE Policy supports both global configuration and single-policy configuration. You can select either of the two modes.</p>
<ul><li><p>Global configuration</p>
<ol type="a"><li><p>Run the <a href="cmdqueryname=srv6-te-policy+bfd+seamless+enable"><b><span class="cmdname">srv6-te-policy bfd seamless enable</span></b></a> [ <strong><span>reverse-path binding-sid</span></strong> ] command to enable SBFD for all SRv6 TE Policies.</p>
<p>In SBFD for SRv6 TE Policy scenarios, the <strong><span>reverse-path binding-sid</span></strong> parameter enables SBFD return packets to be forwarded over an SRv6 TE Policy. If this parameter is specified, a reverse binding SID needs to be configured for the segment list referenced by the candidate path of the SRv6 TE Policy on the local device, and the corresponding SRv6 TE Policy also needs to be configured on the peer device.</p>
</li><li><p>(Optional) Run the <a href="cmdqueryname=srv6-te-policy+bfd"><b><span class="cmdname">srv6-te-policy bfd</span></b></a> { <strong><span>min-tx-interval</span></strong> <i><span class="varname">tx-value</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">detectmulti-value</span></i> } <sup>*</sup> command to configure SBFD parameters for the SRv6 TE Policies.</p>
</li><li>(Optional) Run the <a href="cmdqueryname=srv6-te-policy+bfd"><b><span class="cmdname">srv6-te-policy bfd</span></b></a> { <strong><span>min-tx-interval</span></strong> <i><span class="varname">backup-tx-value</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">backup-detectmulti-value</span></i> } <sup>*</sup> <strong><span>backup-path</span></strong> command to configure SBFD parameters for the backup candidate paths of the SRv6 TE Policies.</li><li>(Optional) Run the <a href="cmdqueryname=srv6-te-policy+bfd+switch-delay"><b><span class="cmdname">srv6-te-policy bfd switch-delay</span></b></a> <i><span class="varname">delay-interval</span></i> command to configure a BFD switching delay for the SRv6 TE Policies.</li><li>(Optional) Run the <a href="cmdqueryname=srv6-te-policy+bfd"><b><span class="cmdname">srv6-te-policy bfd</span></b></a> <strong><span>no-bypass</span></strong> [ <strong><span>preferred</span></strong> ] command to enable the SBFD no-bypass function for the SRv6 TE Policies.<p>After this function is enabled, SBFD for SRv6 TE Policy packets do not transit local protection paths such as TI-LFA and TE FRR paths.</p>
<p>In scenarios where SBFD for SRv6 TE Policy is deployed, if the segment lists of the primary candidate path all fail and a local protection path (for example, a TI-LFA or TE FRR path) exists, SBFD remains in the Up state, and data traffic is switched to the TI-LFA or TE FRR path. However, the performance such as the bandwidth/latency of the TI-LFA or TE FRR path may be unstable, preventing the path from meeting the strict SLA requirements of high-value private line services. To resolve this problem, you can enable SBFD traffic to bypass local protection paths. In this way, SBFD goes Down if the segment lists of the primary candidate path all fail, triggering the candidate path to also go Down. As a result, traffic is switched to a backup candidate path or another SRv6 TE Policy.</p>
<p>If the <strong><span>preferred</span></strong> parameter is specified and an SRv6 TE Policy has a backup path, BFD packets on the primary path are not transmitted over local protection paths such as TI-LFA and TE FRR paths. If the primary path fails, BFD goes down, and traffic is then switched to the backup path. BFD packets on the backup path can be transmitted over local protection paths to ensure service continuity.</p>
</li></ol>
</li><li><p>Single-policy configuration</p>
<ol type="a"><li><p>Run the <a href="cmdqueryname=srv6-te+policy"><b><span class="cmdname">srv6-te policy</span></b></a> <i><span class="varname">policy-name</span></i> command to enter the SRv6 TE Policy view.</p>
</li><li><p>Run the <a href="cmdqueryname=bfd+seamless"><b><span class="cmdname">bfd seamless</span></b></a> <strong><span>enable</span></strong> [ <strong><span>reverse-path binding-sid</span></strong> ] or <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd </span></b></a><strong><span>disable</span></strong> command to set the status of the SBFD function for the SRv6 TE Policy.</p>
<p>In SBFD for SRv6 TE Policy scenarios, the <strong><span>reverse-path binding-sid</span></strong> parameter enables SBFD return packets to be forwarded over an SRv6 TE Policy. If this parameter is specified, a reverse binding SID needs to be configured for the segment list referenced by the candidate path of the SRv6 TE Policy on the local device, and the corresponding SRv6 TE Policy also needs to be configured on the peer device.</p>
</li><li><p>(Optional) Run the <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> { <strong><span>min-tx-interval</span></strong> <i><span class="varname">tx-value</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">detectmulti-value</span></i> } <sup>*</sup> command to configure SBFD parameters for the SRv6 TE Policy.</p>
</li><li>(Optional) Run the <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> { <strong><span>min-tx-interval</span></strong> <i><span class="varname">backup-tx-value</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">backup-detectmulti-value</span></i> } <sup>*</sup> <strong><span>backup-path</span></strong> command to configure SBFD parameters for the backup candidate paths of the SRv6 TE Policy.</li><li>(Optional) Run the <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> { <strong><span>no-bypass</span></strong> [ <strong><span>preferred</span></strong> ] | <strong><span>bypass</span></strong> } command to set the status of the SBFD bypass function for the SRv6 TE Policy.<p>If you do not want the SBFD packets of the SRv6 TE Policy to transit local protection paths such as TI-LFA and TE FRR paths, select the <strong><span>no-bypass</span></strong> parameter. Otherwise, select the <strong><span>bypass</span></strong> parameter.</p>
<p>If you specify both the <strong><span>no-bypass</span></strong> and <strong><span>preferred</span></strong> parameters, the traffic forwarded over an SRv6 TE Policy is not preferentially transmitted over local protection paths. If an SRv6 TE Policy has a backup path, BFD packets on the primary path are not transmitted over local protection paths such as TI-LFA and TE FRR paths. If the primary path fails, BFD goes down, and traffic is then switched to the backup path. BFD packets on the backup path can be transmitted over local protection paths to ensure service continuity.</p>
</li></ol>
</li></ul>
<p>If an SRv6 TE Policy has both global and single-policy configurations, the single-policy configuration takes precedence.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <strong><a href="cmdqueryname=srv6-te-policy+switch-delay"><b><span class="cmdname">srv6-te-policy switch-delay</span></b></a></strong> <em><i><span class="varname">switchDelay</span></i></em> <strong><a href="cmdqueryname=delete-delay"><b><span class="cmdname">delete-delay</span></b></a></strong> <em><i><span class="varname">deleteDelay</span></i></em></span><p><p>Segment list switching and deletion delays are configured for SRv6 TE Policies.</p>
</p></li><li class="substepexpand"><span>Run <strong><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></strong></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure an SBFD reflector.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></span><p><p>BFD is enabled globally.</p>
</p><p><p>BFD-related configuration can be performed only after BFD is enabled globally using the <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> command.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=sbfd"><b><span class="cmdname">sbfd</span></b></a></span><p><p>SBFD is enabled globally, and the SBFD view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=reflector+discriminator"><b><span class="cmdname">reflector discriminator</span></b></a> <i><span class="varname">unsigned-integer-value</span></i></span><p><p>A discriminator is configured for the SBFD reflector.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>You can use a 32-bit integer or an IP address as an SBFD discriminator. A device converts discriminators into a uniform form, ensuring that each discriminator is globally unique in a domain.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0000001129242189__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring SBFD for SRv6 TE Policy, run the <strong><a href="cmdqueryname=display+srv6-te+policy"><b><span class="cmdname">display srv6-te policy</span></b></a></strong> [<strong><span> </span></strong><strong><strong><span>endpoint</span></strong></strong><em><i><span class="varname"> ipv6-address</span></i></em><strong> <strong><span>color</span></strong></strong><em><i><span class="varname"> color-value</span></i></em> | <strong><strong><span>policy-name</span></strong></strong><em><i><span class="varname"> name-value</span></i></em> ] command to check SRv6 TE Policy-specific SBFD status.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0000.html">Segment Routing IPv6 Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0236.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ona-arm-bfd_over_srv6-te_poliy.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>