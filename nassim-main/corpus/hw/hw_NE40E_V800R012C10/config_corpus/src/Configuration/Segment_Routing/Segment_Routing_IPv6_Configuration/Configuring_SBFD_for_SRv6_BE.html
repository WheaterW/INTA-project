
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring SBFD for SRv6 BE">
<meta name="abstract" content="This section describes how to configure SBFD for SRv6 BE to detect SRv6 BE faults.">
<meta name="description" content="This section describes how to configure SBFD for SRv6 BE to detect SRv6 BE faults.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_1000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0257.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001198996637">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/thickbox.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/imageResize.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-migrate-1.2.1.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-ui.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.mousewheel.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/thickbox.js"></script>
<title>Configuring SBFD for SRv6 BE</title>
</head>
<body><a name="EN-US_TASK_0000001198996637"></a><a name="EN-US_TASK_0000001198996637"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring SBFD for SRv6 BE</h1>
<div class="taskbody"><p>This section describes how to configure SBFD for SRv6 BE to detect SRv6 BE faults.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001198996637__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring SBFD for SRv6 BE, complete the following tasks:</p>
<ul><li><p>Configure SRv6 BE. For details, see <a href="dc_vrp_srv6_cfg_all_0002.html">Configuring SRv6 BE (IS-IS)</a>.</p>
</li><li>Run the <a href="cmdqueryname=te+ipv6-router-id"><b><span class="cmdname">te ipv6-router-id</span></b></a><strong> </strong><i><span class="varname">ipv6Addr</span></i> command to configure a global TE IPv6 router ID.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001198996637__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>SBFD for SRv6 BE triggers a rapid FRR switchover if the primary path fails, thereby minimizing the impact on services.</p>
<p>SBFD for SRv6 BE typically applies to SBFD for BGP public network IPv4/IPv6 over SRv6 BE, L3VPNv4/L3VPNv6 over SRv6 BE, EVPN L3VPNv4/EVPN L3VPNv6 over SRv6 BE, and EVPN L2VPN over SRv6 BE scenarios.</p>
<div class="fignone"><span class="figcap"><b>Figure 1 </b>SBFD for SRv6 BE networking</span><br><span><img class="imgResize" id="EN-US_TASK_0000001198996637__en-us_concept_0000001198987685_image16533715132310" src="figure/en-us_image_0000001216301459.png" width="518.7" height="309.857415" title="Click to enlarge"></span></div>
<p>Assume that data is forwarded from CE1 to CE2. In this example, SBFD for SRv6 BE is implemented as follows:</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001198996637__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure an SBFD reflector.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></span><p><p>BFD is enabled globally.</p>
</p><p><p>BFD-related configuration can be performed only after BFD is enabled globally using the <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> command.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=sbfd"><b><span class="cmdname">sbfd</span></b></a></span><p><p>SBFD is enabled globally, and the SBFD view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=reflector+discriminator"><b><span class="cmdname">reflector discriminator</span></b></a> { <span><i><span class="varname">unsigned-integer-value</span></i></span> | <span><i><span class="varname">ip-address-value</span></i></span> }</span></span><p><p>A discriminator is configured for the SBFD reflector.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>BGP is enabled, the local AS number is specified, and the BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span><p><p>The BGP-IPv4 unicast address family view is displayed.</p>
</p><p><p>This example uses the SBFD for public network IPv4 over SRv6 BE scenario, in which the BGP-IPv4 unicast address family view needs to be used. Determine which BGP address family view to use according to your scenario.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=segment-routing+ipv6+advertise+sbfd-discriminator"><b><span class="cmdname">segment-routing ipv6 advertise sbfd-discriminator</span></b></a></span><p><p>The device is enabled to advertise the SBFD discriminator to an IPv6 peer.</p>
</p><p><p>In an <a href="dc_vrp_srv6_cfg_all_0252.html">EVPN L3VPN over SRv6 BE</a> scenario, you need to run the <strong>segment-routing ipv6 advertise sbfd-discriminator evpn</strong> command in the BGP-VPN instance view.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>Public network IP over SRv6 BE scenario<p>After the <a href="cmdqueryname=segment-routing+ipv6+locator+end-dt46"><b><span class="cmdname">segment-routing ipv6 locator end-dt46</span></b></a> command is run in the BGP view, public network IPv4 and IPv6 unicast routes carry the same SID. You can run the <strong>segment-routing ipv6 advertise sbfd-discriminator end-dt46</strong> command in the BGP view to enable the device to advertise the SBFD discriminator to a public network BGP peer through a BGP route.</p>
</li><li>L3VPN over SRv6 BE scenario<p>After the <a href="cmdqueryname=segment-routing+ipv6+locator+end-dt46"><b><span class="cmdname">segment-routing ipv6 locator end-dt46</span></b></a> command is run in the BGP-VPN instance view, VPN IPv4 and IPv6 unicast routes carry the same SID. You can run the <a href="cmdqueryname=segment-routing+ipv6+advertise+sbfd-discriminator+end-dt46"><b><span class="cmdname">segment-routing ipv6 advertise sbfd-discriminator end-dt46</span></b></a> command in the BGP-VPN instance view to enable the device to advertise the SBFD discriminator to a BGP VPN peer through a BGP route.</p>
</li></ul>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <strong><span>prefix-sid</span></strong> <strong><span>advertise-srv6-locator</span></strong></span><p><p>The device is enabled to exchange prefix SIDs with the specified peer.</p>
</p><p><p>In the BGP-VPNv4 address family view, run the <a href="cmdqueryname=peer+prefix-sid+%28BGP-IPv4+unicast+address+family+view%29+%28IPv6%29"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <strong><span>prefix-sid</span></strong> <strong><span>sid-type5</span></strong> <strong><span>advertise-srv6-locator</span></strong> command to enable the device to carry SRv6 SIDs through the SRv6 Services TLV (TLV Type 5).</p>
<p>In a scenario where BFD is used to check locator reachability and the P nodes between local and remote PEs summarize locator routes, specify the <strong><span>advertise-srv6-locator</span></strong> parameter to enable PE-advertised BGP routes to carry locator length information. In this way, when the peer IPv6 address bound to the BFD session matches the locator's IPv6 address, locator reachability can be checked using BFD to complete auto FRR path switching.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure an SBFD initiator.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></span><p><p>BFD is enabled globally.</p>
</p><p><p>BFD-related configuration can be performed only after BFD is enabled globally using the <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> command.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=sbfd"><b><span class="cmdname">sbfd</span></b></a></span><p><p>SBFD is enabled globally.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a></span></span><p><p>SRv6 is enabled, and the SRv6 view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><strong>locator-bfd seamless enable</strong> [ <strong><span>filter-policy</span></strong> <strong><span>ipv6-prefix</span></strong> <i><span class="varname">ipv6-prefix-name</span></i> ]</span></span><p><p>SBFD for SRv6 BE is enabled.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>SBFD must be enabled globally before you run this command. Otherwise, SBFD for SRv6 BE cannot take effect.</p>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Run <span><strong>locator-bfd </strong>{ <span><strong>min-tx-interval</strong></span><i><span class="varname"> transmit-interval</span></i> | <span><strong>min-rx-interval</strong></span><i><span class="varname"> receive-interval</span></i> | <span><span><strong>detect-multiplier</strong></span><i><span class="varname"> multiplier-value</span></i></span> }*</span></span><p><p>SRv6 locator-specific SBFD parameters are configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0000001198996637__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring SBFD for SRv6 BE, verify the configuration, such as the BFD session status.</p>
<ul><li>Run the <a href="cmdqueryname=display+bfd+session+all"><b><span class="cmdname">display bfd session all</span></b></a> command to check the configurations of all BFD sessions.</li><li>Run the <strong><a href="cmdqueryname=display+bgp+ipv6+routing-table"><b><span class="cmdname">display bgp ipv6 routing-table</span></b></a></strong> <i><span class="varname">ipv6-address</span></i><em> </em>[ <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> ] <strong><span>bfd-discriminator</span></strong> command to check SBFD discriminator information.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0000.html">Segment Routing IPv6 Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_1000.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0257.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>

<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>