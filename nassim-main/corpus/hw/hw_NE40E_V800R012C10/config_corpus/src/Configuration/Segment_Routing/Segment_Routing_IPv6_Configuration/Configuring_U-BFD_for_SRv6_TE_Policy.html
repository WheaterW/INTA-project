
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring U-BFD for SRv6 TE Policy">
<meta name="abstract" content="This section describes how to configure unaffiliated bidirectional forwarding detection (U-BFD) for SRv6 TE Policy.">
<meta name="description" content="This section describes how to configure unaffiliated bidirectional forwarding detection (U-BFD) for SRv6 TE Policy.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_sbfd1_over_srv6-te_poliy.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0242.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001129537661">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring U-BFD for SRv6 TE Policy</title>
</head>
<body><a name="EN-US_TASK_0000001129537661"></a><a name="EN-US_TASK_0000001129537661"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring U-BFD for SRv6 TE Policy</h1>
<div class="taskbody"><p>This section describes how to configure unaffiliated bidirectional forwarding detection (U-BFD) for SRv6 TE Policy.</p>
<div class="context"><a name="EN-US_TASK_0000001129537661__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>SBFD for SRv6 TE Policy requires you to configure the mapping between the reflector's IPv6 address and discriminator on the headend of the involved SRv6 TE Policy and configure the same reflector discriminator on the endpoint of the policy. If these requirements are not met, SBFD loopback packets cannot be constructed. In addition, you must ensure that the configured reflector discriminator is globally unique to avoid possible SBFD errors.</p>
<p>In inter-AS SRv6 TE Policy scenarios, the preceding constraints on the reflector discriminator make network planning inconvenient. To address this issue, U-BFD for SRv6 TE Policy is introduced.</p>
<p>U-BFD for SRv6 TE Policy can quickly detect segment list faults. If all the segment lists of a candidate path are faulty, U-BFD triggers a hot-standby candidate path switchover to minimize the impact on services.</p>
<p>The global configuration takes effect for all SRv6 TE Policies, whereas the single-policy configuration takes effect only for the specified SRv6 TE Policy.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001129537661__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring U-BFD for SRv6 TE Policy, complete the following tasks:</p>
<ul><li><p>Configure an SRv6 TE Policy.</p>
</li><li><p>Run the <a href="cmdqueryname=te+ipv6-router-id"><b><span class="cmdname">te ipv6-router-id</span></b></a><strong> </strong><i><span class="varname">ipv6Addr</span></i> command to configure a global TE IPv6 router ID.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001129537661__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <strong><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></strong></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <strong class="cmdqueryname"><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></strong></span><p><p>BFD is enabled globally.</p>
</p><p><p>BFD-related configuration can be performed only after BFD is enabled globally using the <strong>bfd</strong> command.</p>
</p></li><li><span>Run <strong><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></strong></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a></span><p><p>The SRv6 view is displayed.</p>
</p></li><li><span>Configure U-BFD for SRv6 TE Policy.</span><ul><li>Global configuration<ol type="a"><li><p>Run the <a href="cmdqueryname=srv6-te-policy+bfd+unaffiliated+enable"><b><span class="cmdname">srv6-te-policy bfd unaffiliated enable</span></b></a> [ <strong><span>reverse-path binding-sid</span></strong> ] command to enable U-BFD for all SRv6 TE Policies.</p>
<p>The <strong><span>reverse-path binding-sid</span></strong> parameter enables U-BFD return packets to be forwarded over an SRv6 TE Policy.</p>
</li><li><p>(Optional) Run the <a href="cmdqueryname=srv6-te-policy+bfd"><b><span class="cmdname">srv6-te-policy bfd</span></b></a> { <strong><span>min-tx-interval</span></strong> <i><span class="varname">tx-value</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">detectmulti-value</span></i> } <sup>*</sup> command to configure U-BFD parameters for the SRv6 TE Policies.</p>
</li><li>(Optional) Run the <a href="cmdqueryname=srv6-te-policy+bfd"><b><span class="cmdname">srv6-te-policy bfd</span></b></a> { <strong><span>min-tx-interval</span></strong> <i><span class="varname">backup-tx-value</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">backup-detectmulti-value</span></i> } <sup>*</sup> <strong><span>backup-path</span></strong> command to configure U-BFD parameters for the backup candidate paths of the SRv6 TE Policies.</li><li>(Optional) Run the <a href="cmdqueryname=srv6-te-policy+bfd+switch-delay"><b><span class="cmdname">srv6-te-policy bfd switch-delay</span></b></a> <i><span class="varname">delay-interval</span></i> command to configure a BFD switching delay for the SRv6 TE Policies.</li><li>(Optional) Run the <a href="cmdqueryname=srv6-te-policy+bfd"><b><span class="cmdname">srv6-te-policy bfd</span></b></a> <strong><span>no-bypass</span></strong> [ <strong><span>preferred</span></strong> ]  command to enable the BFD no-bypass function for the SRv6 TE Policies.<p>After this function is enabled, U-BFD for SRv6 TE Policy packets do not transit local protection paths such as TI-LFA and TE FRR paths.</p>
<p>For example, in TE FRR protection, if the current SID is unreachable, the SRv6 TE Policy uses the next-layer SID for forwarding. If this SID is still unreachable, the SRv6 TE Policy forwards the packet using the lower-layer SID until the destination IPv6 address of the packet changes to the TE IPv6 router ID of the headend. In this case, the BFD packets are looped back to the headend, and the BFD status remains up, which is inconsistent with the actual forwarding status of the SRv6 TE Policy. As such, you are advised to enable the BFD no-bypass function in U-BFD for SRv6 TE Policy scenarios.</p>
<p>If the <strong><span>preferred</span></strong> parameter is specified and an SRv6 TE Policy has a backup path, BFD packets on the primary path are not transmitted over local protection paths such as TI-LFA and TE FRR paths. If the primary path fails, BFD goes down, and traffic is then switched to the backup path. BFD packets on the backup path can be transmitted over local protection paths to ensure service continuity.</p>
</li></ol>
</li><li>Single-policy configuration<ol type="a"><li><p>Run the <a href="cmdqueryname=srv6-te+policy"><b><span class="cmdname">srv6-te policy</span></b></a> <i><span class="varname">policy-name</span></i> command to enter the SRv6 TE Policy view.</p>
</li><li><p>Run the <a href="cmdqueryname=bfd+unaffiliated"><b><span class="cmdname">bfd unaffiliated</span></b></a> <strong><span>enable</span></strong> [ <strong><span>reverse-path binding-sid</span></strong> ] or <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd </span></b></a><strong><span>disable</span></strong> command to set the status of the U-BFD function for the SRv6 TE Policy.</p>
<p>The <strong><span>reverse-path binding-sid</span></strong> parameter enables U-BFD return packets to be forwarded over an SRv6 TE Policy.</p>
</li><li><p>(Optional) Run the <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> { <strong><span>min-tx-interval</span></strong> <i><span class="varname">tx-value</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">detectmulti-value</span></i> } <sup>*</sup> command to configure U-BFD parameters for the SRv6 TE Policy.</p>
</li><li>(Optional) Run the <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> { <strong><span>min-tx-interval</span></strong> <i><span class="varname">backup-tx-value</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">backup-detectmulti-value</span></i> } <sup>*</sup> <strong><span>backup-path</span></strong> command to configure U-BFD parameters for the backup candidate paths of the SRv6 TE Policy.</li><li>(Optional) Run the <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> { <strong><span>no-bypass</span></strong> [ <strong><span>preferred</span></strong> ] | <strong><span>bypass</span></strong> } command to set the status of the U-BFD bypass function for the SRv6 TE Policy.<p>If you do not want the U-BFD packets of the SRv6 TE Policy to transit local protection paths such as TI-LFA and TE FRR paths, select the <strong><span>no-bypass</span></strong> parameter. Otherwise, select the <strong><span>bypass</span></strong> parameter.</p>
<p>If you specify both the <strong><span>no-bypass</span></strong> and <strong><span>preferred</span></strong> parameters, the traffic forwarded over an SRv6 TE Policy is not preferentially transmitted over local protection paths. If an SRv6 TE Policy has a backup path, BFD packets on the primary path are not transmitted over local protection paths such as TI-LFA and TE FRR paths. If the primary path fails, BFD goes down, and traffic is then switched to the backup path. BFD packets on the backup path can be transmitted over local protection paths to ensure service continuity.</p>
</li></ol>
</li></ul>
</li><li><span>(Optional) Run <strong><a href="cmdqueryname=srv6-te-policy+switch-delay"><b><span class="cmdname">srv6-te-policy switch-delay</span></b></a></strong> <em><i><span class="varname">switchDelay</span></i></em> <strong><a href="cmdqueryname=delete-delay"><b><span class="cmdname">delete-delay</span></b></a></strong> <em><i><span class="varname">deleteDelay</span></i></em></span><p><p>Segment list switching and deletion delays are configured for SRv6 TE Policies.</p>
</p></li><li><span>Run <strong><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></strong></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001129537661__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring U-BFD for SRv6 TE Policy, run the <strong><a href="cmdqueryname=display+srv6-te+policy"><b><span class="cmdname">display srv6-te policy</span></b></a></strong> [<strong><span> </span></strong><strong><strong><span>endpoint</span></strong></strong><em><i><span class="varname"> ipv6-address</span></i></em><strong> <strong><span>color</span></strong></strong><em><i><span class="varname"> color-value</span></i></em> | <strong><strong><span>policy-name</span></strong></strong><em><i><span class="varname"> name-value</span></i></em> ] command to check SRv6 TE Policy-specific U-BFD status.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0000.html">Segment Routing IPv6 Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_sbfd1_over_srv6-te_poliy.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0242.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>