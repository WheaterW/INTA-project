
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring One-Arm BFD for E2E SR-MPLS TE LSP">
<meta name="abstract" content="One-arm BFD for E2E SR-MPLS TE LSP quickly detects faults on inter-AS E2E SR-MPLS TE LSPs and protects traffic on E2E SR-MPLS TE LSPs.">
<meta name="description" content="One-arm BFD for E2E SR-MPLS TE LSP quickly detects faults on inter-AS E2E SR-MPLS TE LSPs and protects traffic on E2E SR-MPLS TE LSPs.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0039.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0059.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,l00587852">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00468467">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368841">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring One-Arm BFD for E2E SR-MPLS TE LSP</title>
</head>
<body><a name="EN-US_TASK_0172368841"></a><a name="EN-US_TASK_0172368841"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring One-Arm BFD for E2E SR-MPLS TE LSP</h1>
<div class="taskbody"><p>One-arm BFD for E2E SR-MPLS TE LSP quickly detects faults on inter-AS E2E SR-MPLS TE LSPs and protects traffic on E2E SR-MPLS TE LSPs.</p>
<div class="context"><a name="EN-US_TASK_0172368841__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>One-arm BFD monitors inter-AS E2E SR-MPLS TE LSPs. If a specified transit node on a tunnel fails, traffic is switched to the hot-standby LSP, which reduces the impact on services.</p>
<p>With one-arm BFD for E2E SR-MPLS TE LSP enabled, if the reflector can successfully recurse packets to the E2E SR-MPLS TE LSP using the IP address of the initiator, the reflector forwards the packets through the E2E SR-MPLS TE LSP. Otherwise, the reflector forwards the packets over IP routes.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368841__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring one-arm BFD for E2E SR-MPLS TE LSP, configure an inter-AS E2E SR-MPLS TE tunnel.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368841__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enable global BFD.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></span><p><p>BFD is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Enable the ingress to dynamically create a one-arm BFD session to monitor E2E SR-MPLS TE LSPs.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">interface-number</span></i></span><p><p>The view of the E2E SR-MPLS TE tunnel interface is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+te+bfd+enable"><b><span class="cmdname">mpls te bfd enable</span></b></a> <strong><span>one-arm-echo</span></strong> [ <strong><span>primary</span></strong> ]</span><p><p>Automatic creation of a one-arm BFD session to monitor E2E SR-MPLS TE LSPs is triggered.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+te+reverse-lsp+binding-sid"><b><span class="cmdname">mpls te reverse-lsp binding-sid</span></b></a> <strong><span>label</span></strong> <i><span class="varname">label-value</span></i></span><p><p>A binding SID is specified for a reverse LSP in the E2E SR-MPLS TE tunnel.</p>
<p>Ensure that the <a href="cmdqueryname=mpls+te+binding-sid"><b><span class="cmdname">mpls te binding-sid</span></b></a> <strong><span>label</span></strong> <i><span class="varname">label-value</span></i> command has been run on the ingress of the reverse LSP.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Adjust BFD parameters on the ingress.</span><p><p>Adjust BFD parameters on the ingress in either of the following modes:</p>
<ul><li><p>Adjust BFD parameters globally. This method is used when BFD parameters for most E2E SR-MPLS TE tunnels need to be adjusted on the ingress.</p>
</li><li><p>Adjust BFD parameters on a specific tunnel interface. If an E2E SR-MPLS TE tunnel interface needs BFD parameters different from the globally configured ones, adjust BFD parameters on the specific tunnel interface.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In one-arm BFD for E2E SR-MPLS TE mode, BFD does not need to be enabled on the peer, and the <strong><span>min-tx-interval</span></strong> <i><span class="varname">tx-interval</span></i> parameter of the local end does not take effect. Therefore, the actual detection period of the ingress equals the configured interval at which BFD packets are received on the ingress multiplied by the detection multiplier configured on the ingress.</p>
</div></div>
<p>Perform the following operations as required:</p>
</p><ul><li><strong>Adjust BFD parameters globally.</strong><ul><li><p>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></p>
<p>The system view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=mpls"><b><span class="cmdname">mpls</span></b></a></p>
<p>The MPLS view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=mpls+te+bfd"><b><span class="cmdname">mpls te bfd</span></b></a> { <strong><span>min-rx-interval</span></strong> <i><span class="varname">rx-interval</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">multiplier</span></i> } <sup>*</sup></p>
<p>BFD parameters are set.</p>
</li><li><p>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
<p>The configuration is committed.</p>
</li></ul>
</li><li><strong>Adjust BFD parameters on a specific tunnel interface.</strong><ul><li><p>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></p>
<p>The system view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">interface-number</span></i></p>
<p>The tunnel interface view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=mpls+te+bfd"><b><span class="cmdname">mpls te bfd</span></b></a> { <strong><span>min-rx-interval</span></strong> <i><span class="varname">rx-interval</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">multiplier</span></i> } <sup>*</sup></p>
<p>BFD parameters are set.</p>
</li><li><p>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
<p>The configuration is committed.</p>
</li></ul>
</li></ul>
</li></ol></div>
<div class="example"><a name="EN-US_TASK_0172368841__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><div class="p">After successfully configuring one-arm BFD for E2E SR-MPLS TE LSP, verify the configurations.<ul><li>Run the <a href="cmdqueryname=display+bfd+session"><b><span class="cmdname">display bfd session</span></b></a> <strong><span>dynamic</span></strong> [ <strong><span>verbose</span></strong> ] command to check information about BFD sessions on the ingress.</li><li>Run the following commands to check BFD statistics:<ul><li>Run the <a href="cmdqueryname=display+bfd+statistics"><b><span class="cmdname">display bfd statistics</span></b></a> command to check all BFD statistics.</li><li>Run the <a href="cmdqueryname=display+bfd+statistics+session"><b><span class="cmdname">display bfd statistics session</span></b></a> <strong><span>dynamic</span></strong> command to check statistics about dynamic BFD sessions.</li></ul>
</li></ul>
</div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0000.html">Segment Routing MPLS Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0039.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0059.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>