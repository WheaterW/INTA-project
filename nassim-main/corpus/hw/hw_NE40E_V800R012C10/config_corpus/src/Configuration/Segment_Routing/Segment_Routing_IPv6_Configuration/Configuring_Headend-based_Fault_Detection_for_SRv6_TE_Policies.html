
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Headend-based Fault Detection for SRv6 TE Policies">
<meta name="abstract" content="This section describes how to configure headend-based fault detection for SRv6 TE Policies.">
<meta name="description" content="This section describes how to configure headend-based fault detection for SRv6 TE Policies.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0219.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_sbfd1_over_srv6-te_poliy.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00587852">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0251732250">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Headend-based Fault Detection for SRv6 TE Policies</title>
</head>
<body><a name="EN-US_TASK_0251732250"></a><a name="EN-US_TASK_0251732250"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Headend-based Fault Detection for SRv6 TE Policies</h1>
<div class="taskbody"><p>This section describes how to configure headend-based fault detection for SRv6 TE Policies.</p>
<div class="context"><a name="EN-US_TASK_0251732250__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>An SRv6 TE Policy selects a forwarding path from the candidate paths that are either delivered by a controller or manually configured. Currently, SBFD for SRv6 TE Policy is not allowed in some scenarios. As such, if the segment list of a candidate path in an SRv6 TE Policy fails, the headend cannot quickly detect the fault. The SRv6 TE Policy can be updated only after the controller detects a topology change and re-converges the topology.</p>
<p>If the controller or the connection between the controller and headend fails, the SRv6 TE Policy cannot detect the fault or perform a candidate path switchover. This may cause traffic loss. To speed up traffic switching in the case of a fault, headend-based fault detection is introduced. With this function, if a segment list fails, the headend sets the segment list to down, triggering path or service switching in the SRv6 TE Policy.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In the SRv6 SRH, 16-bit compressed SIDs with the <strong>node-length</strong> value of 0 do not support fault detection or enhanced fault detection.</p>
<p>If fault detection is enabled, the verification result is Up regardless of whether 16-bit compressed SIDs with the <strong>node-length</strong> value of 0 are reachable.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0251732250__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring headend-based fault detection for SRv6 TE Policies, complete the following tasks:</p>
<ul><li><p>Configure SRv6 TE Policies.</p>
</li><li><p>Run the <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a> <strong><span>locator</span></strong> <i><span class="varname">locator-name</span></i> command in the IS-IS view to enable IS-IS SRv6.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0251732250__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a></span><p><p>The SRv6 view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=srv6-te-policy+path+verification"><b><span class="cmdname">srv6-te-policy path verification</span></b></a> [ <strong><span>specified-sid</span></strong> ] <strong><span>enable</span></strong></span><p><p>Headend-based fault detection is enabled for all SRv6 TE Policies.</p>
</p><p><p>After the <strong><span>specified-sid</span></strong> parameter is configured, only SIDs with the verification flag in a segment list are verified.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=srv6-te-policy+suppress-flapping+disable"><b><span class="cmdname">srv6-te-policy suppress-flapping disable</span></b></a></span><p><p>Flap suppression is disabled for all SRv6 TE Policies.</p>
</p><p><p>Enabling this function suppresses frequent SID status changes. If the SID status becomes unreachable, the associated segment list goes down immediately. However, if the SID status becomes reachable, the device needs to determine whether flap suppression is required. If it is required, the device updates the SID status to reachable after a delay and then updates the segment list status.</p>
<p>If flap suppression is not required, run the <a href="cmdqueryname=srv6-te-policy+suppress-flapping+disable"><b><span class="cmdname">srv6-te-policy suppress-flapping disable</span></b></a> command to disable this function for all SRv6 TE Policies.</p>
</p></li><li><span>Run <a href="cmdqueryname=srv6-te+policy"><b><span class="cmdname">srv6-te policy</span></b></a> <i><span class="varname">name-value</span></i></span><p><p>The SRv6 TE Policy view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=path+verification"><b><span class="cmdname">path verification</span></b></a> { [ <strong><span>specified-sid</span></strong> ] <strong><span>enable</span></strong> | <strong><span>disable</span></strong> }</span><p><p>Headend-based fault detection is configured for the SRv6 TE Policy.</p>
</p><p><p>If an SRv6 TE Policy has both global and single-policy configurations, the single-policy configuration takes precedence.</p>
</p><p><p>After the <strong><span>specified-sid</span></strong> parameter is configured, only SIDs with the verification flag in a segment list are verified.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0251732250__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring headend-based fault detection for SRv6 TE Policies, verify the configuration.</p>
<ul><li>Run the <a href="cmdqueryname=display+srv6-te+policy"><b><span class="cmdname">display srv6-te policy</span></b></a> [ <strong><span>endpoint</span></strong> <i><span class="varname">endpoint-ip</span></i> <strong><span>color</span></strong> <i><span class="varname">color-value</span></i> | <strong><span>policy-name</span></strong> <i><span class="varname">name-value</span></i> | <strong><span>binding-sid</span></strong> <i><span class="varname">binding-sid</span></i> ] command to check SRv6 TE Policy details.</li><li>Run the <a href="cmdqueryname=display+srv6-te+policy+source-sid"><b><span class="cmdname">display srv6-te policy source-sid</span></b></a> [ <i><span class="varname">sid-value</span></i> | <strong><span>end</span></strong> | <strong><span>end-x</span></strong> ] command to check details about the End and End.X SIDs collected from the IS-IS LSDB, including the IS-IS process and level information about the SIDs.</li><li>Run the <a href="cmdqueryname=display+srv6-te+policy+sid+statistics"><b><span class="cmdname">display srv6-te policy sid statistics</span></b></a> [ <strong><span>isis</span></strong> <strong><span>process</span></strong> <i><span class="varname">process-id</span></i> { <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> } ] command to check the numbers of End and End.X SIDs collected from the IS-IS LSDB.</li><li>Run the <a href="cmdqueryname=display+srv6-te+policy+last-down-reason"><b><span class="cmdname">display srv6-te policy last-down-reason </span></b></a>{ <strong><span>endpoint</span></strong> <i><span class="varname">endpoint-ip</span></i> <strong><span>color</span></strong> <i><span class="varname">color-value</span></i> | <strong><span>policy-name</span></strong> <i><span class="varname">name-value</span></i> | <strong><span>binding-sid</span></strong> <i><span class="varname">binding-sid</span></i> } command to check records about events where SRv6 TE Policies or segment lists in SRv6 TE Policies go down.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0000.html">Segment Routing IPv6 Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0219.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_sbfd1_over_srv6-te_poliy.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>