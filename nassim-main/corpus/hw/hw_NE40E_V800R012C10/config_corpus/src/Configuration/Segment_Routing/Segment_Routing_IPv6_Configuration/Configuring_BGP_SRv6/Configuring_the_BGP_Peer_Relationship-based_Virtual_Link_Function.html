
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the BGP Peer Relationship-based Virtual Link Function">
<meta name="abstract" content="A virtual link across the Layer 3 network can be created for a controller to compute paths.">
<meta name="description" content="A virtual link across the Layer 3 network can be created for a controller to compute paths.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_all_cfg_0033.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_all_cfg_0033-1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_all_cfg_0033-3.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,f00454608,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00587852">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001164809396">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the BGP Peer Relationship-based Virtual Link Function</title>
</head>
<body><a name="EN-US_TASK_0000001164809396"></a><a name="EN-US_TASK_0000001164809396"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the BGP Peer Relationship-based Virtual Link Function</h1>
<div class="taskbody"><p>A virtual link across the Layer 3 network can be created for a controller to compute paths.</p>
<div class="context"><a name="EN-US_TASK_0000001164809396__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A virtual link across the Layer 3 network can be created based on the BGP peer relationship, with the local and remote IPv6 addresses of the virtual link being the same as those used to establish the peer relationship. Based on this link, topology information is reported to the controller for path computation. On the controller, only a virtual link with a reachable route is displayed in the topology. You can configure TE metric, affinity attribute, and TWAMP latency measurement for the virtual link. When binding a TWAMP test session to the virtual link, ensure that the local and remote addresses of the test session are the same as those of the link.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001164809396__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> { <i><span class="varname">as-number-plain</span></i> | <i><span class="varname">as-number-dot</span></i> }</span><p><p>BGP is enabled, and the BGP view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <strong><span>virtual-link</span></strong></span><p><p>The BGP peer relationship-based virtual link function is enabled.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>BGP EPE must be configured before you enable the BGP peer relationship-based virtual link function.</p>
</div></div>
</p></li><li><span>Configure TE attributes, including link latency, metric, affinity, and SRLG attributes. These TE attributes can be transmitted to a controller through BGP-LS, allowing the controller to adjust SRv6 TE Policies based on the attributes.</span><p><ul><li>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peerIpv6Addr</span></i> <strong><span>virtual-link twamp-light test-session</span></strong> <i><span class="varname">session-id</span></i> command to configure TWAMP Light detection for the specified virtual link.<p>When binding a test session to a BGP virtual link, ensure that the local and remote addresses of the test session are the same as those of the virtual link.</p>
<p>Before running this command, you need to configure a TWAMP Light IPv6 session.</p>
</li><li>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <strong><span>virtual-link te link administrative group</span></strong> <i><span class="varname">group-value</span></i> or <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <strong><span>virtual-link te link administrative group name</span></strong> { <i><span class="varname">name-string</span></i> } &amp;&lt;1-32&gt; command to configure an affinity value or name for the specified virtual link.<p>Before running this command, you need to run the <a href="cmdqueryname=path-constraint+affinity-mapping"><b><span class="cmdname">path-constraint affinity-mapping</span></b></a> command in the system view to create an affinity name template and run the <a href="cmdqueryname=attribute"><b><span class="cmdname">attribute</span></b></a> <i><span class="varname">affinity-name</span></i> <strong><span>bit-sequence</span></strong><i><span class="varname"> bit-number</span></i> command in the template view to configure the mapping between affinity names and bits.</p>
</li><li>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <strong><span>virtual-link te metric</span></strong> <i><span class="varname">metric-value</span></i> command to configure a metric value for the specified virtual link.</li><li>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <strong><span>virtual-link te srlg</span></strong> { <i><span class="varname">srlgValue</span></i> } &amp;&lt;1-64&gt; command to add the specified virtual link to an SRLG.</li></ul>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_all_cfg_0033.html">Configuring BGP SRv6
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_all_cfg_0033-1.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_all_cfg_0033-3.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>