
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP IPv6 FlowSpec Route Redirection to an SRv6 TE Policy (Dynamic Delivery by a Controller)">
<meta name="abstract" content="Use a controller to dynamically deliver a BGP IPv6 FlowSpec route to a forwarder and define a redirection rule on the forwarder to redirect the route to a specified SRv6 TE Policy.">
<meta name="description" content="Use a controller to dynamically deliver a BGP IPv6 FlowSpec route to a forwarder and define a redirection rule on the forwarder to redirect the route to a specified SRv6 TE Policy.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0126.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0127.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00587852">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0317208086">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP IPv6 FlowSpec Route Redirection to an SRv6 TE Policy (Dynamic Delivery by a Controller)</title>
</head>
<body><a name="EN-US_TASK_0317208086"></a><a name="EN-US_TASK_0317208086"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP IPv6 FlowSpec Route Redirection to an SRv6 TE Policy (Dynamic Delivery by a Controller)</h1>
<div class="taskbody"><p>Use a controller to dynamically deliver a BGP IPv6 FlowSpec route to a forwarder and define a redirection rule on the forwarder to redirect the route to a specified SRv6 TE Policy.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0317208086__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring BGP IPv6 FlowSpec route redirection to an SRv6 TE Policy, complete the following tasks:</p>
<ul><li><a href="dc_vrp_bgp_cfg_3006.html">Configure a BGP peer relationship.</a></li><li><a href="dc_vrp_srv6_cfg_all_0116.html">Configure an SRv6 TE Policy in controller-based dynamic delivery mode.</a></li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0317208086__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>In a scenario where a controller is deployed, the controller can be used to deliver a BGP IPv6 FlowSpec route and an SRv6 TE Policy. The process of redirecting the BGP IPv6 FlowSpec route to the SRv6 TE Policy mainly includes the following steps:</p>
<ol><li><p>Establish a BGP-LS peer relationship between the controller and forwarder, enabling the controller to collect such information as topology information and SIDs through BGP-LS. Network topology information includes the link cost, latency, and packet loss rate.</p>
</li><li><p>Establish an IPv6 SR-Policy address family-specific BGP peer relationship between the controller and forwarder, so that the controller can dynamically compute an SRv6 TE Policy path based on link cost, latency, packet loss rate, and other factors and then deliver the path to the headend through the peer relationship. Upon receipt, the headend generates an SRv6 TE Policy entry.</p>
</li><li>Establish a BGP-Flow-IPv6 address family-specific peer relationship between the controller and forwarder, so that the controller can dynamically deliver a BGP IPv6 FlowSpec route to the forwarder through the peer relationship.</li></ol>
<p>The following procedure focuses on forwarder configurations.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0317208086__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Establish a BGP-LS peer relationship and a BGP IPv6 SR-Policy address family-specific peer relationship. For details, see <a href="dc_vrp_srv6_cfg_all_0119.html">Configuring BGP Peer Relationships Between the Controller and Forwarder</a>.</span></li><li><span>Establish a BGP-Flow-IPv6 address family-specific peer relationship.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv6-family+flow"><b><span class="cmdname">ipv6-family flow</span></b></a></span><p><p>The BGP-Flow-IPv6 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">ipv6-address</span></i> } <strong><span>enable</span></strong></span><p><p>A BGP IPv6 FlowSpec peer relationship is established.</p>
<p>After the BGP IPv6 FlowSpec peer relationship is established in the BGP-Flow-IPv6 address family view, the BGP IPv6 FlowSpec route created by the traffic analysis server is imported automatically to the BGP routing table and then advertised to the specified BGP IPv6 FlowSpec peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">ipv6-address</span></i> } <strong><span>redirect ipv6 recursive-lookup tunnel</span></strong> <strong><span>tunnel-selector</span></strong> <i><span class="varname">tunnel-selector-name</span></i></span><p><p>The device is allowed to recurse the BGP IPv6 FlowSpec routes received from a peer to corresponding tunnels.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
<div class="example"><a name="EN-US_TASK_0317208086__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring BGP IPv6 FlowSpec route redirection to an SRv6 TE Policy, verify the configuration.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+bgp+flow+ipv6+peer"><b><span class="cmdname">display bgp flow ipv6 peer</span></b></a> command to check BGP IPv6 FlowSpec peer information.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+flow+ipv6+routing-table"><b><span class="cmdname">display bgp flow ipv6 routing-table</span></b></a> command to check BGP IPv6 FlowSpec routing information.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+flow+ipv6+routing-table+statistics"><b><span class="cmdname">display bgp flow ipv6 routing-table statistics</span></b></a> command to check BGP IPv6 FlowSpec route statistics.</p>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0126.html">Redirecting a BGP IPv6 FlowSpec Route to an SRv6 TE Policy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0127.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>