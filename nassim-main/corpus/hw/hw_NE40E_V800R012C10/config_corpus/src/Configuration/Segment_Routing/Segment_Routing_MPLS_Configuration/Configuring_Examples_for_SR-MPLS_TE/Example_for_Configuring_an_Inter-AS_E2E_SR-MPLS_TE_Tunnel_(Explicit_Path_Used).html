
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring an Inter-AS E2E SR-MPLS TE Tunnel (Explicit Path Used)">
<meta name="abstract" content="An inter-AS E2E SR-MPLS TE tunnel can be configured to provide a secure data channel for services, for example, inter-AS VPN services.">
<meta name="description" content="An inter-AS E2E SR-MPLS TE tunnel can be configured to provide a secure data channel for services, for example, inter-AS VPN services.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr-te_cfg_0090.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0120.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr-te_cfg_0327.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="segment_routing_vrp,w00604599,l00455378,l00587852,w00606909,w00800033">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00468467">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368895">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/thickbox.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/imageResize.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-migrate-1.2.1.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-ui.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.mousewheel.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/thickbox.js"></script>
<title>Example for Configuring an Inter-AS E2E SR-MPLS TE Tunnel (Explicit Path Used)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172368895"></a><a name="EN-US_TASK_0172368895"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring an Inter-AS E2E SR-MPLS TE Tunnel (Explicit Path Used)</h1>
<div class="taskbody"><p>An inter-AS E2E SR-MPLS TE tunnel can be configured to provide a secure data channel for services, for example, inter-AS VPN services.</p>
<div class="context"><a name="EN-US_TASK_0172368895__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172368895__fig-dc_vrp_sr_all_cfg_004001">Figure 1</a>, PE1 and ASBR1 reside in AS 100, PE2 and ASBR2 reside in AS 200, and ASBR1 and ASBR2 are directly connected through two physical links. A bidirectional E2E tunnel needs to be established between PE1 and PE2, with SR being used for path generation and data forwarding. In the PE1-to-PE2 direction, PE1 and PE2 are the ingress and egress of the path, respectively. In the PE2-to-PE1 direction, PE2 and PE1 are the ingress and egress of the path, respectively.</p>
<div class="fignone" id="EN-US_TASK_0172368895__fig-dc_vrp_sr_all_cfg_004001"><a name="EN-US_TASK_0172368895__fig-dc_vrp_sr_all_cfg_004001"></a><a name="fig-dc_vrp_sr_all_cfg_004001"></a><span class="figcap"><b>Figure 1 </b>E2E SR-MPLS TE tunnel networking</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 through 3 in this example represent GE <span>0/1/0</span>, GE <span>0/2/0</span>, and GE <span>0/3/0</span>, respectively.</p>
</div></div>
<br><span><img class="imgResize" src="images/fig-dc_vrp_sr_all_cfg_004001.png" width="496.1764831668751" title="Click to enlarge"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368895__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure intra-AS SR-MPLS TE tunnels in AS 100 and AS 200. Set binding SIDs for the SR-MPLS TE tunnels.</p>
</li><li><p>Establish an EBGP peer relationship between ASBR1 and ASBR2, enable BGP EPE and BGP-LS, and configure the devices to generate BGP Peer SIDs. Note that you only need to enable the address family for BGP-LS, without having to enable the BGP peer relationship in the address family.</p>
</li><li><p>Create an E2E SR-MPLS TE tunnel interface on PE1 and PE2. Specify the IP address, tunneling protocol, and destination address of each tunnel. Explicit paths are used for path computation.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368895__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>IP addresses of interfaces as shown in <a href="#EN-US_TASK_0172368895__fig-dc_vrp_sr_all_cfg_004001">Figure 1</a></p>
</li><li><p>IS-IS process ID (1), IS-IS level (Level-2), and IS-IS system IDs (10.0000.0000.0001.00, 10.0000.0000.0002.00, 10.0000.0000.0003.00, and 10.0000.0000.0004.00)</p>
</li><li><p>AS number (100) of PE1 and ASBR1 and that (200) of PE2 and ASBR2</p>
</li><li><p>SR-MPLS TE tunnel interface names in AS 100 (Tunnel1) and AS 200 (Tunnel2); tunnel interface name of the PE1-to-PE2 E2E SR-MPLS TE tunnel (Tunnel3) and that of the PE2-to-PE1 E2E SR-MPLS TE tunnel (Tunnel3)</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368895__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IP address and a mask to each interface.</span><p><p># Configure PE1.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname PE1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-LoopBack1] <strong>ip address 1.1.1.1 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-LoopBack1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>ip address 10.0.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p># Configure ASBR1.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname ASBR1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR1] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-LoopBack1] <strong>ip address 2.2.2.2 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-LoopBack1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1]<strong> interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/1/0</span>] <strong>ip address 10.1.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1]<strong> interface gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/2/0</span>] <strong>ip address 10.2.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen"><span class="keyword">[*</span>ASBR1]<strong> interface gigabitethernet<span>0/3/0</span></strong></pre>
<pre class="screen"><span class="keyword">[*</span>ASBR1-GigabitEthernet<span>0/3/0</span>] <strong>ip address 10.0.1.2 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1] <strong>commit</strong></pre>
<p># Configure ASBR2.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname ASBR2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR2] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-LoopBack1] <strong>ip address 3.3.3.3 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-LoopBack1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2]<strong> interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/1/0</span>] <strong>ip address 10.1.1.2 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2]<strong> interface gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/2/0</span>] <strong>ip address 10.2.1.2 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen"><span class="keyword">[*</span>ASBR2]<strong> interface gigabitethernet<span>0/3/0</span></strong></pre>
<pre class="screen"><span class="keyword">[*</span>ASBR2-GigabitEthernet<span>0/3/0</span>] <strong>ip address 10.9.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2] <strong>commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname PE2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-LoopBack1] <strong>ip address 4.4.4.4 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-LoopBack1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong> interface gigabitethernet</strong><strong><span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>]<strong> ip address 10.9.1.2 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong> commit</strong></pre>
</p></li><li><span>Configure an intra-AS SR-MPLS TE tunnel in AS 100.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> mpls lsr-id 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> segment-routing</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-segment-routing]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-isis-1] <strong>is-level level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-isis-1] <strong>network-entity 10.0000.0000.0001.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-isis-1] <strong>cost-style wide</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-isis-1] <strong>traffic-eng level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-isis-1] <strong>segment-routing mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-isis-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-LoopBack1] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-LoopBack1] <strong>isis prefix-sid absolute 16100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-LoopBack1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>explicit-path path2asbr1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-explicit-path-path2asbr1] <strong>next sid label <span>330</span>102 type adjacency</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-explicit-path-path2asbr1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> interface tunnel1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel1] <strong>ip address unnumbered interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel1] <strong>tunnel-protocol mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel1]<strong> destination 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel1]<strong> mpls te tunnel-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel1] <strong>mpls te signal-protocol segment-routing</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel1] <strong>mpls te path explicit-path path2asbr1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-Tunnel1] <strong>quit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In the preceding steps, the <a href="cmdqueryname=next+sid+label"><b><span class="cmdname">next sid label</span></b></a> command uses the adjacency label from PE1 to ASBR1, which is dynamically generated by IS-IS. Before the configuration, you can run the <a href="cmdqueryname=display+segment-routing+adjacency+mpls+forwarding"><b><span class="cmdname">display segment-routing adjacency mpls forwarding</span></b></a> command to query the label value. For example:</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>display segment-routing adjacency mpls forwarding</strong>
            Segment Routing Adjacency MPLS Forwarding Information

Label     Interface         NextHop          Type        MPLSMtu   Mtu       VPN-Name       
-------------------------------------------------------------------------------------
<span>330</span>102    GE<span>0/1/0</span>           10.0.1.2         ISIS-V4     ---       1500      _public_      

Total information(s): 1</pre>
</div></div>
<p># Configure ASBR1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR1]<strong> mpls lsr-id 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1]<strong> mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-mpls] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1]<strong> segment-routing</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-segment-routing]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1] <strong>isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-isis-1] <strong>is-level level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-isis-1] <strong>network-entity 10.0000.0000.0002.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-isis-1] <strong>cost-style wide</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-isis-1] <strong>traffic-eng level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-isis-1] <strong>segment-routing mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-isis-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-LoopBack1] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-LoopBack1] <strong>isis prefix-sid absolute 16200</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-LoopBack1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1]<strong> interface gigabitethernet<span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/3/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/3/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/3/0</span>] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1] <strong>explicit-path path2pe1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-explicit-path-path2pe1] <strong>next sid label <span>330</span>201 type adjacency</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-explicit-path-path2pe1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1]<strong> interface tunnel1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-Tunnel1] <strong>ip address unnumbered interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-Tunnel1] <strong>tunnel-protocol mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-Tunnel1]<strong> destination 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-Tunnel1]<strong> mpls te tunnel-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-Tunnel1] <strong>mpls te signal-protocol segment-routing</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-Tunnel1] <strong>mpls te path explicit-path path2pe1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-Tunnel1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR1-Tunnel1] <strong>quit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In the preceding step, an ASBR1-to-PE1 adjacency label is used in the <a href="cmdqueryname=next+sid+label"><b><span class="cmdname">next sid label</span></b></a> command and is dynamically generated using IS-IS. To obtain the label value, run the <a href="cmdqueryname=display+segment-routing+adjacency+mpls+forwarding"><b><span class="cmdname">display segment-routing adjacency mpls forwarding</span></b></a> command. For example:</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR1] <strong>display segment-routing adjacency mpls forwarding</strong>
            Segment Routing Adjacency MPLS Forwarding Information

Label     Interface         NextHop          Type        MPLSMtu   Mtu       VPN-Name       
-------------------------------------------------------------------------------------------
<span>330</span>201    GE<span>0/3/0</span>           10.0.1.1         ISIS-V4     ---       1500      _public_      

Total information(s): 1</pre>
</div></div>
</p></li><li><span>Configure an intra-AS SR-MPLS TE tunnel in AS 200.</span><p><p># Configure ASBR2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR2]<strong> mpls lsr-id 3.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2]<strong> mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-mpls] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2]<strong> segment-routing</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-segment-routing] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2] <strong>isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-isis-1] <strong>is-level level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-isis-1] <strong>network-entity 10.0000.0000.0003.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-isis-1] <strong>cost-style wide</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-isis-1] <strong>traffic-eng level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-isis-1] <strong>segment-routing mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-isis-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-LoopBack1] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-LoopBack1] <strong>isis prefix-sid absolute 16300</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-LoopBack1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2]<strong> interface gigabitethernet<span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/3/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/3/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/3/0</span>] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2] <strong>explicit-path path2pe2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-explicit-path-path2pe2] <strong>next sid label <span>330</span>304 type adjacency</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-explicit-path-path2pe2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2]<strong> interface tunnel2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-Tunnel2] <strong>ip address unnumbered interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-Tunnel2] <strong>tunnel-protocol mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-Tunnel2] <strong>destination 4.4.4.4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-Tunnel2] <strong>mpls te tunnel-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-Tunnel2] <strong>mpls te signal-protocol segment-routing</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-Tunnel2] <strong>mpls te path explicit-path path2pe2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-Tunnel2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR2-Tunnel2] <strong>quit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In the preceding step, an ASBR2-to-PE2 adjacency label is used in the <a href="cmdqueryname=next+sid+label"><b><span class="cmdname">next sid label</span></b></a> command and is dynamically generated using IS-IS. To obtain the label value, run the <a href="cmdqueryname=display+segment-routing+adjacency+mpls+forwarding"><b><span class="cmdname">display segment-routing adjacency mpls forwarding</span></b></a> command. For example:</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR2] <strong>display segment-routing adjacency mpls forwarding</strong>
            Segment Routing Adjacency MPLS Forwarding Information

Label     Interface         NextHop          Type        MPLSMtu   Mtu       VPN-Name       
-------------------------------------------------------------------------------------------
<span>330</span>304    GE<span>0/3/0</span>           10.9.1.2         ISIS-V4     ---       1500      _public_      

Total information(s): 1</pre>
</div></div>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2]<strong> mpls lsr-id 4.4.4.4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong> mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-mpls] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong> segment-routing</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-segment-routing]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-isis-1] <strong>is-level level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-isis-1] <strong>network-entity 10.0000.0000.0004.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-isis-1] <strong>cost-style wide</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-isis-1] <strong>traffic-eng level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-isis-1] <strong>segment-routing mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-isis-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-LoopBack1] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-LoopBack1] <strong>isis prefix-sid absolute 16400</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-LoopBack1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong> interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>explicit-path path2asbr2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-explicit-path-path2asbr2] <strong>next sid label <span>330</span>403 type adjacency</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-explicit-path-path2asbr2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong> interface tunnel2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel2] <strong>ip address unnumbered interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel2] <strong>tunnel-protocol mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel2]<strong> destination 3.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel2]<strong> mpls te tunnel-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel2] <strong>mpls te signal-protocol segment-routing</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel2] <strong>mpls te path explicit-path path2asbr2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-Tunnel2] <strong>quit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In the preceding step, a PE2-to-ASBR2 adjacency label is used in the <a href="cmdqueryname=next+sid+label"><b><span class="cmdname">next sid label</span></b></a> command and is dynamically generated using IS-IS. To obtain the label value, run the <a href="cmdqueryname=display+segment-routing+adjacency+mpls+forwarding"><b><span class="cmdname">display segment-routing adjacency mpls forwarding</span></b></a> command. For example:</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>display segment-routing adjacency mpls forwarding</strong>
            Segment Routing Adjacency MPLS Forwarding Information

Label     Interface         NextHop          Type        MPLSMtu   Mtu       VPN-Name       
-------------------------------------------------------------------------------------------
<span>330</span>403    GE<span>0/1/0</span>           10.9.1.1         ISIS-V4     ---       1500      _public_      

Total information(s): 1</pre>
</div></div>
</p></li><li><span>Configure the MPLS TE capability on ASBRs.</span><p><p># Configure ASBR1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR1]<strong> interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR1-GigabitEthernet<span>0/1/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/1/0</span>] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1]<strong> interface gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/2/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/2/0</span>] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1] <strong>commit</strong></pre>
</p><p><p># Configure ASBR2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR2]<strong> interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR2-GigabitEthernet<span>0/1/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/1/0</span>] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2]<strong> interface gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/2/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/2/0</span>] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2] <strong>commit</strong></pre>
</p></li><li><span>Establish an EBGP peer relationship between ASBRs and enable BGP EPE and BGP-LS.</span><p><p>In this example, a loopback interface is used to establish a multi-hop EBGP peer relationship. Before the configuration, ensure that the loopback interfaces of ASBR1 and ASBR2 are routable to each other.</p>
<p>Currently, BGP EPE supports only EBGP peers. For multi-hop EBGP peers, they must be directly connected through physical links. If intermediate nodes exist, the nodes do not have BGP Peer SID information, causing a forwarding failure.</p>
<p># Configure ASBR1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR1] <strong>ip route-static 3.3.3.3 32 gigabitethernet<span>0/1/0</span> 10.1.1.2 description asbr1toasbr2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1] <strong>ip route-static 3.3.3.3 32 gigabitethernet<span>0/2/0</span> 10.2.1.2 description asbr1toasbr2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-bgp] <strong>peer 3.3.3.3 as-number 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-bgp] <strong>peer 3.3.3.3 connect-interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-bgp] <strong>peer 3.3.3.3 ebgp-max-hop 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-bgp] <strong>peer 3.3.3.3 egress-engineering</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-bgp] <strong>link-state-family unicast</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-bgp-af-ls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-bgp] <strong>ipv4-family unicast</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-bgp-af-ipv4] <strong>network 2.2.2.2 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-bgp-af-ipv4] <strong>network 10.1.1.0 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-bgp-af-ipv4] <strong>network 10.2.1.0 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-bgp-af-ipv4] <strong>import-route isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-bgp-af-ipv4] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR1-bgp-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR1-bgp] <strong>quit</strong></pre>
<p># Configure ASBR2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR2] <strong>ip route-static 2.2.2.2 32 gigabitethernet<span>0/1/0</span> 10.1.1.1 description asbr2toasbr1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2] <strong>ip route-static 2.2.2.2 32 gigabitethernet<span>0/2/0</span> 10.2.1.1 description asbr2toasbr1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2] <strong>bgp 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-bgp] <strong>peer 2.2.2.2 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-bgp] <strong>peer 2.2.2.2 connect-interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-bgp] <strong>peer 2.2.2.2 ebgp-max-hop 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-bgp] <strong>peer 2.2.2.2 egress-engineering</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-bgp] <strong>link-state-family unicast</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-bgp-af-ls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-bgp] <strong>ipv4-family unicast</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-bgp-af-ipv4] <strong>network 3.3.3.3 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-bgp-af-ipv4] <strong>network 10.1.1.0 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-bgp-af-ipv4] <strong>network 10.2.1.0 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-bgp-af-ipv4] <strong>import-route isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-bgp-af-ipv4] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR2-bgp-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR2-bgp] <strong>quit</strong></pre>
<p>After the configuration, run the <a href="cmdqueryname=display+bgp+egress-engineering"><b><span class="cmdname">display bgp egress-engineering</span></b></a> command to check BGP EPE information. For example:</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR1] <strong>display bgp egress-engineering</strong>
 Peer Node                : 3.3.3.3
 Peer Adj Num             : 2
 Local ASN                : 100
 Remote ASN               : 200
 Local Router Id          : 2.2.2.2
 Remote Router Id         : 3.3.3.3
 Local Interface Address  : 2.2.2.2
 Remote Interface Address : 3.3.3.3
 SID Label                : <strong>32768</strong>
<span> Peer Set SID Label       : --</span>
 Nexthop                  : 10.1.1.2
 Out Interface            : GigabitEthernet<span>0/1/0</span>
 Nexthop                  : 10.2.1.2
 Out Interface            : GigabitEthernet<span>0/2/0</span>

 Peer Adj                 : 10.1.1.2
 Local ASN                : 100
 Remote ASN               : 200
 Local Router Id          : 2.2.2.2
 Remote Router Id         : 3.3.3.3
 Interface Identifier     : 6
 Local Interface Address  : 10.1.1.1
 Remote Interface Address : 10.1.1.2
 SID Label                : <strong>32770</strong>
 Nexthop                  : 10.1.1.2
 Out Interface            : GigabitEthernet<span>0/1/0</span>
 
 Peer Adj                 : 10.2.1.2
 Local ASN                : 100
 Remote ASN               : 200
 Local Router Id          : 2.2.2.2
 Remote Router Id         : 3.3.3.3
 Interface Identifier     : 7
 Local Interface Address  : 10.2.1.1
 Remote Interface Address : 10.2.1.2
 SID Label                : <strong>32769</strong>
 Nexthop                  : 10.2.1.2
 Out Interface            : GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR2] <strong>display bgp egress-engineering</strong>
 Peer Node                : 2.2.2.2
 Peer Adj Num             : 2
 Local ASN                : 200
 Remote ASN               : 100
 Local Router Id          : 3.3.3.3
 Remote Router Id         : 2.2.2.2
 Local Interface Address  : 3.3.3.3
 Remote Interface Address : 2.2.2.2
 SID Label                : <strong>31768</strong>
<span> Peer Set SID Label       : --</span>
 Nexthop                  : 10.1.1.1
 Out Interface            : GigabitEthernet<span>0/1/0</span>
 Nexthop                  : 10.2.1.1
 Out Interface            : GigabitEthernet<span>0/2/0</span>

 Peer Adj                 : 10.1.1.1
 Local ASN                : 200
 Remote ASN               : 100
 Local Router Id          : 3.3.3.3
 Remote Router Id         : 2.2.2.2
 Interface Identifier     : 6
 Local Interface Address  : 10.1.1.2
 Remote Interface Address : 10.1.1.1
 SID Label                : <strong>31770</strong>
 Nexthop                  : 10.1.1.1
 Out Interface            : GigabitEthernet<span>0/1/0</span>

 Peer Adj                 : 10.2.1.1
 Local ASN                : 200
 Remote ASN               : 100
 Local Router Id          : 3.3.3.3
 Remote Router Id         : 2.2.2.2
 Interface Identifier     : 7
 Local Interface Address  : 10.2.1.2
 Remote Interface Address : 10.2.1.1
 SID Label                : <strong>31769</strong>
 Nexthop                  : 10.2.1.1
 Out Interface            : GigabitEthernet<span>0/2/0</span></pre>
</p></li><li><span>Set binding SIDs for the SR-MPLS TE tunnels within AS domains.</span><p><p><strong>In the direction from PE1 to PE2:</strong></p>
<p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>interface tunnel1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel1] <strong>mpls te binding-sid label 1000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-Tunnel1] <strong>quit</strong></pre>
<p># Configure ASBR2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR2] <strong>interface tunnel2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-Tunnel2] <strong>mpls te binding-sid label 2000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR2-Tunnel2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR2-Tunnel2] <strong>quit</strong></pre>
<p><strong>In the direction from PE2 to PE1:</strong></p>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>interface tunnel2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel2] <strong>mpls te binding-sid label 3000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-Tunnel2] <strong>quit</strong></pre>
<p># Configure ASBR1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR1] <strong>interface tunnel1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-Tunnel1] <strong>mpls te binding-sid label 4000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR1-Tunnel1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR1-Tunnel1] <strong>quit</strong></pre>
</p></li><li><span>Configure a bidirectional E2E SR-MPLS TE tunnel between PE1 and PE2.</span><p><p><strong>In the direction from PE1 to PE2:</strong></p>
<p># Configure PE1. There are multiple links between the ASBRs. You can select any of them. In this example, the link ASBR1 (GigabitEthernet <span>0/1/0</span>) -&gt; ASBR2 (GigabitEthernet <span>0/1/0</span>) is selected.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>explicit-path path2pe2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-explicit-path-path2pe2] <strong>next sid label 1000 type binding-sid</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-explicit-path-path2pe2] <strong>next sid label 32770 type adjacency</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-explicit-path-path2pe2] <strong>next sid label 2000 type binding-sid</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-explicit-path-path2pe2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> interface tunnel3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel3] <strong>ip address unnumbered interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel3] <strong>tunnel-protocol mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel3]<strong> destination 4.4.4.4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel3]<strong> mpls te tunnel-id 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel3] <strong>mpls te signal-protocol segment-routing</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel3] <strong>mpls te path explicit-path path2pe2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel3] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-Tunnel3] <strong>quit</strong></pre>
<p><strong>In the direction from PE2 to PE1:</strong></p>
<p># Configure PE2. There are multiple links between the ASBRs. You can select any of them. In this example, the link ASBR2 (GigabitEthernet <span>0/1/0</span>) -&gt; ASBR1 (GigabitEthernet <span>0/1/0</span>) is selected.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>explicit-path path2pe1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-explicit-path-path2pe1] <strong>next sid label 3000 type binding-sid</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-explicit-path-path2pe1] <strong>next sid label 31770 type adjacency</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-explicit-path-path2pe1] <strong>next sid label 4000 type binding-sid</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-explicit-path-path2pe1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong> interface tunnel3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel3] <strong>ip address unnumbered interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel3] <strong>tunnel-protocol mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel3]<strong> destination 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel3]<strong> mpls te tunnel-id 400</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel3] <strong>mpls te signal-protocol segment-routing</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel3] <strong>mpls te path explicit-path path2pe1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-Tunnel3] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-Tunnel3] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>After completing the configuration, run the <a href="cmdqueryname=display+mpls+te+tunnel-interface"><b><span class="cmdname">display mpls te tunnel-interface</span></b></a> <i><span class="varname">tunnel-name</span></i> command. The command output shows that the E2E SR-MPLS TE tunnel named <strong>Tunnel3</strong> is<strong> Up</strong>. For example:</p>
<div class="p"># Check the status on PE1.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>display mpls te tunnel-interface tunnel3</strong>
    Tunnel Name       : Tunnel3
    Signalled Tunnel Name: -
    Tunnel State Desc : CR-LSP is Up
    Tunnel Attributes   :     
    Active LSP          : Primary LSP
    Traffic Switch      : - 
    Session ID          : 100
    Ingress LSR ID      : 1.1.1.1               Egress LSR ID: 4.4.4.4
    Admin State         : UP                    Oper State   : UP
    Signaling Protocol  : Segment-Routing
    FTid                : 2
    Tie-Breaking Policy : None                  Metric Type  : TE
    Bfd Cap             : None               
    Reopt               : Disabled              Reopt Freq   : - 
    Inter-area Reopt    : Disabled              
    Auto BW             : Disabled              Threshold    : - 
    Current Collected BW: -                     Auto BW Freq : -
    Min BW              : -                     Max BW       : -
    Offload             : Disabled              Offload Freq : - 
    Low Value           : -                     High Value   : - 
    Readjust Value      : - 
    Offload Explicit Path Name: -
    Tunnel Group        : Primary
    Interfaces Protected: -
    Excluded IP Address : -
    Referred LSP Count  : 0
    Primary Tunnel      : -                     Pri Tunn Sum : -
    Backup Tunnel       : -
    Group Status        : Up                    Oam Status   : None
    IPTN InLabel        : -                     Tunnel BFD Status : -
    BackUp LSP Type     : None                  BestEffort   : -
    Secondary HopLimit  : -
    BestEffort HopLimit  : -
    Secondary Explicit Path Name: -
    Secondary Affinity Prop/Mask: 0x0/0x0
    BestEffort Affinity Prop/Mask: -  
    IsConfigLspConstraint: -
    Hot-Standby Revertive Mode:  Revertive
    Hot-Standby Overlap-path:  Disabled
    Hot-Standby Switch State:  CLEAR
    Bit Error Detection:  Disabled
    Bit Error Detection Switch Threshold:  -
    Bit Error Detection Resume Threshold:  -
    Ip-Prefix Name    : -
    P2p-Template Name : -
    PCE Delegate      : No                     LSP Control Status : Local control
    Path Verification : No
    Entropy Label     : -
    Associated Tunnel Group ID: -              Associated Tunnel Group Type: -
    Auto BW Remain Time   : -                  Reopt Remain Time     : - 
    Segment-Routing Remote Label   : -
    Metric Inherit IGP : None
    Binding Sid       : 2001                  Reverse Binding Sid : 2002 
    FRR Attr Source   : -                     Is FRR degrade down : -
    Color             : - 
                                                   
    Primary LSP ID      : 1.1.1.1:3
    LSP State           : UP                    LSP Type     : Primary
    Setup Priority      : 7                     Hold Priority: 7
    IncludeAll          : 0x0
    IncludeAny          : 0x0
    ExcludeAny          : 0x0
    Affinity Prop/Mask  : 0x0/0x0               Resv Style   :  SE
    SidProtectType      : - 
    Configured Bandwidth Information:
    CT0 Bandwidth(Kbit/sec): 0               CT1 Bandwidth(Kbit/sec): 0
    CT2 Bandwidth(Kbit/sec): 0               CT3 Bandwidth(Kbit/sec): 0
    CT4 Bandwidth(Kbit/sec): 0               CT5 Bandwidth(Kbit/sec): 0
    CT6 Bandwidth(Kbit/sec): 0               CT7 Bandwidth(Kbit/sec): 0
    Actual Bandwidth Information:
    CT0 Bandwidth(Kbit/sec): 0               CT1 Bandwidth(Kbit/sec): 0
    CT2 Bandwidth(Kbit/sec): 0               CT3 Bandwidth(Kbit/sec): 0
    CT4 Bandwidth(Kbit/sec): 0               CT5 Bandwidth(Kbit/sec): 0
    CT6 Bandwidth(Kbit/sec): 0               CT7 Bandwidth(Kbit/sec): 0
    Explicit Path Name  : path2pe2                         Hop Limit: -
    Record Route        : -                            Record Label : -
    Route Pinning       : -
    FRR Flag            : -
    IdleTime Remain     : -
    BFD Status          : -
    Soft Preemption     : -
    Reroute Flag        : -
    Pce Flag            : Normal
    Path Setup Type     : EXPLICIT
    Create Modify LSP Reason: -</pre>
# Check the status on PE2.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>display mpls te tunnel-interface tunnel3</strong>
    Tunnel Name       : Tunnel3
    Signalled Tunnel Name: -
    Tunnel State Desc : CR-LSP is Up
    Tunnel Attributes   :     
    Active LSP          : Primary LSP
    Traffic Switch      : - 
    Session ID          : 400
    Ingress LSR ID      : 4.4.4.4               Egress LSR ID: 1.1.1.1
    Admin State         : UP                    Oper State   : UP
    Signaling Protocol  : Segment-Routing
    FTid                : 65
    Tie-Breaking Policy : None                  Metric Type  : TE
    Bfd Cap             : None                  
    Reopt               : Disabled              Reopt Freq   : -   
    Inter-area Reopt    : Disabled           
    Auto BW             : Disabled              Threshold    : - 
    Current Collected BW: -                     Auto BW Freq : -
    Min BW              : -                     Max BW       : -
    Offload             : Disabled              Offload Freq : - 
    Low Value           : -                     High Value   : - 
    Readjust Value      : - 
    Offload Explicit Path Name: -
    Tunnel Group        : Primary
    Interfaces Protected: -
    Excluded IP Address : -
    Referred LSP Count  : 0
    Primary Tunnel      : -                     Pri Tunn Sum : -
    Backup Tunnel       : -
    Group Status        : Up                    Oam Status   : None
    IPTN InLabel        : -                     Tunnel BFD Status : -
    BackUp LSP Type     : None                  BestEffort   : -
    Secondary HopLimit  : -
    BestEffort HopLimit  : -
    Secondary Explicit Path Name: -
    Secondary Affinity Prop/Mask: 0x0/0x0
    BestEffort Affinity Prop/Mask: -  
    IsConfigLspConstraint: -
    Hot-Standby Revertive Mode:  Revertive
    Hot-Standby Overlap-path:  Disabled
    Hot-Standby Switch State:  CLEAR
    Bit Error Detection:  Disabled
    Bit Error Detection Switch Threshold:  -
    Bit Error Detection Resume Threshold:  -
    Ip-Prefix Name    : -
    P2p-Template Name : -
    PCE Delegate      : No                     LSP Control Status : Local control
    Path Verification : No
    Entropy Label     : -
    Associated Tunnel Group ID: -              Associated Tunnel Group Type: -
    Auto BW Remain Time   : -                  Reopt Remain Time     : - 
    Segment-Routing Remote Label   : -
    Metric Inherit IGP : None
    Binding Sid       : 2002                  Reverse Binding Sid : 2001 
    FRR Attr Source   : -                     Is FRR degrade down : -
                             
    Primary LSP ID      : 4.4.4.4:4
    LSP State           : UP                    LSP Type     : Primary
    Setup Priority      : 7                     Hold Priority: 7
    IncludeAll          : 0x0
    IncludeAny          : 0x0
    ExcludeAny          : 0x0
    Affinity Prop/Mask  : 0x0/0x0               Resv Style   :  SE
    Configured Bandwidth Information:
    CT0 Bandwidth(Kbit/sec): 0               CT1 Bandwidth(Kbit/sec): 0
    CT2 Bandwidth(Kbit/sec): 0               CT3 Bandwidth(Kbit/sec): 0
    CT4 Bandwidth(Kbit/sec): 0               CT5 Bandwidth(Kbit/sec): 0
    CT6 Bandwidth(Kbit/sec): 0               CT7 Bandwidth(Kbit/sec): 0
    Actual Bandwidth Information:
    CT0 Bandwidth(Kbit/sec): 0               CT1 Bandwidth(Kbit/sec): 0
    CT2 Bandwidth(Kbit/sec): 0               CT3 Bandwidth(Kbit/sec): 0
    CT4 Bandwidth(Kbit/sec): 0               CT5 Bandwidth(Kbit/sec): 0
    CT6 Bandwidth(Kbit/sec): 0               CT7 Bandwidth(Kbit/sec): 0
    Explicit Path Name  : path2pe1                         Hop Limit: -
    Record Route        : -                            Record Label : -
    Route Pinning       : -
    FRR Flag            : -
    IdleTime Remain     : -
    BFD Status          : -
    Soft Preemption     : -
    Reroute Flag        : -
    Pce Flag            : Normal
    Path Setup Type     : EXPLICIT
    Create Modify LSP Reason: -</pre>
</div>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172368895__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>PE1 configuration file</p>
<pre class="screen">#
sysname PE1
#
mpls lsr-id 1.1.1.1
#
mpls
 mpls te
#
explicit-path path2asbr1
 next sid label <span>330</span>102 type adjacency index 1
#
explicit-path path2pe2
 next sid label 1000 type binding-sid index 1
 next sid label 32770 type adjacency index 2
 next sid label 2000 type binding-sid index 3
#               
segment-routing 
#
isis 1
 is-level level-2
 cost-style wide
 network-entity 10.0000.0000.0001.00
 traffic-eng level-2
 segment-routing mpls
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ip address 10.0.1.1 255.255.255.0
 isis enable 1  
 mpls
 mpls te
#
interface LoopBack1
 ip address 1.1.1.1 255.255.255.255
 isis enable 1
 isis prefix-sid absolute 16100
#
interface Tunnel1
 ip address unnumbered interface LoopBack1
 tunnel-protocol mpls te
 destination 2.2.2.2
 mpls te signal-protocol segment-routing
 mpls te tunnel-id 1
 mpls te path explicit-path path2asbr1
 mpls te binding-sid label 1000
#
interface Tunnel3
 ip address unnumbered interface LoopBack1
 tunnel-protocol mpls te
 destination 4.4.4.4
 mpls te signal-protocol segment-routing
 mpls te tunnel-id 100
 mpls te path explicit-path path2pe2
#
return</pre>
</li><li><p>ASBR1 configuration file</p>
<pre class="screen">#
sysname ASBR1
#
mpls lsr-id 2.2.2.2
#
mpls
 mpls te
#
explicit-path path2pe1
 next sid label <span>330</span>201 type adjacency index 1
#               
segment-routing 
#
isis 1
 is-level level-2
 cost-style wide
 network-entity 10.0000.0000.0002.00
 traffic-eng level-2
 segment-routing mpls
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ip address 10.1.1.1 255.255.255.0
 mpls
 mpls te
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown  
 ip address 10.2.1.1 255.255.255.0
 mpls
 mpls te
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown  
 ip address 10.0.1.2 255.255.255.0
 isis enable 1  
 mpls
 mpls te
#
interface LoopBack1
 ip address 2.2.2.2 255.255.255.255
 isis enable 1
 isis prefix-sid absolute 16200
#
interface Tunnel1
 ip address unnumbered interface LoopBack1
 tunnel-protocol mpls te
 destination 1.1.1.1
 mpls te signal-protocol segment-routing
 mpls te tunnel-id 1
 mpls te path explicit-path path2pe1
 mpls te binding-sid label 4000
#
bgp 100
 private-4-byte-as enable 
 peer 3.3.3.3 as-number 200
 peer 3.3.3.3 ebgp-max-hop 2
 peer 3.3.3.3 connect-interface LoopBack1
 peer 3.3.3.3 egress-engineering
 #
 ipv4-family unicast
  network 2.2.2.2 255.255.255.255
  network 10.1.1.0 255.255.255.0
  network 10.2.1.0 255.255.255.0
  import-route isis 1
  peer 3.3.3.3 enable
 #
 link-state-family unicast
#
ip route-static 3.3.3.3 255.255.255.255 gigabitethernet<span>0/1/0</span> 10.1.1.2 description asbr1toasbr2
ip route-static 3.3.3.3 255.255.255.255 gigabitethernet<span>0/2/0</span> 10.2.1.2 description asbr1toasbr2
#
return</pre>
</li><li><p>ASBR2 configuration file</p>
<pre class="screen">#
sysname ASBR2
#
mpls lsr-id 3.3.3.3
#
mpls
 mpls te
#
explicit-path path2pe2
 next sid label <span>330</span>304 type adjacency index 1
#               
segment-routing 
#
isis 1
 is-level level-2
 cost-style wide
 network-entity 10.0000.0000.0003.00
 traffic-eng level-2
 segment-routing mpls
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ip address 10.1.1.2 255.255.255.0
 mpls
 mpls te
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown  
 ip address 10.2.1.2 255.255.255.0
 mpls
 mpls te
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown  
 ip address 10.9.1.1 255.255.255.0
 isis enable 1  
 mpls
 mpls te
#
interface LoopBack1
 ip address 3.3.3.3 255.255.255.255
 isis enable 1
 isis prefix-sid absolute 16300
#
interface Tunnel2
 ip address unnumbered interface LoopBack1
 tunnel-protocol mpls te
 destination 4.4.4.4
 mpls te signal-protocol segment-routing
 mpls te tunnel-id 1
 mpls te path explicit-path path2pe2
 mpls te binding-sid label 2000
#
bgp 200
 private-4-byte-as enable 
 peer 2.2.2.2 as-number 100
 peer 2.2.2.2 ebgp-max-hop 2
 peer 2.2.2.2 connect-interface LoopBack 1
 peer 2.2.2.2 egress-engineering
 #
 ipv4-family unicast
  network 3.3.3.3 255.255.255.255
  network 10.1.1.0 255.255.255.0
  network 10.2.1.0 255.255.255.0
  import-route isis 1
  peer 2.2.2.2 enable
 #
 link-state-family unicast
#
ip route-static 2.2.2.2 255.255.255.255 gigabitethernet<span>0/1/0</span> 10.1.1.1 description asbr2toasbr1
ip route-static 2.2.2.2 255.255.255.255 gigabitethernet<span>0/2/0</span> 10.2.1.1 description asbr2toasbr1
#
return</pre>
</li><li><p>PE2 configuration file</p>
<pre class="screen">#
sysname PE2
#
mpls lsr-id 4.4.4.4
#
mpls
 mpls te
#
explicit-path path2asbr2
 next sid label <span>330</span>403 type adjacency index 1
#
explicit-path path2pe1
 next sid label 3000 type binding-sid index 1
 next sid label 31770 type adjacency index 2
 next sid label 4000 type binding-sid index 3
#               
segment-routing 
#
isis 1
 is-level level-2
 cost-style wide
 network-entity 10.0000.0000.0004.00
 traffic-eng level-2
 segment-routing mpls
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ip address 10.9.1.2 255.255.255.0
 isis enable 1  
 mpls
 mpls te
#
interface LoopBack1
 ip address 4.4.4.4 255.255.255.255
 isis enable 1
 isis prefix-sid absolute 16400
#
interface Tunnel2
 ip address unnumbered interface LoopBack1
 tunnel-protocol mpls te
 destination 3.3.3.3
 mpls te signal-protocol segment-routing
 mpls te tunnel-id 1
 mpls te path explicit-path path2asbr2
 mpls te binding-sid label 3000
#
interface Tunnel3
 ip address unnumbered interface LoopBack1
 tunnel-protocol mpls te
 destination 1.1.1.1
 mpls te signal-protocol segment-routing
 mpls te tunnel-id 400
 mpls te path explicit-path path2pe1
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr-te_cfg_0090.html">Configuring Examples for SR-MPLS TE
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0120.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr-te_cfg_0327.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>

<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>