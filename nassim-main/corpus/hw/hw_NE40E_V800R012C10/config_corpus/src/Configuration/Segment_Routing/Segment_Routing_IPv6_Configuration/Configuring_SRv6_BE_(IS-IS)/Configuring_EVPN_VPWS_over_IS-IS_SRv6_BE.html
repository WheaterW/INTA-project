
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring EVPN VPWS over IS-IS SRv6 BE">
<meta name="abstract" content="This section describes how to configure EVPN VPWS over SRv6 BE.">
<meta name="description" content="This section describes how to configure EVPN VPWS over SRv6 BE.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0002.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0252.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0023.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368965">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring EVPN VPWS over IS-IS SRv6 BE</title>
</head>
<body><a name="EN-US_TASK_0172368965"></a><a name="EN-US_TASK_0172368965"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring EVPN VPWS over IS-IS SRv6 BE</h1>
<div class="taskbody" id="taskbody648673908214049"><p id="shortdesc938385501214049">This section describes how to configure EVPN VPWS over SRv6 BE.</p>
<div class="context"><a name="EN-US_TASK_0172368965__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0172368965__context181470335214049"><h4 class="sectiontitle">Usage Scenario</h4><p id="EN-US_TASK_0172368965__p2032626805214049">EVPN VPWS over SRv6 BE uses SRv6 BE on a public network to carry EVPN services. The key implementation of EVPN VPWS over SRv6 BE involves establishing SRv6 BE paths, advertising EVPN routes, and forwarding data.</p>
<p id="EN-US_TASK_0172368965__p107827047214049"><a href="#EN-US_TASK_0172368965__fig_dc_vrp_srv6_cfg_all_002101">Figure 1</a> shows an example where an IPv6 public network is established between PE1 and PE2. SRv6 BE can be deployed on the IPv6 public network to carry Layer 2 EVPN services.</p>
<div class="fignone" id="EN-US_TASK_0172368965__fig_dc_vrp_srv6_cfg_all_002101"><a name="EN-US_TASK_0172368965__fig_dc_vrp_srv6_cfg_all_002101"></a><a name="fig_dc_vrp_srv6_cfg_all_002101"></a><span class="figcap"><b>Figure 1 </b>EVPN VPWS over SRv6 BE networking</span><br><span><img class="vsd" id="EN-US_TASK_0172368965__image1476412423548" src="figure/en-us_image_0210219564.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368965__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0172368965__context1210194704214049"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p id="EN-US_TASK_0172368965__p503891719214049">Before configuring EVPN VPWS over SRv6 BE, complete the following tasks:</p>
<ul id="EN-US_TASK_0172368965__ul388518137214049"><li id="EN-US_TASK_0172368965__li847147161214049"><p id="EN-US_TASK_0172368965__p185755317214049"><a name="EN-US_TASK_0172368965__li847147161214049"></a><a name="li847147161214049"></a>Configure a link layer protocol.</p>
</li><li id="EN-US_TASK_0172368965__li324754359214049"><p id="EN-US_TASK_0172368965__p1390564686214049"><a name="EN-US_TASK_0172368965__li324754359214049"></a><a name="li324754359214049"></a>Configure network-layer addresses for interfaces to ensure that neighboring devices are reachable at the network layer.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368965__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172368965__steps1464562016214049"><li id="EN-US_TASK_0172368965__step393282528214049"><span id="EN-US_TASK_0172368965__cmd2092266277214049">Configure IPv6 IS-IS on each PE and P. For configuration details, see <a href="dc_vrp_isis_cfg_1023.html">Configuring Basic IS-IS Functions (IPv6)</a>.</span></li><li id="EN-US_TASK_0172368965__step1274795457214049"><span id="EN-US_TASK_0172368965__cmd42899680214049">Configure EVPN and EVPL instances on each PE.</span><ol type="a" id="EN-US_TASK_0172368965__substeps1134867418214049"><li class="substepexpand" id="EN-US_TASK_0172368965__substep2146337079214049"><span id="EN-US_TASK_0172368965__cmd56984447214049">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname251129927214049">system-view</span></b></a></span><p><p id="EN-US_TASK_0172368965__p16291143471910">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1310520433382"><span id="EN-US_TASK_0172368965__cmd361192213598">Run <a href="cmdqueryname=evpn+source-address"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname15545020163919">evpn source-address </span></b></a><i><span class="varname" id="EN-US_TASK_0172368965__varname94451913143213">ip-address</span></i></span><p><p id="EN-US_TASK_0172368965__p3709151685915">An EVPN source address is configured.</p>
</p><p><p id="EN-US_TASK_0172368965__p7565150143918">In scenarios where a CE is dual-homed or multi-homed to PEs, you need to configure an EVPN source address on each PE to generate route distinguishers (RDs) for Ethernet segment routes and Ethernet auto-discovery per ES routes.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep318850188214049"><span id="EN-US_TASK_0172368965__cmd943410451214049">Run <a href="cmdqueryname=evpn+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname76637071214049">evpn vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname1557008617214049">vpn-instance-name</span></i> <strong><span id="EN-US_TASK_0172368965__cmdparmname1521981982214049">vpws</span></strong></span><p><p id="EN-US_TASK_0172368965__p19650229856">A VPWS EVPN instance is created, and the VPWS-EVPN instance view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1781150464214049"><span id="EN-US_TASK_0172368965__cmd2021292915214049">Run <a href="cmdqueryname=route-distinguisher"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname490813682214049">route-distinguisher</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname698663576214049">route-distinguisher</span></i></span><p><p id="EN-US_TASK_0172368965__p580274744413">An RD is configured for the EVPN instance.</p>
</p><p><p id="EN-US_TASK_0172368965__p571288919214049">An EVPN instance takes effect only after an RD is configured for it. The RDs of different EVPN instances on the same PE must be different.</p>
<div class="note" id="EN-US_TASK_0172368965__note1107794281214055"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172368965__p252995118514">If you need to create a large number of EVPN instances and plan a large number of RDs, you can run the <strong id="EN-US_TASK_0172368965__b532619551857">evpn route-distinguisher auto</strong> <em id="EN-US_TASK_0172368965__i432620555520">rd-ip</em> command in the system view to enable automatic RD allocation, thereby avoiding RD conflicts. The <em id="EN-US_TASK_0172368965__i9610174073319">rd-ip</em> parameter specifies an IPv4 address, enabling a device to allocate RDs in the format of <em id="EN-US_TASK_0172368965__i102520353408">X.X.X.X</em>:<em id="EN-US_TASK_0172368965__i895683816409">index</em> to all EVPN instances that are not allocated with RDs. <em id="EN-US_TASK_0172368965__i123552413436">X.X.X.X</em> indicates a user-defined RD-IP value, and <em id="EN-US_TASK_0172368965__i139828209442">index</em> is a 2-byte value automatically allocated by the system in the range from 1 to 65535.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep2022808587214049"><span id="EN-US_TASK_0172368965__cmd530306052214049">Run <a href="cmdqueryname=vpn-target"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1477441418413">vpn-target</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname9774181411412">vpn-target</span></i> &amp;&lt;1-8&gt; [ <strong><span id="EN-US_TASK_0172368965__cmdparmname17743141245">both</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname377414141248">export-extcommunity</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1877411141042">import-extcommunity</span></strong> ]</span><p><p id="EN-US_TASK_0172368965__p7186756145017">VPN targets are configured for the EVPN instance.</p>
</p><p><p id="EN-US_TASK_0172368965__p334642876214049">VPN targets are BGP extended community attributes used to control the receiving and advertisement of EVPN routes. A maximum of eight VPN targets can be configured using the <a href="cmdqueryname=vpn-target"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1561022723214049">vpn-target</span></b></a> command. To configure more VPN targets for an EVPN instance address family, run the <a href="cmdqueryname=vpn-target"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1215868960214049">vpn-target</span></b></a> command multiple times.</p>
<div class="note" id="EN-US_TASK_0172368965__note574967201214049"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172368965__p1944819354214049">An RT of an Ethernet segment route is generated using the middle six bytes of an ESI. For example, if the ESI is 0011.1001.1001.1001.1002, the Ethernet segment route uses 11.1001.1001.10 as its RT.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep599958441214049"><span id="EN-US_TASK_0172368965__cmd1065795222214049">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname247894416214049">quit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p13466132212516">Return to the system view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1291682246214049"><span id="EN-US_TASK_0172368965__cmd391320999214049">Run <a href="cmdqueryname=evpl+instance"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1422566545214049">evpl instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname1242534541214049">evpl-id</span></i></span><p><p id="EN-US_TASK_0172368965__p380819499519">An EVPL instance is created, and the EVPL instance view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1319816984214049"><span id="EN-US_TASK_0172368965__cmd805460225214049">Run <a href="cmdqueryname=evpn+binding+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname167951046444">evpn binding vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname157952461418">vpn-instance-name</span></i></span><p><p id="EN-US_TASK_0172368965__p559517314521">A specified EVPN instance that works in VPWS mode is bound to the current EVPL instance.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1904493630214049"><span id="EN-US_TASK_0172368965__cmd580680875214049">Run <a href="cmdqueryname=local-service-id"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1365665713414">local-service-id</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname365611570417">service-id</span></i> <a href="cmdqueryname=remote-service-id"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname146561571417">remote-service-id</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname1665685713420">service-id</span></i></span><p><p id="EN-US_TASK_0172368965__p7695112345217">The packets of the current EVPL instance are configured to carry the local and remote service IDs.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1618196288214049"><span id="EN-US_TASK_0172368965__cmd1292106808214049">(Optional) Run <a href="cmdqueryname=mtu-match+ignore"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1222018655214049">mtu-match ignore</span></b></a></span><p><p id="EN-US_TASK_0172368965__p944913319374">The MTU matching check is ignored for the EVPL instance. In scenarios where a Huawei device interworks with a non-Huawei device through an EVPN VPWS, if the non-Huawei device does not support any MTU matching check for an EVPL instance, run the <a href="cmdqueryname=mtu-match+ignore"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname16936434143717">mtu-match ignore</span></b></a> command to ignore the MTU matching check.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1369613933417"><span id="EN-US_TASK_0172368965__cmd86961339163417">(Optional) Run <a href="cmdqueryname=load-balancing+ignore-esi"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname115803401565">load-balancing ignore-esi</span></b></a></span><p><p id="EN-US_TASK_0172368965__p416862717317">The device is enabled to ignore the ESI validity check during EVPL instance load balancing.</p>
</p><p><p id="EN-US_TASK_0172368965__p1395970153510">In an EVPN VPWS scenario where active-active protection is deployed, if each access-side device is single-homed to an aggregation-side device and no ESI is configured on the access interface, to implement active-active load balancing, you can run this command on the aggregation-side device to enable the device to ignore the ESI validity check during EVPL instance load balancing.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1355958814214049"><span id="EN-US_TASK_0172368965__cmd503324934214049">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1150332110214049">quit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p9458581254">Return to the system view.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172368965__step1745206966214049"><span id="EN-US_TASK_0172368965__cmd1361826836214049">Configure an AC interface.</span><ol type="a" id="EN-US_TASK_0172368965__substeps407211593214049"><li class="substepexpand" id="EN-US_TASK_0172368965__substep535743993214049"><span id="EN-US_TASK_0172368965__cmd1997842127214049">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname955240725214049">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname1691019100214049">interface-type interface-number.subnum</span></i> <strong><span id="EN-US_TASK_0172368965__cmdparmname1918680243214049">mode l2</span></strong></span><p><p id="EN-US_TASK_0172368965__p445815045813">A Layer 2 sub-interface is created, and the sub-interface view is displayed.</p>
</p><p><div class="note" id="EN-US_TASK_0172368965__note1160542106214049"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172368965__p1784693488214049">Before running this command, ensure that the corresponding Layer 2 main interface does not have the <a href="cmdqueryname=port+link-type"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1986491961214049">port link-type</span></b></a> <strong><span id="EN-US_TASK_0172368965__cmdparmname492307147214049">dot1q-tunnel</span></strong> command configuration. If this configuration exists, run the <a href="cmdqueryname=undo+port+link-type"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname918806431214049">undo port link-type</span></b></a> command to delete the configuration.</p>
<p id="EN-US_TASK_0172368965__p710008700214049">In addition to a Layer 2 sub-interface, an Ethernet main interface, Layer 3 sub-interface, or Eth-Trunk interface can also function as an AC interface.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep061594019246"><span id="EN-US_TASK_0172368965__cmd126153405242">Run <a href="cmdqueryname=encapsulation"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname125671847113">encapsulation</span></b></a> { <strong id="EN-US_TASK_0172368965__b11736155918309">dot1q</strong> [ <strong id="EN-US_TASK_0172368965__b273695916304">vid</strong> <em id="EN-US_TASK_0172368965__i87362059113019">low-pe-vid</em> [ <strong id="EN-US_TASK_0172368965__b3736105914301">to</strong> <em id="EN-US_TASK_0172368965__i57365598304">high-pe-vid</em> ] ] | <strong id="EN-US_TASK_0172368965__b1736175915302">untag</strong> | <strong id="EN-US_TASK_0172368965__b197361559183015">qinq</strong> [ <strong id="EN-US_TASK_0172368965__b673615593308">vid</strong> <em id="EN-US_TASK_0172368965__i373616593309">pe-vid</em> <strong id="EN-US_TASK_0172368965__b37361359123013">ce-vid</strong> { <em id="EN-US_TASK_0172368965__i11736135918306">low-ce-vid</em> [ <strong id="EN-US_TASK_0172368965__b1473615591300">to</strong> <em id="EN-US_TASK_0172368965__i373625973012">high-ce-vid</em> ] | <strong id="EN-US_TASK_0172368965__b77361059163019">default</strong> } ] }</span><p><p id="EN-US_TASK_0172368965__p1405752238">An encapsulation type is configured for packets allowed to pass through the sub-interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1979543399214049"><span id="EN-US_TASK_0172368965__cmd1369247669214049">Run <a href="cmdqueryname=evpl+instance"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1718945158214049">evpl instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname2031911011214049">evpl-id</span></i></span><p><p id="EN-US_TASK_0172368965__p16688174711716">A specified EVPL instance is bound to the Layer 2 sub-interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep83521634114718"><span id="EN-US_TASK_0172368965__cmd1035210347474">(Optional) Run <a href="cmdqueryname=evpn-vpws+ignore-ac-state"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname684731564212">evpn-vpws ignore-ac-state</span></b></a></span><p><p id="EN-US_TASK_0172368965__p915892619116">The interface is enabled to ignore the AC status.</p>
</p><p><p id="EN-US_TASK_0172368965__p16360175594713">On a network with primary and backup links, if CFM is associated with an AC interface, run this command to ensure EVPN VPWS continuity. When the AC status of the interface becomes down, a primary/backup link switchover is triggered. As the interface has been enabled to ignore the AC status using this command, the EVPN VPWS does not need to be re-established during the link switchover.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep540863547214049"><span id="EN-US_TASK_0172368965__cmd2142840325214049">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1491391953214049">quit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p159101251687">Exit the Layer 2 sub-interface view.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172368965__step1127732920214049"><span id="EN-US_TASK_0172368965__cmd116518018214049">Establish a BGP EVPN peer relationship between the PEs.</span><ol type="a" id="EN-US_TASK_0172368965__substeps1143356116214049"><li class="substepexpand" id="EN-US_TASK_0172368965__substep1199587386214049"><span id="EN-US_TASK_0172368965__cmd888718466214049">Run <a href="cmdqueryname=bgp"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname643445567214049">bgp</span></b></a> { <i><span class="varname" id="EN-US_TASK_0172368965__varname2078765973214049">as-number-plain</span></i> | <i><span class="varname" id="EN-US_TASK_0172368965__varname1710979125214049">as-number-dot</span></i> }</span><p><p id="EN-US_TASK_0172368965__p166501824101515">The BGP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep857958003214049"><span id="EN-US_TASK_0172368965__cmd1494950463214049">Run <a href="cmdqueryname=router-id"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname615516668214049">router-id</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname516584274214049">ipv4-address</span></i></span><p><p id="EN-US_TASK_0172368965__p21091143171513">A BGP router ID is configured.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep901254377214049"><span id="EN-US_TASK_0172368965__cmd1180151948214049">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1960156380214049">peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname134325069214049">ipv6-address</span></i> <strong><span id="EN-US_TASK_0172368965__cmdparmname87220198214049">as-number</span></strong> { <i><span class="varname" id="EN-US_TASK_0172368965__varname1743122339214049">as-number-plain</span></i> | <i><span class="varname" id="EN-US_TASK_0172368965__varname1257254895214049">as-number-dot</span></i> }</span><p><p id="EN-US_TASK_0172368965__p1641163171618">The remote PE is configured as a peer.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep973137329214049"><span id="EN-US_TASK_0172368965__cmd283632951214049">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname40929002214049">peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname1596291509214049">ipv6-address</span></i> <a href="cmdqueryname=connect-interface"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname2094098884214049">connect-interface</span></b></a> <strong><span id="EN-US_TASK_0172368965__cmdparmname2046722665214049">loopback</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1570244459214049">interface-number</span></i></span><p><p id="EN-US_TASK_0172368965__p107681930121618">The interface used to set up a TCP connection with the specified BGP peer is specified.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep585007306214049"><span id="EN-US_TASK_0172368965__cmd1037655976214049">Run <a href="cmdqueryname=l2vpn-family+evpn"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname2011286787214049">l2vpn-family evpn</span></b></a></span><p><p id="EN-US_TASK_0172368965__p14250135481617">The BGP EVPN address family view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep415410196214049"><span id="EN-US_TASK_0172368965__cmd329827775214049">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname2129620670214049">peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname1092108246214049">ipv6-address</span></i> <strong><span id="EN-US_TASK_0172368965__cmdparmname194739417214049">enable</span></strong></span><p><p id="EN-US_TASK_0172368965__p136110257176">The device is enabled to exchange EVPN routes with the specified peer.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep81481844823"><span id="EN-US_TASK_0172368965__cmd23891814152710">(Optional) Run <a href="cmdqueryname=peer+srv6-label-compatible"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1439632714419">peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname1359923018497">peerIpv6Addr</span></i> <strong><span id="EN-US_TASK_0172368965__cmdparmname1939652713414">srv6-label-compatible</span></strong></span><p><p id="EN-US_TASK_0172368965__p646975713268">SRv6 label compatibility is enabled.</p>
</p><p><p id="EN-US_TASK_0172368965__p131484441213">According to relevant standards, the MPLS Label2 field of IRB routes and the ESI Label field of ES-AD routes sent to SRv6 peers should both be set to 3 in non-transposition scenarios. By default, however, the value of the MPLS Label2 field in IRB routes is a specific MPLS label, and that of the ESI Label field in ES-AD routes is a specific ESI. After the <strong id="EN-US_TASK_0172368965__b1333261581113">peer srv6-label-compatible</strong> command is run, the value of the MPLS Label2 field in IRB routes and that of the ESI Label field in ES-AD routes are both changed to 3. To ensure proper interworking between Huawei and non-Huawei devices, you can run this command.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep639403813214049"><span id="EN-US_TASK_0172368965__cmd451715503214049">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname289046521214049">quit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p3311155381715">Exit the BGP EVPN address family view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep2123139890214049"><span id="EN-US_TASK_0172368965__cmd1023852678214049">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1392809370214049">quit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p547462101819">Exit the BGP view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep632898413214049"><span id="EN-US_TASK_0172368965__cmd637123700214049">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname583235526214049">commit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p1772618506185">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172368965__step452251000214049"><span id="EN-US_TASK_0172368965__cmd1037930267214049">Configure basic SRv6 functions.</span><ol type="a" id="EN-US_TASK_0172368965__substeps1744855940214049"><li class="substepexpand" id="EN-US_TASK_0172368965__substep843753015441"><span id="EN-US_TASK_0172368965__cmd12468171163617">(Optional) Run <a href="cmdqueryname=evpn+srv6+next-header-field"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname4480156165418">evpn srv6 next-header-field</span></b></a> { <strong><span id="EN-US_TASK_0172368965__cmdparmname1793514311558">59</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1818817508616">143</span></strong> }</span><p><p id="EN-US_TASK_0172368965__p1043113123513">A value is set for the Next Header field in an SRv6 extension header.</p>
</p><p><p id="EN-US_TASK_0172368965__p245712013573">If the value is 59 in earlier versions, you can perform this step to change the value to 59 to ensure compatibility with the earlier versions.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep2096084030214049"><span id="EN-US_TASK_0172368965__cmd1562546822214049">Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1795325734214049">segment-routing ipv6</span></b></a></span><p><p id="EN-US_TASK_0172368965__p203679119242">SRv6 is enabled, and the SRv6 view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep643844915593"><span id="EN-US_TASK_0172368965__en-us_task_0172368959_cmd1865633037214048">Configure a source address for SRv6 encapsulation. Note that you only need to perform one of the following operations. If both of the operations are performed, the latest configuration overrides the previous one.</span><p><ul id="EN-US_TASK_0172368965__en-us_task_0172368959_ul261475310544"><li id="EN-US_TASK_0172368965__en-us_task_0172368959_li761411538546">Run the <a href="cmdqueryname=encapsulation+source-address"><b><span class="cmdname" id="EN-US_TASK_0172368965__en-us_task_0172368959_cmdname23368553547">encapsulation source-address</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__en-us_task_0172368959_varname6336145515412">ipv6-address</span></i> [ <strong><span id="EN-US_TASK_0172368965__en-us_task_0172368959_cmdparmname1633612551542">ip-ttl</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__en-us_task_0172368959_varname2033635519549">ttl-value</span></i> ] command to directly configure a source address for SRv6 encapsulation.</li><li id="EN-US_TASK_0172368965__en-us_task_0172368959_li1554119145516">Run the <a href="cmdqueryname=encapsulation+source-interface"><b><span class="cmdname" id="EN-US_TASK_0172368965__en-us_task_0172368959_cmdname10488513573">encapsulation source-interface</span></b></a> { <i><span class="varname" id="EN-US_TASK_0172368965__en-us_task_0172368959_varname0729113313571">intfname</span></i> | <i><span class="varname" id="EN-US_TASK_0172368965__en-us_task_0172368959_varname17377153912578">interfaceType</span></i> <i><span class="varname" id="EN-US_TASK_0172368965__en-us_task_0172368959_varname1951134465716">interfaceNum</span></i> } [ <strong id="EN-US_TASK_0172368965__en-us_task_0172368959_b7945154716571">ip-ttl</strong> <i><span class="varname" id="EN-US_TASK_0172368965__en-us_task_0172368959_varname2091014584572">ttl-value</span></i> ] command to specify the interface to which the source address used for SRv6 encapsulation belongs.<p id="EN-US_TASK_0172368965__en-us_task_0172368959_p2488153115910">If no IPv6 global address is configured for the interface specified using the <a href="cmdqueryname=encapsulation+source-interface"><b><span class="cmdname" id="EN-US_TASK_0172368965__en-us_task_0172368959_cmdname2054948195915">encapsulation source-interface</span></b></a> command, the source address for SRv6 encapsulation is not configured.</p>
</li></ul>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep290368125214049"><span id="EN-US_TASK_0172368965__cmd1134230891214049">Run <a href="cmdqueryname=locator"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1386829225214049">locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname828098104214049">locator-name</span></i> [ <strong><span id="EN-US_TASK_0172368965__cmdparmname1464618494214049">ipv6-prefix</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname110969799214049">ipv6-address</span></i> <i><span class="varname" id="EN-US_TASK_0172368965__varname1561892937214049">prefix-length</span></i> [ <strong><span id="EN-US_TASK_0172368965__cmdparmname1924213496214049">static</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1325236382214049">static-length</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname871212925214049">args</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1922217591214049">args-length</span></i> ] <sup id="EN-US_TASK_0172368965__sup379064369214049">*</sup> ]</span><p><p id="EN-US_TASK_0172368965__p4707164115371">An SRv6 locator is configured, and the SRv6 locator view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep950096826214049"><span id="EN-US_TASK_0172368965__cmd1736439137214049">(Optional) Run <a href="cmdqueryname=opcode"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname700527252214049">opcode</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname2048401403214049">func-opcode</span></i> <strong><span id="EN-US_TASK_0172368965__cmdparmname211684125214049">end-dx2</span></strong> <strong><span id="EN-US_TASK_0172368965__cmdparmname1018333928214049">evpl-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1650499599214049">evpl-instance-id</span></i></span><p><p id="EN-US_TASK_0172368965__p14802621192510">An opcode for static SIDs is configured.</p>
</p><p><p id="EN-US_TASK_0172368965__p11731124418263">An End.DX2 SID can be either dynamically allocated through BGP or manually configured. If you want to run the <span><a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname175640204576">segment-routing ipv6 locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname165646206572">locator-name</span></i></span> command to enable dynamic End.DX2 SID allocation through BGP in the future, skip this step.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1762977016214049"><span id="EN-US_TASK_0172368965__cmd1522830253214049">(Optional) Run <a href="cmdqueryname=opcode"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname423308216214049">opcode</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname2015380588214049">func-opcode</span></i> <strong><span id="EN-US_TASK_0172368965__cmdparmname1162552118214049">end-dx2l</span></strong> <strong><span id="EN-US_TASK_0172368965__cmdparmname1481566765214049">evpl-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1763681241214049">evpl-instance-id</span></i></span><p><p id="EN-US_TASK_0172368965__p17691125462519">An opcode for End.DX2L SIDs is configured. You can run this command to manually specify a SID for a bypass path.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep951842576214049"><span id="EN-US_TASK_0172368965__cmd1012488329214049">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname681676596214049">quit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p19225427103214">Exit the SRv6 locator view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1470012348214049"><span id="EN-US_TASK_0172368965__cmd1845657748214049">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1806500413214049">quit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p197522368325">Exit the SRv6 view.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172368965__step1978212111112"><span id="EN-US_TASK_0172368965__cmd8781318113">Enable IS-IS SRv6.</span><ol type="a" id="EN-US_TASK_0172368965__substeps3723113111115"><li class="substepexpand" id="EN-US_TASK_0172368965__substep1354118017582"><span id="EN-US_TASK_0172368965__cmd1754116045818">Run <a href="cmdqueryname=isis"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1594614385711">isis</span></b></a> [ <em id="EN-US_TASK_0172368965__i13341622162516">process-id</em> ]</span><p><p id="EN-US_TASK_0172368965__p132913301498">The IS-IS view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1762513386015"><span id="EN-US_TASK_0172368965__cmd13625193818012">Run <a href="cmdqueryname=ipv6+enable+topology+ipv6"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname823120323588">ipv6 enable topology ipv6</span></b></a></span><p><p id="EN-US_TASK_0172368965__p3694532152910">The IPv6 capability is enabled for the IS-IS process in the IPv6 topology.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1661161624315"><span id="EN-US_TASK_0172368965__cmd14661416134316">Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname10417449877">segment-routing ipv6</span></b></a> <strong id="EN-US_TASK_0172368965__b624017194438">locator</strong> <em id="EN-US_TASK_0172368965__i624051918439">locator-name</em> [ <strong id="EN-US_TASK_0172368965__b2240111994314">auto-sid-disable</strong> ]</span><p><p id="EN-US_TASK_0172368965__p1355183810496">IS-IS SRv6 is enabled.</p>
<p id="EN-US_TASK_0172368965__p132601555174311">In this command, the value of <em id="EN-US_TASK_0172368965__i7384053104315">locator-name</em> must be the same as that specified using the <a href="cmdqueryname=locator"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname277793123417">locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname57771539347">locator-name</span></i> [ <strong><span id="EN-US_TASK_0172368965__cmdparmname197771133345">ipv6-prefix</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname187772323411">ipv6-address</span></i> <i><span class="varname" id="EN-US_TASK_0172368965__varname137771833349">prefix-length</span></i> [ <strong><span id="EN-US_TASK_0172368965__cmdparmname0777163203414">static</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname47775314346">static-length</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1177753133414">args</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1877719323411">args-length</span></i> ] <sup id="EN-US_TASK_0172368965__sup97771315349">*</sup> ] command.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep4914940175811"><span id="EN-US_TASK_0172368965__cmd1870131493011">(Optional) Run <a href="cmdqueryname=segment-routing+ipv6+auto-sid+advertise"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname93181037181813">segment-routing ipv6 auto-sid advertise</span></b></a> { <strong><span id="EN-US_TASK_0172368965__cmdparmname63441655122614">no-flavor</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1434475511266">psp</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1134419550262">psp-usp-usd</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1434425562613">psp-usp-usd-coc</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1134485518261">coc</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname434455514264">psp-coc</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname163441855162619">psp-usp-usd-coc-next</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1834485582620">psp-usd-next</span></strong> } <sup id="EN-US_TASK_0172368965__sup193441455122617">*</sup></span><p><p id="EN-US_TASK_0172368965__p1658777103012">The function to adjust the flavors to be carried in dynamically allocated End and End.X SIDs is enabled.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep79011228144419"><span id="EN-US_TASK_0172368965__cmd29011428154413">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname17731195113316">quit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p19503197165014">Exit the IS-IS view.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172368965__step68011921282"><span id="EN-US_TASK_0172368965__cmd28011921584">Configure EVPN routes on the PEs to carry SIDs and recurse to SRv6 BE paths based on the SIDs.</span><ol type="a" id="EN-US_TASK_0172368965__substeps6584561898"><li class="substepexpand" id="EN-US_TASK_0172368965__substep1593895910214049"><span id="EN-US_TASK_0172368965__cmd897546692214049">Run <a href="cmdqueryname=bgp"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1333363326214049">bgp</span></b></a> { <i><span class="varname" id="EN-US_TASK_0172368965__varname1170960823214049">as-number-plain</span></i> | <i><span class="varname" id="EN-US_TASK_0172368965__varname2020086916214049">as-number-dot</span></i> }</span><p><p id="EN-US_TASK_0172368965__p88941319125018">The BGP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1117193618214049"><span id="EN-US_TASK_0172368965__cmd1223612005214049">Run <a href="cmdqueryname=l2vpn-family+evpn"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1466999493214049">l2vpn-family evpn</span></b></a></span><p><p id="EN-US_TASK_0172368965__p121561533155018">The BGP EVPN address family view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep2139072424214049"><span id="EN-US_TASK_0172368965__cmd121812032747">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname289976276214049">peer</span></b></a> { <i><span class="varname" id="EN-US_TASK_0172368965__varname979028949214049">ipv6-address</span></i> | <i><span class="varname" id="EN-US_TASK_0172368965__varname960805129214049">group-name</span></i> } <strong><span id="EN-US_TASK_0172368965__cmdparmname138910974214049">advertise encap-type</span></strong> <strong><span id="EN-US_TASK_0172368965__cmdparmname570577565214049">srv6</span></strong><span> [ <strong><span id="EN-US_TASK_0172368965__cmdparmname629743683918">advertise-srv6-locator</span></strong> ]</span></span><p><p id="EN-US_TASK_0172368965__p716512415415">The device is enabled to send EVPN routes carrying SRv6-encapsulated attributes to the specified peer or peer group.</p>
</p><p><p id="EN-US_TASK_0172368965__p746143719434">In a scenario where BFD is used to check locator reachability, if locator routes are summarized by a P device between local and remote PEs, the remote PE can learn only the summary locator route, not the locator on the local PE. This leads to a BFD failure. To address this issue, specify the <strong><span id="EN-US_TASK_0172368965__cmdparmname133588371762">advertise-srv6-locator</span></strong> parameter in the command to allow the local PE to carry locator length information in the EVPN route to be advertised to the remote PE. In this way, after receiving the EVPN route, the remote PE can calculate the locator on the local PE, enabling BFD to take effect.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep73900099214049"><span id="EN-US_TASK_0172368965__cmd793415927214049">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname247260951214049">quit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p1381314569506">Exit the BGP EVPN address family view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1708683009214049"><span id="EN-US_TASK_0172368965__cmd1684004579214049">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1169570832214049">quit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p5620795117">Exit the BGP view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep838846504214049"><span id="EN-US_TASK_0172368965__cmd263050173214049">Run <a href="cmdqueryname=evpl+instance"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1990926138214049">evpl instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname2083065979214049">evpl-id</span></i></span><p><p id="EN-US_TASK_0172368965__p10879115111558">The EVPL instance view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1141404343214049"><span id="EN-US_TASK_0172368965__cmd111374150214049">Run <a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname745875227214049">segment-routing ipv6 locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname460911294214049">locator-name</span></i></span><p><p id="EN-US_TASK_0172368965__p119774301515">The device is enabled to add SIDs to EVPN routes to be sent.</p>
</p><p><p id="EN-US_TASK_0172368965__p220590627214049">If there are static SIDs in the range of the locator specified using <i><span class="varname" id="EN-US_TASK_0172368965__varname57771532133712">locator-name</span></i>, use the static SIDs. Otherwise, use dynamically allocated SIDs.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep2078834866214049"><span id="EN-US_TASK_0172368965__cmd1566139819214049">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1533730082214049">quit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p77702035519">Exit the EVPL instance view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep954046868214049"><span id="EN-US_TASK_0172368965__cmd1552801974214049">Run <a href="cmdqueryname=evpn+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname181037887214049">evpn vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname2010351821214049">vpn-instance-name</span></i> <strong><span id="EN-US_TASK_0172368965__cmdparmname927877788214049">vpws</span></strong></span><p><p id="EN-US_TASK_0172368965__p3464105211519">The view of the EVPN instance that works in VPWS mode is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep1879130461214049"><span id="EN-US_TASK_0172368965__cmd1651145245214049">Run <a href="cmdqueryname=segment-routing+ipv6+best-effort"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname924290534214049">segment-routing ipv6 best-effort</span></b></a></span><p><p id="EN-US_TASK_0172368965__p629544313312">The device is enabled to perform route recursion to SRv6 BE paths based on the SIDs carried by routes.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep784687662214049"><span id="EN-US_TASK_0172368965__cmd548459007214049">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1434470395214049">quit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p94051316125210">Return to the system view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep55708164595"><span id="EN-US_TASK_0172368965__cmd105701166595">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname437694357214049">commit</span></b></a></span><p><p id="EN-US_TASK_0172368965__p590325153015">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172368965__step1743202215476"><span id="EN-US_TASK_0172368965__cmd16431322194714">(Optional) Verify EVPN VPWS connectivity.</span><ol type="a" id="EN-US_TASK_0172368965__substeps551117575531"><li class="substepexpand" id="EN-US_TASK_0172368965__substep195118573538"><span id="EN-US_TASK_0172368965__cmd951113577533">Configure an End.OP SID on the remote PE.</span><p><ol class="substepthirdol" id="EN-US_TASK_0172368965__ol13699921135520"><li id="EN-US_TASK_0172368965__li186994215555">Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname81626543362">segment-routing ipv6</span></b></a><p id="EN-US_TASK_0172368965__p1884035453615">The SRv6 view is displayed.</p>
</li><li id="EN-US_TASK_0172368965__li3361954185517">Run <a href="cmdqueryname=locator"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1926810263916">locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname1326818243915">locator-name</span></i><p id="EN-US_TASK_0172368965__p3895182163910">The SRv6 locator view is displayed.</p>
</li><li id="EN-US_TASK_0172368965__li13507132695614">Run <a href="cmdqueryname=opcode"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname10948142635614">opcode</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname7948826185619">func-opcode</span></i> <strong><span id="EN-US_TASK_0172368965__cmdparmname494820265563">end-op</span></strong><p id="EN-US_TASK_0172368965__p2440191013375">An opcode for End.OP SIDs is configured.</p>
</li><li id="EN-US_TASK_0172368965__li35367350202">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname2631951039">commit</span></b></a><p id="EN-US_TASK_0172368965__p9754361635">The configuration is committed.</p>
</li></ol>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep167981400208"><span id="EN-US_TASK_0172368965__cmd1879811409201">Perform the following steps on the local PE:</span><p><ol class="substepthirdol" id="EN-US_TASK_0172368965__ol762518569282"><li id="EN-US_TASK_0172368965__li16625105632818">Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname10990224379">segment-routing ipv6</span></b></a><p id="EN-US_TASK_0172368965__p7501731374">The SRv6 view is displayed.</p>
</li><li id="EN-US_TASK_0172368965__li136261656102811">Run <a href="cmdqueryname=remote+end-op"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname17626556152815">remote end-op</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368965__varname1462619562287">op-sid</span></i> <i><span class="varname" id="EN-US_TASK_0172368965__varname1562675610285">prefix-length</span></i><p id="EN-US_TASK_0172368965__p193416479358">A remote End.OP SID is configured.</p>
</li><li id="EN-US_TASK_0172368965__li1462610569285">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname136261056152810">commit</span></b></a><p id="EN-US_TASK_0172368965__p376047153616">The configuration is committed.</p>
</li></ol>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368965__substep427813120349"><span id="EN-US_TASK_0172368965__cmd132784316340">Perform the following steps on the local PE:</span><p><ul id="EN-US_TASK_0172368965__ul184157470347"><li id="EN-US_TASK_0172368965__li16415144743419">Run <a href="cmdqueryname=ping+evpn+vpws"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname1652940161214156">ping evpn vpws</span></b></a><span id="EN-US_TASK_0172368965__ph_01"> <i><span class="varname" id="EN-US_TASK_0172368965__varname1941792304214156">local-ce-id</span></i> <i><span class="varname" id="EN-US_TASK_0172368965__varname1073217639214156">remote-ce-id</span></i> <strong><span id="EN-US_TASK_0172368965__cmdparmname11206114454020">end-op</span></strong><em id="EN-US_TASK_0172368965__i10734635184013"> endOp</em> [ <strong><span id="EN-US_TASK_0172368965__cmdparmname1937004174214156">-a</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname2122560388214156">source-ip</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1832135849214156">-c</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1049509071214156">count</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1588203750214156">-exp</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname494157468214156">exp-value</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1767855400214156">-m</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname238863197214156">interval</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1996559987214156">-s</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname555868307214156">packet-size</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname448271414214156">-t</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname443011120214156">time-out</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname136542440214156">-r</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname793486602214156">reply-mode</span></i><span> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1474869218214156">-tc</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1422550504214156">tc</span></i></span> ] <sup id="EN-US_TASK_0172368965__sup1961998835214156">*</sup></span><p id="EN-US_TASK_0172368965__p21211343133712">A ping operation is performed to check the EVPN VPWS status.</p>
</li><li id="EN-US_TASK_0172368965__li7358111174118">Run <a href="cmdqueryname=tracert+evpn+vpws"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname383329855214156">tracert evpn vpws</span></b></a><span id="EN-US_TASK_0172368965__ph1588301119411"> <i><span class="varname" id="EN-US_TASK_0172368965__varname1215361254214156">local-ce-id</span></i> <i><span class="varname" id="EN-US_TASK_0172368965__varname1958568685214156">remote-ce-id</span></i> <span><strong><span id="EN-US_TASK_0172368965__cmdparmname20243192814119">end-op</span></strong><em id="EN-US_TASK_0172368965__i15243102894118"> endOp</em> </span>[ <strong><span id="EN-US_TASK_0172368965__cmdparmname580953471214156">-a</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1364248885214156">source-ip</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname654209059214156">-exp</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1736464945214156">exp-value</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname530655347214156">-s</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname954453743214156">packet-size</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname2146990670214156">-t</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname2051019238214156">timeout</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname337587730214156">-h</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1064593295214156">max-ttl</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1449867262214156">-r</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1381993033214156">reply-mode</span></i><span> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1938614672214156">-tc</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1822308795214156">tc</span></i></span> ] <sup id="EN-US_TASK_0172368965__sup396893107214156">*</sup> [ <strong><span id="EN-US_TASK_0172368965__cmdparmname2129708490214156">pipe</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1649155127214156">uniform</span></strong> ]</span><p id="EN-US_TASK_0172368965__p1638913716399">A tracert operation is performed to check the EVPN VPWS status.</p>
</li></ul>
</p></li></ol>
</li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172368965__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p id="EN-US_TASK_0172368965__p174565631214049">After configuring EVPN VPWS over SRv6 BE, verify the configuration.</p>
<ul id="EN-US_TASK_0172368965__ul2120760647214049"><li id="EN-US_TASK_0172368965__li1476287995214049"><p id="EN-US_TASK_0172368965__p2093758174214049"><a name="EN-US_TASK_0172368965__li1476287995214049"></a><a name="li1476287995214049"></a>Run the <a href="cmdqueryname=display+bgp+evpn+evpl"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname246175933214049">display bgp evpn evpl</span></b></a> command to check all EVPL instance information.</p>
</li><li id="EN-US_TASK_0172368965__li315311186214049"><p id="EN-US_TASK_0172368965__p1592945953214049"><a name="EN-US_TASK_0172368965__li315311186214049"></a><a name="li315311186214049"></a>Run the <a href="cmdqueryname=display+bgp+evpn"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname621112508214049">display bgp evpn</span></b></a> { <strong><span id="EN-US_TASK_0172368965__cmdparmname1560587432214049">all</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname794310193214049">route-distinguisher</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname654046266214049">route-distinguisher</span></i> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1184097585214049">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname481649966214049">vpn-instance-name</span></i> } <strong><span id="EN-US_TASK_0172368965__cmdparmname1599138299214049">routing-table</span></strong> [ { <strong><span id="EN-US_TASK_0172368965__cmdparmname1396535204214049">ad-route</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1664571388214049">es-route</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname2032321971214049">inclusive-route</span></strong> | <strong><span id="EN-US_TASK_0172368965__cmdparmname1506459724214049">mac-route</span></strong> } <i><span class="varname" id="EN-US_TASK_0172368965__varname865606763214049">prefix</span></i> ] command to check BGP EVPN route information.</p>
</li><li id="EN-US_TASK_0172368965__li94016622214049"><p id="EN-US_TASK_0172368965__p1736885409214049"><a name="EN-US_TASK_0172368965__li94016622214049"></a><a name="li94016622214049"></a>Run the <a href="cmdqueryname=display+segment-routing+ipv6+local-sid"><b><span class="cmdname" id="EN-US_TASK_0172368965__cmdname2057286433214049">display segment-routing ipv6 local-sid</span></b></a> <strong><span id="EN-US_TASK_0172368965__cmdparmname116899643214049">end-dx2</span></strong> <strong><span id="EN-US_TASK_0172368965__cmdparmname887983115214049">evpl-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172368965__varname1531852146214049">evpl-id</span></i> <strong><span id="EN-US_TASK_0172368965__cmdparmname716149460214049">forwarding</span></strong> command to check information about the SRv6 BE local SID table.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0002.html">Configuring SRv6 BE (IS-IS)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0252.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0023.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>