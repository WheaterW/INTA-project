
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Service Class-based Traffic Steering into an SRv6 TE Policy">
<meta name="abstract" content="You can configure service class-based traffic steering to recurse a route to an SRv6 TE Policy based on service class values, so that traffic can be forwarded through a path in the SRv6 TE Policy.">
<meta name="description" content="You can configure service class-based traffic steering to recurse a route to an SRv6 TE Policy based on service class values, so that traffic can be forwarded through a path in the SRv6 TE Policy.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0290.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0292.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0294.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00587852">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001218369981">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Service Class-based Traffic Steering into an SRv6 TE Policy</title>
</head>
<body><a name="EN-US_TASK_0000001218369981"></a><a name="EN-US_TASK_0000001218369981"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Service Class-based Traffic Steering into an SRv6 TE Policy</h1>
<div class="taskbody"><p>You can configure service class-based traffic steering to recurse a route to an SRv6 TE Policy based on service class values, so that traffic can be forwarded through a path in the SRv6 TE Policy.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001218369981__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring service class-based traffic steering into an SRv6 TE Policy, complete the following task:</p>
<ul><li>Configure an SRv6 TE Policy.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001218369981__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After an SRv6 TE Policy is configured, traffic needs to be steered into it for forwarding. This process is called traffic steering. Currently, SRv6 TE Policies can be used for various services, such as BGP L3VPN and EVPN services. This section describes how to configure services to recurse to an SRv6 TE Policy through a specified tunnel policy.</p>
<p>During service class-based traffic steering, nodes use SRv6 mapping policies to dynamically create SRv6 TE flow groups.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001218369981__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a></span><p><p>The SRv6 view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=mapping-policy"><b><span class="cmdname">mapping-policy</span></b></a><strong> </strong><em>name-value</em> <strong><span>color</span></strong><strong> </strong><em>color-value</em></span><p><p>An SRv6 mapping policy is created, and the SRv6 mapping policy view is displayed.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=description"><b><span class="cmdname">description </span></b></a><em>description-value</em></span><p><p>A description is configured for the SRv6 mapping policy.</p>
</p></li><li><span>Run <a href="cmdqueryname=match-type+service-class"><b><span class="cmdname">match-type service-class</span></b></a></span><p><p>The mapping type of the SRv6 mapping policy is set to service class.</p>
</p></li><li><span>Run <strong>index </strong><em>index-value</em><strong> service-class</strong> { <strong><span>be</span></strong> | <strong><span>af1</span></strong> | <strong><span>af2</span></strong> | <strong><span>af3</span></strong> | <strong><span>af4</span></strong> | <strong><span>ef</span></strong> | <strong><span>cs6</span></strong> | <strong><span>cs7</span></strong> } <sup>*</sup> <strong>match</strong> { <strong>srv6-te-policy</strong><strong> color</strong><em> color-value</em> | <strong>native-ip</strong> } or <strong>default</strong><strong> match</strong> { <strong>srv6-te-policy</strong><strong> color </strong><em>color-value</em> | <strong>native-ip</strong> }</span><p><p>A rule is configured for the mapping between the color values of SRv6 TE Policies in an SRv6 TE flow group and the service class values of packets or for the mapping between native IP links in an SRv6 TE flow group and the service class values of packets.</p>
</p><p><p>In an SRv6 mapping policy, you can specify a rule for the mapping between the color values of SRv6 TE Policies and the service class values of packets or for the mapping between native IP links and the service class values of packets. Each service class value can be associated with only one SRv6 TE Policy or native IP link. Furthermore, such a mapping rule can be configured for an SRv6 TE Policy only if this policy is up.</p>
<p>When packets with service class values enter an SRv6 TE flow group, they are matched against the following rules in sequence to achieve forwarding:</p>
<p>1. The packets are first strictly matched against the SRv6 TE Policy-specific or native IP link-specific rule configured with the corresponding service class value.</p>
<p>2. If the matching fails, the packets are matched against the SRv6 TE Policy-specific or native IP link-specific rule configured with the <strong>default</strong> priority.</p>
<p>3. If the rule configured with the <strong>default</strong> priority does not exist or it fails to go up, the packets are matched against the SRv6 mapping policy rule that is configured with the smallest index and remains up. As such, it is recommended that low-priority service classes (BE &lt; AF1 &lt; AF2 &lt; AF3 &lt; AF4 &lt; EF &lt; CS6 &lt; CS7) be specified in the SRv6 mapping policy rule with a small index. This ensures that unmatched traffic preferentially preempts the low-priority bandwidth instead of the high-priority bandwidth.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the SRv6 view.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <a href="cmdqueryname=tunnel-policy"><b><span class="cmdname">tunnel-policy</span></b></a> <i><span class="varname">policy-name</span></i></span><p><p>A tunnel policy is created, and its view is displayed.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description-text</span></i></span><p><p>A description is configured for the tunnel policy.</p>
</p></li><li><span>Run <a href="cmdqueryname=tunnel+select-seq"><b><span class="cmdname">tunnel select-seq</span></b></a> <strong><span>ipv6</span></strong> <strong><span>srv6-te-flow-group</span></strong> <strong><span>load-balance-number</span></strong> <em>loadBalanceNumber</em></span><p><p>A tunnel selection policy is configured.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Because there can be only one effective SRv6 TE Policy with the endpoint and color specified, load balancing is not involved.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0290.html">Configuring Traffic Steering into an SRv6 TE Policy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0292.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0294.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>