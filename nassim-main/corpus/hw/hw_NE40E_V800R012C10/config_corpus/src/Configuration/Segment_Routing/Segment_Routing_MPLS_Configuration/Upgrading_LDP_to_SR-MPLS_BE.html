
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Upgrading LDP to SR-MPLS BE">
<meta name="abstract" content="This section describes how to upgrade LDP to SR-MPLS BE.">
<meta name="description" content="This section describes how to upgrade LDP to SR-MPLS BE.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0032.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0175.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00604599,l00587852,w00606909,w00800033">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00425560">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001122993236">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/thickbox.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/imageResize.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-migrate-1.2.1.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-ui.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.mousewheel.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/thickbox.js"></script>
<title>Upgrading LDP to SR-MPLS BE</title>
</head>
<body><a name="EN-US_TASK_0000001122993236"></a><a name="EN-US_TASK_0000001122993236"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Upgrading LDP to SR-MPLS BE</h1>
<div class="taskbody"><p>This section describes how to upgrade LDP to SR-MPLS BE.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001122993236__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>All devices involved in the upgrade run LDP, and traffic has recursed to the LDP LSP between the ingress and egress.</p>
<p>By default, the priority of an LDP LSP is higher than that of an SR-MPLS BE LSP (SR LSP for short).</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001122993236__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>MPLS LDP is widely deployed on existing networks to carry services such as BGP/MPLS IP VPN services. The SR-MPLS technology, which is designed based on the source routing concept, simplifies network protocols and supports efficient TI-LFA protection technologies, facilitating smooth evolution to SDN networks. <a href="#EN-US_TASK_0000001122993236__fig_dc_vrp_sr_all_cfg_001801">Figure 1</a> shows the recommended process of upgrading LDP to SR-MPLS BE.</p>
<div class="fignone" id="EN-US_TASK_0000001122993236__fig_dc_vrp_sr_all_cfg_001801"><a name="EN-US_TASK_0000001122993236__fig_dc_vrp_sr_all_cfg_001801"></a><a name="fig_dc_vrp_sr_all_cfg_001801"></a><span class="figcap"><b>Figure 1 </b>Process of upgrading LDP to SR-MPLS BE</span><br><span><img class="imgResize" src="figure/en-us_image_0000001122997210.png" width="523.6875" height="224.55055000000002" title="Click to enlarge"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001122993236__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Upgrade all devices to support SR, specify an SRGB, and configure prefix SIDs for desired loopback interface addresses. For configuration details, see "Configuring Basic SR-MPLS BE Functions" in <a href="dc_vrp_sr-be_cfg_0008.html">Configuring an IS-IS SR-MPLS BE Tunnel</a> or <a href="dc_vrp_sr_all_cfg_0001.html">Configuring an OSPF SR-MPLS BE Tunnel</a>.</span><p><p>In this case, although traffic still recurses to the LDP LSP, an SR LSP has already been generated.</p>
</p></li><li><span>Check whether SR LSP entries are correctly generated on the devices.</span><p><ol type="a"><li>Run the <a href="cmdqueryname=display+segment-routing+prefix+mpls+forwarding"><b><span class="cmdname">display segment-routing prefix mpls forwarding</span></b></a> command to check information about the SR label forwarding table.</li><li>Run the <a href="cmdqueryname=ping+lsp"><b><span class="cmdname">ping lsp</span></b></a> command to check end-to-end SR LSP connectivity.</li></ol>
</p></li><li><span>Run the <a href="cmdqueryname=tunnel-prefer+segment-routing"><b><span class="cmdname">tunnel-prefer segment-routing</span></b></a> command to configure the SR LSP to take precedence over the LDP LSP.</span><p><ol type="a"><li>Run this command on PE1. Then the traffic whose ingress is PE1 recurses to the SR LSP, whereas the traffic whose ingress is PE2 still recurses to the LDP LSP.</li><li>Run this command on PE2. Then the traffic whose ingress is PE2 also recurses to the SR LSP.</li></ol>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>During the configuration, check whether traffic is normal. If the traffic is abnormal, you can run the <a href="cmdqueryname=undo+tunnel-prefer+segment-routing"><b><span class="cmdname">undo tunnel-prefer segment-routing</span></b></a> command to perform a rollback so that the traffic continues to be carried over the LDP LSP.</p>
</div></div>
</p></li><li><span>Run the <a href="cmdqueryname=undo+mpls+ldp"><b><span class="cmdname">undo mpls ldp</span></b></a> command on each device to delete the LDP configuration.</span><p><p>In this case, only the SR LSP (not the LDP LSP) exists on the network, meaning that the upgrade process is complete.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0000.html">Segment Routing MPLS Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0032.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0175.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>

<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>