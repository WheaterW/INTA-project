
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IGP SR">
<meta name="abstract" content="This section describes how to configure IGP SR.">
<meta name="description" content="This section describes how to configure IGP SR.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0067.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0200_4.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0167.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="segment_routing_vrp,w00604599,l00455378,l00587852,w00606909,w00800033">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00468467">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368851">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring IGP SR</title>
</head>
<body><a name="EN-US_TASK_0172368851"></a><a name="EN-US_TASK_0172368851"></a>

<div class="articleBoxWithoutHead">





<h1 class="topicTitle-h1">Configuring IGP SR</h1>
<div class="taskbody"><p>This section describes how to configure IGP SR.</p>
<div class="context"><a name="EN-US_TASK_0172368851__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0172368851__en-us_task_0172368845_context1614072331214048"><div class="p" id="EN-US_TASK_0172368851__en-us_task_0172368845_p700238213214048">An SR-MPLS TE Policy may contain multiple candidate paths that are defined using segment lists. Because adjacency and node SIDs are required for SR-MPLS TE Policy configuration, you need to configure the IGP SR function. Node SIDs need to be configured manually, whereas adjacency SIDs can either be generated dynamically by an IGP or be configured manually.<ul id="EN-US_TASK_0172368851__en-us_task_0172368845_ul1174972709214048"><li id="EN-US_TASK_0172368851__en-us_task_0172368845_li580774324214048">In scenarios where SR-MPLS TE Policies are configured manually, if dynamic adjacency SIDs are used, the adjacency SIDs may change after an IGP restart. To keep the SR-MPLS TE Policies up, you must adjust them manually. The adjustment workload is heavy if a large number of SR-MPLS TE Policies are configured manually. Therefore, you are advised to configure adjacency SIDs manually and not to use adjacency SIDs generated dynamically.</li><li id="EN-US_TASK_0172368851__en-us_task_0172368845_li687950852214048">In scenarios where SR-MPLS TE Policies are delivered by a controller dynamically, you are also advised to configure adjacency SIDs manually. Although the controller can use BGP-LS to detect adjacency SID changes, the adjacency SIDs dynamically generated by an IGP change randomly, causing inconvenience in routine maintenance and troubleshooting.</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368851__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172368851__en-us_task_0172368845_steps57229013214048"><li id="EN-US_TASK_0172368851__en-us_task_0172368845_step1691436518214048"><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmd1732522687214048">Enable MPLS.</span><ol type="a" id="EN-US_TASK_0172368851__en-us_task_0172368845_substeps259501290214048"><li class="substepexpand" id="EN-US_TASK_0172368851__en-us_task_0172368845_substep1518052635214048"><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmd1191513746214335">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172368851__en-us_task_0172368845_cmdname1483950700214335">system-view</span></b></a></span><p><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p693411552214335">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368851__en-us_task_0172368845_substep1303446099214048"><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmd537902846214048">Run <a href="cmdqueryname=mpls+lsr-id"><b><span class="cmdname" id="EN-US_TASK_0172368851__en-us_task_0172368845_cmdname1285814804214048">mpls lsr-id</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368851__en-us_task_0172368845_varname557408369214048">lsr-id</span></i></span><p><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p208927815188">An LSR ID is configured for the device.</p>
</p><p><div class="p" id="EN-US_TASK_0172368851__en-us_task_0172368845_p1852318518214048">Note the following during LSR ID configuration:<ul id="EN-US_TASK_0172368851__en-us_task_0172368845_ul1705848622214048"><li id="EN-US_TASK_0172368851__en-us_task_0172368845_li1385015440214048"><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p1379250247214048"><a name="EN-US_TASK_0172368851__en-us_task_0172368845_li1385015440214048"></a><a name="en-us_task_0172368845_li1385015440214048"></a>Configuring LSR IDs is the prerequisite for all MPLS configurations.</p>
</li><li id="EN-US_TASK_0172368851__en-us_task_0172368845_li584145962214048"><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p1593432897214048"><a name="EN-US_TASK_0172368851__en-us_task_0172368845_li584145962214048"></a><a name="en-us_task_0172368845_li584145962214048"></a>LSRs do not have default IDs. LSR IDs must be manually configured.</p>
</li><li id="EN-US_TASK_0172368851__en-us_task_0172368845_li1146434562214048"><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p902402650214048"><a name="EN-US_TASK_0172368851__en-us_task_0172368845_li1146434562214048"></a><a name="en-us_task_0172368845_li1146434562214048"></a>Using a loopback interface address as the LSR ID is recommended for an LSR.</p>
</li></ul>
</div>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368851__en-us_task_0172368845_substep1876730298214048"><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmd199301914195813">Run <a href="cmdqueryname=mpls"><b><span class="cmdname" id="EN-US_TASK_0172368851__en-us_task_0172368845_cmdname1059720307214048">mpls</span></b></a></span><p><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p1051312895811">MPLS is enabled globally, and its view is displayed.</p>
</p><p><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p122621038113717">Because SR-MPLS uses the MPLS forwarding plane, it requires MPLS to be enabled globally and on specific interfaces.</p>
<p id="EN-US_TASK_0172368851__en-us_task_0172368845_p69111041817">To avoid the complex configuration of enabling MPLS on interfaces one by one, an optimization has been made, so that MPLS can be automatically enabled on an interface when either of the following conditions is met:</p>
<ul id="EN-US_TASK_0172368851__en-us_task_0172368845_ul778995113171"><li id="EN-US_TASK_0172368851__en-us_task_0172368845_li13789851201718">An IGP is enabled on the interface, and Segment Routing is enabled for the IGP.</li><li id="EN-US_TASK_0172368851__en-us_task_0172368845_li12789651171715">A static adjacency label is configured for the interface in the Segment Routing view.</li></ul>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368851__en-us_task_0172368845_substep547651975214048"><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmd1706266331214335">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172368851__en-us_task_0172368845_cmdname349815566214335">commit</span></b></a></span><p><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p1062523543214335">The configuration is committed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368851__en-us_task_0172368845_substep7470320201815"><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmd134701020181812">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368851__en-us_task_0172368845_cmdname08790208183">quit</span></b></a></span><p><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p14830184122915">Return to the system view.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172368851__en-us_task_0172368845_step572996279214048"><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmd1031788005214048">Enable SR globally.</span><ol type="a" id="EN-US_TASK_0172368851__en-us_task_0172368845_substeps2050837336214048"><li class="substepexpand" id="EN-US_TASK_0172368851__en-us_task_0172368845_substep1448290327214048"><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmd1835870791214048">Run <a href="cmdqueryname=segment-routing"><b><span class="cmdname" id="EN-US_TASK_0172368851__en-us_task_0172368845_cmdname353873158214048">segment-routing</span></b></a></span><p><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p811421318497">Segment Routing is enabled globally, and the Segment Routing view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368851__en-us_task_0172368845_substep1290353374214048"><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmd172353755417">(Optional) Run <a href="cmdqueryname=local-block"><b><span class="cmdname" id="EN-US_TASK_0172368851__en-us_task_0172368845_cmdname1947162530214048">local-block</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368851__en-us_task_0172368845_varname1818373300214048">begin-value</span></i> <i><span class="varname" id="EN-US_TASK_0172368851__en-us_task_0172368845_varname466746579214048">end-value</span></i><span> [ <strong><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmdparmname3374149818">ignore-conflict</span></strong> ]</span></span><p><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p66981718541">An SR-MPLS-specific SRLB range is configured.</p>
</p><p><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p999462075214048">If the system displays a message indicating that the SRLB is used, run the <a href="cmdqueryname=display+segment-routing+local-block"><b><span class="cmdname" id="EN-US_TASK_0172368851__en-us_task_0172368845_en-us_cliref_0172381582_cmdname1293785661214520">display segment-routing local-block</span></b></a> command to view the SRLB ranges that can be set. Alternatively, delete unwanted configurations related to the used label to release the label space.</p>
<p id="EN-US_TASK_0172368851__en-us_task_0172368845_p131321412711">When the <strong><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmdparmname186814231590">ignore-conflict</span></strong> parameter is specified in the <a href="cmdqueryname=local-block"><b><span class="cmdname" id="EN-US_TASK_0172368851__en-us_task_0172368845_cmdname231918524712">local-block</span></b></a> command, if a label conflict occurs, the configuration is forcibly delivered but does not occupy label resources. This function is mainly used for pre-deployment, and the configuration takes effect after the device is restarted.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368851__en-us_task_0172368845_substep433988114214048"><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmd2007162652214335">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172368851__en-us_task_0172368845_cmdname1476720803214335">commit</span></b></a></span><p><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p236334797214335">The configuration is committed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368851__en-us_task_0172368845_substep15638200171916"><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmd126383051917">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368851__en-us_task_0172368845_cmdname13324112194">quit</span></b></a></span><p><p id="EN-US_TASK_0172368851__en-us_task_0172368845_p34951330172910">Return to the system view.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172368851__en-us_task_0172368845_step34381020214048"><span id="EN-US_TASK_0172368851__en-us_task_0172368845_cmd168702097214048">Configure IGP SR.</span><ul id="EN-US_TASK_0172368851__en-us_task_0172368845_choices1913327553214048"><li id="EN-US_TASK_0172368851__en-us_task_0172368845_choice676450219214048">If the IGP is IS-IS, configure IGP SR by referring to <a href="dc_vrp_sr_all_cfg_0026.html">Configuring Basic SR-MPLS TE Functions</a>.<p id="EN-US_TASK_0172368851__en-us_task_0172368845_p523918001813">In scenarios where SR-MPLS TE Policies need to be manually configured, you are advised to use manually configured adjacency SIDs. In scenarios where a controller dynamically delivers SR-MPLS TE Policies, you are advised to preferentially use manually configured adjacency SIDs. However, you can also use IS-IS to dynamically generate adjacency SIDs.</p>
</li><li id="EN-US_TASK_0172368851__en-us_task_0172368845_choice1167583685214048">If the IGP is OSPF, configure IGP SR by referring to <a href="dc_vrp_sr_all_cfg_0027.html">Configuring Basic SR-MPLS TE Functions</a>.<p id="EN-US_TASK_0172368851__en-us_task_0172368845_p41401345173618">Because OSPF cannot advertise manually configured adjacency SIDs, only dynamically generated adjacency SIDs can be used.</p>
</li></ul>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0067.html">Configuring an SR-MPLS TE Policy (Dynamic Delivery by a Controller)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0200_4.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0167.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>