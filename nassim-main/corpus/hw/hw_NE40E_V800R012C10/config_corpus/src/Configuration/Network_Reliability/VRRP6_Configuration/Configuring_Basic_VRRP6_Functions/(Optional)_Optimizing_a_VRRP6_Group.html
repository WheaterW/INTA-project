
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Optimizing a VRRP6 Group">
<meta name="abstract" content="To optimize a VRRP6 group, enable the ping to a virtual IPv6 address, set the interval at which the master device in the VRRP6 group sends NA packets, and disable a device from checking the hop count in VRRP6 Advertisement packets.">
<meta name="description" content="To optimize a VRRP6 group, enable the ping to a virtual IPv6 address, set the interval at which the master device in the VRRP6 group sends NA packets, and disable a device from checking the hop count in VRRP6 Advertisement packets.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0103.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0105.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0107.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00604599">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VRRPv6">
<meta name="featuretype" content="Network Reliability">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VRRPv6">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="VRRPv6">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="VRRP6">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="jwx1168690">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361852">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>(Optional) Optimizing a VRRP6 Group</title>
</head>
<body><a name="EN-US_TASK_0172361852"></a><a name="EN-US_TASK_0172361852"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Optimizing a VRRP6 Group</h1>
<div class="taskbody"><p>To optimize a VRRP6 group, enable the ping to a virtual IPv6 address, set the interval at which the master device in the VRRP6 group sends NA packets, and disable a device from checking the hop count in VRRP6 Advertisement packets.</p>
<div class="context"><a name="EN-US_TASK_0172361852__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p><a href="#EN-US_TASK_0172361852__tab_dc_vrp_vrrp6_cfg_010601">Table 1</a> describes VRRP6 group optimization functions.</p>

<div class="tableBorder"><a name="EN-US_TASK_0172361852__tab_dc_vrp_vrrp6_cfg_010601"></a><a name="tab_dc_vrp_vrrp6_cfg_010601"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172361852__tab_dc_vrp_vrrp6_cfg_010601" frame="border" border="1" rules="all"><caption><b>Table 1 </b>VRRP6 group optimization functions</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="30.81%" id="mcps1.4.1.2.2.3.1.1" liSelected="liSelected"><p>Function Item</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="69.19%" id="mcps1.4.1.2.2.3.1.2" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="30.81%" headers="mcps1.4.1.2.2.3.1.1 "><p><a href="#EN-US_TASK_0172361852__step_01">Enabling a device to respond to ping packets destined for a virtual IPv6 address</a></p>
</td>
<td class="cellrowborder" valign="top" width="69.19%" headers="mcps1.4.1.2.2.3.1.2 "><p>Hosts can ping the virtual IPv6 address of a VRRP6 group configured on <span class="keyword">Router</span>s. This function can be used to monitor the connectivity of links between hosts and a gateway.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="30.81%" headers="mcps1.4.1.2.2.3.1.1 "><p><a href="#EN-US_TASK_0172361852__step_03">Disabling a device from checking TTL values in VRRP6 Advertisement packets</a></p>
</td>
<td class="cellrowborder" valign="top" width="69.19%" headers="mcps1.4.1.2.2.3.1.2 "><p>A VRRP6-enabled device checks the TTL value in every received VRRP6 Advertisement packet, and discards packets if their TTL value is not 255. On a network where devices of different vendors are deployed, a device with TTL check enabled may incorrectly discard valid packets. In this case, disable TTL check so that devices of different vendors can communicate.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="30.81%" headers="mcps1.4.1.2.2.3.1.1 "><p><a href="#EN-US_TASK_0172361852__step_06">Configuring a mode that the master device uses to send ND packets</a></p>
</td>
<td class="cellrowborder" valign="top" width="69.19%" headers="mcps1.4.1.2.2.3.1.2 "><p>A QinQ termination sub-interface sends ND packets with two tags and the inner tag is a range of VLAN IDs. To ensure that switches connected to users learn the correct MAC address of the VRRP6 group, the VRRP6 group on the QinQ termination sub-interface sends ND packets to all VLANs identified by inner VLAN IDs. This increases the burden on the VRRP6-enabled device. To release the burden, the VRRP6-enabled device can be configured to send ND packets carrying only the minimal inner VLAN ID.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="30.81%" headers="mcps1.4.1.2.2.3.1.1 "><p><a href="#EN-US_TASK_0172361852__step_05">Configuring a device to calculate the checksum of a VRRP6 packet based on the content excluding the IPv6 pseudo header</a></p>
</td>
<td class="cellrowborder" valign="top" width="69.19%" headers="mcps1.4.1.2.2.3.1.2 "><p>After receiving a VRRP6 packet, a Huawei device calculates the packet's checksum based on the content including the IPv6 pseudo header. However, a non-Huawei device may calculate the packet's checksum based on the content excluding the IPv6 pseudo header. As a result, VRRP negotiation between the Huawei and non-Huawei devices may fail. To resolve this issue, configure the Huawei device to calculate the checksum of a VRRP6 packet based on the content excluding the IPv6 pseudo header.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172361852__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li id="EN-US_TASK_0172361852__step_01"><span id="EN-US_TASK_0172361852__">Enable a device to respond to ping packets destined for a virtual IPv6 address.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=vrrp+virtual-ip+ping+enable"><b><span class="cmdname">vrrp virtual-ip ping enable</span></b></a></span></span><p><p>The device is enabled to respond to ping packets destined for a virtual IPv6 address.</p>
<p></p>
<p>After this function is enabled, hosts can ping a virtual IPv6 address, which may expose the device to ICMPv6 attacks. In this case, run the <span><a href="cmdqueryname=undo+vrrp+virtual-ip+ping+enable"><b><span class="cmdname">undo vrrp virtual-ip ping enable</span></b></a></span> command to disable the ping function.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172361852__step_03"><span id="EN-US_TASK_0172361852__">Disable a device from checking TTL values in VRRP6 Advertisement packets.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The view of the interface where a VRRP6 group resides is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vrrp6+un-check+hop-limit"><b><span class="cmdname">vrrp6 un-check hop-limit</span></b></a></span><p><p>The device is disabled from checking TTL values in VRRP6 Advertisement packets.</p>
</p><p><p>To enable a device to check TTL values in received VRRP6 Advertisement packets, run the <a href="cmdqueryname=undo+vrrp6+un-check+hop-limit"><b><span class="cmdname">undo <b><span class="cmdqueryname">vrrp6 un-check hop-limit</span></b></span></b></a> command.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172361852__step_06"><span id="EN-US_TASK_0172361852__">Configure a mode that the master device uses to send ND packets.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vrrp+gratuitous-arp+timeout"><b><span class="cmdname">vrrp gratuitous-arp timeout</span></b></a> <i><span class="varname">time</span></i></span><p><p>An interval at which the master device sends gratuitous ND packets is configured.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number.sub-interface-number</span></i></span></span><p><p>The view of an Ethernet sub-interface or Eth-Trunk sub-interface where a VRRP6 group resides is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=vrrp6+nd+send-mode+simple"><b><span class="cmdname">vrrp6 nd send-mode simple</span></b></a></span></span><p><p>The sub-interface for QinQ VLAN tag termination on the master device is configured to send ND packets only with the first VLAN ID specified in the inner tag and each VLAN ID in the outer tag.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172361852__step_05"><span id="EN-US_TASK_0172361852__">Configure a device to calculate the checksum of a VRRP6 packet based on the content excluding the IPv6 pseudo header.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=vrrp6+checksum+exclude+pseudo-header"><b><span class="cmdname">vrrp6 checksum exclude pseudo-header</span></b></a></span></span><p><p>The device is configured to calculate the checksum of a VRRP6 packet based on the content excluding the IPv6 pseudo header.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0103.html">Configuring Basic VRRP6 Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0105.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0107.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>