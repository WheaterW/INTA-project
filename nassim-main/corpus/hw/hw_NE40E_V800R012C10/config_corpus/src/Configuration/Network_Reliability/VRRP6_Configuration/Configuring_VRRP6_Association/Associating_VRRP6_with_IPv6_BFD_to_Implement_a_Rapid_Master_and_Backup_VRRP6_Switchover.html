
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Associating VRRP6 with IPv6 BFD to Implement a Rapid Master/Backup VRRP6 Switchover">
<meta name="abstract" content="You can associate a VRRP6 group with an IPv6 BFD session. If the status of the IPv6 BFD session changes, IPv6 BFD notifies the VRRP6 group of the change. After receiving the notification, the VRRP6 group rapidly performs a master/backup VRRP6 switchover.">
<meta name="description" content="You can associate a VRRP6 group with an IPv6 BFD session. If the status of the IPv6 BFD session changes, IPv6 BFD notifies the VRRP6 group of the change. After receiving the notification, the VRRP6 group rapidly performs a master/backup VRRP6 switchover.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0120.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0142.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0129.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00604599">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VRRPv6">
<meta name="featuretype" content="Network Reliability">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VRRPv6">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="VRRPv6">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="VRRP6">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00800033">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361859">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Associating VRRP6 with IPv6 BFD to Implement a Rapid Master/Backup VRRP6 Switchover</title>
</head>
<body><a name="EN-US_TASK_0172361859"></a><a name="EN-US_TASK_0172361859"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Associating VRRP6 with IPv6 BFD to Implement a Rapid Master/Backup VRRP6 Switchover</h1>
<div class="taskbody"><p>You can associate a VRRP6 group with an IPv6 BFD session. If the status of the IPv6 BFD session changes, IPv6 BFD notifies the VRRP6 group of the change. After receiving the notification, the VRRP6 group rapidly performs a master/backup VRRP6 switchover.</p>
<div class="context"><a name="EN-US_TASK_0172361859__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A VRRP6 group uses VRRP6 Advertisement packets to negotiate the master/backup VRRP6 status, implementing device backup. If a link between devices in a VRRP6 group fails, VRRP6 Advertisement packets cannot be sent to negotiate the master/backup status. A backup device preempts the master role only after a period of three times the interval at which VRRP6 Advertisement packets are sent. During this period, service traffic is still sent to the master device. As a result, the service traffic is lost.</p>
<div class="p">To resolve this issue, associate the VRRP6 group with an IPv6 BFD session. <a href="#EN-US_TASK_0172361859__tab_dc_vrp_vrrp6_cfg_012201">Table 1</a> describes VRRP6 and IPv6 BFD association modes.
<div class="tableBorder"><a name="EN-US_TASK_0172361859__tab_dc_vrp_vrrp6_cfg_012201"></a><a name="tab_dc_vrp_vrrp6_cfg_012201"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172361859__tab_dc_vrp_vrrp6_cfg_012201" frame="border" border="1" rules="all"><caption><b>Table 1 </b>VRRP6 and IPv6 BFD association modes</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="11.058894110588941%" id="mcps1.4.1.2.2.2.5.1.1" liSelected="liSelected"><p>Association Mode</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="29.647035296470353%" id="mcps1.4.1.2.2.2.5.1.2" liSelected="liSelected"><p>Usage Scenario</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="29.647035296470353%" id="mcps1.4.1.2.2.2.5.1.3" liSelected="liSelected"><p>VRRP6 Status Change</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="29.647035296470353%" id="mcps1.4.1.2.2.2.5.1.4" liSelected="liSelected"><p>Device Requirements</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="11.058894110588941%" headers="mcps1.4.1.2.2.2.5.1.1 "><p>Association between a VRRP6 group and a common IPv6 BFD session</p>
</td>
<td class="cellrowborder" valign="top" width="29.647035296470353%" headers="mcps1.4.1.2.2.2.5.1.2 "><p>A backup device monitors the status of the master device in a VRRP6 group. A common IPv6 BFD session is used to monitor the link between the master and backup devices.</p>
</td>
<td class="cellrowborder" valign="top" width="29.647035296470353%" headers="mcps1.4.1.2.2.2.5.1.3 "><p>If the common IPv6 BFD session goes down, IPv6 BFD notifies the VRRP6 group of the fault. After receiving the notification, the VRRP6 group changes VRRP6 priorities and determines whether to perform a master/backup VRRP6 switchover.</p>
</td>
<td class="cellrowborder" valign="top" width="29.647035296470353%" headers="mcps1.4.1.2.2.2.5.1.4 "><p>VRRP6-enabled devices must support IPv6 BFD.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.058894110588941%" headers="mcps1.4.1.2.2.2.5.1.1 "><p>Association between a VRRP6 group and link and peer IPv6 BFD sessions</p>
</td>
<td class="cellrowborder" valign="top" width="29.647035296470353%" headers="mcps1.4.1.2.2.2.5.1.2 "><p>The master and backup devices monitor both link and peer IPv6 BFD sessions. A link IPv6 BFD session is established between the master and backup devices. A peer IPv6 BFD session is established between a downstream switch and each VRRP6 device. IPv6 BFD helps the VRRP6 group detect faults in the link between a VRRP6 device and the downstream switch.</p>
</td>
<td class="cellrowborder" valign="top" width="29.647035296470353%" headers="mcps1.4.1.2.2.2.5.1.3 "><p>If the link or peer IPv6 BFD session goes down, IPv6 BFD notifies the VRRP6 group of the fault. After receiving the notification, the VRRP6 group immediately performs a master/backup VRRP6 switchover.</p>
</td>
<td class="cellrowborder" valign="top" width="29.647035296470353%" headers="mcps1.4.1.2.2.2.5.1.4 "><p>VRRP6-enabled devices and the downstream switch must support IPv6 BFD.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Perform the following steps on each device in a VRRP6 group:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172361859__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> }</span><p><p>The view of the interface where the VRRP6 group resides is displayed.</p>
</p></li><li><span>Run any of the following commands:</span><p><ul><li><p>To associate the VRRP6 group with a common IPv6 BFD session, run the <a href="cmdqueryname=vrrp6+vrid"><b><span class="cmdname">vrrp6 vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>bfd-session</span></strong> { <i><span class="varname">bfd-session-id</span></i> | <strong><span>session-name</span></strong> <i><span class="varname">bfd-configure-name</span></i> } [ <strong><span>increased</span></strong> <i><span class="varname">value-increased</span></i> | <strong><span>reduced</span></strong> <i><span class="varname">value-reduced</span></i> ] command.</p>
</li><li><p>To associate the VRRP6 group with a link or peer IPv6 BFD session, run the <a href="cmdqueryname=vrrp6+vrid"><b><span class="cmdname">vrrp6 vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>bfd-session</span></strong> { <i><span class="varname">bfd-session-id</span></i> | <strong><span>session-name</span></strong> <i><span class="varname">bfd-configure-name</span></i> } [ <strong><span>peer</span></strong> | <strong><span>link</span></strong> ] command.</p>
</li></ul>
<p>When associating a VRRP6 group with an IPv6 BFD session, note the following points:</p>
<ul><li><p>If the <strong><span>session-name</span></strong> <i><span class="varname">bfd-configure-name</span></i> parameter is specified, the VRRP6 group can be associated only with static IPv6 BFD sessions with automatically negotiated discriminators or static IPv6 BFD session discriminators.</p>
</li><li><p>If <i><span class="varname">bfd-session-id</span></i> is specified, the VRRP6 group can be associated only with static IPv6 BFD sessions.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>If a VRRP6 group is bound to an mVRRP6 group, the mVRRP6 group maintains the VRRP6 group's status. The VRRP6 group cannot track any IPv6 BFD sessions.</p>
</li><li><p>When a VRRP6 group is associated with a link IPv6 BFD session and a peer IPv6 BFD session, a backup device's status becomes Master if the backup device detects the peer IPv6 BFD session's status change before detecting the link IPv6 BFD session's status change. The backup device's status changes from Master to Initialize after it detects the peer IPv6 BFD session's status change. To prevent the preceding case, run the <a href="cmdqueryname=min-tx-interval"><b><span class="cmdname">min-tx-interval</span></b></a> command in the BFD session view to set the interval at which link BFD control packets are sent to be less than the interval at which peer BFD control packets are sent.</p>
</li></ul>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0120.html">Configuring VRRP6 Association
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0142.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0129.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>