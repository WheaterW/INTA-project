
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring a VRRP Group on VLANIF Interfaces">
<meta name="abstract" content="In this example, user packets are sent to Device C that is dual-homed to Device A and Device B. The three devices form a ring network. A VRRP group is configured on VLANIF interfaces of these Devices to implement device backup. Broadcasting VRRP packets on the ring network causes broadcast storms. A ring network protocol needs to be configured to prevent this problem. In this example, the Multiple Spanning Tree Protocol (MSTP) is used.">
<meta name="description" content="In this example, user packets are sent to Device C that is dual-homed to Device A and Device B. The three devices form a ring network. A VRRP group is configured on VLANIF interfaces of these Devices to implement device backup. Broadcasting VRRP packets on the ring network causes broadcast storms. A ring network protocol needs to be configured to prevent this problem. In this example, the Multiple Spanning Tree Protocol (MSTP) is used.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0120.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0123.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0124.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00604599">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00604599">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001163341708">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring a VRRP Group on VLANIF Interfaces</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001163341708"></a><a name="EN-US_TASK_0000001163341708"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring a VRRP Group on VLANIF Interfaces</h1>
<div class="taskbody"><p>In this example, user packets are sent to <span class="keyword" id="en-us_task_0172361802_keyword495011597214307">Device</span> C that is dual-homed to <span class="keyword" id="en-us_task_0172361802_keyword1233936343214307">Device</span> A and <span class="keyword" id="en-us_task_0172361802_keyword574854128214307">Device</span> B. The three devices form a ring network. A VRRP group is configured on VLANIF interfaces of these <span class="keyword" id="en-us_task_0172361802_keyword1078226992214307">Device</span>s to implement device backup. Broadcasting VRRP packets on the ring network causes broadcast storms. A ring network protocol needs to be configured to prevent this problem. In this example, the Multiple Spanning Tree Protocol (MSTP) is used.</p>
<div class="context"><a name="EN-US_TASK_0000001163341708__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_context940870315214023"><h4 class="sectiontitle">Networking Requirements</h4><div class="note" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_note153391322183419"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p18339152214349">The <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword201471219471">NE40E-M2K</span> is used as an example.</p>
</div></div>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1093750796214023">On the network shown in <a href="#EN-US_TASK_0000001163341708__en-us_task_0172361802_fig_dc_vrp_vrrp_cfg_013301">Figure 1</a>, <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1882865706214023">Device</span> C is dual-homed to two directly connected devices <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword725551264214023">Device</span> A and <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword968597760214023">Device</span> B, forming a ring network.</p>
<div class="p" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p877914801214023"><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword164442108214307">Device</span> A is the master device and periodically broadcasts VRRP packets through VLAN 10's member interfaces to inform <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword352014795214307">Device</span> B that <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1133807146214307">Device</span> A is working properly. VLAN 10's member interfaces include interface1 and Eth-Trunk1 members interface3 and interface2. The deployment causes broadcast storms on the ring network.<div class="note" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_note1009604020214023"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p165131725143919">Interfaces 1 through 5 in this example represent GE <span>0/1/1</span>, GE <span>0/1/2</span>, GE <span>0/2/1</span>, GE <span>0/2/2</span>, and GE <span>0/1/5</span>, respectively. To ensure link reliability, you are advised to deploy interface 2 and interface 3 on different boards.</p>
</div></div>
</div>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p630549821214023">A ring network protocol can be configured to break loops and prevent broadcast storms.</p>
<div class="fignone" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_fig_dc_vrp_vrrp_cfg_013301"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_fig_dc_vrp_vrrp_cfg_013301"></a><a name="en-us_task_0172361802_fig_dc_vrp_vrrp_cfg_013301"></a><span class="figcap"><b>Figure 1 </b>Network diagram for a VRRP group on VLANIF interfaces</span><br><span><img class="vsd" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_image715236446214023" src="images/fig_dc_vrp_vrrp_cfg_013301.png"></span><br></div>
<div class="note" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_note228103914214023"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p10516132593917">In this example, MSTP is used. For information about other ring network protocols, see <i><cite id="EN-US_TASK_0000001163341708__en-us_task_0172361802_cite859082895175019"><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword988366607214307">HUAWEI NE40E-M2 series</span> <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword771689764214307">Universal Service Router</span> Configuration Guide - LAN Access and MAN Access</cite></i>.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001163341708__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_context224805096214023"><div class="p" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_context224805096214023"><h4 class="sectiontitle">Precautions</h4><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p96037475170">To improve security, you are advised to configure a VRRP security policy. For details, see "Example for Configuring a VRRP Group."</p>
<h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p2134953886214023">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001163341708__en-us_task_0172361802_ol2044613797214023"><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li997249981214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1818049479214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li997249981214023"></a><a name="en-us_task_0172361802_li997249981214023"></a>Assign an IP address to each interface to ensure IP connectivity.</p>
</li><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li743689253214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p830449631214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li743689253214023"></a><a name="en-us_task_0172361802_li743689253214023"></a>Configure MSTP on each device to break loops and prevent broadcast storms.</p>
</li><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1216851910214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1143280989214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1216851910214023"></a><a name="en-us_task_0172361802_li1216851910214023"></a>Configure a VRRP group and set VRRP priority values on <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword693875732214307">Device</span> A and <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword71941555214307">Device</span> B to implement device backup.</p>
</li></ol>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001163341708__1.4.3"></a><a name="1.4.3"></a>
<div class="p" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_context1929335114214023"><h4 class="sectiontitle">Data Preparation</h4><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p936648962214023">To complete the configuration, you need the following data:</p>
<ul id="EN-US_TASK_0000001163341708__en-us_task_0172361802_ul1536854046214023"><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1953599947214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1276830246214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1953599947214023"></a><a name="en-us_task_0172361802_li1953599947214023"></a>IP address of VLANIF 10 (10.1.1.2) on <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword839617673214307">Device</span> A and that (10.1.1.3) on <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1272023780214307">Device</span> B</p>
</li><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1920103588214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p944240047214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1920103588214023"></a><a name="en-us_task_0172361802_li1920103588214023"></a>Multiple Spanning Tree (MST) region name (RG1) and multiple spanning tree instance (MSTI) name (MSTI1) on each device</p>
</li><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li348715222214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p373863491214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li348715222214023"></a><a name="en-us_task_0172361802_li348715222214023"></a>VRID (1), virtual IP address (10.1.1.1), VRRP priority value (130) on <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1361071290214307">Device</span> A, and VRRP priority value (default value 100) on <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2129801228214307">Device</span> B</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001163341708__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001163341708__en-us_task_0172361802_steps1524345318214023"><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_step1065391065214023"><span id="EN-US_TASK_0000001163341708__en-us_task_0172361802_cmd308980769214023">Configure interface attributes on each device.</span><p><ul id="EN-US_TASK_0000001163341708__en-us_task_0172361802_ul1646333758214023"><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li156222395214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1404776131214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li156222395214023"></a><a name="en-us_task_0172361802_li156222395214023"></a>Create a VLAN and add interfaces to the VLAN on each device.</p>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p232045804214023"># On <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword957508130214307">Device</span> C, create VLAN 10 and add GE <span>0/1/2</span> and GE <span>0/1/5</span> to VLAN 10.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen70741189214023">&lt;<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1141769128214023">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1792680981214023">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen186962992214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword928375402214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1736685959214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1602352428214023">sysname <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword440131154214023">Device</span>C</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1052394280214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1816169815214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword33522247214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b480969529214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen19156525214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1990737243214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword525622841214023">Device</span>C]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1938462954214023"> interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1976341814214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1779003076214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword289881151214023">Device</span>C-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b318410242214023"> undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2050439492214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1071760583214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2134771092214023">Device</span>C-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2087710362214023"> portswitch</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen646497597214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2038503292214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword170724406214023">Device</span>C-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b718231311214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen51768413214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1163296043214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword825472413214023">Device</span>C-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b261172697214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1904314087214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2005434149214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword575902578214023">Device</span>C]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b635799625214023"> interface gigabitethernet <span>0/1/5</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1072896365214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1629818027214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1197662304214023">Device</span>C-GigabitEthernet<span>0/1/5</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1566250501214023"> undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1244823227214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1951672952214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1102079986214023">Device</span>C-GigabitEthernet<span>0/1/5</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2081111678214023"> portswitch</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen6513753214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1421915309214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword932574547214023">Device</span>C-GigabitEthernet<span>0/1/5</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b21476893214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen3022476214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1734642381214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2043989442214023">Device</span>C-GigabitEthernet<span>0/1/5</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b479828367214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen179373769214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1772024565214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1113647359214023">Device</span>C]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b803886021214023"> vlan 10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen261028546214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1252126255214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1293710832214023">Device</span>C-vlan10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b726140101214023"> port gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2093450745214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1254052145214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1449889357214023">Device</span>C-vlan10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b154828260214023"> port gigabitethernet <span>0/1/5</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen606012101214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword759206472214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1782828077214023">Device</span>C-vlan10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1907211306214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1530896862214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword220748449214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1414923974214023">Device</span>C-vlan10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1998660583214023"> quit</strong></pre>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p723167543214023"># On <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword520198539214307">Device</span> A, create VLAN 10, add GE <span>0/1/1</span> to VLAN 10, configure VLANIF interface, and assign an IP address to the VLANIF interface.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1705454824214023">&lt;<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword702340691214023">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b244248935214023">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1430705107214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword558156748214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword731893540214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b875898381214023">sysname <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1449380324214023">Device</span>A</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2141439869214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1739143220214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword380179223214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b196296229214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1682562984214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword702067405214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1371719217214023">Device</span>A]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1627053616214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1602610931214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword252974460214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1871611807214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b408097712214023"> undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen821985598214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword958760853214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1323852930214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2129755900214023"> portswitch</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen796412240214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1073193072214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword440809951214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b385085084214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen421519636214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1242002644214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword797388868214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1079088821214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1555544897214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword233580408214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword185810540214023">Device</span>A]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b956247231214023"> vlan 10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1468379204214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1394969052214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1165882665214023">Device</span>A-vlan10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2122916563214023"> port gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1242936808214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1129677966214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword594651435214023">Device</span>A-vlan10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1022330617214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen238839757214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword765430402214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1161720884214023">Device</span>A-vlan10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1119018951214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1513602580214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1075867475214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword292344585214023">Device</span>A]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b185825745214023"> interface vlanif10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1025114276214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword985744916214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1725950254214023">Device</span>A-vlanif10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1838881580214023"> ip address 10.1.1.2 255.255.255.0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1482645915214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword555341127214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword654391627214023">Device</span>A-vlanif10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b418733254214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen114140084214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword403373018214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2031923594214023">Device</span>A-vlanif10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b495366361214023"> quit</strong></pre>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p958785324214023"># On <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2112928024214307">Device</span> B, create VLAN 10, add GE <span>0/1/1</span> to VLAN 10, configure VLANIF interface, and assign an IP address to the VLANIF interface.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen872639590214023">&lt;<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1105437503214023">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1333132099214023">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1299477842214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword166934331214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1051658135214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2063017367214023">sysname <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword764758956214023">Device</span>B</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1148725497214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword126786036214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword589129228214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1249000287214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen305285918214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword869679384214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword927705406214023">Device</span>B]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b330063995214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen616230818214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1686577896214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1678041319214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b713713718214023"> undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1789187801214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1967686614214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1808241345214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b931332253214023"> portswitch</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1258450549214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1509709454214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1167504073214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b220362675214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1844283429214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2061056407214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1263806339214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b232017294214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1425333679214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1077224438214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1623985256214023">Device</span>B]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1184022828214023"> vlan 10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1945913451214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword563876602214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword228715603214023">Device</span>B-vlan10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1143428779214023"> port gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2068817977214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1643683493214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword158831843214023">Device</span>B-vlan10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b676291224214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1601152179214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword228215219214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword207392191214023">Device</span>B-vlan10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b176748789214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1636475293214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword842156977214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword67595062214023">Device</span>B]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2029114750214023"> interface vlanif10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen222637648214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1664980191214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1610149727214023">Device</span>B-vlanif10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1436458172214023"> ip address 10.1.1.3 255.255.255.0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1514095918214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword193953866214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2049933363214023">Device</span>B-vlanif10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b880258487214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen803652925214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword406488309214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword703528256214023">Device</span>B-vlanif10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1482749894214023"> quit</strong></pre>
</li><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li838638245214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1057808454214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li838638245214023"></a><a name="en-us_task_0172361802_li838638245214023"></a>Configure an Eth-Trunk between <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1876522470214307">Device</span> A and <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword224951125214307">Device</span> B.</p>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p813499422214023"># Configure <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword338396889214307">Device</span> A.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen472338477214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1115600147214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword211948672214023">Device</span>A]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1105441755214023"> interface eth-trunk 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen802729134214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1641620908214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2000187747214023">Device</span>A-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b239322019214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen71332548214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1259576977214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1963943960214023">Device</span>A-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1150043972214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen739295748214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1021273683214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1857483357214023">Device</span>A]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b628188849214023"> interface gigabitethernet <span>0/2/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1391509438214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1406301831214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword509854735214023">Device</span>A-GigabitEthernet<span>0/2/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1008340803214023"> undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1978099001214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword686651000214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2113721669214023">Device</span>A-GigabitEthernet<span>0/2/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b722206068214023"> eth-trunk 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1649896896214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword781932268214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1483192283214023">Device</span>A-GigabitEthernet<span>0/2/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b570783822214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen974490951214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword558497351214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword13957220214023">Device</span>A-GigabitEthernet<span>0/2/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1705713200214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1148049373214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword437160752214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword819202477214023">Device</span>A]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1859684366214023"> interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1186476330214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword284372786214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1302299727214023">Device</span>A-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1272216539214023"> undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1243853008214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword961093561214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1874970640214023">Device</span>A-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b834499563214023"> eth-trunk 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1553615965214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1417362356214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1720504768214023">Device</span>A-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1756906858214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen160803268214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword427161950214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword273061729214023">Device</span>A-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b62481376214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2145725957214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword741222531214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword174442270214023">Device</span>A]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b761224980214023"> interface eth-trunk 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen318957070214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1074654601214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1382407737214023">Device</span>A-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b79413681214023"> portswitch</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2033767916214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword573757633214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword942962801214023">Device</span>A-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b311008522214023"> port link-type trunk</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen166548647214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1384304423214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword166605763214023">Device</span>A-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1195986396214023"> port trunk allow-pass vlan 10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen384736569214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword652943822214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword385380184214023">Device</span>A-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2142257584214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen498824288214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1107263491214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1831691982214023">Device</span>A-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1872288501214023"> quit</strong></pre>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p402490613214023"># Configure <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword988693494214307">Device</span> B.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1611471670214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword273104737214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword898761120214023">Device</span>B]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1704833177214023"> interface eth-trunk 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen549040778214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1156469699214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2059225743214023">Device</span>B-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1120316654214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1475563668214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword328859825214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1671655044214023">Device</span>B-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b56107827214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen990203470214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword548656452214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2121692193214023">Device</span>B]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b403391451214023"> interface gigabitethernet <span>0/2/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen651926554214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2029278474214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1895514511214023">Device</span>B-GigabitEthernet<span>0/2/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1144528178214023"> undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen3539187214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1781992771214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1145561135214023">Device</span>B-GigabitEthernet<span>0/2/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1490624875214023"> eth-trunk 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen18648022214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1217891885214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1442271638214023">Device</span>B-GigabitEthernet<span>0/2/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b81924985214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen688401808214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword382416595214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2004640341214023">Device</span>B-GigabitEthernet<span>0/2/1</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1844083646214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2031144953214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1107619139214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1366616977214023">Device</span>B]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b844992495214023"> interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen938149713214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword419116251214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword340468397214023">Device</span>B-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b429100101214023"> undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen381284083214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2001487859214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword822599605214023">Device</span>B-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b758979291214023"> eth-trunk 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen396443780214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2027903181214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword255801530214023">Device</span>B-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1032338705214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1868913342214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword510956789214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2011132017214023">Device</span>B-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1959627478214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen87383614214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword656091077214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1741687441214023">Device</span>B]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1344048498214023"> interface eth-trunk 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1254269600214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1973996744214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword488413905214023">Device</span>B-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1636525397214023"> portswitch</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2064799143214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword494190143214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1534470452214023">Device</span>B-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b487746245214023"> port link-type trunk</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen520624891214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1319450497214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1088364157214023">Device</span>B-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1945795682214023"> port trunk allow-pass vlan 10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen405452798214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword526945194214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword145315330214023">Device</span>B-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b196482491214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen590557075214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword897214238214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1997012479214023">Device</span>B-Eth-Trunk1]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b820255483214023"> quit</strong></pre>
</li></ul>
</p></li><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_step1396067381214023"><span id="EN-US_TASK_0000001163341708__en-us_task_0172361802_cmd298145345214023">Configure MSTP on each device.</span><p><ul id="EN-US_TASK_0000001163341708__en-us_task_0172361802_ul470368225214023"><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1995714860214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p432569527214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1995714860214023"></a><a name="en-us_task_0172361802_li1995714860214023"></a>Configure an MSTI named MSTI1 in an MST region named RG1 on each device.</p>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1015153423214023"># Configure <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword997797246214307">Device</span> C.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen819245937214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1069996007214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword394829671214023">Device</span>C] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1324211492214023">stp region-configuration</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1484860558214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1074488311214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword735055354214023">Device</span>C-mst-region] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b919020061214023">region-name RG1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen178536887214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword468036354214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword54402717214023">Device</span>C-mst-region] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b135632122214023">instance 1 vlan 10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen706616775214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1392336846214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2023553010214023">Device</span>C-mst-region] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b270253001214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2127282042214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1205507280214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1600129162214023">Device</span>C-mst-region] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1530851188214023">quit</strong></pre>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p527976799214023"># Configure <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2080723103214307">Device</span> A.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1103528426214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword663893938214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1887869801214023">Device</span>A] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1988182050214023">stp region-configuration</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen607621807214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1117408427214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword538939574214023">Device</span>A-mst-region] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1088302333214023">region-name RG1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1533018910214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1295034938214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword905440621214023">Device</span>A-mst-region] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1248364197214023">instance 1 vlan 10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen580893998214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1379888885214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1116586242214023">Device</span>A-mst-region] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1167737510214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen423501967214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword28905519214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword483753611214023">Device</span>A-mst-region] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2141491426214023">quit</strong></pre>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1081461959214023"># Configure <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword37386189214307">Device</span> B.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen355498532214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1261480438214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1743158282214023">Device</span>B] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1713094170214023">stp region-configuration</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen5912484214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword145581911214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword811304244214023">Device</span>B-mst-region] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1646956001214023">region-name RG1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1161046246214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword280818869214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1701158824214023">Device</span>B-mst-region] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2124268980214023">instance 1 vlan 10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen108103999214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1971156031214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2136674395214023">Device</span>B-mst-region] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1933675674214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen309680439214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2098659998214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1907168058214023">Device</span>B-mst-region] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2075795893214023">quit</strong></pre>
</li><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1162629861214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p366369774214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1162629861214023"></a><a name="en-us_task_0172361802_li1162629861214023"></a>Set a Spanning Tree Protocol (STP) priority value for <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1003747989214307">Device</span> A to allow <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword700533131214307">Device</span> A to function as MSTI1's root bridge in RG1.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1310494059214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1923329308214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1471824912214023">Device</span>A] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b984600417214023">stp instance 1 priority 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen122447666214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword319831569214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword257611742214023">Device</span>A] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1594266092214023">commit</strong></pre>
</li><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li236816948214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p895247145214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li236816948214023"></a><a name="en-us_task_0172361802_li236816948214023"></a>Enable MSTP on each device and interface.</p>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p633044742214023"># Configure <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1020614553214307">Device</span> C.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen927167298214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1326277057214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2005724786214023">Device</span>C] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2092433867214023">stp enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1505454949214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword302028843214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1694906440214023">Device</span>C] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b487925692214023">interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1526634413214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2124421726214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1092833860214023">Device</span>C-GigabitEthernet<span>0/1/2</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b127586962214023">stp enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1669424156214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2046577924214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword589594669214023">Device</span>C-GigabitEthernet<span>0/1/2</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1542349418214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2120897272214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword81078736214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1185683754214023">Device</span>C-GigabitEthernet<span>0/1/2</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b411437662214023">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen39246638214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2049935357214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1183396278214023">Device</span>C] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1943420006214023">interface gigabitethernet <span>0/1/5</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1704894585214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1563714551214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword445586671214023">Device</span>C-GigabitEthernet<span>0/1/5</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b939482423214023">stp enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1977408294214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword534104495214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword212603005214023">Device</span>C-GigabitEthernet<span>0/1/5</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b623998078214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2116789500214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1706559724214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword357691936214023">Device</span>C-GigabitEthernet<span>0/1/5</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1362264797214023">quit</strong></pre>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p564099647214023"># Configure <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1857154794214307">Device</span> A.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1104925807214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1535629031214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword858654371214023">Device</span>A] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1590859467214023">stp enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1150613938214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword883084398214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword739992769214023">Device</span>A] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b163631717214023">interface eth-trunk 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen266821695214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1264675710214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1759003611214023">Device</span>A-Eth-Trunk1] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b701759871214023">stp enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen513192052214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword886336839214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1716677481214023">Device</span>A-Eth-Trunk1] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1730704943214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen280600107214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword918083144214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword553397513214023">Device</span>A-Eth-Trunk1] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1769417189214023">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen737786780214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword348899093214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1316699741214023">Device</span>A] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1245153672214023">interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1103567629214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2115396553214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1878090186214023">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1230584171214023">stp enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2098804186214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword798989494214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword401180967214023">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b944306445214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen224705098214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1235690885214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2089837705214023">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b207980557214023">quit</strong></pre>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p954693299214023"># Configure <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword468008701214307">Device</span> B.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1144142813214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2022758379214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1833943843214023">Device</span>B] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1475317255214023">stp enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1142778199214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1362988699214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword543001544214023">Device</span>B] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b120439822214023">interface eth-trunk 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1697020289214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword535017096214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword518302483214023">Device</span>B-Eth-Trunk1] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b435791053214023">stp enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen438519020214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2039054793214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword849867125214023">Device</span>B-Eth-Trunk1] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1799788398214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2144590054214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword380090542214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1565373216214023">Device</span>B-Eth-Trunk1] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b968933474214023">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen59773224214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword9325131916317">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1232617198317">Device</span>B] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b905591215214023">interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1690212668214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1804487087214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1250408275214023">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b616161710214023">stp enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1013421234214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1240554277214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword77004816214023">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b36809885214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1835463535214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1312836204214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1591091350214023">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1245023021214023">quit</strong></pre>
</li><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1981995593214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1781082934214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1981995593214023"></a><a name="en-us_task_0172361802_li1981995593214023"></a>Verify the MSTP configuration.</p>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1369881843214023"># Run the <a href="cmdqueryname=display+stp+brief"><b><span class="cmdname" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_cmdname24669958214023">display stp brief</span></b></a> command on <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1386639038214023">Device</span> C to view the role that GE <span>0/1/2</span> plays. GE <span>0/1/2</span> directly connecting <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword796145725214023">Device</span> C to <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1560243573112">Device</span> A is a root interface in MSTI1 after <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1542184216314">Device</span> A has been configured as the root bridge.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen310499460214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword403828976214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1105275112214023">Device</span>C] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1121352267214023">display stp brief</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1998244671214023"> MSTID  Port                        Role  STP State     Protection
   0    GigabitEthernet<span>0/1/2</span>        ALTE  DISCARDING      NONE
   0    GigabitEthernet<span>0/1/5</span>        ROOT  FORWARDING      NONE
   1    GigabitEthernet<span>0/1/2</span>        <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1743847244214023">ROOT</strong>  FORWARDING      NONE
   1    GigabitEthernet<span>0/1/5</span>        ALTE  DISCARDING      NONE    </pre>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1735399256214023"># Run the <a href="cmdqueryname=display+stp+brief"><b><span class="cmdname" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_cmdname1512377689214023">display stp brief</span></b></a> command on <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1459293131214023">Device</span> A to view the role that GE <span>0/1/1</span> and Eth-Trunk 1 play. GE <span>0/1/1</span> and Eth-Trunk 1 on <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword627775669214023">Device</span> A are designated interfaces in MSTI1 after Device A has been configured as the root bridge.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen870120931214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1462033865214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword895280081214023">Device</span>A] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1338687002214023">display stp brief</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen556383729214023"> MSTID  Port                        Role  STP State     Protection
   0    Eth-Trunk1                  ROOT  FORWARDING      NONE
   0    GigabitEthernet<span>0/1/1</span>        DESI  FORWARDING      NONE
   1    Eth-Trunk1                  <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b516278736214023">DESI</strong>  FORWARDING      NONE
   1    GigabitEthernet<span>0/1/1</span>        <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1961439915214023">DESI</strong>  FORWARDING      NONE</pre>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p409750251214023"># Run the <a href="cmdqueryname=display+stp+brief"><b><span class="cmdname" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_cmdname1453452276214023">display stp brief</span></b></a> command on <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1519660772214023">Device</span> B to view the role that Eth-Trunk 1 plays. Eth-Trunk 1 on <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2923552342">Device</span> B is a root interface in MSTI1 after <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword648721223214023">Device</span> A has been configured as the root bridge.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen304606919214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword812531791214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword373300064214023">Device</span>B] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1572521528214023">display stp brief</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1289847531214023"> MSTID  Port                        Role  STP State     Protection
   0    Eth-Trunk1                  DESI  FORWARDING      NONE
   0    GigabitEthernet<span>0/1/1</span>        DESI  FORWARDING      NONE
   1    Eth-Trunk1                  <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1661674095214023">ROOT</strong>  FORWARDING      NONE
   1    GigabitEthernet<span>0/1/1</span>        DESI  FORWARDING      NONE</pre>
</li></ul>
</p></li><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_step1300408483214023"><span id="EN-US_TASK_0000001163341708__en-us_task_0172361802_cmd1024298262214023">Configure VRRP on <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1013764078214307">Device</span> A and <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1114793674214307">Device</span> B.</span><p><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1334320033214023"># On <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1680926523214307">Device</span> A, create VRRP group 1 and set a higher priority for <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword351223541214023">Device</span> A so that it becomes the master device.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1561114660214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword889640197214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1401640565214023">Device</span>A]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1485710432214023"> interface vlanif10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen99875160214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1367613861214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword968687986214023">Device</span>A-vlanif10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b170291989214023"> vrrp vrid 1 virtual-ip 10.1.1.1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1227416604214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword473212141214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1144508946214023">Device</span>A-vlanif10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b573177329214023"> vrrp vrid 1 priority 130</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen151328655214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1205555003214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword254725976214023">Device</span>A-vlanif10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b999974147214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1066718214214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword948304448214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1676713149214023">Device</span>A-vlanif10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2083108815214023"> quit</strong></pre>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p2118776260214023"># Configure <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword203799582314">Device</span> B. The VRRP group uses the default priority 100.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen354919963214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1934613045214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2139031735214023">Device</span>B]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b407891574214023"> interface vlanif10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen958195641214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword484393664214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword93805071214023">Device</span>B-vlanif10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1193899262214023"> vrrp vrid 1 virtual-ip 10.1.1.1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen406386642214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword42109458214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1211540743214023">Device</span>B-vlanif10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1244570324214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1304776207214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword624080271214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword606982749214023">Device</span>B-vlanif10]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b525099805214023"> quit</strong></pre>
</p></li><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_step1795784872214023"><span id="EN-US_TASK_0000001163341708__en-us_task_0172361802_cmd1021168766214023">Verify the VRRP configuration.</span><p><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p519703745214023"># After completing the configuration, run the <a href="cmdqueryname=display+vrrp"><b><span class="cmdname" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_cmdname293907517214023">display vrrp</span></b></a> command on each device to view information about the VRRP group. <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword9689057133520">Device</span> A is in the <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1904302945214023">Master</strong> state and <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword186923571357">Device</span> B is in the <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b437030157214023">Backup</strong> state in VRRP group 1.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1264719597214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword881964207214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1240295455214023">Device</span>A]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1706652455214023"> display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen128429312214023">Vlanif10 | Virtual Router 1
State          : <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1359848059214023">Master</strong>
Virtual IP     : 10.1.1.1
Master IP      : 10.1.1.2
Local IP       : 10.1.1.2
PriorityRun    : 130
PriorityConfig : 130
MasterPriority : 130
Preempt        : YES   Delay Time : 0s
Hold Multiplier: 4
TimerRun       : 1s
TimerConfig    : 1s
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0101
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Create Time       : 2013-03-11 12:57:42
Last Change Time  : 2013-03-11 12:57:47
</pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen15383417214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1387841333214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1629393664214023">Device</span>B]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1239204150214023"> display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2037602066214023">Vlanif10 | Virtual Router 1
State          : <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1884601238214023">Backup</strong>
Virtual IP     : 10.1.1.1
Master IP      : 10.1.1.2
Local IP       : 10.1.1.3
PriorityRun    : 100
PriorityConfig : 100
MasterPriority : 130
Preempt        : YES   Delay Time : 0s
Hold Multiplier: 4
TimerRun       : 1s
TimerConfig    : 1s
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0102
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Create Time       : 2013-03-11 12:58:02
Last Change Time  : 2013-03-11 12:58:07
</pre>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1654923056214023"># Run the <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2056339829214023">shutdown</strong> command on VLANIF 10 of <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1825239041214307">Device</span> A to simulate a link failure.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen73067124214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1883219587214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1657609223214023">Device</span>A] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1716123777214023">interface vlanif10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1731894598214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1541932054214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1566863229214023">Device</span>A-Vlanif10] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b999695240214023">shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1475002860214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1523090529214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword577448663214023">Device</span>A-Vlanif10] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1926826694214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen996366719214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword851957553214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1577118722214023">Device</span>A-Vlanif10] <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b710939702214023">quit</strong></pre>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1941844353214023"># Run the <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1456541578214023">display vrrp</strong> command on <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword253517939214307">Device</span> A. <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword2041557175214307">Device</span> A's status has successfully changed to <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b359297570214307">Initialize</strong> in VRRP group 1.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen2052789289214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1286434747214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword243434833214023">Device</span>A]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1051882704214023"> display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen580277668214023">Vlanif10 | Virtual Router 1
State          : <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b2056418652214023">Initialize</strong>
Virtual IP     : 10.1.1.1
Master IP      : 0.0.0.0
Local IP       : 10.1.1.2
PriorityRun    : 130
PriorityConfig : 130
MasterPriority : 0
Preempt        : YES   Delay Time : 0s
Hold Multiplier: 4
TimerRun       : 1s
TimerConfig    : 1s
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0101
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Create Time       : 2013-03-11 12:57:42
Last Change Time  : 2013-03-11 13:05:31
</pre>
<p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p636803667214023"># Run the <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1887393891214023">display vrrp</strong> command on <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword233221553214307">Device</span> B. <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword491632488214307">Device</span> B's status has successfully changed to <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b109181762214307">Master</strong> in VRRP group 1.</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen929237305214023">[<span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1631694052214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword515759774214023">Device</span>B]<strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b1900908073214023"> display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen828731956214023">Vlanif10 | Virtual Router 1
State          : <strong id="EN-US_TASK_0000001163341708__en-us_task_0172361802_b978822548214023">Master</strong>
Virtual IP     : 10.1.1.1
Master IP      : 10.1.1.3
Local IP       : 10.1.1.3
PriorityRun    : 100
PriorityConfig : 100
MasterPriority : 100
Preempt        : YES   Delay Time : 0s
Hold Multiplier: 4
TimerRun       : 1s
TimerConfig    : 1s
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0102
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Create Time       : 2013-03-11 12:58:02
Last Change Time  : 2013-03-11 13:05:31
</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_example2110454074214023"><a name="EN-US_TASK_0000001163341708__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul id="EN-US_TASK_0000001163341708__en-us_task_0172361802_ul1208153892214023"><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1482274278214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1773485146214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li1482274278214023"></a><a name="en-us_task_0172361802_li1482274278214023"></a><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword259639713214307">Device</span> A configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen325205353214023">#
sysname <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1773687473214023">Device</span>A
#
vlan batch 10
#
interface Vlanif10
 ip address 10.1.1.2 255.255.255.0
 vrrp vrid 1 virtual-ip 10.1.1.1
 vrrp vrid 1 priority 130
#
interface Eth-Trunk1
 portswitch
 port link-type trunk
 port trunk allow-pass vlan 10
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 portswitch
 port default vlan 10
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 eth-trunk 1
#
interface GigabitEthernet<span>0/2/1</span>
 undo shutdown
 eth-trunk 1
#
stp region-configuration
region-name RG1
instance 1 vlan 10
#
stp instance 1 priority 0
stp enable
#
return</pre>
</li><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li259349176214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p1637281269214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li259349176214023"></a><a name="en-us_task_0172361802_li259349176214023"></a><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword357033128214307">Device</span> B configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1689291957214023">#
sysname <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1185025924214023">Device</span>B
#
vlan batch 10
#
interface Vlanif10
 ip address 10.1.1.3 255.255.255.0
 vrrp vrid 1 virtual-ip 10.1.1.1
#
interface Eth-Trunk1
 portswitch
 port link-type trunk
 port trunk allow-pass vlan 10
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 portswitch
 port default vlan 10
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 eth-trunk 1
#
interface GigabitEthernet<span>0/2/1</span>
 undo shutdown
 eth-trunk 1
#
stp enable
#
stp region-configuration
region-name RG1
instance 1 vlan 10
#
return</pre>
</li><li id="EN-US_TASK_0000001163341708__en-us_task_0172361802_li92305360214023"><p id="EN-US_TASK_0000001163341708__en-us_task_0172361802_p892992386214023"><a name="EN-US_TASK_0000001163341708__en-us_task_0172361802_li92305360214023"></a><a name="en-us_task_0172361802_li92305360214023"></a><span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword111661057191018">Device</span> C configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_screen1162307225214023">#
sysname <span class="keyword" id="EN-US_TASK_0000001163341708__en-us_task_0172361802_keyword1115234338214023">Device</span>C
#
vlan batch 10
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 portswitch
 port default vlan 10
#
interface GigabitEthernet<span>0/1/5</span>
 undo shutdown
 portswitch
 port default vlan 10
#
stp region-configuration
region-name RG1
instance 1 vlan 10
#
stp enable
# 
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0120.html">Configuration Examples for VRRP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0123.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0124.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>