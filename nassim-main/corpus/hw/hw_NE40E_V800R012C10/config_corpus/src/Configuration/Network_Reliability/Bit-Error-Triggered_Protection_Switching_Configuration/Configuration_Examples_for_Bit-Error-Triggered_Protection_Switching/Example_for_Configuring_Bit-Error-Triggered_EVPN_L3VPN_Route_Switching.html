
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Bit-Error-Triggered EVPN L3VPN Route Switching">
<meta name="abstract" content="This section provides an example for configuring bit-error-triggered EVPN L3VPN route switching.">
<meta name="description" content="This section provides an example for configuring bit-error-triggered EVPN L3VPN route switching.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000010.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000019.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_ngmvpn_0002.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,m00390128,q00824768,z00545680">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00604599">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362308">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring Bit-Error-Triggered EVPN L3VPN Route Switching</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172362308"></a><a name="EN-US_TASK_0172362308"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Bit-Error-Triggered EVPN L3VPN Route Switching</h1>
<div class="taskbody"><p>This section provides an example for configuring bit-error-triggered EVPN L3VPN route switching.</p>
<div class="context"><a name="EN-US_TASK_0172362308__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On an IP RAN, if RSVP-TE tunnels carry EVPN L3VPN services, you can configure the RSVP-TE tunnels to work in TE hot standby mode and VPN FRR to protect the EVPN L3VPN services. However, these protection mechanisms cannot trigger protection switching based on random bit errors caused by optical fiber aging or optical signal jitter. As a result, random bit errors may degrade services on the IP RAN or even interrupt services in extreme cases.</p>
<p>To resolve this problem, configure bit-error-triggered RSVP-TE tunnel switching and EVPN L3VPN route switching. If a bit error event occurs, the system first attempts to perform bit-error-triggered RSVP-TE tunnel switching. If the primary and backup CR-LSPs of the RSVP-TE tunnel are both in the excessive BER state, bit-error-triggered RSVP-TE tunnel switching cannot protect services against bit errors. In this situation, the system performs bit-error-triggered EVPN L3VPN route switching to trigger EVPN route convergence and divert traffic from the link that has encountered the bit error event.</p>
<p>On the EVPN L3VPN HVPN shown in <a href="#EN-US_TASK_0172362308__fig_dc_vrp_cfg_error-code_evpn_000201">Figure 1</a>, RSVP-TE tunnels are established between the UPE and SPEs to carry EVPN L3VPN services, and the tunnels work in TE hot standby mode. VPN FRR is configured on the UPE to protect the EVPN L3VPN services. If GE <span>0/1/1</span> on the UPE and GE <span>0/1/2</span> on SPE2 both encounter a bit error event, the primary and backup CR-LSPs of the RSVP-TE tunnel that carries the primary EVPN route both enter the excessive BER state. As a result, bit-error-triggered RSVP-TE tunnel switching cannot protect services against bit errors. To resolve this problem, configure bit-error-triggered EVPN L3VPN route switching.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, and interface3 represent GE<span>0/1/0</span>, GE<span>0/1/1</span>, and GE<span>0/1/2</span>, respectively.</p>
</div></div>
<div class="fignone" id="EN-US_TASK_0172362308__fig_dc_vrp_cfg_error-code_evpn_000201"><a name="EN-US_TASK_0172362308__fig_dc_vrp_cfg_error-code_evpn_000201"></a><a name="fig_dc_vrp_cfg_error-code_evpn_000201"></a><span class="figcap"><b>Figure 1 </b>Configuring bit-error-triggered EVPN L3VPN route switching</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfg_error-code_evpn_000201.png"></span></div>

<div class="tableBorder"><a name="EN-US_TASK_0172362308__tab_01"></a><a name="tab_01"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172362308__tab_01" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Interface IP address list</caption><thead align="left"><tr><th align="left" class="cellrowborder" char="." valign="top" width="33.33333333333333%" id="mcps1.4.1.7.2.4.1.1" liSelected="liSelected"><p>Device</p>
</th>
<th align="left" class="cellrowborder" char="." valign="top" width="33.33333333333333%" id="mcps1.4.1.7.2.4.1.2" liSelected="liSelected"><p>Interface</p>
</th>
<th align="left" class="cellrowborder" char="." valign="top" width="33.33333333333333%" id="mcps1.4.1.7.2.4.1.3" liSelected="liSelected"><p>IP Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="4" char="." valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.2.4.1.1 "><p>UPE</p>
</td>
<td class="cellrowborder" char="." valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.2.4.1.2 "><p>Loopback 0</p>
</td>
<td class="cellrowborder" char="." valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.2.4.1.3 "><p>1.1.1.1/32</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.2 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.3 "><p>10.2.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.2 "><p>GE <span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.3 "><p>10.1.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.2 "><p>GE <span>0/1/2</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.3 "><p>10.1.2.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" char="." valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.2.4.1.1 "><p>SPE1</p>
</td>
<td class="cellrowborder" char="." valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.2.4.1.2 "><p>Loopback 0</p>
</td>
<td class="cellrowborder" char="." valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.2.4.1.3 "><p>2.2.2.2/32</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.2 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.3 "><p>10.1.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.2 "><p>GE <span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.3 "><p>10.1.4.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.2 "><p>GE <span>0/1/2</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.3 "><p>10.1.3.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" char="." valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.2.4.1.1 "><p>SPE2</p>
</td>
<td class="cellrowborder" char="." valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.2.4.1.2 "><p>Loopback 0</p>
</td>
<td class="cellrowborder" char="." valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.2.4.1.3 "><p>3.3.3.3/32</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.2 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.3 "><p>10.1.5.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.2 "><p>GE <span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.3 "><p>10.1.2.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.2 "><p>GE <span>0/1/2</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.3 "><p>10.1.3.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" char="." valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.2.4.1.1 "><p>NPE</p>
</td>
<td class="cellrowborder" char="." valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.2.4.1.2 "><p>Loopback 0</p>
</td>
<td class="cellrowborder" char="." valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.2.4.1.3 "><p>4.4.4.4/32</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.2 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.3 "><p>10.1.4.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.2 "><p>GE <span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.3 "><p>10.1.5.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.2 "><p>GE <span>0/1/2</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.7.2.4.1.3 "><p>10.3.1.1/24</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362308__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure an IP address for each interface and routing protocols, so that all devices can communicate at the network layer. This example uses OSPF and IS-IS as the routing protocols.</p>
</li><li><p>Configure BFD on each device on the network.</p>
</li><li><p>Configure MPLS functions and public network tunnels to carry EVPN L3VPN services. In this example, RSVP-TE tunnels are established between the UPE and SPEs, and LDP LSPs are established between the NPE and SPEs.</p>
</li><li><p>Create an L3VPN instance on the UPE and NPE and import the local direct routes on the UPE and NPE to their respective VPN instance routing tables.</p>
</li><li><p>Establish BGP-EVPN peer relationships between the UPE and SPEs, and between the NPE and SPEs.</p>
</li><li><p>Configure the SPEs as RRs and the UPE as an RR client.</p>
</li><li><p>Bind the VPN instance on the UPE to the TE tunnels.</p>
</li><li><p>Configure VPN FRR on the UPE and EVPN FRR on the SPEs.</p>
</li><li><p>Configure bit-error-triggered RSVP-TE tunnel switching.</p>
</li><li><p>Configure bit-error-triggered EVPN L3VPN route switching.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362308__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>IP address of each interface as listed in <a href="#EN-US_TASK_0172362308__tab_01">Table 1</a>.</p>
</li><li><p>OSPF between the UPE and SPEs and IS-IS between the SPEs and NPE, OSPF and IS-IS process IDs (both 1), OSPF area ID (0), IS-IS network entity names (10.0000.0000.0021.00, 10.0000.0000.0022.00, and 10.0000.0000.0003.00).</p>
</li><li><p>LSR IDs of the UPE, SPE1, SPE2, and NPE (1.1.1.1, 2.2.2.2, 3.3.3.3, and 4.4.4.4, respectively)</p>
</li><li><p>Tunnel interface names (Tunnel11), tunnel IDs (20), and tunnel interface addresses (loopback interface addresses) for the bidirectional tunnels between the UPE and SPE1</p>
</li><li>Tunnel interface names (Tunnel12), tunnel IDs (200), and tunnel interface addresses (loopback interface addresses) for the bidirectional tunnels between the UPE and SPE2</li><li>Tunnel policy names (policy1) for the unidirectional tunnels between the UPE and SPEs and tunnel selector names (BindTE) on the SPEs</li><li><p>Names (vpna), RDs (20:1), and VPN targets (1:1) of the VPN instances on the UPE and NPE</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362308__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IP address to each interface and configure an IGP.</span><p><p>Assign an IP address to each interface according to <a href="#EN-US_TASK_0172362308__tab_01">Table 1</a> and create a loopback interface on each node. For configuration details, see <a href="#EN-US_TASK_0172362308__section_05">Configuration Files</a> in this section.</p>
</p><p><p>Configure an IGP on each node to allow the nodes to communicate at the network layer. For configuration details, see <a href="#EN-US_TASK_0172362308__section_05">Configuration Files</a> in this section.</p>
</p></li><li><span>Enable BFD globally.</span><p><p># Configure the UPE to passively create a BFD session for TE tunnel fault detection.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bfd] <strong>mpls-passive</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bfd] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE-bfd] <strong>quit</strong></pre>
<p>Repeat this step for SPE1 and SPE2. For configuration details, see <a href="#EN-US_TASK_0172362308__section_05">Configuration Files</a> in this section.</p>
</p></li><li><span>Configure MPLS functions and public network tunnels.</span><ol type="a"><li class="substepexpand"><span>Enable MPLS, MPLS TE, RSVP-TE, and CSPF.</span><p><p># Configure the UPE.</p>
<pre class="screen">&lt;UPE&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE] <strong>mpls lsr-id 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-mpls] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-mpls] <strong>mpls rsvp-te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-mpls] <strong>mpls te cspf</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-GigabitEthernet<span>0/1/1</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-GigabitEthernet<span>0/1/1</span>] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-GigabitEthernet<span>0/1/1</span>] <strong>mpls rsvp-te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-GigabitEthernet<span>0/1/2</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-GigabitEthernet<span>0/1/2</span>] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-GigabitEthernet<span>0/1/2</span>] <strong>mpls rsvp-te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>ospf 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-ospf-1] <strong>opaque-capability enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-ospf-1] <strong>area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-ospf-1-area-0.0.0.0] <strong>mpls-te enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-ospf-1-area-0.0.0.0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-ospf-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>commit</strong></pre>
<p>Repeat this step for SPE1 and SPE2. For configuration details, see <a href="#EN-US_TASK_0172362308__section_05">Configuration Files</a> in this section.</p>
</p></li><li class="substepexpand"><span>Configure the egress of each unidirectional RSVP-TE tunnel to be created to assign a non-null label to the penultimate hop.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This step is mandatory before you create an RSVP-TE tunnel. If this step is skipped, bit-error-triggered RSVP-TE tunnel switching cannot take effect.</p>
</div></div>
<div class="p"># Configure the UPE.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE-mpls] <strong>label advertise non-null</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>commit</strong></pre>
</div>
<div class="p"># Configure SPE1.<pre class="screen">&lt;SPE1&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1-mpls] <strong>label advertise non-null</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1] <strong>commit</strong></pre>
</div>
<div class="p"># Configure SPE2.<pre class="screen">&lt;SPE2&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE2] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE2-mpls] <strong>label advertise non-null</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2] <strong>commit</strong></pre>
</div>
</p></li><li class="substepexpand"><span>Configure two unidirectional RSVP-TE tunnels between the UPE and each SPE and configure TE hot standby.</span><p><p># Configure the UPE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE] <strong>interface Tunnel 11</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel11] <strong>ip address unnumbered interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel11] <strong>tunnel-protocol mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel11] <strong>destination 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel11] <strong>mpls te tunnel-id 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel11] <strong>mpls te backup hot-standby</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel11] <strong>mpls te reserved-for-binding</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel11] <strong>mpls te bfd enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel11] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>interface Tunnel 12</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel12] <strong>ip address unnumbered interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel12] <strong>tunnel-protocol mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel12] <strong>destination 3.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel12] <strong>mpls te tunnel-id 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel12] <strong>mpls te backup hot-standby</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel12] <strong>mpls te reserved-for-binding</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel12] <strong>mpls te bfd enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel12] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>commit</strong></pre>
<p># Configure SPE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1] <strong>interface Tunnel 11</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-Tunnel11] <strong>ip address unnumbered interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-Tunnel11] <strong>tunnel-protocol mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-Tunnel11] <strong>destination 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-Tunnel11] <strong>mpls te tunnel-id 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-Tunnel11] <strong>mpls te backup hot-standby</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-Tunnel11] <strong>mpls te reserved-for-binding</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-Tunnel11] <strong>mpls te bfd enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-Tunnel11] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1] <strong>commit</strong></pre>
<p># Configure SPE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE2] <strong>interface Tunnel 12</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2-Tunnel12] <strong>ip address unnumbered interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2-Tunnel12] <strong>tunnel-protocol mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2-Tunnel12] <strong>destination 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2-Tunnel12] <strong>mpls te tunnel-id 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2-Tunnel12] <strong>mpls te backup hot-standby</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2-Tunnel12] <strong>mpls te reserved-for-binding</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2-Tunnel12] <strong>mpls te bfd enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2-Tunnel12] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2] <strong>commit</strong></pre>
</p></li><li class="substepexpand"><span>Configure a tunnel policy on each device.</span><p><p># Configure the UPE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE] <strong>tunnel-policy policy1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-tunnel-policy-policy1] <strong>tunnel binding destination 2.2.2.2 te Tunnel 11</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-tunnel-policy-policy1] <strong>tunnel binding destination 3.3.3.3 te Tunnel 12</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-tunnel-policy-policy1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>commit</strong></pre>
<p># Configure SPE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1] <strong>tunnel-policy policy1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-tunnel-policy-policy1] <strong>tunnel binding destination 1.1.1.1 te Tunnel 11</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-tunnel-policy-policy1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1] <strong>commit</strong></pre>
<p># Configure SPE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE2] <strong>tunnel-policy policy1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2-tunnel-policy-policy1] <strong>tunnel binding destination 1.1.1.1 te Tunnel 12</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2-tunnel-policy-policy1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2] <strong>commit</strong></pre>
</p></li><li class="substepexpand"><span>Configure LDP LSPs between the NPE and SPEs.</span><p><p># Configure SPE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-mpls-ldp] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1-mpls-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1] <strong>interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1-GigabitEthernet<span>0/1/2</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-GigabitEthernet<span>0/1/2</span>] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-GigabitEthernet<span>0/1/2</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<p>Repeat this step for SPE2 and the NPE. For configuration details, see <a href="#EN-US_TASK_0172362308__section_05">Configuration Files</a> in this section.</p>
</p></li></ol>
</li><li><span>Configure an L3VPN instance on each of the UPE and NPE.</span><p><p># Configure the UPE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE] <strong>ip vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-vpn-instance-vpna] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-vpn-instance-vpna-af-ipv4] <strong>route-distinguisher 20:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-vpn-instance-vpna-af-ipv4] <strong>vpn-target 1:1 evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-vpn-instance-vpna-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-vpn-instance-vpna] <strong>evpn mpls routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-vpn-instance-vpna] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE]<strong> interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-GigabitEthernet<span>0/1/0</span>] <strong>ip binding vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-GigabitEthernet<span>0/1/0</span>] <strong>ip address 10.2.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE]<strong> bgp 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp]<strong> ipv4-family vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp-vpna] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp-vpna] <strong>advertise l2vpn evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp-vpna] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>commit</strong></pre>
<p># Configure the NPE.</p>
<pre class="screen">&lt;NPE&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>NPE] <strong>ip vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-vpn-instance-vpna] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-vpn-instance-vpna-af-ipv4] <strong>route-distinguisher 20:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-vpn-instance-vpna-af-ipv4] <strong>vpn-target 1:1 evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-vpn-instance-vpna-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-vpn-instance-vpna] <strong>evpn mpls routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-vpn-instance-vpna] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE]<strong> interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-GigabitEthernet<span>0/1/2</span>] <strong>ip binding vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-GigabitEthernet<span>0/1/2</span>] <strong>ip address 10.3.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE]<strong> bgp 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp]<strong> ipv4-family vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp-vpna] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp-vpna] <strong>advertise l2vpn evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp-vpna] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE] <strong>commit</strong></pre>
</p></li><li><span>Configure BGP-EVPN peer relationships between the UPE and SPEs and between the NPE and SPEs.</span><p><p># Configure the UPE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE]<strong> bgp 20</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE-bgp] <strong>router-id 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp]<strong> peer 2.2.2.2 as-number 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp]<strong> peer 2.2.2.2 connect-interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp]<strong> peer 3.3.3.3 as-number 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp]<strong> peer 3.3.3.3 connect-interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp]<strong> l2vpn-family evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp-af-evpn]<strong> peer 2.2.2.2 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp-af-evpn]<strong> peer 3.3.3.3 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp-af-evpn]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>commit</strong></pre>
<p># Configure SPE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1]<strong> bgp 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp] <strong>router-id 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp]<strong> peer 1.1.1.1 as-number 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp]<strong> peer 1.1.1.1 connect-interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp]<strong> peer 3.3.3.3 as-number 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp]<strong> peer 3.3.3.3 connect-interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp]<strong> peer 4.4.4.4 as-number 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp]<strong> peer 4.4.4.4 connect-interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp]<strong> l2vpn-family evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp-af-evpn]<strong> undo policy vpn-target</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp-af-evpn]<strong> peer 1.1.1.1 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp-af-evpn]<strong> peer 3.3.3.3 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp-af-evpn]<strong> peer 4.4.4.4 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp-af-evpn]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1] <strong>commit</strong></pre>
<p>The configuration of SPE2 is similar to the configuration of SPE1. For configuration details, see <a href="#EN-US_TASK_0172362308__section_05">Configuration Files</a> in this section.</p>
<p># Configure the NPE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>NPE]<strong> bgp 20</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>NPE-bgp] <strong>router-id 4.4.4.4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp]<strong> peer 2.2.2.2 as-number 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp]<strong> peer 2.2.2.2 connect-interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp]<strong> peer 3.3.3.3 as-number 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp]<strong> peer 3.3.3.3 connect-interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp]<strong> l2vpn-family evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp-af-evpn]<strong> peer 2.2.2.2 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp-af-evpn]<strong> peer 3.3.3.3 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp-af-evpn]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE-bgp]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE] <strong>commit</strong></pre>
</p></li><li><span>Configure the SPEs as RRs and specify the UPE and NPE as RR clients.</span><p><p># Configure SPE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1]<strong> bgp 20</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1-bgp]<strong> l2vpn-family evpn</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1-bgp-af-evpn]<strong> peer 1.1.1.1 reflect-client</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp-af-evpn]<strong> peer 1.1.1.1 next-hop-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp-af-evpn]<strong> peer 4.4.4.4 next-hop-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp-af-evpn]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1] <strong>commit</strong></pre>
<p>The configuration of SPE2 is similar to the configuration of SPE1. For configuration details, see <a href="#EN-US_TASK_0172362308__section_05">Configuration Files</a> in this section.</p>
</p></li><li><span>Apply the tunnel policy to the VPN instance on the UPE and configure a tunnel selector on each SPE (because SPEs do not have VPN instances), so that the UPE and SPEs use RSVP-TE tunnels to transmit traffic.</span><p><p># Configure the UPE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE] <strong>ip vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE-vpn-instance-vpna] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE-vpn-instance-vpna-af-ipv4] <strong>route-distinguisher 20:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-vpn-instance-vpna-af-ipv4] <strong>tnl-policy policy1 evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-vpn-instance-vpna-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-vpn-instance-vpna] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>commit</strong></pre>
<p># Configure SPE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1] <strong>tunnel-selector bindTE permit node 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-tunnel-selector] <strong>apply tunnel-policy policy1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-tunnel-selector] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1] <strong>bgp 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp] <strong>l2vpn-family evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp-af-evpn] <strong>tunnel-selector bindTE</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp-af-evpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1] <strong>commit</strong></pre>
<p>The configuration of SPE2 is similar to the configuration of SPE1. For configuration details, see <a href="#EN-US_TASK_0172362308__section_05">Configuration Files</a> in this section.</p>
</p></li><li><span>Configure VPN FRR on the UPE and EVPN FRR on the SPEs (because SPEs do not have VPN instances).</span><p><p># Configure the UPE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE] <strong>bgp 20</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE-bgp] <strong>ipv4-family vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE-bgp-vpna] <strong>auto-frr</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp-vpna] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>commit</strong></pre>
<p># Configure SPE1. Configure EVPN FRR on the SPE (VPN FRR cannot be configured on SPEs, because SPEs do not have VPN instances).</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1] <strong>bgp 20</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1-bgp] <strong>l2vpn-family evpn</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1-bgp-af-evpn] <strong>bestroute nexthop-resolved tunnel</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp-af-evpn] <strong>auto-frr</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp-af-evpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1] <strong>commit</strong></pre>
<p>The configuration of SPE2 is similar to the configuration of SPE1. For configuration details, see <a href="#EN-US_TASK_0172362308__section_05">Configuration Files</a> in this section.</p>
</p></li><li><span>Configure bit-error-triggered RSVP-TE tunnel switching.</span><p><p># Configure the UPE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE]<strong> interface Tunnel 11</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE-Tunnel11]<strong> mpls te bit-error-detection</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel11]<strong> mpls te reverse-lsp protocol rsvp-te ingress-lsr-id 2.2.2.2 tunnel-id 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel11]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE]<strong> interface Tunnel 12</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel12]<strong> mpls te bit-error-detection</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel12]<strong> mpls te reverse-lsp protocol rsvp-te ingress-lsr-id 3.3.3.3 tunnel-id 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-Tunnel12]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>commit</strong></pre>
<p># Configure SPE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1]<strong> interface Tunnel 11</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1-Tunnel11]<strong> mpls te bit-error-detection</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-Tunnel11]<strong> mpls te reverse-lsp protocol rsvp-te ingress-lsr-id 1.1.1.1 tunnel-id 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-Tunnel11]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1] <strong>commit</strong></pre>
<p># Configure SPE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE2]<strong> interface Tunnel 12</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE2-Tunnel12]<strong> mpls te bit-error-detection</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2-Tunnel12]<strong> mpls te reverse-lsp protocol rsvp-te ingress-lsr-id 1.1.1.1 tunnel-id 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2-Tunnel12]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE2] <strong>commit</strong></pre>
</p></li><li><span>Configure bit-error-triggered EVPN L3VPN route switching.</span><p><p># Configure the UPE to reroute traffic when a bit error event occurs.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE]<strong> bgp 20</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE-bgp]<strong> ipv4-family vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE-bgp-vpna]<strong> bestroute bit-error-detection</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp-vpna]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE-bgp]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>UPE] <strong>commit</strong></pre>
<p># Configure SPE1 to decrease the local preference of the EVPN routes that it advertises to the NPE by 50 when a bit error event occurs.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1]<strong> bgp 20</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1-bgp]<strong> l2vpn-family evpn</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SPE1-bgp-af-evpn]<strong> nexthop recursive-lookup bit-error-detection local-preference - 50</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp-af-evpn]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1-bgp]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SPE1] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Run the <strong>display bgp vpnv4 vpn-instance vpna routing-table</strong> command on the UPE and NPE. The command output shows that the UPE and NPE have both received remote EVPN routes from SPE1 and SPE2 and they have preferentially selected the routes advertised by SPE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE] <strong>display bgp vpnv4 vpn-instance vpna routing-table</strong></pre>
<pre class="screen"> BGP Local router ID is 1.1.1.1
 Status codes: * - valid, &gt; - best, d - damped, x - best external, a - add path,
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
 RPKI validation codes: V - valid, I - invalid, N - not-found

    
 VPN-Instance vpna, Router ID 1.1.1.1:

 Total Number of Routes: 5
        Network            NextHop                       MED        LocPrf    PrefVal Path/Ogn

 *&gt;     10.2.1.0/24        0.0.0.0                        0                     0       ?
 *&gt;     10.2.1.1/32        0.0.0.0                        0                     0       ?
 *&gt;i    10.3.1.0/24        2.2.2.2                        0          100        0       ?
 * i                       3.3.3.3                        0          100        0       ?
 *&gt;     127.0.0.0/8        0.0.0.0                        0                     0       ?</pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>NPE] <strong>display bgp evpn all routing-table</strong></pre>
<pre class="screen"> BGP Local router ID is 4.4.4.4
 Status codes: * - valid, &gt; - best, d - damped, x - best external, a - add path,
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
 RPKI validation codes: V - valid, I - invalid, N - not-found

    
 VPN-Instance vpna, Router ID 4.4.4.4:

 Total Number of Routes: 5
        Network            NextHop                       MED        LocPrf    PrefVal Path/Ogn

 *&gt;i    10.2.1.0/24        2.2.2.2                        0          100        0       ?
 * i                       3.3.3.3                        0          100        0       ?
 *&gt;     10.3.1.0/24        0.0.0.0                        0                     0       ?
 *&gt;     10.3.1.1/32        0.0.0.0                        0                     0       ?
 *&gt;     127.0.0.0/8        0.0.0.0                        0                     0       ?</pre>
<p>If GE<span>0/1/1</span> on the UPE and GE<span>0/1/2</span> on SPE2 both encounter a bit error event, the primary and backup CR-LSPs of the RSVP-TE tunnel that carries the primary VPN route both enter the excessive BER state. As a result, bit-error-triggered RSVP-TE tunnel switching cannot protect services against bit errors. In this situation, the UPE reroutes traffic. SPE1 decreases the local preference of the EVPNv4 routes that it advertises to the NPE by 50 after detecting the bit error event, so that the NPE preferentially selects the EVPNv4 routes advertised by SPE2.</p>
<p># Run the <strong>display bgp vpnv4 vpn-instance vpna routing-table 10.3.1.0</strong> command on the UPE. The command output shows that the UPE preferentially selects the route advertised by SPE2. The route advertised by SPE1 is not preferentially selected because of <strong>nexthop bit error</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>UPE] <strong>display bgp vpnv4 vpn-instance vpna routing-table 10.3.1.0</strong></pre>
<pre class="screen"> 
 BGP local router ID : 1.1.1.1
 Local AS number : 20
    
 VPN-Instance vpna, Router ID 1.1.1.1:
 Paths:   2 available, 1 best, 1 select, 0 best-external, 0 add-path
 BGP routing table entry information of 10.3.1.0/24:
 Route Distinguisher: 20:1
 Evpn route: Type 5, ip-prefix
 Label information (Received/Applied): 48128/NULL
 From: <strong>3.3.3.3</strong> (3.3.3.3)  
 Route Duration: 0d01h46m34s
 Relay Tunnel Out-Interface: Tunnel12
 Original nexthop: 3.3.3.3
 Qos information : 0x0
 Ext-Community: RT &lt;1 : 1&gt;
 AS-path Nil, origin incomplete, MED 0, localpref 100, pref-val 0, valid, internal, best, select, pre 255
 Originator: 4.4.4.4
 Cluster list: 3.3.3.3
 Not advertised to any peer yet

 BGP routing table entry information of 10.3.1.0/24:
 Route Distinguisher: 20:1
 Evpn route: Type 5, ip-prefix
 Label information (Received/Applied): 48129/NULL
 From: 2.2.2.2 (2.2.2.2)  
 Route Duration: 0d02h37m41s
 Relay Tunnel Out-Interface: Tunnel11
 Original nexthop: 2.2.2.2
 Qos information : 0x0
 Ext-Community: RT &lt;1 : 1&gt;
 AS-path Nil, origin incomplete, MED 0, localpref 100, pref-val 0, valid, internal, backup, pre 255, <strong>not preferred for nexthop bit error</strong>
 Originator: 4.4.4.4
 Cluster list: 2.2.2.2
 Not advertised to any peer yet</pre>
<p># Run the <strong>display bgp vpnv4 vpn-instance vpna routing-table 10.2.1.0</strong> command on the NPE. The command output shows that the NPE preferentially selects the route advertised by SPE2. The route advertised by SPE1 is not preferentially selected because of <strong>Local_Pref</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>NPE] <strong>display bgp vpnv4 vpn-instance vpna routing-table 10.2.1.0</strong></pre>
<pre class="screen"> BGP local router ID : 4.4.4.4
 Local AS number : 20
    
 VPN-Instance vpna, Router ID 4.4.4.4:
 Paths:   2 available, 1 best, 1 select, 0 best-external, 0 add-path
 BGP routing table entry information of 10.2.1.0/24:
 Route Distinguisher: 20:1
 Evpn route: Type 5, ip-prefix
 Label information (Received/Applied): 48125/NULL
 From: <strong>3.3.3.3</strong> (3.3.3.3)  
 Route Duration: 0d00h02m15s
 Relay Tunnel Out-Interface: Ethernet0/1/0
 Original nexthop: 3.3.3.3
 Qos information : 0x0
 Ext-Community: RT &lt;1 : 1&gt;
 AS-path Nil, origin incomplete, MED 0, localpref 100, pref-val 0, valid, internal, best, select, pre 255, IGP cost 10
 Originator: 1.1.1.1
 Cluster list: 3.3.3.3
 Not advertised to any peer yet

 BGP routing table entry information of 10.2.1.0/24:
 Route Distinguisher: 20:1
 Evpn route: Type 5, ip-prefix
 Label information (Received/Applied): 48128/NULL
 From: 2.2.2.2 (2.2.2.2)  
 Route Duration: 0d00h02m15s
 Relay Tunnel Out-Interface: Ethernet0/1/7
 Original nexthop: 2.2.2.2
 Qos information : 0x0
 Ext-Community: RT &lt;1 : 1&gt;
 AS-path Nil, origin incomplete, MED 0, localpref 50, pref-val 0, valid, internal, pre 255, IGP cost 10, <strong>not preferred for Local_Pref</strong>
 Originator: 1.1.1.1
 Cluster list: 2.2.2.2
 Not advertised to any peer yet</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172362308__section_05"><a name="EN-US_TASK_0172362308__section_05"></a><a name="section_05"></a><a name="EN-US_TASK_0172362308__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>UPE configuration file</p>
<pre class="screen">#
sysname UPE
#
ip vpn-instance vpna
 ipv4-family
  route-distinguisher 20:1
  apply-label per-instance
  vpn-target 1:1 export-extcommunity evpn
  vpn-target 1:1 import-extcommunity evpn
  tnl-policy policy1 evpn
  evpn mpls routing-enable
#               
bfd
 mpls-passive
#
mpls lsr-id 1.1.1.1
#
mpls
 label advertise non-null
 mpls te
 mpls rsvp-te
 mpls te cspf
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip binding vpn-instance vpna
 ip address 10.2.1.1 255.255.255.0
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.1.1 255.255.255.0
 mpls
 mpls te
 mpls rsvp-te
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 10.1.2.1 255.255.255.0
 mpls
 mpls te
 mpls rsvp-te
#
interface LoopBack0
 ip address 1.1.1.1 255.255.255.255
#
interface Tunnel11
 ip address unnumbered interface LoopBack0
 tunnel-protocol mpls te
 destination 2.2.2.2
 mpls te record-route
 mpls te backup hot-standby
 mpls te reserved-for-binding
 mpls te bit-error-detection
 mpls te bit-error-detection threshold switch 3 4 resume 2 5
 mpls te reverse-lsp protocol rsvp-te ingress-lsr-id 2.2.2.2 tunnel-id 20
 mpls te tunnel-id 20
 mpls te bfd enable
#
interface Tunnel12
 ip address unnumbered interface LoopBack0
 tunnel-protocol mpls te
 destination 3.3.3.3
 mpls te record-route
 mpls te backup hot-standby
 mpls te reserved-for-binding
 mpls te bit-error-detection
 mpls te bit-error-detection threshold switch 3 4 resume 2 5
 mpls te reverse-lsp protocol rsvp-te ingress-lsr-id 3.3.3.3 tunnel-id 200
 mpls te tunnel-id 200
 mpls te bfd enable
#
bgp 20
 router-id 1.1.1.1
 peer 2.2.2.2 as-number 20
 peer 2.2.2.2 connect-interface LoopBack0
 peer 3.3.3.3 as-number 20
 peer 3.3.3.3 connect-interface LoopBack0
 #
 ipv4-family unicast
  undo synchronization
  peer 2.2.2.2 enable
  peer 3.3.3.3 enable
 #
 ipv4-family vpn-instance vpna
  bestroute bit-error-detection
  import-route direct
  auto-frr
  advertise l2vpn evpn
 #
 l2vpn-family evpn
  undo policy vpn-target
  peer 2.2.2.2 enable
  peer 3.3.3.3 enable
#
ospf 1
 opaque-capability enable
 area 0.0.0.0
  network 1.1.1.1 0.0.0.0
  network 10.1.1.0 0.0.0.255
  network 10.1.2.0 0.0.0.255
  mpls-te enable
#
tunnel-policy policy1
 tunnel binding destination 2.2.2.2 te Tunnel 11
 tunnel binding destination 3.3.3.3 te Tunnel 12
#
return</pre>
</li><li><p>SPE1 configuration file</p>
<pre class="screen">#
sysname SPE1
#
tunnel-selector bindTE permit node 10
 apply tunnel-policy policy1
#
bfd
 mpls-passive
#
mpls lsr-id 2.2.2.2
#
mpls
 label advertise non-null
 mpls te        
 mpls rsvp-te
 mpls te cspf
#
mpls ldp
#
isis 1
 network-entity 10.0000.0000.0021.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.1.2 255.255.255.0
 mpls
 mpls te
 mpls rsvp-te
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.4.1 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 10.1.3.1 255.255.255.0
 isis enable 1
 mpls
 mpls te
 mpls rsvp-te
 mpls ldp
#
interface LoopBack0
 ip address 2.2.2.2 255.255.255.255
 isis enable 1
#
interface Tunnel11
 ip address unnumbered interface LoopBack0
 tunnel-protocol mpls te
 destination 1.1.1.1
 mpls te record-route
 mpls te backup hot-standby
 mpls te reserved-for-binding
 mpls te bit-error-detection
 mpls te reverse-lsp protocol rsvp-te ingress-lsr-id 1.1.1.1 tunnel-id 20
 mpls te tunnel-id 20
 mpls te bfd enable
#
bgp 20
 router-id 2.2.2.2
 peer 1.1.1.1 as-number 20
 peer 1.1.1.1 connect-interface LoopBack0
 peer 3.3.3.3 as-number 20
 peer 3.3.3.3 connect-interface LoopBack0
 peer 4.4.4.4 as-number 20
 peer 4.4.4.4 connect-interface LoopBack0
 #
 ipv4-family unicast
  undo synchronization
  peer 1.1.1.1 enable
  peer 3.3.3.3 enable
  peer 4.4.4.4 enable
 #
 l2vpn-family evpn
  undo policy vpn-target
  auto-frr
  nexthop recursive-lookup bit-error-detection local-preference - 50
  tunnel-selector bindTE  
  bestroute nexthop-resolved tunnel
  peer 1.1.1.1 enable
  peer 1.1.1.1 reflect-client
  peer 1.1.1.1 next-hop-local
  peer 3.3.3.3 enable
  peer 4.4.4.4 enable
  peer 4.4.4.4 next-hop-local
#
ospf 1
 opaque-capability enable
 area 0.0.0.0   
  network 2.2.2.2 0.0.0.0
  network 10.1.1.0 0.0.0.255
  network 10.1.3.0 0.0.0.255
  mpls-te enable
#               
tunnel-policy policy1
 tunnel binding destination 1.1.1.1 te Tunnel 11
#
return#</pre>
</li><li><p>SPE2 configuration file</p>
<pre class="screen">#
sysname SPE2
#
tunnel-selector bindTE permit node 10
 apply tunnel-policy policy1
#
bfd
 mpls-passive
#
mpls lsr-id 3.3.3.3
#
mpls
 label advertise non-null
 mpls te        
 mpls rsvp-te
 mpls te cspf
#
mpls ldp
#
isis 1
 network-entity 10.0000.0000.0022.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.2.2 255.255.255.0
 mpls
 mpls te
 mpls rsvp-te
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.5.1 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 10.1.3.2 255.255.255.0
 isis enable 1
 mpls
 mpls te
 mpls rsvp-te
#
interface LoopBack0
 ip address 3.3.3.3 255.255.255.255
 isis enable 1
#               
interface Tunnel12
 ip address unnumbered interface LoopBack0
 tunnel-protocol mpls te
 destination 1.1.1.1
 mpls te record-route
 mpls te backup hot-standby
 mpls te reserved-for-binding
 mpls te bit-error-detection
 mpls te reverse-lsp protocol rsvp-te ingress-lsr-id 1.1.1.1 tunnel-id 200
 mpls te tunnel-id 200
 mpls te bfd enable
#
bgp 20
 router-id 3.3.3.3
 peer 1.1.1.1 as-number 20
 peer 1.1.1.1 connect-interface LoopBack0
 peer 2.2.2.2 as-number 20
 peer 2.2.2.2 connect-interface LoopBack0
 peer 4.4.4.4 as-number 20
 peer 4.4.4.4 connect-interface LoopBack0
 #              
 ipv4-family unicast
  undo synchronization
  peer 1.1.1.1 enable
  peer 2.2.2.2 enable
  peer 4.4.4.4 enable
 #
 l2vpn-family evpn
  undo policy vpn-target
  auto-frr
  tunnel-selector bindTE  
  bestroute nexthop-resolved tunnel
  peer 1.1.1.1 enable
  peer 1.1.1.1 reflect-client
  peer 1.1.1.1 next-hop-local
  peer 2.2.2.2 enable
  peer 4.4.4.4 enable
  peer 4.4.4.4 next-hop-local
#
ospf 1
 opaque-capability enable
 area 0.0.0.0
  network 3.3.3.3 0.0.0.0
  network 10.1.2.0 0.0.0.255
  network 10.1.3.0 0.0.0.255
  mpls-te enable
#
ssh authorization-type default aaa
#
tunnel-policy policy1
 tunnel binding destination 1.1.1.1 te Tunnel 12
#
return</pre>
</li><li><p>NPE configuration file</p>
<pre class="screen">#
sysname NPE
#
ip vpn-instance vpna
 ipv4-family
  route-distinguisher 20:1
  apply-label per-instance
  vpn-target 1:1 export-extcommunity evpn
  vpn-target 1:1 import-extcommunity evpn
  evpn mpls routing-enable
#
mpls lsr-id 4.4.4.4
#
mpls
#               
mpls ldp
#
isis 1
 network-entity 10.0000.0000.0003.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.4.2 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.5.2 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip binding vpn-instance vpna
 ip address 10.3.1.1 255.255.255.0
#
interface LoopBack0
 ip address 4.4.4.4 255.255.255.255
 isis enable 1
#
bgp 20
 router-id 4.4.4.4
 peer 2.2.2.2 as-number 20
 peer 2.2.2.2 connect-interface LoopBack0
 peer 3.3.3.3 as-number 20
 peer 3.3.3.3 connect-interface LoopBack0
 #
 ipv4-family unicast
  undo synchronization
  peer 2.2.2.2 enable
  peer 3.3.3.3 enable
 #
 ipv4-family vpn-instance vpna
  import-route direct
  advertise l2vpn evpn
 #
 l2vpn-family evpn
  undo policy vpn-target
  peer 2.2.2.2 enable
  peer 3.3.3.3 enable
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000010.html">Configuration Examples for Bit-Error-Triggered Protection Switching
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000019.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_ngmvpn_0002.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>