
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring EFM OAM">
<meta name="abstract" content="This configuration example describes basic applications of EFM OAM.">
<meta name="description" content="This configuration example describes basic applications of EFM OAM.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_efm_cfg_2027.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,c00376497,z00603461,w00800033,jwx1168690,w00556928,w00437000,eoam-vrp,w00606909,m00390128,l00455378,wwx1270540">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="p00915595">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362037">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring EFM OAM</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172362037"></a><a name="EN-US_TASK_0172362037"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring EFM OAM</h1>
<div class="taskbody"><p>This configuration example describes basic applications of EFM OAM.</p>
<div class="context"><a name="EN-US_TASK_0172362037__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>To ensure the reliability and stability of connections between a user network and a carrier network and to improve link manageability and maintainability, configure EFM OAM for link detection, fault detection, and packet loss ratio testing. In addition, associate EFM OAM with an interface to perform link switchovers when a fault occurs.</p>
<div class="fignone"><span class="figcap"><b>Figure 1 </b>EFM OAM</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1 and interface2 represent GE <span>0/1/1</span> and GE <span>0/2/1</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_efm_cfg_202801.png" width="NaN" height="NaN"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362037__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>None</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362037__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><div class="p">The configuration roadmap is as follows:<ol><li><p>Configure EFM OAM on the CE, PE1, and PE2, and configure an interface on the CE to work in passive mode.</p>
</li><li><p>Configure remote loopback on PE1 to test the packet loss ratio before the link is used.</p>
</li><li><p>Configure link monitoring on PE1.</p>
</li><li><p>Associate EFM OAM with an interface on the CE.</p>
</li></ol>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362037__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><div class="p">To complete the configuration, you need the following data:<ul><li><p>Interval at which errored frames are checked on GE <span>0/2/1</span> on PEs and threshold for the number of detected errored frames</p>
</li><li><p>Interval at which errored codes are checked on GE <span>0/2/1</span> on PEs and threshold for the number of detected errored codes</p>
</li><li><p>Interval at which errored frame seconds are checked on GE <span>0/2/1</span> on PEs and threshold for the number of detected errored frame seconds</p>
</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362037__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure basic EFM OAM functions.</span><p><p># Enable EFM OAM globally on the CE.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname</strong> <strong>CE</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong> </pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE]<strong> efm enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE]<strong> commit</strong></pre>
<p># Enable EFM OAM globally on PE1.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname</strong> <strong>PE1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong> </pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> efm enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> commit</strong></pre>
<p># Enable EFM OAM globally on PE2.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname</strong> <strong>PE2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2]<strong> efm enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong> commit</strong></pre>
<p># Configure GE <span>0/1/1</span> on the CE to work in passive mode.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE]<strong> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE-GigabitEthernet<span>0/1/1</span>]<strong> efm mode passive</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>]<strong> commit</strong></pre>
<p># Enable EFM OAM on GE <span>0/1/1</span> on the CE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE-GigabitEthernet<span>0/1/1</span>]<strong> efm enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE]<strong> commit</strong></pre>
<p># Enable EFM OAM on GE <span>0/2/1</span> on the CE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE]<strong> interface gigabitethernet <span>0/2/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE-GigabitEthernet<span>0/2/1</span>]<strong> efm enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/2/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE]<strong> commit</strong></pre>
<p># Enable EFM OAM on GE <span>0/2/1</span> on PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> interface gigabitethernet <span>0/2/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> efm enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> commit</strong></pre>
<p># Enable EFM OAM on GE <span>0/2/1</span> on PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2]<strong> interface gigabitethernet <span>0/2/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-GigabitEthernet<span>0/2/1</span>]<strong> efm enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/2/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong> commit</strong></pre>
<p># Verify the configuration.</p>
<p>If EFM OAM configurations on PE1 and the CE are correct, GE <span>0/1/1</span> and GE <span>0/2/1</span> enter the Detect state after EFM session negotiation succeeds. Run the <a href="cmdqueryname=display+efm+session"><b><span class="cmdname">display efm session</span></b></a> { <strong><span>all</span></strong> | <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-num</span></i> } command on the CE or PE1. The command output shows that the EFM OAM status of GE <span>0/1/1</span> or GE <span>0/2/1</span> is <strong>detect</strong>. The following example uses the command output on the CE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE]<strong> display efm session all</strong></pre>
<pre class="screen">  Interface                 EFM State                   Loopback Timeout
  ----------------------------------------------------------------------
  GigabitEthernet<span>0/1/1</span>           <strong>detect</strong>                      --
  GigabitEthernet<span>0/2/1</span>           <strong>detect</strong>                      --</pre>
</p></li><li><span>Configure remote loopback.</span><p><p># Configure remote loopback on PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> interface gigabitethernet <span>0/2/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> efm loopback start</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> quit</strong></pre>
<p>Verify the configuration.</p>
<p>After remote loopback is configured, run the <a href="cmdqueryname=display+efm+session"><b><span class="cmdname">display efm session</span></b></a> { <strong><span>all</span></strong> | <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-num</span></i> } command on PE1. The command output shows that the EFM OAM status of GE <span>0/2/1</span> is <strong>Loopback(control)</strong>, which indicates that GE <span>0/2/1</span> initiates remote loopback.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> display efm session interface gigabitethernet <span>0/2/1</span></strong></pre>
<pre class="screen">  Interface                 EFM State                   Loopback Timeout
  ----------------------------------------------------------------------
  GigabitEthernet<span>0/2/1</span>           <strong>loopback (control)</strong>          19</pre>
<p>After remote loopback is configured, run the <a href="cmdqueryname=display+efm+session"><b><span class="cmdname">display efm session</span></b></a> { <strong><span>all</span></strong> | <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-num</span></i> } command on the CE. The command output shows that the EFM OAM status of GE <span>0/1/1</span> is <strong>Loopback(be controlled)</strong>, which indicates that GE <span>0/1/1</span> responds to remote loopback.</p>
<pre class="screen">  Interface                 EFM State                   Loopback Timeout
  ----------------------------------------------------------------------
  Gigabitethernet<span>0/1/1</span>           <strong>loopback (be controlled)</strong>    --</pre>
</p></li><li><span>Configure PE1 to send testing packets to the CE.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> test-packet start interface gigabitethernet <span>0/2/1</span></strong></pre>
</p></li><li><span>Check statistics about testing packets on PE1.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> display test-packet result</strong></pre>
<pre class="screen"> TestResult         Value
--------------------------------------------------------
  PacketsSend    :   5
  PacketsReceive :   5
  PacketsLost    :   0
  BytesSend      :   320
  BytesReceive   :   320
  BytesLost      :   0
  StartTime      :   Feb  8 2014 16:08:00
  EndTime        :   Feb  8 2014 16:08:00    </pre>
<p>Based on the preceding data, you can calculate the packet loss ratio of the link.</p>
</p></li><li><span>Disable remote loopback.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> interface gigabitethernet <span>0/2/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> efm loopback stop</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> quit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To disable remote loopback before a timeout period elapses, perform this step.</p>
</div></div>
</p></li><li><span>Verify the configuration.</span><p><p>After remote loopback is disabled, run the <a href="cmdqueryname=display+efm+session"><b><span class="cmdname">display efm session</span></b></a> { <strong><span>all</span></strong> | <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-num</span></i> } command on PE1 or the CE. The command output shows that the EFM OAM status of interfaces at both ends of the link is <strong>Detect</strong> or <strong>Discovery</strong>. That is, the two interfaces are in the Detect or Discovery state. For example:</p>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> display efm session interface gigabitethernet<span>0/2/1</span></strong></pre>
<p>If remote loopback detects that the link works properly, perform the following configurations to monitor link connectivity and faults in real time.</p>
</p></li><li><span>Configure GE <span>0/2/1</span> on PE1 to check errored codes, errored frames, and errored frame seconds.</span><p><p># Configure GE <span>0/2/1</span> on PE1 to check errored frames.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> interface gigabitethernet <span>0/2/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> efm error-frame period 5</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> efm error-frame threshold 5</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> efm error-frame notification enable</strong></pre>
<p># Configure GE <span>0/2/1</span> on PE1 to check errored codes.</p>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> efm error-code period 5</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> efm error-code threshold 5</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> efm error-code notification enable</strong></pre>
<p># Configure GE <span>0/2/1</span> on PE1 to check errored frame seconds.</p>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> efm error-frame-second period 120</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> efm error-frame-second threshold 5</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> efm error-frame-second notification enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>After the configurations are complete, GE <span>0/1/1</span> on the CE and GE <span>0/2/1</span> on PE1 enter the Detect state after EFM session negotiation succeeds. Run the <a href="cmdqueryname=display+efm+session"><b><span class="cmdname">display efm session</span></b></a> { <strong><span>all</span></strong> | <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-num</span></i> } command on the CE or PE1. The command output shows that the EFM OAM status of GE <span>0/1/1</span> or GE <span>0/2/1</span> is <strong>detect</strong>.</p>
<p>The following example uses the command output on the CE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE]<strong> display efm session interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">  Interface                 EFM State                   Loopback Timeout
  ----------------------------------------------------------------------
  GigabitEthernet<span>0/1/1</span>           detect                      --
  GigabitEthernet<span>0/2/1</span>           detect                      --</pre>
<p>Run the <a href="cmdqueryname=display+efm"><b><span class="cmdname">display efm</span></b></a> { <strong><span>all</span></strong> | <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } command on PE1 to view EFM OAM configurations.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> display efm interface gigabitethernet <span>0/2/1</span></strong></pre>
<pre class="screen">  Item                           Value
  ----------------------------------------------------
  Interface:                     GigabitEthernet<span>0/2/1</span>
  EFM Enable Flag:               enable  
  Mode:                          active
  Loopback IgnoreRequest:        no
  OAMPDU MaxSize:                128
  OAMPDU Interval:               1000
  OAMPDU Timeout:                5000
  ErrCodeNotification:           enable
  ErrCodePeriod:                 5
  ErrCodeThreshold:              5
  ErrFrameNotification:          enable
  ErrFramePeriod:                5
  ErrFrameThreshold:             5
  ErrFrameSecondNotification:    enable
  ErrFrameSecondPeriod:          120
  ErrFrameSecondThreshold:       5
  Hold Up Time:                  0 
  TriggerIfDown:                 disable
<span>  TriggerMacRenew:               disable</span>
  Remote MAC:                    --
  Remote EFM Enable Flag:        --
  Remote Mode:                   --
  Remote MaxSize:                --
  Remote Loopback IgnoreRequest: --
  Remote Parser:                 --
  Remote Multiplexer:            --<span>  ErrFramePeriodNotification:    disable
  ErrFramePeriodPeriod:          200000
  ErrFramePeriodThreshold:       1</span></pre>
</p></li><li><span>Associate EFM OAM with an interface on the CE.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE]<strong> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE-GigabitEthernet<span>0/1/1</span>]<strong> efm trigger if-down</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>]<strong> efm holdup-timer 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE]<strong> commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>After the configuration is complete, run the <a href="cmdqueryname=display+efm"><b><span class="cmdname">display efm</span></b></a> { <strong><span>all</span></strong> | <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command on the CE. The command output shows that <strong>TriggerIfDown</strong> is <strong>enable</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE]<strong> display efm all</strong></pre>
<pre class="screen">  Item                           Value
  ----------------------------------------------------
  Interface:                     GigabitEthernet<span>0/1/1</span>
  EFM Enable Flag:               enable  
  Mode:                          passive
  OAMPDU MaxSize:                128
  OAMPDU Interval:               1000
  OAMPDU Timeout:                5000
  ErrCodeNotification:           disable
  ErrCodePeriod:                 1
  ErrCodeThreshold:              1
  ErrFrameNotification:          disable
  ErrFramePeriod:                1
  ErrFrameThreshold:             1
  ErrFrameSecondNotification:    disable
  ErrFrameSecondPeriod:          60
  ErrFrameSecondThreshold:       1
<strong>  Hold Up Time:                  20
  TriggerIfDown:                 enable</strong>
  Remote MAC:                    00e0-fc12-7880
  Remote EFM Enable Flag:        enable
  Remote Mode:                   active
  Remote MaxSize:                128
  Remote Loopback IgnoreRequest: --
  Remote Parser:                 --
  Remote Multiplexer:            --
  ----------------------------------------------------
  Interface:                     GigabitEthernet<span>0/2/1</span>
  EFM Enable Flag:               enable  
  Mode:                          active
  OAMPDU MaxSize:                128
  OAMPDU Interval:               1000
  OAMPDU Timeout:                5000
  ErrCodeNotification:           disable
  ErrCodePeriod:                 1
  ErrCodeThreshold:              1
  ErrFrameNotification:          disable
  ErrFramePeriod:                1
  ErrFrameThreshold:             1
  ErrFrameSecondNotification:    disable
  ErrFrameSecondPeriod:          60
  ErrFrameSecondThreshold:       1
<strong>  Hold Up Time:                  20
  TriggerIfDown:                 enable</strong>
  Remote MAC:                    00e0-fc12-7890
  Remote EFM Enable Flag:        enable
  Remote Mode:                   active
  Remote MaxSize:                128
  Remote Loopback IgnoreRequest: --
  Remote Parser:                 --
  Remote Multiplexer:            --</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172362037__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>CE configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname CE</pre>
<pre class="screen">#
efm enable
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 efm enable
 efm mode passive
 efm trigger if-down
 efm holdup-timer 20
#
interface Gigabitethernet<span>0/2/1</span>
 undo shutdown
 efm enable
 efm trigger if-down
 efm holdup-timer 20
#</pre>
<pre class="screen">return</pre>
</li><li><p>PE1 configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname PE1</pre>
<pre class="screen">#</pre>
<pre class="screen">efm enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/1</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> efm enable</pre>
<pre class="screen"><strong> </strong>efm loopback start</pre>
<pre class="screen"><strong> </strong>test-packet start interface gigabitethernet <span>0/2/1</span></pre>
<pre class="screen"><strong> </strong>efm loopback stop</pre>
<pre class="screen"> efm error-frame period 5</pre>
<pre class="screen"> efm error-frame threshold 5</pre>
<pre class="screen"> efm error-frame notification enable</pre>
<pre class="screen"> efm error-frame-second period 120</pre>
<pre class="screen"> efm error-frame-second threshold 5</pre>
<pre class="screen"> efm error-frame-second notification enable</pre>
<pre class="screen"> efm error-code period 5</pre>
<pre class="screen"> efm error-code threshold 5</pre>
<pre class="screen"> efm error-code notification enable</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p>PE2 configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname PE2</pre>
<pre class="screen">#</pre>
<pre class="screen">efm enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/1</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> efm enable</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_efm_cfg_2027.html">Configuration Examples for EFM
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
</div>
</div>
</body>
</html>