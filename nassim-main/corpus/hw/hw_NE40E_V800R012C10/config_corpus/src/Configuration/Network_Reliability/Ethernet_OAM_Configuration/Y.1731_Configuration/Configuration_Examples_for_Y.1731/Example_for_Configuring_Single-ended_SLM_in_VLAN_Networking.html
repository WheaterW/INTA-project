
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Single-ended SLM in VLAN Networking">
<meta name="abstract" content="This section provides an example for configuring single-ended synthetic loss measurement (SLM) in virtual local area network (VLAN) networking.">
<meta name="description" content="This section provides an example for configuring single-ended synthetic loss measurement (SLM) in virtual local area network (VLAN) networking.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011531.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011543.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_y1731_cfg_0058.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,c00376497,z00603461,w00800033,jwx1168690,w00556928,w00437000,eoam-vrp,w00606909,m00390128,l00455378,wwx1270540">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="p00915595">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362176">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Single-ended SLM in VLAN Networking</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172362176"></a><a name="EN-US_TASK_0172362176"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Single-ended SLM in VLAN Networking</h1>
<div class="taskbody"><p>This section provides an example for configuring single-ended synthetic loss measurement (SLM) in virtual local area network (VLAN) networking.</p>
<div class="context"><a name="EN-US_TASK_0172362176__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As networks rapidly develop and applications diversify, various value-added services, such as Internet Protocol television (IPTV), video conferencing, and Voice over Internet Protocol (VoIP), are more widely used than ever before. Any link connectivity fault or network performance deterioration directly affects service quality on a live network, making performance monitoring on the pipes that transmit these services absolutely essential.</p>
<p>On the point-to-multipoint network shown in <a href="#EN-US_TASK_0172362176__fig_dc_vrp_y1731_cfg_007501">Figure 1</a>, PE1 and PE2 are connected through a VLAN. A carrier wants to collect accurate performance statistics about LM on the link between CE1 and CE2. To monitor network performance in real time, the carrier can configure single-ended SLM on the VLAN. This configuration allows the carrier to immediately adjust the network in case of voice quality deterioration.</p>
<div class="fignone" id="EN-US_TASK_0172362176__fig_dc_vrp_y1731_cfg_007501"><a name="EN-US_TASK_0172362176__fig_dc_vrp_y1731_cfg_007501"></a><a name="fig_dc_vrp_y1731_cfg_007501"></a><span class="figcap"><b>Figure 1 </b>Single-ended SLM in VLAN networking</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interface 1 in this example is GE <span>0/1/1</span>.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_y1731_cfg_007501.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362176__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><div class="p">The configuration roadmap is as follows:<ol><li><p>Configure single-ended on-demand SLM on a link between customer edges (CEs).</p>
</li><li><p>Configure single-ended proactive SLM on a link between CEs.</p>
</li></ol>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362176__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>ID of the VLAN to which the CEs belong</p>
</li><li><p>Names of the maintenance domain (MD) and maintenance association (MA) in which CE1 and CE2 reside</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362176__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure single-ended on-demand SLM.</span><p><ol type="a"><li><p>Configure basic Ethernet connectivity fault management (CFM) functions and set the maintenance association end point (MEP) type to outward.</p>
<p>Configure basic Ethernet CFM functions on each CE. Specify the Ethernet CFM protocol as IEEE Standard 802.1ag-2007. Create an MD named <strong>md3</strong> and an MA named <strong>ma3</strong>, and bind the MA to the VLAN.</p>
<p># Configure CE1.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname CE1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong>vlan 2</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong>interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1-GigabitEthernet<span>0/1/1</span>] <strong>portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/1</span>] <strong>port link-type trunk</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/1</span>] <strong>port trunk allow-pass vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1] <strong>cfm md md3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3] <strong>ma ma3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>map vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>mep mep-id 3 interface gigabitethernet<span>0/1/1</span> outward</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>mep ccm-send mep-id 3 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>remote-mep mep-id 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>remote-mep ccm-receive mep-id 4 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>test-id 1 mep 3 remote-mep 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>commit</strong></pre>
<p># Configure CE2.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname CE2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2] <strong>vlan 2</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2] <strong>interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2-GigabitEthernet<span>0/1/1</span>]<strong>portswitch</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2-GigabitEthernet<span>0/1/1</span>]<strong>port link-type trunk</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>]<strong>port trunk allow-pass vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>]<strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2] <strong>cfm enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2] <strong>cfm version standard</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2] <strong>cfm md md3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3] <strong>ma ma3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>map vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>mep mep-id 4 interface gigabitethernet<span>0/1/1</span> outward</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>mep ccm-send mep-id 4 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>remote-mep mep-id 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>remote-mep ccm-receive mep-id 3 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>test-id 1 mep 4 remote-mep 3</strong></pre>
</li><li><p>Enable CE to send or receive SLM frames.</p>
<p># Configure CE2.</p>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>loss-measure single-ended-synthetic receive test-id 1 time-out 300</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2-md-md3-ma-ma3] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2-md-md3] <strong>quit</strong></pre>
<p># Configure CE1</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1-md-md3-ma-ma3] <strong>loss-measure single-ended-synthetic send test-id 1 interval 1000 sending-count 10 time-out 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1-md-md3-ma-ma3] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1-md-md3] <strong>quit</strong></pre>
</li><li><p>Verify the configuration.</p>
<p>Run the <a href="cmdqueryname=display+y1731+statistic-type"><b><span class="cmdname">display y1731 statistic-type</span></b></a> command on CE1 to view statistics about single-ended on-demand SLM.</p>
<pre class="screen">&lt;CE1&gt;<strong>display  y1731  statistic-type single-synthetic-loss test-id 1</strong>
--------------------------------------------------------------------------------
Index       L-send R-send L-recv Unack  L-loss R-loss L-loss-ratio R-loss-ratio 
--------------------------------------------------------------------------------
1016        10     10     10     0           0      0      0.0000%      0.0000% 
--------------------------------------------------------------------------------
Average Local-loss  :          0    Average Local-loss Ratio  :         0.0000% 
Maximum Local-loss  :          0    Maximum Local-loss Ratio  :         0.0000% 
Minimum Local-loss  :          0    Minimum Local-loss Ratio  :         0.0000% 
Average Remote-loss :          0    Average Remote-loss Ratio :         0.0000% 
Maximum Remote-loss :          0    Maximum Remote-loss Ratio :         0.0000% 
Minimum Remote-loss :          0    Minimum Remote-loss Ratio :         0.0000% 
</pre>
</li></ol>
</p></li><li><span>Configure single-ended proactive SLM.</span><p><ol type="a"><li><p>Enable single-ended proactive SLM.</p>
<p># Configure CE2.</p>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>loss-measure single-ended-synthetic receive test-id 1 time-out 300</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md1-ma-ma1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2-md-md3-ma-ma3] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2-md-md3] <strong>quit</strong></pre>
<p># Configure CE1.</p>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md1-ma-ma1] <strong>loss-measure single-ended-synthetic continual send test-id 1 interval 1000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md1-ma-ma1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1-md-md1-ma-ma1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1-md-md1] <strong>quit</strong></pre>
</li><li><p>Verify the configuration.</p>
<p>Run the <a href="cmdqueryname=display+y1731+statistic-type"><b><span class="cmdname">display y1731 statistic-type</span></b></a> command on CE1 to view statistics about single-ended proactive SLM.</p>
<pre class="screen">&lt;CE1&gt;<strong> display  y1731  statistic-type single-synthetic-loss test-id 1</strong></pre>
<pre class="screen">--------------------------------------------------------------------------------
Index       L-send R-send L-recv Unack  L-loss R-loss L-loss-ratio R-loss-ratio 
--------------------------------------------------------------------------------
1016        10     10     10     0           0      0      0.0000%      0.0000% 
1017        10     10     10     0           0      0      0.0000%      0.0000% 
1018        10     10     10     0           0      0      0.0000%      0.0000% 
1019        10     10     10     0           0      0      0.0000%      0.0000% 
1020        10     10     10     0           0      0      0.0000%      0.0000% 
1021        10     10     10     0           0      0      0.0000%      0.0000% 
--------------------------------------------------------------------------------
Average Local-loss  :          0    Average Local-loss Ratio  :         0.0000% 
Maximum Local-loss  :          0    Maximum Local-loss Ratio  :         0.0000% 
Minimum Local-loss  :          0    Minimum Local-loss Ratio  :         0.0000% 
Average Remote-loss :          0    Average Remote-loss Ratio :         0.0000% 
Maximum Remote-loss :          0    Maximum Remote-loss Ratio :         0.0000% 
Minimum Remote-loss :          0    Minimum Remote-loss Ratio :         0.0000% </pre>
</li></ol>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172362176__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>CE1 configuration file</p>
<pre class="screen">#
 sysname CE1
#
 vlan batch 2
#
 cfm version standard
 cfm enable
#
interface GigabitEthernet<span>0/1/1</span>
<span> portswitch</span>
 undo shutdown
 port link-type trunk
 port trunk allow-pass vlan 2
#
 cfm md md3
  ma ma3
   map vlan 2
   mep mep-id 3 interface GigabitEthernet<span>0/1/1</span> outward
   mep ccm-send mep-id 3 enable
   remote-mep mep-id 4
   remote-mep ccm-receive mep-id 4 enable
   test-id 1 mep 3 remote-mep 4
  loss-measure single-ended-synthetic continual send test-id 1 interval 1000 
#
return</pre>
</li><li><p>CE2 configuration file</p>
<pre class="screen">#
 sysname CE2
#
 vlan 2
#
 cfm version standard
 cfm enable
#
interface GigabitEthernet<span>0/1/1</span>
<span> portswitch</span>
 undo shutdown
 port link-type trunk
 port trunk allow-pass vlan 2
#
 cfm md md3
  ma ma3
   map vlan 2
   mep mep-id 4 interface GigabitEthernet<span>0/1/1</span> outward
   mep ccm-send mep-id 4 enable
   remote-mep mep-id 3
   remote-mep ccm-receive mep-id 3 enable
   test-id 1 mep 4 remote-mep 3
   loss-measure single-ended-synthetic receive test-id 1 time-out 300
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011531.html">Configuration Examples for Y.1731
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011543.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_y1731_cfg_0058.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>