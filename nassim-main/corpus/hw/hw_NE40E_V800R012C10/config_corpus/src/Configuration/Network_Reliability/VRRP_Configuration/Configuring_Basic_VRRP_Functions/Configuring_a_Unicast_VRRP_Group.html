
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Unicast VRRP Group">
<meta name="abstract" content="This section describes how to configure a unicast VRRP group to implement the master/backup status negotiation between two devices on a Layer 3 network.">
<meta name="description" content="This section describes how to configure a unicast VRRP group to implement the master/backup status negotiation between two devices on a Layer 3 network.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0100.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0137.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0150.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00604599">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00800033">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361754">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Unicast VRRP Group</title>
</head>
<body><a name="EN-US_TASK_0172361754"></a><a name="EN-US_TASK_0172361754"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Unicast VRRP Group</h1>
<div class="taskbody"><p>This section describes how to configure a unicast VRRP group to implement the master/backup status negotiation between two devices on a Layer 3 network.</p>
<div class="context"><a name="EN-US_TASK_0172361754__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>Common VRRP is multicast VRRP and only allows multicast VRRP Advertisement packets to be sent. Multicast VRRP Advertisement packets, however, can be forwarded within only one broadcast domain (for example, one VLAN or VSI). Therefore, common VRRP groups apply only to Layer 2 networks. This limitation means that common VRRP does not apply to Layer 3 devices that need to negotiate their master/backup status using VRRP. After a unicast VRRP group is configured on two devices on a Layer 3 network, the master device in this group sends unicast VRRP Advertisement packets to the backup device through the Layer 3 network, implementing the master/backup status negotiation between the two devices.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172361754__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface+loopback"><b><span class="cmdname">interface loopback</span></b></a> <i><span class="varname">loopback-number</span></i></span></span><p><p>The loopback interface view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>peer-ip</span></strong> <i><span class="varname">ip-address</span></i> [ <strong>source-ip</strong> <i><span class="varname">source-ip-value</span></i> ]</span><p><p>Unicast VRRP is enabled, a unicast VRRP group is created, and a peer IP address and a source IP address are configured for this group.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>Configuring a source IP address is recommended. If no source IP address is configured, the device listens to the source IP addresses in all VRRP packets, which poses security risks.</li><li>The&middot;peer&middot;IP&middot;address&middot;and&middot;source&middot;IP&middot;address&middot;cannot&middot;be&middot;the&middot;same.</li></ul>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>authentication-mode</span></strong> { <strong><span>md5</span></strong> <i><span class="varname">md5-key</span></i> | <a href="cmdqueryname=hmac-sha256"><b><span class="cmdname">hmac-sha256</span></b></a> <i><span class="varname">hmac-sha256</span></i> }</span><p><p>An authentication mode is configured for unicast VRRP Advertisement packets.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The same authentication mode and key must be configured on the two devices in a unicast VRRP group. If different authentication modes and keys are configured, the master/backup status negotiation fails.</p>
<p>For security purposes, you are advised not to use weak security algorithms in this feature. If you need to use such an algorithm, run the <strong>undo crypto weak-algorithm disable</strong> command to enable the weak security algorithm function. For security purposes, you are advised to use the HMAC-SHA256 algorithm.</p>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>priority</span></strong> <i><span class="varname">priority-value</span></i></span></span><p><p>A priority is configured for the device in the unicast VRRP group.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>timer</span></strong> <strong><span>advertise</span></strong> <i><span class="varname">advertise-interval</span></i></span></span><p><p>An interval at which unicast VRRP Advertisement packets are sent is configured.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>preempt-mode</span></strong> <strong><span>timer</span></strong> <strong><span>delay</span></strong> <i><span class="varname">delay-time</span></i></span><p><p>A preemption delay is set for the backup device in the unicast VRRP group.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172361754__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><div class="p">After creating a unicast VRRP group, perform the following operations to implement rapid master/backup VRRP switchovers and further improve network reliability:<ul><li><div class="p">Associate the unicast VRRP group with a VRRP-disabled interface.<ol><li>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p>The system view is displayed.</p>
</li><li>Run <span><a href="cmdqueryname=interface+loopback"><b><span class="cmdname">interface loopback</span></b></a> <i><span class="varname">loopback-number</span></i></span><p>The view of the interface on which the unicast VRRP group is configured is displayed.</p>
</li><li>Run <span><a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <strong><span>increased</span></strong> <i><span class="varname">value-increased</span></i> | <strong><span>reduced</span></strong> <i><span class="varname">value-reduced</span></i> ]</span><p>The unicast VRRP group is associated with a specified VRRP-disabled interface.</p>
</li><li>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p>The configuration is committed.</p>
</li></ol>
</div>
</li><li><div class="p">Configure the unicast VRRP group to track an interface monitoring group.<ol><li>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p>The system view is displayed.</p>
</li><li>Run <span><a href="cmdqueryname=interface+loopback"><b><span class="cmdname">interface loopback</span></b></a> <i><span class="varname">loopback-number</span></i></span><p>The view of the interface on which the unicast VRRP group is configured is displayed.</p>
</li><li>Run <a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>monitor-group</span></strong> <i><span class="varname">monitor-group-name</span></i> <strong><span>failure-ratio</span></strong> <i><span class="varname">failure-ratio-value</span></i> { [ <strong><span>reduced</span></strong> <i><span class="varname">reduced-value</span></i> ] | <strong><span>link</span></strong> }<p>The unicast VRRP group is configured to track an interface monitoring group. When the link failure ratio on the access or network side reaches a specified threshold, the unicast VRRP group performs a master/backup switchover.</p>
</li><li>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a><p>The configuration is committed.</p>
</li></ol>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">A unicast VRRP group can track three interface monitoring groups at the same time.<ul><li>A unicast VRRP group can track two interface monitoring groups on the access side in normal mode (<strong><span>link</span></strong> is not specified). When the link failure ratio on the access side reaches a specified threshold, the VRRP group reduces the priority of the local device to trigger the remote device to preempt the Master state.</li><li>A VRRP group can track one interface monitoring group on the network side in link mode. When the link failure ratio on the network side reaches a specified threshold, the local device in the VRRP group changes to the Initialize state and sends a VRRP Advertisement packet carrying a priority of 0 to the remote device to trigger the remote device to preempt the Master state.</li></ul>
</div>
</div></div>
</div>
</li><li><div class="p">Configure the unicast VRRP group to track a route monitoring group.<ol><li>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a><p>The system view is displayed.</p>
</li><li>Run <a href="cmdqueryname=interface+loopback"><b><span class="cmdname">interface loopback</span></b></a> <i><span class="varname">loopback-number</span></i><p>The view of the interface on which the unicast VRRP group is configured is displayed.</p>
</li><li>Run <a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>route-monitor-group</span></strong> <i><span class="varname">route-monitor-group-name</span></i> <strong><span>failure-ratio</span></strong> <i><span class="varname">failure-ratio-value</span></i> [ <strong><span>link</span></strong> | [ <strong><span>reduced</span></strong> <i><span class="varname">priority-value</span></i> ] ]<p>The unicast VRRP group is configured to track a route monitoring group. When the link failure ratio on the access or network side reaches a specified threshold, the unicast VRRP group performs a master/backup switchover.</p>
</li><li>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a><p>The configuration is committed.</p>
</li></ol>
</div>
</li></ul>
</div>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0100.html">VRRP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0137.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0150.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>