
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Associating VRRP with EFM">
<meta name="abstract" content="In this example, Virtual Router Redundancy Protocol (VRRP) is associated with Ethernet in the First Mile (EFM).">
<meta name="description" content="In this example, Virtual Router Redundancy Protocol (VRRP) is associated with Ethernet in the First Mile (EFM).">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0120.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0204.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0141.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00604599">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00604599">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001208740175">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Associating VRRP with EFM</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001208740175"></a><a name="EN-US_TASK_0000001208740175"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Associating VRRP with EFM</h1>
<div class="taskbody"><p>In this example, Virtual Router Redundancy Protocol (VRRP) is associated with Ethernet in the First Mile (EFM).</p>
<div class="context"><a name="EN-US_TASK_0000001208740175__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_context1677830880214023"><h4 class="sectiontitle">Networking Requirements</h4><div class="note" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_note153391322183419"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p18339152214349">The <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword201471219471">NE40E-M2K</span> is used as an example.</p>
</div></div>
<p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1441339766214023">On the network shown in <a href="#EN-US_TASK_0000001208740175__en-us_task_0172361820_fig_dc_vrp_vrrp_cfg_013801">Figure 1</a>, <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1412068269214307">Device</span>C is dual-homed to <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1742488589214307">Device</span>A and <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1850629843214307">Device</span>B. A VRRP group is deployed on both <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword472349775214307">Device</span>A and <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1360263907214307">Device</span>B to improve link reliability.</p>
<p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1680253066214023">If a link fails, negotiating the VRRP status takes a certain period of time. To speed up link switchovers, enable Bidirectional Forwarding Detection (BFD) to monitor links and configure a VRRP group to monitor a BFD session. If an interface or link on the master device fails, BFD rapidly detects the fault and notifies the VRRP group. A backup device then preempts the Master state and takes over. However, this method does not apply to some networks or devices that do not support BFD. If a device does not support BFD but supports EFM, you can use EFM to implement rapid switchovers.</p>
<p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1766119597214023">On the network shown in <a href="#EN-US_TASK_0000001208740175__en-us_task_0172361820_fig_dc_vrp_vrrp_cfg_013801">Figure 1</a>, <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword336379884214023">Device</span>C does not support BFD. Therefore, EFM is used to monitor the link between <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword299188576214307">Router</span>A and <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1126878283214307">Device</span>C, and peer BFD is used to monitor the link between <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1830491295214307">Device</span>A and <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword342781383214307">Device</span>B. Associate VRRP with EFM and peer BFD to implement a rapid master/backup VRRP switchover based on the status of EFM and peer BFD sessions.</p>
<div class="p" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1958933867214023"><div class="note" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_note729710512214023"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p6368227395">Interfaces 1 and 2 in this example represent GE <span>0/1/1</span> and GE <span>0/1/2</span>, respectively.</p>
</div></div>
</div>
<div class="fignone" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_fig_dc_vrp_vrrp_cfg_013801"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_fig_dc_vrp_vrrp_cfg_013801"></a><a name="en-us_task_0172361820_fig_dc_vrp_vrrp_cfg_013801"></a><span class="figcap"><b>Figure 1 </b>VRRP association with EFM</span><br><span><img class="vsd" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_image683305721214023" src="images/fig_dc_vrp_vrrp_cfg_013801.png"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001208740175__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_context1017723600214023"><div class="p" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_context1017723600214023"><h4 class="sectiontitle">Precautions</h4><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p96037475170">To improve security, you are advised to configure a VRRP security policy. For details, see "Example for Configuring a VRRP Group."</p>
<h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1467781704214023">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001208740175__en-us_task_0172361820_ol1763443870214023"><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li374575248214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1211623779214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li374575248214023"></a><a name="en-us_task_0172361820_li374575248214023"></a>Assign an IP address to each interface and configure a routing protocol.</p>
</li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li1955195242214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p171665900214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li1955195242214023"></a><a name="en-us_task_0172361820_li1955195242214023"></a>Create a VRRP group on the GE interfaces of <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1687075956214023">Device</span>A and <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1464063411214023">Device</span>B, and configure <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword19891127164016">Device</span>A as the master device and <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword18463153710404">Device</span>B as the backup device.</p>
</li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li610242837214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p2116947034214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li610242837214023"></a><a name="en-us_task_0172361820_li610242837214023"></a>Enable peer BFD on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1325391962214307">Device</span>A and <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword223792369214307">Device</span>B to monitor the link between them.</p>
</li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li1738078000214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1804379506214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li1738078000214023"></a><a name="en-us_task_0172361820_li1738078000214023"></a>Enable EFM on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword408234411214023">Device</span>A and <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1002591942214023">Device</span>B globally and on their GE interfaces.</p>
</li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li783947637214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p995760714214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li783947637214023"></a><a name="en-us_task_0172361820_li783947637214023"></a>Associate VRRP with peer BFD on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1108682320214307">Device</span>B.</p>
</li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li1549085472214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1535275323214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li1549085472214023"></a><a name="en-us_task_0172361820_li1549085472214023"></a>Associate VRRP with EFM on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1467889874214307">Device</span>A.</p>
</li></ol>
<div class="note" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_note1077576766214023"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0000001208740175__en-us_task_0172361820_ul1103111011214023"><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li994954785214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1897395953214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li994954785214023"></a><a name="en-us_task_0172361820_li994954785214023"></a>This example provides only the configurations for <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1910004195214023">Device</span>A and <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword331719186214023">Device</span>B.</p>
</li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li7546145602">To associate VRRP with EFM and peer BFD, perform the following operations:<ul id="EN-US_TASK_0000001208740175__en-us_task_0172361820_ul5994927104"><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li49942027107">Associate VRRP with EFM on the master device. When an EFM session enters the Discovery state, the master device's VRRP status becomes Initialize.</li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li1345512384010">Associate VRRP with peer BFD on a backup device. When a peer BFD session goes Down, the backup device increases its own VRRP priority and preempts the Master state.</li></ul>
</li></ul>
</div></div>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001208740175__1.4.3"></a><a name="1.4.3"></a>
<div class="p" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_context609196511214023"><h4 class="sectiontitle">Data Preparation</h4><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p2092175428214023">To complete the configuration, you need the following data:</p>
<ul id="EN-US_TASK_0000001208740175__en-us_task_0172361820_ul443674756214023"><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li127128832214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p2055534306214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li127128832214023"></a><a name="en-us_task_0172361820_li127128832214023"></a>IP address of each interface on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1719321611214307">Device</span>A and <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1755965772214307">Device</span>B (For details, see <a href="#EN-US_TASK_0000001208740175__en-us_task_0172361820_section_05">Configuration Files</a> in this section.)</p>
</li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li299906736214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p388392443214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li299906736214023"></a><a name="en-us_task_0172361820_li299906736214023"></a>VRRP group ID: 10; virtual IP address: 10.1.1.111; <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1897818853214023">Device</span>A's VRRP priority: 160; <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword472490979214023">Device</span>B's VRRP priority: 140; <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2466546154214">Device</span>B's VRRP priority increased by: 40</p>
</li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li1254133159214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p664008008214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li1254133159214023"></a><a name="en-us_task_0172361820_li1254133159214023"></a>Interval at which errored frames are checked on GE <span>0/1/1</span>: 5 seconds; interval at which errored frame seconds are checked on GE <span>0/1/1</span>: 120 seconds</p>
</li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li1932102705214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p749936648214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li1932102705214023"></a><a name="en-us_task_0172361820_li1932102705214023"></a>Local and remote discriminators of a peer BFD session</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001208740175__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001208740175__en-us_task_0172361820_steps1158415710214023"><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_step523332110214023"><span id="EN-US_TASK_0000001208740175__en-us_task_0172361820_cmd1697238305214023">Assign IP addresses to <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1270358061214023">Device</span>A's and <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1060387606214023">Device</span>B's interfaces and configure Open Shortest Path First (OSPF) on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword177845564216">Device</span>A and <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword136521612431">Device</span>B. For detailed <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword574811014214023">Device</span>C configuration, see Configuration Files in this section.</span><p><div class="p" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1180019955214023"># Configure <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword788813454214307">Device</span>A.<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen70980114214023">&lt;<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword424578537214023">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b530387307214023">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen476720912214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword700236430214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword663293450214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b650365059214023">sysname <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword744016784214023">Device</span>A</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen233542882214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword289610660214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1288418518214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b129742848214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen543989863214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword754462606214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1509567154214023">Device</span>A] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1053844118214023">interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen697353686214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword880305247214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1275442146214023">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1124480992214023">ip address 10.1.1.1 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1066683934214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword700533051214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1353635303214023">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b638206904214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1137861468214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1533423872214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword303769057214023">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b144550960214023">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1186208329214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1876173228214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1341054095214023">Device</span>A] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b937667672214023">ospf 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1263218371214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword994614729214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword477042055214023">Device</span>A-ospf-1] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1644909463214023">area 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen985229743214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword444701180214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword849640700214023">Device</span>A-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b846992174214023">network 10.1.1.0 0.0.0.255</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen306084707214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword737078908214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1399530860214023">Device</span>A-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1637463269214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1223933469214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword744430634214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword405938216214023">Device</span>A-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b119019679214023">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen689706576214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1019703805214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1242347575214023">Device</span>A-ospf-1] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b258828331214023">quit</strong></pre>
</div>
<div class="p" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p361909637214023"># Configure <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword176335988214307">Device</span>B.<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1620099552214023">&lt;<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1378286231214023">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1399585946214023">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1402523521214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1655936602214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2085888341214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1479097623214023">sysname <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1669098964214023">Device</span>B</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1968405541214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword68488692214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword38211652214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b398092776214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen495667003214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword494290920214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1080745844214023">Device</span>B] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1856884857214023">interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1401368801214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword980070505214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword845405045214023">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b897647265214023">ip address 10.1.1.2 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1655414840214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1101602078214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1169604159214023">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1768592275214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen2105801870214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword531595190214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword988386810214023">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1713471200214023">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1492537283214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1990783823214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1308492901214023">Device</span>B] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b2144423482214023">ospf 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1427103531214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1973628692214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword745014882214023">Device</span>A-ospf-1] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1529055595214023">area 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1963300425214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword783913660214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword424709275214023">Device</span>B-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1368779729214023">network 10.1.1.0 0.0.0.255</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen16884595214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword601280741214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1814854852214023">Device</span>B-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b70809677214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen626446817214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1497884517214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2141767085214023">Device</span>B-ospf-1-area-0.0.0.0] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b169085830214023">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen181572798214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword506561154214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1148138570214023">Device</span>B-ospf-1] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b2103799201214023">quit</strong></pre>
</div>
</p></li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_step169859951214023"><span id="EN-US_TASK_0000001208740175__en-us_task_0172361820_cmd830429594214023">Create a VRRP group and configure basic VRRP functions.</span><p><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1806541478214023"># Create VRRP group 10 on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1082355191214307">Device</span>A and set its VRRP priority to 160.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen450720435214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword195046772214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1091051682214023">Device</span>A]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b346143214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1058796530214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1395562779214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword407234119214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b865606948214023"> vrrp vrid 10 virtual-ip 10.1.1.111</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen732886171214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1919967004214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword796156406214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1382118868214023"> vrrp vrid 10 priority 160</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1820329006214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword305132497214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword170928043214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1012252951214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen463712241214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1108210755214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword572488854214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b884342996214023"> quit</strong></pre>
<p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1403897917214023"># Create VRRP group 10 on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword275499990214307">Device</span>B and set its VRRP priority to 140.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1801965678214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1275650209214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1523814662214023">Device</span>B]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b385701968214023"> interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1722063691214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2052558203214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword168412413214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b944885129214023"> vrrp vrid 10 virtual-ip 10.1.1.111</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1971455068214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword146792099214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1823581137214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b124905483214023"> vrrp vrid 10 priority 140</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen2063246137214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword549567162214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword248125987214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1441361094214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen473250256214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1959422467214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword351676124214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1432215492214023"> quit</strong></pre>
</p></li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_step748629608214023"><span id="EN-US_TASK_0000001208740175__en-us_task_0172361820_cmd111133883214023">Configure basic BFD functions.</span><p><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p212848224214023"># Configure <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword442868114214307">Device</span>A.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen37091090214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2015239697214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword21506995214023">Device</span>A]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1185209401214023"> bfd</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen201921368214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword269643002214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword699439444214023">Device</span>A-bfd]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b867252657214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen564925681214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1168256691214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword447221116214023">Device</span>A-bfd]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b879519912214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1830412447214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1434734915214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1643327889214023">Device</span>A]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1531238756214023"> bfd atob bind peer-ip 10.1.1.2 interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1256067197214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1830872953214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword188543208214023">Device</span>A-bfd-session-atob]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1180551060214023"> discriminator local 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen477751415214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword883405827214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1847282678214023">Device</span>A-bfd-session-atob]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1158148203214023"> discriminator remote 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen2071468503214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword199406152214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1344707344214023">Device</span>A-bfd-session-atob]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1566872293214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1554844952214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1914798393214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1974140856214023">Device</span>A-bfd-session-atob]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1463073857214023"> quit</strong></pre>
<p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p85622540214023"># Configure <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1776413132214307">Device</span>B.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen572563837214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1481214753214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1145917647214023">Device</span>B]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1461580719214023"> bfd</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen2082970213214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1258682819214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1968215983214023">Device</span>B-bfd]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b2129976695214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen551455374214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword334196786214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1175645397214023">Device</span>B-bfd]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b348052488214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen921798574214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1154239711214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1087039426214023">Device</span>B]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1547169707214023"> bfd btoa bind peer-ip 10.1.1.1 interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen2036094003214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1301773000214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword335415364214023">Device</span>B-bfd-session-btoa]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b192833271214023"> discriminator local 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen2035281412214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword393806083214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword154236927214023">Device</span>B-bfd-session-btoa]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b488722175214023"> discriminator remote 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1967132424214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword80885120214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword79063289214023">Device</span>B-bfd-session-btoa]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b340126891214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1997485773214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword918828057214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword188248422214023">Device</span>B-bfd-session-btoa]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b110211771214023"> quit</strong></pre>
<p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1255593215214023">After the configuration is complete, run the <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1536462284214023">display bfd session</strong> command on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword474597186214307">Device</span>A or <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword226368106214307">Device</span>B. The command output shows that a peer BFD session has been created. The following example uses the command output on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2081765921214307">Device</span>A.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen933450518214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1028242630214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword872975001214023">Device</span>A]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1580157849214023"> display bfd session all</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen804282605214023"><span>(w): State in WTR 
(*): State is invalid</span>
--------------------------------------------------------------------------------
Local Remote PeerIpAddr      State     Type        InterfaceName
--------------------------------------------------------------------------------
1     2      10.1.1.2        <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1650635152214023">Up</strong>        S_IP_IF     GigabitEthernet<span>0/1/1</span>
--------------------------------------------------------------------------------
     Total UP/DOWN Session Number : 1/0   </pre>
</p></li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_step872805918214023"><span id="EN-US_TASK_0000001208740175__en-us_task_0172361820_cmd1935754816214023">Configure EFM.</span><p><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1567345881214023"># Enable EFM on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword949278499214023">Device</span>A globally and on its GE <span>0/1/1</span>, and set the intervals at which errored frames and errored frame seconds are checked on the interface to 5 seconds and 120 seconds, respectively.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1588688919214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword972418809214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1092369193214023">Device</span>A]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1037138988214023"> efm enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1027703716214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1436994453214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword964677409214023">Device</span>A]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1399172637214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen401277224214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1024757430214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword279277070214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b2144679852214023"> efm enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen15661880214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword114597657214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1897473487214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b287327591214023"> efm error-frame period 5</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1702190714214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1111101339214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1909893908214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1855408940214023"> efm error-frame threshold 5</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen147439024214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword221077435214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword501740735214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b642351892214023"> efm error-frame notification enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen178795199214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword15198276214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2034354386214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1112284159214023"> efm error-frame-second period 120</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen132160085214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword562024050214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1305128844214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1025850500214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1579605565214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword340883851214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1895997208214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1236288121214023"> quit</strong></pre>
<p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p2027248341214023"># Enable EFM on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1700899895214023">Device</span>B globally and on its GE <span>0/1/1</span>, and set the intervals at which errored frames and errored frame seconds are checked on the interface to 5 seconds and 120 seconds, respectively.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen74591361214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1375524335214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword776038390214023">Device</span>B]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b718942779214023"> efm enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen2042603097214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword931495182214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword483737244214023">Device</span>B]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b253899387214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen256101235214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2131663632214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword400980123214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b671369792214023"> efm enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1000335649214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1439283715214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword785598197214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1487935374214023"> efm error-frame period 5</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen2138753757214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1242677607214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1404073774214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1450314505214023"> efm error-frame threshold 5</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen213998931214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword104672757214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword445920006214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1243833905214023"> efm error-frame notification enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1462816825214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1329526642214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword786925059214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b266756368214023"> efm error-frame-second period 120</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1331062958214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword804490723214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword518539949214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b35280290214023"> commit</strong></pre>
<p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p669262133214023">After the configuration is complete, run the <a href="cmdqueryname=display+efm+session+all"><b><span class="cmdname" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_cmdname175840652214023">display efm session all</span></b></a> command on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1897592551214307">Device</span>A or <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2051895677214307">Device</span>B. The command output shows that an EFM session has been created. The following example uses the command output on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1832028327214307">Device</span>A.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen839225074214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2122240003214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword931837398214023">Device</span>A] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b519698092214023">display efm session all</strong>
  Interface                 EFM State                   Loopback Timeout
  ----------------------------------------------------------------------
  GigabitEthernet<span>0/1/1</span>      <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b774341887214023">detect</strong>                      --                      </pre>
</p></li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_step2039070321214023"><span id="EN-US_TASK_0000001208740175__en-us_task_0172361820_cmd1110846221214023">Associate VRRP with peer BFD.</span><p><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1735843463214023"># Associate VRRP with peer BFD on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1677642456214307">Device</span>B, and configure <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2055805625214307">Device</span>B to increase its own VRRP priority by 40 if the peer BFD session goes Down.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen651561703214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword539908752214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1127986289214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b553389342214023"> vrrp vrid 10 track bfd-session 2 increased 40</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen61594488214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1531866218214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2041565690214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b104985689214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen682355066214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword236060462214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1065888825214023">Device</span>B-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b433749500214023"> quit</strong></pre>
<p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1800029997214023">After the configuration is complete, run the <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1093659543214023">display vrrp</strong> command on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword849749729214307">Device</span>A and <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1777933768214307">Device</span>B. The command output on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword660920907214307">Device</span>A shows that <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword524748965214307">Device</span>A is the master device. The command output on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword400539539214307">Device</span>B shows that <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword51418216214307">Device</span>B is the backup device and that VRRP is associated with peer BFD.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1733256138214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1456179696214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1288509460214023">Device</span>A] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b794451992214023">display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen2013581766214023">GigabitEthernet<span>0/1/1</span> | Virtual Router 10
State          : Master
Virtual IP     : 10.1.1.111
Master IP      : 10.1.1.1
Local IP       : 10.1.1.1
PriorityRun    : 160
PriorityConfig : 160
MasterPriority : 160
Preempt        : YES   Delay Time : 0s
Hold Multiplier: 4
TimerRun       : 1
TimerConfig    : 1
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0101
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Create Time       : 2013-03-11 12:57:42
Last Change Time  : 2013-03-11 12:57:47</pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen304090765214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1337588863214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword997203645214023">Device</span>B]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1699954838214023">display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1530309434214023">GigabitEthernet<span>0/1/1</span> | Virtual Router 10
State          : Backup
Virtual IP     : 10.1.1.111
Master IP      : 10.1.1.1
Local IP       : 10.1.1.2
PriorityRun    : 140
PriorityConfig : 140
MasterPriority : 160
Preempt        : YES   Delay Time : 0s
Hold Multiplier: 4
TimerRun       : 1
TimerConfig    : 1
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0102
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Track BFD      : 2  Priority increased : 40
BFD-Session State : UP
Create Time       : 2013-03-11 12:58:02
Last Change Time  : 2013-03-11 12:58:07</pre>
</p></li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_step1857656660214023"><span id="EN-US_TASK_0000001208740175__en-us_task_0172361820_cmd1518224534214023">Associate VRRP with EFM.</span><p><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p8197122203915"># Associate VRRP with EFM on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword822547695214307">Device</span>A.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1136978866214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword427704439214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword800739764214023">Device</span>A]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b933813797214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen2045161103214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1900647998214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword371653261214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b402503139214023"> vrrp vrid 10 track efm interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen61433589214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword890682475214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1739337735214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1325391423214023"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen440972095214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword19667037214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1978892868214023">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b2084289466214023"> quit</strong></pre>
</p></li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_step1175866842214023"><span id="EN-US_TASK_0000001208740175__en-us_task_0172361820_cmd1649493800214023">Verify the configuration.</span><p><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p2097901844214023"># Run the <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1628738208214023">shutdown </strong>command on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1696542950214307">Device</span>A's GE <span>0/1/1</span> to simulate a link fault.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen917407258214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1167816755214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1643151352214023">Device</span>A] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b915973030214023">interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen977343078214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1583026160214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword745768437214023">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b30912122214023">shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen332197914214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1789570620214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1804934105214023">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b797538635214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen14216319214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword336720430214023">*</span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword640857165214023">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b582693289214023">quit</strong></pre>
<p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p860983619214023"># Run the <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b941196552214023">display vrrp</strong> command on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword603596616214307">Device</span>A. The command output shows that <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1716569723214307">Device</span>A's VRRP status is <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1196035779214307">Initialize</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1226723478214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2060321698214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1800454058214023">Device</span>A] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b950708074214023">display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1204283891214023">GigabitEthernet<span>0/1/1</span> | Virtual Router 10
State          : Initialize
Virtual IP     : 10.1.1.111
Master IP      : 0.0.0.0
Local IP       : 10.1.1.1
PriorityRun    : 160
PriorityConfig : 160
MasterPriority : 0
Preempt        : YES   Delay Time : 0s
Hold Multiplier: 4
TimerRun       : 1
TimerConfig    : 1
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0101
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Track EFM      : GigabitEthernet<span>0/1/1</span>
EFM state      : DOWN
Create Time       : 2013-03-11 12:57:42
Last Change Time  : 2013-03-11 12:57:47</pre>
<p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p890100128214023"># Run the <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b284067197214023">display vrrp</strong> command on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1525613086214307">Device</span>B. The command output shows that <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1921375224214307">Device</span>B's VRRP status is <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b339389567214307">Master</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen562618864214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2014728056214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword12291296214023">Device</span>B] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1909656161214023">display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen367386588214023">GigabitEthernet<span>0/1/1</span> | Virtual Router 10
State          : Master
Virtual IP     : 10.1.1.111
Master IP      : 10.1.1.2
Local IP       : 10.1.1.2
PriorityRun    : 180
PriorityConfig : 140
MasterPriority : 180
Preempt        : YES   Delay Time : 0s
Hold Multiplier: 4
TimerRun       : 1
TimerConfig    : 1
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0102
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Track BFD      : 2  Priority increased : 40
BFD-Session State : Down
Create Time       : 2013-03-11 12:58:02
Last Change Time  : 2013-03-11 12:58:07</pre>
<p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p695089960214023"># Run the <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b1831084333214023">display efm session all</strong> command on <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword732201405214307">Device</span>A. The command output shows that the status of the EFM session is <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b620662854214307">discovery</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen864882960214023">[<span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1204984263214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1399717031214023">Device</span>A] <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b610013465214023">display efm session all</strong>
  Interface                 EFM State                   Loopback Timeout
  ----------------------------------------------------------------------
  GigabitEthernet<span>0/1/0</span>      <strong id="EN-US_TASK_0000001208740175__en-us_task_0172361820_b2030615483214023">discovery</strong>                   --
</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_section_05"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_section_05"></a><a name="en-us_task_0172361820_section_05"></a><a name="EN-US_TASK_0000001208740175__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul id="EN-US_TASK_0000001208740175__en-us_task_0172361820_ul511264856214023"><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li673395888214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p525869926214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li673395888214023"></a><a name="en-us_task_0172361820_li673395888214023"></a><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1214154969214307">Device</span>A configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen1863818840214023">#
sysname <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1531503431214023">Device</span>A
#
efm enable
#
bfd
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.1.1 255.255.255.0
 vrrp vrid 10 virtual-ip 10.1.1.111
 vrrp vrid 10 priority 160
 vrrp vrid 10 track efm interface GigabitEthernet<span>0/1/1</span>
 efm enable
 efm error-frame period 5
 efm error-frame threshold 5
 efm error-frame notification enable
 efm error-frame-second period 120 
#
bfd atob bind peer-ip 10.1.1.2 interface gigabitethernet<span>0/1/1</span>
 discriminator local 1
 discriminator remote 2
 #
ospf 1
 area 0.0.0.0
  network 10.1.1.0 0.0.0.255
#
return</pre>
</li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li593799899214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p638394884214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li593799899214023"></a><a name="en-us_task_0172361820_li593799899214023"></a><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword186471968214307">Device</span>B configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen26802448214023">#
 sysname <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword1560667054214023">Device</span>B
#
efm enable
#
bfd
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.1.2 255.255.255.0
 vrrp vrid 10 virtual-ip 10.1.1.111
 vrrp vrid 10 priority 140
 vrrp vrid 10 track bfd-session 2 increased 40
 efm enable
 efm error-frame period 5
 efm error-frame threshold 5
 efm error-frame notification enable
 efm error-frame-second period 120  
#
bfd btoa bind peer-ip 10.1.1.1 interface gigabitethernet<span>0/1/1</span>
 discriminator local 2
 discriminator remote 1
 #
ospf 1
 area 0.0.0.0
  network 10.1.1.0 0.0.0.255
#
return</pre>
</li><li id="EN-US_TASK_0000001208740175__en-us_task_0172361820_li1956059429214023"><p id="EN-US_TASK_0000001208740175__en-us_task_0172361820_p1811154927214023"><a name="EN-US_TASK_0000001208740175__en-us_task_0172361820_li1956059429214023"></a><a name="en-us_task_0172361820_li1956059429214023"></a><span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword707755045214307">Device</span>C configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_screen345652277214023">#
 sysname <span class="keyword" id="EN-US_TASK_0000001208740175__en-us_task_0172361820_keyword2111468228214023">Device</span>C
#
 vlan batch 10
#
efm enable
#
interface Vlanif10
 ip address 10.1.1.3 255.255.255.0
#
interface GigabitEthernet<span>0/1/1</span>
 portswitch
 undo shutdown
 port default vlan 10
 efm enable
 efm error-frame period 5
 efm error-frame threshold 5
 efm error-frame notification enable
 efm error-frame-second period 120  
#
interface GigabitEthernet<span>0/1/2</span>
 portswitch
 undo shutdown
 port default vlan 10
 efm enable
 efm error-frame period 5
 efm error-frame threshold 5
 efm error-frame notification enable
 efm error-frame-second period 120
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0120.html">Configuration Examples for VRRP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0204.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0141.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>