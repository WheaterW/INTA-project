
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Creating a U-BFD Echo Session">
<meta name="abstract" content="A BFD session can be established on a BFD-enabled device to rapidly detect faults in a direct link.">
<meta name="description" content="A BFD session can be established on a BFD-enabled device to rapidly detect faults in a direct link.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bfd_cfg_0108.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bfd_cfg_0109.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_bfd_cfg_0001g.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="q00824768,w00606909,m00390128">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="q00824768,p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="s00826690">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361640">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Creating a U-BFD Echo Session</title>
</head>
<body><a name="EN-US_TASK_0172361640"></a><a name="EN-US_TASK_0172361640"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Creating a U-BFD Echo Session</h1>
<div class="taskbody"><p>A BFD session can be established on a BFD-enabled device to rapidly detect faults in a direct link.</p>
<div class="steps"><a name="EN-US_TASK_0172361640__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Create a U-BFD Echo session.</span><p><div class="p">Run either of the following commands to create a U-BFD echo session based on the IPv4 or IPv6 network and enter the BFD session view:<ul><li><p>For an IPv4 network, run the <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a><span> <i><span class="varname">sessname-value</span></i> <strong><span>bind</span></strong> <strong><span>peer-ip</span></strong> <i><span class="varname">ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <strong><span>interface</span></strong> <i><span class="varname">ifType</span></i> <i><span class="varname">ifNum</span></i> [ <strong><span>source-ip</span></strong> <i><span class="varname">ip-address</span></i> ] <strong><span>one-arm-echo</span></strong></span>  [ <strong><span>destination-ip</span></strong> <i><span class="varname">ip-address</span></i> ] command.</p>
</li><li><p>For an IPv6 network, run the <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a><span> <i><span class="varname">sessname-value</span></i> <strong><span>bind peer-ipv6</span></strong> <span><i><span class="varname">ipv6-address</span></i></span> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-name</span></i> ] <strong><span>interface</span></strong> <i><span class="varname">ifType</span></i> <i><span class="varname">ifNum</span></i> [ <strong><span>source-ipv6</span></strong> <i><span class="varname">source-ipv6</span></i> ] <strong><span>one-arm-echo</span></strong></span> [ <strong><span>destination-ipv6</span></strong> <i><span class="varname">ipv6-address</span></i> ] command.</p>
</li></ul>
</div>
<p>In active-active networking, you must set <strong><span>destination-ip</span></strong> as the destination address of outgoing BFD packets. As shown in <a href="#EN-US_TASK_0172361640__fig16404105413314">Figure 1</a>, DeviceA and DeviceB are Layer 3 centralized gateways and work in active-active mode. DeviceA and DeviceB use the BDIF interface to establish a Layer 2 tunnel with the remote DeviceC using the same virtual address to implement network connectivity. To improve reliability, configure a U-BFD session on DeviceA and DeviceB to detect the status of the service links to DeviceC. Because the BDIF interface addresses of DeviceA and DeviceB are the same and the routes of BFD packets are the same, BFD response packets may return to the other device and are discarded. As a result, U-BFD cannot take effect. Therefore, you must set <strong><span>destination-ip</span></strong> to specify the IP address of interface 1 on the local device to ensure that BFD response packets can be sent back to the correct initiating device.</p>
<div class="fignone" id="EN-US_TASK_0172361640__fig16404105413314"><a name="EN-US_TASK_0172361640__fig16404105413314"></a><a name="fig16404105413314"></a><span class="figcap"><b>Figure 1 </b>U-BFD for active-active networking</span><br><span><img class="vsd" src="figure/en-us_image_0000001239181465.png" width="NaN" height="NaN"></span><br></div>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>U-BFD echo sessions can apply to single-hop detection only.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=discriminator"><b><span class="cmdname">discriminator</span></b></a> <strong><span>local</span></strong> <i><span class="varname">discr-value</span></i></span><p><p>A local discriminator is configured for the BFD session.</p>
<p>U-BFD echo can be configured only on the device that supports BFD at one end of a link. Therefore, you need to configure only a local discriminator for a U-BFD echo session.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bfd_cfg_0108.html">Configuring a U-BFD Echo Session
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bfd_cfg_0109.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_bfd_cfg_0001g.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>