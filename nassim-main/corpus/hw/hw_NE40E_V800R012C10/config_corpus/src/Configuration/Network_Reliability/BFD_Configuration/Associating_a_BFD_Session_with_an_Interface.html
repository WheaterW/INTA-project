
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Associating a BFD Session with an Interface">
<meta name="abstract" content="This section describes how to associate a BFD session with an interface to trigger rapid route convergence if a fault occurs. It can be used only in multicast IP single-hop BFD sessions and link-bundle single-hop BFD sessions.">
<meta name="description" content="This section describes how to associate a BFD session with an interface to trigger rapid route convergence if a fault occurs. It can be used only in multicast IP single-hop BFD sessions and link-bundle single-hop BFD sessions.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bfd_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bfd_cfg_0032.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bfd_cfg_2001.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="q00824768,w00606909,m00390128">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="BFD">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="q00824768,p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="s00826690">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361661">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Associating a BFD Session with an Interface</title>
</head>
<body><a name="EN-US_TASK_0172361661"></a><a name="EN-US_TASK_0172361661"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Associating a BFD Session with an Interface</h1>
<div class="taskbody"><p><span>This section describes how to associate a BFD session with an interface to trigger rapid route convergence if a fault occurs. It can be used only in multicast IP single-hop BFD sessions and link-bundle single-hop BFD sessions.</span></p>
<div class="context"><a name="EN-US_TASK_0172361661__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>As shown in <a href="#EN-US_TASK_0172361661__fig_dc_vrp_bfd_cfg_200001">Figure 1</a>, two devices are directly connected at the network layer but are segmented physically by transmission devices. If the link fails, the devices take a long time to detect the fault and age the direct route. As a result, the network interruption lasts for a long time.</p>
<div class="fignone" id="EN-US_TASK_0172361661__fig_dc_vrp_bfd_cfg_200001"><a name="EN-US_TASK_0172361661__fig_dc_vrp_bfd_cfg_200001"></a><a name="fig_dc_vrp_bfd_cfg_200001"></a><span class="figcap"><b>Figure 1 </b>Link with transmission devices between two ends</span><br><span><img class="vsd" src="images/fig_dc_vrp_bfd_cfg_200001.png" width="NaN" height="NaN"></span><br></div>
<p>To speed up route convergence, associate the BFD status with the interface status so that a change in the BFD session status will trigger the protocol status change on the interface rapidly, triggering fast route convergence. When BFD detects a fault, it enters the down state, and then the bound interface also enters the BFD down state.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172361661__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><div class="p">Before associating a BFD session with an interface, complete the following tasks:<ul><li><p>Enable BFD globally.</p>
</li><li>Create a multicast IP single-hop BFD session or a link-bundle single-hop BFD session.</li><li><p>Set up a BFD session and ensure that the BFD session is up.</p>
</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172361661__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <i><span class="varname">session-name</span></i></span><p><p>The BFD session view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=process-interface-status"><b><span class="cmdname">process-interface-status</span></b></a> [ <strong><span>sub-if</span></strong> ]<span> [ <strong><span>reboot-no-impact</span></strong> ]</span></span><p><p>The association is configured between the BFD session status and the status of the bound interface.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">After the <a href="cmdqueryname=process-interface-status"><b><span class="cmdname">process-interface-status</span></b></a> command is run, the following situations occur:<ul><li>If a BFD session detects a fault and goes down, the associated interface status becomes BFD_Down. As a result, the direct route of the interface is removed from the routing table on the control plane, but BFD packets can still be sent.</li><li>The BFD status will not be reported to the interface if the BFD status changes while the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command is being executed. This prevents an incorrect BFD status message (when the BFD session is not established or does not go up) from causing an incorrect interface status change. When the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command is run and the BFD status changes, a BFD session reports the BFD status to the interface to trigger the status of the associated interface change.</li><li>If multiple single-hop BFD sessions with a multicast IP address configured as the peer address are bound to the same interface, the <a href="cmdqueryname=process-interface-status"><b><span class="cmdname">process-interface-status</span></b></a> command can be configured only for one BFD session. In other words, the interface status is affected by only one BFD session. Between link-bundle sessions and multicast sessions, and between link-bundle sessions, one interface can be bound to multiple BFD sessions enabled with the <a href="cmdqueryname=process-interface-status"><b><span class="cmdname">process-interface-status</span></b></a> command. When an interface is bound to multiple BFD sessions that are associated with the interface status, the protocol status of the associated interface goes down as long as one BFD session is down. After the protocol status of the associated interface goes down, the protocol status of the associated interface goes up as long as one BFD session is up.</li><li>Before you associate the BFD status with the interface status, ensure that the BFD configurations on two devices are correct and consistent. If the local BFD session is in the down state, check whether the BFD configuration on the peer device is correct and whether the remote BFD session is shut down.</li><li>If the BFD session status must be synchronized to the interface status immediately, ensure that the BFD configurations on the two routers are correct, and then run the <a href="cmdqueryname=shutdown"><b><span class="cmdname">shutdown</span></b></a> and <a href="cmdqueryname=undo+shutdown"><b><span class="cmdname">undo shutdown</span></b></a> commands to shut down and start the BFD session. When the <a href="cmdqueryname=undo+shutdown"><b><span class="cmdname">undo shutdown</span></b></a> command is run, a detection timer is initiated. If the BFD session goes up through negotiation before the timer expires, the BFD session notifies the bound interface of a BFD up event. Otherwise, the BFD session considers the link faulty and notifies the bound interface of a BFD down event. This way, the BFD session status is synchronized with the interface status in real time.</li><li>After the <a href="cmdqueryname=shutdown"><b><span class="cmdname">shutdown</span></b></a> command is run, the BFD session status will not be reported to the bound interface.</li><li>If the <a href="cmdqueryname=process-interface-status"><b><span class="cmdname">process-interface-status</span></b></a> [ <strong><span>sub-if</span></strong> ] command configured for a BFD session exists in the configuration file, after the device is restarted, the BFD session reports a BFD down event to the interface so that the interface sets its protocol state to down. This prevents traffic loss when the BFD session is up but the interface is down during initialization of the device.</li></ul>
</div>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172361661__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Checking the Configuration</h4><p>Run the following commands to check the configuration.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+bfd+session"><b><span class="cmdname">display bfd session</span></b></a> command to check information about BFD sessions.</p>
</li></ul>
<p>After completing the configurations, run the <a href="cmdqueryname=display+bfd+session"><b><span class="cmdname">display bfd session</span></b></a> command. The command output shows that <strong>Proc Interface Status</strong> is <strong>Enable</strong>.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bfd_cfg_0000.html">BFD Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bfd_cfg_0032.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bfd_cfg_2001.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>