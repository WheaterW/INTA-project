
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Dual-ended Frame Loss Measurement in VLAN Networking">
<meta name="abstract" content="This section provides an example showing how to configure dual-ended frame loss measurement in VLAN networking.">
<meta name="description" content="This section provides an example showing how to configure dual-ended frame loss measurement in VLAN networking.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011531.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011540.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011542.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,c00376497,z00603461,w00800033,jwx1168690,w00556928,w00437000,eoam-vrp,w00606909,m00390128,l00455378,wwx1270540">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="p00915595">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362173">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Dual-ended Frame Loss Measurement in VLAN Networking</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172362173"></a><a name="EN-US_TASK_0172362173"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Dual-ended Frame Loss Measurement in VLAN Networking</h1>
<div class="taskbody"><p>This section provides an example showing how to configure dual-ended frame loss measurement in VLAN networking.</p>
<div class="context"><a name="EN-US_TASK_0172362173__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>With the increasing popularization and wide application of the Internet, various value-added services such as IPTV, video conferencing, and VoIP services are widely deployed. Link connectivity and network performance determine the Quality of Services (QoS) on bearer networks. Therefore, performance monitoring is especially important for service transmission channels.</p>
<p>As shown in <a href="#EN-US_TASK_0172362173__fig_dc_vrp_cfg_01154101">Figure 1</a>, CFM is configured between CEs. To provide high-quality audio services, providers hope to monitor the frame loss over mobile bearer links in real time, while monitoring link connectivity. Monitoring the frame loss over mobile bearer links allows the providers to respond quickly to video service quality deterioration.</p>
<div class="fignone" id="EN-US_TASK_0172362173__fig_dc_vrp_cfg_01154101"><a name="EN-US_TASK_0172362173__fig_dc_vrp_cfg_01154101"></a><a name="fig_dc_vrp_cfg_01154101"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for configuring Y.1731 function on a VLAN networking</span><div class="note" id="EN-US_TASK_0172362173__en-us_task_0172362170_note327807523214024"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172362173__en-us_task_0172362170_p1165484506214024">Interfaces 1 and 2 in this example are GE <span>0/1/1</span>, GE <span>0/1/2</span> respectively.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0172362173__en-us_task_0172362170_image619978427214024" src="images/fig_dc_vrp_cfg_01154001.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362173__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><div class="p">The configuration roadmap is as follows:<ol><li><p>Configure dual-ended frame loss measurement for the end-to-end link between the CEs to collect frame loss statistics.</p>
</li></ol>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362173__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>ID of the VLAN to which each CE interface belongs</p>
</li><li><p>Names of the MD and MA on CE1 and CE2</p>
</li><li><p>Interval at which LMMs are sent</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362173__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure basic Ethernet CFM functions and specify the MEP type as outward.</span><p><p>Configure basic Ethernet CFM functions on each CE. Specify the Ethernet CFM protocol in the version of IEEE Standard 802.1ag-2007. Create an MD named <strong>md3</strong> and an MA named <strong>ma3</strong>, and bind the MA to the VLAN.</p>
<p># Configure CE1.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname CE1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong>vlan 2</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong>interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1-GigabitEthernet<span>0/1/1</span>] <strong>portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/1</span>] <strong>port link-type trunk</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/1</span>] <strong>port trunk allow-pass vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong>cfm enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1] <strong>cfm md md3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3] <strong>ma ma3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>map vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>mep mep-id 3 interface gigabitethernet<span>0/1/1</span> outward</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>mep ccm-send mep-id 3 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>remote-mep mep-id 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>remote-mep ccm-receive mep-id 4 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>test-id 1 mep 3 remote-mep 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>commit</strong></pre>
<p># Configure CE2.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname CE2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2] <strong>vlan 2</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2] <strong>interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2-GigabitEthernet<span>0/1/1</span>]<strong>portswitch</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2-GigabitEthernet<span>0/1/1</span>]<strong>port link-type trunk</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>]<strong>port trunk allow-pass vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>]<strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2] <strong>cfm enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2] <strong>cfm md md3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3] <strong>ma ma3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>map vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>mep mep-id 4 interface gigabitethernet<span>0/1/1</span> outward</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>mep ccm-send mep-id 4 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>remote-mep mep-id 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>remote-mep ccm-receive mep-id 3 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>test-id 1 mep 4 remote-mep 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>commit</strong></pre>
</p></li><li><span>Enable dual-ended frame loss measurement in a VLAN.</span><p><p># Configure CE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1-md-md3-ma-ma3] <strong>loss-measure dual-ended continual test-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3-ma-ma3] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-md-md3] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1] <strong>commit</strong></pre>
<p># Configure CE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2-md-md3-ma-ma3] <strong>loss-measure dual-ended continual test-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3-ma-ma3] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-md-md3] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><div class="p"># Run the <strong>display y1731 statistics-type dual-loss</strong> command on CE1 to view dual-ended frame loss statistics.<pre class="screen">&lt;CE1&gt; <strong>display y1731 statistic-type dual-loss</strong>
Latest dual-ended loss statistics of test-id 1:
--------------------------------------------------------------------------------
Index    Local-loss    Local-loss ratio    Remote-loss    Remote-loss ratio
--------------------------------------------------------------------------------
    1             0             0.0000%              0              0.0000%
    2             0             0.0000%              0              0.0000%
    3             0             0.0000%              0              0.0000%
    4             0             0.0000%              0              0.0000%
    5             0             0.0000%              0              0.0000%
    6             0             0.0000%              0              0.0000%
    7             0             0.0000%              0              0.0000%
    8             0             0.0000%              0              0.0000%
    9             0             0.0000%              0              0.0000%
--------------------------------------------------------------------------------
Average Local-loss  :          0    Average Local-loss Ratio  :   0.0000%
Maximum Local-loss  :          0    Maximum Local-loss Ratio  :   0.0000%
Minimum Local-loss  :          0    Minimum Local-loss Ratio  :   0.0000%
Average Remote-loss :          0    Average Remote-loss Ratio :   0.0000%
Maximum Remote-loss :          0    Maximum Remote-loss Ratio :   0.0000%
Minimum Remote-loss :          0    Minimum Remote-loss Ratio :   0.0000%   
</pre>
</div>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172362173__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>CE1 configuration file</p>
<pre class="screen">#
 sysname CE1
#
 vlan batch 2
#
 cfm version standard
 cfm enable
#
interface GigabitEthernet<span>0/1/1</span>
 portswitch
 undo shutdown
 port link-type trunk
 port trunk allow-pass vlan 2
#
 cfm md md3
  ma ma3
   map vlan 2
   mep mep-id 3 interface GigabitEthernet<span>0/1/1</span> outward
   mep ccm-send mep-id 3 enable
   remote-mep mep-id 4
   remote-mep ccm-receive mep-id 4 enable
   test-id 1 mep 3 remote-mep 4
   loss-measure dual-ended continual test-id 1
#
return</pre>
</li><li><p>CE2 configuration file</p>
<pre class="screen">#
 sysname CE2
#
 vlan 2
#
 cfm version standard
 cfm enable
#
interface GigabitEthernet<span>0/1/1</span>
 portswitch
 undo shutdown
 port link-type trunk
 port trunk allow-pass vlan 2
#
 cfm md md3
  ma ma3
   map vlan 2
   mep mep-id 4 interface GigabitEthernet<span>0/1/1</span> outward
   mep ccm-send mep-id 4 enable
   remote-mep mep-id 3
   remote-mep ccm-receive mep-id 3 enable
   test-id 1 mep 4 remote-mep 3
   loss-measure dual-ended continual test-id 1
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011531.html">Configuration Examples for Y.1731
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011540.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011542.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>