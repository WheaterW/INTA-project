
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling BGP Peers to Exchange Labeled IPv4 Routes">
<meta name="abstract" content="In inter-AS VPN Option C networking, a BGP LSP needs to be established between ASs, and labeled IPv4 routes need to be exchanged between BGP peers.">
<meta name="description" content="In inter-AS VPN Option C networking, a BGP LSP needs to be established between ASs, and labeled IPv4 routes need to be exchanged between BGP peers.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0186.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0192.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0189.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,l00468467,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00847023">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369350">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Enabling BGP Peers to Exchange Labeled IPv4 Routes</title>
</head>
<body><a name="EN-US_TASK_0172369350"></a><a name="EN-US_TASK_0172369350"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling BGP Peers to Exchange Labeled IPv4 Routes</h1>
<div class="taskbody"><p>In inter-AS VPN Option C networking, a BGP LSP needs to be established between ASs, and labeled IPv4 routes need to be exchanged between BGP peers.</p>
<div class="steps-unordered"><a name="EN-US_TASK_0172369350__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure PEs.</span><ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i> command to enter the BGP view.</span></li><li><span>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>as-number</span></strong> <i><span class="varname">as-number</span></i> command to configure a BGP peer.</span></li><li><span>Run the <a href="cmdqueryname=ipv4-family+labeled-unicast"><b><span class="cmdname">ipv4-family labeled-unicast</span></b></a> command to enter the BGP labeled-unicast address family view.</span></li><li><span>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>enable</span></strong> command to enable the function to exchange labeled IPv4 routes with ASBRs in the local AS.</span></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li><span>Configure ASBRs.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the view of the interface connected to the peer ASBR.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ip+address"><b><span class="cmdname">ip address</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } command to configure an IP address for the interface.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=mpls"><b><span class="cmdname">mpls</span></b></a> command to enable MPLS.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i> command to enter the BGP view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>as-number</span></strong> <i><span class="varname">as-number</span></i> command to configure the peer ASBR as an EBGP peer.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv4-family+labeled-unicast"><b><span class="cmdname">ipv4-family labeled-unicast</span></b></a> command to enter the BGP labeled-unicast address family view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>enable</span></strong> command to specify a peer address in the labeled-unicast address family view, so that the local ASBR can exchange labeled IPv4 routes with the peer ASBR.</span><p><p>In inter-AS Option C networking, an inter-AS VPN LSP must be established, and the public network routes advertised between PEs and ASBRs must carry MPLS labels.</p>
<p>The local ASBR establishes an EBGP peer relationship with the remote ASBR to exchange labeled IPv4 routes.</p>
<p>The public network routes carrying MPLS labels are advertised through MP-BGP. According to relevant protocols, label mapping information about a route can be piggybacked inside the BGP Update message that is used to advertise the route. This feature is implemented through BGP extensions, requiring BGP peers to process labeled IPv4 routes.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0186.html">Configuring Inter-AS VPN Option C in the Labeled-Unicast Address Family (Solution 1)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0192.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0189.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>