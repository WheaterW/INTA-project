
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a PBB-EVPN Instance">
<meta name="abstract" content="PEs use provider backbone bridge Ethernet VPN (PBB-EVPN) instances to interconnect private networks with the public network.">
<meta name="description" content="PEs use provider backbone bridge Ethernet VPN (PBB-EVPN) instances to interconnect private networks with the public network.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-evpn_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-evpn_cfg_0005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,pbb-evpnvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="PBB-EVPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PBB-EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="PBB-EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="PBB-EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="p00915595">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370731">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a PBB-EVPN Instance</title>
</head>
<body><a name="EN-US_TASK_0172370731"></a><a name="EN-US_TASK_0172370731"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a PBB-EVPN Instance</h1>
<div class="taskbody"><p>PEs use provider backbone bridge Ethernet VPN (PBB-EVPN) instances to interconnect private networks with the public network.</p>
<div class="context"><a name="EN-US_TASK_0172370731__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>PBB-EVPN instances interconnect private networks with the public network. A B-EVPN instance connects to the public network and manages EVPN routes received from other PEs. An I-EVPN instance connects to a private network through a PE interface connecting to a CE. After an I-EVPN instance receives a data packet from a CE, the I-EVPN instance encapsulates a PBB header into the packet.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172370731__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a B-EVPN instance.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=evpn+vpn-instance"><b><span class="cmdname">evpn vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong><span>b-evpn</span></strong></span><p><p>A B-EVPN instance is created, and its view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description-information</span></i></span><p><p>A description is configured for the B-EVPN instance.</p>
</p><p><p>Similar to a hostname or interface description, a B-EVPN instance description helps you memorize the B-EVPN instance.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=route-distinguisher"><b><span class="cmdname">route-distinguisher</span></b></a> <i><span class="varname">route-distinguisher</span></i></span><p><p>An RD is configured for the EVPN instance.</p>
</p><p><p>A B-EVPN instance takes effect only after the RD is configured. The RDs of different EVPN instances on a PE must be different.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After being configured, an RD cannot be modified, but can be deleted. After you delete the RD of an EVPN instance, the VPN targets of the EVPN instance will also be deleted.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vpn-target"><b><span class="cmdname">vpn-target</span></b></a> <i><span class="varname">vpn-target</span></i> &amp;&lt;1-8&gt; [ <strong><span>both</span></strong> | <strong><span>export-extcommunity</span></strong> | <strong><span>import-extcommunity</span></strong> ]</span><p><p>VPN targets are configured for the B-EVPN instance.</p>
</p><p><p>VPN targets are BGP extended community attributes used to control the import and export of EVPN routes. A maximum of eight import VPN targets and eight export VPN targets can be configured each time the <a href="cmdqueryname=vpn-target"><b><span class="cmdname">vpn-target</span></b></a> command is run. To configure more VPN targets for an EVPN instance address family, run the <a href="cmdqueryname=vpn-target"><b><span class="cmdname">vpn-target</span></b></a> command several times.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=tnl-policy"><b><span class="cmdname">tnl-policy</span></b></a> <i><span class="varname">policy-name</span></i></span><p><p>The B-EVPN instance is associated with the specified tunnel policy.</p>
</p><p><p>This configuration enables PEs to use TE tunnels to transmit data packets. Currently, B-EVPN instances can only be associated with tunnel binding policies.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure an I-EVPN instance.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=evpn+vpn-instance"><b><span class="cmdname">evpn vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong><span>i-evpn</span></strong></span><p><p>An I-EVPN instance is created, and its view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description-information</span></i></span><p><p>A description is configured for the I-EVPN instance.</p>
</p><p><p>Similar to a hostname or interface description, an I-EVPN instance description helps you memorize the I-EVPN instance.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=pbb+i-tag"><b><span class="cmdname">pbb i-tag</span></b></a> <i><span class="varname">i-tag</span></i></span><p><p>An I-SID is configured for the I-EVPN instance.</p>
</p><p><p>After being configured, an I-SID cannot be modified, but can be deleted. After you delete the I-SID of an I-EVPN instance, the binding between this I-EVPN instance and a B-EVPN instance will also be deleted.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=pbb+binding+b-evpn"><b><span class="cmdname">pbb binding b-evpn</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span><p><p>The I-EVPN instance is bound to the B-EVPN instance.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-evpn_cfg_0001.html">Configuring PBB-EVPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-evpn_cfg_0005.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>