
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Configuring Inter-AS VPN Option C (Solution 1)">
<meta name="abstract" content="Multi-hop EBGP connections are established between PEs of different ASs to exchange VPNv4 routes.">
<meta name="description" content="Multi-hop EBGP connections are established between PEs of different ASs to exchange VPNv4 routes.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0052.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0143.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0137.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0138.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0139.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0140.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0141.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,l00468467,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00847023">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0172369335">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Inter-AS VPN Option C (Solution 1)</title>
</head>
<body><a name="EN-US_CONCEPT_0172369335"></a><a name="EN-US_CONCEPT_0172369335"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Inter-AS VPN Option C (Solution 1)</h1>
<div><p>Multi-hop EBGP connections are established between PEs of different ASs to exchange VPNv4 routes.</p>
<div class="section"><h4 class="sectiontitle">Usage Scenario</h4><p>If the MPLS backbone network carrying VPN routes spans multiple ASs, the inter-AS VPN is required.</p>
<p>If each AS needs to exchange a large number of VPN routes, inter-AS VPN Option C is a good choice to prevent the ASBR from becoming a bottleneck that impedes network expansion. The following solutions can be used to implement inter-AS VPN Option C:</p>
<ul><li>Solution 1: After learning the labeled BGP routes of the public network in the remote AS from the remote ASBR, the local ASBR allocates labels for these routes, and advertises these routes to the IBGP peer that supports the label switching capability. In this manner, a complete LSP is set up.</li><li>Solution 2: The IBGP peer relationship between the PE and ASBR is not needed. In this solution, an ASBR learns the labeled public BGP routes of the remote AS from the peer ASBR. These labeled public BGP routes are then imported into IGP to trigger the establishment of an LDP LSP. In this manner, a complete LDP LSP is established between the two PEs.</li></ul>
<p>Solution 1 is described in this section, and solution 2 is described in <a href="dc_vrp_mpls-l3vpn-v4_cfg_0143.html">Configuring Inter-AS VPN Option C (Solution 2)</a>.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In inter-AS VPN-Option C mode, do not enable LDP between ASBRs. If LDP is enabled on the interfaces between ASBRs, LDP sessions are then established between the ASBRs. As a result, the ASBRs establish an egress LSP and send Mapping messages to upstream ASBRs. After receiving Mapping messages, the upstream ASBRs establish a transit LSP. If a large number of BGP routes exist, enabling LDP on the interfaces between ASBRs leads to the occupation of a large number of LDP labels.</p>
</div></div>
</div>
<div class="section"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring inter-AS VPN Option C (solution 1), complete the following tasks:</p>
<ul><li><p>Configure IGP on the MPLS backbone network in each AS to ensure IP connectivity within each AS.</p>
</li><li><p>Configure MPLS and MPLS LDP both globally and per interface on each node of the MPLS backbone network in each AS.</p>
</li><li><p>Configure an IBGP peer relationship between the PE and ASBR in the same AS.</p>
</li><li><p><a href="dc_vrp_mpls-l3vpn-v4_cfg_0155.html">Configure a VPN instance on each PE</a> and <a href="dc_vrp_mpls-l3vpn-v4_cfg_0156.html">bind the interface that connects a PE to a CE to the VPN instance on that PE</a>.</p>
</li><li><p>Configure an IP address for the interface connecting a CE to a PE.</p>
</li></ul>
</div>
</div>

<ul class="ullinks">
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0137.html">Enabling the Exchange of Labeled IPv4 Routes</a>
</dt>
<dd>
In inter-AS VPN Option C mode, a BGP LSP needs to be established between ASs, and labeled IPv4 routes need to be exchanged between BGP peers.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0138.html">Configuring a Route-Policy to Control Label Distribution</a>
</dt>
<dd>
You need to configure a route-policy to control label allocation for each inter-AS BGP LSP. If labeled IPv4 routes are advertised to a PE of the local AS, you need to re-allocate MPLS labels to these routes. If routes sent by a PE of the local AS are advertised to the peer ASBR, you need to allocate MPLS labels to these routes.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0139.html">Establishing an MP-EBGP Peer Relationship Between PEs</a>
</dt>
<dd>
By introducing extended community attributes into BGP, MP-EBGP can advertise VPNv4 routes between PEs. PEs of different ASs are generally not directly connected. Therefore, to set up the EBGP connection between the PEs of different ASs, you need to configure the permitted maximum hops between PEs.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0140.html">Configuring Route Exchange Between a CE and a PE</a>
</dt>
<dd>
A PE and a CE can communicate using BGP, an IGP, or a static route.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0141.html">Verifying the Configuration</a>
</dt>
<dd>
After configuring inter-AS VPN Option C (solution 1), check information about all BGP peer relationships, VPNv4 routes on PEs, and IPv4 route labels on ASBRs.</dd>
</dl>
</ul>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0000.html">BGP/MPLS IP VPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0052.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0143.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>