
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling MAC Address Learning">
<meta name="abstract" content="Packets can be forwarded according to MAC addresses only after MAC address learning is enabled.">
<meta name="description" content="Packets can be forwarded according to MAC addresses only after MAC address learning is enabled.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5018.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,vpls,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370153">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Enabling MAC Address Learning</title>
</head>
<body><a name="EN-US_TASK_0172370153"></a><a name="EN-US_TASK_0172370153"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling MAC Address Learning</h1>
<div class="taskbody"><p>Packets can be forwarded according to MAC addresses only after MAC address learning is enabled.</p>
<div class="steps"><a name="EN-US_TASK_0172370153__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=vsi"><b><span class="cmdname">vsi</span></b></a> <i><span class="varname">vsi-name</span></i> [ <strong><span>static</span></strong><span> | <strong><span>auto</span></strong></span> ]</span><p><p>The VSI view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=mac-learning"><b><span class="cmdname">mac-learning</span></b></a> { <strong><span>enable</span></strong> | <strong><span>disable</span></strong> }</span><p><p>MAC address learning is enabled.</p>
</p><p><p>If MAC address learning is disabled for a VSI, the VSI cannot automatically learn MAC addresses, causing packets to be broadcast on the network. Exercise caution when disabling the MAC address learning.</p>
</p></li><li><span>Run <a href="cmdqueryname=mac-learn-style"><b><span class="cmdname">mac-learn-style</span></b></a> { <strong><span>qualify</span></strong> | <strong><span>unqualify</span></strong> }</span><p><p>The MAC address learning mode is configured.</p>
</p><p></p><p><p>Because E2E <a href="cmdqueryname=mac-learn-style"><b><span class="cmdname">mac-learn-style</span></b></a> negotiation for a VSI is not allowed, <a href="cmdqueryname=mac-learn-style"><b><span class="cmdname">mac-learn-style</span></b></a> settings must be consistent in an E2E manner. If mode inconsistency exists, VLAN ID-based MAC address learning may become incorrect and packets may be discarded.</p>
<p>In an HVPLS scenario, you are advised not to enable MAC address learning in qualified mode on an SPE. If the qualified mode needs to be enabled, the types of access interfaces on PEs at both ends must be consistent. The interface type can only be the dot1q VLAN tag termination sub-interface, QinQ mapping sub-interface, or QinQ stacking sub-interface. If the qualified mode is configured on an SPE, the type of VLAN tag used to learn MAC addresses must be specified. That is, the <strong><span>outer-vlan</span></strong> or <strong><span>inner-vlan</span></strong> parameter must be specified in the <a href="cmdqueryname=mac-learn-style"><b><span class="cmdname">mac-learn-style</span></b></a> <strong><span>qualify</span></strong> { <strong><span>outer-vlan</span></strong> | <strong><span>inner-vlan</span></strong> } command.</p>
<ul><li><strong>outer-vlan</strong>: learns MAC addresses based on outer VLAN tags.</li><li><strong>inner-vlan</strong>: learns MAC addresses based on inner VLAN tags.</li></ul>
<p>In an HVPLS scenario, after a dot1q VLAN tag termination sub-interface is bound to a remote PE, to enable the SPE to learn MAC addresses in <strong>qualify</strong> mode, run the <a href="cmdqueryname=mac-learn-style"><b><span class="cmdname">mac-learn-style</span></b></a> <strong><span>qualify</span></strong> <strong><span>outer-vlan</span></strong> command. After a QinQ mapping or stacking sub-interface is bound to a remote PE, to enable the SPE to learn MAC addresses in <strong>qualify</strong> mode, run the <a href="cmdqueryname=mac-learn-style"><b><span class="cmdname">mac-learn-style</span></b></a> <strong><span>qualify</span></strong> <strong><span>inner-vlan</span></strong> or <a href="cmdqueryname=mac-learn-style"><b><span class="cmdname">mac-learn-style</span></b></a> <strong><span>qualify</span></strong> command on the SPE.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the <a href="cmdqueryname=mac-learn-style+qualify"><b><span class="cmdname">mac-learn-style qualify</span></b></a> command is run for a VSI, only a dot1q VLAN tag termination sub-interface, QinQ mapping sub-interface, or QinQ stacking sub-interface can be bound to the VSI. If <strong>outer-vlan</strong> is specified, only a dot1q VLAN tag termination sub-interface can be bound to the VSI. If <strong>inner-vlan</strong> is specified, only a QinQ mapping or QinQ stacking sub-interface can be bound to the VSI.</p>
<p>After a dot1q VLAN tag termination sub-interface is bound to a VSI, MAC address learning in qualify mode cannot be configured. Therefore, you need to run the <a href="cmdqueryname=mac-learn-style+qualify"><b><span class="cmdname">mac-learn-style qualify</span></b></a> command before binding the sub-interface to a VSI. After a dot1q VLAN tag termination sub-interface is bound to a VSI, MAC address learning in qualify mode cannot be disabled. To restore the default MAC address learning mode of the VSI, unbind the dot1q VLAN tag termination sub-interface from the VSI first.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=mac-address+aging-time"><b><span class="cmdname">mac-address aging-time</span></b></a> { <i><span class="varname">interval</span></i><span> | [ <strong><span>local</span></strong> <i><span class="varname">local-seconds</span></i> | <strong><span>remote</span></strong> <i><span class="varname">remote-seconds</span></i> ]</span> }</span><p><p>The aging time of dynamic MAC addresses is configured.</p>
</p><p><p>If <i><span class="varname">interval</span></i> is set to 0, MAC address entries never age.</p>
<p>The system starts an aging timer for each dynamic MAC address entry. If the MAC address entry is not updated before the aging time expires, the entry will be deleted. </p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5018.html">Managing VSI-based MAC Addresses
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5020.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>