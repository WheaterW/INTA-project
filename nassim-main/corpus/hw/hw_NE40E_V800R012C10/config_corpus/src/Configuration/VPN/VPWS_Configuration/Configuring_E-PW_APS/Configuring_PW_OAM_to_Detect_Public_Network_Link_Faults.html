
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring PW OAM to Detect Public Network Link Faults">
<meta name="abstract" content="PW OAM includes Multiprotocol Label Switching Transport Profile (MPLS-TP) OAM and MPLS OAM. PW OAM can quickly detect PW faults, enabling speedy PW switching for service protection.">
<meta name="description" content="PW OAM includes Multiprotocol Label Switching Transport Profile (MPLS-TP) OAM and MPLS OAM. PW OAM can quickly detect PW faults, enabling speedy PW switching for service protection.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6034.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6036.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6032-01.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,vpws,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="q00824768">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369885">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring PW OAM to Detect Public Network Link Faults</title>
</head>
<body><a name="EN-US_TASK_0172369885"></a><a name="EN-US_TASK_0172369885"></a>

<div class="articleBoxWithoutHead">





<h1 class="topicTitle-h1">Configuring PW OAM to Detect Public Network Link Faults</h1>
<div class="taskbody"><p>PW OAM includes Multiprotocol Label Switching Transport Profile (MPLS-TP) OAM<span> and MPLS OAM</span>. PW OAM can quickly detect PW faults, enabling speedy PW switching for service protection.</p>
<div class="context"><a name="EN-US_TASK_0172369885__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0172369885__en-us_task_0172369873_context512567197214052"><div class="p" id="EN-US_TASK_0172369885__en-us_task_0172369873_p1159971862214052">PW OAM improves the reliability and maintainability of transport networks. Currently, PW OAM includes MPLS-TP OAM<span> and MPLS OAM</span>.<ul id="EN-US_TASK_0172369885__en-us_task_0172369873_ul845228072214052"><li id="EN-US_TASK_0172369885__en-us_task_0172369873_li144725071214052">MPLS-TP OAM can effectively detect, identify, and locate faults at the MPLS-TP user plane and quickly switch services away from faulty links or nodes. MPLS-TP OAM can detect faults on PWs carried over bidirectional LSPs and collect performance statistics.</li><li id="EN-US_TASK_0172369885__en-us_task_0172369873_li1938434832214052">MPLS OAM is a detection mechanism intended for the MPLS user plane. It provides users with PW status information without relying on any network plane. In addition, MPLS OAM provides network administrators and maintenance engineers with a variety of diagnostic interfaces for them to measure network performance and maintain networks.</li></ul>
<div class="note" id="EN-US_TASK_0172369885__en-us_task_0172369873_note1563866074214052"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172369885__en-us_task_0172369873_p844750085214052">In a scenario with both PW APS and PW OAM, after PW OAM (<span>MPLS OAM or </span>MPLS-TP OAM) is deleted, PW APS will fail.</p>
</div></div>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172369885__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul id="EN-US_TASK_0172369885__en-us_task_0172369873_steps-unordered563038343214052"><li id="EN-US_TASK_0172369885__en-us_task_0172369873_step597029161214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd1225510143214052">Configure MPLS-TP OAM to detect PW faults.</span><p><p id="EN-US_TASK_0172369885__en-us_task_0172369873_p1633108058214052">Perform the following steps on the endpoint PEs of the primary and secondary PWs (the SPEs of MS-PWs do not need the following configurations):</p>
</p><ol id="EN-US_TASK_0172369885__en-us_task_0172369873_substeps739582654214052"><li id="EN-US_TASK_0172369885__en-us_task_0172369873_substep979709144214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd1214461659214052">Run the <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname879480891214052">system-view</span></b></a> command to enter the system view.</span></li><li id="EN-US_TASK_0172369885__en-us_task_0172369873_substep1463086456214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd1406307842214052">Run the <a href="cmdqueryname=mpls-tp+meg"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname2115420224214052">mpls-tp meg</span></b></a> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname2004481339214052">meg-name</span></i> command to create a MEG and enter its view.</span></li><li id="EN-US_TASK_0172369885__en-us_task_0172369873_substep908977975214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd2141644714214052">Run the <a href="cmdqueryname=me+l2vc"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname1434656210214052">me l2vc</span></b></a> <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname1709730381214052">peer-ip</span></strong> <em id="EN-US_TASK_0172369885__en-us_task_0172369873_i5701181117487">peer-ip-value</em> <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname137816701214052">vc-id</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname1638447469214052">vc-id</span></i><em id="EN-US_TASK_0172369885__en-us_task_0172369873_i18495639184812">-value</em> <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname1531975568214052">vc-type</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname1403507340214052">vc-type-value</span></i> [ <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname1812033915214052">remote-peer-ip</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname369157705214052">remote-peer-ip-value</span></i> | <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname1347125143214052">ttl</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname1532326670214052">ttl-number</span></i> ] <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname415306921214052">mep-id</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname1829725240214052">mep-id-value</span></i> <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname1070702057214052">remote-mep-id</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname1619996877214052">remote-mep-id-value</span></i> [ <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname430640507214052">gal</span></strong> { <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname90124438214052">13</span></strong> | <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname27136239214052">14</span></strong> } ] command to configure an ME instance and bind it to an SS-PW or MS-PW.</span></li><li id="EN-US_TASK_0172369885__en-us_task_0172369873_substep184224817214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd1742563992214052">Run the <a href="cmdqueryname=cc+send+enable"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname441535597214052">cc send enable</span></b></a> command to enable the local end to send CC/CV packets.</span></li><li id="EN-US_TASK_0172369885__en-us_task_0172369873_substep1745794553214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd499983310214052">Run the <a href="cmdqueryname=cc+receive+enable"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname1515906584214052">cc receive enable</span></b></a> command to enable the local end to receive CC/CV packets.</span></li><li id="EN-US_TASK_0172369885__en-us_task_0172369873_substep1578884434214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd2002739906214052">Run the <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname990618475214052">quit</span></b></a> command to return to the system view.</span></li><li id="EN-US_TASK_0172369885__en-us_task_0172369873_substep525180332214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd548050754214052">Run the <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname2085967945214052">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li id="EN-US_TASK_0172369885__en-us_task_0172369873_step2026534619214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd876700113214052">Configure MPLS OAM to detect PW faults.</span><p><p id="EN-US_TASK_0172369885__en-us_task_0172369873_p1040998920214052">Perform the following steps on the endpoint PEs of the primary and secondary PWs (the SPEs of MS-PWs do not need the following configurations):</p>
</p><ol id="EN-US_TASK_0172369885__en-us_task_0172369873_substeps754371532214052"><li class="substepexpand" id="EN-US_TASK_0172369885__en-us_task_0172369873_substep1626615254214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd1055747668214052">Run the <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname184739021214052">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand" id="EN-US_TASK_0172369885__en-us_task_0172369873_substep758188146214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd1847692171214052">Run the <a href="cmdqueryname=mpls"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname736124952214052">mpls</span></b></a> command to enter the MPLS view.</span></li><li class="substepexpand" id="EN-US_TASK_0172369885__en-us_task_0172369873_substep745053934214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd144323081214052">Run the <a href="cmdqueryname=mpls+oam"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname1831260283214052">mpls oam</span></b></a> command to enable MPLS OAM globally.</span></li><li class="substepexpand" id="EN-US_TASK_0172369885__en-us_task_0172369873_substep844470593214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd297833528214052">Run the <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname1090912611214052">quit</span></b></a> command to return to the system view.</span></li><li class="substepexpand" id="EN-US_TASK_0172369885__en-us_task_0172369873_substep2044628874214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd44166024214052">Run the <a href="cmdqueryname=mpls-oam"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname1473858654214054">mpls-oam</span></b></a> command to enter the MPLS OAM view.</span></li><li class="substepexpand" id="EN-US_TASK_0172369885__en-us_task_0172369873_substep1456824796214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd1393286925214052">Run the <a href="cmdqueryname=mpls+oam+l2vc"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname780166965214052">mpls oam l2vc</span></b></a> <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname2050301875214052">peer-ip</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname1839224699214052">peer-ip</span></i> <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname594762790214052">vc-id</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname1218840607214052">vc-id</span></i> <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname1195342808214052">vc-type</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname1229124595214052">vc-type</span></i> [<strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname1337484440214052"> remote-peer-ip</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname466097553214052">remote-peer-ip</span></i> <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname1522311592214052">remote-vc-id</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname2049545436214052">remote-vc-id</span></i> <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname1121286795214052">remote-vc-type</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname19351345214052">remote-vc-type</span></i> ] <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname587620772214052">type</span></strong> { <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname1622540202214052">cv</span></strong> | <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname228930982214052">ffd</span></strong> <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname890207890214052">frequency</span></strong> { <strong id="EN-US_TASK_0172369885__en-us_task_0172369873_b9391224194613">3</strong> | <strong id="EN-US_TASK_0172369885__en-us_task_0172369873_b639172414613">10</strong> | <strong id="EN-US_TASK_0172369885__en-us_task_0172369873_b5392024124617">20</strong> | <strong id="EN-US_TASK_0172369885__en-us_task_0172369873_b1140132414463">50</strong> | <strong id="EN-US_TASK_0172369885__en-us_task_0172369873_b1940824124610">100</strong> | <strong id="EN-US_TASK_0172369885__en-us_task_0172369873_b1740124184613">200</strong> | <strong id="EN-US_TASK_0172369885__en-us_task_0172369873_b240172412466">500</strong> } } [ <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname552431915214052">auto-protocol</span></strong> [ <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname267134530214052">overtime</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname1310112706214052">overtime</span></i> ] ] [ <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname18367142914417">compatibility-mode</span></strong><em id="EN-US_TASK_0172369885__en-us_task_0172369873_i167138358414"> </em><i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname6389437124112">compati-mode-val</span></i> ] [ <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname6450155019417">bdi-frequency</span></strong><em id="EN-US_TASK_0172369885__en-us_task_0172369873_i14664853124111"> </em><i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname338375518414">bdi-frep-val</span></i> ] [ <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname158278094214">exp</span></strong><em id="EN-US_TASK_0172369885__en-us_task_0172369873_i8934143144220"> </em><i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname546505194216">exp-value</span></i> ] command to configure MPLS OAM parameters.</span><p><p id="EN-US_TASK_0172369885__en-us_task_0172369873_p223021868214052">The target PW can be either an SS-PW or an MS-PW. If the target PW is an MS-PW, you need to set <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname481631591214052">remote-peer-ip</span></strong>, <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname1067001872214052">remote-vc-id</span></strong>, and <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname591124085214052">remote-vc-type</span></strong>.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172369885__en-us_task_0172369873_substep1574634435214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd1439967064214052">(Optional) Run the <a href="cmdqueryname=mpls+oam+l2vc+enable"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname1283269882214052">mpls oam l2vc enable</span></b></a> { <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname1399713242214052">send</span></strong> | <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname433930241214052">receive</span></strong> } <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname1204681240214052">peer-ip</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname1057661788214052">peer-ip</span></i> <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname204257752214052">vc-id</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname1096920028214052">vc-id</span></i> <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname384667727214052">vc-type</span></strong> <i><span class="varname" id="EN-US_TASK_0172369885__en-us_task_0172369873_varname1713404364214052">vc-type</span></i> command to enable OAM.</span><p><div class="note" id="EN-US_TASK_0172369885__en-us_task_0172369873_note1556078866214052"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172369885__en-us_task_0172369873_p961647696214052">If you want to manually send or receive CC/CV packets, do not configure the <strong><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdparmname776739538214052">auto-protocol</span></strong> parameter in the <a href="cmdqueryname=mpls+oam+l2vc"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname1943068834214052">mpls oam l2vc</span></b></a> command. Instead, run the <a href="cmdqueryname=mpls+oam+l2vc+enable"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname1872844658214052">mpls oam l2vc enable</span></b></a> command to enable OAM on PW endpoints.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0172369885__en-us_task_0172369873_substep1169946662214052"><span id="EN-US_TASK_0172369885__en-us_task_0172369873_cmd933276302214052">Run the <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172369885__en-us_task_0172369873_cmdname1055517498214052">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6034.html">Configuring E-PW APS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6036.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6032-01.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>