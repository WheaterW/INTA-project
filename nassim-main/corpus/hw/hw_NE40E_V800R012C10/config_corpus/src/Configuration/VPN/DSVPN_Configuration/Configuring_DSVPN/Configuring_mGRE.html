
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring mGRE">
<meta name="abstract" content="Setting the tunnel interface type to mGRE allows multiple GRE tunnels to be established on the same tunnel interface, simplifying configuration.">
<meta name="description" content="Setting the tunnel interface type to mGRE allows multiple GRE tunnels to be established on the same tunnel interface, simplifying configuration.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_cfg_dsvpn_0021.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_cfg_dsvpn_0007.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DSVPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DSVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="DSVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="DSVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369148">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring mGRE</title>
</head>
<body><a name="EN-US_TASK_0172369148"></a><a name="EN-US_TASK_0172369148"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring mGRE</h1>
<div class="taskbody"><p>Setting the tunnel interface type to mGRE allows multiple GRE tunnels to be established on the same tunnel interface, simplifying configuration.</p>
<div class="context"><a name="EN-US_TASK_0172369148__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>To implement DSVPN, create a tunnel interface and set the tunnel type to mGRE. You only need to configure the source address or source interface for the mGRE tunnel interface, but do not need to specify a destination address. Then multiple GRE tunnels can be established on the mGRE tunnel interface and correspond to multiple GRE peers, simplifying GRE configuration.</p>
<p>Perform the following configurations on the spokes and hub.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172369148__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">interface-number</span></i></span></span><p><p>A tunnel interface is created, and its view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ip+address"><b><span class="cmdname">ip address</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> }</span><p><p>An IP address is assigned to the tunnel interface.</p>
</p></li><li><span>Run <a href="cmdqueryname=tunnel-protocol"><b><span class="cmdname">tunnel-protocol</span></b></a> <strong><span>gre</span></strong> <strong><span>p2mp</span></strong></span><p><p>The tunnel encapsulation mode is set to mGRE.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The mGRE tunnels can be configured only on one-dimensional tunnel interfaces.</p>
</div></div>
</p><p><div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>Modifying the tunnel encapsulation mode will delete the parameter settings of the tunnel interface, including the source address or source interface of the tunnel interface and NHRP.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=source"><b><span class="cmdname">source</span></b></a> { <i><span class="varname">ip-address</span></i> | <i><span class="varname">ifName</span></i> | <i><span class="varname">ifType</span></i> <i><span class="varname">ifNum</span></i> }</span><p><p>The source IP address or interface is specified for the tunnel.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=gre+key"><b><span class="cmdname">gre key</span></b></a> { <strong><span>simple</span></strong> <i><span class="varname">key-number-simple</span></i> | [ <strong><span>cipher</span></strong> ] <i><span class="varname">key-number-cipher</span></i> }</span><p><p>A key that identifies a tunnel is set.</p>
<p>If multiple mGRE tunnel interfaces use the same source address or source interface, you must configure a unique key for each mGRE tunnel.</p>
<div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>If <strong><span>simple</span></strong> is specified, the key is saved in the configuration file in cleartext, posing security risks. You are advised to select <strong><span>cipher</span></strong> to save the key in ciphertext in the configuration file.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_cfg_dsvpn_0021.html">Configuring DSVPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_cfg_dsvpn_0007.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>