
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Interworking Between EVPN L3VPN over SRv6 and Common L3VPN over MPLS">
<meta name="abstract" content="During network evolution, EVPN L3VPN over SRv6 and common L3VPN over MPLS may coexist. To allow these two types of networking to interwork, perform this task.">
<meta name="description" content="During network evolution, EVPN L3VPN over SRv6 and common L3VPN over MPLS may coexist. To allow these two types of networking to interwork, perform this task.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_liantong_02.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_srv6-l3vpn-srv6.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="p00915595,w00800033,w00556928,l00468467,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0176716902">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Interworking Between EVPN L3VPN over SRv6 and Common L3VPN over MPLS</title>
</head>
<body><a name="EN-US_TASK_0176716902"></a><a name="EN-US_TASK_0176716902"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Interworking Between EVPN L3VPN over SRv6 and Common L3VPN over MPLS</h1>
<div class="taskbody"><p>During network evolution, EVPN L3VPN over SRv6 and common L3VPN over MPLS may coexist. To allow these two types of networking to interwork, perform this task.</p>
<div class="context"><a name="EN-US_TASK_0176716902__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>On the network shown in <a href="#EN-US_TASK_0176716902__fig6660849125212">Figure 1</a>, area A is a newly built network deployed with the EVPN L3VPN over SRv6 service, and area B is the legacy network deployed with the common L3VPN over MPLS service. To ensure normal communication between the two types of networking, configure interworking between EVPN L3VPN over SRv6 and common L3VPN over MPLS on each border leaf node.</p>
<div class="fignone" id="EN-US_TASK_0176716902__fig6660849125212"><a name="EN-US_TASK_0176716902__fig6660849125212"></a><a name="fig6660849125212"></a><span class="figcap"><b>Figure 1 </b>Interworking between EVPN L3VPN over SRv6 and common L3VPN over MPLS</span><br><span><img class="vsd" src="figure/en-us_image_0000001193380426.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0176716902__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring interworking between an EVPN L3VPN over SRv6 and a common L3VPN over MPLS, complete the following tasks:</p>
<ul><li><p>On the network in area A, <a href="dc_vrp_srv6_cfg_all_0252.html">Configuring EVPN L3VPN over IS-IS SRv6 BE</a>.</p>
</li><li><p>On the network in area B, <a href="dc_vrp_mpls-l3vpn-v4_cfg_0154.html">Configuring a Basic BGP/MPLS IP VPN</a> or <a href="dc_vrp_mpls-l3vpn-v6_cfg_2057.html">Configuring a Basic BGP/MPLS IPv6 VPN</a>.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0176716902__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure each border leaf node to advertise the re-originated routes in the BGP-EVPN address family to a VPNv4 or VPNv6 peer (PE).</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=l2vpn-family+evpn"><b><span class="cmdname">l2vpn-family evpn</span></b></a></span><p><p>The BGP-EVPN address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+import+reoriginate"><b><span class="cmdname">peer</span></b></a> <em>peerIpv6Addr</em> <strong>import</strong> <strong>reoriginate</strong></span><p><p>The device is enabled to add a re-origination flag to routes received from BGP EVPN IPv6 peers.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the BGP view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+vpnv4"><b><span class="cmdname">ipv4-family vpnv4</span></b></a> or <a href="cmdqueryname=ipv6-family+vpnv6"><b><span class="cmdname">ipv6-family vpnv6</span></b></a></span><p><p>The BGP-VPNv4/VPNv6 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+advertise+route-reoriginated"><b><span class="cmdname">peer</span></b></a> { <em>ipv4-address</em> | <em>group-name</em> } <strong>advertise</strong> <strong>route-reoriginated</strong> <strong>evpn</strong> { <strong>ip</strong> | <strong>ipv6</strong> }</span><p><p>The function to advertise the routes re-originated in the BGP-EVPN address family to a BGP VPNv4/VPNv6 peer is enabled.</p>
<p>After this step is performed, the border leaf node re-originates the SRv6-encapsulated EVPN IPv4/IPv6 prefix routes that are received from access leaf nodes and then advertises the MPLS-encapsulated BGP VPNv4/VPNv6 routes to its BGP VPNv4/VPNv6 peer (PE).</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=peer+reflect-client"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> } <a href="cmdqueryname=reflect-client"><b><span class="cmdname">reflect-client</span></b></a></span><p><p>The device is configured as an RR, and its peer is specified as an RR client.</p>
</p><p><p>If the peer is an IBGP peer, the <span class="keyword">Router</span> with the <a href="cmdqueryname=peer+reflect-client"><b><span class="cmdname">peer reflect-client</span></b></a> command configured functions as an RR, and the specified peer (group) functions as its client.</p>
</p></li></ol>
</li><li><span>Configure the border leaf node to advertise the routes that are re-originated in the BGP-VPNv4/VPNv6 address family to a specified BGP EVPN IPv6 peer (access leaf node).</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+import+reoriginate"><b><span class="cmdname">peer</span></b></a> { <em>ipv4-address</em> | <em>group-name</em> } <strong>import</strong> <strong>reoriginate</strong></span><p><p>The device is enabled to re-originate the routes received from a BGP VPNv4 peer in the BGP-VPNv4/VPNv6 address family view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the BGP view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=l2vpn-family+evpn"><b><span class="cmdname">l2vpn-family evpn</span></b></a></span><p><p>The BGP-EVPN address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+advertise+route-reoriginated"><b><span class="cmdname">peer</span></b></a> { <em>peerIpv6Addr</em> | <em>peerGroupName</em> } <strong>advertise</strong> <strong>route-reoriginated</strong> { <strong>vpnv4</strong> | <strong>vpnv6</strong> }</span><p><p>The device is configured to advertise the routes re-originated in the BGP VPNv4/VPNv6 address family to the BGP VPN IPv6 peer.</p>
<p>After this step is performed, the border leaf node re-originates the MPLS-encapsulated VPNv4/VPNv6 routes that are received from the BGP VPNv4/VPNv6 peer (PE) and then advertises SRv6-encapsulated EVPN routes to the BGP EVPN IPv6 peer (access leaf node).</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=peer+reflect-client"><b><span class="cmdname">peer</span></b></a> { <em>peerIpv6Addr</em> | <em>peerGroupName</em> } <a href="cmdqueryname=reflect-client"><b><span class="cmdname">reflect-client</span></b></a></span><p><p>An RR and its client are configured.</p>
</p><p><p>If the peer is an IBGP peer, the <span class="keyword">Router</span> with the <a href="cmdqueryname=peer+reflect-client"><b><span class="cmdname">peer reflect-client</span></b></a> command configured functions as an RR, and the specified peer (group) functions as a client.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the BGP view.</p>
</p></li></ol>
</li><li><span>Enable EVPN route advertisement in the BGP-VPN instance address family view.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+vpn-instance"><b><span class="cmdname">ipv4-family vpn-instance</span></b></a> <em>vpn-instance-name</em> or <a href="cmdqueryname=ipv6-family+vpn-instance"><b><span class="cmdname">ipv6-family vpn-instance</span></b></a> <em>vpn-instance-name</em></span><p><p>The BGP-VPN instance IPv4/IPv6 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=advertise+l2vpn+evpn"><b><span class="cmdname">advertise l2vpn evpn</span></b></a></span><p><p>The device is configured to advertise the host IPv4/IPv6 routes in the VPN instance as EVPN IPv4/IPv6 prefix routes.</p>
</p></li></ol>
</li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0176716902__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li><p>Run the <a href="cmdqueryname=display+bgp+evpn+all+routing-table"><b><span class="cmdname">display bgp evpn all routing-table</span></b></a> command to check information about EVPN routes re-originated based on MPLS-encapsulated VPNv4/VPNv6 routes received by the border leaf node from PEs.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+vpnv4+routing-table"><b><span class="cmdname">display bgp vpnv4 routing-table</span></b></a> command to check information about VPNv4 routes re-originated based on SRv6-encapsulated EVPN IPv4 prefix routes received by the border leaf node from the access leaf nodes.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+vpnv6+routing-table"><b><span class="cmdname">display bgp vpnv6 routing-table</span></b></a> command to check information about VPNv6 routes re-originated based on SRv6-encapsulated EVPN IPv6 prefix routes received by the border leaf node from the access leaf nodes.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">EVPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_liantong_02.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_srv6-l3vpn-srv6.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>