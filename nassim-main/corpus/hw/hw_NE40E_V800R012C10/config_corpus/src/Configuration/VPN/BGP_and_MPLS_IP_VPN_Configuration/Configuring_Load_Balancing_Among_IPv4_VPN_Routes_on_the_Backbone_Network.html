
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Load Balancing Among IPv4 VPN Routes on the Backbone Network">
<meta name="abstract" content="This section describes how to configure load balancing among IPv4 VPN routes to load-balance VPN traffic among different links on the backbone network.">
<meta name="description" content="This section describes how to configure load balancing among IPv4 VPN routes to load-balance VPN traffic among different links on the backbone network.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0164.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_2023.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,l00468467,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00830487">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369409">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Load Balancing Among IPv4 VPN Routes on the Backbone Network</title>
</head>
<body><a name="EN-US_TASK_0172369409"></a><a name="EN-US_TASK_0172369409"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Load Balancing Among IPv4 VPN Routes on the Backbone Network</h1>
<div class="taskbody"><p>This section describes how to configure load balancing among IPv4 VPN routes to load-balance VPN traffic among different links on the backbone network.</p>
<div class="context"><a name="EN-US_TASK_0172369409__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>Deploying load balancing among IPv4 VPN routes allows even distribution of VPN traffic among different links on the backbone network, improving the link utilization.</p>
<p>A PE may receive multiple IPv4 VPN routes with the same prefix from different VPNv4 peers. Usually, the PE selects an optimal route and delivers it to the forwarding information base (FIB) to guide data forwarding. If load balancing is configured on the PE, it delivers multiple routes to the FIB. VPN data then can be distributed to different links on the backbone network in a per-packet or per-session manner.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172369409__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><div class="p">Before configuring load balancing among IPv4 VPN routes, complete the following tasks:<ul><li><p>Configure a BGP/MPLS IP VPN.</p>
</li><li><p>Ensure that the PE receives IPv4 VPN routes with the same prefix from different VPNv4 peers.</p>
</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172369409__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></span></span><p><p>The BGP-VPN instance IPv4 address family view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=maximum+load-balancing"><b><span class="cmdname">maximum load-balancing</span></b></a> <i><span class="varname">number</span></i></span></span><p><p>Load balancing among BGP routes is configured for the BGP VPN instance IPv4 address family.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172369409__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Example</h4><p>After completing the configurations, run the <a href="cmdqueryname=display+ip+routing-table+vpn-instance"><b><span class="cmdname">display ip routing-table vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <i><span class="varname">ip-address</span></i> [ <i><span class="varname">mask-length</span></i> ] [ <strong><span>longer-match</span></strong> ] [ <strong><span>verbose</span></strong> ] command on the PE. If the IPv4 VPN route has more than one next hop, load balancing among IPv4 VPN routes on the backbone network is configured.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0000.html">BGP/MPLS IP VPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0164.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_2023.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>