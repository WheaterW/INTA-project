
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Independent PW Redundancy Mode">
<meta name="abstract" content="The independent PW redundancy mode allows a public network fault to trigger only the public network link switchover.">
<meta name="description" content="The independent PW redundancy mode allows a public network fault to trigger only the public network link switchover.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5008.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="q00824768">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369838">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the Independent PW Redundancy Mode</title>
</head>
<body><a name="EN-US_TASK_0172369838"></a><a name="EN-US_TASK_0172369838"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Independent PW Redundancy Mode</h1>
<div class="taskbody"><p>The independent PW redundancy mode allows a public network fault to trigger only the public network link switchover.</p>
<div class="context"><a name="EN-US_TASK_0172369838__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>In independent PW redundancy mode, the active/standby status of PWs is determined through signaling-based negotiation. When creating PWs on the local end, configure two PWs that connect to two remote PEs (one PW per PE). After they are configured, the two PWs are both in the primary state on the local end. The remote PEs then determine their status by means of E-Trunk or mVRRP, with one PE in the active state and the other in the standby state. Finally, the PW endpoints determine the primary and secondary PWs through negotiation. The independent mode applies to scenarios where PW redundancy is associated with E-Trunk. The independent mode, together with the bypass PW, can prevent links on the AC side from sensing faults on the network side but cannot prevent links on the network side from sensing faults on the AC side.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172369838__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create a primary PW. For details, see <a href="dc_vrp_vpws_cfg_3006.html">Configuring a VPWS PW</a>.</span></li><li><span>Create a secondary PW. For details, see <a href="dc_vrp_vpws_cfg_5002.html">(Optional) Configuring a Secondary VPWS Connection</a>.</span></li><li><span>Configure the independent PW redundancy mode on the local device.</span><ol type="a"><li><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the AC interface view.</span></li><li><span>Run the <a href="cmdqueryname=mpls+l2vpn+redundancy"><b><span class="cmdname">mpls l2vpn redundancy</span></b></a> <strong><span>independent</span></strong> command to configure the independent PW redundancy mode.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li></ol>
</li><li><span>(Optional) Configure VPWS switching. For details, see <a href="dc_vrp_vpws_cfg_5001.html">Configuring VPWS Switching</a>.</span><p><p>VPWS switching needs to be configured on SPEs during the establishment of an MS-PW. PW redundancy supports only dynamic VPWS switching.</p>
</p></li><li><span>Configure a bypass PW on the remote device.</span><ol type="a"><li class="substepexpand"><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the AC interface view.</span></li><li class="substepexpand"><span>Run the <span><span><a href="cmdqueryname=mpls+l2vc"><b><span class="cmdname" id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_cmdname735282380214052">mpls l2vc</span></b></a></span> { <i><span class="varname" id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_varname1387664703214052">ip-address</span></i> | <strong><span id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_cmdparmname19306074214052">pw-template</span></strong> <i><span class="varname" id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_varname569278918214052">template-name</span></i> } <sup id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_sup545954554214052">*</sup> <i><span class="varname" id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_varname1458175040214052">vc-id</span></i> [ <strong><span id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_cmdparmname1966999380214052">tunnel-policy</span></strong> <i><span class="varname" id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_varname606300340214052">tnl-policy-name</span></i><span> [ { <strong><span id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_cmdparmname9892171915317">endpoint</span></strong> <i><span class="varname" id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_varname1989219197314">endpoint-address</span></i> | [ <strong><span id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_cmdparmname0145151343710">endpoint</span></strong> <i><span class="varname" id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_varname1623463119378">endpoint4-address</span></i> ] } <strong><span id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_cmdparmname17893519937">color</span></strong> <i><span class="varname" id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_varname1189341918319">color-value</span></i> ]</span> | [ <strong><span id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_cmdparmname1616321159214052">control-word</span></strong> | <strong><span id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_cmdparmname250921717214052">no-control-word</span></strong> ] | [ <strong><span id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_cmdparmname1759897093214052">raw</span></strong> | <strong><span id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_cmdparmname2118207766214052">tagged</span></strong> ] | <strong><span id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_cmdparmname1083301451214052">access-port</span></strong> | <strong><span id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_cmdparmname1969676296214052">ignore-standby-state</span></strong> ] <sup id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_sup556197484214052">*</sup> <strong><span id="EN-US_TASK_0172369838__en-us_task_0172369837_en-us_task_0172369883_cmdparmname218800319214052">bypass</span></strong></span> command to configure a bypass PW.</span><p></p></li></ol>
</li><li><span>(Optional) Configure L2VPN dual-fed to reduce traffic loss caused by VPWS switching.</span><p><ul><li><p>On an IPv4 network with PW redundancy configured, you can configure the following functions:</p>
<ul><li><p>Run the <a href="cmdqueryname=mpls+l2vpn+stream-dual-receiving"><b><span class="cmdname">mpls l2vpn stream-dual-receiving</span></b></a> command to enable both the primary and secondary PWs on a CSG to receive packets. This helps prevent packet loss during a primary/secondary PW switchover.</p>
</li><li><p>Run the <a href="cmdqueryname=mpls+l2vpn+arp-dual-sending"><b><span class="cmdname">mpls l2vpn arp-dual-sending</span></b></a><span> [ <strong><span>expire-time</span></strong> <em>expire-time-value</em> ]</span> command to configure the primary and secondary PWs to transparently transmit ARP packets. This helps reduce the packet loss caused by node failures of the primary PW.</p>
<p>If you specify <strong><span>expire-time</span></strong> <i><span class="varname">expire-time</span></i>, the primary and secondary PWs will set an aging timer for transparently transmitted ARP packets.</p>
</li></ul>
</li><li><p>On an IPv6 network with PW redundancy configured, run the <a href="cmdqueryname=mpls+l2vpn+nd-dual-sending"><b><span class="cmdname">mpls l2vpn nd-dual-sending</span></b></a> [ <strong><span>expire-time</span></strong> <i><span class="varname">expire-time</span></i> ] command to enable ND packet dual-fed. On an L2VPN with PW redundancy configured, only the primary PW transparently transmits ND packets, and the secondary PW cannot learn user-side ND entries. If the primary PW fails, the secondary PW learns user-side ND entries from received traffic. Traffic received during the ND entry learning process, however, is discarded. After ND packet dual-fed is enabled, both the primary and secondary PWs can transparently transmit ND packets, reducing packet loss.</p>
<p>If <strong><span>expire-time</span></strong> <i><span class="varname">expire-time</span></i> is specified, the primary and secondary PWs both send ND packets, and an aging timer is set for ND entries. </p>
</li></ul>
</p></li><li><span>In independent PW redundancy mode, ensure that the remote PEs determine their active/standby status by means of E-Trunk or mVRRP.</span><p><p>If the remote devices determine their active/standby status by means of VRRP, run the <a href="cmdqueryname=mpls+l2vc+track+admin-vrrp"><b><span class="cmdname">mpls l2vc track admin-vrrp</span></b></a> <strong><span>interface</span></strong> <i><span class="varname">interface-type interface-number</span></i> <strong><span>vrid</span></strong> <i><span class="varname">virtual-router-id</span></i> <strong><span>pw-redundancy</span></strong> command to bind the service PW to the mVRRP group.</p>
<p><strong><span>pw-redundancy</span></strong> is mandatory in this case. If this parameter is not configured, after the PW is bound to the mVRRP group, packet forwarding on the local PW will be interrupted if mVRRP is in the standby state. If the parameter is configured, whether packets can be forwarded depends on the negotiated primary/secondary status of the local and remote PWs.</p>
<p>If the active/standby status of the remote device is determined through E-Trunk, you do not need to bind the service PW to E-Trunk. For details about the E-Trunk configuration, see <a href="dc_vrp_vpws_cfg_6020.html">Configuring PW Status Negotiation</a>.</p>
</p></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5007.html">Configuring PW Redundancy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5008.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6020.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>