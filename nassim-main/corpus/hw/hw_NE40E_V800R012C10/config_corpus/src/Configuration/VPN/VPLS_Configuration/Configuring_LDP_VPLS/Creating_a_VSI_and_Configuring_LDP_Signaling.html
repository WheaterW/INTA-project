
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Creating a VSI and Configuring LDP Signaling">
<meta name="abstract" content="Configuring VSI IDs and peer IP addresses is mandatory for LDP VPLS services. VSI IDs are used to identify VSIs in PW signaling negotiation. Perform the following steps on the endpoint PEs of a PW.">
<meta name="description" content="Configuring VSI IDs and peer IP addresses is mandatory for LDP VPLS services. VSI IDs are used to identify VSIs in PW signaling negotiation. Perform the following steps on the endpoint PEs of a PW.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,vpls,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370098">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Creating a VSI and Configuring LDP Signaling</title>
</head>
<body><a name="EN-US_TASK_0172370098"></a><a name="EN-US_TASK_0172370098"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Creating a VSI and Configuring LDP Signaling</h1>
<div class="taskbody"><p>Configuring VSI IDs and peer IP addresses is mandatory for LDP VPLS services. VSI IDs are used to identify VSIs in PW signaling negotiation. Perform the following steps on the endpoint PEs of a PW.</p>
<div class="steps"><a name="EN-US_TASK_0172370098__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=vsi"><b><span class="cmdname">vsi</span></b></a> <i><span class="varname">vsi-name</span></i> [ <strong><span>static</span></strong> | <strong><span>auto</span></strong> ]</span><p><p>A VSI is created, and its view is displayed.</p>
</p><p><p>VSIs on the same device cannot use the same name.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description</span></i></span><p><p>A description is configured for the VSI.</p>
</p><p></p></li><li><span>(Optional) Run <a href="cmdqueryname=encapsulation"><b><span class="cmdname">encapsulation</span></b></a> { <strong><span>ethernet</span></strong> | <strong><span>vlan</span></strong> }</span><p><p>An encapsulation mode is set for the VSI.</p>
</p><p><ul><li><p>VSIs have two encapsulation modes: Ethernet and VLAN. On the public network, packets encapsulated in Ethernet mode do not carry any VLAN tags, but packets encapsulated in VLAN mode do.</p>
</li><li><p>The two ends of a PW must use the same VSI encapsulation mode.</p>
</li></ul>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=tnl-policy"><b><span class="cmdname">tnl-policy</span></b></a> <i><span class="varname">policy-name</span></i></span><p><p>A public network tunnel policy is applied to the VSI.</p>
</p><p><p>If you do not want to use the <strong><span>tnl-policy</span></strong> <i><span class="varname">policy-name</span></i> command to specify a tunnel policy during VSI peer configuration in Step 12, run this command to apply a public network tunnel policy to the VSI.</p>
<p>A tunnel policy specified during VSI peer configuration takes precedence over one specified in the VSI view. If tunnel policies are specified using both methods, only the tunnel policy specified during VSI peer configuration takes effect.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=mtu"><b><span class="cmdname">mtu</span></b></a> <i><span class="varname">mtu</span></i></span><p><p>The MTU of the VSI is configured for VPLS negotiation.</p>
</p><p><p>If the MTUs of the same VSI on two PEs are different, the two PEs may fail to establish a connection.</p>
</p></li><li><span>Run <a href="cmdqueryname=pwsignal"><b><span class="cmdname">pwsignal</span></b></a> <strong><span>ldp</span></strong></span><p><p>LDP is configured as the signaling protocol for the VSI, and the VSI-LDP view is displayed.</p>
</p><p></p></li><li><span>(Optional) Run <a href="cmdqueryname=control-word+enable"><b><span class="cmdname">control-word enable</span></b></a></span><p><p>The control word function is enabled for the VSI.</p>
</p><p></p></li><li><span>Run <a href="cmdqueryname=vsi-id"><b><span class="cmdname">vsi-id</span></b></a> <i><span class="varname">vsi-id</span></i></span><p><p>A VSI ID is configured.</p>
</p><p><ul><li><p>The VSI IDs at the two ends of a PW must be the same, or the VSI cannot be created. If the VSI IDs at the two ends of a PW are different, specify <strong><span>negotiation-vc-id</span></strong> <i><span class="varname">vc-id</span></i> for PW negotiation when running the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> command.</p>
</li><li><p>VSIs can exist only on PEs. A PE can be configured with multiple VSIs, but the ID of each VSI must be unique on the PE.</p>
</li></ul>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=admin-vsi"><b><span class="cmdname">admin-vsi</span></b></a></span><p><p>The current VSI is configured as the mVSI.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> [ <strong><span>negotiation-vc-id</span></strong> <i><span class="varname">vc-id</span></i> ] [ <strong><span>tnl-policy</span></strong> <i><span class="varname">policy-name</span></i> ] [ [ <strong><span>endpoint</span></strong> <i><span class="varname">endpoint4-address</span></i> ] <strong><span>color</span></strong> <i><span class="varname">color-value</span></i> ] <span>[ <strong><span>secondary</span></strong></span> ] [ <strong><span>ignore-standby-state</span></strong> ]</span><p><p>A VSI peer is configured.</p>
</p><p></p><p><ul><li><p><i><span class="varname">peer-address</span></i> specifies the peer IP address, which is usually the peer LSR ID.</p>
</li><li><p>Generally, the VSI IDs on both ends of a VSI must be the same. If they are different, configure <strong><span>negotiation-vc-id</span></strong> <i><span class="varname">vc-id</span></i> to re-specify the VC ID used for PW negotiation.</p>
</li><li><p>If a tunnel policy is configured, you can use <strong><span>tnl-policy</span></strong> <i><span class="varname">policy-name</span></i> to reference the tunnel policy when configuring a peer.</p>
</li><li><p>On the network where PW redundancy is configured, if the primary PW fails, traffic is switched to the secondary PW. If the secondary PW is in the standby state, service traffic cannot be forwarded, resulting in packet loss. However, if the <strong><span>ignore-standby-state</span></strong> parameter is configured on the two PEs to which a CE is dual-homed, the secondary PW ignores the standby state sent from the remote end and stays in the forwarding state, preventing packet loss caused by the primary/secondary PW switchover.</p>
</li></ul>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> [ <strong><span>negotiation-vc-id</span></strong> <i><span class="varname">vc-id</span></i> ] <strong><span>pw</span></strong> <i><span class="varname">pw-name</span></i></span><p><p>A VSI peer is configured.</p>
</p><p></p></li><li><span>(Optional) Run <a href="cmdqueryname=control-word+enable"><b><span class="cmdname">control-word enable</span></b></a></span><p><p>The control word function is enabled for the PW.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=undo+interface-parameter-type+vccv"><b><span class="cmdname">undo interface-parameter-type vccv</span></b></a></span><p><p>The VCCV byte (interface parameter) is deleted from the Label Mapping message.</p>
</p><p><p>If LDP VPLS is configured for devices running V800R005 or later to communicate with devices running VRP V300R001 or branch versions, configure this command.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=ignore-stp-loopcheck"><b><span class="cmdname">ignore-stp-loopcheck</span></b></a></span><p><p>STP loop detection is disabled for the PW.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=status-code-change+flush-mac+disable"><b><span class="cmdname">status-code-change flush-mac disable</span></b></a></span><p><p>The device is configured not to clear local MAC addresses when it receives a remote status code of 20.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172370098__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><p>If the specified VSI is an mVSI, you must run the <a href="cmdqueryname=track+admin-vsi"><b><span class="cmdname">track admin-vsi</span></b></a> <i><span class="varname">vsi-name</span></i> command in the service VSI view to bind the service VSI to the mVSI.</p>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5003.html">Configuring LDP VPLS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5005.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>