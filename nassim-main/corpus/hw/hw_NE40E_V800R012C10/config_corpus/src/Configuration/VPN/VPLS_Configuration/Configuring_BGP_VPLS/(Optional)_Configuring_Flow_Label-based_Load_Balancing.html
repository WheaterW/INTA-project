
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring Flow Label-based Load Balancing">
<meta name="abstract" content="After flow label-based load balancing is configured for an L2VPN, L2VPN services can be classified by flow labels and forwarding paths can be selected based on the flow labels, improving forwarding efficiency.">
<meta name="description" content="After flow label-based load balancing is configured for an L2VPN, L2VPN services can be classified by flow labels and forwarding paths can be selected based on the flow labels, improving forwarding efficiency.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5005-02.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6008.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0259947122">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring Flow Label-based Load Balancing</title>
</head>
<body><a name="EN-US_TASK_0259947122"></a><a name="EN-US_TASK_0259947122"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring Flow Label-based Load Balancing</h1>
<div class="taskbody"><p>After flow label-based load balancing is configured for an L2VPN, L2VPN services can be classified by flow labels and forwarding paths can be selected based on the flow labels, improving forwarding efficiency. </p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0259947122__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring flow label-based load balancing, complete the following task: </p>
<ul><li>Configure MPLS L2VPN.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0259947122__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>On an L2VPN carrying service traffic, if multiple links for a PW exist between Ps, flow label-based load balancing can be configured to improve traffic forwarding efficiency and mitigate the forwarding pressure on Ps. After this function is configured, the PEs can add flow labels to different types of traffic to distinguish one from another. When a P receives packets carrying flow labels, the P selects paths based on the flow labels to forward the packets, implementing load balancing. </p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0259947122__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=vsi"><b><span class="cmdname">vsi</span></b></a> <i><span class="varname">vsi-name</span></i></span><p><p>The VSI view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=pwsignal"><b><span class="cmdname">pwsignal</span></b></a> <strong><span>bgp</span></strong></span><p><p>The VSI-BGP view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=flow-label"><b><span class="cmdname">flow-label</span></b></a> { <strong><span>both</span></strong> | <strong><span>send</span></strong> | <strong><span>receive</span></strong> } [ <strong><span>static</span></strong> ]</span><p><p>L2VPN flow label-based load balancing is enabled for the VSI.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><div class="p">Flow label-based load balancing can be successfully configured if one of the following conditions is met: <ul><li>The <strong><span>receive</span></strong> parameter is configured on the local end, and the <strong><span>send</span></strong> parameter is configured on the remote end.</li><li>The <strong><span>send</span></strong> parameter is configured on the local end, and the <strong><span>receive</span></strong> parameter is configured on the remote end.</li><li>The <strong><span>both</span></strong> parameter is configured on both ends.</li></ul>
</div>
</li><li><p>If the <strong><span>static</span></strong> parameter is configured, the static flow label-based load balancing mode is enabled.</p>
<p>In this mode, if the two ends have inconsistent configurations, packets carrying flow labels are discarded, causing traffic loss.</p>
</li></ul>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6005.html">Configuring BGP VPLS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5005-02.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6008.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>