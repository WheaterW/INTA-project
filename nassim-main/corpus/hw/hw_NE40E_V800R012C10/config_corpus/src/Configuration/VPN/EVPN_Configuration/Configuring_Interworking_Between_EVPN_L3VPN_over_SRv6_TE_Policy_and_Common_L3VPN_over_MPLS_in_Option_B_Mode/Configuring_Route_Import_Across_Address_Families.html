
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Route Import Across Address Families">
<meta name="abstract" content="In the BGP VPNv4/v6 address family, import remote EVPN IP prefix routes to generate VPNv4/v6 routes. In the EVPN address family, import remote VPNv4/v6 routes to generate EVPN IP prefix routes. Apply for SIDs in one-SID-per-route or one-SID-per-next-hop mode, so that traffic can be exchanged between the EVPN side and VPNv4/v6 side.">
<meta name="description" content="In the BGP VPNv4/v6 address family, import remote EVPN IP prefix routes to generate VPNv4/v6 routes. In the EVPN address family, import remote VPNv4/v6 routes to generate EVPN IP prefix routes. Apply for SIDs in one-SID-per-route or one-SID-per-next-hop mode, so that traffic can be exchanged between the EVPN side and VPNv4/v6 side.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0176.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0182.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,f00454608,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001179004067">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Route Import Across Address Families</title>
</head>
<body><a name="EN-US_TASK_0000001179004067"></a><a name="EN-US_TASK_0000001179004067"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Route Import Across Address Families</h1>
<div class="taskbody"><p>In the BGP VPNv4/v6 address family, import remote EVPN IP prefix routes to generate VPNv4/v6 routes. In the EVPN address family, import remote VPNv4/v6 routes to generate EVPN IP prefix routes. Apply for SIDs in one-SID-per-route or one-SID-per-next-hop mode, so that traffic can be exchanged between the EVPN side and VPNv4/v6 side.</p>
<div class="steps"><a name="EN-US_TASK_0000001179004067__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view of the ASBR.</span><p><p>Perform the following steps to configure BGP VPNv4 and EVPN interworking.</p>
<ol type="a"><li>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</li><li>Run the <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i> command to enter the BGP view.</li><li><p>Run the <a href="cmdqueryname=ipv4-family+vpnv4"><b><span class="cmdname">ipv4-family vpnv4</span></b></a> command to enable the VPNv4 address family and enter its view.</p>
</li><li>Run the <a href="cmdqueryname=import-rib+evpn+srv6+ip-prefix"><b><span class="cmdname">import-rib evpn srv6 ip-prefix</span></b></a> command to enable the function to import EVPN IP prefix routes into the BGP VPNv4 routing table.</li><li>Run the <a href="cmdqueryname=undo+policy+vpn-target"><b><span class="cmdname">undo policy vpn-target</span></b></a> command to cancel VPN target-based VPN route filtering. After this operation is performed, all VPN routes can be received.</li><li>(Optional) Run the <a href="cmdqueryname=peer+next-hop-local"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i><strong><span> next-hop-local</span></strong> command to configure the device to set its IP address as the next hop of the routes to be advertised to the specified IBGP peer. If IBGP peers are configured on the network, you need to run this command.</li><li>(Optional) Run the <a href="cmdqueryname=peer+reflect-client"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i><strong><span> reflect-client</span></strong> command to configure the device as an RR and its peer as an RR client. If IBGP peers are configured on the network, you need to run this command.</li><li><p>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the VPNv4 address family view.</p>
</li><li>Run the <a href="cmdqueryname=l2vpn-family+evpn"><b><span class="cmdname">l2vpn-family evpn</span></b></a> command to enable the EVPN address family and enter its view.</li><li>Run the <a href="cmdqueryname=import-rib+vpnv4+mpls"><b><span class="cmdname">import-rib vpnv4 mpls</span></b></a> command to enable the function to import BGP VPNv4 routes into the EVPN routing table.</li><li>Run the <a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname">segment-routing ipv6 locator</span></b></a> <i><span class="varname">locator-name</span></i> command to enable the device to add the SID attribute to EVPN routes to be advertised.</li><li>Run the <a href="cmdqueryname=undo+policy+vpn-target"><b><span class="cmdname">undo policy vpn-target</span></b></a> command to cancel VPN target-based VPN route filtering. After this operation is performed, all VPN routes can be received.</li><li>Run the <a href="cmdqueryname=segment-routing+ipv6+apply-sid"><b><span class="cmdname">segment-routing ipv6 apply-sid</span></b></a> <strong><span>{ per-route | per-nexthop }</span></strong> <strong><a href="cmdqueryname=import-rib"><b><span class="cmdname">import-rib</span></b></a> </strong><strong><span>vpnv4</span></strong> command to enable the function to apply for SIDs in one-SID-per-route or one-SID-per-next-hop mode for imported VPNv4 routes.</li><li>(Optional) Run the <a href="cmdqueryname=peer+next-hop-local"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i><strong><span> next-hop-local</span></strong> command to configure the device to set its IP address as the next hop of the routes to be advertised to the specified IBGP peer. If IBGP peers are configured on the network, you need to run this command.</li><li>(Optional) Run the <a href="cmdqueryname=peer+reflect-client"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i><strong><span> reflect-client</span></strong> command to configure the device as an RR, and its peer as an RR client. If IBGP peers are configured on the network, you need to run this command.</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the EVPN address family view.</li><li><p>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the BGP instance view.</p>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
<p>Perform the following steps to configure BGP VPNv6 and EVPN interworking.</p>
<ol type="a"><li>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</li><li>Run the <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i> command to enter the BGP view.</li><li><p>Run the <a href="cmdqueryname=ipv6-family+vpnv6"><b><span class="cmdname">ipv6-family vpnv6</span></b></a> command to enable the VPNv6 address family and enter its view.</p>
</li><li>Run the <a href="cmdqueryname=import-rib+evpn+srv6+ip-prefix"><b><span class="cmdname">import-rib evpn srv6 ip-prefix</span></b></a> command to enable the function to import EVPN IP prefix routes into the BGP VPNv6 routing table.</li><li>Run the <a href="cmdqueryname=undo+policy+vpn-target"><b><span class="cmdname">undo policy vpn-target</span></b></a> command to cancel VPN target-based VPN route filtering. After this operation is performed, all VPN routes can be received.</li><li>(Optional) Run the <a href="cmdqueryname=peer+next-hop-local"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i><strong><span> next-hop-local</span></strong> command to configure the device to set its IP address as the next hop of the routes to be advertised to the specified IBGP peer. If IBGP peers are configured on the network, you need to run this command.</li><li>(Optional) Run the <a href="cmdqueryname=peer+reflect-client"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i><strong><span> reflect-client</span></strong> command to configure the device as an RR and its peer as an RR client. If IBGP peers are configured on the network, you need to run this command.</li><li><p>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the VPNv6 address family view.</p>
</li><li>Run the <a href="cmdqueryname=l2vpn-family+evpn"><b><span class="cmdname">l2vpn-family evpn</span></b></a> command to enable the EVPN address family and enter its view.</li><li>Run the <a href="cmdqueryname=import-rib+vpnv6+mpls"><b><span class="cmdname">import-rib vpnv6 mpls</span></b></a> command to enable the function to import BGP VPNv6 routes into the EVPN routing table.</li><li>Run the <a href="cmdqueryname=undo+policy+vpn-target"><b><span class="cmdname">undo policy vpn-target</span></b></a> command to cancel VPN target-based VPN route filtering. After this operation is performed, all VPN routes can be received.</li><li>Run the <a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname">segment-routing ipv6 locator</span></b></a> <i><span class="varname">locator-name</span></i> command to enable the device to add the SID attribute to EVPN routes to be advertised.</li><li>Run the <a href="cmdqueryname=segment-routing+ipv6+apply-sid"><b><span class="cmdname">segment-routing ipv6 apply-sid</span></b></a> <strong><span>{ per-route | per-nexthop }</span></strong> <strong><a href="cmdqueryname=import-rib"><b><span class="cmdname">import-rib</span></b></a> </strong><strong><span>vpnv6</span></strong> command to enable the function to apply for SIDs in one-SID-per-route or one-SID-per-next-hop mode for imported VPNv6 routes.</li><li>(Optional) Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i><strong><span> next-hop-local</span></strong> command to configure the device to set its IP address as the next hop of the routes to be advertised to the specified IBGP peer. If IBGP peers are configured on the network, you need to run this command.</li><li>(Optional) Run the <a href="cmdqueryname=peer+reflect-client"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i><strong><span> reflect-client</span></strong> command to configure the device as an RR, and its peer as an RR client. If IBGP peers are configured on the network, you need to run this command.</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the EVPN address family view.</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the BGP instance view.</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0176.html">Configuring Interworking Between EVPN L3VPN over SRv6 TE Policy and Common L3VPN over MPLS in Option B Mode
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0182.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>