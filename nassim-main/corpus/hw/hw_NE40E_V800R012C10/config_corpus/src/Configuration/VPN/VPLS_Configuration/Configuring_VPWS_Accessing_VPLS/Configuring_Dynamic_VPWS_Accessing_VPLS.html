
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Dynamic VPWS Accessing VPLS">
<meta name="abstract" content="This section describes how to configure dynamic VPWS accessing VPLS when UPEs do not support VPLS.">
<meta name="description" content="This section describes how to configure dynamic VPWS accessing VPLS when UPEs do not support VPLS.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6029.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6030.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6032.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,vpls,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00545680">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370150">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Dynamic VPWS Accessing VPLS</title>
</head>
<body><a name="EN-US_TASK_0172370150"></a><a name="EN-US_TASK_0172370150"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Dynamic VPWS Accessing VPLS</h1>
<div class="taskbody"><p>This section describes how to configure dynamic VPWS accessing VPLS when UPEs do not support VPLS.</p>
<div class="steps"><a name="EN-US_TASK_0172370150__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span><a href="dc_vrp_vpws_cfg_3006.html">Configure LDP VPWS</a>.</span></li><li><span><a href="dc_vrp_vpls_cfg_5009.html">Configure LDP HVPLS.</a></span></li><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=vsi"><b><span class="cmdname">vsi</span></b></a> <i><span class="varname">vsi-name</span></i></span><p><p>The VSI view is displayed.</p>
</p></li><li><span>(Optional) Enable MAC Withdraw.</span><ol type="a"><li class="substepexpand"><span>Run the <a href="cmdqueryname=pwsignal+ldp"><b><span class="cmdname">pwsignal ldp</span></b></a> command to enter the VSI-LDP view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=mac-withdraw+enable"><b><span class="cmdname">mac-withdraw enable</span></b></a> and <span><a href="cmdqueryname=interface-status-change+%5B+up+%7C+down+%5D+mac-withdraw+enable"><b><span class="cmdname">interface-status-change [ up | down ] mac-withdraw enable</span></b></a></span> commands to enable MAC Withdraw.</span><p><p>If you do not enable this function, a traffic forwarding error may occur before MAC addresses age out.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the VSI view.</span></li></ol>
</li><li><span>(Optional) Run <a href="cmdqueryname=local-mac+remove+all-but-mine"><b><span class="cmdname">local-mac remove all-but-mine</span></b></a></span><p><p>The device is enabled to delete all MAC address entries in the VSI, except those learned from the PW over which the device receives the MAC Withdraw message with TLV type 0x404. This is a standard implementation.</p>
</p><p><p>If you do not perform this step, the device will delete all MAC addresses when receiving a MAC Withdraw message with TLV type 0x404.</p>
</p></li><li><span>(Optional) Enable MAC Withdraw loop detection.</span><ol type="a"><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=mpls+l2vpn"><b><span class="cmdname">mpls l2vpn</span></b></a> command to enter the MPLS L2VPN view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=vpls+mac-withdraw+loop-detect+enable"><b><span class="cmdname">vpls mac-withdraw loop-detect enable</span></b></a> command to enable MAC Withdraw loop detection.</span><p><p>A MAC Withdraw loop detection-capable PE forwards MAC Withdraw messages with the Path TLV inserted. A MAC Withdraw loop detection-incapable device forwards MAC Withdraw messages without inserting the Path TLV.</p>
</p></li></ol>
</li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6029.html">Configuring VPWS Accessing VPLS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6030.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6032.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>