
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring VPLS E-Tree">
<meta name="abstract" content="In a VPLS domain, you can configure VPLS E-Tree to control communication between AC-side users.">
<meta name="description" content="In a VPLS domain, you can configure VPLS E-Tree to control communication between AC-side users.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5029.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_erps_cfg_0022_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0252797626">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring VPLS E-Tree</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0252797626"></a><a name="EN-US_TASK_0252797626"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring VPLS E-Tree</h1>
<div class="taskbody"><p>In a VPLS domain, you can configure VPLS E-Tree to control communication between AC-side users.</p>
<div class="context"><a name="EN-US_TASK_0252797626__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><div class="p"><h4 class="sectiontitle">Networking Requirements</h4><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This section applies only to the M2K and M2K-B models.</p>
</div></div>
<p>In a VPLS domain, AC interfaces bound to the same VSI can communicate with one another. It is necessary to enhance user data security and minimize mutual influence between users by controlling communication between AC interfaces.</p>
<p>To tackle this issue, configure VPLS E-Tree. Configure AC interfaces as root or leaf interfaces to allow bidirectional communication between roots and leaf nodes and allow communication between multiple roots but not between leaf nodes.</p>
<p>On the network shown in <a href="#EN-US_TASK_0252797626__fig285915105220">Figure 1</a>, CE1, CE2, CE3, and CE4 are AC-side users in the same VSI. To improve user security and reduce mutual impact between these users, control mutual access between them. That is, CE1 and CE2 cannot communicate, however, CE1 can communicate with CE3 and CE4.</p>
<p>To implement the preceding functions, configure VPLS E-Tree. Specifically, configure the AC interfaces that connect PEs to CE1 and CE2 as leaf interfaces and the AC interfaces that connect PEs to CE3 and CE4 as root interfaces to control the communication between the PEs and CE3 and between the PEs and CE4.</p>
<div class="fignone" id="EN-US_TASK_0252797626__fig285915105220"><a name="EN-US_TASK_0252797626__fig285915105220"></a><a name="fig285915105220"></a><span class="figcap"><b>Figure 1 </b>VPLS E-Tree networking</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interfaces 1 through 4 represent GE<span>0/1/0</span>, GE<span>0/1/1</span>, GE<span>0/1/2</span>, and GE<span>0/1/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0252798164.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><a name="EN-US_TASK_0252797626__tab_dc_vrp_vpls_cfg_507301"></a><a name="tab_dc_vrp_vpls_cfg_507301"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0252797626__tab_dc_vrp_vpls_cfg_507301" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Interfaces and IP addresses</caption><thead align="left"><tr><th align="left" class="cellrowborder" char="." valign="top" width="20%" id="mcps1.4.1.8.2.4.1.1" liSelected="liSelected"><p><strong>Device</strong></p>
</th>
<th align="left" class="cellrowborder" char="." valign="top" width="60%" id="mcps1.4.1.8.2.4.1.2" liSelected="liSelected"><p><strong>Interface</strong></p>
</th>
<th align="left" class="cellrowborder" char="." valign="top" width="20%" id="mcps1.4.1.8.2.4.1.3" liSelected="liSelected"><p><strong>IP Address</strong></p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="3" valign="middle" width="20%" headers="mcps1.4.1.8.2.4.1.1 "><p>PE1</p>
</td>
<td class="cellrowborder" char="." valign="top" width="60%" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="20%" headers="mcps1.4.1.8.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.4.1.3 "><p>10.1.3.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.4.1.2 "><p>LoopBack 0</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.4.1.3 "><p>1.1.1.1/32</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="5" valign="middle" width="20%" headers="mcps1.4.1.8.2.4.1.1 "><p>PE2</p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" char="." valign="top" width="60%" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="20%" headers="mcps1.4.1.8.2.4.1.3 "><p>10.1.3.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/3</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.8.2.4.1.3 "><p>10.1.4.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.8.2.4.1.2 "><p>LoopBack 0</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.8.2.4.1.3 "><p>2.2.2.2/32</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" valign="middle" width="20%" headers="mcps1.4.1.8.2.4.1.1 "><p>PE3</p>
<p></p>
</td>
<td class="cellrowborder" char="." valign="top" width="60%" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="20%" headers="mcps1.4.1.8.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/3</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.4.1.3 "><p>10.1.4.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.8.2.4.1.2 "><p>LoopBack 0</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.8.2.4.1.3 "><p>3.3.3.3/32</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="middle" width="20%" headers="mcps1.4.1.8.2.4.1.1 "><p>CE1</p>
</td>
<td class="cellrowborder" char="." valign="top" width="60%" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="20%" headers="mcps1.4.1.8.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/0</span>.1</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.4.1.3 "><p>10.1.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="20%" headers="mcps1.4.1.8.2.4.1.1 "><p>CE2</p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.4.1.8.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/1</span>.1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.8.2.4.1.3 "><p>10.1.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="20%" headers="mcps1.4.1.8.2.4.1.1 "><p>CE3</p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.4.1.8.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/1</span>.1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.8.2.4.1.3 "><p>10.1.1.3/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="20%" headers="mcps1.4.1.8.2.4.1.1 "><p>CE4</p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.4.1.8.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.8.2.4.1.2 "><p>GE<span>0/1/2</span>.1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.8.2.4.1.3 "><p>10.1.1.4/24</p>
</td>
</tr>
</tbody>
</table>
</div>
<h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure IP addresses and a routing protocol to implement IP connectivity at the network layer.</p>
</li><li><p>Configure basic MPLS functions and LDP.</p>
</li><li><p>Establish a remote LDP session between PEs.</p>
</li><li><p>Configure LDP VPLS.</p>
</li><li><p>Configure basic VPLS E-Tree functions.</p>
</li><li><p>Configure AC interface attributes.</p>
</li></ol>
<h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Interface numbers and IP addresses (see <a href="#EN-US_TASK_0252797626__tab_dc_vrp_vpls_cfg_507301">Table 1</a>); OSPF process ID (1)</p>
</li><li><p>MPLS LSR IDs of PE1, PE2, and PE3: 1.1.1.1, 2.2.2.2, and 3.3.3.3, respectively</p>
</li><li><p>VSI name (vsi1) and VSI ID (1000)</p>
</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0252797626__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure IP addresses and a routing protocol to implement IP connectivity at the network layer.</span><p><p>Assign an IP address to each involved interface.</p>
<p>Configure a routing protocol on PE1, PE2, and PE3 to ensure that these devices are routable. OSPF is used in this example.</p>
<p>For detailed configurations, see <a href="#EN-US_TASK_0252797626__li337205175414">Configuration Files</a>.</p>
</p></li><li><span>Configure basic MPLS functions and LDP.</span><p><p>For detailed configurations, see <a href="#EN-US_TASK_0252797626__li337205175414">Configuration Files</a>.</p>
</p></li><li><span>Establish a remote LDP session between PEs.</span><p><p>For detailed configurations, see <a href="#EN-US_TASK_0252797626__li337205175414">Configuration Files</a>.</p>
</p></li><li><span>Configure LDP VPLS.</span><p><p>For detailed configurations, see <a href="#EN-US_TASK_0252797626__li337205175414">Configuration Files</a>.</p>
</p></li><li><span>Configure basic VPLS E-Tree functions.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>vsi vsi1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-vsi1]<strong> e-tree static</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-vsi1-etree] <strong>root-vlan 100 leaf-vlan 101</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-vsi1-etree] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-vsi-vsi1-etree] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-vsi-vsi1] <strong>quit</strong></pre>
</p><p><p>The configuration of PE3 is similar to that of PE1. For detailed configurations, see <a href="#EN-US_TASK_0252797626__li1493813712110">Configuration Files</a>.</p>
</p><p><p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>vsi vsi1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-vsi1]<strong> e-tree static</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-vsi1-etree] <strong>root-vlan 100 leaf-vlan 101</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-vsi1-etree] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-vsi1] <strong>pwsignal ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-vsi1] <strong>peer 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-vsi1-ldp] <strong>peer 1.1.1.1 pw pw1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-vsi1-ldp-pw-pw1] <strong>e-tree mode optimized</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-vsi1-ldp-pw-pw1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-vsi-vsi1-ldp-pw-pw1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-vsi-vsi1-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-vsi-vsi1]<strong> quit</strong></pre>
</p></li><li><span>Configure AC interface attributes.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>interface gigabitethernet</strong><strong> <span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>l2 binding vsi vsi1 </strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>l2 binding e-tree leaf</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>commit</strong></pre>
</p><p><p>The configurations of PE2 and PE3 are similar to that of PE1. For detailed configurations, see <a href="#EN-US_TASK_0252797626__li571715410116">Configuration Files</a>.</p>
<p>After the configuration is complete, run the <a href="cmdqueryname=display+vsi+e-tree"><b><span class="cmdname">display vsi e-tree</span></b></a> command on each PE. The command output shows whether VPLS E-Tree has been successfully configured.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>display vsi e-tree</strong>
Total E-Tree VSI number is 1
 
 ***VSI Name               : vsi1
    VSI Index              : 0
    VSI State              : up
    E-Tree Mode            : static
    E-Tree Root VLAN       : 100
    E-Tree Leaf VLAN       : 101
 
    VSI ID                 : 1000
   *Peer Router ID         : 2.2.2.2
    Peer E-Tree Mode       : normal
    Peer E-Tree Leaf       : --
 
    Interface Name         : GigabitEthernet<span>0/1/0</span>.1
    State                  : up
    AC E-Tree Type         : leaf</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0252797626__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li id="EN-US_TASK_0252797626__li337205175414"><a name="EN-US_TASK_0252797626__li337205175414"></a><a name="li337205175414"></a>CE1 configuration file<pre class="screen">#
sysname CE1
#
interface GigabitEthernet<span>0/1/0</span> 
 undo shutdown
#
interface GigabitEthernet<span>0/1/0</span>.1 
 vlan-type dot1q 10 
 ip address 10.1.1.1 255.255.255.0
#
return </pre>
</li></ul>
<ul><li><p>CE2 configuration file</p>
<pre class="screen"># 
sysname CE2 
# 
interface GigabitEthernet<span>0/1/1</span>  
 undo shutdown 
# 
interface GigabitEthernet<span>0/1/1</span>.1  
 vlan-type dot1q 10  
 ip address 10.1.1.2 255.255.255.0 
# 
return</pre>
</li></ul>
<ul><li>CE3 configuration file<pre class="screen"># 
sysname CE3 
# 
interface GigabitEthernet<span>0/1/1</span>  
 undo shutdown 
# 
interface GigabitEthernet<span>0/1/1</span>.1  
 vlan-type dot1q 10  
 ip address 10.1.1.3 255.255.255.0 
#
return</pre>
</li></ul>
<ul><li><div class="p">CE4 configuration file<pre class="screen"># 
sysname CE4  
# 
interface GigabitEthernet<span>0/1/2</span>  
 undo shutdown 
# 
interface GigabitEthernet<span>0/1/2</span>.1  
 vlan-type dot1q 10  
 ip address 10.1.1.4 255.255.255.0 
# 
return</pre>
</div>
</li></ul>
<ul><li><div class="p">PE1 configuration file<pre class="screen">#
sysname PE1
#
mpls lsr-id 1.1.1.1
#
mpls
#
mpls l2vpn
#
vsi vsi1
 e-tree static
  root-vlan 100 leaf-vlan 101
 pwsignal ldp
  vsi-id 1000
  peer 2.2.2.2
#
mpls ldp
#
mpls ldp remote-peer 2.2.2.2
 remote-ip 2.2.2.2
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/0</span>.1
 vlan-type dot1q 10
 l2 binding vsi vsi1
 l2 binding e-tree leaf  
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.3.1 255.255.255.0
 mpls
 mpls ldp
#
interface LoopBack0
 ip address 1.1.1.1 255.255.255.255
#
ospf 1
 opaque-capability enable
 graceful-restart
 area 0.0.0.0
  network 1.1.1.1 0.0.0.0
  network 10.1.3.0 0.0.0.255
#
return</pre>
</div>
</li></ul>
<ul><li id="EN-US_TASK_0252797626__li571715410116"><div class="p"><a name="EN-US_TASK_0252797626__li571715410116"></a><a name="li571715410116"></a>PE2 configuration file<pre class="screen">#
sysname PE2
#
mpls lsr-id 2.2.2.2
#
mpls
#
mpls l2vpn
#
vsi vsi1
 e-tree static
  root-vlan 100 leaf-vlan 101
 pwsignal ldp
  vsi-id 1000
  peer 1.1.1.1
  peer 1.1.1.1 pw pw1
   e-tree mode optimized
  peer 3.3.3.3
#
mpls ldp
#
mpls ldp remote-peer 1.1.1.1
 remote-ip 1.1.1.1
#
mpls ldp remote-peer 3.3.3.3
 remote-ip 3.3.3.3
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.3.2 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/1</span>.1
 vlan-type dot1q 10
 l2 binding vsi vsi1
 l2 binding e-tree leaf 
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/2</span>.1
 vlan-type dot1q 10
 l2 binding vsi vsi1
#
interface GigabitEthernet<span>0/1/3</span>
 undo shutdown
 ip address 10.1.4.1 255.255.255.0
 mpls
 mpls ldp
#
interface LoopBack0
 ip address 2.2.2.2 255.255.255.255
#
ospf 1
 opaque-capability enable
 graceful-restart
 area 0.0.0.0
  network 2.2.2.2 0.0.0.0
  network 10.1.3.0 0.0.0.255
 area 0.0.0.1
  network 10.1.4.0 0.0.0.255
#
return</pre>
</div>
</li></ul>
<ul><li id="EN-US_TASK_0252797626__li1493813712110"><div class="p"><a name="EN-US_TASK_0252797626__li1493813712110"></a><a name="li1493813712110"></a>PE3 configuration file<pre class="screen">#
sysname PE3
#
mpls lsr-id 3.3.3.3
#
mpls
#
mpls l2vpn
#
vsi vsi1
 e-tree static
  root-vlan 100 leaf-vlan 101
 pwsignal ldp
  vsi-id 1000
  peer 2.2.2.2
#
mpls ldp
#
mpls ldp remote-peer 2.2.2.2
 remote-ip 2.2.2.2
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/2</span>.1
 vlan-type dot1q 10
 l2 binding vsi vsi1
#
interface GigabitEthernet<span>0/1/3</span>
 undo shutdown
 ip address 10.1.4.2 255.255.255.0
 mpls
 mpls ldp
#
interface LoopBack0
 ip address 3.3.3.3 255.255.255.255
#
ospf 1
 opaque-capability enable
 graceful-restart
 area 0.0.0.1
  network 3.3.3.3 0.0.0.0
  network 10.1.4.0 0.0.0.255
#
return</pre>
</div>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5029.html">Configuration Examples for VPLS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_erps_cfg_0022_1.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>