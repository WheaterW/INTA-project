
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring BFD for PW">
<meta name="abstract" content="After configuring PWs, configure BFD for PW to detect the faults of the primary PW to speed up fault detection and improve PW switching performance.">
<meta name="description" content="After configuring PWs, configure BFD for PW to detect the faults of the primary PW to speed up fault detection and improve PW switching performance.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5049.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5052.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5054.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370180">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring BFD for PW</title>
</head>
<body><a name="EN-US_TASK_0172370180"></a><a name="EN-US_TASK_0172370180"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring BFD for PW</h1>
<div class="taskbody"><p>After configuring PWs, configure BFD for PW to detect the faults of the primary PW to speed up fault detection and improve PW switching performance.</p>
<div class="context"><a name="EN-US_TASK_0172370180__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If no signaling is used to detect PW faults, PWs are notified of MPLS tunnel faults. However, PWs are slow to perceive faults in this case. To quicken PW fault detection, configure BFD for PW.</p>
<p>Generally, BFD for PW only needs to be configured for the primary PW. When BFD for PW detects a fault on the primary PW, BFD for PW immediately triggers a primary/secondary PW switchover.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172370180__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></span><p><p>BFD is enabled globally, and the global BFD view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>On the UPE, SPE, or NPE configured with a VSI, run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <i><span class="varname">cfg-name</span></i> <strong><span>bind pw</span></strong> <strong><span>vsi</span></strong> <i><span class="varname">vsi-name</span></i> <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> [ <strong><span>vc-id</span></strong> <i><span class="varname">vc-id</span></i> ] [ <strong><span>remote-peer</span></strong> <i><span class="varname">remote-peer-address</span></i> <strong><span>pw-ttl</span></strong> { <strong><span>auto-calculate</span></strong> | <i><span class="varname">ttl-number</span></i> } ]</span><p><p>BFD for VSI PW is configured.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When configuring BFD for PW, you need to configure the <a href="cmdqueryname=ignore-standby-state"><b><span class="cmdname">ignore-standby-state</span></b></a> command on the SPE. Otherwise, the secondary PW remains blocked and the BFD session cannot go up. Similarly, if you do not configure the <a href="cmdqueryname=ignore-standby-state"><b><span class="cmdname">ignore-standby-state</span></b></a> command, the primary PW stays in the backup state during a delayed traffic switchback, and the BFD session cannot go up.</p>
</div></div>
</p></li><li><span>Configure BFD session discriminators:</span><p><ul><li><p>To configure the local discriminator, run the <a href="cmdqueryname=discriminator"><b><span class="cmdname">discriminator</span></b></a> <strong><span>local</span></strong> <i><span class="varname">discr-value</span></i> command.</p>
</li><li><p>To configure the remote discriminator, run the <a href="cmdqueryname=discriminator"><b><span class="cmdname">discriminator</span></b></a> <strong><span>remote</span></strong> <i><span class="varname">discr-value</span></i> command.</p>
</li></ul>
<p>The local BFD session discriminator on one end must be the same as the remote BFD session discriminator on the other end.</p>
</p></li><li><span>(Optional) Configure BFD for VPLS LDP PW.</span><ol type="a"><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=vsi"><b><span class="cmdname">vsi</span></b></a> <i><span class="varname">vsi-name</span></i> command to enter the view of the created VSI.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=pwsignal"><b><span class="cmdname">pwsignal</span></b></a> <strong><span>ldp</span></strong> command to enter the VSI-LDP view.</span></li><li class="substepexpand"><span>Run the <strong><a href="cmdqueryname=vsi-id"><b><span class="cmdname">vsi-id</span></b></a></strong> <i><span class="varname">vsi-id</span></i> command to configure an ID for the VSI.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a><i><span class="varname"> peer-address</span></i> [ <strong><span>negotiation-vc-id</span></strong> <i><span class="varname">vc-id</span></i> ] <strong><span>pw</span></strong> <i><span class="varname">pw-name</span></i> command to enter the VSI-LDP-PW view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=track+bfd"><b><span class="cmdname">track bfd</span></b></a> <i><span class="varname">bfd-session</span></i> command to configure BFD for VPLS LDP PW.</span><p><p>In a VPLS PW redundancy protection scenario, a BD is used for interworking between a VPLS network and a VXLAN network. If a fault occurs on the VXLAN side, the VPLS PW cannot detect the VXLAN fault. As a result, PW switching fails. After this command is run, a PW can detect VXLAN faults. If BFD detects a down event, it triggers PW status switching to implement protection switching.</p>
</p></li></ol>
</li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p><p><p>If the status of a PW is down, the BFD session can be established but cannot go up.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>You must configure or cancel BFD for PW on both endpoint PEs of a PW. Otherwise, the PW status on both endpoint PEs may be inconsistent.</p>
</div></div>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5049.html">Configuring VPLS PW Redundancy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5052.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5054.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>