
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IPv6+VPNv6 Hybrid FRR">
<meta name="abstract" content="This section describes how to configure IPv6+VPNv6 hybrid FRR in the CE dual-homing networking. If the next hop from a PE to a CE is unreachable, IPv6+VPNv6 hybrid FRR can send traffic to the other PE over a tunnel, and the traffic will be routed to the CE through IP forwarding on the private network. This improves network reliability.">
<meta name="description" content="This section describes how to configure IPv6+VPNv6 hybrid FRR in the CE dual-homing networking. If the next hop from a PE to a CE is unreachable, IPv6+VPNv6 hybrid FRR can send traffic to the other PE over a tunnel, and the traffic will be routed to the CE through IP forwarding on the private network. This improves network reliability.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2029.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2074.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00847023">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369680">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring IPv6+VPNv6 Hybrid FRR</title>
</head>
<body><a name="EN-US_TASK_0172369680"></a><a name="EN-US_TASK_0172369680"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IPv6+VPNv6 Hybrid FRR</h1>
<div class="taskbody"><p>This section describes how to configure IPv6+VPNv6 hybrid FRR in the CE dual-homing networking. If the next hop from a PE to a CE is unreachable, IPv6+VPNv6 hybrid FRR can send traffic to the other PE over a tunnel, and the traffic will be routed to the CE through IP forwarding on the private network. This improves network reliability.</p>
<div class="context"><a name="EN-US_TASK_0172369680__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>IPv6+VPNv6 hybrid FRR can quickly switch traffic from a PE to another PE that serves as the backup next hop if the primary route to a CE is unreachable.</p>
<p>A PE learns IPv6 VPN routes with the same prefix from a CE and other PEs. In this situation, IPv6+VPNv6 hybrid FRR can be configured on the PE. After IPv6+VPNv6 hybrid FRR is enabled, the PE generates a primary route and a backup route to the VPN prefix. If the link between the PE and CE fails, the traffic can be quickly switched to the backup next hop (another PE).</p>
<p>The <span class="keyword">NE40E</span> supports two IPv6+VPNv6 hybrid FRR modes:</p>
<ul><li><p>IPv6 FRR: applies to the networking where a non-BGP routing protocol runs between the PEs and CE.</p>
</li><li><p>Private network BGP auto FRR: applies to the networking where BGP runs between the PEs and CE.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172369680__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring hybrid FRR for IPv6 and VPNv6 routes, complete the following tasks:</p>
<ul><li><p>Configure a BGP/MPLS IPv6 VPN.</p>
</li><li><p>Ensure that a PE learns IPv6 routes with the same prefix from a CE and other VPNv6 peers.</p>
</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172369680__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure IPv6 FRR.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span></span><p><p>The VPN instance view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a></span></span><p><p>The VPN instance IPv6 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv6+frr"><b><span class="cmdname">ipv6 frr</span></b></a></span></span><p><p>IPv6 FRR is enabled.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure private network BGP auto FRR.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></span></span><p><p>The BGP-VPN instance IPv6 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=auto-frr"><b><span class="cmdname">auto-frr</span></b></a></span></span><p><p>BGP auto FRR is enabled.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=route-select+delay"><b><span class="cmdname">route-select delay</span></b></a> <i><span class="varname">delay-value</span></i></span></span><p><p>A delay for selecting a route to the intermediate device on the primary path is configured. After the primary path recovers, an appropriate delay ensures that traffic switches back to the primary path after the intermediate device completes refreshing forwarding entries.</p>
</p><p></p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0172369680__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Checking the Configurations</h4><p>Run the <a href="cmdqueryname=display+ipv6+routing-table+vpn-instance"><b><span class="cmdname">display ipv6 routing-table vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> [ <i><span class="varname">ipv6-address</span></i> ] <strong><span>verbose</span></strong> command on the PE to check the backup outbound interface and backup next hop of the IPv6 route in the routing table.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2000.html">BGP/MPLS IPv6 VPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2029.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2074.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>