
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Dynamic BFD for EVPN VPWS over SRv6">
<meta name="abstract" content="To speed up EVPN VPWS over SRv6 convergence when the link status changes, configure dynamic BFD for EVPN VPWS over SRv6. When BFD detects a link fault, it notifies EVPN of the fault and triggers fast EVPN convergence. This feature provides a fast fault detection mechanism for EVPN VPWS over SRv6, speeding up network convergence.">
<meta name="description" content="To speed up EVPN VPWS over SRv6 convergence when the link status changes, configure dynamic BFD for EVPN VPWS over SRv6. When BFD detects a link fault, it notifies EVPN of the fault and triggers fast EVPN convergence. This feature provides a fast fault detection mechanism for EVPN VPWS over SRv6, speeding up network convergence.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0179.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0197.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001162357532">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Dynamic BFD for EVPN VPWS over SRv6</title>
</head>
<body><a name="EN-US_TASK_0000001162357532"></a><a name="EN-US_TASK_0000001162357532"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Dynamic BFD for EVPN VPWS over SRv6</h1>
<div class="taskbody"><p>To speed up EVPN VPWS over SRv6 convergence when the link status changes, configure dynamic BFD for EVPN VPWS over SRv6. When BFD detects a link fault, it notifies EVPN of the fault and triggers fast EVPN convergence. This feature provides a fast fault detection mechanism for EVPN VPWS over SRv6, speeding up network convergence.</p>
<div class="context"><a name="EN-US_TASK_0000001162357532__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>If a device or link fails, EVPN can use dynamic BFD for fast link convergence. BFD detects faults on EVPN VPWS links within milliseconds. The fast detection speed ensures rapid link switching and minimal traffic loss.</p>
<p>To use BFD sessions to provide link detection for EVPN VPWS over SRv6, configure dynamic BFD for EVPN VPWS over SRv6 on PEs.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001162357532__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring dynamic BFD for EVPN VPWS over SRv6, configure link layer protocol parameters (and IP addresses) for interfaces to ensure that the link layer protocol on the interfaces is up. Then complete one of the following tasks:</p>
<ul><li><p><a href="dc_vrp_srv6_cfg_all_0021_copy.html">Configuring EVPN VPWS over IS-IS SRv6 BE</a></p>
</li><li><p><a href="dc_vrp_cfg_evpn-vpws_over_srv6-te_policy_copy.html">Configuring EVPN VPWS over SRv6 TE Policy</a></p>
</li><li><a href="dc_vrp_evpn_cfg_0230.html">Configuring Static EVPN VPWS over SRv6 BE</a></li><li><a href="dc_vrp_evpn_cfg_0240.html">Configuring Static EVPN VPWS over SRv6 TE Policy</a></li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001162357532__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></span><p><p>BFD is enabled globally on the local device.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>Enter the EVPL instance view.</span><ul><li>Run the <a href="cmdqueryname=evpl+instance"><b><span class="cmdname">evpl instance</span></b></a> <i><span class="varname">evpl-id</span></i> command to enter the dynamic EVPL instance view.</li><li>Run the <a href="cmdqueryname=evpl+instance"><b><span class="cmdname">evpl instance</span></b></a> <i><span class="varname">evpl-id</span></i> <strong>static-mode</strong> command to enter the static EVPL instance view.</li></ul>
</li><li><span>Run <a href="cmdqueryname=bfd+detect"><b><span class="cmdname">bfd detect</span></b></a> [ <strong><span>detect-multiplier</span></strong> <i><span class="varname">multiplier</span></i> | <strong><span>min-rx-interval</span></strong> <i><span class="varname">min-rx-interval</span></i> | <strong><span>min-tx-interval</span></strong> <i><span class="varname">min-tx-interval</span></i> ] <sup>*</sup> [ <strong>track-interface</strong> ]</span><p><p>BFD for EVPN VPWS over SRv6 is enabled, and BFD session parameters are set.</p>
</p><p><p> command directly The parameters need to be configured based on network conditions and network reliability requirements. Use a short BFD packet transmission interval for links that require high reliability, and a long transmission interval for links that do not require high reliability.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>There are three formulas: Actual interval for the local device to transmit BFD packets = MAX {Locally configured interval for transmitting BFD packets, Remotely configured interval for receiving BFD packets}, Actual interval for the local device to receive BFD packets = MAX {Remotely configured interval for transmitting BFD packets, Locally configured interval for receiving BFD packets}, and Local detection period = Actual interval for receiving BFD packets x Remotely configured BFD detection multiplier.</p>
<p>For example, if the following conditions are met:</p>
<ul><li><p>On the local device, the configured interval for transmitting BFD packets is 200 ms, the interval for receiving BFD packets is 300 ms, and the detection multiplier is 4.</p>
</li><li><p>On the peer device, the configured interval for transmitting BFD packets is 100 ms, the interval for receiving BFD packets is 600 ms, and the detection multiplier is 5.</p>
</li></ul>
<p>In this case:</p>
<ul><li><p>On the local device, the actual interval for transmitting BFD packets is 600 ms, calculated by using the formula MAX {200 ms, 600 ms}; the interval for receiving BFD packets is 300 ms, calculated by using the formula MAX {100 ms, 300 ms}; the detection period is 1500 ms, calculated by multiplying 300 ms by 5.</p>
</li><li><p>On the peer device, the actual interval for transmitting BFD packets is 300 ms, calculated by using the formula MAX {100 ms, 300 ms}; the interval for receiving BFD packets is 600 ms, calculated by using the formula MAX {200 ms, 600 ms}; the detection period is 2400 ms, calculated by multiplying 600 ms by 4.</p>
</li></ul>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001162357532__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring dynamic BFD for EVPN VPWS, you can run the following command to verify the configuration.</p>
<ul><li>Run the <a href="cmdqueryname=display+bfd+session"><b><span class="cmdname">display bfd session </span></b></a><strong><span>all for-evpn-vpws</span></strong> command to check information about BFD sessions established by EVPN VPWS.</li><li>Run the <a href="cmdqueryname=display+bfd+session"><b><span class="cmdname">display bfd session</span></b></a><strong><span> evpn-vpws</span></strong> <i><span class="varname">evpl-instance-id</span></i> <strong><span>verbose</span></strong> command to check detailed information about BFD sessions established by EVPN VPWS.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">EVPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0179.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0197.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>