
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring EVPN L3VPNv6 over SRv6 TE Policy">
<meta name="abstract" content="This section describes how to configure EVPN L3VPNv6 over SRv6 TE Policy so that EVPN L3VPNv6 services can be carried over SRv6 TE Policies.">
<meta name="description" content="This section describes how to configure EVPN L3VPNv6 over SRv6 TE Policy so that EVPN L3VPNv6 services can be carried over SRv6 TE Policies.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_evpn-l3vpn_over_srv6-te_policy_copy.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0079.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00587852">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0297800925">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring EVPN L3VPNv6 over SRv6 TE Policy</title>
</head>
<body><a name="EN-US_TASK_0297800925"></a><a name="EN-US_TASK_0297800925"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring EVPN L3VPNv6 over SRv6 TE Policy</h1>
<div class="taskbody"><p>This section describes how to configure EVPN L3VPNv6 over SRv6 TE Policy so that EVPN L3VPNv6 services can be carried over SRv6 TE Policies.</p>
<div class="context"><a name="EN-US_TASK_0297800925__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0297800925__en-us_task_0179342421_context2102267577214049"><h4 class="sectiontitle">Usage Scenario</h4><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p643095627214049">EVPN L3VPNv6 over SRv6 TE Policy uses public SRv6 TE Policies to carry EVPN L3VPNv6 services. As shown in <a href="#EN-US_TASK_0297800925__en-us_task_0179342421_fig_dc_vrp_evpn_cfg_015201">Figure 1</a>, PE1 and PE2 communicate through an IPv6 public network. An SRv6 TE Policy is deployed on the network to carry EVPN L3VPNv6 services.</p>
<div class="fignone" id="EN-US_TASK_0297800925__en-us_task_0179342421_fig_dc_vrp_evpn_cfg_015201"><a name="EN-US_TASK_0297800925__en-us_task_0179342421_fig_dc_vrp_evpn_cfg_015201"></a><a name="en-us_task_0179342421_fig_dc_vrp_evpn_cfg_015201"></a><span class="figcap"><b>Figure 1 </b>EVPN L3VPNv6 over SRv6 TE Policy networking</span><br><span><img class="vsd" id="EN-US_TASK_0297800925__en-us_task_0179342421_image11889444141419" src="figure/en-us_image_0255966864.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0297800925__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0297800925__en-us_task_0179342421_context1007398596214049"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1523433728214049">Before configuring EVPN L3VPNv6 over SRv6 TE Policy, complete the following tasks:</p>
<ul id="EN-US_TASK_0297800925__en-us_task_0179342421_ul2069783278214049"><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li847147161214049"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p185755317214049"><a name="EN-US_TASK_0297800925__en-us_task_0179342421_li847147161214049"></a><a name="en-us_task_0179342421_li847147161214049"></a><a href="dc_vrp_srv6_cfg_all_0110.html">Configure an SRv6 TE Policy manually</a> or <a href="dc_vrp_srv6_cfg_all_0116.html">use a controller to dynamically deliver an SRv6 TE Policy</a>.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0297800925__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0297800925__en-us_task_0179342421_steps143390331214049"><li id="EN-US_TASK_0297800925__en-us_task_0179342421_step1030839721214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1572610498214049">Configure an L3VPN instance.</span><p><ol type="a" id="EN-US_TASK_0297800925__en-us_task_0179342421_ol436308015214049"><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li520196558214049"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p537623369214049"><a name="EN-US_TASK_0297800925__en-us_task_0179342421_li520196558214049"></a><a name="en-us_task_0179342421_li520196558214049"></a>Run <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1744481045214049">ip vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname151082471214049">vpn-instance-name</span></i></p>
<p id="EN-US_TASK_0297800925__en-us_task_0179342421_p18115134741817">A VPN instance is created, and the VPN instance view is displayed.</p>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li548619153214049"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1494807900214049"><a name="EN-US_TASK_0297800925__en-us_task_0179342421_li548619153214049"></a><a name="en-us_task_0179342421_li548619153214049"></a>Run <a href="cmdqueryname=ipv6-family"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1857425672214049">ipv6-family</span></b></a></p>
<p id="EN-US_TASK_0297800925__en-us_task_0179342421_p74881212161919">The VPN instance IPv6 address family is enabled, and the view of this address family is displayed.</p>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li1075462913214049"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p2082805639214049"><a name="EN-US_TASK_0297800925__en-us_task_0179342421_li1075462913214049"></a><a name="en-us_task_0179342421_li1075462913214049"></a>Run <a href="cmdqueryname=route-distinguisher"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1903044149214049">route-distinguisher</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname765616188214049">route-distinguisher</span></i></p>
<p id="EN-US_TASK_0297800925__en-us_task_0179342421_p16207161651914">An RD is configured for the VPN instance IPv6 address family.</p>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li1350613349214049"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p856407853214049"><a name="EN-US_TASK_0297800925__en-us_task_0179342421_li1350613349214049"></a><a name="en-us_task_0179342421_li1350613349214049"></a>Run <a href="cmdqueryname=vpn-target"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1572082279214049">vpn-target</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname2020561175214049">vpn-target</span></i> &amp;&lt;1-8&gt; [ <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname2107739867214049">both</span></strong> | <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname661106024214049">export-extcommunity</span></strong> | <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname578955942214049">import-extcommunity </span></strong>] <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname196793189214049">evpn</span></strong></p>
<p id="EN-US_TASK_0297800925__en-us_task_0179342421_p17226192193">VPN targets are added to the VPN target list of the VPN instance IPv6 address family, so that routes of the VPN instance can be added to the routing table of the EVPN instance configured with a matching VPN target.</p>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li1465052681318">(Optional) Run <a href="cmdqueryname=default-color"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname869719572217">default-color</span></b></a> <em id="EN-US_TASK_0297800925__en-us_task_0179342421_i7183647523">color-value</em> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1962619335145">evpn</span></strong><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p4832356181414">The default color value is specified for the L3VPNv6 service to recurse to an SRv6 TE Policy.</p>
<p id="EN-US_TASK_0297800925__en-us_task_0179342421_p136981467148">If a remote EVPN route without carrying the Color Extended Community is leaked to a local VPN instance, the default color value is used for the recursion.</p>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li1262605134214049"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1318571131214049"><a name="EN-US_TASK_0297800925__en-us_task_0179342421_li1262605134214049"></a><a name="en-us_task_0179342421_li1262605134214049"></a>(Optional) Run <a href="cmdqueryname=import+route-policy"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname174317909214049">import route-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1705766624214049">policy-name</span></i> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1110365219214049">evpn</span></strong></p>
<p id="EN-US_TASK_0297800925__en-us_task_0179342421_p164651220319">An import route-policy is applied to the VPN instance IPv6 address family to filter the routes to be imported from an EVPN instance to the address family. To precisely control the routes to be imported from the EVPN instance to the VPN instance IPv6 address family, perform this step and set attributes for eligible routes.</p>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li381306464214049"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p19443816371"><a name="EN-US_TASK_0297800925__en-us_task_0179342421_li381306464214049"></a><a name="en-us_task_0179342421_li381306464214049"></a>(Optional) Run <a href="cmdqueryname=export+route-policy"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1257929001214049">export route-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname212775417214049">policy-name</span></i><strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1111253102214049"> evpn</span></strong></p>
<p id="EN-US_TASK_0297800925__en-us_task_0179342421_p969133063716">An export route-policy is applied to the VPN instance IPv6 address family to filter the routes to be advertised by the address family to an EVPN instance. To precisely control the routes to be advertised from the VPN instance IPv6 address family to the EVPN instance, perform this step and set attributes for eligible routes.</p>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li1788085609214049"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p468674345214049"><a name="EN-US_TASK_0297800925__en-us_task_0179342421_li1788085609214049"></a><a name="en-us_task_0179342421_li1788085609214049"></a>Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1504843163214049">quit</span></b></a></p>
<p id="EN-US_TASK_0297800925__en-us_task_0179342421_p5508163314199">Exit the VPN instance IPv6 address family view.</p>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li502620049214049"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1481979892214049"><a name="EN-US_TASK_0297800925__en-us_task_0179342421_li502620049214049"></a><a name="en-us_task_0179342421_li502620049214049"></a>Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname142439129214049">quit</span></b></a></p>
<p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1260173631920">Exit the VPN instance view.</p>
</li></ol>
</p><ol type="a" id="EN-US_TASK_0297800925__en-us_task_0179342421_substeps12612115718555"><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep128711116113"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1287511111116">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1648249999214048">commit</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p12164913387">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_step1690331403214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd338724058214049">Bind the L3VPN instance to an access-side interface.</span><ol type="a" id="EN-US_TASK_0297800925__en-us_task_0179342421_substeps2105176334214049"><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1343679180214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd277946408214049">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1569076207214049">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname2016048307214049">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1227257401214049">interface-number</span></i></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p77641851810">The interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1874064962214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd267165785214049">Run <a href="cmdqueryname=ip+binding+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname915757253214049">ip binding vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname441315531214049">vpn-instance-name</span></i></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p3242145711192">The L3VPN instance is bound to the interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1101695776214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd596902798214049">Run <a href="cmdqueryname=ipv6+enable"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1686606071214049">ipv6 enable</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1482053612013">IPv6 is enabled on the interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep2076703606214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd105791351214049">Run <a href="cmdqueryname=ipv6+address"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname600482532214049">ipv6 address</span></b></a> { <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname138189177214049">ipv6-address</span></i> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1312008302214049">prefix-length</span></i> | <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1621926661214049">ipv6-address</span></i>/<i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname561823454214049">prefix-length</span></i> }</span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p15729175116205">An IPv6 address is configured for the interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1075766757214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd747060806214049">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname63760972214049">quit</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p59339113215">Exit the interface view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep11287132419563"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd528792420563">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname172871924185614">commit</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p521622993813">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_step1178127034214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd981835098214049">Configure BGP EVPN peers.</span><p><div class="note" id="EN-US_TASK_0297800925__en-us_task_0179342421_note482695825214049"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1622996056214049">If a BGP RR needs to be configured on the network, establish BGP EVPN peer relationships between all the PEs and the RR.</p>
</div></div>
</p><ol type="a" id="EN-US_TASK_0297800925__en-us_task_0179342421_substeps1750517409214049"><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep184611205214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1794136167214049">Run <a href="cmdqueryname=bgp"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname74814742214049">bgp</span></b></a> { <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname502185367214049">as-number-plain</span></i> | <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname72297199214049">as-number-dot</span></i> }</span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p13972144313247">BGP is enabled, and the BGP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1844786949214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd2112840104214049">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname2105258385214049">peer</span></b></a> { <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname647939425214049">ipv6-address</span></i> | <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname2125986406214049">group-name</span></i> } <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname618240617214049">as-number</span></strong> { <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1293517741214049">as-number-plain</span></i> | <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname973446910214049">as-number-dot</span></i> }</span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p97381118112418">The remote PE is configured as a peer.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep17421513214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd745592999214049">(Optional) Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname2026129260214049">peer</span></b></a> { <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname668048336214049">ipv6-address</span></i> | <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname10998237674">group-name</span></i> } <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname59989371377">connect-interface</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1699818371973">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname99989375715">interface-number</span></i></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p18517291989">A source interface and a source address are specified to set up a TCP connection with the BGP peer.</p>
</p><p><div class="note" id="EN-US_TASK_0297800925__en-us_task_0179342421_note1178520917214049"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1159375738214049">If loopback interfaces are used to establish a BGP connection, you are advised to run the <a href="cmdqueryname=peer+connect-interface"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname436735922214049">peer connect-interface</span></b></a> command on both ends to ensure the connectivity. If this command is run on one end only, the BGP connection may fail to be established.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1379965730214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd260636510214049">Run <a href="cmdqueryname=ipv6-family"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname117481379214049">ipv6-family</span></b></a> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname496523582214049">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname331876419214049">vpn-instance-name</span></i></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p791514597587">The BGP-VPN instance IPv6 address family view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1960381016214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1429623638214049">Run <a href="cmdqueryname=import-route"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname471816305214049">import-route</span></b></a> { <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname335855848214049">direct</span></strong> | <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname513519402214049">isis</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname432955875214049">process-id</span></i> | <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1488409055214049">static</span></strong> | <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1205339474214049">ospfv3</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1301722715214049">process-id</span></i> | <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1022563878214049">ripng</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1076303018214049">process-id</span></i> } [ <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1493309978214049">med</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname136897745214049">med</span></i> | <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1542963777214049">route-policy</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1836850994214049">route-policy-name</span></i> ] <sup id="EN-US_TASK_0297800925__en-us_task_0179342421_sup312753173214049">*</sup></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p14399126201818">Routes of other protocols are imported to the BGP-VPN instance IPv6 address family. To advertise host IP routes, configure import of direct routes. To advertise routes on the network segment where the host resides, use a dynamic routing protocol (such as OSPFv3) to advertise routes on the network segment and then perform this step to import the routes of the dynamic routing protocol.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep2085421869214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd604749596214049">Run <a href="cmdqueryname=advertise+l2vpn+evpn"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname511774076214049">advertise l2vpn evpn</span></b></a> [ <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname0263151262515">import-route-multipath</span></strong> ]</span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p2483151114267">The device is enabled to advertise IP prefix routes. IP prefix routes are used to advertise host IP routes as well as routes on the network segment where the host resides.</p>
</p><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1540018596248">To implement SID-based load balancing, specify the <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname935118559192">import-route-multipath</span></strong> parameter for the device to advertise all IP prefix routes with the same destination address.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1395189060214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd568589827214049">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname438699867214049">quit</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p899211413570">Exit the BGP-VPN instance IPv6 address family view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1877651589214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd418063658214049">Run <a href="cmdqueryname=l2vpn-family+evpn"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1881971146214049">l2vpn-family evpn</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p838314234573">The BGP EVPN address family view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep738378284214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1763306822214049">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname394354765214049">peer</span></b></a> { <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname573317172214049">ipv6-address</span></i> | <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1007181174214049">group-name</span></i> } <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1050209317214049">enable</span></strong></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p17257121220577">The device is enabled to exchange EVPN routes with the specified peer or peer group.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1122298758214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1126354105214049">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname289976276214049">peer</span></b></a> { <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname979028949214049">ipv6-address</span></i> | <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname960805129214049">group-name</span></i> } <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname138910974214049">advertise encap-type</span></strong> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname570577565214049">srv6</span></strong> [ <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname34271686303">advertise-srv6-locator</span></strong> ]</span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p127925186394">The device is enabled to send locator information and EVPN routes carrying SRv6-encapsulated attributes to the specified peer or peer group.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep187881181287"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1978868880">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname247260951214049">quit</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p19146645125616">Exit the BGP EVPN address family view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep13378845111913"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd0378154520195">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname672714551912">quit</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p259511118140">Exit the BGP view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep237245288214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1651906584214049">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname598060130214049">commit</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p18209171919569">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_step945047287214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd620699397214049">On each PE, configure EVPN L3VPNv6 services to recurse to an SRv6 TE Policy.</span><ol type="a" id="EN-US_TASK_0297800925__en-us_task_0179342421_substeps1839207732214049"><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1423905426214048"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd20732614214048">Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname403696952214048">segment-routing ipv6</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1387210117197">SRv6 is enabled, and the SRv6 view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep643844915593"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_cmd1865633037214048">Configure a source address for SRv6 encapsulation. Note that you only need to perform one of the following operations. If both of the operations are performed, the latest configuration overrides the previous one.</span><p><ul id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_ul261475310544"><li id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_li761411538546">Run the <a href="cmdqueryname=encapsulation+source-address"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_cmdname23368553547">encapsulation source-address</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_varname6336145515412">ipv6-address</span></i> [ <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_cmdparmname1633612551542">ip-ttl</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_varname2033635519549">ttl-value</span></i> ] command to directly configure a source address for SRv6 encapsulation.</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_li1554119145516">Run the <a href="cmdqueryname=encapsulation+source-interface"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_cmdname10488513573">encapsulation source-interface</span></b></a> { <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_varname0729113313571">intfname</span></i> | <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_varname17377153912578">interfaceType</span></i> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_varname1951134465716">interfaceNum</span></i> } [ <strong id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_b7945154716571">ip-ttl</strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_varname2091014584572">ttl-value</span></i> ] command to specify the interface to which the source address used for SRv6 encapsulation belongs.<p id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_p2488153115910">If no IPv6 global address is configured for the interface specified using the <a href="cmdqueryname=encapsulation+source-interface"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0172368959_cmdname2054948195915">encapsulation source-interface</span></b></a> command, the source address for SRv6 encapsulation is not configured.</p>
</li></ul>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1183485095214048"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd840453151214048">Run <span><a href="cmdqueryname=locator"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname2042656192214048">locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname2635145015216">locator-name</span></i> [ <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1464025020521">ipv6-prefix</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1764015508525">ipv6-address</span></i> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname0641175011529">prefix-length</span></i> [ <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1264185085217">static</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1764115095214">static-length</span></i> | <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname6641165055216">args</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname4641155019525">args-length</span></i> ] <sup id="EN-US_TASK_0297800925__en-us_task_0179342421_sup17642105016526">*</sup> ]</span></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p171781213155314">An SRv6 locator is configured.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep254117763013"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd159671512409">(Optional) Run <a href="cmdqueryname=opcode"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname0541207123012">opcode</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname6541127103010">func-opcode</span></i> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname45412713309">end-dt6</span></strong> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname75417714304">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname145411875303">vpn-instance-name</span></i> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname7541117163019">evpn</span></strong> or <a href="cmdqueryname=opcode"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0000001188606207_en-us_task_0172368959_cmdname1864624914713">opcode</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0000001188606207_en-us_task_0172368959_varname12646949184710">func-opcode</span></i> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0000001188606207_en-us_task_0172368959_cmdparmname1164664919471">end-dt46</span></strong> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0000001188606207_en-us_task_0172368959_cmdparmname1264674911478">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_en-us_task_0000001188606207_en-us_task_0172368959_varname0646749144717">vpn-instance-name</span></i></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p772854143916">An opcode for static SIDs is configured.</p>
</p><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p27361251202117">Alternatively, run the <a href="cmdqueryname=opcode"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname2054212793015">opcode </span></b></a><i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname354217133012">func-opcode</span></i> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1854297133012">end-dx6</span></strong> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1654218793015">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname12542107183014">vpn-instance-name</span></i><strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1154218773015"> evpn</span></strong> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname0542578301">interface</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname15423711306">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname754212716302">interface-number</span></i> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname175421979307">nexthop</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname25420720306">nexthop-address</span></i> command to configure an opcode for static SIDs.</p>
<p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1954211712307">In EVPN scenarios, <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname4542579306">end-dx6</span></strong> is used to allocate SIDs based on the interfaces to which VPN instances are bound, and <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname13101917367">end-dt6</span></strong> is used to allocate SIDs based on VPN instances.</p>
<p id="EN-US_TASK_0297800925__en-us_task_0179342421_p205426712307">A SID can be either dynamically allocated by BGP or manually configured. If you want to run the <span><a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname16542157183010">segment-routing ipv6 locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname115422703011">locator-name</span></i></span> command to enable dynamic End.DT6 SID allocation through BGP or the <span><a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname5915391314">segment-routing ipv6 locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname7925361319">locator-name</span></i></span> <a href="cmdqueryname=end-dt46"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname15469174113155">end-dt46</span></b></a> command to enable dynamic End.DT46 SID allocation through BGP in the future, skip this step.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1221709375214048"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1178316658214048">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1987641440214048">quit</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p163883811203">Exit the SRv6 locator view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1444214344214048"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd2050301214214048">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1539334644214048">quit</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p108379484200">Exit the SRv6 view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep14881101196"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd174881310131912">Run <a href="cmdqueryname=bgp"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1848813105197">bgp</span></b></a> { <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname154881910101917">as-number-plain</span></i> | <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname2048920109196">as-number-dot</span></i> }</span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p16211608216">The BGP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1380412375115"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd4239140203310">Enable the device to add SIDs to VPN routes to be sent to EVPN. Note that you need to perform configurations only in one of the following two views. If you perform configurations in both views, the configurations in these views are mutually exclusive.</span><p><ul id="EN-US_TASK_0297800925__en-us_task_0179342421_ul152411240193320"><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li8685185120348">Configurations in the BGP-VPN instance IPv6 address family view<ul id="EN-US_TASK_0297800925__en-us_task_0179342421_ul56011143515"><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li42442011163518">Run the <a href="cmdqueryname=ipv6-family"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname2581176133515">ipv6-family</span></b></a> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname958116103517">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname17581867359">vpn-instance-name</span></i> command to enter the BGP-VPN instance IPv6 address family view.</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li824134016331">Run the <a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname3948181713352">segment-routing ipv6 locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname16716549398">locator-name</span></i> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1571175418395">evpn</span></strong> command to enable the device to add SIDs to VPN routes to be sent to EVPN.</li></ul>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li62656718365">Configurations in the BGP-VPN instance view<ul id="EN-US_TASK_0297800925__en-us_task_0179342421_ul12716161116361"><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li328513011444">Run the <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname123791573409">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname173851771400">vpn-instance-name</span></i> command to create a BGP-VPN instance and enter the BGP-VPN instance view.</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li1724114012333">Run the <a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname137109216447">segment-routing ipv6 locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1150121810401">locator-name</span></i> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname17156218134010">end-dt46</span></strong> command to enable the device to add SIDs to VPN routes to be sent to EVPN.</li></ul>
</li></ul>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1680028980214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1132076104214049">Run <a href="cmdqueryname=segment-routing+ipv6+traffic-engineer"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname113168524214146">segment-routing ipv6 traffic-engineer</span></b></a> [ <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname73161312102313">best-effort</span></strong> ] <strong id="EN-US_TASK_0297800925__en-us_task_0179342421_b870414115318">evpn</strong></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p145882261145">The function to recurse EVPN L3VPNv6 services to SRv6 TE Policies is enabled.</p>
<p id="EN-US_TASK_0297800925__en-us_task_0179342421_p171831909218">If an SRv6 BE path exists on the network, you can set the <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname162145541311">best-effort</span></strong> parameter, allowing the SRv6 BE path to function as a best-effort path in the case of an SRv6 TE Policy fault.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep14813183318173"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd19950730154215">(Optional) Run <a href="cmdqueryname=segment-routing+ipv6+color-only+evpn"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname12745135181714">segment-routing ipv6 color-only evpn</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p36928162422">The device is enabled to recurse EVPN L3VPNv6 services to color-only SRv6 TE Policies.</p>
</p><p><div class="note" id="EN-US_TASK_0297800925__en-us_task_0179342421_note112921244101920"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p82921449191">This command applies only to color-only scenarios and supports only statically configured SRv6 TE Policies.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1147514491411"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1347654414145">(Optional) Configure the device to allocate SIDs to BGP VPN IPv6 routes based on next hops, thereby implementing SID-based load balancing.</span><p><ul id="EN-US_TASK_0297800925__en-us_task_0179342421_ul34725618155"><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li99213177163">To configure the device to allocate SIDs to BGP VPN IPv6 routes based on all next hops, run the <a href="cmdqueryname=segment-routing+ipv6+apply-sid+all-nexthop+evpn"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname03957311184">segment-routing ipv6 apply-sid all-nexthop evpn</span></b></a> command.</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li184717568152">To configure the device to allocate a SID to a BGP VPN IPv6 route with a specified next hop, run the <a href="cmdqueryname=segment-routing+ipv6+apply-sid+specify-nexthop+evpn"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname6424115619254">segment-routing ipv6 apply-sid specify-nexthop evpn</span></b></a> command. Then, run the <a href="cmdqueryname=nexthop"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname6878555114615">nexthop</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname12878115513468">nexthop-address</span></i> <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname287825544620">interface</span></b></a> { <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname28782558461">interface-name</span></i> | <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1887817559462">interfaceType</span></i> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname48781055194613">interfaceNum</span></i> } command to specify a next hop and an outbound interface.</li></ul>
</p></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep10144322114612"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd5144102212468">Run the <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname125939028084816">quit</span></b></a> command to return to the BGP view.</span></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep16355253185120"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1135515316514">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname155365710512">quit</span></b></a> Return to the system view.</span></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep12787174211205"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd10787104292010">Run <a href="cmdqueryname=tunnel-policy"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1787184215208">tunnel-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1778714222017">policy-name</span></i> A tunnel policy is created, and the tunnel policy view is displayed.</span></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep978711425203"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1278824218207">(Optional) Run <a href="cmdqueryname=description"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname37881642172015">description</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname37888427200">description-text</span></i> A description is configured for the tunnel policy.</span></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep107881442162014"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd9788174242019">Run <a href="cmdqueryname=tunnel+select-seq"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname5788124213205">tunnel select-seq</span></b></a> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1788164212017">ipv6 srv6-te-policy</span></strong> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname378914262019">load-balance-number</span></strong> <em id="EN-US_TASK_0297800925__en-us_task_0179342421_i171741525164016">loadBalanceNumber</em> The tunnel selection sequence and the number of tunnels for load balancing are configured.</span></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep54013211159"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1940114212151">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname174015213150">quit</span></b></a> Exit the tunnel policy view.</span></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep45150555215"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1515125205214">Run <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1905393218214048">ip vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname848516282214048">vpn-instance-name</span></i> The VPN instance view is displayed.</span></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep174341535175317"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd18434193514539">Run <a href="cmdqueryname=ipv6-family"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1487897906214048">ipv6-family</span></b></a> The VPN instance IPv6 address family view is displayed.</span></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep73274411528"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1232712419520">Run <a href="cmdqueryname=tnl-policy"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname1712878985214048">tnl-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname734496286214048">policy-name</span></i> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1791184484214048">evpn</span></strong> A tunnel policy is applied to the EVPN L3VPN instance.</span></li><li class="substepexpand" id="EN-US_TASK_0297800925__en-us_task_0179342421_substep1800172581214049"><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmd1750949931214049">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname157130412214049">commit</span></b></a></span><p><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p19903151025514">The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0297800925__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1788113795214049">After configuring EVPN L3VPNv6 over SRv6 TE Policy, verify the configuration.</p>
<ul id="EN-US_TASK_0297800925__en-us_task_0179342421_ul1165188104214049"><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li2084969441214049"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1590726788214049"><a name="EN-US_TASK_0297800925__en-us_task_0179342421_li2084969441214049"></a><a name="en-us_task_0179342421_li2084969441214049"></a>Run the <a href="cmdqueryname=display+bgp+vpnv6"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname153191120131612">display bgp vpnv6</span></b></a> { <strong id="EN-US_TASK_0297800925__en-us_task_0179342421_b144961494386">all</strong> | <strong id="EN-US_TASK_0297800925__en-us_task_0179342421_b049712903820">route-distinguisher</strong><em id="EN-US_TASK_0297800925__en-us_task_0179342421_i249717943819"> route-distinguisher</em> | <strong id="EN-US_TASK_0297800925__en-us_task_0179342421_b1449711983820">vpn-instance</strong><em id="EN-US_TASK_0297800925__en-us_task_0179342421_i14975920388"> vpn-instance-name</em> } <strong id="EN-US_TASK_0297800925__en-us_task_0179342421_b1049711923817">routing-table</strong> [ <em id="EN-US_TASK_0297800925__en-us_task_0179342421_i149710923816">network</em> [ <em id="EN-US_TASK_0297800925__en-us_task_0179342421_i15497149203820">prefix-length</em> ] ] command to check BGP VPNv6 route information. The command output shows that the value of <strong id="EN-US_TASK_0297800925__en-us_task_0179342421_b5249112389">Relay Tunnel Out-Interface</strong> is <strong id="EN-US_TASK_0297800925__en-us_task_0179342421_b995331316582">SRv6 TE Policy</strong>.</p>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li933655417511">Run the <a href="cmdqueryname=display+bgp+evpn"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname501659311214049">display bgp evpn</span></b></a> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname69347231014">all</span></strong> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1993512141015">routing-table</span></strong> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1493572131012">prefix-route</span></strong> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname193616216102">prefix</span></i> command to check EVPN IP prefix route information.</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li164665666214049"><p id="EN-US_TASK_0297800925__en-us_task_0179342421_p1576911126214049"><a name="EN-US_TASK_0297800925__en-us_task_0179342421_li164665666214049"></a><a name="en-us_task_0179342421_li164665666214049"></a>Run the <a href="cmdqueryname=display+ipv6+routing-table+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname168560353214049">display ipv6 routing-table vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0297800925__en-us_task_0179342421_varname1799319716214049">vpn-instance-name</span></i> command to check information about IPv6 VPN routes received from the remote end.</p>
</li><li id="EN-US_TASK_0297800925__en-us_task_0179342421_li69595467103">Run the <a href="cmdqueryname=display+ip+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdname12835110181119">display ip vpn-instance</span></b></a><strong id="EN-US_TASK_0297800925__en-us_task_0179342421_b1552617701110"> </strong><em id="EN-US_TASK_0297800925__en-us_task_0179342421_i977385012108">vpn-instance-name</em> <strong><span id="EN-US_TASK_0297800925__en-us_task_0179342421_cmdparmname1437516272112">tunnel-info nexthop</span></strong><em id="EN-US_TASK_0297800925__en-us_task_0179342421_i137731050101018"> nexthopIpv6Addr</em> command to check information about the tunnel to which the route with the specified next hop recurses in each address family of the current VPN instance.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">EVPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_evpn-l3vpn_over_srv6-te_policy_copy.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0079.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>