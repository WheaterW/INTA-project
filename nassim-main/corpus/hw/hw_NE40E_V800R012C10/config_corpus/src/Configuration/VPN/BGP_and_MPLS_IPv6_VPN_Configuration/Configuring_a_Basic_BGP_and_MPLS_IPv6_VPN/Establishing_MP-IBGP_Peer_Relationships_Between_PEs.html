
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Establishing MP-IBGP Peer Relationships Between PEs">
<meta name="abstract" content="MP-IBGP uses extended community attributes to advertise VPNv6 routes between PEs.">
<meta name="description" content="MP-IBGP uses extended community attributes to advertise VPNv6 routes between PEs.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2057.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2082.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2061.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00847023">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369589">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Establishing MP-IBGP Peer Relationships Between PEs</title>
</head>
<body><a name="EN-US_TASK_0172369589"></a><a name="EN-US_TASK_0172369589"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Establishing MP-IBGP Peer Relationships Between PEs</h1>
<div class="taskbody" id="taskbody1493080289214051"><p id="shortdesc1961081713214051">MP-IBGP uses extended community attributes to advertise VPNv6 routes between PEs.</p>
<div class="context"><a name="EN-US_TASK_0172369589__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0172369589__context1578871695214051"><p id="EN-US_TASK_0172369589__p1788635533214051">If VPN sites in a basic BGP/MPLS IPv6 VPN need to communicate, PEs must use MP-IBGP to advertise VPNv6 routes with the RD information to each other. Since all the PEs reside in the same AS, MP-IBGP peer relationships can be set up between them. In the current implementation, IPv4 BGP peer relationships are set up between PEs.</p>
<p id="EN-US_TASK_0172369589__p1728924550214051">Perform the following steps on each PE.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172369589__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172369589__steps1403708773214051"><li id="EN-US_TASK_0172369589__step424295168214051"><span id="EN-US_TASK_0172369589__cmd1483180536214051">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172369589__cmdname1143145017263">system-view</span></b></a></span><p><p id="EN-US_TASK_0172369589__p544607172211">The system view is displayed.</p>
</p></li><li id="EN-US_TASK_0172369589__step730618851214051"><span id="EN-US_TASK_0172369589__cmd199535211214051">Run <a href="cmdqueryname=bgp"><b><span class="cmdname" id="EN-US_TASK_0172369589__cmdname1884812428266">bgp</span></b></a> <i><span class="varname" id="EN-US_TASK_0172369589__varname78489428269">as-number</span></i></span><p><p id="EN-US_TASK_0172369589__p1591202219226">The BGP view is displayed.</p>
</p></li><li id="EN-US_TASK_0172369589__step1439136256214051"><span id="EN-US_TASK_0172369589__cmd454738431214051">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0172369589__cmdname174108014274">peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172369589__varname1641015010278">ipv4-address</span></i> <strong><span id="EN-US_TASK_0172369589__cmdparmname12410108277">as-number</span></strong> <i><span class="varname" id="EN-US_TASK_0172369589__varname164101002279">as-number</span></i></span><p><p id="EN-US_TASK_0172369589__p1834018317223">A peer PE is configured as a BGP peer.</p>
</p></li><li id="EN-US_TASK_0172369589__step83412577214051"><span id="EN-US_TASK_0172369589__cmd1755843795214051">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0172369589__cmdname155986642712">peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172369589__varname55989617276">ipv4-address</span></i> <a href="cmdqueryname=connect-interface"><b><span class="cmdname" id="EN-US_TASK_0172369589__cmdname175981632711">connect-interface</span></b></a> <a href="cmdqueryname=loopback"><b><span class="cmdname" id="EN-US_TASK_0172369589__cmdname17598266278">loopback</span></b></a> <i><span class="varname" id="EN-US_TASK_0172369589__varname205984652718">interface-number</span></i></span><p><p id="EN-US_TASK_0172369589__p824434118228">An interface used to establish a TCP connection is configured.</p>
</p><p><div class="note" id="EN-US_TASK_0172369589__note609604623214051"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172369589__p2127902571214051">A PE must use a loopback interface address with a 32-bit mask to set up an MP-IBGP peer relationship with the peer PE so that VPN routes can recurse to tunnels. The route to the local loopback interface is advertised to the peer PE using an IGP on the MPLS backbone network.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172369589__step1952915000214051"><span id="EN-US_TASK_0172369589__cmd502344252214051">Run <span><a href="cmdqueryname=ipv6-family"><b><span class="cmdname" id="EN-US_TASK_0172369589__cmdname6751151182714">ipv6-family</span></b></a> <strong><span id="EN-US_TASK_0172369589__cmdparmname47512515272">vpnv6</span></strong></span></span><p><p id="EN-US_TASK_0172369589__p358015052319">The BGP-VPN IPv6 address family view is displayed.</p>
</p></li><li id="EN-US_TASK_0172369589__step1881799928214051"><span id="EN-US_TASK_0172369589__cmd1419720527214051">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0172369589__cmdname3711715282">peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172369589__varname127141152816">ipv4-address</span></i> <strong><span id="EN-US_TASK_0172369589__cmdparmname37112132812">enable</span></strong></span><p><p id="EN-US_TASK_0172369589__p20125129192315">The function to exchange VPN-IPv6 routes with the BGP peer is enabled.</p>
</p></li><li id="EN-US_TASK_0172369589__step1040980960214051"><span id="EN-US_TASK_0172369589__cmd217722611214051">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172369589__cmdname85201310112812">commit</span></b></a></span><p><p id="EN-US_TASK_0172369589__p15884915122315">The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2057.html">Configuring a Basic BGP/MPLS IPv6 VPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2082.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2061.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>