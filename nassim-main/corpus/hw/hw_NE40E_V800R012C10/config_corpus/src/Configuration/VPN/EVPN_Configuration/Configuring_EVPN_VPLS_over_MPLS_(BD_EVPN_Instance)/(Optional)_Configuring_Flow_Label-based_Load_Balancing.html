
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring Flow Label-based Load Balancing">
<meta name="abstract" content="After flow label-based load balancing is configured, EVPN VPLS services can select forwarding paths based on flow labels, improving forwarding efficiency.">
<meta name="description" content="After flow label-based load balancing is configured, EVPN VPLS services can select forwarding paths based on flow labels, improving forwarding efficiency.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0065.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_arp_cfg_2096.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0019bd.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001449108613">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring Flow Label-based Load Balancing</title>
</head>
<body><a name="EN-US_TASK_0000001449108613"></a><a name="EN-US_TASK_0000001449108613"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring Flow Label-based Load Balancing</h1>
<div class="taskbody"><p>After flow label-based load balancing is configured, EVPN VPLS services can select forwarding paths based on flow labels, improving forwarding efficiency.</p>
<div class="context"><a name="EN-US_TASK_0000001449108613__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>On a network with EVPN VPLS service traffic, if multiple links exist between Ps, flow label-based load balancing can be configured on PEs to improve traffic forwarding efficiency and reduce the forwarding pressure on Ps. After this function is configured, PEs can calculate flow labels for different types of data traffic and add flow labels to them. When a P receives packets carrying flow labels, it selects paths based on flow labels to forward these packets, achieving load balancing.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001449108613__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Perform the following steps on the PEs at both ends of an EVPN instance.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=flow-label+hash-fields"><b><span class="cmdname">flow-label hash-fields</span></b></a> { <strong><span>l2</span></strong> | <strong><span>l3</span></strong> | <strong><span>l4</span></strong> } command to configure hash factors for flow label-based load balancing.</span><p><p>This command is supported only by the admin VS.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=evpn+vpn-instance"><b><span class="cmdname">evpn vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong><span>bd-mode</span></strong> command to enter the BD EVPN instance view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=flow-label+static"><b><span class="cmdname">flow-label static</span></b></a> command to enable static flow label-based load balancing for EVPN VPLS.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the static flow label-based load balancing configuration does not match on both ends, the device discards packets carrying flow labels, causing packet loss.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li><span>Perform the following steps on Ps.</span><ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=slot"><b><span class="cmdname">slot</span></b></a> <i><span class="varname">slot-id</span></i> command to enter the slot view.</span></li><li><span>Run the <a href="cmdqueryname=load-balance+hash-fields+mpls"><b><span class="cmdname">load-balance hash-fields mpls</span></b></a> <strong><span>label</span></strong> command to configure a hash factor for per-flow load balancing of MPLS packets on an interface board.</span></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0065.html">Configuring EVPN VPLS over MPLS (BD EVPN Instance)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_arp_cfg_2096.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0019bd.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>