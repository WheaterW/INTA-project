
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Interworking Between Traditional VPWS and EVPN VPWS over MPLS">
<meta name="abstract" content="Traditional VPWS is still used at the aggregation layer of a network, whereas the core network has evolved to EVPN. To allow services at different layers to run properly on the entire network, interworking between VPWS and EVPN VPWS over MPLS must be configured.">
<meta name="description" content="Traditional VPWS is still used at the aggregation layer of a network, whereas the core network has evolved to EVPN. To allow services at different layers to run properly on the entire network, interworking between VPWS and EVPN VPWS over MPLS must be configured.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0051.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0115.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="p00915595,w00800033,w00556928,l00468467,w00606909,evpnvrp,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370635">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring Interworking Between Traditional VPWS and EVPN VPWS over MPLS</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172370635"></a><a name="EN-US_TASK_0172370635"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Interworking Between Traditional VPWS and EVPN VPWS over MPLS</h1>
<div class="taskbody"><p>Traditional VPWS is still used at the aggregation layer of a network, whereas the core network has evolved to EVPN. To allow services at different layers to run properly on the entire network, interworking between VPWS and EVPN VPWS over MPLS must be configured.</p>
<div class="context"><a name="EN-US_TASK_0172370635__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172370635__fig_dc_vrp_evpn_cfg_005501">Figure 1</a>, a VPWS network is deployed between the UPE and NPE1, and an EVPN is deployed between NPE1 and NPE2. To implement VPWS accessing EVPN, a PW VE interface and its sub-interface must be configured on NPE1. Specifically, the VPWS configurations are performed on the PW VE interface, and the EVPN configurations are performed on the PW VE sub-interface. Specifically, the PW VE sub-interface is bound to an EVPL instance corresponding to an EVPN instance and configured as a QinQ VLAN tag termination sub-interface.</p>
<div class="fignone" id="EN-US_TASK_0172370635__fig_dc_vrp_evpn_cfg_005501"><a name="EN-US_TASK_0172370635__fig_dc_vrp_evpn_cfg_005501"></a><a name="fig_dc_vrp_evpn_cfg_005501"></a><span class="figcap"><b>Figure 1 </b>Configuring interworking between traditional VPWS and EVPN VPWS over MPLS</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 0 through 2 in this example represent GE<span>0/1/0</span>, GE<span>0/1/1</span>, and GE<span>0/1/2</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_evpn_cfg_005501.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Device interfaces and their IP addresses</caption><thead align="left"><tr><th align="left" class="cellrowborder" char="." valign="top" width="20.07%" id="mcps1.4.1.4.2.4.1.1" liSelected="liSelected"><p>Device</p>
</th>
<th align="left" class="cellrowborder" char="." valign="top" width="43.14%" id="mcps1.4.1.4.2.4.1.2" liSelected="liSelected"><p>Interface</p>
</th>
<th align="left" class="cellrowborder" char="." valign="top" width="36.79%" id="mcps1.4.1.4.2.4.1.3" liSelected="liSelected"><p>IP Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="4" char="." valign="top" width="20.07%" headers="mcps1.4.1.4.2.4.1.1 "><p>NPE1</p>
</td>
<td class="cellrowborder" char="." valign="top" width="43.14%" headers="mcps1.4.1.4.2.4.1.2 "><p>GigabitEthernet <span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="36.79%" headers="mcps1.4.1.4.2.4.1.3 "><p>10.1.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.2 "><p>GigabitEthernet <span>0/1/2</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.3 "><p>192.168.14.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.2 "><p>Loopback 0</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.3 "><p>10.10.10.1/32</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.2 "><p>Loopback 100</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.3 "><p>10.10.10.100/32</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" char="." valign="top" width="20.07%" headers="mcps1.4.1.4.2.4.1.1 "><p>UPE</p>
</td>
<td class="cellrowborder" char="." valign="top" width="43.14%" headers="mcps1.4.1.4.2.4.1.2 "><p>GigabitEthernet <span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="36.79%" headers="mcps1.4.1.4.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.2 "><p>GigabitEthernet <span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.3 "><p>10.1.1.3/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.2 "><p>Loopback 0</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.3 "><p>10.10.10.2/32</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" char="." valign="top" width="20.07%" headers="mcps1.4.1.4.2.4.1.1 "><p>NPE2</p>
</td>
<td class="cellrowborder" char="." valign="top" width="43.14%" headers="mcps1.4.1.4.2.4.1.2 "><p>GigabitEthernet <span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="36.79%" headers="mcps1.4.1.4.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.2 "><p>GigabitEthernet <span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.3 "><p>192.168.14.4/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.2 "><p>Loopback 100</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.4.2.4.1.3 "><p>10.10.20.100/32</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172370635__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure an IGP on each device. Because the VPWS network (between the UPE and NPE1) and EVPN (between NPE1 and NPE2) reside at different layers, use different IGP processes to implement route communication.</p>
</li><li><p>Configure basic MPLS LDP functions on the UPE, NPE1, and NPE2.</p>
</li><li><p>Configure VPWS connections on the UPE and NPE1.</p>
</li><li><p>Configure EVPN functions on NPE1 and NPE2, including creating EVPN instances and establishing BGP EVPN peer relationships</p>
</li><li><p>Configure EVPL functions on NPE1 and NPE2.</p>
</li><li><p>Bind the VPWS to the PW VE interface on NPE1; bind the EVPL instances to the PW VE sub-interfaces of NPE1.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172370635__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Interface names and IP addresses of the interfaces on NPE1, NPE2, and the UPE</p>
</li><li><p>MPLS LSR IDs on the UPE, NPE1, and NPE2</p>
</li><li><p>Names, RDs, and VPN targets of the EVPN instances created on NPE1 and NPE2</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172370635__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure interfaces addresses and an IGP on the UPE, NPE1, and NPE2. OSPF is used in this example.</span><p><p>For detailed configurations, see <a href="#EN-US_TASK_0172370635__CFG_file">Configuration Files</a>.</p>
</p></li><li><span>Configure basic MPLS functions and MPLS LDP on NPE1, NPE2, and the UPE.</span><p><p>For detailed configurations, see <a href="#EN-US_TASK_0172370635__CFG_file">Configuration Files</a>.</p>
</p></li><li><span>Configure VPWS connections on the UPE and NPE1.</span><p><p>For detailed configurations, see <a href="#EN-US_TASK_0172370635__CFG_file">Configuration Files</a>.</p>
</p></li><li><span>Configure EVPN functions on NPE1 and NPE2, including creating EVPN instances and establishing BGP EVPN peer relationships.</span><p><p># Configure NPE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>NPE1] <strong>evpn vpn-instance evpna vpws</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-vpws-evpn-instance-evpna] <strong>route-distinguisher 1:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-vpws-evpn-instance-evpna] <strong>vpn-target 10:10 export-extcommunity</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-vpws-evpn-instance-evpna] <strong>vpn-target 10:10 import-extcommunity</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-vpws-evpn-instance-evpna] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-bgp] <strong>peer 10.10.20.100 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-bgp] <strong>peer 10.10.20.100 connect-interface LoopBack100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-bgp] <strong>l2vpn-family evpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-bgp-af-evpn] <strong>peer 10.10.20.100 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-bgp-af-evpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1] <strong>commit</strong></pre>
<p>The configuration on NPE2 is similar to that on NPE1. For detailed configurations, see <a href="#EN-US_TASK_0172370635__CFG_file">Configuration Files</a>.</p>
</p></li><li><span>Configure EVPL functions on NPE1 and NPE2.</span><p><p># Configure NPE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>NPE1] <strong>evpl instance 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-evpl1] <strong>evpn binding vpn-instance evpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-evpl1] <strong>local-service-id 100 remote-service-id 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-evpl1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1] <strong>commit</strong></pre>
<p>The configuration on NPE2 is similar to that on NPE1. For detailed configurations, see <a href="#EN-US_TASK_0172370635__CFG_file">Configuration Files</a>.</p>
</p></li><li><span>On NPE1, bind the VPWS to the PW VE interface and the EVPN instance to the PW VE sub-interface.</span><p><p># Configure NPE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>NPE1] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-mpls]<strong> mpls l2vpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-l2vpn]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1] <strong>interface PW-VE 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-PW-VE1] <strong>esi 0011.1111.0000.0000.0000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-PW-VE1] <strong>mpls l2vc 10.10.10.2 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-PW-VE1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1] <strong>interface PW-VE 1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-PW-VE1.1] <strong>encapsulation qinq-termination</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-PW-VE1.1] <strong>qinq termination pe-vid 100 ce-vid 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-PW-VE1.1] <strong>evpl instance 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>NPE1-PW-VE1.1] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>Run the <strong><span>display bgp evpn all routing-table</span></strong> command on NPE2. The command output shows the EVI AD routes received from NPE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>NPE2] <strong>display bgp evpn all routing-table</strong></pre>
<pre class="screen"> Local AS number : 100

 BGP Local router ID is 192.168.14.4
 Status codes: * - valid, &gt; - best, d - damped, x - best external, a - add path,
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete


 EVPN address family:
 Number of A-D Routes: 4
 Route Distinguisher: 1:1
       Network(ESI/EthTagId)                                  NextHop
 *&gt;i   <strong>0011.1111.0000.0000.0000:100</strong>                        10.10.10.100
 Route Distinguisher: 10.10.10.100:0
       Network(ESI/EthTagId)                                  NextHop
 *&gt;i   0011.1111.0000.0000.0000:4294967295                    10.10.10.100
 Route Distinguisher: 10.10.20.100:0
       Network(ESI/EthTagId)                                  NextHop
 *&gt;    0011.1111.0000.0000.1111:4294967295                    127.0.0.1
 Route Distinguisher: 10.10.20.100:10
       Network(ESI/EthTagId)                                  NextHop
 *&gt;    0011.1111.0000.0000.1111:200                           127.0.0.1
    

 EVPN-Instance evpna:
 Number of A-D Routes: 3
       Network(ESI/EthTagId)                                  NextHop
 *&gt;i   <strong>0011.1111.0000.0000.0000:100</strong>                        10.10.10.100
 *&gt;i   0011.1111.0000.0000.0000:4294967295                    10.10.10.100
 *&gt;    <strong>0011.1111.0000.0000.1111:200</strong>                        127.0.0.1

 EVPN address family:
 Number of ES Routes: 2
 Route Distinguisher: 10.10.10.100:0
       Network(ESI)                                           NextHop
 *&gt;i   0011.1111.0000.0000.0000                               10.10.10.100
 Route Distinguisher: 10.10.20.100:0
       Network(ESI)                                           NextHop
 *&gt;    0011.1111.0000.0000.1111                               127.0.0.1
    

 EVPN-Instance evpna:
 Number of ES Routes: 1
       Network(ESI)                                           NextHop
 *&gt;    0011.1111.0000.0000.1111                               127.0.0.1</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172370635__CFG_file"><a name="EN-US_TASK_0172370635__CFG_file"></a><a name="CFG_file"></a><a name="EN-US_TASK_0172370635__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><div class="p">NPE1 configuration file<pre class="screen">#
sysname NPE1
#
evpn vpn-instance evpna vpws
 route-distinguisher 1:1
 vpn-target 10:10 export-extcommunity
 vpn-target 10:10 import-extcommunity
#
evpl instance 1
 evpn binding vpn-instance evpna
 local-service-id 100 remote-service-id 200
#
mpls lsr-id 10.10.10.1
#
mpls
#
mpls l2vpn
#
mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.1.1 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 192.168.14.1 255.255.255.0
 mpls
 mpls ldp
 mpls ldp local-lsr-id LoopBack100
#
interface LoopBack0
 ip address 10.10.10.1 255.255.255.255
#
interface LoopBack100
 ip address 10.10.10.100 255.255.255.255
#
interface PW-VE1
 esi 0011.1111.0000.0000.0000
 mpls l2vc 10.10.10.2 1
#
interface PW-VE1.1
 encapsulation qinq-termination
 qinq termination pe-vid 100 ce-vid 100
 evpl instance 1
#
bgp 100
 peer 10.10.20.100 as-number 100
 peer 10.10.20.100 connect-interface LoopBack100
 #
 ipv4-family unicast
  undo synchronization
  peer 10.10.20.100 enable
 #
 l2vpn-family evpn
  undo policy vpn-target
  peer 10.10.20.100 enable
#
ospf 1
 area 0.0.0.0
  network 10.10.10.1 0.0.0.0
  network 10.1.1.0 0.0.0.255
#
ospf 100
 area 0.0.0.1
  network 10.10.10.100 0.0.0.0
  network 192.168.14.0 0.0.0.255
#
evpn source-address 10.10.10.100
#               
return</pre>
</div>
</li><li><p>UPE configuration file</p>
<pre class="screen">#
sysname UPE
#
mpls lsr-id 10.10.10.2
#
mpls
#
mpls l2vpn      
#
mpls ldp
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 mpls l2vc 10.10.10.1 1  
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.1.3 255.255.255.0
 mpls 
 mpls ldp
#
interface LoopBack0
 ip address 10.10.10.2 255.255.255.255
#
ospf 1
 area 0.0.0.0
  network 10.10.10.2 0.0.0.0
  network 10.1.1.0 0.0.0.255
#
return</pre>
</li><li><p>NPE2 configuration file</p>
<pre class="screen">#
sysname NPE2
#
evpn vpn-instance evpna vpws
 route-distinguisher 10.10.20.100:10
 vpn-target 10:10 export-extcommunity
 vpn-target 10:10 import-extcommunity
#
evpl instance 1
 evpn binding vpn-instance evpna
 local-service-id 200 remote-service-id 100
#
mpls lsr-id 10.10.20.100
#
mpls
#
mpls l2vpn
#
mpls ldp
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 esi 0011.1111.0000.0000.1111
#
interface GigabitEthernet<span>0/1/0</span>.1 mode l2
 encapsulation qinq vid 100 ce-vid 100
 rewrite pop double
 evpl instance 1
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 192.168.14.4 255.255.255.0
 mpls
 mpls ldp
#
interface LoopBack100
 ip address 10.10.20.100 255.255.255.255
#
bgp 100
 peer 10.10.10.100 as-number 100
 peer 10.10.10.100 connect-interface LoopBack100
 #
 ipv4-family unicast
  undo synchronization
  peer 10.10.10.100 enable
 #              
 l2vpn-family evpn
  undo policy vpn-target
  peer 10.10.10.100 enable
#
ospf 100
 area 0.0.0.1
  network 10.10.20.100 0.0.0.0
  network 192.168.14.0 0.0.0.255
#
evpn source-address 10.10.20.100
#
return</pre>
</li><li>CE1 configuration file<pre class="screen">#
sysname CE1
#
bridge-domain 10
#
interface Vbdif10
 ip address 192.168.1.11 255.255.255.0
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/0</span>.1 mode l2
 encapsulation qinq vid 100 ce-vid 100
 rewrite pop double
 bridge-domain 10
#
return</pre>
</li><li>CE2 configuration file<pre class="screen">#
sysname CE2
#
bridge-domain 10
#
interface Vbdif10
 ip address 192.168.1.12 255.255.255.0
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/0</span>.1 mode l2
 encapsulation qinq vid 100 ce-vid 100
 rewrite pop double
 bridge-domain 10
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0010.html">EVPN Configuration Examples
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0051.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0115.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>