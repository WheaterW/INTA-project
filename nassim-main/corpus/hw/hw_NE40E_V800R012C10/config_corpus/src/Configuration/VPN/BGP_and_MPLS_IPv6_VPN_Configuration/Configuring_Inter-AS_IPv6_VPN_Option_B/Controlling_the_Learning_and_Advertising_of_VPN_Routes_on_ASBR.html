
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Controlling the Learning and Advertising of VPN Routes on ASBR">
<meta name="abstract" content="An ASBR can either save partial VPNv6 routes by filtering VPN targets through a routing policy or save all VPNv6 routes.">
<meta name="description" content="An ASBR can either save partial VPNv6 routes by filtering VPN targets through a routing policy or save all VPNv6 routes.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2051.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2053.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2099.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00596142">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369638">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Controlling the Learning and Advertising of VPN Routes on ASBR</title>
</head>
<body><a name="EN-US_TASK_0172369638"></a><a name="EN-US_TASK_0172369638"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Controlling the Learning and Advertising of VPN Routes on ASBR</h1>
<div class="taskbody"><p>An ASBR can either save partial VPNv6 routes by filtering VPN targets through a routing policy or save all VPNv6 routes.</p>
<div class="context"><a name="EN-US_TASK_0172369638__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>By default, an ASBR filters received VPNv6 routes based on VPN targets. The matching routes are imported into the routing table; otherwise, they are discarded. Therefore, if no VPN instance is configured on the ASBR or no VPN target is configured for the VPN instance, the ASBR discards all the received VPNv6 routes.</p>
<p>Either of the following methods can be used:</p>
<ul><li>An ASBR can be disabled from filtering routes based on VPN targets. After this configuration, the ASBR saves all VPNv6 routes.</li><li>An ASBR can be enabled to filter routes based on VPN targets. A route-policy can be configured so that only BGP VPNv6 routes matching the policy are accepted.</li></ul>
<p>Perform either of the following methods on the ASBR as needed.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172369638__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Enable the ASBR to accept VPN routes without filtering them based on VPN targets.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view of the ASBR is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> <strong><span>vpnv6</span></strong> [ <strong><span>unicast</span></strong> ]</span></span><p><p>The BGP-VPN IPv6 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=undo+policy+vpn-target"><b><span class="cmdname">undo policy vpn-target</span></b></a></span></span><p><p>Filtering VPN targets of VPNv6 routes is disabled.</p>
<p>In inter-AS VPN Option B mode, the ASBR does not need to store VPN instance information but must store information about all VPNv6 routing information and advertise the routing information to the peer ASBR. In this case, the ASBR needs to import all received VPNv6 routing information without filtering them based on VPN targets.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure a route-policy to filter VPN routes based on VPN targets.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed on the ASBR.</p>
</p></li><li class="substepexpand"><span>Perform either of the following operations as required to configure an extcommunity filter.</span><p><ul><li><p>To configure a basic extcommunity filter, run the <a href="cmdqueryname=ip+extcommunity-filter"><b><span class="cmdname">ip extcommunity-filter</span></b></a> { <i><span class="varname">basic-extcomm-filter-num</span></i> | <strong><span>basic</span></strong> <i><span class="varname">basic-extcomm-filter-name</span></i> } { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } { <strong><span>rt</span></strong> { <i><span class="varname">as-number:nn</span></i> | <i><span class="varname">4as-number:nn</span></i> | <i><span class="varname">ipv4-address</span></i>:<i><span class="varname">nn</span></i> } } &amp;&lt;1-16&gt; command.</p>
</li><li><p>To configure an advanced extcommunity filter, run the <a href="cmdqueryname=ip+extcommunity-filter"><b><span class="cmdname">ip extcommunity-filter</span></b></a> { <i><span class="varname">advanced-extcomm-filter-num</span></i> | <strong><span>advanced</span></strong> <i><span class="varname">advanced-extcomm-filter-name</span></i> } { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <i><span class="varname">regular-expression</span></i> command.</p>
</li></ul>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> <strong><span>permit</span></strong> <strong><span>node</span></strong> <i><span class="varname">node</span></i></span></span><p><p>A route-policy is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=if-match+extcommunity-filter"><b><span class="cmdname">if-match extcommunity-filter</span></b></a> { { <i><span class="varname">basic-extcomm-filter-num</span></i> [ <strong><span>matches-all</span></strong> | <strong><span>whole-match</span></strong> ] | <i><span class="varname">adv-extcomm-filter-num</span></i> } &amp;&lt;1-16&gt; | <i><span class="varname">basic-extcomm-filter-name</span></i> [ <strong><span>matches-all</span></strong> | <strong><span>whole-match</span></strong> ] | <i><span class="varname">advanced-extcomm-filter-name</span></i> }</span><p><p>A matching rule based on the extcommunity filter is configured for the route-policy.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> <strong><span>vpnv6</span></strong> [ <strong><span>unicast</span></strong> ]</span></span><p><p>The BGP-VPN IPv6 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> { <strong><span>export</span></strong> | <strong><span>import</span></strong> }</span><p><p>The route-policy is used to controlling the importing or exporting of VPNv6 routes.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2051.html">Configuring Inter-AS IPv6 VPN Option B
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2053.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2099.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>