
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring FRR">
<meta name="abstract" content="In EVPN VPWS over MPLS multi-homing single-active scenarios, FRR needs to be configured to prevent traffic loss if the primary PE fails.">
<meta name="description" content="In EVPN VPWS over MPLS multi-homing single-active scenarios, FRR needs to be configured to prevent traffic loss if the primary PE fails.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0024-esi.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0223.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="p00915595,w00800033,w00556928,l00468467,w00606909,evpnvrp,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370474">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring FRR</title>
</head>
<body><a name="EN-US_TASK_0172370474"></a><a name="EN-US_TASK_0172370474"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring FRR</h1>
<div class="taskbody"><p>In EVPN VPWS over MPLS multi-homing single-active scenarios, FRR needs to be configured to prevent traffic loss if the primary PE fails.</p>
<div class="context"><a name="EN-US_TASK_0172370474__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>As shown in the following figure, in the EVPN VPWS over MPLS multi-homing single-active scenario, a CE is dual-homed to PE1 and PE2 in active-active mode, and PE3 forwards traffic to PE1 and PE2 working in active/standby mode. When PE1 is the active device, the red path between CE1 and CE2 is the active path, and the blue path is the standby path. To prevent traffic loss when the active path fails, FRR needs to be configured.</p>
<p>In normal situations, downstream traffic of PE3 is sent to PE1. Local-remote FRR is enabled on PE1 and PE2. If PE1 detects a fault on the link between itself and CE1, PE1 forwards traffic to PE2 and then to CE1. Remote FRR is enabled on PE3. When PE3 detects a fault between itself and PE1, PE3 rapidly switches traffic to PE2 and then sends traffic to CE1, preventing traffic loss.</p>
<div class="fignone"><span class="figcap"><b>Figure 1 </b>Configuring EVPN VPWS over MPLS</span><br><span><img class="vsd" src="images/fig_dc_vrp_evpn_cfg_110006.png"></span></div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172370474__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure local-remote FRR on PE1 and PE2.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=evpn+vpn-instance"><b><span class="cmdname">evpn vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong><span>vpws</span></strong></span><p><p>The EVPN VPWS instance view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=local-remote+frr+enable"><b><span class="cmdname">local-remote frr enable</span></b></a></span><p><p>Local-remote FRR is enabled for the EVPN VPWS instance.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In addition to enabling local-remote FRR in the EVPN VPWS instance view, you can run the <a href="cmdqueryname=local-remote+vpws-frr+enable"><b><span class="cmdname">local-remote vpws-frr enable</span></b></a> command in the global EVPN configuration view to enable local-remote FRR.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure remote FRR on PE3.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=evpn+vpn-instance"><b><span class="cmdname">evpn vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong><span>vpws</span></strong></span><p><p>The EVPN VPWS instance view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=remote+frr"><b><span class="cmdname">remote frr</span></b></a> <strong><span>enable</span></strong></span><p><p>Remote FRR is enabled for the EVPN VPWS instance.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In addition to enabling remote FRR in the EVPN VPWS instance view, you can run the <a href="cmdqueryname=remote+vpws-frr+enable"><b><span class="cmdname">remote vpws-frr enable</span></b></a> command in the global EVPN configuration view to enable remote FRR globally. By default, if the <a href="cmdqueryname=remote+frr"><b><span class="cmdname">remote frr</span></b></a> command is not run in the EVPN VPWS instance view, the <a href="cmdqueryname=remote+frr"><b><span class="cmdname">remote frr</span></b></a> command configuration in the global view takes effect. If the <a href="cmdqueryname=remote+frr"><b><span class="cmdname">remote frr</span></b></a> command is run in the EVPN VPWS instance view, this configuration takes effect.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0020.html">Configuring EVPN VPWS over MPLS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0024-esi.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0223.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>