
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring VPLS E-Tree">
<meta name="abstract" content="In a VPLS domain, you can configure VPLS E-Tree to control communication between AC-side users.">
<meta name="description" content="In a VPLS domain, you can configure VPLS E-Tree to control communication between AC-side users.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6036.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6080.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0252672715">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring VPLS E-Tree</title>
</head>
<body><a name="EN-US_TASK_0252672715"></a><a name="EN-US_TASK_0252672715"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring VPLS E-Tree</h1>
<div class="taskbody"><p>In a VPLS domain, you can configure VPLS E-Tree to control communication between AC-side users.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0252672715__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring VPLS E-Tree, complete the following tasks:</p>
<ul><li><p>Set data link layer protocol parameters and IP addresses for interfaces to ensure that the data link layer protocol status on each interface is up.</p>
</li><li><p>Configure LDP VPLS.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0252672715__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This section applies only to the M2K and M2K-B models.</p>
</div></div>
<p>In a VPLS domain, AC interfaces bound to the same VSI can communicate with one another. It is necessary to enhance user data security and minimize mutual influence between users by controlling communication between AC interfaces.</p>
<div class="p">VPLS E-Tree provides a method to isolate AC interfaces on different devices by setting the AC interface attribute to root or leaf.<ul><li><p>Root AC interface: can communicate with leaf AC interfaces and other root AC interfaces.</p>
</li><li><p>Leaf AC interface: can communicate only with root AC interfaces.</p>
</li></ul>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0252672715__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure static VPLS E-Tree.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vsi"><b><span class="cmdname">vsi</span></b></a> <i><span class="varname">vsi-name</span></i> [ <strong><span>static</span></strong> | <strong><span>auto</span></strong> ]</span><p><p>The view of the created VSI is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-tree"><b><span class="cmdname">e-tree</span></b></a> <strong><span>static</span></strong></span><p><p>E-Tree is enabled for VPLS, and the E-Tree view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=root-vlan"><b><span class="cmdname">root-vlan</span></b></a> <i><span class="varname">root-vlan</span></i> <strong><span>leaf-vlan</span></strong> <i><span class="varname">leaf-vlan</span></i></span><p><p>The root VLAN and leaf VLAN for E-Tree are configured.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In the same VPLS domain, VSIs on all PEs must use the same root VLAN and leaf VLAN. Otherwise, traffic cannot be isolated.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit from the E-Tree view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=pwsignal"><b><span class="cmdname">pwsignal</span></b></a> <strong><span>ldp</span></strong></span><p><p>LDP is configured as the signaling type for the VSI.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vsi-id"><b><span class="cmdname">vsi-id</span></b></a> <i><span class="varname">vsi-id</span></i></span><p><p>An ID is configured for the VSI.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i></span><p><p>A peer is configured for the VSI.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> [ <strong><span>negotiation-vc-id</span></strong> <i><span class="varname">vc-id</span></i> ] <strong><span>pw</span></strong> <i><span class="varname">pw-name</span></i></span><p><p>The VSI-LDP-PW view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=e-tree+mode"><b><span class="cmdname">e-tree mode</span></b></a> { <strong><span>compatible</span></strong> | <strong><span>optimized</span></strong> }</span><p><p>Static VPLS E-Tree in compatible or optimization mode is configured.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=e-tree+leaf"><b><span class="cmdname">e-tree leaf</span></b></a></span><p><p>The PW attribute is set to leaf.</p>
</p><p><div class="p"><a href="cmdqueryname=e-tree+leaf"><b><span class="cmdname">e-tree leaf</span></b></a> can be configured only when the PW is in compatible mode. If the peer device of a PW does not support E-Tree services, the local PE does not send packets received from the peer PE to the AC interface with the local leaf attribute.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If only static VPLS E-Tree in common mode is configured, steps 9, 10, and 11 are not required.</p>
</div></div>
</div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure AC interface attributes.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The user-side interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=l2+binding"><b><span class="cmdname">l2 binding</span></b></a> <strong><span>vsi</span></strong> <i><span class="varname">vsi-name</span></i></span><p><p>The Layer 2 interface is bound to the VSI.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=l2+binding+e-tree+leaf"><b><span class="cmdname">l2 binding e-tree leaf</span></b></a></span><p><p>The AC interface is configured as a leaf interface. By default, the attribute of an AC interface is root. After an AC interface is configured as a leaf interface, the AC interface can only communicate with the root interface, but cannot communicate with other leaf interfaces.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0252672715__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring VPLS E-Tree, verify the configuration.</p>
<ul><li>Run the <a href="cmdqueryname=display+vsi+e-tree"><b><span class="cmdname">display vsi e-tree</span></b></a> command to check information about all VSIs with E-Tree enabled.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5000.html">VPLS Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6036.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6080.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>