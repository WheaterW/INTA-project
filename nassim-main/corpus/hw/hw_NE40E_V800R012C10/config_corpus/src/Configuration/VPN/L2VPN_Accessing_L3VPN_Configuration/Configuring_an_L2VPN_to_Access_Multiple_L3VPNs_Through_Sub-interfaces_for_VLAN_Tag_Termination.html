
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an L2VPN to Access Multiple L3VPNs Through Sub-interfaces for VLAN Tag Termination">
<meta name="abstract" content="This section describes how to configure an L2VPN to access L3VPNs through the L3VE sub-interface in QinQ or Dot1q termination mode. To be specific, you can configure the L3VE sub-interface to terminate user packets of different inner VLAN tags, and then these packets can be sent to different L3VPNs.">
<meta name="description" content="This section describes how to configure an L2VPN to access L3VPNs through the L3VE sub-interface in QinQ or Dot1q termination mode. To be specific, you can configure the L3VE sub-interface to terminate user packets of different inner VLAN tags, and then these packets can be sent to different L3VPNs.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5008.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5026.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5019.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5020.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5021.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5022.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5023.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909,l00455378,l2-l3">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="L2VPN Accessing L3VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="L2VPN Accessing L3VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="L2VPN Accessing L3VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00425560">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370352">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring an L2VPN to Access Multiple L3VPNs Through Sub-interfaces for VLAN Tag Termination</title>
</head>
<body><a name="EN-US_TASK_0172370352"></a><a name="EN-US_TASK_0172370352"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an L2VPN to Access Multiple L3VPNs Through Sub-interfaces for VLAN Tag Termination</h1>
<div class="taskbody"><p>This section describes how to configure an L2VPN to access L3VPNs through the L3VE sub-interface in QinQ or Dot1q termination mode. To be specific, you can configure the L3VE sub-interface to terminate user packets of different inner VLAN tags, and then these packets can be sent to different L3VPNs.</p>
<div class="context"><a name="EN-US_TASK_0172370352__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Applicable Environment</h4><p>As shown in <a href="#EN-US_TASK_0172370352__fig_dc_vrp_l2-l3_cfg_501801">Figure 1</a> and <a href="#EN-US_TASK_0172370352__fig_dc_vrp_l2-l3_cfg_501802">Figure 2</a>, different services, such as data, voice, and video, are running on a user network. By adding different VLAN tags to different service packets, sub-interfaces for Dot1q or QinQ VLAN tag termination forward these packets from the L2VPN to different MPLS L3VPNs on the bearer network. In this manner, operators can fully utilize the network resources by allocating different network resources to different services and provide different QoS guarantees for differentiated services.</p>
<p>If an L3VE sub-interface receives single-tagged service data packets from the UPE, configure the L3VE sub-interface as a sub-interface for Dot1q VLAN tag termination to access the L3VPN.</p>
<p>If an L3VE sub-interface receives double-tagged service data packets from the UPE, configure the L3VE sub-interface as a sub-interface for QinQ VLAN tag termination to access the L3VPN.</p>
<div class="fignone" id="EN-US_TASK_0172370352__fig_dc_vrp_l2-l3_cfg_501801"><a name="EN-US_TASK_0172370352__fig_dc_vrp_l2-l3_cfg_501801"></a><a name="fig_dc_vrp_l2-l3_cfg_501801"></a><span class="figcap"><b>Figure 1 </b>Typical networking of the access of an L2VPN to multiple L3VPNs through sub-interfaces for Dot1q VLAN tag termination</span><br><span><img class="vsd" src="images/fig_dc_vrp_l2-l3_cfg_501801.png"></span><br></div>
<div class="fignone" id="EN-US_TASK_0172370352__fig_dc_vrp_l2-l3_cfg_501802"><a name="EN-US_TASK_0172370352__fig_dc_vrp_l2-l3_cfg_501802"></a><a name="fig_dc_vrp_l2-l3_cfg_501802"></a><span class="figcap"><b>Figure 2 </b>Typical networking of the access of an L2VPN to multiple L3VPNs through sub-interfaces for QinQ VLAN tag termination</span><br><span><img class="vsd" src="images/fig_dc_vrp_l2-l3_cfg_501802.png"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172370352__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>To configure an L2VPN to access multiple L3VPNs through sub-interfaces for VLAN tag termination, complete the following tasks:</p>
<ul><li><p>Connecting the interfaces and configuring their physical parameters so as to make their physical layer Up</p>
</li><li><p>Enabling IGP on the MPLS access network to realize IP connectivity</p>
</li><li><p>Creating VPLS or VLL between UPEs and NPEs</p>
</li><li><p>Enabling IGP on the MPLS bearer network to realize IP connectivity</p>
</li><li><p>Configuring the basic functions of L3VPN on NPEs</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172370352__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Procedures</h4>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="center" class="cellrowborder" valign="top" width="50.24999999999999%" id="mcps1.4.3.2.1.3.1.1" liSelected="liSelected"><p>Configure an L2VPN to Access Multiple L3VPNs Through Sub-Interfaces for Dot1q VLAN Tag Termination</p>
</th>
<th align="center" class="cellrowborder" valign="top" width="49.75%" id="mcps1.4.3.2.1.3.1.2" liSelected="liSelected"><p>Configure an L2VPN to Access L3VPNs Through Sub-Interfaces for QinQ Termination</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" colspan="2" align="center" valign="top" headers="mcps1.4.3.2.1.3.1.1 mcps1.4.3.2.1.3.1.2 "><p>Creating VE Interfaces</p>
</td>
</tr>
<tr><td class="cellrowborder" colspan="2" align="center" valign="top" headers="mcps1.4.3.2.1.3.1.1 mcps1.4.3.2.1.3.1.2 "><p>Binding the L2VE to VPWS or VSI</p>
</td>
</tr>
<tr><td class="cellrowborder" align="center" valign="top" width="50.24999999999999%" headers="mcps1.4.3.2.1.3.1.1 "><p>Creating the L3VE Sub-interface Terminated by Dot1q</p>
</td>
<td class="cellrowborder" align="center" valign="top" width="49.75%" headers="mcps1.4.3.2.1.3.1.2 "><p>Creating the L3VE Sub-interface Terminated by QinQ</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
</div>

<ul class="ullinks">
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5019.html">Creating VE Interfaces</a>
</dt>
<dd>
This section describes how to configure an L2VE interface for L2VPN termination and an L3VE interface for L3VPN access and bind the two VE interfaces to the corresponding VE group.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5020.html">Binding the L2VE to VPWS or VSI</a>
</dt>
<dd>
This part describes how to configure an L2VE interface that terminates the L2VPN.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5021.html">Creating an L3VE Sub-interface for Dot1q VLAN Tag Termination and Binding the Sub-interface to an L3VPN Instance</a>
</dt>
<dd>
If an L3VE sub-interface receives single-tagged service data packets from the UPE, configure the L3VE sub-interface as a dot1q VLAN tag termination sub-interface for L3VPN access.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5022.html">Creating the L3VE Sub-interface Terminated by QinQ</a>
</dt>
<dd>
If an L3VE sub-interface receives double-tagged service data packets from the UPE, configure the L3VE sub-interface as a sub-interface for QinQ VLAN tag termination to access the L3VPN.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5023.html">Verifying the Configuration</a>
</dt>
<dd>
After an L2VPN accesses multiple L3VPNs through VLAN tag termination sub-interfaces, you can view the binding relationships between the VE interfaces and VE group as well as termination information on VE sub-interfaces.</dd>
</dl>
</ul>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5000.html">L2VPN Accessing L3VPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5008.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5026.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>