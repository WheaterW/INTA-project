
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Adding PWs to a PW Protection Group">
<meta name="abstract" content="After configuring PWs, add them to a PW protection group, specify PW priorities, and configure PW protection group parameters to implement PW redundancy.">
<meta name="description" content="After configuring PWs, add them to a PW protection group, specify PW priorities, and configure PW protection group parameters to implement PW redundancy.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5049.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5050.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5052.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370178">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Adding PWs to a PW Protection Group</title>
</head>
<body><a name="EN-US_TASK_0172370178"></a><a name="EN-US_TASK_0172370178"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Adding PWs to a PW Protection Group</h1>
<div class="taskbody"><p>After configuring PWs, add them to a PW protection group, specify PW priorities, and configure PW protection group parameters to implement PW redundancy.</p>
<div class="context"><a name="EN-US_TASK_0172370178__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After configuring two VSI PWs on a UPE, add them to a PW protection group, specify their priorities, and configure PW protection group parameters for the two PWs to work in backup mode.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172370178__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=vsi"><b><span class="cmdname">vsi</span></b></a> <i><span class="varname">vsi-name</span></i></span><p><p>The view of the created VSI is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=pwsignal"><b><span class="cmdname">pwsignal</span></b></a> <strong><span>ldp</span></strong></span><p><p>The VSI-LDP view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=protect-group"><b><span class="cmdname">protect-group</span></b></a> <i><span class="varname">group-name</span></i></span><p><p>A PW protection group is created, and its view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=protect-mode+pw-redundancy"><b><span class="cmdname">protect-mode pw-redundancy</span></b></a> { <strong><span>master</span></strong> | <strong><span>independent</span></strong> }</span><p><p>A PW redundancy mode is configured for the current PW protection group.</p>
</p><p><p>The <strong><span>master</span></strong> mode must be configured in an HVPLS scenario. If the <strong><span>master</span></strong> mode is configured in a VPLS + VPWS interworking scenario, a bypass PW must be configured between NPEs.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The PW redundancy mode of the PW protection group must be configured before you start the following configurations.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> [ <strong><span>negotiation-vc-id</span></strong> <i><span class="varname">vc-id</span></i> ] <strong><span>preference</span></strong> <i><span class="varname">preference-value</span></i></span><p><p>A PW is added to the PW protection group, and the priority of the PW is specified. A smaller value indicates a higher priority. Of the two PWs added to a PW protection group, the one with a higher priority functions as the primary PW.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=stream-dual-receiving"><b><span class="cmdname">stream-dual-receiving</span></b></a></span><p><p>Both the primary and secondary PWs are configured to receive packets.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command helps prevent packet loss during traffic switchback, but may incur routing loops.</p>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=holdoff"><b><span class="cmdname">holdoff</span></b></a> <em>holdoffTime</em></span><p><p>A switching delay is configured for the PW protection group with the master/slave PW redundancy mode.</p>
</p><p><p>If a fault occurs on the primary PW, traffic immediately switches to the secondary PW. If the working path flaps or an error occurs in the detection mechanism, traffic frequently switches between the working and protection paths. To prevent this problem, configure a switching delay.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>On a VPLS network that uses BFD for fault detection, traffic immediately switches from the primary PW to the secondary PW after BFD detects a fault on the primary PW, irrespective of whether delayed switching is configured. It is recommended that you determine whether to use BFD or delayed switching based on your requirements.</p>
<p>After you configure a switching delay (<em>holdoffTime</em>), traffic forwarded during the delay period will be interrupted if the primary PW fails to recover before the delay period expires.</p>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=reroute"><b><span class="cmdname">reroute</span></b></a> { <a href="cmdqueryname=delay"><b><span class="cmdname">delay</span></b></a> <i><span class="varname">delay-time</span></i> | <strong><span>immediately</span></strong> | <strong><span>never</span></strong> }</span><p><p>A revertive PW switching policy is configured.</p>
</p><p><div class="p">The <a href="cmdqueryname=reroute"><b><span class="cmdname">reroute</span></b></a> command can be used only for a PW protection group with the master/slave PW redundancy mode.<ul><li><a href="cmdqueryname=delay"><b><span class="cmdname">delay</span></b></a> <i><span class="varname">delay-time</span></i>: indicates delayed switchback, meaning that traffic is switched back to the primary PW after a delay.</li><li><strong><span>immediately</span></strong>: indicates immediate switchback.</li><li><strong><span>never</span></strong>: indicates non-switchback. Traffic is switched back only after the backup PW fails.</li></ul>
</div>
<p>The revertive switching policy for a PW protection group in independent PW redundancy mode can only be immediate switchback and cannot be changed.</p>
<p>The revertive switching policy affects traffic switchback after the primary PW recovers.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5049.html">Configuring VPLS PW Redundancy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5050.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5052.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>