
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring PW Status Negotiation">
<meta name="abstract" content="In independent PW redundancy mode, the master/backup status of the local PE is determined by the signaling status sent from the remote PE.">
<meta name="description" content="In independent PW redundancy mode, the master/backup status of the local PE is determined by the signaling status sent from the remote PE.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5009.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6019.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00545680">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369842">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring PW Status Negotiation</title>
</head>
<body><a name="EN-US_TASK_0172369842"></a><a name="EN-US_TASK_0172369842"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring PW Status Negotiation</h1>
<div class="taskbody"><p>In independent PW redundancy mode, the master/backup status of the local PE is determined by the signaling status sent from the remote PE.</p>
<div class="context"><a name="EN-US_TASK_0172369842__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>In an independent PW redundancy scenario where a CE asymmetrically accesses PEs, the master/backup status of the local PE is determined by the signaling status sent from the remote PE, and the master/backup status of the ACs is determined by the E-Trunk status.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172369842__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure Eth-Trunk interfaces.</span><p><p>Perform the following steps on the CE and the PEs to which the CE is dual-homed.</p>
</p><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <strong><span>eth-trunk</span></strong> <i><span class="varname">trunk-id</span></i></span><p><p>An Eth-Trunk interface is created.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=portswitch"><b><span class="cmdname">portswitch</span></b></a></span><p><p>The Eth-Trunk interface is switched from the Layer 3 mode to the Layer 2 mode.</p>
</p><p><p>This command is needed only on CEs. The Eth-Trunk sub-interfaces on PEs are the AC interfaces for service PWs.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mode+lacp-static"><b><span class="cmdname">mode lacp-static</span></b></a></span><p><p>The Eth-Trunk interface is configured to work in static LACP mode.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=port+trunk+allow-pass+vlan"><b><span class="cmdname">port trunk allow-pass vlan</span></b></a> { { { <i><span class="varname">vlan-id1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">vlan-id2</span></i> ] } &amp;&lt;1-10&gt; } | <strong><span>all</span></strong> }</span><p><p>The interface is configured to allow packets with specified tags to pass through.</p>
</p><p><p>This command is needed only on CEs, and the specified VLANs must be configured on the CEs.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=trunkport"><b><span class="cmdname">trunkport</span></b></a> <i><span class="varname">interface-type</span></i> { <i><span class="varname">interface-number1</span></i> [ <strong><span>to</span></strong><em> </em><i><span class="varname">interface-number2</span></i> ] } &amp;&lt;1-64&gt; [ <strong><span>mode</span></strong> { <strong><span>active</span></strong> | <strong><span>passive</span></strong> } ]</span><p><p>A member interface is added.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure an E-Trunk.</span><p><p>Perform the following steps on the PEs to which the CE is dual-homed.</p>
</p><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=lacp+e-trunk+system-id"><b><span class="cmdname">lacp e-trunk system-id</span></b></a> <i><span class="varname">mac-address</span></i></span><p><p>An E-Trunk LACP system ID is configured.</p>
</p><p><p><i><span class="varname">mac-address</span></i> is in the format of H-H-H and cannot be all 0s or all Fs. </p>
<p>The LACP system IDs of the master and backup devices in the E-Trunk must be the same.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=lacp+e-trunk+priority"><b><span class="cmdname">lacp e-trunk priority</span></b></a> <i><span class="varname">priority</span></i></span><p><p>The LACP priority is configured for the E-Trunk.</p>
</p><p><p>The LACP priorities of the master and backup devices in an E-Trunk must be the same.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i></span><p><p>An E-Trunk is created.</p>
</p><p><p><i><span class="varname">e-trunk-id</span></i> is an integer ranging from 1 to 16.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=security-key"><b><span class="cmdname">security-key</span></b></a> { <strong><span>simple</span></strong> <i><span class="varname">simple-key</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">cipher-key</span></i> }</span><p><p>An E-Trunk encryption password is configured.</p>
</p><p><p>The encrypted passwords configured on the master and backup devices of an E-Trunk must be the same.</p>
</p><p><p>For security purposes, you are advised not to use weak security algorithms in this feature. If you need to use such an algorithm, run the <a href="cmdqueryname=undo+crypto+weak-algorithm+disable"><b><span class="cmdname">undo crypto weak-algorithm disable</span></b></a> command to enable the weak security algorithm function.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=priority"><b><span class="cmdname">priority</span></b></a> <i><span class="varname">priority</span></i></span><p><p>A priority is configured for the E-Trunk.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer-address"><b><span class="cmdname">peer-address</span></b></a> <i><span class="varname">peer-ip-address</span></i> <strong><span>source-address</span></strong> <i><span class="varname">source-ip-address</span></i></span><p><p>The local and peer IP addresses are configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <strong><span>eth-trunk</span></strong> <i><span class="varname">trunk-id</span></i></span><p><p>The Eth-Trunk interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i></span><p><p>The Eth-Trunk interface is added to the E-Trunk.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Bind BFD to the E-Trunk.</span><p><p>Perform the following steps on the PEs to which the CE is dual-homed.</p>
</p><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <em>session-name</em> <strong><span>bind peer-ip</span></strong> <i><span class="varname">peer-ip</span></i> [ <strong><span>interface</span></strong> <i><span class="varname">interface-type interface-number</span></i> ] [ <strong><span>source-ip</span></strong> <i><span class="varname">source-ip</span></i> ]</span><p><p>A BFD session is created.</p>
</p><p><p><i><span class="varname">bfd-name</span></i> specifies a BFD session name. The value is a string of 1 to 15 characters.</p>
<p><strong><span>interface</span></strong> <i><span class="varname">interface-type interface-number</span></i> specifies the Layer 3 outbound interface on which a BFD session is created.</p>
<p>The IP addresses of the local and remote ends of a BFD session must be the same as those of the E-Trunk.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=discriminator+local"><b><span class="cmdname">discriminator local</span></b></a> <i><span class="varname">discr-value</span></i></span><p><p>A local discriminator is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=discriminator+remote"><b><span class="cmdname">discriminator remote</span></b></a> <i><span class="varname">discr-value</span></i></span><p><p>A remote discriminator is configured.</p>
</p><p><p><i><span class="varname">discr-value</span></i> specifies a BFD session discriminator. The value is an integer ranging from 1 to 8191.</p>
<p>The local discriminator on one end must be the same as the remote discriminator on the other end. Otherwise, the BFD session cannot be established. In addition, the local and remote discriminators cannot be modified after being configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i></span><p><p>The E-Trunk view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk+track+bfd-session"><b><span class="cmdname">e-trunk track bfd-session</span></b></a> <strong><span>session-name</span></strong> <i><span class="varname">bfd-session-name</span></i></span><p><p>The BFD session is bound to the E-Trunk.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5007.html">Configuring PW Redundancy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5009.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6019.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>