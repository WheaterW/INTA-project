
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring the Revertive Switchover">
<meta name="abstract" content="The revertive switching policies can be classified into three modes: immediate revertive mode, delayed revertive mode, and non-revertive mode.">
<meta name="description" content="The revertive switching policies can be classified into three modes: immediate revertive mode, delayed revertive mode, and non-revertive mode.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_3004.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5002.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_3008.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,vpws,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00830487">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369806">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring the Revertive Switchover</title>
</head>
<body><a name="EN-US_TASK_0172369806"></a><a name="EN-US_TASK_0172369806"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring the Revertive Switchover</h1>
<div class="taskbody"><p>The revertive switching policies can be classified into three modes: immediate revertive mode, delayed revertive mode, and non-revertive mode.</p>
<div class="context"><a name="EN-US_TASK_0172369806__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When primary and secondary PWs are configured, if the primary PW fails, traffic is switched to the secondary PW to prevent traffic interruption. If the primary PW recovers, traffic is switched back to the primary PW after a period of time. To flexibly adjust the switching time, configure a revertive switching policy.</p>
<p>When CEs are connected to PEs asymmetrically, do as follows on the PE (where traffic is switched) to which a CE is connected through a single link:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172369806__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The AC interface view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=mpls+l2vpn+reroute"><b><span class="cmdname">mpls l2vpn reroute</span></b></a> { { <strong><span>delay</span></strong> <em>delayTime</em> | <strong><span>immediately</span></strong> } [ <strong><span>resume</span></strong> <em>resumeTime</em> ] | <strong><span>never</span></strong> }</span></span><p><p>The revertive switchover policy is configured.</p>
<p>The types of the revertive switchover on PEs are as follows:</p>
<ul><li><p>Immediate revertive switchover: The local PE immediately switches traffic to the primary PW and notifies the fault to the remote PE of the secondary PW. The PE notifies the rectification of the fault to the remote PE of the secondary PW after the period of <span><em>resumeTime</em></span>.</p>
</li><li><p>Delayed revertive switchover: The PE switches traffic to the primary PW after the period of <em>delayTime</em>.</p>
</li><li><p>None revertive switchover: The PE does not switch traffic to the primary PW until the secondary PW is faulty.</p>
</li></ul>
<p>For an asymmetric networking, in which ACs are of the Ethernet type, note the following:</p>
<ul><li><p>If the remote shutdown function is configured on the interface of a PE that connects a CE, you are recommended not to use the policy of immediate revertive switchover, which may lead to network flapping and traffic loss. On the other hand, you can use the policy of delayed revertive switchover to set <em>delayTime</em> equal to or more than 30 seconds.</p>
</li><li><p>If the Ethernet OAM function is configured on the interface of a PE that connects a CE, and a revertive switchover policy is also configured, you cannot set <span><em>resumeTime</em></span> to be 0 seconds, but be equal to or longer than one second.</p>
</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172369806__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><p>Run the <a href="cmdqueryname=manual-set+pw-ac-fault"><b><span class="cmdname">manual-set pw-ac-fault</span></b></a> command to simulate a PW fault to check whether a primary/secondary PW switchover is performed or not. The result is saved in the log file.</p>
<p>Run the <a href="cmdqueryname=manual-set+pw-ac-fault"><b><span class="cmdname">manual-set pw-ac-fault</span></b></a> command on the AC interface of the primary PW, the following situations occur:</p>
<ul><li><p>The status of the primary PW is <strong><span>Down</span></strong>.</p>
</li><li><p><strong><span>VC</span></strong> <strong><span>status</span></strong> of the primary PW is <strong><span>InActive</span></strong>, and that of the secondary PW is <strong><span>Active.</span></strong></p>
</li><li><p>L2VPN data is switched to the secondary PW.</p>
</li></ul>
<p>Run the <a href="cmdqueryname=undo+manual-set+pw-ac-fault"><b><span class="cmdname">undo manual-set pw-ac-fault</span></b></a> command on the AC interface of the primary PW to rectify the fault on the PW, the following situations occur:</p>
<ul><li><p>The status of the primary PW is <strong><span>up</span></strong>.</p>
</li><li><p><strong><span>VC</span></strong> <strong><span>status</span></strong> of the primary PW is <strong><span>Active</span></strong>, and <strong><span>VC</span></strong> <strong><span>status</span></strong> of the secondary PW is <strong><span>InActive.</span></strong></p>
</li><li><p>L2VPN data is switched to the primary PW.</p>
</li></ul>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_3004.html">Configuring LDP VPWS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5002.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_3008.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>