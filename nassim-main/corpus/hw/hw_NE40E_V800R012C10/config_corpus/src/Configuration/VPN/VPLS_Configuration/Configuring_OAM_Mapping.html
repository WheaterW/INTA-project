
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring OAM Mapping">
<meta name="abstract" content="This section describes how to configure OAM mapping. When an intermediary such as a switch exists between a PE and a CE, you can configure OAM mapping to associate the OAM status on an AC interface with the PW status.">
<meta name="description" content="This section describes how to configure OAM mapping. When an intermediary such as a switch exists between a PE and a CE, you can configure OAM mapping to associate the OAM status on an AC interface with the PW status.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6080.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_vpls_cfg_3001.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370209">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring OAM Mapping</title>
</head>
<body><a name="EN-US_TASK_0172370209"></a><a name="EN-US_TASK_0172370209"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring OAM Mapping</h1>
<div class="taskbody"><p>This section describes how to configure OAM mapping. When an intermediary such as a switch exists between a PE and a CE, you can configure OAM mapping to associate the OAM status on an AC interface with the PW status.</p>
<div class="context"><a name="EN-US_TASK_0172370209__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>When the AC interface bound to a VPLS changes, a PE sends an LDP MAC-Withdraw message to its peer. On the network shown in <a href="#EN-US_TASK_0172370209__fig_dc_vrp_vpls_cfg_605501">Figure 1</a>, an intermediate device exists between CE1 and PE1, and another intermediate device exists between CE1 and PE2. When CE1's interface goes down, PE1's AC interface that connects to CE1 does not go down immediately. As a result, PE1 does not immediately send an LDP MAC-Withdraw message to PE3, causing the downstream traffic from PE3 to PE1 to be lost. To prevent this problem, you can configure OAM mapping on CE1, PE1, and PE2 so that OAM monitors the links between the CE and PEs and the OAM status is associated with the PW status. When CE1's interface goes down, a primary/secondary PW switchover can be rapidly performed.</p>
<div class="fignone" id="EN-US_TASK_0172370209__fig_dc_vrp_vpls_cfg_605501"><a name="EN-US_TASK_0172370209__fig_dc_vrp_vpls_cfg_605501"></a><a name="fig_dc_vrp_vpls_cfg_605501"></a><span class="figcap"><b>Figure 1 </b>Configuring OAM mapping for a VPLS network</span><br><span><img class="vsd" src="images/fig_dc_vrp_vpls_cfg_605501.png" width="NaN" height="NaN"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172370209__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring OAM mapping, complete the following tasks:</p>
<ul><li><p>Configure PWs between PE1, PE2, and PE3.</p>
</li><li><p>Configure OAM on CE1, PE1, and PE2.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172370209__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The AC interface view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=mpls+l2vpn+oam-mapping"><b><span class="cmdname">mpls l2vpn oam-mapping</span></b></a> <strong><span>1ag</span></strong> <strong><span>md</span></strong> <i><span class="varname">md-name</span></i> <strong><span>ma</span></strong> <i><span class="varname">ma-name</span></i></span><p><p>The OAM status on the AC interface is associated with the PW status.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If <strong><span>1ag</span></strong> is not configured, this command applies only to low-speed interfaces. </p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172370209__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><div class="p">After configuring OAM mapping, verify the configuration using the following commands:<ul><li>Run the <a href="cmdqueryname=display+vsi"><b><span class="cmdname">display vsi</span></b></a> <strong><span>name</span></strong> <i><span class="varname">vsi-name</span></i> <strong><span>oam-mapping</span></strong> command to check information about the AC interface with OAM mapping configured.</li><li>Run the <a href="cmdqueryname=display+vsi"><b><span class="cmdname">display vsi</span></b></a> <strong><span>name</span></strong> <i><span class="varname">vsi-name</span></i> <strong><span>statistics</span></strong> command to check VSI statistics, such as the PWs and AC interfaces in different states.</li></ul>
</div>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5000.html">VPLS Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6080.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_vpls_cfg_3001.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>