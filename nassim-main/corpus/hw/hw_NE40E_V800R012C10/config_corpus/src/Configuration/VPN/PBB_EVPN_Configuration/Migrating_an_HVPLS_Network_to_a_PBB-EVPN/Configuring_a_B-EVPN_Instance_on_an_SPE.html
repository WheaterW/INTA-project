
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a B-EVPN Instance on an SPE">
<meta name="abstract" content="A backbone Ethernet VPN (B-EVPN) instance is essential for a superstratum provider edge (SPE) in connecting to hierarchical virtual private LAN service (HVPLS) and provider backbone bridge Ethernet VPN (PBB-EVPN) networks.">
<meta name="description" content="A backbone Ethernet VPN (B-EVPN) instance is essential for a superstratum provider edge (SPE) in connecting to hierarchical virtual private LAN service (HVPLS) and provider backbone bridge Ethernet VPN (PBB-EVPN) networks.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-evpn_cfg_0013.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-evpn_cfg_0015.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,pbb-evpnvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="PBB-EVPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PBB-EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="PBB-EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="PBB-EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="p00915595">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370746">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a B-EVPN Instance on an SPE</title>
</head>
<body><a name="EN-US_TASK_0172370746"></a><a name="EN-US_TASK_0172370746"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a B-EVPN Instance on an SPE</h1>
<div class="taskbody"><p>A backbone Ethernet VPN (B-EVPN) instance is essential for a superstratum provider edge (SPE) in connecting to hierarchical virtual private LAN service (HVPLS) and provider backbone bridge Ethernet VPN (PBB-EVPN) networks.</p>
<div class="context"><a name="EN-US_TASK_0172370746__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>During migration from an HVPLS network to a PBB-EVPN, HVPLS and PBB-EVPN will coexist for some time. To transmit traffic between HVPLS and PBB-EVPN networks, SPEs must have B-EVPN instances configured.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172370746__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=evpn+source-address"><b><span class="cmdname">evpn source-address</span></b></a> <i><span class="varname">ip-address</span></i></span><p><p>A PBB-EVPN source address is configured.</p>
</p></li><li><span>Run <a href="cmdqueryname=evpn+vpn-instance"><b><span class="cmdname">evpn vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong><span>b-evpn</span></strong></span><p><p>A B-EVPN instance is created, and its view is displayed.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description-information</span></i></span><p><p>A description is configured for the B-EVPN instance.</p>
<p>Similar to a hostname or an interface description, a B-EVPN instance description helps you memorize the B-EVPN instance.</p>
</p></li><li><span>Run <a href="cmdqueryname=route-distinguisher"><b><span class="cmdname">route-distinguisher</span></b></a> <i><span class="varname">route-distinguisher</span></i></span><p><p>A route distinguisher (RD) is configured for the EVPN instance.</p>
</p><p><p>A B-EVPN instance takes effect only after the RD is configured. The RDs of different EVPN instances on an SPE must be different.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After being configured, an RD cannot be modified, but can be deleted. After you delete the RD of an EVPN instance, the VPN targets of the EVPN instance will also be deleted.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=vpn-target"><b><span class="cmdname">vpn-target</span></b></a> <i><span class="varname">vpn-target</span></i> &amp;&lt;1-8&gt; [ <strong><span>both</span></strong> | <strong><span>export-extcommunity</span></strong> | <strong><span>import-extcommunity</span></strong> ]</span><p><p>VPN targets are configured for the B-EVPN instance.</p>
</p><p><p>A VPN target is a BGP extended community attribute used to control the receiving and advertisement of EVPN routes. A maximum of eight VPN targets can be configured using a <a href="cmdqueryname=vpn-target"><b><span class="cmdname">vpn-target</span></b></a> command. To configure more VPN targets for an EVPN instance address family, run the <a href="cmdqueryname=vpn-target"><b><span class="cmdname">vpn-target</span></b></a> command several times.</p>
</p></li><li><span>Run <a href="cmdqueryname=pbb+backbone-source-mac"><b><span class="cmdname">pbb backbone-source-mac</span></b></a> <i><span class="varname">mac-address</span></i></span><p><p>A B-MAC address is configured in the B-EVPN instance view.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-evpn_cfg_0013.html">Migrating an HVPLS Network to a PBB-EVPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-evpn_cfg_0015.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>