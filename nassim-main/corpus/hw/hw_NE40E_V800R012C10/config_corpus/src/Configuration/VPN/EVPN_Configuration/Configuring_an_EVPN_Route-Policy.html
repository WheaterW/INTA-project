
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an EVPN Route-Policy">
<meta name="abstract" content="An EVPN route-policy can be configured to control EVPN route receiving and advertisement.">
<meta name="description" content="An EVPN route-policy can be configured to control EVPN route receiving and advertisement.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0098_atn8xx.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0271.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370501">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring an EVPN Route-Policy</title>
</head>
<body><a name="EN-US_TASK_0172370501"></a><a name="EN-US_TASK_0172370501"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an EVPN Route-Policy</h1>
<div class="taskbody"><p>An EVPN route-policy can be configured to control EVPN route receiving and advertisement.</p>
<div class="context"><a name="EN-US_TASK_0172370501__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>An EVPN route-policy is used to match specified EVPN route information or to match some attributes in EVPN route information and change these attributes as required. In addition, an EVPN route-policy can be deployed to control the routing table size, thereby conserving system resources.</p>
<div class="p">A route-policy can consist of multiple nodes, and each node can comprise the following clauses:<ul><li><p>if-match clause</p>
<p>Defines the matching rules used by the current route-policy to match EVPN routes. The matching objects are some attributes of the EVPN routes.</p>
</li><li><p>apply clause</p>
<p>Specifies actions. Specifically, configuration commands are run after a route satisfies the matching rules specified by the if-match clauses. The apply clauses can change some attributes of EVPN routes.</p>
</li></ul>
</div>
<p>After a route-policy is created, apply the route-policy to EVPN or L3VPN to make it take effect.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172370501__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create a route-policy.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <strong><span>node</span></strong> <i><span class="varname">node</span></i></span><p><p>A route-policy node is created, and its view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure filter criteria (if-match clause).</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="28.65%" id="mcps1.4.2.2.2.1.1.3.1.1" liSelected="liSelected"><p>Filter Criteria</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="71.35000000000001%" id="mcps1.4.2.2.2.1.1.3.1.2" liSelected="liSelected"><p>Configuration Procedure</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="28.65%" headers="mcps1.4.2.2.2.1.1.3.1.1 "><p>Filtering by VNI</p>
</td>
<td class="cellrowborder" valign="top" width="71.35000000000001%" headers="mcps1.4.2.2.2.1.1.3.1.2 "><ol type="a"><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=filter-list+vni"><b><span class="cmdname">filter-list vni</span></b></a> <i><span class="varname">vni-list-name</span></i> command to create a VNI list and enter its view.</p>
</li><li><p>Run the <a href="cmdqueryname=vni"><b><span class="cmdname">vni</span></b></a> <i><span class="varname">vni-id</span></i> command to configure a VNI ID.</p>
</li><li><p>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <strong><span>node</span></strong> <i><span class="varname">node</span></i> to enter the route-policy view.</p>
</li><li><div class="p">Configure matching rules based on VNI lists:<ul><li><p>Run the <a href="cmdqueryname=if-match+l2vni"><b><span class="cmdname">if-match l2vni</span></b></a> [ <i><span class="varname">l2vni-name</span></i> ] command to configure a matching rule based on a Layer 2 VNI list.</p>
</li><li><p>Run the <a href="cmdqueryname=if-match+l3vni"><b><span class="cmdname">if-match l3vni</span></b></a> [ <i><span class="varname">l3vni-name</span></i> ] command to configure a matching rule based on a Layer 3 VNI list.</p>
</li></ul>
</div>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="28.65%" headers="mcps1.4.2.2.2.1.1.3.1.1 "><p>Filtering by MPLS label</p>
</td>
<td class="cellrowborder" valign="top" width="71.35000000000001%" headers="mcps1.4.2.2.2.1.1.3.1.2 "><ol type="a"><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <strong><span>node</span></strong> <i><span class="varname">node</span></i> to enter the route-policy view.</p>
</li><li><p>Run the <a href="cmdqueryname=if-match"><b><span class="cmdname">if-match</span></b></a> { <strong><span>mpls-label</span></strong> | <strong><span>mpls-label2</span></strong> } <sup>*</sup> command to configure a matching rule based on an MPLS label.</p>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="28.65%" headers="mcps1.4.2.2.2.1.1.3.1.1 "><p>Filtering by route type</p>
</td>
<td class="cellrowborder" valign="top" width="71.35000000000001%" headers="mcps1.4.2.2.2.1.1.3.1.2 "><ol type="a"><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <strong><span>node</span></strong> <i><span class="varname">node</span></i> to enter the route-policy view.</p>
</li><li><p>Run the <a href="cmdqueryname=if-match+route-type"><b><span class="cmdname">if-match route-type</span></b></a> <strong><span>evpn</span></strong> { <strong><span>ad</span></strong> | <strong><span>es</span></strong> | <strong><span>inclusive</span></strong> | <strong><span>join</span></strong> | <strong><span>leave</span></strong> | <strong><span>mac</span></strong> | <strong><span>prefix</span></strong> | <strong><span>smet</span></strong> } <sup>*</sup> command to configure a matching rule based on the route type.</p>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="28.65%" headers="mcps1.4.2.2.2.1.1.3.1.1 "><p>Filtering by Ethernet tag</p>
</td>
<td class="cellrowborder" valign="top" width="71.35000000000001%" headers="mcps1.4.2.2.2.1.1.3.1.2 "><ol type="a"><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=filter-list+eth-tag"><b><span class="cmdname">filter-list eth-tag</span></b></a> <i><span class="varname">eth-tag-list</span></i> command to create an Ethernet tag list.</p>
</li><li><p>Run the <a href="cmdqueryname=eth-tag"><b><span class="cmdname">eth-tag</span></b></a> <i><span class="varname">ethtag-value</span></i> command to configure an Ethernet tag of the Ethernet tag list.</p>
</li><li><p>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <strong><span>node</span></strong> <i><span class="varname">node</span></i> to enter the route-policy view.</p>
</li><li><p>Run the <a href="cmdqueryname=if-match+eth-tag-list"><b><span class="cmdname">if-match eth-tag-list</span></b></a> <i><span class="varname">eth-tag-list-name</span></i> command to configure a matching rule based on the Ethernet tag.</p>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="28.65%" headers="mcps1.4.2.2.2.1.1.3.1.1 "><p>Filtering by MAC address</p>
</td>
<td class="cellrowborder" valign="top" width="71.35000000000001%" headers="mcps1.4.2.2.2.1.1.3.1.2 "><ol type="a"><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=filter-list+mac"><b><span class="cmdname">filter-list mac</span></b></a> <i><span class="varname">mac-list-name</span></i> command to create a MAC address list.</p>
</li><li><p>Run the <a href="cmdqueryname=mac"><b><span class="cmdname">mac</span></b></a> <i><span class="varname">mac-address</span></i> command to configure MAC addresses in the MAC address list.</p>
</li><li><p>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <strong><span>node</span></strong> <i><span class="varname">node</span></i> to enter the route-policy view.</p>
</li><li><p>Run the <a href="cmdqueryname=if-match+mac-list"><b><span class="cmdname">if-match mac-list</span></b></a> <i><span class="varname">mac-list-name</span></i> command to configure a matching rule based on the MAC address list.</p>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="28.65%" headers="mcps1.4.2.2.2.1.1.3.1.1 "><p>Filtering by encapsulation extended community attribute</p>
</td>
<td class="cellrowborder" valign="top" width="71.35000000000001%" headers="mcps1.4.2.2.2.1.1.3.1.2 "><ol type="a"><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Configure a filter for encapsulation extended community attributes.</p>
<ul><li><p>Run the <a href="cmdqueryname=ip+extcommunity-list+encapsulation"><b><span class="cmdname">ip extcommunity-list encapsulation</span></b></a> <strong><span>basic</span></strong> <i><span class="varname">encapsulation-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-value</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <i><span class="varname">encap-value</span></i> } &amp; &lt;1-16&gt; command to create a filter for basic encapsulation extended community attributes.</p>
</li><li><p>Run the <a href="cmdqueryname=ip+extcommunity-list+encapsulation"><b><span class="cmdname">ip extcommunity-list encapsulation</span></b></a> <strong><span>advanced</span></strong> <i><span class="varname">encapsulation-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-value</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular</span></i> command to create a filter for advanced encapsulation extended community attributes.</p>
</li></ul>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>In an EVPN VXLAN scenario, EVPN routes carry VXLAN-encapsulated extended community attributes. You can set <i><span class="varname">encap-value</span></i> to <strong>0:8</strong> to filter EVPN routes in this scenario. In an EVPN MPLS scenario, a device may receive EVPN routes carrying MPLS-encapsulated extended community attributes. To filter these routes, set <i><span class="varname">encap-value</span></i> to <strong>0:10</strong>.</p>
</div></div>
</li><li><p>Run the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <strong><span>node</span></strong> <i><span class="varname">node</span></i> to enter the route-policy view.</p>
</li><li><p>Run the <a href="cmdqueryname=if-match+extcommunity-list+encapsulation"><b><span class="cmdname">if-match extcommunity-list encapsulation</span></b></a> <i><span class="varname">encapsulation-name</span></i> command to configure a matching rule based on the extended community attribute filter.</p>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Configure an apply clause.</span><p><p><a href="dc_vrp_route-policy_cfg_0010.html">Configuring Apply clauses</a> helps you add or modify the attributes of EVPN routes.</p>
</p></li><li><span>Apply a route-policy.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="28.65%" id="mcps1.4.2.4.2.1.1.3.1.1" liSelected="liSelected"><p>Usage Scenario</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="71.35000000000001%" id="mcps1.4.2.4.2.1.1.3.1.2" liSelected="liSelected"><p>Configuration Procedure</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="28.65%" headers="mcps1.4.2.4.2.1.1.3.1.1 "><p>Control route receiving and advertisement between BGP EVPN peers.</p>
</td>
<td class="cellrowborder" valign="top" width="71.35000000000001%" headers="mcps1.4.2.4.2.1.1.3.1.2 "><ol type="a"><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i> command to enter the BGP view.</p>
</li><li><p>Run the <a href="cmdqueryname=l2vpn-family+evpn"><b><span class="cmdname">l2vpn-family evpn</span></b></a> command to enter the BGP-EVPN address family view.</p>
</li><li><p>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv4-address</span></i> } <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> { <strong><span>import</span></strong> | <strong><span>export</span></strong> } command to configure a route-policy for the routes received from the BGP EVPN peer (group) or advertised to the BGP EVPN peer (group).</p>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="28.65%" headers="mcps1.4.2.4.2.1.1.3.1.1 "><p>Control the routes sent by an EVPN instance through EVPN or the routes received by an EVPN instance through BGP EVPN.</p>
</td>
<td class="cellrowborder" valign="top" width="71.35000000000001%" headers="mcps1.4.2.4.2.1.1.3.1.2 "><ol type="a"><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Use either of the following methods to enter the EVPN instance view:</p>
<ul><li><p>Run the <a href="cmdqueryname=evpn+vpn-instance"><b><span class="cmdname">evpn vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong><span>vpws</span></strong> command to create a VPWS EVPN instance and enter its view.</p>
</li><li><p>Run the <a href="cmdqueryname=evpn+vpn-instance"><b><span class="cmdname">evpn vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong><span>bd-mode</span></strong> command to create a BD EVPN instance and enter the BD EVPN instance view.</p>
</li></ul>
</li><li>Run the <a href="cmdqueryname=route-distinguisher"><b><span class="cmdname">route-distinguisher</span></b></a> <i><span class="varname">route-distinguisher</span></i> command to set an RD for the EVPN instance.</li><li><div class="p">Associate the current EVPN instance with an import route-policy.<ul><li>Run the <a href="cmdqueryname=import+route-policy"><b><span class="cmdname">import route-policy</span></b></a> <i><span class="varname">policy-name</span></i> command to apply an import route-policy to the EVPN instance, so that the EVPN instance can filter routes to be imported.</li><li>Run the <a href="cmdqueryname=export+route-policy"><b><span class="cmdname">export route-policy</span></b></a> <i><span class="varname">policy-name</span></i> command to apply an export route-policy to the EVPN instance, so that the EVPN instance can filter routes to be advertised.</li></ul>
</div>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="28.65%" headers="mcps1.4.2.4.2.1.1.3.1.1 "><p>Control the routes sent by an L3VPN instance through EVPN or the routes received by an L3VPN instance through BGP EVPN.</p>
</td>
<td class="cellrowborder" valign="top" width="71.35000000000001%" headers="mcps1.4.2.4.2.1.1.3.1.2 "><ol type="a"><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> command to create a VPN instance and enter its view.</p>
</li><li><p>Run the <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a> or <a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> command to enter the IPv4 or IPv6 address family view of the VPN instance.</p>
</li><li>Run the <a href="cmdqueryname=route-distinguisher"><b><span class="cmdname">route-distinguisher</span></b></a> <i><span class="varname">route-distinguisher</span></i> command to set an RD for the VPN instance.</li><li><div class="p">Apply a route-policy to the VPN instance IPv4/IPv6 address family.<ul><li>Run the <a href="cmdqueryname=import+route-policy"><b><span class="cmdname">import route-policy</span></b></a> <i><span class="varname">policy-name</span></i> <strong><span>evpn</span></strong> command to apply an import route-policy to the VPN instance IPv4/IPv6 address family, so that the address family can filter routes to be imported from EVPN.</li><li>Run the <a href="cmdqueryname=export+route-policy"><b><span class="cmdname">export route-policy</span></b></a> <i><span class="varname">policy-name</span></i> <strong><span>evpn</span></strong> command to apply an export route-policy to the VPN instance IPv4/IPv6 address family, so that the address family can filter routes to be advertised to EVPN.</li></ul>
</div>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="28.65%" headers="mcps1.4.2.4.2.1.1.3.1.1 "><p>Configure the function to recurse BGP EVPN routes to next hops based on a route-policy.</p>
</td>
<td class="cellrowborder" valign="top" width="71.35000000000001%" headers="mcps1.4.2.4.2.1.1.3.1.2 "><ol type="a"><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i> command to enter the BGP view.</p>
</li><li><p>Run the <a href="cmdqueryname=l2vpn-family+evpn"><b><span class="cmdname">l2vpn-family evpn</span></b></a> command to enter the BGP-EVPN address family view.</p>
</li><li><p>Run the <a href="cmdqueryname=nexthop+recursive-lookup+route-policy"><b><span class="cmdname">nexthop recursive-lookup route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> command to configure the function to recurse BGP EVPN routes to next hops based on the specified route-policy.</p>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</td>
</tr>
</tbody>
</table>
</div>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172370501__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+bgp+evpn+all+routing-table"><b><span class="cmdname">display bgp evpn all routing-table</span></b></a> command to check EVPN route information after the EVPN route-policy is applied.</li><li>Run the <a href="cmdqueryname=display+ip+routing-table+vpn-instance"><b><span class="cmdname">display ip routing-table vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> command to check VPN IPv4 routes to which an EVPN route-policy has been applied.</li><li>Run the <a href="cmdqueryname=display+ipv6+routing-table+vpn-instance"><b><span class="cmdname">display ipv6 routing-table vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> command to check VPN IPv6 routes to which an EVPN route-policy has been applied.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">EVPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0098_atn8xx.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0271.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>