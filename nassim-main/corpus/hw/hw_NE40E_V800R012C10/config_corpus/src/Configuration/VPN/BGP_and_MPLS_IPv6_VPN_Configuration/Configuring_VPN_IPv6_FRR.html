
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring VPN IPv6 FRR">
<meta name="abstract" content="This section describes how to configure private network IPv6 FRR in the networking where multiple CEs at an IPv6 VPN site access the same PE. This feature can quickly switch traffic to a link connected to another CE if the primary route from a PE to a CE becomes unreachable.">
<meta name="description" content="This section describes how to configure private network IPv6 FRR in the networking where multiple CEs at an IPv6 VPN site access the same PE. This feature can quickly switch traffic to a link connected to another CE if the primary route from a PE to a CE becomes unreachable.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2024.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2028.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369679">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring VPN IPv6 FRR</title>
</head>
<body><a name="EN-US_TASK_0172369679"></a><a name="EN-US_TASK_0172369679"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring VPN IPv6 FRR</h1>
<div class="taskbody"><p>This section describes how to configure private network IPv6 FRR in the networking where multiple CEs at an IPv6 VPN site access the same PE. This feature can quickly switch traffic to a link connected to another CE if the primary route from a PE to a CE becomes unreachable.</p>
<div class="context"><a name="EN-US_TASK_0172369679__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>This feature applies to IP services that are sensitive to the packet loss and delay on a VPN. After VPN IPv6 FRR is configured, if the route from a PE to a CE is unreachable, traffic from the PE can be quickly switched to a link connected to another CE. This feature ensures non-stop forwarding of IP services.</p>
<p>The <span class="keyword">NE40E</span> supports two VPN IPv6 FRR modes:</p>
<ul><li><p>IPv6 FRR: applies to the networking where different PE-CE pairs use different routing protocols.</p>
</li><li><p>VPN BGP auto FRR: applies to the networking where BGP runs between the PEs and CE.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172369679__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring VPN IPv6 FRR, complete the following tasks:</p>
<ul><li><p>Configure a BGP/MPLS IPv6 VPN.</p>
</li><li><p>Ensure that the PE learns IPv6 VPN routes with the same prefix from different CEs attached to it.</p>
</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172369679__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure IPv6 FRR.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span></span><p><p>The VPN instance view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a></span></span><p><p>The VPN instance IPv6 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv6+frr"><b><span class="cmdname">ipv6 frr</span></b></a></span></span><p><p>IPv6 FRR is enabled.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure VPN BGP auto FRR.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></span><p><p>The BGP-VPN instance IPv6 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=auto-frr"><b><span class="cmdname">auto-frr</span></b></a></span><p><p>BGP auto FRR is enabled.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=route-select+delay"><b><span class="cmdname">route-select delay</span></b></a> <i><span class="varname">delay-value</span></i></span><p><p>A delay for selecting a route to the intermediate device on the primary path is configured. After the primary path recovers, an appropriate delay ensures that traffic switches back to the primary path after the intermediate device completes refreshing forwarding entries.</p>
</p><p></p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Enable IP FRR poison reverse.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The interface or sub-interface view is displayed.</p>
</p><p><p>The Eth-Trunk interface, Eth-Trunk sub-interface, GE interface, or GE sub-interface view can be displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=poison-reverse+enable"><b><span class="cmdname">poison-reverse enable</span></b></a></span><p><p>IP FRR poison reverse is enabled.</p>
</p><p><p>On an IP ring network configured with IP FRR, this command prevents instantaneous traffic storms caused by route convergence.</p>
<p>In the load balancing scenario, poison reverse does not take effect.</p>
</p></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0172369679__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+ipv6+routing-table+vpn-instance"><b><span class="cmdname">display ipv6 routing-table vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> [ <i><span class="varname">ipv6-address</span></i> ] <strong><span>verbose</span></strong> command to check the backup outbound interface and backup next hop of the VPN IPv6 route in the routing table.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2000.html">BGP/MPLS IPv6 VPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2024.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2028.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>