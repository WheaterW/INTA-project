
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Route Advertisement on PEs">
<meta name="abstract" content="Route advertisement allows PEs to advertise default static routes to L2GWs/L3GWs through a BGP EVPN RR.">
<meta name="description" content="Route advertisement allows PEs to advertise default static routes to L2GWs/L3GWs through a BGP EVPN RR.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0141.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0142.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0143.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="p00915595,w00800033,w00556928,l00468467,w00606909,evpnvrp,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="p00915595">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370589">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Route Advertisement on PEs</title>
</head>
<body><a name="EN-US_TASK_0172370589"></a><a name="EN-US_TASK_0172370589"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Route Advertisement on PEs</h1>
<div class="taskbody"><p>Route advertisement allows PEs to advertise default static routes to L2GWs/L3GWs through a BGP EVPN RR.</p>
<div class="steps"><a name="EN-US_TASK_0172370589__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Create a route-policy to filter and modify received routes. For configuration details, see <a href="dc_vrp_route-policy_cfg_0007.html">Configuring a Route-Policy</a>. You can run the <a href="cmdqueryname=apply+gateway-ip+none"><b><span class="cmdname">apply gateway-ip none</span></b></a> or <a href="cmdqueryname=apply+ipv6+gateway-ip+none"><b><span class="cmdname">apply ipv6 gateway-ip none</span></b></a> command to delete gateway IP addresses from the VNF routes received from L2GWs/L3GWs, so that the traffic sent from PEs to VNFs can recurse to SR tunnels, instead of being forwarded based on gateway IP addresses.</span></li><li><span>Configure default static VPN routes.</span><p><ul><li><p>Run the <a href="cmdqueryname=ip+route-static+vpn-instance"><b><span class="cmdname">ip route-static vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong>0.0.0.0</strong> { <strong>0.0.0.0</strong> | <strong>0</strong> } { <i><span class="varname">nexthop-address</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <i><span class="varname">nexthop-address</span></i> ] } [ <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] command to create a default static VPN IPv4 route.</p>
</li><li><p>Run the <a href="cmdqueryname=ipv6+route-static+vpn-instance"><b><span class="cmdname">ipv6 route-static vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong>::</strong> <strong>0</strong> { <i><span class="varname">nexthop-ipv6âaddress</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <i><span class="varname">nexthop-ipv6-address</span></i> ] } [ <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] command to create a default static VPN IPv6 route.</p>
</li></ul>
</p></li><li><span>Run <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span><p><p>The VPN instance view is displayed.</p>
</p></li><li><span>Enter the VPN instance IPv4 or IPv6 address family view.</span><p><ul><li><p>Run the <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a> command to enter the VPN instance IPv4 address family view.</p>
</li><li><p>Run the <a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> command to enter the VPN instance IPv6 address family view.</p>
</li></ul>
</p></li><li><span>Run <a href="cmdqueryname=import+route-policy"><b><span class="cmdname">import route-policy</span></b></a> <i><span class="varname">policy-name</span></i> <strong><span>evpn</span></strong></span><p><p>The L3VPN instance is associated with an import route-policy. This route-policy is used to filter the routes received by the L3VPN instance from the EVPN instance, so that the L3VPN instance can delete gateway IP addresses from the routes received from L2GWs/L3GWs.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the VPN instance IPv4 or IPv6 address family view.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the VPN instance view.</p>
</p></li><li><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>Enter the BGP-VPN instance IPv4 or IPv6 address family view.</span><p><ul><li><p>Run the <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> command to enter the BGP-VPN instance IPv4 address family view.</p>
</li><li><p>Run the <a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> command to enter the BGP-VPN instance IPv6 address family view.</p>
</li></ul>
</p></li><li><span>Run <a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> { <strong>0.0.0.0</strong> <strong>0</strong> | <strong>::</strong> <strong>0</strong> }</span><p><p>Default static VPN routes are imported into the BGP-VPN instance IPv4 or IPv6 address family.</p>
</p></li><li><span>Run <a href="cmdqueryname=advertise+l2vpn+evpn"><b><span class="cmdname">advertise l2vpn evpn</span></b></a></span><p><p>The function to advertise IP routes from the VPN instance to the EVPN instance is enabled.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the BGP-VPN instance IPv4 or IPv6 address family view.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the BGP view.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0141.html">Configuring the NFVI Distributed Gateway Function (BGP EVPN over E2E SR Tunnels)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0142.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0143.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>