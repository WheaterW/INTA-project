
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Route Recursion to SRv6 TE Policies">
<meta name="abstract" content="EVPN VPWS is deployed based on the EVPN service architecture. Before configuring EVPN VPWS over SRv6 BE, you need to configure EVPN functions.">
<meta name="description" content="EVPN VPWS is deployed based on the EVPN service architecture. Before configuring EVPN VPWS over SRv6 BE, you need to configure EVPN functions.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0240.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0244.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0259.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001270775920">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Route Recursion to SRv6 TE Policies</title>
</head>
<body><a name="EN-US_TASK_0000001270775920"></a><a name="EN-US_TASK_0000001270775920"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Route Recursion to SRv6 TE Policies</h1>
<div class="taskbody"><p>EVPN VPWS is deployed based on the EVPN service architecture. Before configuring EVPN VPWS over SRv6 BE, you need to configure EVPN functions.</p>
<div class="steps"><a name="EN-US_TASK_0000001270775920__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=evpn+srv6+next-header-field"><b><span class="cmdname">evpn srv6 next-header-field</span></b></a> { <strong><span>59</span></strong> | <strong><span>143</span></strong> }</span><p><p>A value is configured for the Next Header field in an SRv6 extension header.</p>
</p><p><p>If the value is 59 in earlier versions, you can perform this step to change the value to 59 to ensure compatibility with the earlier versions.</p>
</p></li><li><span>Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a></span><p><p>SRv6 is enabled for the IPv6 forwarding plane, and the SRv6 view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=encapsulation+source-address"><b><span class="cmdname">encapsulation source-address</span></b></a> <i><span class="varname">ipv6-address</span></i> [ <strong><span>ip-ttl</span></strong> <i><span class="varname">ttl-value</span></i> ]</span><p><p>A source address is specified for SRv6 EVPN encapsulation.</p>
</p></li><li><span>Configure a source address for SRv6 encapsulation. Note that you only need to perform one of the following operations. If both of the operations are performed, the latest configuration overrides the previous one.</span><ul><li>Run the <a href="cmdqueryname=encapsulation+source-address"><b><span class="cmdname">encapsulation source-address</span></b></a> <i><span class="varname">ipv6-address</span></i> [ <strong><span>ip-ttl</span></strong> <i><span class="varname">ttl-value</span></i> ] command to directly configure a source address for SRv6 encapsulation.</li><li>Run the <a href="cmdqueryname=encapsulation+source-interface"><b><span class="cmdname">encapsulation source-interface</span></b></a> { <i><span class="varname">intfname</span></i> | <i><span class="varname">interfaceType</span></i> <i><span class="varname">interfaceNum</span></i> } [ <strong>ip-ttl</strong> <i><span class="varname">ttl-value</span></i> ] command to specify the interface to which the source address used for SRv6 encapsulation belongs.<p>If no IPv6 global address is configured for the interface specified using the <a href="cmdqueryname=encapsulation+source-interface"><b><span class="cmdname">encapsulation source-interface</span></b></a> command, the source address for SRv6 encapsulation is not configured.</p>
</li></ul>
</li><li><span>Run <a href="cmdqueryname=locator"><b><span class="cmdname">locator</span></b></a> <i><span class="varname">locator-name</span></i> <strong><span>ipv6-prefix</span></strong> <i><span class="varname">ipv6-address</span></i> <i><span class="varname">mask-length</span></i> <strong><span>static</span></strong> <i><span class="varname">static-length</span></i> [<span><strong><span> args</span></strong> <i><span class="varname">args-length</span></i></span> ]</span><p><p>An SRv6 locator is configured, and its view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=opcode"><b><span class="cmdname">opcode</span></b></a> <i><span class="varname">func-opcode</span></i> <strong><span>end-dx2</span></strong> <strong><span>evpl-instance</span></strong> <i><span class="varname">evpl-instance-id</span></i></span><p><p>An opcode for static SIDs is configured.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=opcode"><b><span class="cmdname">opcode</span></b></a> <i><span class="varname">func-opcode</span></i> <strong><span>end-dx2l</span></strong> <strong><span>evpl-instance</span></strong> <i><span class="varname">evpl-instance-id</span></i></span><p><p>An opcode for End.DX2L SIDs is configured. You can run this command to manually specify a SID for a bypass path.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the SRv6 locator view.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the SRv6 view.</p>
</p></li><li><span>Run <a href="cmdqueryname=evpl+instance"><b><span class="cmdname">evpl instance</span></b></a> <i><span class="varname">evpl-id</span></i> <strong>static-mode</strong></span><p><p>The static EVPL instance view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname">segment-routing ipv6 locator</span></b></a> <i><span class="varname">locator-name</span></i></span><p><p>The device is enabled to add the SID attribute to EVPN routes to be sent.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Static SRv6 EVPN VPWS supports only static SIDs. Configure a static SID for the locator specified by <i><span class="varname">locator-name</span></i>.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the static EVPL instance view.</p>
</p></li><li><span>Run <a href="cmdqueryname=evpn+vpn-instance"><b><span class="cmdname">evpn vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong><span>vpws</span></strong></span><p><p>The VPWS EVPN instance view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=segment-routing+ipv6+traffic-engineer"><b><span class="cmdname">segment-routing ipv6 traffic-engineer</span></b></a> [ <strong><span>best-effort</span></strong> ]</span><p><p>The function to recurse EVPN VPWS services to SRv6 TE Policies is enabled.</p>
</p><p><p>If an SRv6 BE path exists on the network, you can set the <strong><span>best-effort</span></strong> parameter, allowing the SRv6 BE path to function as a best-effort path in the case of an SRv6 TE Policy fault.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0240.html">Configuring Static EVPN VPWS over SRv6 TE Policy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0244.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0259.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>