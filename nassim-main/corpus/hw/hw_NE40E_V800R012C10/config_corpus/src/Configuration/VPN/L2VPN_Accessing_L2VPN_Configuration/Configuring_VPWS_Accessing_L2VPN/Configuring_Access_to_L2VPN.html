
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Access to L2VPN">
<meta name="abstract" content="This section describes how to configure an IP address for an L3VE sub-interface and bind the sub-interface to a VPN to implement access to L2VPN.">
<meta name="description" content="This section describes how to configure an IP address for an L3VE sub-interface and bind the sub-interface to a VPN to implement access to L2VPN.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l2_cfg_003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l2_cfg_5027.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l2_cfg_5007.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="L2VPN Accessing L2VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="L2VPN Accessing L2VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="L2VPN Accessing L2VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="L2VPN Accessing L2VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001153170840">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Access to L2VPN</title>
</head>
<body><a name="EN-US_TASK_0000001153170840"></a><a name="EN-US_TASK_0000001153170840"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Access to L2VPN</h1>
<div class="taskbody" id="taskbody0000001153170840"><p id="shortdesc1832485127214054">This section describes how to configure an IP address for an L3VE sub-interface and bind the sub-interface to a VPN to implement access to L2VPN.</p>
<div class="context"><a name="EN-US_TASK_0000001153170840__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0000001153170840__context1582274866214054"><p id="EN-US_TASK_0000001153170840__p1003672061214054">Perform the following steps on NPEs.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001153170840__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul id="EN-US_TASK_0000001153170840__steps-unordered64549156214054"><li id="EN-US_TASK_0000001153170840__step443988353214054"><span id="EN-US_TASK_0000001153170840__cmd1754059193214054">Network-side user access to LDP VPWS</span><ol id="EN-US_TASK_0000001153170840__substeps1451537822214054"><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep1099573800214054"><span id="EN-US_TASK_0000001153170840__cmd1440074165214054">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname915294095214054">system-view</span></b></a></span><p><p id="EN-US_TASK_0000001153170840__p2058145301315">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep903025731214054"><span id="EN-US_TASK_0000001153170840__cmd886527568214054">Run <a href="cmdqueryname=interface+virtual-ethernet"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname907656307214054">interface virtual-ethernet</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname629403819214054">interface-number interface-number</span></i></span><p><p id="EN-US_TASK_0000001153170840__p1242739201410">The L3VE sub-interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep1326012734214054"><span id="EN-US_TASK_0000001153170840__cmd1858215419214054">Run <a href="cmdqueryname=vlan-type"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname233618069214054">vlan-type</span></b></a> <strong><span id="EN-US_TASK_0000001153170840__cmdparmname638503805214054">dot1q</span></strong> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname495414879214054">vlan-id</span></i></span><p><p id="EN-US_TASK_0000001153170840__p82431917149">A VLAN ID is configured for the VE sub-interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep1310372329214054"><span id="EN-US_TASK_0000001153170840__cmd982933518214054">Run <a href="cmdqueryname=mpls+l2vc"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname53213396396">mpls l2vc</span></b></a> { <em id="EN-US_TASK_0000001153170840__i588275415468"><i><span class="varname" id="EN-US_TASK_0000001153170840__varname1715171012470">ip-address</span></i></em> | <strong id="EN-US_TASK_0000001153170840__b12882854144616"><strong><span id="EN-US_TASK_0000001153170840__cmdparmname1870691620470">pw-template</span></strong></strong><em id="EN-US_TASK_0000001153170840__i18882115474617"> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname195471919478">pw-template-name</span></i></em> } <sup id="EN-US_TASK_0000001153170840__sup28821754184610">*</sup><em id="EN-US_TASK_0000001153170840__i08821954154613"><i><span class="varname" id="EN-US_TASK_0000001153170840__varname15371246472">vc-id</span></i></em> [ [ <strong id="EN-US_TASK_0000001153170840__b13882354104618"><strong><span id="EN-US_TASK_0000001153170840__cmdparmname1642512754718">control-word</span></strong></strong> | <strong id="EN-US_TASK_0000001153170840__b1288215424620"><strong><span id="EN-US_TASK_0000001153170840__cmdparmname17669930184711">no-control-word</span></strong></strong><span></span> ] | [ <strong id="EN-US_TASK_0000001153170840__b288265416463"><strong><span id="EN-US_TASK_0000001153170840__cmdparmname104719334472">raw</span></strong></strong> | <strong id="EN-US_TASK_0000001153170840__b12882754144611"><strong><span id="EN-US_TASK_0000001153170840__cmdparmname129273355479">tagged</span></strong></strong> ] | <strong id="EN-US_TASK_0000001153170840__b13882154124616"><strong><span id="EN-US_TASK_0000001153170840__cmdparmname176123910479">tunnel-policy</span></strong></strong><em id="EN-US_TASK_0000001153170840__i68828546469"> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname1132074920473">policy-name</span></i></em> [ <strong id="EN-US_TASK_0000001153170840__b98830541460"><strong><span id="EN-US_TASK_0000001153170840__cmdparmname1022155413472">endpoint</span></strong></strong><em id="EN-US_TASK_0000001153170840__i11883205454615"> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname68391201482">endpoint-address</span></i></em><strong id="EN-US_TASK_0000001153170840__b5883185410463"> <strong><span id="EN-US_TASK_0000001153170840__cmdparmname5200151024812">color</span></strong></strong><em id="EN-US_TASK_0000001153170840__i38831454104616"> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname1323111218489">color-value</span></i></em> ] | <strong id="EN-US_TASK_0000001153170840__b08831854154617"><strong><span id="EN-US_TASK_0000001153170840__cmdparmname176732417481">ignore-standby-state</span></strong></strong> ] <sup id="EN-US_TASK_0000001153170840__sup108831954164610">*</sup></span><p><p id="EN-US_TASK_0000001153170840__p145991028101417">An LDP VPWS connection is created.</p>
</p><p><p id="EN-US_TASK_0000001153170840__p6400202510518">If the AC interface on the peer PE is an Ethernet sub-interface, configure <strong id="EN-US_TASK_0000001153170840__b1565611511411">tagged</strong> to change the local VC type to VLAN, or configure <strong id="EN-US_TASK_0000001153170840__b1371432517149">raw</strong> on the Ethernet sub-interface of the peer end to change the peer VC type to Ethernet. The VC types for PEs at both ends of the VPWS connection must be consistent.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep7284955192717"><span id="EN-US_TASK_0000001153170840__cmd16284175514271">(Optional) Run <a href="cmdqueryname=mpls+l2vc+track+l2ve-service-state"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname826717318453">mpls l2vc track l2ve-service-state</span></b></a></span><p><p id="EN-US_TASK_0000001153170840__p122681843171413">Association between the L2VE interface service status and L3VE interface PW status is enabled.</p>
</p><p><p id="EN-US_TASK_0000001153170840__p77115549430">After this command is run on an L3VE interface, the system adjusts the active/standby status of PWs on the L3VE interface based on the active/standby service status on the L2VE interface. When the L2VE interface service is in the standby state, the PW status on the L3VE interface is changed to standby. When the L2VE interface service is in the active state, the PW status on the L3VE interface is changed to active.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep1265877775214054"><span id="EN-US_TASK_0000001153170840__cmd487273596214054">Configure a routing protocol for route exchange with LDP VPWS-enabled devices.</span><p><p id="EN-US_TASK_0000001153170840__p189437115214054">For configuration details, see <em id="EN-US_TASK_0000001153170840__i6691160101811"><span class="keyword" id="EN-US_TASK_0000001153170840__keyword213293702214054">NE40E</span> Configuration Guide - IP Routing</em>.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__step_010"><span id="EN-US_TASK_0000001153170840__cmd798766148214054">(Optional) Run <a href="cmdqueryname=mpls+l2vpn+l3ve+delay-up"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname754962848214054">mpls l2vpn l3ve delay-up</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname202244417810">time</span></i></span><p><p id="EN-US_TASK_0000001153170840__p314719103150">The time to wait before the L3VE interface can go up after the L2VPN service recovers is configured.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep1787786561214054"><span id="EN-US_TASK_0000001153170840__cmd1885025550214054">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname945656073214054">commit</span></b></a></span><p><p id="EN-US_TASK_0000001153170840__p16577182711518">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0000001153170840__step623408508214054"><span id="EN-US_TASK_0000001153170840__cmd54080243214054">Network-side user access to local CCC</span><ol id="EN-US_TASK_0000001153170840__substeps937163346214054"><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep1420965883214054"><span id="EN-US_TASK_0000001153170840__cmd7957294214054">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname1830439658214054">system-view</span></b></a></span><p><p id="EN-US_TASK_0000001153170840__p8576205431516">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep1330609634214054"><span id="EN-US_TASK_0000001153170840__cmd1808902427214054">Run <a href="cmdqueryname=interface+virtual-ethernet"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname460388795214054">interface virtual-ethernet</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname1677094754214054">interface-number</span></i> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname1284052616126">interface-number</span></i></span><p><p id="EN-US_TASK_0000001153170840__p1960619211619">The L3VE sub-interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep365554822214054"><span id="EN-US_TASK_0000001153170840__cmd2076662934214054">Run <a href="cmdqueryname=vlan-type"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname122960663214054">vlan-type</span></b></a> <strong><span id="EN-US_TASK_0000001153170840__cmdparmname823409442214054">dot1q</span></strong> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname1582435026214054">vlan-id</span></i></span><p><p id="EN-US_TASK_0000001153170840__p12516012151614">A VLAN ID is configured for the VE sub-interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep12275125014"><span id="EN-US_TASK_0000001153170840__cmd12211595018">(Optional) Run <a href="cmdqueryname=mpls+l2vpn+l3ve+delay-up"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname1321153509">mpls l2vpn l3ve delay-up</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname1062314052417">time</span></i></span><p><p id="EN-US_TASK_0000001153170840__p1241017219166">The time to wait before the L3VE interface can go up after the L2VPN service recovers is configured.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep1515165954214054"><span id="EN-US_TASK_0000001153170840__cmd533102752214054">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname1827755316214054">quit</span></b></a></span><p><p id="EN-US_TASK_0000001153170840__p5657123851610">Return to the system view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep1733418176214054"><span id="EN-US_TASK_0000001153170840__cmd3986132655620">Run <a href="cmdqueryname=ccc+interface+in-label+out-label"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname1616575114395">ccc</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname13165115119399">ccc-connection-name</span></i> <strong><span id="EN-US_TASK_0000001153170840__cmdparmname161651651143919">interface</span></strong> { <i><span class="varname" id="EN-US_TASK_0000001153170840__varname15165145114399">interface-name</span></i> | <i><span class="varname" id="EN-US_TASK_0000001153170840__varname616535153918">acIfType</span></i> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname17165051163918">acIfNum</span></i> } [ <i><span class="varname" id="EN-US_TASK_0000001153170840__varname161652514396">raw</span></i> ] <strong><span id="EN-US_TASK_0000001153170840__cmdparmname616510513392">in-label</span></strong> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname11651251153914">in-label-value</span></i> <strong><span id="EN-US_TASK_0000001153170840__cmdparmname12165451123913">out-label</span></strong> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname1416525113910">out-label-value</span></i> { <strong><span id="EN-US_TASK_0000001153170840__cmdparmname816525115395">nexthop</span></strong> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname81651951183911">nexthop-address</span></i> | <strong><span id="EN-US_TASK_0000001153170840__cmdparmname116525113917">out-interface</span></strong> { <i><span class="varname" id="EN-US_TASK_0000001153170840__varname816514512391">out-interface-name</span></i> | <i><span class="varname" id="EN-US_TASK_0000001153170840__varname201651451103919">outAcIfType</span></i> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname61659519394">outAcIfNum</span></i> } } [ <strong><span id="EN-US_TASK_0000001153170840__cmdparmname01658513394">control-word</span></strong> | <strong><span id="EN-US_TASK_0000001153170840__cmdparmname181651651163916">no-control-word</span></strong> ]</span><p><p id="EN-US_TASK_0000001153170840__p6650321175617">A local CCC is configured.</p>
</p><p><p id="EN-US_TASK_0000001153170840__p1641956661214054">In a local CCC accessing L3VPN scenario, <strong><span id="EN-US_TASK_0000001153170840__cmdparmname1200737477214054">interface</span></strong> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname387054505214054">interface-type1</span></i> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname2056353244214054">interface-number1</span></i> refers to the interface connecting the PE to the CE, and the outbound interface is an L3VE sub-interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep6892665214054"><span id="EN-US_TASK_0000001153170840__cmd2028387364214054">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname769029847214054">commit</span></b></a></span><p><p id="EN-US_TASK_0000001153170840__p3110328175">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0000001153170840__step11949534103216"><span id="EN-US_TASK_0000001153170840__cmd1094913348321">Network-side user access to LDP VPLS</span><ol id="EN-US_TASK_0000001153170840__substeps4637155743210"><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep112454413311"><span id="EN-US_TASK_0000001153170840__cmd2245847335">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname1624517403313">system-view</span></b></a></span><p><p id="EN-US_TASK_0000001153170840__p64796261174">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep16245164173318"><span id="EN-US_TASK_0000001153170840__cmd1824516483311">Run <a href="cmdqueryname=interface+virtual-ethernet"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname52452410339">interface virtual-ethernet</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname1424510493310">interface-number interface-number</span></i></span><p><p id="EN-US_TASK_0000001153170840__p21061435131711">The L3VE sub-interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep19246741337"><span id="EN-US_TASK_0000001153170840__cmd1624614433310">Run <a href="cmdqueryname=vlan-type"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname4246204113310">vlan-type</span></b></a> <strong><span id="EN-US_TASK_0000001153170840__cmdparmname02462473318">dot1q</span></strong> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname13246174163315">vlan-id</span></i></span><p><p id="EN-US_TASK_0000001153170840__p18623184391710">A VLAN ID is configured for the VE sub-interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep877892335214054"><span id="EN-US_TASK_0000001153170840__cmd1523819455214054">Run <a href="cmdqueryname=l2+binding"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname1374872815214054">l2 binding</span></b></a> <strong><span id="EN-US_TASK_0000001153170840__cmdparmname762930743214054">vsi</span></strong> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname1883366976214054">vsi-name</span></i></span><p><p id="EN-US_TASK_0000001153170840__p189931050101718">The L3VE interface is bound to a VSI.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep1624614173310"><span id="EN-US_TASK_0000001153170840__cmd1224615416330">Configure a routing protocol for route exchange with devices that access LDP VPLS.</span><p><p id="EN-US_TASK_0000001153170840__p2024613433314">For configuration details, see <em id="EN-US_TASK_0000001153170840__i958064215273"><span class="keyword" id="EN-US_TASK_0000001153170840__keyword16246104193320">NE40E</span> Configuration Guide - IP Routing</em>.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep32461248332"><span id="EN-US_TASK_0000001153170840__cmd524617412334">(Optional) Run <a href="cmdqueryname=mpls+l2vpn+l3ve+delay-up"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname1246541331">mpls l2vpn l3ve delay-up</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001153170840__varname13923105214276">time</span></i></span><p><p id="EN-US_TASK_0000001153170840__p4801059171715">The time to wait before the L3VE interface can go up after the L2VPN service recovers is configured.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001153170840__substep11246164163317"><span id="EN-US_TASK_0000001153170840__cmd2024612463317">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001153170840__cmdname1224615419330">commit</span></b></a></span><p><p id="EN-US_TASK_0000001153170840__p17556127101813">The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l2_cfg_003.html">Configuring VPWS Accessing L2VPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l2_cfg_5027.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l2_cfg_5007.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>