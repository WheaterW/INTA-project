
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Traffic Behaviors on a Route Receiver">
<meta name="abstract" content="You can configure different traffic behaviors for different traffic classifiers on a BGP receiver to implement differentiated services.">
<meta name="description" content="You can configure different traffic behaviors for different traffic classifiers on a BGP receiver to implement differentiated services.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_2029.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_2031.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_2033.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,m00390128">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="QPPB">
<meta name="featuretype" content="QOS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="QPPB">
<meta name="featuretype" content="QOS">
<meta name="featurename" content="QPPB">
<meta name="featuretype" content="QOS">
<meta name="featurename" content="QPPB">
<meta name="featuretype" content="QOS">
<meta name="OWNER" content="m00390128">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="m00915594">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172371431">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Traffic Behaviors on a Route Receiver</title>
</head>
<body><a name="EN-US_TASK_0172371431"></a><a name="EN-US_TASK_0172371431"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Traffic Behaviors on a Route Receiver</h1>
<div class="taskbody" id="taskbody777632528214058"><p id="shortdesc1155919215214058">You can configure different traffic behaviors for different traffic classifiers on a BGP receiver to implement differentiated services.</p>
<div class="context"><a name="EN-US_TASK_0172371431__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0172371431__context1548977358214058"><p id="EN-US_TASK_0172371431__p1865686972214058">Perform the following operations on the BGP route receiver:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172371431__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172371431__steps1273749721214058"><li id="EN-US_TASK_0172371431__step1605418615214353"><span id="EN-US_TASK_0172371431__cmd1286121397214353">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname1207124697214353">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0172371431__p1131946679214353">The system view is displayed.</p>
</p></li><li id="EN-US_TASK_0172371431__step1403724811214353"><span id="EN-US_TASK_0172371431__cmd147552535214353">Run <span><a href="cmdqueryname=traffic+behavior"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname1609257495214353">traffic behavior</span></b></a> <i><span class="varname" id="EN-US_TASK_0172371431__varname9120519214353">behavior-name</span></i></span></span><p><p id="EN-US_TASK_0172371431__p520894333214353">A traffic behavior is configured and the traffic behavior view is displayed.</p>
</p></li><li id="EN-US_TASK_0172371431__step378130674214058"><span id="EN-US_TASK_0172371431__cmd838126445214058">Run one of the following commands as needed:</span><p><ul id="EN-US_TASK_0172371431__ul1219301622214058"><li id="EN-US_TASK_0172371431__li938997892214058"><p id="EN-US_TASK_0172371431__p2027732688214058"><a name="EN-US_TASK_0172371431__li938997892214058"></a><a name="li938997892214058"></a>To configure a traffic policing action, run the <a href="cmdqueryname=car"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname1557176928214058">car</span></b></a> { <strong><span id="EN-US_TASK_0172371431__cmdparmname850644166214058">cir</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname265762545214058">cir-value</span></i> [ <strong><span id="EN-US_TASK_0172371431__cmdparmname949396114214058">pir</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname1309283190214058">pir-value</span></i> ] } [ <strong><span id="EN-US_TASK_0172371431__cmdparmname1341084008214058">cbs</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname2051805773214058">cbs-value</span></i> <span>[ </span><strong><span id="EN-US_TASK_0172371431__cmdparmname832258119214058">pbs</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname335925079214058">pbs-value</span></i> ]<span> ]</span><span> [ <strong><span id="EN-US_TASK_0172371431__cmdparmname898455474214058">adjust</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname1953482763214058">adjust-value</span></i> ]</span> [ <strong><span id="EN-US_TASK_0172371431__cmdparmname2061872532214058">green</span></strong> { <strong><span id="EN-US_TASK_0172371431__cmdparmname1861758710214058">discard</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname1973450347214058">pass</span></strong> [ <span><strong><span id="EN-US_TASK_0172371431__cmdparmname2138736459214058">remark dscp</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname414377310214058">dscp-value</span></i> | </span><strong><span id="EN-US_TASK_0172371431__cmdparmname1788555730214058">service-class</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname1353822774214058">class</span></i> <strong><span id="EN-US_TASK_0172371431__cmdparmname737110131214058">color</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname59008877214058">color</span></i> ] } | <strong><span id="EN-US_TASK_0172371431__cmdparmname1112293634214058">yellow</span></strong> { <strong><span id="EN-US_TASK_0172371431__cmdparmname1490470399214058">discard</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname125745325214058">pass</span></strong> [ <span><strong><span id="EN-US_TASK_0172371431__cmdparmname1932750327214058">remark dscp</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname1192692720214058">dscp-value</span></i> | </span><strong><span id="EN-US_TASK_0172371431__cmdparmname2094377558214058">service-class</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname1096584371214058">class</span></i> <strong><span id="EN-US_TASK_0172371431__cmdparmname2069085141214058">color</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname1319114925214058">color</span></i> ] } | <strong><span id="EN-US_TASK_0172371431__cmdparmname1969032246214058">red</span></strong> { <strong><span id="EN-US_TASK_0172371431__cmdparmname1398527090214058">discard</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname940452306214058">pass</span></strong> [ <span><strong><span id="EN-US_TASK_0172371431__cmdparmname460875970214058">remark dscp</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname1726144065214058">dscp-value</span></i> | </span><strong><span id="EN-US_TASK_0172371431__cmdparmname836164371214058">service-class</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname2056134627214058">class</span></i> <strong><span id="EN-US_TASK_0172371431__cmdparmname667222022214058">color</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname1951915636214058">color</span></i> ] } ] <sup id="EN-US_TASK_0172371431__sup2050510627214058">*</sup> <span>[ <strong><span id="EN-US_TASK_0172371431__cmdparmname66754456214058">summary</span></strong> ]</span> [ <strong><span id="EN-US_TASK_0172371431__cmdparmname109259868214058">color-aware</span></strong> ] <span>[ <strong><span id="EN-US_TASK_0172371431__cmdparmname73826774214058">limit-type pps</span></strong> ] </span> command.</p>
</li><li id="EN-US_TASK_0172371431__li925635378214058"><p id="EN-US_TASK_0172371431__p782259178214058"><a name="EN-US_TASK_0172371431__li925635378214058"></a><a name="li925635378214058"></a>To re-mark the DSCP value of an IP packet, run the <a href="cmdqueryname=remark"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname818039510214353">remark</span></b></a> [ <strong><span id="EN-US_TASK_0172371431__cmdparmname1120593701214353">ipv6</span></strong> ] <strong><span id="EN-US_TASK_0172371431__cmdparmname1060491265214353">dscp</span></strong> { <i><span class="varname" id="EN-US_TASK_0172371431__varname2094533924214353">dscp-value</span></i> | <strong><span id="EN-US_TASK_0172371431__cmdparmname1057522392214353">af11</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname1579736707214353">af12</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname1022322050214353">af13</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname2098814943214353">af21</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname500933412214353">af22</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname370478132214353">af23</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname635814180214353">af31</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname719559174214353">af32</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname1092343275214353">af33</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname545359451214353">af41</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname1470943482214353">af42</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname1390053405214353">af43</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname2047256315214353">cs1</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname1098204746214353">cs2</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname2013147008214353">cs3</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname1300960913214353">cs4</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname1783505766214353">cs5</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname2051125062214353">cs6</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname719015115214353">cs7</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname1358656786214353">default</span></strong> | <strong><span id="EN-US_TASK_0172371431__cmdparmname1155342572214353">ef</span></strong> } command.</p>
</li><li id="EN-US_TASK_0172371431__li1997576623214058"><p id="EN-US_TASK_0172371431__p1658449210214058"><a name="EN-US_TASK_0172371431__li1997576623214058"></a><a name="li1997576623214058"></a>To re-configure the precedence of IP packets, run the <a href="cmdqueryname=remark+ip-precedence"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname1924139559214353">remark ip-precedence</span></b></a> <i><span class="varname" id="EN-US_TASK_0172371431__varname915695930214353">ip-precedence</span></i>.</p>
</li><li id="EN-US_TASK_0172371431__li1321924041214058"><p id="EN-US_TASK_0172371431__p1859028872214058"><a name="EN-US_TASK_0172371431__li1321924041214058"></a><a name="li1321924041214058"></a>To allow all the packets that meet the matching rule to pass, run the <a href="cmdqueryname=permit"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname1279936659214353">permit</span></b></a> command.</p>
</li><li id="EN-US_TASK_0172371431__li372690681214058"><p id="EN-US_TASK_0172371431__p1749960915214058"><a name="EN-US_TASK_0172371431__li372690681214058"></a><a name="li372690681214058"></a>To prevent all the packets that meet the matching rule from passing, run the <a href="cmdqueryname=deny"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname1935970680214353">deny</span></b></a> command.</p>
</li><li id="EN-US_TASK_0172371431__li116738234214058"><p id="EN-US_TASK_0172371431__p1366929127214058"><a name="EN-US_TASK_0172371431__li116738234214058"></a><a name="li116738234214058"></a>To color packets with a certain CoS, run the <a href="cmdqueryname=service-class"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname1381041861214353">service-class</span></b></a> <i><span class="varname" id="EN-US_TASK_0172371431__varname742456593214353">service-class</span></i> <strong><span id="EN-US_TASK_0172371431__cmdparmname364195298214353">color</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname1046267219214353">color</span></i> command.</p>
</li><li id="EN-US_TASK_0172371431__li256421247214058"><p id="EN-US_TASK_0172371431__p1819702447214058"><a name="EN-US_TASK_0172371431__li256421247214058"></a><a name="li256421247214058"></a>To configure user-queue scheduling parameters to implement HQoS scheduling for user services, run the <a href="cmdqueryname=user-queue"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname2055329105214058">user-queue</span></b></a> <strong><span id="EN-US_TASK_0172371431__cmdparmname1289250995214058">cir</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname1003394924214058">cir-value</span></i> [ [ <strong><span id="EN-US_TASK_0172371431__cmdparmname1799335484214058">pir</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname267954536214058">pir-value</span></i> ] | [ <strong><span id="EN-US_TASK_0172371431__cmdparmname1090708297214058">flow-queue</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname376842563214058">flow-queue-name</span></i> ] <span>| [ <strong><span id="EN-US_TASK_0172371431__cmdparmname499111937214058">flow-mapping</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname2079348556214058">mapping-name</span></i> ] </span>| [ <strong><span id="EN-US_TASK_0172371431__cmdparmname1314597343214058">user-group-queue</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname1963336083214058">group-name</span></i> ] | [ <strong><span id="EN-US_TASK_0172371431__cmdparmname1229111188214058">service-template</span></strong> <i><span class="varname" id="EN-US_TASK_0172371431__varname1425018118588">service-template-name</span></i> ] ]* command.</p>
</li><li id="EN-US_TASK_0172371431__li221511556214058"><p id="EN-US_TASK_0172371431__p1355561441214058"><a name="EN-US_TASK_0172371431__li221511556214058"></a><a name="li221511556214058"></a>To redirect packets to a specified VPN group, run the <a href="cmdqueryname=redirect+vpn-group"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname94618580214353">redirect vpn-group</span></b></a> <i><span class="varname" id="EN-US_TASK_0172371431__varname1345476946214353">vpn-group-name</span></i> command.</p>
</li><li id="EN-US_TASK_0172371431__li1636379985214058"><p id="EN-US_TASK_0172371431__p1962824413214058"><a name="EN-US_TASK_0172371431__li1636379985214058"></a><a name="li1636379985214058"></a>To configure the traffic behavior redirecting to the traffic policy, run the command <a href="cmdqueryname=traffic-policy"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname1181135062214353">traffic-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0172371431__varname168277993214353">policy-name</span></i>.</p>
<div class="note" id="EN-US_TASK_0172371431__note844968981214058"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172371431__p10413195912596">You can run the <a href="cmdqueryname=hierarchical-car+enable"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname286289440214058">hierarchical-car enable</span></b></a> command in the traffic behavior view to enable hierarchical CAR in a cascaded traffic policy scenario.</p>
</div></div>
<div class="p" id="EN-US_TASK_0172371431__p1185916992214058"><ul id="EN-US_TASK_0172371431__ul911156737214058"><li id="EN-US_TASK_0172371431__li1796852486214058">Cascading a traffic policy over another will cause the device forwarding performance to deteriorate.</li><li id="EN-US_TASK_0172371431__li1333536731214058">When the traffic on an interface matches the cascaded traffic policy:<ul id="EN-US_TASK_0172371431__ul7319635214058"><li id="EN-US_TASK_0172371431__li1284013339214058">The forwarding behavior and cascading a traffic policy are mutually exclusive.</li><li id="EN-US_TASK_0172371431__li1541496883214058">If the traffic behaviors in the two traffic policies are different, they can be individually implemented.</li><li id="EN-US_TASK_0172371431__li2022617003214058">If the traffic behaviors in the two traffic policies are the same, the specific behavior configuration in the cascaded traffic policy takes effect.</li></ul>
</li><li id="EN-US_TASK_0172371431__li550961889214058">On an interface, only one traffic policy can be applied to outgoing or incoming packets. If the traffic policy cascades over another traffic policy and is applied to an interface, both traffic policies take effect on the direction-specific interface.</li><li id="EN-US_TASK_0172371431__li1406664352214058"><p id="EN-US_TASK_0172371431__p160294241214058"><a name="EN-US_TASK_0172371431__li1406664352214058"></a><a name="li1406664352214058"></a>The parameters specified for a traffic policy to be applied to an interface, such as <strong id="EN-US_TASK_0172371431__b11814681813">inbound</strong>, <strong id="EN-US_TASK_0172371431__b48146813113">outbound</strong>, <strong id="EN-US_TASK_0172371431__b1581478910">link-layer</strong><span>, all-layer</span>, and <strong id="EN-US_TASK_0172371431__b58151483110">mpls-layer</strong>, are inherited by a cascaded traffic policy.</p>
</li><li id="EN-US_TASK_0172371431__li693480333214058"><p id="EN-US_TASK_0172371431__p930204462214058"><a name="EN-US_TASK_0172371431__li693480333214058"></a><a name="li693480333214058"></a>When the traffic behaviors for two-level ACLs are <strong id="EN-US_TASK_0172371431__b953065132214353">service-class</strong>, level-1 <strong id="EN-US_TASK_0172371431__b295733994214353">service-class</strong> preferentially takes effect. However, if level 1 <strong id="EN-US_TASK_0172371431__b1761782749214353">service-class</strong> carries <strong id="EN-US_TASK_0172371431__b1494211290214353">no-remark</strong>, level-2 <strong id="EN-US_TASK_0172371431__b446475229214353">service-class</strong> preferentially takes effect.</p>
</li></ul>
</div>
</li><li id="EN-US_TASK_0172371431__li455440843214058"><p id="EN-US_TASK_0172371431__p962530393214058"><a name="EN-US_TASK_0172371431__li455440843214058"></a><a name="li455440843214058"></a>To increase the priority of the traffic action, run the <a href="cmdqueryname=increase-priority"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname1983851549214353">increase-priority</span></b></a> command.</p>
<p id="EN-US_TASK_0172371431__p867281764214058">If a traffic action is configured for both BGP Flow Specification and QPPB on a device, you can run this command to allow the traffic action configured for QPPB to preferentially take effect.</p>
</li></ul>
</p></li><li id="EN-US_TASK_0172371431__step650627407214353"><span id="EN-US_TASK_0172371431__cmd108098925214353">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172371431__cmdname115022944214353">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172371431__p944513816214353">The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_2029.html">Configuring Source-Based QPPB
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_2031.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_2033.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>