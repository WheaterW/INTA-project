
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Overview of Class-based QoS">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0037.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/spec/Class-based_QoS_limitation.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,m00390128">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Class-based QoS">
<meta name="featuretype" content="QOS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Class-based QoS">
<meta name="featuretype" content="QOS">
<meta name="featurename" content="Class-based QoS">
<meta name="featuretype" content="QOS">
<meta name="OWNER" content="m00390128">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="m00390128">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0172371212">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Overview of Class-based QoS</title>
</head>
<body><a name="EN-US_CONCEPT_0172371212"></a><a name="EN-US_CONCEPT_0172371212"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Overview of Class-based QoS</h1>
<div><div class="section"><h4 class="sectiontitle">Definition</h4><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p10411115121518">Traffic classification technology allows a device to classify packets that enter a DiffServ domain in order for the device to identify the packet service type and to apply any appropriate action upon the packet.</p>
<p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p203576905214256">A traffic classifier is configured to provide differentiated services and must be associated with a certain traffic control or resource allocation behavior, which is called a traffic behavior.</p>
</div>
<div class="section"><h4 class="sectiontitle">Traffic Classification Techniques</h4><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p140860292214256">Packets can be classified based on QoS priorities (for details, see section <a href="feature_0021577555.html">QoS Priority Fields</a>), or packet information such as the source IP address, destination IP address, MAC address, IP protocol, and port number, or specifications in an SLA.</p>
<p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p392867963214013">After packets are classified at the DiffServ domain edge, internal nodes provide differentiated services for classified packets. A downstream node can accept and continue the upstream classification or classify packets based on its own criteria.</p>
<p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p1901234433214013">Therefore, traffic classification can be classified as behavior aggregate classification or multi-field classification. For details, see section <a href="feature_0021577556.html">BA Classification</a> and <a href="feature_0021577559.html">MF Classification</a>.</p>
<p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p126366349214013"></p>
</div>
<div class="section"><h4 class="sectiontitle">BA Classification</h4><div class="p">Behavior Aggregate (BA) classification allows the
device to classify packets based on related values as follows:<ul id="EN-US_CONCEPT_0172371212__en-us_concept_0172356826_ul342719778214256"><li id="EN-US_CONCEPT_0172371212__en-us_concept_0172356826_li1183342875214256">DSCP value of IPv4 packets</li><li id="EN-US_CONCEPT_0172371212__en-us_concept_0172356826_li712045297214256">TC value of IPv6 packets</li><li id="EN-US_CONCEPT_0172371212__en-us_concept_0172356826_li122713929214256">EXP value of MPLS packets</li><li id="EN-US_CONCEPT_0172371212__en-us_concept_0172356826_li1846542658214256">802.1p value of VLAN packets</li></ul>
</div>
<p>It is used to simply identify the traffic that
has the specific priority or class of service (CoS) for mapping between
external and internal priorities.</p>
<p>BA classification confirms that the priority of
incoming packets on a device is trusted and mapped to the service-class
and color based on a priority mapping table. The service-class and
color of outgoing packets are then mapped back to the priority. For
details about priority mapping, see section <a href="feature_0021577558.html">QoS Priority Mapping</a>.</p>
<p>To configure BA classification on a <span class="keyword" id="EN-US_CONCEPT_0172371212__en-us_concept_0172356826_keyword2046635354214256">NE40E</span>, configure a DiffServ (DS) domain, define a priority mapping
table for the DS domain, and bind the DS domain to a trusted interface.</p>
<p>BA classification applies to the DS internal nodes.</p>
</div>
<div class="section"><h4 class="sectiontitle">Multi-Field Classification</h4><p>As networks rapidly develop, services on the Internet become increasingly diversified. Various services share limited network resources, especially when multiple services use port number 80. Because of this increasing demand, network devices are required to possess a high degree of sensitivity for services, including an in-depth parsing of packets and a comprehensive understanding of any packet field at any layer. This level of sensitivity rises far beyond what behavior aggregate (BA) classification can offer. Multi-field (MF) classification can be deployed to help address this sensitivity deficit.</p>
<p>MF classification allows a device to elaborately classify packets based on certain conditions, such as 5-tuple (source IP address, source port number, protocol number, destination address, and destination port number). To simplify configurations and facilitate batch modification, MF classification commands are designed based on a template. For details, see section <a href="feature_0021577561.html">Traffic Policy Based on MF Classification</a>.</p>
</div>
<div class="section"><h4 class="sectiontitle">Traffic Behaviors Techniques</h4><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p839947024214013">The following table describes traffic behaviors that can be implemented individually or jointly for classified packets on a <span class="keyword" id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_keyword1017887809214256">NE40E</span>.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_table786641781214013" frame="border" border="1" rules="all"><thead align="left"><tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row1104260565214013"><th align="left" class="cellrowborder" colspan="2" valign="top" id="mcps1.3.5.3.1.4.1.1" liSelected="liSelected"><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_entry545080861214013p0">Traffic Behavior</p>
</th>
<th align="left" class="cellrowborder" valign="top" id="mcps1.3.5.3.1.4.1.2" liSelected="liSelected"><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_entry1284734500214013p0">Description</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row1052287873214013"><td class="cellrowborder" rowspan="2" valign="top" width="11.63%" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_entry653472884214013p0">Marking/Re- marking</p>
</td>
<td class="cellrowborder" valign="top" width="10.63%" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_entry130003449214013p0">External marking</p>
</td>
<td class="cellrowborder" valign="top" width="77.74%" headers="mcps1.3.5.3.1.4.1.2 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_entry1361888148214256p0">Sets or modifies the priority of packets to relay QoS information to the next device.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row783325842214013"><td class="cellrowborder" valign="top" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_entry1400295302214013p0">Internal marking</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.3.1.4.1.2 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p2134783988214013">Sets the class of service (CoS) and drop precedence of packets for internal processing on a device so that packets can be placed directly in specific queues.</p>
<p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p2029302351214013">Setting the drop precedence of packets is also called coloring packets. When traffic congestion occurs, packets in the same queue are provided with differentiated buffer services based on colors.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row2144725828214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p614071694214013">Traffic policing</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.3.1.4.1.2 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p995478891214013">Restricts the traffic rate to a specific value. When traffic exceeds the specified rate, excess traffic is dropped.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row1469220250214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p808994170214013">Congestion management</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.3.1.4.1.2 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p1708970406214013">Places packets in queues for buffering. When traffic congestion occurs, the device determines the forwarding order based on a specific scheduling algorithm and performs traffic shaping for outgoing traffic to meet users' requirements on the network performance.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row354701354214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p1873002032214013">Congestion avoidance</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.3.1.4.1.2 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p149655093214013">Monitors network resources. When network congestion intensifies, the device drops packets to prevent overloading the network.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row316680978214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p890622090214013">Packet filtering</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.3.1.4.1.2 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p155559687214013">Functions as the basic traffic control method. The device determines whether to drop or forward packets based on traffic classification results.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row2071291956214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p1660779213214013">Policy-based routing (also called redirection)</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.3.1.4.1.2 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p32267578214256">Determines whether packets will be dropped or forwarded based on the following policies:</p>
<ul id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_ul320160281214013"><li id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_li459635744214013">Drop PBR states that a specific IP address must be matched against the forwarding table. If an outbound interface is matched, packets are forwarded; otherwise, packets are dropped.</li><li id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_li939467854214013">Forward PBR states that a specific IP address must be matched against the forwarding table. If an outbound interface is matched, packets are forwarded; otherwise, packets are forwarded based on the destination IP addresses.</li></ul>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row457669849214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p1530290846214013">Load balancing</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.3.1.4.1.2 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p857161262214013">Load balancing is configured to be session-by-session or packet-by-packet.</p>
<p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p1042571126214013">Load balancing applies only to packets that have multiple forwarding paths available. There are two possible scenarios:</p>
<ul id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_ul1924081521214013"><li id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_li1029673460214013">Multiple forwarding entries exist.</li><li id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_li1071539918214013">Only one forwarding entry exists, but a trunk interface that has multiple member interfaces functions as the outbound interface in the forwarding entry.</li></ul>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row1910664173214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p99152983214013">Packet fragmentation</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.3.1.4.1.2 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p1575294198214013">Modifies the Don't Fragment (DF) field of packets.</p>
<div class="note" id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_note1030111344214013"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p976318500167">Some packets sent from user terminals are 1500 bytes long. PCs generally set the DF value to 1 in the packets. When packets traverse network devices at various layers, such as the access, aggregation, or core network layer, additional information is added so that the packet length will exceed the maximum transmission unit (MTU) of 1500 bytes. If such a packet carries the DF value of 1 in the header, the packet will be dropped. A DF value of 1 specifies that a datagram not be fragmented in transit. To prevent such packet loss and to keep users unaware of any change, the device involved is allowed to set the DF field in an IP header.</p>
</div></div>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row1764032511214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p1796731912214013">URPF (Unicast Reverse Path Forwarding)</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.3.1.4.1.2 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p1009040880214013">Prevents the source address spoofing attack. URPF obtains the source IP address and the inbound interface of a packet and checks them against the forwarding table. If the source IP address is not found, URPF considers the source IP address as a pseudo address and drops the packet.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row1563697436214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p2027927540214013">Flow mirroring</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.3.1.4.1.2 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p1615328569214013">Allows a device to copy an original packet from a mirrored port and to send the copy to the observing port.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row583184735214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p1264653272214013">Flow sampling</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.3.1.4.1.2 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p86375646214013">Collects information about specific data flow, such as timestamps, source address, destination address, source port number, destination port number, ToS value, protocol number, packet length, and inbound interface information, to monitor specific users.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_row929588021214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.3.5.3.1.4.1.1 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p249856101214013">Modifying the TTL value</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.5.3.1.4.1.2 "><p id="EN-US_CONCEPT_0172371212__en-us_concept_0172356813_p1472161607214013">Modifies the Time To Live (TTL) value of IP packet headers.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0037.html">Class-based QoS Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/spec/Class-based_QoS_limitation.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>