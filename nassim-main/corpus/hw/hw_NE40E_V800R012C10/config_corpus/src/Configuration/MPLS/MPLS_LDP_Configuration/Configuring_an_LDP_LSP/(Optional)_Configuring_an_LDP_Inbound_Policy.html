
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring an LDP Inbound Policy">
<meta name="abstract" content="An LDP inbound policy can be configured to prevent the establishment of unwanted LSPs, reducing memory consumption.">
<meta name="description" content="An LDP inbound policy can be configured to prevent the establishment of unwanted LSPs, reducing memory consumption.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0036.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0047.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ldp-p2pvrp,w00800033,z00545680,w00556928,w00606909,z00809835,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="b00896120">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368459">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring an LDP Inbound Policy</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172368459"></a><a name="EN-US_TASK_0172368459"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring an LDP Inbound Policy</h1>
<div class="taskbody"><p>An LDP inbound policy can be configured to prevent the establishment of unwanted LSPs, reducing memory consumption.</p>
<div class="context"><a name="EN-US_TASK_0172368459__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Generally, an LSR receives Label Mapping messages from all LDP peers. This results in the establishment of numerous LSPs, wasting resources and leading to unstable device running status, especially on low-performance devices. To address these issues, an LDP inbound policy can be configured to limit Label Mapping messages to be received, thereby reducing the number of LDP LSPs to be established and memory resource consumption.</p>
<div class="p">An LDP inbound policy restricts the receiving of LDP Label Mapping messages based on the selected parameter:<ul><li><strong><span>none</span></strong>: filters out all FECs. If this parameter is set, the specified peer does not receive Label Mapping messages on any IGP route.</li><li><strong><span>host</span></strong>: allows only the FECs on host routes to pass. If this parameter is set, the specified peer receives Label Mapping messages on host routes.</li><li><strong><span>ip-prefix</span></strong>: allows only the FECs on routes in a specified IP prefix list. If this parameter is set, the specified peer receives Label Mapping messages on IGP routes in the specified IP prefix list.</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368459__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=mpls+ldp"><b><span class="cmdname">mpls ldp</span></b></a></span><p><p>The MPLS-LDP view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a></span><p><p>The MPLS-LDP-IPv4 view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=inbound+peer+peer-group+all+fec+none+host+ip-prefix"><b><span class="cmdname">inbound peer</span></b></a> { <i><span class="varname">peer-id</span></i> | <strong><span>peer-group</span></strong> <i><span class="varname">peer-group-name</span></i> | <strong><span>all</span></strong> } <strong><span>fec</span></strong> { <strong><span>none</span></strong> | <strong><span>host</span></strong> | <strong><span>ip-prefix</span></strong> <i><span class="varname">prefix-name</span></i> }</span><p><p>An inbound policy is applied to specified IGP routes to specified peers.</p>
</p><p><p>To apply a policy associated with the same FEC range to an LDP peer group or all LDP peers receiving Label Mapping messages, specify either <strong><span>peer-group</span></strong> <i><span class="varname">peer-group-name</span></i> or <strong><span>all</span></strong> in the command.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">If multiple inbound policies are configured for a specified peer, the earliest configuration takes effect. For example, the following configurations are performed in this sequence:<pre class="screen"><strong>inbound peer 2.2.2.2 fec host</strong></pre>
<pre class="screen"><strong>inbound peer peer-group group1 fec none</strong></pre>
As <strong>group1</strong> also contains an LDP peer with <i><span class="varname">peer-id</span></i> of 2.2.2.2, the following inbound policy takes effect:<pre class="screen"><strong>inbound peer 2.2.2.2 fec host</strong></pre>
</div>
<div class="p">If two inbound policies are configured one after the other and the <strong><span>peer</span></strong> parameter settings in the two commands are the same, the latter configuration overwrites the former. For example, the following configurations are performed in this sequence:<pre class="screen"><strong>inbound peer 2.2.2.2 fec host</strong></pre>
<pre class="screen"><strong>inbound peer 2.2.2.2 fec none</strong></pre>
The second configuration overwrites the first one. This means that the following inbound policy takes effect for the LDP peer with <i><span class="varname">peer-id</span></i> of 2.2.2.2:<pre class="screen"><strong>inbound peer 2.2.2.2 fec none</strong></pre>
</div>
<div class="p">If an inbound policy for all peers is configured and another inbound policy for a specified peer or peer group is configured, the former policy has a higher priority, and the latter policy does not take effect. For example:<pre class="screen"><strong>inbound peer all fec none</strong></pre>
<pre class="screen"><strong>inbound peer 2.2.2.2 fec host</strong></pre>
The following inbound policy takes effect:<pre class="screen"><strong>inbound peer all fec none</strong></pre>
</div>
<p>MPLS and MPLS LDP must be enabled globally before an inbound policy is configured.</p>
<p>To delete all inbound policies simultaneously, run the <a href="cmdqueryname=undo+inbound+peer+all"><b><span class="cmdname">undo inbound peer all</span></b></a> command.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0015.html">Configuring an LDP LSP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0036.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0047.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>