
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring TE Attributes for a Link">
<meta name="abstract" content="TE link attributes, including the link bandwidth, administrative group, affinity, and SRLG, can be configured for you to select links for CR-LSP establishment.">
<meta name="description" content="TE link attributes, including the link bandwidth, administrative group, affinity, and SRLG, can be configured for you to select links for CR-LSP establishment.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0007.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,te-p2pvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368102">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring TE Attributes for a Link</title>
</head>
<body><a name="EN-US_TASK_0172368102"></a><a name="EN-US_TASK_0172368102"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring TE Attributes for a Link</h1>
<div class="taskbody"><p>TE link attributes, including the link bandwidth, administrative group, affinity,<span> and SRLG</span>, can be configured for you to select links for CR-LSP establishment.</p>
<div class="context"><a name="EN-US_TASK_0172368102__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>TE link attributes are as follows:</p>
<ul><li><p>Link bandwidth</p>
<p>The link bandwidth attribute can be set to limit the CR-LSP bandwidth. </p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If no bandwidth is set for a link, the CR-LSP bandwidth may be higher than the maximum reservable link bandwidth. As a result, the CR-LSP cannot be established.</p>
</div></div>
</li><li><p>TE metric of the link</p>
<p>The IGP metric or TE metric of a link can be used for path calculation of a TE tunnel. In this manner, the path calculation of the TE tunnel is more independent of the IGP, and the path of the TE tunnel can be controlled more flexibly.</p>
</li><li><p>Administrative group and affinity</p>
<p>An affinity determines attributes for links to be used by an MPLS TE tunnel. The affinity property, together with the link administrative group attribute, is used to determine which links a tunnel uses.</p>
<div class="p">An affinity can be set using either a hexadecimal number or a name.<ul><li>Hexadecimal number: A 32-bit hexadecimal number is set for each affinity and link administrative group attribute, which causes plan and computation difficulties. This is the traditional configuration mode of the <span class="keyword">NE40E</span>.</li><li>Name: This mode is newly supported by the <span class="keyword">NE40E</span>. Each bit of the <span>32</span>-bit administrative group and affinity attribute is named, which simplifies configuration and maintenance. This mode is recommended.</li></ul>
</div>
</li><li><p>SRLG</p>
<p>A shared risk link group (SRLG) is a set of links which are likely to fail concurrently because they share a physical resource (for example, an optical fiber). In an SRLG, if one link fails, the other links in the SRLG also fail.</p>
<p>An SRLG enhances CR-LSP reliability on an MPLS TE network with CR-LSP hot standby or TE FRR enabled. Two or more links are at the same risk if they share physical resources. For example, links on an interface and its sub-interfaces are in an SRLG. Sub-interfaces share risks with their interface. These sub-interfaces will go down if the interface goes down. If the links of a primary tunnel and a backup or bypass tunnel are in the same SRLG, the links of the backup or bypass tunnel share risks with the links of the primary tunnel. The backup or bypass tunnel will go down if the primary tunnel goes down.</p>
</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172368102__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure link bandwidth.</span><p><p>The bandwidth value is set on outbound interfaces along links of a TE tunnel that requires sufficient bandwidth.</p>
</p><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span></span><p><p>The view of an MPLS TE-enabled interface is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+te+bandwidth+max-reservable-bandwidth"><b><span class="cmdname">mpls te bandwidth max-reservable-bandwidth</span></b></a> <em>max-bw-value</em></span><p><p>The maximum reservable link bandwidth is set.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+te+bandwidth"><b><span class="cmdname">mpls te bandwidth</span></b></a> <strong><span>bc0</span></strong> <i><span class="varname">bc0-bw-value</span></i></span><p><p>The BC bandwidth is set for the link.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>The maximum reservable bandwidth of a link cannot be higher than the actual bandwidth of the link. A maximum of 80% of the link bandwidth is recommended for the maximum reservable link bandwidth.</p>
</li><li><p>The BC0 bandwidth cannot be higher than the maximum reservable link bandwidth.</p>
</li></ul>
</div></div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Set the TE metric value of a link.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The view of an MPLS TE-enabled interface is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+te+metric"><b><span class="cmdname">mpls te metric</span></b></a> <i><span class="varname">metric-value</span></i></span><p><p>The TE metric of a link is set.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure an affinity and a link administrative group attribute<span> in hexadecimal format</span>.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>The modified administrative group takes effect only on LSPs that will be established, not on LSPs that have been established.</p>
</li><li><p>After the modified affinity is committed, the system will recalculate a path for the TE tunnel, and the established LSPs in this TE tunnel are affected.</p>
</li></ul>
</div></div>
</p><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span></span><p><p>The interface view of an MPLS TE link is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+te+link+administrative+group"><b><span class="cmdname">mpls te link administrative group</span></b></a> <i><span class="varname">group-value</span></i></span><p><p>An administrative group is configured for the link.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">tunnel-number</span></i></span><p><p>The view of the MPLS TE tunnel interface is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls+te+affinity+property"><b><span class="cmdname">mpls te affinity property</span></b></a> <i><span class="varname">properties</span></i> [ <strong><span>mask</span></strong> <i><span class="varname">mask-value</span></i> ] [ <strong><span>secondary</span></strong> | <strong><span>best-effort</span></strong> ]</span></span><p><p>An affinity is set for the MPLS TE tunnel.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Name hexadecimal bits of an affinity and a link administrative group attribute.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>The modified administrative group takes effect only on LSPs that will be established, not on LSPs that have been established.</p>
</li><li><p>After the modified affinity is committed, the system will recalculate a path for the TE tunnel, and the established LSPs in this TE tunnel are affected.</p>
</li></ul>
</div></div>
</p><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=path-constraint+affinity-mapping"><b><span class="cmdname">path-constraint affinity-mapping</span></b></a></span><p><p>An affinity name template is configured, and the affinity mapping view is displayed.</p>
</p><p><p>This template must be configured on each node involved in MPLS TE path computation, and the global mappings between the names and values of affinity bits must be the same on all the involved nodes.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=attribute"><b><span class="cmdname">attribute</span></b></a> <i><span class="varname">bit-name</span></i> <strong><span>bit-sequence</span></strong> <i><span class="varname">bit-number</span></i></span><p><p>A mapping between an affinity bit and name is configured.</p>
</p><p><p>There are 32 affinity bits in total. You can repeat this step to configure some or all affinity bits.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The interface view of an MPLS TE link is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+te+link+administrative+group+name"><b><span class="cmdname">mpls te link administrative group name</span></b></a> { <i><span class="varname">name-string</span></i> } &amp;&lt;1-32&gt;</span><p><p>Bit names are set for a link administrative group.</p>
</p><p><p>The <i><span class="varname">name-string</span></i> value must be in the range specified in the affinity name mapping template.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">tunnel-number</span></i></span></span><p><p>The view of the MPLS TE tunnel interface is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls+te+affinity"><b><span class="cmdname">mpls te affinity</span></b></a> { <strong><span>primary</span></strong> | <strong><span>secondary</span></strong> | <strong><span>best-effort</span></strong> } { <strong><span>include-all</span></strong> | <strong><span>include-any</span></strong> | <strong><span>exclude</span></strong> } <i><span class="varname">bit-name</span></i> &amp;&lt;1-32&gt;</span></span><p><p>An affinity is set for the MPLS TE tunnel.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure an SRLG.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>On the ingress of a hot-standby CR-LSP or a TE FRR tunnel, perform Steps 1 to 3. On the interface of each SRLG member, perform Step 5 and Step 6.</p>
</div></div>
</p><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls"><b><span class="cmdname">mpls</span></b></a></span></span><p><p>The MPLS view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls+te+srlg+path-calculation"><b><span class="cmdname">mpls te srlg path-calculation</span></b></a> [ <strong><span>preferred</span></strong> | <strong><span>strict</span></strong> ]</span></span><p><p>An SRLG path calculation mode is configured.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>If <strong><span>strict</span></strong> is configured, CSPF uses an SRLG as a constraint when calculating a path for a bypass or backup CR-LSP.</p>
</li><li><p>If <strong><span>preferred</span></strong> is configured, CSPF uses an SRLG as a constraint when calculating a path for a bypass or backup CR-LSP for the first time; if calculation fails, CSPF no longer uses the SRLG as a constraint.</p>
</li></ul>
</div></div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span></span><p><p>The view of the interface on which the MPLS TE tunnel is established is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls+te+srlg"><b><span class="cmdname">mpls te srlg</span></b></a> <i><span class="varname">srlg-number</span></i></span></span><p><p>The link on which the interface resides joins the SRLG.</p>
</p><p><p>On a network with hot standby or TE FRR, the SRLG attribute needs to be configured for the outbound interface of the ingress on a tunnel and other members of the SRLG. A link joins an SRLG after the SRLG attribute is configured on an outbound interface of the link.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To delete the SRLG attribute from all interfaces on a device, run the <a href="cmdqueryname=undo+mpls+te+srlg+all-config"><b><span class="cmdname">undo mpls te srlg all-config</span></b></a> command in the MPLS view.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0003.html">Configuring an RSVP-TE Tunnel
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0005.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0007.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>