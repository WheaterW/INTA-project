
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring a P2MP Tunnel Template">
<meta name="abstract" content="Attributes can be set in a P2MP tunnel template that is used to automatically establish P2MP TE tunnels.">
<meta name="description" content="Attributes can be set in a P2MP tunnel template that is used to automatically establish P2MP TE tunnels.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0133.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0136.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0251.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,te-p2pvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368145">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>(Optional) Configuring a P2MP Tunnel Template</title>
</head>
<body><a name="EN-US_TASK_0172368145"></a><a name="EN-US_TASK_0172368145"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring a P2MP Tunnel Template</h1>
<div class="taskbody"><p>Attributes can be set in a P2MP tunnel template that is used to automatically establish P2MP TE tunnels.</p>
<div class="context"><a name="EN-US_TASK_0172368145__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Attributes of an automatic P2MP TE tunnel can only be defined in a P2MP tunnel template, but cannot be configured on a tunnel interface because the automatic P2MP TE tunnel has no tunnel interface. When NG MVPN or multicast VPLS is deployed on a network, nodes that transmit multicast traffic can reference the template and use attributes defined in the template to automatically establish P2MP TE tunnels.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368145__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=mpls+te+p2mp-template"><b><span class="cmdname">mpls te p2mp-template</span></b></a> <i><span class="varname">template-name</span></i></span></span><p><p>A P2MP tunnel template is created, and the P2MP tunnel template view is displayed.</p>
</p></li><li><span>Select one or multiple operations.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Operations</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.2.3.2.1.2.3.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.2.3.2.1.2.3.1.2" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=leaf-list"><b><span class="cmdname">leaf-list</span></b></a> <i><span class="varname">leaf-list-name</span></i></span></p>
<p>A leaf list is configured.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>When multicast services arrive at a node, the node automatically selects leaf nodes and establishes a sub-LSP destined for each leaf node.</p>
<p>This step enables a node that multicast services access to select leaf nodes in a specified leaf list.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>Before running the <a href="cmdqueryname=leaf-list"><b><span class="cmdname">leaf-list</span></b></a> command, the task described in <a href="dc_vrp_te-p2p_cfg_0135.html">configuring a leaf list</a> must be complete. The <i><span class="varname">leaf-list-name</span></i> value in this step must specify an existing leaf list.</p>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=bandwidth"><b><span class="cmdname">bandwidth</span></b></a> <strong><span>ct0</span></strong> <i><span class="varname">bw-value</span></i></span></p>
<p>The CT0 bandwidth is set for the automatic P2MP TE tunnel.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>Before bandwidth protection is provided for traffic transmitted along an automatic P2MP TE tunnel, run the <a href="cmdqueryname=bandwidth"><b><span class="cmdname">bandwidth</span></b></a> command to set the required bandwidth value for the tunnel. Nodes on the P2MP TE tunnel can then reserve bandwidth for services, which implements bandwidth protection.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=record-route"><b><span class="cmdname">record-route</span></b></a> [ <strong><span>label</span></strong> ]</span></p>
<p>The route and label record function for an automatic P2MP TE tunnel is enabled.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>This step enables nodes along an automatic P2MP TE tunnel to use RSVP messages to record detailed P2MP TE tunnel information, including the IP address of each hop. The <strong><span>label</span></strong> parameter in the <a href="cmdqueryname=record-route"><b><span class="cmdname">record-route</span></b></a> command enables RSVP messages to record label values.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=resv-style"><b><span class="cmdname">resv-style</span></b></a> { <strong><span>se</span></strong> | <strong><span>ff</span></strong> }</span></p>
<p>A resource reservation style is specified.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=path+metric-type"><b><span class="cmdname">path metric-type</span></b></a> { <strong><span>igp</span></strong> | <strong><span>te</span></strong> }</span></p>
<p>A link metric type used to select links is specified.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=affinity+property"><b><span class="cmdname">affinity property</span></b></a> <i><span class="varname">properties</span></i> [ <strong><span>mask</span></strong> <i><span class="varname">mask-value</span></i> ]<span> or <a href="cmdqueryname=affinity"><b><span class="cmdname">affinity</span></b></a> <strong><span>primary</span></strong> { <strong><span>include-all</span></strong> | <strong><span>include-any</span></strong> | <strong><span>exclude</span></strong> } <i><span class="varname">bit-name</span></i> &amp;&lt;1-32&gt;</span></span></p>
<p>An affinity and its mask are specified.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>An affinity is a 32-bit vector value used to describe an MPLS link. An affinity and an administrative group attribute define the nodes through which an MPLS TE tunnel passes. Affinity masks determine the link properties that a device must check. If some bits in the mask are 1, at least one bit in an administrative group is 1, and the corresponding bit in the affinity must be 1. If the bits in the affinity are 0s, the corresponding bits in the administrative group cannot be 1.</p>
<p>You can use an affinity to control the nodes through which an automatic P2MP TE tunnel passes.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=hop-limit"><b><span class="cmdname">hop-limit</span></b></a> <i><span class="varname">hop-limit-value</span></i></span></p>
<p>A hop limit is set for an automatic P2MP TE tunnel.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>To set the maximum number of hops for a P2MP LSP on a P2MP TE tunnel, run this command.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=tie-breaking"><b><span class="cmdname">tie-breaking</span></b></a> { <strong><span>least-fill</span></strong> | <strong><span>most-fill</span></strong> | <strong><span>random</span></strong> }</span></p>
<p>A rule for selecting a route among multiple routes to the same destination is specified.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=priority"><b><span class="cmdname">priority</span></b></a> <i><span class="varname">setup-priority</span></i> [ <i><span class="varname">hold-priority</span></i> ]</span></p>
<p>The setup and holding priorities are set.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>The setup priority of a tunnel must be no higher than its holding priority. A setup priority value must be greater than or equal to a holding priority value.</p>
<p>If resources are insufficient, setting the setup and holding priority values allows LSPs with lower priorities to release resources for establishing LSPs with higher priorities.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=reoptimization"><b><span class="cmdname">reoptimization</span></b></a> [ <strong><span>frequency</span></strong> <i><span class="varname">interval</span></i> ]</span></p>
<p>Periodic re-optimization is enabled for an automatic P2MP TE tunnel.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>Periodic re-optimization allows a P2MP TE tunnel to be automatically reestablished over a better path. After a better path to the same destination has been calculated for a certain reason, such as a cost change, a TE tunnel will be automatically reestablished, optimizing resources on a network.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=lsp-tp+outbound"><b><span class="cmdname">lsp-tp outbound</span></b></a></span></p>
<p>Traffic policing is enabled for an automatic P2MP TE tunnel.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>Physical links over which a P2MP TE tunnel is established transmit traffic of other TE tunnels, traffic of non-CR LSP traffic, or even IP traffic, in addition to TE tunnel traffic. To limit TE traffic within a configured bandwidth range, run the <a href="cmdqueryname=lsp-tp+outbound"><b><span class="cmdname">lsp-tp outbound</span></b></a> command.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=cspf+disable"><b><span class="cmdname">cspf disable</span></b></a></span><p><p>CSPF is disabled in the P2MP template.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In an inter-AS scenario, if a loose explicit path is configured in a P2MP template, you need to run this command only when NG MVPN triggers the establishment of a dynamic P2MP tunnel. You are advised not to run this command in other scenarios.</p>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0133.html">Configuring P2MP TE Tunnels
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0136.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0251.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>