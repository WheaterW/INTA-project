
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a P2MP TE Tunnel Interface">
<meta name="abstract" content="Configuring a tunnel interface on an ingress helps you to manage and maintain the P2MP TE tunnel.">
<meta name="description" content="Configuring a tunnel interface on an ingress helps you to manage and maintain the P2MP TE tunnel.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0133.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0135.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0194.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,te-p2pvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368144">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring a P2MP TE Tunnel Interface</title>
</head>
<body><a name="EN-US_TASK_0172368144"></a><a name="EN-US_TASK_0172368144"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a P2MP TE Tunnel Interface</h1>
<div class="taskbody"><p>Configuring a tunnel interface on an ingress helps you to manage and maintain the P2MP TE tunnel.</p>
<div class="context"><a name="EN-US_TASK_0172368144__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A P2MP TE tunnel is established by binding multiple sub-LSPs to a P2MP TE tunnel interface. A network administrator configures a tunnel interface to manage and maintain the tunnel. After a tunnel interface is configured on an ingress, the ingress sends signaling packets to all leaf nodes to establish a tunnel.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368144__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">tunnel-number</span></i></span></span><p><p>A tunnel interface is created, and the tunnel interface view is displayed.</p>
</p></li><li><span>Run either of the following commands to assign an IP address to the tunnel interface:</span><p><ul><li><p>Run <span><a href="cmdqueryname=ip+address"><b><span class="cmdname">ip address</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } [ <strong><span>sub</span></strong> ]</span></p>
<p>An IP address is assigned to the tunnel interface.</p>
</li><li><p>Run <span><a href="cmdqueryname=ip+address+unnumbered"><b><span class="cmdname">ip address unnumbered</span></b></a> <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></p>
<p>The tunnel interface is allowed to borrow the IP address of a specified interface.</p>
</li></ul>
<p>A tunnel interface must obtain an IP address before it can forward traffic. An MPLS TE tunnel is unidirectional and does not need a peer address. Therefore, there is no need to specifically configure an IP address for the tunnel interface. A TE tunnel interface usually uses the ingress LSR ID as its IP address.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=tunnel-protocol"><b><span class="cmdname">tunnel-protocol</span></b></a> <strong><span>mpls</span></strong> <strong><span>te</span></strong></span></span><p><p>MPLS TE is configured as the tunneling protocol.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172368144__en-us_task_0172368081_p59301840152610">Changing, deleting, or initially configuring the tunnel mode of a tunnel interface will delete all tunnel-related configurations on the interface, such as the MTU. Exercise caution when performing this operation.</p>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=mpls+te+p2mp-mode"><b><span class="cmdname">mpls te p2mp-mode</span></b></a></span></span><p><p>A P2MP TE tunnel is established.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=mpls+te+tunnel-id"><b><span class="cmdname">mpls te tunnel-id</span></b></a> <i><span class="varname">tunnel-id</span></i></span></span><p><p>A tunnel ID is set.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=mpls+te+leaf-list"><b><span class="cmdname">mpls te leaf-list</span></b></a> <i><span class="varname">leaf-list-name</span></i></span></span><p><p>A leaf list is specified for the P2MP TE tunnel.</p>
</p></li><li><span>(Optional) Perform the following operations to set other tunnel attributes as needed:</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Operations</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.2.8.2.1.2.3.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.2.8.2.1.2.3.1.2" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=mpls+te+bandwidth"><b><span class="cmdname">mpls te bandwidth</span></b></a> <strong><span>ct0</span></strong> <i><span class="varname">ct0-bw-value</span></i></span></p>
<p>The bandwidth is configured for the tunnel.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.2 "><ul><li>A P2MP TE tunnel is established to provide sufficient network bandwidth for multicast services. Therefore, set the bandwidth value.</li><li><p>The bandwidth used by the tunnel cannot be higher than the maximum reservable link bandwidth.</p>
</li><li><p>Ignore this step if the TE tunnel is used only for changing the data transmission path.</p>
</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=mpls+te+record-route"><b><span class="cmdname">mpls te record-route</span></b></a> [ <strong><span>label</span></strong> ]</span></p>
<p>The route and label recording function for a manual P2MP TE tunnel is enabled.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.2 "><p>This step enables nodes along a P2MP TE tunnel to use RSVP messages to record detailed P2MP TE tunnel information, including the IP address of each hop. The <strong><span>label</span></strong> parameter in the command enables RSVP messages to record label values.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=mpls+te+resv-style"><b><span class="cmdname">mpls te resv-style</span></b></a> { <strong><span>se</span></strong> | <strong><span>ff</span></strong> }</span></p>
<p>A resource reservation style is specified.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.2 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=mpls+te+path+metric-type"><b><span class="cmdname">mpls te path metric-type</span></b></a> { <strong><span>igp</span></strong> | <strong><span>te</span></strong> }</span></p>
<p>A link metric type used to select links is specified.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.2 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=mpls+te+affinity+property"><b><span class="cmdname">mpls te affinity property</span></b></a> <i><span class="varname">properties</span></i> [ <strong><span>mask</span></strong> <i><span class="varname">mask-value</span></i> ]</span></p>
<p>An affinity and its mask are specified.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.2 "><p>An affinity is a 32-bit vector value used to describe an MPLS link. An affinity and an administrative group attribute define the nodes through which an MPLS TE tunnel passes. Affinity masks determine the link properties that a device must check. If some bits in the mask are 1, at least one bit in an administrative group is 1, and the corresponding bit in the affinity must be 1. If the bits in the affinity are 0s, the corresponding bits in the administrative group cannot be 1.</p>
<p>You can use an affinity to control the nodes through which a manual P2MP TE tunnel passes.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=mpls+te+hop-limit"><b><span class="cmdname">mpls te hop-limit</span></b></a> <i><span class="varname">hop-limit-value</span></i></span></p>
<p>A hop limit is set for a manual P2MP TE tunnel.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.2 "><p>The <a href="cmdqueryname=mpls+te+hop-limit"><b><span class="cmdname">mpls te hop-limit</span></b></a> command sets the maximum number of hops that each sub-LSP in a P2MP TE tunnel supports.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=mpls+te+tie-breaking"><b><span class="cmdname">mpls te tie-breaking</span></b></a> { <strong><span>least-fill</span></strong> | <strong><span>most-fill</span></strong> | <strong><span>random</span></strong> }</span></p>
<p>A rule for selecting a route among multiple routes to the same destination is specified.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.2 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=mpls+te+priority"><b><span class="cmdname">mpls te priority</span></b></a> <i><span class="varname">setup-priority</span></i> [ <i><span class="varname">hold-priority</span></i> ]</span></p>
<p>The priorities of the tunnel are set.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.2 "><p>The setup priority of a tunnel must be no higher than its holding priority. A setup priority value must be greater than or equal to a holding priority value.</p>
<p>If resources are insufficient, setting the setup and holding priority values allows LSPs with lower priorities to release resources for establishing LSPs with higher priorities.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=mpls+te+reoptimization"><b><span class="cmdname">mpls te reoptimization</span></b></a> [ <strong><span>frequency</span></strong> <i><span class="varname">interval</span></i> ]</span></p>
<p>Periodic re-optimization is enabled for a manual P2MP TE Tunnel.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.2 "><p>Periodic re-optimization allows a P2MP TE tunnel to be automatically reestablished over a better path. After a better path to the same destination has been calculated for a certain reason, such as a cost change, a TE tunnel will be automatically reestablished, optimizing resources on a network.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.1 "><p>Run <span><a href="cmdqueryname=mpls+te+lsp-tp+outbound"><b><span class="cmdname">mpls te lsp-tp outbound</span></b></a></span></p>
<p>Traffic policing is enabled for a manual P2MP TE tunnel.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.8.2.1.2.3.1.2 "><p>Physical links over which a P2MP TE tunnel is established transmit traffic of other TE tunnels, traffic of non-CR LSP traffic, or even IP traffic, in addition to TE tunnel traffic. To limit TE traffic within a configured bandwidth range, run the <a href="cmdqueryname=mpls+te+lsp-tp+outbound"><b><span class="cmdname">mpls te lsp-tp outbound</span></b></a> command.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0133.html">Configuring P2MP TE Tunnels
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0135.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0194.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>