
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Inter-AS Seamless MPLS+HVPN">
<meta name="abstract" content="In the inter-AS seamless MPLS+HVPN networking, an HVPN between each CSG and AGG is configured, and inter-AS seamless MPLS is configured for the link between each AGG and MASG. The networking integrates the seamless MPLS and HVPN advantages.">
<meta name="description" content="In the inter-AS seamless MPLS+HVPN networking, an HVPN between each CSG and AGG is configured, and inter-AS seamless MPLS is configured for the link between each AGG and MASG. The networking integrates the seamless MPLS and HVPN advantages.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0013.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0037.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0023.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0024.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0025.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_00452.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0036.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0026.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0043-2.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0027.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,z00545680,w00556928,seamlessvrp,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Seamless MPLS">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Seamless MPLS">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="Seamless MPLS">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="b00896120">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368659">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Inter-AS Seamless MPLS+HVPN</title>
</head>
<body><a name="EN-US_TASK_0172368659"></a><a name="EN-US_TASK_0172368659"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Inter-AS Seamless MPLS+HVPN</h1>
<div class="taskbody"><p>In the inter-AS seamless MPLS+HVPN networking, an HVPN between each CSG and AGG is configured, and inter-AS seamless MPLS is configured for the link between each AGG and MASG. The networking integrates the seamless MPLS and HVPN advantages.</p>
<div class="context"><a name="EN-US_TASK_0172368659__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p><a href="#EN-US_TASK_0172368659__fig_dc_vrp_seamless_mpls_cfg_002101">Figure 1</a> illustrates the inter-AS seamless MPLS+HVPN networking. A Cell Site Gateway (CSG) and an Aggregation (AGG) establish an HVPN connection, and the AGG and a Mobile Aggregate Service Gateway (MASG) establish a seamless MPLS LSP. The AGG provides hierarchical L3VPN access services and routing management services. Seamless MPLS+HVPN combines the advantages of both seamless MPLS and HVPN. Seamless MPLS allows any two nodes to be interconnected through an LSP in scenarios where the access, aggregation, and core layers involve different domains, providing high service scalability. HVPN enables carriers to cut down network deployment costs by deploying devices with layer-specific capacities to meet service requirements.</p>
<div class="fignone" id="EN-US_TASK_0172368659__fig_dc_vrp_seamless_mpls_cfg_002101"><a name="EN-US_TASK_0172368659__fig_dc_vrp_seamless_mpls_cfg_002101"></a><a name="fig_dc_vrp_seamless_mpls_cfg_002101"></a><span class="figcap"><b>Figure 1 </b>Inter-AS seamless MPLS+HVPN networking</span><br><span><img class="vsd" src="images/fig_dc_vrp_seamless_mpls_cfg_002101.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368659__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring inter-AS seamless MPLS+HVPN, complete the following tasks:</p>
<ul><li><p>Configure IGP protocols to implement connectivity at the access, aggregation, and core layers and enable MPLS LDP or MPLS TE to implement MPLS forwarding on a public network.</p>
</li><li><p>Configure an EBGP peer relationship for each AGG ASBR-and-core ASBR pair and an IBGP peer relationship between each pair of the following nodes:</p>
<ul><li>CSG and AGG</li><li>AGG and AGG ASBR</li><li>Core ASBR and MASG</li></ul>
</li><li><p>Configure an HVPN for each CSG-and-AGG pair.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If MPLS TE tunnels are used across the three layers, a tunnel policy or tunnel selector must be configured. For configuration details, see <a href="dc_vrp_tnlm_cfg_0001.html">VPN Tunnel Management Configuration</a>.</p>
</div></div>
</div></div>
</div>

<ul class="ullinks">
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0023.html">Establishing an MP-EBGP Peer Relationship Between Each AGG and MASG</a>
</dt>
<dd>
MP-EBGP supports BGP extended community attributes that are used to advertise VPNv4 routes between each pair of the AGG and MASG.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0024.html">Enabling BGP Peers to Exchange Labeled IPv4 Routes</a>
</dt>
<dd>
In the inter-AS seamless MPLS+HVPN networking, before an E2E BGP LSP is established between an AGG and MASG, these two BGP peers must be able to exchange labeled IPv4 routes with each other.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0025.html">Configuring a BGP LSP</a>
</dt>
<dd>
Before a BGP LSP is established, a routing policy must be configured to control label distribution. The egress of the BGP LSP to be established needs to assign an MPLS label to the route advertised to an upstream node. If a transit node receives a labeled IPv4 route from downstream, the downstream node must re-assign an MPLS label to the transit node and advertises the label upstream.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_00452.html">(Optional) Configuring Traffic Statistics Collection for BGP LSPs</a>
</dt>
<dd>
To check the traffic statistics of BGP LSPs, configure traffic statistics collection on the ingress and transit nodes of the BGP LSPs.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0036.html">(Optional) Configuring the Mode in Which a BGP Label Inherits the QoS Priority in an Outer Tunnel Label</a>
</dt>
<dd>
When data packets are transmitted from a core ASBR to an AGG ASBR, you can determine whether a BGP label inherits the QoS priority carried in an outer tunnel label.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0026.html">(Optional) Configuring the Protection Switching Function</a>
</dt>
<dd>
A protection switching function, such as link or node protection, can be configured to provide high availability for an inter-AS seamless MPLS+HVPN network.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0043-2.html">(Optional) Configuring the Egress Protection Function</a>
</dt>
<dd>
The egress protection function reduces E2E BFD sessions to be established, bandwidth resources to be consumed, and the burden on devices.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0027.html">Verifying the Configuration</a>
</dt>
<dd>
After configuring inter-AS seamless MPLS+HVPN, you can check all BGP peer relationships, VPNv4 routing information on AGGs and MASGs, and the connectivity of the BGP LSP between each pair of an AGG and MASG.</dd>
</dl>
</ul>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0000.html">Seamless MPLS Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0013.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_seamless_mpls_cfg_0037.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>