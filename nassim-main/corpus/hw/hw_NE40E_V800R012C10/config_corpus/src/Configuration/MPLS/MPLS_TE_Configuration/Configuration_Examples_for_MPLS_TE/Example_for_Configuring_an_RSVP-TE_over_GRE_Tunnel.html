
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring an RSVP-TE over GRE Tunnel">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0093.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0094.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0099.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001157215653">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring an RSVP-TE over GRE Tunnel</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001157215653"></a><a name="EN-US_TASK_0000001157215653"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring an RSVP-TE over GRE Tunnel</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001157215653__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0000001157215653__fig_dc_vrp_te-p2p_cfg_009401">Figure 1</a>, OSPF runs on DeviceB, DeviceC, and DeviceD, and a GRE tunnel is established between DeviceB and DeviceD. A TE tunnel with 10 Mbit/s bandwidth is required between DeviceA and DeviceE. <span>The maximum reservable link bandwidth of the tunnel is 10 Mbit/s, as is the BC0 bandwidth.</span></p>
<div class="fignone" id="EN-US_TASK_0000001157215653__fig_dc_vrp_te-p2p_cfg_009401"><a name="EN-US_TASK_0000001157215653__fig_dc_vrp_te-p2p_cfg_009401"></a><a name="fig_dc_vrp_te-p2p_cfg_009401"></a><span class="figcap"><b>Figure 1 </b>Network diagram of an RSVP-TE over GRE tunnel</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interface1 and interface2 in this example represent GE <span>0/1/0</span> and GE <span>0/2/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001110781466.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001157215653__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>In this example for configuring an RSVP-TE over GRE tunnel, the GRE tunnel interfaces cannot borrow the IP addresses of other interfaces. During configuration, you can enable an IGP on GRE tunnel interfaces and configure MPLS link attributes.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001157215653__1.3.3"></a><a name="1.3.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Assign an IP address to each interface, including the loopback interface whose address is to be used as an LSR ID on each involved node.</p>
</li><li>Configure OSPF on DeviceB, DeviceC, and DeviceD, and establish a GRE tunnel between DeviceB and DeviceD.</li><li><p>Enable IS-IS globally, configure a network entity title (NET), specify the cost type, and enable IS-IS TE. Enable IS-IS on each interface (including loopback interfaces and GRE tunnel interfaces).</p>
</li><li><p>Configure MPLS LSR-IDs, and enable MPLS, MPLS TE, MPLS RSVP-TE, and MPLS CSPF globally.</p>
</li><li><p>Enable MPLS, MPLS TE, and MPLS RSVP-TE on each interface.</p>
</li><li><p>Configure the maximum reservable link bandwidth and BC bandwidth on the outbound interfaces of each involved tunnel.</p>
</li><li><p>Create a tunnel interface on the ingress and configure an IP address, tunnel protocol, destination IP address, and tunnel bandwidth.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001157215653__1.3.4"></a><a name="1.3.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>IS-IS area ID, originating system ID, and IS-IS level of each node</p>
</li><li><p>Maximum bandwidth and maximum reservable bandwidth for each link along the tunnel</p>
</li><li><p>Tunnel interface number, IP address, destination IP address, tunnel ID, and tunnel bandwidth</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001157215653__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address for each interface.</span><p><p>Assign an IP address and a mask to each interface according to <a href="#EN-US_TASK_0000001157215653__fig_dc_vrp_te-p2p_cfg_009401">Figure 1</a>. The configuration details are not provided.</p>
</p></li><li><span>Establish a GRE tunnel between DeviceB and DeviceD.</span><p><p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>ospf 1</strong>
[<span class="keyword">*</span>DeviceB-ospf-1] <strong>area 0.0.0.0</strong>
[<span class="keyword">*</span>DeviceB-ospf-1-area-0.0.0.0] <strong>network 2.2.2.9 0.0.0.0</strong>
[<span class="keyword">*</span>DeviceB-ospf-1-area-0.0.0.0] <strong>network 172.16.1.0 0.0.0.255</strong> 
[<span class="keyword">*</span>DeviceB-ospf-1-area-0.0.0.0] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB-ospf-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB] <strong>interface LoopBack1 </strong>
[<span class="keyword">*</span>DeviceB-LoopBack1] <strong>binding tunnel gre</strong>
[<span class="keyword">*</span>DeviceB-LoopBack1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB] <strong>interface Tunnel10 </strong>
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>ip address 10.2.1.1 255.255.255.252</strong>
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>tunnel-protocol gre</strong>        
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>source 2.2.2.9 </strong>
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>destination 3.3.3.9</strong>
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB] <strong>commit</strong></pre>
</p><p><p># Configure DeviceC.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong>ospf 1</strong>
[<span class="keyword">*</span>DeviceC-ospf-1] <strong>area 0.0.0.0</strong>
[<span class="keyword">*</span>DeviceC-ospf-1-area-0.0.0.0] <strong>network 172.16.1.0 0.0.0.255</strong> 
[<span class="keyword">*</span>DeviceC-ospf-1-area-0.0.0.0] <strong>network 172.16.2.0 0.0.0.255</strong>
[<span class="keyword">*</span>DeviceC-ospf-1-area-0.0.0.0] <strong>quit</strong>
[<span class="keyword">*</span>DeviceC-ospf-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceC] <strong>commit</strong></pre>
</p><p><p># Configure DeviceD.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong>ospf 1</strong>
[<span class="keyword">*</span>DeviceD-ospf-1] <strong>area 0.0.0.0</strong>
[<span class="keyword">*</span>DeviceD-ospf-1-area-0.0.0.0] <strong>network 3.3.3.9 0.0.0.0</strong>
[<span class="keyword">*</span>DeviceD-ospf-1-area-0.0.0.0] <strong>network 172.16.2.0 0.0.0.255</strong> 
[<span class="keyword">*</span>DeviceD-ospf-1-area-0.0.0.0] <strong>quit</strong>
[<span class="keyword">*</span>DeviceD-ospf-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceD] <strong>interface LoopBack1 </strong>
[<span class="keyword">*</span>DeviceD-LoopBack1] <strong>binding tunnel gre</strong>
[<span class="keyword">*</span>DeviceD-LoopBack1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceD] <strong>interface Tunnel10 </strong>
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>ip address 10.2.1.2 255.255.255.252</strong>
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>tunnel-protocol gre</strong>        
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>source 3.3.3.9 </strong>
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>destination </strong><strong>2.2.2.9</strong>
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>quit</strong>
[<span class="keyword">*</span>DeviceD] <strong>commit</strong></pre>
<p>After completing the configuration, run the <a href="cmdqueryname=display+interface+tunnel"><b><span class="cmdname">display interface tunnel</span></b></a> command. The command output shows that the tunnel interface is in the <strong>Up</strong> state. The following example uses the command output on DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>display interface tunnel 10</strong>
Tunnel10 current state : UP (ifindex: 30)                              
Line protocol current state : UP                                       
Last line protocol up time : 2021-05-12 03:38:08                       
Description:      
Route Port,The Maximum Transmit Unit is 1500                           
Internet Address is 10.2.1.1/30                                        
Encapsulation is TUNNEL, loopback not set                              
Tunnel source 2.2.2.9 (LoopBack1), destination 3.3.3.9                 
Tunnel protocol/transport GRE/IP, key disabled                         
keepalive disabled         
Checksumming of packets disabled                                       
Current system time: 2021-05-12 06:29:08                               
    300 seconds input rate 0 bits/sec, 0 packets/sec                   
    300 seconds output rate 0 bits/sec, 0 packets/sec                  
    0 seconds input rate 0 bits/sec, 0 packets/sec                     
    0 seconds output rate 0 bits/sec, 0 packets/sec                    
    1834 packets input,  212950 bytes                                  
    0 input error 
    1837 packets output,  218381 bytes                                 
    0 output error         
    Input:        
      Unicast: 1834 packets, Multicast: 0 packets                      
    Output:    
      Unicast: 1837 packets, Multicast: 0 packets                      
    Input bandwidth utilization  :    0%                               
    Output bandwidth utilization :    0% </pre>
<p>Run the <strong>display tunnel</strong><strong>-info all</strong> command to check information about all tunnels. The following example uses the command output on DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>display tunnel-info all</strong>
Tunnel ID            Type                Destination                             Status
----------------------------------------------------------------------------------------
0x00000000050000001e gre                 3.3.3.9                                 UP</pre>
</p></li><li><span>Configure IS-IS to advertise routes.</span><p><p>Note that IS-IS must also be enabled on the GRE tunnel interfaces.</p>
</p><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>isis 1</strong>
[<span class="keyword">*</span>DeviceA-isis-1]<strong> network-entity 00.0005.0000.0000.0001.00</strong>
[<span class="keyword">*</span>DeviceA-isis-1]<strong> is-level level-2</strong>
[<span class="keyword">*</span>DeviceA-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA]<strong> interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>isis enable 1</strong>
[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA]<strong> interface loopback 1</strong>
[<span class="keyword">*</span>DeviceA-LoopBack1] <strong>isis enable 1</strong>
[<span class="keyword">*</span>DeviceA-LoopBack1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-LoopBack1] <strong>quit</strong></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>isis 1</strong>
[<span class="keyword">*</span>DeviceB-isis-1] <strong>network-entity 00.0005.0000.0000.0002.00</strong>
[<span class="keyword">*</span>DeviceB-isis-1] <strong>is-level level-2</strong>
[<span class="keyword">*</span>DeviceB-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB] <strong>interface Tunnel10</strong>
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>isis enable 1</strong>
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB] <strong>interface gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>isis enable 1</strong>
[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB] <strong>interface loopback 1</strong>
[<span class="keyword">*</span>DeviceB-LoopBack1] <strong>isis enable 1</strong>
[<span class="keyword">*</span>DeviceB-LoopBack1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-LoopBack1] <strong>quit</strong></pre>
<p># Configure DeviceD.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong>isis 1</strong>
[<span class="keyword">*</span>DeviceD-isis-1]<strong> network-entity 00.0005.0000.0000.0003.00</strong>
[<span class="keyword">*</span>DeviceD-isis-1]<strong> is-level level-2</strong>
[<span class="keyword">*</span>DeviceD-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceD] <strong>interface Tunnel10</strong>
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>isis enable 1</strong>
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>quit</strong>
[<span class="keyword">*</span>DeviceD]<strong> interface gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword">*</span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong>isis enable 1</strong>
[<span class="keyword">*</span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceD]<strong> interface loopback 1</strong>
[<span class="keyword">*</span>DeviceD-LoopBack1] <strong>isis enable 1</strong>
[<span class="keyword">*</span>DeviceD-LoopBack1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD-LoopBack1] <strong>quit</strong></pre>
<p># Configure DeviceE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE] <strong>isis 1</strong>
[<span class="keyword">*</span>DeviceE-isis-1]<strong> network-entity 00.0005.0000.0000.0004.00</strong>
[<span class="keyword">*</span>DeviceE-isis-1]<strong> is-level level-2</strong>
[<span class="keyword">*</span>DeviceE-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceE]<strong> interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>DeviceE-GigabitEthernet<span>0/1/0</span>] <strong>isis enable 1</strong>
[<span class="keyword">*</span>DeviceE-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceE]<strong> interface loopback 1</strong>
[<span class="keyword">*</span>DeviceE-LoopBack1] <strong>isis enable 1</strong>
[<span class="keyword">*</span>DeviceE-LoopBack1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE-LoopBack1] <strong>quit</strong></pre>
<p>After completing the configuration, run the <strong>display ip routing-table</strong> command on each node. The command output shows that all the nodes have learned routes from each other. The following example uses the command output on DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>display ip routing-table</strong>
<span class="keyword">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>  
------------------------------------------------------------------------------ 
Routing Table : _public_   
         Destinations : 13       Routes : 13                           

Destination/Mask    Proto   Pre  Cost        Flags NextHop         Interface   

        1.1.1.9/32  Direct  0    0             D   127.0.0.1       LoopBack1   
        2.2.2.9/32  ISIS-L2 15   10            D   10.1.1.1        GigabitEthernet<span>0/1/0</span>        
        3.3.3.9/32  ISIS-L2 15   20            D   10.1.1.1        GigabitEthernet<span>0/1/0</span>        
        4.4.4.9/32  ISIS-L2 15   30            D   10.1.1.1        GigabitEthernet<span>0/1/0</span>        
       10.1.1.0/24  Direct  0    0             D   10.1.1.2        GigabitEthernet<span>0/1/0</span>        
       10.1.1.2/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/1/0</span>        
     10.1.1.255/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/1/0</span>        
       10.2.1.0/30  ISIS-L2 15   20            D   10.1.1.1        GigabitEthernet<span>0/1/0</span>        
       10.3.1.0/24  ISIS-L2 15   30            D   10.1.1.1        GigabitEthernet<span>0/1/0</span>        
      127.0.0.0/8   Direct  0    0             D   127.0.0.1       InLoopBack0 
      127.0.0.1/32  Direct  0    0             D   127.0.0.1       InLoopBack0 
127.255.255.255/32  Direct  0    0             D   127.0.0.1       InLoopBack0 
255.255.255.255/32  Direct  0    0             D   127.0.0.1       InLoopBack0 </pre>
</p></li><li><span>Configure basic MPLS functions, and enable MPLS TE, RSVP-TE, and CSPF.</span><p><p>Enable MPLS, MPLS TE, and RSVP-TE globally on each node and on all interfaces along the tunnel, and enable CSPF on the ingress. Note that you also need to perform the related configurations on the GRE tunnel interfaces.</p>
<p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> mpls lsr-id 1.1.1.9</strong>
[<span class="keyword">*</span>DeviceA]<strong> mpls</strong>
[<span class="keyword">*</span>DeviceA-mpls] <strong>mpls te</strong>
[<span class="keyword">*</span>DeviceA-mpls] <strong>mpls rsvp-te</strong>
[<span class="keyword">*</span>DeviceA-mpls] <strong>mpls te cspf</strong>
[<span class="keyword">*</span>DeviceA-mpls] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA]<strong> interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>mpls</strong>
[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>mpls te</strong>
[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>mpls rsvp-te</strong>
[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB]<strong> mpls lsr-id 2.2.2.9</strong>
[<span class="keyword">*</span>DeviceB]<strong> mpls</strong>
[<span class="keyword">*</span>DeviceB-mpls] <strong>mpls te</strong>
[<span class="keyword">*</span>DeviceB-mpls] <strong>mpls rsvp-te</strong>
[<span class="keyword">*</span>DeviceB-mpls] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB]<strong> interface Tunnel10</strong>
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>mpls</strong>
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>mpls te</strong>
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>mpls rsvp-te</strong>
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB]<strong> interface gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>mpls</strong>
[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>mpls te</strong>
[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>mpls rsvp-te</strong>
[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<p># Configure DeviceD.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD]<strong> mpls lsr-id 3.3.3.9</strong>
[<span class="keyword">*</span>DeviceD]<strong> mpls</strong>
[<span class="keyword">*</span>DeviceD-mpls] <strong>mpls te</strong>
[<span class="keyword">*</span>DeviceD-mpls] <strong>mpls rsvp-te</strong>
[<span class="keyword">*</span>DeviceD-mpls] <strong>quit</strong>
[<span class="keyword">*</span>DeviceD]<strong> interface Tunnel10</strong>
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>mpls</strong>
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>mpls te</strong>
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>mpls rsvp-te</strong>
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>quit</strong>
[<span class="keyword">*</span>DeviceD]<strong> interface gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword">*</span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong>mpls</strong>
[<span class="keyword">*</span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong>mpls te</strong>
[<span class="keyword">*</span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong>mpls rsvp-te</strong>
[<span class="keyword">*</span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<p># Configure DeviceE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE]<strong> mpls lsr-id 4.4.4.9</strong>
[<span class="keyword">*</span>DeviceE]<strong> mpls</strong>
[<span class="keyword">*</span>DeviceE-mpls] <strong>mpls te</strong>
[<span class="keyword">*</span>DeviceE-mpls] <strong>mpls rsvp-te</strong>
[<span class="keyword">*</span>DeviceE-mpls] <strong>mpls te cspf</strong>
[<span class="keyword">*</span>DeviceE-mpls] <strong>quit</strong>
[<span class="keyword">*</span>DeviceE]<strong> interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>DeviceE-GigabitEthernet<span>0/1/0</span>] <strong>mpls</strong>
[<span class="keyword">*</span>DeviceE-GigabitEthernet<span>0/1/0</span>] <strong>mpls te</strong>
[<span class="keyword">*</span>DeviceE-GigabitEthernet<span>0/1/0</span>] <strong>mpls rsvp-te</strong>
[<span class="keyword">*</span>DeviceE-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE-GigabitEthernet<span>0/1/0</span>]<strong> quit</strong></pre>
</p></li><li><span>Configure IS-IS TE.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>isis 1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-isis-1]<strong> cost-style wide</strong>
[<span class="keyword">*</span>DeviceA-isis-1] <strong>traffic-eng level-2</strong>
[<span class="keyword">*</span>DeviceA-isis-1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-isis-1] <strong>quit</strong></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>isis 1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-isis-1]<strong> cost-style wide</strong>
[<span class="keyword">*</span>DeviceB-isis-1] <strong>traffic-eng level-2</strong>
[<span class="keyword">*</span>DeviceB-isis-1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-isis-1] <strong>quit</strong></pre>
<p># Configure DeviceD.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong>isis 1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD-isis-1]<strong> cost-style wide</strong>
[<span class="keyword">*</span>DeviceD-isis-1] <strong>traffic-eng level-2</strong>
[<span class="keyword">*</span>DeviceD-isis-1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD-isis-1] <strong>quit</strong></pre>
<p># Configure DeviceE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE] <strong>isis 1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE-isis-1]<strong> cost-style wide</strong>
[<span class="keyword">*</span>DeviceE-isis-1] <strong>traffic-eng level-2</strong>
[<span class="keyword">*</span>DeviceE-isis-1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE-isis-1] <strong>quit</strong></pre>
</p></li><li><span>Configure MPLS TE bandwidth attributes for links.</span><p><p>Configure the maximum <span>reservable</span> link bandwidth and <span>BC0</span> bandwidth on the outbound interfaces of each involved tunnel. Note that you also need to perform related configurations on the GRE tunnel interfaces.</p>
<p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>mpls te <span>bandwidth max-reservable-bandwidth</span> 10000</strong>
[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>mpls te <span>bandwidth bc0</span> 10000</strong>
[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB]<strong> interface Tunnel</strong><strong>10</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-Tunnel10] <strong>bandwidth 100000</strong>
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>mpls te <span>bandwidth max-reservable-bandwidth</span> 10000</strong>
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>mpls te <span>bandwidth bc0</span> 10000</strong>
[<span class="keyword">*</span>DeviceB-Tunnel10] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB]<strong> interface gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>mpls te <span>bandwidth max-reservable-bandwidth</span> 10000</strong>
[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>mpls te <span>bandwidth bc0</span> 10000</strong>
[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<p># Configure DeviceD.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD]<strong> interface Tunnel</strong><strong>10</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD-Tunnel10] <strong>bandwidth 100000</strong>
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>mpls te <span>bandwidth max-reservable-bandwidth</span> 10000</strong>
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>mpls te <span>bandwidth bc0</span> 10000</strong>
[<span class="keyword">*</span>DeviceD-Tunnel10] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD]<strong> interface gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong>mpls te <span>bandwidth max-reservable-bandwidth</span> 10000</strong>
[<span class="keyword">*</span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong>mpls te <span>bandwidth bc0</span> 10000</strong>
[<span class="keyword">*</span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<p># Configure DeviceE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE]<strong> interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE-GigabitEthernet<span>0/1/0</span>] <strong>mpls te <span>bandwidth max-reservable-bandwidth</span> 10000</strong>
[<span class="keyword">*</span>DeviceE-GigabitEthernet<span>0/1/0</span>] <strong>mpls te <span>bandwidth bc0</span> 10000</strong>
[<span class="keyword">*</span>DeviceE-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
</p></li><li><span>Configure MPLS TE tunnel interfaces.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> interface tunnel1</strong>
[<span class="keyword">*</span>DeviceA-Tunnel1] <strong>ip address unnumbered interface loopback 1</strong>
[<span class="keyword">*</span>DeviceA-Tunnel1] <strong>tunnel-protocol mpls te</strong>
[<span class="keyword">*</span>DeviceA-Tunnel1]<strong> destination 4.4.4.9</strong>
[<span class="keyword">*</span>DeviceA-Tunnel1]<strong> mpls te tunnel-id 1</strong>
[<span class="keyword">*</span>DeviceA-Tunnel1] <strong>mpls te bandwidth ct0 10000</strong>
[<span class="keyword">*</span>DeviceA-Tunnel1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-Tunnel1] <strong>quit</strong></pre>
</p><p><p># Configure DeviceE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE]<strong> interface tunnel1</strong>
[<span class="keyword">*</span>DeviceE-Tunnel1] <strong>ip address unnumbered interface loopback 1</strong>
[<span class="keyword">*</span>DeviceE-Tunnel1] <strong>tunnel-protocol mpls te</strong>
[<span class="keyword">*</span>DeviceE-Tunnel1]<strong> destination 1.1.1.9</strong>
[<span class="keyword">*</span>DeviceE-Tunnel1]<strong> mpls te tunnel-id 1</strong>
[<span class="keyword">*</span>DeviceE-Tunnel1] <strong>mpls te bandwidth ct0 10000</strong>
[<span class="keyword">*</span>DeviceE-Tunnel1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE-Tunnel1] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>After completing the configuration, run the <a href="cmdqueryname=display+interface+tunnel"><b><span class="cmdname">display interface tunnel</span></b></a> command. The command output shows that the tunnel interface is in the <strong>Up</strong> state. The following example uses the command output on DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>display interface tunnel 1</strong>

Tunnel1 current state : <strong>UP</strong> (ifindex: 27)                               
Line protocol current state : <strong>UP</strong>                                       
Last line protocol up time : 2021-05-12 04:36:14                       
Description:      
Route Port,The Maximum Transmit Unit is 1500, Current BW: 10Mbps       
Internet Address is unnumbered, using address of LoopBack1(1.1.1.9/32) 
Encapsulation is TUNNEL, loopback not set                              
Tunnel destination 4.4.4.9 
Tunnel up/down statistics 1                                            
Tunnel ct0 bandwidth is 10000 Kbit/sec                                 
Tunnel protocol/transport MPLS/MPLS, ILM is available                  
primary tunnel id is 0x2141, secondary tunnel id is 0x0                
Current system time: 2021-05-12 06:38:42                               
    0 seconds output rate 0 bits/sec, 0 packets/sec                    
    0 seconds output rate 0 bits/sec, 0 packets/sec                    
    0 packets output,  0 bytes                                         
    0 output error         
    0 output drop 
    Last 300 seconds input utility rate:  0.00%                        
    Last 300 seconds output utility rate: 0.00% </pre>
<p>Run the <a href="cmdqueryname=display+mpls+te+tunnel-interface"><b><span class="cmdname">display mpls te tunnel-interface</span></b></a> command. Detailed information about the tunnel interface is displayed. The following example uses the command output on DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>display mpls te tunnel-interface tunnel1</strong>

    Tunnel Name       : Tunnel1      
    Signalled Tunnel Name: -         
    Tunnel State Desc : CR-LSP is Up 
    Tunnel Attributes   :            
    Active LSP          : Primary LSP                               
    Traffic Switch      : -          
    Session ID          : 1          
    Ingress LSR ID      : 1.1.1.9               Egress LSR ID: 4.4.4.9  
    Admin State         : UP                    Oper State   : UP   
    Signaling Protocol  : RSVP       
    FTid                : 1          
    Tie-Breaking Policy : None                  Metric Type  : None 
    Bfd Cap             : None       
    Reopt               : Disabled              Reopt Freq   : -    
    Inter-area Reopt    : Disabled   
    Auto BW             : Disabled              Threshold    : -    
    Current Collected BW: -                     Auto BW Freq : -    
    Min BW              : -                     Max BW       : -    
    Offload             : Disabled              Offload Freq : -    
    Low Value           : -                     High Value   : -    
    Readjust Value      : -          
    Offload Explicit Path Name: -    
    Tunnel Group        : Primary  
    Interfaces Protected: -          
    Excluded IP Address : -          
    Referred LSP Count  : 0          
    Primary Tunnel      : -                     Pri Tunn Sum : -    
    Backup Tunnel       : -          
    Group Status        : Up                    Oam Status   : None 
    IPTN InLabel        : -                     Tunnel BFD Status : -   
    BackUp LSP Type     : None                  BestEffort   : Disabled 
    Secondary HopLimit  : -          
    BestEffort HopLimit  : -         
    Secondary Explicit Path Name: -  
    Secondary Affinity Prop/Mask: 0x0/0x0                           
    BestEffort Affinity Prop/Mask: 0x0/0x0                          
    IsConfigLspConstraint: -         
    Hot-Standby Revertive Mode:  Revertive                          
    Hot-Standby Overlap-path:  Disabled                             
    Hot-Standby Switch State:  CLEAR 
    Bit Error Detection:  Disabled   
    Bit Error Detection Switch Threshold:  -                        
    Bit Error Detection Resume Threshold:  -                        
    Ip-Prefix Name    : -            
    P2p-Template Name : - 
    PCE Delegate      : No                     LSP Control Status : Local control
    Path Verification : -            
    Entropy Label     : None         
    Associated Tunnel Group ID: -              Associated Tunnel Group Type: - 
    Auto BW Remain Time   : -                  Reopt Remain Time     : -       
    Metric Inherit IGP : None        
    Binding Sid       : -                     Reverse Binding Sid : -   
    Self-Ping         : Disable               Self-Ping Duration : 1800 sec    
    FRR Attr Source   : -                     Is FRR degrade down : -   

    Primary LSP ID      : 1.1.1.9:232                               
    LSP State           : UP                    LSP Type     : Primary  
    Setup Priority      : 7                     Hold Priority: 7    
    IncludeAll          : 0x0        
    IncludeAny          : 0x0        
    ExcludeAny          : 0x0        
    Affinity Prop/Mask  : 0x0/0x0               Resv Style   :  SE  
    Configured Bandwidth Information:                               
    CT0 Bandwidth(Kbit/sec): 10000           CT1 Bandwidth(Kbit/sec): 0 
    CT2 Bandwidth(Kbit/sec): 0               CT3 Bandwidth(Kbit/sec): 0 
    CT4 Bandwidth(Kbit/sec): 0               CT5 Bandwidth(Kbit/sec): 0 
    CT6 Bandwidth(Kbit/sec): 0               CT7 Bandwidth(Kbit/sec): 0 
    Actual Bandwidth Information: 
    CT0 Bandwidth(Kbit/sec): 10000           CT1 Bandwidth(Kbit/sec): 0 
    CT2 Bandwidth(Kbit/sec): 0               CT3 Bandwidth(Kbit/sec): 0 
    CT4 Bandwidth(Kbit/sec): 0               CT5 Bandwidth(Kbit/sec): 0 
    CT6 Bandwidth(Kbit/sec): 0               CT7 Bandwidth(Kbit/sec): 0 
    Explicit Path Name  : -                                Hop Limit: - 
    Record Route        : Disabled              Record Label : Disabled 
    Route Pinning       : Disabled   
    FRR Flag            : Disabled   
    IdleTime Remain     : -          
    BFD Status          : -          
    Soft Preemption     : Disabled   
    Reroute Flag        : Enabled    
    Pce Flag            : Normal     
    Path Setup Type     : CSPF       
    Create Modify LSP Reason: -      
    Self-Ping Status    : -   </pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001157215653__1.3.6"></a><a name="1.3.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>DeviceA configuration file</p>
<pre class="screen">#
sysname DeviceA
#
mpls lsr-id 1.1.1.9
#
mpls
 mpls te
 mpls te cspf
 mpls rsvp-te
#
isis 1
 is-level level-2
 cost-style wide
 network-entity 00.0005.0000.0000.0001.00
 traffic-eng level-2
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.1.2 255.255.255.0
 isis enable 1
 mpls
 mpls te
 mpls te bandwidth max-reservable-bandwidth 10000
 mpls te bandwidth bc0 10000
 mpls rsvp-te
#
interface LoopBack1
 ip address 1.1.1.9 255.255.255.255
 isis enable 1
#
interface Tunnel1
 ip address unnumbered interface LoopBack1
 tunnel-protocol mpls te
 destination 4.4.4.9
 mpls te bandwidth ct0 10000
 mpls te tunnel-id 1
#
return</pre>
</li><li><p>DeviceB configuration file</p>
<pre class="screen">#
sysname DeviceB
#
mpls lsr-id 2.2.2.9
#
mpls
 mpls te
 mpls rsvp-te
#
isis 1
 is-level level-2
 cost-style wide
 network-entity 00.0005.0000.0000.0002.00
 traffic-eng level-2
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 172.16.1.1 255.255.255.0
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 10.1.1.1 255.255.255.0
 isis enable 1
 mpls
 mpls te
 mpls te bandwidth max-reservable-bandwidth 10000
 mpls te bandwidth bc0 10000
 mpls rsvp-te
#
interface LoopBack1
 ip address 2.2.2.9 255.255.255.255
 isis enable 1
 binding tunnel gre
#
interface Tunnel10
 ip address 10.2.1.1 255.255.255.252
 bandwidth 100000
 tunnel-protocol gre
 source 2.2.2.9
 destination 3.3.3.9
 isis enable 1
 mpls
 mpls te
 mpls te bandwidth max-reservable-bandwidth 10000
 mpls te bandwidth bc0 10000
 mpls rsvp-te
#
ospf 1
 opaque-capability enable 
 area 0.0.0.0
  network 2.2.2.9 0.0.0.0
  network 172.16.1.0 0.0.0.255
#
return</pre>
</li><li><p>DeviceC configuration file</p>
<pre class="screen">#
sysname DeviceC
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 172.16.1.2 255.255.255.0
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 172.16.2.1 255.255.255.0
#
ospf 1
 opaque-capability enable 
 area 0.0.0.0
  network 172.16.1.0 0.0.0.255
  network 172.16.2.0 0.0.0.255</pre>
</li><li><p>DeviceD configuration file</p>
<pre class="screen">#
sysname DeviceD
#
mpls lsr-id 3.3.3.9
#
mpls
 mpls te
 mpls rsvp-te
#
isis 1
 is-level level-2
 cost-style wide
 network-entity 00.0005.0000.0000.0003.00
 traffic-eng level-2
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 172.16.2.2 255.255.255.0
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 10.3.1.1 255.255.255.0
 isis enable 1
 mpls
 mpls te
 mpls te bandwidth max-reservable-bandwidth 10000
 mpls te bandwidth bc0 10000
 mpls rsvp-te
#
interface LoopBack1
 ip address 3.3.3.9 255.255.255.255
 isis enable 1
 binding tunnel gre
#
interface Tunnel10
 ip address 10.2.1.2 255.255.255.252
 bandwidth 100000
 tunnel-protocol gre
 source 3.3.3.9
 destination 2.2.2.9
 isis enable 1
 mpls
 mpls te
 mpls te bandwidth max-reservable-bandwidth 10000
 mpls te bandwidth bc0 10000
 mpls rsvp-te
#
ospf 1
 opaque-capability enable 
 area 0.0.0.0
  network 3.3.3.9 0.0.0.0
  network 172.16.2.0 0.0.0.255
#
return</pre>
</li><li>DeviceE configuration file<pre class="screen">#
sysname DeviceE
#
mpls lsr-id 4.4.4.9
#
mpls
 mpls te
 mpls te cspf
 mpls rsvp-te
#
isis 1
 is-level level-2
 cost-style wide
 network-entity 00.0005.0000.0000.0004.00
 traffic-eng level-2
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.3.1.2 255.255.255.0
 isis enable 1
 mpls
 mpls te
 mpls te bandwidth max-reservable-bandwidth 10000
 mpls te bandwidth bc0 10000
 mpls rsvp-te
#
interface LoopBack1
 ip address 4.4.4.9 255.255.255.255
 isis enable 1
#
interface Tunnel1
 ip address unnumbered interface LoopBack1
 tunnel-protocol mpls te
 destination 1.1.1.9
 mpls te bandwidth ct0 10000
 mpls te tunnel-id 1
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0093.html">Configuration Examples for MPLS TE
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0094.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0099.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>