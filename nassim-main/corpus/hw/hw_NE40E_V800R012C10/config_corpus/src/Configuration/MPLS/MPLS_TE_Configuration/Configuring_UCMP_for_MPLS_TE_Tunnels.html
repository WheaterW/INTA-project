
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring UCMP for MPLS TE Tunnels">
<meta name="abstract" content="When multiple MPLS TE tunnels are destined for a downstream device, you can configure UCMP weights or CT bandwidths to load balance traffic among the MPLS TE tunnels in unequal cost multi path (UCMP) mode.">
<meta name="description" content="When multiple MPLS TE tunnels are destined for a downstream device, you can configure UCMP weights or CT bandwidths to load balance traffic among the MPLS TE tunnels in unequal cost multi path (UCMP) mode.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0270.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0037.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="w00845984">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001989028832">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring UCMP for MPLS TE Tunnels</title>
</head>
<body><a name="EN-US_TASK_0000001989028832"></a><a name="EN-US_TASK_0000001989028832"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring UCMP for MPLS TE Tunnels</h1>
<div class="taskbody"><p>When multiple MPLS TE tunnels are destined for a downstream device, you can configure UCMP weights or CT bandwidths to load balance traffic among the MPLS TE tunnels in unequal cost multi path (UCMP) mode.</p>
<div class="context"><a name="EN-US_TASK_0000001989028832__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If UCMP is globally enabled for static MPLS TE and P2P RSVP-TE tunnels and UCMP weights are configured for all the tunnels, UCMP load-balancing is preferentially performed based on the weights. If no load balancing weight is configured for some tunnels but UCMP is globally enabled and CT bandwidths are configured for all tunnels, UCMP load-balancing is performed based on the CT bandwidths. If both weights and CT bandwidths are not configured for tunnels, equal-cost load balancing is performed by default.</p>
<p>When UCMP load-balancing is performed based on weights, the actual weight of a tunnel is calculated using the following formula: Actual weight of this tunnel = 100 x (Weight of this tunnel/Sum of weights of all tunnels).</p>
<p>The volume of traffic carried by a single tunnel in load balancing mode (called load balancing traffic volume of the tunnel for short) is calculated using the following formula: Load balancing traffic volume of a tunnel = Total traffic volume x (Actual weight of the tunnel/Sum of weights of all tunnels). Because the sum of load balancing weights of all TE tunnels may not be exactly divided by the weight of a single TE tunnel, the actual load balancing traffic volume of a TE tunnel may be slightly different from the calculated value.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001989028832__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">tunnel-number</span></i></span><p><p>The MPLS TE tunnel interface view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=load-balance+unequal-cost+enable"><b><span class="cmdname">load-balance unequal-cost enable</span></b></a></span></span><p><p>UCMP load-balancing is enabled globally.</p>
</p></li><li><span>Configure UCMP for MPLS TE tunnels. For details, see <a href="#EN-US_TASK_0000001989028832__table29861143141218">Table 1</a>.</span><p><p>You can perform one or more steps in <a href="#EN-US_TASK_0000001989028832__table29861143141218">Table 1</a>.</p>
</p><p>
<div class="tableBorder"><a name="EN-US_TASK_0000001989028832__table29861143141218"></a><a name="table29861143141218"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0000001989028832__table29861143141218" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring UCMP for TE tunnels</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.2.3.3.1.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.2.3.3.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.2.3.3.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.2.3.3.1.2.4.1.1 "><p>Configure a UCMP load-balancing weight for each MPLS TE tunnel.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.2.3.3.1.2.4.1.2 "><p><a href="cmdqueryname=load-balance+unequal-cost+weight"><b><span class="cmdname">load-balance unequal-cost weight</span></b></a> <i><span class="varname">weight</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.2.3.3.1.2.4.1.3 "><p>This function takes effect only when UCMP load-balancing weights are configured for all tunnels.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.2.3.3.1.2.4.1.1 "><p>Configure a bandwidth for each MPLS TE tunnel.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.2.3.3.1.2.4.1.2 "><p><strong><a href="cmdqueryname=mpls+te+bandwidth"><b><span class="cmdname">mpls te bandwidth</span></b></a> </strong><em><i><span class="varname">ctType</span></i></em><em> <i><span class="varname">ctValue</span></i></em></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.2.3.3.1.2.4.1.3 "><p>This function takes effect only when bandwidths are configured for all tunnels.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0000.html">MPLS TE Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0270.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0037.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>