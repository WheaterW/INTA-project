
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring a P2P TE Tunnel Template">
<meta name="abstract" content="A P2P TE tunnel template can be configured, and MPLS TE tunnel attributes can be set in the template.">
<meta name="description" content="A P2P TE tunnel template can be configured, and MPLS TE tunnel attributes can be set in the template.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0205.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0206.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0208.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,te-p2pvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368131">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>(Optional) Configuring a P2P TE Tunnel Template</title>
</head>
<body><a name="EN-US_TASK_0172368131"></a><a name="EN-US_TASK_0172368131"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring a P2P TE Tunnel Template</h1>
<div class="taskbody"><p>A P2P TE tunnel template can be configured, and MPLS TE tunnel attributes can be set in the template.</p>
<div class="context"><a name="EN-US_TASK_0172368131__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>Before you create P2P TE tunnels in a batch, create a P2P TE tunnel template and configure parameters, such as bandwidth and a path limit, in the template. The <a href="cmdqueryname=mpls+te+auto-primary-tunnel"><b><span class="cmdname">mpls te auto-primary-tunnel</span></b></a> command can then be run to reference this template. The device automatically uses the parameters configured in the P2P TE tunnel template to create P2P TE tunnels in a batch.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368131__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=mpls+te+p2p-template"><b><span class="cmdname">mpls te p2p-template</span></b></a> <i><span class="varname">template-name</span></i></span></span><p><p>A P2P TE tunnel template is created, and the P2P TE tunnel template view is displayed.</p>
</p></li><li><span>Select one or more operations.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Operations</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.2.3.2.1.2.3.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.2.3.2.1.2.3.1.2" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=bandwidth"><b><span class="cmdname">bandwidth</span></b></a> <strong><span>ct0</span></strong> <i><span class="varname">bw-value</span></i> command to configure the CT0 bandwidth for MPLS TE tunnels.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>Before bandwidth protection is provided for traffic transmitted along a P2P TE tunnel, run the <a href="cmdqueryname=bandwidth"><b><span class="cmdname">bandwidth</span></b></a> command to set the required bandwidth value for the tunnel. Nodes on the P2P TE tunnel can then reserve bandwidth for services, which implements bandwidth protection.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=record-route"><b><span class="cmdname">record-route</span></b></a> [ <strong><span>label</span></strong> ] command to enable the route and label record for MPLS TE tunnels.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>This step enables nodes along a P2P TE tunnel to use RSVP messages to record detailed P2P TE tunnel information, including the IP address of each hop. The <strong><span>label</span></strong> parameter in the <a href="cmdqueryname=record-route"><b><span class="cmdname">record-route</span></b></a> command enables RSVP messages to record label values.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=resv-style"><b><span class="cmdname">resv-style</span></b></a> { <strong><span>se</span></strong> | <strong><span>ff</span></strong> } command to specify the resource reservation style for MPLS TE tunnels.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=path+metric-type"><b><span class="cmdname">path metric-type</span></b></a> { <strong><span>igp</span></strong> | <strong><span>te</span></strong> } command to specify the link metric type for MPLS TE tunnels.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=affinity+property"><b><span class="cmdname">affinity property</span></b></a> <i><span class="varname">properties</span></i> [ <strong><span>mask</span></strong> <i><span class="varname">mask-value</span></i> ] command to configure an affinity constraint for MPLS TE tunnels.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>An affinity is a 32-bit vector value used to describe an MPLS link. An affinity and an administrative group attribute define the nodes through which an MPLS TE tunnel passes. Affinity masks determine the link properties that should be checked by a device. If some bits in the mask are 1, at least one bit in an administrative group is 1, and the corresponding bit in the affinity must be 1. If the bits in the affinity are 0s, the corresponding bits in the administrative group cannot be 1.</p>
<p>You can use an affinity to control the nodes through which a P2P TE tunnel passes.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=affinity"><b><span class="cmdname">affinity</span></b></a> <strong><span>primary</span></strong> { <strong><span>include-all</span></strong> | <strong><span>include-any</span></strong> | <strong><span>exclude</span></strong> } <i><span class="varname">bit-name</span></i> &amp;&lt;1-32&gt; command to configure an affinity for an MPLS TE tunnel.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>Before running this command, run the <a href="cmdqueryname=path-constraint+affinity-mapping"><b><span class="cmdname">path-constraint affinity-mapping</span></b></a> command in the system view to create an affinity name template. In addition, run the <a href="cmdqueryname=attribute"><b><span class="cmdname">attribute</span></b></a> <i><span class="varname">affinity-name</span></i> <strong><span>bit-sequence</span></strong> <i><span class="varname">bit-number</span></i> command to configure the mappings between affinity bit values and names in the template view.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=hop-limit"><b><span class="cmdname">hop-limit</span></b></a> <i><span class="varname">hop-limit-value</span></i> command to set the maximum number of hops on an MPLS TE tunnel.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>Run this command to set the maximum number of hops that each CR-LSP in an MPLS TE tunnel supports.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=tie-breaking"><b><span class="cmdname">tie-breaking</span></b></a> { <strong><span>least-fill</span></strong> | <strong><span>most-fill</span></strong> | <strong><span>random</span></strong> } command to configure a rule for selecting a route among multiple routes to the same destination.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=priority"><b><span class="cmdname">priority</span></b></a> <i><span class="varname">setup-priority</span></i> [ <i><span class="varname">hold-priority</span></i> ] command to set the setup and holding priority values for MPLS TE tunnels.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>The setup priority of a tunnel must be no higher than its holding priority. To be specific, a setup priority value must be greater than or equal to a holding priority value.</p>
<p>If resources are insufficient, setting the setup and holding priority values helps a device release LSPs with lower priorities and use the released resources to establish LSPs with higher priorities.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=reoptimization"><b><span class="cmdname">reoptimization</span></b></a> [ <strong><span>frequency</span></strong> <i><span class="varname">interval</span></i> ] command to enable the periodic re-optimization for MPLS TE tunnels.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>Periodic re-optimization allows an MPLS TE tunnel to be automatically reestablished over a path with a lower cost. After a path with a lower cost to the same destination has been calculated for a specific reason, such as a cost change, a TE tunnel will be automatically reestablished, optimizing resources on a network.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=bfd+enable"><b><span class="cmdname">bfd enable</span></b></a> command to enable BFD for TE CR-LSP.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>To rapidly detect LSP faults and improve network reliability, configuring BFD for TE CR-LSP is recommended.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> { <strong><span>min-tx-interval</span></strong> <i><span class="varname">tx-interval</span></i> | <strong><span>min-rx-interval</span></strong> <i><span class="varname">rx-interval</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">multiplier</span></i> } <sup>*</sup> command to configure BFD for TE CR-LSP parameters.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>BFD parameters can be set to control BFD detection sensitivity.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=fast-reroute"><b><span class="cmdname">fast-reroute</span></b></a> [ <strong><span>bandwidth</span></strong> ] command to enable TE FRR.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>TE FRR is recommended for primary MPLS TE tunnels, which improves network reliability.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=bypass-attributes"><b><span class="cmdname">bypass-attributes</span></b></a> { <strong><span>bandwidth</span></strong> <i><span class="varname">bandwidth</span></i> | <strong><span>priority</span></strong> <i><span class="varname">setup-priority</span></i> [ <i><span class="varname">hold-priority</span></i> ] } <sup>*</sup> command to configure bypass tunnel attributes.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>A bypass tunnel is established using the configured bypass tunnel attributes. The bypass tunnel bandwidth cannot exceed the primary tunnel bandwidth. The setup priority of a bypass tunnel must be lower than or equal to the holding priority. Both of them must be lower than or equal to those of the primary tunnel.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.1 "><p>Run the <a href="cmdqueryname=lsp-tp+outbound"><b><span class="cmdname">lsp-tp outbound</span></b></a> command to enable traffic policing for MPLS TE tunnels.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.3.2.1.2.3.1.2 "><p>Physical links over which a TE tunnel is established may also transmit traffic of other TE tunnels, non-CR-LSP traffic, or even IP traffic, in addition to the TE tunnel traffic. To limit TE traffic within a configured bandwidth range, enable traffic policing for a specific MPLS TE tunnel.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0205.html">Configuring the IP-Prefix Tunnel Function
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0206.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0208.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>