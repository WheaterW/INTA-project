
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling the TE FRR and Configuring the AutoBypass Tunnel Attributes">
<meta name="abstract" content="After MPLS TE FRR is enabled on the ingress of a primary LSP, a bypass LSP is established automatically.">
<meta name="description" content="After MPLS TE FRR is enabled on the ingress of a primary LSP, a bypass LSP is established automatically.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0202.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0203.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0185_copy.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,te-p2pvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368220">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Enabling the TE FRR and Configuring the AutoBypass Tunnel Attributes</title>
</head>
<body><a name="EN-US_TASK_0172368220"></a><a name="EN-US_TASK_0172368220"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling the TE FRR and Configuring the AutoBypass Tunnel Attributes</h1>
<div class="taskbody"><p>After MPLS TE FRR is enabled on the ingress of a primary LSP, a bypass LSP is established automatically.</p>
<div class="steps"><a name="EN-US_TASK_0172368220__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172368220__en-us_task_0172368206_steps1805510934214046"><li id="EN-US_TASK_0172368220__en-us_task_0172368206_step1560495208214046"><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmd1584074689214331">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname1638190842214331">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1716025121214331">The system view is displayed.</p>
</p></li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_step354130146214046"><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmd96751469214331">Run <span><a href="cmdqueryname=interface+tunnel"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname1946882409214331">interface tunnel</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname1993482134214331">tunnel-number</span></i></span></span><p><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1602321751214331">The tunnel interface view of the primary LSP is displayed.</p>
</p></li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_step1513306157214046"><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmd1487749278214046">Run <span><a href="cmdqueryname=mpls+te+fast-reroute"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname729527119214046">mpls te fast-reroute</span></b></a> [ <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname677937600214331">bandwidth</span></strong> ]</span></span><p><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p4616195611287">TE FRR is enabled.</p>
</p><p><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p449618242214331">If TE FRR bandwidth protection is needed, configure the <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname1128457066214046">bandwidth</span></strong> parameter in this command.</p>
</p></li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_step1124192915496"><span id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_step1">(Optional) Run <a href="cmdqueryname=mpls+te+frr-switch+degrade"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_cmdname164173433385">mpls te frr-switch degrade</span></b></a></span><p><p id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_p135601239121810">The MPLS TE tunnel is enabled to mask the FRR function.</p>
</p><p><p id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_p104468181416">After TE FRR takes effect, traffic is switched to the bypass LSP when the primary LSP fails. If the bypass LSP is not the optimal path, traffic congestion easily occurs. To prevent traffic congestion, you can configure LDP to protect TE tunnels. To have the LDP protection function take effect, you need to run the <a href="cmdqueryname=mpls+te+frr-switch+degrade"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_cmdname2015611814197">mpls te frr-switch degrade</span></b></a> command to enable the MPLS TE tunnel to mask the FRR function. After the command is run:</p>
<ol type="a" id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_ol16206617185217"><li id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_li72065179529"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_p1207101713528"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_li72065179529"></a><a name="en-us_task_0172368206_en-us_task_0172368197_li72065179529"></a>If the primary LSP is in the FRR-in-use state (that is, traffic has been switched to the bypass LSP), traffic cannot be switched to the primary LSP.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_li32071417105212"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_p1020719177527"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_li32071417105212"></a><a name="en-us_task_0172368206_en-us_task_0172368197_li32071417105212"></a>If HSB is configured for the tunnel and an HSB LSP is available, traffic is switched to the HSB LSP.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_li42076176525"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_p3207151711526"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_li42076176525"></a><a name="en-us_task_0172368206_en-us_task_0172368197_li42076176525"></a>If no HSB LSP is available for the tunnel, the tunnel is unavailable, and traffic is switched to another tunnel like an LDP tunnel.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_li22073174521"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_p1420841716526"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_en-us_task_0172368197_li22073174521"></a><a name="en-us_task_0172368206_en-us_task_0172368197_li22073174521"></a>If no tunnels are available, traffic is interrupted.</p>
</li></ol>
</p></li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_step1269295789214046"><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmd2099260072214046">(Optional) Run <a href="cmdqueryname=mpls+te+bypass-attributes"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname1305979106214046">mpls te bypass-attributes</span></b></a> [ <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname363164077214046">bandwidth</span></strong> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname883145898214046">bandwidth</span></i> | <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname1725528774214046">priority</span></strong> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname504810427214046">setup-priority</span></i> [ <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname731749256214046">hold-priority</span></i> ] ]</span><p><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p317971944713">Attributes are set for the automatic bypass LSP.</p>
</p><p><div class="note" id="EN-US_TASK_0172368220__en-us_task_0172368206_note1481646645214046"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0172368220__en-us_task_0172368206_ul1962275550214046"><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li1233546855214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p414863847214046"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li1233546855214046"></a><a name="en-us_task_0172368206_li1233546855214046"></a>The bandwidth attribute can only be set for the bypass LSP after the <a href="cmdqueryname=mpls+te+fast-reroute"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname428217137467">mpls te fast-reroute</span></b></a> <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname8282151394620">bandwidth</span></strong> command is run for the primary LSP.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li383648341214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1231758893214046"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li383648341214046"></a><a name="en-us_task_0172368206_li383648341214046"></a>The bypass LSP bandwidth cannot exceed the primary LSP bandwidth.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li454971164214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1658570028214046"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li454971164214046"></a><a name="en-us_task_0172368206_li454971164214046"></a>If no attributes are configured for an automatic bypass LSP, by default, the automatic bypass LSP uses the same bandwidth as that of the primary LSP.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li837444064214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p314561210214046"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li837444064214046"></a><a name="en-us_task_0172368206_li837444064214046"></a>The setup priority of a bypass LSP must be lower than or equal to the holding priority. These priorities cannot be higher than the corresponding priorities of the primary LSP.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li927948102214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p997505800214046"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li927948102214046"></a><a name="en-us_task_0172368206_li927948102214046"></a>If TE FRR is disabled, the bypass LSP attributes are automatically deleted.</p>
</li></ul>
</div></div>
</p></li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_step96271841131618"><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmd6627144118168">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname41410389166">quit</span></b></a></span><p><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p91794715469">Return to the system view.</p>
</p></li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_step13903153324810"><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmd1290373304814">(Optional) Configure attributes for a bypass LSP.</span><ol type="a" id="EN-US_TASK_0172368220__en-us_task_0172368206_substeps674735714820"><li class="substepexpand" id="EN-US_TASK_0172368220__en-us_task_0172368206_substep13747145774811"><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmd774713573484">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname10246112610498">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname9246202664911">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname9246426114920">interface-number</span></i></span><p><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p96911278192">The interface view of the link through which the bypass LSP passes is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368220__en-us_task_0172368206_substep7993826184916"><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmd517119511408">Run <a href="cmdqueryname=mpls+te+auto-frr+attributes"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname1130431194917">mpls te auto-frr attributes</span></b></a> { <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname13063117494">bandwidth</span></strong> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname33015318493">bandwidth</span></i> | <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname530183112496">priority</span></strong> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname7307315497">setup-priority</span></i> [ <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname1430331164913">hold-priority</span></i> ] | <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname1630631154910">hop-limit</span></strong> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname63023174913">hop-limit-value</span></i> }</span><p><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p14333855123914">Attributes are configured for the bypass LSP.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368220__en-us_task_0172368206_substep128017469497"><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmd380164613496">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname31501850174915">quit</span></b></a></span><p><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p12237857151913">Return to the system view.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_step1591660112214046"><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmd1306065738214046">(Optional) Configure affinities for the automatic bypass tunnel.</span><p><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p2009459613214331">Affinities determine link attributes of an automatic bypass LSP. Affinities and a link administrative group attribute are used together to determine over which links the automatic bypass LSP can be established.</p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p684557183214331">Perform either of the following configurations:</p>
</p><ul id="EN-US_TASK_0172368220__en-us_task_0172368206_choices848469905214046"><li id="EN-US_TASK_0172368220__en-us_task_0172368206_choice1309411807214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p2019309440214046"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_choice1309411807214046"></a><a name="en-us_task_0172368206_choice1309411807214046"></a>Set a hexadecimal number.</p>
<ol type="a" id="EN-US_TASK_0172368220__en-us_task_0172368206_ol674773001214046"><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li719159445214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1763348545214331"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li719159445214046"></a><a name="en-us_task_0172368206_li719159445214046"></a>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname1045541170214331">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname1344372026214331">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname1837643819214331">interface-number</span></i></span></p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p743503790214331">The interface view of the link through which the bypass LSP passes is displayed.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li267150621214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p792603003214331"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li267150621214046"></a><a name="en-us_task_0172368206_li267150621214046"></a>Run <span><a href="cmdqueryname=mpls+te+link+administrative+group"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname976172810214331">mpls te link administrative group</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname1327318740214331">value</span></i></span></p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p473679823214331">An administrative group attribute is specified.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li1631369397214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p4291871518"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li1631369397214046"></a><a name="en-us_task_0172368206_li1631369397214046"></a>(Optional) Run <a href="cmdqueryname=mpls+te+auto-frr+attributes+affinity"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname1802387475214046">mpls te auto-frr attributes affinity</span></b></a> <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname1648553179214046">property</span></strong> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname2091522982214046">properties</span></i> [ <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname1486974974214046">mask</span></strong> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname698407114214046">mask-value</span></i> ] or <a href="cmdqueryname=mpls+te+auto-frr+attributes+affinity"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname853137918214046">mpls te auto-frr attributes affinity</span></b></a> { <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname874433517214046">include-all</span></strong> | <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname753597248214046">include-any</span></strong> | <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname816753227214046">exclude</span></strong> } <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname517904576214046">bit-name</span></i> &amp;&lt;1-32&gt;</p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p157276583506">An affinity is configured for the bypass LSP.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li2025747635214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1160170644214331"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li2025747635214046"></a><a name="en-us_task_0172368206_li2025747635214046"></a>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname560147901214331">quit</span></b></a></span></p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1998399444214331">Return to the system view.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li77262000214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p55609023214331"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li77262000214046"></a><a name="en-us_task_0172368206_li77262000214046"></a>Run <span><a href="cmdqueryname=interface+tunnel"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname1590997648214331">interface tunnel</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname920368674214331">tunnel-number</span></i></span></p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1404924253214331">The tunnel interface view of the primary LSP is displayed.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li1129963426214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p10845153518265"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li1129963426214046"></a><a name="en-us_task_0172368206_li1129963426214046"></a>Run <span><a href="cmdqueryname=mpls+te+bypass-attributes+affinity"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname1226929532214046">mpls te bypass-attributes affinity</span></b></a> <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname1318713831214331">property</span></strong> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname334581380214331">properties</span></i> [ <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname934926003214331">mask</span></strong> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname1557633458214331">mask-value</span></i>]</span></p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p377822711264">An affinity is configured for the bypass LSP.</p>
</li></ol>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_choice2023313232214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p421939979214046"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_choice2023313232214046"></a><a name="en-us_task_0172368206_choice2023313232214046"></a>Set an affinity name.</p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1217266774214046">Naming an affinity makes the affinity easy to understand and maintain. Setting an affinity name is recommended.</p>
<ol type="a" id="EN-US_TASK_0172368220__en-us_task_0172368206_ol68993113214046"><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li1478283168214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1520366707214331"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li1478283168214046"></a><a name="en-us_task_0172368206_li1478283168214046"></a>Run <span><a href="cmdqueryname=path-constraint+affinity-mapping"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname1068022386214331">path-constraint affinity-mapping</span></b></a></span></p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p734067720214331">An affinity name mapping template is configured, and the template view is displayed.</p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p507014612214331">Repeat this step on each node used to calculate the path over which an automatic bypass LSP is established. The affinity name configured on each node must match the mappings between affinity bits and names.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li1784904090214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p10175123041211"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li1784904090214046"></a><a name="en-us_task_0172368206_li1784904090214046"></a>Run <a href="cmdqueryname=attribute"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname111753305129">attribute</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname817563091213">affinity-name</span></i> <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname717513012125">bit-sequence</span></strong> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname717593031218">bit-number</span></i></p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p676593361212">The mapping between the name and bit value in an affinity is configured.</p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p105356353214046">There are 32 affinity bits in total. You can repeat this step to configure some or all affinity bits.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li115660582214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1545084913214331"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li115660582214046"></a><a name="en-us_task_0172368206_li115660582214046"></a>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname1086733848214331">quit</span></b></a></span></p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1430721950214331">Return to the system view.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li1484628679214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p243255383214331"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li1484628679214046"></a><a name="en-us_task_0172368206_li1484628679214046"></a>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname101771845214331">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname1571116176214331">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname799526480214331">interface-number</span></i></span></p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1591481752214331">The interface view of the link through which the bypass LSP passes is displayed.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li200959420214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1092129011214331"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li200959420214046"></a><a name="en-us_task_0172368206_li200959420214046"></a>Run <span><a href="cmdqueryname=mpls+te+link+administrative+group+name"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname505083832214331">mpls te link administrative group name</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname1318258679214331">bit-name</span></i> &amp;&lt;1-32&gt;</span></p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1342113845214331">An administrative group attribute is specified.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li366789047214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p140741286214331"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li366789047214046"></a><a name="en-us_task_0172368206_li366789047214046"></a>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname1619574870214331">quit</span></b></a></span></p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p283588118214331">Return to the system view.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li2035368065214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1573295275214331"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li2035368065214046"></a><a name="en-us_task_0172368206_li2035368065214046"></a>Run <span><a href="cmdqueryname=interface+tunnel"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname374302974214331">interface tunnel</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname575158709214331">tunnel-number</span></i></span></p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p887209253214331">The tunnel interface view of the primary LSP is displayed.</p>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_li2105239795214046"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p2001787394214331"><a name="EN-US_TASK_0172368220__en-us_task_0172368206_li2105239795214046"></a><a name="en-us_task_0172368206_li2105239795214046"></a>Run <span><a href="cmdqueryname=mpls+te+bypass-attributes+affinity"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname1738014186214331">mpls te bypass-attributes affinity</span></b></a> { <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname2130450682214331">include-all</span></strong> | <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname2132962955214331">include-any</span></strong> | <strong><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdparmname1809996195214331">exclude</span></strong> } <i><span class="varname" id="EN-US_TASK_0172368220__en-us_task_0172368206_varname203493809214331">bit-name</span></i> &amp;&lt;1-32&gt;</span></p>
<p id="EN-US_TASK_0172368220__en-us_task_0172368206_p314453760214331">An affinity is configured for the bypass LSP.</p>
</li></ol>
<div class="note" id="EN-US_TASK_0172368220__en-us_task_0172368206_note904775870214046"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p236342683214046">If an automatic bypass LSP that satisfies the specified affinity cannot be established, a node will bind a manual bypass LSP satisfying the specified affinity to the primary LSP.</p>
</div></div>
</li></ul>
</li><li id="EN-US_TASK_0172368220__en-us_task_0172368206_step653887404214046"><span id="EN-US_TASK_0172368220__en-us_task_0172368206_cmd503579910214331">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172368220__en-us_task_0172368206_cmdname314597410214331">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172368220__en-us_task_0172368206_p1286934259214331">The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0202.html">Configuring P2MP TE Auto FRR
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0203.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0185_copy.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>