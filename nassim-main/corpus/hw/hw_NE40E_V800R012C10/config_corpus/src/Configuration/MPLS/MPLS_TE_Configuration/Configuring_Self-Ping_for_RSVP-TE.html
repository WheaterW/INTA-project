
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Self-Ping for RSVP-TE">
<meta name="abstract" content="Self-ping is a connectivity check method for RSVP-TE LSPs.">
<meta name="description" content="Self-ping is a connectivity check method for RSVP-TE LSPs.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0067.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0018.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0225721561">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Self-Ping for RSVP-TE</title>
</head>
<body><a name="EN-US_TASK_0225721561"></a><a name="EN-US_TASK_0225721561"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Self-Ping for RSVP-TE</h1>
<div class="taskbody"><p>Self-ping is a connectivity check method for RSVP-TE LSPs.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0225721561__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring self-ping for RSVP-TE, complete the following task:</p>
<ul><li><p><a href="dc_vrp_te-p2p_cfg_0003.html">Configure RSVP-TE tunnels.</a></p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0225721561__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After an RSVP-TE LSP is established, the system sets the LSP status to up, without waiting for forwarding relationships to be completely established between nodes on the forwarding path. If service traffic is imported to the LSP before all forwarding relationships are established, some early traffic may be lost.</p>
<p>Self-ping can address this issue by checking whether the LSP can forward traffic.</p>
<p>Self-ping can be configured globally or for a specified tunnel. If both are configured, the tunnel-specific configuration takes effect.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0225721561__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure self-ping globally.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls"><b><span class="cmdname">mpls</span></b></a></span></span><p><p>The MPLS view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls+te"><b><span class="cmdname">mpls te</span></b></a></span></span><p><p>MPLS TE is enabled for the device.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+te+self-ping+enable"><b><span class="cmdname">mpls te self-ping enable</span></b></a></span><p><p>Self-ping is enabled globally.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=mpls+te+self-ping+duration"><b><span class="cmdname">mpls te self-ping duration</span></b></a> <em>self-ping-duration</em></span><p><p>The self-ping duration is set globally.</p>
</p><p><p>Value 65535 indicates an infinite detection duration.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure self-ping for a specified tunnel.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">interface-number</span></i></span><p><p>A tunnel interface is created, and its view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=tunnel-protocol+mpls+te"><b><span class="cmdname">tunnel-protocol mpls te</span></b></a></span><p><p>MPLS TE is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+te+self-ping+enable"><b><span class="cmdname">mpls te self-ping enable</span></b></a></span><p><p>Self-ping is enabled for the specified tunnel.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=mpls+te+self-ping+duration"><b><span class="cmdname">mpls te self-ping duration</span></b></a> <em>self-ping-duration</em></span><p><p>The self-ping duration is set for the specified tunnel.</p>
</p><p></p><p><p>Value 65535 indicates an infinite detection duration.</p>
<p>If self-ping is enabled globally but not for a specific tunnel, the global self-ping duration is effective for the tunnel. However, if self-ping is also enabled for the tunnel, the tunnel-specific self-ping duration is effective.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Block self-ping for a specified tunnel.</span><p><p>If self-ping is enabled globally but this function should not be enabled for a tunnel, you can perform the following steps to block self-ping for the tunnel:</p>
</p><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">interface-number</span></i></span><p><p>A tunnel interface is created, and its view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=tunnel-protocol+mpls+te"><b><span class="cmdname">tunnel-protocol mpls te</span></b></a></span><p><p>MPLS TE is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+te+self-ping+block"><b><span class="cmdname">mpls te self-ping block</span></b></a></span><p><p>Self-ping is blocked for the specified tunnel.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure whitelist session-CAR for self-ping.</span><p><p>When the self-ping service suffers a traffic burst, bandwidth may be preempted among self-ping sessions. To resolve this problem, you can configure whitelist session-CAR for self-ping to isolate bandwidth resources by session. If the default parameters of whitelist session-CAR for self-ping do not meet service requirements, you can adjust them as required.</p>
</p><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=whitelist+session-car+ospf+disable"><b><span class="cmdname">whitelist session-car ospf disable</span></b></a></span><p><p>Whitelist session-CAR for self-ping is disabled.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=whitelist+session-car+self-ping"><b><span class="cmdname">whitelist session-car self-ping </span></b></a>{ <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i> | <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i> | <strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i> | <strong><span>pbs</span></strong> <i><span class="varname">pbs-value</span></i> } <sup>*</sup></span><p><p>Parameters of whitelist session-CAR for self-ping are configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
<div class="example"><a name="EN-US_TASK_0225721561__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring self-ping for RSVP-TE, verify the configuration.</p>
<ul><li>Run the <a href="cmdqueryname=display+mpls+te+tunnel-interface"><b><span class="cmdname">display mpls te tunnel-interface</span></b></a> command to check the self-ping configuration. In the command output, the <strong>Self-Ping</strong> field indicates whether self-ping is enabled, and the <strong>Self-Ping Duration</strong> field indicates the self-ping duration.</li><li>Run the <a href="cmdqueryname=display+cpu-defend+whitelist+session-car"><b><span class="cmdname">display cpu-defend whitelist session-car</span></b></a> <strong><span>self-ping</span></strong> <strong><span>statistics</span></strong> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> command to check whitelist session-CAR statistics about self-ping packets on a specified interface board.<p>To check the statistics in a coming period of time, you can run the <a href="cmdqueryname=reset+cpu-defend+whitelist+session-car"><b><span class="cmdname">reset cpu-defend whitelist session-car</span></b></a> <strong><span>self-ping</span></strong> <strong><span>statistics</span></strong> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> command to clear the existing whitelist session-CAR statistics about self-ping packets first. Then, after the period elapses, run the <a href="cmdqueryname=display+cpu-defend+whitelist+session-car"><b><span class="cmdname">display cpu-defend whitelist session-car</span></b></a> <strong><span>self-ping</span></strong> <strong><span>statistics</span></strong> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> command. In this case, all the statistics are newly generally, facilitating statistics query.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Cleared whitelist session-CAR statistics cannot be restored. Exercise caution when running the reset command.</p>
</div></div>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0000.html">MPLS TE Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0067.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0018.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>