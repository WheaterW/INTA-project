
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Time Source Attributes for BMCA Selection">
<meta name="abstract" content="This section describes how to configure time source attributes used for BMCA selection. The devices configured with time source attributes can participate in BMCA selection. A local clock on a 1588v2 device can also participate in BMCA selection. The BMCA helps 1588v2 devices select a grandmaster clock. The grandmaster clock provides time signals for other devices over a 1588v2 network. 1588v2 devices obtain time synchronization information from the grandmaster.">
<meta name="description" content="This section describes how to configure time source attributes used for BMCA selection. The devices configured with time source attributes can participate in BMCA selection. A local clock on a 1588v2 device can also participate in BMCA selection. The BMCA helps 1588v2 devices select a grandmaster clock. The grandmaster clock provides time signals for other devices over a 1588v2 network. 1588v2 devices obtain time synchronization information from the grandmaster.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5004.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5007_a.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00845984,w00606909,l00587852">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="1588v2">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="1588v2">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="1588v2">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="OWNER" content="w00845984">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001825841181">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Time Source Attributes for BMCA Selection</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001825841181"></a><a name="EN-US_TASK_0000001825841181"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Time Source Attributes for BMCA Selection</h1>
<div class="taskbody"><p>This section describes how to configure time source attributes used for BMCA selection. The devices configured with time source attributes can participate in BMCA selection. A local clock on a 1588v2 device can also participate in BMCA selection. The BMCA helps 1588v2 devices select a grandmaster clock. The grandmaster clock provides time signals for other devices over a 1588v2 network. 1588v2 devices obtain time synchronization information from the grandmaster.</p>
<div class="context"><a name="EN-US_TASK_0000001825841181__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A 1588v2 <span class="keyword">Router</span> runs the BMCA to use the following parameters in sequence to select a grandmaster clock:</p>
<ul><li><strong><span>priority1</span></strong></li><li><strong><span>clock-class</span></strong></li><li><strong><span>clock-accuracy</span></strong></li><li><strong><span>priority2</span></strong></li></ul>
<p>For example, the <span class="keyword">Router</span> compares <strong><span>priority1</span></strong> values of two candidates. If the two candidates have the same <strong><span>priority1</span></strong> value, the <span class="keyword">Router</span> compares clock classes of the two candidates. The process repeats until the <span class="keyword">Router</span> selects a grandmaster clock.</p>
<p>Perform the following steps on the <span class="keyword">Router</span>s connected to external BITS time sources (including PTP interfaces and external time interfaces) on the 1588v2 network.</p>
<div class="note" id="EN-US_TASK_0000001825841181__note3877182616301"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0000001825841181__ul742948175416"><li id="EN-US_TASK_0000001825841181__li642104815414">When a time server is interconnected with a device (through a PTP interface or external time interface), it is recommended that the local priority2 (<i><span class="varname" id="EN-US_TASK_0000001825841181__varname528225417334">priority2-value</span></i>) be configured for the device and other parameters take the default values. When a device is interconnected with a time server or third-party device through an external time interface, you need to set priority2 (<i><span class="varname" id="EN-US_TASK_0000001825841181__varname189434016554">priority2-value</span></i>) for the external time interface and retain the default values for other parameters.</li><li id="EN-US_TASK_0000001825841181__li843114811543">You are advised to retain the default values of <i><span class="varname" id="EN-US_TASK_0000001825841181__varname2021951710563">time-source-value</span></i>, <i><span class="varname" id="EN-US_TASK_0000001825841181__varname6219101719567">clock-accuracy-value</span></i>, <i><span class="varname" id="EN-US_TASK_0000001825841181__varname721961715610">clock-class-value</span></i>, <em id="EN-US_TASK_0000001825841181__i1521931775615">priority1-value</em>, <em id="EN-US_TASK_0000001825841181__i4219101716560">clockid-value</em>, and <em id="EN-US_TASK_0000001825841181__i5219917205618">offsetscaled-logvariance-value</em> for the time source.</li></ul>
</div></div>
<div class="note" id="EN-US_TASK_0000001825841181__note61234011523"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001825841181__p0121140135216">This section uses the BITS1 external time interface as an example. The actual quantity of external time interfaces and their types and numbers vary with the hardware configuration. You need to set them based on the actual situation.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001825841181__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Configure priority2 of the time source.</span><p><pre class="screen"><a href="cmdqueryname=ptp+clock-source"><b><span class="cmdname">ptp clock-source</span></b></a> { <strong><span>local</span></strong> | <strong><span>bits1</span></strong> } <strong><span>priority2</span></strong> <i><span class="varname">priority2-value</span></i></pre>
</p></li><li><span>(Optional) Configure the time source type.</span><p><pre class="screen"><a href="cmdqueryname=ptp+clock-source"><b><span class="cmdname">ptp clock-source</span></b></a> { <strong><span>local</span></strong> | <strong><span>bits1</span></strong> } <strong><strong><span>time-source</span></strong></strong> <em>time-source-value</em> </pre>
<p>For the mapping between the <i><span class="varname">time-source-value</span></i> parameter and time source types, see <a href="cmdqueryname=ptp+clock-source"><b><span class="cmdname">ptp clock-source</span></b></a> in the <em><span class="keyword">NE40E</span> Command Reference</em>.</p>
</p></li><li><span>(Optional) Configure the accuracy of the time source.</span><p><pre class="screen"><a href="cmdqueryname=ptp+clock-source"><b><span class="cmdname">ptp clock-source</span></b></a> { <strong><span>local</span></strong> | <strong><span>bits1</span></strong> } <strong><strong><span>clock-accuracy</span></strong></strong> <em><i><span class="varname">clock-accuracy-value</span></i></em> </pre>
</p><p><p>For the mapping between the <i><span class="varname">clock-accuracy-value</span></i> parameter and clock precision, see <a href="cmdqueryname=ptp+clock-source"><b><span class="cmdname">ptp clock-source</span></b></a> in the <em><span class="keyword">NE40E</span> Command Reference</em>.</p>
</p></li><li><span>(Optional) Configure the clock class of the time source.</span><p><pre class="screen"><a href="cmdqueryname=ptp+clock-source"><b><span class="cmdname">ptp clock-source</span></b></a> { <strong><span>local</span></strong> | <strong><span>bits1</span></strong> } <strong><span>clock-class</span></strong> <em><i><span class="varname">clock-class-value</span></i></em></pre>
<p>For the mapping between the <i><span class="varname">clock-class-value</span></i> parameter and the clock source class, see <a href="cmdqueryname=ptp+clock-source"><b><span class="cmdname">ptp clock-source</span></b></a> in the <em><span class="keyword">NE40E</span> Command Reference</em>. If the <i><span class="varname">clock-class-value</span></i> value is less than 128, the device cannot function as a slave clock.</p>
</p></li><li><span>(Optional) Configure priority1 of the time source.</span><p><pre class="screen"><a href="cmdqueryname=ptp+clock-source"><b><span class="cmdname">ptp clock-source</span></b></a> { <strong><span>local</span></strong> | <strong><span>bits1</span></strong> } <strong><span>priority1</span></strong> <em><i><span class="varname">priority1-value</span></i></em></pre>
</p></li><li><span>(Optional) Configure the grandmaster clock ID of the time source.</span><p><pre class="screen"><a href="cmdqueryname=ptp+clock-source"><b><span class="cmdname">ptp clock-source</span></b></a> <strong><span>bits1 grandmaster-clockid</span></strong> <em><i><span class="varname">clockid-value</span></i></em></pre>
</p></li><li><span>(Optional) Configure the stability value of the time source.</span><p><pre class="screen"><a href="cmdqueryname=ptp+clock-source"><b><span class="cmdname">ptp clock-source</span></b></a> <strong><span>bits1 offsetscaled-logvariance</span></strong> <em>offsetscaled-logvariance-value</em></pre>
</p></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5004.html">Configuring Dynamic 1588v2 Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5005.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5007_a.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>