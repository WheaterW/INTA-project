
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Middle-Point Device">
<meta name="abstract" content="This section describes how to use user-defined parameter settings to configure Simple Network Management Protocol (SNMP) proxy on the middle-point device.">
<meta name="description" content="This section describes how to use user-defined parameter settings to configure Simple Network Management Protocol (SNMP) proxy on the middle-point device.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0027.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0029.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,jwx1168690,w00556928,w00437000,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="OWNER" content="j00655225">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="j00655225">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361031">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring the Middle-Point Device</title>
</head>
<body><a name="EN-US_TASK_0172361031"></a><a name="EN-US_TASK_0172361031"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Middle-Point Device</h1>
<div class="taskbody"><p>This section describes how to use user-defined parameter settings to configure Simple Network Management Protocol (SNMP) proxy on the middle-point device.</p>
<div class="steps"><a name="EN-US_TASK_0172361031__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+password+min-length"><b><span class="cmdname" id="EN-US_TASK_0172361031__en-us_task_0172360995_cmdname292724281214304">snmp-agent password min-length</span></b></a> <i><span class="varname" id="EN-US_TASK_0172361031__en-us_task_0172360995_varname1415866985214304">min-length</span></i> command to configure the minimum SNMP password length.</span><p><p id="EN-US_TASK_0172361031__en-us_task_0172360995_p26890930214021">After this command is run, the length of a configured SNMP password must be longer than or equal to the minimum SNMP password length.</p>
</p></li><li><span>Configure SNMP proxy, as shown in <a href="#EN-US_TASK_0172361031__tab_1">Table 1</a>. The configuration tasks listed in <a href="#EN-US_TASK_0172361031__tab_1">Table 1</a> do not need to be performed in sequence.</span><p>
<div class="tableBorder"><a name="EN-US_TASK_0172361031__tab_1"></a><a name="tab_1"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172361031__tab_1" frame="border" border="1" rules="all"><caption><b>Table 1 </b>SNMP proxy configuration tasks</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="15.340000000000002%" id="mcps1.4.1.3.2.1.2.4.1.1" liSelected="liSelected"><p>Configuration Task</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="46.01%" id="mcps1.4.1.3.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="38.65%" id="mcps1.4.1.3.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.4.1.3.2.1.2.4.1.1 "><p>Configure proxy rules for SNMP packets.</p>
</td>
<td class="cellrowborder" valign="top" width="46.01%" headers="mcps1.4.1.3.2.1.2.4.1.2 "><div class="p"><ul><li>For GetRequest protocol data units (PDUs), SetRequest PDUs, and traps: <a href="cmdqueryname=snmp-agent+proxy+rule"><b><span class="cmdname">snmp-agent proxy rule</span></b></a> <i><span class="varname">rule-name</span></i> { <strong><span>read</span></strong> | <strong><span>trap</span></strong> | <strong><span>write</span></strong> } <strong><span>remote-engineid</span></strong> <i><span class="varname">remote-engineid</span></i> <strong><span>target-host</span></strong> <i><span class="varname">target-host-name</span></i> <strong><span>params-in</span></strong> <strong><span>securityname</span></strong> { <i><span class="varname">security-name</span></i> { <strong><span>v1</span></strong> | <strong><span>v2c</span></strong> | <strong><span>v3</span></strong> [ <strong><span>authentication</span></strong> | <strong><span>privacy</span></strong> ] } | <strong><span>cipher</span></strong> <i><span class="varname">cipher-text</span></i> { <strong><span>v1</span></strong> | <strong><span>v2c</span></strong> } }</li><li>For Informs: <a href="cmdqueryname=snmp-agent+proxy+rule"><b><span class="cmdname">snmp-agent proxy rule</span></b></a> <i><span class="varname">rule-name</span></i> <strong><span>inform</span></strong> <strong><span>remote-engineid</span></strong> <i><span class="varname">remote-engineid</span></i> <strong><span>target-host</span></strong> <i><span class="varname">target-host-name</span></i> <strong><span>params-in</span></strong> <strong><span>securityname</span></strong> { <i><span class="varname">security-name</span></i> { <strong><span>v2c</span></strong> | <strong><span>v3</span></strong> [ <strong><span>authentication</span></strong> | <strong><span>privacy</span></strong> ] } | <strong><span>cipher</span></strong> <i><span class="varname">cipher-text</span></i> <strong><span>v2c</span></strong> }</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="38.65%" headers="mcps1.4.1.3.2.1.2.4.1.3 "><p>To enable an NMS to effectively manage a managed device, perform this operation to configure attributes of the target hosts for receiving SNMP proxy packets so that the middle-point device can filter out SNMP packets that do not match the specified attributes, you must correctly configure proxy rules for SNMP packets and ensure that these proxy rules are unique on the middle-point device. </p>
<p>If you specify neither <strong><span>authentication</span></strong> nor <strong><span>privacy</span></strong>, SNMPv3 packets are neither authenticated nor encrypted.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.4.1.3.2.1.2.4.1.1 "><p>Create an SNMP proxy community.</p>
</td>
<td class="cellrowborder" valign="top" width="46.01%" headers="mcps1.4.1.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=snmp-agent+proxy+community"><b><span class="cmdname">snmp-agent proxy community</span></b></a> { <i><span class="varname">community-name</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">cipher-name</span></i> } <strong><span>remote-engineid</span></strong> <i><span class="varname">remote-engineid</span></i> [ <span><strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } </span><span>| <strong><span>alias</span></strong> <i><span class="varname">alias-name</span></i> </span>] <span><sup>*</sup></span></p>
</td>
<td class="cellrowborder" valign="top" width="38.65%" headers="mcps1.4.1.3.2.1.2.4.1.3 "><p>An SNMP proxy community defines administrative relationships between NMSs and managed devices. The community name acts like a password to regulate access to a managed device. An NMS can access a managed device only if the community name carried in the SNMP request sent by the NMS is the same as the community name configured on the managed device.</p>
<p>This operation applies only to SNMPv1 and SNMPv2c.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.4.1.3.2.1.2.4.1.1 "><p>Configure attributes of the target hosts for receiving SNMP proxy packets.</p>
</td>
<td class="cellrowborder" valign="top" width="46.01%" headers="mcps1.4.1.3.2.1.2.4.1.2 "><div class="p">Run one of following commands as needed:<ul><li>For an IPv4 network: <a href="cmdqueryname=snmp-agent+proxy+target-host"><b><span class="cmdname">snmp-agent proxy target-host</span></b></a> <i><span class="varname">target-host-name</span></i> <strong><span>address</span></strong> <strong><span>udp-domain</span></strong> <i><span class="varname">ip-address</span></i> <strong><span>udp-port</span></strong> <i><span class="varname">port-number</span></i> [ <strong><span>source</span></strong> <i><span class="varname">interface-type interface-number</span></i> | { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <span>| <strong><span>public-net</span></strong> </span>} | <strong><span>timeout</span></strong> <i><span class="varname">timeout-value</span></i> ]<sup>*</sup> <strong><span>params</span></strong> <strong><span>securityname</span></strong> { <i><span class="varname">security-string</span></i> { <strong><span>v1</span></strong> | <strong><span>v2c</span></strong> | <strong><span>v3</span></strong> [ <strong><span>authentication</span></strong> | <strong><span>privacy</span></strong> ] } | <strong><span>cipher</span></strong> <i><span class="varname">security-string-cipher</span></i> { <strong><span>v1</span></strong> | <strong><span>v2c</span></strong> } }</li><li>For an IPv6 network: <a href="cmdqueryname=snmp-agent+proxy+target-host"><b><span class="cmdname">snmp-agent proxy target-host</span></b></a> <i><span class="varname">target-host-name</span></i> <strong><span>ipv6 address</span></strong> <strong><span>udp-domain</span></strong> <i><span class="varname">ipv6-address</span></i> <strong><span>udp-port</span></strong> <i><span class="varname">port-number</span></i> [ <strong><span>source</span></strong> <i><span class="varname">interface-type interface-number</span></i> | { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <span>| <strong><span>public-net</span></strong> </span>} | <strong><span>timeout</span></strong> <i><span class="varname">timeout-value</span></i> ]<sup>*</sup> <strong><span>params</span></strong> <strong><span>securityname</span></strong> { <i><span class="varname">security-string</span></i> { <strong><span>v1</span></strong> | <strong><span>v2c</span></strong> | <strong><span>v3</span></strong> [ <strong><span>authentication</span></strong> | <strong><span>privacy</span></strong> ] } | <strong><span>cipher</span></strong> <i><span class="varname">security-string-cipher</span></i> { <strong><span>v1</span></strong> | <strong><span>v2c</span></strong> } }</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="38.65%" headers="mcps1.4.1.3.2.1.2.4.1.3 "><p>To enable the middle-point device to forward SNMP requests from the network management system (NMS) to the managed device and forward responses from the managed device to the NMS.</p>
<div class="p"><ul><li>The target host may be either the NMS or the managed device.</li><li>You can run this command multiple times with different parameters set to configure a middle-point device to send SNMP proxy packets to multiple NMSs.</li><li>The default number of the destination User Datagram Protocol (UDP) port is 162, a well-known port number. If you want to change this number to a non-well-known port number, ensure that the new UDP port number is the same as that on the NMS.</li><li>If you specify neither <strong><span>authentication</span></strong> nor <strong><span>privacy</span></strong>, SNMPv3 packets are neither authenticated nor encrypted.</li><li>If the NMS and managed device need to communicate over a virtual private network (VPN), use the <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> parameter.</li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.4.1.3.2.1.2.4.1.1 "><p>Create an SNMP proxy user.</p>
</td>
<td class="cellrowborder" valign="top" width="46.01%" headers="mcps1.4.1.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=snmp-agent"><b><span class="cmdname">snmp-agent</span></b></a> <strong><span>remote-engineid</span></strong> <i><span class="varname">remote-engineid-name</span></i> <strong><span>usm-user v3</span></strong> <i><span class="varname">user-name</span></i> <i><span class="varname">group-name</span></i> <strong><span>authentication-mode</span></strong> { <strong><span>md5</span></strong> | <strong><span>sha</span></strong> | <strong><span>sha2</span></strong> } <i><span class="varname">password</span></i> <strong><span>privacy-mode</span></strong> { <strong><span>des56</span></strong> | <strong><span>3des168</span></strong> | <strong><span>aes128</span></strong> | <strong><span>aes192</span></strong> | <strong><span>aes256</span></strong> } <i><span class="varname">password</span></i> <span>[ <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } ]</span></p>
</td>
<td class="cellrowborder" valign="top" width="38.65%" headers="mcps1.4.1.3.2.1.2.4.1.3 "><p>SNMPv1 and SNMPv2c use community names for authentication. SNMPv3 uses usernames for authentication.</p>
<p>Unlike SNMPv1 or SNMPv2c, SNMPv3 can implement access control, identity authentication, and data encryption using the local processing model and User-based Security Model (USM). SNMPv3 achieves higher security and confidentiality and is applicable to a wider range than SNMPv1 and SNMPv2c.</p>
<p>This operation applies only to SNMPv3 networking.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.4.1.3.2.1.2.4.1.1 "><p>(Optional) Configure the priority of SNMP packets.</p>
</td>
<td class="cellrowborder" valign="top" width="46.01%" headers="mcps1.4.1.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=snmp-agent+packet-priority"><b><span class="cmdname">snmp-agent packet-priority</span></b></a> { <strong><span>snmp</span></strong> | <strong><span>trap</span></strong> }<i><span class="varname"> priority-level</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="38.65%" headers="mcps1.4.1.3.2.1.2.4.1.3 "><div class="p">Change the priority of SNMP packets in the following scenarios if necessary:<ul><li>Increase the priority of notifications to ensure that the NMS receives them.</li><li>Increase the priority of GetResponse and SetResponse PDUs to facilitate management operations performed in the management information base (MIB) of a managed device by the NMS.</li><li>Reduce the priority of GetResponse PDUs, SetResponse PDUs, and notifications to prevent frequent packet sending when network congestion occurs.</li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.340000000000002%" headers="mcps1.4.1.3.2.1.2.4.1.1 "><p>Configure SNMP proxy for receiving and responding to requests from the CCU. </p>
</td>
<td class="cellrowborder" valign="top" width="46.01%" headers="mcps1.4.1.3.2.1.2.4.1.2 "><ul><li id="EN-US_TASK_0172361031__en-us_task_0172360995_li161618453918">IPv4 network<ul id="EN-US_TASK_0172361031__en-us_task_0172360995_ul108253001418"><li id="EN-US_TASK_0172361031__en-us_task_0172360995_li1482516016144">Run the <a href="cmdqueryname=snmp-agent+proxy+protocol+source-interface"><b><span class="cmdname" id="EN-US_TASK_0172361031__en-us_task_0172360995_cmdname61759539136">snmp-agent proxy protocol source-interface</span></b></a> { <i><span class="varname" id="EN-US_TASK_0172361031__en-us_task_0172360995_varname101751353191317">protocol-interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172361031__en-us_task_0172360995_varname4176105313137">protocol-interface-number</span></i> | <i><span class="varname" id="EN-US_TASK_0172361031__en-us_task_0172360995_varname317618534130">protocol-interface-name</span></i> } command to specify a source interface for the SNMP proxy to receive and respond to requests from the CCU.</li><li id="EN-US_TASK_0172361031__en-us_task_0172360995_li1918118139145">Run the <a href="cmdqueryname=snmp-agent+proxy+protocol+source-status+all-interface"><b><span class="cmdname" id="EN-US_TASK_0172361031__en-us_task_0172360995_cmdname1766881714141">snmp-agent proxy protocol source-status all-interface</span></b></a> command to allow all interfaces to be used by the SNMP proxy to receive and respond to IPv4 packets from the CCU.</li></ul>
</li><li id="EN-US_TASK_0172361031__en-us_task_0172360995_li11729164013131">IPv6 network<ul id="EN-US_TASK_0172361031__en-us_task_0172360995_ul5233136151511"><li id="EN-US_TASK_0172361031__en-us_task_0172360995_li1423316610157">Run the <a href="cmdqueryname=snmp-agent+proxy+protocol+ipv6+source-ip"><b><span class="cmdname" id="EN-US_TASK_0172361031__en-us_task_0172360995_cmdname108182265154">snmp-agent proxy protocol ipv6 source-ip</span></b></a><i><span class="varname" id="EN-US_TASK_0172361031__en-us_task_0172360995_varnameb5524002c6cae0d4131010dae40d2320"> ip-address</span></i> [ <strong><span id="EN-US_TASK_0172361031__en-us_task_0172360995_cmdparmname13818026141515">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172361031__en-us_task_0172360995_varname78197261152">vpn-instance-name</span></i> ] command to specify an IPv6 source address for the SNMP proxy to receive and respond to requests from the CCU.</li><li id="EN-US_TASK_0172361031__en-us_task_0172360995_li9234186191517">Run the <a href="cmdqueryname=snmp-agent+proxy+protocol+source-status+ipv6+all-interface"><b><span class="cmdname" id="EN-US_TASK_0172361031__en-us_task_0172360995_cmdname201541541161515">snmp-agent proxy protocol source-status ipv6 all-interface</span></b></a> command to allow all IPv6 interfaces to be used by the SNMP proxy to receive and respond to requests from the CCU.</li></ul>
</li></ul>
</td>
<td class="cellrowborder" valign="top" width="38.65%" headers="mcps1.4.1.3.2.1.2.4.1.3 "><p>To allow data to be managed in a unified manner, you can specify the source interface/IPv6 source address for the SNMP proxy to receive and respond to requests from the CCU or enable the function that allows all interfaces/IPv6 source addresses to be used by the SNMP proxy to receive and respond to requests from the CCU.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0027.html">Configuring SNMP Proxy Using User-Defined Parameter Settings
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0029.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>