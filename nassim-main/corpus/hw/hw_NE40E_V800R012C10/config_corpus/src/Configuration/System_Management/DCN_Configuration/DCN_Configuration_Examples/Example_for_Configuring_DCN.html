
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring DCN">
<meta name="abstract" content="This section provides an example for configuring the data communication network (DCN) feature.">
<meta name="description" content="This section provides an example for configuring the data communication network (DCN) feature.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dcn_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dcn_cfg_0023.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00437000,w00606909,s00588020,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DCN">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DCN">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="DCN">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="DCN">
<meta name="OWNER" content="f00453093">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="f00453093">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361425">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring DCN</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172361425"></a><a name="EN-US_TASK_0172361425"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring DCN</h1>
<div class="taskbody"><p>This section provides an example for configuring the data communication network (DCN) feature.</p>
<div class="context"><a name="EN-US_TASK_0172361425__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As shown in <a href="#EN-US_TASK_0172361425__fig_dc_vrp_dcn_cfg_002201">Figure 1</a>, the GNE is directly connected to an NMS and two NEs. A static route is configured for communication between the NMS and GNE. After the DCN function is configured, the NMS can manage the attached NEs through the GNE and automatically discover new NEs.</p>
<div class="fignone" id="EN-US_TASK_0172361425__fig_dc_vrp_dcn_cfg_002201"><a name="EN-US_TASK_0172361425__fig_dc_vrp_dcn_cfg_002201"></a><a name="fig_dc_vrp_dcn_cfg_002201"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for configuring DCN</span><br><span><img class="vsd" src="images/fig_dc_vrp_dcn_cfg_002201.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172361425__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>Before configuring DCN, note the following:</p>
<ul><li><p>An NMS's IP address is a public IP address, and a GNE's NEIP address is a Layer 3 virtual private network (VPN) address. To implement address conversion, you must specify a GNE's interface that is connected to an NMS, bind the GNE's interface to a DCN VPN instance, and set an IP address for the GNE's interface.</p>
</li><li><p>The binding operation must be performed before you set an IP address for the interface. Otherwise, this IP address will be deleted when you bind the interface to the DCN VPN instance.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172361425__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Enable the DCN feature globally.</p>
</li><li><p>Bind the interface (connecting the GNE to the NMS) to a DCN VPN instance. Then set an IP address for the interface.</p>
</li><li><p>Configure a static route for communication between the NMS and GNE.</p>
</li><li><p>Configure the automatic NE report function on the GNE.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172361425__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><div class="p">Name of the DCN VPN instance<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>A DCN VPN instance named __dcn_vpn__ is automatically generated when the DCN feature is enabled globally on the GNE.</p>
<p>You can run the <a href="cmdqueryname=display+ip+vpn-instance"><b><span class="cmdname">display ip vpn-instance</span></b></a> command on the GNE to view the DCN VPN instance name.</p>
</div></div>
</div>
</li><li><p>IP address of the interface connecting the GNE to the NMS</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172361425__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enable the DCN feature globally.</span><p><p># Enable the DCN feature globally. In this example, a GNE is used.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname gne</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>gne] <strong>dcn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>gne-dcn] <strong>ne-ip 10.1.1.2 16</strong></pre>
<pre class="screen">[<span class="keyword">*</span>gne-dcn] <strong>quit</strong></pre>
</p></li><li><span>Bind the interface (connecting the GNE to the NMS) to DCN VPN instance __dcn_vpn__. Then, set an IP address for the interface.</span><p><pre class="screen">[<span class="keyword">*</span>gne] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>gne-GigabitEthernet<span>0/1/0</span>] <strong>ip binding vpn-instance __dcn_vpn__</strong></pre>
<pre class="screen">[<span class="keyword">*</span>gne-GigabitEthernet<span>0/1/0</span>] <strong>ip address 172.16.1.2 16</strong></pre>
<pre class="screen">[<span class="keyword">*</span>gne-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>gne-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
</p></li><li><span>Configure a static route for communication between the NMS and GNE. For configuration details, see "Configuration Files" in this section.</span></li><li><span>Configure the automatic NE report function on the GNE.</span><p><p># Enable the automatic NE report function on the GNE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>gne] <strong>dcn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>gne-dcn] <strong>auto-report</strong></pre>
<pre class="screen">[<span class="keyword">*</span>gne-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># View the configurations of the GNE.</p>
<pre class="screen">&lt;gne&gt; <strong>display dcn brief</strong></pre>
<pre class="screen">------------------------------------------------
 NE-ID:               0x280FC
 NE-IP:               10.1.1.2
 Mask:                255.255.0.0
 DCN-Interface:       LoopBack2147483647
 Auto-Report:         Enable
------------------------------------------------</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172361425__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>Configuration file of the GNE</p>
<pre class="screen">#                                                                               
ip dcn vpn-instance __dcn_vpn__                                                 
#                                                                               
interface GigabitEthernet<span>0/1/0</span>                                                  
 undo shutdown                                                                  
 dcn                                                                            
 ip binding vpn-instance __dcn_vpn__                                            
 ip address 172.16.1.2 255.255.0.0                                             
#                                                                               
interface LoopBack2147483647                                                    
 description DCN loopback interface                                             
 ip binding vpn-instance __dcn_vpn__                                            
 ip address 10.1.1.2 255.255.0.0                                               
#                                                                               
ospf 65534 vpn-instance __dcn_vpn__                                             
 description DCN ospf create by default                                         
 opaque-capability enable                                                       
 vpn-instance-capability simple                                                 
 area 0.0.0.0                                                                   
  network 0.0.0.0 255.255.255.255                                               
#                                                                               
<span>!The DCN function implements the capability of plug-and-play for this device.
!A NE IP address based on the unique NE ID is automatically generated in VPN
!of DCN. It is recommended that the NE IP address be changed to the planned 
!one by running the ne-ip X.X.X.X &lt;MASK&gt; command after the device being online.</span>
dcn                                                                             
 auto-report                                                                    
 ne-ip 10.1.1.2 255.255.0.0
#                                                                               
return </pre>
</li><li><p>Configuration files of NE1 and NE2</p>
<pre class="screen">#                                                                               
interface GigabitEthernet<span>0/1/1</span>                                                  
 undo shutdown                                                                  
 dcn                                                                            
#                                                                               
interface LoopBack2147483647                                                    
 description DCN loopback interface                                             
 ip binding vpn-instance __dcn_vpn__                                            
 ip address 10.1.1.3 255.255.0.0                                               
#                                                                               
ospf 65534 vpn-instance __dcn_vpn__                                             
 description DCN ospf create by default                                         
 opaque-capability enable 
 hostname                                                       
 vpn-instance-capability simple                                                 
 area 0.0.0.0                                                                   
  network 0.0.0.0 255.255.255.255                                               
#                                                                               
<span>!The DCN function implements the capability of plug-and-play for this device.
!A NE IP address based on the unique NE ID is automatically generated in VPN
!of DCN. It is recommended that the NE IP address be changed to the planned 
!one by running the ne-ip X.X.X.X &lt;MASK&gt; command after the device being online.</span>
dcn                                                                             
#                                                                               
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dcn_cfg_0021.html">DCN Configuration Examples
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dcn_cfg_0023.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>