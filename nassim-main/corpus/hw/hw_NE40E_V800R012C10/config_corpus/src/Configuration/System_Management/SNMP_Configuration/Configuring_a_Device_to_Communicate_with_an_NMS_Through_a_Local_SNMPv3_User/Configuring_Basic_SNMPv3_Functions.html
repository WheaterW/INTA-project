
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Basic SNMPv3 Functions">
<meta name="abstract" content="Basic SNMPv3 functions can be configured to allow an NMS to monitor and operate a managed device.">
<meta name="description" content="Basic SNMPv3 functions can be configured to allow an NMS to monitor and operate a managed device.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0034.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0035.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,jwx1168690,w00556928,w00437000,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="OWNER" content="j00655225">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="j00655225">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361023">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Basic SNMPv3 Functions</title>
</head>
<body><a name="EN-US_TASK_0172361023"></a><a name="EN-US_TASK_0172361023"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Basic SNMPv3 Functions</h1>
<div class="taskbody"><p>Basic SNMPv3 functions can be configured to allow an NMS to monitor and operate a managed device.</p>
<div class="context"><a name="EN-US_TASK_0172361023__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Before a local SNMPv3 user is configured on a device to communicate with an NMS, the user must be added to a user group at the AAA side, and the user group is associated with a specific task group. The task group consists of multiple tasks, and each task is mapped to a MIB object that is granted reading and writing permissions. Users assigned a specific task obtain the specified reading and writing permissions on MIB objects.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172361023__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a> command to enable AAA and enter the AAA view.</span></li><li><span>Run the <a href="cmdqueryname=task-group"><b><span class="cmdname">task-group</span></b></a> <i><span class="varname">task-group-name</span></i> command to create a task group and enter its view.</span></li><li><span>Run the <a href="cmdqueryname=task"><b><span class="cmdname">task</span></b></a> <strong><span>snmp</span></strong> { <strong><span>read | write | execute | debug</span></strong> } <sup>*</sup> command to add a task to the task group and granted permissions.</span><p><p>Each MIB object is associated with a specific task. This step can be performed to grant permissions to SNMP MIB objects.</p>
</p></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the AAA view.</span></li><li><span>Run the <a href="cmdqueryname=user-group"><b><span class="cmdname">user-group</span></b></a> <i><span class="varname">user-group-name</span></i> command to create a user group and enter its view.</span></li><li><span>Run the <a href="cmdqueryname=task-group"><b><span class="cmdname">task-group</span></b></a> <i><span class="varname">task-group-name</span></i> command to associate the user group with the task group.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the AAA view.</span></li><li><span>Run the <a href="cmdqueryname=local-user"><b><span class="cmdname">local-user</span></b></a> <i><span class="varname">user-name</span></i> <strong><span>password</span></strong> [ <strong><span>cipher</span></strong> <i><span class="varname">password</span></i> | <strong><span>irreversible-cipher</span></strong> <i><span class="varname">irreversible-cipher-password</span></i> ] command to create a local user and a password for the user to log in a device.</span><p><p>If the AAA user is configured as a local SNMP user, the length of <i><span class="varname">user-name</span></i> ranges from 1 to 32 characters.</p>
</p></li><li><span>Run the <a href="cmdqueryname=local-user"><b><span class="cmdname">local-user</span></b></a> <i><span class="varname">user-name</span></i> <strong><span>user-group</span></strong> <i><span class="varname">user-group-name</span></i> command to add the local user to the specified user group.</span><p><p>One user group can be used by multiple local users. However, each local user can belong to only one user group.</p>
</p></li><li><span>Run the <a href="cmdqueryname=local-user"><b><span class="cmdname">local-user</span></b></a> <i><span class="varname">user-name</span></i> <strong><span>level</span></strong> <i><span class="varname">level</span></i> command to configure the level of the local user.</span></li><li><span>Run the <a href="cmdqueryname=local-user"><b><span class="cmdname">local-user</span></b></a> <i><span class="varname">user-name</span></i> <strong><span>service-type</span></strong> <strong><span>snmp</span></strong> command to set the access type of the local user to SNMP.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent"><b><span class="cmdname">snmp-agent</span></b></a> command to enable the SNMP agent service.</span><p><p>This step is optional because the SNMP agent service can be enabled by running any <a href="cmdqueryname=snmp-agent"><b><span class="cmdname">snmp-agent</span></b></a> command, irrespective of whether any parameter is specified.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+password+min-length"><b><span class="cmdname">snmp-agent password min-length</span></b></a> <i><span class="varname">min-length</span></i> command to configure the minimum SNMP password length.</span><p><p>After this command is run, the length of a configured SNMP password must be longer than or equal to the minimum SNMP password length.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+udp-port"><b><span class="cmdname">snmp-agent udp-port</span></b></a> <i><span class="varname">port-number</span></i> command to change the port number monitored by the SNMP agent.</span><p><p>If this command is not configured, the default port number is used.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+sys-info"><b><span class="cmdname">snmp-agent sys-info</span></b></a> <strong><span>version</span></strong> <strong><span>v3</span></strong> command to set the SNMP version.</span></li><li><span>Run the <a href="cmdqueryname=snmp-agent+local-user"><b><span class="cmdname">snmp-agent local-user</span></b></a> <strong><span>v3</span></strong> <i><span class="varname">local-user-name</span></i> <strong><span>authentication-mode</span></strong> <em>authen-protocol</em> { <strong><span>privacy-mode</span></strong> <em>privacy-protocol</em> | <strong><span>cipher</span></strong> <i><span class="varname">authKey</span></i> <strong><span>privacy-mode</span></strong> <em>privacy-protocol</em> <strong><span>cipher</span></strong> privKey } command to configure local SNMP user information.</span><p><p>The authentication password configured for an AAA user can be different from that for a local SNMP user. Deleting a local AAA user causes the local SNMP user to be also deleted. Deleting a local SNMP user, however, does not affect the local AAA user.</p>
<p>The priority of an SNMP USM user is higher than that of a local SNMP user. Consequently, if an SNMP USM user and a local SNMP user have the same username but different authentication and encryption passwords, the SNMP USM user's authentication and encryption passwords are used for login.</p>
<p>A device checks the complexity of the local users' authentication and encryption passwords. The configured passwords must meet the password complexity requirements. To disable the password complexity check, run the <a href="cmdqueryname=snmp-agent+local-user+password+complexity-check+disable"><b><span class="cmdname">snmp-agent local-user password complexity-check disable</span></b></a> command. However, enabling this function is recommended as this improves system security.</p>
<p>To improve system security, it is recommended that you configure different authentication and encryption passwords for a local SNMP user.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this command, the authentication algorithms MD5, SHA, and SHA2-224 and the encryption algorithms DES56 and 3DES168 are weak security algorithms and are not recommended. To configure a weak security algorithm, run the <a href="cmdqueryname=undo+crypto+weak-algorithm+disable"><b><span class="cmdname">undo crypto weak-algorithm disable</span></b></a> command to enable the weak security algorithm function first.</p>
</div></div>
</p></li><li><span>(Optional) Configure the SNMP proxy for receiving and responding to requests from the CCU.</span><p><ul><li>IPv4 network<ul><li>Run the <a href="cmdqueryname=snmp-agent+proxy+protocol+source-interface"><b><span class="cmdname">snmp-agent proxy protocol source-interface</span></b></a> { <i><span class="varname">protocol-interface-type</span></i> <i><span class="varname">protocol-interface-number</span></i> | <i><span class="varname">protocol-interface-name</span></i> } command to specify a source interface for the SNMP proxy to receive and respond to requests from the CCU.</li><li>Run the <a href="cmdqueryname=snmp-agent+proxy+protocol+source-status+all-interface"><b><span class="cmdname">snmp-agent proxy protocol source-status all-interface</span></b></a> command to allow all interfaces to be used by the SNMP proxy to receive and respond to IPv4 packets from the CCU.</li></ul>
</li><li>IPv6 network<ul><li>Run the <a href="cmdqueryname=snmp-agent+proxy+protocol+ipv6+source-ip"><b><span class="cmdname">snmp-agent proxy protocol ipv6 source-ip</span></b></a><i><span class="varname"> ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] command to specify an IPv6 source address for the SNMP proxy to receive and respond to requests from the CCU.</li><li>Run the <a href="cmdqueryname=snmp-agent+proxy+protocol+source-status+ipv6+all-interface"><b><span class="cmdname">snmp-agent proxy protocol source-status ipv6 all-interface</span></b></a> command to allow all IPv6 interfaces to be used by the SNMP proxy to receive and respond to requests from the CCU.</li></ul>
</li></ul>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+sys-info"><b><span class="cmdname">snmp-agent sys-info</span></b></a> { <strong><span>contact</span></strong> <i><span class="varname">contact</span></i> | <strong><span>location</span></strong> <i><span class="varname">location</span></i> } command to configure the device administrator contact information or location is configured.</span><p><p>Configuring this information helps the NMS administrator contact the device administrators for fault locating and rectification, especially if the NMS manages many devices.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+packet+max-size"><b><span class="cmdname">snmp-agent packet max-size</span></b></a> <i><span class="varname">byte-count</span></i> command to set the maximum size of an SNMP packet that the device can receive or send.</span><p><p>After the maximum size is set, the device discards any SNMP packet that is larger than the set size.</p>
</p></li><li><span>Configure SNMP to receive and respond to NMS request packets. To achieve this, run one or more of the following commands as needed:</span><p><ul><li>To configure a source interface for SNMP to receive and respond to NMS request packets, run the <a href="cmdqueryname=snmp-agent+protocol+source-interface"><b><span class="cmdname">snmp-agent protocol source-interface</span></b></a> <i><span class="varname">protocol-interface-type</span></i> <i><span class="varname">protocol-interface-number</span></i> command.</li><li>To configure all interfaces on the device for SNMP to receive and respond to NMS request packets, run the <a href="cmdqueryname=snmp-agent+protocol+source-status+all-interface"><b><span class="cmdname">snmp-agent protocol source-status all-interface</span></b></a> command.</li><li>To specify an isolated source address for SNMP to receive and respond to NMS request packets, run the <a href="cmdqueryname=snmp-agent+protocol+physic-isolate+source-interface"><b><span class="cmdname">snmp-agent protocol physic-isolate source-interface</span></b></a> <i><span class="varname">protocol-interface-name </span></i><strong><span>source-ip</span></strong> <i><span class="varname">ipv4-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] command.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the interface isolation attribute is set successfully, packets can be sent to the server only through the specified physical interface, and those sent through other interfaces are discarded.</p>
</div></div>
</li><li>To specify an IPv6 source address for SNMP to receive and respond to NMS request packets, run the <a href="cmdqueryname=snmp-agent+protocol+ipv6+source-ip"><b><span class="cmdname">snmp-agent protocol ipv6 source-ip</span></b></a> <i><span class="varname">ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] command.</li><li>To specify an isolated IPv6 source address for SNMP to receive and respond to request packets from the CCU, run the <a href="cmdqueryname=snmp-agent+protocol+ipv6+physic-isolate+source-interface"><b><span class="cmdname">snmp-agent protocol ipv6 physic-isolate source-interface</span></b></a> <i><span class="varname">protocol-interface-name </span></i><strong><span>source-ip</span></strong> <i><span class="varname">ip-address</span></i> command.</li><li>To configure all IPv6 interfaces on the device for SNMP to receive and respond to NMS request packets, run the <a href="cmdqueryname=snmp-agent+protocol+source-status+ipv6+all-interface"><b><span class="cmdname">snmp-agent protocol source-status ipv6 all-interface</span></b></a> command.</li><li>Configure SNMP to receive and respond to NMS request packets through a VPN instance or public network.<ul><li>For an IPv4 network, run the <a href="cmdqueryname=snmp-agent+protocol"><b><span class="cmdname">snmp-agent protocol</span></b></a> { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>public-net</span></strong> } command.</li><li>For an IPv6 network, run the <a href="cmdqueryname=snmp-agent+protocol+ipv6"><b><span class="cmdname">snmp-agent protocol ipv6</span></b></a> { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>public-net</span></strong> } command.</li></ul>
</li></ul>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In scenarios such as interface unnumbered, if an isolated source interface and a common source interface (non-isolated source interface) are configured to listen to the same IP address and VPN instance, the common source interface takes effect. When the TCP listening mode is set to all-interface and an isolated source interface is configured, the isolated source interface takes effect if it is matched based on the 5-tuple matching rule; the all-interface configuration takes effect if the isolated source interface is not matched based on the 5-tuple matching rule. The source IP address specified for the isolated source interface does not need to be the interface's IP address.</p>
</div></div>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+local-engineid"><b><span class="cmdname">snmp-agent local-engineid</span></b></a> <i><span class="varname">engineid</span></i> command to set an engine ID for the local SNMP entity.</span><p><p>The MAC address of the management interface on the main control board is used as device information.</p>
<div class="p"><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To improve system security, run the <a href="cmdqueryname=snmp-agent+packet+contextengineid-check+enable"><b><span class="cmdname">snmp-agent packet contextengineid-check enable</span></b></a> command to check whether the contextEngineID is consistent with the local engine ID.</p>
</div></div>
</div>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+set-cache+enable"><b><span class="cmdname">snmp-agent set-cache enable</span></b></a> command to enable the SET response message caching function.</span></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+protocol+server"><b><span class="cmdname">snmp-agent protocol server</span></b></a> <span>[ </span><strong><span>ipv4</span></strong> <span>| <strong><span>ipv6</span></strong> ]</span> <a href="cmdqueryname=disable"><b><span class="cmdname">disable</span></b></a> command to disable the SNMP IPv4 <span>or IPv6 </span>listening port.</span><p><p>After you disable the SNMP IPv4 <span>or IPv6 </span>listening port using the <a href="cmdqueryname=snmp-agent+protocol+server+disable"><b><span class="cmdname">snmp-agent protocol server disable</span></b></a> command, SNMP no longer processes SNMP packets. Exercise caution when you disable the SNMP IPv4 <span>or IPv6 </span>listening port.</p>
</p></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0034.html">Configuring a Device to Communicate with an NMS Through a Local SNMPv3 User
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0035.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>