
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring Time Attributes for 1588v2 Packets">
<meta name="abstract" content="This section describes how to configure time attributes for 1588v2 packets. 1588v2 devices exchange Announce, Sync, and Delay or Pdelay packets to send time information and maintain 1588v2 connections. You can set the interval at which a 1588v2 interface sends Announce, Sync, and Delay or Pdelay packets and the maximum number of Announce packet timeouts. Using the default time attribute values is recommended.">
<meta name="description" content="This section describes how to configure time attributes for 1588v2 packets. 1588v2 devices exchange Announce, Sync, and Delay or Pdelay packets to send time information and maintain 1588v2 connections. You can set the interval at which a 1588v2 interface sends Announce, Sync, and Delay or Pdelay packets and the maximum number of Announce packet timeouts. Using the default time attribute values is recommended.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5004.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5008_a.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00845984,w00606909,l00587852">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="1588v2">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="1588v2">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="1588v2">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="OWNER" content="w00845984">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001825841213">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring Time Attributes for 1588v2 Packets</title>
</head>
<body><a name="EN-US_TASK_0000001825841213"></a><a name="EN-US_TASK_0000001825841213"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring Time Attributes for 1588v2 Packets</h1>
<div class="taskbody"><p>This section describes how to configure time attributes for 1588v2 packets. 1588v2 devices exchange Announce, Sync, and Delay or Pdelay packets to send time information and maintain 1588v2 connections. You can set the interval at which a 1588v2 interface sends Announce, Sync, and Delay or Pdelay packets and the maximum number of Announce packet timeouts. Using the default time attribute values is recommended.</p>
<div class="context"><a name="EN-US_TASK_0000001825841213__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Two devices exchange Announce packets to determine the master/slave relationship. The master device sends Sync packets to notify the slave device of time signal parameters and uses a delay measurement mechanism to achieve time signals accuracy.</p>
<p>If devices exchange 1588v2 packets frequently and consume a lot of bandwidth resources, increase the interval value. If the time synchronization accuracy is low, reduce the interval value.</p>
<ul><li><p><strong>Announce packets</strong></p>
<p>To set the maximum number of Announce packets that a 1588v2 interface fails to receive consecutively, run the ptp announce receipt-timeout command. If the 1588v2 interface on a device fails to receive a specified number of Announce packets, the interface status becomes Master, and the device stops attempting to synchronize the time with other 1588v2 devices. The device uses the BMC algorithm to select a clock source and synchronize the time with the clock source. Increase receipt-timeout to reduce the clock source switching frequency; reduce receipt-timeout to switch clock sources. Using the default value is recommended.</p>
</li><li><p><strong>Sync packets</strong></p>
<p>The master interface periodically sends multicast Sync packets.</p>
<p>The time when the Sync packets can be stamped into the Sync packets if the one-step timestamping mode is used or into Follow_Up packets if the two-step timestamping mode is used. To specify a timestamping mode, run the <a href="cmdqueryname=ptp+clock-step"><b><span class="cmdname">ptp clock-step</span></b></a> { <strong><span>one-step</span></strong> | <strong><span>two-step</span></strong> } command.</p>
</li><li><p><strong>Delay or Pdelay packets</strong></p>
<p>A <span class="keyword">Router</span> uses a delay measurement mechanism to send request packets and receive response packets from its remote <span class="keyword">Router</span>. The <span class="keyword">Router</span> uses timestamps carried in the packets to correct time signals.</p>
</li></ul>
<p>Perform the following steps on each 1588v2 device:</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001825841213__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li id="EN-US_TASK_0000001825841213__step_01"><span id="EN-US_TASK_0000001825841213__cmd2110661712214020">Configure time attributes for Announce packets.</span><ol id="EN-US_TASK_0000001825841213__substeps2019666342214020"><li class="substepexpand" id="EN-US_TASK_0000001825841213__substep888799537214020"><span id="EN-US_TASK_0000001825841213__cmd157569827214020">Run the <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001825841213__cmdname1120302181214020">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand" id="EN-US_TASK_0000001825841213__substep235746377214020"><span id="EN-US_TASK_0000001825841213__cmd82029524214020">Run the <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0000001825841213__cmdname320827122214020">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001825841213__varname11170193174117">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0000001825841213__varname13170173114411">interface-number</span></i> command to enter the interface view.</span></li><li class="substepexpand" id="EN-US_TASK_0000001825841213__substep1628954841214020"><span id="EN-US_TASK_0000001825841213__cmd1722480731214020">Run the <a href="cmdqueryname=ptp+announce-interval"><b><span class="cmdname" id="EN-US_TASK_0000001825841213__cmdname1019977684214020">ptp announce-interval</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001825841213__varname916981667214303">announce-interval</span></i> command to set the interval at which the interface sends Announce packets. The following formula applies: Interval = 2<sup id="EN-US_TASK_0000001825841213__sup156595528425">n</sup> x 1/1024s, where <em id="EN-US_TASK_0000001825841213__i1524024720467">n</em> equals to <i><span class="varname" id="EN-US_TASK_0000001825841213__varname146591052194210">announce-interval</span></i>.</span><p><p id="EN-US_TASK_0000001825841213__p1733653640214020">Timeout interval for receiving Announce packets on the peer interface = Number of timeouts for receiving Announce packets on the peer interface (<i><span class="varname" id="EN-US_TASK_0000001825841213__varname0449175517437">receipt-timeout</span></i>) x Interval for sending Announce packets on the local interface (<i><span class="varname" id="EN-US_TASK_0000001825841213__varname15449455154315">announce-interval</span></i>)</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001825841213__substep708577333214020"><span id="EN-US_TASK_0000001825841213__cmd1262413116214020">Run the <a href="cmdqueryname=ptp+announce+receipt-timeout"><b><span class="cmdname" id="EN-US_TASK_0000001825841213__cmdname3355121214020">ptp announce receipt-timeout</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001825841213__varname1787435687214303">receipt-timeout</span></i> command to set the maximum number of Announce packets that the interface fails to receive.</span><p><p id="EN-US_TASK_0000001825841213__p574932807214020">Timeout interval for receiving Announce packets on the local interface = Number of timeouts for receiving Announce packets on the local interface (<i><span class="varname" id="EN-US_TASK_0000001825841213__varname1399413416458">receipt-timeout</span></i>) x Interval for sending Announce packets on the peer interface (<i><span class="varname" id="EN-US_TASK_0000001825841213__varname499454154511">announce-interval</span></i>)</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001825841213__substep743499493214020"><span id="EN-US_TASK_0000001825841213__cmd1936120605214020">Run the <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001825841213__cmdname2061818058214020">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li id="EN-US_TASK_0000001825841213__step_02"><span id="EN-US_TASK_0000001825841213__cmd521209519214020">Configure time attributes for Sync packets.</span><ol id="EN-US_TASK_0000001825841213__substeps1149147045214020"><li id="EN-US_TASK_0000001825841213__substep1182308985214020"><span id="EN-US_TASK_0000001825841213__cmd400925204214020">Run the <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001825841213__cmdname1170395138214020">system-view</span></b></a> command to enter the system view.</span></li><li id="EN-US_TASK_0000001825841213__substep958343856214020"><span id="EN-US_TASK_0000001825841213__cmd757835292214020">Run the <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0000001825841213__cmdname185779942214020">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001825841213__varname1960175813455">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0000001825841213__varname19608583459">interface-number</span></i> command to enter the interface view.</span></li><li id="EN-US_TASK_0000001825841213__substep2138247301214020"><span id="EN-US_TASK_0000001825841213__cmd1531039009214020">Run the <a href="cmdqueryname=ptp+sync-interval"><b><span class="cmdname" id="EN-US_TASK_0000001825841213__cmdname234501269214303">ptp sync-interval</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001825841213__varname1971151955214303">sync-interval</span></i> command to set the interval at which the interface sends Sync packets. The following formula applies: Interval = 2<sup id="EN-US_TASK_0000001825841213__sup1794240579214303">n</sup> x 1/1024s, where <em id="EN-US_TASK_0000001825841213__i1322325434619">n</em> equals to <i><span class="varname" id="EN-US_TASK_0000001825841213__varname1698010957214303">sync-interval</span></i>.</span></li><li id="EN-US_TASK_0000001825841213__substep1179605116214020"><span id="EN-US_TASK_0000001825841213__cmd54155508214020">Run the <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001825841213__cmdname1585035227214020">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li><span>Configure time attributes for Delay or Pdelay packets.</span><ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the interface view.</span></li><li><span>Run the <a href="cmdqueryname=ptp+min-delayreq-interval"><b><span class="cmdname">ptp min-delayreq-interval</span></b></a> <i><span class="varname">min-delayreq-interval</span></i> command to set the interval at which the interface sends Delay_Req packets. The following formula applies: Interval = 2<sup>n</sup> x 1/1024s, where <em>n</em> equals to <i><span class="varname">min-delayreq-interval</span></i>.</span></li><li><span>Run the <a href="cmdqueryname=ptp+min-pdelayreq-interval"><b><span class="cmdname">ptp min-pdelayreq-interval</span></b></a> <i><span class="varname">min-pdelayreq-interval</span></i> command to set the interval at which the interface sends Pdelay_Req packets. The following formula applies: Interval = 2<sup>n</sup> x 1/1024s, where <em>n</em> equals to <i><span class="varname">min-pdelayreq-interval</span></i>.</span></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5004.html">Configuring Dynamic 1588v2 Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5008_a.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5010.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>