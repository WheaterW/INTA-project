
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Setting NTP Access Rights">
<meta name="abstract" content="When receiving an access request packet, the NTP server matches the request packet with the access right in descending order (from peer, server, synchronization, query to limited). The first matched right takes effect.">
<meta name="description" content="When receiving an access request packet, the NTP server matches the request packet with the access right in descending order (from peer, server, synchronization, query to limited). The first matched right takes effect.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ntp_cfg_0012.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ntp_cfg_0014.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,jwx1168690,w00556928,w00437000,w00845984,w00606909,l00455378,ntpvrp">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="OWNER" content="w00845984,lwx1238418,l00587852">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001801088658">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Setting NTP Access Rights</title>
</head>
<body><a name="EN-US_TASK_0000001801088658"></a><a name="EN-US_TASK_0000001801088658"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Setting NTP Access Rights</h1>
<div class="taskbody"><p>When receiving an access request packet, the NTP server matches the request packet with the access right in descending order <span>(from peer, server, synchronization, query to limited)</span>. The first matched right takes effect.</p>
<div class="steps"><a name="EN-US_TASK_0000001801088658__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Create an ACL to filter network administrators.</span><p><ul><li>To create a basic IPv4 ACL and enter the basic ACL view, run the <a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> <em>basic-acl-number</em> command.</li><li>To create a basic IPv6 ACL and enter the basic ACL6 view, run the <a href="cmdqueryname=acl+ipv6"><b><span class="cmdname">acl ipv6</span></b></a> <em>basic-acl-number</em> command.</li></ul>
</p></li><li><span>Add a rule to the ACL.</span><p><ul><li>To create a rule for the basic ACL, run the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } [ <strong><span>fragment-type</span></strong> { <strong><span>fragment</span></strong> | <strong><span>non-fragment</span></strong> | <strong><span>non-subseq</span></strong> | <strong><span>fragment-subseq</span></strong> | <strong><span>fragment-spe-first</span></strong> } | <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong><span> | <i><span class="varname">src-netmask</span></i></span> } | <strong><span>any</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <span>[ </span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i><span> | <strong><span>vpn-instance-any</span></strong> ]</span> ] <sup>*</sup> command.</li><li>To create a rule for the basic ACL6, run the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } [ <strong><span>fragment</span></strong> | <strong><span>source</span></strong> { <i><span class="varname">source-ipv6-address</span></i> <span>{ </span><i><span class="varname">prefix-length</span></i><span> }</span> | <i><span class="varname">source-ipv6-address</span></i>/<i><span class="varname">prefix-length</span></i> | <strong><span>any</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <span>[ </span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i><span> | <strong><span>vpn-instance-any</span></strong> ]</span> ] <sup>*</sup> command.</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">Before configuring access control rights in an ACL, check the ACL rule configuration.<ul><li>If the ACL rule of a source IP address is set to permit, packets from the source IP address are permitted.</li><li>If the ACL rule of a source IP address is set to deny, packets from the source IP address are denied.</li><li>If a source IP address is not in an ACL rule, packets from the source IP address are denied.</li><li>If no rule exists in the ACL or the referenced ACL does not exist, packets from all source IP addresses are denied.</li></ul>
</div>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ntp-service+access"><b><span class="cmdname">ntp-service access</span></b></a> { <strong><span>peer</span></strong> | <strong><span>query</span></strong> | <strong><span>server</span></strong> | <strong><span>synchronization</span></strong> <span>| <strong><span>limited</span></strong> </span>} { { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> }<span> | <strong><span>ipv6</span></strong> { <i><span class="varname">acl6-number</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl6-name</span></i> }</span> } <sup>*</sup></span></span><p><p>Access rights for the NTP service on the local <span class="keyword">Router</span> are configured.</p>
<p>Before specifying an ACL number, make sure you have already created and configured this ACL.</p>
<p>You can configure the <a href="cmdqueryname=ntp-service+access"><b><span class="cmdname">ntp-service access</span></b></a> command depending on the actual situation. <a href="#EN-US_TASK_0000001801088658__tab_dc_vrp_ntp_cfg_001301">Table 1</a> shows the detailed NTP access rights.</p>

<div class="tableBorder"><a name="EN-US_TASK_0000001801088658__tab_dc_vrp_ntp_cfg_001301"></a><a name="tab_dc_vrp_ntp_cfg_001301"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0000001801088658__tab_dc_vrp_ntp_cfg_001301" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Description of the NTP access rights</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="31.416858314168582%" id="mcps1.4.1.5.2.4.2.4.1.1" liSelected="liSelected"><p>NTP Operation Mode</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="46.295370462953706%" id="mcps1.4.1.5.2.4.2.4.1.2" liSelected="liSelected"><p>Limited NTP Query</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="22.287771222877712%" id="mcps1.4.1.5.2.4.2.4.1.3" liSelected="liSelected"><p>Supported Devices</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="31.416858314168582%" headers="mcps1.4.1.5.2.4.2.4.1.1 "><p>Unicast NTP server/client mode</p>
</td>
<td class="cellrowborder" valign="top" width="46.295370462953706%" headers="mcps1.4.1.5.2.4.2.4.1.2 "><p>Synchronizing the client with the server</p>
</td>
<td class="cellrowborder" valign="top" width="22.287771222877712%" headers="mcps1.4.1.5.2.4.2.4.1.3 "><p>Client</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.416858314168582%" headers="mcps1.4.1.5.2.4.2.4.1.1 "><p>Unicast NTP server/client mode</p>
</td>
<td class="cellrowborder" valign="top" width="46.295370462953706%" headers="mcps1.4.1.5.2.4.2.4.1.2 "><p>Clock synchronization request from the client </p>
</td>
<td class="cellrowborder" valign="top" width="22.287771222877712%" headers="mcps1.4.1.5.2.4.2.4.1.3 "><p>Server</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.416858314168582%" headers="mcps1.4.1.5.2.4.2.4.1.1 "><p>NTP peer mode</p>
</td>
<td class="cellrowborder" valign="top" width="46.295370462953706%" headers="mcps1.4.1.5.2.4.2.4.1.2 "><p>Clock synchronization with each other </p>
</td>
<td class="cellrowborder" valign="top" width="22.287771222877712%" headers="mcps1.4.1.5.2.4.2.4.1.3 "><p>Symmetric active end</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.416858314168582%" headers="mcps1.4.1.5.2.4.2.4.1.1 "><p>NTP peer mode</p>
</td>
<td class="cellrowborder" valign="top" width="46.295370462953706%" headers="mcps1.4.1.5.2.4.2.4.1.2 "><p>Clock synchronization request from the active end</p>
</td>
<td class="cellrowborder" valign="top" width="22.287771222877712%" headers="mcps1.4.1.5.2.4.2.4.1.3 "><p>Symmetric passive end</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.416858314168582%" headers="mcps1.4.1.5.2.4.2.4.1.1 "><p>NTP multicast mode</p>
</td>
<td class="cellrowborder" valign="top" width="46.295370462953706%" headers="mcps1.4.1.5.2.4.2.4.1.2 "><p>Synchronizing the client with the server</p>
</td>
<td class="cellrowborder" valign="top" width="22.287771222877712%" headers="mcps1.4.1.5.2.4.2.4.1.3 "><p>NTP multicast client </p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.416858314168582%" headers="mcps1.4.1.5.2.4.2.4.1.1 "><p>NTP broadcast mode</p>
</td>
<td class="cellrowborder" valign="top" width="46.295370462953706%" headers="mcps1.4.1.5.2.4.2.4.1.2 "><p>Synchronizing the client with the server</p>
</td>
<td class="cellrowborder" valign="top" width="22.287771222877712%" headers="mcps1.4.1.5.2.4.2.4.1.3 "><p>NTP broadcast client </p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ntp_cfg_0012.html">Configuring NTP Security Mechanisms
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ntp_cfg_0014.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>