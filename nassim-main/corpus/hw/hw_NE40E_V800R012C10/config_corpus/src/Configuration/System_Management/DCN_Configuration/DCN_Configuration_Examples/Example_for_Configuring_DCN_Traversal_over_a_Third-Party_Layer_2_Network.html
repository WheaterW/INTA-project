
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring DCN Traversal over a Third-Party Layer 2 Network">
<meta name="abstract" content="This section provides an example for configuring DCN traversal over a third-party Layer 2 network. This function enables NEs on target networks to learn the DCN VLAN ID sent by a GNE and establish DCN connections with the GNE.">
<meta name="description" content="This section provides an example for configuring DCN traversal over a third-party Layer 2 network. This function enables NEs on target networks to learn the DCN VLAN ID sent by a GNE and establish DCN connections with the GNE.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dcn_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dcn_cfg_0022.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00437000,w00606909,s00588020,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DCN">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DCN">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="DCN">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="DCN">
<meta name="OWNER" content="f00453093">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="f00453093">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361428">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/thickbox.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/imageResize.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-migrate-1.2.1.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-ui.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.mousewheel.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/thickbox.js"></script>
<title>Example for Configuring DCN Traversal over a Third-Party Layer 2 Network</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172361428"></a><a name="EN-US_TASK_0172361428"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring DCN Traversal over a Third-Party Layer 2 Network</h1>
<div class="taskbody"><p>This section provides an example for configuring DCN traversal over a third-party Layer 2 network. This function enables NEs on target networks to learn the DCN VLAN ID sent by a GNE and establish DCN connections with the GNE.</p>
<div class="context"><a name="EN-US_TASK_0172361428__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172361428__fig_dc_vrp_dcn_cfg_002301">Figure 1</a>, a DCN VLAN group is configured on the GNE, and the GNE sends DCN negotiation packets carrying the IDs of VLANs in the DCN VLAN group to a third-party network. On the third-party network, DCN packets carrying different VLAN IDs are forwarded to leaf nodes through different virtual leased lines (VLLs). The NE devices learn the DCN VLAN packets sent from the GNE and establish DCN connections with the GNE.</p>
<div class="fignone" id="EN-US_TASK_0172361428__fig_dc_vrp_dcn_cfg_002301"><a name="EN-US_TASK_0172361428__fig_dc_vrp_dcn_cfg_002301"></a><a name="fig_dc_vrp_dcn_cfg_002301"></a><span class="figcap"><b>Figure 1 </b>Configuring DCN traversal over a third-party Layer 2 network</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p"><ul><li>Interface1 in this example is GE <span>0/1/0</span>.</li></ul>
</div>
</div></div>
<br><span><img class="imgResize" src="images/fig_dc_vrp_dcn_cfg_002301.png" width="526.6800000000001" height="476.019369" title="Click to enlarge"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172361428__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>This function applies only to the router mode.</p>
<p>If an Ethernet sub-interface is configured as a Dot1q termination sub-interface, the VLAN ID of the sub-interface can be the same as the DCN VLAN ID of the main interface.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172361428__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Enable global DCN on the GNE, NE1, NE2, and NE3.</p>
</li><li><p>Enable interface-specific DCN on the interfaces connecting the GNE, NE1, NE2, and NE3 to the third-party network.</p>
</li><li><p>Configure a DCN VLAN group on the GNE, with VLAN IDs in the group being the same as the service VLAN IDs configured for involved sub-interfaces on the GNE.</p>
</li><li><p>Configure the automatic NE report function on the GNE.</p>
</li><li><p>Configure the NEID and NEIP for the GNE.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172361428__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>DCN VLAN ID</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172361428__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enable the DCN feature globally.</span><p><p># Enable the DCN feature globally. In this example, a GNE is used. Then, use the same method to enable DCN feature globally for NE1, NE2, and NE3.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>dcn</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-dcn] <strong>quit</strong></pre>
</p></li><li><span>Enable interface-specific DCN.</span><p><p># Enable interface-specific DCN. For example, enable DCN on GE<span>0/1/0</span> of the GNE. Then, use the same method to enable interface-specific DCN for NE1, NE2, and NE3.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>]<strong> dcn</strong></pre>
</p></li><li><span>Configure the DCN VLAN group on the GNE.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>] <strong>dcn</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>] <strong>dcn vlan 1 to 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface GigabitEthernet <span>0/1/0</span></strong><strong>.1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>.1] <strong>vlan-type dot1q 1</strong> <strong>default</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>.1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface GigabitEthernet <span>0/1/0</span></strong><strong>.2</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>.2] <strong>vlan-type dot1q 2</strong> <strong>default</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>.2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>.2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface GigabitEthernet <span>0/1/0</span></strong><strong>.3</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>.3] <strong>vlan-type dot1q 3</strong> <strong>default</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>.3] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/0</span>.3] <strong>quit</strong></pre>
</p></li><li><span>Configure the automatic NE report function on the GNE.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>dcn</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-dcn] <strong>auto-report</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-dcn] <strong>commit</strong></pre>
</p></li><li><span>Configure NEID and NEIP on the GNE.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>set neid 111111</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>dcn</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-dcn] <strong>ne-ip 10.1.1.2 255.255.0.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-dcn] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Run the <span><a href="cmdqueryname=display+dcn+interface"><b><span class="cmdname">display dcn interface</span></b></a></span> command on the GNE to check DCN interface information.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> display dcn interface</strong>
total 4 DCN physical interface
-----------------------------------------------------------------------------------------------------------------
interface                          Vid     state         logical-if                       
-----------------------------------------------------------------------------------------------------------------
GE<span>0/1/1</span>                              0     up (Ready)    DCN-Serial<span>0/1/1</span>:0 (Ready)
<strong>GE<span>0/1/0</span></strong>                             <strong>1</strong>     <strong>up (Ready)</strong>    <strong>DCN-Serial<span>0/1/0</span>:0 (Ready)</strong>
                                     <strong>2</strong>     <strong>up (Ready)</strong>    <strong>DCN-Serial<span>0/1/0</span>:1 (Ready)</strong>  
                                     <strong>3</strong>     <strong>up (Ready)</strong>    <strong>DCN-Serial<span>0/1/0</span>:2 (Ready)</strong>  
-----------------------------------------------------------------------------------------------------------------
</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172361428__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>Configuration file of the GNE</p>
<pre class="screen">#                                                                               
interface GigabitEthernet<span>0/1/0</span>                                                  
 undo shutdown                                                                  
 dcn                                                                            
 dcn vlan 1 to 3                                           
#                                                                               
interface GigabitEthernet<span>0/1/0</span>.1
 vlan-type dot1q 1                                    
#                                                                               
interface GigabitEthernet<span>0/1/0</span>.2
 vlan-type dot1q 2 default                                   
#
interface GigabitEthernet<span>0/1/0</span>.3
 vlan-type dot1q 3 default                                   
#                                                                               
<span>!The DCN function implements the capability of plug-and-play for this device.
!A NE IP address based on the unique NE ID is automatically generated in VPN
!of DCN. It is recommended that the NE IP address be changed to the planned 
!one by running the ne-ip X.X.X.X &lt;MASK&gt; command after the device being online.</span>

dcn                                                                             
 auto-report                                                                    
 ne-ip 10.1.1.2 255.255.0.0
#                                                                               
return </pre>
</li></ul>
<ul><li><p>NE1 configuration file, which is the same as NE2/NE3 configuration file</p>
<pre class="screen">#                                                                               
interface GigabitEthernet<span>0/1/0</span>                                                  
 undo shutdown                                                                  
 dcn                                                                            
#                                                                               
<span>!The DCN function implements the capability of plug-and-play for this device.
!A NE IP address based on the unique NE ID is automatically generated in VPN
!of DCN. It is recommended that the NE IP address be changed to the planned 
!one by running the ne-ip X.X.X.X &lt;MASK&gt; command after the device being online.</span>

dcn                                                                             
#                                                                               
return </pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dcn_cfg_0021.html">DCN Configuration Examples
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dcn_cfg_0022.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>

<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>