
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring Parameters for Automatic Clock Source Selection">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5006.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5009.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,l00587852">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Clock Synchronization">
<meta name="featurename" content="Physical Layer Clock Synchronization">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Clock Synchronization">
<meta name="featurename" content="Physical Layer Clock Synchronization">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="Clock Synchronization">
<meta name="featurename" content="Physical Layer Clock Synchronization">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="OWNER" content="w00845984">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001825840861">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring Parameters for Automatic Clock Source Selection</title>
</head>
<body><a name="EN-US_TASK_0000001825840861"></a><a name="EN-US_TASK_0000001825840861"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring Parameters for Automatic Clock Source Selection</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001825840861__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When the <span class="keyword">NE40E</span> works in automatic clock source selection mode, the configurable parameters include:</p>
<ul><li>SSM level mapped to the clock source with an SSM level of <strong>unk</strong></li><li>Maximum output SSM level of clock signals</li><li>Reversion mode of the clock source selection algorithm</li><li>Holdoff time after clock source signals are lost</li><li>Wait to restore (WTR) time for a status change after the clock source is restored</li></ul>
<p>You can configure the function or parameters to improve the synchronization quality of a clock synchronization network and keep stable clock signals.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001825840861__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=clock+board-freq-switch+enable"><b><span class="cmdname">clock board-freq-switch enable</span></b></a> command to enable frequency deviation-triggered clock source switching.</span><p><p>After this function is enabled, if the system detects that the frequency deviation of the clock source is abnormal, it notifies the interface board where the clock source resides, triggering the interface board to select the optimal clock source for use.</p>
</p></li><li><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the interface view.</span></li><li><span>Run the <a href="cmdqueryname=clock+freq-deviation+recover"><b><span class="cmdname">clock freq-deviation recover</span></b></a> command to enable frequency deviation status recovery for clock sources.</span><p><p>A clock source can participate in reference clock source selection only when its frequency deviation status is normal. </p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In scenarios where frequency deviation detection and frequency deviation-triggered clock source switching are both enabled, if the frequency deviation of a clock source is detected to be abnormal, then the clock source frequency deviation status is set to be abnormal. When selecting the reference clock source, the interface board excludes this clock source from the candidate clock source list. After determining that the frequency deviation of the clock source has recovered, you can run this command to recover its frequency deviation status, so that the clock source can participate in reference clock source selection again.</p>
</div></div>
</p></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li><li><span>Run the <a href="cmdqueryname=clock+map+unk"><b><span class="cmdname">clock map unk</span></b></a> { <strong><span>prc </span></strong>| <strong><span>ssua </span></strong>| <strong><span>ssub </span></strong>| <strong><span>sec </span></strong>| <strong><span>dnu </span></strong><span>| <strong><span>prtc </span></strong>| <strong><span>eprtc </span></strong>| <strong><span>esec </span></strong>| <strong><span>eprc </span></strong></span>} command to map an SSM level to the clock source with an SSM level of <strong>unk</strong>.</span><p><p><strong>unk</strong> indicates that the clock source has an unknown SSM level. The clock source with an SSM level of <strong>unk</strong> cannot participate in clock source selection. To enable this type of clock source to participate in clock source selection, map a valid SSM level to it.</p>
</p></li><li><span>Run the <a href="cmdqueryname=clock"><b><span class="cmdname">clock</span></b></a> <strong><span>max-out-ssm</span></strong> { <strong><span>prc</span></strong> | <strong><span>sec</span></strong> | <strong><span>ssua</span></strong> | <strong><span>ssub</span></strong> <span>| <strong><span>prtc </span></strong>| <strong><span>eprtc </span></strong>| <strong><span>esec </span></strong>| <strong><span>eprc </span></strong></span>} command to configure the maximum output SSM level for clock signals.</span><p></p></li><li><span>Run the <a href="cmdqueryname=clock+switch"><b><span class="cmdname">clock switch</span></b></a> { <strong><span>revertive</span></strong> | <strong><span>non-revertive</span></strong> } command to configure a reversion mode for the clock source selection algorithm.</span><p><p>The <span class="keyword">NE40E</span> supports the following reversion modes:</p>
<ul><li>Revertive mode: If the optimal clock source is faulty, the system uses the clock source selection algorithm to select the second optimal clock source. If the optimal clock source is restored, the system automatically retraces it.</li><li>Non-revertive mode: If the optimal clock source is faulty, the system uses the clock source selection algorithm to select the second optimal clock source. If the optimal clock source is restored, the system continues to trace the second optimal clock source. If there is no the second optimal clock source to select, the system selects the optimal clock source.</li></ul>
</p></li><li><span>Run the <a href="cmdqueryname=clock+source-lost+holdoff-time"><b><span class="cmdname">clock source-lost holdoff-time</span></b></a> <em><i><span class="varname">holdoff-time-value</span></i></em> command to configure a holdoff time after clock source signals are lost.</span><p><p>When clock source signals are lost, the system reports status changes only after a holdoff time to instruct the clock source selection algorithm to reselect a clock source. This processing mechanism prevents the clock source selection algorithm from frequently reselecting a clock source when clock source signals are lost for a short time.</p>
</p></li><li><span>Run the <a href="cmdqueryname=clock+wtr"><b><span class="cmdname">clock wtr</span></b></a> <i><span class="varname">wtr-time</span></i> command to configure a WTR time for a status change after the clock source is restored.</span><p><p>You can configure an appropriate WTR time to minimize the impact of frequent clock source status changes on clock source selection. You are advised not to set the WTR time to 0.</p>
</p></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5005.html">Configuring the Automatic Clock Source Selection Mode
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5009.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>