
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Outputting Information to a Syslog Server">
<meta name="abstract" content="Logs of different modules and severities can be output to different syslog servers for information backup.">
<meta name="description" content="Logs of different modules and severities can be output to different syslog servers for information backup.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_logs_cfg_2038.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_logs_cfg_2041.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_logs_cfg_2044.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00437000,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Information Management">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Information Management">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="Information Management">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="Information Management">
<meta name="OWNER" content="j00655225">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="j00655225">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361206">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Outputting Information to a Syslog Server</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172361206"></a><a name="EN-US_TASK_0172361206"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Outputting Information to a Syslog Server</h1>
<div class="taskbody"><p>Logs of different modules and severities can be output to different syslog servers for information backup.</p>
<div class="context"><a name="EN-US_TASK_0172361206__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>A <span class="keyword">Device</span> generates plenty of information during operations. The storage space of the <span class="keyword">Device</span>, however, is limited. Therefore, outputting the information to a syslog server is applicable. A syslog server can store and interpret the operation information of multiple <span class="keyword">Device</span>s.</p>
<p>As shown in <a href="#EN-US_TASK_0172361206__fig_dc_vrp_logs_cfg_204301">Figure 1</a>, a <span class="keyword">Device</span> is connected to four syslog servers.</p>
<ul><li>The <span class="keyword">Device</span> sends the logs with the severity of <strong>notification</strong> and being generated by HWTACACS and IM modules to Server1. Server3 is the backup of Server1.</li><li>The <span class="keyword">Device</span> sends the logs with the severity of <strong>warning</strong> and being generated by PP4 and AAA modules to Server2. Server4 is the backup of Server2.</li></ul>
<p>Configuration must be performed on both the <span class="keyword">Device</span> and the syslog server.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, logs are output to a syslog server.</p>
</div></div>
<div class="fignone" id="EN-US_TASK_0172361206__fig_dc_vrp_logs_cfg_204301"><a name="EN-US_TASK_0172361206__fig_dc_vrp_logs_cfg_204301"></a><a name="fig_dc_vrp_logs_cfg_204301"></a><span class="figcap"><b>Figure 1 </b>Outputting information to a syslog server</span><br><span><img class="vsd" src="images/fig_dc_vrp_logs_cfg_204301.png"></span><br></div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interface1 in this example represents GE <span>0/1/0</span>.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172361206__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Enable the information management function.</p>
</li><li><p>Name the information channel.</p>
</li><li><p>Configure the channel through which information is output, the module of which log information is to be output, and the severity of the information.</p>
</li><li><p>Configure the source interface through which information is output to the syslog server.</p>
</li><li><p>Output information to a specified syslog server.</p>
</li><li><p>Configure the syslog server.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172361206__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>IP address of the syslog server</p>
</li><li><p>Information channel number</p>
</li><li><p>Name of the channel through which log information is output</p>
</li><li><p>Modules of which log information is to be output</p>
</li><li><p>Information severity</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172361206__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure the routing protocol and IP addresses so that the <span class="keyword">Device</span> and syslog server are reachable.</span></li><li><span>Configure SSL policy policy1.</span></li><li><span>Enable the information management function.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>]<strong> info-center enable</strong></pre>
</p></li><li><span>Name a channel.</span><p><p># Name the channel through which logs are output to the syslog server.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>]<strong> info-center channel 6 name loghost1</strong></pre>
</p></li><li><span>Configure the channel through which information is output, the module of which log information is to be output, and the severity of the information.</span><p><p># Output the logs of notification or higher levels generated by the HWTACACS and IM modules to the syslog server through the log host channel.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>]<strong> info-center source hwtacacs channel loghost log level notification</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>]<strong> info-center source im channel loghost log level notification</strong></pre>
<p># Output the logs of warning or higher levels generated by the PP4 and AAA modules to the syslog server through the log host channel 1.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>]<strong> info-center source pp4 channel loghost1 log level warning</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>]<strong> info-center source aaa channel loghost1 log level warning</strong></pre>
</p></li><li><span>Configure the source interface through which information is output to the syslog server.</span><p><p># Configure GE <span>0/1/0</span> as the source interface through which information is output to the syslog server.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>] <strong>info-center loghost source gigabitethernet<span>0/1/0</span></strong></pre>
</p></li><li><span>Output information to a specified syslog server.</span><p><div class="p"># Specify Server1 as the syslog server and Server3 as the backup syslog server to receive logs generated by the HWTACACS and IM modules, using the log recording tool Local2 and TCP transmission based on SSL encryption.<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>]<strong> info-center loghost 10.1.1.1 channel loghost facility local2</strong><strong> transport tcp ssl-policy policy1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>]<strong> info-center loghost 10.1.1.2 channel loghost facility local2</strong><strong> transport tcp ssl-policy policy1</strong></pre>
</div>
<div class="p"># Specify Server2 as the syslog server and Server4 as the backup syslog server to receive logs generated by the PP4 and AAA modules, using the log recording tool Local4 and TCP transmission based on SSL encryption.<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>]<strong> info-center loghost 10.2.1.1 channel loghost1 facility local4</strong><strong> transport tcp ssl-policy policy1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>]<strong> info-center loghost 10.2.1.2 channel loghost1 facility local4</strong><strong> transport tcp ssl-policy policy1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>]<strong> commit</strong></pre>
</div>
</p></li><li><span>Configure the syslog server.</span><p><p>The syslog server can be a Unix or Linux host, or a host on which third-party log software is installed.</p>
<ul><li><p>After the syslog function is enabled, the Unix or Linux host can record information of the <span class="keyword">Device</span> operation through the syslog mechanism. </p>
<p>A Linux host as an example.</p>
<ul><li><p>Create an information file. Run the <strong>touch loghost.info</strong> command in the <strong>/var/log</strong> directory to create a file named <strong>loghost.info</strong> to record <span class="keyword">Device</span> information.</p>
</li><li><p>Edit the configuration file. Enter the information "loghost.info  /var/log/router.log" in the <strong>syslog.conf</strong> file in <strong>etc/</strong>. The information indicates that the log host is named <strong>loghost</strong>, and the log information marked "info" is all recorded to the <strong>loghost.log</strong> file in <strong>var/log/</strong>.</p>
</li><li><p>Change syslogd_options="-m o" in the syslog file in the <strong>etc/sysconfig/</strong> directory to syslogd_option="-1 -m o", so that the system can record logs about the remote <span class="keyword">Device</span>.</p>
</li><li><p>Run the <strong>service syslog restart</strong> command to start the syslog service.</p>
</li></ul>
</li><li><p>If the host is equipped with third-party log software, configure the third-party software to implement the log collection function.</p>
</li></ul>
</p></li><li><span>Verify the configuration.</span><p><p># Check configurations about the information management function.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>] <strong>display info-center</strong>
Information Center:enabled
Log host:
        10.1.1.1, channel number 2, channel name loghost,
language English , host facility local2,<strong> </strong>transport tcp ssl-policy policy1
        10.1.1.2, channel number 2, channel name loghost,
language English , host facility local2,<strong> </strong>transport tcp ssl-policy policy1
        10.2.1.1, channel number 6, channel name loghost1,
language English , host facility local4,<strong> </strong>transport tcp ssl-policy policy1
        10.2.1.2, channel number 6, channel name loghost1,
language English , host facility local4,<strong> </strong>transport tcp ssl-policy policy1
Console:
        channel number : 0, channel name : console
Monitor:
        channel number : 1, channel name : monitor
SNMP Agent:
        channel number : 5, channel name : snmpagent
Log buffer:
        enabled,max buffer size 10240, current buffer size 512,
current messages 10, channel number : 4, channel name : logbuffer
dropped messages 0, overwritten messages 0
Trap buffer:
        enabled,max buffer size 1024, current buffer size 256,
current messages 3, channel number:3, channel name:trapbuffer
dropped messages 0, overwritten messages 0
logfile:
        channel number : 9, channel name : logfile, language : English
Information timestamp setting:
        log - date, trap - date, debug - date millisecond
</pre>
<p># Display the information received on the syslog server.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172361206__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><pre class="screen">#
sysname <span class="keyword">Device</span>
#
info-center channel 6 name loghost1
info-center source HWTACACS channel 2 log level notification
info-center source IM channel 2 log level notification
info-center source PP4 channel 6 log level warning
info-center source AAA channel 6 log level warning
info-center loghost source GigabitEthernet<span>0/1/0</span>
info-center loghost 10.1.1.1 facility local2 transport tcp ssl-policy policy1
info-center loghost 10.1.1.2 facility local2 transport tcp ssl-policy policy1
info-center loghost 10.2.1.1 channel 6 facility local4 transport tcp ssl-policy policy1
info-center loghost 10.2.1.2 channel 6 facility local4 transport tcp ssl-policy policy1
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.3.1.1 255.255.255.0
#
ip route-static 10.1.1.0 255.255.255.0 172.16.0.2
ip route-static 10.2.1.0 255.255.255.0 172.16.0.2
#
return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_logs_cfg_2038.html">Configuration Examples for Information Management
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_logs_cfg_2041.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_logs_cfg_2044.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>