
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Clock Source">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5010.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5013.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Clock Synchronization">
<meta name="featurename" content="Physical Layer Clock Synchronization">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Clock Synchronization">
<meta name="featurename" content="Physical Layer Clock Synchronization">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="Clock Synchronization">
<meta name="featurename" content="Physical Layer Clock Synchronization">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="OWNER" content="l00425560,w00845984">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001779081286">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Clock Source</title>
</head>
<body><a name="EN-US_TASK_0000001779081286"></a><a name="EN-US_TASK_0000001779081286"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Clock Source</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001779081286__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>By default, the <span class="keyword">NE40E</span> determines the clock source to trace through automatic clock source selection. You can also manually or forcibly specify a clock source to be traced based on the quality level of each clock source.</p>
<div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>The <a href="dc_ne_clock_cfg_5005.html">automatic clock source selection</a> mode is recommended. Manual and forcible clock source selection modes do not support automatic protection switching of clock sources.</p>
<p>If the status of a forcibly specified clock source is not normal or its SSM level is <strong>dnu</strong>, the system clock works in the hold state.</p>
<p>If the status of a manually specified clock source is neither normal nor holdoff, or its SSM level is not the highest, this manually specified clock source does not take effect.</p>
</div></div>
<p>The device can use PTP, BITS, and line clock sources. The characteristics of the three clock sources are as follows:</p>
<ul><li id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_li658419588127">Line clock source: The performance is stable and the transmission distance is long. Many interfaces can be used.</li><li id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_li144565871113">BITS clock source: External clock interfaces (also known as BITS interfaces) are used to provide higher performance. However, the transmission distance is short. Source switching cannot be performed in case of an SSM quality level decrease in 2mhz mode.</li><li id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_li7445165811115">PTP clock source: Physical interfaces are not mandatory and the transmission distance is long. However, the performance is poor and depends on packet transmission. Source switching cannot be performed in case of an SSM quality level decrease.</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_ul13391125914189"><li id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_li3391165913182">It is recommended that the line clock source be used on the entire network, followed by the BITS clock source. Use the PTP clock source only if a link does not support the line or BITS clock source.</li><li id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_li19391115971816">If the peer has only a BITS interface but no synchronous Ethernet interface, using the BITS clock source is recommended.</li></ul>
</div></div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_p18616422174211">This section uses the external clock source with the BITS0 interface as an example. The actual types and numbers of external clock interfaces vary with the hardware configuration. You need to set them based on the actual situation.</p>
</div></div>
<p>Perform one of the following configurations based on the clock source to be used on a clock synchronization network: </p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001779081286__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>(Mandatory) Configure global manual or forcible clock source selection.</span><p><p>Before configuring a clock source, configure global manual or forcible clock source selection.</p>
</p><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run either of the following commands to manually or forcibly specify the clock source to be traced for the system clock.</span><p><ol type="a"><li>Run the <a href="cmdqueryname=clock"><b><span class="cmdname">clock</span></b></a> { <strong><span>manual</span></strong> | <strong><span>force</span></strong> } <strong><span>source</span></strong><span></span> <span><span><strong><span>bits0</span></strong></span></span> command to manually or forcibly specify the BITS clock source as the clock source to be traced.</li><li>Run the <a href="cmdqueryname=clock"><b><span class="cmdname">clock</span></b></a> { <strong><span>manual</span></strong> | <strong><span>force</span></strong> } <strong><span>source</span></strong> <strong><span>ptp</span></strong> command to manually or forcibly specify the PTP clock source as the clock source to be traced.</li><li>Run the <a href="cmdqueryname=clock"><b><span class="cmdname">clock</span></b></a> { <strong><span>manual</span></strong> | <strong><span>force</span></strong> } <strong><span>source</span></strong> <strong><span>interface</span></strong> <span>{ <em><i><span class="varname">interface-name</span></i></em><i><span class="varname"> </span></i>| <em><i><span class="varname">interface-type </span></i></em><em><i><span class="varname">interface-number</span></i></em><i><span class="varname"> </span></i>}</span> command to manually or forcibly specify an interface as the clock source to be traced.</li></ol>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the <a href="cmdqueryname=clock+manual+source"><b><span class="cmdname">clock manual source</span></b></a> command is run, this command is not saved in the configuration file. To view the configuration results, run the <a href="cmdqueryname=display+clock+config"><b><span class="cmdname">display clock config</span></b></a> command. If the reference clock source fails, the clock selection mode is automatically switched to automatic clock source selection. After a device is restarted, the <a href="cmdqueryname=clock+manual+source"><b><span class="cmdname">clock manual source</span></b></a> command is not restored, and the default automatic clock source selection mode takes effect. After the device is upgraded to the target version from an earlier version, the <a href="cmdqueryname=clock+manual+source"><b><span class="cmdname">clock manual source</span></b></a> command run in the earlier version no longer takes effect, and the system uses the default automatic clock source selection mode.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li><span>(Optional) Configure a line clock source.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>It is recommended that two line clock sources be configured on different subcards.</p>
</div></div>
</p><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the interface view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=clock+synchronization+enable"><b><span class="cmdname">clock synchronization enable</span></b></a> command to enable clock synchronization for the line clock source.</span></li><li class="substepexpand"><span>Run the <span><a href="cmdqueryname=clock"><b><span class="cmdname" id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdname17224174918197">clock</span></b></a></span> <span><strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname36361464206">priority</span></strong></span> <span><i><span class="varname" id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_varname1921201632015">priority-value</span></i></span> command to configure a priority for the line clock source.</span><p><p id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_p04832211122">A smaller value indicates a higher priority.</p>
</p></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=clock+ssm"><b><span class="cmdname">clock ssm</span></b></a> { <strong><span>dnu</span></strong> | <strong><span>prc</span></strong> | <strong><span>sec</span></strong> | <strong><span>ssua</span></strong> | <strong><span>ssub</span></strong> | <strong><span>unk</span></strong> <span>| <strong><span>prtc </span></strong>| <strong><span>eprtc </span></strong>| <strong><span>esec </span></strong>| <strong><span>eprc </span></strong></span>} command to configure an SSM level for the line clock source.</span></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=clock"><b><span class="cmdname">clock</span></b></a> <strong><span>clock-id</span></strong> <em>clockid-value</em> command to configure a clock ID for the line clock source.</span></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=clock+bundle"><b><span class="cmdname">clock bundle</span></b></a> <i><span class="varname">bundle-value</span></i> command to configure a bundle ID for the line clock source and add the line clock source to the bundle group. This command can be run to prevent a clock loop when two or more clock links exist between two devices.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li><span>(Optional) Configure a BITS clock source.</span><p></p><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=clock+bits-type"><b><span class="cmdname">clock bits-type</span></b></a> <strong><span>bits0</span></strong> { <strong><span>2mhz</span></strong> | <strong><span>2mbps</span></strong> } command to configure a signal type for the BITS clock source.</span></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=clock+sa-bit"><b><span class="cmdname" id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdname1694364310383">clock sa-bit</span></b></a> { <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname9943154363813">sa4</span></strong> | <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname99435437381">sa5</span></strong> | <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname794364319386">sa6</span></strong> | <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname3943114333814">sa7</span></strong> | <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname20943043103815">sa8</span></strong> } <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname29431943203813">source</span></strong> [ <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname8943144319381">chassis </span></strong><i><span class="varname" id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_varname13943134313811">chassis-id</span></i> ] <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname29432043133810">bits0</span></strong> command to configure a timeslot from which the BITS clock source extracts SSM level information.</span><p><p id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_p19442434384">When the type of the input BITS clock signal is <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname26059441020">2mbps</span></strong>, you can manually configure the SA timeslot from which the SSM level information is extracted. By default, the SSM level information is extracted from the <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname73152047205">2mbps</span></strong> clock signals in timeslot <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname131513476016">sa4</span></strong>.</p>
</p></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=clock+source"><b><span class="cmdname">clock source</span></b></a> <span><strong><span>bits0</span></strong></span><strong><span> </span></strong><strong><span>ssm</span></strong> { <strong><span>prc </span></strong>| <strong><span>ssua </span></strong>| <strong><span>ssub </span></strong>| <strong><span>sec </span></strong>| <strong><span>dnu </span></strong>| <strong><span>unk </span></strong><span>| <strong><span>prtc </span></strong>| <strong><span>eprtc </span></strong>| <strong><span>esec </span></strong>| <strong><span>eprc </span></strong></span>}<span></span> command to configure an SSM level for the BITS clock source.</span></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=clock+bits+output-threshold"><b><span class="cmdname" id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdname6945743163813">clock bits output-threshold</span></b></a> { <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname19945124393810">prc</span></strong> | <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname594515434387">ssua</span></strong> | <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname6945164393811">ssub</span></strong> | <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname49451643183811">sec</span></strong> | <strong><span id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_cmdparmname99455435388">dnu</span></strong> } command to configure an output quality threshold for the external clock source.</span><p><p id="EN-US_TASK_0000001779081286__en-us_task_0000001825721133_p8945104316385">If the SSM level of the clock signals output by the BITS port is lower than the set threshold, the BITS port stops outputting clock signals.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li><span>(Optional) Configure a PTP clock source.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ptp+device-type"><b><span class="cmdname">ptp device-type</span></b></a> { <strong><strong><span>oc</span></strong></strong><strong><span> </span></strong>| <strong><strong><span>bc</span></strong></strong><strong><span> </span></strong>| <strong><strong><span>e2etcoc</span></strong></strong><strong><span> </span></strong>| <strong><strong><span>p2ptcoc</span></strong></strong><strong><span> </span></strong>| <strong><strong><span>tcandbc</span></strong></strong><strong><span> </span></strong>} command to configure a device type for the device.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ptp+enable"><b><span class="cmdname">ptp enable</span></b></a> command to enable PTP on the device.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the interface view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ptp+enable"><b><span class="cmdname">ptp enable</span></b></a> command to enable PTP on the interface.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=clock"><b><span class="cmdname">clock</span></b></a> <strong><span>source</span></strong> <strong><span>ptp</span></strong> <strong><span>priority</span></strong> <i><span class="varname">priority-value</span></i> command to configure a priority for the PTP clock source.</span><p><p>A smaller value indicates a higher priority.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=clock"><b><span class="cmdname">clock</span></b></a> <strong><span>source</span></strong> <strong><span>ptp</span></strong> <strong><span>synchronization</span></strong> <strong><span>enable</span></strong> command to enable clock synchronization for the PTP clock source.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=clock+source"><b><span class="cmdname">clock source</span></b></a> <strong><span>ptp</span></strong> <strong><span>ssm</span></strong> { <strong><span>dnu</span></strong> | <strong><span>prc</span></strong> | <strong><span>sec</span></strong> | <strong><span>ssua</span></strong> | <strong><span>ssub</span></strong> | <strong><span>unk </span></strong><span>| <strong><span>prtc </span></strong>| <strong><span>eprtc </span></strong>| <strong><span>esec </span></strong>| <strong><span>eprc </span></strong></span>} command to configure an SSM level for the PTP clock source.</span></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=clock+source"><b><span class="cmdname">clock source</span></b></a> <strong><span>ptp</span></strong> <strong><span>clock-id</span></strong> <em><i><span class="varname">clockid-value</span></i></em> command to configure a clock ID for the PTP clock source.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5010.html">Configuring the Manual or Forcible Clock Source Selection Mode
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5013.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>