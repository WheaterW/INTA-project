
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Basic SNMPv3 Functions">
<meta name="abstract" content="After basic SNMP functions are configured, the NMS can perform basic operations such as Get and Set operations on a managed device, and the managed device can send alarms to the NMS.">
<meta name="description" content="After basic SNMP functions are configured, the NMS can perform basic operations such as Get and Set operations on a managed device, and the managed device can send alarms to the NMS.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0017.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,jwx1168690,w00556928,w00437000,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="OWNER" content="j00655225">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="j00655225">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361012">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Basic SNMPv3 Functions</title>
</head>
<body><a name="EN-US_TASK_0172361012"></a><a name="EN-US_TASK_0172361012"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Basic SNMPv3 Functions</h1>
<div class="taskbody"><p>After basic SNMP functions are configured, the NMS can perform basic operations such as Get and Set operations on a managed device, and the managed device can send alarms to the NMS.</p>
<div class="context"><a name="EN-US_TASK_0172361012__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>The NMS can communicate with managed devices after basic SNMPv3 functions have been configured.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172361012__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+password+min-length"><b><span class="cmdname">snmp-agent password min-length</span></b></a> <i><span class="varname">min-length</span></i> command to configure the minimum SNMP password length.</span><p><p>After this command is run, the length of a configured SNMP password must be longer than or equal to the minimum SNMP password length.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent"><b><span class="cmdname">snmp-agent</span></b></a> command to enable the SNMP agent service.</span><p><p>This step is optional because the SNMP agent service can be enabled by running any <a href="cmdqueryname=snmp-agent"><b><span class="cmdname">snmp-agent</span></b></a> command, irrespective of whether any parameter is specified.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+udp-port"><b><span class="cmdname">snmp-agent udp-port</span></b></a> <i><span class="varname">port-number</span></i> command to change the port number monitored by the SNMP agent.</span><p><p>If this command is not configured, the default port number is used.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+sys-info"><b><span class="cmdname">snmp-agent sys-info</span></b></a> <strong><span>version</span></strong> <strong><span>v3</span></strong> command to set the SNMP version.</span></li><li id="EN-US_TASK_0172361012__step_dc_vrp_snmp_cfg_001604"><span id="EN-US_TASK_0172361012__cmd893790457214021">Run the <a href="cmdqueryname=snmp-agent+group"><b><span class="cmdname" id="EN-US_TASK_0172361012__cmdname1669131100214021">snmp-agent group</span></b></a><span> <strong><span id="EN-US_TASK_0172361012__cmdparmname456409047214021">v3</span></strong> <i><span class="varname" id="EN-US_TASK_0172361012__varname23972496214021">group-name</span></i> { <strong><span id="EN-US_TASK_0172361012__cmdparmname1210964193214021">authentication</span></strong> | <strong><span id="EN-US_TASK_0172361012__cmdparmname469039206214021">privacy</span></strong> | <strong><span id="EN-US_TASK_0172361012__cmdparmname798289598214021">noauthentication</span></strong> } [ <strong><span id="EN-US_TASK_0172361012__cmdparmname1936458058214021">read-view</span></strong> <i><span class="varname" id="EN-US_TASK_0172361012__varname1787261176214021">read-view</span></i> | <strong><span id="EN-US_TASK_0172361012__cmdparmname1585173616214021">write-view</span></strong> <i><span class="varname" id="EN-US_TASK_0172361012__varname1831257828214021">write-view</span></i> | <strong><span id="EN-US_TASK_0172361012__cmdparmname318078277214021">notify-view</span></strong> <i><span class="varname" id="EN-US_TASK_0172361012__varname2095570435214021">notify-view</span></i> ] <sup id="EN-US_TASK_0172361012__sup1547392824214021">*</sup><span> [ <strong><span id="EN-US_TASK_0172361012__cmdparmname1857570658214021">acl</span></strong> { <i><span class="varname" id="EN-US_TASK_0172361012__varname1155625109214021">acl-number</span></i> | <i><span class="varname" id="EN-US_TASK_0172361012__varname1766553103214021">acl-name</span></i> } ]</span></span> command to configure an SNMPv3 user group.</span><p><p id="EN-US_TASK_0172361012__p82126606214021">If the NMS and network devices are in an insecure environment (for example, the network is vulnerable to attacks), <strong><span id="EN-US_TASK_0172361012__cmdparmname26206207214304">authentication</span></strong> or <strong><span id="EN-US_TASK_0172361012__cmdparmname1038833908214304">privacy</span></strong> can be configured in the command to enable data authentication or privacy.</p>
<div class="p" id="EN-US_TASK_0172361012__p278197883214021">The available authentication and privacy modes are as follows:<ul id="EN-US_TASK_0172361012__ul420759369214021"><li id="EN-US_TASK_0172361012__li1586505749214021"><p id="EN-US_TASK_0172361012__p1245162291214021"><a name="EN-US_TASK_0172361012__li1586505749214021"></a><a name="li1586505749214021"></a>No authentication and no privacy: Neither <strong><span id="EN-US_TASK_0172361012__cmdparmname1868412341214304">authentication</span></strong> nor <strong><span id="EN-US_TASK_0172361012__cmdparmname1963833617214304">privacy</span></strong><span> or <strong><span id="EN-US_TASK_0172361012__cmdparmname1860231940214304">noauthentication</span></strong></span> is configured in the command. </p>
</li><li id="EN-US_TASK_0172361012__li749641686214021"><p id="EN-US_TASK_0172361012__p2088743300214021"><a name="EN-US_TASK_0172361012__li749641686214021"></a><a name="li749641686214021"></a>Authentication without privacy: Only <strong><span id="EN-US_TASK_0172361012__cmdparmname1475813001214304">authentication</span></strong> is configured in the command. In this mode, only the authenticated administrators can access the managed device.</p>
</li><li id="EN-US_TASK_0172361012__li893890749214021"><p id="EN-US_TASK_0172361012__p1973707678214021"><a name="EN-US_TASK_0172361012__li893890749214021"></a><a name="li893890749214021"></a>Authentication and privacy: Both <strong><span id="EN-US_TASK_0172361012__cmdparmname1642317135010">authentication</span></strong> and <strong><span id="EN-US_TASK_0172361012__cmdparmname34233116501">privacy</span></strong> are configured in the command. In this mode, only the authenticated administrators can access the managed device, and transmitted data is encrypted to guard against tampering and data leaking.</p>
</li></ul>
</div>
<p id="EN-US_TASK_0172361012__p1798572237214021"><strong><span id="EN-US_TASK_0172361012__cmdparmname313151591214304">read-view</span></strong> needs to be configured in the command if the NMS administrator needs the read permission in a specified view. For example, a low-level administrator needs to read certain data.</p>
<p id="EN-US_TASK_0172361012__p2131839843214021"><strong><span id="EN-US_TASK_0172361012__cmdparmname60764154214304">write-view</span></strong> needs to be configured in the command if the NMS administrator needs the read and write permissions in a specified view. For example, a high-level administrator needs to read and write certain data. </p>
<p id="EN-US_TASK_0172361012__p1632737309214021"><strong><span id="EN-US_TASK_0172361012__cmdparmname988417170214304">notify-view</span></strong> needs to be configured in the command if you want to filter out irrelevant alarms and configure the managed device to send only the alarms of specified MIB objects to the NMS. If the parameter is configured, only the alarms of the MIB objects specified by <strong><span id="EN-US_TASK_0172361012__cmdparmname153876705214304">notify-view</span></strong> are sent to the NMS.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+local-engineid"><b><span class="cmdname">snmp-agent local-engineid</span></b></a> <i><span class="varname">engineid</span></i> command to set an engine ID for the local SNMP entity.</span><p><p>The MAC address of the management interface on the main control board is used as device information.</p>
<div class="p"><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To improve system security, run the <a href="cmdqueryname=snmp-agent+packet+contextengineid-check+enable"><b><span class="cmdname">snmp-agent packet contextengineid-check enable</span></b></a> command to check for consistency between the context engine ID and local engine ID.</p>
</div></div>
</div>
</p></li><li><span>Run the following commands as needed:</span><p><ul><li><p>On an IPv4 network, a managed device can send alarms in Inform or trap mode.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The difference between alarms in trap and Inform modes is as follows:</p>
<ul><li><p>A managed device does not need to receive a response from the NMS when sending an alarm in trap mode. Therefore, no remote engine ID needs to be configured on the managed device.</p>
</li><li><p>A managed device needs to receive a response from the NMS when sending an alarm in Inform mode. Therefore, specify the NMS engine ID on the managed device. The remote engine ID must be the same as the engine ID of the destination host that receives the alarm. If the managed device receives no response from the NMS within a timeout period, it resends the alarm until a response is returned or the number of alarms reaches the configured upper limit.</p>
<p>The managed device sends the alarm in Inform mode and records an alarm log at the same time. If the NMS or a link fails, the NMS can synchronize alarms generated during this period after the fault is rectified.</p>
</li></ul>
<p>Therefore, the alarm in Inform mode is more reliable than that in trap mode. However, a device needs to cache massive alarm messages and consume a great number of memory resources due to the retransmission mechanism.</p>
<p>If the network environment is stable, sending alarms in trap mode is recommended. If device resources are sufficient and the network environment is unstable, sending alarms in Inform mode is recommended.</p>
<p>The same destination host cannot be configured for Inform and trap messages. If the Inform and trap messages share the same destination host, the latest configuration overrides the previous configuration.</p>
</div></div>
<div class="p">Configure an alarm in trap mode.<ol type="a"><li>Run the <a href="cmdqueryname=snmp-agent"><b><span class="cmdname">snmp-agent</span></b></a> <strong><span>usm-user v3</span></strong> <i><span class="varname">user-name</span></i> <i><span class="varname">group-name</span></i> [ <strong><span>authentication-mode</span></strong> <i><span class="varname">authen-protocol</span></i> <i><span class="varname">authKey</span></i> [<strong><span> privacy-mode</span></strong> <i><span class="varname">privacy-protocol</span></i> <i><span class="varname">privKey</span></i> ] ]<span> [ <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">aclName</span></i> } ]</span> command to configure an SNMP<span> USM</span> user and configure an authentication mode, an encryption mode, and passwords for the user.</li><li>Run the <a href="cmdqueryname=snmp-agent+target-host"><b><span class="cmdname">snmp-agent target-host</span></b></a> [ <strong><span>host-name</span></strong> <i><span class="varname">host-name</span></i> ] <strong><span>trap</span></strong> <strong><span>address</span></strong> <strong><span>udp-domain</span></strong> <i><span class="varname">ip-address</span></i> [ [ <strong><span>udp-port</span></strong> <i><span class="varname">port-number</span></i> | [ <strong><span>alarm-udp-port</span></strong> <i><span class="varname">alarm-port-number</span></i> | <strong><span>event-udp-port</span></strong> <i><span class="varname">event-port-number</span></i> ] * ] | [ <strong><span>source</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ] | [ <span><strong><span>public-net</span></strong> | </span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] ] <sup>*</sup> <strong><span>params</span></strong> <strong><span>securityname</span></strong> { <i><span class="varname">security-name</span></i> [ <strong><span>v3</span></strong> [ <strong><span>authentication</span></strong> | <strong><span>privacy</span></strong> ] ] | <strong><span>private-netmanager</span></strong> | <strong><span>ext-vb</span></strong> | <strong><span>notify-filter-profile</span></strong> <i><span class="varname">profile-name</span></i> } <sup>*</sup> command to specify a destination host to which the device sends traps and error codes.</li></ol>
</div>
<p>Configure an alarm in Inform mode.</p>
<ol type="a"><li>Run the <a href="cmdqueryname=snmp-agent"><b><span class="cmdname">snmp-agent</span></b></a> <span>[ <strong><span>remote-engineid</span></strong> <i><span class="varname">engine-Id</span></i> ] </span><strong><span>usm-user v3</span></strong> <i><span class="varname">user-name</span></i> <i><span class="varname">group-name</span></i> [ <strong><span>authentication-mode</span></strong> <i><span class="varname">authen-protocol</span></i> <i><span class="varname">authKey</span></i> [<strong><span> privacy-mode</span></strong> <i><span class="varname">privacy-protocol</span></i> <i><span class="varname">privKey</span></i> ] ]<span> [ <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">aclName</span></i> } ]</span> command to configure an SNMP<span> USM</span> user and configure an authentication mode, an encryption mode, and passwords for the SNMP<span> USM</span> user.</li><li>Run the <a href="cmdqueryname=snmp-agent+target-host"><b><span class="cmdname">snmp-agent target-host</span></b></a> [ <strong><span>host-name</span></strong> <i><span class="varname">host-name</span></i> ] <strong><span>inform</span></strong> <strong><span>address</span></strong> <strong><span>udp-domain</span></strong> <i><span class="varname">ip-address</span></i> [ [ <strong><span>udp-port</span></strong> <i><span class="varname">port-number</span></i> ] | [ <strong><span>source</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ] | [ <span><strong><span>public-net</span></strong> | </span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] ] <sup>*</sup> <strong><span>params</span></strong> <strong><span>securityname</span></strong> { <i><span class="varname">security-name</span></i> { <strong><span>v3</span></strong> [ <strong><span>authentication</span></strong> | <strong><span>privacy</span></strong> ] } } [ <strong><span>ext-vb</span></strong> | <strong><span>notify-filter-profile</span></strong> <i><span class="varname">profile-name</span></i> <span>| <strong><span>private-netmanager</span></strong> </span>] <sup>*</sup> command to specify a destination host to which a device sends Inform alarms and error codes.</li></ol>
</li><li>On an IPv6 network, alarms can be sent in trap mode.<ol type="a"><li>Run the <a href="cmdqueryname=snmp-agent+usm-user"><b><span class="cmdname">snmp-agent usm-user</span></b></a> <strong><span>v3</span></strong> <i><span class="varname">user-name</span></i> <i><span class="varname">group-name</span></i> [ <strong><span>authentication-mode</span></strong> <i><span class="varname">authen-protocol</span></i> <i><span class="varname">authKey</span></i> [<strong><span> privacy-mode</span></strong> <i><span class="varname">privacy-protocol</span></i> <i><span class="varname">privKey</span></i> ] ] [ <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } ] command to configure an SNMP<span> USM</span> user and configure an authentication mode, an encryption mode, and passwords for the user.</li><li>Run the <a href="cmdqueryname=snmp-agent+target-host"><b><span class="cmdname">snmp-agent target-host</span></b></a> [ <strong><span>host-name</span></strong> <i><span class="varname">host-name</span></i> ] <strong><span>trap</span></strong> <strong><span>ipv6</span></strong> <strong><span>address</span></strong> <strong><span>udp-domain</span></strong> <i><span class="varname">ipv6-address</span></i> [ <strong><span>udp-port</span></strong> <i><span class="varname">port-number</span></i> | [ <strong><span>alarm-udp-port</span></strong> <i><span class="varname">alarm-port-number</span></i> | <strong><span>event-udp-port</span></strong> <i><span class="varname">event-port-number</span></i> ] *<span> | [ { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>public-net</span></strong> } ]</span> <span>| <strong><span>source</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> </span>] <span><sup>*</sup> </span><strong><span>params</span></strong> <strong><span>securityname</span></strong> { <i><span class="varname">security-name</span></i> [ <strong><span>v3</span></strong> [ <strong><span>authentication</span></strong> | <strong><span>privacy</span></strong> ] | <strong><span>private-netmanager</span></strong> | <strong><span>ext-vb</span></strong> | <strong><span>notify-filter-profile</span></strong> <i><span class="varname">profile-name</span></i> ] <sup>*</sup> } command to specify a destination host to which the device sends traps and error codes.</li></ol>
</li><li>On an IPv6 network, alarms can be sent only in Inform mode.<ol type="a"><li>Run the <a href="cmdqueryname=snmp-agent"><b><span class="cmdname">snmp-agent</span></b></a> <span>[ <strong><span>remote-engineid</span></strong> <i><span class="varname">engine-Id</span></i> ] </span><strong><span>usm-user v3</span></strong> <i><span class="varname">user-name</span></i> <i><span class="varname">group-name</span></i> [ <strong><span>authentication-mode</span></strong> <i><span class="varname">authen-protocol</span></i> <i><span class="varname">authKey</span></i> [<strong><span> privacy-mode</span></strong> <i><span class="varname">privacy-protocol</span></i> <i><span class="varname">privKey</span></i> ] ]<span> [ <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">aclName</span></i> } ]</span> command to configure an SNMP<span> USM</span> user and configure an authentication mode, an encryption mode, and passwords for the SNMP<span> USM</span> user.</li><li>Run the <strong><a href="cmdqueryname=snmp-agent+target-host"><b><span class="cmdname">snmp-agent target-host</span></b></a> </strong>[ <strong>host-name</strong><em> host-name</em> ] <strong>inform</strong><strong> ipv6 </strong><strong>address </strong><strong>udp-domain</strong><em> ipv6-address</em> [ [ <strong>udp-port</strong><em> server-port</em> ] | [ <strong>vpn-instance</strong><em> vpn-instance-name</em> | <strong>public-net</strong> ] | [ <strong>source</strong> { <em>interface-name</em> | <em>interface-type </em><em>interface-number</em> } ] ] <sup>*</sup><strong> params</strong><strong> securityname</strong> { <em>security-name</em> { <strong>v2c</strong> | <strong>v3</strong> [ <strong>authentication</strong> | <strong>privacy</strong> ] } | <strong>cipher</strong><em> cipher-name</em><strong> v2c</strong> } [ [ <strong>private-netmanager</strong> | <strong>ext-vb</strong> | <strong>notify-filter-profile</strong><em> profile-name</em> ] <sup>*</sup> ] <sup>*</sup> command to specify a destination host to which the device sends Informs and error codes.</li></ol>
</li></ul>
<p>The following parameters can be configured as needed:</p>
<ul><li><p><strong><span>udp-port</span></strong> needs to be configured to change the default UDP port number of 162 to a non-well-known port number to meet special requirements.</p>
</li><li><p><span><strong><span>public-net</span></strong> needs to be configured to allow a device that an NMS manages to send traps through a public network to the NMS. Alternatively, </span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> needs to be configured to allow the device that an NMS manages to send traps through a private network to the NMS.</p>
</li><li><p><strong><span>securityname</span></strong> needs to be configured to identify a source device that sends traps.</p>
</li><li><p><strong><span>private-netmanager</span></strong> needs to be configured to allow alarm messages to carry more information when the NMS and a device that the NMS manages are both Huawei devices. Alarm messages can carry alarm types, sequence number, and time when a message was sent. The information helps rectify faults.</p>
</li><li><p><strong><span>notify-filter-profile</span></strong> needs to be configured to allow a device to send desired alarms to the NMS host, which reduces irrelevant alarms and speeds up fault identification. <strong><span>notify-view</span></strong> needs to be configured to allow the alarm filter policy to take effect when you configure a user group.</p>
</li></ul>
<p>To disable the password complexity check, run the <a href="cmdqueryname=snmp-agent+usm-user+password+complexity-check+disable"><b><span class="cmdname">snmp-agent usm-user password complexity-check disable</span></b></a> command. However, enabling this function is recommended as this improves system security.</p>
<p>To improve system security, it is recommended that you configure different authentication and encryption passwords for an SNMP USM user.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+sys-info"><b><span class="cmdname">snmp-agent sys-info</span></b></a> { <strong><span>contact</span></strong> <i><span class="varname">contact</span></i> | <strong><span>location</span></strong> <i><span class="varname">location</span></i> } command to configure the device administrator contact information or location is configured.</span><p><p>Configuring this information helps the NMS administrator contact the device administrators for fault locating and rectification, especially if the NMS manages many devices.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+packet+max-size"><b><span class="cmdname">snmp-agent packet max-size</span></b></a> <i><span class="varname">byte-count</span></i> command to set the maximum size of an SNMP packet that the device can receive or send.</span><p><p>After the maximum size is set, the device discards any SNMP packet that is larger than the set size.</p>
</p></li><li><span>Configure SNMP to receive and respond to NMS request packets. To achieve this, run one or more of the following commands as needed:</span><p><ul><li><p>To configure a source interface for SNMP to receive and respond to NMS request packets, run the <a href="cmdqueryname=snmp-agent+protocol+source-interface"><b><span class="cmdname">snmp-agent protocol source-interface</span></b></a> <i><span class="varname">protocol-interface-type</span></i> <i><span class="varname">protocol-interface-number</span></i> command.</p>
</li><li><p>To configure all interfaces on the device for SNMP to receive and respond to NMS request packets, run the <a href="cmdqueryname=snmp-agent+protocol+source-status+all-interface"><b><span class="cmdname">snmp-agent protocol source-status all-interface</span></b></a> command.</p>
</li><li><p>To specify an isolated source address for SNMP to receive and respond to NMS request packets, run the <a href="cmdqueryname=snmp-agent+protocol+physic-isolate+source-interface"><b><span class="cmdname">snmp-agent protocol physic-isolate source-interface</span></b></a> <i><span class="varname">protocol-interface-name </span></i><strong><span>source-ip</span></strong> <i><span class="varname">ipv4-address</span></i> command.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the interface isolation attribute is set successfully, packets can be sent to the server only through the specified physical interface, and those sent through other interfaces are discarded.</p>
</div></div>
</li><li><p>To specify an IPv6 source address for SNMP to receive and respond to NMS request packets, run the <a href="cmdqueryname=snmp-agent+protocol+ipv6+source-ip"><b><span class="cmdname">snmp-agent protocol ipv6 source-ip</span></b></a> <i><span class="varname">ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] command.</p>
</li><li><p>To specify an isolated IPv6 source address for SNMP to receive and respond to request packets from the CCU, run the <a href="cmdqueryname=snmp-agent+protocol+ipv6+physic-isolate+source-interface"><b><span class="cmdname">snmp-agent protocol ipv6 physic-isolate source-interface</span></b></a> <i><span class="varname">protocol-interface-name </span></i><strong><span>source-ip</span></strong> <i><span class="varname">ip-address</span></i> command.</p>
</li><li><p>To configure all IPv6 interfaces on the device for SNMP to receive and respond to NMS request packets, run the <a href="cmdqueryname=snmp-agent+protocol+source-status+ipv6+all-interface"><b><span class="cmdname">snmp-agent protocol source-status ipv6 all-interface</span></b></a> command.</p>
</li><li>Configure SNMP to receive and respond to NMS request packets through a VPN instance or public network.<ul><li>For an IPv4 network, run the <a href="cmdqueryname=snmp-agent+protocol"><b><span class="cmdname">snmp-agent protocol</span></b></a> { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>public-net</span></strong> } command.</li><li>For an IPv6 network, run the <a href="cmdqueryname=snmp-agent+protocol+ipv6"><b><span class="cmdname">snmp-agent protocol ipv6</span></b></a> { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>public-net</span></strong> } command.</li></ul>
</li></ul>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In scenarios such as interface unnumbered, if an isolated source interface and a common source interface (non-isolated source interface) are configured to listen to the same IP address and VPN instance, the common source interface takes effect. When the TCP listening mode is set to all-interface and an isolated source interface is configured, the isolated source interface takes effect if it is matched based on the 5-tuple matching rule; the all-interface configuration takes effect if the isolated source interface is not matched based on the 5-tuple matching rule. The source IP address specified for the isolated source interface does not need to be the interface's IP address.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172361012__step_dc_vrp_snmp_cfg_001611"><span id="EN-US_TASK_0172361012__cmd598989069214021">(Optional) Run the <a href="cmdqueryname=snmp-agent+extend+error-code+enable"><b><span class="cmdname" id="EN-US_TASK_0172361012__cmdname788834556214304">snmp-agent extend error-code enable</span></b></a> command to enable the extended error code function.</span></li><li id="EN-US_TASK_0172361012__step_dc_vrp_snmp_cfg_001612"><span id="EN-US_TASK_0172361012__cmd762822216214021">(Optional) Run the <a href="cmdqueryname=snmp-agent+set-cache+enable"><b><span class="cmdname" id="EN-US_TASK_0172361012__cmdname83985075214021">snmp-agent set-cache enable</span></b></a> command to enable the SET response message caching function.</span></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+protocol+get-bulk+timeout"><b><span class="cmdname">snmp-agent protocol get-bulk timeout</span></b></a> <i><span class="varname">time</span></i> command to configure a get-bulk operation timeout period.</span><p><p>You are advised not to change the get-bulk operation timeout period. The default get-bulk operation timeout period (2s) is recommended. To reconfigure a get-bulk operation timeout period, you must ensure that the configured period is less than an NMS's timeout period.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=snmp-agent+protocol+server"><b><span class="cmdname">snmp-agent protocol server</span></b></a> <span>[ </span><strong><span>ipv4</span></strong> <span>| <strong><span>ipv6</span></strong> ]</span> <a href="cmdqueryname=disable"><b><span class="cmdname">disable</span></b></a> command to disable the SNMP IPv4 <span>or IPv6 </span>listening port.</span><p><p>After you disable the SNMP IPv4 <span>or IPv6 </span>listening port using the <a href="cmdqueryname=snmp-agent+protocol+server+disable"><b><span class="cmdname">snmp-agent protocol server disable</span></b></a> command, SNMP no longer processes SNMP packets. Exercise caution when you disable the SNMP IPv4 <span>or IPv6 </span>listening port.</p>
</p></li><li><span>(Optional) Configure the SNMP proxy for receiving and responding to requests from the CCU.</span><p><ul><li>IPv4 network<ul><li>Run the <a href="cmdqueryname=snmp-agent+proxy+protocol+source-interface"><b><span class="cmdname">snmp-agent proxy protocol source-interface</span></b></a> { <i><span class="varname">protocol-interface-type</span></i> <i><span class="varname">protocol-interface-number</span></i> | <i><span class="varname">protocol-interface-name</span></i> } command to specify a source interface for the SNMP proxy to receive and respond to requests from the CCU.</li><li>Run the <a href="cmdqueryname=snmp-agent+proxy+protocol+source-status+all-interface"><b><span class="cmdname">snmp-agent proxy protocol source-status all-interface</span></b></a> command to allow all interfaces to be used by the SNMP proxy to receive and respond to IPv4 packets from the CCU.</li></ul>
</li><li>IPv6 network<ul><li>Run the <a href="cmdqueryname=snmp-agent+proxy+protocol+ipv6+source-ip"><b><span class="cmdname">snmp-agent proxy protocol ipv6 source-ip</span></b></a><i><span class="varname"> ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] command to specify an IPv6 source address for the SNMP proxy to receive and respond to requests from the CCU.</li><li>Run the <a href="cmdqueryname=snmp-agent+proxy+protocol+source-status+ipv6+all-interface"><b><span class="cmdname">snmp-agent proxy protocol source-status ipv6 all-interface</span></b></a> command to allow all IPv6 interfaces to be used by the SNMP proxy to receive and respond to IPv6 requests from the CCU.</li></ul>
</li></ul>
</p></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172361012__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><p>After the configuration is complete, the NMS and managed device can communicate. </p>
<ul><li><p>Access control allows any NMS that uses the community name to monitor and manage all the objects on the managed device.</p>
</li><li><p>The managed device sends alarms generated by the modules that are enabled by default to the NMS.</p>
</li></ul>
<p>If finer device management is required, follow directions below to configure the managed device:</p>
<ul><li><p>To allow a specified NMS that uses the community name to manage specified objects on the device, follow the procedure described in <a href="dc_vrp_snmp_cfg_0017.html">Controlling the NMS's Access to the Device</a>.</p>
</li><li><p>To allow a specified module on the managed device to report alarms to the NMS, follow the procedure described in <a href="dc_vrp_snmp_cfg_2007.html">Configuring the Trap Function</a> or <a href="dc_vrp_snmp_cfg_1013.html">Configuring the Inform Function</a>.</p>
</li></ul>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0015.html">Configuring a Device to Communicate with an NMS Using SNMPv3 USM User
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0017.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>