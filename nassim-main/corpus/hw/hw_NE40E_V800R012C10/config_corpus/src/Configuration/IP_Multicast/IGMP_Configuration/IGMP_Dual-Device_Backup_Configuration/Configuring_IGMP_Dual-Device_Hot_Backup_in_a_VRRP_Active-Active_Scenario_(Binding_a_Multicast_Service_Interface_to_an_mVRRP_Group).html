
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IGMP Dual-Device Hot Backup in a VRRP Active-Active Scenario (Binding a Multicast Service Interface to an mVRRP Group)">
<meta name="abstract" content="If a node or link fails on an IGMP dual-device hot backup network, a rapid multicast service switchover is triggered, improving service reliability. This section describes how to configure IGMP dual-device hot backup in a VRRP active-active scenario.">
<meta name="description" content="If a node or link fails on an IGMP dual-device hot backup network, a rapid multicast service switchover is triggered, improving service reliability. This section describes how to configure IGMP dual-device hot backup in a VRRP active-active scenario.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0114.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0123.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0129.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366755">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring IGMP Dual-Device Hot Backup in a VRRP Active-Active Scenario (Binding a Multicast Service Interface to an mVRRP Group)</title>
</head>
<body><a name="EN-US_TASK_0172366755"></a><a name="EN-US_TASK_0172366755"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IGMP Dual-Device Hot Backup in a VRRP Active-Active Scenario (Binding a Multicast Service Interface to an mVRRP Group)</h1>
<div class="taskbody"><p>If a node or link fails on an IGMP dual-device hot backup network, a rapid multicast service switchover is triggered, improving service reliability. This section describes how to configure IGMP dual-device hot backup in a VRRP active-active scenario.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0172366755__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>A VRRP group has been configured using the <a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> [ <strong><span>virtual-ip</span></strong> <i><span class="varname">virtual-address</span></i> ] command, and the group has been configured as an mVRRP group using the <a href="cmdqueryname=admin-vrrp+vrid"><b><span class="cmdname">admin-vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> [ <strong><span>ignore-if-down</span></strong> ] command.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366755__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Context</h4><p>In a VRRP active-active scenario, both the master and backup devices in a VRRP group can receive IGMP messages, but only the master device can send multicast traffic to downstream devices. Such implementation facilitates multicast service control and management and improves multicast service reliability.</p>
<p>To configure IGMP dual-device hot backup in a VRRP active-active scenario, perform the following steps on the devices in the same VRRP group.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366755__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an interface monitoring group and a BFD session.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=monitor-group"><b><span class="cmdname">monitor-group</span></b></a> <i><span class="varname">monitor-group-name</span></i></span></span><p><p>An interface monitoring group is created, and the group view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=monitor+enable"><b><span class="cmdname">monitor enable</span></b></a></span></span><p><p>The monitoring function is enabled for the interface monitoring group.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=binding+interface"><b><span class="cmdname">binding interface</span></b></a> <i><span class="varname">interface-name</span></i></span><p><p>The interface to be monitored is added to the interface monitoring group.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <i><span class="varname">session-name</span></i><strong><span> bind</span></strong> <strong><span>peer-ip</span></strong> <i><span class="varname">ip-address</span></i></span></span><p><p>A BFD session is created to monitor a specified peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=discriminator+local"><b><span class="cmdname">discriminator local</span></b></a> <i><span class="varname">discr-value</span></i></span><p><p>A local discriminator is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=discriminator+remote"><b><span class="cmdname">discriminator remote</span></b></a> <i><span class="varname">discr-value</span></i></span><p><p>A remote discriminator is configured.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>Configure rapid service link switching.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=multicast+routing-enable"><b><span class="cmdname">multicast routing-enable</span></b></a></span></span><p><p>IP multicast routing is enabled.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i><i><span class="varname">interface-number</span></i></span></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=pim+sm"><b><span class="cmdname">pim sm</span></b></a></span></span><p><p>PIM-SM is enabled on the interface.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=igmp+enable"><b><span class="cmdname">igmp enable</span></b></a></span></span><p><p>IGMP is enabled.</p>
</p></li><li class="substepexpand"><span>(Only on the interface that connects the backup device to the master device) Run <span><a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong><strong><span>bfd-session</span></strong> { <i><span class="varname">bfd-session-id</span></i> | <strong><span>session-name</span></strong> <i><span class="varname">bfd-configure-name</span></i> } [ <strong><span>increased</span></strong> <i><span class="varname">value-increased</span></i> | [ <strong><span>reduced</span></strong> <i><span class="varname">priority-value</span></i> ] ]</span></span><p><p>The mVRRP group is enabled to track the BFD session.</p>
</p></li><li class="substepexpand"><span>(On the interface that connects the master and backup devices) Run <span><a href="cmdqueryname=vrrp+vrid+track+monitor-group"><b><span class="cmdname">vrrp vrid track monitor-group</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>monitor-group</span></strong> [ <i><span class="varname">monitor-group-name</span></i> ] <strong><span>failure-ratio</span></strong> <i><span class="varname">failure-ratio-value</span></i> [ <strong><span>link</span></strong> | [ <strong><span>reduced</span></strong> <i><span class="varname">priority-value</span></i> ] ]</span></span><p><p>The mVRRP group is enabled to track the interface monitoring group.</p>
</p></li><li class="substepexpand"><span>(On the interface that connects to a downstream device) Run <span><a href="cmdqueryname=multicast+track+admin-vrrp"><b><span class="cmdname">multicast track admin-vrrp</span></b></a> <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i><i><span class="varname">interface-number</span></i> <strong><span>vrid</span></strong> <i><span class="varname">vrid-value</span></i></span></span><p><p>The multicast service interface is bound to the mVRRP group.</p>
</p></li><li class="substepexpand"><span>(On the interface that connects to a downstream device) Run <span><a href="cmdqueryname=pim+ignore+dr-state"><b><span class="cmdname">pim ignore dr-state</span></b></a></span></span><p><p>The interface is enabled to ignore the PIM DR state.</p>
</p></li><li class="substepexpand"><span>(On the interface that connects to a downstream device) Run <span><a href="cmdqueryname=pim+ignore+assert-state"><b><span class="cmdname">pim ignore assert-state</span></b></a></span></span><p><p>The interface is enabled to ignore the PIM Assert state.</p>
</p></li><li class="substepexpand"><span>(On the interface that connects to a downstream device) Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0114.html">IGMP Dual-Device Backup Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0123.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0129.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>