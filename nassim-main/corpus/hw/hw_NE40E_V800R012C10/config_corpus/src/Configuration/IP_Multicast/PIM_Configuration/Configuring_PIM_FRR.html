
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring PIM FRR">
<meta name="abstract" content="PIM fast reroute (FRR) is a link protection measure used to minimize service loss when link or node faults occur on PIM-SM or PIM-SSM SPTs.">
<meta name="description" content="PIM fast reroute (FRR) is a link protection measure used to minimize service loss when link or node faults occur on PIM-SM or PIM-SSM SPTs.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2288.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2248.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366902">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring PIM FRR</title>
</head>
<body><a name="EN-US_TASK_0172366902"></a><a name="EN-US_TASK_0172366902"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring PIM FRR</h1>
<div class="taskbody"><p>PIM fast reroute (FRR) is a link protection measure used to minimize service loss when link or node faults occur on PIM-SM or PIM-SSM SPTs.</p>
<div class="context"><a name="EN-US_TASK_0172366902__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>If a multicast link fails, services are interrupted before unicast routes are converged. Route convergence generally takes a long time, which is unacceptable by multicast services that have high requirements on real-time data transmission. To resolve this problem, configure PIM FRR. After PIM FRR is configured, PIM sets up primary and backup MDTs based on unicast backup FRR routes, allowing multicast traffic transmission through both the primary and backup links. The device's forwarding plane permits the multicast traffic on the primary link and discards that on the backup link. However, the forwarding plane permits the multicast traffic on the backup link immediately after the primary link fails, thus minimizing traffic loss.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>PIM FRR can be configured only in IPv4 multicast and Rosen MVPN scenarios. If PIM FRR is needed in a Rosen MVPN scenario, PIM FRR must be configured on both the source and receiving ends. If PIM FRR is configured only on one end, PIM FRR does not work properly.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366902__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring PIM FRR, complete the following tasks:</p>
<ul><li><p>Configure a unicast routing protocol to ensure that devices are reachable.</p>
</li><li><p><a href="dc_vrp_ip-route_cfg_0019.html">Configure IGP FRR.</a></p>
</li><li><p><a href="dc_vrp_multicast_cfg_0006.html">Configure basic PIM-SM functions.</a></p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366902__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=multicast+frr+monitor+cycle"><b><span class="cmdname">multicast frr monitor cycle</span></b></a> <i><span class="varname">cycle-value</span></i></span><p><p>The multicast FRR monitoring interval is set.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=multicast+static-frr"><b><span class="cmdname">multicast static-frr</span></b></a> <strong><span>source</span></strong> <i><span class="varname">source-address</span></i> <strong><span>group</span></strong> <i><span class="varname">group-address</span></i> [ <strong><span>mask</span></strong> <i><span class="varname">mask-value</span></i> | <strong><span>mask-length</span></strong> <i><span class="varname">mask-length</span></i> ] [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span><p><p>Static multicast FRR is enabled.</p>
</p></li><li><span>Run <a href="cmdqueryname=pim"><b><span class="cmdname">pim</span></b></a> [ <strong><span>vpn-instance</span></strong><i><span class="varname">vpn-instance-name</span></i> ]</span><p><p>The PIM view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=rpf-frr"><b><span class="cmdname">rpf-frr</span></b></a> [ <strong><span>policy</span></strong> { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong><i><span class="varname">acl-name</span></i> } ]</span><p><p>PIM FRR is enabled.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=rpf-prune-delay"><b><span class="cmdname">rpf-prune-delay</span></b></a> <i><span class="varname">delay-time</span></i> [ <strong><span>policy</span></strong> { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } ]</span><p><p>The delay in sending Prune messages to the upstream device is set.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=backup-rpf-switchover-delay"><b><span class="cmdname">backup-rpf-switchover-delay</span></b></a> { <strong><span>flow-based</span></strong> | <strong><span>interval</span></strong> <i><span class="varname">hold-time</span></i> } [ <strong><span>policy</span></strong> { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } ]</span><p><p>The delay in generating forwarding entries corresponding to the interface connected to the backup upstream device is set.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172366902__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring PIM FRR, run the <a href="cmdqueryname=display+pim"><b><span class="cmdname">display pim</span></b></a> <strong><span>routing-table</span></strong> command to check the PIM routing table.</p>
<p>Run the <a href="cmdqueryname=display+multicast+frr-table"><b><span class="cmdname">display multicast frr-table</span></b></a> command to check multicast FRR entries of multicast groups.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0003.html">PIM Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2288.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2248.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>