
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring MBGP RRs">
<meta name="abstract" content="MBGP RRs resolve the problem of full-mesh connections between multiple IBGP peers, which reduces network costs.">
<meta name="description" content="MBGP RRs resolve the problem of full-mesh connections between multiple IBGP peers, which reduces network costs.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1025.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1027.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367061">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring MBGP RRs</title>
</head>
<body><a name="EN-US_TASK_0172367061"></a><a name="EN-US_TASK_0172367061"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring MBGP RRs</h1>
<div class="taskbody"><p>MBGP RRs resolve the problem of full-mesh connections between multiple IBGP peers, which reduces network costs.</p>
<div class="context"><a name="EN-US_TASK_0172367061__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>Full-mesh connections need to be established between IBGP peers in an AS to ensure the connectivity between the IBGP peers. When there are many IBGP peers, it is costly to establish a fully-meshed network. An RR can be used to solve the problem.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367061__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring MBGP RRs, <a href="dc_vrp_multicast_cfg_1003.html">configure an MBGP peer</a>.</p>
<div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>An RR takes effect only for IBGP peers. Before configuring an MBGP RR, establish an IBGP peer relationship between the RR and each of its clients.</p>
</div></div>
<p>This configuration is optional. </p>
<p>Perform the following steps on the <span class="keyword">Router</span> to be configured as an MBGP RR:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172367061__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>Run the <a href="cmdqueryname=ipv4-family+multicast"><b><span class="cmdname">ipv4-family multicast</span></b></a> command to enter the BGP-IPv4 multicast address family view, or run the <strong><a href="cmdqueryname=ipv4-multicast+vpn-instance"><b><span class="cmdname">ipv4-multicast vpn-instance</span></b></a> </strong><em><i><span class="varname">vpn-instance-name</span></i></em> command to enter the BGP-multicast VPN instance IPv4 address family view.</span></li><li><span>Run <span><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">peer-address</span></i> } <strong><span>reflect-client</span></strong></span></span><p><p>The device is configured as an RR and its peer or peer group is configured as a client.</p>
</p><p><ul><li><p><i><span class="varname">group-name</span></i>: specifies the name of an MBGP peer group.</p>
</li><li><p><i><span class="varname">peer-address</span></i>: specifies the IP address of a remote MBGP peer.</p>
</li></ul>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=reflector+cluster-id"><b><span class="cmdname">reflector cluster-id</span></b></a> { <i><span class="varname">cluster-id-value</span></i> | <i><span class="varname">cluster-id-ipv4</span></i> }</span><p><p>A cluster ID is configured for the RR.</p>
</p><p><ul><li><p><i><span class="varname">cluster-id-value</span></i>: specifies a cluster ID in the decimal format.</p>
</li><li><p><i><span class="varname">cluster-id-ipv4</span></i>: specifies a cluster ID in the format of an IPv4 address.</p>
</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172367061__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Checking the Configurations</h4><p>After the configuration is complete, verify the configuration.</p>
<ul><li>Run the <a href="cmdqueryname=display+bgp+multicast+routing-table"><b><span class="cmdname">display bgp multicast routing-table</span></b></a> command to check routes in the MBGP routing table.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1000.html">MBGP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1025.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1027.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>