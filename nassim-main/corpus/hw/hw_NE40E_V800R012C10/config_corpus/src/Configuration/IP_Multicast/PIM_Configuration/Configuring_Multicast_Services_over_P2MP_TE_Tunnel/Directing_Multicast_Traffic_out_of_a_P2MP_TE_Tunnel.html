
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Directing Multicast Traffic out of a P2MP TE Tunnel">
<meta name="abstract" content="When a point-to-multipoint (P2MP) traffic engineering (TE) tunnel is used to carry multicast services, you must direct multicast traffic out of the P2MP TE tunnel on the tunnel egress so that the multicast traffic can be correctly forwarded after leaving the tunnel.">
<meta name="description" content="When a point-to-multipoint (P2MP) traffic engineering (TE) tunnel is used to carry multicast services, you must direct multicast traffic out of the P2MP TE tunnel on the tunnel egress so that the multicast traffic can be correctly forwarded after leaving the tunnel.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2196.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2197.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2199.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366895">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Directing Multicast Traffic out of a P2MP TE Tunnel</title>
</head>
<body><a name="EN-US_TASK_0172366895"></a><a name="EN-US_TASK_0172366895"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Directing Multicast Traffic out of a P2MP TE Tunnel</h1>
<div class="taskbody"><p>When a point-to-multipoint (P2MP) traffic engineering (TE) tunnel is used to carry multicast services, you must direct multicast traffic out of the P2MP TE tunnel on the tunnel egress so that the multicast traffic can be correctly forwarded after leaving the tunnel.</p>
<div class="context"><a name="EN-US_TASK_0172366895__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When a P2MP TE tunnel is used to carry multicast services, you do not need to deploy the Protocol Independent Multicast (PIM) on the transit nodes of the tunnel. If an egress performs the Reverse Path Forwarding (RPF) check on a received multicast data packet, the RPF check fails. As a result, the multicast data packet cannot be forwarded to the next-hop device. To resolve this problem, disable each egress from performing the RPF check on received packets.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366895__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> { <strong><span>name</span></strong> <i><span class="varname">advance-acl-name</span></i> [ <strong><span>advance</span></strong> | [ <strong><span>advance</span></strong> ] <strong><span>number</span></strong> <i><span class="varname">advance-acl-number</span></i> ] | [ <strong><span>number</span></strong> ] <i><span class="varname">advance-acl-number</span></i> } [ <strong><span>match-order</span></strong> { <strong><span>config</span></strong> | <strong><span>auto</span></strong> } ]</span></span><p><p>An advanced ACL is created, and the advanced ACL view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>ip</span></strong> [ <strong><span>destination</span></strong> { <i><span class="varname">destination-ip-address</span></i> { <i><span class="varname">destination-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } ] <sup>*</sup></span></span><p><p>Rules are configured for the advanced ACL.</p>
<p>Run the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command, set the <strong><span>source</span></strong> parameter to a multicast source address, and set the <strong><span>destination</span></strong> parameter to a multicast group address.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <a href="cmdqueryname=pim"><b><span class="cmdname">pim</span></b></a> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span><p><p>The PIM view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=rpf+disable"><b><span class="cmdname">rpf disable</span></b></a> { <strong><span>policy</span></strong> { <i><span class="varname">advanced-acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } | <strong><span>all</span></strong> }</span><p><p>The RPF check on multicast entries is disabled.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>If a multicast entry matches an ACL rule and the action is <strong>permit</strong>, the device does not perform the RPF check on the entry.</li><li>If a multicast entry matches an ACL rule and the action is <strong>deny</strong>, the device performs the RPF check on the entry.</li><li>If a multicast entry does not match any ACL rule, the device performs the RPF check on the entry.</li><li>If a specified ACL does not exist or does not contain rules, the device performs the RPF check on all multicast entries.</li></ul>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=traffic+select+p2mp-te"><b><span class="cmdname">traffic select p2mp-te</span></b></a> <strong><span>root-ip</span></strong> <i><span class="varname">ip-address</span></i> <strong><span>tunnel-id</span></strong> <i><span class="varname">tunnel-id</span></i></span><p><p>The multicast traffic from the specified P2MP TE tunnel is directed to the VPN.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2196.html">Configuring Multicast Services over P2MP TE Tunnel
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2197.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2199.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>