
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring DNS-based SSM Mapping">
<meta name="abstract" content="If a multicast device has many IGMPv1 and IGMPv2 users and there are many SSM mappings, you can configure the DNS-based SSM mapping function to simplify mapping configuration and maintenance.">
<meta name="description" content="If a multicast device has many IGMPv1 and IGMPv2 users and there are many SSM mappings, you can configure the DNS-based SSM mapping function to simplify mapping configuration and maintenance.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2067.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2069.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0132.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366774">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring DNS-based SSM Mapping</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366774"></a><a name="EN-US_TASK_0172366774"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring DNS-based SSM Mapping</h1>
<div class="taskbody"><p>If a multicast device has many IGMPv1 and IGMPv2 users and there are many SSM mappings, you can configure the DNS-based SSM mapping function to simplify mapping configuration and maintenance.</p>
<div class="context"><a name="EN-US_TASK_0172366774__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the multicast network shown in <a href="#EN-US_TASK_0172366774__fig_dc_vrp_multicast_cfg_229101">Figure 1</a>, PIM-SM is run, and the SSM mode is configured to provide multicast services. IGMPv3 runs on the <span class="keyword">Router</span> interfaces connecting to user hosts Receivers. Receivers run IGMPv2, and the IGMP protocol cannot be upgraded to IGMPv3.</p>
<p>The SSM group address range on the network is 232.1.1.0/24. Source1, Source2, Source3, and Source4 send multicast traffic to the multicast groups in this range. It is required that Receiver1 receive multicast traffic only from Source1 and Source3 while Receiver2 receive multicast traffic only from Source2 and Source4.</p>
<div class="fignone" id="EN-US_TASK_0172366774__fig_dc_vrp_multicast_cfg_229101"><a name="EN-US_TASK_0172366774__fig_dc_vrp_multicast_cfg_229101"></a><a name="fig_dc_vrp_multicast_cfg_229101"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for configuring DNS-based SSM mapping</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1, 2, 3, and 4 in this example represent GE <span>0/1/1</span>, GE <span>0/1/2</span>, GE <span>0/1/3</span>, and GE <span>0/1/4</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_multicast_cfg_229101.png" width="NaN" height="NaN"></span><br></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.5.1.4.1.1" liSelected="liSelected"><p>Device</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.5.1.4.1.2" liSelected="liSelected"><p>Interface Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.5.1.4.1.3" liSelected="liSelected"><p>Interface IP Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="2" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p><span class="keyword">Device</span>A</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p>10.0.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>192.168.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p><span class="keyword">Device</span>B</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p>10.0.3.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>192.168.3.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p><span class="keyword">Device</span>C</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p>192.168.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>192.168.3.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/3</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>192.168.2.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p><span class="keyword">Device</span>D</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p>10.0.11.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>10.0.10.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/3</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>192.168.2.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/4</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>10.0.12.1/24</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366774__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>When configuring DNS-based SSM mapping, note the following:</p>
<ul><li><p>PIM-SM and IGMP need to be enabled in succession on the interfaces connecting to the hosts.</p>
</li><li><p>The ranges of SSM group addresses configured on all <span class="keyword">Router</span>s in a PIM-SM domain must be the same.</p>
</li><li><p>Before configuring DNS-based SSM mapping, configure basic IGMP functions. For details, see <a href="dc_vrp_multicast_cfg_2068.html">Example for Configuring Basic IGMP Functions</a>.</p>
</li><li><p>The configured SSM source-group address mappings take effect only after the SSM mapping function is enabled on the interfaces.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366774__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><ol><li><p>Assign IP addresses to <span class="keyword">Router</span> interfaces and configure a unicast routing protocol.</p>
</li><li><p>Enable multicast routing on all <span class="keyword">Router</span>s that provide multicast services.</p>
</li><li><p>Enable PIM-SM on all interfaces of each multicast <span class="keyword">Router</span>.</p>
</li><li><p>Enable the IGMP and SSM mapping functions on the interfaces connecting to user hosts.</p>
</li><li><p>Configure the SSM group address range on all <span class="keyword">Router</span>s in the PIM-SM domain.</p>
</li><li><p>Configure DNS-based static SSM mapping on the <span class="keyword">Router</span> connecting to the user hosts.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366774__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>SSM group address range</p>
</li><li><p>IP addresses of Source1, Source2, Source3, and Source4</p>
</li><li><p>DNS server's IP address 10.0.10.5</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366774__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign IP addresses to <span class="keyword">Router</span> interfaces and configure a unicast routing protocol. For configuration details, see <strong>Configuration Files</strong> in this section.</span></li><li><span>Enable multicast on each <span class="keyword">Router</span> and PIM-SM on each interface of the <span class="keyword">Router</span>s.</span><p><p># The configurations on <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, and <span class="keyword">Device</span>C are similar to the configuration of <span class="keyword">Device</span>D. For configuration details, see <strong>Configuration Files</strong> in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>multicast routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/1</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/2</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface gigabitethernet <span>0/1/3</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/3</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/3</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface gigabitethernet <span>0/1/4</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/4</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/4</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/4</span>] <strong>quit</strong></pre>
</p></li><li><span>Enable the IGMP and SSM mapping functions on the interfaces connecting to user hosts.</span><p><p># Enable the IGMP and SSM mapping functions on GE<span>0/1/1</span> and GE<span>0/1/4</span> of <span class="keyword">Device</span>D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/1</span>] <strong>igmp enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/1</span>] <strong>igmp version 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/1</span>] <strong>igmp ssm-mapping enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface gigabitethernet <span>0/1/4</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/4</span>] <strong>igmp enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/4</span>] <strong>igmp version 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/4</span>] <strong>igmp ssm-mapping enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/4</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/4</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/4</span>] <strong>quit</strong></pre>
</p></li><li><span>Set SSM group address ranges.</span><p><p># Set the SSM group address range to 232.1.1.0/24 on all <span class="keyword">Router</span>s. The configurations for <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, and <span class="keyword">Device</span>D are similar to those on <span class="keyword">Device</span>A. For configuration details, see <strong>Configuration Files</strong> in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>acl number 2000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl4-basic-2000] <strong>rule permit source 232.1.1.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl4-basic-2000] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>pim</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-pim] <strong>ssm-policy 2000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-pim] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-pim] <strong>quit</strong></pre>
</p></li><li><span>Configure DNS-based static SSM mapping on the <span class="keyword">Router</span> connecting to the user hosts.</span><p><p># On <span class="keyword">Device</span>D, set the domain name suffix used by multicast groups 232.1.1.5 and 232.1.1.10 to <strong>huawei.com</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>igmp</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-igmp] <strong>ssm-mapping query dns</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-igmp] <strong>ssm-mapping domain huawei.com</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-igmp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/1</span>] <strong>igmp static-group 232.1.1.10 source dns-ssm-map</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface gigabitethernet <span>0/1/4</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/4</span>] <strong>igmp static-group 232.1.1.5 source dns-ssm-map</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/4</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Display DNS-based SSM mapping information on <span class="keyword">Device</span>D.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display igmp dns-ssm-mapping</strong></pre>
<pre class="screen">IGMP SSM-Mapping conversion table of VPN-Instance: public net

 00001. Group: 232.1.1.5
          Domain: 5.1.1.232.huawei.com
          Number of sources: 2
          Source address list:
            10.0.1.11
            10.0.3.13
 00002. Group: 232.1.1.10
          Domain: 10.1.1.232.huawei.com
          Number of sources: 2
          Source address list:
            10.0.1.12
            10.0.3.14</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172366774__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span> A configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>A
#
multicast routing-enable
#
acl number 2000
 rule permit source 232.1.1.0 0.0.0.255
#
isis 1
 network-entity 10.0000.0000.0001.00
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.0.1.1 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 192.168.1.1 255.255.255.0
 pim sm
 isis enable 1
#
pim
 ssm-policy 2000
#
return</pre>
</li><li><p><span class="keyword">Device</span> B configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>B
#
multicast routing-enable
#
acl number 2000
 rule permit source 232.1.1.0 0.0.0.255
#
isis 1
 network-entity 10.0000.0000.0002.00
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.0.3.1 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 192.168.3.1 255.255.255.0
 pim sm
 isis enable 1
#
pim
 ssm-policy 2000
#
return</pre>
</li><li><p><span class="keyword">Device</span> C configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>C
#
multicast routing-enable
#
acl number 2000
 rule permit source 232.1.1.0 0.0.0.255
#
isis 1
 network-entity 10.0000.0000.0003.00
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 192.168.1.2 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 192.168.3.2 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/1/3</span>
 undo shutdown
 ip address 192.168.2.1 255.255.255.0
 pim sm
 isis enable 1
#
pim
 ssm-policy 2000
#
return</pre>
</li><li><p><span class="keyword">Device</span> D configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>D
#
multicast routing-enable
#
acl number 2000
 rule permit source 232.1.1.0 0.0.0.255
#
isis 1
 network-entity 10.0000.0000.0004.00
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.0.11.1 255.255.255.0
 isis enable 1
 pim sm
 igmp enable
 igmp version 3
 igmp ssm-mapping enable
 igmp static-group 232.1.1.10 source dns-ssm-map
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 10.0.10.1 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/1/3</span>
 undo shutdown
 ip address 192.168.2.2 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/1/4</span>
 undo shutdown
 ip address 10.0.12.1 255.255.255.0
 isis enable 1
 pim sm
 igmp enable
 igmp version 3
 igmp ssm-mapping enable
 igmp static-group 232.1.1.5 source dns-ssm-map
#
igmp
 ssm-mapping query dns
 ssm-mapping domain huawei.com
#
dns resolve
dns server 10.0.10.5
#
pim
 ssm-policy 2000
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2067.html">Configuration Examples for IGMP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2069.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0132.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>