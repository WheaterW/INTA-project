
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring UMH Route Selection Rules">
<meta name="abstract" content="This section describes how to configure upstream multicast hop (UMH) route selection rules on receiver PEs on an NG MVPN, so that the receiver PEs can select the same sender PE as their root node during VPN route selection.">
<meta name="description" content="This section describes how to configure upstream multicast hop (UMH) route selection rules on receiver PEs on an NG MVPN, so that the receiver PEs can select the same sender PE as their root node during VPN route selection.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0120.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0015.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv4 Multicast VPN_NG MVPN">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Multicast VPN_NG MVPN">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv4 Multicast VPN_NG MVPN">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001270433357">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring UMH Route Selection Rules</title>
</head>
<body><a name="EN-US_TASK_0000001270433357"></a><a name="EN-US_TASK_0000001270433357"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring UMH Route Selection Rules</h1>
<div class="taskbody"><p>This section describes how to configure upstream multicast hop (UMH) route selection rules on receiver PEs on an NG MVPN, so that the receiver PEs can select the same sender PE as their root node during VPN route selection.</p>
<div class="context"><a name="EN-US_TASK_0000001270433357__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>On an NG MVPN, when multiple sender PEs exist, receiver PEs select routes based on preferred unicast routes by default. In this case, different receiver PEs select different sender PEs as their root nodes. This requires multiple P2MP tunnels to be established. As a result, many public network tunnel resources are consumed. To resolve the preceding issue, enable the highest IP address to be selected as the UMH on receiver PEs, so that the receiver PEs select the same sender PE as their root node during VPN route selection.</p>
<p>Perform the following steps in the VPN instance MVPN view of a PE.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001270433357__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span><p><p>The VPN instance view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a></span><p><p>The VPN instance IPv4 address family view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=mvpn"><b><span class="cmdname">mvpn</span></b></a></span><p><p>The VPN instance IPv4 address family MVPN view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=umh-select+highest-ip"><b><span class="cmdname">umh-select highest-ip</span></b></a></span><p><p>The maximum IP address is selected as the UMH in an MVPN instance.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0000.html">NG MVPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0120.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0015.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>