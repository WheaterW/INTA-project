
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a BIER Tunnel to Carry Multicast Traffic">
<meta name="abstract" content="NG MVPNs use BIER P2MP tunnels to carry multicast traffic.">
<meta name="description" content="NG MVPNs use BIER P2MP tunnels to carry multicast traffic.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bier_cfg_01.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bier_cfg_013.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bier_cfg_015.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BIER">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BIER">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="BIER">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="BIER">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0178645716">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a BIER Tunnel to Carry Multicast Traffic</title>
</head>
<body><a name="EN-US_TOPIC_0178645716"></a><a name="EN-US_TOPIC_0178645716"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a BIER Tunnel to Carry Multicast Traffic</h1>
<div class="taskbody"><p>NG MVPNs use BIER P2MP tunnels to carry multicast traffic. </p>
<div class="context"><a name="EN-US_TOPIC_0178645716__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Each edge node in a BIER sub-domain must be configured with a BFR-ID that is unique to the sub-domain. In the NG MVPN over BIER scenario, a BFR-ID needs to be configured for the sender PE and receiver PEs. Ps do not require BFR-IDs, but you need to enable BIER on the Ps.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TOPIC_0178645716__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Perform the following steps on a PE to be configured as a sender PE:</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=multicast+mvpn"><b><span class="cmdname">multicast mvpn</span></b></a><i><span class="varname">mvpn-id</span></i></span><p><p>An MVPN ID is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a><i><span class="varname">vpn-instance-name</span></i></span><p><p>The VPN instance view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a></span><p><p>The VPN instance IPv4 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=multicast+routing-enable"><b><span class="cmdname">multicast routing-enable</span></b></a></span><p><p>Multicast routing is enabled in the VPN instance IPv4 address family view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mvpn"><b><span class="cmdname">mvpn</span></b></a></span><p><p>The VPN instance IPv4 address family MVPN view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=c-multicast+signaling+bgp"><b><span class="cmdname">c-multicast signaling bgp</span></b></a></span><p><p>BGP is configured as the signaling protocol for transmitting C-multicast routes.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=sender-enable"><b><span class="cmdname">sender-enable</span></b></a></span><p><p>The PE is configured as a sender PE.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=vpn-target+%28VPN+instance+IPv4+address+family+MVPN+view%29"><b><span class="cmdname">vpn-target (VPN instance IPv4 address family MVPN view)</span></b></a></span><p><p>MVPN targets are configured in the VPN instance IPv4 address family MVPN view.</p>
</p><p></p></li><li class="substepexpand"><span>(Optional) Configure the PIM-SM MDT setup mode:</span><p><ul><li><p>To set up PIM-SM MDTs across the public network, run the <a href="cmdqueryname=rpt-spt+mode"><b><span class="cmdname">rpt-spt mode</span></b></a> command.</p>
</li><li>To set up PIM-SM MDTs not across the public network, run the <a href="cmdqueryname=spt-only+mode"><b><span class="cmdname">spt-only mode</span></b></a> command.</li></ul>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipmsi-tunnel"><b><span class="cmdname">ipmsi-tunnel</span></b></a></span><p><p>The MVPN I-PMSI view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bier+%28MVPN-IPMSI+view%29"><b><span class="cmdname">bier</span></b></a> [ <strong><span>sub-domain</span></strong> <i><span class="varname">sub-domain-val</span></i> ] [ <strong><span>bsl</span></strong> { <strong><span>64</span></strong> | <strong><span>128</span></strong> | <strong><span>256</span></strong> } ]</span><p><p>The I-PMSI tunnel type is set to BIER.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Perform the following steps on a PE to be configured as a receiver PE:</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=multicast+mvpn"><b><span class="cmdname">multicast mvpn</span></b></a><i><span class="varname">mvpn-id</span></i></span><p><p>An MVPN ID is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a><i><span class="varname">vpn-instance-name</span></i></span><p><p>The VPN instance view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a></span><p><p>The VPN instance IPv4 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=multicast+routing-enable"><b><span class="cmdname">multicast routing-enable</span></b></a></span><p><p>Multicast routing is enabled in the VPN instance IPv4 address family view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mvpn"><b><span class="cmdname">mvpn</span></b></a></span><p><p>The VPN instance IPv4 address family MVPN view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=vpn-target+%28VPN+instance+IPv4+address+family+MVPN+view%29"><b><span class="cmdname">vpn-target (VPN instance IPv4 address family MVPN view)</span></b></a></span><p><p>MVPN targets are configured in the VPN instance IPv4 address family MVPN view.</p>
</p><p></p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=c-multicast+signaling"><b><span class="cmdname">c-multicast signaling</span></b></a> <strong><span>bgp</span></strong></span><p><p>BGP is configured as the signaling protocol for transmitting C-multicast routes.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=vrf-route-import+compatible+draft"><b><span class="cmdname">vrf-route-import compatible draft</span></b></a></span><p><p>The VRF Route Import Extended Community carried in BGP Update messages is configured to use the format defined in an IETF draft.</p>
</p><p><p>If a non-Huawei device uses the message encapsulation format defined in an IETF draft, run the <a href="cmdqueryname=vrf-route-import+compatible+draft"><b><span class="cmdname">vrf-route-import compatible draft</span></b></a> command to enable a Huawei device to use the message encapsulation format defined in the draft so that the Huawei device can communicate with the non-Huawei device.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure the PIM-SM MDT setup mode:</span><p><ul><li>To set up PIM-SM MDTs across the public network, run the <a href="cmdqueryname=rpt-spt+mode"><b><span class="cmdname">rpt-spt mode</span></b></a> command.</li><li>To set up PIM-SM MDTs not across the public network, run the <a href="cmdqueryname=spt-only+mode"><b><span class="cmdname">spt-only mode</span></b></a> command.</li></ul>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=export+msdp"><b><span class="cmdname">export msdp</span></b></a></span><p><p>The transmission of (S, G) entry information in BGP Source Active A-D routes to the RP through MSDP SA messages is enabled.</p>
</p><p><p>If PIM-SM MDT setup is not across the public network, you can configure a PE or CE as a VPN instance's RP. If a CE is configured as an RP, the CE needs to establish an MSDP peer relationship with its connected PE. To enable this PE to transmit (S, G) entry information in BGP Source Active A-D routes to the CE configured as the RP, run the <a href="cmdqueryname=export+msdp"><b><span class="cmdname">export msdp</span></b></a> command.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bier_cfg_01.html">Configuring NG MVPN over BIER
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bier_cfg_013.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bier_cfg_015.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>