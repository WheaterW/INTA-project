
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Static Multicast Access for a PPPoE Dual-Stack User (ND Unshared+PD Mode) in an IPTV Scenario">
<meta name="abstract" content="This section provides an example for configuring static multicast access for a PPPoE dual-stack user (ND unshared+PD mode). The example covers networking requirements, configuration roadmap, configuration procedure, and configuration files.">
<meta name="description" content="This section provides an example for configuring static multicast access for a PPPoE dual-stack user (ND unshared+PD mode). The example covers networking requirements, configuration roadmap, configuration procedure, and configuration files.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bras-multicast_cfg_0007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_bras-multicast_cac_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_bras-multicast_cac_cfg_1002.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="User-Side Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="User-Side Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="User-Side Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="User-Side Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001248741583">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Static Multicast Access for a PPPoE Dual-Stack User (ND Unshared+PD Mode) in an IPTV Scenario</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001248741583"></a><a name="EN-US_TASK_0000001248741583"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Static Multicast Access for a PPPoE Dual-Stack User (ND Unshared+PD Mode) in an IPTV Scenario</h1>
<div class="taskbody"><p>This section provides an example for configuring static multicast access for a PPPoE dual-stack user (ND unshared+PD mode). The example covers networking requirements, configuration roadmap, configuration procedure, and configuration files.</p>
<div class="context"><a name="EN-US_TASK_0000001248741583__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In an IPTV scenario shown in <a href="#EN-US_TASK_0000001248741583__fig_dc_ne_bras-multicast_cac_cfg_000201">Figure 1</a>, a user (STB) accesses a BRAS using PPPoE. The BRAS uses RADIUS authentication and accounting. The user wants to join multicast groups 225.1.1.1 and 227.1.1.1 after going online. Therefore, the multicast function needs to be configured on the BRAS to connect to the PIM-SM network. To allow the user to access IPv4 and IPv6 networks, configure the device to assign the user an IPv4 address from a local address pool, an IPv6 prefix using DHCPv6 IA_PD, and an IPv6 address using ND.</p>
<div class="fignone" id="EN-US_TASK_0000001248741583__fig_dc_ne_bras-multicast_cac_cfg_000201"><a name="EN-US_TASK_0000001248741583__fig_dc_ne_bras-multicast_cac_cfg_000201"></a><a name="fig_dc_ne_bras-multicast_cac_cfg_000201"></a><span class="figcap"><b>Figure 1 </b>Configuring static multicast access for a PPPoE dual-stack user (ND unshared+PD mode)</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interface1, interface2, and interface3 in this example represent Eth-Trunk2, GE<span>0/1/0</span>, and GE<span>0/1/1</span>, respectively.</p>
</div></div>
<p><span><img class="vsd" src="figure/en-us_image_0000001249969743.png"></span></p>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001248741583__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap (on the BRAS) is as follows:</p>
<ol><li><p>Configure AAA schemes.</p>
</li><li>Configure RADIUS.</li><li>Configure address pools.</li><li><p>Configure a domain.</p>
</li><li>Configure interfaces.</li><li><p>Configure basic multicast functions.</p>
</li><li><p>Configure static multicast.</p>
</li><li>Configure an RP.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001248741583__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><ul><li><p>Address pool names, address ranges, and gateway addresses</p>
</li><li><p>Authentication and accounting schemes (user authentication on the BRAS through RADIUS)</p>
</li><li><p>Name of the domain to which the user belongs</p>
</li><li><p>VT interface number</p>
</li><li><p>BAS interface parameters</p>
</li><li>Multicast-related parameters</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001248741583__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure AAA schemes.</span><p><p># Configure an authentication scheme that uses the RADIUS authentication mode.</p>
<pre class="screen">&lt;HUAWEI&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>HUAWEI] <strong>sysname</strong> <strong>BRAS</strong>
[<span class="keyword">*</span>HUAWEI] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong> aaa</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong> authentication-scheme auth1</strong>
[<span class="keyword">*</span>BRAS-aaa-authen-auth1]<strong> authentication-mode radius</strong>
[<span class="keyword">*</span>BRAS-aaa-authen-auth1]<strong> quit</strong>
[<span class="keyword">*</span>BRAS-aaa] <strong>commit</strong></pre>
<p># Configure an accounting scheme that uses the RADIUS accounting mode.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong> accounting-scheme acct1</strong>
[<span class="keyword">*</span>BRAS-aaa-accounting-acct1]<strong> accounting-mode radius</strong>
[<span class="keyword">*</span>BRAS-aaa-accounting-acct1]<strong> quit</strong>
[<span class="keyword">*</span>BRAS-aaa] <strong>commit</strong>
[<span class="keyword">*</span>BRAS-aaa] <strong>quit</strong></pre>
</p></li><li><span>Configure a loopback interface as the source interface for accessing servers.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>interface</strong> <strong>Loopback1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-LoopBack1] <strong>ipv6 enable</strong>
[<span class="keyword">*</span>BRAS-LoopBack1] <strong>ipv6 address 2001:db8::2:2 64</strong>
[<span class="keyword">*</span>BRAS-LoopBack1] <strong>ipv6 address auto link-local</strong>
[<span class="keyword">*</span>BRAS-LoopBack1] <strong>ip address 10.2.2.2 24</strong>
[<span class="keyword">*</span>BRAS-LoopBack1] <strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commit</strong></pre>
</p></li><li><span>Configure RADIUS.</span><p><p># Create UDP sockets with the local port numbers 1645, 1646, and 3799 and with any local IP address.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong> </strong><strong>radius local-ip all</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>commit</strong></pre>
<p># Configure a RADIUS server group.</p>
</p><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong> radius-server group rd1</strong>
[<span class="keyword">*</span>BRAS-radius-rd1]<strong> radius-server authentication 192.168.7.249 1812 weight 0</strong>
[<span class="keyword">*</span>BRAS-radius-rd1]<strong> radius-server accounting 192.168.7.249 1813 weight </strong><strong>0</strong>
[<span class="keyword">*</span>BRAS-radius-rd1]<strong> radius-server shared-key-cipher YsHsjx_202206 </strong>
[<span class="keyword">*</span>BRAS-radius-rd1]<strong> radius-server source interface loopback1</strong>
[<span class="keyword">*</span>BRAS-radius-rd1]<strong> commit </strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-radius-rd1] <strong>quit</strong></pre>
</p></li><li><span>Configure address pools.</span><p><p># Configure a user-side local IPv4 address pool.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>ip pool </strong><strong>pool_v4</strong> <strong>bas local</strong>
[<span class="keyword">*</span>BRAS-ip-pool-pool_v4] <strong>gateway 172.16.0.1 255.255.255.0</strong>
[<span class="keyword">*</span>BRAS-ip-pool-pool_v4] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-ip-pool-pool_v4] <strong>section 0 172.16.0.2 172.16.0.200</strong> 
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-ip-pool-pool_v4] <strong>dns-server 10.179.155.161 10.179.155.177</strong>
[<span class="keyword">*</span>BRAS-ip-pool-pool_v4] <strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commit</strong></pre>
<p># Configure an IPv6 address pool.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>ipv6 prefix </strong><strong>pre_nd</strong> <strong>delegation</strong>
[<span class="keyword">*</span>BRAS-ipv6-prefix-pre_nd] <strong>prefix 2001:db8:1::/48</strong>
[<span class="keyword">*</span>BRAS-ipv6-prefix-pre_nd] <strong>slaac-unshare-only</strong>
[<span class="keyword">*</span>BRAS-ipv6-prefix-pre_nd] <strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commi</strong><strong>t</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>ipv6 pool pool_nd bas delegation</strong>
[<span class="keyword">*</span>BRAS-ipv6-pool-pool_nd] <strong>prefix pre_nd</strong>
[<span class="keyword">*</span>BRAS-ipv6-pool-pool_nd] <strong>dns-server 2001:db8::2:2 2001:db8::2:3</strong>
[<span class="keyword">*</span>BRAS-ipv6-pool-pool_nd] <strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commi</strong><strong>t</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>ipv6 prefix </strong><strong>pre_pd</strong> <strong>delegation</strong>
[<span class="keyword">*</span>BRAS-ipv6-prefix-pre_pd] <strong>prefix 2001:db8:2::/48</strong>
[<span class="keyword">*</span>BRAS-ipv6-prefix-pre_pd] <strong>commi</strong><strong>t</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-ipv6-prefix-pre_pd] <strong>pd-unshare-only</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-ipv6-prefix-pre_pd] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>ipv6 pool pool_pd bas delegation</strong>
[<span class="keyword">*</span>BRAS-ipv6-pool-pool_pd] <strong>prefix pre_pd</strong>
[<span class="keyword">*</span>BRAS-ipv6-pool-pool_pd] <strong>dns-server 2001:db8::2:2 2001:db8::2:3</strong>
[<span class="keyword">*</span>BRAS-ipv6-pool-pool_pd] <strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commi</strong><strong>t</strong></pre>
</p></li><li><span>Configure a domain.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>aaa</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong> domain isp1</strong>
[<span class="keyword">*</span>BRAS-aaa-domain-isp1]<strong> authentication-scheme auth1</strong>
[<span class="keyword">*</span>BRAS-aaa-domain-isp1]<strong> accounting-scheme acct1</strong>
[<span class="keyword">*</span>BRAS-aaa-domain-isp1]<strong> radius-server group rd1</strong>
[<span class="keyword">*</span>BRAS-aaa-domain-isp1]<strong> commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1] <strong>prefix-assign-mode unshared  </strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1]<strong> ip-pool pool_v4</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1] <strong>ipv6-pool </strong><strong>pool_nd</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1] <strong>ipv6-pool pool_pd</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1] <strong>accounting-start-delay 10 online user-type ppp</strong>
[<span class="keyword">*</span>BRAS-aaa-domain-isp1] <strong>accounting-start-delay traffic-forward before-start-accounting</strong>
[<span class="keyword">*</span>BRAS-aaa-domain-isp1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1] <strong>user-basic-service-ip-type ipv4</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1]<strong> quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong> quit</strong></pre>
</p></li><li><span>Configure the BRAS to generate DUIDs in DUID-LLT mode.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>dhcpv6 duid llt</strong>
[<span class="keyword">*</span>BRAS] <strong>commit</strong></pre>
</p></li><li><span>Configure a VT interface.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong> interface virtual-template 100</strong>
[<span class="keyword">*</span>BRAS-Virtual-Template100]<strong> ppp authentication-mode chap</strong>
[<span class="keyword">*</span>BRAS-Virtual-Template100]<strong> commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-Virtual-Template100]<strong> quit</strong></pre>
</p></li><li><span>Configure interfaces.</span><p><p># Configure the Eth-Trunk interface to work in static LACP mode and set a protocol packet timeout period.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>interface Eth-Trunk2</strong>
[<span class="keyword">*</span>BRAS-Eth-Trunk2]<strong> mode lacp-static</strong>
[<span class="keyword">*</span>BRAS-Eth-Trunk2]<strong> lacp timeout fast</strong>
[<span class="keyword">*</span>BRAS-Eth-Trunk2]<strong> </strong><strong>commit</strong></pre>
<p># Enable IPv6 on an interface.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-Eth-Trunk2]<strong> </strong><strong>interface Eth-Trunk2.10</strong>
[<span class="keyword">*</span>BRAS-Eth-Trunk2.10] <strong>ipv6 enable</strong>
[<span class="keyword">*</span>BRAS-Eth-Trunk2.10] <strong>ipv6 address auto link-local</strong>
[<span class="keyword">*</span>BRAS-Eth-Trunk2.10] <strong>pppoe-server bind Virtual-Template 100</strong>
[<span class="keyword">*</span>BRAS-Eth-Trunk2.10] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-Eth-Trunk2.10]<strong> user-vlan 1000 4000 qinq 2000 2001</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-Eth-Trunk2.10-user-vlan-1000-4000-qinq-2000-2001]<strong> </strong><strong>quit</strong></pre>
<p># Configure a BAS interface, enable multicast replication by session, and enable controllable multicast on the interface.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-Eth-Trunk2.10] <strong>bas</strong>
[<strong><span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span></strong>BRAS-Eth-Trunk2.10-bas]<strong> access-type layer2-subscriber default-domain authentication isp1</strong>
[<span class="keyword">*</span>BRAS-Eth-Trunk2.10-bas] <strong>multicast copy by-session</strong>
[<span class="keyword">*</span>BRAS-Eth-Trunk2.10-bas]<strong> commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-Eth-Trunk2.10-bas]<strong> </strong><strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-Eth-Trunk2.10] <strong>multicast authorization-enable</strong>
[<span class="keyword">*</span>BRAS-Eth-Trunk2.10]<strong> </strong><strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commit</strong></pre>
<p># Configure the network-side interfaces connected to the PIM-SM network.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>interface gigabitEthernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>BRAS-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 enable</strong> 
[<span class="keyword">*</span>BRAS-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address 2001:db8:8::7 128</strong>
[<span class="keyword">*</span>BRAS-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address auto link-local</strong>
[<span class="keyword">*</span>BRAS-GigabitEthernet<span>0/1/0</span>] <strong>ip address 10.2.1.1 24</strong>
[<span class="keyword">*</span>BRAS-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>interface gigabitEthernet <span>0/1/1</span></strong>
[<span class="keyword">*</span>BRAS-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 enable</strong> 
[<span class="keyword">*</span>BRAS-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 address 2001:db8:10::7 128</strong>
[<span class="keyword">*</span>BRAS-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 address auto link-local</strong>
[<span class="keyword">*</span>BRAS-GigabitEthernet<span>0/1/1</span>] <strong>ip address 10.5.1.1 24</strong>
[<span class="keyword">*</span>BRAS-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commit</strong></pre>
</p></li><li><span>Configure basic multicast functions.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>multicast routing-enable</strong>
[<span class="keyword">*</span>BRAS] <strong>multicast load-splitting source-group</strong>
[<span class="keyword">*</span>BRAS] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong> </strong><strong>interface Eth-Trunk2.10</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-Eth-Trunk2.10] <strong>pim sm</strong>
[<span class="keyword">*</span>BRAS-Eth-Trunk2.10] <strong>igmp enable</strong>
[<span class="keyword">*</span>BRAS-Eth-Trunk2.10] <strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>interface gigabitEthernet <span>0/1/0</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/1/0</span>] <strong>pim sm</strong>
[<span class="keyword">*</span>BRAS-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>interface gigabitEthernet <span>0/1/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/1/0</span>] <strong>pim sm</strong>
[<span class="keyword">*</span>BRAS-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commit</strong></pre>
</p></li><li><span>Configure multicast.</span><p><p># Configure multicast program lists.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>aaa</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa] <strong>multicast-list list1 group-address 225.1.1.1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa] <strong>multicast-list list2 group-address 227.1.1.1</strong></pre>
<p># Configure a multicast profile.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong> multicast-profile profile1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-mprofile-profile1]<strong> multicast-list name list1 static</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-mprofile-profile1]<strong> multicast-list name list2 static</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-mprofile-profile1]<strong> quit</strong></pre>
<p># Apply the multicast profile to the domain.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong> domain isp1</strong>
[<span class="keyword">*</span>BRAS-aaa-domain-isp1]<strong> commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1]<strong> multicast-profile profile1</strong>
[<span class="keyword">*</span>BRAS-aaa-domain-isp1]<strong> commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1]<strong> quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong> quit</strong></pre>
</p></li><li><span>Configure an RP.</span><p><div class="p"># Configure the range of multicast groups that the static RP serves.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>acl number 2239</strong>
[<span class="keyword">*</span>BRAS-acl4-basic-2239] <strong>description this acl is used pim rp group limit</strong>
[<span class="keyword">*</span>BRAS-acl4-basic-2239] <strong>rule 10 permit source 225.1.0.0 0.0.255.255</strong>
[<span class="keyword">*</span>BRAS-acl4-basic-2239] <strong>rule 20 permit source 227.1.0.0 0.0.255.255</strong>
[<span class="keyword">*</span>BRAS-acl4-basic-2239] <strong>rule 100 deny</strong>
[<span class="keyword">*</span>BRAS-acl4-basic-2239] <strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commit</strong></pre>
</div>
</p><p><div class="p"># Configure the source addresses of multicast data packets.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>acl number 2101</strong>
[<span class="keyword">*</span>BRAS-acl4-basic-2101] <strong>description For:Permit-Pim-source-policy</strong>
[<span class="keyword">*</span>BRAS-acl4-basic-2101] <strong>rule 10 permit source 10.10.0.0 0.0.255.255</strong>
[<span class="keyword">*</span>BRAS-acl4-basic-2101] <strong>rule 20 permit source 10.20.0.0 0.0.255.255</strong>
[<span class="keyword">*</span>BRAS-acl4-basic-2101] <strong>rule 30 permit source 10.30.0.0 </strong><strong>0.0.255.255</strong>
[<span class="keyword">*</span>BRAS-acl4-basic-2101] <strong>rule 1000 deny</strong>
[<span class="keyword">*</span>BRAS-acl4-basic-2101] <strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commit</strong></pre>
</div>
</p><p><div class="p"># Configure a static RP.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong>pim</strong>
[<span class="keyword">*</span>BRAS-pim] <strong>static-rp 192.168.0.6 2239 preferred</strong>
[<span class="keyword">*</span>BRAS-pim] <strong>source-policy 2101</strong>
[<span class="keyword">*</span>BRAS-pim] <strong>quit</strong>
[<span class="keyword">*</span>BRAS] <strong>commit</strong></pre>
</div>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001248741583__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><pre class="screen">#
sysname BRAS
#
multicast routing-enable
#
multicast load-splitting source-group
#
acl number 2239
 description this acl is used pim rp group limit
 rule 10 permit source 225.1.0.0 0.0.255.255
 rule 20 permit source 227.1.0.0 0.0.255.255
 rule 100 deny
#
acl number 2101
 description For:Permit-Pim-source-policy
 rule 10 permit source  10.10.0.0 0.0.255.255
 rule 20 permit source  10.20.0.0 0.0.255.255
 rule 30 permit source  10.30.0.0 0.0.255.255
 rule 1000 deny
#
ip pool pool_v4 bas local                                                       
 gateway 172.16.0.1 255.255.255.0                                               
 section 0 172.16.0.2 172.16.0.200                                              
 dns-server 10.179.155.161 10.179.155.177                                       
#                                                                               
ipv6 prefix pre_nd delegation                                                   
 prefix 2001:DB8:1::/48                                                         
 slaac-unshare-only                                                             
#                                                                               
ipv6 pool pool_nd bas delegation                                                
 dns-server 2001:DB8::2:2 2001:DB8::2:3                                         
 prefix pre_nd                                                                  
#                                                                               
ipv6 prefix pre_pd delegation                                                   
 prefix 2001:DB8:2::/48                                                         
 pd-unshare-only                                                                
#                                                                               
ipv6 pool pool_pd bas delegation                                                
 dns-server 2001:DB8::2:2 2001:DB8::2:3                                         
 prefix pre_pd                                                                  
#
radius local-ip all
#
interface LoopBack1
 ipv6 enable
 ip address 10.2.2.2 255.255.255.0
 ipv6 address 2001:DB8::2:2/64
 ipv6 address auto link-local
# 
radius-server group rd1                                                       
 radius-server shared-key-cipher %^%#e,yC%f9z4M2)b)2<font style="font-size:8pt" Face="Courier New" >~</font>r+lA{$g*Fzc+5/bu7VHAN&lt;%(%^% 
 radius-server authentication 192.168.7.249 1812 weight 0                       
 radius-server accounting 192.168.7.249 1813 weight 0                           
 radius-server source interface LoopBack1
# 
aaa
 multicast-list list1 group-address 225.1.1.1 
 multicast-list list2 group-address 227.1.1.1 
 multicast-profile profile1  
  multicast-list name list1 static
  multicast-list name list2 static
 #
 authentication-scheme auth1
  authentication-mode radius
 #
 accounting-scheme acct1
  accounting-mode radius
<em> </em>#                                                                              
 domain isp1                                                                  
  authentication-scheme auth1                                                 
  accounting-scheme acct1                                                     
  radius-server group rd1                                                     
  prefix-assign-mode unshared                                                   
  ip-pool pool_v4                                                               
  ipv6-pool pool_nd                                                             
  ipv6-pool pool_pd
  accounting-start-delay 10 online user-type ppp                                
  accounting-start-delay traffic-forward before-start-accounting                
  user-basic-service-ip-type ipv4 
  multicast-profile profile1                                               
#
dhcpv6 duid llt
#                                                                               
interface Virtual-Template100                                                     
 ppp authentication-mode chap                                                   
#
interface Eth-Trunk2                                          
 mode lacp-static                                                               
 lacp timeout fast                                                              
#                                                                               
interface Eth-Trunk2.10                                                         
 ipv6 enable                                                                    
 ipv6 address auto link-local
 pppoe-server bind Virtual-Template 100                                                               
 user-vlan 1000 4000 qinq 2000 2001
 pim sm
 igmp enable
 multicast authorization-enable
 bas                                                                            
 #                                                                              
  access-type layer2-subscriber default-domain authentication isp1            
  client-option82 basinfo-insert cn-telecom                                     
  multicast copy by-session                                                     
 #                                                                              
#                                                                               
interface GigabitEthernet<span>0/1/0</span>                                                  
 undo shutdown                                                                  
 ipv6 enable                                                                    
 ip address 10.2.1.1 255.255.255.0                                              
 ipv6 address 2001:DB8:8::7/128                                                 
 ipv6 address auto link-local
 pim sm
# 
interface GigabitEthernet<span>0/1/1</span>                                                  
 undo shutdown                                                                  
 ipv6 enable                                                                    
 ip address 10.5.1.1 255.255.255.0                                              
 ipv6 address 2001:DB8:10::7/128                                                 
 ipv6 address auto link-local
 pim sm
# 
pim 
 static-rp 192.168.0.6 2239 preferred
 source-policy 2101
#     
return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bras-multicast_cfg_0007.html">Configuration Examples for User-Side Multicast
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_bras-multicast_cac_cfg_0006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_bras-multicast_cac_cfg_1002.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>