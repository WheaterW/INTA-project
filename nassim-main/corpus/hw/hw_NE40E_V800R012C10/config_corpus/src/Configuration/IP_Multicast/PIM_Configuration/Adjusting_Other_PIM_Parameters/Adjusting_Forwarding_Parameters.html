
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Adjusting Forwarding Parameters">
<meta name="abstract" content="Parameters associated with PIM forwarding include the interval for sending Join/Prune messages, holdtime carried by a Join/Prune message, policy for filtering Join/Prune messages, and lan-delay and override-interval carried by a Hello message.">
<meta name="description" content="Parameters associated with PIM forwarding include the interval for sending Join/Prune messages, holdtime carried by a Join/Prune message, policy for filtering Join/Prune messages, and lan-delay and override-interval carried by a Hello message.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0026.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_3159.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0109.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366874">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Adjusting Forwarding Parameters</title>
</head>
<body><a name="EN-US_TASK_0172366874"></a><a name="EN-US_TASK_0172366874"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Adjusting Forwarding Parameters</h1>
<div class="taskbody"><p>Parameters associated with PIM forwarding include the interval for sending Join/Prune messages, holdtime carried by a Join/Prune message, policy for filtering Join/Prune messages, and lan-delay and override-interval carried by a Hello message.</p>
<div class="context"><a name="EN-US_TASK_0172366874__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Join messages indicate that a multicast <span class="keyword">Router</span> requires upstream devices to forward multicast data, and Prune messages indicate that a multicast <span class="keyword">Router</span> requires upstream devices to stop forwarding multicast data.</p>
<ul><li><p>After the first member joins a multicast group, the <span class="keyword">Router</span> sends a Join message through the upstream interface to require the upstream <span class="keyword">Router</span> to forward multicast packets to this network segment.</p>
<p>On a PIM-SM network, the <span class="keyword">Router</span> periodically sends Join messages to prevent rendezvous point tree (RPT) branches from being pruned off due to timeout.</p>
</li><li><p>After the last member of a group leaves, the <span class="keyword">Router</span> sends a Prune message through the upstream interface to request the upstream router to perform the prune action. If other downstream <span class="keyword">Router</span>s exist on this network segment, they must send the Join message to override the prune action.</p>
<p>A Hello message carries the <strong>lan-delay</strong> and <strong>override-interval</strong> attributes.</p>
<ul><li><p><strong>lan-delay</strong> specifies the delay in transmitting Prune messages on a shared network segment.</p>
</li><li><p><strong>override-interval</strong> specifies the period allowed for overriding the prune action. If the <span class="keyword">Router</span>s still need to receive the multicast data, they must send Join messages upstream within the override-interval.</p>
</li></ul>
<p>The relationship between <strong>lan-delay</strong>, <strong>override-interval</strong>, and PPT is: <strong>lan-delay</strong> + <strong>override-interval</strong> = PPT. The Prune-Pending Timer (PPT) indicates the period from the time when the <span class="keyword">Router</span> receives a Prune message from a downstream interface to the time when the <span class="keyword">Router</span> performs the prune action. If the downstream interface receives a Join message within the PPT, the prune action is canceled.</p>
</li></ul>
<p>You can set forwarding parameters either globally or on an interface.</p>
<ul><li><p>Global configuration: takes effect on all interfaces.</p>
</li><li><p>Interface-specific configuration: takes precedence over the global configuration. If no interface-specific configuration is performed for an interface, the interface uses the global configuration.</p>
</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172366874__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Set forwarding parameters globally.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=pim"><b><span class="cmdname">pim</span></b></a> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span><p><p>The PIM view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=timer+join-prune"><b><span class="cmdname">timer join-prune</span></b></a> <i><span class="varname">interval</span></i></span><p><p>An interval is set for all interfaces on the device to send Join/Prune messages.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=holdtime+join-prune"><b><span class="cmdname">holdtime join-prune</span></b></a> <i><span class="varname">interval</span></i></span><p><p>The holdtime is set for Join/Prune messages to be sent by all interfaces on the <span class="keyword">Router</span>.</p>
<p>An upstream <span class="keyword">Router</span> determines the period for a downstream interface to hold the join or prune state based on the holdtime carried in the Join/Prune message received from the downstream interface.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=hello-option+lan-delay"><b><span class="cmdname">hello-option lan-delay</span></b></a> <i><span class="varname">interval</span></i></span><p><p>The lan-delay is set for Hello messages to be sent by all interfaces on the <span class="keyword">Router</span>.</p>
<p>If <span class="keyword">Router</span> interfaces on a shared network segment have different lan-delay values, the maximum lan-delay value is used by negotiation.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=hello-option+override-interval"><b><span class="cmdname">hello-option override-interval</span></b></a> <i><span class="varname">interval</span></i></span><p><p>The override-interval is set for Hello messages to be sent by all interfaces on the <span class="keyword">Router</span>.</p>
<p>If <span class="keyword">Router</span> interfaces on a shared network segment have different override-intervals, the maximum override-interval is used by negotiation.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=neighbor-check"><b><span class="cmdname">neighbor-check</span></b></a> { <strong><span>receive</span></strong> | <strong><span>send</span></strong> }</span><p><p>The neighbor check function is configured.</p>
<p>You can specify <strong><span>receive</span></strong> and <strong><span>send</span></strong> to enable the PIM neighbor check function for both received and sent Join/Prune and Assert messages.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Set forwarding parameters for a specific interface.</span><ol><li class="substepexpand" id="EN-US_TASK_0172366874__step_dc_vrp_multicast_cfg_002901"><span id="EN-US_TASK_0172366874__cmd1201115202214325">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172366874__cmdname1182540320214040">system-view</span></b></a></span><p><p id="EN-US_TASK_0172366874__p1519290947214325">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366874__step_dc_vrp_multicast_cfg_002902"><span id="EN-US_TASK_0172366874__cmd890996467214040">Configure a basic or an advanced ACL as needed.</span><p><ul id="EN-US_TASK_0172366874__ul285351677214040"><li id="EN-US_TASK_0172366874__li935278957214040"><p id="EN-US_TASK_0172366874__p1800617906214040"><a name="EN-US_TASK_0172366874__li935278957214040"></a><a name="li935278957214040"></a>Configure a basic ACL.</p>
<ol type="a" id="EN-US_TASK_0172366874__ol1387746082214040"><li id="EN-US_TASK_0172366874__li280515068214040">Run the <span id="EN-US_TASK_0172366874__ph1257458775214040"><a href="cmdqueryname=acl"><b><span class="cmdname" id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdname278533322213919">acl</span></b></a> [ <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname1099217286213919">number</span></strong> ] <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname1181932021213919">basic-acl-number</span></i> [ <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname1160353658213919">match-order</span></strong> { <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname1316998881213919">auto</span></strong> | <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname1736247452213919">config</span></strong> } ]</span> command to create a basic ACL and enter the corresponding ACL view.</li><li id="EN-US_TASK_0172366874__li1784229901214040">Run the <span id="EN-US_TASK_0172366874__ph1538544211214040"><a href="cmdqueryname=rule"><b><span class="cmdname" id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdname555941420213919">rule</span></b></a> [ <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname1676463795213919">rule-id</span></i> ] [ <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname2081519680213919">name</span></strong> <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname991498484213919">rule-name</span></i> ] { <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname985065775213919">deny</span></strong> | <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname648916101213919">permit</span></strong> } <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname1231903400213919">source</span></strong> { <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname1009654245213919">source-ip-address</span></i> { <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname212188598213919">source-wildcard</span></i> | <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname2057079703213919">0</span></strong> } | <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname1645355282213919">any</span></strong> }</span> command to configure a rule for the basic ACL.</li></ol>
</li><li id="EN-US_TASK_0172366874__li741331103214040"><p id="EN-US_TASK_0172366874__p1999211874214040"><a name="EN-US_TASK_0172366874__li741331103214040"></a><a name="li741331103214040"></a>Configure an advanced ACL.</p>
<ol type="a" id="EN-US_TASK_0172366874__ol2009001797214040"><li id="EN-US_TASK_0172366874__li1617111609214040">Run the <span id="EN-US_TASK_0172366874__ph490692893214040"><a href="cmdqueryname=acl"><b><span class="cmdname" id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdname1430753456213919">acl</span></b></a> { <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname220197166213919">name</span></strong> <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname1206592068213919">advance-acl-name</span></i> [ <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname642336928213919">advance</span></strong> | [ <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname943191697213919">advance</span></strong> ] <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname221974979213919">number</span></strong> <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname1130716142213919">advance-acl-number</span></i> ] | [ <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname1690144668213919">number</span></strong> ] <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname902710782213919">advance-acl-number</span></i> } [ <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname605677149213919">match-order</span></strong> { <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname679279458213919">config</span></strong> | <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname1551680503213919">auto</span></strong> } ]</span> command to create an advanced ACL and enter the corresponding ACL view.</li><li id="EN-US_TASK_0172366874__li1103974022214040">Run the <span id="EN-US_TASK_0172366874__ph45945731214040"><a href="cmdqueryname=rule"><b><span class="cmdname" id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdname1310742062213919">rule</span></b></a> [ <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname154816860213919">rule-id</span></i> ] [ <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname819315159213919">name</span></strong> <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname1493510189213919">rule-name</span></i> ] { <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname1204544988213919">deny</span></strong> | <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname1623824983213919">permit</span></strong> } <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname1005149806213919">ip</span></strong> [ <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname36303517213919">destination</span></strong> { <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname1416475631213919">destination-ip-address</span></i> { <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname1166444388213919">destination-wildcard</span></i> | <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname1325702535213919">0</span></strong> } | <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname200676578213919">any</span></strong> } | <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname808928564213919">source</span></strong> { <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname502480156213919">source-ip-address</span></i> { <i><span class="varname" id="EN-US_TASK_0172366874__en-us_task_0172336153_varname367199428213919">source-wildcard</span></i> | <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname222848470213919">0</span></strong> } | <strong><span id="EN-US_TASK_0172366874__en-us_task_0172336153_cmdparmname2093839927213919">any</span></strong> } ] <sup id="EN-US_TASK_0172366874__en-us_task_0172336153_sup1429493647213919">*</sup></span> command to configure a rule for the advanced ACL.</li></ol>
</li></ul>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366874__step_dc_vrp_multicast_cfg_002903"><span id="EN-US_TASK_0172366874__cmd432840376214325">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172366874__cmdname2001102170214040">quit</span></b></a></span><p><p id="EN-US_TASK_0172366874__p796832121214325">Return to the system view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366874__step_dc_vrp_multicast_cfg_002904"><span id="EN-US_TASK_0172366874__cmd1688887121214325">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172366874__cmdname1274800779214040">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172366874__varname753282176214040">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172366874__varname644794261214040">interface-number</span></i></span><p><p id="EN-US_TASK_0172366874__p99818395214325">The PIM interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=pim+timer+join-prune"><b><span class="cmdname">pim timer join-prune</span></b></a> <i><span class="varname">interval</span></i></span><p><p>An interval is set for the interface to send Join/Prune messages.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=pim+holdtime+join-prune"><b><span class="cmdname">pim holdtime join-prune</span></b></a> <i><span class="varname">interval</span></i></span><p><p>The holdtime is set for Join/Prune messages to be sent by the interface.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=pim+hello-option+lan-delay"><b><span class="cmdname">pim hello-option lan-delay</span></b></a> <i><span class="varname">interval</span></i></span><p><p>The lan-delay is set for Hello messages to be sent by the interface.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=pim+hello-option+override-interval"><b><span class="cmdname">pim hello-option override-interval</span></b></a> <i><span class="varname">interval</span></i></span><p><p>The override-interval is set for Hello messages to be sent by the interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366874__step_dc_vrp_multicast_cfg_002905"><span id="EN-US_TASK_0172366874__cmd1169872476214040">Run <a href="cmdqueryname=pim+join-policy"><b><span class="cmdname" id="EN-US_TASK_0172366874__cmdname473419331282">pim join-policy</span></b></a> { { <i><span class="varname" id="EN-US_TASK_0172366874__varname20734833152811">advanced-acl-number</span></i> | <strong><span id="EN-US_TASK_0172366874__cmdparmname16734113332819">acl-name</span></strong> <i><span class="varname" id="EN-US_TASK_0172366874__varname4734333152812">acl-name</span></i> } | <strong><span id="EN-US_TASK_0172366874__cmdparmname1473423322818">asm</span></strong> { <i><span class="varname" id="EN-US_TASK_0172366874__varname373433372814">basic-acl-number</span></i> | <strong><span id="EN-US_TASK_0172366874__cmdparmname47346330287">acl-name</span></strong> <i><span class="varname" id="EN-US_TASK_0172366874__varname177341334280">acl-name</span></i> } | <strong><span id="EN-US_TASK_0172366874__cmdparmname19734183382811">ssm</span></strong> { <i><span class="varname" id="EN-US_TASK_0172366874__varname6734633142811">advanced-acl-number</span></i> | <strong><span id="EN-US_TASK_0172366874__cmdparmname273453362818">acl-name</span></strong> <i><span class="varname" id="EN-US_TASK_0172366874__varname1573433372816">acl-name</span></i> } }</span><p><p id="EN-US_TASK_0172366874__p1623789830214325">A policy is created for filtering join information in Join/Prune messages.</p>
<p id="EN-US_TASK_0172366874__p1390641536214325">The <span class="keyword" id="EN-US_TASK_0172366874__keyword1644201468214040">Router</span> filters join information in Join/Prune messages based on source addresses or both source and group addresses.</p>
<p id="EN-US_TASK_0172366874__p2028573507214325">If <strong><span id="EN-US_TASK_0172366874__cmdparmname444376604214040">asm</span></strong> is specified, run the <a href="cmdqueryname=rule"><b><span class="cmdname" id="EN-US_TASK_0172366874__cmdname88808523214040">rule</span></b></a> command in the basic ACL view and set the <strong><span id="EN-US_TASK_0172366874__cmdparmname1363823955214040">source</span></strong> parameter to the multicast group address range of join information.</p>
<p id="EN-US_TASK_0172366874__p591395442214325">If <strong><span id="EN-US_TASK_0172366874__cmdparmname1764992310214040">ssm</span></strong> is specified, run the <a href="cmdqueryname=rule"><b><span class="cmdname" id="EN-US_TASK_0172366874__cmdname148833429214040">rule</span></b></a> command in the advanced ACL view, set the <strong><span id="EN-US_TASK_0172366874__cmdparmname156630160214040">source</span></strong> parameter to the multicast source address range of join information, and set the <strong><span id="EN-US_TASK_0172366874__cmdparmname1100069126214040">destination</span></strong> parameter to the multicast group address range of join information.</p>
<div class="note" id="EN-US_TASK_0172366874__note833306556214040"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0172366874__ul1642424605214040"><li id="EN-US_TASK_0172366874__li1575422992214040">If a Join message's join information matches an ACL rule and the action is <strong id="EN-US_TASK_0172366874__b532379884214325">permit</strong>, the device permits this message.</li><li id="EN-US_TASK_0172366874__li968269432214040">If a Join message's join information matches an ACL rule and the action is <strong id="EN-US_TASK_0172366874__b468329946214325">deny</strong>, the device denies this message.</li><li id="EN-US_TASK_0172366874__li2098268062214040">If a Join message's join information does not match any ACL rule, the device denies this message.</li><li id="EN-US_TASK_0172366874__li83876321214040">If a specified ACL does not exist or does not contain rules, the device denies all Join messages that contain join information.</li></ul>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366874__step_dc_vrp_multicast_cfg_002906"><span id="EN-US_TASK_0172366874__cmd1444559547214325">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172366874__cmdname1949101760214040">commit</span></b></a></span><p><p id="EN-US_TASK_0172366874__p1047084965214325">The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0026.html">Adjusting Other PIM Parameters
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_3159.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0109.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>