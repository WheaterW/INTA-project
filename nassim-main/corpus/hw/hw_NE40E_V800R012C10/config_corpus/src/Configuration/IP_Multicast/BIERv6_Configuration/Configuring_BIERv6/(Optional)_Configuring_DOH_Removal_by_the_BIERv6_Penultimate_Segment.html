
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring DOH Removal by the BIERv6 Penultimate Segment">
<meta name="abstract" content="If a BFER does not support the IPv6 DOH (indicating that it does not support BIERv6 forwarding), you can configure the function which allows the BIERv6 penultimate segment to remove the DOH that carries BIER options when sending packets.">
<meta name="description" content="If a BFER does not support the IPv6 DOH (indicating that it does not support BIERv6 forwarding), you can configure the function which allows the BIERv6 penultimate segment to remove the DOH that carries BIER options when sending packets.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0002.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_1005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0007.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001245561086">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring DOH Removal by the BIERv6 Penultimate Segment</title>
</head>
<body><a name="EN-US_TASK_0000001245561086"></a><a name="EN-US_TASK_0000001245561086"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring DOH Removal by the BIERv6 Penultimate Segment</h1>
<div class="taskbody"><p>If a BFER does not support the IPv6 DOH (indicating that it does not support BIERv6 forwarding), you can configure the function which allows the BIERv6 penultimate segment to remove the DOH that carries BIER options when sending packets.</p>
<div class="context"><a name="EN-US_TASK_0000001245561086__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If you find that the boards on a BFER do not support BIERv6 forwarding during BIERv6 deployment, you can configure DOH removal by the BIERv6 penultimate segment. In this way, the BIERv6 penultimate segment removes the IPv6 DOH when sending IPv6 packets to the BFER. The BFER can then process the received packets without the IPv6 DOH.</p>
<p>DOH removal by the BIERv6 penultimate segment can be configured in either of the following modes:</p>
<ul><li>Configure this function on a BFER for a node that does not support BIERv6 forwarding.</li><li>Configure this function through static BIFT mode on the node upstream of a node that does not support BIERv6 forwarding.</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This configuration can be executed only when both the penultimate segment endpoint and the last segment endpoint both support DOH removal by the BIERv6 penultimate segment.</p>
</div></div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001245561086__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Enable DOH removal by the BIERv6 penultimate segment on a BFER.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bier"><b><span class="cmdname">bier</span></b></a></span><p><p>The BIER view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=sub-domain"><b><span class="cmdname">sub-domain</span></b></a> <i><span class="varname">sub-domain-val</span></i> <strong><span>ipv6</span></strong></span><p><p>The sub-domain view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=protocol"><b><span class="cmdname">protocol</span></b></a> <i><span class="varname">isis</span></i></span><p><p>The underlay protocol used to advertise BIERv6 information is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=psp+request"><b><span class="cmdname">psp request</span></b></a></span><p><p>DOH removal by the BIERv6 penultimate segment is enabled.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the next hop has multiple BIERv6 traffic receivers, the previous-hop device replicates traffic into multiple copies, and the traffic is no longer transmitted through BIERv6 after this command is run.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure DOH removal by the BIERv6 penultimate segment through static BIFT mode on the node upstream of the node that does not support BIERv6 forwarding.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bier"><b><span class="cmdname">bier</span></b></a></span><p><p>The BIER view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=sub-domain"><b><span class="cmdname">sub-domain</span></b></a> <i><span class="varname">sub-domain-val</span></i> <strong><span>ipv6</span></strong></span><p><p>The sub-domain view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=protocol"><b><span class="cmdname">protocol</span></b></a> <i><span class="varname">static-bift</span></i></span><p><p>Static BIFT-based forwarding is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bfr-neighbor"><b><span class="cmdname">bfr-neighbor</span></b></a> <strong><span>end-bier</span></strong> <i><span class="varname">ipv6-address</span></i> <strong><span>bfr-id</span></strong> <i><span class="varname">bfrid-start</span></i> <strong><span>psp</span></strong></span><p><p>The device is configured to remove the BIER DOH from the packets destined for a BFER and then directly forward the packets to the BFER.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0002.html">Configuring BIERv6
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_1005.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0007.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>