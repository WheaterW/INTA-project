
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Setting the AS_Path Attribute">
<meta name="abstract" content="The AS_Path attribute is used to prevent routing loops and control route selection.">
<meta name="description" content="The AS_Path attribute is used to prevent routing loops and control route selection.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1010.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1015.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1017.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367051">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Setting the AS_Path Attribute</title>
</head>
<body><a name="EN-US_TASK_0172367051"></a><a name="EN-US_TASK_0172367051"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Setting the AS_Path Attribute</h1>
<div class="taskbody"><p>The AS_Path attribute is used to prevent routing loops and control route selection.</p>
<div class="steps-unordered"><a name="EN-US_TASK_0172367051__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Enable an MBGP device to ignore the AS_Path attribute during route selection.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv4-family+multicast"><b><span class="cmdname">ipv4-family multicast</span></b></a> command to enter the BGP-IPv4 multicast address family view, or run the <strong><a href="cmdqueryname=ipv4-multicast+vpn-instance"><b><span class="cmdname">ipv4-multicast vpn-instance</span></b></a> </strong><em><i><span class="varname">vpn-instance-name</span></i></em> command to enter the BGP-multicast VPN instance IPv4 address family view.</span></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bestroute+as-path-ignore"><b><span class="cmdname">bestroute as-path-ignore</span></b></a></span><p><p>MBGP is configured to ignore the AS_Path attribute during route selection.</p>
</p></li></ol>
</li><li><span>Enable the device to remove all the private AS numbers from the AS_Path attribute carried in BGP Update messages.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv4-family+multicast"><b><span class="cmdname">ipv4-family multicast</span></b></a> command to enter the BGP-IPv4 multicast address family view, or run the <strong><a href="cmdqueryname=ipv4-multicast+vpn-instance"><b><span class="cmdname">ipv4-multicast vpn-instance</span></b></a> </strong><em><i><span class="varname">vpn-instance-name</span></i></em> command to enter the BGP-multicast VPN instance IPv4 address family view.</span></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> } <a href="cmdqueryname=public-as-only"><b><span class="cmdname">public-as-only</span></b></a><span> [ <strong><span>force</span></strong></span><span> [ <strong><span>replace</span></strong> ] [ <strong><span>include-peer-as</span></strong> ] | <strong><span>limited</span></strong> [ <strong><span>replace</span></strong> ] [ <strong><span>include-peer-as</span></strong> ]</span><span> ]</span></span><p><p>The AS_Path attribute is configured to carry only public AS numbers in the BGP Update messages to be sent.</p>
<p>Or run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> } <strong><span>public-as-only</span></strong> <strong><span>import</span></strong><span> [ <strong><span>force</span></strong></span> ]</p>
<p>The AS_Path attribute is configured not to carry private AS numbers in accepted BGP Update messages.</p>
</p><p><p>In general, an AS number is an integer ranging from 1 to 4294967295. A public AS number ranges from 1 to 64511, and from 65536 (which represents 1.0 in the <em>x</em>.<em>y</em> format) to 4294967294 (65535.65534 in the <em>x</em>.<em>y</em> format). A private AS number ranges from 64512 to 65534. The AS numbers 65535 and 4294967295 are reserved for special use.</p>
<p>Public AS numbers can be directly used on the Internet, and are assigned and managed by the Internet Assigned Number Authority (IANA). Private AS numbers cannot be directly advertised to the Internet, and are used only within routing domains.</p>
<p>Generally, MBGP routes to be advertised to peers carry either public or private AS numbers. In certain cases, private AS numbers do not need to be advertised. In this case, you can run this command to configure the AS_Path attribute to carry only public AS numbers.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1010.html">Controlling MBGP Route Selection
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1015.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1017.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>