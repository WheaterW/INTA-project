
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring IPv6 PIM-SM Intra-domain Multicast">
<meta name="abstract" content="This section provides an example for configuring basic PIM-SM functions for an IPv6 PIM-SM domain.">
<meta name="description" content="This section provides an example for configuring basic PIM-SM functions for an IPv6 PIM-SM domain.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2036.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2039.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367522">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring IPv6 PIM-SM Intra-domain Multicast</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172367522"></a><a name="EN-US_TASK_0172367522"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring IPv6 PIM-SM Intra-domain Multicast</h1>
<div class="taskbody"><p>This section provides an example for configuring basic PIM-SM functions for an IPv6 PIM-SM domain.</p>
<div class="context"><a name="EN-US_TASK_0172367522__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the ISP network shown in <a href="#EN-US_TASK_0172367522__fig_dc_vrp_multicast_cfg_203701">Figure 1</a>, multicast services are deployed. An Interior Gateway Protocol (IGP) has been deployed on the network, IPv6 unicast is running properly, and the network has been connected to the Internet. It is required that hosts receive VoD information in multicast mode.</p>
<div class="fignone" id="EN-US_TASK_0172367522__fig_dc_vrp_multicast_cfg_203701"><a name="EN-US_TASK_0172367522__fig_dc_vrp_multicast_cfg_203701"></a><a name="fig_dc_vrp_multicast_cfg_203701"></a><span class="figcap"><b>Figure 1 </b>Configuring IPv6 PIM-SM intra-domain multicast</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1, 2, 3, and 4 in this example represent GE <span>0/1/0</span>, GE <span>0/2/0</span>, GE <span>0/3/0</span>, and GE <span>0/1/1</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_multicast_cfg_203701.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367522__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>When configuring IPv6 PIM-SM intra-domain multicast, note the following precautions:</p>
<ul><li><p>IPv6 PIM-SM must be enabled before Multicast Listener Discovery (MLD) is enabled.</p>
</li><li><p>To use a static Rendezvous Point (RP), configure the same RP address on all <span class="keyword">Router</span>s.</p>
</li><li><p>Use the Protocol Independent Multicast - Source-specific Multicast (PIM-SSM) service when the users need to receive data from a specified multicast source. Ensure that all <span class="keyword">Router</span>s share the same SSM group address range.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367522__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure an IPv6 address for each <span class="keyword">Router</span> interface and an IPv6 unicast routing protocol.</p>
</li><li><p>Enable IPv6 multicast routing on all <span class="keyword">Router</span>s.</p>
</li><li><p>Enable IPv6 PIM-SM on all <span class="keyword">Router</span> interfaces.</p>
</li><li><p>Enable MLD on interfaces that directly connect <span class="keyword">Router</span>s to hosts.</p>
</li><li><p>Configure an RP. An RP is a rendezvous point tree (RPT)'s root node on a PIM-SM network. Setting an RP on the <span class="keyword">Router</span> that has more multicast flows is recommended.</p>
</li><li><p>(Optional) Set a BootStrap router (BSR) boundary on interfaces connected to the Internet. Bootstrap messages cannot pass through the BSR boundary. Therefore, the BSR serves only this PIM-SM domain. This improves multicast controllability.</p>
</li><li><p>(Optional) Configure the same SSM group address range on each <span class="keyword">Router</span>. This enables the multicast <span class="keyword">Router</span>s in the PIM-SM domain to provide services only for multicast groups with addresses being in the SSM group address range.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367522__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Multicast group address</p>
</li><li><p>Multicast source address</p>
</li><li><p>SSM group address range</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172367522__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IPv6 address for each <span class="keyword">Router</span> interface and an IPv6 unicast routing protocol. For configuration details, see Configuration Files in this section.</span></li><li><span>Enable IPv6 multicast routing on each <span class="keyword">Router</span> and enable IPv6 PIM-SM on each interface on the <span class="keyword">Router</span>s.</span><p><p># Configure <span class="keyword">Device</span>A. The configurations of <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, and <span class="keyword">Device</span>D are similar to the configuration of <span class="keyword">Device</span>A. For configuration details, see Configuration Files in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> multicast ipv6 routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>]<strong> pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> interface GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>]<strong> pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> interface GigabitEthernet <span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/3/0</span>]<strong> pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/3/0</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> interface GigabitEthernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong> pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<p># Run the <strong>display pim ipv6 interface</strong> command to check IPv6 PIM interfaces on each <span class="keyword">Router</span>. The following example uses the command output on <span class="keyword">Device</span>B.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>B&gt; <strong>display pim ipv6 interface</strong>
 VPN-Instance: public net
 Interface           State NbrCnt HelloInt   DR-Pri     DR-Address
 GE<span>0/1/0</span>             up    1      30         1          FE80::A01:10E:1 (local)
 GE<span>0/2/0</span>             up    0      30         1          FE80::200:AFF:FE01:10E (local)
 GE<span>0/3/0</span>             up    1      30         1          FE80::9D62:0:FDC5:2</pre>
</p></li><li><span>Enable MLD on the interfaces connected to hosts. </span><p><p># The configuration of <span class="keyword">Device</span>C is similar to the configuration of <span class="keyword">Device</span>B. For configuration details, see Configuration Files in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>mld enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
</p></li><li><span>Configure RPs.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>You can configure both a static RP and a BSR RP, or only one of them. When both a static RP and a BSR RP are configured, the BSR RP is used by default. To use the static RP, specify <strong>preferred</strong> in the <strong>static-rp </strong><em>rp-address</em> command.</p>
<p>The following shows how to configure a BSR RP</p>
</div></div>
<p># Configure a BSR RP. Perform the following configurations on one or several <span class="keyword">Router</span>s in the PIM-SM domain. For example, on <span class="keyword">Device</span>D, set the range of groups severed by the RP and addresses of C-BSRs and C-RPs.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D]<strong> acl ipv6 number 2001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-acl6-basic-2001]<strong> rule permit source ff3e::1 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-acl6-basic-2001]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D]<strong> pim-ipv6</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6]<strong> c-rp 2001:db8:3::2 group-policy 2001</strong></pre>
<p># Configure a C-BSR on <span class="keyword">Device</span>D.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6]<strong> c-bsr 2001:db8:3::2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-pim6] <strong>quit</strong></pre>
<p># Run the <strong>display pim ipv6 bsr-info</strong> command to check BSR information on each <span class="keyword">Router</span>. The following examples use the command outputs on <span class="keyword">Device</span>B and <span class="keyword">Device</span>D (C-BSR information is also displayed on <span class="keyword">Device</span>D).</p>
<pre class="screen">&lt;<span class="keyword">Device</span>B&gt; <strong>display pim ipv6 bsr-info</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> Elected AdminScope BSR Count: 0</pre>
<pre class="screen"> Elected BSR Address: 2001:DB8:3::2</pre>
<pre class="screen">     Priority: 0</pre>
<pre class="screen">     Hash mask length: 126</pre>
<pre class="screen">     State: Accept Preferred</pre>
<pre class="screen">     Uptime: 00:04:22</pre>
<pre class="screen">     Expires: 00:01:46</pre>
<pre class="screen">     C-RP Count: 1</pre>
<pre class="screen"></pre>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display pim ipv6 bsr-info</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> Elected AdminScope BSR Count: 0</pre>
<pre class="screen"> Elected BSR Address: 2001:DB8:3::2</pre>
<pre class="screen">     Priority: 0</pre>
<pre class="screen">     Hash mask length: 126</pre>
<pre class="screen">     State: Elected</pre>
<pre class="screen">     Uptime: 00:01:10</pre>
<pre class="screen">     Next BSR message scheduled at: 00:00:48</pre>
<pre class="screen">     C-RP Count: 1</pre>
<pre class="screen"> Candidate AdminScope BSR Count: 0</pre>
<pre class="screen"> Candidate BSR Address: 2001:DB8:3::2</pre>
<pre class="screen">     Priority: 0</pre>
<pre class="screen">     Hash mask length: 126</pre>
<pre class="screen">     State: Elected</pre>
<pre class="screen">     Wait to be BSR: 0</pre>
<p># Run the <strong>display pim ipv6 rp-info</strong> command to check RP information on each <span class="keyword">Router</span>. The following example uses the command output on <span class="keyword">Device</span> B.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>B&gt; <strong>display pim ipv6 rp-info</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> PIM-SM BSR RP information:</pre>
<pre class="screen"> Group/MaskLen: FF3E::1/64</pre>
<pre class="screen">     RP: 2001:DB8:3::2</pre>
<pre class="screen">     Priority: 192</pre>
<pre class="screen">     Uptime: 00:05:19</pre>
<pre class="screen">     Expires: 00:02:11</pre>
</p></li><li><span>(Optional) Configure a BSR boundary on the interface that connects <span class="keyword">Device</span> A to the Internet.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> interface GigabitEthernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>pim ipv6 bsr-boundary</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
</p></li><li><span>(Optional) Configure the SSM group address range.</span><p><p># Configure the SSM group address range to FF3E::1/64 on <span class="keyword">Device</span> A.</p>
<p>The configurations of <span class="keyword">Device</span> B, <span class="keyword">Device</span> C, and <span class="keyword">Device</span> D are similar to the configuration of <span class="keyword">Device</span> A. For configuration details, see Configuration Files in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>acl ipv6 2000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-basic-2000] <strong>rule permit source FF3E::1 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-basic-2000] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>pim-ipv6</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-pim6] <strong>ssm-policy 2000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-pim6] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-pim6] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Have the multicast source S (2001:db8:5::5) send multicast packets to multicast group FF3E::1 (within the SSM group address range) and multicast group FF0E::1 (beyond the SSM group address range). Have Host A and Host C receive information of multicast group FF0E::1. Have Host B receive multicast information sent by S (2001:db8:5::5) to multicast group FF3E::1. Then, run the <strong>display pim ipv6 routing-table</strong> command to check the IPv6 PIM routing table on each <span class="keyword">Router</span>.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display pim ipv6 routing-table</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> Total 0 (*, G) entry; 2 (S, G) entries</pre>
<pre class="screen"></pre>
<pre class="screen"> (2001:DB8:5::5, FF0E::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2</pre>
<pre class="screen">     Protocol: pim-sm, Flag: SPT LOC ACT</pre>
<pre class="screen">     UpTime: 00:02:15</pre>
<pre class="screen">     Upstream interface: GigabitEthernet<span>0/1/0</span>, Refresh time: 00:02:15</pre>
<pre class="screen">         Upstream neighbor: NULL</pre>
<pre class="screen">         RPF prime neighbor: NULL</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 3</pre>
<pre class="screen">         1: Register</pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:02:15, Expires:  -</pre>
<pre class="screen">         2: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:02:15, Expires: 00:03:15</pre>
<pre class="screen">         3: GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:02:15, Expires: 00:03:15</pre>
<pre class="screen"></pre>
<pre class="screen">(2001:DB8:5::5, FF3E::1)</pre>
<pre class="screen">     Protocol: pim-ssm, Flag: LOC SG_RCVR</pre>
<pre class="screen">     UpTime: 00:00:11</pre>
<pre class="screen">     Upstream interface: GigabitEthernet<span>0/1/0</span>, Refresh time: 00:00:11</pre>
<pre class="screen">         Upstream neighbor: NULL</pre>
<pre class="screen">         RPF prime neighbor: NULL</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 1</pre>
<pre class="screen">         1: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: pim-ssm, UpTime: 00:00:11, Expires: 00:03:19</pre>
<pre class="screen"></pre>
<pre class="screen">&lt;<span class="keyword">Device</span>B&gt; <strong>display pim ipv6 routing-table</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> Total 1 (*, G) entry; 2 (S, G) entries</pre>
<pre class="screen"></pre>
<pre class="screen"> (*, FF0E::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2</pre>
<pre class="screen">     Protocol: pim-sm, Flag: WC</pre>
<pre class="screen">     UpTime: 00:14:44</pre>
<pre class="screen">     Upstream interface: GigabitEthernet<span>0/3/0</span>, Refresh time: 00:14:44</pre>
<pre class="screen">         Upstream neighbor: FE80::9D62:0:FDC5:2</pre>
<pre class="screen">         RPF prime neighbor: FE80::9D62:0:FDC5:2</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 1</pre>
<pre class="screen">         1: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: mld, UpTime: 00:14:44, Expires: -</pre>
<pre class="screen"></pre>
<pre class="screen">(2001:DB8:5::5, FF0E::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2</pre>
<pre class="screen">     Protocol: pim-sm, Flag: SPT ACT</pre>
<pre class="screen">     UpTime: 00:02:42</pre>
<pre class="screen">     Upstream interface: GigabitEthernet<span>0/1/0</span>, Refresh time: 00:02:42</pre>
<pre class="screen">         Upstream neighbor: FE80::A01:10C:1</pre>
<pre class="screen">         RPF prime neighbor: FE80::A01:10C:1</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 1</pre>
<pre class="screen">         1: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:14:44, Expires: -</pre>
<pre class="screen"></pre>
<pre class="screen">(2001:DB8:5::5, FF3E::1)</pre>
<pre class="screen">     Protocol: pim-ssm, Flag: SG_RCVR</pre>
<pre class="screen">     UpTime: 00:08:02</pre>
<pre class="screen">     Upstream interface: GigabitEthernet<span>0/1/0</span>, Refresh time: 00:08:02</pre>
<pre class="screen">         Upstream neighbor: FE80::A01:10C:1</pre>
<pre class="screen">         RPF prime neighbor: FE80::A01:10C:1</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 1</pre>
<pre class="screen">         1: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: pim-ssm, UpTime: 00:08:02, Expires: -</pre>
<pre class="screen"></pre>
<pre class="screen">&lt;<span class="keyword">Device</span>C&gt; <strong>display pim ipv6 routing-table</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> Total 1 (*, G) entry; 1 (S, G) entry</pre>
<pre class="screen"></pre>
<pre class="screen"> (*, FF0E::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2</pre>
<pre class="screen">     Protocol: pim-sm, Flag: WC</pre>
<pre class="screen">     UpTime: 00:14:44</pre>
<pre class="screen">     Upstream interface: GigabitEthernet<span>0/1/0</span>, Refresh time: 00:14:44</pre>
<pre class="screen">         Upstream neighbor: FE80::7493:FE25:1</pre>
<pre class="screen">         RPF prime neighbor: FE80::7493:FE25:1</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 1</pre>
<pre class="screen">         1: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: mld, UpTime: 00:14:43, Expires: -</pre>
<pre class="screen"></pre>
<pre class="screen">(2001:DB8:5::5, FF0E::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2</pre>
<pre class="screen">     Protocol: pim-sm, Flag: SPT ACT</pre>
<pre class="screen">     UpTime: 00:02:42</pre>
<pre class="screen">      Upstream interface: GigabitEthernet<span>0/1/0</span>, Refresh time: 00:02:42</pre>
<pre class="screen">         Upstream neighbor: FE80::7493:FE25:1</pre>
<pre class="screen">         RPF prime neighbor: FE80::7493:FE25:1</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 1</pre>
<pre class="screen">         1: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:02:14, Expires: -</pre>
<pre class="screen"></pre>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display pim ipv6 routing-table</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> Total 1 (*, G) entry; 1 (S, G) entry</pre>
<pre class="screen"></pre>
<pre class="screen"> (*, FF0E::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2 (local)</pre>
<pre class="screen">     Protocol: pim-sm, Flag: WC</pre>
<pre class="screen">     UpTime: 00:16:56</pre>
<pre class="screen">     Upstream interface: Register, Refresh time: 00:16:56</pre>
<pre class="screen">         Upstream neighbor: NULL</pre>
<pre class="screen">         RPF prime neighbor: NULL</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 2</pre>
<pre class="screen">         1: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:16:56, Expires: 00:02:34</pre>
<pre class="screen">         2: GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:07:56, Expires: 00:02:35</pre>
<pre class="screen"></pre>
<pre class="screen"> (2001:DB8:5::5, FF0E::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2 (local)</pre>
<pre class="screen">     Protocol: pim-sm, Flag: SWT ACT</pre>
<pre class="screen">     UpTime: 00:02:54</pre>
<pre class="screen">     Upstream interface: GigabitEthernet<span>0/1/0</span>, Refresh time: 00:02:54</pre>
<pre class="screen">         Upstream neighbor: FE81::659:10C:3</pre>
<pre class="screen">         RPF prime neighbor: FE81::659:10C:3</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 1</pre>
<pre class="screen">            1: GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:02:54, Expires: 00:02:36</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172367522__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen">multicast ipv6 routing-enable</pre>
<pre class="screen">#</pre>
<pre class="screen">acl ipv6 number 2000</pre>
<pre class="screen"> rule 0 permit source FF3E::1/64</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:5::1/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:1::1/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:2::1/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:6::1/64</pre>
<pre class="screen"> pim ipv6 bsr-boundary</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospfv3 1</pre>
<pre class="screen"> router-id 1.1.1.1</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">pim-ipv6</pre>
<pre class="screen"> ssm-policy 2000</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">multicast ipv6 routing-enable</pre>
<pre class="screen">#</pre>
<pre class="screen">acl ipv6 number 2000</pre>
<pre class="screen"> rule 0 permit source FF3E::1/64</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:1::2/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:7::1/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> mld enable</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:3::1/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospfv3 1</pre>
<pre class="screen"> router-id 2.2.2.2</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">pim-ipv6</pre>
<pre class="screen"> ssm-policy 2000</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>C configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>C</pre>
<pre class="screen">#</pre>
<pre class="screen">multicast ipv6 routing-enable</pre>
<pre class="screen">#</pre>
<pre class="screen">acl ipv6 number 2000</pre>
<pre class="screen"> rule 0 permit source FF3E::1/64</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:4::2/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:8::1/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> mld enable</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospfv3 1</pre>
<pre class="screen"> router-id 3.3.3.3</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">pim-ipv6</pre>
<pre class="screen"> ssm-policy 2000</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
<pre class="screen"></pre>
</li><li><p><span class="keyword">Device</span>D configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>D</pre>
<pre class="screen">#</pre>
<pre class="screen">multicast ipv6 routing-enable</pre>
<pre class="screen">#</pre>
<pre class="screen">acl ipv6 number 2000</pre>
<pre class="screen"> rule 0 permit source FF3E::1/64</pre>
<pre class="screen">#</pre>
<pre class="screen">acl ipv6 number 2001</pre>
<pre class="screen"> rule 0 permit source FF0E::1/64</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:2::2/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:3::2/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:4::1/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospfv3 1</pre>
<pre class="screen"> router-id 4.4.4.4</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">pim-ipv6</pre>
<pre class="screen"> ssm-policy 2000</pre>
<pre class="screen"> c-bsr 2001:DB8:3::2</pre>
<pre class="screen"> c-rp 2001:DB8:3::2 group-policy 2001</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2036.html">Configuration Examples for IPv6 PIM
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2039.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>