
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an MTI">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2121.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2124.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2126.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv4 Multicast VPN_Rosen">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Multicast VPN_Rosen">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv4 Multicast VPN_Rosen">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv4 Multicast VPN_Rosen">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001225832636">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an MTI</title>
</head>
<body><a name="EN-US_TASK_0000001225832636"></a><a name="EN-US_TASK_0000001225832636"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an MTI</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001225832636__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>MTIs are virtual interfaces. MTIs allow interaction between the public network instance and VPN instances on PEs. By exchanging PIM packets between MTIs, PEs can set up PIM neighbor relationships with each other in the public network instance.</p>
<div class="p">An MTI can be configured in either of the following modes:<ul><li><p>Automatic configuration mode</p>
<p>If a PE is bound to multiple VPN instances, each instance needs to be configured with an MTI address. In this situation, you can use automatic configuration to configure IP addresses for all MTIs globally.</p>
</li><li><p>Manual configuration mode</p>
<p>When the number of VPN instances bound to a PE is small, you can configure an IP address and a Maximum Transmission Unit (MTU) for each MTI manually.</p>
</li></ul>
</div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If both of the modes are configured, the manual configuration mode takes precedence over the automatic configuration mode.</p>
</div></div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001225832636__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure the automatic configuration mode globally.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=multicast-domain+source-interface"><b><span class="cmdname">multicast-domain source-interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>An interface from which an MTI references an IP address is specified for all VPN instances.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To avoid frequent protocol changes caused by interface flapping, use the loopback interface address as the MTI address.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the automatic configuration mode for a specified VPN instance.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span><p><p>The VPN instance view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a></span><p><p>The IPv4 address family is enabled for the VPN instance, and the VPN instance IPv4 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=multicast-domain+source-interface"><b><span class="cmdname">multicast-domain source-interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>An interface from which an MTI references an IP address is specified for the VPN instance.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To avoid frequent protocol changes caused by interface flapping, use the loopback interface address as the MTI address.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the manual configuration mode.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <strong><span>mtunnel</span></strong> <i><span class="varname">number</span></i></span><p><p>The MTI interface view is displayed.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Before running the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <strong><span>mtunnel</span></strong> <i><span class="varname">number</span></i> command, ensure that a Share-Group has been configured, and the specified MTI has been bound to it.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ip+address"><b><span class="cmdname">ip address</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> }</span><p><p>The IP address of the MTI is configured.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The MTI address must be the same as the IP address that is used to set up the Internal Border Gateway Protocol (IBGP) peer relationship on the PE on the public network. Otherwise, C-multicast packets received on the MTI cannot pass the Reverse Path Forwarding (RPF) check.</p>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=mtu"><b><span class="cmdname">mtu</span></b></a> <i><span class="varname">mti-mtu</span></i></span><p><p>The MTU value of the MTI is configured. By default, the MTU value of the MTI is 1472 bytes.</p>
</p><p><p>When being transmitted between a VPN instance and the public network instance, multicast packets need to be encapsulated into or decapsulated from tunnels. If the length of multicast packets of private networks equals or approaches the maximum transmission unit (MTU) of the outbound interface of the public network instance, the length of packets into which multicast packets are encapsulated will exceed the MTU of the outbound interface of the public network instance. The encapsulated packets then need to be fragmented before being sent out through the outbound interface of the public network instance and reassembled after arriving at the receive end. Therefore, setting a small MTU on the MTI is recommended to allow large multicast packets of private networks to be fragmented before being encapsulated into packets. Packets then do not need to be reassembled on the receive end, and this improves efficiency.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2121.html">Configuring an MD VPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2124.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2126.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>