
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IPv4 PIM IPsec">
<meta name="abstract" content="If you want to authenticate sent and received IPv4 PIM messages, configure IPv4 PIM IP Security (IPsec). IPv4 PIM IPsec protects a device against attacks launched using forged IPv4 PIM messages.">
<meta name="description" content="If you want to authenticate sent and received IPv4 PIM messages, configure IPv4 PIM IP Security (IPsec). IPv4 PIM IPsec protects a device against attacks launched using forged IPv4 PIM messages.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2278.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_pim_cfg_2260.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366904">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring IPv4 PIM IPsec</title>
</head>
<body><a name="EN-US_TASK_0172366904"></a><a name="EN-US_TASK_0172366904"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IPv4 PIM IPsec</h1>
<div class="taskbody"><p>If you want to authenticate sent and received IPv4 PIM messages, configure IPv4 PIM IP Security (IPsec). IPv4 PIM IPsec protects a device against attacks launched using forged IPv4 PIM messages.</p>
<div class="context"><a name="EN-US_TASK_0172366904__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>IPv4 PIM IPsec provides a complete set of security protection mechanisms to authenticate the sent and received IPv4 PIM messages, protecting devices against attacks launched using forged IPv4 PIM messages.</p>
<p>IPv4 PIM IPsec configured in the interface view has the same effect as that configured in the IPv4 PIM view, but their application scopes are different:</p>
<ul><li>IPv4 PIM IPsec configured in the interface view: applies only to the current interface.</li><li>IPv4 PIM IPsec configured in the IPv4 PIM view: applies to all interfaces.</li></ul>
<p>IPv4 PIM IPsec configured in the interface view takes precedence over IPv4 PIM IPsec configured in the IPv4 PIM view. If no IPv4 PIM IPsec configuration exists in the interface view, the interface uses the IPv4 PIM IPsec configuration in the IPv4 PIM view.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366904__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring IPv4 PIM IPsec, complete the following tasks:</p>
<ul><li><p><a href="dc_vrp_multicast_cfg_0006.html">Configure PIM-SM</a>.</p>
</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172366904__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li id="EN-US_TASK_0172366904__step_dc_vrp_multicast_cfg_224801"><span id="EN-US_TASK_0172366904__cmd466703659214040">Configure IPv4 PIM IPsec in the PIM view.</span><ul id="EN-US_TASK_0172366904__choices1349255211214040"><li id="EN-US_TASK_0172366904__choice205258777214040"><p id="EN-US_TASK_0172366904__p925527957214040"><a name="EN-US_TASK_0172366904__choice205258777214040"></a><a name="choice205258777214040"></a>Configure IPsec authentication for IPv4 PIM messages.</p>
</li></ul>
<ol id="EN-US_TASK_0172366904__substeps1238862913214040"><li class="substepexpand" id="EN-US_TASK_0172366904__substep834554648214040"><span id="EN-US_TASK_0172366904__cmd1144270379214040">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname1484775653214040">system-view</span></b></a></span><p><p id="EN-US_TASK_0172366904__p1161165716565">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366904__substep268812471214040"><span id="EN-US_TASK_0172366904__cmd1773090456214040">Run <a href="cmdqueryname=pim"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname1632083332214040">pim</span></b></a> [ <strong><span id="EN-US_TASK_0172366904__cmdparmname1986429639214040">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172366904__varname846878518214040">vpn-instance-name</span></i> ]</span><p><p id="EN-US_TASK_0172366904__p6135614155713">The PIM view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366904__substep8236076214040"><span id="EN-US_TASK_0172366904__cmd984775924214040">Run <span><a href="cmdqueryname=ipsec"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname738587389214040">ipsec</span></b></a> [ <a href="cmdqueryname=unicast-message"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname74159783214040">unicast-message</span></b></a> ] <strong><span id="EN-US_TASK_0172366904__cmdparmname1562570837214040">sa</span></strong> <i><span class="varname" id="EN-US_TASK_0172366904__varname1597615621214040">sa-name</span></i></span></span><p><p id="EN-US_TASK_0172366904__p14768105545713">IPv4 PIM IPsec is configured globally, enabling the device to authenticate the sent and received IPv4 PIM messages based on the specified SA.</p>
<p id="EN-US_TASK_0172366904__p17992129195718">If you specify <a href="cmdqueryname=unicast-message"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname684995322214040">unicast-message</span></b></a> in the command, the device authenticates IPv4 PIM unicast messages based on the specified SA.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366904__substep1722809358214040"><span id="EN-US_TASK_0172366904__cmd734867405214040">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname69166894214040">commit</span></b></a></span><p><p id="EN-US_TASK_0172366904__p1679015315813">The configuration is committed.</p>
</p></li></ol>
<ul id="EN-US_TASK_0172366904__choices78942235214040"><li id="EN-US_TASK_0172366904__choice2110929273214040"><p id="EN-US_TASK_0172366904__p1958442871214040"><a name="EN-US_TASK_0172366904__choice2110929273214040"></a><a name="choice2110929273214040"></a>Configure IPsec authentication for IPv4 PIM Hello messages.</p>
</li></ul>
<ol id="EN-US_TASK_0172366904__substeps319306711214040"><li class="substepexpand" id="EN-US_TASK_0172366904__substep1082781033214040"><span id="EN-US_TASK_0172366904__cmd524396953214040">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname658495592214040">system-view</span></b></a></span><p><p id="EN-US_TASK_0172366904__p347684619477">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366904__substep304534306214040"><span id="EN-US_TASK_0172366904__cmd854550141214040">Run <a href="cmdqueryname=pim"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname868809264214040">pim</span></b></a> [ <strong><span id="EN-US_TASK_0172366904__cmdparmname1826971031214040">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172366904__varname1116148265214040">vpn-instance-name</span></i> ]</span><p><p id="EN-US_TASK_0172366904__p108835794820">The PIM view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366904__substep2122527814214040"><span id="EN-US_TASK_0172366904__cmd1474109581214040">Run <a href="cmdqueryname=hello+ipsec"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname1643661558214040">hello ipsec</span></b></a> <a href="cmdqueryname=sa"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname240905347214040">sa</span></b></a> <i><span class="varname" id="EN-US_TASK_0172366904__varname726797117214040">sa-name</span></i></span><p><p id="EN-US_TASK_0172366904__p14128133154817">IPv4 PIM IPsec is configured globally, enabling the device to authenticate the sent and received IPv4 PIM Hello messages based on the specified SA.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366904__substep393460086214040"><span id="EN-US_TASK_0172366904__cmd781516289214040">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname113635133214040">commit</span></b></a></span><p><p id="EN-US_TASK_0172366904__p18874214918">The configuration is committed.</p>
</p></li></ol>
<p><div class="note" id="EN-US_TASK_0172366904__note558269144214040"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366904__p473449465214040">If the <a href="cmdqueryname=ipsec+sa"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname909814520214040">ipsec sa</span></b></a> and <a href="cmdqueryname=hello+ipsec+sa"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname1121672589214040">hello ipsec sa</span></b></a> commands are both configured, the command configured later overrides the command configured earlier.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172366904__step_dc_vrp_multicast_cfg_224802"><span id="EN-US_TASK_0172366904__cmd888977709214040">Configure IPv4 PIM IPsec in the interface view.</span><ul id="EN-US_TASK_0172366904__choices500680421214040"><li id="EN-US_TASK_0172366904__choice311233264214040"><p id="EN-US_TASK_0172366904__p1774787603214040"><a name="EN-US_TASK_0172366904__choice311233264214040"></a><a name="choice311233264214040"></a>Configure IPsec authentication for IPv4 PIM messages.</p>
</li></ul>
<ol id="EN-US_TASK_0172366904__substeps541278278214040"><li class="substepexpand" id="EN-US_TASK_0172366904__substep983680313214040"><span id="EN-US_TASK_0172366904__cmd1385905985214040">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname1806626736214040">system-view</span></b></a></span><p><p id="EN-US_TASK_0172366904__p6861132911490">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366904__substep1724065558214040"><span id="EN-US_TASK_0172366904__cmd372984335214040">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname940489917214040">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172366904__varname1623422599214040">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172366904__varname2096144242214040">interface-number</span></i></span><p><p id="EN-US_TASK_0172366904__p626210485499">The interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366904__substep266027285214040"><span id="EN-US_TASK_0172366904__cmd59625941214040">Run <a href="cmdqueryname=pim+ipsec+sa"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname848459901214040">pim ipsec sa</span></b></a> <i><span class="varname" id="EN-US_TASK_0172366904__varname1856866821214040">sa-name</span></i></span><p><p id="EN-US_TASK_0172366904__p18839189205020">IPv4 PIM IPsec is configured on the interface, enabling the interface to authenticate the sent and received IPv4 PIM messages based on the specified SA.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366904__substep893194054214040"><span id="EN-US_TASK_0172366904__cmd1001773048214040">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname2051615482214040">commit</span></b></a></span><p><p id="EN-US_TASK_0172366904__p1328524195011">The configuration is committed.</p>
</p></li></ol>
<ul id="EN-US_TASK_0172366904__choices1239475996214040"><li id="EN-US_TASK_0172366904__choice2083892294214040"><p id="EN-US_TASK_0172366904__p666986335214040"><a name="EN-US_TASK_0172366904__choice2083892294214040"></a><a name="choice2083892294214040"></a>Configure IPsec authentication for IPv4 PIM Hello messages.</p>
</li></ul>
<ol id="EN-US_TASK_0172366904__substeps1157253040214040"><li class="substepexpand" id="EN-US_TASK_0172366904__substep437131225214040"><span id="EN-US_TASK_0172366904__cmd322942188214040">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname231143465214040">system-view</span></b></a></span><p><p id="EN-US_TASK_0172366904__p16334203135118">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366904__substep1536509910214040"><span id="EN-US_TASK_0172366904__cmd631202195214040">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname1291521375214040">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172366904__varname1457384047214040">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172366904__varname848978557214040">interface-number</span></i></span><p><p id="EN-US_TASK_0172366904__p151971620105111">The interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366904__substep361270337214040"><span id="EN-US_TASK_0172366904__cmd934283890214040">Run <a href="cmdqueryname=pim+hello+ipsec+sa"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname834068118214040">pim hello ipsec sa</span></b></a> <i><span class="varname" id="EN-US_TASK_0172366904__varname73003691214040">sa-name</span></i></span><p><p id="EN-US_TASK_0172366904__p965410415512">IPv4 PIM IPsec is configured on the interface, enabling the interface to authenticate the sent and received IPv4 PIM Hello messages based on the specified SA.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172366904__substep1091026334214040"><span id="EN-US_TASK_0172366904__cmd1664217452214040">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname1342898694214040">commit</span></b></a></span><p><p id="EN-US_TASK_0172366904__p1190427125213">The configuration is committed.</p>
</p></li></ol>
<p><div class="note" id="EN-US_TASK_0172366904__note771580533214040"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366904__p1447757545214040">If the <a href="cmdqueryname=pim+ipsec+sa"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname508696930214040">pim ipsec sa</span></b></a> and <a href="cmdqueryname=pim+hello+ipsec+sa"><b><span class="cmdname" id="EN-US_TASK_0172366904__cmdname1486647661214040">pim hello ipsec sa</span></b></a> commands are both configured, the command configured later overrides the command configured earlier.</p>
</div></div>
</p></li></ul></div>
<div class="example"><a name="EN-US_TASK_0172366904__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+pim"><b><span class="cmdname">display pim</span></b></a> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <strong><span>interface</span></strong> [ <i><span class="varname">interface-type interface-number</span></i> | <strong><span>up</span></strong> | <strong><span>down</span></strong> ] <strong><span>verbose</span></strong> command to check the detailed IPv4 PIM IPsec configuration on an interface.</p>
<p># Display the IPv4 PIM IPsec configuration on GE <span>0/1/0</span>. The command output shows that IPv4 PIM IPsec has been configured on GE <span>0/1/0</span>, the SA is named <strong>sa1</strong>.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0003.html">PIM Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2278.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_pim_cfg_2260.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>