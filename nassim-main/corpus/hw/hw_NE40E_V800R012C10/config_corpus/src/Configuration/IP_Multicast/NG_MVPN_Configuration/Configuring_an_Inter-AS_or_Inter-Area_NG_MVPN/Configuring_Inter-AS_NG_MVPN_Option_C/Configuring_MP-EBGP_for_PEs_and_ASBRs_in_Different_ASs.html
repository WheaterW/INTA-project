
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring MP-EBGP for PEs and ASBRs in Different ASs">
<meta name="abstract" content="By introducing extended community attributes into BGP, MP-EBGP can advertise VPNv4 routes between PEs. And after an MP-EBGP peer relationship is established between ASBRs in different ASs, an ASBR can advertise the VPNv4 routes of its AS to the other ASBR.">
<meta name="description" content="By introducing extended community attributes into BGP, MP-EBGP can advertise VPNv4 routes between PEs. And after an MP-EBGP peer relationship is established between ASBRs in different ASs, an ASBR can advertise the VPNv4 routes of its AS to the other ASBR.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0038.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0042.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0044.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv4 Multicast VPN_NG MVPN">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Multicast VPN_NG MVPN">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv4 Multicast VPN_NG MVPN">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv4 Multicast VPN_NG MVPN">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv4 Multicast VPN_NG MVPN">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001225673444">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring MP-EBGP for PEs and ASBRs in Different ASs</title>
</head>
<body><a name="EN-US_TASK_0000001225673444"></a><a name="EN-US_TASK_0000001225673444"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring MP-EBGP for PEs and ASBRs in Different ASs</h1>
<div class="taskbody"><p>By introducing extended community attributes into BGP, MP-EBGP can advertise VPNv4 routes between PEs. And after an MP-EBGP peer relationship is established between ASBRs in different ASs, an ASBR can advertise the VPNv4 routes of its AS to the other ASBR.</p>
<div class="steps"><a name="EN-US_TASK_0000001225673444__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> <strong><span>as-number</span></strong> <i><span class="varname">as-number</span></i></span><p><p>The peer ASBR is specified as an EBGP peer.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> <strong><span>connect-interface</span></strong> <strong><span>loopback</span></strong> <i><span class="varname">interface-number</span></i></span><p><p>A loopback interface is specified as the outbound interface for BGP sessions.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>ebgp-max-hop</span></strong> [ <i><span class="varname">hop-count</span></i> ]</span><p><p>The maximum number of hops between PEs for which an EBGP peer relationship is to be configured is specified.</p>
<p>PEs of different ASs are generally not directly connected. To set up the EBGP peer relationship between PEs of different ASs, configure the maximum number of hops between PEs and ensure that PEs are reachable.</p>
</p></li><li><span>Run <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span><p><p>The unicast IPv4 address family view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> <strong><span>enable</span></strong></span><p><p>The function to exchange IPv4 routes is enabled.</p>
</p></li><li><span>(On PEs) Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>(On PEs) Run <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>vpnv4</span></strong> [ <strong><span>unicast</span></strong> ]</span><p><p>The BGP-VPNv4 address family view is displayed.</p>
</p><p><div class="p"><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When the device functioning as an ASBR advertises VPNv4 routes to a PE, the device can automatically change the next hop of the routes to its own IP address.</p>
</div></div>
</div>
</p></li><li><span>(On PEs) Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> <strong><span>enable</span></strong></span><p><p>The capability to exchange VPNv4 routes is enabled.</p>
</p></li><li><span>(On PEs) Run <a href="cmdqueryname=policy+vpn-target"><b><span class="cmdname">policy vpn-target</span></b></a></span><p><p>The VPN-Target filter function is enabled on PEs.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0038.html">Configuring Inter-AS NG MVPN Option C
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0042.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0044.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>