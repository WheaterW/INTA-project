
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Dual-Device Backup Platform">
<meta name="abstract" content="This section describes how to configure a dual-device backup platform to back up IGMP entries. If a network node or link fails, a rapid multicast service switchover is triggered, improving service reliability.">
<meta name="description" content="This section describes how to configure a dual-device backup platform to back up IGMP entries. If a network node or link fails, a rapid multicast service switchover is triggered, improving service reliability.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0115.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0117.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366745">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Dual-Device Backup Platform</title>
</head>
<body><a name="EN-US_TASK_0172366745"></a><a name="EN-US_TASK_0172366745"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Dual-Device Backup Platform</h1>
<div class="taskbody"><p>This section describes how to configure a dual-device backup platform to back up IGMP entries. If a network node or link fails, a rapid multicast service switchover is triggered, improving service reliability.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0172366745__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>An Eth-Trunk interface has been created using the <a href="cmdqueryname=interface+eth-trunk"><b><span class="cmdname">interface eth-trunk</span></b></a> <i><span class="varname">trunk-id</span></i> command, and Ethernet interfaces have been added to the Eth-Trunk interface using the <a href="cmdqueryname=eth-trunk"><b><span class="cmdname">eth-trunk</span></b></a> <i><span class="varname">trunk-id</span></i> command.</p>
<p>An E-Trunk has been created using the <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i> command, and the Eth-Trunk interface has been added to the E-Trunk using the <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i> [ <strong><span>remote-eth-trunk</span></strong> <i><span class="varname">eth-trunk-id</span></i> ] command.</p>
<p>The Eth-Trunk interfaces on the master and backup devices have been configured to work in master mode using the <a href="cmdqueryname=e-trunk+mode+force-master"><b><span class="cmdname">e-trunk mode force-master</span></b></a> command if the E-Trunk works in active-active mode.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366745__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Context</h4><p>In a master/backup E-Trunk scenario, a dual-device backup platform enables the master device to back up IGMP entries to the backup device through a remote backup service (RBS) channel, ensuring multicast service continuity. Configuring a dual-device backup platform includes configuring an RBS, a remote backup profile (RBP), and a dual-device E-Trunk backup platform.</p>
<p>Perform the following steps on both the master and backup devices:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366745__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an RBS.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-service"><b><span class="cmdname">remote-backup-service</span></b></a> <em>remote-backup-service-name</em></span><p><p>An RBS is created, and the RBS view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-ip-address</span></i> <a href="cmdqueryname=source"><b><span class="cmdname">source</span></b></a> <i><span class="varname">source-ip-address</span></i> <a href="cmdqueryname=port"><b><span class="cmdname">port</span></b></a> <i><span class="varname">port-id</span></i></span><p><p>TCP connection parameters are set for the RBS.</p>
</p><p><p><i><span class="varname">peer-ip-address</span></i> specifies the IP address of the peer device that backs up the local device. <i><span class="varname">source-ip-address</span></i> specifies the IP address of the local device. The IP addresses of the master and backup devices must have been configured on their own interfaces, sub-interfaces, or logical interfaces (such as loopback interfaces) and be able to ping each other.</p>
<p><i><span class="varname">port-id</span></i> specifies a TCP port number. The TCP port numbers configured on the master and backup devices must be the same.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>Configure an RBP.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a> <i><span class="varname">profile-name</span></i></span><p><p>An RBP is created, and the RBP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=backup-id"><b><span class="cmdname">backup-id</span></b></a> <i><span class="varname">backup-id</span></i> <a href="cmdqueryname=remote-backup-service"><b><span class="cmdname">remote-backup-service</span></b></a> <i><span class="varname">service-name</span></i></span><p><p>A backup ID is set for the RBP, and the RBP is associated with a specified RBS.</p>
</p><p><p><i><span class="varname">backup-id</span></i> specifies a backup ID for an RBP. You can use a backup ID and an RBS to determine an RBP. The backup IDs configured for the same RBP must be the same on the master and backup devices and can no longer be configured for other RBPs.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer-backup"><b><span class="cmdname">peer-backup</span></b></a> <strong><span>hot</span></strong></span><p><p>Hot backup is configured for user information backup between the master and backup devices.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>Configure a dual-device E-Trunk backup platform.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a> <i><span class="varname">profile-name</span></i></span><p><p>An RBP is created, and the RBP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i> <strong><span>eth-trunk</span></strong> <i><span class="varname">eth-trunk-id</span></i></span><p><p>An Eth-Trunk interface of an E-Trunk is bound to the RBP, enabling the RBP to use the Eth-Trunk interface status as the master/backup status.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i></span><p><p>The E-Trunk view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer-address"><b><span class="cmdname">peer-address</span></b></a> <i><span class="varname">peer-ip-address</span></i> <strong><span>source-address</span></strong> <i><span class="varname">source-ip-address</span></i></span><p><p>Peer and local IP addresses are set for the E-Trunk.</p>
</p><p><p>The two IP addresses are peers for each other. For example, an E-Trunk is created between device A with IP address 1.1.1.1 and device B with IP address 2.2.2.2. Then, the peer IP address of device A is 2.2.2.2, and the peer IP address of device B is 1.1.1.1.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure rapid service link switchover.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></span><p><p>BFD is enabled globally.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <i><span class="varname">session-name</span></i> <strong><span>bind</span></strong> <strong><span>peer-ip</span></strong> <i><span class="varname">ip-address</span></i></span><p><p>A BFD session is created to monitor a specified peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <i><span class="varname">session-name</span></i> <strong><span>bind</span></strong> <strong><span>peer-ip</span></strong> <strong><span>default-ip</span></strong> <strong><span>interface</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } </span><p><p>A BFD session is created to monitor a specified Eth-Trunk interface.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=discriminator"><b><span class="cmdname">discriminator</span></b></a> {<strong><span> local</span></strong> | <strong><span>remote</span></strong> } <i><span class="varname">discr-value</span></i></span><p><p>The local and remote discriminators are set.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i></span><p><p>The E-Trunk view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk+track+bfd-session"><b><span class="cmdname">e-trunk track bfd-session</span></b></a> <strong>session-name </strong><em>bfd-session-name</em></span><p><p>The E-Trunk is bound to the BFD session.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0115.html">Configuring IGMP Dual-Device Hot Backup in an E-Trunk Scenario
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0117.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>