
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a BSR RP">
<meta name="abstract" content="Select several Routers and configure them as Candidate-BootStrap Routers (C-BSRs) and Candidate-Rendezvous Points (C-RPs). A BSR is dynamically elected from C-BSRs. The BSR collects C-RP information and summarizes C-RP information into an RP-Set. The RP-Set is encapsulated in a Bootstrap message and advertised to all the Routers in the PIM domain. Then, the C-RPs elect a BSR RP based on a uniform election rule.">
<meta name="description" content="Select several Routers and configure them as Candidate-BootStrap Routers (C-BSRs) and Candidate-Rendezvous Points (C-RPs). A BSR is dynamically elected from C-BSRs. The BSR collects C-RP information and summarizes C-RP information into an RP-Set. The RP-Set is encapsulated in a Bootstrap message and advertised to all the Routers in the PIM domain. Then, the C-RPs elect a BSR RP based on a uniform election rule.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0009.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_ipv4vrf.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366836">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a BSR RP</title>
</head>
<body><a name="EN-US_TASK_0172366836"></a><a name="EN-US_TASK_0172366836"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a BSR RP</h1>
<div class="taskbody"><p>Select several <span class="keyword">Router</span>s and configure them as Candidate-BootStrap Routers (C-BSRs) and Candidate-Rendezvous Points (C-RPs). A BSR is dynamically elected from C-BSRs. The BSR collects C-RP information and summarizes C-RP information into an RP-Set. The RP-Set is encapsulated in a Bootstrap message and advertised to all the <span class="keyword">Router</span>s in the PIM domain. Then, the C-RPs elect a BSR RP based on a uniform election rule.</p>
<div class="context"><a name="EN-US_TASK_0172366836__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If a network is divided into several PIM-SM domains and the BSR RP needs to be used, <a href="dc_vrp_multicast_cfg_0020.html">configure a BSR boundary</a> on the interfaces of edge <span class="keyword">Router</span>s in PIM-SM domains to limit the range of each PIM-SM domain. Then, configure C-BSRs and C-RPs in each PIM-SM domain.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366836__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Configure a basic numbered ACL or a named ACL as needed.</span><p><ul><li><p>Configure a basic numbered ACL.</p>
<ol type="a"><li>Run <span><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> [ <strong><span>number</span></strong> ] <i><span class="varname">basic-acl-number</span></i> [ <strong><span>match-order</span></strong> { <strong><span>auto</span></strong> | <strong><span>config</span></strong> } ]</span><p>A basic numbered ACL is created, and the basic numbered ACL view is displayed.</p>
</li><li>Run <span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> }</span><p>Rules are configured for the basic numbered ACL.</p>
</li></ol>
</li><li><p>Configure a named ACL.</p>
<ol type="a"><li>Run <a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> <strong><span>name</span></strong> <i><span class="varname">acl-name</span></i> <strong><span>basic</span></strong> [ <strong><span>match-order</span></strong> { <strong><span>auto</span></strong> | <strong><span>config</span></strong> } ]<p>A named ACL is created, and the named ACL view is displayed.</p>
</li><li>Run <span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> }</span><p>Rules are configured for the named ACL.</p>
</li></ol>
</li></ul>
<p>If a basic numbered ACL is used, run the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command and set the <strong><span>source</span></strong> parameter to the multicast group range to be served by the C-RP.</p>
<p>If a named ACL is used, run the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command and set the <strong><span>destination</span></strong> parameter to the multicast group range to be served by the C-RP.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <a href="cmdqueryname=pim"><b><span class="cmdname">pim</span></b></a> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span><p><p>The PIM view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=c-bsr"><b><span class="cmdname">c-bsr</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <i><span class="varname">hash-length</span></i> [ <i><span class="varname">priority</span></i> ] ]</span><p><p>The C-BSR is configured.</p>
</p><p><ul><li><p><i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i>: specifies the interface where the C-BSR resides. The interface must be configured with PIM-SM.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To avoid frequent protocol changes caused by interface flapping, using loopback interfaces is recommended.</p>
</div></div>
</li><li><p><i><span class="varname">hash-length</span></i>: specifies the length of the hash mask.</p>
<p>Based on the group address G, C-RP addresses, and value of <i><span class="varname">hash-length</span></i>, the <span class="keyword">Router</span> calculates the hash value of the C-RPs that have the same priority and want to serve group G. The C-RP with the largest hash value is elected as the RP for group G.</p>
<p>When a multicast network is overloaded or traffic congests on an RP, the RP may be overburdened. In this situation, you can configure <i><span class="varname">hash-length</span></i> to enable different RPs to transmit services for different multicast groups and implement load balancing.</p>
</li><li><p><i><span class="varname">priority</span></i>: specifies the C-BSR priority for BSR election. A larger <i><span class="varname">priority</span></i> value indicates a higher priority.</p>
<p>In a BSR election, the C-BSR with the highest priority wins. If all C-BSRs have the same priority, the C-BSR with the largest IP address wins.</p>
</li></ul>
</p></li><li><span>Run <a href="cmdqueryname=c-rp"><b><span class="cmdname">c-rp</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <strong><span>group-policy</span></strong> <span>{ </span><i><span class="varname">basic-acl-number</span></i><span> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> }</span> | <strong><span>priority</span></strong> <i><span class="varname">priority</span></i> | <strong><span>holdtime</span></strong> <i><span class="varname">hold-interval</span></i> | <strong><span>advertisement-interval</span></strong> <i><span class="varname">adv-interval</span></i> ] <sup>*</sup></span><p><ul><li><p>A C-RP is configured. <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i>: specifies the interface where the C-RP resides. The interface must be configured with PIM-SM. </p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To avoid frequent protocol changes caused by interface flapping, using loopback interfaces is recommended.</p>
<p>If IP address unnumbered is enabled, do not configure the interfaces with the same address as C-RPs simultaneously. If the priorities of C-RPs are different, the BSR considers that the C-RP configuration is frequently modified.</p>
</div></div>
</li><li><p><strong><span>group-policy</span></strong> <i><span class="varname">basic-acl-number</span></i>: specifies that the C-RP serves only the multicast groups matching the ACL. </p>
</li><li><p><strong><span>priority</span></strong> <i><span class="varname">priority</span></i>: specifies the C-RP priority for RP election. A larger <i><span class="varname">priority</span></i> value indicates a higher priority.</p>
<p>The RP election rules are as follows:</p>
<ul><li>If interfaces have the same address mask, the C-RP with the highest priority wins.</li><li>If interfaces have the same priority, the hash function is used and the C-RP with the largest hash value wins.</li><li>If interfaces have the same priority and the same hash value, the C-RP with the largest IP address wins.</li></ul>
</li><li><p><strong><span>holdtime</span></strong> <i><span class="varname">hold-interval</span></i>: specifies the timeout period for the BSR to wait for an Advertisement message from the C-RP.</p>
</li><li><p><strong><span>advertisement-interval</span></strong> <i><span class="varname">adv-interval</span></i>: specifies the interval for the C-RP to send Advertisement messages.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>If no ACL is configured, the C-RP serves all multicast groups.</li><li>If an ACL is configured, the device uses configured ACL rules to filter multicast groups to be served by the C-RP.<ul><li>If a multicast group matches an ACL rule and the action is <strong>permit</strong>, the C-RP serves this multicast group.</li><li>If a multicast group matches an ACL rule and the action is <strong>deny</strong>, the C-RP does not serve this multicast group.</li><li>If a multicast group does not match any ACL rule or if a specified ACL does not exist or does not contain rules, the C-RP serves all multicast groups.</li></ul>
</li></ul>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=bsm+semantic+fragmentation"><b><span class="cmdname">bsm semantic fragmentation</span></b></a></span><p><p>BSR packet fragmentation is enabled.</p>
<p>Enabling BSR packet fragmentation on all devices is recommended because BSR packet fragmentation can solve the problem faced by IP fragmentation that all fragments become unavailable due to loss of fragment information.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=auto-rp+listening+enable"><b><span class="cmdname">auto-rp listening enable</span></b></a></span><p><p>Auto-RP listening is enabled.</p>
<p>Configure this command if the <span class="keyword">Router</span> needs to interwork with a device that supports Auto-RPs.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0006.html">Configuring PIM-SM
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0009.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_ipv4vrf.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>