
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Layer 2 Multicast Entry Limit in a VLAN Scenario">
<meta name="abstract" content="This section provides an example for configuring Layer 2 multicast entry limit in a VLAN scenario.">
<meta name="description" content="This section provides an example for configuring Layer 2 multicast entry limit in a VLAN scenario.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0033.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0043.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0056.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00800033,l2multicastvrp,c00549182,w00556928,w00437000,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Layer 2 Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Layer 2 Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="Layer 2 Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="Layer 2 Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367991">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Layer 2 Multicast Entry Limit in a VLAN Scenario</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172367991"></a><a name="EN-US_TASK_0172367991"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Layer 2 Multicast Entry Limit in a VLAN Scenario</h1>
<div class="taskbody"><p>This section provides an example for configuring Layer 2 multicast entry limit in a VLAN scenario.</p>
<div class="context"><a name="EN-US_TASK_0172367991__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172367991__fig_dc_vrp_l2mc_cfg_005801">Figure 1</a>, IPTV services are deployed on the VLAN network, and a CE is connected to the upper layer network through a PE and finally accesses the IPTV server. The CE is downlinked to a residential network VLAN 100. </p>
<p>To reduce the pressure on physical link bandwidth on the VLAN, configure a multicast entry limit for the VLAN on the CE as required to limit the number of multicast groups after fully evaluating the network capability and requirements. This ensures high IPTV service quality for users in the downstream VLAN.</p>
<div class="p">The required Layer 2 multicast entry limit configurations on the CE are as follows:<ul><li>A maximum of 10 multicast group members can join VLAN 100.</li><li>Limit the number of multicast groups on the downstream interface GE <span>0/1/1</span> as follows:<ul><li>Limit the number of multicast groups in VLAN 100 to 10.</li></ul>
</li></ul>
</div>
<div class="fignone" id="EN-US_TASK_0172367991__fig_dc_vrp_l2mc_cfg_005801"><a name="EN-US_TASK_0172367991__fig_dc_vrp_l2mc_cfg_005801"></a><a name="fig_dc_vrp_l2mc_cfg_005801"></a><span class="figcap"><b>Figure 1 </b>Configuring Layer 2 multicast entry limit in a VLAN scenario</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interface 1 in this example represents GE <span>0/1/1</span>.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_l2mc_cfg_005801.png" width="NaN" height="NaN"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367991__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure VLAN 100 on the CE so that downstream subscribers can receive multicast data.</p>
</li><li><p>Enable IGMP snooping globally and in the VLAN to implement on-demand multicast data distribution in the VLAN and reduce bandwidth consumption at both the user side and network side.</p>
</li><li><p>Configure Layer 2 multicast entry limit for VLAN 100 and for GE <span>0/1/1</span> to control the multicast group numbers.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367991__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>VLAN ID of the residential network attached to the CE: 100</p>
</li><li><p>Maximum numbers of Layer 2 multicast entries</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172367991__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure a VLAN.</span><p><p># Configure VLAN 100 on the CE.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname CE</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE-GigabitEthernet<span>0/1/1</span>] <strong>portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE] <strong>vlan 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-vlan100] <strong>port gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-vlan100] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE] <strong>commit</strong></pre>
</p></li><li><span>Enable IGMP snooping.</span><p><p># Enable IGMP snooping globally on the CE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE] <strong>igmp-snooping enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE] <strong>commit</strong></pre>
<p># Enable IGMP snooping in VLAN 100.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE] <strong>vlan 100</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE-vlan100] <strong>igmp-snooping enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-vlan100] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE] <strong>commit</strong></pre>
</p></li><li><span>Configure a multicast entry limit for the VLAN.</span><p><p># Configure the CE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE] <strong>l2-multicast limit max-entry 10 vlan 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE] <strong>commit</strong></pre>
</p></li><li><span>Configure a limit on the number of multicast groups for GE<span>0/1/1</span>.</span><p><p># Configure a multicast entry limit on GE <span>0/1/1</span> of the CE.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE-GigabitEthernet<span>0/1/1</span>] <strong>l2-multicast limit max-entry 10 vlan 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>After completing the configurations, run the <strong>display l2-multicast limit</strong> command on the CE. The command output shows Layer 2 multicast entry limit configurations.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE] <strong>display l2-multicast limit</strong></pre>
<pre class="screen">L2-multicast limit information
------------------------------------------------------------------------------
                                               ConfigEntries 
                                               CurrentEntries
------------------------------------------------------------------------------
VLAN 100 limit information:
------------------------------------------------------------------------------
                                               10           
                                               0  
interface GigabitEthernet<span>0/1/1</span> VLAN 100 limit information:
------------------------------------------------------------------------------
                                               10           
                                               0
</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172367991__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>CE configuration file</p>
<pre class="screen">#
sysname CE
#
vlan batch 100
#
igmp-snooping enable
l2-multicast limit max-entry 10 vlan 100
#
vlan 100
 igmp-snooping enable
#
interface GigabitEthernet<span>0/1/1</span>
 portswitch
 undo shutdown
 port default vlan 100
 l2-multicast limit max-entry 10 vlan 100
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0033.html">Configuration Examples for Layer 2 Multicast
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0043.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0056.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>