
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring MBGP Route Dampening">
<meta name="abstract" content="Configuring MBGP route dampening suppresses unstable MBGP routes.">
<meta name="description" content="Configuring MBGP route dampening suppresses unstable MBGP routes.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1033.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1026.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367060">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring MBGP Route Dampening</title>
</head>
<body><a name="EN-US_TASK_0172367060"></a><a name="EN-US_TASK_0172367060"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring MBGP Route Dampening</h1>
<div class="taskbody"><p>Configuring MBGP route dampening suppresses unstable MBGP routes.</p>
<div class="context"><a name="EN-US_TASK_0172367060__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>MBGP route dampening is designed to suppress unstable routes. After MBGP route dampening is configured, an MBGP device does not add any unstable routes to its MBGP routing table or advertise them to its MBGP peers.</p>
<p>A primary cause of route instability is route flapping. A route is considered to be flapping when it repeatedly appears and then disappears in the routing table. MBGP is applied to complex networks where routes change frequently. Frequent route flapping consumes bandwidth and CPU resources and even seriously affects network operations. To prevent the impact of frequent route flapping, MBGP uses route dampening to suppress unstable routes.</p>
<p>Specified-requirement route dampening is a type of route dampening that is used to differentiate routes based on routing policies. This allows MBGP to use different route dampening parameters to suppress unstable routes. Different route dampening parameters can also be configured for different nodes in the same route-policy. When route flapping occurs, MBGP can use specific route dampening parameters to suppress the routes that match the route-policy. For example, on a network, a long dampening period of time can be set for routes with a long mask, and a short dampening period of time is set for routes with a short mask (such as an 8-bit mask).</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367060__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring MBGP route dampening, <a href="dc_vrp_multicast_cfg_1003.html">configure an MBGP peer</a>.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172367060__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>Run the <a href="cmdqueryname=ipv4-family+multicast"><b><span class="cmdname">ipv4-family multicast</span></b></a> command to enter the BGP-IPv4 multicast address family view, or run the <strong><a href="cmdqueryname=ipv4-multicast+vpn-instance"><b><span class="cmdname">ipv4-multicast vpn-instance</span></b></a> </strong><em><i><span class="varname">vpn-instance-name</span></i></em> command to enter the BGP-multicast VPN instance IPv4 address family view.</span></li><li><span>Run <span><a href="cmdqueryname=dampening"><b><span class="cmdname">dampening</span></b></a> [ <i><span class="varname">half-life-reach</span></i> <i><span class="varname">reuse</span></i> <i><span class="varname">suppress</span></i> <i><span class="varname">ceiling</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup><span> [ <strong><span>update-standard</span></strong> ]</span></span></span><p><p>MBGP route dampening parameters are set.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=dampening"><b><span class="cmdname">dampening</span></b></a> command is valid only for EBGP routes.</p>
</div></div>
<p>The value of <i><span class="varname">suppress</span></i> must be greater than that of <i><span class="varname">reuse</span></i> and smaller than that of <i><span class="varname">ceiling</span></i>.</p>
<p>If routes are differentiated based on policies and the <a href="cmdqueryname=dampening"><b><span class="cmdname">dampening</span></b></a> command is run to reference a route-policy, MBGP allows you to use different route dampening parameters to suppress different routes.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172367060__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Checking the Configurations</h4><p>After the configuration is complete, verify the configuration.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+bgp+multicast+routing-table+dampened"><b><span class="cmdname">display bgp multicast routing-table dampened</span></b></a> command to check dampened MBGP routes.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+multicast+routing-table+dampening+parameter"><b><span class="cmdname">display bgp multicast routing-table dampening parameter</span></b></a> command to check configured MBGP route dampening parameters.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+multicast+routing-table+flap-info"><b><span class="cmdname">display bgp multicast routing-table flap-info</span></b></a> [ <i><span class="varname">ip-address</span></i> [ <i><span class="varname">mask</span></i> [ <strong><span>longer-match</span></strong> ] | <i><span class="varname">mask-length</span></i> [ <strong><span>longer-match</span></strong> ] ] | <strong><span>as-path-filter</span></strong> { <i><span class="varname">as-path-filter-number</span></i> | <i><span class="varname">as-path-filter-name</span></i> } | <strong><span>regular-expression</span></strong> <i><span class="varname">as-regular-expression</span></i> ] command to check MBGP route flapping statistics.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1000.html">MBGP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1033.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1026.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>