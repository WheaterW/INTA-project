
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring a Switch-MDT">
<meta name="abstract" content="A switch-multicast distribution tree (MDT) is set up for multicast traffic flowing from a private network to the public network. Multicast packets can be switched from the share-MDT to the switch-MDT. This reduces the pressure on PEs and bandwidth consumption and allows multicast data to be transmitted on demand.">
<meta name="description" content="A switch-multicast distribution tree (MDT) is set up for multicast traffic flowing from a private network to the public network. Multicast packets can be switched from the share-MDT to the switch-MDT. This reduces the pressure on PEs and bandwidth consumption and allows multicast data to be transmitted on demand.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2121.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2125.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2127.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv4 Multicast VPN_Rosen">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Multicast VPN_Rosen">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv4 Multicast VPN_Rosen">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv4 Multicast VPN_Rosen">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001225832628">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring a Switch-MDT</title>
</head>
<body><a name="EN-US_TASK_0000001225832628"></a><a name="EN-US_TASK_0000001225832628"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring a Switch-MDT</h1>
<div class="taskbody"><p>A switch-multicast distribution tree (MDT) is set up for multicast traffic flowing from a private network to the public network. Multicast packets can be switched from the share-MDT to the switch-MDT. This reduces the pressure on PEs and bandwidth consumption and allows multicast data to be transmitted on demand.</p>
<div class="context"><a name="EN-US_TASK_0000001225832628__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>In a multicast domain (MD) VPN, a share-MDT is set up between PEs. All PEs that belong to the same MD receive multicast packets, irrespective of whether they have receivers connected to them. This wastes bandwidth resources and imposes an extra burden on PEs. A switch-MDT optimizes MDT and allows on-demand multicast transmission. Traffic will be switched from the share-MDT to the switch-MDT if multicast traffic on PEs reaches the maximum. Only the PEs that have receivers connected to them will receive multicast data from the switch-MDT. This reduces the pressure on PEs and bandwidth consumption.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If you do not configure a switch-MDT, VPN multicast data will always be transmitted along the share-MDT.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001225832628__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span><p><p>The VPN instance view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a></span><p><p>The IPv4 address family is enabled for the VPN instance, and the VPN instance IPv4 address family view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=multicast-domain+switch-group-pool"><b><span class="cmdname">multicast-domain switch-group-pool</span></b></a> <i><span class="varname">switch-group-pool</span></i> { <i><span class="varname">network-mask</span></i> | <i><span class="varname">network-mask-length</span></i> } [ <strong><span>threshold</span></strong> <i><span class="varname">threshold-value</span></i> | <strong><span>acl</span></strong> { <i><span class="varname">advanced-acl-number</span></i> | <i><span class="varname">acl-name</span></i> } ] <sup>*</sup></span></span><p><p>The switching group pool of a switch-MDT and conditions for the switch-MDT switching are configured.</p>
</p><p><ul><li><p><i><span class="varname">switch-group-pool</span></i> indicates a start address of the Switch-Group-pool. The same <i><span class="varname">switch-group-pool</span></i> value must be configured for the same VPN instance IPv4 address family on different PEs. The value range of the Switch-Group address for a VPN instance IPv4 address family cannot overlap with that for another VPN instance IPv4 address family on the same PE. </p>
</li><li><p><i><span class="varname">threshold-value</span></i> indicates the switching threshold.</p>
</li><li><p>{ <i><span class="varname">advanced-acl-number</span></i> | <i><span class="varname">acl-name</span></i> } indicates an advanced ACL.</p>
</li></ul>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=multicast-domain+switch-delay"><b><span class="cmdname">multicast-domain switch-delay</span></b></a> <i><span class="varname">switch-delay</span></i></span><p><p>A delay for switching to the switch-MDT is configured.</p>
</p><p></p></li><li><span>(Optional) Run <a href="cmdqueryname=multicast-domain+holddown-time"><b><span class="cmdname">multicast-domain holddown-time</span></b></a> <i><span class="varname">interval</span></i></span><p><p>The delay for switching back VPN multicast traffic from the switch-MDT to the share-MDT is set.</p>
</p><p></p></li><li><span>(Optional) Run <a href="cmdqueryname=multicast-domain+switch-without-register"><b><span class="cmdname">multicast-domain switch-without-register</span></b></a></span><p><p>The source PE is disabled from sending Register packets to the Rendezvous Point (RP) to establish the shortest path tree (SPT) on the public network before the Switch-Group address is used to encapsulate VPN data.</p>
</p><p></p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2121.html">Configuring an MD VPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2125.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2127.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>