
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Detection of Overlapping IPsec Flows">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0024.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0027.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909,h00522387,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="z00485179">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001194891011">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Detection of Overlapping IPsec Flows</title>
</head>
<body><a name="EN-US_TASK_0000001194891011"></a><a name="EN-US_TASK_0000001194891011"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Detection of Overlapping IPsec Flows</h1>
<div class="taskbody"><div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001194891011__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>The overlapping IPsec flow detection function takes effect only for template IPsec policies.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001194891011__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When IPsec is deployed on a mobile bearer network, new base stations are usually added for network upgrade and capacity expansion, and the device needs to interconnect with these new base stations. This is typically a complex scenario involving a large number of base stations. The data flows configured and negotiated for encryption may overlap with existing data flows, causing IPsec service faults. After these faults occur, queried tunnel status information is normal and packets will still be forwarded without being dropped. Fault location becomes difficult and time-consuming.</p>
<div class="p">To solve this problem, configure detection of overlapping IPsec flows so that the device can detect whether the data flows generated through a new tunnel for encryption overlap with existing ones after IKE negotiation.<ul><li>If not, the new tunnel is successfully established.</li><li>If so, the new tunnel cannot be established. This prevents IPsec service faults caused by overlapping of data flows to be encrypted.</li></ul>
</div>
<p>This function applies only to new IPsec tunnels and detects overlapping data flows between new IPsec tunnels and existing IPsec tunnels that are established in the same VPN instance as new IPsec tunnels. This function supports the detection of the source IP address/address group, destination IP address/address group, source port range, destination port range, protocol, and DSCP fields. Overlapping flow detection cannot be performed on existing or renegotiated IPsec tunnels or delivered ACL configurations.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001194891011__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=ipsec+flow-overlap+check+enable"><b><span class="cmdname">ipsec flow-overlap check enable</span></b></a> command to enable detection of overlapping IPsec flows.</span><p><p>If overlapping flows are detected<span style="color:#666666;">, re-plan</span> and deliver more refined ACL configurations to prevent IPsec service faults caused by overlapping flows.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_0001.html">IPsec Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0024.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0027.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>