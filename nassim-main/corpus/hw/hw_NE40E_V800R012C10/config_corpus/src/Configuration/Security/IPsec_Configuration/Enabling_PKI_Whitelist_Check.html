
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling PKI Whitelist Check">
<meta name="abstract" content="In LTE scenarios, a security gateway and base stations use certificates to negotiate IPsec tunnels. The PKI whitelist on the security gateway can be used to uniformly manage certificates of base stations.">
<meta name="description" content="In LTE scenarios, a security gateway and base stations use certificates to negotiate IPsec tunnels. The PKI whitelist on the security gateway can be used to uniformly manage certificates of base stations.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0026.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0138.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,z00603461,ipsec,w00556928,w00606909,h00522387,l00455378,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="z00485179">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372445">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Enabling PKI Whitelist Check</title>
</head>
<body><a name="EN-US_TASK_0172372445"></a><a name="EN-US_TASK_0172372445"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling PKI Whitelist Check</h1>
<div class="taskbody"><p>In LTE scenarios, a security gateway and base stations use certificates to negotiate IPsec tunnels. The PKI whitelist on the security gateway can be used to uniformly manage certificates of base stations.</p>
<div class="context"><a name="EN-US_TASK_0172372445__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If PKI whitelist check is enabled on the security gateway using the <a href="cmdqueryname=pki+whitelist+enable"><b><span class="cmdname">pki whitelist enable</span></b></a> command, the common names in the certificate subjects of base stations must be imported to the security gateway's PKI whitelist using the <a href="cmdqueryname=pki+import+whitelist+file-name"><b><span class="cmdname">pki import whitelist file-name</span></b></a> <i><span class="varname">filename</span></i> command for certificate verification of the base stations.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372445__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Enable PKI whitelist check globally or for an IKE peer.</span><p><ul><li><p>Enable global PKI whitelist check.</p>
<p>Run <span><a href="cmdqueryname=pki+whitelist+enable"><b><span class="cmdname">pki whitelist enable</span></b></a></span></p>
<p>Global PKI whitelist check is enabled.</p>
</li><li><p>Enable PKI whitelist check for an IKE peer.</p>
<ol type="a"><li><p>Run <span><a href="cmdqueryname=ike+peer"><b><span class="cmdname">ike peer</span></b></a> <i><span class="varname">peer-name</span></i></span></p>
<p>The IKE peer view is displayed.</p>
</li><li><p>Run <span><a href="cmdqueryname=pki+whitelist+enable"><b><span class="cmdname">pki whitelist enable</span></b></a></span></p>
<p>The PKI whitelist check function is enabled for an IKE peer.</p>
<p>After PKI whitelist check is enabled for an IKE peer using the <a href="cmdqueryname=pki+whitelist+enable"><b><span class="cmdname">pki whitelist enable</span></b></a> command and the IKE peer receives certificate authentication packets from a remote device, the IKE peer checks whether the common names in the remote certificate subjects match the PKI whitelist. If not, the authentication fails.</p>
</li></ol>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the <a href="cmdqueryname=pki+whitelist+enable"><b><span class="cmdname">pki whitelist enable</span></b></a> or <a href="cmdqueryname=pki+whitelist+disable"><b><span class="cmdname">pki whitelist disable</span></b></a> command has been run in the IKE peer view, the configuration in the IKE peer view takes effect, regardless of whether global PKI whitelist check is enabled.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=pki+import+whitelist+file-name"><b><span class="cmdname">pki import whitelist file-name</span></b></a> <i><span class="varname">filename</span></i></span></span><p><p>The PKI whitelist in an XML file is imported to a device.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=pki+whitelist+filter+enable"><b><span class="cmdname">pki whitelist filter enable</span></b></a></span></span><p><p>The suffix filtering function is enabled to filter suffixes of whitelists imported to the device and common name suffixes of the certificates received from the peer end during whitelist-based IPsec certificate negotiation.</p>
<p>In whitelist based IPsec certificate authentication scenarios, when the names of whitelists imported into a device or common names of the certificates received from the peer end are redundant, run the <a href="cmdqueryname=pki+whitelist+filter+enable"><b><span class="cmdname">pki whitelist filter enable</span></b></a> command to simplify the imported whitelists. For example, after the common name of a base station certificate on the live network is imported into a whitelist, a record carrying different suffixes may be generated, causing one base station in the whitelist to consume multiple whitelist resources. To resolve this problem, run the <a href="cmdqueryname=pki+whitelist+filter+enable"><b><span class="cmdname">pki whitelist filter enable</span></b></a> command.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=pki+whitelist+capacity+warning-threshold"><b><span class="cmdname">pki whitelist capacity warning-threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span></span><p><p>An alarm threshold is configured for the number of imported whitelists.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=pki+whitelist+add+delete+common-name+filename"><b><span class="cmdname">pki whitelist</span></b></a> { <strong><span>add</span></strong> | <strong><span>delete</span></strong> } <strong><span>common-name</span></strong> <i><span class="varname">common-name</span></i> <strong><span>filename</span></strong> <i><span class="varname">file-name</span></i></span></span><p><p>The IPsec PKI whitelist data is dynamically modified.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=pki+whitelist+update+filename+all"><b><span class="cmdname">pki whitelist update</span></b></a> { <strong><span>filename</span></strong> <i><span class="varname">filename</span></i> | <strong><span>all</span></strong> }</span></span><p><p>The modified IPsec PKI whitelist data is updated.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172372445__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><p>To check the PKI whitelists on a device, run the <a href="cmdqueryname=display+pki+whitelist"><b><span class="cmdname">display pki whitelist</span></b></a> command. The command output helps fault locating and analyzing.</p>
<p>To check the whitelist data dynamically modified by users through the command, run the <a href="cmdqueryname=display+pki+whitelist+update+filename+all"><b><span class="cmdname">display pki whitelist update</span></b></a> { <strong><span>filename</span></strong> <i><span class="varname">file-name</span></i> | <strong><span>all</span></strong> } command.</p>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_0001.html">IPsec Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0026.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0138.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>