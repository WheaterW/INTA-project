
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Defining Data Flows to Be Protected">
<meta name="abstract" content="IPsec can protect various data flows. In practice, you need to define data flows through an advanced ACL and apply the ACL in a security policy. Therefore, data flows are protected.">
<meta name="description" content="IPsec can protect various data flows. In practice, you need to define data flows through an advanced ACL and apply the ACL in a security policy. Therefore, data flows are protected.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0008.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0010_copy2.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,z00603461,ipsec,w00556928,w00606909,h00522387,l00455378,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="z00485179">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372426">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Defining Data Flows to Be Protected</title>
</head>
<body><a name="EN-US_TASK_0172372426"></a><a name="EN-US_TASK_0172372426"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Defining Data Flows to Be Protected</h1>
<div class="taskbody"><p>IPsec can protect various data flows. In practice, you need to define data flows through an advanced ACL and apply the ACL in a security policy. Therefore, data flows are protected.</p>
<div class="context"><a name="EN-US_TASK_0172372426__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Data flows to be protected are defined through advanced ACLs. For data flows that require different security levels, different advanced ACLs must be created.</p>
<p>According to ACL rules, IPsec identifies which packets need or do not need security protection. Data flows matching advanced ACLs (permit) are processed by IPsec for protection before being sent. Data flows that do not match advanced ACLs are forwarded directly. In addition, if data flows should have been encrypted but actually not, they are considered as attack data flows and discarded.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372426__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=acl+name+advance+advance+number+number+match-order+config+auto"><b><span class="cmdname">acl</span></b></a> { <strong><span>name</span></strong> <i><span class="varname">advance-acl-name</span></i> { <strong><span>advance</span></strong> | [ <strong><span>advance</span></strong> ] <strong><span>number</span></strong> <i><span class="varname">advance-acl-number</span></i> } | [ <strong><span>number</span></strong> ] <i><span class="varname">advance-acl-number</span></i> } [ <strong><span>match-order</span></strong> { <strong><span>config</span></strong> | <strong><span>auto</span></strong> } ]</span><p><p>The advanced ACL view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a></span></span><p><p>Configure a rule for the advanced ACL.</p>
<div class="p">Pay attention to the following items:<ul><li><p>It is recommended that you configure symmetrical ACL rules at two ends. Symmetrical ACL rules at two ends are not essential but are easier and not prone to errors in actual applications.</p>
</li><li>An IPsec policy can only apply a single ACL. The original configuration must be deleted before a new ACL is applied in the IPsec policy.</li><li>An ACL cannot include rules containing the deny keyword. The deny action is the same as the permit action. To discard some addresses, use the traffic filtering function. For details, see Applying an ACL to a Filter Policy.</li><li>ACLs configured in the same security policy group cannot include the same rules.</li><li>Rules in an ACL can match data flows according to the source or destination IP address, source or destination port, and protocol number only.</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When multiple initiators negotiate with the same responder, the ACL rules of each initiator cannot overlap those of any other initiator. If rules overlap, some overlapping traffic cannot be properly encrypted, causing services to be compromised.</p>
<p>During IKEv2 negotiation, intersection ACL rules take effect. If multiple rules are defined in an ACL, the rule that is defined first is used preferentially.</p>
</div></div>
</div>
<p>IPsec processes the data stream to be protected as follows:</p>
<ul><li><p>If packets match the ACL rule with the permit action, the packets are encrypted and sent to the peer end through tunnels.</p>
</li><li><p>If packets match no ACL rule, the packets are forwarded directly.</p>
</li><li><p>If a nonexistent ACL or an ACL in which no rule is defined applies to a security policy, packets are dropped.</p>
</li><li><p>To configure the source and destination port numbers in the ACL of the protected data flow, you must use the <strong>eq</strong> parameter, rather than the <strong>lt</strong>, <strong>gt</strong>, <strong>range</strong>, or <strong>neq</strong> parameter.</p>
</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0007.html">Configuring Automatic IPsec SA Negotiation (IKE)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0008.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0010_copy2.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>