
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an Interface as a Trusted Interface">
<meta name="abstract" content="After Dynamic Host Configuration Protocol (DHCP) snooping is enabled, trusted interfaces must be configured so that clients can go online through trusted interfaces.">
<meta name="description" content="After Dynamic Host Configuration Protocol (DHCP) snooping is enabled, trusted interfaces must be configured so that clients can go online through trusted interfaces.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp-snooping_cfg_0004_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp-snooping_cfg_0005_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp-snooping_cfg_0007_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00800033,w00556928,dhcpsnp,w00606909,l00455378,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DHCP Snooping">
<meta name="featuretype" content="Security">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DHCP Snooping">
<meta name="featuretype" content="Security">
<meta name="featurename" content="DHCP Snooping">
<meta name="featuretype" content="Security">
<meta name="featurename" content="DHCP Snooping">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="y00852169">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="y00852169">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372000">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an Interface as a Trusted Interface</title>
</head>
<body><a name="EN-US_TASK_0172372000"></a><a name="EN-US_TASK_0172372000"></a>

<div class="articleBoxWithoutHead">






<h1 class="topicTitle-h1">Configuring an Interface as a Trusted Interface</h1>
<div class="taskbody"><p>After Dynamic Host Configuration Protocol (DHCP) snooping is enabled, trusted interfaces must be configured so that clients can go online through trusted interfaces.</p>
<div class="context"><a name="EN-US_TASK_0172372000__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0172372000__en-us_task_0172371924_context218982540214100"><div class="p" id="EN-US_TASK_0172372000__en-us_task_0172371924_p1800062469214100">After DHCP snooping is enabled on a device, you can configure interfaces of the device as trusted or untrusted.<ul id="EN-US_TASK_0172372000__en-us_task_0172371924_ul1485600736214100"><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li1883987066214100">After receiving DHCP reply packets from a trusted interface, the device forwards the packets so that DHCP clients can obtain correct IP addresses.</li><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li34800680214100">After receiving DHCP reply packets from an untrusted interface, the device discards the packets to prevent DHCP clients from obtaining incorrect IP addresses.</li></ul>
</div>
<p id="EN-US_TASK_0172372000__en-us_task_0172371924_p51553027214100">Generally, the interfaces connected to legitimate DHCP servers are configured as trusted and all other interfaces are configured as untrusted.</p>
<div class="note" id="EN-US_TASK_0172372000__en-us_task_0172371924_note308518086214100"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p274118401585">After DHCP snooping is enabled, trusted interfaces must be configured and server-side interfaces and user-side interfaces must be in the same virtual local area network (VLAN). DHCP clients cannot go online if server-side interfaces and user-side interfaces are in different VLANs.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372000__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0172372000__en-us_task_0172371924_context1664353449214100"><h4 class="sectiontitle">Procedure</h4><ul id="EN-US_TASK_0172372000__en-us_task_0172371924_ul167632149214100"><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li217208687214100"><span id="EN-US_TASK_0172372000__en-us_task_0172371924_ph196973820419">Configure an interface as a trusted interface in a VLAN to prevent Layer 2 devices from bogus DHCP server attacks.</span><ol id="EN-US_TASK_0172372000__en-us_task_0172371924_ol246777126214100"><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li683688875214100">Run <span id="EN-US_TASK_0172372000__en-us_task_0172371924_ph17753154219416"><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname77531042242">system-view</span></b></a></span><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p169861346042">The system view is displayed.</p>
</li><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li1656928527214100">Run <span id="EN-US_TASK_0172372000__en-us_task_0172371924_ph1762415314412"><a href="cmdqueryname=vlan"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname962417539416">vlan</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372000__en-us_task_0172371924_varname36241353743">vlan-id</span></i></span><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p167782057040">The VLAN view is displayed.</p>
</li><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li256091750214100"><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p3283459201112"><a name="EN-US_TASK_0172372000__en-us_task_0172371924_li256091750214100"></a><a name="en-us_task_0172371924_li256091750214100"></a>Run <a href="cmdqueryname=dhcp+snooping+trusted"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname600786710214100">dhcp snooping trusted</span></b></a> [ <strong><span id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdparmname1245634985214100">interface</span></strong> <i><span class="varname" id="EN-US_TASK_0172372000__en-us_task_0172371924_varname382961577214100">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172372000__en-us_task_0172371924_varname1669460286214100">interface-number</span></i> ]</p>
<p id="EN-US_TASK_0172372000__en-us_task_0172371924_p136673400111">An interface is configured as a trusted interface in the VLAN.</p>
<div class="note" id="EN-US_TASK_0172372000__en-us_task_0172371924_note1162969612214100"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p1781597537214100">Before you configure an interface as a trusted interface in the VLAN view, make sure that the interface is in the VLAN.</p>
</div></div>
</li><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li2076106941214100">Run <span id="EN-US_TASK_0172372000__en-us_task_0172371924_ph182851549873"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname102851349079">commit</span></b></a></span><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p12161537715">The configuration is committed.</p>
</li></ol>
</li><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li1927855521214100"><span id="EN-US_TASK_0172372000__en-us_task_0172371924_ph2949417288">Configure an interface as a trusted interface in the interface view to prevent Layer 3 devices from bogus DHCP server attacks.</span><ol id="EN-US_TASK_0172372000__en-us_task_0172371924_ol113748310214100"><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li219952143214100">Run <span id="EN-US_TASK_0172372000__en-us_task_0172371924_ph1269354393"><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname15693154596">system-view</span></b></a></span><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p48381010912">The system view is displayed.</p>
</li><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li563499222214100">Run <span id="EN-US_TASK_0172372000__en-us_task_0172371924_ph5375191914910"><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname12375919691">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372000__en-us_task_0172371924_varname43753191599">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172372000__en-us_task_0172371924_varname1937501919913">interface-number</span></i></span><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p10371957143912">The interface view is displayed.</p>
</li><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li1190468143214100"><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p100121864018"><a name="EN-US_TASK_0172372000__en-us_task_0172371924_li1190468143214100"></a><a name="en-us_task_0172371924_li1190468143214100"></a>Run <span><a href="cmdqueryname=dhcp+snooping+trusted"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname108367330914">dhcp snooping trusted</span></b></a></span></p>
<p id="EN-US_TASK_0172372000__en-us_task_0172371924_p1416514820402">The interface is configured as a trusted interface.</p>
<div class="p" id="EN-US_TASK_0172372000__en-us_task_0172371924_p2020336951214100">The <a href="cmdqueryname=dhcp+snooping+trusted"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname104536482914">dhcp snooping trusted</span></b></a> command can be configured on the NNI in a VSI scenario. If multiple VSIs share the same NNI, the <a href="cmdqueryname=dhcp+snooping+trusted"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname2083875814919">dhcp snooping trusted</span></b></a> command takes effect on all VSIs, which may provoke the following problems:<ul id="EN-US_TASK_0172372000__en-us_task_0172371924_ul470766594214100"><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li1087597294214100">VSIs cannot be identified when the NNI sends DHCP reply messages to the host. As a result, DHCP snooping does not take effect, but users can go online.</li><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li1613439421214100">The NNI sends DHCP reply messages to the host even when DHCP snooping is not enabled on some of the VSIs, which increases device load.</li></ul>
To prevent the preceding problems, do not run the <a href="cmdqueryname=dhcp+snooping+trusted"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname1663594418103">dhcp snooping trusted</span></b></a> command on the NNI, and run the <a href="cmdqueryname=dhcp+snooping+nni+server+enable"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname9635184471018">dhcp snooping nni server enable</span></b></a> command in the VSI view instead.</div>
</li><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li1841544497214100">Run <span id="EN-US_TASK_0172372000__en-us_task_0172371924_ph479149111011"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname97984991014">commit</span></b></a></span><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p20595354131019">The configuration is committed.</p>
</li></ol>
</li><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li221757530214100">Configure interfaces as trusted interfaces in the BD view.<ol id="EN-US_TASK_0172372000__en-us_task_0172371924_ol626705214100"><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li836484100214100">Run <span id="EN-US_TASK_0172372000__en-us_task_0172371924_ph1348517121113"><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname134856711116">system-view</span></b></a></span><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p202011411171111">The system view is displayed.</p>
</li><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li1959331781214100">Run <span id="EN-US_TASK_0172372000__en-us_task_0172371924_ph146091561110"><a href="cmdqueryname=bridge-domain"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname5460121531111">bridge-domain</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372000__en-us_task_0172371924_varname846010154112">bd-id</span></i></span><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p1316619212112">The BD view is displayed.</p>
</li><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li1449010571214100">Run <span id="EN-US_TASK_0172372000__en-us_task_0172371924_ph56018282111"><a href="cmdqueryname=dhcp+snooping+trusted"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname186011328101117">dhcp snooping trusted</span></b></a></span><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p761523315111">Interfaces in the BD are configured as trusted interfaces.</p>
</li><li id="EN-US_TASK_0172372000__en-us_task_0172371924_li1303440087214100">Run <span id="EN-US_TASK_0172372000__en-us_task_0172371924_ph197401937201117"><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372000__en-us_task_0172371924_cmdname18740173721118">commit</span></b></a></span><p id="EN-US_TASK_0172372000__en-us_task_0172371924_p18320194116119">The configuration is committed.</p>
</li></ol>
</li></ul>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp-snooping_cfg_0004_1.html">Configuring Defense Against Bogus DHCP ServerAttacks
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp-snooping_cfg_0005_1.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp-snooping_cfg_0007_1.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>