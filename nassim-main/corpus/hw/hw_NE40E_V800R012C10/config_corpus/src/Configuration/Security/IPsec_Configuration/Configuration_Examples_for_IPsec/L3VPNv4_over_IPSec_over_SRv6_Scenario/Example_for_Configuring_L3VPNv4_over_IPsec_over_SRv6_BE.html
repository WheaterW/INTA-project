
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring L3VPNv4 over IPsec over SRv6 BE">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0089.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0091.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,z00603461,w00606909,h00522387,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="z00485179">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0299032285">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/thickbox.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/imageResize.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-migrate-1.2.1.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-ui.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.mousewheel.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/thickbox.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring L3VPNv4 over IPsec over SRv6 BE</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0299032285"></a><a name="EN-US_TASK_0299032285"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring L3VPNv4 over IPsec over SRv6 BE</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0299032285__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0299032285__fig16153458123818">Figure 1</a>:</p>
<ul><li><p>PE1, the P, and PE2 belong to the same AS and run IS-IS to implement IPv6 network connectivity.</p>
</li><li><p>PE1, the P, and PE2 are Level-1 devices and belong to IS-IS process 1.</p>
</li></ul>
<p>It is required that a bidirectional SRv6 BE path be established between PE1 and PE2 to carry L3VPNv4 services. In addition, an IPsec tunnel needs to be established between PE1 and PE2. Then CE1 and CE2 can communicate with each other across the SRv6 network.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interface 1 and interface 2 in this example represent GE <span>0/1/1</span> and GE <span>0/1/2</span>, respectively.</p>
</div></div>
<div class="fignone" id="EN-US_TASK_0299032285__fig16153458123818"><a name="EN-US_TASK_0299032285__fig16153458123818"></a><a name="fig16153458123818"></a><span class="figcap"><b>Figure 1 </b>L3VPNv4 over IPsec over SRv6 BE networking</span><br><span><img class="imgResize" src="figure/en-us_image_0300603707.png" width="NaN" height="NaN" title="Click to enlarge"></span></div>
<h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Enable IPv6 forwarding and configure an IPv6 address for each involved interface on PE1, the P, and PE2.</p>
</li><li><p>Enable IS-IS, configure an IS-IS level, and specify a NET on PE1, the P, and PE2.</p>
</li><li><p>Configure a VPN instance on PE1 and PE2.</p>
</li><li><p>Establish an EBGP peer relationship between each PE and its connected CE.</p>
</li><li><p>Establish an MP-IBGP peer relationship between the PEs.</p>
</li><li><p>Configure an SRv6 SID and IS-IS SRv6, and enable VPN routes to carry the SID attribute on PE1 and PE2.</p>
</li><li>Define data flows to be protected on PE1 and PE2.</li><li>Configure an IKE proposal on PE1 and PE2.</li><li>Create a tunnel interface on PE1 and PE2.</li><li>Configure an IKE peer on PE1 and PE2. Specify SHA2-256 and key pre-share as the authentication algorithm and authentication method, respectively. In addition, set the DH group identifier used for key negotiation to group14.</li><li>Configure an IPsec proposal on PE1 and PE2. Configure ESP as the security protocol, SHA2-256 as the authentication algorithm, and AES-256 as the encryption algorithm.</li><li>Configure an IPsec policy on PE1 and PE2.</li><li>Configure an IPsec service instance group on PE1 and PE2.</li><li>Apply the IPsec policy to the tunnel interface on PE1 and PE2.</li><li>Configure a static route on PE1 and PE2 to steer the data flows to be protected to the IPsec tunnel.</li></ol>
<h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>IPv6 addresses of interfaces on PE1, the P, and PE2</p>
</li><li><p>IS-IS process ID of PE1, the P, and PE2</p>
</li><li><p>IS-IS level of PE1, the P, and PE2</p>
</li><li><p>VPN instance name, RD, and RTs on PE1 and PE2</p>
</li><li>IKE proposal number, authentication algorithm, encryption algorithm, Diffie-Hellman group identifier, and integrity algorithm on PE1 and PE2</li><li>IKE peer name and pre-shared key on PE1 and PE2</li><li>IPsec proposal name, ESP authentication algorithm, and ESP encryption algorithm on PE1 and PE2</li><li>Name of the IPsec policy on PE1 and PE2</li><li>Name of the IPsec service instance group on PE1 and PE2</li></ul>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0299032285__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure PE1 and PE2.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="11.98%" id="mcps1.3.2.1.2.1.1.4.1.1" liSelected="liSelected"><p>Step</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="43.71%" id="mcps1.3.2.1.2.1.1.4.1.2" liSelected="liSelected"><p>PE1</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="44.31%" id="mcps1.3.2.1.2.1.1.4.1.3" liSelected="liSelected"><p>PE2</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Enable the IPv6 forwarding capability on each involved interface and configure IPv6 addresses for the interfaces.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">sysname PE1
#
interface gigabitethernet <span>0/1/1</span>
 ipv6 enable
 ipv6 address 2001:DB8:10::1 96
#
interface LoopBack 1
 ipv6 enable
 ipv6 address 2001:DB8:1::1 64</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">sysname PE2
#
interface gigabitethernet <span>0/1/1</span>
 ipv6 enable
 ipv6 address 2001:DB8:20::2 96
#
interface LoopBack 1
 ipv6 enable
 ipv6 address 2001:DB8:3::3 64</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Configure IS-IS.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0001.00
 ipv6 enable topology ipv6
#
interface gigabitethernet <span>0/1/1</span>
 isis ipv6 enable 1
#
interface LoopBack 1
 isis ipv6 enable 1</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0003.00
 ipv6 enable topology ipv6
#
interface gigabitethernet <span>0/1/1</span>
 isis ipv6 enable 1
#
interface LoopBack 1
 isis ipv6 enable 1</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Configure a VPN instance and enable the IPv4 address family for it.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">ip vpn-instance vpna
 ipv4-family
  route-distinguisher 100:1
  vpn-target 111:1 both
#
interface gigabitethernet <span>0/1/2</span>
 ip binding vpn-instance vpna
 ip address 10.1.1.1 24</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">ip vpn-instance vpna
 ipv4-family
  route-distinguisher 200:1
  vpn-target 111:1 both
#
interface gigabitethernet <span>0/1/2</span>
 ip binding vpn-instance vpna
 ip address 10.2.1.1 24</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Establish an EBGP peer relationship between each PE and its connected CE.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">bgp 100
 router-id 1.1.1.1
 ipv4-family vpn-instance vpna
  peer 10.1.1.2 as-number 65410
  import-route direct</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">bgp 100
 router-id 3.3.3.3
 ipv4-family vpn-instance vpna
  peer 10.2.1.2 as-number 65420
  import-route direct</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Establish an MP-IBGP peer relationship between the PEs.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">bgp 100
 peer 2001:DB8:3::3 as-number 100
 peer 2001:DB8:3::3 connect-interface loopback 1
 ipv4-family vpnv4
  peer 2001:DB8:3::3 enable</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">bgp 100
 peer 2001:DB8:1::1 as-number 100
 peer 2001:DB8:1::1 connect-interface loopback 1
 ipv4-family vpnv4
  peer 2001:DB8:1::1 enable</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Configure an SRv6 SID and IS-IS SRv6, and enable VPN routes to carry the SID attribute.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">segment-routing ipv6
 encapsulation source-address 2001:DB8:1::1
 locator as1 ipv6-prefix 2001:DB8:100:: 64 static 32
#
bgp 100
 ipv4-family vpnv4
  peer 2001:DB8:3::3 prefix-sid
 ipv4-family vpn-instance vpna
  segment-routing ipv6 best-effort
  segment-routing ipv6 locator as1
#
isis 1
 segment-routing ipv6 locator as1</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">segment-routing ipv6
 encapsulation source-address 2001:DB8:3::3
 locator as1 ipv6-prefix 2001:DB8:300:: 64 static 32
#
bgp 100
 ipv4-family vpnv4
  peer 2001:DB8:1::1 prefix-sid
 ipv4-family vpn-instance vpna
  segment-routing ipv6 best-effort
  segment-routing ipv6 locator as1
#
isis 1
 segment-routing ipv6 locator as1</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Define the data flows to be protected.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">acl number 3000
 rule 5 permit ip source 10.88.0.0 0.0.0.255 destination 10.99.0.0 0.0.0.255</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">acl number 3000
 rule 5 permit ip source 10.99.0.0 0.0.0.255 destination 10.88.0.0 0.0.0.255</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Configure an IKE proposal numbered 100.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">ike proposal 100
 encryption-algorithm aes-cbc 256
 dh group14
 authentication-algorithm sha2-256
 integrity-algorithm hmac-sha2-256</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">ike proposal 100
 encryption-algorithm aes-cbc 256
 dh group14
 authentication-algorithm sha2-256
 integrity-algorithm hmac-sha2-256</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Create a tunnel interface.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">interface Tunnel1
 ip binding vpn-instance vpna
 ip address 172.16.1.1 255.255.255.255</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">interface Tunnel1
 ip binding vpn-instance vpna
 ip address 172.16.1.2 255.255.255.255</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Configure an IKE peer named <strong>srv6</strong>.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">ike peer srv6
 pre-shared-key cipher %^%#Rd&amp;]3,a-N6+k[S;6B)"Hl0zgU%^%#
 ike-proposal 100
 remote-address vpn-instance vpna 172.16.1.2</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">ike peer srv6
 pre-shared-key cipher %^%#M3{(W:`{'L&amp;6_cTideDGSJI+0%^%#
 ike-proposal 100
 remote-address vpn-instance vpna 172.16.1.1</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Configure an IPsec proposal named <strong>srv6</strong>.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">ipsec proposal srv6
 transform esp
 esp authentication-algorithm sha2-256
 esp encryption-algorithm aes 256
 encapsulation-mode tunnel</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">ipsec proposal srv6
 transform esp
 esp authentication-algorithm sha2-256
 esp encryption-algorithm aes 256
 encapsulation-mode tunnel</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Configure an IPsec policy named <strong>srv6</strong>.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">ipsec policy srv6 1 isakmp
 security acl 3000
 ike-peer srv6
 proposal srv6</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">ipsec policy srv6 1 isakmp
 security acl 3000
 ike-peer srv6
 proposal srv6</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Configure an IPsec service instance group.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">service-location 1
location slot <span>1</span>
#
service-instance-group 1
 service-location 1</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">service-location 1
 location slot <span>1</span>
#
service-instance-group 1
 service-location 1</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Apply the IPsec policy <strong>srv6</strong> to the tunnel interface.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">interface Tunnel1
 tunnel-protocol ipsec
 ipsec policy srv6 service-instance-group 1</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">interface Tunnel1
 tunnel-protocol ipsec
 ipsec policy srv6 service-instance-group 1</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.1.2.1.1.4.1.1 "><p>Configure a static route to steer the data flows to be protected to the IPsec tunnel.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.1.2.1.1.4.1.2 "><pre class="screen">ip route-static 10.99.0.0 255.255.255.0 Tunnel1 172.16.1.2</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.1.2.1.1.4.1.3 "><pre class="screen">ip route-static 10.88.0.0 255.255.255.0 Tunnel1 172.16.1.1</pre>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Configure the P.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="21.51%" id="mcps1.3.2.2.2.1.1.3.1.1" liSelected="liSelected"><p>Step</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="78.49000000000001%" id="mcps1.3.2.2.2.1.1.3.1.2" liSelected="liSelected"><p>P</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="21.51%" headers="mcps1.3.2.2.2.1.1.3.1.1 "><p>Enable the IPv6 forwarding capability on each involved interface and configure IPv6 addresses for the interfaces.</p>
</td>
<td class="cellrowborder" valign="top" width="78.49000000000001%" headers="mcps1.3.2.2.2.1.1.3.1.2 "><pre class="screen">sysname P
#
interface gigabitethernet <span>0/1/1</span>
 ipv6 enable
 ipv6 address 2001:DB8:10::2 96
#
interface gigabitethernet <span>0/1/2</span>
 ipv6 enable
 ipv6 address 2001:DB8:20::1 96
#
interface LoopBack 1
 ipv6 enable
 ipv6 address 2001:DB8:2::2 64</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="21.51%" headers="mcps1.3.2.2.2.1.1.3.1.1 "><p>Configure IS-IS.</p>
</td>
<td class="cellrowborder" valign="top" width="78.49000000000001%" headers="mcps1.3.2.2.2.1.1.3.1.2 "><pre class="screen">isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0002.00
 ipv6 enable topology ipv6
#
interface gigabitethernet <span>0/1/1</span>
 isis ipv6 enable 1
#
interface gigabitethernet <span>0/1/2</span>
 isis ipv6 enable 1
#
interface LoopBack 1
 isis ipv6 enable 1</pre>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Configure CE1 and CE2.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="11.98%" id="mcps1.3.2.3.2.1.1.4.1.1" liSelected="liSelected"><p>Step</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="43.71%" id="mcps1.3.2.3.2.1.1.4.1.2" liSelected="liSelected"><p>CE1</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="44.31%" id="mcps1.3.2.3.2.1.1.4.1.3" liSelected="liSelected"><p>CE2</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.3.2.1.1.4.1.1 "><p>Configure IPv4 addresses.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.3.2.1.1.4.1.2 "><pre class="screen">sysname CE1
#
interface gigabitethernet <span>0/1/1</span>
 ip address 10.1.1.2 255.255.255.0
#
interface gigabitethernet <span>0/1/2</span>
 ip address 10.88.0.1 255.255.255.0</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.3.2.1.1.4.1.3 "><pre class="screen">sysname CE2
#
interface gigabitethernet <span>0/1/1</span>
 ip address 10.2.1.2 255.255.255.0
#
interface gigabitethernet <span>0/1/2</span>
 ip address 10.99.0.1 255.255.255.0</pre>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="11.98%" headers="mcps1.3.2.3.2.1.1.4.1.1 "><p>Establish an EBGP peer relationship between each PE and its connected CE.</p>
</td>
<td class="cellrowborder" valign="top" width="43.71%" headers="mcps1.3.2.3.2.1.1.4.1.2 "><pre class="screen">bgp 65410
 router-id 11.11.11.11
 peer 10.1.1.1 as-number 100
 network 10.88.0.0 255.255.255.0</pre>
</td>
<td class="cellrowborder" valign="top" width="44.31%" headers="mcps1.3.2.3.2.1.1.4.1.3 "><pre class="screen">bgp 65420
 router-id 22.22.22.22
 peer 10.2.1.1 as-number 100
 network 10.99.0.0 255.255.255.0</pre>
</td>
</tr>
</tbody>
</table>
</div>
</p></li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0089.html">L3VPNv4 over IPSec over SRv6 Scenario
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0091.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>

<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>