
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring OSPF GTSM">
<meta name="abstract" content="To apply OSPF GTSM, you need to enable GTSM on the two ends of the corresponding OSPF connection.">
<meta name="description" content="To apply OSPF GTSM, you need to enable GTSM on the two ends of the corresponding OSPF connection.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_gtsm_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/spec/GTSM_limitation.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_gtsm_cfg_0014.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00800033,w00556928,w00606909,gtsm,l00455378,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="GTSM">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="GTSM">
<meta name="featuretype" content="Security">
<meta name="featurename" content="GTSM">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="y00852169">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="y00852169">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372043">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring OSPF GTSM</title>
</head>
<body><a name="EN-US_TASK_0172372043"></a><a name="EN-US_TASK_0172372043"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring OSPF GTSM</h1>
<div class="taskbody"><p>To apply OSPF GTSM, you need to enable GTSM on the two ends of the corresponding OSPF connection.</p>
<div class="context"><a name="EN-US_TASK_0172372043__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>GTSM checks TTL values to defend against attacks. Attackers may simulate OSPF unicast packets and continuously send them to a <span class="keyword">Router</span>. Upon reception of the packets, an interface board on the <span class="keyword">Router</span> sends them directly to the control plane for OSPF processing, without validating them, if they are destined for the device. Consequently, the <span class="keyword">Router</span> becomes extremely busy, and CPU usage is high because the control plane needs to process these unverified packets.</p>
<p>GTSM protects the <span class="keyword">Router</span> by checking whether the TTL value in the IP header is within a predefined range, thereby improving system security.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372043__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring OSPF GTSM, complete the following task:</p>
<ul><li><p><a href="dc_vrp_ospf_cfg_0003.html">Configure basic OSPF functions</a>.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372043__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure basic OSPF GTSM functions.</span><p><p>To apply OSPF GTSM, you need to enable GTSM on the two ends of the corresponding OSPF connection.</p>
<p>Therefore, perform the following steps on the <span class="keyword">Router</span>s on the two ends of the virtual or sham link for which GTSM is to be enabled:</p>
</p><ol type="a"><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ospf+valid-ttl-hops"><b><span class="cmdname">ospf valid-ttl-hops</span></b></a> <i><span class="varname">ttl</span></i> <span>[ <strong><span>nonstandard-multicast</span></strong> ] </span>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] command to enable OSPF GTSM.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>The <a href="cmdqueryname=ospf+valid-ttl-hops"><b><span class="cmdname">ospf valid-ttl-hops</span></b></a> command enables OSPF GTSM and configures a TTL value. The <strong><span>vpn-instance</span></strong> parameter takes effect only for the latter function.</li><li><p>The valid TTL range of checked packets is [255 â <i><span class="varname">hops</span></i> + 1, 255].</p>
</li></ul>
</div></div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li id="EN-US_TASK_0172372043__step_5"><span id="EN-US_TASK_0172372043__cmd1775390284214100">Set a default action for the packets that do not match the specified GTSM policy.</span><p><p id="EN-US_TASK_0172372043__p2087805283214100">GTSM checks the TTL values of only the packets that match the specified GTSM policy. For packets that do not match the policy, you can set the default action taken on them as either pass or drop.</p>
<p id="EN-US_TASK_0172372043__p2146275131214100">To facilitate fault locating, you can enable the device to log information about dropped packets.</p>
<p id="EN-US_TASK_0172372043__p1027408518214100">Perform the following steps on a GTSM-enabled <span class="keyword" id="EN-US_TASK_0172372043__keyword2098453161214100">Router</span>:</p>
</p><ol type="a" id="EN-US_TASK_0172372043__substeps1779385481214100"><li class="substepexpand" id="EN-US_TASK_0172372043__en-us_task_0172372045_substep1445317723214100"><span id="EN-US_TASK_0172372043__en-us_task_0172372045_cmd_05">Run the <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372043__en-us_task_0172372045_cmdname1635538118214100">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand" id="EN-US_TASK_0172372043__en-us_task_0172372045_substep1259563513214100"><span id="EN-US_TASK_0172372043__en-us_task_0172372045_cmd_06">Run the <a href="cmdqueryname=gtsm+default-action"><b><span class="cmdname" id="EN-US_TASK_0172372043__en-us_task_0172372045_cmdname140602031214100">gtsm default-action</span></b></a> { <strong><span id="EN-US_TASK_0172372043__en-us_task_0172372045_cmdparmname2007963889214100">drop</span></strong> | <strong><span id="EN-US_TASK_0172372043__en-us_task_0172372045_cmdparmname652484850214100">pass</span></strong> } command to set a default action for the messages that do not match the GTSM policy.</span><p><div class="note" id="EN-US_TASK_0172372043__en-us_task_0172372045_note760244747214100"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172372043__en-us_task_0172372045_p2053246826214100">If the default action is configured but no GTSM policy is configured, GTSM does not take effect.</p>
<p id="EN-US_TASK_0172372043__en-us_task_0172372045_p8625412214100">This command is supported only on the Admin-VS and cannot be configured in other VSs. This command takes effect on all VSs.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372043__en-us_task_0172372045_substep458111747214100"><span id="EN-US_TASK_0172372043__en-us_task_0172372045_cmd_07">Run the <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372043__en-us_task_0172372045_cmdname415032453214100">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172372043__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After the configuration is complete, verify the configuration.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+gtsm+statistics"><b><span class="cmdname">display gtsm statistics</span></b></a> { <i><span class="varname">slot-id</span></i> | <strong><span>all</span></strong> } command to check GTSM statistics.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p><span>In VS mode, this command is supported only by the admin VS.</span></p>
</div></div>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_gtsm_cfg_0000.html">GTSM Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/spec/GTSM_limitation.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_gtsm_cfg_0014.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>