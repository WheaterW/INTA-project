
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Interface- and VLAN-based Traffic Suppression">
<meta name="abstract" content="This section provides an example for configuring interface- and VLAN-based traffic suppression in order to prevent interface- and VLAN-based MAC address attacks and control the number of access users. A networking diagram is provided to help you understand the configuration procedure. This example covers the networking requirements, configuration roadmap, configuration procedure, and configuration files.">
<meta name="description" content="This section provides an example for configuring interface- and VLAN-based traffic suppression in order to prevent interface- and VLAN-based MAC address attacks and control the number of access users. A networking diagram is provided to help you understand the configuration procedure. This example covers the networking requirements, configuration roadmap, configuration procedure, and configuration files.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_traff-supress_cfg_5009.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_traff-supress_cfg_5011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00800033,traff-supress_ne,w00556928,w00606909,l00455378,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Layer 2 Traffic Suppression">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Layer 2 Traffic Suppression">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Layer 2 Traffic Suppression">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Layer 2 Traffic Suppression">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="q00517581">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00606909">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372583">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Interface- and VLAN-based Traffic Suppression</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172372583"></a><a name="EN-US_TASK_0172372583"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Interface- and VLAN-based Traffic Suppression</h1>
<div class="taskbody"><p>This section provides an example for configuring interface- and VLAN-based traffic suppression in order to prevent interface- and VLAN-based MAC address attacks and control the number of access users. A networking diagram is provided to help you understand the configuration procedure. This example covers the networking requirements, configuration roadmap, configuration procedure, and configuration files.</p>
<div class="context"><a name="EN-US_TASK_0172372583__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In addition to user traffic management and bandwidth allocation, an Ethernet requires broadcast, multicast, and unknown unicast traffic to be suppressed to ensure the secure transmission of unicast traffic and properly utilize bandwidth resources. If these types of traffic are not suppressed, forwarding a large volume of such traffic consumes numerous bandwidth resources, reducing network performance and even causing a communication interruption.</p>
<p>On the network shown in <a href="#EN-US_TASK_0172372583__fig_dc_ne_traff-supress_cfg_501001">Figure 1</a>, interface1 and interface2 on the <span class="keyword">Router</span> are both added to VLAN 10 and connected to PCs. Unicast traffic on interface1 and multicast and broadcast traffic on interface2 need to be suppressed to improve security.</p>
<div class="fignone" id="EN-US_TASK_0172372583__fig_dc_ne_traff-supress_cfg_501001"><a name="EN-US_TASK_0172372583__fig_dc_ne_traff-supress_cfg_501001"></a><a name="fig_dc_ne_traff-supress_cfg_501001"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for configuring traffic suppression</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1 and interface2 represent GE<span>0/1/0</span> and GE<span>0/2/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_ne_traff-supress_cfg_501001.png" width="NaN" height="NaN"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372583__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Create a VLAN and add interfaces to it.</p>
</li><li><p>Configure traffic suppression.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372583__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>VLAN ID: 10</p>
</li><li><p>Interface numbers: GE<span>0/1/0</span> and GE<span>0/2/0</span></p>
</li><li><p>Committed information rate (CIR)</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372583__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Add interfaces to the specified VLAN.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-GigabitEthernet<span>0/1/0</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-GigabitEthernet<span>0/1/0</span>] <strong>portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>] <strong>interface GigabitEthernet<span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-GigabitEthernet<span>0/2/0</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-GigabitEthernet<span>0/2/0</span>] <strong>portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>] <strong>vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-vlan10] <strong>port GigabitEthernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-vlan10] <strong>port GigabitEthernet<span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-vlan10] <strong>commit</strong></pre>
</p></li><li><span>Enable traffic suppression for the VLAN.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-vlan10] <strong>suppression inbound enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-vlan10] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-vlan10] <strong>quit</strong></pre>
</p></li><li><span>Configure traffic suppression on the interfaces.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-GigabitEthernet<span>0/1/0</span>] <strong>broadcast-suppression cir 38400 cbs 7200000 inbound vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-GigabitEthernet<span>0/1/0</span>] <strong>multicast-suppression cir 38400 cbs 7200000 inbound vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-GigabitEthernet<span>0/1/0</span>] <strong>unknown-unicast-suppression cir 38400 cbs 7200000 inbound vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>] <strong>interface gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-GigabitEthernet<span>0/2/0</span>] <strong>broadcast-suppression cir 38400 cbs 7200000 inbound vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-GigabitEthernet<span>0/2/0</span>] <strong>multicast-suppression cir 38400 cbs 7200000 inbound vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-GigabitEthernet<span>0/2/0</span>] <strong>unknown-unicast-suppression cir 38400 cbs 7200000 inbound vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>Run the <strong>display this</strong> command in the interface view to check the configuration.</p>
<p>For example, check the configuration of GE<span>0/1/0</span>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>-GigabitEthernet<span>0/1/0</span>] <strong>display this</strong></pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> port default vlan 10</pre>
<pre class="screen"> broadcast-suppression cir 38400 cbs 7200000 inbound vlan 10</pre>
<pre class="screen"> multicast-suppression cir 38400 cbs 7200000 inbound vlan 10</pre>
<pre class="screen"> unknown-unicast-suppression cir 38400 cbs 7200000 inbound vlan 10</pre>
<pre class="screen">#</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172372583__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span></pre>
<pre class="screen">#</pre>
<pre class="screen">vlan batch 10</pre>
<pre class="screen">#</pre>
<pre class="screen">vlan 10</pre>
<pre class="screen"> suppression inbound enable   </pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> broadcast-suppression cir 38400 cbs 7200000 inbound vlan 10</pre>
<pre class="screen"> multicast-suppression cir 38400 cbs 7200000 inbound vlan 10</pre>
<pre class="screen"> unknown-unicast-suppression cir 38400 cbs 7200000 inbound vlan 10</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> broadcast-suppression cir 38400 cbs 7200000 inbound vlan 10</pre>
<pre class="screen"> multicast-suppression cir 38400 cbs 7200000 inbound vlan 10</pre>
<pre class="screen"> unknown-unicast-suppression cir 38400 cbs 7200000 inbound vlan 10</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_traff-supress_cfg_5009.html">Configuration Examples for Layer 2 Traffic Suppression
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_traff-supress_cfg_5011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>