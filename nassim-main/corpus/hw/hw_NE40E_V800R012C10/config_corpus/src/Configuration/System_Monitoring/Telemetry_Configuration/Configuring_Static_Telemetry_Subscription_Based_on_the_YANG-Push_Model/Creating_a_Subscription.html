
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Creating a Subscription">
<meta name="abstract" content="When configuring a static telemetry subscription to the sampled data based on the YANG-Push model, you need to create a subscription to associate the configured receiver with the configured sampling filter so that data can be sent to the sampling filter.">
<meta name="description" content="When configuring a static telemetry subscription to the sampled data based on the YANG-Push model, you need to create a subscription to associate the configured receiver with the configured sampling filter so that data can be sent to the sampling filter.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_telemetry_cfg_00195.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_telemetry_cfg_00197.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_telemetry_cfg_00199.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Telemetry">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="c00511010">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00511010">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001596597345">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Creating a Subscription</title>
</head>
<body><a name="EN-US_TASK_0000001596597345"></a><a name="EN-US_TASK_0000001596597345"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Creating a Subscription</h1>
<div class="taskbody"><p>When configuring a static telemetry subscription to the sampled data based on the YANG-Push model, you need to create a subscription to associate the configured receiver with the configured sampling filter so that data can be sent to the sampling filter.</p>
<div class="context"><a name="EN-US_TASK_0000001596597345__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A device functions as a client, and a collector functions as a server. To statically subscribe to the sampled data through the YANG-Push model, you need to create a subscription to set up a data sending channel. Only UDP can be used as the protocol for data reporting.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001596597345__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=telemetry+ietf"><b><span class="cmdname">telemetry ietf</span></b></a></span><p><p>The telemetry IETF view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=subscription"><b><span class="cmdname">subscription</span></b></a> <i><span class="varname">subscription-id</span></i></span><p><p>A subscription is created to associate a receiver with a sampling filter, and the subscription view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=transport+udp-notif"><b><span class="cmdname">transport udp-notif</span></b></a></span><p><p>The transport protocol is set to UDP-NOTIF for the receiver associated with the subscription.</p>
</p></li><li><span>Run <a href="cmdqueryname=encoding+json"><b><span class="cmdname">encoding json</span></b></a></span><p><p>The encoding format is set to JSON_IETF for the data packets to be sent.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=distribute+enable"><b><span class="cmdname">distribute enable</span></b></a></span><p><p>The data reporting mode is set to distributed for the telemetry IETF subscription.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=collect-depth"><b><span class="cmdname">collect-depth</span></b></a> <i><span class="varname">depth</span></i></span><p><p>A sampling depth is configured for the subscription.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>When the data reporting mode is set to distributed, the default sampling depth is 1. The sampling depth can be configured in the range from 1 to 3. If the configured sampling depth differs from the maximum value supported by services, the smaller of the two values takes effect.</li><li>If the data reporting mode is not set to distributed, data of all nodes along the specified path is collected by default. The sampling depth can be configured in the range from 1 to 3.</li></ul>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=purpose"><b><span class="cmdname">purpose</span></b></a> <i><span class="varname">purpose-string</span></i></span><p><p>A description is configured for the subscription.</p>
</p><p></p></li><li><span>(Optional) Configure a source address for the packets to be sent using either of the following methods:</span><p><ul><li>Configure a source IP address and bound VPN instance for the packets to be sent.<ul><li>If the source IP address of the packets to be sent is an IPv4 address, run the <a href="cmdqueryname=local-source-address"><b><span class="cmdname">local-source-address</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <a href="cmdqueryname=vpn-instance"><b><span class="cmdname">vpn-instance</span></b></a> vpn-value} command.</li><li>If the source IP address of the packets to be sent is an IPv6 address, run the <a href="cmdqueryname=local-source-address"><b><span class="cmdname">local-source-address</span></b></a> { <strong><span>ipv6</span></strong> <i><span class="varname">ipv6-address</span></i> | <a href="cmdqueryname=vpn-instance"><b><span class="cmdname">vpn-instance</span></b></a> vpn-value} command.</li></ul>
</li><li>Run the <a href="cmdqueryname=local-source-interface"><b><span class="cmdname">local-source-interface</span></b></a> { <i><span class="varname">if-name</span></i> | <i><span class="varname">if-type</span></i> <i><span class="varname">if-number</span></i> } command to configure a source interface for the packets to be sent.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The configured source interface must have an IPv4 address.</p>
</div></div>
</li></ul>
</p></li><li><span>Run <a href="cmdqueryname=update-trigger"><b><span class="cmdname">update-trigger</span></b></a> { <strong><span>period</span></strong><em> </em><i><span class="varname">period-value</span></i> | <strong><span>on-change</span></strong> [ <strong><span>dampening-period</span></strong><em> </em><i><span class="varname">dampening-period-value</span></i> ]}</span><p><p>A sampling interval for periodic sampling and a suppression period for OnChange sampling are configured.</p>
</p></li><li><span>Run <a href="cmdqueryname=filter"><b><span class="cmdname">filter</span></b></a> <i><span class="varname">name</span></i> <a href="cmdqueryname=type"><b><span class="cmdname">type</span></b></a> <a href="cmdqueryname=datastore"><b><span class="cmdname">datastore</span></b></a></span><p><p>The subscription is associated with a sampling filter of the dataset type.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=dscp"><b><span class="cmdname">dscp</span></b></a> <i><span class="varname">dscp-value</span></i></span><p><p>A DSCP value is set for the data packets to be sent.</p>
</p></li><li><span>Run <a href="cmdqueryname=receiver"><b><span class="cmdname">receiver</span></b></a> <i><span class="varname">name</span></i></span><p><p>A receiver is created in the subscription, and the telemetry IETF receiver view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bind-receiver"><b><span class="cmdname">bind-receiver</span></b></a><strong> </strong><i><span class="varname">name</span></i></span><p><p>The subscription is associated with the receiver in the telemetry IETF view.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command can be run to associate the subscription with only one receiver.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_telemetry_cfg_00195.html">Configuring Static Telemetry Subscription Based on the YANG-Push Model
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_telemetry_cfg_00197.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_telemetry_cfg_00199.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>