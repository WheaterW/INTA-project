
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring NetStream Option Packets and Setting Option Template Refreshing Parameters">
<meta name="abstract" content="This section describes how to configure NetStream option packets and set option template refreshing parameters.">
<meta name="description" content="This section describes how to configure NetStream option packets and set option template refreshing parameters.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,netstream_vrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Netstream">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="l00799643">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00799643">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372950">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring NetStream Option Packets and Setting Option Template Refreshing Parameters</title>
</head>
<body><a name="EN-US_TASK_0172372950"></a><a name="EN-US_TASK_0172372950"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring NetStream Option Packets and Setting Option Template Refreshing Parameters</h1>
<div class="taskbody" id="taskbody1770603029214103"><p id="shortdesc51915113214103">This section describes how to configure NetStream option packets and set option template refreshing parameters.</p>
<div class="context"><a name="EN-US_TASK_0172372950__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0172372950__context245350939214103"><p id="EN-US_TASK_0172372950__p444629533214103">Regardless of the flow format in which traffic statistics are output, option packet data is output to the NetStream Collector (NSC) as supplementary information for traffic statistics. This allows the NSC to obtain information such as the sampling ratio and sampling enabling status of the NetStream Data Exporter (NDE), so that the actual network traffic can be reflected.</p>
<div class="p" id="EN-US_TASK_0172372950__p674200222214103">At present, the following four types of option packets are supported on IPv4 networks:<ul id="EN-US_TASK_0172372950__ul2077715443214103"><li id="EN-US_TASK_0172372950__li1638785136214103">Interface option packets: These packets are used to send the NetStream configurations of all the boards on the NDE to the NSC in a scheduled manner. The configurations cover the interface index, statistics collection direction, and sampling value in the inbound/outbound direction.</li><li id="EN-US_TASK_0172372950__li1494028738214103">Time application label (TAL) option packets: These packets are used to send application label data to the NSC. The application label option function provides data, such as the application type of system labels, for users to collect L3VPN NetStream statistics. For details, see <a href="dc_vrp_ns_cfg_0042.html">Collecting Statistics About BGP/MPLS VPN Flows</a>.</li><li id="EN-US_TASK_0172372950__li677515752612">VPN information option packets: These packets are used to periodically send VPN information (including the VPN name and index) on the NDE to the NSC.</li><li id="EN-US_TASK_0172372950__li11646827202115">Interface information option packets: These packets are used to periodically send interface information (including the interface name and index) on the NDE to the NSC.</li></ul>
</div>
<p id="EN-US_TASK_0172372950__p2029648819214103">Option packets, which are independent of statistics packets, are output to the NSC in the V9 or IPFIX format. As such, the corresponding option template is sent to the NMS for parsing option packets. You can set option template refreshing parameters as needed for the device to regularly refresh the template in order to notify the NSC of the latest option template format.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172372950__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul id="EN-US_TASK_0172372950__steps-unordered2018655077214103"><li id="EN-US_TASK_0172372950__step996122182818"><span id="EN-US_TASK_0172372950__cmd0961628288">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372950__cmdname1344167142815">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372950__p144961227852">The system view is displayed</p>
</p></li><li id="EN-US_TASK_0172372950__step16903181042819"><span id="EN-US_TASK_0172372950__cmd169031810152812">Run the following commands as required to configure functions related to interface option packets.</span><p><ul id="EN-US_TASK_0172372950__ul83090334290"><li id="EN-US_TASK_0172372950__li19309133302917">Run the <a href="cmdqueryname=ip+netstream+export+template+option+sampler"><b><span class="cmdname" id="EN-US_TASK_0172372950__cmdname13551122311373">ip netstream export template option sampler</span></b></a> command to enable the function of exporting statistics about interface option packets.</li><li id="EN-US_TASK_0172372950__li9531192633716">Run the <a href="cmdqueryname=ip+netstream+export+template+option"><b><span class="cmdname" id="EN-US_TASK_0172372950__cmdname212513348378">ip netstream export template option</span></b></a> { <strong><span id="EN-US_TASK_0172372950__cmdparmname3125193493715">refresh-rate</span></strong> <i><span class="varname" id="EN-US_TASK_0172372950__varname0125103473713">packet-number</span></i> | <strong><span id="EN-US_TASK_0172372950__cmdparmname1312518346372">timeout-rate</span></strong> <i><span class="varname" id="EN-US_TASK_0172372950__varname151254347375">timeout-interval</span></i> } command to set the packet sending interval and timeout interval for option template refreshing.<div class="p" id="EN-US_TASK_0172372950__p16333145912370">The packet sending interval and timeout interval are set for option template refreshing. An option template can be refreshed at a fixed packet sending interval or timeout interval. The two intervals can both take effect. In the command: <ul id="EN-US_TASK_0172372950__ul33666713384"><li id="EN-US_TASK_0172372950__li882981173818"><strong><span id="EN-US_TASK_0172372950__cmdparmname16265154693716">refresh-rate</span></strong> <i><span class="varname" id="EN-US_TASK_0172372950__varname17265246113719">packet-interval</span></i> indicates that the option template is refreshed at a fixed packet sending interval.</li><li id="EN-US_TASK_0172372950__li103670710381"><strong><span id="EN-US_TASK_0172372950__cmdparmname132652469378">timeout-rate</span></strong> <i><span class="varname" id="EN-US_TASK_0172372950__varname1326515460372">timeout-interval</span></i> indicates that the option template is refreshed at a fixed timeout interval.</li></ul>
</div>
</li><li id="EN-US_TASK_0172372950__li313918711411">Run the <a href="cmdqueryname=ip+netstream+export+option+sampler+timeout-rate"><b><span class="cmdname" id="EN-US_TASK_0172372950__cmdname135941838184114">ip netstream export option sampler timeout-rate</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372950__varname15974145064110">tmval</span></i> command to set the interval for refreshing option packets.</li></ul>
</p></li><li id="EN-US_TASK_0172372950__step99541138905"><span id="EN-US_TASK_0172372950__cmd1195483813014">Run the following commands as required to configure functions related to VPN information option packets.</span><ul id="EN-US_TASK_0172372950__choices11537753608"><li id="EN-US_TASK_0172372950__choice165376530015">Run the <a href="cmdqueryname=ip+netstream+export+template+option"><b><span class="cmdname" id="EN-US_TASK_0172372950__cmdname49041093508">ip netstream export template option</span></b></a> <strong><span id="EN-US_TASK_0172372950__cmdparmname159861115175013">vpn-information</span></strong> command to enable the function of sending VPN option template packets.</li><li id="EN-US_TASK_0172372950__choice38522045327">Run the <a href="cmdqueryname=ip+netstream+export+option"><b><span class="cmdname" id="EN-US_TASK_0172372950__cmdname3419132112319">ip netstream export option</span></b></a> <strong><span id="EN-US_TASK_0172372950__cmdparmname1920544319319">vpn-information</span></strong> { <strong><span id="EN-US_TASK_0172372950__cmdparmname14608155320314">all-vpn-instance</span></strong> | <strong><span id="EN-US_TASK_0172372950__cmdparmname1091359137">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172372950__varname4898679413">vpn-name</span></i> | <strong><span id="EN-US_TASK_0172372950__cmdparmname141271912348">timeout-rate</span></strong> <i><span class="varname" id="EN-US_TASK_0172372950__varname1353410201047">tmval</span></i> } command to enable the function of sending VPN instance information and set the interval for refreshing VPN option packets.</li></ul>
</li><li id="EN-US_TASK_0172372950__step1569240142719"><span id="EN-US_TASK_0172372950__cmd2056934002719">Run the following commands as required to configure functions related to interface information option packets.</span><ul id="EN-US_TASK_0172372950__choices58332720284"><li id="EN-US_TASK_0172372950__choice13833271287">Run the <a href="cmdqueryname=ip+netstream+export+template+option"><b><span class="cmdname" id="EN-US_TASK_0172372950__cmdname12634164419116">ip netstream export template option</span></b></a> <strong><span id="EN-US_TASK_0172372950__cmdparmname1845812111126">interface-information</span></strong> command to enable the function of sending interface option template packets.</li><li id="EN-US_TASK_0172372950__choice84345194294">Run the <a href="cmdqueryname=ip+netstream+export+option"><b><span class="cmdname" id="EN-US_TASK_0172372950__cmdname185031114141215">ip netstream export option</span></b></a> <strong><span id="EN-US_TASK_0172372950__cmdparmname835562241218">interface-information</span></strong> { <strong><span id="EN-US_TASK_0172372950__cmdparmname206497252125">all-interface</span></strong> | <strong><span id="EN-US_TASK_0172372950__cmdparmname13839192841215">interface</span></strong> <i><span class="varname" id="EN-US_TASK_0172372950__varname191463621211">interface-name</span></i> | <strong><span id="EN-US_TASK_0172372950__cmdparmname1638864171217">timeout-rate</span></strong> <i><span class="varname" id="EN-US_TASK_0172372950__varname1346534881212">tmval</span></i> } command to enable the function of sending interface information and set the interval for refreshing interface option packets.</li></ul>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0003.html">Collecting Statistics About IPv4 Original Flows
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0005.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>