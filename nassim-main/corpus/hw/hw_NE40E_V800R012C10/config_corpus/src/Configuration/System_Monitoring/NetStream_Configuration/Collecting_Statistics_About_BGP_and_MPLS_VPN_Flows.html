
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Collecting Statistics About BGP/MPLS VPN Flows">
<meta name="abstract" content="Collecting traffic statistics on BGP/MPLS VPN networks helps monitor the BGP/MPLS VPN network condition.">
<meta name="description" content="Collecting traffic statistics on BGP/MPLS VPN networks helps monitor the BGP/MPLS VPN network condition.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0019.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ns_cfg_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,netstream_vrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Netstream">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="l00799643">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00799643">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373015">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Collecting Statistics About BGP/MPLS VPN Flows</title>
</head>
<body><a name="EN-US_TASK_0172373015"></a><a name="EN-US_TASK_0172373015"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Collecting Statistics About BGP/MPLS VPN Flows</h1>
<div class="taskbody"><p>Collecting traffic statistics on BGP/MPLS VPN networks helps monitor the BGP/MPLS VPN network condition.</p>
<div class="context"><a name="EN-US_TASK_0172373015__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>In <a href="#EN-US_TASK_0172373015__fig_dc_vrp_ns_cfg_004201">Figure 1</a>, statistics about MPLS flows sent by the P to the NetStream Collector (NSC) inform the NSC of the traffic volume and traffic type corresponding to each label. Such statistics, however, cannot tell to which VPN each traffic belongs. In this case, the PE sends the meaning of each MPLS label (1024 in the figure) to the NSC so that the NSC can determine to which VPN the received traffic belongs. The NSC can analyze the traffic data of each VPN and display the result.</p>
<p>In the MPLS flow statistics sent by the P, the corresponding label information is as follows:</p>
<ul><li>Out-label: indicates the outgoing label, which is a public network label and is used to guide packet forwarding.</li><li>In-label: indicates the innermost label of the packet and is the VPN label of PE2.</li></ul>
<div class="fignone" id="EN-US_TASK_0172373015__fig_dc_vrp_ns_cfg_004201"><a name="EN-US_TASK_0172373015__fig_dc_vrp_ns_cfg_004201"></a><a name="fig_dc_vrp_ns_cfg_004201"></a><span class="figcap"><b>Figure 1 </b>Collecting statistics about BGP/MPLS VPN flows</span><br><span><img class="vsd" src="figure/en-us_image_0000001987063309.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172373015__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Before collecting statistics about BGP/MPLS VPN flows, deploy the BGP/MPLS VPN network.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172373015__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Enable the P to collect statistics about MPLS flows.</span><p><p>Set the parameters according to <a href="dc_vrp_ns_cfg_0015.html">Collecting Statistics About MPLS IPv4 Packets</a><span> or <a href="dc_vrp_ns_cfg_0019.html">Collecting Statistics About MPLS IPv6 Packet</a></span>.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=ip+netstream+export+template+option+application-label"><b><span class="cmdname">ip netstream export template option application-label</span></b></a> command to enable TAL option export and export the TAL option template to the NSC.</span><p><p>After this command is run, the collector can parse labels only when it can parse the extended fields described in <a href="#EN-US_TASK_0172373015__table870874914268">Table 1</a>.</p>

<div class="tableBorder"><a name="EN-US_TASK_0172373015__table870874914268"></a><a name="table870874914268"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172373015__table870874914268" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Extended fields</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="49.97%" id="mcps1.4.3.2.2.2.2.3.1.1" liSelected="liSelected"><p>Extended Field ID</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50.029999999999994%" id="mcps1.4.3.2.2.2.2.3.1.2" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1200</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>Label generation time</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1201</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>VPN name</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1202</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>Label value of a VPN instance</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1203</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>Label range</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1204</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>Start label value</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1205</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>IP address of the remote PE</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1206</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>Local site ID in the L2VPN scenario</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1207</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>Remote site ID in the L2VPN scenario</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1208</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>VPN RD value</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1209</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>L2VPN vcID</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1210</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>L2VPN vcType</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1211</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>Label type</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1212</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>L2VPN mode</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1227</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>VPN type</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="49.97%" headers="mcps1.4.3.2.2.2.2.3.1.1 "><p>1228</p>
</td>
<td class="cellrowborder" valign="top" width="50.029999999999994%" headers="mcps1.4.3.2.2.2.2.3.1.2 "><p>VPN IP version</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0000.html">NetStream Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0019.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ns_cfg_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>