
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Using Tracert to Check a PW Path on a VPWS Network">
<meta name="abstract" content="You can run the tracert command to obtain information about the SPEs and Ps through which packets pass from the source to the destination. Based on the command output, you can monitor PW connectivity and locate faulty nodes.">
<meta name="description" content="You can run the tracert command to obtain information about the SPEs and Ps through which packets pass from the source to the destination. Based on the command output, you can monitor PW connectivity and locate faulty nodes.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0032.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0013.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00511010">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373179">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Using Tracert to Check a PW Path on a VPWS Network</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172373179"></a><a name="EN-US_TASK_0172373179"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Using Tracert to Check a PW Path on a VPWS Network</h1>
<div class="taskbody"><p>You can run the <a href="cmdqueryname=tracert"><b><span class="cmdname">tracert</span></b></a> command to obtain information about the SPEs and Ps through which packets pass from the source to the destination. Based on the command output, you can monitor PW connectivity and locate faulty nodes.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0172373179__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before testing PW connectivity using the <a href="cmdqueryname=tracert+vc"><b><span class="cmdname">tracert vc</span></b></a> command, ensure that the VPWS network has been configured correctly.</p>
<p>If the control word channel is used, you need to run the <a href="cmdqueryname=control-word"><b><span class="cmdname">control-word</span></b></a> command in the PW template view to enable the control word function.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172373179__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Perform the following steps on the PE of a VPWS network.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373179__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run any of the following commands to locate VPWS network faults through PW tracert as required:</span><p><ul><li><p>Control-word mode:</p>
<p>Run the <a href="cmdqueryname=tracert+vc"><b><span class="cmdname">tracert vc</span></b></a> <span><i><span class="varname">vc-type</span></i></span> <i><span class="varname">pw-id</span></i><span> [ <i><span class="varname">peer-address</span></i> ]</span> [ <strong><span>-exp</span></strong> <i><span class="varname">exp-value</span></i> | <strong><span>-f</span></strong> <i><span class="varname">first-ttl</span></i> | <strong><span>-m</span></strong> <i><span class="varname">max-ttl</span></i> | <strong><span>-r</span></strong> <i><span class="varname">reply-mode</span></i> | <strong><span>-t</span></strong> <i><span class="varname">timeout-value</span></i> | <strong><span>-g</span></strong> ]<sup>*</sup> <strong><span>control-word</span></strong> [ <strong><span>remote</span></strong> <i><span class="varname">remote-ip-address</span></i> ] [ <strong><span>full-lsp-path</span></strong> | <span><strong><span>ptn-mode</span></strong></span> ] [ <strong><span>pipe</span></strong> | <strong><span>uniform</span></strong> ]<span> [ <strong><span>detail</span></strong> ]</span> <span>[ <strong><span>bypass</span></strong> <strong><span>-si</span></strong> <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ]</span> command.</p>
<p>In a BGP-based scenario, run the <a href="cmdqueryname=tracert+vc+-vpn-instance"><b><span class="cmdname">tracert vc -vpn-instance</span></b></a> <i><span class="varname">vpn-name</span></i> <i><span class="varname">local-ce-id</span></i> <i><span class="varname">remote-ce-id</span></i> [ <strong><span>-exp</span></strong> <i><span class="varname">exp-value</span></i> | <strong><span>-f</span></strong> <i><span class="varname">first-ttl</span></i> | <strong><span>-m</span></strong> <i><span class="varname">max-ttl</span></i> | <strong><span>-r</span></strong> <i><span class="varname">reply-mode</span></i> | <strong><span>-t</span></strong> <i><span class="varname">timeout-value</span></i> | <strong><span>-g</span></strong> ]<sup>*</sup> <strong><span>control-word</span></strong> [ <strong><span>full-lsp-path</span></strong> ] <span>[ <strong><span>detail</span></strong> ]</span> <span>[ <strong><span>bypass</span></strong> <strong><span>-si</span></strong> <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ]</span> command to perform a test.</p>
</li><li><p>Label-alert mode:</p>
<p>Run the <a href="cmdqueryname=tracert+vc"><b><span class="cmdname">tracert vc</span></b></a> <span><i><span class="varname">vc-type</span></i></span> <i><span class="varname">pw-id</span></i><span> [ <i><span class="varname">peer-address</span></i> ]</span> [ <strong><span>-exp</span></strong> <i><span class="varname">exp-value</span></i> | <strong><span>-f</span></strong> <i><span class="varname">first-ttl</span></i> | <strong><span>-m</span></strong> <i><span class="varname">max-ttl</span></i> | <strong><span>-r</span></strong> <i><span class="varname">reply-mode</span></i> | <strong><span>-t</span></strong> <i><span class="varname">timeout-value</span></i> | <strong><span>-g</span></strong> ] <sup>*</sup> <strong><span>label-alert</span></strong> [ <strong><span>no-control-word</span></strong> ] [ <strong><span>full-lsp-path</span></strong> ] [ <strong><span>pipe</span></strong> | <strong><span>uniform</span></strong> ]<span> [ <strong><span>detail</span></strong> ]</span> <span>[ <strong><span>bypass</span></strong> <strong><span>-si</span></strong> <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ]</span> command.</p>
<p>In a BGP scenario, run the <a href="cmdqueryname=tracert+vc+-vpn-instance"><b><span class="cmdname">tracert vc -vpn-instance</span></b></a> <i><span class="varname">vpn-name</span></i> <i><span class="varname">local-ce-id</span></i> <i><span class="varname">remote-ce-id</span></i> [ <strong><span>-exp</span></strong> <i><span class="varname">exp-value</span></i> | <strong><span>-f</span></strong> <i><span class="varname">first-ttl</span></i> | <strong><span>-m</span></strong> <i><span class="varname">max-ttl</span></i> | <strong><span>-r</span></strong> <i><span class="varname">reply-mode</span></i> | <strong><span>-t</span></strong> <i><span class="varname">timeout-value</span></i> | <strong><span>-g</span></strong> ]<sup>*</sup> <strong><span>label-alert</span></strong> [ <strong><span>no-control-word</span></strong> ] [ <strong><span>full-lsp-path</span></strong> ] <span>[ <strong><span>detail</span></strong> ]</span> <span>[ <strong><span>bypass</span></strong> <strong><span>-si</span></strong> <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ]</span> command to perform a test.</p>
</li><li><p>TTL mode:</p>
<p><a href="cmdqueryname=tracert+vc"><b><span class="cmdname">tracert vc</span></b></a> <span><i><span class="varname">vc-type</span></i></span> <i><span class="varname">pw-id</span></i><span> [ <i><span class="varname">peer-address</span></i> ]</span> [ <strong><span>-exp</span></strong> <i><span class="varname">exp-value</span></i> | <strong><span>-f</span></strong> <i><span class="varname">first-ttl</span></i> | <strong><span>-m</span></strong> <i><span class="varname">max-ttl</span></i> | <strong><span>-r</span></strong> <i><span class="varname">reply-mode</span></i> | <strong><span>-t</span></strong> <i><span class="varname">timeout-value</span></i> | <strong><span>-g</span></strong> ] <sup>*</sup> <strong><span>normal</span></strong> [ <strong><span>no-control-word</span></strong> ] [ <strong><span>remote</span></strong> <i><span class="varname">remote-ip-address</span></i> ] [ <strong><span>full-lsp-path</span></strong> ] [ <strong><span>pipe</span></strong> | <strong><span>uniform</span></strong> ]<span> [ <strong><span>detail</span></strong> ] <span>[ <strong><span>bypass</span></strong> <strong><span>-si</span></strong>  <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ]</span></span></p>
</li></ul>
</p><p><div class="p">An example is as follows:<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>tracert vc vlan 100 control-word remote 4.1.1.2 full-lsp-path</strong>
  TTL   Replier            Time    Type      Downstream
  0                                Ingress   1.1.1.2/[1025 ]
  1     1.1.1.2           230 ms  Transit    2.1.1.2/[1301 ]
  2     2.1.1.2           230 ms  Transit    3.1.1.2/[1208 ]
  3     3.1.1.2           100 ms  Transit    4.1.1.2/[3 ]
  4     4.1.1.2           150 ms  Egress</pre>
</div>
<div class="p">An example based on BGP is as follows:<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>tracert vc -vpn-instance vpn1 1 2 label-alert full-lsp-path</strong>
TTL   Replier            Time    Type      Downstream   
0                                Ingress   10.2.2.2/[21505 1026 ]   
1     10.2.2.2           60 ms   Transit   10.3.3.3/[1026 ]   
2     10.3.3.3           50 ms   Transit   10.4.4.4/[3 ]   
3     10.1.1.1           70 ms   Egress </pre>
</div>
</p><p><p>The preceding command output shows each node on the PW and the response time of each node.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0032.html">Using Ping/Tracert to Test a VPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0013.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0020.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>