
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Using Ping to Check Link Connectivity on an IPv4 or IPv6 Network">
<meta name="abstract" content="Packet Internet Groper (ping) is used to check network connectivity and host reachability. In a ping operation, the source sends an Internet Control Message Protocol (ICMP) request message to the destination, which returns an ICMP reply message to the source.">
<meta name="description" content="Packet Internet Groper (ping) is used to check network connectivity and host reachability. In a ping operation, the source sends an Internet Control Message Protocol (ICMP) request message to the destination, which returns an ICMP reply message to the source.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0002.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="m00915594">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373164">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Using Ping to Check Link Connectivity on an IPv4 or IPv6 Network</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172373164"></a><a name="EN-US_TASK_0172373164"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Using Ping to Check Link Connectivity on an IPv4<span> or IPv6</span> Network</h1>
<div class="taskbody"><p>Packet Internet Groper (ping) is used to check network connectivity and host reachability. In a ping operation, the source sends an Internet Control Message Protocol (ICMP) request message to the destination, which returns an ICMP reply message to the source.</p>
<div class="context"><a name="EN-US_TASK_0172373164__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">The <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> command is a most common debugging tool used for testing device accessibility. It uses ICMP Echo messages to determine the following:<ul><li><p>Whether the remote device is available.</p>
</li><li><p>Round-trip delay in communication with a remote device.</p>
</li><li><p>Whether packet loss occurs.</p>
</li></ul>
The <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> command labels each ICMP Echo message with a sequence ID that starts from 1 and is increased by 1. The number of ICMP Echo messages to be sent is determined by the device, and the default number is 5. You can also set the number of ICMP Echo messages to be sent using a command. If the destination is reachable, it sends five ICMP Echo Reply messages to the source, with their sequence numbers identical with those of ICMP Echo messages.</div>
<p>Perform the following steps in any view on the client:</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The command format is for reference only. For details about the formats of the <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> and <a href="cmdqueryname=ping+ipv6"><b><span class="cmdname">ping ipv6</span></b></a> commands, see <em>Command Reference</em>.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373164__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> command to check whether network connection is normal. <span>You can run either command to view detailed or brief information.</span></span><p><ul><li><span>To view detailed information, </span>run the <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> [ <strong><span>ip</span></strong> ] { [ <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | { [ <strong><span>-i</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } | <strong><span>-nexthop</span></strong> <i><span class="varname">nexthop-address</span></i> ] <sup>*</sup><span> | <strong><span>-si</span></strong> { <i><span class="varname">source-interface-name</span></i> | <i><span class="varname">source-interface-type</span></i> <i><span class="varname">source-interface-number</span></i> }</span> [ <strong><span>-ei</span></strong> { <i><span class="varname">evcSubIfName</span></i> | <i><span class="varname">evcSubIfType</span></i> <i><span class="varname">evcSubIfNum</span></i> } ] } | { <strong><span>-s</span></strong> <i><span class="varname">packetsize</span></i> | <strong><span>-range</span></strong> [ [ <strong><span>min</span></strong> <i><span class="varname">min-value</span></i> | <strong><span>max</span></strong> <i><span class="varname">max-value</span></i> | <strong><span>step</span></strong> <i><span class="varname">step-value</span></i> ] <sup>*</sup> ] } | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-m</span></strong> <i><span class="varname">time</span></i> | <strong><span>-a</span></strong> <i><span class="varname">source-ip-address</span></i> | <strong><span>-h</span></strong> <i><span class="varname">ttl-value</span></i> | <strong><span>-p</span></strong> <i><span class="varname">pattern</span></i> | { <strong><span>-tos</span></strong> <i><span class="varname">tos-value</span></i> |<span> <strong><span>-dscp</span></strong> <i><span class="varname">dscp-value</span></i></span> } | { <strong><span>-f</span></strong><span> | <strong><span>ignore-mtu</span></strong></span> } | <strong><span>-q</span></strong> | <strong><span>-r</span></strong> | <strong><span>-vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> [ <strong><span>peer</span></strong> <i><span class="varname">peerIpv6</span></i> ] | <strong><span>-v</span></strong> | <strong><span>-system-time</span></strong> | <strong><span>-ri</span></strong><span> | <strong><span>-8021p</span></strong> <i><span class="varname">8021p-value</span></i></span>| | <strong><span>-name</span></strong> | <strong><span>-detail</span></strong> | <strong><span>-te-class</span></strong> <i><span class="varname">teClassValue</span></i> | <strong><span>-service-class</span></strong><strong> </strong><i><span class="varname">classValue</span></i> ] <sup>*</sup> <i><span class="varname">host</span></i> [ <strong><span>ip-forwarding</span></strong> ] } or <strong><a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> </strong>[ <strong><span>ip</span></strong> ] { [ <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | { <strong><span>-s</span></strong> <i><span class="varname">packetsize</span></i> | <strong><span>-range</span></strong> [ [ <strong><span>min</span></strong> <i><span class="varname">min-value</span></i> | <strong><span>max</span></strong> <i><span class="varname">max-value</span></i> | <strong><span>step</span></strong> <i><span class="varname">step-value</span></i> ] <sup>*</sup> ] } | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-m</span></strong> <i><span class="varname">time</span></i> | <strong><span>-a</span></strong> <i><span class="varname">source-ip-address</span></i> | <strong><span>-h</span></strong> <i><span class="varname">ttl-value</span></i> | <strong><span>-p</span></strong> <i><span class="varname">pattern</span></i> | { <strong><span>-tos</span></strong> <i><span class="varname">tos-value</span></i> |<span> <strong><span>-dscp</span></strong> <i><span class="varname">dscp-value</span></i></span> } | { <strong><span>-f</span></strong><span> | <strong><span>ignore-mtu</span></strong></span> } | <strong><span>-q</span></strong> | <strong><span>-r</span></strong> | <strong><span>-vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>-v</span></strong> | <strong><span>-system-time</span></strong> | <strong><span>-ri</span></strong> | <strong><span>-name</span></strong> ] <sup>*</sup> <i><span class="varname">host</span></i><span> [ <strong><span>bypass</span></strong> <strong><span>-si</span></strong> { <i><span class="varname">frrSrcIfName</span></i> | <i><span class="varname">frrSrcIfType</span></i> <i><span class="varname">frrSrcIfNum</span></i> } ]</span> command.</li><li><span>To view brief information, </span>run the <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> [ <strong><span>ip</span></strong> ] { [ <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | { [ <strong><span>-i</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } | <strong><span>-nexthop</span></strong> <i><span class="varname">nexthop-address</span></i> ] <sup>*</sup><span> | <strong><span>-si</span></strong> { <i><span class="varname">source-interface-name</span></i> | <i><span class="varname">source-interface-type</span></i> <i><span class="varname">source-interface-number</span></i> }</span> [ <strong><span>-ei</span></strong> { <i><span class="varname">evcSubIfName</span></i> | <i><span class="varname">evcSubIfType</span></i> <i><span class="varname">evcSubIfNum</span></i> } ] } | { <strong><span>-s</span></strong> <i><span class="varname">packetsize</span></i> | <strong><span>-range</span></strong> [ [ <strong><span>min</span></strong> <i><span class="varname">min-value</span></i> | <strong><span>max</span></strong> <i><span class="varname">max-value</span></i> | <strong><span>step</span></strong> <i><span class="varname">step-value</span></i> ] <sup>*</sup> ] } | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-m</span></strong> <i><span class="varname">time</span></i> | <strong><span>-a</span></strong> <i><span class="varname">source-ip-address</span></i> | <strong><span>-h</span></strong> <i><span class="varname">ttl-value</span></i> | <strong><span>-p</span></strong> <i><span class="varname">pattern</span></i> | { <strong><span>-tos</span></strong> <i><span class="varname">tos-value</span></i> |<span> <strong><span>-dscp</span></strong> <i><span class="varname">dscp-value</span></i></span> } | { <strong><span>-f</span></strong><span> | <strong><span>ignore-mtu</span></strong></span> } | <strong><span>-vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> [ <strong><span>peer</span></strong> <i><span class="varname">peerIpv6</span></i> ] | <strong><span>-ri</span></strong><span> | <strong><span>-8021p</span></strong> <i><span class="varname">8021p-value</span></i></span> | | <strong><span>-name</span></strong> | <strong><span>-brief</span></strong> | <strong><span>-te-class</span></strong> <i><span class="varname">teClassValue</span></i> | <strong><span>-service-class</span></strong><strong> </strong><i><span class="varname">classValue</span></i> ] <sup>*</sup> <i><span class="varname">host</span></i> [ <strong><span>ip-forwarding</span></strong> ] } or <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> [ <strong><span>ip</span></strong> ] { [ <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | { [ <strong><span>-i</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } [ <strong><span>-fri</span></strong> ] } | { <strong><span>-s</span></strong> <i><span class="varname">packetsize</span></i> | <strong><span>-range</span></strong> [ [ <strong><span>min</span></strong> <i><span class="varname">min-value</span></i> | <strong><span>max</span></strong> <i><span class="varname">max-value</span></i> | <strong><span>step</span></strong> <i><span class="varname">step-value</span></i> ] <sup>*</sup> ] } | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-m</span></strong> <i><span class="varname">time</span></i> | <strong><span>-a</span></strong> <i><span class="varname">source-ip-address</span></i> | <strong><span>-h</span></strong> <i><span class="varname">ttl-value</span></i> | <strong><span>-p</span></strong> <i><span class="varname">pattern</span></i> | { <strong><span>-tos</span></strong> <i><span class="varname">tos-value</span></i> |<span> <strong><span>-dscp</span></strong> <i><span class="varname">dscp-value</span></i></span> } | { <strong><span>-f</span></strong><span> | <strong><span>ignore-mtu</span></strong></span> } | <strong><span>-vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <span><strong><span>-8021p</span></strong> <i><span class="varname">8021p-value</span></i></span> | <strong><span>-name</span></strong> | { <strong><span>-brief</span></strong> | [ <strong><span>-q</span></strong> | <strong><span>-detail</span></strong> | <strong><span>-v</span></strong> | <strong><span>-d</span></strong> | <strong><span>-system-time</span></strong> | <strong><span>-ri</span></strong> ] <sup>*</sup> } | <strong><span>-service-class</span></strong><strong> </strong><i><span class="varname">classValue</span></i> ] <sup>*</sup> <i><span class="varname">host</span></i> [ <strong><span>ip-forwarding</span></strong> ] } command.</li></ul>
<p>The command output includes the following:</p>
<ul><li><p>Response to each ping packet: If no ICMP Echo Reply message is received within a specified period of time, the message reading "Request time out" is displayed. If a Reply message is received, the data bytes, packet sequence number, TTL value, and response time carried in the message are displayed.</p>
</li><li><p>Final statistics: The number of sent and received messages, percentage of messages that are not responded to, and the minimum, maximum, and average values of the response time are displayed.</p>
</li></ul>
<pre class="screen">&lt;<span class="keyword" id="EN-US_TASK_0172373164__en-us_cliref_0172384352_keyword1482336038214546">HUAWEI</span>&gt; <strong id="EN-US_TASK_0172373164__en-us_cliref_0172384352_b1276247421214546">ping 10.1.1.2</strong> 
   PING 10.1.1.2 : 56 data bytes , press CTRL_C to break 
     Reply from 10.1.1.2 : bytes=56 sequence=1 ttl=255 time = 1ms 
     Reply from 10.1.1.2 : bytes=56 sequence=2 ttl=255 time = 2ms 
     Reply from 10.1.1.2 : bytes=56 sequence=3 ttl=255 time = 1ms 
     Reply from 10.1.1.2 : bytes=56 sequence=4 ttl=255 time = 3ms 
     Reply from 10.1.1.2 : bytes=56 sequence=5 ttl=255 time = 2ms 

   --10.1.1.2 ping statistics-- 
     5 packet(s) transmitted 
     5 packet(s) received 
     0.00% packet loss 
     round-trip min/avg/max = 1/2/3 ms</pre>
<p>On an IPv6 network, you need to run the <a href="cmdqueryname=ping+ipv6"><b><span class="cmdname">ping ipv6</span></b></a> command. For details, see <em>Command Reference</em>.</p>
<div class="p">Note that on a network that carries APN6 services, you need to <span>run the <a href="cmdqueryname=ping+ipv6"><b><span class="cmdname">ping ipv6</span></b></a> { <strong><span>-apn-id-ipv6</span></strong><strong> </strong><strong><span>instance</span></strong><strong> </strong><i><span class="varname">instName</span></i> [ <strong><span>-a</span></strong> <i><span class="varname">source-ipv6-address</span></i> | <strong><span>-c</span></strong> <i><span class="varname">echo-number</span></i> | { <strong><span>-s</span></strong> <i><span class="varname">byte-number</span></i> | <strong><span>-range</span></strong> [ [ <strong><span>min</span></strong> <i><span class="varname">min-value</span></i> | <strong><span>max</span></strong> <i><span class="varname">max-value</span></i> | <strong><span>step</span></strong> <i><span class="varname">step-value</span></i> ] <sup>*</sup> ] } | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | { <strong><span>-tc</span></strong> <i><span class="varname">traffic-class-value</span></i> | <strong><span>-dscp</span></strong> <i><span class="varname">dscp</span></i> } | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>-m</span></strong> <i><span class="varname">wait-time</span></i> | <strong><span>-name</span></strong> | <strong><span>-si</span></strong> { <i><span class="varname">source-interface-name</span></i> | <i><span class="varname">source-interface-type</span></i><em> </em><i><span class="varname">source-interface-number</span></i> | <strong><span>-h</span></strong> <i><span class="varname">hoplimit</span></i> } | { <strong><span>-brief</span></strong> | [ <strong><span>-system-time</span></strong> | <strong><span>-ri</span></strong> | <strong><span>-detail</span></strong> ] <sup>*</sup> } | <strong><span>-p</span></strong> <i><span class="varname">pattern</span></i> ] <sup>*</sup> <i><span class="varname">destination-ipv6-address</span></i> } command to check whether the network connection is normal.</span> The following is an example:<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> </strong><strong>ping ipv6 -apn-id-ipv6 instance inst1 vpn-instance vpna -si </strong><strong>Gigabitethernet <span>0/1/0</span></strong><strong> 2001:DB8:22::1</strong></pre>
<pre class="screen">  PING 2001:DB8:22::1 : 56  data bytes, press CTRL_C to break
    Reply from 2001:DB8:22::1
    bytes=56 Sequence=1 hop limit=64 time=7 ms
    Reply from 2001:DB8:22::1
    bytes=56 Sequence=2 hop limit=64 time=2 ms
    Reply from 2001:DB8:22::1
    bytes=56 Sequence=3 hop limit=64 time=2 ms
    Reply from 2001:DB8:22::1
    bytes=56 Sequence=4 hop limit=64 time=2 ms
    Reply from 2001:DB8:22::1
    bytes=56 Sequence=5 hop limit=64 time=2 ms

  --- 2001:DB8:22::1 ping statistics---
    5 packet(s) transmitted
    5 packet(s) received
    0.00% packet loss
    round-trip min/avg/max=2/3/7 ms</pre>
</div>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=icmp-reply+fast"><b><span class="cmdname">icmp-reply fast</span></b></a> command to enable ICMP fast reply.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p><span>In VS mode, this command is supported only by the admin VS.</span></p>
</div></div>
</p><ol type="a"><li><span>Run the <a href="cmdqueryname=icmp-reply+fast"><b><span class="cmdname">icmp-reply fast</span></b></a> command in the system view to enable ICMP fast reply on the device.</span></li><li><span>Run the <a href="cmdqueryname=icmp-reply+fast"><b><span class="cmdname">icmp-reply fast</span></b></a> command in the slot view to enable ICMP fast reply on a specified interface board.</span></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
<p><div class="p">Ping packets are prone to long delays and large jitters. This is because the ICMP messages used in ping operations need to be processed by the CPUs of devices and the processing produces long delays. The detailed reasons are as follows:<ul><li>To minimize the impact of ping attacks on itself, the <span class="keyword">NE40E</span> reduces the processing priority of ICMP messages to the lowest level.</li></ul>
</div>
<p>To resolve ping delay and jitter issues, devices provide the ICMP fast reply function. After this function is enabled, received ICMP request messages are not sent to the CPU for processing. Instead, the packet forwarding engine (PFE) of an interface board responds to clients with ICMP reply messages, greatly shortening the ping delay.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the <a href="cmdqueryname=undo+icmp-reply+fast"><b><span class="cmdname">undo icmp-reply fast</span></b></a> command is run in the system or slot view, ICMP fast reply is disabled on the interface board. After ICMP fast reply is disabled on an interface board, this function takes effect on the interface board only after the <a href="cmdqueryname=icmp-reply+fast"><b><span class="cmdname">icmp-reply fast</span></b></a> command is run in both the system and slot views.</p>
</div></div>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0002.html">Using Ping/Tracert to test an IP Network
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>