
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Checking Multicast Network Path Information Using MTracert">
<meta name="abstract" content="Multicast trace route (MTrace) is a tool used to trace multicast paths. It can trace the path from a receiver to a multicast source along a multicast distribution tree (MDT).">
<meta name="description" content="Multicast trace route (MTrace) is a tool used to trace multicast paths. It can trace the path from a receiver to a multicast source along a multicast distribution tree (MDT).">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0064.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0060.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00511010">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373203">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Checking Multicast Network Path Information Using MTracert</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172373203"></a><a name="EN-US_TASK_0172373203"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Checking Multicast Network Path Information Using MTracert</h1>
<div class="taskbody"><p>Multicast trace route (MTrace) is a tool used to trace multicast paths. It can trace the path from a receiver to a multicast source along a multicast distribution tree (MDT).</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0172373203__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring an MTrace test instance, run the <a href="cmdqueryname=undo+mtrace+echo+disable"><b><span class="cmdname">undo mtrace echo disable</span></b></a> command on each device along the multicast or RPF path to be detected to enable the devices to respond to MTrace request and query messages.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172373203__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">MTrace mainly has the following uses:<ul><li><p>The <a href="cmdqueryname=mtrace"><b><span class="cmdname">mtrace</span></b></a> command can be used in multicast troubleshooting and routine maintenance to locate a faulty device and reduce configuration errors.</p>
</li><li><p>The <a href="cmdqueryname=mtrace"><b><span class="cmdname">mtrace</span></b></a> command can be used to collect traffic statistics in path tracing and calculate the multicast traffic rate in cyclic path tracing.</p>
</li><li><p>The NMS analyzes faulty device information displayed in the <a href="cmdqueryname=mtrace"><b><span class="cmdname">mtrace</span></b></a> command output and generates alarms.</p>
</li></ul>
</div>
<p>Perform the following steps in any view on the client.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373203__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>(Optional) Run <span><a href="cmdqueryname=reset+mtrace+statistics"><b><span class="cmdname">reset mtrace statistics</span></b></a></span></span><p><p>MTrace message statistics are cleared.</p>
</p><p><div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>After the <a href="cmdqueryname=reset+mtrace+statistics"><b><span class="cmdname">reset mtrace statistics</span></b></a> command is run, the statistics cleared cannot be restored.</p>
</div></div>
</p></li><li><span>Perform the following operations as required.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">To ensure that the <a href="cmdqueryname=mtrace"><b><span class="cmdname">mtrace</span></b></a> command is run successfully, the current device must have the (S, G) entries and meet either of the following conditions:<ul><li>The current device is directly connected to the destination host.</li><li>A ping test initiated from the current device to the last-hop device or destination host succeeds.</li><li>The current device is on the multicast path from the multicast source to the destination host.</li></ul>
</div>
<p>The following examples show some parameters. For detailed options and parameter description, see <a href="cmdqueryname=mtrace"><b><span class="cmdname">mtrace</span></b></a>.</p>
</div></div>
<ul><li><p>Run the <a href="cmdqueryname=mtrace"><b><span class="cmdname">mtrace</span></b></a> <strong><span>source</span></strong> <i><span class="varname">source-address</span></i> command to trace the RPF path from a multicast source to the current device.</p>
<pre class="screen">&lt;<span class="keyword" id="EN-US_TASK_0172373203__en-us_cliref_0172384348_keyword2062631100214546">HUAWEI</span>&gt; <strong id="EN-US_TASK_0172373203__en-us_cliref_0172384348_b1900514008214546">mtrace source 10.1.0.1</strong></pre>
<pre class="screen">Press Ctrl+C to break multicast traceroute facility
 From the receiver(10.1.5.1), trace reverse path to source (10.1.0.1) according to RPF rules

 Num  Reverse-Path    FwdTTL Protocol
  0   10.1.5.1
 -1   10.1.5.1        1      PIM
 -2   10.1.2.1        1      PIM
 -3   10.1.0.1        1      PIM
  In maximum-hop mode, received the response message, and multicast traceroute finished.</pre>
</li><li><div class="p">Run the <a href="cmdqueryname=mtrace"><b><span class="cmdname">mtrace</span></b></a> <strong><span>-g</span></strong> <i><span class="varname">group</span></i> <strong><span>source</span></strong> <i><span class="varname">source-address</span></i> command to trace the multicast path from a multicast source to the current device.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>mtrace -g 225.0.0.1 -l 2 -st 10 source 10.1.0.1</strong></pre>
<pre class="screen">Press Ctrl+C to break multicast traceroute facility
 From the receiver(10.1.5.1), trace (10.1.0.1, 225.0.0.1)'s reverse path according to multicast routing-table
 In calculating-rate mode, current statistic times is: 1
- 1 10.1.5.1
   Incoming Interface Address: 10.1.5.1 Input packets rate: 0xffffffff
   Outgoing Interface Address: 0.0.0.0 Output packets rate: 0xffffffff
   Forwarding Cache (10.1.0.1, 225.0.0.1) Forwarding packets rate: 1500
   Last forwarded packets: 19121341 Current forwarded packets: 19136201
   The packet loss rate of (10.1.0.1, 225.0.0.1) is 0.00%
- 2 10.1.2.1
   Incoming Interface Address: 10.1.2.1 Input packets rate: 0xffffffff
   Outgoing Interface Address: 10.1.5.2 Output packets rate: 0xffffffff
   Forwarding Cache (10.1.0.1, 225.0.0.1) Forwarding packets rate: 1500
   Last forwarded packets: 149378592 Current forwarded packets: 149393372
   The packet loss rate of (10.1.0.1, 225.0.0.1) is 0.00%
- 3 10.1.0.1
   Incoming Interface Address: 10.1.0.1 Input packets rate: 0xffffffff
   Outgoing Interface Address: 10.1.2.2 Output packets rate: 0xffffffff
   Forwarding Cache (10.1.0.1, 225.0.0.1) Forwarding packets rate: 1500
   Last forwarded packets: 149454710 Current forwarded packets: 149469582
   The packet loss rate of (10.1.0.1, 225.0.0.1) is 0.00%
 ********************************************************
  In calculating-rate mode, reach the demanded number of statistic,and multicast traceroute finished.</pre>
</div>
</li><li><p>Run the <a href="cmdqueryname=mtrace"><b><span class="cmdname">mtrace</span></b></a> [ <strong><span>-gw</span></strong> <i><span class="varname">last-hop-router</span></i> | <strong><span>-d</span></strong> ] <strong><span>-r</span></strong> <i><span class="varname">receiver</span></i> <strong><span>source</span></strong> <i><span class="varname">source-address</span></i> command to trace the RPF path from a multicast source to the destination host.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>mtrace -gw 10.1.6.3 -r 10.1.6.4 -v source 10.1.0.1</strong></pre>
<pre class="screen">Press Ctrl+C to break multicast traceroute facility
 From the receiver(10.1.6.4), trace reverse path to source (10.1.0.1) according to RPF rules
 Num  Reverse-Path    FwdTTL Protocol
  0   10.1.6.4
- 1   10.1.5.1        1      PIM
  Incoming Interface Address: 10.1.5.1 
  Outgoing Interface Address: 10.1.6.3 
  Previous-Hop Router Address: 10.1.5.2 
  Input packet count on incoming interface: 0xffffffff 
  Output packet count on outgoing interface: 0xffffffff 
  Total number of packets for this source-group pair: 0 
  Forwarding TTL: 1 
  Forwarding Code: NO_ERROR
- 2   10.1.2.1        1      PIM
  Incoming Interface Address: 10.1.2.1 
  Outgoing Interface Address: 10.1.5.2 
  Previous-Hop Router Address: 10.1.2.2 
  Input packet count on incoming interface: 0xffffffff 
  Output packet count on outgoing interface: 0xffffffff 
  Total number of packets for this source-group pair: 0 
  Forwarding TTL: 1 
  Forwarding Code: NO_ERROR
- 3   10.1.0.1        1      PIM
  Incoming Interface Address: 10.1.0.1 
  Outgoing Interface Address: 10.1.2.2 
  Previous-Hop Router Address: 0.0.0.0 
  Input packet count on incoming interface: 0xffffffff 
  Output packet count on outgoing interface: 0xffffffff 
  Total number of packets for this source-group pair: 0 
  Forwarding TTL: 1 
  Forwarding Code: NO_ERROR 
 In maximum-hop mode, received the response message, and multicast traceroute finished.</pre>
</li><li><p>Run the <a href="cmdqueryname=mtrace"><b><span class="cmdname">mtrace</span></b></a> [ <strong><span>-b</span></strong> | <strong><span>-gw</span></strong> <i><span class="varname">last-hop-router</span></i> | <strong><span>-d</span></strong> ] <strong><span>-r</span></strong> <i><span class="varname">receiver</span></i> <strong><span>-g</span></strong> <i><span class="varname">group</span></i> <strong><span>source</span></strong> <i><span class="varname">source-address</span></i> command to trace the multicast path from a multicast source to the destination host.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>mtrace -b -r 10.1.6.4 -g 225.0.0.1 source 10.1.0.1</strong></pre>
<pre class="screen">Press Ctrl+C to break multicast traceroute facility
 From the receiver(10.1.6.4), trace (10.1.0.1, 225.0.0.1)'s reverse path according to multicast routing-table
 Num  Reverse-Path    FwdTTL Protocol
  0   10.1.6.4
 -1   10.1.5.1        1      PIM
 -2   10.1.2.1        1      PIM
 -3   10.1.0.1        1      PIM
  In maximum-hop mode, received the response message, and multicast traceroute finished.</pre>
</li></ul>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=display+mtrace+statistics"><b><span class="cmdname">display mtrace statistics</span></b></a></span></span><p><p>MTrace message statistics are displayed.</p>
</p><p><p>Run this command if network connectivity is abnormal or you need to view information about IGMP messages sent and received by devices on the multicast network.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=mtrace+echo+disable"><b><span class="cmdname">mtrace echo disable</span></b></a></span></span><p><p>A device is disabled from responding to MTrace request and query messages.</p>
</p><p><div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>After the <a href="cmdqueryname=mtrace+echo+disable"><b><span class="cmdname">mtrace echo disable</span></b></a> command is run, a device discards MTrace request and query messages. As a result, MTrace detection is terminated on this device.</p>
</div></div>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0064.html">Using Ping/Tracert to Test a Multicast Network
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0060.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>