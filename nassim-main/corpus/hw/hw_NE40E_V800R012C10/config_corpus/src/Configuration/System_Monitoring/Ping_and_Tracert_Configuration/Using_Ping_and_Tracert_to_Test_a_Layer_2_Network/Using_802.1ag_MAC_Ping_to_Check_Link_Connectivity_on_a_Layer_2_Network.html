
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Using 802.1ag MAC Ping to Check Link Connectivity on a Layer 2 Network">
<meta name="abstract" content="802.1ag MAC ping monitors connectivity between MEPs or between MEPs and MIPs within an MA.">
<meta name="description" content="802.1ag MAC ping monitors connectivity between MEPs or between MEPs and MIPs within an MA.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0026.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00511010">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373186">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Using 802.1ag MAC Ping to Check Link Connectivity on a Layer 2 Network</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172373186"></a><a name="EN-US_TASK_0172373186"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Using 802.1ag MAC Ping to Check Link Connectivity on a Layer 2 Network</h1>
<div class="taskbody"><p>802.1ag MAC ping monitors connectivity between MEPs or between MEPs and MIPs within an MA.</p>
<div class="context"><a name="EN-US_TASK_0172373186__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Similar to the ping operation, 802.1ag MAC ping checks whether the destination device is reachable by sending test packets and receiving response packets. In addition, the ping operation time can be calculated at the transmit end for network performance analysis.</p>
<p>Before performing 802.1ag MAC ping, ensure that 802.1ag has been configured. For details, see <a href="dc_vrp_cfm_cfg_000004.html">Configuring Basic Ethernet CFM Functions</a>.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373186__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>A device is usually configured with multiple MDs and MAs. To monitor the connectivity of a link between two or more devices, perform either of the following steps on the <span class="keyword">NE40E</span> with a MEP on one end of the link to be monitored.</span><p><ul><li><p>In the MA view:</p>
<ol type="a"><li><p>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></p>
<p>The system view is displayed.</p>
</li><li>Run <a href="cmdqueryname=cfm+enable"><b><span class="cmdname">cfm enable</span></b></a><p>CFM is globally enabled on the device.</p>
</li><li><p>Run <span><a href="cmdqueryname=cfm+md"><b><span class="cmdname">cfm md</span></b></a> <i><span class="varname">md-name</span></i></span></p>
<p>The MD view is displayed.</p>
</li><li><p>Run <span><a href="cmdqueryname=ma"><b><span class="cmdname">ma</span></b></a> ma-name</span></p>
<p>The MA view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=ping+mac-8021ag"><b><span class="cmdname">ping mac-8021ag</span></b></a> <strong><span>mep</span></strong> <strong><span>mep-id</span></strong> <i><span class="varname">mep-id</span></i> [ <strong><span>md</span></strong> <i><span class="varname">md-name</span></i> <strong><span>ma</span></strong> <i><span class="varname">ma-name</span></i> ] { <strong><span>mac</span></strong> <i><span class="varname">mac-address</span></i> | <strong><span>remote-mep</span></strong> <strong><span>mep-id</span></strong> <i><span class="varname">mep-id</span></i> } [ <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | <strong><span>-s</span></strong> <i><span class="varname">packetsize</span></i> | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-p</span></strong> <i><span class="varname">priority-value</span></i> ] <sup>*</sup></p>
<p>The connectivity between a MEP and an RMEP or between a MEP and a MIP on other devices is monitored.</p>
<p>The following shows an example: </p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong> 
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>cfm enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>cfm md md1</strong> 
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-md-md1] <strong>ma ma1</strong> 
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-md-md1-ma-ma1] <strong>ping mac-8021ag mep mep-id 1 md md1 ma ma1 remote-mep mep-id 2</strong> 
Pinging 00e0-fc12-3456 with 95 bytes of data: 
Reply from 00e0-fc12-3456: bytes = 95, time = 11ms 
Reply from 00e0-fc12-3456: bytes = 95, time = 2ms 
Reply from 00e0-fc12-3456: bytes = 95, time = 3ms 
Reply from 00e0-fc12-3456: bytes = 95, time = 3ms 
Reply from 00e0-fc12-3456: bytes = 95, time = 2ms 
Packets: Sent = 5, Received = 5, Lost = 0 (0% loss) 
Minimum = 2ms, Maximum = 11ms, Average = 4ms</pre>
</li></ol>
</li><li><p>In all views except the MA view:</p>
<p>Run <span><a href="cmdqueryname=ping+mac-8021ag"><b><span class="cmdname">ping mac-8021ag</span></b></a> <strong><span>mep</span></strong> <strong><span>mep-id</span></strong> <i><span class="varname">mep-id</span></i> <strong><span>md</span></strong> <i><span class="varname">md-name</span></i> <strong><span>ma</span></strong> <i><span class="varname">ma-name</span></i> { <strong><span>mac</span></strong> <i><span class="varname">mac-address</span></i> | <strong><span>remote-mep</span></strong> <strong><span>mep-id</span></strong> <i><span class="varname">mep-id</span></i> } [ <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | <strong><span>-s</span></strong> <i><span class="varname">packetsize</span></i> | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-p</span></strong> <i><span class="varname">priority-value</span></i> ] <sup>*</sup></span></p>
<p>The connectivity between a MEP and an RMEP or between a MEP and a MIP on other devices is monitored.</p>
</li></ul>
<p>When implementing 802.1ag MAC ping, ensure that:</p>
<ul><li><p>The MEP is configured in the MA.</p>
</li><li><p>If the destination node is an RMEP, either <strong><span>mac</span></strong> <i><span class="varname">mac-address</span></i> or <strong><span>remote-mep</span></strong> <strong><span>mep-id</span></strong> <i><span class="varname">mep-id</span></i> can be specified. If <strong><span>remote-mep</span></strong> <strong><span>mep-id</span></strong> <i><span class="varname">mep-id</span></i> is selected, the remote maintenance association end point (RMEP) must already be created using the <a href="cmdqueryname=remote-mep"><b><span class="cmdname">remote-mep</span></b></a> command.</p>
</li><li><p>If the destination node is a MIP, select <strong><span>mac</span></strong> <i><span class="varname">mac-address</span></i>.</p>
</li></ul>
<p>The intermediate device on the link to be tested only forwards LBMs and LBRs. Therefore, the MD, MA, or MEP does not need to be configured on the intermediate device.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=display+cfm+statistics+lblt"><b><span class="cmdname">display cfm statistics lblt</span></b></a> command to check 802.1ag protocol packet statistics.</span><p><p>If the test using the <a href="cmdqueryname=ping+mac-8021ag"><b><span class="cmdname">ping mac-8021ag</span></b></a> command fails, you can run this command to check whether a link fault or a device fault occurs.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=reset+cfm+statistics+lblt"><b><span class="cmdname">reset cfm statistics lblt</span></b></a> command to clear the 802.1ag protocol packet statistics.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0016.html">Using Ping/Tracert to Test a Layer 2 Network
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0015.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0026.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>