
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Sampling IPv4 Flows">
<meta name="abstract" content="You can enable NetStream to sample and analyze the incoming or outgoing flows on an interface.">
<meta name="description" content="You can enable NetStream to sample and analyze the incoming or outgoing flows on an interface.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0052.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_3026_2.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0067.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,netstream_vrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Netstream">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="l00799643">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00799643">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372998">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Sampling IPv4 Flows</title>
</head>
<body><a name="EN-US_TASK_0172372998"></a><a name="EN-US_TASK_0172372998"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Sampling IPv4 Flows</h1>
<div class="taskbody"><p>You can enable NetStream to sample and analyze the incoming or outgoing flows on an interface.</p>
<div class="steps"><a name="EN-US_TASK_0172372998__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Configure a sampling mode and sampling ratio by performing at least one of the following steps:</span><p><ul><li>Configure a sampling mode and sampling ratio globally.<ol type="a"><li><p>Run <a href="cmdqueryname=ip+netstream+sampler"><b><span class="cmdname">ip netstream sampler</span></b></a> <span>{ <strong><span>fix-packets</span></strong> <i><span class="varname">fix-packet-number</span></i> | <strong><span>random-packets</span></strong> <i><span class="varname">random-packet-number</span></i> | <strong><span>fix-time</span></strong> <i><span class="varname">fix-time-number</span></i> }</span> { <strong><span>inbound</span></strong> | <strong><span>outbound</span></strong> }</p>
<p>A sampling mode and sampling ratio are configured globally.</p>
</li><li>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i><p>The interface view is displayed.</p>
</li></ol>
</li><li>Configure a sampling mode and sampling ratio on an interface.<ol type="a"><li>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i><p>The interface view is displayed.</p>
</li><li>Run <a href="cmdqueryname=ip+netstream+sampler"><b><span class="cmdname">ip netstream sampler</span></b></a> <span>{ <strong><span>fix-packets</span></strong> <i><span class="varname">fix-packet-number</span></i> | <strong><span>random-packets</span></strong> <i><span class="varname">random-packet-number</span></i> | <strong><span>fix-time</span></strong> <i><span class="varname">fix-time-number</span></i> }</span> { <strong><span>inbound</span></strong> | <strong><span>outbound</span></strong> }<p>A sampling mode and sampling ratio are configured on the interface.</p>
<div class="p"><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The sampling mode and sampling ratio configured in the system view apply to all interfaces on the device. The sampling mode and sampling ratio configured in the interface view take precedence over those configured in the system view.</p>
</div></div>
</div>
</li></ol>
</li></ul>
</p></li><li><span>Run <a href="cmdqueryname=ip+netstream"><b><span class="cmdname">ip netstream</span></b></a> { <strong><span>inbound</span></strong> | <strong><span>outbound</span></strong> }</span><p><p>NetStream is enabled on the interface. Statistics about packets' BGP next-hop information can also be collected.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=ip+netstream+statistics+enable"><b><span class="cmdname">ip netstream statistics enable</span></b></a></span><p><p>The traffic statistics diagnosis function is enabled so that you can compare the traffic statistics collected by the device with those restored by the NMS to determine the cause of inaccurate sampling.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=ip+netstream+sampler+except+deny-action"><b><span class="cmdname">ip netstream sampler except deny-action</span></b></a></span><p><p>The device is configured not to perform NetStream sampling for traffic matching the ACL rule or traffic behavior that contains <strong>deny</strong> in MF classification.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>You need to enter the traffic behavior view before running this command.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0052.html">Collecting Statistics About IPv4 Flexible Flows
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_3026_2.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0067.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>