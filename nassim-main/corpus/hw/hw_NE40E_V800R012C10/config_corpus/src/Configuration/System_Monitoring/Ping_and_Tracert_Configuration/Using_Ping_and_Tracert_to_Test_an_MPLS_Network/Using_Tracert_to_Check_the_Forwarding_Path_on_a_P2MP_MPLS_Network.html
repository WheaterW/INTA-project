
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Using Tracert to Check the Forwarding Path on a P2MP MPLS Network">
<meta name="abstract" content="Run the tracert commands to check path information on a Point-to-Multipoint (P2MP) MPLS network so that faults can be located.">
<meta name="description" content="Run the tracert commands to check path information on a Point-to-Multipoint (P2MP) MPLS network so that faults can be located.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0035.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,network-monitor_vrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="c00511010">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="ccms">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373172">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Using Tracert to Check the Forwarding Path on a P2MP MPLS Network</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172373172"></a><a name="EN-US_TASK_0172373172"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Using Tracert to Check the Forwarding Path on a P2MP MPLS Network</h1>
<div class="taskbody"><p>Run the tracert commands to check path information on a Point-to-Multipoint (P2MP) MPLS network so that faults can be located.</p>
<div class="context"><a name="EN-US_TASK_0172373172__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>On a VPLS over P2MP network, tracert can be used to check the following tunnels:</p>
<ul><li>P2MP label distribution protocol (LDP) label switched paths (LSPs)</li><li>P2MP TE tunnels that are automatically generated</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172373172__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before using tracert to check the P2MP network connectivity, ensure that P2MP is correctly configured.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373172__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=tracert+multicast-lsp"><b><span class="cmdname">tracert multicast-lsp</span></b></a> command to check path information about the following tunnels on a VPLS over P2MP network:</span><p><ul><li><p>VPLS over P2MP LDP LSPs</p>
<p><a href="cmdqueryname=tracert+multicast-lsp"><b><span class="cmdname">tracert multicast-lsp</span></b></a> [ <strong><span>-a</span></strong> <i><span class="varname">source-ip</span></i> | <strong><span>-exp</span></strong> <i><span class="varname">exp-value</span></i> | <strong><span>-h</span></strong> <i><span class="varname">ttl-value</span></i> | <strong><span>-j</span></strong> <i><span class="varname">jitter-value</span></i> | <strong><span>-r</span></strong> <i><span class="varname">reply-mode</span></i> | <strong><span>-t</span></strong> <i><span class="varname">time-out</span></i> | <strong><span>t-flag</span></strong> ] <sup>*</sup> <strong><span>mldp p2mp root-ip</span></strong> <i><span class="varname">root-ip-address</span></i> { <strong><span>lsp</span></strong> <i><span class="varname">lsp-id</span></i> | <strong><span>opaque-value</span></strong> <i><span class="varname">opaque-value</span></i> }<span> [ <strong><span>detail</span></strong> ]</span></p>
</li><li><p>VPLS over P2MP TE tunnels that are automatically generated</p>
<p><a href="cmdqueryname=tracert+multicast-lsp"><b><span class="cmdname">tracert multicast-lsp</span></b></a> [ <strong><span>-a</span></strong> <i><span class="varname">source-ip</span></i> | <strong><span>-exp</span></strong> <i><span class="varname">exp-value</span></i> | <strong><span>-h</span></strong> <i><span class="varname">ttl-value</span></i> | <strong><span>-j</span></strong> <i><span class="varname">jitter-value</span></i> | <strong><span>-r</span></strong> <i><span class="varname">reply-mode</span></i> | <strong><span>-t</span></strong> <i><span class="varname">time-out</span></i> | <strong><span>t-flag</span></strong> ] <sup>*</sup> <strong><span>te-auto-tunnel</span></strong> <i><span class="varname">auto-tunnel-name</span></i> [ <strong><span>leaf-destination</span></strong> <i><span class="varname">leaf-destination</span></i> ]<span> [ <strong><span>detail</span></strong> ]</span></p>
</li></ul>
<p># Use tracert to check path information about a P2MP LDP LSP.</p>
<pre class="screen">&lt;<span class="keyword" id="EN-US_TASK_0172373172__en-us_cliref_0172384377_keyword1368158791214546">HUAWEI</span>&gt; <strong id="EN-US_TASK_0172373172__en-us_cliref_0172384377_b187952335214546">tracert multicast-lsp -h 10 mldp p2mp root-ip 1.1.1.1 lsp-id 1</strong>
  LSP Trace Route FEC: Multicast P2MP LDP , press CTRL_C to break.
  TTL   Replier            Time    Type      Downstream
  1     192.168.1.9        40 ms   Transit   192.168.2.12/[1024 ]
  2     10.10.10.10        110 ms  Egress
  3     10.10.10.10        140 ms  Egress
  4     10.10.10.10        50 ms   Egress
  5     10.10.10.10        70 ms   Egress
  6     10.10.10.10        80 ms   Egress
  7     10.10.10.10        70 ms   Egress
  8     10.10.10.10        30 ms   Egress
  9     10.10.10.10        60 ms   Egress
  10    10.10.10.10        110 ms  Egress</pre>
<p># Use tracert to check path information about a P2MP TE tunnel. </p>
<pre class="screen">&lt;<span class="keyword" id="EN-US_TASK_0172373172__en-us_cliref_0172384377_keyword2077477482214546">HUAWEI</span>&gt; <strong id="EN-US_TASK_0172373172__en-us_cliref_0172384377_b299652012214546">tracert multicast-lsp -h 2 te-auto-tunnel P2MPoh5121</strong>
  LSP Trace Route FEC: RSVP P2MP IPv4 P2MP-Auto-tunnel P2MPoh5121 , press CTRL_C to break.
  TTL   Replier            Time    Type      Downstream
  1     2.2.2.2            30 ms   Bud       172.16.3.2/[1048575 ]
  1     4.1.1.2            40 ms   Transit   5.1.1.2/[900001 ]
  2     2.2.2.2            30 ms   Bud       172.16.3.2/[1048575 ]
  2     6.6.6.6            60 ms   Egress
  2     3.3.3.3            80 ms   Egress
  2     5.5.5.5            80 ms   Egress 
</pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0005.html">Using Ping/Tracert to Test an MPLS Network
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0035.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>