
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring DHCP Server Dual-Device Hot Backup">
<meta name="abstract" content="This section describes how to configure DHCP server dual-device hot backup for a VRRP group. After this function is configured and a master/backup VRRP switchover is performed, the new master device can properly process services without re-synchronizing user session information.">
<meta name="description" content="This section describes how to configure DHCP server dual-device hot backup for a VRRP group. After this function is configured and a master/backup VRRP switchover is performed, the new master device can properly process services without re-synchronizing user session information.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_relay_cfg_0010.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_server_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_relay_cfg_0027.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,z00485179,w00556928,w00606909,dhcpvrp">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DHCP">
<meta name="featuretype" content="IP Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DHCP">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="DHCP">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="DHCP">
<meta name="featuretype" content="IP Services">
<meta name="OWNER" content="z00485179,x00504385">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x00504385">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172364744">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring DHCP Server Dual-Device Hot Backup</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172364744"></a><a name="EN-US_TASK_0172364744"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring DHCP Server Dual-Device Hot Backup</h1>
<div class="taskbody"><p>This section describes how to configure DHCP server dual-device hot backup for a VRRP group. After this function is configured and a master/backup VRRP switchover is performed, the new master device can properly process services without re-synchronizing user session information.</p>
<div class="context"><a name="EN-US_TASK_0172364744__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172364744__fig_dc_vrp_dhcp_server_cfg_002002">Figure 1</a>, the DHCP client is connected to DeviceA and DeviceB over the switch. A VRRP group is configured between DeviceA and DeviceB to establish the master/backup relationship, with DeviceA as the master device and DeviceB as the backup device. Both DeviceA and DeviceB serve as a DHCP server to assign IP addresses to DHCP clients.</p>
<p>In normal cases, DeviceA implements new user access and online user renewal. When DeviceA or the link between DeviceA and the switch becomes faulty, a master/backup VRRP switchover is implemented and DeviceB takes over to become the master device. DeviceB can properly perform address assignment for new users and renewal requests for online users only when user session information has been synchronized from DeviceA to DeviceB.</p>
<p>To prevent abnormalities of new user access and online user renewal after a master/backup switchover due to a failure to synchronize user session information from DeviceA to DeviceB, deploy DHCP server dual-device hot backup on DeviceA and DeviceB.</p>
<div class="fignone" id="EN-US_TASK_0172364744__fig_dc_vrp_dhcp_server_cfg_002002"><a name="EN-US_TASK_0172364744__fig_dc_vrp_dhcp_server_cfg_002002"></a><a name="fig_dc_vrp_dhcp_server_cfg_002002"></a><span class="figcap"><b>Figure 1 </b>Configuring DHCP server dual-device hot backup</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interface 1 in this example represents GE <span>0/1/1</span>.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_dhcp_server_cfg_002002.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172364744__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Create a VLAN and configure the Layer 2 forwarding function.</p>
</li><li><p>Configure the address assignment function.</p>
</li><li><p>Establish a dual-device backup platform.</p>
</li><li><p>Enable remote backup for the DHCP server.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172364744__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>VLAN ID of <span class="keyword">Device</span>A and <span class="keyword">Device</span>B: 100</p>
</li><li><p>Gateway address of the address pool named <strong>pool1</strong>: 10.10.10.1/24; start IP address of the address segment: 10.10.10.1; end IP address of the address segment: 10.10.10.100</p>
</li><li><p>ID of the VRRP group established between <span class="keyword">Device</span>A and <span class="keyword">Device</span>B: 1; virtual IP address of the VRRP group: 10.10.10.100</p>
</li><li><p>Priority of the VRRP group on <span class="keyword">Device</span>A: 200; preemption delay: 420s</p>
</li><li><p>Name of the RBS and RBP: service1; user backup ID: 1</p>
</li><li><p>DHCP server identifier of <span class="keyword">Device</span>A and <span class="keyword">Device</span>B: 10.10.10.100</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172364744__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create a VLAN and configure the Layer 2 forwarding function.</span><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>A</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>vlan 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-vlan100] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-vlan100] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>port link-type trunk</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>port trunk allow-pass vlan 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span>B.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>B</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>vlan 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-vlan100] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-vlan100] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong>portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong>port link-type trunk</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong>port trunk allow-pass vlan 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
</p></li><li><span>Configure the address assignment function.</span><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ip pool pool1 server</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ip-pool-pool1] <strong>gateway 10.10.10.100 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ip-pool-pool1] <strong>section 0 10.10.10.1 10.10.10.100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ip-pool-pool1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ip-pool-pool1] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ip pool pool1 server</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ip-pool-pool1] <strong>gateway 10.10.10.100 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ip-pool-pool1] <strong>section 0 10.10.10.1 10.10.10.100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ip-pool-pool1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ip-pool-pool1] <strong>quit</strong></pre>
</p></li><li><span>Establish a dual-device backup platform.</span><p><div class="p"><ol type="a"><li><p>Configure basic functions of a VRRP group.</p>
<p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface Vlanif 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Vlanif100] <strong>ip address 10.10.10.1 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Vlanif100] <strong>vrrp vrid 1 virtual-ip 10.10.10.100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Vlanif100] <strong>vrrp vrid 1 priority 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Vlanif100] <strong>vrrp vrid 1 preempt-mode timer delay 600</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Vlanif100] <strong>vrrp recover-delay 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Vlanif100] <strong>dhcp server enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Vlanif100] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-Vlanif100] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>interface Vlanif 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Vlanif100] <strong>ip address 10.10.10.2 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Vlanif100] <strong>vrrp vrid 1 virtual-ip 10.10.10.100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Vlanif100] <strong>dhcp server enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Vlanif100] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-Vlanif100] <strong>quit</strong></pre>
</li><li><p>Configure an RBS.</p>
<p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>remote-backup-service service1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-rm-backup-srv-service1] <strong>peer 10.10.10.2 source 10.10.10.1 port 10000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-rm-backup-srv-service1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-rm-backup-srv-service1] <strong>quit</strong></pre>
<div class="p"># Configure <span class="keyword">Device</span>B.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>remote-backup-service service1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-rm-backup-srv-service1] <strong>peer 10.10.10.1 source 10.10.10.2 port 10000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-rm-backup-srv-service1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-rm-backup-srv-service1] <strong>quit</strong></pre>
</div>
</li><li><p>Configure an RBP.</p>
<p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>remote-backup-profile service1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-rm-backup-prf-service1] <strong>peer-backup hot</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-rm-backup-prf-service1] <strong>vrrp-id 1 interface Vlanif 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-rm-backup-prf-service1] <strong>backup-id 1 remote-backup-service service1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-rm-backup-prf-service1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-rm-backup-prf-service1] <strong>quit</strong></pre>
<div class="p"># Configure <span class="keyword">Device</span>B.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>remote-backup-profile service1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-rm-backup-prf-service1] <strong>peer-backup hot</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-rm-backup-prf-service1] <strong>vrrp-id 1 interface Vlanif 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-rm-backup-prf-service1] <strong>backup-id 1 remote-backup-service service1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-rm-backup-prf-service1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-rm-backup-prf-service1] <strong>quit</strong></pre>
</div>
</li></ol>
</div>
</p></li><li><span>Enable remote backup for the DHCP server.</span><p><div class="p"># Enable remote backup for the DHCP server in the RBP view of <span class="keyword">Device</span>A and bind the RBP to the address pool named <strong>pool1</strong>.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>remote-backup-profile service1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-rm-backup-prf-service1] <strong>service-type dhcp-server</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-rm-backup-prf-service1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-rm-backup-prf-service1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ip pool pool1</strong> <strong>server</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ip-pool-pool1] <strong>remote-backup-profile service1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ip-pool-pool1] <strong>server identifier ip 10.10.10.100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ip-pool-pool1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ip-pool-pool1] <strong>quit</strong></pre>
</div>
<div class="p"># Enable remote backup for the DHCP server in the RBP view of <span class="keyword">Device</span>B and bind the RBP to the address pool named <strong>pool1</strong>.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>remote-backup-profile service1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-rm-backup-prf-service1] <strong>service-type dhcp-server</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-rm-backup-prf-service1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-rm-backup-prf-service1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ip pool pool1</strong> <strong>server</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ip-pool-pool1] <strong>remote-backup-profile service1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ip-pool-pool1] <strong>server identifier ip 10.10.10.100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ip-pool-pool1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ip-pool-pool1] <strong>quit</strong></pre>
</div>
</p></li><li><span>Verify the configuration.</span><p><div class="p">After completing the configurations, run the <a href="cmdqueryname=display+remote-backup-profile"><b><span class="cmdname">display remote-backup-profile</span></b></a> command on <span class="keyword">Device</span>A. The command output shows that the RBP <strong>service1</strong> has been created and bound to the address pool <strong>pool1</strong>.<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display remote-backup-profile service1</strong></pre>
<pre class="screen"> -----------------------------------------------
 Profile-Index        : 0x1000
 Profile-Name         : service1
 Service              : dhcp-server 
 Remote-backup-service: service1
 Backup-ID            : 1
 track protocol       : VRRP
 VRRP-ID              : 1
 VRRP-Interface       : Vlanif100
 Access-Control       : --
 State                : Master
 Peer State           : --
 Interface            :
 Backup mode          : hot
 Slot-Number          : --
 Card-Number          : --
 Port-Number          : --</pre>
</div>
<div class="p">Run the <a href="cmdqueryname=display+remote-backup-profile"><b><span class="cmdname">display remote-backup-profile</span></b></a> command on <span class="keyword">Device</span>B. The command output shows that the RBP <strong>service1</strong> has been created and bound to the address pool <strong>pool1</strong>.<pre class="screen">&lt;<span class="keyword">Device</span>B&gt; <strong>display remote-backup-profile service1</strong></pre>
<pre class="screen">-----------------------------------------------
 Profile-Index        : 0x1000
 Profile-Name         : service1
 Service              : dhcp-server 
 Remote-backup-service: service1
 Backup-ID            : 1
 track protocol       : VRRP
 VRRP-ID              : 1
 VRRP-Interface       : Vlanif100
 Access-Control       : --
 State                : Slave
 Peer State           : --
 Interface            :
 Backup mode          : hot
 Slot-Number          : --
 Card-Number          : --
 Port-Number          : --
</pre>
</div>
<div class="p">Run the <a href="cmdqueryname=display+remote-backup-service"><b><span class="cmdname">display remote-backup-service</span></b></a> command on <span class="keyword">Device</span>A. The command output shows that the RBS <strong>service1</strong> has been created.<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display remote-backup-service service1</strong></pre>
<pre class="screen">----------------------------------------------------------
 Service-Index    : 1
 Service-Name     : service1
 TCP-State        : Connected
 Peer-ip          : 10.10.10.2
 Source-ip        : 10.10.10.1
 TCP-Port         : 10000
 Track-BFD        : --
 SSL-Policy-Name  : --
 SSL-State        : --
----------------------------------------------------------</pre>
</div>
<div class="p">Run the <a href="cmdqueryname=display+remote-backup-service"><b><span class="cmdname">display remote-backup-service</span></b></a> command on <span class="keyword">Device</span>B. The command output shows that the RBS <strong>service1</strong> has been created.<pre class="screen">&lt;<span class="keyword">Device</span>B&gt; <strong>display remote-backup-service service1</strong></pre>
<pre class="screen">----------------------------------------------------------
 Service-Index    : 1
 Service-Name     : service1
 TCP-State        : Connected
 Peer-ip          : 10.10.10.1
 Source-ip        : 10.10.10.2
 TCP-Port         : 10000
 Track-BFD        : --
 SSL-Policy-Name  : --
 SSL-State        : --
----------------------------------------------------------
</pre>
</div>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172364744__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>A
#
vlan 100
#
ip pool pool1 server
 gateway 10.10.10.100 255.255.255.0
 section 0 10.10.10.1 10.10.10.100
 server identifier ip 10.10.10.100
 remote-backup-profile service1
#
remote-backup-service service1
 peer 10.10.10.2 source 10.10.10.1 port 10000
#
remote-backup-profile service1
 service-type dhcp-server
 backup-id 1 remote-backup-service service1
 peer-backup hot
 vrrp-id 1 interface Vlanif 100
#
interface Vlanif 100
 ip address 10.10.10.1 255.255.255.0
 vrrp vrid 1 virtual-ip 10.10.10.100
 vrrp vrid 1 priority 200
 vrrp vrid 1 preempt-mode timer delay 600
 vrrp recover-delay 20
 dhcp server enable
#
interface GigabitEthernet <span>0/1/1</span>
 portswitch
 undo shutdown
 port link-type trunk
 port trunk allow-pass vlan 100
#
return
</pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>B
#
vlan 100
#
ip pool pool1 server
 gateway 10.10.10.100 255.255.255.0
 section 0 10.10.10.1 10.10.10.100
 server identifier ip 10.10.10.100
 remote-backup-profile service1
#
remote-backup-service service1
 peer 10.10.10.1 source 10.10.10.2 port 10000
#
remote-backup-profile service1
 service-type dhcp-server
 backup-id 1 remote-backup-service service1
 peer-backup hot
 vrrp-id 1 interface Vlanif 100
#
interface Vlanif 100
 ip address 10.10.10.2 255.255.255.0
 vrrp vrid 1 virtual-ip 10.10.10.100
 dhcp server enable
#
interface GigabitEthernet <span>0/1/1</span>
 portswitch
 undo shutdown
 port link-type trunk
 port trunk allow-pass vlan 100
#
return
</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_relay_cfg_0010.html">Configuration Examples for DHCP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_server_cfg_0020.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_relay_cfg_0027.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>