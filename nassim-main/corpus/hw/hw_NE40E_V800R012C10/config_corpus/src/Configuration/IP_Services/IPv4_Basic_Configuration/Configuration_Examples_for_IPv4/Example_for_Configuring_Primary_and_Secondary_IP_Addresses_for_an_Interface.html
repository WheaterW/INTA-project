
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Primary and Secondary IP Addresses for an Interface">
<meta name="abstract" content="This section provides an example for configuring a primary IP address and a secondary IP address for an interface.">
<meta name="description" content="This section provides an example for configuring a primary IP address and a secondary IP address for an interface.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipv4_cfg_0024.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipv4_cfg_0026.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,z00485179,w00556928,w00606909,ipv4-basicvrp">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv4">
<meta name="featurename" content="IP Traffic Monitoring">
<meta name="featuretype" content="IP Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4">
<meta name="featurename" content="IP Traffic Monitoring">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="IPv4">
<meta name="featurename" content="IP Traffic Monitoring">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="IPv4">
<meta name="featuretype" content="IP Services">
<meta name="OWNER" content="z00485179,z00648985">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172364939">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Primary and Secondary IP Addresses for an Interface</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172364939"></a><a name="EN-US_TASK_0172364939"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Primary and Secondary IP Addresses for an Interface</h1>
<div class="taskbody"><p>This section provides an example for configuring a primary IP address and a secondary IP address for an interface.</p>
<div class="context"><a name="EN-US_TASK_0172364939__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As shown in <a href="#EN-US_TASK_0172364939__fig_dc_vrp_ipv4_cfg_002501">Figure 1</a>, GE <span>0/1/1</span> of the device connects to a LAN in which computers belong to one of the two network segments: 172.16.1.0/24 and 172.16.2.0/24. It is required that the device can communicate with the two network segments. At the same time, the hosts of the two network segments can communicate with each other.</p>
<div class="fignone" id="EN-US_TASK_0172364939__fig_dc_vrp_ipv4_cfg_002501"><a name="EN-US_TASK_0172364939__fig_dc_vrp_ipv4_cfg_002501"></a><a name="fig_dc_vrp_ipv4_cfg_002501"></a><span class="figcap"><b>Figure 1 </b>Configuring primary and secondary IP addresses for an interface</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interface 1 in this example represents GE <span>0/1/1</span>.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_ipv4_cfg_002501.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172364939__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>None</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172364939__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Analyze the addresses of the network segments to which the interface connects.</p>
</li><li><p>Configure a primary IP address for the interface and then one or more secondary IP addresses for the interface.</p>
</li></ol>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The primary and secondary IP addresses of an interface can have overlapped network segments but cannot be the same. The secondary IP addresses of an interface must belong to different network segments.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172364939__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Primary IP address and subnet mask of the interface</p>
</li><li><p>Secondary IP address and subnet mask of the interface</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172364939__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure the device.</span><p><p># Configure primary and secondary IP addresses for GE <span>0/1/1</span>.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>]<strong> ip address 172.16.1.1 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>] <strong>ip address 172.16.2.1 255.255.255.0 sub</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>]<strong> quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Ping the hosts on the network segment 172.16.1.0 from <span class="keyword">Device</span>. The ping operation is successful.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ping 172.16.1.2</strong></pre>
<pre class="screen">  PING 172.16.1.2: 56  data bytes, press CTRL_C to break</pre>
<pre class="screen">    Reply from 172.16.1.2: bytes=56 Sequence=1 ttl=255 time=614 ms</pre>
<pre class="screen">    Reply from 172.16.1.2: bytes=56 Sequence=2 ttl=255 time=16 ms</pre>
<pre class="screen">    Reply from 172.16.1.2: bytes=56 Sequence=3 ttl=255 time=2 ms</pre>
<pre class="screen">    Reply from 172.16.1.2: bytes=56 Sequence=4 ttl=255 time=3 ms</pre>
<pre class="screen">    Reply from 172.16.1.2: bytes=56 Sequence=5 ttl=255 time=2 ms</pre>
<pre class="screen">  --- 172.16.1.2 ping statistics ---</pre>
<pre class="screen">    5 packet(s) transmitted</pre>
<pre class="screen">    5 packet(s) received</pre>
<pre class="screen">    0.00% packet loss</pre>
<pre class="screen">    round-trip min/avg/max = 25/26/27 ms</pre>
<p># Ping the hosts on the network segment 172.16.2.0 from <span class="keyword">Device</span>. The ping operation is successful.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> ping 172.16.2.2</strong></pre>
<pre class="screen">  PING 172.16.2.2: 56  data bytes, press CTRL_C to break</pre>
<pre class="screen">    Reply from 172.16.2.2: bytes=56 Sequence=1 ttl=255 time=13 ms</pre>
<pre class="screen">    Reply from 172.16.2.2: bytes=56 Sequence=2 ttl=255 time=2 ms</pre>
<pre class="screen">    Reply from 172.16.2.2: bytes=56 Sequence=3 ttl=255 time=2 ms</pre>
<pre class="screen">    Reply from 172.16.2.2: bytes=56 Sequence=4 ttl=255 time=2 ms</pre>
<pre class="screen">    Reply from 172.16.2.2: bytes=56 Sequence=5 ttl=255 time=2 ms</pre>
<pre class="screen">  --- 172.16.2.2 ping statistics ---</pre>
<pre class="screen">    5 packet(s) transmitted</pre>
<pre class="screen">    5 packet(s) received</pre>
<pre class="screen">    0.00% packet loss</pre>
<pre class="screen">    round-trip min/avg/max = 25/25/26 ms</pre>
<p># The hosts on the two network segments cannot ping each other.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172364939__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span> configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.16.1.1 255.255.255.0</pre>
<pre class="screen"> ip address 172.16.2.1 255.255.255.0 sub</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipv4_cfg_0024.html">Configuration Examples for IPv4
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipv4_cfg_0026.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>