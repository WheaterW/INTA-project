
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IP Address Assignment">
<meta name="abstract" content="IP address assignment includes specifying such basic information as a gateway address and address segments, as well as configuring static binding.">
<meta name="description" content="IP address assignment includes specifying such basic information as a gateway address and address segments, as well as configuring static binding.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_server_cfg_0011.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_server_cfg_0013.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,z00485179,w00556928,w00606909,dhcpvrp">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DHCP">
<meta name="featuretype" content="IP Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DHCP">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="DHCP">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="DHCP">
<meta name="featuretype" content="IP Services">
<meta name="OWNER" content="z00485179,x00504385">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x00504385">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172364701">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring IP Address Assignment</title>
</head>
<body><a name="EN-US_TASK_0172364701"></a><a name="EN-US_TASK_0172364701"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IP Address Assignment</h1>
<div class="taskbody"><p>IP address assignment includes specifying such basic information as a gateway address and address segments, as well as configuring static binding.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0172364701__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p" id="EN-US_TASK_0172364701__prereq629693394720"><p id="EN-US_TASK_0172364701__p901528154918">DHCP server packet receiving has been enabled using the <a href="cmdqueryname=dhcp+server+enable"><b><span class="cmdname" id="EN-US_TASK_0172364701__cmdname1191514464617">dhcp server enable</span></b></a> command on an interface if the interface needs to be used as a DHCP server.</p>
<div class="note" id="EN-US_TASK_0172364701__note927783814490"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0172364701__ul148851851145912"><li id="EN-US_TASK_0172364701__li13885125117590">If multiple interfaces need to be used as DHCP servers, for security purposes, you are advised to preferentially run the <a href="cmdqueryname=dhcp+server+enable"><b><span class="cmdname" id="EN-US_TASK_0172364701__cmdname198051032104718">dhcp server enable</span></b></a> command on the interfaces to enable DHCP server packet receiving. If high security is not required, you run the <a href="cmdqueryname=dhcp+server+request-packet+all-interface+enable"><b><span class="cmdname" id="EN-US_TASK_0172364701__cmdname1111113865112">dhcp server request-packet all-interface enable</span></b></a> command in the system view to enable DHCP server packet receiving for all interfaces.</li><li id="EN-US_TASK_0172364701__li4657653185916">If DHCP server packet receiving is not enabled, a DHCP server does not process DHCP request messages.</li></ul>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172364701__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After an address pool is created on the DHCP server, a gateway address and an address segment need to be specified, with the IP addresses in the address segment belonging to the gateway address segment. By default, all IP addresses in the address segment can be assigned to DHCP clients. If the NetBIOS server and DNS server reside in the address segment, fixed IP addresses need to be bound to the servers. Before such binding, the two IP addresses need to be removed from the address segment so that they will not be dynamically assigned to other DHCP clients.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172364701__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure the basic functions of IP address assignment.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <strong><a href="cmdqueryname=dhcp+rate-limit"><b><span class="cmdname">dhcp rate-limit</span></b></a></strong> { <strong>disable</strong> | <em>rateLimitValue</em> }</span><p><p>Global rate limiting is disabled for DHCP messages or a rate limit is configured for DHCP messages.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ip+pool"><b><span class="cmdname">ip pool</span></b></a><i><span class="varname"> ip-pool-name</span></i> [ <strong><span>server</span></strong> ]</span><p><p>An address pool is created, and the address pool view is displayed.</p>
</p><p><div class="p"><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>During first-time address pool creation, the <strong><span>server</span></strong> parameter must be specified. In the address pool view that is displayed after an address pool is created, the <strong><span>server</span></strong> parameter does not need to be specified.</p>
</div></div>
</div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=gateway"><b><span class="cmdname">gateway</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> }</span><p><p>The gateway IP address and subnet mask of the address pool are configured.</p>
</p><p><p>If a DHCP client requests an IP address from the DHCP server, the DHCP server notifies the DHCP client of the gateway address and subnet mask using Option 3 and Option 1.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=section"><b><span class="cmdname">section</span></b></a> <i><span class="varname">section-index</span></i> <i><span class="varname">start-ip-address</span></i> [ <i><span class="varname">end-ip-address</span></i> ]</span><p><p>An address segment is configured for the address pool.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=option+router+disable"><b><span class="cmdname">option router disable</span></b></a></span><p><p>The function of sending the gateway address to DHCP clients is disabled.</p>
<p>When a carrier has high requirements on network security and does not want carriers to get aware of the gateway address, this command can be used to prohibit the DHCP server from sending DHCP clients Option 3 that contains the gateway address.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the DHCP is disabled from sending the gateway address, run the <a href="cmdqueryname=option33+route"><b><span class="cmdname">option33 route</span></b></a> command to allow DHCP clients to obtain the target route using Option 33.</p>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=option+force-reply"><b><span class="cmdname">option force-reply</span></b></a> { <i><span class="varname">option-code</span></i> } &amp;&lt;1-16&gt;</span><p><p>The DHCP option forcibly replied to a DHCP client by a DHCP server is configured.</p>
<p>The DHCP server does not respond if the DHCP packets received from a DHCP client do not contain some DHCP option information. However, if such option information as option 6 (carrying the DNS server address) is not contained in DHCP packets, the DHCP client fails to be connected. To address the problem, such DHCP options need to be forcibly replied to a client by a DHCP server.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the <a href="cmdqueryname=option+router+disable"><b><span class="cmdname">option router disable</span></b></a> command is used to disable the sending of Option 3 (gateway address) in addition to the <a href="cmdqueryname=option+force-reply"><b><span class="cmdname">option force-reply</span></b></a>, the configuration of the <a href="cmdqueryname=option+router+disable"><b><span class="cmdname">option router disable</span></b></a> command takes effect preferentially due to a higher priority.</p>
</div></div>
</p></li></ol>
</li><li><span>(Optional) Configure the static address assignment function.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ip+pool"><b><span class="cmdname">ip pool</span></b></a> <i><span class="varname">ip-pool-name</span></i> <strong><span>server</span></strong></span><p><p>An address pool is created, and its view is displayed.</p>
</p><p><p></p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=excluded-ip-address"><b><span class="cmdname">excluded-ip-address</span></b></a> <i><span class="varname">start-ip-address</span></i> [ <i><span class="varname">end-ip-address</span></i> ]</span><p><p>The range of IP addresses that cannot be dynamically assigned in an address pool is specified.</p>
</p><p><p>In network planning, some IP addresses need to be assigned to specified hosts, such as the DNS and WWW servers, for long-term use. In this case, you can run this command to configure the range of IP addresses that do not participate in automatic IP address assignment. Repeat this command as needed to specify multiple ranges of IP addresses.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=static-bind"><b><span class="cmdname">static-bind</span></b></a> <strong><span>ip-address</span></strong> <i><span class="varname">ip-address</span></i> <strong><span>mac-address</span></strong> <i><span class="varname">mac-address</span></i></span><p><p>The static address assignment function is configured.</p>
</p><p><p>Fixed IP addresses need to be assigned to specified clients, such as the WWW server. In this case, you can bind an available IP address in an address pool with the MAC address of a client.</p>
</p></li></ol>
</li><li><span>(Optional) Configure IP address assignment based on Option 60.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=dhcp+server+base-option60+enable"><b><span class="cmdname">dhcp server base-option60 enable</span></b></a></span><p><p>The DHCP server is enabled to assign IP addresses based on Option 60.</p>
</p><p><p>If no relay agent exists between the DHCP server and DHCP clients, configure the DHCP server to assign IP addresses to DHCP clients in different network segments or VPNs based on the Option 60 information carried in packets sent by the DHCP clients.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ip+pool"><b><span class="cmdname">ip pool</span></b></a> <i><span class="varname">ip-pool-name</span></i> [ <strong><span>server</span></strong> ]</span><p><p>The address pool view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=client-option60"><b><span class="cmdname">client-option60</span></b></a> <i><span class="varname">option60-text</span></i></span><p><p>The Option 60 information is configured in the server address pool.</p>
</p><p><p>If the <i><span class="varname">option60-text</span></i> parameter configured for a server address pool matches the Option 60 information carried in the packets sent by DHCP clients, the DHCP server assigns IP addresses from the address pool. Otherwise, the DHCP server assigns IP addresses based on the gateway address.</p>
</p></li></ol>
</li><li><span>(Optional) Run <span><a href="cmdqueryname=dhcp+reply"><b><span class="cmdname">dhcp reply</span></b></a> { <strong><span>unicast-always</span></strong> | <strong><span>broadcast-always</span></strong> }</span></span><p><p>The type of the packets sent by the DHCP server as a reply is specified.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=vpn-instance"><b><span class="cmdname">vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span></span><p><p>A VPN instance is configured for the address pool.</p>
</p><p><p>If a VPN has the DHCP service, the address pool created on the DHCP server needs to be bound to a VPN instance.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=dhcp+server+identifier+dest-ip"><b><span class="cmdname">dhcp server identifier dest-ip</span></b></a></span></span><p><p>The DHCP server is enabled to use the destination IP address in the packet forwarded by the DHCP relay as the server identifier.</p>
</p><p><p>This command is used when a DHCP client is connected to a DHCP relay (first PE) over a VPN and the DHCP relay sends a DHCP request to the DHCP server (second PE). The DHCP server assigns an IP address to the DHCP client over the VPN. The server IP address specified by the DHCP server is generally the IP address of a non-public interface on the DHCP server, but the DHCP request is received by a public interface on the DHCP server. By default, the DHCP server uses the inbound interface IP address in the DHCP request (public interface IP address) as the server identifier. As a result, the DHCP client fails to extend the lease. To address this problem, run the dhcp server identifier dest-ip command to enable the DHCP server to use the destination IP address in the packet forwarded by the DHCP relay as the server identifier.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=dhcp+server+option82+link-selection+enable"><b><span class="cmdname">dhcp server option82 link-selection enable</span></b></a></span><p><p>The DHCP server is enabled to assign IP addresses based on the Option 82 suboption Link Selection.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=dhcp+server+option82+server-id-override+enable"><b><span class="cmdname">dhcp server option82 server-id-override enable</span></b></a></span><p><p>The DHCP server is enabled to fill the Option 82 suboption Server Identifier Override in Option 54.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=dhcp+server+ping"><b><span class="cmdname">dhcp server ping</span></b></a> { <strong><span>packets</span></strong> <i><span class="varname">packet-number</span></i> | <strong><span>timeout</span></strong> <i><span class="varname">timeout-interval</span></i> }</span><p><p>The maximum number of ping packets that a DHCP server sends and the maximum timeout period of each ping reply are set.</p>
</p><p><p>Before assigning an IP address to a DHCP client, the DHCP server must ping the IP address to check whether this IP address is being used. This prevents address conflicts.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_server_cfg_0011.html">Configuring a DHCP Server
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_server_cfg_0013.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>