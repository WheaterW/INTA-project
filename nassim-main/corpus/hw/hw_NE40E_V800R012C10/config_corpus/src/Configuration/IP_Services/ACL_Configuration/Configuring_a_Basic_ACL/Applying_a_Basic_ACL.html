
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Applying a Basic ACL">
<meta name="abstract" content="Basic ACLs can be used in device management, routing policies, multicast packet filtering, and QoS services.">
<meta name="description" content="Basic ACLs can be used in device management, routing policies, multicast packet filtering, and QoS services.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_acl4_cfg_0048.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_acl4_cfg_0051.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_acl4_cfg_0053.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,aclvrp,z00485179,w00556928,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Services">
<meta name="OWNER" content="z00485179,z00648985">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172364583">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Applying a Basic ACL</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172364583"></a><a name="EN-US_TASK_0172364583"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Applying a Basic ACL</h1>
<div class="taskbody"><p>Basic ACLs can be used in device management, routing policies, multicast packet filtering, and QoS services.</p>
<div class="context"><a name="EN-US_TASK_0172364583__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p><a href="#EN-US_TASK_0172364583__tab_dc_vrp_acl4_cfg_005201">Table 1</a> describes the typical applications of basic ACLs.</p>

<div class="tableBorder"><a name="EN-US_TASK_0172364583__tab_dc_vrp_acl4_cfg_005201"></a><a name="tab_dc_vrp_acl4_cfg_005201"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172364583__tab_dc_vrp_acl4_cfg_005201" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Typical applications of basic ACLs</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="22.110552763819097%" id="mcps1.4.1.2.2.4.1.1" liSelected="liSelected"><p>Typical Application</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="29.145728643216078%" id="mcps1.4.1.2.2.4.1.2" liSelected="liSelected"><p>Usage Scenario</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="48.743718592964825%" id="mcps1.4.1.2.2.4.1.3" liSelected="liSelected"><p>Operation</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="3" valign="top" width="22.110552763819097%" headers="mcps1.4.1.2.2.4.1.1 "><p>Device management</p>
<p></p>
<p></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="29.145728643216078%" headers="mcps1.4.1.2.2.4.1.2 "><p>When a device functions as an FTP or TFTP server, configure a basic ACL on the device to allow only the clients that match specific ACL rules to access the server.</p>
</td>
<td class="cellrowborder" valign="top" width="48.743718592964825%" headers="mcps1.4.1.2.2.4.1.3 "><div class="p">For details on how to configure rights to access an FTP or TFTP server, see <ul><li><a href="dc_vrp_vfm_cfg_0011.html">Configuring FTP Access Control</a></li><li><a href="dc_vrp_basic_cfg_0090.html">Configuring TFTP Access Authority</a></li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.2.2.4.1.2 "><p>Configure a basic ACL to restrict the incoming or outgoing calls on VTY user interfaces.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.2.2.4.1.3 "><p>For details on how to configure the restriction on incoming and outgoing calls on VTY user interfaces, see <a href="dc_vrp_basic_cfg_0015.html">Setting Restrictions for Incoming and Outgoing Calls on VTY User Interfaces</a>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.2.2.4.1.2 "><p>Specify an NMS and manageable MIB objects for SNMP-based communication between the NMS and managed device to improve communication security.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.2.2.4.1.3 "><div class="p">For details on how to configure the NMS's right to access devices, see <ul><li><a href="dc_vrp_snmp_cfg_0006.html">Controlling the NM Station's Access to the Device (SNMPv1)</a></li><li><a href="dc_vrp_snmp_cfg_0011.html">Controlling the NM Station's Access to the Device (SNMPv2)</a></li><li><a href="dc_vrp_snmp_cfg_0017.html">Controlling the NM Station's Access to the Device (SNMPv3)</a></li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.110552763819097%" headers="mcps1.4.1.2.2.4.1.1 "><p>Multicast packet filtering</p>
</td>
<td class="cellrowborder" valign="top" width="29.145728643216078%" headers="mcps1.4.1.2.2.4.1.2 "><p>To filter multicast packets, configure a basic ACL to receive or forward only the multicast packets that match the ACL rules.</p>
</td>
<td class="cellrowborder" valign="top" width="48.743718592964825%" headers="mcps1.4.1.2.2.4.1.3 "><div class="p">For details on how to filter multicast packets, see <ul><li><a href="dc_vrp_multicast_cfg_0011.html">Setting a Multicast Source Address Range</a></li><li><a href="dc_vrp_multicast_cfg_0017.html">Setting a Legal C-RP Address Range</a></li><li><a href="dc_vrp_multicast_cfg_0019.html">Setting a Legal BSR Address Range</a></li><li><a href="dc_vrp_multicast_cfg_0024.html">Setting an SSM Group Address Range</a></li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.110552763819097%" headers="mcps1.4.1.2.2.4.1.1 "><p>Routing policies</p>
</td>
<td class="cellrowborder" valign="top" width="29.145728643216078%" headers="mcps1.4.1.2.2.4.1.2 "><p>To control the reception and advertisement of routing information on a device, configure a basic ACL on the device to allow the device to receive or advertise only the routes that match the ACL rules.</p>
</td>
<td class="cellrowborder" valign="top" width="48.743718592964825%" headers="mcps1.4.1.2.2.4.1.3 "><div class="p">For details on how to control the reception and advertisement of routing information on a device, see <ul><li><a href="dc_vrp_route-policy_cfg_0012.html">Applying Filters to the Received Routes</a></li><li><a href="dc_vrp_bgp_cfg_3115.html">Applying a Policy to BGP Route Acceptance</a></li><li><a href="dc_vrp_route-policy_cfg_0017.html">Applying Filters to the Advertised Routes</a></li><li><a href="dc_vrp_bgp_cfg_3114.html">Applying a Policy to BGP Route Advertisement</a></li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.110552763819097%" headers="mcps1.4.1.2.2.4.1.1 "><p>QoS services</p>
</td>
<td class="cellrowborder" valign="top" width="29.145728643216078%" headers="mcps1.4.1.2.2.4.1.2 "><p>To process different types of traffic, configure a basic ACL to perform traffic policing, traffic shaping, or traffic classification on traffic that matches the ACL rules.</p>
</td>
<td class="cellrowborder" valign="top" width="48.743718592964825%" headers="mcps1.4.1.2.2.4.1.3 "><p>For details on how to process different types of traffic, see Configuring the Traffic Policing Policy, Configuring Traffic Shaping, and Configuring Traffic Behaviors.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="postreq"><a name="EN-US_TASK_0172364583__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Typical Cases of Applying a Basic ACL</h4><ul><li><p><strong>Cases of applying a basic ACL in device management</strong></p>
<div class="p">For example, a user configures a device as follows: <ul><li><div class="p">Configuring a basic ACL for FTP login<pre class="screen">acl number 2001 
 rule 5 deny source 192.168.2.100 0 
 rule 10 permit
ftp acl 2001</pre>
</div>
<p>Matching result: Users with the IP address 192.168.2.100 are prohibited from logging in to the device using FTP.</p>
</li><li><div class="p">Configuring a basic ACL for Telnet login<pre class="screen">acl number 2001 
 rule 5 permit source 192.168.2.100 0 
 rule 10 deny 
user-interface vty 0 4 
 acl 2001 inbound</pre>
</div>
<p>Matching result: Only users with the IP address 192.168.2.100 are allowed to log in to the device using Telnet.</p>
</li><li><div class="p">Configuring a basic ACL for SNMP login<pre class="screen">acl number 2001 
 rule 5 deny source 192.168.2.100 0 
 rule 10 permit
snmp-agent community read cipher public acl 2001</pre>
</div>
<p>Matching result: Users with the IP address 192.168.2.100 are prohibited from logging in to the device using SNMP.</p>
</li></ul>
</div>
</li><li><p><strong>Case of applying a basic ACL in multicast packet filtering</strong></p>
<div class="p">For example, a user configures a device as follows:<pre class="screen">acl number 2001
 rule 5 permit source 10.10.1.2 0
 rule 10 deny source 10.10.1.1 0
pim
 source-policy 2001</pre>
</div>
<p>Matching result: The device permits multicast packets containing the source address 10.10.1.2 whereas discarding those containing the source address 10.10.1.1.</p>
</li><li><p><strong>Cases of applying a basic ACL in routing policies</strong></p>
<div class="p">For example, a user configures a device as follows:<ul><li><p>A route-policy of a routing protocol is used to filter routes.</p>
<pre class="screen">ip route-static 1.1.1.10 255.255.255.0 NULL0
ip route-static 192.168.2.0 255.255.255.0 NULL0
ip route-static 192.168.2.100 255.255.255.255 NULL0
bgp 1
 peer 10.1.1.1 as-number 1
 ipv4-family unicast<span>
  undo synchronization</span>
  import-route static route-policy test
peer 10.1.1.1 enable
</pre>
<pre class="screen">route-policy test permit node 0
 if-match acl 2001
acl number 2001
 rule 5 permit source 192.168.2.100 0
 rule 10 deny source 1.1.1.10 0.0.0.255
</pre>
<p>Matching result: Routes from the network segments 1.1.1.10 and 192.168.2.0 are filtered out, whereas the route 192.168.2.100 is permitted.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>Routes from the network segment 1.1.1.10 are filtered out, because the action defined in the ACL rule that the routes match is <strong>deny</strong>.</li><li>Routes from the network segment 192.168.2.0 do not match any specified ACL rules. By default, the device matches the routes with the last ACL rule. The action defined in the last ACL rule is <strong>deny</strong>, and therefore the routes are filtered out.</li><li>The route 192.168.2.100 is permitted, because the action defined in the ACL rule that the route matches is <strong>permit</strong> and the action defined in the route-policy is also <strong>permit</strong>.</li></ul>
</div></div>
<pre class="screen">route-policy test permit node 0 
 if-match acl 2001 
 apply cost 100 
route-policy test permit node 1 
 apply cost 200
acl number 2001 
 rule 5 permit source 192.168.2.100 0 
</pre>
<p>Matching result: The cost of the route 192.168.2.100 is changed to 100, whereas the costs of other routes are changed to 200.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In the preceding route-policy, permit is specified for node 0, the route 192.168.2.100/32 passes the check by the if-match clause, and the device takes the action (<strong>apply cost 100</strong>) specified in the apply clause. As a result, the cost of the route is changed to 100. The other routes do not pass the check by the if-match clause, and the device takes the action (<strong>apply cost 200</strong>) specified in node 1 in the route-policy. As a result, the costs of these routes are changed to 200.</p>
</div></div>
<pre class="screen">route-policy test deny node 0 
 if-match acl 2001 
 apply cost 100 
route-policy test permit node 1 
 apply cost 200
acl number 2001 
 rule 5 permit source 192.168.2.100 0 
</pre>
<div class="p">Matching result: The cost of the route 192.168.2.100/32 is not changed to 100.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In the preceding route-policy, deny is specified for node 0, the route 192.168.2.100/32 passes the check by the if-match clause, and the device does not take the action (<strong>apply cost 100</strong>) specified in the apply clause. As a result, the cost of the route is not changed to 100. The other routes do not pass the check by the if-match clause, and the device takes the action (<strong>apply cost 200</strong>) specified in node 1 in the route-policy. As a result, the costs of these routes are changed to 200.</p>
</div></div>
</div>
</li><li><p>A filter-policy of a routing protocol is used to filter routes.</p>
<pre class="screen">ip route-static 1.1.1.10 255.255.255.0 NULL0
ip route-static 192.168.2.0 255.255.255.0 NULL0  
ip route-static 192.168.2.100 255.255.255.255 NULL0 
bgp 1
 peer 10.1.1.2 as-number 1 
 ipv4-family unicast <span>
  undo synchronization</span> 
  filter-policy 2001 export 
  import-route static  
peer 10.1.1.2 enable 
acl number 2001
 rule 5 permit source 192.168.2.100 0 
 rule 10 deny source 1.1.1.10 0.0.0.255 
</pre>
<p>Matching result: Routes from the network segments 1.1.1.10 and 192.168.2.0 are filtered out, whereas the route 192.168.2.100 is permitted.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>Routes from the network segment 1.1.1.10 are filtered out, because the action defined in the ACL rule that the routes match is <strong>deny</strong>.</li><li>Routes from the network segment 192.168.2.0 do not match any specified ACL rules. By default, the device matches the routes with the last ACL rule. The action defined in the last ACL rule is <strong>deny</strong>, and therefore the routes are filtered out.</li><li>The route 192.168.2.100 is permitted, because the action defined in the ACL rule that the route matches is <strong>permit</strong> and the action defined in the filter-policy is <strong>export</strong>.</li></ul>
</div></div>
</li></ul>
</div>
</li><li><p><strong>Cases of applying a basic ACL in QoS services</strong></p>
<div class="p">For example, a user configures a device as follows:<ul><li><div class="p">Configuring a basic ACL in firewall traffic behavior (packet filtering)<pre class="screen">acl number 2001
 rule 5 permit source 192.168.0.0 0.255.255.255
 rule 10 deny source 10.0.0.0 0.255.255.255
traffic classifier acl 
 if-match acl 2001
traffic behavior test
 deny
traffic policy test
 classifier acl behavior test
interface GigabitEthernet<span>0/1/1</span>
 traffic-policy test inbound</pre>
</div>
<div class="p">GE <span>0/1/1</span> receives the following packets:<ul><li>Packet 1 with the source IP address 192.168.0.1/24</li><li>Packet 2 with the source IP address 10.0.0.1/24</li><li>Packet 3 with the source IP address 172.16.0.1/24</li></ul>
</div>
<p>Matching result: Packets 1 and 2 are discarded but packet 3 is permitted.</p>
</li><li><div class="p">Configuring a basic ACL in common traffic behavior<pre class="screen">acl number 2001
 rule 5 permit source 192.168.0.0 0.255.255.255
 rule 10 deny source 10.0.0.0 0.255.255.255
traffic classifier acl 
 if-match acl 2001
traffic behavior test
 remark ip-precedence 7
traffic policy test
 classifier acl behavior test
interface GigabitEthernet<span>0/1/1</span>
 traffic-policy test inbound</pre>
</div>
<div class="p">GE <span>0/1/1</span> receives the following packets:<ul><li>Packet 1 with the source IP address 192.168.0.1/24 and IP precedence 0</li><li>Packet 2 with the source IP address 10.0.0.1/24 and IP precedence 0</li><li>Packet 3 with the source IP address 172.16.0.1/24 and IP precedence 0</li></ul>
</div>
<p>Matching result: Packet 1 is permitted, and its IP precedence is re-marked 7; packet 3 is permitted, and its IP precedence remains 0; packet 2 is discarded.</p>
</li></ul>
</div>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_acl4_cfg_0048.html">Configuring a Basic ACL
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_acl4_cfg_0051.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_acl4_cfg_0053.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>