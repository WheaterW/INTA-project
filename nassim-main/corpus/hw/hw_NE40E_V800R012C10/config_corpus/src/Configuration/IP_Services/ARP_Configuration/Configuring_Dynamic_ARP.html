
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Dynamic ARP">
<meta name="abstract" content="Hosts and Routers can learn dynamic ARP entries by default. However, you can adjust dynamic ARP aging parameters or optimize the ARP entry update policy.">
<meta name="description" content="Hosts and Routers can learn dynamic ARP entries by default. However, you can adjust dynamic ARP aging parameters or optimize the ARP entry update policy.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_arp_cfg_2030.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_arp_cfg_2033.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_arp_cfg_2036.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="y00852169,x00504385">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="ARP">
<meta name="featuretype" content="IP Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ARP">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="ARP">
<meta name="featuretype" content="IP Services">
<meta name="OWNER" content="y00852169">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x00504385">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172364456">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Dynamic ARP</title>
</head>
<body><a name="EN-US_TASK_0172364456"></a><a name="EN-US_TASK_0172364456"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Dynamic ARP</h1>
<div class="taskbody"><p>Hosts and <span class="keyword">Router</span>s can learn dynamic ARP entries by default. However, you can adjust dynamic ARP aging parameters or optimize the ARP entry update policy.</p>
<div class="context"><a name="EN-US_TASK_0172364456__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><div class="p">ARP aging parameters include the aging time, number of ARP aging probes, and ARP aging probe interval. Proper setting of these aging parameters can improve network reliability:<ul><li><p>Aging time: When the aging time of a dynamic ARP entry expires, a device sends an ARP probe packet (ARP Request message) from the outbound interface recorded in the dynamic ARP entry, and starts counting the number of ARP probes.</p>
</li><li><p>Number of ARP aging probes: Before deleting an aged dynamic ARP entry, a device sends ARP probe packets to the IP address recorded in the ARP entry at specified intervals. If the configured number of ARP aging probes is exceeded but the ARP entry has not been updated, the device will delete the ARP entry.</p>
</li><li><p>ARP aging probe interval: It is the interval at which probe packets are sent.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ol><li><p>If the aging time of dynamic ARP entries is set too short, for example, 1 minute, the device will be busy updating dynamic ARP entries. This consumes a lot of system resources and affects the processing of other services.</p>
</li><li><p>Length of time before the deletion of a dynamic ARP entry = Number of ARP aging probes x Probe interval</p>
<p>Setting a long probe interval is not recommended, because a long interval will delay the deletion of an aged dynamic ARP entry according to the formula.</p>
</li></ol>
</div></div>
</li></ul>
</div>
<p>After the Layer 2 topology detection function is enabled, the aging time of all ARP entries corresponding to the VLAN to which a Layer 2 interface belongs is set to 0 when the status of the Layer 2 interface changes from Down to Up. Then the device resends ARP probe packets to update all ARP entries.</p>
<p>After the device is disabled from responding to TC messages on a ring network, it does not age or delete ARP entries after receiving TC messages, reducing resource consumptions caused by frequent ARP entry updates and minimizing adverse impacts on user services.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172364456__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring dynamic ARP, complete the following tasks:</p>
<ul><li><p>Connect interfaces and set their physical parameters to ensure that the physical status of the interfaces is Up.</p>
</li><li><p>Configure link layer protocol parameters for interfaces to ensure that the link layer protocol status of the interfaces is Up.</p>
</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172364456__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Adjust dynamic ARP aging parameters.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=arp+expire-time"><b><span class="cmdname">arp expire-time</span></b></a> <i><span class="varname">expire-time</span></i></span><p><p>The aging time is set for dynamic ARP entries.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In specific scenarios, after MAC entries are aged, the VLANIF interface fails to obtain the Layer 2 outbound interface and broadcast a unicast packet in the VLAN. To ensure service security, you can run the <a href="cmdqueryname=arp+expire-time"><b><span class="cmdname">arp expire-time</span></b></a> <i><span class="varname">expire-time</span></i> <a href="cmdqueryname=vlanif"><b><span class="cmdname">vlanif</span></b></a> command to set the aging time for dynamic ARP entries on all VLANIF interfaces to a value smaller than the aging time for MAC entries. This prevents unicast packets from being broadcast due to Layer 2 outbound interface mismatch.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=arp+detect-times"><b><span class="cmdname">arp detect-times</span></b></a> <i><span class="varname">detect-times</span></i></span><p><p>The number of ARP aging probes is set.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=arp+detect-interval"><b><span class="cmdname">arp detect-interval</span></b></a> <i><span class="varname">detect-interval</span></i></span></span><p><p>The interval for sending ARP aging probe packets is set.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=arp+detect-mode+unicast"><b><span class="cmdname">arp detect-mode unicast</span></b></a></span><p><p>The interface is configured to unicast ARP aging probe packets.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Enable Layer 2 topology detection.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=l2-topology+detect+enable"><b><span class="cmdname">l2-topology detect enable</span></b></a></span><p><p>Layer 2 topology detection is enabled.</p>
</p><p></p></li></ol>
</li><li><span>Disable the device from responding to TC packets.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=arp+topology-change+disable"><b><span class="cmdname">arp topology-change disable</span></b></a></span></span><p><p>The device is disabled from responding to TC packets.</p>
</p><p></p></li></ol>
</li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0172364456__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring dynamic ARP, verify the configuration.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+arp+all"><b><span class="cmdname">display arp all</span></b></a> command to check the ARP mapping tables on the main control boards and all interface boards.</p>
</li><li><p>Run the <a href="cmdqueryname=display+arp+interface"><b><span class="cmdname">display arp interface</span></b></a> <i><span class="varname">interface-name</span></i> command to check the ARP mapping table on a specified interface.</p>
</li><li><p>Run the <a href="cmdqueryname=display+arp+slot"><b><span class="cmdname">display arp slot</span></b></a> <i><span class="varname">slot-id</span></i> command to check the ARP mapping table on the board in a specified slot.</p>
</li><li><p>Run the <a href="cmdqueryname=display+arp+vpn-instance"><b><span class="cmdname">display arp vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> [ <strong><span>dynamic</span></strong> | <strong><span>static</span></strong> ] command to check the ARP mapping table of a specified VPN instance.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_arp_cfg_2030.html">ARP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_arp_cfg_2033.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_arp_cfg_2036.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>