
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Recording Exchange Messages with a DHCP Relay Client">
<meta name="abstract" content="A DHCP relay agent can record information exchanged between DHCP servers and clients based on a specific option or sub-option in DHCP messages to facilitate fault location.">
<meta name="description" content="A DHCP relay agent can record information exchanged between DHCP servers and clients based on a specific option or sub-option in DHCP messages to facilitate fault location.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_relay_cfg_0007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_relay_cfg_0009.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,z00485179,w00556928,w00606909,dhcpvrp">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DHCP">
<meta name="featuretype" content="IP Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DHCP">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="DHCP">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="DHCP">
<meta name="featuretype" content="IP Services">
<meta name="OWNER" content="z00485179,x00504385">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x00504385">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0139427838">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Recording Exchange Messages with a DHCP Relay Client</title>
</head>
<body><a name="EN-US_TASK_0139427838"></a><a name="EN-US_TASK_0139427838"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Recording Exchange Messages with a DHCP Relay Client</h1>
<div class="taskbody"><p>A DHCP relay agent can record information exchanged between DHCP servers and clients based on a specific option or sub-option in DHCP messages to facilitate fault location.</p>
<div class="context"><a name="EN-US_TASK_0139427838__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>If a DHCP client cannot obtain an IP address properly, a DHCP relay agent can be configured to record the information exchanged between DHCP servers and DHCP clients to help locate the fault. Then, the DHCP relay agent records the information exchanged between the DHCP client and server based on the specified option code and sub-option code in DHCP messages.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0139427838__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>(Optional) Run the <a href="cmdqueryname=reset+dhcp+relay+client-info"><b><span class="cmdname">reset dhcp relay client-info</span></b></a> [ <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <strong><span>pevlan</span></strong> <i><span class="varname">pevlan-id</span></i> [ <i><span class="varname">end-pevlan-id</span></i> ] [ <strong><span>cevlan</span></strong> <i><span class="varname">cevlan-id</span></i> [ <i><span class="varname">end-cevlan-id</span></i> ] ] ] | <strong><span>mac-address</span></strong> <i><span class="varname">mac-address</span></i> | <strong><span>option</span></strong> <i><span class="varname">option-value</span></i> ] command in the user view to clear the saved historical records about the interaction between a DHCP client and DHCP server through the DHCP relay agent.</span><p><div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><ul><li>The historical records about interaction through the DHCP relay agent cannot be restored after being cleared. Exercise caution when running the <a href="cmdqueryname=reset+dhcp+relay+client-info"><b><span class="cmdname">reset dhcp relay client-info</span></b></a> command.</li></ul>
</div></div>
</p><p></p><p></p></li><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run <span><a href="cmdqueryname=dhcp+relay+client-info"><b><span class="cmdname">dhcp relay client-info</span></b></a> <strong><span>option</span></strong> <i><span class="varname">option-code</span></i> [ <strong><span>sub-option</span></strong> <i><span class="varname">sub-option-code</span></i> ]</span></span><p><p>The DHCP relay agent has been configured to specify the DHCP messages to recorded.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0139427838__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+dhcp+relay+client-info+option+configuration"><b><span class="cmdname">display dhcp relay client-info option configuration</span></b></a> command in any view to view the DHCP option code or sub-option code based on which the DHCP relay agent records DHCP messages.</li><li>Run the <a href="cmdqueryname=display+dhcp+relay+client-info"><b><span class="cmdname">display dhcp relay client-info </span></b></a>[ <strong><span>interface</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } [ <strong><span>pevlan</span></strong> <i><span class="varname">pevlan-id</span></i> [ <i><span class="varname">end-pevlan-id</span></i> ] [ <strong><span>cevlan</span></strong> <i><span class="varname">cevlan-id</span></i> [ <i><span class="varname">end-cevlan-id</span></i> ] ] ] | <strong><span>mac-address</span></strong> <i><span class="varname">mac-address</span></i> | <strong><span>option</span></strong> <i><span class="varname">option-value</span></i> ] command in any view to view history records of the information exchanged between the DHCP client and server over the DHCP relay agent.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_relay_cfg_0007.html">DHCP Relay Maintenance
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcp_relay_cfg_0009.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>