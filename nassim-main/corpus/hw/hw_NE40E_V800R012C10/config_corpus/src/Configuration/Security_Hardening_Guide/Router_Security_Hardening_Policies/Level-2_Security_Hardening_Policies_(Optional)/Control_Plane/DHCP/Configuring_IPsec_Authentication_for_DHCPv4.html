
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Configuring IPsec Authentication for DHCPv4">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_maintenance_0094.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_maintenance_0092.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_maintenance_0105.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00588052,w00845984,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="OWNER" content="z00588052,x00504385">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x60031980">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001153644428">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring IPsec Authentication for DHCPv4</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CONCEPT_0000001153644428"></a><a name="EN-US_CONCEPT_0000001153644428"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IPsec Authentication for DHCPv4</h1>
<div><p></p>
<div class="section"><h4 class="sectiontitle">Security Policy</h4><p>After IPsec authentication is enabled on a DHCPv4 relay agent and server, these two devices insert the SPI of the bound IPsec SA into DHCPv4 messages and encrypt them based on the security proposal of the bound IPsec SA before sending such messages. After receiving these messages, the DHCPv4 relay agent and server perform IPsec decryption and authentication. If the decryption or authentication fails, the relay agent and server discard the messages. The relay agent and server then check whether the SPI in the messages is the same as that in the bound IPsec SA. If they are different, the relay agent and server discard the messages.</p>
<p></p>
</div>
<div class="section"><h4 class="sectiontitle">Attack Methods</h4><p>A DHCPv4 relay agent may receive forged DHCPv4 messages from a bogus DHCPv4 server, exposing it to DoS attacks. Similarly, a DHCPv4 server may receive forged DHCPv4 messages from a bogus DHCPv4 relay agent, exposing it to DoS attacks.</p>
</div>
<div class="section"><h4 class="sectiontitle">Configuration and Maintenance Methods</h4><div class="p">Configure IPsec authentication for DHCPv4 in the system view.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> dhcp ipsec sa sa1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Before running the <strong>dhcp ipsec</strong> command, you must configure an IPsec SA. For details, see "IPsec Configuration."</p>
</div></div>
</div>
</div>
<div class="section"><h4 class="sectiontitle">Configuration and Maintenance Suggestions</h4><p>Note that configuring this function affects user access.</p>
</div>
<div class="section"><h4 class="sectiontitle">Verifying the Security Hardening Result</h4><p>Run the <a href="cmdqueryname=display+dhcp+relay+statistics"><b><span class="cmdname">display dhcp relay statistics </span></b></a>[ <strong><span>interface</span></strong> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> } ] command to check packet statistics on the DHCP relay agent.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_maintenance_0094.html">DHCP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_maintenance_0092.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_maintenance_0105.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>