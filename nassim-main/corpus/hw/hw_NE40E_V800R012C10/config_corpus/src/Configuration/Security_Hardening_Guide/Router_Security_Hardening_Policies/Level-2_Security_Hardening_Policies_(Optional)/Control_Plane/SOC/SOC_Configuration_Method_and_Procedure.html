
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="SOC Configuration Method and Procedure">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_sec_enhance_1040.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00588052">
<meta name="DC.Publisher" content="20240229">
<meta name="OWNER" content="z00588052,w00843073">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="q00517581">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001134463694">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>SOC Configuration Method and Procedure</title>
</head>
<body><a name="EN-US_TASK_0000001134463694"></a><a name="EN-US_TASK_0000001134463694"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">SOC Configuration Method and Procedure</h1>
<div class="taskbody"><div class="steps"><a name="EN-US_TASK_0000001134463694__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=soc"><b><span class="cmdname">soc</span></b></a></span></span></li><li><span>(Optional) Run <span><a href="cmdqueryname=attack-defend+enable"><b><span class="cmdname">attack-defend enable</span></b></a></span></span><p><p>Attack defense is enabled.</p>
<p>If the SOC determines that an attack event has occurred, enable attack defense.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=display+soc+attack-defend+statistics"><b><span class="cmdname">display soc attack-defend statistics</span></b></a> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> <strong><span>port-vlan-car</span></strong> command to check statistics about the packets that pass through or are discarded by interfaces being attacked on the board in a specified slot.</span><p><p>After attack defense is enabled and the <span class="keyword">NE40E</span> is being attacked, you can run this command.</p>
</p></li><li><span>Configure thresholds for determining attack events.</span><ul><li>To configure the threshold for determining the location of an attack event, run the <a href="cmdqueryname=attack-trace+location-type"><b><span class="cmdname">attack-trace location-type</span></b></a> { <strong><span>interface</span></strong> | <strong><span>qinq</span></strong> | <strong><span>source-ip</span></strong> | <strong><span>source-mac</span></strong> | <strong><span>sub-interface</span></strong> | <strong><span>vlan</span></strong> } <strong><span>threshold</span></strong> <i><span class="varname">threshold-value</span></i> command.</li></ul>
<ul><li>To configure the threshold for determining the probability of an attack event, run the <a href="cmdqueryname=attack-trace+probability"><b><span class="cmdname">attack-trace probability</span></b></a> { <strong><span>top5-user</span></strong> | <strong><span>top5-source-mac</span></strong> | <strong><span>top5-source-ip</span></strong> | <strong><span>broadcast-flood</span></strong> | <strong><span>app-error-percent</span></strong> } { <strong><span>determined</span></strong> | <strong><span>notification</span></strong> | <strong><span>suspicion</span></strong> } <i><span class="varname">threshold-value</span></i> command.</li><li>To configure the threshold for determining the cause of an attack event, run the <a href="cmdqueryname=attack-trace+reason"><b><span class="cmdname">attack-trace reason</span></b></a> { <strong><span>app-packet</span></strong> | <strong><span>broadcast-flood</span></strong> | <strong><span>change-source-packet</span></strong> } <strong><span>percentage</span></strong> <i><span class="varname">percentage-value</span></i> command.</li></ul>
</li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001134463694__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Verifying the Security Hardening Result</h4><ol><li>Check attack event reports.<ol type="a"><li>Run the <a href="cmdqueryname=display+soc+attack-event"><b><span class="cmdname">display soc attack-event</span></b></a> command to check brief information about attack event reports.</li><li>Run the <strong><b><span class="cmdname">display soc attack-event</span></b> </strong>[ { <strong>slot</strong> <em>slot-id</em> [ <strong>event-number</strong> <em>event-number</em> ] [ <strong>verbose</strong> ] | <strong>event-number</strong> <em>event-number</em> [ <strong>verbose</strong> ] } ] command to check the attack event report about the board in a specified slot. The slot is identified by the <strong>Location</strong> field in the command output. To check detailed information, specify the <strong><span>verbose</span></strong> parameter.</li><li>Run the <a href="cmdqueryname=display+soc+attack-event"><b><span class="cmdname">display soc attack-event</span></b></a> <strong><span>event-number</span></strong> <i><span class="varname">event-number</span></i> [ <strong><span>verbose</span></strong> ] command to check information about the specified attack event report. The specified attack event is identified by checking the <strong>Seq.</strong> field in the attack event summary or information about attack events on the board in a specified slot.</li></ol>
</li><li>Check historical statistics.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <i><span class="varname">slot-id</span></i> and <i><span class="varname">protocol-name</span></i> parameters in the following commands correspond to the <i><span class="varname">slot-id</span></i> parameter in the <a href="cmdqueryname=display+soc+attack-event"><b><span class="cmdname">display soc attack-event</span></b></a> command and the <strong>Reasons</strong> parameter in the <a href="cmdqueryname=display+soc+attack-event"><b><span class="cmdname">display soc attack-event</span></b></a> command output, respectively.</p>
</div></div>
<p>Check CPCAR statistics.</p>
<ol type="a"><li>Run the <a href="cmdqueryname=display+soc+attack-detect+statistics+car"><b><span class="cmdname">display soc attack-detect statistics car</span></b></a><span> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i></span> <strong><span>protocol</span></strong> <i><span class="varname">protocol-name</span></i> command to check all CPCAR statistics monitored by the SOC. Identify <strong>CarName</strong> of the CPCAR with the highest packet loss rate or the largest number of lost packets. CAR is a traffic policing instance. CPCAR functions for packets to be sent to the CPU.</li><li>Run the <a href="cmdqueryname=display+soc+attack-detect+statistics+car"><b><span class="cmdname">display soc attack-detect statistics car</span></b></a><span> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i></span> <strong><span>protocol</span></strong> <i><span class="varname">protocol-name</span></i> [ <i><span class="varname">cpcar-name</span></i> <strong><span>history</span></strong> { <strong><span>15-minute</span></strong> | <strong><span>60-minutes</span></strong> | <strong><span>72-hour</span></strong> } ] command to check the packet loss rate of the protocol packets identified by <i><span class="varname">cpcar-name</span></i> within a specified period.</li><li>Run the <a href="cmdqueryname=display+soc+attack-detect+cpu-usage"><b><span class="cmdname">display soc attack-detect cpu-usage</span></b></a><span> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i></span> <strong><span>history</span></strong> { <strong><span>15-minutes</span></strong> | <strong><span>60-minutes</span></strong> | <strong><span>72-hours</span></strong> } command to check the CPU usage within a specified period. If the CPU usage and packet loss rate within a specified period have similar tendencies, the CPU overload is caused by the protocol packets identified by <i><span class="varname">cpcar-name</span></i>.</li></ol>
<div class="p">Check protocol statistics.<ol type="a"><li>Run the <a href="cmdqueryname=display+soc+attack-detect+statistics+application"><b><span class="cmdname">display soc attack-detect statistics application</span></b></a><span> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i></span> command to check statistics about the protocol packets and sessions <span>on the board in a specified slot</span>. Identify the protocol module that has the largest percentage of the number of invalid packets or sessions to the total number of packets or sessions. This protocol module can be considered to have the poorest security.</li><li>Run the <a href="cmdqueryname=display+soc+attack-detect+statistics+application"><b><span class="cmdname">display soc attack-detect statistics application</span></b></a><span> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i></span> <strong><span>protocol</span></strong> <i><span class="varname">protocol-name</span></i> <strong><span>history</span></strong> { <strong><span>15-minute</span></strong> | <strong><span>60-minutes</span></strong> | <strong><span>72-hour</span></strong> } command to check statistics about the protocol packets and sessions and the average CPU usage within the last 15 minutes, 1 hour, or 72 hours. If the CPU usage is high while the percentage of the number of invalid packets or sessions to the total number of packets or sessions is high, attacks to the protocol module cause the CPU overload. If you cannot identify the problem by querying the average CPU usage, run the following command to check detailed information about the CPU usage within the specified period.</li><li>(Optional) Run the <a href="cmdqueryname=display+soc+attack-detect+cpu-usage"><b><span class="cmdname">display soc attack-detect cpu-usage</span></b></a><span> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i></span> <strong><span>history</span></strong> { <strong><span>15-minutes</span></strong> | <strong><span>60-minutes</span></strong> | <strong><span>72-hours</span></strong> } command to check detailed information about the CPU usage within a specified period.</li></ol>
</div>
</li></ol>
<p></p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_sec_enhance_1040.html">SOC
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
</div>
</div>
</body>
</html>