
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="LDP">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_maintenance_0041.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_maintenance_0042.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00588052">
<meta name="DC.Publisher" content="20240229">
<meta name="OWNER" content="z00588052,w00843073">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x60031980">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001134463730">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>LDP</title>
</head>
<body><a name="EN-US_TASK_0000001134463730"></a><a name="EN-US_TASK_0000001134463730"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">LDP</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001134463730__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><div class="p"><h4 class="sectiontitle">Security Policy</h4><ul><li><p>LDP MD5 authentication</p>
<p>Message-Digest Algorithm 5 (MD5) is a digest algorithm defined in relevant standards. MD5 is typically used to calculate a message digest to prevent message spoofing. The MD5 message digest is a unique result calculated using an irreversible character string conversion. If a message is modified during transmission, a different digest is calculated. In this way, after a message arrives at the receive end, the receive end determines that the message has been modified during transmission if the newly calculated digest is different from the carried digest.</p>
<p>LDP MD5 authentication identifies LDP message modification by generating unique message digest for the same information segment. It is stricter than common TCP checksum-based authentication.</p>
<p>LDP MD5 authentication is performed before LDP messages are sent over TCP. A unique message digest is added following the TCP header in a message. The message digest is calculated using the MD5 algorithm based on the TCP header, LDP message, and user-defined password.</p>
<p>When receiving the message, the receive end obtains the TCP header, message digest, and LDP message. MD5 generates the message digest based on the TCP header, LDP message and the locally saved password. Then, it compares the calculated message digest with the message digest carried in the LDP message. If they are different, the receive end interprets the LDP message as having been tampered with.</p>
<p>A password can be set either in non-ciphertext or ciphertext. These two modes differ in how passwords are recorded in the configuration file. In non-ciphertext mode, a user-defined password is directly recorded in the configuration file; however, in ciphertext mode, a password is encrypted using a special algorithm and then recorded in the configuration file.</p>
<p>Characters set by users are used in digest calculation, regardless of whether a password is recorded in non-ciphertext or ciphertext mode. Although the conversion algorithms of the non-ciphertext and ciphertext are proprietary to different vendors, those proprietary algorithms become transparent to other vendors by this way.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>As MD5 is insecure, you are advised to use a more secure authentication mode.</p>
</div></div>
</li><li><p>LDP keychain authentication</p>
<p>Keychain is an enhanced encryption algorithm. Similar to MD5, it calculates a digest for a piece of information to prevent LDP packets from being tampered with.</p>
<p>Keychain allows users to define a group of passwords to form a password string. Each password is assigned encryption and decryption algorithms, such as MD5 and secure hash algorithm-1 (SHA-1), and a validity period. The system selects a valid password before sending or receiving a packet. Within the validity period of the password, the system uses the encryption algorithm matching the password to encrypt the packet before sending it. The system also uses the decryption algorithm matching the password to decrypt the packet before accepting the packet. In addition, the system can automatically use a new password after the previous password expires, preventing the password from being decrypted.</p>
<p>The password of keychain authentication, the encryption and decryption algorithms, and the expiration period of the password can be configured separately on a keychain configuration node. A keychain configuration node at least requires one password and has the encryption and decryption algorithms specified.</p>
<p>To reference a keychain configuration node, specify a peer IP address and a node name in the MPLS-LDP view. The keychain configuration node is then used to encrypt an LDP session. Multiple peers can reference the same keychain configuration node.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>LDP authentication configurations are prioritized in descending order: for a single peer, for a specified peer group, for all peers. Keychain and MD5 configurations of the same priority are mutually exclusive. Keychain or MD5 authentication can be configured simultaneously for a specified LDP peer, for the peer group of this LDP peer, and for all LDP peers. The configuration with a higher priority takes effect. For example, if MD5 authentication is configured for Peer1 and then keychain authentication is configured for all LDP peers, MD5 authentication takes effect on Peer1. Keychain authentication takes effect on other peers.</p>
<div class="p">You can configure either LDP MD5 authentication or LDP keychain authentication in a specific scenario:<ul><li><p>The MD5 algorithm is easy to configure and generates a single password which can only be changed manually. MD5 authentication applies to networks requiring short-period encryption.</p>
</li><li><p>Keychain authentication involves a set of passwords and uses a new password each time the previous one expires. Keychain authentication is complex to configure and applies to networks requiring high security.</p>
</li></ul>
</div>
</div></div>
</li><li><p>LDP GTSM</p>
<p>LDP GTSM is the application of the GTSM in LDP.</p>
<p>GTSM determines whether a packet is valid by checking its TTL. This protects devices from attacks. GTSM for LDP involves applying GTSM to LDP messages between adjacent devices or devices close to each other (based on the number of next hops). A TTL value range is then set. The LDP messages with TTLs not within the specified value range are interpreted as attack messages and discarded.</p>
</li><li>LDP TCP-AO authentication<p>The TCP Authentication Option (TCP-AO) is used to authenticate received and to-be sent packets during TCP session establishment and data exchange. It supports packet integrity check to prevent TCP replay attacks.</p>
</li></ul>
<h4 class="sectiontitle">Attack Methods</h4><p>None.</p>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001134463730__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure LDP MD5 authentication<span> for a single LDP peer</span>.</span><ol><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep159084684214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd297744164214333">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname1954457181214047">system-view</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p1987459643214333">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep1942147277214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd1007784189214333">Run <a href="cmdqueryname=mpls+ldp"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname2121265975214047">mpls ldp</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p855841276214333">The MPLS-LDP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep598018957214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd9116124616583">Run <a href="cmdqueryname=md5-password+plain+cipher"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname1466135879214047">md5-password</span></b></a> { <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdparmname501422936214047">plain</span></strong> | <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdparmname241075495214047">cipher</span></strong> } <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_varname156341366214047">peer-lsr-id</span></i> <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_varname491433622214047">password</span></i></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p173931134165819">MD5 authentication is enabled, and an authentication password is set.</p>
</p><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p545118428289">For security purposes, you are advised not to use weak security algorithms in this feature. If you need to use such an algorithm, run the <a href="cmdqueryname=undo+crypto+weak-algorithm+disable"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname5189911192312">undo crypto weak-algorithm disable</span></b></a> command to enable the weak security algorithm function.</p>
</p><p><div class="note" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_note353038209214047"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_ul389508518213918"><li id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_li1977065046213918"><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_password_tips_1"><a name="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_li1977065046213918"></a><a name="en-us_task_0172368530_en-us_task_0000001143239100_li1977065046213918"></a>The new password is at least eight characters long and contains at least two of the following types: upper-case letters, lower-case letters, digits, and special characters, except the question mark (?) and space.</p>
</li><li id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_li363226100213918"><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_password_tips_2"><a name="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_li363226100213918"></a><a name="en-us_task_0172368530_en-us_task_0000001143239100_li363226100213918"></a>For security purposes, you are advised to configure a password in ciphertext mode. To further improve device security, periodically change the password.</p>
</li></ul>
</div></div>
<p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p15862002214047">A password can be set either in non-ciphertext or ciphertext. These two modes differ in how passwords are recorded in the configuration file. In non-ciphertext mode, a user-defined password is directly recorded in the configuration file; however, in ciphertext mode, a password is encrypted using a special algorithm and then recorded in the configuration file.</p>
<div class="notice" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_note665440793214047"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><ul id="EN-US_TASK_0000001134463730__en-us_task_0172368530_ul2116058022214047"><li id="EN-US_TASK_0000001134463730__en-us_task_0172368530_li1710435101214047"><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p1066643765214047"><a name="EN-US_TASK_0000001134463730__en-us_task_0172368530_li1710435101214047"></a><a name="en-us_task_0172368530_li1710435101214047"></a>If you configure a password in non-ciphertext, the password will be saved in the same way in the configuration file. The non-ciphertext mode has high security risks, and therefore the ciphertext mode is recommended. In addition, change the password periodically.</p>
</li><li id="EN-US_TASK_0000001134463730__en-us_task_0172368530_li1546506710214047"><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p1143695329214047"><a name="EN-US_TASK_0000001134463730__en-us_task_0172368530_li1546506710214047"></a><a name="en-us_task_0172368530_li1546506710214047"></a>Configuring LDP MD5 authentication causes an LDP session to be reestablished and deletes the LSP associated with the original LDP session.</p>
</li></ul>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep1873748170214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd1385293582214047">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname1514413827214047">commit</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p98732312612">The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure LDP MD5 authentication for LDP peers in a specified LDP peer group.</span><ol><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep1782168710214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd1421671914214333">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname698913016214047">system-view</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p1239192393214333">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep2129049266214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd1805572261214333">Run <a href="cmdqueryname=mpls+ldp"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname1299289886214047">mpls ldp</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p142307246214333">The MPLS-LDP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep1332950369214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd15529113675311">Run <a href="cmdqueryname=md5-password+plain+cipher+peer-group"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname82105666214047">md5-password</span></b></a> { <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdparmname455197352214047">plain</span></strong> | <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdparmname1761550669214047">cipher</span></strong> } <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdparmname1745091017214047">peer-group</span></strong> <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_varname343475421214047">ip-prefix-name</span></i> <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_varname323796901214047">password</span></i></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p9728184115317">MD5 authentication is enabled for a specified peer group, and an authentication password is set.</p>
</p><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p919964070214047">An IP prefix list can be specified using <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_varname62652416518">ip-prefix-name</span></i> to define the range of peer IP addresses in a peer group. Ensure that the IP prefix list specified by <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_varname11522105005113">ip-prefix-name</span></i> has been configured before this step is performed.</p>
<p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p5468189501">For security purposes, you are advised not to use weak security algorithms in this feature. If you need to use such an algorithm, run the <a href="cmdqueryname=undo+crypto+weak-algorithm+disable"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname846810810501">undo crypto weak-algorithm disable</span></b></a> command to enable the weak security algorithm function.</p>
<div class="note" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_note1953300351214047"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_ul389508518213918_1"><li id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_li1977065046213918_1"><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_password_tips_1_1"><a name="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_li1977065046213918_1"></a><a name="en-us_task_0172368530_en-us_task_0000001143239100_li1977065046213918_1"></a>The new password is at least eight characters long and contains at least two of the following types: upper-case letters, lower-case letters, digits, and special characters, except the question mark (?) and space.</p>
</li><li id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_li363226100213918_1"><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_password_tips_2_1"><a name="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_li363226100213918_1"></a><a name="en-us_task_0172368530_en-us_task_0000001143239100_li363226100213918_1"></a>For security purposes, you are advised to configure a password in ciphertext mode. To further improve device security, periodically change the password.</p>
</li></ul>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep131053396214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd1443688397214047">(Optional) Run <a href="cmdqueryname=authentication+exclude+peer"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname1093784887214047">authentication exclude</span></b></a> <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdparmname2048040144214047">peer</span></strong> <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_varname1880083808214047">peer-id</span></i></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p1589911311263">The device is disabled from authenticating a specified LDP peer.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep957801853214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd238325459214047">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname1578539750214047">commit</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p1354044212263">The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure LDP MD5 authentication for all LDP peers.</span><ol><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep236343420214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd1944093085214333">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname38173798214047">system-view</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p148308129214333">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep1049516285214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd371724306214333">Run <a href="cmdqueryname=mpls+ldp"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname1452470575214047">mpls ldp</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p672948795214333">The MPLS-LDP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep1801047810214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd45291836175312">Run <a href="cmdqueryname=md5-password+plain+cipher+all"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname1640052560214047">md5-password</span></b></a> { <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdparmname33477259214047">plain</span></strong> | <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdparmname156554942214047">cipher</span></strong> } <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdparmname839955457214047">all</span></strong> <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_varname1537515350214047">password</span></i></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p1639411230536">MD5 authentication is enabled for all peers, and an authentication password is set.</p>
</p><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p1584426162417">For security purposes, you are advised not to use weak security algorithms in this feature. If you need to use such an algorithm, run the <a href="cmdqueryname=undo+crypto+weak-algorithm+disable"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname38492618243">undo crypto weak-algorithm disable</span></b></a> command to enable the weak security algorithm function.</p>
</p><p><div class="note" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_note1070100665214047"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_ul389508518213918_2"><li id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_li1977065046213918_2"><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_password_tips_1_2"><a name="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_li1977065046213918_2"></a><a name="en-us_task_0172368530_en-us_task_0000001143239100_li1977065046213918_2"></a>The new password is at least eight characters long and contains at least two of the following types: upper-case letters, lower-case letters, digits, and special characters, except the question mark (?) and space.</p>
</li><li id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_li363226100213918_2"><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_password_tips_2_2"><a name="EN-US_TASK_0000001134463730__en-us_task_0172368530_en-us_task_0000001143239100_li363226100213918_2"></a><a name="en-us_task_0172368530_en-us_task_0000001143239100_li363226100213918_2"></a>For security purposes, you are advised to configure a password in ciphertext mode. To further improve device security, periodically change the password.</p>
</li></ul>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep1628746766214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd372847853214047">(Optional) Run <a href="cmdqueryname=authentication+exclude+peer"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname1927470490214047">authentication exclude</span></b></a> <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdparmname1326862650214047">peer</span></strong> <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_varname347474890214047">peer-id</span></i></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p495618162712">The device is disabled from authenticating a specified LDP peer.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_substep1923011849214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmd431258793214047">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368530_cmdname1607416388214047">commit</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368530_p97591912274">The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure LDP keychain authentication<span> for a specified LDP peer</span> based on the TCP connection.</span><p><p>Before configuring LDP keychain authentication, configure keychain globally. For details, see <em><span class="keyword">NE40E</span> Configuration Guide - Security</em>.</p>
</p><ol><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep1044182902214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd345670630214047">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname206705620214047">system-view</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p45933381049">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep1894764287214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd268370246214047">Run <a href="cmdqueryname=mpls+ldp"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname1207481538214047">mpls ldp</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p1437213511042">The MPLS-LDP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep1500724802214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd486313199214047">Run <a href="cmdqueryname=authentication+key-chain+peer+name"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname1162405937214047">authentication key-chain</span></b></a> <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdparmname497942625020">peer</span></strong> <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_varname3979142610509">peer-id</span></i> <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdparmname19979162617500">name</span></strong> <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_varname1597942665016">keychain-name</span></i> LDP keychain authentication is enabled, and the referenced keychain name is specified.</span><p><div class="notice" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_note1666894764214047"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><ul id="EN-US_TASK_0000001134463730__en-us_task_0172368531_ul15305116327"><li id="EN-US_TASK_0000001134463730__en-us_task_0172368531_li11530121111326">Configuring LDP keychain authentication leads to reestablishment of an LDP session and deletes the LSP associated with the session.</li></ul>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep1015952574214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd472433921214047">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname26077618214047">commit</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p1622954418513">The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure LDP keychain authentication for LDP peers in a specified LDP peer group based on the TCP connection.</span><ol><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep1575681743214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd1862203444214047">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname206902622214047">system-view</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p181960321366">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep1880352918214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd722143574214047">Run <a href="cmdqueryname=mpls+ldp"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname957264230214047">mpls ldp</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p8977748068">The MPLS-LDP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep805519185214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd624031607214047">Run <a href="cmdqueryname=authentication+key-chain+peer-group+name"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname679046304214047">authentication key-chain peer-group</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_varname685619545214047">ip-prefix-name</span></i> <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdparmname435804066214047">name</span></strong> <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_varname1511475281214047">keychain-name</span></i></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p13211681473">LDP keychain authentication is enabled for a specified peer group, and the configured keychain name is referenced.</p>
</p><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p1879375007214047">The range of peer IP addresses in a peer group is defined by the IP prefix list <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_varname16301158121713">ip-prefix-name</span></i>. Therefore, you need to configure an IP prefix list named <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_varname1161501300214047">ip-prefix-name</span></i> before you perform this step.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep1828889814214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd1217664387214047">(Optional) Run <a href="cmdqueryname=authentication+exclude+peer"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname357952003214047">authentication exclude</span></b></a> <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdparmname1196518833214047">peer</span></strong> <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_varname690180103214047">peer-id</span></i></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p137071130373">The device is disabled from authenticating a specified LDP peer.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep746986708214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd416200994214047">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname373119280214047">commit</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p15867165017719">The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure LDP keychain authentication for all LDP peers based on the TCP connection.</span><ol><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep1645417686214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd1388126183214047">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname1665236158214047">system-view</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p176940131483">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep1181970363214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd1152156191214047">Run <a href="cmdqueryname=mpls+ldp"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname2060715387214047">mpls ldp</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p7952227882">The MPLS-LDP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep223836198214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd1771113889214047">Run <a href="cmdqueryname=authentication+key-chain+all+name"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname1092427620214047">authentication key-chain all</span></b></a> <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdparmname1685459679214047">name</span></strong> <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_varname1712687526214047">keychain-name</span></i></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p697295745818">LDP keychain authentication is enabled for all LDP peers, and the configured keychain name is referenced.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep1669244933214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd273224523214047">(Optional) Run <a href="cmdqueryname=authentication+exclude+peer"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname906005424214047">authentication exclude</span></b></a> <strong><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdparmname669945512214047">peer</span></strong> <i><span class="varname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_varname961807458214047">peer-id</span></i></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p164842595817">The device is disabled from authenticating a specified LDP peer.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_substep700612931214047"><span id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmd548694816214047">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001134463730__en-us_task_0172368531_cmdname992699190214047">commit</span></b></a></span><p><p id="EN-US_TASK_0000001134463730__en-us_task_0172368531_p1246912145913">The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure LDP keychain authentication for a specified LDP peer based on the UDP connection.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+ldp"><b><span class="cmdname">mpls ldp</span></b></a></span><p><p>The MPLS-LDP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=gtsm+peer"><b><span class="cmdname">gtsm peer</span></b></a> <i><span class="varname">ip-address</span></i> <strong><span>valid-ttl-hops</span></strong> <i><span class="varname">hops</span></i></span><p><p>LDP GTSM is configured.</p>
</p><p><p>After the configuration is successful, the configured keychain authentication takes effect on the specified peer. If the authentication fails, the LDP session cannot be established.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command supports only the keychain authentication using a strong encryption algorithm (such as SHA-256, HMAC-SHA-256, HMAC-SHA-384, HMAC-SHA-512, or SM3) but not a weak encryption algorithm.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure LDP GTSM.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+ldp"><b><span class="cmdname">mpls ldp</span></b></a></span><p><p>The MPLS-LDP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=gtsm+peer"><b><span class="cmdname">gtsm peer</span></b></a> <i><span class="varname">ip-address</span></i> <strong><span>valid-ttl-hops</span></strong> <i><span class="varname">hops</span></i></span><p><p>LDP GTSM is configured.</p>
</p><p><p>If the value of hops is set to the maximum number of valid hops permitted by GTSM, when the TTL values carried in the packets sent by an LDP peer are within the range [255 â hops + 1, 255], the packets are accepted; otherwise, the packets are discarded.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure LDP TCP-AO authentication.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=tcp+ao"><b><span class="cmdname">tcp ao</span></b></a><strong> </strong><i><span class="varname">tcpaoname</span></i></span><p><p>A TCP-AO is created and its view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=binding+keychain"><b><span class="cmdname">binding keychain</span></b></a><strong> </strong><i><span class="varname">kcName</span></i></span><p><p>A keychain is bound to the TCP-AO.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Before performing this step, complete "Configuring Keychain Authentication Globally" to create a keychain.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=key-id"><b><span class="cmdname">key-id</span></b></a> <i><span class="varname">keyId</span></i></span><p><p>A key ID for the TCP-AO is created and the TCP-AO key ID view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=send-id"><b><span class="cmdname">send-id</span></b></a> <i><span class="varname">sndId</span></i> <strong><span>receive-id</span></strong><em> </em><i><span class="varname">rcvId</span></i></span><p><p>The send-id and receive-id for the key ID are configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the upper-level view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+ldp"><b><span class="cmdname">mpls ldp</span></b></a></span><p><p>The MPLS-LDP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=authentication+tcp-ao"><b><span class="cmdname">authentication tcp-ao</span></b></a> <strong><span>peer</span></strong><strong> </strong><i><span class="varname">peer-id</span></i> <strong><span>name</span></strong> <i><span class="varname">tcpaoname</span></i></span><p><p>The TCP-AO authentication for LDP is enabled.</p>
</p><p><p>The value of <i><span class="varname">tcpaoname</span></i> must be the same as that of the TCP-AO created in Step 2.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For the same peer, the authentication modes TCP-AO, MD5, and keychain are mutually exclusive.</p>
<p>Configuring LDP TCP-AO authentication may cause the reestablishment of LDP sessions.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0000001134463730__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Verifying the Security Hardening Result</h4><ul><li>Run the <a href="cmdqueryname=display+mpls+ldp+session"><b><span class="cmdname">display mpls ldp session</span></b></a> <strong><span>verbose</span></strong> command to check LDP MD5 authentication, LDP keychain authentication, and LDP TCP-AO authentication configurations.</li><li>Run the <a href="cmdqueryname=display+gtsm+statistics"><b><span class="cmdname">display gtsm statistics</span></b></a> <span>{ <i><span class="varname">slot-id</span></i> | </span><strong><span>all</span></strong><span> }</span> command to check GTSM statistics.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_maintenance_0041.html">MPLS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_maintenance_0042.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>