
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="FTP">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_sec_hardening_management_level2.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_maintenance_0011.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_sec_enhance_5006.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="l00799643,z00588052">
<meta name="DC.Publisher" content="20240229">
<meta name="OWNER" content="l00799643,z00588052">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x60031980">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001134463658">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>FTP</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CONCEPT_0000001134463658"></a><a name="EN-US_CONCEPT_0000001134463658"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">FTP</h1>
<div><p></p>
<div class="section"><h4 class="sectiontitle">Security Policy</h4><ul><li><p>Authentication</p>
<p>The File Transfer Protocol (FTP) server supports AAA authentication. Only users who pass authentication can access devices and the command line window.</p>
</li><li><p>Service disabling</p>
<p>When the FTP server is enabled, the socket listening is enabled for devices. In this case, the devices are easily scanned by attackers. When the FTP server is not used, the FTP server and the relative port number can be disabled.</p>
<p>The FTP server is disabled by default.</p>
</li><li><p>Port number changes</p>
<p>Port 21 of the FTP server is a well-known port number. Therefore, the port number is easily scanned and attacked. The port number of the FTP server can be changed to a private port number to reduce the probability of being scanned and attacked.</p>
</li><li><p>ACLs</p>
<p>ACLs can be configured for the FTP server in the system view. ACLs are used to limit the client IP addresses that can access a device.</p>
</li><li><p>Source interface allowed to access a device</p>
<p>Source interfaces supported by the FTP server can be configured. Users must access a device using the IP addresses of the configured source interfaces. In this way, the access range is controlled, and device security is enhanced.</p>
</li><li><p>CPCAR-based flood attack defense</p>
<p>In the scenario where Internet public addresses are deployed, a device may be attacked by traffic flooding on the management and control plane. You can configure a CPU defense policy to protect the device against traffic attacks.</p>
</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Attack Methods</h4><ul><li><p>Password cracking</p>
<p>After an attacker obtains an FTP port number of a device, the attacker attempts to access the device. When the device requests authentication information, the attacker may crack the password. The device considers the attacker authenticated and allows the attacker to access.</p>
</li><li><p>DoS</p>
<p>The FTP server supports a limited number of users. When the number of allowed users reaches the upper limit, other users cannot access the device. This situation may occur as a result of normal FTP server usage, or when an FTP server is attacked.</p>
</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Configuration and Maintenance Methods</h4><ul><li><p>Disable the FTP service.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>undo ftp server</strong></pre>
<pre class="screen">Warning: The operation will stop the FTP server. Do you want to continue? [Y/N]:y</pre>
<pre class="screen">Info: Succeeded in closing the FTP server.</pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
</li><li><p>Change the port number of an FTP server.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ftp server port 5553</strong></pre>
<pre class="screen">Info: Port change successful. Please start the FTP service.</pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
</li><li><p>Configure an ACL.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl 2000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl-basic-2000] <strong>display this</strong></pre>
<pre class="screen">#</pre>
<pre class="screen">acl number 2000</pre>
<pre class="screen"> rule 15 permit source 10.1.1.1 0</pre>
<pre class="screen"> rule 20 deny</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl-basic-2000] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ftp acl 2000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
</li><li><p>Configure an IPv6 ACL.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl ipv6 2001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl6-basic-2001] <strong>display this</strong></pre>
<pre class="screen">#</pre>
<pre class="screen">acl ipv6 number 2001</pre>
<pre class="screen"> rule 5 permit source 2001:db8:1::1/64</pre>
<pre class="screen"> rule 10 deny</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl6-basic-2001] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ftp ipv6 acl 2001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
</li><li><p>Configure a source interface.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface LoopBack 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-LoopBack0] <strong>display this</strong></pre>
<pre class="screen">#</pre>
<pre class="screen">interface LoopBack0</pre>
<pre class="screen"> ip binding vpn-instance vpn1</pre>
<pre class="screen"> ip address 10.1.1.1 255.255.255.255</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-LoopBack0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>ftp server-source -i loopback 0</strong></pre>
<pre class="screen">Warning: To make the server source configuration take effect, the FTP server will be restarted. Continue? [Y/N]:Y</pre>
<pre class="screen">Info: Succeeded in setting the source interface of the FTP server to LoopBack0.</pre>
<pre class="screen">Info: Succeeded in starting the FTP secure server.</pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
</li><li><p>Configure a source IPv6 IP address.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ftp ipv6 server-source -a 2001:db8:1::1</strong></pre>
<pre class="screen">Warning: To make the server source configuration take effect, the FTP server will be restarted. Continue? [Y/N]:y</pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
</li><li><p>Configure CPCAR-based flood attack defense.</p>
<ol><li><p>Configure a CPU defense policy.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>cpu-defend policy 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-cpu-defend-policy-10] <strong>commit</strong></pre>
</li><li><p>Configure TCP/IP attack defense.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-cpu-defend-policy-10] <strong>tcpsyn-flood enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-cpu-defend-policy-10] <strong>fragment-flood enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-cpu-defend-policy-10] <strong>udp-packet-defend enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-cpu-defend-policy-10] <strong>abnormal-packet-defend enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-cpu-defend-policy-10] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
</li><li><p>Create an ACL.</p>
<p>Create an advanced ACL 3341 and configure an FTP rule to allow the device to send FTP packets with the specified source interface address and deny other FTP packets.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl number 3341</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl-adv-3341] <strong>rule permit udp source 192.168.1.0 0.0.0.255 source-port eq ftp</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl-adv-3341] <strong>rule permit udp source 192.168.1.0 0.0.0.255 destination-port eq ftp</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl-adv-3341] <strong>rule deny udp destination-port eq ftp</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl-adv-3341] <strong>commit</strong></pre>
</li><li><p>Create a user-defined flow.</p>
<p>After the ACL is used to classify protocol packets, you can apply the ACL to create user-defined flows so that different protocol packets are transmitted through different channels.</p>
<p>Telnet is an access protocol, requires less processing bandwidth, and has low real-time requirements. Therefore, it is recommended that you set the bandwidth limit to 512 kbit/s and set the priority to low.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>cpu-defend policy 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-cpu-defend-policy-10] <strong>user-defined-flow 11 acl 3341</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-cpu-defend-policy-10] <strong>car user-defined-flow 11 cir 512 cbs 5120</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-cpu-defend-policy-10] <strong>priority user-defined-flow 11 low</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-cpu-defend-policy-10] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
</li><li><p>Apply the attack defense policy.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>slot <span>1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-slot-<span>1</span>] <strong>cpu-defend-policy 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-slot-<span>1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
</li></ol>
</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Configuration and Maintenance Suggestions</h4><ul><li><p>Disable the FTP service when it is not in use.</p>
</li><li><p>Change the port number of an FTP server.</p>
</li><li><p>Configure ACLs.</p>
</li><li><p>Use SFTP because FTP is not secure.</p>
</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Verifying the Security Hardening Result</h4><ul><li>Run the <a href="cmdqueryname=display+current-configuration"><b><span class="cmdname">display current-configuration</span></b></a> <strong><span>configuration ftp</span></strong> command to check the FTP configuration.</li><li>Run the <strong><a href="cmdqueryname=display+ftp-"><b><span class="cmdname">display ftp-</span></b></a><a href="cmdqueryname=server"><b><span class="cmdname">server</span></b></a></strong> command to check the status and configuration of the FTP server.</li><li>Run the <strong><a href="cmdqueryname=display+cpu-defend+policy"><b><span class="cmdname">display cpu-defend policy</span></b></a> </strong><em>policy-number</em> command to check the attack defense policy.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_sec_hardening_management_level2.html">Management Plane
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_maintenance_0011.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_sec_enhance_5006.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>