
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring an NMS to Communicate with a Device by SSH over a VPN">
<meta name="abstract" content="This section provides an example for configuring an NMS to communicate with a device by SSH over a VPN.">
<meta name="description" content="This section provides an example for configuring an NMS to communicate with a device by SSH over a VPN.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0045.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0062.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="basicvrp,w00800033,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="User Login">
<meta name="featuretype" content="Basic Configurations">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="User Login">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="User Login">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="User Login">
<meta name="featuretype" content="Basic Configurations">
<meta name="OWNER" content="lwx1238418">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00799643">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172359871">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring an NMS to Communicate with a Device by SSH over a VPN</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172359871"></a><a name="EN-US_TASK_0172359871"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring an NMS to Communicate with a Device by SSH over a VPN</h1>
<div class="taskbody"><p>This section provides an example for configuring an NMS to communicate with a device by SSH over a VPN.</p>
<div class="context"><a name="EN-US_TASK_0172359871__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172359871__fig_dc_vrp_ssh_cfg_0138">Figure 1</a>, an NMS, device, and AAA server are connected over a VPN. The NMS is integrated with the SSH client and SFTP server functions. The SSH client uses SSH to log in to and communicate with the device. The SFTP server uses SFTP for file transfer with the device functioning as an SFTP client.</p>
<div class="fignone" id="EN-US_TASK_0172359871__fig_dc_vrp_ssh_cfg_0138"><a name="EN-US_TASK_0172359871__fig_dc_vrp_ssh_cfg_0138"></a><a name="fig_dc_vrp_ssh_cfg_0138"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for configuring an NMS to communicate with a device by SSH over a VPN</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1 stands for GE <span>0/1/0</span>, interface 2 stands for GE <span>0/2/0</span>, and interface 3 stands for GE <span>0/3/0</span>. The interfaces are bound to the same VPN instance.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_ssh_cfg_0138.png" width="NaN" height="NaN"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172359871__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>Ensure that the route between the device and NMS is reachable.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172359871__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Configure a VPN instance.</li><li>Bind the interfaces connecting the device to the NMS and HWTACACS server to the VPN instance.</li><li>Configure a default VPN instance used by the NMS to manage the device.</li><li>Configure an HWTACACS server.</li><li>Create a local AAA user, and set the access type to SSH and authentication mode to HWTACACS for the user.</li><li>Configure an SSH user and set its authentication and service modes.</li><li>Configure an SNMPv3 USM user to allow the NMS to access the device.</li><li>Configure an SFTP client to use SFTP for file transfer.</li></ol>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the default VPN instance is configured for the NMS to manage the device, the HWTACACS server, TFTP client, FTP client, SFTP client, SCP client, SNMP module, Info Center module, IP FPM module, and PM module on the device all belong to the default VPN if other VPN instances are not configured. If other VPN instances are configured, the VPN instance configured for each feature is preferentially selected. To access the public network, you must set the <strong>public-net</strong> parameter.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172359871__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Name of a VPN instance</p>
</li><li><p>SNMP version</p>
</li><li><p>SNMPv3 USM username and password</p>
</li><li><p>Authentication mode, username, service type, and server authentication mode of the local user: AAA, <strong>sshuser001</strong>, SSH, and HWTACACS, respectively</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172359871__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure a VPN instance.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname <span class="keyword">Device</span>A</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> ip vpn-instance vrf1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-vpn-instance-vrf1] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-vpn-instance-vrf1-af-ipv4] <strong>route-distinguisher 22:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-vpn-instance-vrf1-af-ipv4] <strong>vpn-target 111:1 both</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-vpn-instance-vrf1-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-vpn-instance-vrf1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li><li><span># Bind interfaces to the VPN instance.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>ip binding vpn-instance vrf1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>ip-address 10.1.1.2 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>ip binding vpn-instance vrf1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>ip-address 10.2.1.2 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> interface gigabitethernet <span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/3/0</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/3/0</span>] <strong>ip binding vpn-instance vrf1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/3/0</span>] <strong>ip-address 10.3.1.1 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li><li><span>Configure a default VPN instance used by the NMS to manage the device.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>set net-manager vpn-instance vrf1</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The VPN configured using this command affects the following service modules on the device: TFTP client, FTP client, SFTP client, SCP client, Info Center, SNMP, PM, IP FPM, and TACACS. To access the public network, you must set the <strong>public-net</strong> parameter.</p>
</div></div>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li><li><span>Configure an HWTACACS server.</span><p><p># Enable the HWTACACS function and configure an HWTACACS server template named <strong>ht</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>hwtacacs enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong><span>hwtacacs-server</span> template ht</strong></pre>
<p># Configure an IP address and port number for the primary HWTACACS authentication and authorization server.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-hwtacacs-ht] <strong><span>hwtacacs-server</span> authentication 10.2.1.1 49</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-hwtacacs-ht] <strong><span>hwtacacs-server</span> authorization 10.2.1.1 49</strong></pre>
<p># Configure a key for the HWTACACS server.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-hwtacacs-ht] <strong><span>hwtacacs-server</span> shared-key cipher it-is-my-secret123</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-hwtacacs-ht] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-hwtacacs-ht] <strong>quit</strong></pre>
<p># Enter the AAA view.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>aaa</strong></pre>
<p># Configure an authentication scheme named <strong>scheme1</strong> and set the authentication mode to HWTACACS authentication.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>authentication-scheme scheme1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-authen-scheme1] <strong>authentication-mode hwtacacs</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-authen-scheme1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-authen-scheme1] <strong>quit</strong></pre>
<p># Configure an authorization scheme named <strong>scheme2</strong> and set the authorization mode to HWTACACS authorization.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>authorization-scheme scheme2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-author-scheme2] <strong>authorization-mode hwtacacs</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-author-scheme2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-author-scheme2] <strong>quit</strong></pre>
<p># Configure the <strong>huawei</strong> domain. Use the <strong>scheme1</strong> authentication scheme, <strong>scheme2</strong> authorization scheme, and <strong>ht</strong> template in the domain.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>domain huawei</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-huawei] <strong>authentication-scheme scheme1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-huawei] <strong>authorization-scheme scheme2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-huawei]<strong> <span>hwtacacs-server</span> ht</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-huawei]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-huawei]<strong> quit</strong></pre>
</p></li><li><span>Create a local AAA user named <strong>sshuser001</strong>, and set the access type to SSH and authentication mode to HWTACACS for the user.</span><p><p># Configure a local user named sshuser001 in the <strong>huawei</strong> domain. After the configuration is complete, the sshuser001 user uses the authentication and authorization modes in the <strong>huawei</strong> domain.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>local-user sshuser001@huawei password</strong>
Please configure the password (8-128)
Enter Password:                                                                 
Confirm Password:</pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa] <strong>local-user sshuser001@huawei service-type ssh</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>quit</strong></pre>
</p></li><li><span>Configure authentication and service modes for the SSH user.</span><p><pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>ssh authentication-type default password</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>ssh user sshuser001 service-type stelnet snetconf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li><li><span>Enable STelnet on the SSH server.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>stelnet server enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>ssh server-source</strong> <strong>-i </strong><strong>gigabitethernet <span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li><li><span>Configure an SNMPv3 USM user to allow the NMS to access the device.</span><p><p># Enable the SNMP agent function.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>snmp-agent</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Set the SNMP version to SNMPv3.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>snmp-agent sys-info version v3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Configure a MIB view.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>snmp-agent mib-view included iso iso</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Configure a user group and users in the group, and authenticate and encrypt user data.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>snmp-agent group v3 admin privacy write-view iso notify-view iso read-view iso</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>snmp-agent usm-user v3 nms-admin group admin</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>snmp-agent usm-user v3 nms-admin authentication-mode sha</strong>
Please configure the authentication password (10-255)
Enter Password:
Confirm Password: <strong>  </strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>snmp-agent usm-user v3 nms-admin privacy-mode aes128</strong>
Please configure the privacy password (10-255)
Enter Password:
Confirm Password:</pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Configure the alarm function.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>snmp-agent target-host trap address udp-domain 10.1.1.1 vpn-instance vrf1 params securityname nms-admin v3 privacy</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>snmp-agent trap enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li><li><span>Enable the device functioning as an SFTP client to transfer files with the NMS functioning as an SFTP server over the VPN.</span><p><div class="p">For details about how to configure the NMS to function as an SFTP server, see the NMS server configuration guide. The username and password used for file transfer between the device and NMS must be the same as those configured on the SFTP server.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ssh client first-time enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>sftp client-transfile get -a 10.1.1.2 host-ip 10.1.1.1 username sshuser002 password YsHsjx_202206 sourcefile aaa.txt</strong></pre>
</div>
</p></li><li><span>Verify the configuration.</span><p><p>After completing the configuration, perform the following operations to check whether the configuration takes effect.</p>
<p># Display the SNMP version.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display snmp-agent sys-info version</strong></pre>
<pre class="screen">   The contact person for this managed node:
           R&amp;D Beijing, Huawei Technologies co.,Ltd.

   The physical location of this node:
           Beijing China

   SNMP version running in the system:
           SNMPv3</pre>
<p># Display local user information.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display snmp-agent usm-user</strong></pre>
<pre class="screen">   User name: nms-admin,
       Engine ID: 800007DB0300259E0370C3 active
       Authentication Protocol: sha
       Privacy Protocol: aes128
       Group-name: admin
       State: Active</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172359871__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>A
#
hwtacacs enable
#
ip vpn-instance vrf1
 ipv4-family
  route-distinguisher 22:1
  apply-label per-instance
  vpn-target 111:1 export-extcommunity
  vpn-target 111:1 import-extcommunity
#
<span>hwtacacs-server</span> template ht
 <span>hwtacacs-server</span> authentication 10.2.1.1 vpn-instance vrf1
 <span>hwtacacs-server</span> authorization 10.2.1.1 vpn-instance vrf1
 <span>hwtacacs-server</span> shared-key cipher %^%#x@ZaCImt|X79[^A&amp;]DEYC6[&gt;U]OD(8n&amp;BVHvsu2R{=zVSySB'|H[;I`|ef#%^%#
#
aaa
 local-user sshuser001@huawei password irreversible-cipher $1c$\h[;D"`M79$GN]A=y;*4EFG%t&gt;vIJI=rJvxWe/V%Xbd;(J+AzC+$
 local-user sshuser001@huawei service-type ssh
 #
 authentication-scheme scheme1
  authentication-mode hwtacacs
 #
 authorization-scheme scheme2
  authorization-mode hwtacacs
 #
 accounting-scheme default0
 #
 accounting-scheme default1
 #
 domain huawei
  authentication-scheme scheme1
  authorization-scheme scheme2
  hwtacacs-server ht
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip binding vpn-instance vrf1
 ip-address 10.1.1.2 255.255.255.0
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip binding vpn-instance vrf1
 ip-address 10.2.1.2 255.255.255.0
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip binding vpn-instance vrf1
 ip-address 10.3.1.1 255.255.255.0
#
snmp-agent
snmp-agent local-engineid 800007DB0300313D6A1FA0
#
snmp-agent sys-info version v3
snmp-agent group v3 admin privacy write-view iso notify-view iso read-view iso
snmp-agent target-host trap address udp-domain 10.1.1.1 vpn-instance vrf1 params securityname nms-admin v3 privacy
#
snmp-agent mib-view included iso iso
snmp-agent usm-user v3 nms-admin group admin
snmp-agent usm-user v3 nms-admin authentication-mode sha %#%##/L&amp;Fd]S.!i*S7&lt;\jCh2DkfkE4+:&lt;%Wap|8zZWwPL+[a&gt;h$wy&gt;VJsp9(L{%B%#%#
snmp-agent usm-user v3 nms-admin privacy-mode aes128 %#%#CM-]HDuhH6VX)**J&lt;186nf({M823f(0Z73++7(A#%,1jODj}D&gt;_HS&gt;W,'Ss=%#%#
#
<span>stelnet server enable</span>
ssh server-source -i gigabitethernet <span>0/3/0</span>
ssh user sshuser001
ssh authorization-type default password
ssh user sshuser001 service-type stelnet snetconf
#
ssh client first-time enable
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0045.html">Configuration Examples for User Login
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0062.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>