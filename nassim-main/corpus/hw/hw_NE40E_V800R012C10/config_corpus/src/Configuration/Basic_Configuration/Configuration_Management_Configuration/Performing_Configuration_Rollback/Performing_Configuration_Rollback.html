
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Performing Configuration Rollback">
<meta name="abstract" content="Configuration rollback allows the system to roll back to a specified historical configuration state. This section describes how to roll back the system to the specified configuration state.">
<meta name="description" content="Configuration rollback allows the system to roll back to a specified historical configuration state. This section describes how to roll back the system to the specified configuration state.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0044.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0047.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,cfgmvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Configuration Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Configuration Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Configuration Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Configuration Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="OWNER" content="lwx1238418">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00799643">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172359991">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Performing Configuration Rollback</title>
</head>
<body><a name="EN-US_TASK_0172359991"></a><a name="EN-US_TASK_0172359991"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Performing Configuration Rollback</h1>
<div class="taskbody"><p>Configuration rollback allows the system to roll back to a specified historical configuration state. <span>This section describes how to roll back the system to the specified configuration state.</span></p>
<div class="context"><a name="EN-US_TASK_0172359991__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If you have committed configurations but find unexpected results, roll the system back to a specified historical configuration state.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172359991__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>(Optional) Select a validation mode and edit and commit configurations.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">The system supports two validation modes: immediate mode and two-phase validation mode.<ul><li>In immediate validation mode, after you run a command and press <strong>Enter</strong>, the system checks whether the current configuration is different from the previous one. If they are different, the system commits the current configuration and generates a configuration rollback point. Multiple configuration rollback points may be created for a feature.</li><li>In two-phase validation mode, after you run a series of commands, the system checks the differences between the current configuration and the previous one and generates a configuration rollback point only when you run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> [ <strong><span>description</span></strong> <i><span class="varname">description</span></i> ] command. The configurations of multiple commands for a service take effect in batches. You can run the <strong><span>description</span></strong> <i><span class="varname">description</span></i> command to add a brief description for a configuration rollback point, allowing rapid locating of a desired configuration rollback point. The two-phase validation mode is recommended for configuration editing and committing.</li></ul>
</div>
</div></div>
<ul><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> <strong><span>immediately</span></strong> command to enter the system view in immediate validation mode. After you run commands to edit configurations, the new configurations take effect immediately.</p>
</li><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view in two-phase validation mode.</p>
<ol type="a"><li>(Optional) Run the <a href="cmdqueryname=undo+configuration+checkpoint+auto-save+disable"><b><span class="cmdname">undo configuration checkpoint auto-save disable</span></b></a> command to enable the device to automatically generate a configuration rollback point.</li><li>Edit configurations.</li><li>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> [ <strong><span>description</span></strong> <i><span class="varname">description</span></i> | <strong><span>label</span></strong> <i><span class="varname">label</span></i> ] command to commit the new configurations for them to take effect.</li></ol>
</li></ul>
</p></li><li><span>Check the configuration rollback point list and configuration difference.</span><p><ol type="a"><li><p>Run the <a href="cmdqueryname=display+configuration+commit+list"><b><span class="cmdname">display configuration commit list</span></b></a> [ <strong><span>verbose</span></strong> ] [ <i><span class="varname">number-of-commits</span></i> <span>| <strong><span>label</span></strong> </span>] command to check the configuration rollback point list, determine whether a configuration rollback point is generated, and view information about each configuration rollback point.</p>
<p>To view information about the most recent configuration rollback points, specify <i><span class="varname">number-of-commits</span></i>.</p>
</li><li><p>Run the <a href="cmdqueryname=display+configuration+commit+changes"><b><span class="cmdname">display configuration commit changes</span></b></a> [ <strong><span>at</span></strong> <i><span class="varname">commit-id</span></i> | <strong><span>since</span></strong> <i><span class="varname">commit-id</span></i> | <strong><span>last</span></strong> <i><span class="varname">number-of-commits</span></i> ] command to view configuration changes. Based on the configuration changes, you can determine whether to roll back system configurations and check the impact of the configuration rollback operation on system performance.</p>
<p>To view configuration changes at all configuration rollback points, run this command with no parameter specified.</p>
<p>To view the configuration changes at a configuration rollback point, specify <strong><span>at</span></strong> <i><span class="varname">commit-id</span></i>.</p>
<p>To view configuration changes since a configuration rollback point, specify <strong><span>since</span></strong> <i><span class="varname">commit-id</span></i>.</p>
<p>To view configuration changes at the most recent configuration rollback points, specify <strong><span>last</span></strong> <i><span class="varname">number-of-commits</span></i>.</p>
</li></ol>
</p></li><li><span>Roll back system configurations as required.</span><p><ul><li><p>If the historical configuration corresponding to a configuration rollback point meets user requirements, perform the following steps:</p>
<ol type="a"><li><p>Run the <a href="cmdqueryname=return"><b><span class="cmdname">return</span></b></a> command to return to the user view. This ensures that no additional configuration is committed after the configuration rollback operation begins.</p>
</li><li><p>Run the <a href="cmdqueryname=rollback+configuration"><b><span class="cmdname">rollback configuration</span></b></a> { <strong><span>to</span></strong> <strong><span>commit-id</span></strong> <i><span class="varname">commit-id</span></i><span> <span><span>| <strong><span>last</span></strong> <i><span class="varname">number-of-commits</span></i></span></span> | <strong><span>to</span></strong> <strong><span>label</span></strong> <i><span class="varname">label</span></i> | <strong><span>to</span></strong> <strong><span>file</span></strong> <i><span class="varname">file-name</span></i> }</span> command to roll system configurations back to a previous configuration rollback point by specifying the desired configuration rollback point or the number of the configuration rollback points that the incoming configuration rollback operation is expected to undergo. All configurations that were in place at the rollback point are restored, regardless of any change executed after the rollback point was created. Configurations created after the point are deleted, deleted configurations are restored, and modified configurations are returned to what they were when the rollback point was created.</p>
<p>To roll system configurations back to a specified configuration rollback point, specify <strong><span>to</span></strong> <strong><span>commit-id</span></strong> <i><span class="varname">commit-id</span></i>.</p>
<p>To allow the configuration rollback operation to undergo the most recent configuration rollback points, specify <strong><span>last</span></strong> <i><span class="varname">number-of-commits</span></i>.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the configuration rollback operation is complete, you can run the <a href="cmdqueryname=display+configuration+rollback+result"><b><span class="cmdname">display configuration rollback result</span></b></a> command to view the result of the latest configuration rollback operation.</p>
</div></div>
</li></ol>
</li><li><p>If the current configuration is incorrect or the configuration of the configuration rollback point meets user requirements, you can perform the following steps to load the configuration corresponding to the configuration rollback point, and then edit the required content:</p>
<ol type="a"><li><p>Run the <a href="cmdqueryname=return"><b><span class="cmdname">return</span></b></a> command to return to the user view. This ensures that no additional configuration is committed after the configuration rollback operation begins.</p>
</li><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=load+configuration+rollback+changes"><b><span class="cmdname">load configuration rollback changes</span></b></a><strong> </strong>{ <strong><span>at</span></strong><strong> </strong><strong><span>commit-id</span></strong><em> </em><i><span class="varname">at-commit-id</span></i> | <strong><span>to</span></strong><strong> </strong><strong><span>commit-id</span></strong><em> </em><i><span class="varname">commit-id</span></i> | <strong><span>last</span></strong><em> </em><i><span class="varname">number-of-commits</span></i> | <strong><span>to</span></strong><strong> </strong><strong><span>label</span></strong><em> </em><i><span class="varname">user-label</span></i> } command to load the configuration of a specified configuration rollback point or the configuration with a specified user label.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the configuration rollback operation is complete, you can run the <a href="cmdqueryname=display+configuration+rollback+changes+load-result"><b><span class="cmdname">display configuration rollback changes load-result</span></b></a> command to view the result of the latest configuration rollback operation.</p>
</div></div>
</li></ol>
</li></ul>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172359991__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Checking the Configuration</h4><ul><li><p>Run the <a href="cmdqueryname=display+configuration+commit+list"><b><span class="cmdname">display configuration commit list</span></b></a> [ <strong><span>verbose</span></strong> ] [ <i><span class="varname">number-of-commits</span></i> <span>| <strong><span>label</span></strong> </span>] command to view the configuration rollback point list.</p>
</li><li><p>Run the <a href="cmdqueryname=display+configuration+commit+changes"><b><span class="cmdname">display configuration commit changes</span></b></a> [ <i><span class="varname">commit-id</span></i> | <strong><span>since</span></strong> <i><span class="varname">commit-id</span></i> | <strong><span>last</span></strong> <i><span class="varname">number-of-commits</span></i> ] command to view information about configuration changes.</p>
</li><li><p>Run the <a href="cmdqueryname=display+configuration+rollback+result"><b><span class="cmdname">display configuration rollback result</span></b></a> command to view information about the latest configuration rollback operation, including warning and failure messages if there is any.</p>
</li><li>Run the <a href="cmdqueryname=display+configuration+rollback+changes+load-result"><b><span class="cmdname">display configuration rollback changes load-result</span></b></a> command to view the command that fails to be executed to load the configuration of the specified configuration rollback point or the configuration with a specified user label and the failure cause.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0044.html">Performing Configuration Rollback
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0047.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>