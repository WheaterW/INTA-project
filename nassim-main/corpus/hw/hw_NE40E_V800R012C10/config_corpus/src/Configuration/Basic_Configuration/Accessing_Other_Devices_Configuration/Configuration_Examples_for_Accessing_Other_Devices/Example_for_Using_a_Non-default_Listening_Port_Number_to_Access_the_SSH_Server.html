
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Using a Non-default Listening Port Number to Access the SSH Server">
<meta name="abstract" content="A non-default listening port number can be configured for the SSH server to allow only authorized users to establish SSH connections with the server.">
<meta name="description" content="A non-default listening port number can be configured for the SSH server to allow only authorized users to establish SSH connections with the server.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0108.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0209.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0115.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="basicvrp,w00800033,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="OWNER" content="lwx1238418">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00799643">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172360146">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Using a Non-default Listening Port Number to Access the SSH Server</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172360146"></a><a name="EN-US_TASK_0172360146"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Using a Non-default Listening Port Number to Access the SSH Server</h1>
<div class="taskbody"><p>A non-default listening port number can be configured for the SSH server to allow only authorized users to establish SSH connections with the server.</p>
<div class="context"><a name="EN-US_TASK_0172360146__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>The default listening port number is 22. If attackers continuously access this port, bandwidth resources are consumed and performance of the server deteriorates. As a result, authorized users cannot access the server.</p>
<p>If the listening port number of the SSH server is changed to a non-default one, attackers do not know the change and continue to send requests for socket connections to port 22. The SSH server denies the connection requests because the listening port number is incorrect.</p>
<p>Authorized users can set up socket connections with the SSH server by using the new listening port number to implement the following functions: negotiate the version of the SSH protocol, negotiate the algorithm, generate the session key, authenticate, send the session request, and attend the session.</p>
<div class="fignone"><span class="figcap"><b>Figure 1 </b>Using a non-default listening port number to access the SSH server</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface 1 represents <span>GigabitEthernet0/0/0</span>.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0241143970.png"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172360146__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure users client001 and client002 on the SSH server to use different authentication modes to log in to the SSH server.</p>
</li><li><p>Configure client002 and the SSH server to generate local key pairs, and bind client002 to the RSA public key of the SSH server to authenticate the client when the client attempts to log in to the server.</p>
</li><li><p>Enable the STelnet and SFTP server functions on the SSH server.</p>
</li><li><p>Configure the service type and authorized directory for the SSH users.</p>
</li><li><p>Configure a non-default listening port number of the SSH server to allow only authorized users to access the server.</p>
</li><li><p>Use STelnet and SFTP respectively on client001 and client002 to log in to the SSH server.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172360146__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Client001: password authentication and STelnet service type</p>
</li><li><p>Client002: RSA authentication (public key: RsaKey001) and SFTP service type</p>
</li><li><p>IP address of the SSH server: 10.1.1.2</p>
</li><li><p>Listening port number of the SSH server: 1025</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172360146__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure the server to generate a local key pair.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname SSH Server</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>rsa local-key-pair create</strong></pre>
<pre class="screen">The key name will be: CE1_Host  
The range of public key size is (2048, 3072).  
NOTE: Key pair generation will take a short while.  
Please input the modulus [default = 3072]:3072</pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
</p></li><li><span>Configure the RSA public key on the server.</span><p><p># Configure the client to generate a local key pair.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname client002</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client002] <strong>rsa local-key-pair create</strong></pre>
<pre class="screen">[<span class="keyword">*</span>client002] <strong>commit</strong></pre>
<p># Check the RSA public key generated on the client.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client002] <strong>display rsa local-key-pair public</strong></pre>
<pre class="screen">=====================================================</pre>
<pre class="screen">Time of Key pair created: 16:38:51  2007/5/25</pre>
<pre class="screen">Key name: client002_Host</pre>
<pre class="screen">Key type: RSA encryption Key</pre>
<pre class="screen">=====================================================</pre>
<pre class="screen">Key code:</pre>
<pre class="screen">3047</pre>
<pre class="screen">  0240</pre>
<pre class="screen">    BFF35E4B C61BD786 F907B5DE 7D6770C3 E5FD17AB</pre>
<pre class="screen">    203C8FCB BBC8FDF2 F7CB674E 519E8419 0F6B97A8</pre>
<pre class="screen">    EA91FC4B B9E18836 5E74BFD5 4C687767 A89C6B43</pre>
<pre class="screen">    1D7E3E1B</pre>
<pre class="screen">  0203</pre>
<pre class="screen">    010001</pre>
<pre class="screen">Host public key for PEM format code:</pre>
<pre class="screen">---- BEGIN SSH2 PUBLIC KEY ----</pre>
<pre class="screen">AAAAB3NzaC1yc2EAAAADAQABAAAAQQC/815LxhvXhvkHtd59Z3DD5f0XqyA8j8u7</pre>
<pre class="screen">yP3y98tnTlGehBkPa5eo6pH8S7nhiDZedL/VTGh3Z6ica0Mdfj4b</pre>
<pre class="screen">---- END SSH2 PUBLIC KEY ----</pre>
<pre class="screen">Public key code for pasting into OpenSSH authorized_keys file:</pre>
<pre class="screen">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAAQQC/815LxhvXhvkHtd59Z3DD5f0XqyA8j8u7yP3y98tn</pre>
<pre class="screen">TlGehBkPa5eo6pH8S7nhiDZedL/VTGh3Z6ica0Mdfj4b rsa-key</pre>
<pre class="screen">=====================================================</pre>
<pre class="screen">Time of Key pair created: 16:38:51  2007/5/25</pre>
<pre class="screen">Key name: client002_Server</pre>
<pre class="screen">Key type: RSA encryption Key</pre>
<pre class="screen">=====================================================</pre>
<pre class="screen">Key code:</pre>
<pre class="screen">3067</pre>
<pre class="screen">  0260</pre>
<pre class="screen">    BCFAC085 49A2E70E 1284F901 937D7B63 D7A077AB</pre>
<pre class="screen">    D2797280 4BCA86C0 4CD18B70 5DFAC9D3 9A3F3E74</pre>
<pre class="screen">    9B2AF4CB 69FA6483 E87DA590 7B47721A 16391E27</pre>
<pre class="screen">    1C76ABAB 743C568B 1B35EC7A 8572A096 BCA9DF0E</pre>
<pre class="screen">    BC89D3DB 5A83698C 9063DB39 A279DD89</pre>
<pre class="screen">  0203</pre>
<pre class="screen">    010001</pre>
<p># Copy the RSA public key generated on the client to the server.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>rsa peer-public-key rsakey001</strong></pre>
<pre class="screen">Enter "RSA public key" view, return system view with "peer-public-key end".</pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-rsa-public-key] <strong>public-key-code begin</strong></pre>
<pre class="screen">Enter "RSA key code" view, return last view with "public-key-code end".</pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-rsa-key-code] <strong>3047</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-rsa-key-code] <strong>0240</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-rsa-key-code] <strong>BFF35E4B C61BD786 F907B5DE 7D6770C3 E5FD17AB</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-rsa-key-code] <strong>203C8FCB BBC8FDF2 F7CB674E 519E8419 0F6B97A8</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-rsa-key-code] <strong>EA91FC4B B9E18836 5E74BFD5 4C687767 A89C6B43</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-rsa-key-code] <strong>1D7E3E1B</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-rsa-key-code] <strong>0203</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-rsa-key-code] <strong>010001</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-rsa-key-code] <strong>public-key-code end</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-rsa-public-key] <strong>peer-public-key end</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-rsa-public-key] <strong>commit</strong></pre>
</p></li><li><span>Create SSH users on the server.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>There are several authentication modes for SSH users: password, RSA, password-RSA<span>, ECC, password-ECC</span>, and All.</p>
<ul><li><p>If the authentication mode is password<span>, password-ECC,</span> or password-RSA, configure a local user on the server with the same user name.</p>
</li><li><p>If the authentication mode is RSA, password-RSA<span>, ECC, password-ECC</span>, or All, save the RSA<span> or ECC</span> public key generated on the SSH client to the server.</p>
</li></ul>
</div></div>
<p># Configure VTY user interfaces.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>user-interface vty 0 4</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-ui-vty0-4]<strong> authentication-mode aaa</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-ui-vty0-4] <strong>protocol inbound ssh</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-ui-vty0-4] <strong>commit</strong> </pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-ui-vty0-4] <strong>quit</strong></pre>
<ul><li><p>Create an SSH user named client001.</p>
<p># Create an SSH user named client001 and configure password authentication for the user.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>ssh user client001</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh user client001 authentication-type password</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
<p># Set a password for <strong>client001</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>aaa</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client001 password</strong></pre>
<pre class="screen">Please configure the password (<span>8-128</span>)
Enter Password:
Confirm Password:</pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_p1613320501544">The password must meet the following requirements:</p>
<ul id="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_ul813517501544"><li id="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_li141338508412"><p id="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_p_1"><a name="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_li141338508412"></a><a name="en-us_task_0172360129_en-us_task_0172359668_li141338508412"></a>The password is entered in man-machine interaction mode. The system does not display the entered password.</p>
</li><li id="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_li1713412501143"><p id="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_p_2"><a name="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_li1713412501143"></a><a name="en-us_task_0172360129_en-us_task_0172359668_li1713412501143"></a>A password is a string of 8 to 16 case-sensitive characters and must contain at least two types of the following characters: uppercase letters, lowercase letters, digits, and special characters.</p>
</li><li id="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_p_3">Special characters exclude question marks (?) and spaces. However, spaces are allowed in the password if the password is enclosed in quotation marks.<ul id="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_ul7134165012419"><li id="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_li14134115012414">Double quotation marks cannot contain double quotation marks if spaces are used in a password.</li><li id="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_li81341508418">Double quotation marks can contain double quotation marks if no space is used in a password.</li></ul>
<p id="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_p_4">For example, the password "Aa123"45"" is valid, but the password "Aa 123"45"" is invalid.</p>
</li></ul>
<p id="EN-US_TASK_0172360146__en-us_task_0172360129_en-us_task_0172359668_p2135950540">The configured password is displayed in ciphertext in the configuration file.</p>
</div></div>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client001 service-type ssh</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-aaa] <strong>quit</strong></pre>
<p># Set the service type of client001 to STelnet.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>ssh user client001 service-type stelnet</strong></pre>
</li><li><p>Create an SSH user named client002.</p>
<p># Create an SSH user named client002, configure RSA authentication for the user, and bind the RSA public key to client002.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>ssh user client002</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh user client002 authentication-type rsa</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh user client002 assign rsa-key RsaKey001</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
<p># Set the service type of client002 to SFTP and configure the authorized directory for the user.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server]<strong> ssh user client002 service-type sftp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh user client002 sftp-directory cfcard:</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
</li></ul>
</p></li><li><span>Enable the STelnet and SFTP server functions on the SSH server.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>interface LoopBack 0</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-LoopBack0] <strong>ip address 10.1.1.1 255.255.255.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-LoopBack0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>stelnet server enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>sftp server enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh server-source</strong> <strong>-i loopback 0</strong></pre>
</p><p><pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
</p></li><li><span>Configure a new listening port number on the SSH server.</span><p><pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh server port 1025</strong></pre>
</p></li><li><span>Connect the SSH client and the SSH server.</span><p><p># If the client logs in to the server for the first time, enable first authentication on the client.</p>
<p>Enable first authentication on client001.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname client001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client001] <strong>ssh client first-time enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>client001] <strong>commit</strong></pre>
<p>Enable first authentication on client002.</p>
<pre class="screen">[<span class="keyword">*</span>client002] <strong>ssh client first-time enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>client002] <strong>commit</strong></pre>
<p># Connect client001 to the SSH server using the new listening port number.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client001] <strong>stelnet 10.1.1.1 1025</strong></pre>
<pre class="screen">Please input the username:client001</pre>
<pre class="screen">Trying 10.1.1.1 ...</pre>
<pre class="screen">Press CTRL+K to abort</pre>
<pre class="screen">Connected to 10.1.1.1 ...</pre>
<pre class="screen">The server is not authenticated. Continue to access it?(Y/N):y</pre>
<pre class="screen">Save the server's public key?(Y/N):y</pre>
<pre class="screen">The server's public key will be saved with the name 10.1.1.1. Please wait...</pre>
<pre class="screen">Enter password:   </pre>
<p>The following information indicates that the login is successful:</p>
<pre class="screen">Info: The max number of VTY users is 10, and the number</pre>
<pre class="screen">      of current VTY users on line is 1.       </pre>
<pre class="screen">&lt;SSH Server&gt;</pre>
<p># Connect client002 to the SSH server using the new listening port number.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client002] <strong>sftp 10.1.1.1 1025</strong></pre>
<pre class="screen">Please input the username:client002</pre>
<pre class="screen">Trying 10.1.1.1 ...</pre>
<pre class="screen">Press CTRL+K to abort</pre>
<pre class="screen">The server is not authenticated. Continue to access it?(Y/N):y</pre>
<pre class="screen">Save the server's public key?(Y/N):y</pre>
<pre class="screen">The server's public key will be saved with the name 10.1.1.1. Please wait.
..</pre>
<pre class="screen">sftp-client&gt; </pre>
</p></li><li><span>Verify the configuration.</span><p><p>Attackers fail to log in to the SSH server using the default listening port number 22.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client002] <strong>sftp 10.1.1.1</strong></pre>
<pre class="screen">Please input the username:client002</pre>
<pre class="screen">Trying 10.1.1.1 ...</pre>
<pre class="screen">Press CTRL+K to abort</pre>
<pre class="screen">Error: Failed to connect to the server.      </pre>
<p># Check the status of the SSH server.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>display ssh server status</strong></pre>
<pre class="screen">SSH Version                                : <span>2.0</span>
SSH authentication timeout (Seconds)       : 60
SSH authentication retries (Times)         : 3
SSH server key generating interval (Hours) : 0
SSH version 1.x compatibility              : Enable
SSH server keepalive                       : Disable
SFTP IPv4 server                           : Enable
<span>SFTP IPv6 server                           : Enable</span>
STELNET IPv4 server                        : Enable
<span>STELNET IPv6 server                        : Enable</span>
SNETCONF IPv4 server                       : Enable
<span>SNETCONF IPv6 server                       : Enable</span>
SNETCONF IPv4 server port(830)             : Disable
<span>SNETCONF IPv6 server port(830)             : Disable</span>
SCP IPv4 server                            : Enable
<span>SCP IPv6 server                            : Enable</span>
SSH port forwarding                        : Disable
SSH IPv4 server port                       : 22
<span>SSH IPv6 server port                       : 22</span>
ACL name                                   :
ACL number                                 :
<span>ACL6 name                                  : </span>
<span>ACL6 number                                :</span>
SSH server ip-block                        : Enable</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172360146__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>SSH server configuration file</p>
<pre class="screen">#
 sysname SSH Server
#
rsa peer-public-key rsakey001
public-key-code begin
308188
  028180
    B21315DD 859AD7E4 A6D0D9B8 121F23F0 006BB1BB A443130F 7CDB95D8 4A4AE2F3
    D94A73D7 36FDFD5F 411B8B73 3CDD494A 236F35AB 9BBFE19A 7336150B 40A35DE6
    2C6A82D7 5C5F2C36 67FBC275 2DF7E4C5 1987178B 8C364D57 DD0AA24A A0C2F87F
    474C7931 A9F7E8FE E0D5A1B5 092F7112 660BD153 7FB7D5B2 171896FB 1FFC38CD
  0203
    010001
public-key-code end
peer-public-key end
#
interface loopback 0
 ip address 10.1.1.1 255.255.255.255
<span>stelnet server enable</span>
<span>sftp server enable</span>
ssh server-source -i loopback 0
ssh server port 1025
ssh user client001
ssh user client001 authentication-type password
ssh user client001 service-type stelnet
ssh user client002
ssh user client002 authentication-type rsa
ssh user client002 assign rsa-key rsakey001
ssh user client002 sftp-directory cfcard:
ssh user client002 service-type sftp
#
aaa
 local-user client001 password cipher @%@%UyQs4,KTtSwJo(4QmW#K,LC:@%@%
 local-user client001 service-type ssh
 #
interface <span>GigabitEthernet0/0/0</span>
 undo shutdown
 ip address 10.1.1.2 255.255.0.0
#
user-interface vty 0 4
 authentication-mode aaa
 protocol inbound ssh
#
return</pre>
</li><li><p>Client001 configuration file</p>
<pre class="screen">#
 sysname client001
#
interface <span>GigabitEthernet0/0/0</span>
 undo shutdown
ip address 10.1.2.2 255.255.0.0
#
ssh client first-time enable
#
return</pre>
</li><li><p>Client002 configuration file</p>
<pre class="screen">#
 sysname client002
#
interface <span>GigabitEthernet0/0/0</span>
 undo shutdown
 ip address 10.1.3.3 255.255.0.0
#
ssh client first-time enable
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0108.html">Configuration Examples for Accessing Other Devices
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0209.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0115.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>