
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Using SCP to Access Files on Other Devices">
<meta name="abstract" content="To allow SCP client to access the SSH server and download files.">
<meta name="description" content="To allow SCP client to access the SSH server and download files.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0108.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0115.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_http_cfg_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="basicvrp,w00800033,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="OWNER" content="lwx1238418">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00799643">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172360150">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Using SCP to Access Files on Other Devices</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172360150"></a><a name="EN-US_TASK_0172360150"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Using SCP to Access Files on Other Devices</h1>
<div class="taskbody"><p>To allow SCP client to access the SSH server and download files.</p>
<div class="context"><a name="EN-US_TASK_0172360150__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As shown in <a href="#EN-US_TASK_0172360150__fig_dc_vrp_basic_cfg_012901">Figure 1</a>, the device functioning as the SCP client has a reachable route to the SSH server and can download files from the SSH server.</p>
<div class="fignone" id="EN-US_TASK_0172360150__fig_dc_vrp_basic_cfg_012901"><a name="EN-US_TASK_0172360150__fig_dc_vrp_basic_cfg_012901"></a><a name="fig_dc_vrp_basic_cfg_012901"></a><span class="figcap"><b>Figure 1 </b>Using SCP to access another device</span><br><span><img class="vsd" src="images/fig_dc_vrp_basic_cfg_012901.png"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172360150__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Create a local RSA key pair on the SSH server.</p>
</li><li><p>Create an SSH user on the SSH server.</p>
</li><li><p>Enable the SCP service function on the SSH server.</p>
</li><li><p>Enable first authentication on the SSH client.</p>
</li><li><p>Specify the IP address of the source interface on the SCP client.</p>
</li><li><p>Download files from the SSH server to the SCP client.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172360150__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>SSH user name, authentication mode, and authentication password</p>
</li><li><p>IP address of the source interface on the SCP client</p>
</li><li><p>Names and paths of the source and destination files</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172360150__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure the SSH server to generate a local RSA key pair.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname SSH Server</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server]<strong> rsa local-key-pair create</strong></pre>
<pre class="screen">The key name will be: SSH Server_Host  
The range of public key size is (2048, 3072).  
NOTE: Key pair generation will take a short while.  
Please input the modulus [default = 3072]:3072</pre>
</p></li><li><span>Create an SSH user on the SSH server.</span><p><p># Configure VTY user interfaces.</p>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> user-interface vty 0 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-ui-vty0-4]<strong> authentication-mode aaa</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-ui-vty0-4]<strong> protocol inbound ssh</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-ui-vty0-4]<strong> quit</strong></pre>
<p># Create an SSH user named client001 and specify the password authentication mode for the user.</p>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> ssh user client001</strong>
Info: Succeeded in adding a new SSH user.</pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh user client001 authentication-type password</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server cipher aes256_gcm aes128_gcm aes256_ctr aes192_ctr aes128_ctr</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server hmac sha2_512 sha2_256</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server key-exchange dh_group_exchange_sha256</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server publickey rsa_sha2_256 rsa_sha2_512</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server dh-exchange min-len 3072</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh client publickey rsa_sha2_256 rsa_sha2_512</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh client cipher aes256_gcm aes128_gcm aes256_ctr aes192_ctr aes128_ctr </strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh client hmac sha2_512 sha2_256 </strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh client key-exchange dh_group_exchange_sha256</strong> </pre>
<p># Set the password to %TGB6yhn7ujm for the SSH user client001.</p>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> aaa</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client001 password</strong>
Please configure the password (8-128)
Enter Password:
Confirm Password:
Info: A new user is added.</pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client001 service-type ssh</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client001 level 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa] <strong>quit</strong></pre>
<p># Set the service type of the SSH user client001 to <strong>all</strong>.</p>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> ssh user client001 service-type all</strong></pre>
</p></li><li><span>Enable the SCP service function on the SSH server.</span><p><pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> scp server enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> commit</strong></pre>
</p></li><li><span>Download files from the server to the SCP client.</span><p><p># For the first login, enable first authentication on the SSH client.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname SCP Client</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SCP Client] <strong>ssh client first-time enable</strong></pre>
<p># Set the source IP address of the SCP client to 1.1.1.1 (the IP address of a loopback interface).</p>
<pre class="screen">[<span class="keyword">*</span>SCP Client]<strong> scp client-source -a 1.1.1.1</strong>
Info: Succeeded in setting the source address of the SCP client to 1.1.1.1.</pre>
<p># Use the AES128 algorithm to encrypt the <strong>license.txt</strong> file, and download the file to the local user directory from the remote SCP server at 172.16.104.110.</p>
<pre class="screen">[<span class="keyword">*</span>SCP Client]<strong> scp -a 1.1.1.1 -cipher aes128 client001@172.16.104.110:license.txt license.txt</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SCP Client]<strong> commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>Run the <a href="cmdqueryname=display+scp-client"><b><span class="cmdname">display scp-client</span></b></a> command on the SCP client. The command output is as follows:</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>display scp-client</strong></pre>
<pre class="screen"> The source address of SCP client is 1.1.1.1.</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172360150__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>SCP server configuration file</p>
<pre class="screen">#
 sysname SSH Server
#
aaa
 local-user client001 password irreversible-cipher @%@%1-w$!gvBa#6W,ZUm2EN*BYqNWwI3BV\uV`%_oauS;RQB%&gt;&gt;<font style="font-size:8pt" Face="Courier New" >~</font>GV#QzO<font style="font-size:8pt" Face="Courier New" >~</font>k/8;U6;@%@%
 local-user client001 service-type ssh
 local-user client001 level 3
 # 
<span> scp server enable</span> 
 ssh user client001
 ssh user client001 authentication-type password
 ssh user client001 service-type all
#
ssh server cipher aes256_gcm aes128_gcm aes256_ctr aes192_ctr aes128_ctr 
ssh server hmac sha2_512 sha2_256 
ssh server key-exchange dh_group_exchange_sha256
#
ssh server publickey rsa_sha2_256 rsa_sha2_512
#
ssh server dh-exchange min-len 3072
#
ssh client publickey dsa ecc rsa rsa_sha2_256 rsa_sha2_512
#
ssh client cipher aes256_gcm aes128_gcm aes256_ctr aes192_ctr aes128_ctr
ssh client hmac sha2_512 sha2_256
ssh client key-exchange dh_group_exchange_sha256
#
user-interface vty 0 4
 authentication-mode aaa
 protocol inbound ssh
#
return</pre>
</li><li><p>SCP client configuration file</p>
<pre class="screen">#
 sysname SCP Client
#
 ssh client first-time enable
 scp client-source 1.1.1.1
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0108.html">Configuration Examples for Accessing Other Devices
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0115.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_http_cfg_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>