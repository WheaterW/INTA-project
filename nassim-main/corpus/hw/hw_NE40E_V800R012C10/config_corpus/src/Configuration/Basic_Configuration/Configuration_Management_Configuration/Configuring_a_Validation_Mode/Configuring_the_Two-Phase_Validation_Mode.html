
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Two-Phase Validation Mode">
<meta name="abstract" content="To validate configurations after they are complete, configure the two-phase validation mode.">
<meta name="description" content="To validate configurations after they are complete, configure the two-phase validation mode.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0002.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0004.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,cfgmvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Configuration Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Configuration Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Configuration Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Configuration Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="OWNER" content="lwx1238418">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="ccms">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172359986">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the Two-Phase Validation Mode</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172359986"></a><a name="EN-US_TASK_0172359986"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Two-Phase Validation Mode</h1>
<div class="taskbody"><p>To validate configurations after they are complete, configure the two-phase validation mode.</p>
<div class="context"><a name="EN-US_TASK_0172359986__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>The two-phase validation mode enhances configuration security and reliability and minimizes the impact of configurations on services. If the configuration of a service that has taken effect does not meet your expectation, roll the system back to the status before the configuration is committed.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172359986__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>(Optional) Run <span><a href="cmdqueryname=configuration+exclusive"><b><span class="cmdname">configuration exclusive</span></b></a></span></span><p><p>Configurations are locked in the user view.</p>
</p><p><p>To use the running database exclusively, lock configurations on the router.</p>
<div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>After locking configurations, you can edit and commit configurations. Other users can view and edit configurations but cannot commit configurations.</p>
<p>Other users can configure services in the running database only after you unlock configurations.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The two-phase validation mode is configured.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In two-phase validation mode, the command prompt is as follows:</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] </pre>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=display+configuration+candidate+merge"><b><span class="cmdname">display configuration candidate merge</span></b></a></span><p><p>Configurations in the candidate database are previewed, including uncommitted and committed ones.</p>
</p><p><p>You can run the <a href="cmdqueryname=clear+configuration+candidate"><b><span class="cmdname">clear configuration candidate</span></b></a> command to delete all uncommitted configurations.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> <strong><span>trial</span></strong> [ <i><span class="varname">time</span></i> ] [ <strong><span>persist</span></strong><em> </em><i><span class="varname">persistId</span></i> ]</span><p><p>The trial running of a system configuration is enabled.</p>
</p><p><ul><li>To disable the trial running function before the trial running times out, run the <a href="cmdqueryname=abort+trial"><b><span class="cmdname">abort trial</span></b></a> [ { <strong><span>session</span></strong> <i><span class="varname">session-id</span></i> | <strong><span>persist</span></strong> <i><span class="varname">persistId</span></i> } ] command to roll the configuration back to the status before the trial running.</li><li>To view the trial running status of a system configuration, run the <a href="cmdqueryname=display+configuration+trial+status"><b><span class="cmdname">display configuration trial status</span></b></a> command.</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To prevent a service from being affected, you can lock the configuration of the service as soon as the service process is initiated. When the configuration is being locked, configurations cannot be committed. The configuration of the service remains locked until the service process successfully starts. During this period, the configuration cannot be committed but can be viewed.</p>
<p>If the configuration fails to be committed, wait 30 seconds and commit the configuration again. If the configuration fails to be committed again, a user has locked the configuration.</p>
</div></div>
</p></li><li><span>(Optional) If the configuration has been locked, run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the user view. Then, run the <span><a href="cmdqueryname=undo+configuration+exclusive"><b><span class="cmdname">undo configuration exclusive</span></b></a></span> command to unlock the configuration.</span><p><div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>After locking the configuration, you must unlock it after completing the configuration. Otherwise, configurations of other users cannot take effect.</p>
</div></div>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0002.html">Configuring a Validation Mode
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0004.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>