
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring an OSPF NSSA">
<meta name="abstract" content="This section describes how to configure an OSPF not-so-stubby area (NSSA).">
<meta name="description" content="This section describes how to configure an OSPF not-so-stubby area (NSSA).">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0093.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0095.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0097.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ospf,w00800033,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00847023">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365655">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring an OSPF NSSA</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172365655"></a><a name="EN-US_TASK_0172365655"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring an OSPF NSSA</h1>
<div class="taskbody"><p>This section describes how to configure an OSPF not-so-stubby area (NSSA).</p>
<div class="context"><a name="EN-US_TASK_0172365655__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>An excessive number of entries in a routing table wastes network resources and causes high CPU usage. To solve this problem, a non-backbone area on the border of an AS can be configured as an NSSA to reduce the amount of routing information to be transmitted. An NSSA in an AS does not transmit routes learned from other areas in the AS but imports AS external routes. This reduces bandwidth and storage resource consumption.</p>
<p>On the network shown in <a href="#EN-US_TASK_0172365655__fig_dc_vrp_ospf_cfg_201901">Figure 1</a>, all <span class="keyword">Router</span>s run OSPF and the entire AS is divided into two areas. <span class="keyword">Device</span>A and <span class="keyword">Device</span>B function as Area Border Routers (ABRs) to forward inter-area routes; <span class="keyword">Device</span>D functions as an Autonomous System Boundary Router (ASBR) and imports the external static route 10.0.0.0/8. To import AS-external routes but reduce the number of Link State Advertisements (LSAs) advertised to area 1 without affecting route reachability, configure area 1 as an NSSA and configure <span class="keyword">Device</span>A as an LSA translator in the NSSA.</p>
<div class="fignone" id="EN-US_TASK_0172365655__fig_dc_vrp_ospf_cfg_201901"><a name="EN-US_TASK_0172365655__fig_dc_vrp_ospf_cfg_201901"></a><a name="fig_dc_vrp_ospf_cfg_201901"></a><span class="figcap"><b>Figure 1 </b>Networking for configuring an OSPF NSSA</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 through 3 in this example represent GE<span>0/1/0</span>, GE<span>0/2/0</span>, and GE<span>0/3/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_ospf_cfg_201901.png" width="NaN" height="NaN"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365655__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>To improve security, OSPF area authentication or interface authentication is recommended. For details, see "Improving OSPF Network Security". OSPF area authentication is used as an example. For details, see Example for Configuring Basic OSPF Functions.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365655__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Enable OSPF on all <span class="keyword">Router</span>s and configure basic OSPF functions to ensure that <span class="keyword">Router</span>s communicate with each other using OSPF. For details, see <a href="dc_vrp_ospf_cfg_0003.html">Configuring Basic OSPF Functions</a>.</li><li>Configure area 1 as an NSSA.</li><li>Configure <span class="keyword">Device</span>D to import the static route 10.0.0.0/8.</li><li>Configure <span class="keyword">Device</span>A in the NSSA as an LSA translator.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365655__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li>Router ID 1.1.1.1 of <span class="keyword">Device</span>A; OSPF process ID 1; network segment 192.168.0.0/24 of area 0; network segments 192.168.1.0/24 and 192.168.3.0/24 of area 1</li><li>Router ID 2.2.2.2 of <span class="keyword">Device</span>B; OSPF process ID 1; network segment 192.168.2.0/24 of area 0; network segments 192.168.1.0/24 and 192.168.4.0/24 of area 1</li><li>Router ID 3.3.3.3 of <span class="keyword">Device</span>C; OSPF process ID 1; network segments 192.168.0.0/24 and 192.168.2.0/24 of area 0</li><li>Router ID 4.4.4.4 of <span class="keyword">Device</span>D; OSPF process ID 1; network segments 192.168.3.0/24 and 192.168.4.0/24 of area 1</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365655__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IP address to each interface.</span><p><p>Configure an IP address for each interface as shown in <a href="#EN-US_TASK_0172365655__fig_dc_vrp_ospf_cfg_201901">Figure 1</a>. For configuration details, see <a href="#EN-US_TASK_0172365655__section_dc_vrp_ospf_cfg_201905">Configuration Files</a> in this section.</p>
</p></li><li><span>Configure basic OSPF functions.</span><p><p><a href="dc_vrp_ospf_cfg_0003.html">Configuring Basic OSPF Functions</a> shows how to configure basic OSPF functions. For details about the configuration, see <a href="#EN-US_TASK_0172365655__section_dc_vrp_ospf_cfg_201905">Configuration Files</a> in this section.</p>
</p></li><li><span>Configure area 1 as an NSSA.</span><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ospf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1] <strong>area 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1-area-0.0.0.1] <strong>nssa</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1-area-0.0.0.1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ospf-1-area-0.0.0.1] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B]<strong> ospf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospf-1]<strong> area 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospf-1-area-0.0.0.1]<strong> nssa</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospf-1-area-0.0.0.1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ospf-1-area-0.0.0.1]<strong> quit</strong></pre>
<p># Configure <span class="keyword">Device</span>D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D]<strong> ospf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospf-1]<strong> area 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospf-1-area-0.0.0.1]<strong> nssa</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospf-1-area-0.0.0.1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-ospf-1-area-0.0.0.1] <strong>quit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>NSSA attributes must be configured on all <span class="keyword">Router</span>s in the NSSA using the <a href="cmdqueryname=nssa"><b><span class="cmdname">nssa</span></b></a> command.</p>
</div></div>
</p></li><li><span>Configure <span class="keyword">Device</span>D to import the static route 10.0.0.0/8.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>ip route-static 10.0.0.0 8 null 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>ospf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospf-1] <strong>import-route static</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospf-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-ospf-1] <strong>quit</strong></pre>
<p># Display the OSPF routing table on <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>display ospf routing</strong></pre>
<pre class="screen">          OSPF Process 1 with Router ID 3.3.3.3
                   Routing Tables

 Routing for Network
 Destination        Cost  Type       NextHop         AdvRouter       Area
 192.168.3.0/24     2     Inter-area 192.168.0.1     1.1.1.1       0.0.0.0
 192.168.4.0/24     2     Inter-area 192.168.2.1     2.2.2.2       0.0.0.0
 192.168.0.0/24     1     Stub       192.168.0.2     3.3.3.3       0.0.0.0
 192.168.1.0/24     2     Inter-area 192.168.0.1     1.1.1.1       0.0.0.0
 192.168.1.0/24     2     Inter-area 192.168.2.1     2.2.2.2       0.0.0.0
 192.168.2.0/24     1     Stub       192.168.2.2     3.3.3.3       0.0.0.0

 Routing for ASEs
 <strong>Destination</strong>      <strong>Cost</strong>      <strong>Type</strong>       <strong>Tag</strong>    <strong>NextHop</strong>         <strong>AdvRouter</strong>
 <strong>10.0.0.0/8</strong>       <strong>1</strong>         <strong>Type2</strong>      <strong>1</strong>      <strong>192.168.2.1</strong>     <strong>2.2.2.2</strong>

 Total Nets: 7
 Intra Area: 2  Inter Area: 4  <strong>ASE: 1</strong>  NSSA: 0</pre>
<p>The command output shows that the router ID of the <span class="keyword">Router</span> that advertised the AS external route imported to the NSSA is 2.2.2.2. That is, <span class="keyword">Device</span>B functions as a translator <span class="keyword">Router</span> because OSPF selects the ABR with the largest router ID as a translator <span class="keyword">Router</span>.</p>
</p></li><li><span># Configure <span class="keyword">Device</span>A as an LSA translator.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ospf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1] <strong>area 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1-area-0.0.0.1] <strong>nssa default-route-advertise no-summary translator-always</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1-area-0.0.0.1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ospf-1-area-0.0.0.1] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># View the OSPF routing table on <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>display ospf routing</strong></pre>
<pre class="screen">          OSPF Process 1 with Router ID 3.3.3.3
                   Routing Tables

 Routing for Network
 Destination        Cost  Type       NextHop         AdvRouter       Area
 192.168.3.0/24     2     Inter-area 192.168.0.1     1.1.1.1       0.0.0.0
 192.168.4.0/24     2     Inter-area 192.168.2.1     2.2.2.2       0.0.0.0
 192.168.0.0/24     1     Stub       192.168.0.2     3.3.3.3       0.0.0.0
 192.168.1.0/24     2     Inter-area 192.168.2.1     2.2.2.2       0.0.0.0
 192.168.1.0/24     2     Inter-area 192.168.0.1     1.1.1.1       0.0.0.0
 192.168.2.0/24     1     Stub       192.168.2.2     3.3.3.3       0.0.0.0

 Routing for ASEs
 <strong>Destination</strong>      <strong>Cost</strong>      <strong>Type</strong>       <strong>Tag</strong>    <strong>NextHop</strong>         <strong>AdvRouter</strong>
 <strong>10.0.0.0/8</strong>       <strong>1</strong>         <strong>Type2</strong>      <strong>1</strong>      <strong>192.168.0.1</strong>     <strong>1.1.1.1</strong>

 Total Nets: 7
 Intra Area: 2  Inter Area: 4  <strong>ASE: 1</strong>  NSSA: 0</pre>
<p>The command output shows that <span class="keyword">Device</span>C has imported an AS external route and that the router ID of the <span class="keyword">Router</span> that advertised the imported AS external route is 1.1.1.1. <span class="keyword">Device</span>A functions as the translator <span class="keyword">Router</span>.</p>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172365655__section_dc_vrp_ospf_cfg_201905"><a name="EN-US_TASK_0172365655__section_dc_vrp_ospf_cfg_201905"></a><a name="section_dc_vrp_ospf_cfg_201905"></a><a name="EN-US_TASK_0172365655__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#
 sysname <span class="keyword">Device</span>A
#
router id 1.1.1.1
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 192.168.0.1 255.255.255.0
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.3.1 255.255.255.0
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip address 192.168.1.1 255.255.255.0
#
ospf 1
 area 0.0.0.0
  network 192.168.0.0 0.0.0.255
 area 0.0.0.1
  network 192.168.1.0 0.0.0.255
  network 192.168.3.0 0.0.0.255
  nssa default-route-advertise no-summary translator-always
#
return</pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#
 sysname <span class="keyword">Device</span>B
#
router id 2.2.2.2
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 192.168.1.2 255.255.255.0
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.2.1 255.255.255.0
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip address 192.168.4.2 255.255.255.0
#
ospf 1
 area 0.0.0.0
  network 192.168.2.0 0.0.0.255
 area 0.0.0.1
  network 192.168.1.0 0.0.0.255
  network 192.168.4.0 0.0.0.255
  nssa
#
return</pre>
</li><li><p><span class="keyword">Device</span>C configuration file</p>
<pre class="screen">#
 sysname <span class="keyword">Device</span>C
#
router id 3.3.3.3
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 192.168.0.2 255.255.255.0
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.2.2 255.255.255.0
#
ospf 1
 area 0.0.0.0
  network 192.168.0.0 0.0.0.255
  network 192.168.2.0 0.0.0.255
#
return</pre>
</li><li><p><span class="keyword">Device</span>D configuration file</p>
<pre class="screen">#
 sysname <span class="keyword">Device</span>D
#
router id 4.4.4.4
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 192.168.3.2 255.255.255.0
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.4.1 255.255.255.0
#
ospf 1
import-route static
 area 0.0.0.1
  network 192.168.3.0 0.0.0.255
  network 192.168.4.0 0.0.0.255
  nssa
#
ip route-static 10.0.0.0 255.0.0.0 NULL0
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0093.html">Configuration Examples for OSPF
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0095.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0097.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>