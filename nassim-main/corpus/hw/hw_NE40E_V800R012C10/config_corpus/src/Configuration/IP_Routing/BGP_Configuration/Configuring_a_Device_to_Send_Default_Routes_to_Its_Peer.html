
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Device to Send Default Routes to Its Peer">
<meta name="abstract" content="After a device is configured to send a default route to its peer, the device sends a default route with the local address as the next hop address to the specified peer, regardless of whether there are default routes in the local routing table, which reduces the number of routes on the network.">
<meta name="description" content="After a device is configured to send a default route to its peer, the device sends a default route with the local address as the next hop address to the specified peer, regardless of whether there are default routes in the local routing table, which reduces the number of routes on the network.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4062_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4092.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,bgpvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366229">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Device to Send Default Routes to Its Peer</title>
</head>
<body><a name="EN-US_TASK_0172366229"></a><a name="EN-US_TASK_0172366229"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Device to Send Default Routes to Its Peer</h1>
<div class="taskbody"><p>After a device is configured to send a default route to its peer, the device sends a default route with the local address as the next hop address to the specified peer, regardless of whether there are default routes in the local routing table, which reduces the number of routes on the network.</p>
<div class="context"><a name="EN-US_TASK_0172366229__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>The BGP routing table of the <span class="keyword">Router</span> on a medium or large BGP network contains a large number of routing entries. Storing the routing table consumes a large number of memory resources, and transmitting and processing routing information consume lots of network resources. If a device needs to send multiple routes to its peer, you can configure the device to send only a default route with the local address as the next hop address to its peer, regardless of whether there are default routes in the local routing table. This greatly reduces the number of routes on the network and the consumption of memory resources on the peer and network resources.</p>
<div class="fignone" id="EN-US_TASK_0172366229__fig_dc_vrp_bgp_cfg_305201"><a name="EN-US_TASK_0172366229__fig_dc_vrp_bgp_cfg_305201"></a><a name="fig_dc_vrp_bgp_cfg_305201"></a><span class="figcap"><b>Figure 1 </b>Configuring a device to send a default route to its peer</span><br><span><img class="vsd" src="images/fig_dc_vrp_bgp_cfg_305201.png" width="NaN" height="NaN"></span></div>
<p>On the network shown in <a href="#EN-US_TASK_0172366229__fig_dc_vrp_bgp_cfg_305201">Figure 1</a>, <span class="keyword">Device</span> A and <span class="keyword">Device</span> B have established a BGP peer relationship. <span class="keyword">Device</span> B has added routes to 10.1.1.0/24, 10.2.1.0/24, and 10.3.1.0/24 to its BGP routing table. <span class="keyword">Device</span> A needs to learn these routes from <span class="keyword">Device</span> B. In this way, <span class="keyword">Device</span> A retains three BGP routes. To reduce the memory consumption on <span class="keyword">Device</span> A and bandwidth used by <span class="keyword">Device</span> B for sending routing information to <span class="keyword">Device</span> A, configure <span class="keyword">Device</span> B to send a default route to its peer (<span class="keyword">Device</span> A) and use a routing policy to prevent <span class="keyword">Device</span> B from sending all the routes to 10.1.1.0/24, 10.2.1.0/24, and 10.3.1.0/24 to <span class="keyword">Device</span> A. Then, <span class="keyword">Device</span> A stores only one default route but can still send traffic to the three network segments.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366229__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring a BGP device to send a default route to its peer, <a href="dc_vrp_bgp_cfg_3004.html">configure basic BGP functions</a>.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366229__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span></span><p><p>The IPv4 unicast address family view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer+default-route-advertise+route-policy"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv4-address</span></i> } <strong><span>default-route-advertise</span></strong> [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i><span> | <strong><span>route-filter</span></strong> <i><span class="varname">route-filter-name</span></i></span> ] [ <strong><span>conditional-route-match-all</span></strong> { <i><span class="varname">ipv4-address1</span></i> { <i><span class="varname">mask1</span></i> | <i><span class="varname">mask-length1</span></i> } } &amp;&lt;1-4&gt; | <strong><span>conditional-route-match-any</span></strong> { <i><span class="varname">ipv4-address2</span></i> { <i><span class="varname">mask2</span></i> | <i><span class="varname">mask-length2</span></i> } } &amp;&lt;1-4&gt; ]</span><p><p>The device is configured to send default routes to the specified peer or a peer group.</p>
</p><p><p>You can specify <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i><span> or <strong><span>route-filter</span></strong> <i><span class="varname">route-filter-name</span></i></span> to change attributes of the default routes to be advertised.</p>
<p>If <strong><span>conditional-route-match-all</span></strong> { <i><span class="varname">ipv4-address1</span></i> { <i><span class="varname">mask1</span></i> | <i><span class="varname">mask-length1</span></i> } } &amp;&lt;1-4&gt; is set, the BGP device sends default routes to the peer only when routes that match all the all specified conditions exist in the local IP routing table.</p>
<p>If <strong><span>conditional-route-match-any</span></strong> { <i><span class="varname">ipv4-address2</span></i> { <i><span class="varname">mask2</span></i> | <i><span class="varname">mask-length2</span></i> } } &amp;&lt;1-4&gt; is set, the local device sends default routes to the peer when routes that match any of the specified conditions exist in the local IP routing table.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the <a href="cmdqueryname=peer+default-route-advertise"><b><span class="cmdname">peer default-route-advertise</span></b></a> command is used on a device, the device sends a default route with the local address as the next-hop address to a specified peer, regardless of whether there is a default route in the routing table.</p>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172366229__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After the configuration is complete, you can run the <a href="cmdqueryname=display+bgp+routing-table"><b><span class="cmdname">display bgp routing-table</span></b></a> [ <i><span class="varname">ipv4-address</span></i> [ <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> ] ] command on the peer to view the received BGP default route.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3000.html">BGP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4062_1.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4092.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>