
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Creating IPv4 Static Routes">
<meta name="abstract" content="To create an IPv4 static route, configure its destination address, outbound interface, and next hop.">
<meta name="description" content="To create an IPv4 static route, configure its destination address, outbound interface, and next hop.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,static-routevrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="s00826690">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365432">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Creating IPv4 Static Routes</title>
</head>
<body><a name="EN-US_TASK_0172365432"></a><a name="EN-US_TASK_0172365432"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Creating IPv4 Static Routes</h1>
<div class="taskbody"><p>To create an IPv4 static route, configure its destination address, outbound interface, and next hop.</p>
<div class="context"><a name="EN-US_TASK_0172365432__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When creating an IPv4 static route, you need the following information:</p>
<ul><li><p>Destination address and mask</p>
<p>In the <a href="cmdqueryname=ip+route-static"><b><span class="cmdname">ip route-static</span></b></a> command, the IPv4 address is expressed in dotted decimal notation, and the mask is expressed either in dotted decimal notation or represented by the mask length.</p>
</li><li><p>Outbound interface and next hop address</p>
<p>When creating a static route, you can specify <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-name</span></i>, <i><span class="varname">nexthop-address</span></i>, or both. <span>In addition, you can configure the Next-Table function, that is, only a VPN instance name (public in the case of the public network) is specified as the next hop of a static route, and no outbound interface or next hop address is specified. </span>You can configure the parameters as required.</p>
<p>Actually, each routing entry requires a next hop address. Before sending a packet, a device needs to search its routing table for the route matching the destination address in the packet based on the longest match rule. The device can find the associated link layer address to forward the packet only when the next hop address of the packet is available.</p>
<div class="p">When specifying an outbound interface, note the following rules:<ul><li><p>For a Point-to-Point (P2P) interface, if the outbound interface is specified, the next hop address is the address of the remote interface connected to the outbound interface. <span>For example, when a GE interface is encapsulated with Point-to-Point Protocol (PPP) and obtains the remote IP address through PPP negotiation, you need to specify only the outbound interface rather than the next hop address.</span></p>
</li><li><p>Non-Broadcast Multiple-Access (NBMA) interfaces are applicable to Point-to-Multipoint networks. Therefore, you need to configure IP routes and the mappings between IP addresses and link layer addresses. In this case, next hop IP addresses need to be configured.</p>
</li><li><p>An Ethernet interface is a broadcast interface and a virtual-template (VT) interface can be associated with multiple virtual access interfaces. If the Ethernet interface or the VT interface is specified as the outbound interface of a static route, the next hop cannot be determined because multiple next hops exist. Therefore, do not specify an Ethernet interface or a VT interface as the outbound interface unless necessary. If you need to specify a broadcast interface (such as an Ethernet interface), a VT interface, or an NBMA interface as the outbound interface, you are recommended to specify the associated next hop address at the same time.</p>
</li></ul>
</div>
</li><li><p>Other attributes</p>
<p>You can configure different preferences for different static routes so that routing management policies can be flexibly applied. For example, when creating multiple routes to the same destination address, you can set the same preference for these routes to implement load balancing. You can also set different preferences to implement routing redundancy.</p>
<p>By configuring different tag values, you can classify static routes to implement different routing policies. For example, other protocols can import static routes with specified tag values based on routing policies.</p>
<p>If service traffic needs to be forwarded along a specified path, regardless of the link status, you can configure permanent advertisement of static routes by using <strong><span>permanent</span></strong>.</p>
<p>In network maintenance scenarios, static routes are required to verify services. If you do not want these static routes to be imported by other protocols, specify <strong><span>no-advertise</span></strong> to prevent these static routes from being advertised. </p>
<p>If you set the destination address and the mask to all 0s (0.0.0.0 0.0.0.0) in the <a href="cmdqueryname=ip+route-static"><b><span class="cmdname">ip route-static</span></b></a> command, a default route is configured.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365432__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Configure an IPv4 static route.</span><p><ul><li>Run one of the following commands to configure an IPv4 static route for the public network:<ul><li><a href="cmdqueryname=ip+route-static"><b><span class="cmdname">ip route-static</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } { <i><span class="varname">nexthop-address</span></i> | <i><span class="varname">nexthop6-address</span></i> } [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <span><sup>*</sup></span> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</li><li><a href="cmdqueryname=ip+route-static"><b><span class="cmdname">ip route-static</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> }{ <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i>} [ { <i><span class="varname">nexthop-address</span></i> | <i><span class="varname">nexthop6-address</span></i> } ] [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <span><sup>*</sup></span> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</li><li><a href="cmdqueryname=ip+route-static"><b><span class="cmdname">ip route-static</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <span><sup>*</sup></span> <strong><span>description</span></strong> <i><span class="varname">text</span></i></li><li><a href="cmdqueryname=ip+route-static"><b><span class="cmdname">ip route-static</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> }<strong><span> vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> { <i><span class="varname">nexthop-address</span></i> | <i><span class="varname">nexthop6-address</span></i> } [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <span><sup>*</sup></span> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</li></ul>
</li><li>Run one of the following commands to configure an IPv4 static route for a VPN instance:<ul><li><a href="cmdqueryname=ip+route-static+vpn-instance"><b><span class="cmdname">ip route-static vpn-instance</span></b></a> <i><span class="varname">vpn-source-name</span></i> <i><span class="varname">destination-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> }{ <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } [ <i><span class="varname">nexthop-address</span></i> ] [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <span><sup>*</sup></span> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</li><li><a href="cmdqueryname=ip+route-static+vpn-instance"><b><span class="cmdname">ip route-static vpn-instance</span></b></a> <i><span class="varname">vpn-source-name</span></i> <i><span class="varname">destination-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } <i><span class="varname">nexthop-address </span></i> [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <span><sup>*</sup></span> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</li><li><a href="cmdqueryname=ip+route-static+vpn-instance"><b><span class="cmdname">ip route-static vpn-instance</span></b></a> <i><span class="varname">vpn-source-name</span></i> <i><span class="varname">destination-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } { <strong><span>public</span></strong> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-destination-name</span></i> } [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <span><sup>*</sup></span> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</li><li><a href="cmdqueryname=ip+route-static+vpn-instance"><b><span class="cmdname">ip route-static vpn-instance</span></b></a> <i><span class="varname">vpn-source-name</span></i> <i><span class="varname">destination-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-destination-name</span></i> <i><span class="varname">nexthop-address </span></i> [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <span><sup>*</sup></span> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</li></ul>
</li><li>To configure an IPv4 static route in the topology instance, run the <a href="cmdqueryname=ip+route-static+topology"><b><span class="cmdname">ip route-static topology</span></b></a> <i><span class="varname">topology-name</span></i> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } { <i><span class="varname">nexthop-address</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <i><span class="varname">nexthop-address</span></i>  ] } [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <sup>*</sup><span> [ <strong><span>no-advertise</span></strong><span> | <strong><span>no-install</span></strong></span> ]</span> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ] command.</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the outbound interface of a static route is a broadcast interface or an NBMA interface, the next hop of the outbound interface must be specified.</p>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0003.html">Configuring IPv4 Static Routes
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0005.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>