
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Route Target Set">
<meta name="abstract" content="Route target sets are used to match the RTs of VPN routes.">
<meta name="description" content="Route target sets are used to match the RTs of VPN routes.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0018.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00414125">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366612">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Route Target Set</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366612"></a><a name="EN-US_TASK_0172366612"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Route Target Set</h1>
<div class="taskbody"><p>Route target sets are used to match the RTs of VPN routes.</p>
<div class="steps-unordered"><a name="EN-US_TASK_0172366612__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a route target set using the paragraph-by-paragraph editing mode.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=edit+xpl+extcommunity-list+rt"><b><span class="cmdname">edit xpl extcommunity-list rt</span></b></a> <i><span class="varname">rt-list-name</span></i> command to enter the route target set paragraph-by-paragraph editing view.</span></li><li class="substepexpand"><span>Press <strong><span id="EN-US_TASK_0172366612__en-us_task_0172366604_cmdparmname487383154214324">i</span></strong> to enter the text editing mode.</span><p><div class="note" id="EN-US_TASK_0172366612__en-us_task_0172366604_note848653575214039"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366612__en-us_task_0172366604_p1881735298214039">Sets or route-filters can be configured only in the text editing mode. If you exit from the text editing mode, you can perform shortcut key operations only.</p>
</div></div>
</p></li><li class="substepexpand"><span>Configure a start clause (<a href="cmdqueryname=xpl+extcommunity-list+rt"><b><span class="cmdname">xpl extcommunity-list rt</span></b></a> <i><span class="varname">rt-list-name</span></i>) for the route target set.</span></li><li class="substepexpand"><span>Configure elements (RTs of VPN routes) for the route target set in the route target set paragraph-by-paragraph editing interface view and separate every two neighboring elements with a comma (,). The elements can be configured in any of the following formats:</span><p><ul><li id="EN-US_TASK_0172366612__en-us_cliref_0172380122_li2091850217214506">2-byte AS number:4-byte user-defined number, for example, 1:3. The AS number is an integer ranging from 0 to 65535, and the user-defined number is an integer ranging from 0 to 4294967295. The AS number and user-defined number must not be both 0s. Specifically, the RT must not be 0:0.</li><li id="EN-US_TASK_0172366612__en-us_cliref_0172380122_li410462943214506">IPv4 address:2-byte user-defined number, for example, 192.168.122.15:1. The IPv4 address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number is an integer ranging from 0 to 65535.</li><li id="EN-US_TASK_0172366612__en-us_cliref_0172380122_li2054362840214506">Integral 4-byte AS number:2-byte user-defined number, for example, 0:3 or 65537:3. The integral 4-byte AS number ranges from 65536 to 4294967295, and the user-defined number is an integer ranging from 0 to 65535.</li><li id="EN-US_TASK_0172366612__en-us_cliref_0172380122_li1255487531214506">4-byte AS number in dotted notation (<em id="EN-US_TASK_0172366612__en-us_cliref_0172380122_i1866302575214506">x</em>.<em id="EN-US_TASK_0172366612__en-us_cliref_0172380122_i1065785749214506">y</em>):2-byte user-defined number, for example, 0.0:3 or 0.1:0. The <em id="EN-US_TASK_0172366612__en-us_cliref_0172380122_i566978229214506">x</em>, <em id="EN-US_TASK_0172366612__en-us_cliref_0172380122_i861386468214506">y</em>, and user-defined number are integers ranging from 0 to 65535. The AS number and user-defined number must not be both 0s. Specifically, the RT must not be 0.0:0.</li><li id="EN-US_TASK_0172366612__en-us_cliref_0172380122_li1607808007214506"><strong><span id="EN-US_TASK_0172366612__en-us_cliref_0172380122_cmdparmname642443448214506">regular</span></strong> <i><span class="varname" id="EN-US_TASK_0172366612__en-us_cliref_0172380122_varname1112671568214506">regular-expression</span></i>: matches VPN routes with RTs in the specified regular expression.<div class="note" id="EN-US_TASK_0172366612__en-us_cliref_0172380122_note15723219105016"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366612__en-us_cliref_0172380122_p149426245502">Regular expression processing is computing-intensive. When a large number of regular expressions are configured in an XPL policy to match a BGP route attribute and the length of the route attribute is long, the processing performance of the XPL policy deteriorates. To improve the processing performance of the routing policy, decrease the number of regular expressions or use a non-regular expression matching command.</p>
<p id="EN-US_TASK_0172366612__en-us_cliref_0172380122_p16723191995013">It is recommended that a maximum of 100 regular expressions be configured for each policy.</p>
</div></div>
</li></ul>
</p></li><li class="substepexpand"><span>Configure an end clause for the route target set using the <a href="cmdqueryname=end-list"><b><span class="cmdname">end-list</span></b></a> command in the route target set paragraph-by-paragraph editing interface view.</span></li><li class="substepexpand"><span>Press <strong><span id="EN-US_TASK_0172366612__en-us_task_0172366604_cmdparmname1779802799214324">Esc</span></strong> to exit from the text editing mode.</span></li><li class="substepexpand"><span>Press <strong><span id="EN-US_TASK_0172366612__en-us_task_0172366604_cmdparmname735621263214039">:wq</span></strong> and <strong id="EN-US_TASK_0172366612__en-us_task_0172366604_b860927787214324">Enter</strong> to save the configurations and exit from the global variable set paragraph-by-paragraph editing view.</span><p><div class="note" id="EN-US_TASK_0172366612__en-us_task_0172366604_note150669114214039"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366612__en-us_task_0172366604_p412579185214039">A message is displayed for you to confirm whether to commit the configurations when you attempt to exit from the global variable set paragraph-by-paragraph editing view. To commit the configurations, press <strong id="EN-US_TASK_0172366612__en-us_task_0172366604_b846040704214324">Y</strong>.</p>
<p id="EN-US_TASK_0172366612__en-us_task_0172366604_p920862874214039">To exit from the global variable set paragraph-by-paragraph editing view without saving the configurations, press <strong><span id="EN-US_TASK_0172366612__en-us_task_0172366604_cmdparmname318439040214324">:q!</span></strong> and <strong id="EN-US_TASK_0172366612__en-us_task_0172366604_b899102169214324">Enter</strong>.</p>
</div></div>
</p></li></ol>
</li><li><span>Configure a route target set using the line-by-line editing mode.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=xpl+extcommunity-list+rt"><b><span class="cmdname">xpl extcommunity-list rt</span></b></a> <i><span class="varname">rt-list-name</span></i> command to enter the route target set view.</span></li><li class="substepexpand"><span>Configure elements (RTs of VPN routes) for the route target set and separate every two neighboring elements with a comma (,). The elements can be configured in any of the following formats:</span><p><ul><li id="EN-US_TASK_0172366612__en-us_cliref_0172380122_li2091850217214506_1">2-byte AS number:4-byte user-defined number, for example, 1:3. The AS number is an integer ranging from 0 to 65535, and the user-defined number is an integer ranging from 0 to 4294967295. The AS number and user-defined number must not be both 0s. Specifically, the RT must not be 0:0.</li><li id="EN-US_TASK_0172366612__en-us_cliref_0172380122_li410462943214506_1">IPv4 address:2-byte user-defined number, for example, 192.168.122.15:1. The IPv4 address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number is an integer ranging from 0 to 65535.</li><li id="EN-US_TASK_0172366612__en-us_cliref_0172380122_li2054362840214506_1">Integral 4-byte AS number:2-byte user-defined number, for example, 0:3 or 65537:3. The integral 4-byte AS number ranges from 65536 to 4294967295, and the user-defined number is an integer ranging from 0 to 65535.</li><li id="EN-US_TASK_0172366612__en-us_cliref_0172380122_li1255487531214506_1">4-byte AS number in dotted notation (<em id="EN-US_TASK_0172366612__en-us_cliref_0172380122_i1866302575214506_1">x</em>.<em id="EN-US_TASK_0172366612__en-us_cliref_0172380122_i1065785749214506_1">y</em>):2-byte user-defined number, for example, 0.0:3 or 0.1:0. The <em id="EN-US_TASK_0172366612__en-us_cliref_0172380122_i566978229214506_1">x</em>, <em id="EN-US_TASK_0172366612__en-us_cliref_0172380122_i861386468214506_1">y</em>, and user-defined number are integers ranging from 0 to 65535. The AS number and user-defined number must not be both 0s. Specifically, the RT must not be 0.0:0.</li><li id="EN-US_TASK_0172366612__en-us_cliref_0172380122_li1607808007214506_1"><strong><span id="EN-US_TASK_0172366612__en-us_cliref_0172380122_cmdparmname642443448214506_1">regular</span></strong> <i><span class="varname" id="EN-US_TASK_0172366612__en-us_cliref_0172380122_varname1112671568214506_1">regular-expression</span></i>: matches VPN routes with RTs in the specified regular expression.<div class="note" id="EN-US_TASK_0172366612__en-us_cliref_0172380122_note15723219105016_1"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366612__en-us_cliref_0172380122_p149426245502_1">Regular expression processing is computing-intensive. When a large number of regular expressions are configured in an XPL policy to match a BGP route attribute and the length of the route attribute is long, the processing performance of the XPL policy deteriorates. To improve the processing performance of the routing policy, decrease the number of regular expressions or use a non-regular expression matching command.</p>
<p id="EN-US_TASK_0172366612__en-us_cliref_0172380122_p16723191995013_1">It is recommended that a maximum of 100 regular expressions be configured for each policy.</p>
</div></div>
</li></ul>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=end-list"><b><span class="cmdname">end-list</span></b></a> command to conclude the configuration of the route target set, exit the route target set view, and return to the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0172366612__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Example</h4><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366612__en-us_task_0172366606_p1511226613214039">If only paragraph-by-paragraph editing is used as an example, the corresponding line editing is similar. To use the line editing mode, perform the operations described in paragraph-by-paragraph editing.</p>
</div></div>
<p>For detailed set and route-filter configuration steps, see <a href="dc_vrp_xpl_cfg_0002.html#EN-US_CONCEPT_0000001793384325__section_dc_vrp_xpl_cfg_000102">Configuration Procedures for Sets and Route-Filters Using the Paragraph-by-Paragraph Editing Mode</a>. For details about XPL clauses, see <a href="dc_vrp_xpl_cfg_0014.html">XPL Paragraph Editing Clauses</a>.</p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary=""><tr><td valign="top"><p><strong>Objective</strong></p>
</td>
<td valign="top"><p>Configure a route target set to match the VPN routes with the RT 100:1, 200:1, or 300:1.</p>
</td>
</tr>
<tr><td valign="top"><p><strong>Configuration Example</strong></p>
</td>
<td valign="top"><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>edit xpl extcommunity-list rt rt-list1</strong>

xpl extcommunity-list rt rt-list1
100:1,
200:1,
300:1
end-list</pre>
<p>The route target set contains three elements and can match VPN routes carrying RT 100:1, 200:1, or 300:1.</p>
</td>
</tr>
<tr><td valign="top"><p><strong>Objective</strong></p>
</td>
<td valign="top"><p>Configure a route-filter to set the next hop IP addresses of the VPN routes carrying the RTs that are a subset of the set named <strong>rt-list1</strong> and the VPN routes carrying the RTs of which the set named <strong>rt-list1</strong> is a subset to 1.1.1.1 and 2.2.2.2, respectively.</p>
</td>
</tr>
<tr><td valign="top"><p><strong>Reference Example</strong></p>
</td>
<td valign="top"><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>edit xpl route-filter r1</strong>

xpl route-filter r1
if extcommunity rt matches-within rt-list1 then
apply ip next-hop 1.1.1.1
elseif extcommunity rt matches-all rt-list1 then
apply ip next-hop 2.2.2.2
endif
end-filter</pre>
<p>The route-filter references the set named <strong>rt-list1</strong> and sets the next hop IP addresses of the VPN routes carrying the RTs that are a subset of this set and the VPN routes carrying the RTs of which this set is a subset to 1.1.1.1 and 2.2.2.2, respectively.</p>
</td>
</tr>
</table></div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0003.html">Configuring a Route Attribute Set
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0018.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0020.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>