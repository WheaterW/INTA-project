
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Basic OSPFv3 Functions">
<meta name="abstract" content="This section describes how to configure basic OSPFv3 functions, including enabling OSPF on each router and specifying network segments in different areas.">
<meta name="description" content="This section describes how to configure basic OSPFv3 functions, including enabling OSPF on each router and specifying network segments in different areas.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2062.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2064.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,56675587z00801081,w00556928,w00606909,l00455378,">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365800">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Basic OSPFv3 Functions</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172365800"></a><a name="EN-US_TASK_0172365800"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Basic OSPFv3 Functions</h1>
<div class="taskbody"><p>This section describes how to configure basic OSPFv3 functions, including enabling OSPF on each router and specifying network segments in different areas.</p>
<div class="context"><a name="EN-US_TASK_0172365800__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172365800__fig_dc_vrp_ospfv3_cfg_206301">Figure 1</a>, all <span class="keyword">Router</span>s run OSPFv3. The entire AS is divided into three areas. <span class="keyword">Device</span>B and <span class="keyword">Device</span>C serve as ABRs to forward inter-area routes.</p>
<p>After the configuration is complete, each router should learn the routes to all network segments in the AS. </p>
<div class="fignone" id="EN-US_TASK_0172365800__fig_dc_vrp_ospfv3_cfg_206301"><a name="EN-US_TASK_0172365800__fig_dc_vrp_ospfv3_cfg_206301"></a><a name="fig_dc_vrp_ospfv3_cfg_206301"></a><span class="figcap"><b>Figure 1 </b>Networking for configuring OSPFv3 areas</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 through 3 in this example represent GE <span>0/1/0</span>, GE <span>0/2/0</span>, and GE <span>0/3/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_ospfv3_cfg_206301.png" width="NaN" height="NaN"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365800__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Notes</h4><p>When configuring basic OSPFv3 functions, note the following rules:</p>
<ul><li><p>The backbone area is responsible for forwarding inter-area routes. In addition, the routing information between non-backbone areas must be forwarded through the backbone area. OSPFv3 defines the following rules for the backbone area:</p>
<ul><li>Connectivity must be available between non-backbone areas and the backbone area.</li><li>Connectivity must be available over the backbone area.</li></ul>
</li><li>The intervals at which Hello, Dead, and Poll packets are sent on the local interface must be the same as those on the remote interface. Otherwise, the OSPFv3 neighbor relationship cannot be established.</li><li>To improve security, you are advised to deploy OSPFv3 authentication. For details, see "Configuring OSPFv3 Authentication." OSPFv3 IPSec is used as an example. For details, see "Example for Configuring IPSec for OSPFv3".</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365800__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Enable basic OSPFv3 functions on each <span class="keyword">Router</span>.</p>
</li><li><p>Specify network segments in different areas.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365800__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary=""><tr><td valign="top"><p>Device Name</p>
</td>
<td valign="top"><p>Router ID</p>
</td>
<td valign="top"><p>Process ID</p>
</td>
<td valign="top"><p>IPv6 Address</p>
</td>
</tr>
<tr><td valign="top"><p><span class="keyword">Device</span> A</p>
</td>
<td valign="top"><p>1.1.1.1</p>
</td>
<td valign="top"><p>1</p>
</td>
<td valign="top"><p>Area 1: 2001:DB8:4::1/64 and 2001:DB8:2::2/64</p>
</td>
</tr>
<tr><td valign="top"><p><span class="keyword">Device</span> B</p>
</td>
<td valign="top"><p>2.2.2.2</p>
</td>
<td valign="top"><p>1</p>
</td>
<td valign="top"><p>Area 0: 2001:DB8:1::1/64</p>
<p>Area 1: 2001:DB8:2::1/64</p>
</td>
</tr>
<tr><td valign="top"><p><span class="keyword">Device</span> C</p>
</td>
<td valign="top"><p>3.3.3.3</p>
</td>
<td valign="top"><p>1</p>
</td>
<td valign="top"><p>Area 0: 2001:DB8:1::2/64</p>
<p>Area 2: 2001:DB8:3::1/64</p>
</td>
</tr>
<tr><td valign="top"><p><span class="keyword">Device</span> D</p>
</td>
<td valign="top"><p>4.4.4.4</p>
</td>
<td valign="top"><p>1</p>
</td>
<td valign="top"><p>Area 2: 2001:DB8:3::2/64</p>
</td>
</tr>
</table></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365800__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IPv6 address to each interface. For configuration details, see <a href="#EN-US_TASK_0172365800__section_dc_vrp_ospfv3_cfg_206306">Configuration Files</a> in this section.</span></li><li><span>Configure basic OSPFv3 functions.</span><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ospfv3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospfv3-1] <strong>router-id 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospfv3-1] <strong>area 0.0.0.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospfv3-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/3/0</span>] <strong>ospfv3 1 area 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>ospfv3 1 area 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Configure <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ospfv3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospfv3-1]<strong> router-id 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospfv3-1] <strong>area 0.0.0.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospfv3-1] <strong>area 0.0.0.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospfv3-1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B]<strong> interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B]<strong> interface gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>ospfv3 1 area 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>commit</strong></pre>
<p># Configure <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>ospfv3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-ospfv3-1] <strong>router-id 3.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-ospfv3-1] <strong>area 0.0.0.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-ospfv3-1] <strong>area 0.0.0.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-ospfv3-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C]<strong> interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>ospfv3 1 area 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>commit</strong></pre>
<p># Configure <span class="keyword">Device</span>D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>ospfv3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospfv3-1] <strong>router-id 4.4.4.4</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospfv3-1] <strong>area 0.0.0.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospfv3-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/0</span>] <strong>ospfv3 1 area 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration. </span><p><p># Display the OSPFv3 neighbors of <span class="keyword">Device</span>B. The state Full indicates that a neighbor relationship is established.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>display ospfv3 peer</strong></pre>
<pre class="screen">   OSPFv3 Process (1)
   Total number of peer(s): 2
    Peer(s) in full state: 2
   OSPFv3 Area (0.0.0.1)
   Neighbor ID    Pri   <strong>State</strong>       Dead Time   Interface               Instance ID
   1.1.1.1        1     <strong>Full</strong>/ -     00:00:34    GigabitEthernet<span>0/2/0</span>    0

   OSPFv3 Area (0.0.0.0)
   Neighbor ID    Pri   <strong>State</strong>       Dead Time   Interface               Instance ID
   3.3.3.3        1     <strong>Full</strong>/ -     00:00:32    GigabitEthernet<span>0/1/0</span>    0</pre>
<p># Display the OSPFv3 neighbors of <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>display ospfv3 peer</strong></pre>
<pre class="screen">   OSPFv3 Process (1)
   Total number of peer(s): 2
    Peer(s) in full state: 2
   OSPFv3 Area (0.0.0.0)
   Neighbor ID    Pri   <strong>State</strong>       Dead Time   Interface                Instance ID
   2.2.2.2        1     <strong>Full</strong>/ -     00:00:37    GigabitEthernet<span>0/1/0</span>     0

   OSPFv3 Area (0.0.0.2)
   Neighbor ID    Pri   <strong>State</strong>       Dead Time   Interface                Instance ID
   4.4.4.4        1     <strong>Full</strong>/ -     00:00:33    GigabitEthernet<span>0/2/0</span>     0</pre>
<p># Display the OSPFv3 routing table of <span class="keyword">Device</span>D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>display ospfv3 routing</strong></pre>
<pre class="screen">Codes : E2 - Type 2 External, E1 - Type 1 External, IA - Inter-Area,
        N - NSSA  
Flags: A - Added to URT6, LT - Locator Routing 

OSPFv3 Process (1)
   Destination                                   Metric
     Next-hop
  IA 2001:DB8:1::/64                                     2
           via FE80::1572:0:5EF4:1, GigabitEthernet<span>0/2/0</span>
  IA 2001:DB8:2::/64                                     3
           via FE80::1572:0:5EF4:1, GigabitEthernet<span>0/2/0</span>
     2001:DB8:3::/64                                     1
           directly-connected, GigabitEthernet<span>0/2/0</span>
  IA 2001:DB8:4::/64                                     4
           via FE80::1572:0:5EF4:1, GigabitEthernet<span>0/2/0</span></pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172365800__section_dc_vrp_ospfv3_cfg_206306"><a name="EN-US_TASK_0172365800__section_dc_vrp_ospfv3_cfg_206306"></a><a name="section_dc_vrp_ospfv3_cfg_206306"></a><a name="EN-US_TASK_0172365800__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:db8:2::2/64</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.1</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:db8:4::1/64</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.1</pre>
<pre class="screen">#</pre>
<pre class="screen">ospfv3 1</pre>
<pre class="screen"> router-id 1.1.1.1</pre>
<pre class="screen"> area 0.0.0.1</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:db8:1::1/64</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:db8:2::1/64</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.1</pre>
<pre class="screen">#</pre>
<pre class="screen">ospfv3 1</pre>
<pre class="screen"> router-id 2.2.2.2</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen"> area 0.0.0.1</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>C configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>C</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:db8:1::2/64</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:db8:3::1/64</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.2</pre>
<pre class="screen">#</pre>
<pre class="screen">ospfv3 1</pre>
<pre class="screen"> router-id 3.3.3.3</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen"> area 0.0.0.2</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>D configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>D</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:db8:3::2/64</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.2</pre>
<pre class="screen">#</pre>
<pre class="screen">ospfv3 1</pre>
<pre class="screen"> router-id 4.4.4.4</pre>
<pre class="screen"> area 0.0.0.2</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2062.html">Configuration Examples for OSPFv3
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2064.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>