
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Timers for BGP4+ Peers">
<meta name="abstract" content="Configuring timers properly improves network performance. Changing BGP4+ timer values, however, will interrupt peer relationships.">
<meta name="description" content="Configuring timers properly improves network performance. Changing BGP4+ timer values, however, will interrupt peer relationships.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0036.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0038.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,bgpvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP IPv6">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP IPv6">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP IPv6">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366463">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring Timers for BGP4+ Peers</title>
</head>
<body><a name="EN-US_TASK_0172366463"></a><a name="EN-US_TASK_0172366463"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Timers for BGP4+ Peers</h1>
<div class="taskbody"><p>Configuring timers properly improves network performance. Changing BGP4+ timer values, however, will interrupt peer relationships.</p>
<div class="context"><a name="EN-US_TASK_0172366463__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>Changing timer values using the <a href="cmdqueryname=peer+timer"><b><span class="cmdname">peer timer</span></b></a> command will interrupt peer relationships between <span class="keyword">Router</span>s. Therefore, exercise caution when changing the timeout period of a timer.</p>
</div></div>
<p>Perform the following steps on a BGP4+ device:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366463__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>Run the <a href="cmdqueryname=peer+timer+keepalive+hold+min-holdtime"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv6-address</span></i> | <i><span class="varname">group-name</span></i> } <strong><span>timer</span></strong> <strong><span>keepalive</span></strong> <i><span class="varname">keepalive-time</span></i> <strong><span>hold</span></strong> <i><span class="varname">hold-time</span></i> [ <strong><span>min-holdtime</span></strong> <i><span class="varname">min-hold-value</span></i> ] command to configure the interval at which Keepalive messages are sent and the hold time for a peer or peer group. Alternatively, run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <a href="cmdqueryname=timer+send-hold"><b><span class="cmdname">timer</span></b></a> <strong><span>send-hold</span></strong> <i><span class="varname">send-hold-time</span></i> command to configure the hold time during which a peer does not proactively disconnect from the peer end.</span><p><p>The value of <i><span class="varname">hold-time</span></i> must be at least three times the value of <i><span class="varname">keepalive-time</span></i>. </p>
<div class="p"><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p740913259215">You are advised to configure <i><span class="varname" id="EN-US_TASK_0172366463__en-us_task_0172366221_varname92431524112016">hold-time</span></i> according to the total number of peers in all BGP address families. The more peers, the larger the recommended minimum hold time value. You can adjust the hold time based on <a href="dc_vrp_bgp_cfg_3047.html#EN-US_TASK_0172366221__table410763711163">Table 1</a>.</p>
</div></div>
</div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Mapping between the total number of BGP peers in all address families and the recommended minimum hold time</caption><thead align="left"><tr id="EN-US_TASK_0172366463__en-us_task_0172366221_row510713710160"><th align="left" class="cellrowborder" valign="top" width="12.47%" id="mcps1.4.2.3.2.3.2.3.1.1" liSelected="liSelected"><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p1110717372163">Total Number of Peers</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="87.53%" id="mcps1.4.2.3.2.3.2.3.1.2" liSelected="liSelected"><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p010753721612">Recommended Minimum Hold Time</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_TASK_0172366463__en-us_task_0172366221_row51071037111610"><td class="cellrowborder" valign="top" width="12.47%" headers="mcps1.4.2.3.2.3.2.3.1.1 "><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p9530101461916">0â100</p>
</td>
<td class="cellrowborder" valign="top" width="87.53%" headers="mcps1.4.2.3.2.3.2.3.1.2 "><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p35301714161911">20s</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366463__en-us_task_0172366221_row610823741614"><td class="cellrowborder" valign="top" width="12.47%" headers="mcps1.4.2.3.2.3.2.3.1.1 "><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p205305142194">101â200</p>
</td>
<td class="cellrowborder" valign="top" width="87.53%" headers="mcps1.4.2.3.2.3.2.3.1.2 "><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p55301414181920">30s</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366463__en-us_task_0172366221_row201081337131615"><td class="cellrowborder" valign="top" width="12.47%" headers="mcps1.4.2.3.2.3.2.3.1.1 "><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p1753001441911">201â300</p>
</td>
<td class="cellrowborder" valign="top" width="87.53%" headers="mcps1.4.2.3.2.3.2.3.1.2 "><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p45301514151919">45s</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366463__en-us_task_0172366221_row171082371165"><td class="cellrowborder" valign="top" width="12.47%" headers="mcps1.4.2.3.2.3.2.3.1.1 "><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p125301614101919">301â400</p>
</td>
<td class="cellrowborder" valign="top" width="87.53%" headers="mcps1.4.2.3.2.3.2.3.1.2 "><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p053021419191">60s</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366463__en-us_task_0172366221_row15108123731613"><td class="cellrowborder" valign="top" width="12.47%" headers="mcps1.4.2.3.2.3.2.3.1.1 "><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p1053011141191">401â500</p>
</td>
<td class="cellrowborder" valign="top" width="87.53%" headers="mcps1.4.2.3.2.3.2.3.1.2 "><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p1153014149193">75s</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366463__en-us_task_0172366221_row1710883716168"><td class="cellrowborder" valign="top" width="12.47%" headers="mcps1.4.2.3.2.3.2.3.1.1 "><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p2530191421918">Greater than or equal to 501</p>
</td>
<td class="cellrowborder" valign="top" width="87.53%" headers="mcps1.4.2.3.2.3.2.3.1.2 "><p id="EN-US_TASK_0172366463__en-us_task_0172366221_p953071414192">90s</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>Avoid the following situations when setting values for the three timers:</p>
<ul><li><p>The values of <i><span class="varname">keepalive-time</span></i> and <i><span class="varname">hold-time</span></i> are both set to 0. In this case, the BGP timers become invalid, and BGP cannot detect link faults based on the timers.</p>
</li><li><p>The <i><span class="varname">hold-time</span></i> value is much greater than the <i><span class="varname">keepalive-time</span></i> value, for example, <strong>timer keepalive 1 hold 65535</strong> is configured. In this case, link faults cannot be detected in time.</p>
</li><li><p>The <i><span class="varname">keepalive-time</span></i> value is set to 0. In this case, the keepalive timer does not start. As a result, the <i><span class="varname">send-hold-time</span></i> function does not take effect.</p>
</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0036.html">Configuring BGP4+ Connection Parameters
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0038.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>