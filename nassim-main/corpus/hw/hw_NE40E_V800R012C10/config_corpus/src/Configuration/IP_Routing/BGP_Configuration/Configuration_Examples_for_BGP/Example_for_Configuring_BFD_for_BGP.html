
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring BFD for BGP">
<meta name="abstract" content="After BFD for BGP is configured, BFD can fast detect a link fault between BGP peers and notify it to BGP so that service traffic can be transmitted along the backup link, which improves service transmission reliability.">
<meta name="description" content="After BFD for BGP is configured, BFD can fast detect a link fault between BGP peers and notify it to BGP so that service traffic can be transmitted along the backup link, which improves service transmission reliability.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3070.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4084.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,bgpvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366397">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring BFD for BGP</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366397"></a><a name="EN-US_TASK_0172366397"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring BFD for BGP</h1>
<div class="taskbody"><p>After BFD for BGP is configured, BFD can fast detect a link fault between BGP peers and notify it to BGP so that service traffic can be transmitted along the backup link, which improves service transmission reliability.</p>
<div class="context"><a name="EN-US_TASK_0172366397__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>Voice and video services have high requirements for network reliability and stability. If a fault occurs on a network, quick service recovery is required (within 50 ms). BFD for BGP can meet this requirement.</p>
<p>In <a href="#EN-US_TASK_0172366397__fig_dc_vrp_bgp_cfg_408301">Figure 1</a>, a primary link and a backup link are deployed on the network to ensure service transmission stability. EBGP peer relationships are established between indirectly connected <span class="keyword">Device</span>A and <span class="keyword">Device</span>B, and between indirectly connected <span class="keyword">Device</span>A and <span class="keyword">Device</span>C. In most cases, traffic is transmitted along the primary link between <span class="keyword">Device</span>A and <span class="keyword">Device</span>B. If the primary link fails, it is required that BGP quickly detect this failure and switch traffic to the backup link (<span class="keyword">Device</span>A -&gt; <span class="keyword">Device</span>C -&gt; <span class="keyword">Device</span>B).</p>
<p>BFD for BGP can be configured to speed up the link switchover. Specifically, BFD is configured to track the BGP peer relationship between <span class="keyword">Device</span>A and <span class="keyword">Device</span>B. If the primary link between <span class="keyword">Device</span>A and <span class="keyword">Device</span>B fails, BFD will quickly detect the fault and notify BGP of the fault so that service traffic is switched to the backup link for transmission.</p>
<div class="fignone" id="EN-US_TASK_0172366397__fig_dc_vrp_bgp_cfg_408301"><a name="EN-US_TASK_0172366397__fig_dc_vrp_bgp_cfg_408301"></a><a name="fig_dc_vrp_bgp_cfg_408301"></a><span class="figcap"><b>Figure 1 </b>Configuring BFD for BGP</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 through 3 in this example are GE <span>0/1/0</span>, GE <span>0/2/0</span>, and GE <span>0/3/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_bgp_cfg_408301.png"></span><br></div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If two routers establish an EBGP peer relationship over a direct link, BFD for BGP is not required because the <strong>ebgp-interface-sensitive</strong> command is enabled by default for directly connected EBGP peers.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366397__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>During the configuration, note the following:</p>
<ul><li><p>Before configuring BFD for BGP, enable BFD globally.</p>
</li><li><p>When configuring BFD for BGP, ensure that parameters configured on the two ends of a BFD session are consistent.</p>
</li><li>To improve security, you are advised to deploy BGP security measures. For details, see "Configuring BGP Security." Keychain authentication is used as an example. For details, see "Example for Configuring BGP Keychain."</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366397__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure basic BGP functions on each <span class="keyword">Router</span>.</p>
</li><li><p>Configure the MED attribute to control route selection.</p>
</li><li><p>Enable BFD on <span class="keyword">Device</span>A and <span class="keyword">Device</span>B</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366397__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Router IDs and AS numbers of <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, and <span class="keyword">Device</span>C</p>
</li><li><p>Peer IP address monitored by BFD</p>
</li><li><p>Minimum interval at which BFD Control packets are received and sent and the local detection multiplier</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366397__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address for each interface on the <span class="keyword">Router</span>s. For configuration details, see <a href="#EN-US_TASK_0172366397__section_dc_vrp_bgp_cfg_408305">Configuration Files</a> in this section.</span></li><li><span>Configure basic BGP functions, establish EBGP connections between <span class="keyword">Device</span>A and <span class="keyword">Device</span>B, and between <span class="keyword">Device</span>A and <span class="keyword">Device</span>C, and establish an IBGP connection between <span class="keyword">Device</span>B and <span class="keyword">Device</span>C.</span><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp]<strong> router-id 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp]<strong> peer 10.20.1.2 as-number 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp]<strong> peer 10.20.1.2 ebgp-max-hop 255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp]<strong> peer 10.20.2.2 as-number 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp]<strong> peer 10.20.2.2 ebgp-max-hop 255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-bgp]<strong> quit</strong></pre>
<p># Configure <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B]<strong> bgp 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp]<strong> router-id 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp]<strong> peer 10.20.1.1 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp]<strong> peer 10.20.1.1 ebgp-max-hop</strong><strong> 255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp]<strong> peer 10.1.1.2 as-number 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp]<strong> network 172.16.1.0 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-bgp]<strong> quit</strong></pre>
<p># Configure <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C]<strong> bgp 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp]<strong> router-id 3.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp]<strong> peer 10.20.2.1 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp]<strong> peer 10.20.2.1 ebgp-max-hop</strong><strong> 255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp]<strong> peer 10.1.1.1 as-number 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-bgp]<strong> quit</strong></pre>
<p># Check the BGP peer relationship on <span class="keyword">Device</span>A. The command output shows that the BGP peer relationship is established.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display bgp peer</strong>

 BGP local router ID : 1.1.1.1
 Local AS number : 100
 Total number of peers : 2                 Peers in established state : 2

  Peer            V    AS  MsgRcvd  MsgSent  OutQ  Up/Down       State PrefRcv

  10.20.1.2       4   200        2        5     0 00:01:25 <strong>Established</strong>       0
  10.20.2.2       4   200        2        4     0 00:00:55 <strong>Established</strong>       0</pre>
</p></li><li><span>Configure the MED attribute.</span><p><p># Configure a route-policy to set the MED value for the routes that <span class="keyword">Device</span>B and <span class="keyword">Device</span>C send to <span class="keyword">Device</span>A.</p>
<p># Configure <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>route-policy 10 permit node 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-route-policy] <strong>apply cost 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-route-policy] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-route-policy] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B]<strong> bgp 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp] <strong>peer 10.20.1.1 route-policy 10 export</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp] <strong>commit</strong></pre>
<p># Configure <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>route-policy 10 permit node 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-route-policy] <strong>apply cost 150</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-route-policy] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-route-policy] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>bgp 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>peer 10.20.2.1 route-policy 10 export</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>commit</strong></pre>
<p># Display the BGP routing table of <span class="keyword">Device</span>A.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display bgp routing-table</strong>

 BGP Local router ID is 1.1.1.1
 Status codes: * - valid, &gt; - best, d - damped,<span> x - best external,</span><span> a - add path,</span>
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
 RPKI validation codes: V - valid, I - invalid, N - not-found


 Total Number of Routes: 2
      Network            NextHop        MED        LocPrf    PrefVal Path/Ogn

 *&gt;   172.16.1.0/24     <strong>10.20.1.2</strong>       <strong>100</strong>                   0      200i
 *                      10.20.2.2       150                   0      200i</pre>
<p>According to the preceding BGP routing table, the next hop address of the route to 172.16.1.0/24 is 10.20.1.2, indicating that traffic is transmitted on the primary link (<span class="keyword">Device</span>Aâ<span class="keyword">Device</span>B).</p>
</p></li><li><span>Configure BFD, the interval at which BFD packets are sent, the interval at which BFD packets are received, and the local detection multiplier to detect the BGP peer relationship between <span class="keyword">Device</span>A and <span class="keyword">Device</span>B.</span><p><p># Enable BFD on <span class="keyword">Device</span>A, set the minimum interval at which BFD Control packets are received and sent to 100 ms, and set the local detection multiplier to 4.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bfd]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp]<strong> peer 10.20.1.2 bfd enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp]<strong> peer 10.20.1.2 bfd min-tx-interval 100 min-rx-interval 100 detect-multiplier 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp]<strong> commit</strong></pre>
<p># Enable BFD on <span class="keyword">Device</span>B, set the minimum interval at which BFD Control packets are received and sent to 100 ms, and set the local detection multiplier to 4.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B]<strong> bgp 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp] <strong>peer 10.20.1.1 bfd enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp] <strong>peer 10.20.1.1 bfd min-tx-interval 100 min-rx-interval 100 detect-multiplier 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp] <strong>commit</strong></pre>
<p># Check all the BFD sessions established by BGP on <span class="keyword">Device</span>A.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display bgp bfd session all</strong>
--------------------------------------------------------------------------------
  Local_Address      Peer_Address       Interface
  10.20.1.1          10.20.1.2          GigibitEthernet<span>0/1/0</span>
  Tx-interval(ms)    Rx-interval(ms)    Multiplier  Session-State
  100                100                <strong>4</strong>           <strong>Up</strong>
  Wtr-interval(m)    
  0                               
--------------------------------------------------------------------------------</pre>
</p></li><li><span>Verify the configuration.</span><p><p># Run the <strong>shutdown</strong> command on GE <span>0/2/0</span> of <span class="keyword">Device</span>B to simulate a fault on the primary link.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<p># Display the BGP routing table of <span class="keyword">Device</span>A.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display bgp routing-table</strong>

 BGP Local router ID is 1.1.1.1
 Status codes: * - valid, &gt; - best, d - damped,<span> x - best external,</span><span> a - add path,</span>
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
 RPKI validation codes: V - valid, I - invalid, N - not-found


 Total Number of Routes: 1
      Network            NextHop        MED        LocPrf    PrefVal Path/Ogn

 *&gt;   172.16.1.0/24      10.20.2.2       150                   0      200i   </pre>
<p>As shown in the BGP routing table, the backup link (<span class="keyword">Device</span>A -&gt; <span class="keyword">Device</span>C -&gt; <span class="keyword">Device</span>B) takes effect after the primary link fails, and the next hop address of the route to 172.16.1.0/24 becomes 10.20.2.2.</p>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172366397__section_dc_vrp_bgp_cfg_408305"><a name="EN-US_TASK_0172366397__section_dc_vrp_bgp_cfg_408305"></a><a name="section_dc_vrp_bgp_cfg_408305"></a><a name="EN-US_TASK_0172366397__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen">bfd</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.20.1.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.20.2.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">bgp 100</pre>
<pre class="screen"> router-id 1.1.1.1</pre>
<pre class="screen"> peer 10.20.1.2 as-number 200</pre>
<pre class="screen"> peer 10.20.1.2 ebgp-max-hop 255</pre>
<pre class="screen"> peer 10.20.1.2 bfd min-tx-interval 100 min-rx-interval 100 detect-multiplier 4</pre>
<pre class="screen"> peer 10.20.1.2 bfd enable</pre>
<pre class="screen"> peer 10.20.2.2 as-number 200</pre>
<pre class="screen"> peer 10.20.2.2 ebgp-max-hop 255</pre>
<pre class="screen"> #</pre>
<pre class="screen"> ipv4-family unicast</pre>
<pre class="screen">  undo synchronization 
  peer 10.20.1.2 enable</pre>
<pre class="screen">  peer 10.20.2.2 enable</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">bfd</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.1.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.20.1.2 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.16.1.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">bgp 200</pre>
<pre class="screen"> router-id 2.2.2.2</pre>
<pre class="screen"> peer 10.1.1.2 as-number 200</pre>
<pre class="screen"> peer 10.20.1.1 as-number 100</pre>
<pre class="screen"> peer 10.20.1.1 ebgp-max-hop 255</pre>
<pre class="screen"> peer 10.20.1.1 bfd min-tx-interval 100 min-rx-interval 100 detect-multiplier 4</pre>
<pre class="screen"> peer 10.20.1.1 bfd enable</pre>
<pre class="screen"> #</pre>
<pre class="screen"> ipv4-family unicast</pre>
<pre class="screen">  undo synchronization 
  network 172.16.1.0 255.255.255.0</pre>
<pre class="screen">  peer 10.1.1.2 enable</pre>
<pre class="screen">  peer 10.20.1.1 enable</pre>
<pre class="screen">  peer 10.20.1.1 route-policy 10 export</pre>
<pre class="screen">#</pre>
<pre class="screen">route-policy 10 permit node 10</pre>
<pre class="screen"> apply cost 100</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>C configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>C</pre>
<pre class="screen">#</pre>
<pre class="screen">bfd</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.1.2 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.20.2.2 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">bgp 200</pre>
<pre class="screen"> router-id 3.3.3.3</pre>
<pre class="screen"> peer 10.1.1.1 as-number 200</pre>
<pre class="screen"> peer 10.20.2.1 as-number 100</pre>
<pre class="screen"> peer 10.20.2.1 ebgp-max-hop 255</pre>
<pre class="screen"> #</pre>
<pre class="screen"> ipv4-family unicast</pre>
<pre class="screen">  undo synchronization 
  peer 10.1.1.1 enable</pre>
<pre class="screen">  peer 10.20.2.1 enable</pre>
<pre class="screen">  peer 10.20.2.1 route-policy 10 export</pre>
<pre class="screen">#</pre>
<pre class="screen">route-policy 10 permit node 10</pre>
<pre class="screen"> apply cost 150</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3070.html">Configuration Examples for BGP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4000.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4084.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>