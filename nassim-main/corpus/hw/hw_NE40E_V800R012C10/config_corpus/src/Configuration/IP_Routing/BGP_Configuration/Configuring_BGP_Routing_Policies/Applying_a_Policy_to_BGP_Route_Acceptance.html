
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Applying a Policy to BGP Route Acceptance">
<meta name="abstract" content="After an import policy is configured, only the routes that match the import policy are accepted.">
<meta name="description" content="After an import policy is configured, only the routes that match the import policy are accepted.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3112.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3114.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_31160.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001347737432">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Applying a Policy to BGP Route Acceptance</title>
</head>
<body><a name="EN-US_TASK_0000001347737432"></a><a name="EN-US_TASK_0000001347737432"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Applying a Policy to BGP Route Acceptance</h1>
<div class="taskbody"><p>After an import policy is configured, only the routes that match the import policy are accepted.</p>
<div class="steps-unordered"><a name="EN-US_TASK_0000001347737432__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure BGP to filter the routes to be received globally.</span><p><p>You can configure the device to filter the routes to be received.</p>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span><p><p>The IPv4 unicast address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Configure BGP to filter the routes to be received globally.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>BGP acceptance policies take effect in the following sequence:</p>
<ol type="a"><li>Globally received routes:<p>Basic ACL-based acceptance policy configured using the <a href="cmdqueryname=filter-policy+acl-name+import"><b><span class="cmdname">filter-policy</span></b></a> { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } <strong><span>import</span></strong> command</p>
<p>IP prefix list-based acceptance policy configured using the <a href="cmdqueryname=filter-policy+ip-prefix+import"><b><span class="cmdname">filter-policy</span></b></a> <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> <strong><span>import</span></strong> command</p>
</li><li>Basic ACL-based policy for accepting routes from a specified peer or peer group, configured using the <a href="cmdqueryname=peer+filter-policy+import"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> } <strong><span>filter-policy</span></strong> { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } <strong><span>import</span></strong> command</li><li>AS_Path filter-based policy for accepting routes from a specified peer or peer group, configured using the <a href="cmdqueryname=peer+as-path-filter+import"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> } <strong><span>as-path-filter</span></strong> { <i><span class="varname">number</span></i> | <i><span class="varname">name</span></i> } <strong><span>import</span></strong> command</li><li>IP prefix list-based policy for accepting routes from a specified peer or peer group, configured using the <a href="cmdqueryname=peer+ip-prefix+import"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i>  } <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> <strong><span>import</span></strong> command</li><li>Route-policy-based policy for accepting routes from a specified peer or peer group, configured using the <a href="cmdqueryname=peer+route-policy+import"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i>  } <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>import</span></strong> command</li></ol>
</div></div>
</p><p><ul><li><div class="p">To filter routes based on a basic ACL, perform the following steps:<ol type="a"><li>Run the <a href="cmdqueryname=filter-policy+acl-name+import"><b><span class="cmdname">filter-policy</span></b></a> { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } <strong><span>import</span></strong> command to filter the routes to be received.</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the BGP view.</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</li><li>Run the <span><a href="cmdqueryname=acl+name+basic+basic+number+match-order+config+auto"><b><span class="cmdname">acl</span></b></a> { <strong><span>name</span></strong> <i><span class="varname">basic-acl-name</span></i> { <strong><span>basic</span></strong> | [ <strong><span>basic</span></strong> ] <strong><span>number</span></strong> <i><span class="varname">basic-acl-number</span></i> } } [ <strong><span>match-order</span></strong> { <strong><span>config</span></strong> | <strong><span>auto</span></strong> } ]</span> command to enter the ACL view.</li><li><p>Run the <span><a href="cmdqueryname=rule+name+deny+permit"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> }</span> command to configure a rule for the ACL.</p>
<p>When the <a href="cmdqueryname=rule+source+time-range"><b><span class="cmdname">rule</span></b></a> command is used to configure a filtering rule for a named ACL, only the configurations specified by <strong><span>source</span></strong> and <strong><span>time-range</span></strong> take effect.</p>
<div class="p">When a filter-policy of a routing protocol is used to filter routes:<ul><li><p>If the action specified in an ACL rule is <strong>permit</strong>, a route matching the rule will be accepted or advertised by the system.</p>
</li><li><p>If the action specified in an ACL rule is <strong>deny</strong>, a route matching the rule will not be accepted or advertised by the system.</p>
</li><li><p>If the network segment of a route is not within the range specified in an ACL rule, the route will not be accepted or advertised by the system.</p>
</li><li><p>If an ACL does not contain any rules, none of the routes matched against the filter-policy that uses this ACL will be accepted or advertised by the system.</p>
</li><li><p>Routes can be filtered using a blacklist or whitelist:</p>
<p>If ACL rules are used for matching in configuration order, the system matches the rules in ascending order of their IDs.</p>
<p>Filtering using a blacklist: Configure a rule with a smaller ID and specify the action <strong>deny</strong> in this rule to filter out the unwanted routes. Then, configure another rule with a larger ID in the same ACL and specify the action <strong>permit</strong> in this rule to accept or advertise the other routes.</p>
<p>Filtering using a whitelist: Configure a rule with a small ID and specify the action <strong>permit</strong> in this rule to permit the routes to be accepted or advertised. Then, configure another rule with a larger ID in the same ACL and specify the action <strong>deny</strong> in this rule to filter out the routes that are not to be accepted or advertised.</p>
</li></ul>
</div>
</li></ol>
</div>
</li><li>To filter routes based on an IP prefix list, run the <a href="cmdqueryname=filter-policy+ip-prefix+import"><b><span class="cmdname">filter-policy</span></b></a> <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> <strong><span>import</span></strong> command.</li></ul>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If an ACL is specified in the <a href="cmdqueryname=filter-policy"><b><span class="cmdname">filter-policy</span></b></a> command and no VPN instance is specified in ACL rules, BGP filters both public network and VPN routes in all address families. If a VPN instance is specified in an ACL rule, only data traffic from the VPN instance matches the filtering condition, and no routes are filtered.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure BGP to filter the routes to be received from a specified peer or peer group.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span><p><p>The IPv4 unicast address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Perform any of the following operations to filter the routes to be received from a specified peer or peer group:</span><p><ul><li><div class="p">To filter routes based on a basic ACL, perform the following steps:<ol type="a"><li>Run the <a href="cmdqueryname=peer+filter-policy+import"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> } <strong><span>filter-policy</span></strong> { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } <strong><span>import</span></strong> command to configure the device to filter the routes to be received from a specified peer or peer group.</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the BGP view.</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</li><li>Run the <span><a href="cmdqueryname=acl"><b><span class="cmdname" id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdname830329318214207">acl</span></b></a> { <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname1836897817214207">name</span></strong> <i><span class="varname" id="EN-US_TASK_0000001347737432__en-us_task_0172336153_varname1833174039214207">basic-acl-name</span></i> { <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname812104027214207">basic</span></strong> | [ <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname2098561743214207">basic</span></strong> ] <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname2073793852214207">number</span></strong> <i><span class="varname" id="EN-US_TASK_0000001347737432__en-us_task_0172336153_varname1517281059214207">basic-acl-number</span></i> } | [ <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname958027286214207">number</span></strong> ] <i><span class="varname" id="EN-US_TASK_0000001347737432__en-us_task_0172336153_varname235500026214207">basic-acl-number</span></i> } [ <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname48680667214207">match-order</span></strong> { <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname157204654214207">config</span></strong> | <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname507297311214207">auto</span></strong> } ]</span> command to enter the ACL view.</li><li><p>Run the <span><a href="cmdqueryname=rule"><b><span class="cmdname" id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdname1993062488214207">rule</span></b></a> [ <i><span class="varname" id="EN-US_TASK_0000001347737432__en-us_task_0172336153_varname859153543214207">rule-id</span></i> ] [ <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname1446371756214207">name</span></strong> <i><span class="varname" id="EN-US_TASK_0000001347737432__en-us_task_0172336153_varname1516501376214207">rule-name</span></i> ] { <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname1764568478214207">deny</span></strong> | <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname761045443214207">permit</span></strong> } [ <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname350204750214207">fragment-type</span></strong> { <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname2057248666214207">fragment</span></strong> | <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname232427091214207">non-fragment</span></strong> | <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname2108634181214207">non-subseq</span></strong> | <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname1558997990214207">fragment-subseq</span></strong> | <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname1149675104214207">fragment-spe-first</span></strong> } | <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname810735923214207">source</span></strong> { <i><span class="varname" id="EN-US_TASK_0000001347737432__en-us_task_0172336153_varname673241813214207">source-ip-address</span></i> { <i><span class="varname" id="EN-US_TASK_0000001347737432__en-us_task_0172336153_varname58053590214207">source-wildcard</span></i> | <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname1238085223214207">0</span></strong><span> | <i><span class="varname" id="EN-US_TASK_0000001347737432__en-us_task_0172336153_varname1849892084214207">src-netmask</span></i></span> } | <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname336857444214207">any</span></strong> } | <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname1089666193214207">time-range</span></strong> <i><span class="varname" id="EN-US_TASK_0000001347737432__en-us_task_0172336153_varname1818489711214207">time-name</span></i> | <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname2122804462214207">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0000001347737432__en-us_task_0172336153_varname1001938923214207">vpn-instance-name</span></i> ] <sup id="EN-US_TASK_0000001347737432__en-us_task_0172336153_sup1574448225214207">*</sup></span> command to configure a rule for the ACL.</p>
<p>When the <a href="cmdqueryname=rule"><b><span class="cmdname" id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdname220955808214207">rule</span></b></a> command is run to configure rules for a named ACL, only the source address range specified by <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname1062368536214207">source</span></strong> and the time period specified by <strong><span id="EN-US_TASK_0000001347737432__en-us_task_0172336153_cmdparmname2006062735214207">time-range</span></strong> are valid as the rules.</p>
<div class="p">When a filtering policy of a routing protocol is used to filter routes:<ul id="EN-US_TASK_0000001347737432__en-us_task_0172336153_ul135725010214207"><li id="EN-US_TASK_0000001347737432__en-us_task_0172336153_li1312346841214207"><p id="EN-US_TASK_0000001347737432__en-us_task_0172336153_p1956301997214207"><a name="EN-US_TASK_0000001347737432__en-us_task_0172336153_li1312346841214207"></a><a name="en-us_task_0172336153_li1312346841214207"></a>If the action specified in an ACL rule is <strong id="EN-US_TASK_0000001347737432__en-us_task_0172336153_b1343120114214207">permit</strong>, a route that matches the rule will be received or advertised by the system.</p>
</li><li id="EN-US_TASK_0000001347737432__en-us_task_0172336153_li1392638396214207"><p id="EN-US_TASK_0000001347737432__en-us_task_0172336153_p649252919214207"><a name="EN-US_TASK_0000001347737432__en-us_task_0172336153_li1392638396214207"></a><a name="en-us_task_0172336153_li1392638396214207"></a>If the action specified in an ACL rule is <strong id="EN-US_TASK_0000001347737432__en-us_task_0172336153_b1955829907214207">deny</strong>, a route that matches the rule will not be received or advertised by the system.</p>
</li><li id="EN-US_TASK_0000001347737432__en-us_task_0172336153_li1858384138214207"><p id="EN-US_TASK_0000001347737432__en-us_task_0172336153_p860045398214207"><a name="EN-US_TASK_0000001347737432__en-us_task_0172336153_li1858384138214207"></a><a name="en-us_task_0172336153_li1858384138214207"></a>If a route has not matched any ACL rules, the route will not be received or advertised by the system.</p>
</li><li id="EN-US_TASK_0000001347737432__en-us_task_0172336153_li124866694214207"><p id="EN-US_TASK_0000001347737432__en-us_task_0172336153_p543002939214207"><a name="EN-US_TASK_0000001347737432__en-us_task_0172336153_li124866694214207"></a><a name="en-us_task_0172336153_li124866694214207"></a>If an ACL does not contain any rules, all routes matching the <strong id="EN-US_TASK_0000001347737432__en-us_task_0172336153_b1183904776214207">route-policy</strong> that references the ACL will not be received or advertised by the system.</p>
</li><li id="EN-US_TASK_0000001347737432__en-us_task_0172336153_li1497229201214207"><p id="EN-US_TASK_0000001347737432__en-us_task_0172336153_p1865289308214207"><a name="EN-US_TASK_0000001347737432__en-us_task_0172336153_li1497229201214207"></a><a name="en-us_task_0172336153_li1497229201214207"></a>In the configuration order, the system first matches a route with a rule that has a smaller number and then matches the route with a rule with a larger number. Routes can be filtered using a blacklist or a whitelist:</p>
<p id="EN-US_TASK_0000001347737432__en-us_task_0172336153_p1198919868214207">Route filtering using a blacklist: Configure a rule with a smaller number and specify the action <strong id="EN-US_TASK_0000001347737432__en-us_task_0172336153_b1283372383214207">deny</strong> in this rule to filter out the unwanted routes. Then, configure another rule with a larger number in the same ACL and specify the action <strong id="EN-US_TASK_0000001347737432__en-us_task_0172336153_b1653264950214207">permit</strong> in this rule to receive or advertise the other routes.</p>
<p id="EN-US_TASK_0000001347737432__en-us_task_0172336153_p469236985214207">Route filtering using a whitelist: Configure a rule with a smaller number and specify the action <strong id="EN-US_TASK_0000001347737432__en-us_task_0172336153_b261709700214207">permit</strong> in this rule to permit the routes to be received or advertised by the system. Then, configure another rule with a larger number in the same ACL and specify the action <strong id="EN-US_TASK_0000001347737432__en-us_task_0172336153_b924805964214207">deny</strong> in this rule to filter out unwanted routes.</p>
</li></ul>
</div>
</li></ol>
</div>
</li><li>To filter routes based on an AS_Path filter, run the <a href="cmdqueryname=peer+as-path-filter+import"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> } <strong><span>as-path-filter</span></strong> { <i><span class="varname">number</span></i> | <i><span class="varname">name</span></i> } <strong><span>import</span></strong> command.</li><li><p>To filter routes based on an IP prefix list, run the <a href="cmdqueryname=peer+ip-prefix+import"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i>  } <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> <strong><span>import</span></strong> command.</p>
</li><li><p>To filter routes based on a route-policy, run the <a href="cmdqueryname=peer+route-policy+import"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i>  } <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>import</span></strong> command.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>A route-policy specified in the <a href="cmdqueryname=peer+route-policy"><b><span class="cmdname">peer route-policy</span></b></a> <a href="cmdqueryname=import"><b><span class="cmdname">import</span></b></a> command does not support interface-based matching rules (configured using the <a href="cmdqueryname=if-match+interface"><b><span class="cmdname">if-match interface</span></b></a> command).</p>
</div></div>
<p>The import policy applied to a peer in a peer group can be different from that applied to the peer group. Specifically, a unique policy can be used to filter the routes to be received from each peer in the peer group.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Limit the number of routes received from peers.</span><p><p>If a BGP <span class="keyword">Router</span> is maliciously attacked or network configuration errors occur, the <span class="keyword">Router</span> will receive a large number of routes from its peers. As a result, a large number of resources are consumed on the <span class="keyword">Router</span>. To prevent this issue, the administrator must limit the resources to be consumed during device operation based on the network planning and <span class="keyword">Router</span> capacity. BGP provides peer-specific route control to limit the number of routes received from a peer or peer group.</p>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span><p><p>The IPv4 unicast address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+route-limit"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv4-address</span></i> } <a href="cmdqueryname=route-limit+alert-only+idle-forever+idle-timeout"><b><span class="cmdname">route-limit</span></b></a> <i><span class="varname">limit</span></i> [ <i><span class="varname">percentage</span></i> ] [ <strong><span>alert-only</span></strong> | <strong><span>idle-forever</span></strong> | <strong><span>idle-timeout</span></strong> <i><span class="varname">minutes</span></i> ]</span><p><p>The maximum number of routes that the device is allowed to accept from the specified peer or peer group is set.</p>
</p><p><p>This command provides route control based on peers. You can specify parameters as needed to control the processing if the number of the routes accepted from a peer exceeds the limit specified.</p>
<ul><li><p>If <strong><span>alert-only</span></strong> is set, the peer relationship is not interrupted and no more routes are accepted after the route limit is reached. In this case, an alarm is generated, and a log is recorded.</p>
</li><li><p>If <strong><span>idle-forever</span></strong> is set, the peer relationship is interrupted and the system does not automatically attempt to re-establish the connection. In this case, an alarm is generated, and a log is recorded. In this case, the peer status is Idle in the <a href="cmdqueryname=display+bgp+peer+verbose"><b><span class="cmdname">display bgp peer</span></b></a> [ <strong><span>verbose</span></strong> ] command output. To restore the BGP connection, run the <a href="cmdqueryname=reset+bgp"><b><span class="cmdname">reset bgp</span></b></a> command. Configuring this parameter is not recommended.</p>
</li><li><p>If <strong><span>idle-timeout</span></strong> is set, the peer relationship is interrupted. The device retries setting up a connection after the timer expires. An alarm is generated, and a log is recorded. In this case, the peer status is Idle in the <a href="cmdqueryname=display+bgp+peer+verbose"><b><span class="cmdname">display bgp peer</span></b></a> [ <strong><span>verbose</span></strong> ] command output. To restore the BGP connection before the timer expires, run the <a href="cmdqueryname=reset+bgp"><b><span class="cmdname">reset bgp</span></b></a> command.</p>
</li><li><p>If none of the preceding parameters is set, the peer relationship is disconnected. The device retries setting up a connection in 30 seconds. An alarm is generated, and a log is recorded.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the number of routes received by the local <span class="keyword">Router</span> exceeds the upper limit and the <a href="cmdqueryname=peer+route-limit+alert-only"><b><span class="cmdname">peer route-limit</span></b></a> command is used for the first time, the local <span class="keyword">Router</span> and its peer reestablish the peer relationship, regardless of whether <strong><span>alert-only</span></strong> is set.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3112.html">Configuring BGP Routing Policies
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3114.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_31160.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>