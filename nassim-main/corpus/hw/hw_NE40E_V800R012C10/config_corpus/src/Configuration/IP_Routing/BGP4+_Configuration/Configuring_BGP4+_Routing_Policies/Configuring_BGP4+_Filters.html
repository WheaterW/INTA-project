
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP4+ Filters">
<meta name="abstract" content="BGP4+ filters can be used in routing policies or when you want to check BGP4+ running status as required.">
<meta name="description" content="BGP4+ filters can be used in routing policies or when you want to check BGP4+ running status as required.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0027.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0029.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,bgpvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP IPv6">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP IPv6">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP IPv6">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00604599">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366451">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP4+ Filters</title>
</head>
<body><a name="EN-US_TASK_0172366451"></a><a name="EN-US_TASK_0172366451"></a>

<div class="articleBoxWithoutHead">

	<h1 class="topicTitle-h1">Configuring BGP4+ Filters</h1>

	
	
	<div class="taskbody"><p>BGP4+ filters can be used in routing policies or when you want to check BGP4+ running status as required.</p>

		<div class="context"><a name="EN-US_TASK_0172366451__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p">
			<p>BGP4+ provides the following types of filters, which can be used to query BGP4+ running status or used in routing policies:</p>

			<ul><li>
					<p>
						<a href="#EN-US_TASK_0172366451__step411579934214039">AS_Path filter</a>
					</p>
<p>The AS_Path filter filters BGP4+ routes by the AS_Path attribute and filters out unqualified routes. Multiple rules (permit or deny) can be specified in a filter.</p>

				</li><li>
					<p>
						<a href="#EN-US_TASK_0172366451__cmd1328648366214039">Community filter</a>
					</p>
<p>The community filter consists of multiple community attribute lists. There are two types of community attribute lists: standard community access lists and extended community access lists.</p>

				</li><li>
					<a href="#EN-US_TASK_0172366451__cmd638172392510">IPv6 address prefix list</a><p>Before configuring a conditional BGP4+ route advertisement policy, you need to create an IPv6 address prefix list.</p>

				</li></ul>

		</div></div>

		<div class="steps-unordered"><a name="EN-US_TASK_0172366451__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul>
			<li id="EN-US_TASK_0172366451__step411579934214039"><span id="EN-US_TASK_0172366451__">Configure the AS_Path filter.</span>
				<ol>
					<li class="substepexpand"><span>Run <span>
								<a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a>
							</span>
						</span>
						<p>
							<p>The system view is displayed.</p>

						</p>
					</li>
					<li class="substepexpand"><span>Run <a href="cmdqueryname=ip+as-path-filter"><b><span class="cmdname">ip as-path-filter</span></b></a> { <i><span class="varname">as-path-filter-number</span></i> | <i><span class="varname">as-path-filter-name</span></i> } <span>[ <strong><span>index</span></strong>
								<i><span class="varname">index-number</span></i> ]</span>
							<i><span class="varname">matchMode</span></i>
							<i><span class="varname">regular-expression</span></i>
						</span>
						<p>
							<p>The AS_Path filter is configured.</p>
<p>After the <a href="cmdqueryname=peer+as-path-filter"><b><span class="cmdname">peer as-path-filter</span></b></a> command is used to apply a routing policy to BGP4+ routes, the AS_Path filter filters out unqualified routes.</p>
<p>The AS_Path filter uses the regular expression to define matching rules. A regular expression consists of the following parts:</p>

							<ul><li>
									<p>Metacharacter: defines matching rules.</p>

								</li><li>
									<p>General character: defines matching objects.</p>

								</li></ul>

							<p>For example, ^10 indicates that only the AS_Path attribute with the first value being 10 is matched. A circumflex (^) indicates that the beginning of a character string is matched.</p>
<p>Multiple rules, permit or deny, can be specified in a filter. The relationship between these rules is "OR". This means that if a route meets one of the matching rules, it matches the AS_Path filter.</p>

							<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody">
								<p>For details on the regular expression, see <strong>Regular Expression</strong> in "Command Display Mode" of "How to Use the CLI" in <em>
										<span class="keyword">HUAWEI NE40E-M2 series</span>
										<span class="keyword">Universal Service Router</span> Configuration Guide - Basic Configuration</em>.</p>

							</div></div>

						</p>
					</li>
					<li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a>
						</span>
						<p>
							<p>The configuration is committed.</p>

						</p>
					</li>
				</ol>

			</li>
			<li><span><a name="EN-US_TASK_0172366451__cmd1328648366214039"></a><a name="cmd1328648366214039"></a>Configure the community filter.</span>
				<p>
					<p>Community filters are classified into two types: standard community filters and advanced community filters. Advanced community filters support regular expressions and are more flexible than standard community filters.</p>

				</p>
				<ol>
					<li class="substepexpand"><span>Run <span>
								<a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a>
							</span>
						</span>
						<p>
							<p>The system view is displayed.</p>

						</p>
					</li>
					<li class="substepexpand"><span>Configure a community filter.</span>
						<p>
							<ul><li>
									<p>To configure a standard community filter, run the <a href="cmdqueryname=ip+community-filter+basic"><b><span class="cmdname">ip community-filter basic </span></b></a>
										<i><span class="varname">basCfName</span></i> [ <strong><span>index</span></strong>
										<i><span class="varname">index-val</span></i> ] <i><span class="varname">matchMode</span></i> [ <i><span class="varname">cmntyStr</span></i> | <i><span class="varname">cmntyNum</span></i> | <strong><span>internet</span></strong>
										 | <strong><span>no-advertise</span></strong> | <strong><span>no-export</span></strong> | <strong><span>no-export-subconfed</span></strong> ] &amp;&lt;1-20&gt; or <a href="cmdqueryname=ip+community-filter"><b><span class="cmdname">ip community-filter </span></b></a>
										<i><span class="varname">cfIndex</span></i> [ <strong><span>index</span></strong>
										<i><span class="varname">index-val</span></i> ] <i><span class="varname">matchMode</span></i> [ <i><span class="varname">cmntyStr</span></i> | <i><span class="varname">cmntyNum</span></i> | <strong><span>internet</span></strong>
										 | <strong><span>no-advertise</span></strong> | <strong><span>no-export</span></strong> | <strong><span>no-export-subconfed</span></strong> ] &amp;&lt;1-20&gt; command.</p>

								</li><li>
									<p>To configure an advanced community filter, run the <a href="cmdqueryname=ip+community-filter"><b><span class="cmdname">ip community-filter</span></b></a> { <strong><span>advanced</span></strong>
										<i><span class="varname">comm-filter-name</span></i> | <i><span class="varname">adv-comm-filter-num</span></i> } <span>[ <strong><span>index</span></strong>
											<i><span class="varname">index-number</span></i> ]</span>
										<i><span class="varname">matchMode</span></i>
										<i><span class="varname">regular-expression</span></i> command.</p>

								</li></ul>

						</p>
					</li>
					<li class="substepexpand"><span>Run <span>
								<a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a>
							</span>
						</span>
						<p>
							<p>The configuration is committed.</p>

						</p>
					</li>
				</ol>

			</li>
			<li><span>Configure a Large-community filter.</span>
				<p>
					<p>There are two types of Large-community filters: basic Large-community filters and advanced Large-community filters. Advanced Large-community filters support regular expressions and are more flexible than basic Large-community filters.</p>

				</p>
				<ol>
					<li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a>
						</span>
						<p>
							<p>The system view is displayed.</p>

						</p>
					</li>
					<li class="substepexpand"><span>Configure a Large-Community filter.</span>
						<p>
							<ul><li>
									<p>To configure a basic Large-Community filter, run the <a href="cmdqueryname=ip+large-community-filter"><b><span class="cmdname">ip large-community-filter</span></b></a>
										<strong><span>basic</span></strong>
										<i><span class="varname">large-comm-filter-name</span></i> [ <strong><span>index</span></strong>
										<i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <i><span class="varname">cmntyStr</span></i> } &amp;&lt;1-16&gt; command.</p>

								</li><li>
									<p>To configure an advanced Large-Community filter, run the <a href="cmdqueryname=ip+large-community-filter"><b><span class="cmdname">ip large-community-filter</span></b></a>
										<strong><span>advanced</span></strong>
										<i><span class="varname">large-comm-filter-name</span></i> [ <strong><span>index</span></strong>
										<i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular-expression</span></i> command.</p>

								</li></ul>

						</p>
					</li>
					<li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a>
						</span>
						<p>
							<p>The configuration is committed.</p>

						</p>
					</li>
				</ol>

			</li>
			<li><span>Configure an extended community filter.</span>
				<ol>
					<li class="substepexpand"><span>Run <span>
								<a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a>
							</span>
						</span>
						<p>
							<p>The system view is displayed.</p>

						</p>
					</li>
					<li class="substepexpand"><span>Perform either of the following operations as required to configure an extended community filter.</span>
						<p>
							<p>To configure a VPN-Target extended community filter:</p>

							<ul><li>
									<p>To configure a basic VPN-Target extended community filter, run the <a href="cmdqueryname=ip+extcommunity-filter"><b><span class="cmdname">ip extcommunity-filter</span></b></a> { <i><span class="varname">basic-extcomm-filter-num</span></i> | <strong><span>basic</span></strong>
										<i><span class="varname">basic-extcomm-filter-name</span></i> }
										<span>[ <strong><span>index</span></strong>
											<i><span class="varname">index-number</span></i> ] </span> { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } { <strong><span>rt</span></strong>
										<i><span class="varname">extCmntyStr</span></i> } &amp;&lt;1-16&gt; command.</p>

								</li><li>
									<p>To configure an advanced VPN-Target extended community filter, run the <a href="cmdqueryname=ip+extcommunity-filter"><b><span class="cmdname">ip extcommunity-filter</span></b></a> { <i><span class="varname">advanced-extcomm-filter-num</span></i> | <strong><span>advanced</span></strong>
										<i><span class="varname">advanced-extcomm-filter-name</span></i> } 
										<span>[ <strong><span>index</span></strong>
											<i><span class="varname">index-number</span></i> ] </span> { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <i><span class="varname">regular-expression</span></i> command.</p>

								</li></ul>
<p>To configure an SoO extended community filter:</p>

							<ul><li>
									<p>To configure a basic SoO extended community filter, run the <a href="cmdqueryname=ip+extcommunity-list+soo+basic"><b><span class="cmdname">ip extcommunity-list soo basic</span></b></a>
										<i><span class="varname">basic-extcomm-filter-name</span></i> [ <strong><span>index</span></strong>
										<i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <i><span class="varname">site-of-origin</span></i> } &amp;&lt;1-16&gt; command.</p>

								</li><li>
									<p>To configure an advanced SoO extended community filter, run the <a href="cmdqueryname=ip+extcommunity-list+soo+advanced"><b><span class="cmdname">ip extcommunity-list soo advanced</span></b></a>
										<i><span class="varname">advanced-extcomm-filter-name</span></i> [ <strong><span>index</span></strong>
										<i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular-expression</span></i> command.</p>

								</li></ul>
<p>Multiple entries can be defined in an extended community filter. The relationship between the entries is "OR". This means that if a route matches one of the rules, the route matches the filter.</p>

						</p>
					</li>
					<li class="substepexpand"><span>Run <span>
								<a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a>
							</span>
						</span>
						<p>
							<p>The configuration is committed.</p>

						</p>
					</li>
				</ol>

			</li>
			<li><span><a name="EN-US_TASK_0172366451__cmd638172392510"></a><a name="cmd638172392510"></a>Configure an IPv6 address prefix list.</span>
				<p>
					<p>Before configuring a conditional BGP4+ route advertisement policy, you need to create an IPv6 address prefix list.</p>

				</p>
				<ol>
					<li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a>
						</span>
						<p>
							<p>The system view is displayed.</p>

						</p>
					</li>
					<li class="substepexpand"><span>Run <strong><span>filter-list ipv6-prefix</span></strong>
							<i><span class="varname">name</span></i>
						</span>
						<p>
							<p>An IPv6 address prefix list is created, and its view is displayed.</p>

						</p>
					</li>
					<li class="substepexpand"><span>Run <a href="cmdqueryname=prefix"><b><span class="cmdname">prefix</span></b></a>
							<i><span class="varname">address</span></i>
							<i><span class="varname">maskLen</span></i>
						</span>
						<p>
							<p>An IPv6 address and mask are configured for the IPv6 address prefix list.</p>

						</p>
					</li>
					<li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a>
						</span>
						<p>
							<p>The configuration is committed.</p>

						</p>
					</li>
				</ol>

			</li>
		</ul></div>

	</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0027.html">Configuring BGP4+ Routing Policies
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0029.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>