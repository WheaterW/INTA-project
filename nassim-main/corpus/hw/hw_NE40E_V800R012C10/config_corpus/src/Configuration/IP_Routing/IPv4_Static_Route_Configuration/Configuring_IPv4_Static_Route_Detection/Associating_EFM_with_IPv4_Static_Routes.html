
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Associating EFM with IPv4 Static Routes">
<meta name="abstract" content="After EFM is associated with IPv4 static routes, the system determines whether to activate the static routes based on the EFM session status.">
<meta name="description" content="After EFM is associated with IPv4 static routes, the system determines whether to activate the static routes based on the EFM session status.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0033.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0075.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="s00826690">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365446">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Associating EFM with IPv4 Static Routes</title>
</head>
<body><a name="EN-US_TASK_0172365446"></a><a name="EN-US_TASK_0172365446"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Associating EFM with IPv4 Static Routes</h1>
<div class="taskbody"><p>After EFM is associated with IPv4 static routes, the system determines whether to activate the static routes based on the EFM session status.</p>
<div class="context"><a name="EN-US_TASK_0172365446__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>After EFM is associated with IPv4 static routes, the system responds to EFM Up/Down events on a specified interface and determines whether to activate static routes. In this manner, route advertisement is controlled and remote traffic is forwarded.</p>
<p>On MANs, EFM is mainly used between customer edges (CEs) and underlayer provider edges (UPEs) to ensure the reliability and stability of connections between user networks and carrier networks. EFM monitors and rectifies faults on P2P Ethernet physical links or simulated links. It is recommended that EFM be used on user access networks.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365446__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before associating EFM with IPv4 static routes, complete the following tasks:</p>
<ul><li><p>Configure link-layer protocol parameters and IP addresses for interfaces to ensure that the link layer protocol of each interface is up.</p>
</li><li><p>Configure EFM OAM. For configuration details, see "Network Reliability" in <em><span class="keyword">HUAWEI NE40E-M2 series</span> <span class="keyword">Universal Service Router</span> Configuration Guide</em>.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365446__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Associate EFM with IPv4 static routes.</span><p><ul><li>To associate EFM with an IPv4 static route on the public network, run the <span><a href="cmdqueryname=ip+route-static"><b><span class="cmdname">ip route-static</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } { <i><span class="varname">nexthop-address</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <i><span class="varname">nexthop-address</span></i> ] | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <i><span class="varname">nexthop-address</span></i> } [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <sup>*</sup> <strong><span>track efm-state</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</span> command.</li><li>To associate EFM with an IPv4 static route in a VPN instance, run the <span><a href="cmdqueryname=ip+route-static+vpn-instance"><b><span class="cmdname">ip route-static vpn-instance</span></b></a> <i><span class="varname">vpn-source-name</span></i> <i><span class="varname">destination-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } { <i><span class="varname">nexthop-address</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <i><span class="varname">nexthop-address</span></i> ] | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <i><span class="varname">nexthop-address</span></i> } [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <sup>*</sup> <strong><span>track efm-state</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ]</span> command.</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172365446__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After completing the configuration, perform the following operations to verify it:</p>
<ul><li><p>Run the <a href="cmdqueryname=display+efm+session"><b><span class="cmdname">display efm session</span></b></a> { <strong><span>all</span></strong> | <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-num</span></i> } command to check information about the EFM OAM session on a specified interface.</p>
</li><li><p>Run the <a href="cmdqueryname=display+current-configuration"><b><span class="cmdname">display current-configuration</span></b></a> | <strong><span>include</span></strong> <strong><span>efm</span></strong> command to check configurations of association between EFM and IPv4 static routes.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0033.html">Configuring IPv4 Static Route Detection
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0075.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>