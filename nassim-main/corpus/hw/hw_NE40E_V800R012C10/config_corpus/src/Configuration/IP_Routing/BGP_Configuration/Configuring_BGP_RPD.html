
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP RPD">
<meta name="abstract" content="RPD provides a new method of distributing route-policies. It can work with the controller to efficiently and dynamically deploy route-policies.">
<meta name="description" content="RPD provides a new method of distributing route-policies. It can work with the controller to efficiently and dynamically deploy route-policies.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_5001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4115.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,bgpvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366281">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP RPD</title>
</head>
<body><a name="EN-US_TASK_0172366281"></a><a name="EN-US_TASK_0172366281"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP RPD</h1>
<div class="taskbody"><p>RPD provides a new method of distributing route-policies. It can work with the controller to efficiently and dynamically deploy route-policies.</p>
<div class="context"><a name="EN-US_TASK_0172366281__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>In a MAN ingress or IGW scenario, uneven link resource usage or link faults may cause link congestion. To make full use of network bandwidth, you can deploy an inbound traffic optimization solution to adjust route priorities so that traffic is diverted to idle links. In such a scenario, the <span class="keyword">Router</span> functions as a forwarder, and RPD needs to be deployed on it.</p>
<p>In <a href="#EN-US_TASK_0172366281__fig_dc_vrp_bgp_cfg_410401">Figure 1</a>, an inbound traffic optimization solution is deployed so that traffic from AS 200 to the backbone network is monitored and scheduled in real time. If the link from <span class="keyword">Device</span> C to <span class="keyword">Device</span> A is congested, the traffic enters AS 100 through <span class="keyword">Device</span> B and reaches the backbone network by path of the PE.</p>
<div class="fignone" id="EN-US_TASK_0172366281__fig_dc_vrp_bgp_cfg_410401"><a name="EN-US_TASK_0172366281__fig_dc_vrp_bgp_cfg_410401"></a><a name="fig_dc_vrp_bgp_cfg_410401"></a><span class="figcap"><b>Figure 1 </b>Typical networking of inbound traffic optimization</span><br><span><img class="vsd" src="images/fig_dc_vrp_bgp_cfg_410401.png" width="NaN" height="NaN"></span></div>
<p>In this scenario, forwarders adjust route attributes based on the traffic optimization policies delivered by the controller. This ensures that routes are advertised based on the traffic optimization policies, which are configured on the controller based on traffic application. The following describes how to perform operations on the local device (forwarder).</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366281__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring BGP RPD, complete the following tasks:</p>
<ul><li><p><a href="dc_vrp_bgp_cfg_3004.html">Configure basic BGP functions</a>, and establish a connection between the device and the controller to ensure routing reachability between them.</p>
</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172366281__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure basic RPD functions.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=rpd-family"><b><span class="cmdname">rpd-family</span></b></a></span><p><p>RPD is enabled, and the BGP RPD address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+enable"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>enable</span></strong></span><p><p>The device is enabled to exchange routing information with the specified peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span><p><p>The IPv4 unicast address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+rpd-policy+export+enable"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>rpd-policy export enable</span></strong></span><p><p>The RPD export route-policy function is enabled in the IPv4 unicast address family view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure GR to prevent the traffic interruption caused by a protocol restart.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=graceful-restart"><b><span class="cmdname">graceful-restart</span></b></a></span><p><p>GR is enabled in the BGP view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=rpd-family"><b><span class="cmdname">rpd-family</span></b></a></span><p><p>The BGP RPD address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+graceful-restart+static-timer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>graceful-restart static-timer</span></strong> <i><span class="varname">restart-time</span></i></span><p><p>GR is enabled in the BGP RPD address family, and a GR restart timer is set.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure router ID-based filtering on non-RRs in the RR scenario so that the non-RRs only accept the RPD routes that match the router ID of the local BGP process. If a large number of RPD routes are accepted, a large number of policy nodes are generated accordingly, which reduces the performance.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=rpd-family"><b><span class="cmdname">rpd-family</span></b></a></span><p><p>The BGP RPD address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=router-id+filter"><b><span class="cmdname">router-id filter</span></b></a></span><p><p>Router ID-based filtering is enabled.</p>
</p></li></ol>
</li><li><span>(Optional) Configure a delay for the protocol to apply an updated RPD route-policy after the controller notifies the local device of the RPD route update.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span><p><p>The IPv4 unicast address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=rpd-policy+change+notify-delay"><b><span class="cmdname">rpd-policy change notify-delay</span></b></a> <i><span class="varname">delay-time</span></i></span><p><p>A delay is configured for the RPD route-policy to take effect.</p>
</p></li></ol>
</li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0172366281__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><div class="p">After the configuration is complete, verify it.<ul><li><p>Run the <a href="cmdqueryname=display+bgp+peer+rpd+export-policy"><b><span class="cmdname">display bgp peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>rpd export-policy</span></strong> command to check RPD route-policies.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+rpd+routing-table"><b><span class="cmdname">display bgp rpd routing-table</span></b></a> command to check information about RPD routes.</p>
</li></ul>
</div>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3000.html">BGP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_5001.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4115.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>