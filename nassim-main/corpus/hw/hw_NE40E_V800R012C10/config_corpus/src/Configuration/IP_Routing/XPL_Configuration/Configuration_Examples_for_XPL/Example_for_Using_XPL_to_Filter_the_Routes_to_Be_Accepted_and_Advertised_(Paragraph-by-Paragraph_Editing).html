
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Using XPL to Filter the Routes to Be Accepted and Advertised (Paragraph-by-Paragraph Editing)">
<meta name="abstract" content="This section provides an example for using XPL to filter the routes to be accepted and advertised. This section provides an example for using XPL to filter the routes based on sets and route-filters in paragraph-by-paragraph editing mode.">
<meta name="description" content="This section provides an example for using XPL to filter the routes to be accepted and advertised. This section provides an example for using XPL to filter the routes based on sets and route-filters in paragraph-by-paragraph editing mode.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0012.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0021.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Routing Basis">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="s00826690">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366618">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Using XPL to Filter the Routes to Be Accepted and Advertised (Paragraph-by-Paragraph Editing)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366618"></a><a name="EN-US_TASK_0172366618"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Using XPL to Filter the Routes to Be Accepted and Advertised<span> (Paragraph-by-Paragraph Editing)</span></h1>
<div class="taskbody"><p>This section provides an example for using XPL to filter the routes to be accepted and advertised. <span>This section provides an example for using XPL to filter the routes based on sets and route-filters in paragraph-by-paragraph editing mode.</span></p>
<div class="context"><a name="EN-US_TASK_0172366618__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0172366618__section_dc_vrp_xpl_cfg_001301"><h4 class="sectiontitle">Networking Requirements</h4><div class="p" id="EN-US_TASK_0172366618__p1369681737214039">On the BGP network shown in <a href="#EN-US_TASK_0172366618__fig_dc_vrp_xpl_cfg_001301">Figure 1</a>, <span class="keyword" id="EN-US_TASK_0172366618__keyword790680223214039">Device</span>A and <span class="keyword" id="EN-US_TASK_0172366618__keyword1421559958214039">Device</span>B belong to AS 100, and <span class="keyword" id="EN-US_TASK_0172366618__keyword1263176298214039">Device</span>C, <span class="keyword" id="EN-US_TASK_0172366618__keyword587966050214039">Device</span>D, and <span class="keyword" id="EN-US_TASK_0172366618__keyword1546777259214039">Device</span>E belong to AS 200. <span class="keyword" id="EN-US_TASK_0172366618__keyword856866118214039">Device</span>A imports routes 2.2.2.0/24, 3.3.3.0/24, 4.4.4.0/24, and 5.5.5.0/24. Requirements:<ul id="EN-US_TASK_0172366618__ul1925307751214039"><li id="EN-US_TASK_0172366618__li131928218214039"><span class="keyword" id="EN-US_TASK_0172366618__keyword1114436222214039">Device</span>A advertises routes 2.2.2.0/24, 3.3.3.0/24, and 4.4.4.0/24 only to <span class="keyword" id="EN-US_TASK_0172366618__keyword6988114113716">Device</span>B.</li><li id="EN-US_TASK_0172366618__li573367231214039">After receiving the three routes, <span class="keyword" id="EN-US_TASK_0172366618__keyword823927328214039">Device</span>C needs to advertise all routes to <span class="keyword" id="EN-US_TASK_0172366618__keyword678237706214039">Device</span>E. <span class="keyword" id="EN-US_TASK_0172366618__keyword1465732905214039">Device</span>D needs to advertise only routes 2.2.2.0/24 and 3.3.3.0/24 to <span class="keyword" id="EN-US_TASK_0172366618__keyword207018838">Device</span>E and the MED value of the route 2.2.2.0/24 must be greater than that of the route 2.2.2.0/24 advertised by <span class="keyword" id="EN-US_TASK_0172366618__keyword713732537214039">Device</span>C, so that <span class="keyword" id="EN-US_TASK_0172366618__keyword521388760214039">Device</span>E selects <span class="keyword" id="EN-US_TASK_0172366618__keyword543545612214039">Device</span>C as the egress for the traffic destined for 2.2.2.0/24.</li></ul>
</div>
<p id="EN-US_TASK_0172366618__p1396319594214039">To meet the preceding requirements, configure export or import policies. In this example, an export policy is configured on <span class="keyword" id="EN-US_TASK_0172366618__keyword7772138113813">Device</span>A, and two import policies are configured on <span class="keyword" id="EN-US_TASK_0172366618__keyword198712042203817">Device</span>E.</p>
<div class="fignone" id="EN-US_TASK_0172366618__fig_dc_vrp_xpl_cfg_001301"><a name="EN-US_TASK_0172366618__fig_dc_vrp_xpl_cfg_001301"></a><a name="fig_dc_vrp_xpl_cfg_001301"></a><span class="figcap"><b>Figure 1 </b>Network diagram of filtering routes to be advertised and accepted</span><br><span><img class="vsd" id="EN-US_TASK_0172366618__image298064505214039" src="images/fig_dc_vrp_xpl_cfg_001302.png" width="NaN" height="NaN"></span><br></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172366618__table_0000025117" frame="border" border="1" rules="all"><thead align="left"><tr id="EN-US_TASK_0172366618__row1205030182214039"><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.5.1.4.1.1" liSelected="liSelected"><p id="EN-US_TASK_0172366618__p1986099240214039">Device Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.5.1.4.1.2" liSelected="liSelected"><p id="EN-US_TASK_0172366618__p942879254214039">Interface</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.5.1.4.1.3" liSelected="liSelected"><p id="EN-US_TASK_0172366618__p504623114214039">IP Address</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_TASK_0172366618__row1570001416214039"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p id="EN-US_TASK_0172366618__p1682206393214039"><span class="keyword" id="EN-US_TASK_0172366618__keyword1220634396214039">Device</span>A</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p id="EN-US_TASK_0172366618__p1622853046214039">GE <span>0/3/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p id="EN-US_TASK_0172366618__p93080482214039">1.1.5.2/24</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366618__row749038531214039"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p id="EN-US_TASK_0172366618__p1187020263214039"><span class="keyword" id="EN-US_TASK_0172366618__keyword126479611214039">Device</span>B</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p id="EN-US_TASK_0172366618__p581488208214039">GE <span>0/3/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p id="EN-US_TASK_0172366618__p352000138214039">1.1.5.1/24</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366618__row1569321681214039"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p id="EN-US_TASK_0172366618__p858255055214039"><span class="keyword" id="EN-US_TASK_0172366618__keyword45052486214039">Device</span>B</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p id="EN-US_TASK_0172366618__p1390236572214039">GE <span>0/3/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p id="EN-US_TASK_0172366618__p1747631401214039">1.1.4.2/24</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366618__row1336191174214039"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p id="EN-US_TASK_0172366618__p1169153888214039"><span class="keyword" id="EN-US_TASK_0172366618__keyword494025566214039">Device</span>B</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p id="EN-US_TASK_0172366618__p41782951214039">GE <span>0/3/2</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p id="EN-US_TASK_0172366618__p805731641214039">1.1.3.2/24</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366618__row943920597214039"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p id="EN-US_TASK_0172366618__p1766762959214039"><span class="keyword" id="EN-US_TASK_0172366618__keyword728664844214039">Device</span>C</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p id="EN-US_TASK_0172366618__p1779361130214039">GE <span>0/3/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p id="EN-US_TASK_0172366618__p1264214389214039">1.1.1.2/24</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366618__row632160850214039"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p id="EN-US_TASK_0172366618__p1596302056214039"><span class="keyword" id="EN-US_TASK_0172366618__keyword535453221214039">Device</span>C</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p id="EN-US_TASK_0172366618__p967410988214039">GE <span>0/3/2</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p id="EN-US_TASK_0172366618__p1114409127214039">1.1.3.1/24</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366618__row247488795214039"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p id="EN-US_TASK_0172366618__p1472391085214039"><span class="keyword" id="EN-US_TASK_0172366618__keyword1022901214214039">Device</span>D</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p id="EN-US_TASK_0172366618__p1601499740214039">GE <span>0/3/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p id="EN-US_TASK_0172366618__p421137176214039">1.1.2.2/24</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366618__row709247021214039"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p id="EN-US_TASK_0172366618__p1757871052214039"><span class="keyword" id="EN-US_TASK_0172366618__keyword1606239185214039">Device</span>D</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p id="EN-US_TASK_0172366618__p216603072214039">GE <span>0/3/2</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p id="EN-US_TASK_0172366618__p610807020214039">1.1.4.1/24</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366618__row650191320214039"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p id="EN-US_TASK_0172366618__p1797473773214039"><span class="keyword" id="EN-US_TASK_0172366618__keyword1489240462214039">Device</span>E</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p id="EN-US_TASK_0172366618__p777471898214039">GE <span>0/3/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p id="EN-US_TASK_0172366618__p564908055214039">1.1.2.1/24</p>
</td>
</tr>
<tr id="EN-US_TASK_0172366618__row2040902199214039"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p id="EN-US_TASK_0172366618__p1382865266214039"><span class="keyword" id="EN-US_TASK_0172366618__keyword1748497828214039">Device</span>E</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p id="EN-US_TASK_0172366618__p1030930751214039">GE <span>0/3/2</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p id="EN-US_TASK_0172366618__p372637614214039">1.1.1.1/24</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366618__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0172366618__prepare_01"><h4 class="sectiontitle">Configuration Precautions</h4><p id="EN-US_TASK_0172366618__p1215777016214039">During the configuration, note the following:</p>
<ul id="EN-US_TASK_0172366618__ul1202459491214039"><li id="EN-US_TASK_0172366618__li1670522192214039"><p id="EN-US_TASK_0172366618__p265280066214039"><a name="EN-US_TASK_0172366618__li1670522192214039"></a><a name="li1670522192214039"></a>A prefix range needs to be specified for the prefix set as required.</p>
</li><li id="EN-US_TASK_0172366618__li1593110055214039"><p id="EN-US_TASK_0172366618__p574583589214039"><a name="EN-US_TASK_0172366618__li1593110055214039"></a><a name="li1593110055214039"></a>Prefix set names are case-sensitive.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366618__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure basic BGP functions on <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, <span class="keyword">Device</span>D, and <span class="keyword">Device</span>E.</p>
</li><li><p>Configure static routes on <span class="keyword">Device</span>A and import them to the BGP routing table.</p>
</li><li><p>Configure an export policy on <span class="keyword">Device</span>A and check the filtering result on <span class="keyword">Device</span>B.</p>
</li><li><p>Configure an import policy on <span class="keyword">Device</span>E and check the filtering result on <span class="keyword">Device</span>E.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366618__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Five static routes imported on <span class="keyword">Device</span>A</p>
</li><li><p><span class="keyword">Device</span>A and <span class="keyword">Device</span>B in AS 100, <span class="keyword">Device</span>C, <span class="keyword">Device</span>D, and <span class="keyword">Device</span>E in AS 200.</p>
</li><li><p>Name of an IPv4 prefix set and the routes to be filtered</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366618__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IP address to each interface. For details, see <a href="#EN-US_TASK_0172366618__section_dc_vrp_xpl_cfg_001305">Configuration Files</a>.</span></li><li><span>Configure basic BGP functions.</span><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp]<strong> peer 1.1.5.1 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-bgp]<strong> quit</strong></pre>
<p># Configure <span class="keyword">Device</span>B.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>B&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B]<strong> bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp]<strong> peer 1.1.5.2 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp]<strong> peer 1.1.3.1 as-number 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp]<strong> peer 1.1.4.1 as-number 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-bgp]<strong> quit</strong></pre>
<p># Configure <span class="keyword">Device</span>C.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>C&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C]<strong> bgp 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp]<strong> peer 1.1.1.1 as-number 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp]<strong> peer 1.1.3.2 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-bgp]<strong> quit</strong></pre>
<p># Configure <span class="keyword">Device</span>D.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D]<strong> bgp 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-bgp]<strong> peer 1.1.2.1 as-number 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-bgp]<strong> peer 1.1.4.2 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-bgp]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-bgp]<strong> quit</strong></pre>
<p># Configure <span class="keyword">Device</span>E.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>E&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E]<strong> bgp 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-bgp]<strong> peer 1.1.1.2 as-number 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-bgp]<strong> peer 1.1.2.2 as-number 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-bgp]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E-bgp]<strong> quit</strong></pre>
</p></li><li><span>Configure five static routes on <span class="keyword">Device</span>A and import them to the BGP routing table.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> ip route-static 2.2.2.0 255.255.255.0 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> ip route-static 3.3.3.0 255.255.255.0 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> ip route-static 4.4.4.0 255.255.255.0 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> ip route-static 5.5.5.0 255.255.255.0 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp]<strong> import-route static</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-bgp]<strong> quit</strong></pre>
<p># Check the BGP routing table of <span class="keyword">Device</span>B. The command output shows that <span class="keyword">Device</span>B has learned the imported static routes.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>display bgp routing-table</strong></pre>
<pre class="screen"> 
 BGP Local router ID is 1.1.5.1
 Status codes: * - valid, &gt; - best, d - damped, x - best external, a - add path,
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
 RPKI validation codes: V - valid, I - invalid, N - not-found


 Total Number of Routes: 4 
        Network            NextHop        MED        LocPrf    PrefVal Path/Ogn

 *&gt;i    2.2.2.0/24         1.1.5.2         0          100        0       ?
 *&gt;i    3.3.3.0/24         1.1.5.2         0          100        0       ?
 *&gt;i    4.4.4.0/24         1.1.5.2         0          100        0       ?
 *&gt;i    5.5.5.0/24         1.1.5.2         0          100        0       ?</pre>
<p># Check the BGP routing table on <span class="keyword">Device</span>E. The command output shows that BGP has imported four static routes (one from <span class="keyword">Device</span>C and one from <span class="keyword">Device</span>D).</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E] <strong>display bgp routing-table</strong></pre>
<pre class="screen"> 
 BGP Local router ID is 1.1.1.1
 Status codes: * - valid, &gt; - best, d - damped, x - best external, a - add path,
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
 RPKI validation codes: V - valid, I - invalid, N - not-found


 Total Number of Routes: 8 
        Network            NextHop        MED        LocPrf    PrefVal Path/Ogn

   i    2.2.2.0/24         1.1.3.2                    100        0      100?
   i                       1.1.4.2                    100        0      100?
   i    3.3.3.0/24         1.1.4.2                    100        0      100?
   i                       1.1.3.2                    100        0      100?
   i    4.4.4.0/24         1.1.3.2                    100        0      100?
   i                       1.1.4.2                    100        0      100?
   i    5.5.5.0/24         1.1.4.2                    100        0      100?
   i                       1.1.3.2                    100        0      100?</pre>
</p></li><li><span>Configure a route advertisement policy on <span class="keyword">Device</span>A.</span><p><p># Configure an IPv4 prefix set named <strong>prefix1</strong> on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>quit</strong></pre>
<pre class="screen">&lt; <span class="keyword">Device</span> A&gt; <strong>edit xpl ip-prefix-list prefix1</strong> //Enter the IPv4 prefix set paragraph-by-paragraph editing view.
xpl ip-prefix-list prefix1
2.2.2.0 24,
3.3.3.0 24,
4.4.4.0 24
end-list</pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After entering the paragraph-by-paragraph editing view, press <strong><span>i</span></strong> to enter the text editing mode.</p>
<p>After performing the configuration in the text editing mode of the paragraph-by-paragraph editing view, press <strong><span>Esc</span></strong> to exit from the text editing mode, and press <strong><span>:wq</span></strong> and <strong>Enter</strong> to save the configuration and exit from the paragraph-by-paragraph editing view. For details, see "Example of Paragraph-by-Paragraph Editing Operations" in <a href="dc_vrp_xpl_cfg_0002.html">Introduction to XPL Paragraph-by-Paragraph Editing</a>.</p>
</div></div>
<p>After entering the XPL paragraph-by-paragraph editing view, press <strong><span>i</span></strong>.<strong> -- INSERT --</strong> is displayed at the bottom of the interface, indicating that you can enter content. Configure an IPv4 prefix set named <strong>prefix1</strong> in the paragraph-by-paragraph editing view and separate elements with commas (,), as shown in the following figure.</p>
<p><span><img src="figure/en-us_image_0000001781264249.png"></span></p>
<p>Press <strong><span>Esc</span></strong> to exit the text editing mode. <strong>-- INSERT --</strong> at the bottom of the interface then disappears. Enter <strong><span>:wq</span></strong> and press <strong>Enter</strong> to save the configuration and exit the paragraph-by-paragraph editing view. The system asks you whether to commit the configuration. If you enter <strong><span>y</span></strong> and return to the user view, the configuration is saved successfully.</p>
<p><span><img src="figure/en-us_image_0000001781267277.png"></span></p>
<p><span><img src="figure/en-us_image_0000001781387245.png"></span></p>
<p><span><img src="figure/en-us_image_0000001781387801.png"></span></p>
<p>To add or delete a prefix, run the <a href="cmdqueryname=edit+xpl+ip-prefix-list"><b><span class="cmdname">edit xpl ip-prefix-list</span></b></a> <i><span class="varname">prefix1</span></i> command again to enter the paragraph-by-paragraph editing view. Press <strong><span>i</span></strong>. After <strong>-- INSERT --</strong> is displayed at the bottom of the interface, use arrow keys to move the cursor to the desired position and modify the prefix. Use commas (,) to separate elements. Otherwise, an error may occur, and the configuration cannot be committed. For example, to delete the prefix 2.2.2.0 24, use arrow keys to move the cursor to the corresponding position and delete the prefix, as shown in the following figure.</p>
<p><span><img src="figure/en-us_image_0000001734505434.png"></span></p>
<p>After the modification is complete, press <strong><span>Esc</span></strong> to exit the text editing mode. <strong>-- INSERT --</strong> at the bottom of the interface disappears. Enter <strong><span>:wq</span></strong> and press <strong>Enter</strong> to save the configuration and exit the paragraph-by-paragraph editing view. The system asks you whether to commit the configuration. If you enter <strong><span>y</span></strong> and return to the user view, the configuration is successfully modified. The following sections do not provide detailed XPL operations. Only the content entered on the paragraph-by-paragraph editing interface is shown.</p>
<p><span><img src="figure/en-us_image_0000001734152964.png"></span></p>
<p><span><img src="figure/en-us_image_0000001784557413.png"></span></p>
<p># Configure a route-filter named <strong>r1</strong> on <span class="keyword">Device</span> A, apply <strong>prefix1</strong> to <strong>r1</strong>, and permit routes 2.2.2.0/24, 3.3.3.0/24, and 4.4.4.0/24.</p>
<pre class="screen">&lt; <span class="keyword">Device</span> A&gt; <strong>edit xpl route-filter r1</strong> //Enter the route-filter paragraph-by-paragraph editing view.

xpl route-filter r1
if ip route-destination in prefix1 then
<span>approve</span>
else
<span>refuse</span>
endif
end-filter</pre>
<p><span><img src="figure/en-us_image_0000001781393633.png"></span></p>
<p># Configure an advertisement policy on <span class="keyword">Device</span>A and use <strong>r1</strong> to filter the routes to be advertised to <span class="keyword">Device</span>B.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> bgp 100</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-bgp] <strong> peer 1.1.5.1 route-filter r1 export</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp] <strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-bgp] <strong> quit</strong></pre>
<p># Check the BGP routing table of <span class="keyword">Device</span>B. The following command output shows that the route 5.5.5.0/24 is not included in the BGP routing table of <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>display bgp routing-table</strong></pre>
<pre class="screen"> 
 BGP Local router ID is 1.1.5.1
 Status codes: * - valid, &gt; - best, d - damped, x - best external, a - add path,
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
 RPKI validation codes: V - valid, I - invalid, N - not-found


 Total Number of Routes: 3 
        Network            NextHop        MED        LocPrf    PrefVal Path/Ogn

 *&gt;i    2.2.2.0/24         1.1.5.2         0          100        0       ?
 *&gt;i    3.3.3.0/24         1.1.5.2         0          100        0       ?
 *&gt;i    4.4.4.0/24         1.1.5.2         0          100        0       ?</pre>
</p></li><li><span>Configure a policy for receiving routes on <span class="keyword">Device</span>E.</span><p><p># Configure a route-filter named <strong>appmed</strong> with parameters on <span class="keyword">Device</span>E to set MEDs for routes.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E] <strong>quit</strong></pre>
<pre class="screen">&lt; <span class="keyword">Device</span> E&gt; <strong>edit xpl route-filter appmed</strong> //Enter the route-filter paragraph-by-paragraph editing view.

xpl route-filter appmed($med)
apply med $med
end-filter</pre>
<p><span><img src="figure/en-us_image_0000001734158368.png"></span></p>
<p># Configure route-filter named <strong>r2</strong> on <span class="keyword">Device</span>E to permit routes 2.2.2.0/24 and 3.3.3.0/24 and use <strong>appmed</strong> to set the MED of the route 2.2.2.0/24 to 200.</p>
<pre class="screen">&lt; <span class="keyword">Device</span> E&gt; <strong>edit xpl route-filter r2</strong> //Enter the route-filter paragraph-by-paragraph editing view.

xpl route-filter r2
if ip route-destination in {2.2.2.0 24} then
call route-filter appmed(200)
elseif ip route-destination in {2.2.2.0 24, 3.3.3.0 24} then
<span>approve</span>
else
<span>refuse</span>
endif
end-filter</pre>
<p><span><img src="figure/en-us_image_0000001781400549.png"></span></p>
<p># Configure a route-filter named <strong>r3</strong> on <span class="keyword">Device</span> E to set the MED of 2.2.2.0/24 to 100.</p>
<pre class="screen">&lt; <span class="keyword">Device</span> E&gt; <strong>edit xpl route-filter r3</strong> //Enter the route-filter paragraph-by-paragraph editing view.
xpl route-filter r3
if ip route-destination in {2.2.2.0 24} then
call route-filter appmed(100)
else
<span>approve</span>
endif
end-filter</pre>
<p><span><img src="figure/en-us_image_0000001734321280.png"></span></p>
<p># Configure an import policy on <span class="keyword">Device</span>E, and apply <strong>r2</strong> to the export policy for the routes advertised by <span class="keyword">Device</span>D and <strong>r3</strong> to the export policy for the routes advertised by <span class="keyword">Device</span>C.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>E&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E]<strong> bgp 200</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E-bgp]<strong> peer 1.1.2.2 route-filter r2 import</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-bgp]<strong> peer 1.1.1.2 route-filter r3 import</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-bgp]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E-bgp]<strong> quit</strong></pre>
<p># Check the BGP routing table of <span class="keyword">Device</span>E. The following command output shows that the route 4.4.4.0/24 learned from <span class="keyword">Device</span>D is not included in the BGP routing table of <span class="keyword">Device</span>E, and the MED values of the routes 2.2.2.0/24 learned from <span class="keyword">Device</span>C and <span class="keyword">Device</span>D are 100 and 200, respectively.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E] <strong>display bgp routing-table</strong></pre>
<pre class="screen"> BGP Local router ID is 1.1.1.1
 Status codes: * - valid, &gt; - best, d - damped, x - best external, a - add path,
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
 RPKI validation codes: V - valid, I - invalid, N - not-found


 Total Number of Routes: 5 
        Network            NextHop        MED        LocPrf    PrefVal Path/Ogn

   i    2.2.2.0/24         1.1.4.2         <strong>200</strong>        100        0      100?
   i                       1.1.3.2         <strong>100</strong>        100        0      100?
   i    3.3.3.0/24         1.1.4.2                    100        0      100?
   i                       1.1.3.2                    100        0      100?
   i    4.4.4.0/24         1.1.3.2                    100        0      100?</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172366618__section_dc_vrp_xpl_cfg_001305"><a name="EN-US_TASK_0172366618__section_dc_vrp_xpl_cfg_001305"></a><a name="section_dc_vrp_xpl_cfg_001305"></a><a name="EN-US_TASK_0172366618__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul id="EN-US_TASK_0172366618__ul501510509214039"><li id="EN-US_TASK_0172366618__li181276540214039"><p id="EN-US_TASK_0172366618__p1582996334214039"><a name="EN-US_TASK_0172366618__li181276540214039"></a><a name="li181276540214039"></a><span class="keyword" id="EN-US_TASK_0172366618__keyword244482855214039">Device</span>A configuration file</p>
<pre class="screen" id="EN-US_TASK_0172366618__screen2116616644214039">#
sysname <span class="keyword" id="EN-US_TASK_0172366618__keyword1500600419214039">Device</span>A
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip address 1.1.5.2 255.255.255.0
#
bgp 100
 peer 1.1.5.1 as-number 100
 #
 ipv4-family unicast
  undo synchronization
  import-route static
  peer 1.1.5.1 enable
  peer 1.1.5.1 route-filter r1 export
#
ip route-static 2.2.2.0 255.255.255.0 NULL0
ip route-static 3.3.3.0 255.255.255.0 NULL0
ip route-static 4.4.4.0 255.255.255.0 NULL0
ip route-static 5.5.5.0 255.255.255.0 NULL0
#
xpl route-filter r1
 if ip route-destination in prefix1 then
  <span>approve</span>
 else
  <span>refuse</span>
 endif
 end-filter
#
xpl ip-prefix-list prefix1
 2.2.2.0 24,
 3.3.3.0 24,
 4.4.4.0 24
 end-list
#
return</pre>
</li><li id="EN-US_TASK_0172366618__li947237310214039"><p id="EN-US_TASK_0172366618__p921193959214039"><a name="EN-US_TASK_0172366618__li947237310214039"></a><a name="li947237310214039"></a><span class="keyword" id="EN-US_TASK_0172366618__keyword1297257690214039">Device</span>B configuration file</p>
<pre class="screen" id="EN-US_TASK_0172366618__screen417284481214039">#
sysname <span class="keyword" id="EN-US_TASK_0172366618__keyword1411345750214039">Device</span>B
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip address 1.1.5.1 255.255.255.0
#
interface GigabitEthernet<span>0/3/1</span>
 undo shutdown
 ip address 1.1.4.2 255.255.255.0
#
interface GigabitEthernet<span>0/3/2</span>
 undo shutdown
 ip address 1.1.3.2 255.255.255.0
#
bgp 100
 peer 1.1.3.1 as-number 200
 peer 1.1.4.1 as-number 200
 peer 1.1.5.2 as-number 100
 #
 ipv4-family unicast
  undo synchronization
  peer 1.1.3.1 enable
  peer 1.1.4.1 enable
  peer 1.1.5.2 enable
#
return</pre>
</li><li id="EN-US_TASK_0172366618__li378827297214039"><p id="EN-US_TASK_0172366618__p1808850971214039"><a name="EN-US_TASK_0172366618__li378827297214039"></a><a name="li378827297214039"></a><span class="keyword" id="EN-US_TASK_0172366618__keyword1579762665214039">Device</span>C configuration file</p>
<pre class="screen" id="EN-US_TASK_0172366618__screen1600420143214039">#
sysname <span class="keyword" id="EN-US_TASK_0172366618__keyword1524691532214039">Device</span>C
#
interface GigabitEthernet<span>0/3/1</span>
 undo shutdown
 ip address 1.1.1.2 255.255.255.0
#
interface GigabitEthernet<span>0/3/2</span>
 undo shutdown
 ip address 1.1.3.1 255.255.255.0
#
bgp 200
 peer 1.1.1.1 as-number 200
 peer 1.1.3.2 as-number 100
 #
 ipv4-family unicast
  undo synchronization
  peer 1.1.1.1 enable
  peer 1.1.3.2 enable
#
return</pre>
</li><li id="EN-US_TASK_0172366618__li513811290214039"><p id="EN-US_TASK_0172366618__p594606443214039"><a name="EN-US_TASK_0172366618__li513811290214039"></a><a name="li513811290214039"></a><span class="keyword" id="EN-US_TASK_0172366618__keyword325164663810">Device</span>D configuration file</p>
<pre class="screen" id="EN-US_TASK_0172366618__screen2023482915214039">#
sysname <span class="keyword" id="EN-US_TASK_0172366618__keyword2114383333214039">Device</span>D
#
interface GigabitEthernet<span>0/3/1</span>
 undo shutdown
 ip address 1.1.2.2 255.255.255.0
#
interface GigabitEthernet<span>0/3/2</span>
 undo shutdown
 ip address 1.1.4.1 255.255.255.0
#
bgp 200
 peer 1.1.2.1 as-number 200
 peer 1.1.4.2 as-number 100
 #
 ipv4-family unicast
  undo synchronization
  peer 1.1.2.1 enable
  peer 1.1.4.2 enable
#
return</pre>
</li><li id="EN-US_TASK_0172366618__li199872341214039"><p id="EN-US_TASK_0172366618__p590011279214039"><a name="EN-US_TASK_0172366618__li199872341214039"></a><a name="li199872341214039"></a><span class="keyword" id="EN-US_TASK_0172366618__keyword1387567954214039">Device</span>E configuration file</p>
<pre class="screen" id="EN-US_TASK_0172366618__screen1218694053214039">#
sysname <span class="keyword" id="EN-US_TASK_0172366618__keyword332539157214039">Device</span>E
#
interface GigabitEthernet<span>0/3/1</span>
 undo shutdown
 ip address 1.1.2.1 255.255.255.0
#
interface GigabitEthernet<span>0/3/2</span>
 undo shutdown
 ip address 1.1.1.1 255.255.255.0
#
bgp 200
 peer 1.1.1.2 as-number 200
 peer 1.1.2.2 as-number 200
 #
 ipv4-family unicast
  undo synchronization
  peer 1.1.1.2 enable
  peer 1.1.1.2 route-filter r3 import
  peer 1.1.2.2 enable
  peer 1.1.2.2 route-filter r2 import
#
xpl route-filter appmed($med)
 apply med $med
 end-filter
#
xpl route-filter r2
 if ip route-destination in {2.2.2.0 24} then
  call route-filter appmed(200)
 elseif ip route-destination in {2.2.2.0 24, 3.3.3.0 24} then
  <span>approve</span>
 else
  <span>refuse</span>
 endif
 end-filter
#
xpl route-filter r3
 if ip route-destination in {2.2.2.0 24} then
  call route-filter appmed(100)
 else
  <span>approve</span>
 endif
 end-filter
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0012.html">Configuration Examples for XPL
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0021.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>