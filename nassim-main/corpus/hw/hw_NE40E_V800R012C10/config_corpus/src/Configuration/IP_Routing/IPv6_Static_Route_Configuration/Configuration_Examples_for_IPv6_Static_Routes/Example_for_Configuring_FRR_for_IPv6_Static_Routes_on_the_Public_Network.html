
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring FRR for IPv6 Static Routes on the Public Network">
<meta name="abstract" content="FRR for IPv6 static routes on the public network can fast detect link failures.">
<meta name="description" content="FRR for IPv6 static routes on the public network can fast detect link failures.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0050.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0077.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,static-routevrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="s00826690">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365505">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring FRR for IPv6 Static Routes on the Public Network</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172365505"></a><a name="EN-US_TASK_0172365505"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring FRR for IPv6 Static Routes on the Public Network</h1>
<div class="taskbody"><p>FRR for IPv6 static routes on the public network can fast detect link failures.</p>
<div class="context"><a name="EN-US_TASK_0172365505__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172365505__fig_dc_vrp_static-route_disjoin_cfg_004701">Figure 1</a>, it is required that two IPv6 static routes with <span class="keyword">Device</span> A and <span class="keyword">Device</span> B as the next hops be configured on <span class="keyword">Device</span> D and that Link B function as the backup of Link A. If Link A fails, traffic is switched to the Link B immediately.</p>
<div class="fignone" id="EN-US_TASK_0172365505__fig_dc_vrp_static-route_disjoin_cfg_004701"><a name="EN-US_TASK_0172365505__fig_dc_vrp_static-route_disjoin_cfg_004701"></a><a name="fig_dc_vrp_static-route_disjoin_cfg_004701"></a><span class="figcap"><b>Figure 1 </b>Networking for configuring FRR for IPv6 static routes on the public network</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, interface3, interface4, and interface5 represent GE <span>0/1/1</span>, GE <span>0/1/2</span>, GE <span>0/1/3</span>, GE <span>0/2/3</span>, and GE <span>0/3/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_static-route_disjoin_cfg_004701.png" width="NaN" height="NaN"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365505__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>When configuring FRR for IPv6 static routes on the public network, ensure that there are at least two IPv6 static routes to the same destination address.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365505__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure two IPv6 static routes with <span class="keyword">Device</span> A and <span class="keyword">Device</span> B as the next hops on <span class="keyword">Device</span> D.</p>
</li><li><p>On <span class="keyword">Device</span> D, set a higher priority for Link A to ensure that Link A becomes the primary link.</p>
</li><li><p>Enable FRR for IPv6 static routes on <span class="keyword">Device</span> D, and check the backup outbound interface and the backup next hop.</p>
</li><li><p>Configure static BFD for IPv6 static routes to speed up fault detection.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To speed up fault detection, configure dynamic or static BFD for IPv6 static routes. In this example, static BFD for IPv6 static routes is used. This is because it is more commonly used on the live network.</p>
</div></div>
</li><li><p>Disable FRR for IPv6 static routes, and check the backup outbound interface and the backup next hop.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365505__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need preference values of IPv6 static routes.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365505__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address for each interface. For configuration details, see <a href="#EN-US_TASK_0172365505__section_dc_vrp_static-route_disjoin_cfg_004705">Configuration Files</a> in this section.</span></li><li><span>Configure IPv6 static routes.</span><p><p># On <span class="keyword">Device</span> A, configure IPv6 static routes.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ipv6 route-static 2001:db8:5:: 64 GigabitEthernet<span>0/1/2</span> 2001:db8:1::1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>ipv6 route-static 2001:db8:6:: 64 GigabitEthernet<span>0/2/3</span> 2001:db8:3::2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># On <span class="keyword">Device</span> B, configure IPv6 static routes.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ipv6 route-static 2001:db8:5:: 64 GigabitEthernet<span>0/1/1</span> 2001:db8:2::1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>ipv6 route-static 2001:db8:6:: 64 GigabitEthernet<span>0/3/3</span> 2001:db8:4::2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>commit</strong></pre>
<p># On <span class="keyword">Device</span> C, configure IPv6 static routes.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>ipv6 route-static 2001:db8:5:: 64 GigabitEthernet<span>0/2/3</span> 2001:db8:3::1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>ipv6 route-static 2001:db8:5:: 64 GigabitEthernet<span>0/3/3</span> 2001:db8:4::1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>ipv6 route-static 2001:db8:1:: 64 GigabitEthernet<span>0/2/3</span> 2001:db8:3::1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>ipv6 route-static 2001:db8:2:: 64 GigabitEthernet<span>0/3/3</span> 2001:db8:4::1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>commit</strong></pre>
<p># On <span class="keyword">Device</span> D, configure IPv6 static routes.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>ipv6 route-static 2001:db8:6:: 64 GigabitEthernet<span>0/1/2</span> 2001:db8:1::2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>ipv6 route-static 2001:db8:6:: 64 GigabitEthernet<span>0/1/1</span> 2001:db8:2::2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>ipv6 route-static 2001:db8:3:: 64 GigabitEthernet<span>0/1/2</span> 2001:db8:1::2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>ipv6 route-static 2001:db8:4:: 64 GigabitEthernet<span>0/1/1</span> 2001:db8:2::2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>quit</strong></pre>
<p># Check the IP routing table of <span class="keyword">Device</span> D. The following command output shows that load balancing is performed between the two IPv6 static routes.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display ipv6 routing-table</strong></pre>
<pre class="screen">Routing Table : _public_
         Destinations : 13        Routes : 13

Destination  : ::1                                     PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : InLoopBack0                             Flags        : D

Destination  : ::FFFF:127.0.0.0                        PrefixLength : 104
NextHop      : ::FFFF:127.0.0.1                        Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : InLoopBack0                             Flags        : D

Destination  : ::FFFF:127.0.0.1                        PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : InLoopBack0                             Flags        : D

Destination  : 2001:db8:1::                            PrefixLength : 64
NextHop      : 2001:db8:1::1                           Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/2</span>                    Flags        : D

Destination  : 2001:db8:1::1                           PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/2</span>                    Flags        : D

Destination  : 2001:DB8:2::                            PrefixLength : 64
NextHop      : 2001:DB8:2::1                           Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/1</span>                           Flags        : D

Destination  : 2001:DB8:2::1                           PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/1</span>                           Flags        : D

Destination  : 2001:DB8:3::                            PrefixLength : 64
NextHop      : 2001:DB8:1::2                           Preference   : 60
Cost         : 0                                       Protocol     : Static
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/2</span>                           Flags        : D

Destination  : 2001:DB8:4::                            PrefixLength : 64
NextHop      : 2001:DB8:2::2                           Preference   : 60
Cost         : 0                                       Protocol     : Static
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/1</span>                           Flags        : D

Destination  : 2001:db8:5::                            PrefixLength : 64
NextHop      : 2001:db8:5::1                           Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/3</span>                    Flags        : D

Destination  : 2001:db8:5::1                           PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/3</span>                    Flags        : D

<strong>Destination  : 2001:db8:6::                            PrefixLength : 64
NextHop      : 2001:db8:2::2                           Preference   : 60
Cost         : 0                                       Protocol     : Static
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/1</span>                    Flags        : D</strong>

<strong>Destination  : 2001:db8:6::                            PrefixLength : 64
NextHop      : 2001:db8:1::2                           Preference   : 60
Cost         : 0                                       Protocol     : Static
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/2</span>                    Flags        : D</strong>

Destination  : FE80::                                  PrefixLength : 10
NextHop      : ::                                      Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : NULL0                                   Flags        : D   </pre>
</p></li><li><span>Change the priorities of the IPv6 static routes.</span><p><p># Change the preference value of the IPv6 static route on <span class="keyword">Device</span> D.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>ipv6 route-static 2001:db8:6:: 64 GigabitEthernet<span>0/1/2</span> 2001:db8:1::2 preference 40</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D]<strong> quit</strong></pre>
<p># Check the routing table of <span class="keyword">Device</span> D. The following command output shows that the preference value of the IPv6 static route has been changed.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display ipv6 routing-table</strong></pre>
<pre class="screen">Routing Table : _public_
         Destinations : 13        Routes : 13

Destination  : ::1                                     PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : InLoopBack0                             Flags        : D

Destination  : ::FFFF:127.0.0.0                        PrefixLength : 104
NextHop      : ::FFFF:127.0.0.1                        Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : InLoopBack0                             Flags        : D

Destination  : ::FFFF:127.0.0.1                        PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : InLoopBack0                             Flags        : D

Destination  : 2001:db8:1::                            PrefixLength : 64
NextHop      : 2001:db8:1::1                           Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/2</span>                    Flags        : D

Destination  : 2001:db8:1::1                           PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/2</span>                    Flags        : D

Destination  : 2001:DB8:2::                            PrefixLength : 64
NextHop      : 2001:DB8:2::1                           Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/1</span>                           Flags        : D

Destination  : 2001:DB8:2::1                           PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/1</span>                           Flags        : D

Destination  : 2001:DB8:3::                            PrefixLength : 64
NextHop      : 2001:DB8:1::2                           Preference   : 60
Cost         : 0                                       Protocol     : Static
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/2</span>                           Flags        : D

Destination  : 2001:DB8:4::                            PrefixLength : 64
NextHop      : 2001:DB8:2::2                           Preference   : 60
Cost         : 0                                       Protocol     : Static
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/1</span>                           Flags        : D

Destination  : 2001:db8:5::                            PrefixLength : 64
NextHop      : 2001:db8:5::1                           Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/3</span>                    Flags        : D

Destination  : 2001:db8:5::1                           PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/3</span>                    Flags        : D

<strong>Destination  : 2001:db8:6::                            PrefixLength : 64
NextHop      : 2001:db8:1::2                           Preference   : 40
Cost         : 0                                       Protocol     : Static
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/2</span>                    Flags        : D</strong>

Destination  : FE80::                                  PrefixLength : 10
NextHop      : ::                                      Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : NULL0                                   Flags        : D</pre>
</p></li><li><span>Enable FRR for IPv6 static routes.</span><p><p># Enable FRR for static route on <span class="keyword">Device</span> D.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D]<strong> ipv6 route-static frr</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D]<strong> quit</strong></pre>
<p># Check the backup outbound interface and the backup next hop on <span class="keyword">Device</span> D.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display ipv6 routing-table 2001:db8:6:: verbose</strong></pre>
<pre class="screen">Routing Table : _public_
Summary Count : 1

Destination  : 2001:db8:6::                            PrefixLength : 64
<strong>NextHop      : 2001:db8:1::2</strong>                           Preference   : 40
Neighbour    : ::                                      ProcessID    : 0
Label        : NULL                                    Protocol     : Static
State        : Active Adv                              Cost         : 0
Entry ID     : 0                                       EntryFlags   : 0x00000000
Reference Cnt: 0                                       Tag          : 0
Priority     : medium                                  Age          : 28sec
IndirectID   : 0xFC000105
RelayNextHop : ::                                      TunnelID     : 0x0
<strong>Interface    : GigabitEthernet<span>0/1/2</span></strong>                    Flags        : D
<strong>BkNextHop    : 2001:db8:2::2</strong>                           <strong>BkInterface  : GigabitEthernet<span>0/1/1</span></strong>
BkLabel      : NULL                                    BkTunnelID   : 0x0
BkPETunnelID : 0x0                                     BkIndirectID : 0xFC0001</pre>
</p></li><li><span>Configure static BFD for IPv6 static routes.</span><p><ul><li><p>Configure a BFD session.</p>
<p># On <span class="keyword">Device</span> D, configure a BFD session between <span class="keyword">Device</span> D and <span class="keyword">Device</span> C.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D]<strong> bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-bfd]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D]<strong> bfd aa bind peer-ipv6 2001:db8:3::2 source-ipv6 2001:db8:1::1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-bfd-session-aa]<strong> discriminator local 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-bfd-session-aa] <strong>discriminator remote 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-bfd-session-aa] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-bfd-session-aa] <strong>quit</strong></pre>
<p># On <span class="keyword">Device</span> C, configure a BFD session between <span class="keyword">Device</span> C and <span class="keyword">Device</span> D.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>C&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C]<strong> bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C]<strong> bfd ab bind peer-ipv6 2001:db8:1::1 source-ipv6 2001:db8:3::2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bfd-session-ab]<strong> discriminator local 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bfd-session-ab] <strong>discriminator remote 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bfd-session-ab]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-bfd-session-ab]<strong> quit</strong></pre>
</li><li><p>Configure a static route and bind it to the BFD session.</p>
<p># On <span class="keyword">Device</span> D, configure a static route and bind it to the BFD session named <strong>aa</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D]<strong> ipv6 route-static 2001:db8:6:: 64 GigabitEthernet<span>0/1/2</span> 2001:db8:1::2 preference 40 track bfd-session aa</strong></pre>
</li></ul>
</p></li><li><span>Simulate a fault on Link A.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D]<strong> interface GigabitEthernet<span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/2</span>]<strong> shutdown</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/2</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/2</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D]<strong> quit</strong></pre>
<p># Check the routes to 2001:db8:6::/64 on <span class="keyword">Device</span> D.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt;<strong> display ipv6 routing-table 2001:db8:6:: verbose</strong></pre>
<pre class="screen">Routing Table : _public_
Summary Count : 1

Destination  : 2001:db8:6::                            PrefixLength : 64
<strong>NextHop      : 2001:db8:2::2</strong>                           Preference   : 60
Neighbour    : ::                                      ProcessID    : 0
Label        : NULL                                    Protocol     : Static
State        : Active Adv                              Cost         : 0
Entry ID     : 0                                       EntryFlags   : 0x00000000
Reference Cnt: 0                                       Tag          : 0
Priority     : medium                                  Age          : 43sec
IndirectID   : 0xFC000106
RelayNextHop : ::                                      TunnelID     : 0x0
<strong>Interface    : GigabitEthernet<span>0/1/1</span></strong>                    Flags        : D</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172365505__section_dc_vrp_static-route_disjoin_cfg_004705"><a name="EN-US_TASK_0172365505__section_dc_vrp_static-route_disjoin_cfg_004705"></a><a name="section_dc_vrp_static-route_disjoin_cfg_004705"></a><a name="EN-US_TASK_0172365505__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span> D configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>D
#
bfd
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:2::1/64
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:1::1/64
#
interface GigabitEthernet<span>0/1/3</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:5::1/64
#
bfd aa bind peer-ipv6 2001:db8:3::2 source-ipv6 2001:db8:1::1
 discriminator local 10
 discriminator remote 20
#
ipv6 route-static frr
ipv6 route-static 2001:db8:6:: 64 GigabitEthernet<span>0/1/2</span> 2001:db8:1::2 preference 40 track bfd-session aa
ipv6 route-static 2001:db8:6:: 64 GigabitEthernet<span>0/1/1</span> 2001:db8:2::2
ipv6 route-static 2001:db8:3:: 64 GigabitEthernet<span>0/1/2</span> 2001:db8:1::2
ipv6 route-static 2001:db8:4:: 64 GigabitEthernet<span>0/1/1</span> 2001:db8:2::2
#
return</pre>
</li><li><p><span class="keyword">Device</span> A configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>A
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:1::2/64
#
interface GigabitEthernet<span>0/2/3</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:3::1/64
#
ipv6 route-static 2001:db8:5:: 64 GigabitEthernet<span>0/1/2</span> 2001:db8:1::1
ipv6 route-static 2001:db8:6:: 64 GigabitEthernet<span>0/2/3</span> 2001:db8:3::2
#
return</pre>
</li><li><p><span class="keyword">Device</span> B configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>B
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:2::2/64
#
interface GigabitEthernet<span>0/3/3</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:4::1/64
#
ipv6 route-static 2001:db8:5:: 64 GigabitEthernet<span>0/1/1</span> 2001:db8:2::1
ipv6 route-static 2001:db8:6:: 64 GigabitEthernet<span>0/3/3</span> 2001:db8:4::2
#
return</pre>
</li><li><p><span class="keyword">Device</span> C configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>C
#
bfd
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:6::1/64
#
interface GigabitEthernet<span>0/2/3</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:3::2/64
#
interface GigabitEthernet<span>0/3/3</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:4::2/64
#
bfd ab bind peer-ipv6 2001:db8:1::1 source-ipv6 2001:db8:3::2
 discriminator local 20
 discriminator remote 10
#
ipv6 route-static 2001:db8:5:: 64 GigabitEthernet<span>0/2/3</span> 2001:db8:3::1
ipv6 route-static 2001:db8:5:: 64 GigabitEthernet<span>0/3/3</span> 2001:db8:4::1
ipv6 route-static 2001:db8:1:: 64 GigabitEthernet<span>0/2/3</span> 2001:db8:3::1
ipv6 route-static 2001:db8:2:: 64 GigabitEthernet<span>0/3/3</span> 2001:db8:4::1
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0050.html">Configuration Examples for IPv6 Static Routes
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0077.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>