
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP Route Summarization">
<meta name="abstract" content="Configuring BGP route summarization on a device can reduce the sizes of routing tables on the peers of the device.">
<meta name="description" content="Configuring BGP route summarization on a device can reduce the sizes of routing tables on the peers of the device.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3111.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_5100.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366191">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP Route Summarization</title>
</head>
<body><a name="EN-US_TASK_0172366191"></a><a name="EN-US_TASK_0172366191"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP Route Summarization</h1>
<div class="taskbody"><p>Configuring BGP route summarization on a device can reduce the sizes of routing tables on the peers of the device.</p>
<div class="context"><a name="EN-US_TASK_0172366191__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>The BGP routing table of the <span class="keyword">Router</span> on a medium or large BGP network contains a large number of routing entries. Storing the routing table consumes a large number of memory resources, and transmitting and processing routing information consume lots of network resources. Configuring route summarization can reduce the size of a routing table, prevent specific routes from being advertised, and minimize the impact of route flapping on network performance. BGP route summarization and routing policies enable BGP to effectively transmit and control routes.</p>
<p>BGP supports automatic and manual summarization. Manual summarization takes precedence over automatic summarization.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366191__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring BGP route summarization, complete the following task:</p>
<ul><li><p><a href="dc_vrp_bgp_cfg_3004.html">Configure basic BGP functions</a>.</p>
</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172366191__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure automatic route summarization.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span></span><p><p>The IPv4 unicast address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=summary+automatic"><b><span class="cmdname">summary automatic</span></b></a></span></span><p><p>Automatic summarization is configured for locally imported routes.</p>
</p><p><p>The <a href="cmdqueryname=summary+automatic"><b><span class="cmdname">summary automatic</span></b></a> command summarizes routes imported by BGP. The routes can be direct routes, static routes, RIP routes, OSPF routes, or IS-IS routes. After this command is run, BGP summarizes routes based on natural network segments. The command, however, cannot summarize the routes imported using the <a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> command.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure manual route summarization.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span></span><p><p>The IPv4 unicast address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run one of the following commands to configure route summarization as needed.</span><p><ul><li><p>To advertise both the summary route and specific routes, run the <a href="cmdqueryname=aggregate"><b><span class="cmdname">aggregate</span></b></a> <i><span class="varname">ipv4-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } command.</p>
</li><li><p>To advertise only the summary route, run the <a href="cmdqueryname=aggregate+detail-suppressed"><b><span class="cmdname">aggregate</span></b></a> <i><span class="varname">ipv4-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } <strong><span>detail-suppressed</span></strong> command.</p>
</li><li><p>To advertise specific routes selectively, run the <a href="cmdqueryname=aggregate+suppress-policy"><b><span class="cmdname">aggregate</span></b></a> <i><span class="varname">ipv4-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } <strong><span>suppress-policy</span></strong> <i><span class="varname">route-policy-name</span></i> command.</p>
<p>Alternatively, you can run the <a href="cmdqueryname=peer+route-policy"><b><span class="cmdname">peer route-policy</span></b></a> command to achieve the same effect.</p>
</li><li><p>To generate a summary route that can be used for routing loop detection, run the <a href="cmdqueryname=aggregate+as-set"><b><span class="cmdname">aggregate</span></b></a> <i><span class="varname">ipv4-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } <strong><span>as-set</span></strong> command.</p>
</li><li><p>To set attributes for the summary route, run the <a href="cmdqueryname=aggregate+attribute-policy"><b><span class="cmdname">aggregate</span></b></a> <i><span class="varname">ipv4-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } <strong><span>attribute-policy</span></strong> <i><span class="varname">route-policy-name</span></i> command.</p>
<p>You can also run the <a href="cmdqueryname=peer+route-policy"><b><span class="cmdname">peer route-policy</span></b></a> command to achieve the same effect.</p>
<p>If <strong><span>as-set</span></strong> is specified in the <a href="cmdqueryname=aggregate+as-set"><b><span class="cmdname">aggregate</span></b></a> command and the AS_Path attribute is configured in the policy using the <a href="cmdqueryname=apply+as-path"><b><span class="cmdname">apply as-path</span></b></a> command, the configured AS_Path attribute does not take effect.</p>
</li><li><p>To generate a summary route based on some specific routes, run the <a href="cmdqueryname=aggregate+origin-policy"><b><span class="cmdname">aggregate</span></b></a> <i><span class="varname">ipv4-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } <strong><span>origin-policy</span></strong> <i><span class="varname">route-policy-name</span></i> command.</p>
</li></ul>
<p>Manual summarization is valid for the existing routing entries in the local BGP routing table. For example, if a route with the mask length longer than 16, such as 10.1.1.0/24, does not exist in the BGP routing table, BGP does not advertise the summary route even after the <strong><a href="cmdqueryname=aggregate"><b><span class="cmdname">aggregate</span></b></a> 10.1.1.1 16</strong> command is run.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0172366191__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After the configuration is complete, run the <a href="cmdqueryname=display+bgp+routing-table"><b><span class="cmdname">display bgp routing-table</span></b></a> [ <i><span class="varname">network</span></i> [ <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> ] ] command to check information about BGP summary routes.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3000.html">BGP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3111.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_5100.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>