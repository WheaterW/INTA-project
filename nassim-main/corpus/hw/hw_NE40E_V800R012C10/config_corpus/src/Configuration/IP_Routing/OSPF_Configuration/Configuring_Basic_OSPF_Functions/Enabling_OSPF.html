
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling OSPF">
<meta name="abstract" content="After an OSPF process is created, a router ID is configured for the Router, an interface on which OSPF runs and the area to which the interface belongs are specified, routes can be discovered and calculated in the AS.">
<meta name="description" content="After an OSPF process is created, a router ID is configured for the Router, an interface on which OSPF runs and the area to which the interface belongs are specified, routes can be discovered and calculated in the AS.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2026.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ospf,w00800033,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365546">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Enabling OSPF</title>
</head>
<body><a name="EN-US_TASK_0172365546"></a><a name="EN-US_TASK_0172365546"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling OSPF</h1>
<div class="taskbody"><p>After an OSPF process is created, a router ID is configured for the <span class="keyword">Router</span>, an interface on which OSPF runs and the area to which the interface belongs are specified, routes can be discovered and calculated in the AS.</p>
<div class="context"><a name="EN-US_TASK_0172365546__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>OSPF on the <span class="keyword">Router</span> requires a router ID. The router ID is a 32-bit unsigned integer, which uniquely identifies the <span class="keyword">Router</span> in the AS. To ensure the stability of OSPF, manually set the router ID of each <span class="keyword">Router</span> during network planning.</p>
<p>OSPF prevents the link state database (LSDB) size from unexpectedly growing by partitioning an AS into different areas. An area is regarded as a logical group, and each group is identified by an area ID. At the border of an area resides the <span class="keyword">Router</span> instead of a link. A network segment (or a link) belongs to only one area. The area to which each OSPF interface belongs must be specified.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365546__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] [ <strong><span>router-id</span></strong> <i><span class="varname">router-id</span></i> ] <sup>*</sup></span><p><p>An OSPF process is started, and the OSPF view is displayed.</p>
</p><p><p>The <span class="keyword">NE40E</span> supports OSPF multi-instance. To run OSPF in a VPN instance, run the <a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] [ <strong><span>router-id</span></strong> <i><span class="varname">router-id</span></i> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <sup>*</sup> command.</p>
<ul><li><p>The <span class="keyword">NE40E</span> supports OSPF multi-process. Processes can be classified by service type. The <span class="keyword">Router</span>s exchange packets regardless of process IDs.</p>
</li><li><p><strong><span>router-id</span></strong> <i><span class="varname">router-id</span></i> specifies the router ID of the <span class="keyword">Router</span>.</p>
<p>By default, the <span class="keyword">Router</span> automatically selects an IP address of the current interface as the router ID. When configuring a router ID, ensure that it is unique in an AS. You can configure the IP address of an interface as the router ID.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Each router ID in an OSPF process must be unique. Otherwise, no OSPF neighbor relationships can be established, and routing information is incorrect.</p>
</div></div>
<p>If a router ID conflict occurs, perform either of the following operations:</p>
<ul><li>Run the <a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> <strong><span>router-id</span></strong> <i><span class="varname">router-id</span></i> command to configure a new router ID.</li><li>Run the <a href="cmdqueryname=undo+ospf+router-id+auto-recover+disable"><b><span class="cmdname">undo ospf router-id auto-recover disable</span></b></a> command to enable the router ID automatic recovery function. After the function is enabled, the system automatically allocates a new router ID if a router ID conflict occurs.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>If the automatic recovery function is enabled and a router ID conflict occurs between indirectly connected <span class="keyword">Router</span>s in one OSPF area, the conflicting router ID is replaced with a newly calculated one, regardless of whether the conflicting router ID was manually configured or automatically generated.</li><li>The system can replace a router ID in a maximum of three attempts in case the router ID conflict persists.</li></ul>
</div></div>
</li></ul>
<p>After a router ID is replaced, the <a href="cmdqueryname=reset+ospf"><b><span class="cmdname">reset ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>process</span></strong> command needs to be run to validate the new router ID.</p>
</li><li><p>If a VPN instance is specified, the OSPF process belongs to this VPN instance. If a VPN instance is not specified, the OSPF process belongs to the public-network instance.</p>
</li></ul>
<p>You can run the <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> command to configure a description for the OSPF process for easier identification.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=area"><b><span class="cmdname">area</span></b></a> <i><span class="varname">area-id</span></i></span></span><p><p>The OSPF area view is displayed.</p>
<p>OSPF areas are classified as a backbone area (with area ID 0) or non-backbone areas. The backbone area forwards inter-area routing information. The routing information exchanged between non-backbone areas must be forwarded through the backbone area.</p>
<p>You can run the <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> command to configure a description for the OSPF area for easier identification.</p>
</p></li><li><span>To configure OSPF, you can configure the network segments included in an area or enable OSPF on an interface.</span><p><ul><li><p>To configure the network segments included in an area, run the <a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> <i><span class="varname">address</span></i> <i><span class="varname">wildcard-mask</span></i> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ] command, in which <strong><span>description</span></strong> specifies the description of an OSPF network segment.</p>
<p>OSPF runs on an interface only when both of the following conditions are met:</p>
<ul><li><p>The mask length of the interface's IP address is greater than or equal to that specified in the <a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> command.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If <i><span class="varname">wildcard-mask</span></i> in the <a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> command are all 0s and the IP address of the interface is the same as the IP address specified in the <a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> <i><span class="varname">address</span></i> command, OSPF is also enabled on the interface.</p>
</div></div>
</li><li><p>The interface's primary IP address belongs to the network segment specified in the <a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> command.</p>
</li></ul>
<p>By default, OSPF advertises the IP address of a loopback interface in the form of a host route with a 32-bit mask, regardless of the mask length configured for the IP address. To allow a loopback interface to advertise its network-segment routes, its network type must be set to NBMA or broadcast in the interface view. For details on how to set the network type, see <a href="dc_vrp_ospf_cfg_2029.html">Configuring Network Types for OSPF Interfaces</a>.</p>
</li><li>Enable OSPF on an interface.<ol type="a"><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command twice to return to the system view.</li><li>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the interface view.</li><li>Run the <a href="cmdqueryname=ospf+enable"><b><span class="cmdname">ospf enable</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>area</span></strong> <i><span class="varname">area-id</span></i> command to enable OSPF on the interface. The specified area ID can be a decimal integer or in the IPv4 address format. Regardless of the specified format, the area ID is displayed as an IPv4 address.</li></ol>
</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0003.html">Configuring Basic OSPF Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2026.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>