
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring BGP-LS">
<meta name="abstract" content="BGP-link state (LS) enables BGP to report topology information collected by IGPs to the controller.">
<meta name="description" content="BGP-link state (LS) enables BGP to report topology information collected by IGPs to the controller.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3070.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3085.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4105.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,bgpvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366412">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring BGP-LS</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366412"></a><a name="EN-US_TASK_0172366412"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring BGP-LS</h1>
<div class="taskbody"><p>BGP-link state (LS) enables BGP to report topology information collected by IGPs to the controller.</p>
<div class="context"><a name="EN-US_TASK_0172366412__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><div class="p">BGP-LS is a new method of collecting topology information. With powerful routing capabilities of BGP, BGP-LS has the following advantages:<ul><li>Reduces computing capability requirements and spares the necessity of IGPs on the controller.</li><li>Facilitates route selection and calculation on the controller by using BGP to summarize process or AS topology information and report the complete information to the controller.</li><li>Requires only one routing protocol (BGP) to report topology information to the controller.</li></ul>
</div>
<p>In <a href="#EN-US_TASK_0172366412__fig_dc_vrp_bgp_cfg_409701">Figure 1</a>, <span class="keyword">Device</span> C is connected to the controller and reports topology information to the controller. <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, <span class="keyword">Device</span> C, and <span class="keyword">Device</span> D use IS-IS to communicate with each other at the network layer. <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, and <span class="keyword">Device</span> C reside in area 10, whereas <span class="keyword">Device</span> D resides in area 20. <span class="keyword">Device</span> A and <span class="keyword">Device</span> B are Level-1 devices, <span class="keyword">Device</span> C is a Level-1-2 device, and <span class="keyword">Device</span> D is a Level-2 device.</p>
<div class="fignone" id="EN-US_TASK_0172366412__fig_dc_vrp_bgp_cfg_409701"><a name="EN-US_TASK_0172366412__fig_dc_vrp_bgp_cfg_409701"></a><a name="fig_dc_vrp_bgp_cfg_409701"></a><span class="figcap"><b>Figure 1 </b>Configuring BGP-LS</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>interface1, interface2, interface3, and interface4 in this example represent GigabitEthernet<span>0/1/1</span>, GigabitEthernet<span>0/1/2</span>, GigabitEthernet<span>0/1/3</span>, and GigabitEthernet<span>0/1/4</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_bgp_cfg_409701.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366412__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>To improve security, you are advised to deploy BGP security measures. For details, see "Configuring BGP Security." Keychain authentication is used as an example. For details, see "Example for Configuring BGP Keychain."</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366412__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure an IP address for each interface on each <span class="keyword">Router</span>.</p>
</li><li><p>Configure basic IS-IS functions.</p>
</li><li><p>Deploy BGP-LS on <span class="keyword">Device</span> C and the controller.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366412__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Area addresses of <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, <span class="keyword">Device</span> C, and <span class="keyword">Device</span> D</p>
</li><li><p>Levels of <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, <span class="keyword">Device</span> C, and <span class="keyword">Device</span> D</p>
</li><li><p>BGP-LS identifier of <span class="keyword">Device</span> C in IS-IS</p>
</li><li><p>BGP AS numbers, BGP-LS domain AS numbers, and BGP-LS domain IDs of <span class="keyword">Device</span> C and the controller</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366412__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IP address to each interface on each <span class="keyword">Router</span>. For configuration details, see <a href="#EN-US_TASK_0172366412__section_dc_vrp_bgp_cfg_409705">Configuration Files</a> in this section.</span></li><li><span>Configure basic IS-IS functions.</span><p><p># Configure <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-isis-1] <strong>is-level level-1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-isis-1] <strong>network-entity 10.0000.0000.0001.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-isis-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-isis-1] <strong>is-level level-1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-isis-1] <strong>network-entity 10.0000.0000.0002.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-isis-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>interface gigabitethernet <span>0/1/4</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/4</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/4</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/4</span>] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-isis-1] <strong>network-entity 10.0000.0000.0003.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-isis-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/2</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface gigabitethernet <span>0/1/3</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/3</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/3</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface gigabitethernet <span>0/1/4</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/4</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/4</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/4</span>] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span>D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-isis-1] <strong>is-level level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-isis-1] <strong>network-entity 20.0000.0000.0004.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-isis-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface gigabitethernet <span>0/1/3</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/3</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/3</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface LoopBack0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack0] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack0] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-LoopBack0] <strong>quit</strong></pre>
<p># Check IS-IS routing information on each <span class="keyword">Router</span>. The following example uses the command output on <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>display isis route</strong>
                         Route information for ISIS(1)
                         -----------------------------

                        ISIS(1) Level-1 Forwarding Table
                        --------------------------------

IPV4 Destination   IntCost    ExtCost ExitInterface     NextHop         Flags
-------------------------------------------------------------------------------
1.1.1.0/24         10         NULL    GE<span>0/1/1</span>           Direct          D/-/L/-
10.1.1.0/24        10         NULL    GE<span>0/1/2</span>           Direct          D/-/L/-
10.1.2.0/24        10         NULL    GE<span>0/1/4</span>           Direct          D/-/L/-
192.168.0.0/24     10         NULL    GE<span>0/1/3</span>           Direct          D/-/L/-
     Flags: D-Direct, A-Added to URT, L-Advertised in LSPs, S-IGP Shortcut,
                               U-Up/Down Bit Set


                        ISIS(1) Level-2 Forwarding Table
                        --------------------------------

IPV4 Destination   IntCost    ExtCost ExitInterface     NextHop         Flags
-------------------------------------------------------------------------------
1.1.1.0/24         10         NULL    GE<span>0/1/1</span>           Direct          D/-/L/-
10.1.1.0/24        10         NULL    GE<span>0/1/2</span>           Direct          D/-/L/-
10.1.2.0/24        10         NULL    GE<span>0/1/4</span>           Direct          D/-/L/-
172.16.1.1/32      10         NULL    GE<span>0/1/3</span>           192.168.0.2     A/-/-/-
192.168.0.0/24     10         NULL    GE<span>0/1/3</span>           Direct          D/-/L/-
     Flags: D-Direct, A-Added to URT, L-Advertised in LSPs, S-IGP Shortcut,
                               U-Up/Down Bit Set</pre>
</p></li><li><span>Deploy BGP-LS on <span class="keyword">Device</span> C and the controller.</span><p><p># Enable IS-IS topology advertisement to BGP on <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-isis-1] <strong>bgp-ls enable level-1-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-isis-1] <strong>bgp-ls identifier 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-isis-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-isis-1] <strong>quit</strong></pre>
<p># Enable BGP-LS on <span class="keyword">Device</span> C and configure the controller as a BGP-LS peer of <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C]<strong> bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp]<strong> peer 1.1.1.2 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp]<strong> link-state-family unicast</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp-af-ls]<strong> peer 1.1.1.2 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp-af-ls]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-bgp-af-ls]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-bgp]<strong> quit</strong></pre>
<p># Enable BGP-LS on the controller and configure <span class="keyword">Device</span> C as a BGP-LS peer of the controller.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Controller]<strong> bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>Controller-bgp]<strong> peer 1.1.1.1 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>Controller-bgp]<strong> link-state-family unicast</strong></pre>
<pre class="screen">[<span class="keyword">*</span>Controller-bgp-af-ls]<strong> peer 1.1.1.1 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>Controller-bgp-af-ls]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Controller-bgp-af-ls]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Controller-bgp]<strong> quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Display information about BGP-LS peers and their status on <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C]<strong> display bgp link-state unicast peer</strong>
 BGP local router ID : 10.1.1.1
 Local AS number : 100
 Total number of peers : 1                 Peers in established state : 1

  Peer            V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State  PrefRcv
  1.1.1.2         4         100       27       48     0 00:29:11 Established       17</pre>
<p># Display BGP-LS routes on <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C]<strong> display bgp link-state unicast routing-table</strong>
 BGP Local router ID is 10.1.1.1
 Status codes: * - valid, &gt; - best, d - damped, x - best external, a - add path,
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete


 Total Number of Node Routes: 6
 *&gt;     Network  : [NODE][ISIS-LEVEL-1][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0002.00]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [NODE][ISIS-LEVEL-1][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [NODE][ISIS-LEVEL-2][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [NODE][ISIS-LEVEL-2][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0004.00]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [NODE][ISIS-LEVEL-1][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.02]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [NODE][ISIS-LEVEL-2][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0004.01]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?

 Total Number of Link Routes: 8
 *&gt;     Network  : [LINK][ISIS-LEVEL-1][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0002.00]][REMOTE[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.02]][LINK[if-address0.0.0.0][peer-address0.0.0.0][if-address::][peer-address::]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [LINK][ISIS-LEVEL-1][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]][REMOTE[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.02]][LINK[if-address0.0.0.0][peer-address0.0.0.0][if-address::][peer-address::]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [LINK][ISIS-LEVEL-1][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.02]][REMOTE[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0002.00]][LINK[if-address0.0.0.0][peer-address0.0.0.0][if-address::][peer-address::]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [LINK][ISIS-LEVEL-1][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.02]][REMOTE[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]][LINK[if-address0.0.0.0][peer-address0.0.0.0][if-address::][peer-address::]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [LINK][ISIS-LEVEL-2][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]][REMOTE[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0004.01]][LINK[if-address0.0.0.0][peer-address0.0.0.0][if-address::][peer-address::]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [LINK][ISIS-LEVEL-2][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0004.00]][REMOTE[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0004.01]][LINK[if-address0.0.0.0][peer-address0.0.0.0][if-address::][peer-address::]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [LINK][ISIS-LEVEL-2][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0004.01]][REMOTE[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]][LINK[if-address0.0.0.0][peer-address0.0.0.0][if-address::][peer-address::]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [LINK][ISIS-LEVEL-2][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0004.01]][REMOTE[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0004.00]][LINK[if-address0.0.0.0][peer-address0.0.0.0][if-address::][peer-address::]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?

 Total Number of IPv4 Prefix Routes: 11
 *&gt;     Network  : [IPV4-PREFIX][ISIS-LEVEL-1][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0002.00]][PREFIX[ospf-route-type0][prefix10.1.2.0/24]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [IPV4-PREFIX][ISIS-LEVEL-1][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]][PREFIX[ospf-route-type0][prefix1.1.1.0/24]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [IPV4-PREFIX][ISIS-LEVEL-1][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]][PREFIX[ospf-route-type0][prefix10.1.1.0/24]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [IPV4-PREFIX][ISIS-LEVEL-1][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]][PREFIX[ospf-route-type0][prefix10.1.2.0/24]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [IPV4-PREFIX][ISIS-LEVEL-1][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]][PREFIX[ospf-route-type0][prefix192.168.0.0/24]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [IPV4-PREFIX][ISIS-LEVEL-2][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]][PREFIX[ospf-route-type0][prefix1.1.1.0/24]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [IPV4-PREFIX][ISIS-LEVEL-2][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]][PREFIX[ospf-route-type0][prefix10.1.1.0/24]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [IPV4-PREFIX][ISIS-LEVEL-2][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]][PREFIX[ospf-route-type0][prefix10.1.2.0/24]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [IPV4-PREFIX][ISIS-LEVEL-2][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0003.00]][PREFIX[ospf-route-type0][prefix192.168.0.0/24]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [IPV4-PREFIX][ISIS-LEVEL-2][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0004.00]][PREFIX[ospf-route-type0][prefix192.168.0.0/24]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?
 *&gt;     Network  : [IPV4-PREFIX][ISIS-LEVEL-2][IDENTIFIER20][LOCAL[as100][bgp-ls-identifier10.1.1.1][ospf-area-id0.0.0.0][igp-router-id0000.0000.0004.00]][PREFIX[ospf-route-type0][prefix172.16.1.1/32]]
        NextHop  : 0.0.0.0                                  LocPrf    :
        MED      : 0                                        PrefVal   : 0
        Path/Ogn :  ?</pre>
<p>The preceding command output shows that <span class="keyword">Device</span> C obtains the topology information on the whole IS-IS network. <span class="keyword">Device</span> C can use BGP-LS routes to report the topology information to its BGP-LS peer (the controller).</p>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172366412__section_dc_vrp_bgp_cfg_409705"><a name="EN-US_TASK_0172366412__section_dc_vrp_bgp_cfg_409705"></a><a name="section_dc_vrp_bgp_cfg_409705"></a><a name="EN-US_TASK_0172366412__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span> A configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>A
#
isis 1
 is-level level-1
 network-entity 10.0000.0000.0001.00
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 10.1.1.2 255.255.255.0
 isis enable 1
#
return</pre>
</li><li><p><span class="keyword">Device</span> B configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>B
#
isis 1
 is-level level-1
 network-entity 10.0000.0000.0002.00
#
interface GigabitEthernet<span>0/1/4</span>
 undo shutdown
 ip address 10.1.2.2 255.255.255.0
 isis enable 1
#
return</pre>
</li><li><p><span class="keyword">Device</span> C configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>C
#
isis 1
 bgp-ls enable level-1-2
 bgp-ls identifier 20 
 network-entity 10.0000.0000.0003.00
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 1.1.1.1 255.255.255.0
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 10.1.1.1 255.255.255.0
 isis enable 1
#
interface GigabitEthernet<span>0/1/3</span>
 undo shutdown
 ip address 192.168.0.1 255.255.255.0
 isis enable 1
#
interface GigabitEthernet<span>0/1/4</span>
 undo shutdown
 ip address 10.1.2.1 255.255.255.0
 isis enable 1
#
bgp 100
 peer 1.1.1.2 as-number 100
 #
 ipv4-family unicast
  undo synchronization 
  peer 1.1.1.2 enable
 #
 link-state-family unicast
  peer 1.1.1.2 enable
#
return</pre>
</li><li><p><span class="keyword">Device</span> D configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>D
#
isis 1
 is-level level-2
 network-entity 20.0000.0000.0004.00
#
interface GigabitEthernet<span>0/1/3</span>
 undo shutdown
 ip address 192.168.0.2 255.255.255.0
 isis enable 1
#
interface LoopBack0
 ip address 172.16.1.1 255.255.255.255
 isis enable 1
#
return</pre>
</li><li><p>Controller configuration file</p>
<pre class="screen">#
sysname Controller
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 1.1.1.2 255.255.255.0
#
bgp 100
 peer 1.1.1.1 as-number 100
 #
 ipv4-family unicast
  undo synchronization 
  peer 1.1.1.1 enable
 #
 link-state-family unicast
  peer 1.1.1.1 enable
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3070.html">Configuration Examples for BGP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3085.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4105.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>