
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP to Import Routes">
<meta name="abstract" content="BGP can import the routes from other routing protocols. When routes are imported from dynamic routing protocols, the process IDs of the routing protocols must be specified. Importing routes from other protocols can enrich the BGP routing table. When importing IGP routes, BGP can filter the routes by routing protocol.">
<meta name="description" content="BGP can import the routes from other routing protocols. When routes are imported from dynamic routing protocols, the process IDs of the routing protocols must be specified. Importing routes from other protocols can enrich the BGP routing table. When importing IGP routes, BGP can filter the routes by routing protocol.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3004.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3006.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3008.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366162">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP to Import Routes</title>
</head>
<body><a name="EN-US_TASK_0172366162"></a><a name="EN-US_TASK_0172366162"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP to Import Routes</h1>
<div class="taskbody"><p>BGP can import the routes from other routing protocols. When routes are imported from dynamic routing protocols, the process IDs of the routing protocols must be specified. Importing routes from other protocols can enrich the BGP routing table. When importing IGP routes, BGP can filter the routes by routing protocol.</p>
<div class="context"><a name="EN-US_TASK_0172366162__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>BGP itself cannot discover routes. It needs to import routes from other protocols (such as IGPs) to the BGP routing table so that the routes can be transmitted within an AS or between ASs. When importing routes, BGP can filter these routes by routing protocol.</p>
<p>BGP imports routes in the following modes:</p>
<ul><li><p>Import mode: BGP imports routes into its routing table by protocol type, such as <span>RIP, </span>OSPF, IS-IS, static routes, or direct routes.</p>
</li><li><p>Network mode: BGP imports a route with the specified prefix and mask. This mode is more precise than the Import mode.</p>
</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172366162__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Import mode</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span></span><p><p>The BGP-IPv4 unicast address family view is displayed.</p>
</p><p></p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=import-route+isis+ospf+rip+direct++static+med+route-policy"><b><span class="cmdname">import-route</span></b></a> { <strong><span>isis</span></strong> <i><span class="varname">process-id</span></i> | <strong><span>ospf</span></strong> <i><span class="varname">process-id</span></i><span> | <strong><span>rip</span></strong> <i><span class="varname">process-id</span></i></span> | <strong><span>direct</span></strong> |<strong><span> </span></strong><strong><span>static </span></strong>| <strong>unr</strong> } [ [ <strong><span>med</span></strong> <i><span class="varname">med</span></i> ] | [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]<span> | [ <strong><span>route-filter</span></strong> <i><span class="varname">route-filter-name</span></i> ]</span> ] <sup>*</sup><span> [ <strong><span>non-relay-tunnel</span></strong> ]</span></span><p><p>BGP is configured to import routes from another protocol.</p>
</p><p><p>To set an MED value for the imported routes, specify the <i><span class="varname">med</span></i> parameter. An EBGP peer selects the route with the lowest MED value to guide traffic entering the AS where the peer resides.</p>
<p>To filter the routes imported from another protocol, you can specify the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter.</p>
<p>To filter the routes imported from another protocol, you can also specify the <strong><span>route-filter</span></strong> <i><span class="varname">route-filter-name</span></i> parameter.</p>
<p>If <strong><span>non-relay-tunnel</span></strong> is specified, the routes imported by BGP do not recurse to tunnels. <span>Generally, the routes imported by BGP can be recursed to tunnels. However, in some scenarios, if the routes imported by BGP are recursed to tunnels, problems may occur. For example, in a seamless MPLS scenario, egress protection is configured between egress MASGs, and a tunnel exists between the MASGs. If a BGP route imported by an MASG is recursed to the tunnel, the label action is not popping out but stitching tunnels. Consequently, traffic is diverted to the peer MASG, which prolongs the traffic switching time. As a result, egress protection fails to take effect. To solve this problem, specify the <strong><span>non-relay-tunnel</span></strong> parameter to prevent the routes imported by BGP from being recursed to tunnels. This prevents egress protection from becoming invalid due to tunnel stitching.</span></p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When configuring the device to import the routes discovered by a dynamic routing protocol, such as OSPF<span>, RIP, </span> or IS-IS, specify the process ID of the protocol.</p>
<p>In a BAS device access scenario, to prevent BGP from importing the UNRs that cannot be advertised, run the <a href="cmdqueryname=access+no-advertise-unr+import+disable"><b><span class="cmdname">access no-advertise-unr import disable</span></b></a> command.</p>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=default-route+imported"><b><span class="cmdname">default-route imported</span></b></a></span><p><p>BGP is allowed to import default routes from the local IP routing table. BGP can import default routes only when both the <a href="cmdqueryname=default-route+imported"><b><span class="cmdname">default-route imported</span></b></a> and <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> commands have been run. Using only the <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> command cannot import default routes, and using only the <a href="cmdqueryname=default-route+imported"><b><span class="cmdname">default-route imported</span></b></a> command imports only the default routes that exist in the local routing table.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Network mode</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span></span><p><p>The BGP-IPv4 unicast address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=network+route-policy"><b><span class="cmdname">network</span></b></a> <i><span class="varname">ipv4-address</span></i> [ <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> ] [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i><span> | <strong><span>route-filter</span></strong> <i><span class="varname">route-filter-name</span></i></span> ]<span> [ <strong><span>non-relay-tunnel</span></strong> ]</span></span><p><p>BGP is configured to import local routes.</p>
</p><p><p>If no mask or mask length is specified, the address is processed as a classful address. The local routes to be imported must exist in the local IP routing table.</p>
<p>To use a route-policy to filter the routes to be imported, specify the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter. </p>
<p>To use a route-filter to filter the routes to be imported, specify the <strong><span>route-filter</span></strong> <i><span class="varname">route-filter-name</span></i> parameter.</p>
<p>If <strong><span>non-relay-tunnel</span></strong> is specified, the routes imported by BGP do not recurse to tunnels. <span>Generally, the routes imported by BGP can be recursed to tunnels. However, in some scenarios, if the routes imported by BGP are recursed to tunnels, problems may occur. For example, in a seamless MPLS scenario, egress protection is configured between egress MASGs, and a tunnel exists between the MASGs. If a BGP route imported by an MASG is recursed to the tunnel, the label action is not popping out but stitching tunnels. Consequently, traffic is diverted to the peer MASG, which prolongs the traffic switching time. As a result, egress protection fails to take effect. To solve this problem, specify the <strong><span>non-relay-tunnel</span></strong> parameter to prevent the routes imported by BGP from being recursed to tunnels. This prevents egress protection from becoming invalid due to tunnel stitching.</span></p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>The specified route can be imported only when the destination address and mask specified in the <a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> command are the same as those in the corresponding entry in the local IP routing table.</p>
</li><li><p>When using the <a href="cmdqueryname=undo+network"><b><span class="cmdname">undo network</span></b></a> command to clear the existing configuration, specify the correct mask.</p>
</li></ul>
</div></div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3004.html">Configuring Basic BGP Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3008.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>