
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring BGP RRs">
<meta name="abstract" content="With BGP RRs, IBGP peers do not have to be fully meshed, which reduces configuration workload and facilitates network maintenance.">
<meta name="description" content="With BGP RRs, IBGP peers do not have to be fully meshed, which reduces configuration workload and facilitates network maintenance.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3070.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4088.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4076.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,bgpvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366373">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring BGP RRs</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366373"></a><a name="EN-US_TASK_0172366373"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring BGP RRs</h1>
<div class="taskbody"><p>With BGP RRs, IBGP peers do not have to be fully meshed, which reduces configuration workload and facilitates network maintenance.</p>
<div class="context"><a name="EN-US_TASK_0172366373__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On a large-scale network, multiple <span class="keyword">Router</span>s that run BGP are deployed within an AS. These <span class="keyword">Router</span>s need to use BGP to advertise routes to each other. To meet this need, IBGP peer relationships need to be set up between all the <span class="keyword">Router</span>s. However, fully meshed connections between all <span class="keyword">Router</span>s increase <span class="keyword">Router</span> costs and the configuration workload and are difficult to maintain. A solution that can simplify network configuration and reduce <span class="keyword">Router</span> costs without affecting route transmission is required.</p>
<p>To address this issue, configure RRs. In <a href="#EN-US_TASK_0172366373__fig_dc_vrp_bgp_cfg_407501">Figure 1</a>, AS 65010 is divided into two clusters: Cluster 1 and Cluster 2. <span class="keyword">Device</span>B is configured as an RR in Cluster 1, and <span class="keyword">Device</span>D and <span class="keyword">Device</span>E are its clients. <span class="keyword">Device</span>C is configured as an RR in Cluster 2, and <span class="keyword">Device</span>F, <span class="keyword">Device</span>G, and <span class="keyword">Device</span>H are its clients. <span class="keyword">Device</span>A is the non-client of <span class="keyword">Device</span>B and <span class="keyword">Device</span>C. <span class="keyword">Device</span>B and <span class="keyword">Device</span>C are non-clients of each other.</p>
<div class="fignone" id="EN-US_TASK_0172366373__fig_dc_vrp_bgp_cfg_407501"><a name="EN-US_TASK_0172366373__fig_dc_vrp_bgp_cfg_407501"></a><a name="fig_dc_vrp_bgp_cfg_407501"></a><span class="figcap"><b>Figure 1 </b>Configuring BGP RRs</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 through 5 in this example represent GE <span>0/1/0</span>, GE <span>0/2/0</span>, GE <span>0/3/0</span>, GE <span>0/1/1</span>, and GE <span>0/1/2</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_bgp_cfg_407501.png"></span><br></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>IP addresses of the interfaces</caption><thead align="left"><tr><th align="left" class="cellrowborder" char="." valign="top" width="16.53330666133227%" id="mcps1.4.1.5.2.7.1.1" liSelected="liSelected"><p>Device</p>
</th>
<th align="left" class="cellrowborder" char="." valign="top" width="16.693338667733546%" id="mcps1.4.1.5.2.7.1.2" liSelected="liSelected"><p>Interface</p>
</th>
<th align="left" class="cellrowborder" char="." valign="top" width="16.693338667733546%" id="mcps1.4.1.5.2.7.1.3" liSelected="liSelected"><p>IP Address</p>
</th>
<th align="left" class="cellrowborder" char="." valign="top" width="16.693338667733546%" id="mcps1.4.1.5.2.7.1.4" liSelected="liSelected"><p>Device</p>
</th>
<th align="left" class="cellrowborder" char="." valign="top" width="16.693338667733546%" id="mcps1.4.1.5.2.7.1.5" liSelected="liSelected"><p>Interface</p>
</th>
<th align="left" class="cellrowborder" char="." valign="top" width="16.693338667733546%" id="mcps1.4.1.5.2.7.1.6" liSelected="liSelected"><p>IP Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="3" char="." valign="middle" width="16.53330666133227%" headers="mcps1.4.1.5.2.7.1.1 "><p><span class="keyword">Device</span> A</p>
</td>
<td class="cellrowborder" char="." valign="top" width="16.693338667733546%" headers="mcps1.4.1.5.2.7.1.2 "><p>GE <span>0/3/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="16.693338667733546%" headers="mcps1.4.1.5.2.7.1.3 "><p>172.16.1.1/24</p>
</td>
<td class="cellrowborder" rowspan="2" char="." valign="middle" width="16.693338667733546%" headers="mcps1.4.1.5.2.7.1.4 "><p><span class="keyword">Device</span> C</p>
</td>
<td class="cellrowborder" char="." valign="top" width="16.693338667733546%" headers="mcps1.4.1.5.2.7.1.5 "><p>GE <span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="16.693338667733546%" headers="mcps1.4.1.5.2.7.1.6 "><p>10.1.8.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.2 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.3 "><p>10.1.1.2/24</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.5 "><p>GE <span>0/1/2</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.6 "><p>10.1.9.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.2 "><p>GE <span>0/2/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.3 "><p>10.1.3.2/24</p>
</td>
<td class="cellrowborder" rowspan="2" char="." valign="middle" headers="mcps1.4.1.5.2.7.1.4 "><p><span class="keyword">Device</span> D</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.5 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.6 "><p>10.1.4.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" char="." valign="middle" headers="mcps1.4.1.5.2.7.1.1 "><p><span class="keyword">Device</span> B</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.2 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.3 "><p>10.1.1.1/24</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.5 "><p>GE <span>0/2/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.6 "><p>10.1.6.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.2 "><p>GE <span>0/2/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.3 "><p>10.1.4.1/24</p>
</td>
<td class="cellrowborder" rowspan="2" char="." valign="middle" headers="mcps1.4.1.5.2.7.1.4 "><p><span class="keyword">Device</span> E</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.5 "><p>GE <span>0/2/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.6 "><p>10.1.6.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.2 "><p>GE <span>0/3/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.3 "><p>10.1.5.1/24</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.5 "><p>GE <span>0/3/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.6 "><p>10.1.5.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.2 "><p>GE <span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.3 "><p>10.1.2.1/24</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.4 "><p><span class="keyword">Device</span> F</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.5 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.6 "><p>10.1.7.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" char="." valign="middle" width="16.53330666133227%" headers="mcps1.4.1.5.2.7.1.1 "><p><span class="keyword">Device</span> C</p>
</td>
<td class="cellrowborder" char="." valign="top" width="16.693338667733546%" headers="mcps1.4.1.5.2.7.1.2 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="16.693338667733546%" headers="mcps1.4.1.5.2.7.1.3 "><p>10.1.2.2/24</p>
</td>
<td class="cellrowborder" char="." valign="top" width="16.693338667733546%" headers="mcps1.4.1.5.2.7.1.4 "><p><span class="keyword">Device</span> G</p>
</td>
<td class="cellrowborder" char="." valign="top" width="16.693338667733546%" headers="mcps1.4.1.5.2.7.1.5 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="16.693338667733546%" headers="mcps1.4.1.5.2.7.1.6 "><p>10.1.8.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.2 "><p>GE <span>0/2/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.3 "><p>10.1.3.1/24</p>
</td>
<td class="cellrowborder" rowspan="2" char="." valign="middle" headers="mcps1.4.1.5.2.7.1.4 "><p><span class="keyword">Device</span> H</p>
</td>
<td class="cellrowborder" rowspan="2" char="." valign="middle" headers="mcps1.4.1.5.2.7.1.5 "><p>GE <span>0/2/0</span></p>
</td>
<td class="cellrowborder" rowspan="2" char="." valign="middle" headers="mcps1.4.1.5.2.7.1.6 "><p>10.1.9.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.2 "><p>GE <span>0/3/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.5.2.7.1.3 "><p>10.1.7.1/24</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366373__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>When configuring a BGP RR, note the following rules:</p>
<ul><li><p>If a cluster has multiple RRs, run the <strong>reflector cluster-id</strong> command to set the same cluster ID for these RRs to prevent routing loops.</p>
</li><li><p>The name of a peer group is case sensitive.</p>
</li><li>To improve security, you are advised to deploy BGP security measures. For details, see "Configuring BGP Security." Keychain authentication is used as an example. For details, see "Example for Configuring BGP Keychain."</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366373__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure IBGP connections between the clients and the RR, and between the non-client and the RR.</p>
</li><li><p>Configure <span class="keyword">Device</span> B and <span class="keyword">Device</span> C as RRs, specify their clients, and check routes.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366373__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Router IDs and AS numbers of <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, <span class="keyword">Device</span> C, <span class="keyword">Device</span> D, <span class="keyword">Device</span> E, <span class="keyword">Device</span> F, <span class="keyword">Device</span> G, and <span class="keyword">Device</span> H</p>
</li><li><p>Cluster ID of <span class="keyword">Device</span> B</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366373__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address for each interface. For configuration details, see <a href="#EN-US_TASK_0172366373__section_dc_vrp_bgp_cfg_407505">Configuration Files</a> in this section.</span></li><li><span>Configure IBGP connections between the clients and the RR, and between the non-client and the RR.</span></li><li><span>Configure RRs.</span><p><p># Configure <span class="keyword">Device</span> B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B]<strong> bgp 65010</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp] <strong>router-id 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp]<strong> group in_rr internal</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp] <strong>peer 10.1.4.2 group in_rr</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp] <strong>peer 10.1.5.2 group in_rr</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp] <strong>ipv4-family unicast</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp-af-ipv4]<strong> peer in_rr reflect-client</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp-af-ipv4]<strong> undo reflect between-clients</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp-af-ipv4]<strong> reflector cluster-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp-af-ipv4]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-bgp-af-ipv4]<strong> quit</strong></pre>
<p># Configure <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C]<strong> bgp 65010</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>router-id 3.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp]<strong> group in_rr internal</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>peer 10.1.7.2 group in_rr </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>peer 10.1.8.2 group in_rr</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>peer 10.1.9.2 group in_rr</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>ipv4-family unicast</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp-af-ipv4]<strong> peer in_rr reflect-client</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp-af-ipv4] <strong>reflector cluster-id 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp-af-ipv4] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-bgp-af-ipv4]<strong> quit</strong></pre>
<p># Check the routing table of <span class="keyword">Device</span> D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>display bgp routing-table 172.16.1.0</strong>

BGP local router ID : 4.4.4.4
 Local AS number : 65010
 Paths:   1 available, 0 best, 0 select
 BGP routing table entry information of 172.16.1.0/24:
 <strong>From: 10.1.4.1 (2.2.2.2)</strong>
 Route Duration: 00h00m14s
 Relay IP Nexthop: 0.0.0.0
 Relay IP Out-Interface:
 Original nexthop: 10.1.1.2
 Qos information : 0x0
 AS-path Nil, origin igp, MED 0, localpref 100, pref-val 0, internal, pre 255
 <strong>Originator:  1.1.1.1</strong>
<strong> Cluster list: 0.0.0.1</strong>
 Not advertised to any peer yet</pre>
<p>The command output shows that <span class="keyword">Device</span> D has learned from <span class="keyword">Device</span> B the route advertised by <span class="keyword">Device</span> A and that the Originator and Cluster_ID attributes of this route are displayed.</p>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172366373__section_dc_vrp_bgp_cfg_407505"><a name="EN-US_TASK_0172366373__section_dc_vrp_bgp_cfg_407505"></a><a name="section_dc_vrp_bgp_cfg_407505"></a><a name="EN-US_TASK_0172366373__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span> A configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.1.2 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.3.2 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.16.1.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">bgp 65010</pre>
<pre class="screen"> router-id 1.1.1.1</pre>
<pre class="screen"> peer 10.1.1.1 as-number 65010</pre>
<pre class="screen"> peer 10.1.3.1 as-number 65010</pre>
<pre class="screen"> #</pre>
<pre class="screen"> ipv4-family unicast</pre>
<pre class="screen">  undo synchronization 
  network 172.16.1.0 255.255.255.0</pre>
<pre class="screen">  peer 10.1.1.1 enable</pre>
<pre class="screen">  peer 10.1.3.1 enable</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span> B configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.1.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.4.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.5.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.2.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">bgp 65010</pre>
<pre class="screen"> router-id 2.2.2.2</pre>
<pre class="screen"> peer 10.1.1.2 as-number 65010</pre>
<pre class="screen"> peer 10.1.2.2 as-number 65010</pre>
<pre class="screen"> group in_rr internal</pre>
<pre class="screen"> peer 10.1.4.2 as-number 65010</pre>
<pre class="screen"> peer 10.1.4.2 group in_rr</pre>
<pre class="screen"> peer 10.1.5.2 as-number 65010</pre>
<pre class="screen"> peer 10.1.5.2 group in_rr</pre>
<pre class="screen"> #</pre>
<pre class="screen"> ipv4-family unicast</pre>
<pre class="screen">  undo synchronization 
  undo reflect between-clients</pre>
<pre class="screen">  reflector cluster-id 1</pre>
<pre class="screen">  peer 10.1.1.2 enable</pre>
<pre class="screen">  peer 10.1.2.2 enable</pre>
<pre class="screen">  peer in_rr enable</pre>
<pre class="screen">  peer in_rr reflect-client</pre>
<pre class="screen">  peer 10.1.4.2 enable</pre>
<pre class="screen">  peer 10.1.4.2 group in_rr</pre>
<pre class="screen">  peer 10.1.5.2 enable</pre>
<pre class="screen">  peer 10.1.5.2 group in_rr  </pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span> C configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>C</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.2.2 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.3.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.7.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.8.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/2</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.9.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">bgp 65010</pre>
<pre class="screen"> router-id 3.3.3.3</pre>
<pre class="screen"> peer 10.1.2.1 as-number 65010</pre>
<pre class="screen"> peer 10.1.3.2 as-number 65010</pre>
<pre class="screen"> group in_rr internal</pre>
<pre class="screen"> peer 10.1.7.2 as-number 65010</pre>
<pre class="screen"> peer 10.1.7.2 group in_rr</pre>
<pre class="screen"> peer 10.1.8.2 as-number 65010</pre>
<pre class="screen"> peer 10.1.8.2 group in_rr</pre>
<pre class="screen"> peer 10.1.9.2 as-number 65010</pre>
<pre class="screen"> peer 10.1.9.2 group in_rr</pre>
<pre class="screen"> #</pre>
<pre class="screen"> ipv4-family unicast</pre>
<pre class="screen">  undo synchronization 
  reflector cluster-id 2</pre>
<pre class="screen">  peer 10.1.2.1 enable</pre>
<pre class="screen">  peer 10.1.3.2 enable</pre>
<pre class="screen">  peer in_rr enable</pre>
<pre class="screen">  peer in_rr reflect-client</pre>
<pre class="screen">  peer 10.1.7.2 enable</pre>
<pre class="screen">  peer 10.1.7.2 group in_rr</pre>
<pre class="screen">  peer 10.1.8.2 enable</pre>
<pre class="screen">  peer 10.1.8.2 group in_rr</pre>
<pre class="screen">  peer 10.1.9.2 enable</pre>
<pre class="screen">  peer 10.1.9.2 group in_rr</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span> D configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>D</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.4.2 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.6.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">bgp 65010</pre>
<pre class="screen"> router-id 4.4.4.4</pre>
<pre class="screen"> peer 10.1.4.1 as-number 65010</pre>
<pre class="screen"> #</pre>
<pre class="screen"> ipv4-family unicast</pre>
<pre class="screen">  undo synchronization 
  peer 10.1.4.1 enable</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Configuration files of other <span class="keyword">Router</span>s are similar to the <span class="keyword">Device</span> D configuration file.</p>
</div></div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3070.html">Configuration Examples for BGP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4088.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4076.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>