
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Associating Direct Routes with a VRRP Group">
<meta name="abstract" content="Associating direct routes with a Virtual Router Redundancy Protocol (VRRP) group prevents user-to-network traffic and network-to-user traffic that traverse the VRRP group from being transmitted on different paths.">
<meta name="description" content="Associating direct routes with a Virtual Router Redundancy Protocol (VRRP) group prevents user-to-network traffic and network-to-user traffic that traverse the VRRP group from being transmitted on different paths.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ip-route_cfg_0023.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ip-route_cfg_0028.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ip-route_cfg_0057.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,ip-routevrp,s00526617,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IP Routing Basis">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IP Routing Basis">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="IP Routing Basis">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="IP Routing Basis">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="d00534873">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365385">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Associating Direct Routes with a VRRP Group</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172365385"></a><a name="EN-US_TASK_0172365385"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Associating Direct Routes with a VRRP Group</h1>
<div class="taskbody"><p>Associating direct routes with a Virtual Router Redundancy Protocol (VRRP) group prevents user-to-network traffic and network-to-user traffic that traverse the VRRP group from being transmitted on different paths.</p>
<div class="context"><a name="EN-US_TASK_0172365385__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172365385__fig_dc_vrp_ip-route_cfg_003301">Figure 1</a>, the VRRP group consisting of <span class="keyword">Device</span>1 and <span class="keyword">Device</span>2 functions as the user-side gateway. User-to-network traffic is forwarded through the master device (<span class="keyword">Device</span>1) of the VRRP group. In addition, the Open Shortest Path First (OSPF) protocol runs on <span class="keyword">Device</span> 1, <span class="keyword">Device</span> 2, and <span class="keyword">Device</span> 3 so that these devices can communicate with one another at the IP layer. Network-to-user traffic travels on the path that OSPF selects. <span class="keyword">Device</span> 3 has two equal-cost routes destined for the user network segment 10.1.1.0/24 that OSPF selects. Therefore, the two routes load-balance the network-to-user traffic. User-to-network traffic and network-to-user traffic travel on different paths.</p>
<div class="fignone" id="EN-US_TASK_0172365385__fig_dc_vrp_ip-route_cfg_003301"><a name="EN-US_TASK_0172365385__fig_dc_vrp_ip-route_cfg_003301"></a><a name="fig_dc_vrp_ip-route_cfg_003301"></a><span class="figcap"><b>Figure 1 </b>Association between direct routes and a VRRP group</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 and 2 in this example represent GE <span>0/1/0</span> and GE <span>0/1/1</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_ip-route_cfg_003301.png" width="NaN" height="NaN"></span></div>
<p>To resolve this problem, associate direct routes with the VRRP group on VRRP-enabled interfaces of <span class="keyword">Device</span>1 and <span class="keyword">Device</span>2 to increase the cost of the direct route to the virtual IP network segment of the VRRP group, import the direct route to OSPF, and configure OSPF to inherit the costs of the imported external routes. Because the cost of the OSPF route passing through <span class="keyword">Device</span>1 is smaller, <span class="keyword">Device</span>3 preferentially selects this route to forward downstream traffic. In this manner, upstream and downstream traffic is transmitted along the same path.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365385__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>During the configuration, pay attention to the following points:</p>
<ul><li><p>OSPF cannot run on <span class="keyword">Device</span> 1's and <span class="keyword">Device</span> 2's VRRP-enabled interfaces. If both VRRP and OSPF run on <span class="keyword">Device</span> 1's and <span class="keyword">Device</span> 2's interfaces, OSPF cannot inherit the costs from the imported direct routes after the association.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365385__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure a VRRP group on <span class="keyword">Device</span> 1 and <span class="keyword">Device</span> 2.</p>
</li><li><p>Configure OSPF on <span class="keyword">Device</span> 1, <span class="keyword">Device</span> 2, and <span class="keyword">Device</span> 3.</p>
</li><li><p>Associate direct routes with the VRRP group on <span class="keyword">Device</span> 1 and <span class="keyword">Device</span> 2.</p>
</li><li><p>Enable OSPF to import direct routes on <span class="keyword">Device</span> 1 and <span class="keyword">Device</span> 2 and to inherit the costs of the imported direct routes.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365385__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>VLAN ID 10 configured on the Switch</p>
</li><li><p>VRRP ID 1 and a virtual IP address 10.1.1.111 of the VRRP group</p>
</li><li><p><span class="keyword">Device</span> 1's VRRP priority 120 </p>
</li><li><p>Cost of direct routes to the virtual IP network segment on <span class="keyword">Device</span> 2 (300)</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365385__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address for each interface. For configuration details, see <a href="#EN-US_TASK_0172365385__section_dc_vrp_ip-route_cfg_003306">Configuration File</a> in this section. </span></li><li><span>Configure a VRRP group.</span><p><p># Configure a VLAN with VLAN ID 10 on the Switch. Add GE <span>0/1/0</span> and GE <span>0/1/1</span> to VLAN 10 so that the Switch transparently transmits VRRP packets sent by <span class="keyword">Device</span> 1 or <span class="keyword">Device</span> 2.</p>
<pre class="screen">&lt;Switch&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Switch] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Switch-GigabitEthernet<span>0/1/0</span>] <strong>portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>Switch-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>Switch-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>Switch] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Switch-GigabitEthernet<span>0/1/1</span>] <strong>portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>Switch-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Switch-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>Switch] <strong>vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>Switch-vlan10] <strong>port gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>Switch-vlan10] <strong>port gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>Switch-vlan10] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>Switch-vlan10] <strong>quit</strong></pre>
<p># Create VRRP group 1 on <span class="keyword">Device</span> 1, and set the priority of <span class="keyword">Device</span> 1 in the VRRP group to 120 so that <span class="keyword">Device</span> 1 functions as the master device.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>1&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>1] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>1-GigabitEthernet<span>0/1/0</span>] <strong>vrrp vrid 1 virtual-ip 10.1.1.111</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>1-GigabitEthernet<span>0/1/0</span>] <strong>vrrp vrid 1 priority 120</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>1-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<p># Create VRRP group 1 on <span class="keyword">Device</span> 2 </p>
<pre class="screen">&lt;<span class="keyword">Device</span>2&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>2] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>2-GigabitEthernet<span>0/1/0</span>] <strong>vrrp vrid 1 virtual-ip 10.1.1.111</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>2-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
</p></li><li><span>Configure OSPF.</span><p><p># Configure OSPF on <span class="keyword">Device</span> 1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>1] <strong>ospf 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>1-ospf-1] <strong>area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>1-ospf-1-area-0.0.0.0] <strong>network 10.1.3.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>1-ospf-1-area-0.0.0.0] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>1-ospf-1-area-0.0.0.0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>1-ospf-1] <strong>quit</strong></pre>
<p># Configure OSPF on <span class="keyword">Device</span> 2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>2] <strong>ospf 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>2-ospf-1] <strong>area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>2-ospf-1-area-0.0.0.0] <strong>network 10.1.2.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>2-ospf-1-area-0.0.0.0] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>2-ospf-1-area-0.0.0.0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>2-ospf-1] <strong>quit</strong></pre>
<p># Configure OSPF on <span class="keyword">Device</span> 3.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>3&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>3] <strong>ospf 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>3-ospf-1] <strong>area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>3-ospf-1-area-0.0.0.0] <strong>network 10.1.2.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>3-ospf-1-area-0.0.0.0] <strong>network 10.1.3.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>3-ospf-1-area-0.0.0.0] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>3-ospf-1-area-0.0.0.0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>3-ospf-1] <strong>quit</strong></pre>
</p></li><li><span>Associate direct routes with the VRRP group.</span><p><p># Configure <span class="keyword">Device</span>1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>1] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>1-GigabitEthernet<span>0/1/0</span>] <strong>direct-route track vrrp vrid 1 degrade-cost 300</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>1-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span>2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>2] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>2-GigabitEthernet<span>0/1/0</span>] <strong>direct-route track vrrp vrid 1 degrade-cost 300</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>2-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
</p></li><li><span>Configure OSPF to import direct routes.</span><p><p># Configure OSPF on <span class="keyword">Device</span> 1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>1] <strong>ospf 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>1-ospf-1] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>1-ospf-1] <strong>default cost inherit-metric</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>1-ospf-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>1-ospf-1] <strong>quit</strong></pre>
<p># Configure OSPF on <span class="keyword">Device</span> 2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>2] <strong>ospf 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>2-ospf-1] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>2-ospf-1] <strong>default cost inherit-metric</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>2-ospf-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>2-ospf-1] <strong>quit</strong></pre>
</p></li><li><span>Check the configuration.</span><p><p># Run the <a href="cmdqueryname=display+ip+routing-table"><b><span class="cmdname">display ip routing-table</span></b></a> command on <span class="keyword">Device</span>2 to view information about the IP routing table. The command output shows that the cost of the direct route to the VRRP virtual IP network segment is 300.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>2&gt; <strong>display ip routing-table</strong></pre>
<pre class="screen"><span class="keyword">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table : _public_
         Destinations : 12       Routes : 12        

Destination/Mask    Proto  Pre  Cost        Flags NextHop         Interface

     <strong>10.1.1.0/24  Direct 0    300           D  10.1.1.2        GigabitEthernet<span>0/1/0</span></strong>
       10.1.1.2/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
     10.1.1.111/32  O_ASE  150  0             D  10.1.2.2        GigabitEthernet<span>0/1/1</span>
     10.1.1.255/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
       10.1.2.0/24  Direct 0    0             D  10.1.2.1        GigabitEthernet<span>0/1/1</span>
       10.1.2.1/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/1</span>
     10.1.2.255/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/1</span>
       10.1.3.0/24  OSPF   10   2             D  10.1.2.2        GigabitEthernet<span>0/1/1</span>
      127.0.0.0/8   Direct 0    0             D  127.0.0.1       InLoopBack0
      127.0.0.1/32  Direct 0    0             D  127.0.0.1       InLoopBack0
127.255.255.255/32  Direct 0    0             D  127.0.0.1       InLoopBack0
255.255.255.255/32  Direct 0    0             D  127.0.0.1       InLoopBack0</pre>
<p># Run the <a href="cmdqueryname=display+ip+routing-table+10.1.1.0"><b><span class="cmdname">display ip routing-table 10.1.1.0</span></b></a> command on <span class="keyword">Device</span>3 to view information about the route destined for the network segment. The command output shows that <span class="keyword">Device</span>3 selects the route with next-hop address 10.1.3.1 (passing through VRRP master device <span class="keyword">Device</span>1) for downstream traffic to the user.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>3&gt; <strong>display ip routing-table 10.1.1.0</strong></pre>
<pre class="screen"><span class="keyword">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table : _public_
Summary Count : 1

Destination/Mask    Proto  Pre  Cost        Flags NextHop         Interface

       10.1.1.0/24  O_ASE  150  0             D  <strong>10.1.3.1        GigabitEthernet<span>0/1/0</span></strong></pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172365385__section_dc_vrp_ip-route_cfg_003306"><a name="EN-US_TASK_0172365385__section_dc_vrp_ip-route_cfg_003306"></a><a name="section_dc_vrp_ip-route_cfg_003306"></a><a name="EN-US_TASK_0172365385__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>Switch configuration file</p>
<pre class="screen">#
sysname Switch
#
vlan batch 10
#               
interface GigabitEthernet<span>0/1/0</span>
 portswitch     
 undo shutdown  
 port default vlan 10
#               
interface GigabitEthernet<span>0/1/1</span>
 portswitch     
 undo shutdown  
 port default vlan 10
#</pre>
</li><li><p><span class="keyword">Device</span> 1 configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>1
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ip address 10.1.1.1 255.255.255.0
 vrrp vrid 1 virtual-ip 10.1.1.111
 vrrp vrid 1 priority 120
 direct-route track vrrp vrid 1 degrade-cost 300
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.3.1 255.255.255.0
#               
ospf 1          
 default cost inherit-metric
 import-route direct
 area 0.0.0.0   
  network 10.1.3.0 0.0.0.255
#</pre>
</li><li><p><span class="keyword">Device</span> 2 configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>2
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ip address 10.1.1.2 255.255.255.0
 vrrp vrid 1 virtual-ip 10.1.1.111
 direct-route track vrrp vrid 1 degrade-cost 300
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.2.1 255.255.255.0
#               
ospf 1          
 default cost inherit-metric
 import-route direct
 area 0.0.0.0   
  network 10.1.2.0 0.0.0.255
#</pre>
</li><li><p><span class="keyword">Device</span> 3 configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>3
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.3.2 255.255.255.0
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.2.2 255.255.255.0
#               
ospf 1          
 area 0.0.0.0   
  network 10.1.2.0 0.0.0.255
  network 10.1.3.0 0.0.0.255
#</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ip-route_cfg_0023.html">Configuration Examples for IP Routing Basis
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ip-route_cfg_0028.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ip-route_cfg_0057.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>