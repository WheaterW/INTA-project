
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an OSPF NSSA">
<meta name="abstract" content="Configuring a non-backbone area on the border of an AS as an NSSA can reduce entries in the routing table and the amount of routing information to be transmitted. This section describes how to set the cost of the default route to an NSSA and adjust the selection of the default route.">
<meta name="description" content="Configuring a non-backbone area on the border of an AS as an NSSA can reduce entries in the routing table and the amount of routing information to be transmitted. This section describes how to set the cost of the default route to an NSSA and adjust the selection of the default route.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2046.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2018.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ospf,w00800033,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365604">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an OSPF NSSA</title>
</head>
<body><a name="EN-US_TASK_0172365604"></a><a name="EN-US_TASK_0172365604"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an OSPF NSSA</h1>
<div class="taskbody"><p>Configuring a non-backbone area on the border of an AS as an NSSA can reduce entries in the routing table and the amount of routing information to be transmitted. This section describes how to set the cost of the default route to an NSSA and adjust the selection of the default route.</p>
<div class="context"><a name="EN-US_TASK_0172365604__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>An excessive number of entries in a routing table wastes network resources and causes high CPU usage. To reduce entries in a routing table, configure a non-backbone area on the border of an AS as a stub area or an NSSA to reduce the amount of routing information to be transmitted. For details on how to configure an OSPF stub area, see <a href="dc_vrp_ospf_cfg_2046.html">Configuring an OSPF Stub Area</a>.</p>
<p>An OSPF Not-So-Stubby Area (NSSA) is a special OSPF area. Similar to a stub area, an NSSA does not transmit external routes from other areas on an OSPF network. The difference is that the stub area cannot import external routes, whereas the NSSA can import AS external routes and advertise them in the entire OSPF AS.</p>
<p>As defined in OSPF, stub areas cannot import external routes. If external routes need to be imported and the resource consumption caused by external routes needs to be avoided, stub areas cannot meet the requirements. In this case, you can configure these areas as NSSAs.</p>
<p>Type 7 link state advertisements (LSAs) are used to carry imported AS external routes in the NSSA. Type 7 LSAs are generated by ASBRs of NSSAs and flooded only in the NSSAs where ASBRs reside. The ABR in an NSSA selects Type 7 LSAs from those received, and translates them into Type 5 LSAs in order to advertise external routes to other areas over the OSPF network.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>A Type 7 LSA was introduced to support NSSAs and describe imported external routes.</li><li>Default routes can also be represented by Type 7 LSAs to guide traffic to other ASs.</li></ul>
</div></div>
<p>To configure an area as an NSSA, configure NSSA attributes on all the <span class="keyword">Router</span>s in this area.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365604__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring an OSPF NSSA, complete the following tasks:</p>
<ul><li>Configure an address for each involved interface to ensure that neighboring devices can communicate with each other at the network layer.</li><li><a href="dc_vrp_ospf_cfg_0003.html">Configure basic OSPF functions</a>.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365604__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span></span><p><p>The OSPF view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=area"><b><span class="cmdname">area</span></b></a> <i><span class="varname">area-id</span></i></span></span><p><p>The OSPF area view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=nssa"><b><span class="cmdname">nssa</span></b></a> [ { <strong><span>default-route-advertise</span></strong><span> [ <strong><span>backbone-peer-ignore</span></strong> ]</span> } | <strong><span>no-import-route</span></strong> | <strong><span>no-summary</span></strong> | <strong><span>set-n-bit</span></strong> | <strong><span>suppress-forwarding-address</span></strong> | <strong><span>translator-always</span></strong> | <strong><span>translator-interval</span></strong> <i><span class="varname">interval-value</span></i> | <strong><span>zero-address-forwarding</span></strong> ] <sup>*</sup></span><p><p>The area is configured as an NSSA.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>NSSA attributes must be configured on all <span class="keyword">Router</span>s in the NSSA using the <a href="cmdqueryname=nssa"><b><span class="cmdname">nssa</span></b></a> command.</li><li>Configuring or deleting NSSA attributes may trigger area update and neighbor relationship interruption. You can perform the configuration again or cancel the configuration only after the last area update is complete.</li></ul>
</div></div>
<p>The parameters in the <a href="cmdqueryname=nssa"><b><span class="cmdname">nssa</span></b></a> command are used in the following scenarios:</p>
<ul><li><p>The <strong><span>default-route-advertise</span></strong> parameter is used to generate default Type 7 LSAs on the ABR or ASBR and advertise them to the NSSA.</p>
<p>The conditions for generating default Type 7 LSAs and advertising them to the NSSA are as follows:</p>
<ol type="a"><li>Neighbors in Full state and interfaces in Up state must exist in the backbone area.</li><li>The <strong><span>default-route-advertise</span></strong> parameter is configured.</li><li>Other default routes (destined for 0.0.0.0) exist in the local routing table.</li></ol>
<p>If condition 1 is met, the ABR can generate default Type 7 LSAs and advertise them to the NSSA. If conditions 2 and 3 are met, the ASBR can generate default Type 7 LSAs and advertise them to the NSSA.</p>
</li><li>The <strong><span>backbone-peer-ignore</span></strong> parameter is used to ignore the check on the neighbor status in the backbone area. That is, the ABR automatically generates default Type 7 LSAs and advertises them to the NSSA as long as an interface that is Up exists in the backbone area, regardless of whether a neighbor in the Full state exists.</li><li>If an ASBR also functions as an ABR, specifying <strong><span>no-import-route</span></strong> prevents OSPF from advertising the external routes imported using the <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> command to the NSSA.</li><li>To reduce the number of LSAs to be transmitted to the NSSA, specify <strong><span>no-summary</span></strong> on an ABR. This prevents the ABR from transmitting Summary LSAs (Type 3 LSAs) to the NSSA.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the <a href="cmdqueryname=nssa"><b><span class="cmdname">nssa</span></b></a> <strong><span>default-route-advertise</span></strong> <strong><span>backbone-peer-ignore</span></strong> <strong><span>no-summary</span></strong> command is run, the ABR generates both the default Type 7 LSA and default Type 3 LSA as long as the backbone area contains interfaces that are up, regardless of whether neighbor relationships in Full state exist. In this case, the default Type 3 LSA preferentially takes effect.</p>
</div></div>
</li><li>After the <strong><span>set-n-bit</span></strong> parameter is set, the N-bit is set in the DD packets during the synchronization between the <span class="keyword">Router</span> and neighboring <span class="keyword">Router</span>.</li><li>The <strong><span>suppress-forwarding-address</span></strong> parameter sets the forwarding address (FA) of the Type 5 LSAs translated by the NSSA ABR to 0.0.0.0.</li><li>If there are multiple ABRs in an NSSA, the system automatically selects an ABR as the translator according to certain rules (generally, the device with the largest router ID is selected in the NSSA) to translate Type 7 LSAs into Type 5 LSAs. You can configure the <strong><span>translator-always</span></strong> parameter on an ABR to specify the ABR as an all-the-time translator. To allow two ABRs to participate in load balancing, configure <strong><span>translator-always</span></strong> on the ABRs. You can use this command to pre-configure a fixed translator to prevent LSA flooding caused by translator role changes.</li><li>To ensure service continuity during translator switching, specify the <strong><span>translator-interval</span></strong> parameter. The value of <i><span class="varname">interval-value</span></i> must be greater than the flooding interval.</li><li>The <strong><span>zero-address-forwarding</span></strong> parameter is used to set the FA of the generated NSSA LSAs to 0.0.0.0 when external routes are imported to the ABR in an NSSA.</li></ul>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=default-cost"><b><span class="cmdname">default-cost</span></b></a> <i><span class="varname">cost</span></i></span></span><p><p>The cost of the default route corresponding to Type 3 LSAs that are transmitted by the ABR to the NSSA is set.</p>
<p>To ensure the reachability of AS external routes, the ABR in the NSSA generates a default route and advertises it to other <span class="keyword">Router</span>s in the NSSA. Setting the cost helps control route selection.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172365604__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+ospf"><b><span class="cmdname">display ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>lsdb</span></strong> [ <strong><span>brief</span></strong>] command to check OSPF LSDB information.</li><li>Run the <a href="cmdqueryname=display+ospf"><b><span class="cmdname">display ospf</span></b></a> [ <i><span class="varname">process-id</span></i>] <strong><span>routing</span></strong> command to check information about the OSPF routing table.</li></ul>
<ul><li><p>Run the <a href="cmdqueryname=display+ospf"><b><span class="cmdname">display ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>interface</span></strong> command to check OSPF interface information.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0000.html">OSPF Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2046.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2018.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>