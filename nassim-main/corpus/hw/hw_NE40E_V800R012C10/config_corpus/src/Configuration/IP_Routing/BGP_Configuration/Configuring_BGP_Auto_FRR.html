
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP Auto FRR">
<meta name="abstract" content="As a protection measure against link faults, BGP Auto FRR is applicable to networks with primary and backup links and services that are sensitive to packet loss and delay.">
<meta name="description" content="As a protection measure against link faults, BGP Auto FRR is applicable to networks with primary and backup links and services that are sensitive to packet loss and delay.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_5011.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4102.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,bgpvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366256">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP Auto FRR</title>
</head>
<body><a name="EN-US_TASK_0172366256"></a><a name="EN-US_TASK_0172366256"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP Auto FRR</h1>
<div class="taskbody"><p>As a protection measure against link faults, BGP Auto FRR is applicable to networks with primary and backup links and services that are sensitive to packet loss and delay.</p>
<div class="context"><a name="EN-US_TASK_0172366256__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0172366256__context1629499010214038"><h4 class="sectiontitle">Usage Scenario</h4><p id="EN-US_TASK_0172366256__p_4057">As networks evolve continuously, voice, on-line video, and financial services raise increasingly high requirements for real-time performance. Usually, primary and backup links are deployed on a network to ensure the stability of these services. In a traditional forwarding mode, the <span class="keyword" id="EN-US_TASK_0172366256__keyword1983340105214038">Router</span> selects a route out of several routes that are bound for the same destination network as the optimal route and delivers the route to the FIB table to guide data forwarding. If the optimal route fails, the <span class="keyword" id="EN-US_TASK_0172366256__keyword1586952724710">Router</span> has to wait for route convergence to be completed before reselecting an optimal route and delivering it to the FIB table. In this case, services are interrupted for a long time, unable to meet service requirements.</p>
<p id="EN-US_TASK_0172366256__p_4058">As a protection measure against link failures, BGP Auto fast reroute (FRR) is applicable to networks with primary and backup links. With BGP Auto FRR, if the primary link fails, the device rapidly switches services to the backup link without waiting for the completion of route convergence. In this manner, services are interrupted only for a short period of time (subsecond level).</p>
<p id="EN-US_TASK_0172366256__p19916175384120">With BGP Auto FRR, if there are multiple valid routes to the same destination network, BGP Auto FRR uses the optimal route as the primary link to forward packets and automatically adds suboptimal route forwarding information to the backup forwarding entry of the optimal route as a backup link. If the primary link fails, the system rapidly responds to the notification that the BGP route is unreachable and switches the forwarding path to the backup link.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366256__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring BGP Auto FRR, complete the following tasks:</p>
<ul><li><p><a href="dc_vrp_bgp_cfg_3004.html">Configure basic BGP functions.</a></p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366256__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span></span><p><p>The BGP IPv4 unicast address family view is displayed.</p>
</p></li><li><span>Perform either of the following operations to enable BGP Auto FRR for unicast routes:</span><ul><li>To enable only BGP Auto FRR for unicast routes, run the <a href="cmdqueryname=auto-frr"><b><span class="cmdname">auto-frr</span></b></a> command.</li><li>To enable BGP Auto FRR for unicast routes and configure the function of preferentially selecting the SRv6 BE path of the primary route as the backup path, run the <a href="cmdqueryname=auto-frr+best-effort"><b><span class="cmdname">auto-frr best-effort</span></b></a> command. If a device is configured to preferentially select the SRv6 BE path of the primary route as the backup path and both the SRv6 TE-Policy and SRv6 BE path of the primary route are available, the device preferentially selects the SRv6 BE path of the primary route as the backup path. That is, the SRv6 BE path of the primary route has a higher priority than the backup route. If the SRv6 TE-Policy of the primary route fails, the forwarding path is rapidly switched to this SRv6 BE path.</li></ul>
</li><li><span>(Optional) Run <span><a href="cmdqueryname=route-select+delay"><b><span class="cmdname">route-select delay</span></b></a> <i><span class="varname">delay-value</span></i></span></span><p><p>Delayed route selection is configured. After the primary path recovers, delayed route selection ensures that the device on the primary path performs route selection only after the corresponding forwarding entries on the device are stable. This prevents traffic loss during traffic switchback.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172366256__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring BGP Auto FRR, verify the configuration.</p>
<ul><li>Run the <a href="cmdqueryname=display+bgp+routing-table+longer-prefixes"><b><span class="cmdname">display bgp routing-table</span></b></a> [ <i><span class="varname">network</span></i> [ { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } [ <strong><span>longer-prefixes</span></strong> ] ] ] command to check information in the BGP routing table.</li><li>Run the <a href="cmdqueryname=display+ip+routing-table+longer-match+verbose"><b><span class="cmdname">display ip routing-table</span></b></a> [ <i><span class="varname">ip-address</span></i> [ <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> ] [ <strong><span>longer-match</span></strong> ] ] <strong><span>verbose</span></strong> command to check backup forwarding entries in the routing table.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3000.html">BGP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_5011.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4102.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>