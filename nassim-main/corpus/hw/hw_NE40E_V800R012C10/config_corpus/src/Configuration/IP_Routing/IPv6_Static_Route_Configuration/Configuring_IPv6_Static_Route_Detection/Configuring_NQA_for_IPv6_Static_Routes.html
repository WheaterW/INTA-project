
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring NQA for IPv6 Static Routes">
<meta name="abstract" content="If an IPv6 static route is associated with a network quality analysis (NQA) test instance, NQA tests the link status periodically. If NQA detects a fault along the associated IPv6 static route, the IPv6 static route is deleted, and traffic is switched to another route.">
<meta name="description" content="If an IPv6 static route is associated with a network quality analysis (NQA) test instance, NQA tests the link status periodically. If NQA detects a fault along the associated IPv6 static route, the IPv6 static route is deleted, and traffic is switched to another route.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0051.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0028.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0076.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,static-routevrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00414125">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365487">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring NQA for IPv6 Static Routes</title>
</head>
<body><a name="EN-US_TASK_0172365487"></a><a name="EN-US_TASK_0172365487"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring NQA for IPv6 Static Routes</h1>
<div class="taskbody"><p>If an IPv6 static route is associated with a network quality analysis (NQA) test instance, NQA tests the link status periodically. If NQA detects a fault along the associated IPv6 static route, the IPv6 static route is deleted, and traffic is switched to another route.</p>
<div class="context"><a name="EN-US_TASK_0172365487__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>On live networks, the status of IPv6 static routes needs to be monitored in real time to ensure network stability. If the link status changes, a primary/backup link switchover is performed. Bidirectional Forwarding Detection (BFD) for IPv6 static routes can implement detection within milliseconds. However, BFD for IPv6 static routes requires that both ends of a link support BFD.</p>
<p>NQA for IPv6 static routes can monitor the link status of static routes as long as one end supports NQA.</p>
<p>If a link fails, an NQA test instance immediately detects the fault and instructs the routing management module to delete the IPv6 static route associated with the NQA test instance from the IPv6 routing table. Traffic is then forwarded over another link.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Currently, NQA test instances of only the ICMP or TCP type can be associated with static routes to implement fast fault detection.</p>
</div></div>
<p></p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365487__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring NQA for IPv6 static routes, configure parameters of the link layer protocol and IPv6 addresses for interfaces and ensure that the link layer protocol on the interfaces is up.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365487__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an NQA test instance of the ICMP or TCP type.</span><p><ol type="a"><li>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a><p>The system view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=nqa"><b><span class="cmdname">nqa</span></b></a> <strong><span>test-instance</span></strong> <i><span class="varname">admin-name</span></i> <i><span class="varname">test-name</span></i></p>
<p>An NQA test instance is created, and the test instance view is displayed.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Running the <a href="cmdqueryname=undo+nqa+all-test-instance"><b><span class="cmdname">undo nqa all-test-instance</span></b></a> command will delete the parameters of the NQA test instance bound to the static route. As a result, the static route status may change, and services may be interrupted.</p>
</div></div>
</li><li>Run <a href="cmdqueryname=test-type"><b><span class="cmdname">test-type</span></b></a> { <strong><span>icmp</span></strong> | <strong><span>tcp</span></strong> }<p>The type of the test instance is set to ICMP or TCP.</p>
</li><li><p>Run <a href="cmdqueryname=destination-address"><b><span class="cmdname">destination-address</span></b></a> <strong><span>ipv6</span></strong> <i><span class="varname">destAddress6</span></i></p>
<p>A destination address is configured.</p>
<p>In an NQA test instance, you can specify the destination end by running the <a href="cmdqueryname=destination-address"><b><span class="cmdname">destination-address</span></b></a> command to configure a destination address for the NQA test instance.</p>
</li><li><div class="p">Run any of the following commands to start an NQA test instance:<ul><li><a href="cmdqueryname=start"><b><span class="cmdname">start</span></b></a> <strong><span>at</span></strong> [ <i><span class="varname">yyyy/mm/dd</span></i> ] <i><span class="varname">hh:mm:ss</span></i> [ <strong><span>end</span></strong> { <strong><span>at</span></strong> [ <i><span class="varname">yyyy/mm/dd</span></i> ] <i><span class="varname">hh:mm:ss</span></i> | <strong><span>delay</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } | <strong><span>lifetime</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } } ]</li><li><a href="cmdqueryname=start"><b><span class="cmdname">start</span></b></a> <strong><span>delay</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } [ <strong><span>end</span></strong> { <strong><span>at</span></strong> [ <i><span class="varname">yyyy/mm/dd</span></i> ] <i><span class="varname">hh:mm:ss</span></i> | <strong><span>delay</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } | <strong><span>lifetime</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } } ]</li><li><a href="cmdqueryname=start"><b><span class="cmdname">start</span></b></a> <strong><span>now</span></strong><span> [ <strong><span>end</span></strong> { <strong><span>at</span></strong> [ <i><span class="varname">yyyy/mm/dd</span></i> ] <i><span class="varname">hh:mm:ss</span></i> | <strong><span>delay</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } | <strong><span>lifetime</span></strong> { <strong><span>seconds</span></strong> <i><span class="varname">second</span></i> | <i><span class="varname">hh:mm:ss</span></i> } } ]</span></li><li><a href="cmdqueryname=start"><b><span class="cmdname">start</span></b></a> <strong><span>daily</span></strong> <i><span class="varname">hh:mm:ss</span></i> <strong><span>to</span></strong> <i><span class="varname">hh:mm:ss</span></i> [ <strong><span>begin</span></strong> <span>{ </span><i><span class="varname">yyyy/mm/dd</span></i> <span>| <i><span class="varname">yyyy-mm-dd</span></i> } </span>] [ <strong><span>end</span></strong> <span>{ </span><i><span class="varname">yyyy/mm/dd</span></i> <span>| <i><span class="varname">yyyy-mm-dd</span></i> } </span>]</li></ul>
</div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For details of optional procedures when configuring an ICMP NQA test instance, see the <em><span class="keyword">HUAWEI NE40E-M2 series</span> <span class="keyword">Universal Service Router</span> Configuration Guide - System Monitor</em>.</p>
</div></div>
</li><li><p>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
<p>The configuration is committed.</p>
</li></ol>
</p></li><li><span>Associate an IPv6 static route with an NQA test instance.</span><p><ol type="a"><li>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a><p>The system view is displayed.</p>
</li><li><p>Run either of the following commands as required to associate an IPv6 static route with an NQA test instance:</p>
<ul><li>To associate an IPv6 static route with an NQA test instance on the public network, run the <a href="cmdqueryname=ipv6+route-static"><b><span class="cmdname">ipv6 route-static</span></b></a> <i><span class="varname">dest-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <i><span class="varname">nexthop-ipv6-address</span></i> ] | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-destination-name</span></i> <i><span class="varname">nexthop-ipv6-address</span></i> | <i><span class="varname">nexthop-ipv6-address</span></i> } [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <sup>*</sup> <strong><span>track nqa</span></strong> <i><span class="varname">admin-name</span></i> <i><span class="varname">test-name</span></i> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ] command.</li><li>To associate an IPv6 static route with an NQA test instance in a VPN instance, run the <a href="cmdqueryname=ipv6+route-static+vpn-instance"><b><span class="cmdname">ipv6 route-static vpn-instance</span></b></a> <i><span class="varname">vpn-source-name</span></i> <i><span class="varname">dest-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <i><span class="varname">nexthop-ipv6-address</span></i> ] | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-destination-name</span></i> <i><span class="varname">nexthop-ipv6-address</span></i> | <i><span class="varname">nexthop-ipv6-address</span></i> [ <strong><span>public</span></strong> ] } [ <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ]<sup>*</sup> <strong><span>track nqa</span></strong> <i><span class="varname">admin-name</span></i> <i><span class="varname">test-name</span></i> [ <strong><span>description</span></strong> <i><span class="varname">text</span></i> ] command.</li></ul>
</li><li>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a><p>The configuration is committed.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">Precautions for associating a static route with an NQA test instance are as follows:<ul><li>The destination address of an NQA test instance cannot be the destination address of an associated static route.</li><li>If the static route associated with one NQA test instance is associated with another NQA test instance, the association between the static route and the original NQA test instance is deleted.</li><li>An NQA test instance must have been created before you associate it with a static route.</li></ul>
</div>
</div></div>
</li></ol>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172365487__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After the configuration is complete, verify it.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+current-configuration"><b><span class="cmdname">display current-configuration</span></b></a> <strong><span>|</span></strong> <strong><span>include</span></strong> <strong><span>nqa</span></strong> command to check the configurations of NQA for IPv6 static routes.</p>
</li><li><p>Run the <a href="cmdqueryname=display+nqa+results"><b><span class="cmdname">display nqa results</span></b></a> [ <strong><span>test-instance</span></strong> <i><span class="varname">admin-name</span></i> <i><span class="varname">test-name</span></i> ] command to check the NQA test results.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The NQA test results cannot be displayed automatically. You need to run the <a href="cmdqueryname=display+nqa+results"><b><span class="cmdname">display nqa results</span></b></a> command to view the results. </p>
</div></div>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0051.html">Configuring IPv6 Static Route Detection
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0028.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0076.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>