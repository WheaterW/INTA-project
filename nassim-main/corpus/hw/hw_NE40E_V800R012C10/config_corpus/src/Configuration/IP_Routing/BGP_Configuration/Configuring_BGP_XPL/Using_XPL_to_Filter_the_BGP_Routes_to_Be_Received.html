
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Using XPL to Filter the BGP Routes to Be Received">
<meta name="abstract" content="A BGP device can use a route-filter to filter the routes to be received and modify route attributes to control the network traffic forwarding path.">
<meta name="description" content="A BGP device can use a route-filter to filter the routes to be received and modify route attributes to control the network traffic forwarding path.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3111.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3101.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,bgpvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366190">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Using XPL to Filter the BGP Routes to Be Received</title>
</head>
<body><a name="EN-US_TASK_0172366190"></a><a name="EN-US_TASK_0172366190"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Using XPL to Filter the BGP Routes to Be Received</h1>
<div class="taskbody"><p>A BGP device can use a route-filter to filter the routes to be received and modify route attributes to control the network traffic forwarding path.</p>
<div class="context"><a name="EN-US_TASK_0172366190__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>BGP is used to transmit routing information between ASs, and route advertisement directly affects traffic forwarding.</p>
<p>A BGP device may receive multiple routes to the same destination network from different peers. To control the network traffic forwarding path, filter the routes to be received.</p>
<p>In addition, a BGP device may receive a large number of routes during an attack, which may consume lots of device resources. Regardless of whether malicious attacks or incorrect configurations result in the reception of numerous BGP routes, the administrator must limit the device resources to be consumed based on the network planning and device capacity.</p>
<p>You can use XPL route-filters to control the BGP routes to be received from all peers or peer groups or from a specified peer or peer group.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366190__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before using XPL to filter the BGP routes to be received, <a href="dc_vrp_bgp_cfg_3004.html">configure basic BGP functions</a>.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172366190__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure BGP to filter the routes to be received globally.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>BGP acceptance policies take effect in the following sequence:</p>
<ol><li>Globally received routes:<ul><li>Basic ACL-based acceptance policy configured using the <a href="cmdqueryname=filter-policy+acl-name+import"><b><span class="cmdname">filter-policy</span></b></a> { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } <strong><span>import</span></strong> command</li><li>IP prefix list-based acceptance policy configured using the <a href="cmdqueryname=filter-policy+ip-prefix+import"><b><span class="cmdname">filter-policy</span></b></a> <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> <strong><span>import</span></strong> command</li><li>XPL-based acceptance policy configured using the <a href="cmdqueryname=route-filter+import"><b><span class="cmdname">route-filter</span></b></a> <i><span class="varname">route-filter-name</span></i> <strong><span>import</span></strong> command</li></ul>
</li><li>XPL-based policy for accepting routes from a specified peer or peer group, configured using the <a href="cmdqueryname=peer+route-filter+import"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv4-address</span></i> } <strong><span>route-filter</span></strong> <i><span class="varname">route-filter-name</span></i> <strong><span>import</span></strong> command</li></ol>
</div></div>
</p><p><p>Perform the following steps on the BGP device:</p>
</p><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span></span><p><p>The IPv4 unicast address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=route-filter+import"><b><span class="cmdname">route-filter</span></b></a> <i><span class="varname">route-filter-name</span></i> <strong><span>import</span></strong></span></span><p><p>The device is configured to filter the routes to be received.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure BGP to filter the routes to be received from a specified peer or peer group.</span><p><p>Perform the following steps on the BGP device:</p>
</p><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span></span><p><p>The IPv4 unicast address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=peer+route-filter+import"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv4-address</span></i> } <strong><span>route-filter</span></strong> <i><span class="varname">route-filter-name</span></i> <strong><span>import</span></strong></span></span><p><p>The device is configured to filter the routes to be received from the specified peer or peer group.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0172366190__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring BGP to control route acceptance, check the configuration.</p>
<ul><li>Run the <a href="cmdqueryname=display+xpl+route-filter+state+attached+unattached"><b><span class="cmdname">display xpl</span></b></a> <strong><span>route-filter</span></strong> <strong><span>state</span></strong> [ <strong><span>attached</span></strong> | <strong><span>unattached</span></strong> ] command to check information about the configured route-filter.</li><li>Run the <a href="cmdqueryname=display+bgp+routing-table+peer+received-routes+statistics"><b><span class="cmdname">display bgp routing-table</span></b></a> [ <strong><span>peer</span></strong> <i><span class="varname">ipv4-address</span></i> <strong><span>received-routes</span></strong> [ <strong><span>statistics</span></strong> ] ] command to check the routes in the BGP routing table.</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3111.html">Configuring BGP XPL
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3101.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>