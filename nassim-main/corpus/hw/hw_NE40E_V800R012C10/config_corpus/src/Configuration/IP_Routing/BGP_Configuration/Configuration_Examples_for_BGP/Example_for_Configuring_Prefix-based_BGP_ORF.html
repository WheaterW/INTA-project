
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Prefix-based BGP ORF">
<meta name="abstract" content="Prefix-based BGP ORF is used to implement on-demand BGP route advertisement.">
<meta name="description" content="Prefix-based BGP ORF is used to implement on-demand BGP route advertisement.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3070.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4077.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3079.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,bgpvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366382">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Prefix-based BGP ORF</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366382"></a><a name="EN-US_TASK_0172366382"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Prefix-based BGP ORF</h1>
<div class="taskbody"><p>Prefix-based BGP ORF is used to implement on-demand BGP route advertisement. </p>
<div class="context"><a name="EN-US_TASK_0172366382__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172366382__fig_dc_vrp_bgp_cfg_407801">Figure 1</a>, <span class="keyword">Device</span>s A and B are in AS 100. <span class="keyword">Device</span>s C, D, and E are in AS 200. <span class="keyword">Device</span> A requires <span class="keyword">Device</span> C to send only routing information matching the import policy of <span class="keyword">Device</span> A, but <span class="keyword">Device</span> C does not want to maintain a separate export policy for <span class="keyword">Device</span> A. Prefix-based BGP ORF can be configured in such a situation. </p>
<div class="fignone" id="EN-US_TASK_0172366382__fig_dc_vrp_bgp_cfg_407801"><a name="EN-US_TASK_0172366382__fig_dc_vrp_bgp_cfg_407801"></a><a name="fig_dc_vrp_bgp_cfg_407801"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for configuring prefix-based BGP ORF</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 through 3 in this example are GE <span>0/1/0</span>, GE <span>0/2/0</span>, GE <span>0/3/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_bgp_cfg_407801.png"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366382__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>To improve security, you are advised to deploy BGP security measures. For details, see "Configuring BGP Security." Keychain authentication is used as an example. For details, see "Example for Configuring BGP Keychain."</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366382__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Establish an EBGP peer relationship between <span class="keyword">Device</span>s A and C, and establish IBGP peer relationships between <span class="keyword">Device</span>s A and B, between <span class="keyword">Device</span>s C and D, and between <span class="keyword">Device</span>s C and E.</p>
</li><li><p>Configure a prefix-based import policy on <span class="keyword">Device</span> A, and enable prefix-based BGP ORF on <span class="keyword">Device</span>s A and C.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366382__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Router IDs 1.1.1.1 and 2.2.2.2 and AS number 100 of <span class="keyword">Device</span>s A and B respectively</p>
</li><li><p>Router IDs 3.3.3.3, 4.4.4.4, and 5.5.5.5 and AS number 200 of <span class="keyword">Device</span>s C, D, and E respectively</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366382__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address for each interface.</span><p><p>Configure an IP address for each interface, as shown in <a href="#EN-US_TASK_0172366382__fig_dc_vrp_bgp_cfg_407801">Figure 1</a>. For details on configuration procedures, see corresponding configuration files.</p>
</p></li><li><span>Establish BGP peer relationships.</span><p><p># Configure <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp] <strong>router-id 1.1.1.1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp] <strong>peer 10.2.1.1 as-number 100</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp] <strong>peer 10.1.1.2 as-number 200</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp] <strong>ipv4-family unicast</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp-af-ipv4] <strong>import-route direct</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-bgp] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp] <strong>router-id 2.2.2.2</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp] <strong>peer 10.2.1.2 as-number 100</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>B-bgp] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-bgp] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>bgp 200</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>router-id 3.3.3.3</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>peer 10.1.1.1 as-number 100</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>peer 10.3.1.1 as-number 200</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>peer 10.4.1.1 as-number 200</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>ipv4-family unicast</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp-af-ipv4] <strong>import-route direct</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp-af-ipv4] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-bgp] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>bgp 200</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>D-bgp] <strong>router-id 4.4.4.4</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>D-bgp] <strong>peer 10.3.1.2 as-number 200</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>D-bgp] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-bgp] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> E.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E] <strong>bgp 200</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>E-bgp] <strong>router-id 5.5.5.5</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>E-bgp] <strong>peer 10.4.1.2 as-number 200</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>E-bgp] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E-bgp] <strong>quit</strong></pre>
</p></li><li><span>Configure a prefix-based import policy on <span class="keyword">Device</span> A.</span><p><p># Configure <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ip ip-prefix 1 index 10 permit 10.3.1.0 24 greater-equal 24 less-equal 32</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp] <strong>peer 10.1.1.2 ip-prefix 1 import</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-bgp] <strong>quit</strong></pre>
<p># View routing information sent by <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>display bgp routing-table peer 10.1.1.1 advertised-routes</strong>

 BGP Local router ID is 3.3.3.3
 Status codes: * - valid, &gt; - best, d - damped,<span> x - best external,</span><span> a - add path,</span>
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
<span> RPKI validation codes: V - valid, I - invalid, N - not-found</span>


 Total Number of Routes: 7
      Network            NextHop        MED        LocPrf    PrefVal Path/Ogn

 *&gt;   3.3.3.3/32         10.1.1.2        0                     0      200?
 *&gt;   10.1.1.0/30        10.1.1.2        0                     0      200?
 *&gt;   10.1.1.1/32        10.1.1.2        0                     0      200?
 *&gt;   10.3.1.0/30        10.1.1.2        0                     0      200?
 *&gt;   10.3.1.1/32        10.1.1.2        0                     0      200?
 *&gt;   10.4.1.0/30        10.1.1.2        0                     0      200?
 *&gt;   10.4.1.1/32        10.1.1.2        0                     0      200?</pre>
<p># View routing information accepted by <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display bgp routing-table peer 10.1.1.2 received-routes</strong>

 BGP Local router ID is 1.1.1.1
 Status codes: * - valid, &gt; - best, d - damped,<span> x - best external,</span><span> a - add path,</span>
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
<span> RPKI validation codes: V - valid, I - invalid, N - not-found</span>


 Total Number of Routes: 2
      Network            NextHop        MED        LocPrf    PrefVal Path/Ogn

 *&gt;   10.3.1.0/30        10.1.1.2        0                     0      200?
 *&gt;   10.3.1.1/32        10.1.1.2        0                     0      200?</pre>
<p>When prefix-based BGP ORF is not enabled, <span class="keyword">Device</span> C sends seven routes, but <span class="keyword">Device</span> A accepts only two routes because <span class="keyword">Device</span> A applies the prefix-based import policy to the seven routes.</p>
</p></li><li><span>Enable prefix-based BGP ORF.</span><p><p># Enable prefix-based BGP ORF on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>bgp 100</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp] <strong>peer 10.1.1.2 capability-advertise orf ip-prefix both</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-bgp] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-bgp] <strong>quit</strong></pre>
<p># Enable prefix-based BGP ORF on <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>bgp 200</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>peer 10.1.1.1 capability-advertise orf ip-prefix both</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>C-bgp] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-bgp] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># View prefix-based BGP ORF negotiation information on <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display bgp peer 10.1.1.2 verbose</strong>
                                                                                
         BGP Peer is 10.1.1.2,  remote AS 200                                   
         Type: EBGP link                                                        
         BGP version 4, Remote router ID 3.3.3.3                                
         Update-group ID: 1                                                     
         BGP current state: Established, Up for 00h00m01s                       
         BGP current event: RecvRouteRefresh                                    
         BGP last state: OpenConfirm                                            
         BGP Peer Up count: 2                                                   
         Received total routes: 0                                               
         Received active routes total: 0                                        
         Advertised total routes: 5                                             
         Port:  Local - 179      Remote - 54545                                 
         Configured: Active Hold Time: 180 sec   Keepalive Time:60 sec          
         Received  : Active Hold Time: 180 sec                                  
         Negotiated: Active Hold Time: 180 sec   Keepalive Time:60 sec          
         Peer optional capabilities:                                            
         Peer supports bgp multi-protocol extension                             
         Peer supports bgp route refresh capability                             
         Peer supports bgp outbound route filter capability                     
         <strong>Support Address-Prefix: IPv4-UNC address-family, rfc-compatible, both</strong>  
         Peer supports bgp 4-byte-as capability                                 
         Address family IPv4 Unicast: advertised and received                   
 Received: Total 3 messages                                                     
                  Update messages                1                              
                  Open messages                  1                              
                  KeepAlive messages             1                              
                  Notification messages          0                              
                  Refresh messages               1                              
 Sent: Total 9 messages                                                         
                  Update messages                5                              
                  Open messages                  2                              
                  KeepAlive messages             1                              
                  Notification messages          0                              
                  Refresh messages               1                              
 Authentication type configured: None                                           
 Last keepalive received: 2012-03-06 19:17:37 UTC-8:00
 Last keepalive sent    : 2012-03-06 19:17:37 UTC-8:00
 Last update    received: 2012-03-06 19:17:43 UTC-8:00
 Last update    sent    : 2012-03-06 19:17:37 UTC-8:00                         
 Minimum route advertisement interval is 30 seconds                             
 Optional capabilities:                                                         
 Route refresh capability has been enabled                                      
 Outbound route filter capability has been enabled                              
 <strong>Enable Address-Prefix: IPv4-UNC address-family, rfc-compatible, both</strong>           
 4-byte-as capability has been enabled                                          
 Multi-hop ebgp has been enabled                                                
 Peer Preferred Value: 0                                                        
 Routing policy configured:                                                     
 No import update filter list                                                   
 No export update filter list                                                   
 Import prefix list is: 1                                                       
 No export prefix list                                                          
 No import route policy                                                         
 No export route policy                                                         
 No import distribute policy                                                    
 No export distribute policy  </pre>
<p># View routing information sent by <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>display bgp routing-table peer 10.1.1.1 advertised-routes</strong>

 BGP Local router ID is 3.3.3.3
 Status codes: * - valid, &gt; - best, d - damped,<span> x - best external,</span><span> a - add path,</span>
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
<span> RPKI validation codes: V - valid, I - invalid, N - not-found</span>


 Total Number of Routes: 2
      Network            NextHop        MED        LocPrf    PrefVal Path/Ogn

 *&gt;   10.3.1.0/30        10.1.1.2        0                     0      200?
 *&gt;   10.3.1.1/32        10.1.1.2        0                     0      200?</pre>
<p># View routing information accepted by <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display bgp routing-table peer 10.1.1.2 received-routes</strong>

 BGP Local router ID is 1.1.1.1
 Status codes: * - valid, &gt; - best, d - damped,<span> x - best external,</span><span> a - add path,</span>
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
<span> RPKI validation codes: V - valid, I - invalid, N - not-found</span>


 Total Number of Routes: 2
      Network            NextHop        MED        LocPrf    PrefVal Path/Ogn

 *&gt;   10.3.1.0/30        10.1.1.2        0                     0      200?
 *&gt;   10.3.1.1/32        10.1.1.2        0                     0      200?</pre>
<p>After BGP ORF is enabled, <span class="keyword">Device</span> C sends only two routes based on the prefix-based import policy provided by <span class="keyword">Device</span> A, and <span class="keyword">Device</span> A accepts only the two routes.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172366382__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#                                                                               
sysname <span class="keyword">Device</span>A                                                                
#                                                                               
interface GigabitEthernet<span>0/2/0</span>                                                              
 ip address 10.2.1.2 255.255.255.252                                            
#                                                                               
interface GigabitEthernet<span>0/1/0</span>                                                                                              
 ip address 10.1.1.1 255.255.255.252                                            
#                                                                               
interface LoopBack1                                                             
 ip address 1.1.1.1 255.255.255.255                                             
#                                                                               
bgp 100                                                                         
 router-id 1.1.1.1                                                              
 peer 10.1.1.2 as-number 200                                                    
 peer 10.2.1.1 as-number 100                                                    
 #                                                                              
 ipv4-family unicast                                                            
<span>  undo synchronization</span>                                                          
  import-route direct                                                           
  peer 10.1.1.2 enable                                                          
  peer 10.1.1.2 ip-prefix 1 import                                              
  peer 10.1.1.2 capability-advertise orf ip-prefix both                         
  peer 10.2.1.1 enable                                                          
#                                                                               
 ip ip-prefix 1 index 10 permit 10.3.1.0 24 greater-equal 24 less-equal 32      
#                                                                               
return                                                                          </pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#                                                                               
sysname <span class="keyword">Device</span>B                                                                
#                                                                               
interface GigabitEthernet<span>0/1/0</span>                                                                                              
 ip address 10.2.1.1 255.255.255.252                                            
#                                                                               
interface LoopBack1                                                             
 ip address 2.2.2.2 255.255.255.255                                             
#                                                                               
bgp 100                                                                         
 router-id 2.2.2.2                                                              
 peer 10.2.1.2 as-number 100                                                    
 #                                                                              
 ipv4-family unicast                                                            
<span>  undo synchronization</span>                                                        
  peer 10.2.1.2 enable                                                          
#                                                                               
return                                                                          </pre>
</li><li><p><span class="keyword">Device</span>C configuration file</p>
<pre class="screen">#                                                                               
sysname <span class="keyword">Device</span>C                                                                
#                                                                               
interface GigabitEthernet<span>0/2/0</span>                                                              
 ip address 10.3.1.2 255.255.255.252                                            
#                                                                               
interface GigabitEthernet<span>0/1/0</span>                                                              
 ip address 10.1.1.2 255.255.255.252                                            
#                                                                               
interface GigabitEthernet<span>0/3/0</span>                                                              
 ip address 10.4.1.2 255.255.255.252                                            
#                                                                               
interface LoopBack1                                                             
 ip address 3.3.3.3 255.255.255.255                                             
#                                                                               
bgp 200                                                                         
 router-id 3.3.3.3                                                              
 peer 10.1.1.1 as-number 100                                                    
 peer 10.3.1.1 as-number 200                                                    
 peer 10.4.1.1 as-number 200                                                    
 #                                                                              
 ipv4-family unicast
<span>  undo synchronization</span>                                                                                                                      
  import-route direct                                                           
  peer 10.1.1.1 enable                                                          
  peer 10.1.1.1 capability-advertise orf ip-prefix both                         
  peer 10.3.1.1 enable                                                          
  peer 10.4.1.1 enable                                                          
#                                                                               
return                                                                          </pre>
</li><li><p><span class="keyword">Device</span>D configuration file</p>
<pre class="screen">#                                                                               
sysname <span class="keyword">Device</span>D                                                                
#                                                                               
interface GigabitEthernet<span>0/1/0</span>                                                              
 ip address 10.3.1.1 255.255.255.252                                            
#                                                                               
interface LoopBack1                                                             
 ip address 4.4.4.4 255.255.255.255                                             
#                                                                               
bgp 200                                                                         
 router-id 4.4.4.4                                                              
 peer 10.3.1.2 as-number 200                                                    
 #                                                                              
 ipv4-family unicast
<span>  undo synchronization</span>                                                                                                                      
  peer 10.3.1.2 enable                                                          
#                                                                               
return                                                                          </pre>
</li><li><p><span class="keyword">Device</span>E configuration file</p>
<pre class="screen">#                                                                               
sysname <span class="keyword">Device</span>E                                                                
#                                                                               
interface GigabitEthernet<span>0/1/1</span>                                                              
 ip address 10.4.1.1 255.255.255.252                                            
#                                                                               
interface LoopBack1                                                             
 ip address 5.5.5.5 255.255.255.255                                             
#                                                                               
bgp 200                                                                         
 router-id 5.5.5.5                                                              
 peer 10.4.1.2 as-number 200                                                    
 #                                                                              
 ipv4-family unicast                                                            
<span>  undo synchronization</span>                                                          
  peer 10.4.1.2 enable                                                          
#                                                                               
return                                                                          </pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3070.html">Configuration Examples for BGP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4077.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3079.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>