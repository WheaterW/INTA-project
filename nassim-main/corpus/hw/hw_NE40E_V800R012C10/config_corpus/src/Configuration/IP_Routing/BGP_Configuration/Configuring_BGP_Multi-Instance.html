
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP Multi-Instance">
<meta name="abstract" content="You can configure BGP multi-instance to achieve separate route management and maintenance.">
<meta name="description" content="You can configure BGP multi-instance to achieve separate route management and maintenance.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3087.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3067.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0181038814">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP Multi-Instance</title>
</head>
<body><a name="EN-US_TASK_0181038814"></a><a name="EN-US_TASK_0181038814"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP Multi-Instance</h1>
<div class="taskbody"><p>You can configure BGP multi-instance to achieve separate route management and maintenance.</p>
<div class="context"><a name="EN-US_TASK_0181038814__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>By default, all BGP routes are stored in the BGP base instance, and separate route management and maintenance are impossible. To address this problem, BGP multi-instance is introduced. A device can simultaneously run the BGP base instance and BGP multi-instance, which are independent of each other and can have either the same AS number or different AS numbers. You can deploy different address families for the BGP base instance and BGP multi-instance as required to implement separate route management and maintenance.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0181038814__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0181038814__en-us_task_0172369253_cmdname1527422627214049">ip vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0181038814__en-us_task_0172369253_varname434476869214049">vpn-instance-name</span></i> command to create a VPN instance and enter its view.</span></li><li><span>Run the <a href="cmdqueryname=ipv4-family"><b><span class="cmdname" id="EN-US_TASK_0181038814__en-us_task_0172369253_cmdname1443863054214049">ipv4-family</span></b></a> command to enable the VPN instance IPv4 address family and enter its view.</span></li><li><span>Run the <a href="cmdqueryname=route-distinguisher"><b><span class="cmdname" id="EN-US_TASK_0181038814__en-us_task_0172369253_cmdname1760621200214049">route-distinguisher</span></b></a> <i><span class="varname" id="EN-US_TASK_0181038814__en-us_task_0172369253_varname191997997214049">route-distinguisher</span></i> command to configure an RD for the VPN instance IPv4 address family.</span></li><li><span>Run the <a href="cmdqueryname=vpn-target"><b><span class="cmdname" id="EN-US_TASK_0181038814__en-us_task_0172369253_cmdname1521053128214049">vpn-target</span></b></a> <i><span class="varname" id="EN-US_TASK_0181038814__en-us_task_0172369253_varname1842977158214049">vpn-target</span></i> &amp;&lt;1-8&gt; [ <strong><span id="EN-US_TASK_0181038814__en-us_task_0172369253_cmdparmname1203555322214049">both</span></strong> | <strong><span id="EN-US_TASK_0181038814__en-us_task_0172369253_cmdparmname1845455024214049">export-extcommunity</span></strong> | <strong><span id="EN-US_TASK_0181038814__en-us_task_0172369253_cmdparmname12804966214049">import-extcommunity</span></strong> ] command to configure VPN targets for the VPN instance IPv4 address family. </span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to enter the VPN instance view.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=bgp+instance"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i> <strong><span>instance</span></strong> <i><span class="varname">instance-name</span></i> command to enter the BGP multi-instance view.</span></li><li><span>(Optional) Run the <strong><span>ipv4-family vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> command to enter the BGP multi-instance VPN instance IPv4 address family view.</span></li><li><span>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <a href="cmdqueryname=as-number"><b><span class="cmdname">as-number</span></b></a> <i><span class="varname">as-number</span></i> command to specify the IP address of a peer and the number of the AS where the peer resides.</span><p><p>The IP address of the peer can be one of the following types:</p>
<ul><li><p>IP address of the peer's interface that is directly connected to the local device</p>
</li><li><p>IP address of a sub-interface on the peer's interface that is directly connected to the local device</p>
</li><li><p>IP address of a reachable loopback interface on the peer</p>
</li></ul>
</p></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3000.html">BGP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3087.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3067.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>