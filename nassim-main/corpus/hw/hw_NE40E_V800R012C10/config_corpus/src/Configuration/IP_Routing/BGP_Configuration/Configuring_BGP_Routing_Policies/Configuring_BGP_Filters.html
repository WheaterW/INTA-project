
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP Filters">
<meta name="abstract" content="BGP filters can be used to flexibly filter routes to be advertised.">
<meta name="description" content="BGP filters can be used to flexibly filter routes to be advertised.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3112.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3114.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001398457589">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring BGP Filters</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001398457589"></a><a name="EN-US_TASK_0000001398457589"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP Filters</h1>
<div class="taskbody"><p>BGP filters can be used to flexibly filter routes to be advertised.</p>
<div class="context"><a name="EN-US_TASK_0000001398457589__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">BGP uses the following types of filters:<ul><li><a href="#EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301901">Access Control List (ACL)</a></li><li><a href="#EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301902">IP prefix list</a></li><li><a href="#EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301903">AS_Path</a></li><li><a href="#EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301904">Community</a></li><li><a href="#EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301907">Large-community</a></li><li><a href="#EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301905">Extended community</a></li><li><a href="#EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301906">Route-policy</a></li><li><a href="#EN-US_TASK_0000001398457589__step123810234257">IP address list</a></li></ul>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001398457589__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li id="EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301901"><span id="EN-US_TASK_0000001398457589__">Configure an ACL.</span><p><p>An ACL is a series of sequential rules composed of permit and deny clauses. These rules specify source addresses, destination addresses, port numbers, and other information of data packets. ACL rules are used to classify data packets, and after the rules are applied to an interface on the <span class="keyword">Router</span>, the <span class="keyword">Router</span> uses the rules to permit or deny data packets.</p>
<p>For details on ACL configurations, see <span class="keyword">HUAWEI NE40E-M2 series</span><span class="keyword">Universal Service Router</span> Configuration Guide - IP Services.</p>
<p>An ACL can be used as a matching condition of a route-policy or directly used in the following commands:</p>
<ul><li><a href="cmdqueryname=filter-policy+acl-name+export+direct+isis+ospf+rip+static"><b><span class="cmdname">filter-policy</span></b></a> { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } <strong><span>export</span></strong> [ <strong><span>direct</span></strong> | <strong><span>isis</span></strong> <i><span class="varname">process-id</span></i> | <strong><span>ospf</span></strong> <i><span class="varname">process-id</span></i><span> | <strong><span>rip</span></strong> <i><span class="varname">process-id</span></i></span> | <strong><span>static</span></strong> ]</li><li><a href="cmdqueryname=peer+filter-policy"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv4-address</span></i> } <a href="cmdqueryname=peer+filter-policy"><b><span class="cmdname">filter-policy</span></b></a> { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } <strong><span>export</span></strong></li></ul>
</p></li><li id="EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301902"><span id="EN-US_TASK_0000001398457589__">Configure an IP prefix list.</span><p><p>An IP prefix list is a type of filter used to filter routes based on destination addresses, and is identified by its name. An IP prefix list can be used flexibly to implement precise filtering. For example, it can be used to filter one route or routes to a network segment. If a large number of routes with different prefixes need to be filtered, configuring an IP prefix list to filter the routes is very complex.</p>
<p>An IP prefix list can be used as a matching condition of a route-policy or directly used in the following commands:</p>
<ul><li><a href="cmdqueryname=filter-policy+ip-prefix+export+direct+isis+ospf+rip+static"><b><span class="cmdname">filter-policy</span></b></a> <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> <strong><span>export</span></strong> [ <strong><span>direct</span></strong> | <strong><span>isis</span></strong> <i><span class="varname">process-id</span></i> | <strong><span>ospf</span></strong> <i><span class="varname">process-id</span></i><span> | <strong><span>rip</span></strong> <i><span class="varname">process-id</span></i></span> | <strong><span>static</span></strong> ]</li><li><a href="cmdqueryname=peer+ip-prefix"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv4-address</span></i> } <a href="cmdqueryname=peer+ip-prefix"><b><span class="cmdname">ip-prefix</span></b></a> <i><span class="varname">ip-prefix-name</span></i> <strong><span>export</span></strong></li></ul>
</p><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ip+ip-prefix+index+match-network+greater-equal+less-equal"><b><span class="cmdname">ip ip-prefix </span></b></a><i><span class="varname">ip-prefix-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] <i><span class="varname">matchMode</span></i> <i><span class="varname">ipv4-address</span></i> <i><span class="varname">masklen</span></i> [ <strong><span>match-network</span></strong> ] [ <strong><span>greater-equal</span></strong> <i><span class="varname">greater-equal-value</span></i> ] [ <strong><span>less-equal</span></strong> <i><span class="varname">less-equal-value</span></i> ] command to configure an IPv4 prefix list.</span><p><p>The mask length range can be expressed as <i><span class="varname">mask-length</span></i> &lt;= <i><span class="varname">greater-equal-value</span></i> &lt;= <i><span class="varname">less-equal-value</span></i> &lt;= 32. If only <strong><span>greater-equal</span></strong> is specified, the prefix range is [<i><span class="varname">greater-equal-value</span></i>, 32]. If only <strong><span>less-equal</span></strong> is specified, the prefix range is [<i><span class="varname">mask-length</span></i>, <i><span class="varname">less-equal-value</span></i>].</p>
<p>An IPv4 prefix list is identified by its name, and each list contains one or multiple entries. Each entry is identified by an index, and can uniquely specify a matching range in the form of a network prefix. An IPv4 prefix list named <strong>abcd</strong> is used as an example.</p>
<pre class="screen">#</pre>
<pre class="screen">ip ip-prefix abcd index 10 permit 1.0.0.0 8</pre>
<pre class="screen">ip ip-prefix abcd index 20 permit 10.0.0.0 8</pre>
<p>During route matching, the system checks the entries identified by indexes in ascending order. If a route matches an entry, it is no longer matched against the next entry.</p>
<p>The IP prefix list on the <span class="keyword">NE40E</span> denies all unmatched routes by default. If all entries are in <strong><span>deny</span></strong> mode, all routes will be denied by the IP prefix list. In this case, after multiple entries are specified in <strong><span>deny</span></strong> mode, define an entry <strong>permit 0.0.0.0 0 less-equal 32</strong> to permit all the other IPv4 routes.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If more than one entry is defined in a prefix list, at least one of them must be set to <strong>permit</strong> mode.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li id="EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301903"><span id="EN-US_TASK_0000001398457589__">Configure an AS_Path filter.</span><p><p>An AS_Path filter is used to filter BGP routes based on the AS_Path attributes they carry. If you do not want traffic to traverse some ASs, you can configure an AS_Path filter to filter out the routes whose AS_Path attributes contain the corresponding AS numbers. In addition, configuring an ACL or an IP prefix list to filter BGP routes may be complicated (as multiple ACLs or IP prefix lists need to be defined) and complicate maintenance of new routes. In this case, you can configure an AS_Path filter.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If AS_Path information is lost after route summarization, an AS_Path filter can no longer filter summary routes. However, it can still filter specific routes, which carry AS_Path information.</p>
</div></div>
<p>An AS_Path filter can be used as a filtering condition of a route-policy or be directly used in the <a href="cmdqueryname=peer+as-path-filter"><b><span class="cmdname">peer as-path-filter</span></b></a> command.</p>
</p><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ip+as-path-filter+index"><b><span class="cmdname">ip as-path-filter</span></b></a> { <i><span class="varname">as-path-filter-number</span></i> | <i><span class="varname">as-path-filter-name</span></i> } <span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span><em><i><span class="varname"> matchMode</span></i></em> <i><span class="varname">regular-expression</span></i> command to configure an AS_Path filter.</span><p><p>AS_Path filters use regular expressions to define matching rules. A regular expression consists of metacharacters and values. For details, see <a href="#EN-US_TASK_0000001398457589__tab_dc_vrp_bgp_cfg_301901">Table 1</a>.</p>
<ul><li><p>Metacharacter: defines matching rules.</p>
</li><li><p>Value: defines a matching object.</p>
</li></ul>

<div class="tableBorder"><a name="EN-US_TASK_0000001398457589__tab_dc_vrp_bgp_cfg_301901"></a><a name="tab_dc_vrp_bgp_cfg_301901"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0000001398457589__tab_dc_vrp_bgp_cfg_301901" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Description of metacharacters</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="22.82%" id="mcps1.4.2.3.3.2.2.3.2.4.1.1" liSelected="liSelected"><p>Metacharacter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="32.98%" id="mcps1.4.2.3.3.2.2.3.2.4.1.2" liSelected="liSelected"><p>Function</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="44.2%" id="mcps1.4.2.3.3.2.2.3.2.4.1.3" liSelected="liSelected"><p>Example</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>.</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Matches any single character.</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><p>.* matches any string in an AS_Path and is used to match all routes.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>^</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Indicates the beginning of a matched string.</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><p>^65 matches strings beginning with 65.</p>
<ul><li>Examples of matched strings: 65, 651, 6501, and 65001</li><li>Examples of unmatched strings: 165, 1650, 6650, and 60065</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>$</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Indicates the end of a matched string.</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><p>65$ matches strings ending with 65.</p>
<ul><li>Examples of matched strings: 65, 165, 1065, 10065, and 60065</li><li>Examples of unmatched strings: 651, 1650, 6650, 60650, and 65001</li></ul>
<p>^65$ matches AS_Path 65.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>^$ matches an empty string (empty AS_Path) and is usually used to match routes in the local AS.</p>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>_</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Matches a sign, such as a comma (,), left brace ({), right brace (}), left parenthesis ((), right parenthesis ()), and space. In addition, it can be used at the beginning of a regular expression with the same function as the caret sign (^) or at the end of a regular expression with the same function as the dollar sign ($).</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><ul><li>^65001_ matches the AS_Paths that begin with 65001 followed by a sign. Specifically, ^65001_ matches AS_Paths with 65001 as the leftmost AS number (the number of the last AS through which a route passes), that is, the routes sent by peers in AS 65001.</li><li>_65001_ matches the strings (AS_Paths) that contain 65001, that is, the routes that pass through AS 65001.</li><li>_65001$ matches the AS_Paths that end with a sign followed by 65001. Specifically, _65001$ matches AS_Paths with 65001 as the rightmost AS number (the number of the first AS through which a route passes), that is, the routes that originate in AS 65001.</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>\</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Defines an escape character, which is used to mark the next character (common or special) as a common character.</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><p>An AS_Confed_Sequence contains parentheses. The parentheses in regular expressions provide special functions. To match such special characters by removing their special meanings, you can use the backslash (\). For example:</p>
<ul><li>\(65002_ matches the AS_Confed_Sequences that begin with (65002 followed by a sign. Specifically, \(65002_ matches AS_Confed_Sequences with 65002 as the leftmost AS number (the number of the last AS through which a route passes), that is, the routes sent by peers in AS 65002.</li><li>\(.*_65003_.*\) matches the AS_Confed_Sequence that contains AS number 65003, that is, the routes that pass through AS 65003 in a confederation.</li><li>_65004\) matches a character string that ends with 65004) and is preceded by a sign. Specifically, _65004\) matches AS_Confed_Sequences with the rightmost AS number (origin AS number), that is, the routes originating in AS 65004 in a confederation and the routes directly advertised by AS 65004 in the confederation. _65004\) provides the same function as 65004\).</li></ul>
<p>Similarly, backslashes (\) can be used to remove the special meanings of the left bracket ([) and right bracket (]) used in an AS_Confed_Set and the left brace ({) and right brace (}) used in an AS_Set.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>*</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Matches the strings in which the preceding character occurs zero or multiple times.</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><p>65* matches the AS_Paths that begin with 6 and contain zero or multiple 5s.</p>
<ul><li>Examples of matched strings: 6, 65, 655, 6559, 65259, and 65529</li><li>Examples of unmatched strings: 5, 56, 556, 5669, 55269, and 56259</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>+</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Matches the strings in which the preceding character occurs one or more times.</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><p>65+ matches the AS_Paths that begin with 6 and contain one or multiple 5s.</p>
<ul><li>Examples of matched strings: 65, 655, 6559, 65259, and 65529</li><li>Examples of unmatched strings: 56, 556, 5669, 55269, and 56259</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>?</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Matches the strings in which the preceding character occurs zero or one time.</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><p>65? matches the AS_Paths that begin with 6 and contain zero or one 5.</p>
<ul><li>Examples of matched strings: 6 and 65</li><li>Examples of unmatched strings: 655, 6559, and 65529</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>()</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Matches a sub-regular expression within the parentheses, and obtains the matching result. The parentheses can also be empty.</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><p>100(200)+ matches 100200, 100200200, and so on.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>x|y</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Matches x or y.</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><p>100|65002|65003 matches 100, 65002, or 65003.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>[xyz]</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Matches any character in the regular expression.</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><p>[896] matches 8, 9, or 6.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>[^xyz]</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Matches any character that is not contained in the regular expression.</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><p>[^896] matches any character, except 8, 9, and 6.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>[a-z]</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Matches any character within the specified range.</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><p>[2-4] matches 2, 3, and 4; [0-9] matches any digits from 0 to 9.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>The values in the square brackets ([]) must be digits from 0 to 9. For example, to match a number ranging from 735 to 907, use the regular expression of (73[5-9]|7[4-9][0-9]|8[0-9][0-9]|90[0-7]).</p>
</div></div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.82%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.1 "><p>[^a-z]</p>
</td>
<td class="cellrowborder" valign="top" width="32.98%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.2 "><p>Matches any character beyond the specified range.</p>
</td>
<td class="cellrowborder" valign="top" width="44.2%" headers="mcps1.4.2.3.3.2.2.3.2.4.1.3 "><p>[^2-4] matches characters other than 2, 3, and 4. [^0-9] matches characters other than digits 0 through 9.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>You can define multiple rules (permit or deny) for the same filter. During the matching, the relationship between these rules is OR. If a route meets one of the matching rules, it matches this AS_Path filter.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>For details about a regular expression, see the <em><span class="keyword">HUAWEI NE40E-M2 series</span><span class="keyword">Universal Service Router</span> Configuration Guide - Basic Configurations</em>.</li></ul>
</div></div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li id="EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301904"><span id="EN-US_TASK_0000001398457589__">Configure a community filter.</span><p><p>A BGP community attribute is used to identify a group of routes with the same properties. Routes can be classified through the community attribute, which facilitates route management.</p>
<p>In actual application, some AS internal routes may not need to be advertised to other ASs, while some AS external routes need to be advertised to other ASs. Both internal and external routes may have different prefixes (making an IP prefix list unsuitable), and may come from different ASs (making an AS_Path filter unsuitable). In this case, you can set a community value for the AS internal routes and another community value for the AS external routes on an AS edge device to control and filter routes.</p>
</p><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ip+community-filter+index"><b><span class="cmdname">ip community-filter</span></b></a> <em><i><span class="varname">adv-comm-filter-num</span></i></em> [ <strong><strong><span>index</span></strong></strong><em> <i><span class="varname">index-number</span></i></em> ] <em><i><span class="varname">matchMode</span></i></em><em><i><span class="varname"> regular-expression</span></i></em> command to configure a community filter.</span><p><ul><li><p>To configure a standard community filter, run the <a href="cmdqueryname=ip+community-filter+basic+index+internet+no-advertise+no-export"><b><span class="cmdname">ip community-filter basic </span></b></a><i><span class="varname">basCfName</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-val</span></i> ] <i><span class="varname">matchMode</span></i> [ <i><span class="varname">cmntyStr</span></i> | <i><span class="varname">cmntyNum</span></i> | <strong><span>internet</span></strong>  | <strong><span>no-advertise</span></strong> | <strong><span>no-export</span></strong> | <strong><span>no-export-subconfed</span></strong> ] &amp;&lt;1-20&gt; or <a href="cmdqueryname=ip+community-filter+index+internet+no-advertise+no-export"><b><span class="cmdname">ip community-filter </span></b></a><i><span class="varname">cfIndex</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-val</span></i> ] <i><span class="varname">matchMode</span></i> [ <i><span class="varname">cmntyStr</span></i> | <i><span class="varname">cmntyNum</span></i> | <strong><span>internet</span></strong>  | <strong><span>no-advertise</span></strong> | <strong><span>no-export</span></strong> | <strong><span>no-export-subconfed</span></strong> ] &amp;&lt;1-20&gt; command.</p>
</li><li><p>To configure an advanced community filter, run the <a href="cmdqueryname=ip+community-filter+advanced+advanced+index+permit+deny"><b><span class="cmdname">ip community-filter</span></b></a> { <strong><span>advanced</span></strong> <i><span class="varname">comm-filter-name</span></i> | <strong><span>advanced</span></strong> <i><span class="varname">adv-comm-filter-num</span></i> } <span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span>{ <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular-expression</span></i> command.</p>
</li></ul>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li id="EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301907"><span id="EN-US_TASK_0000001398457589__">Configure a Large-community filter.</span><p><p>The Large-community attribute can completely represent a 2-byte or 4-byte AS number, and has two 4-byte LocalData fields, allowing the administrator to flexibly use route-policies. As an enhancement to community attributes, Large-Community can be used together with community attributes.</p>
</p><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Configure a Large-Community filter.</span><p><ul><li><p>To configure a basic Large-Community filter, run the <a href="cmdqueryname=ip+large-community-filter+basic+index+permit+deny"><b><span class="cmdname">ip large-community-filter</span></b></a> <strong><span>basic</span></strong> <i><span class="varname">large-comm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <i><span class="varname">aa:bb:cc</span></i> } &amp;&lt;1-16&gt; command.</p>
</li><li><p>To configure an advanced Large-Community filter, run the <a href="cmdqueryname=ip+large-community-filter+advanced+index+permit+deny"><b><span class="cmdname">ip large-community-filter</span></b></a> <strong><span>advanced</span></strong> <i><span class="varname">large-comm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular-expression</span></i> command.</p>
</li></ul>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li id="EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301905"><span id="EN-US_TASK_0000001398457589__">Configure an extended community filter.</span><p><p>Similar to a community filter, an extended community filter is mainly used to filter VPN routes.</p>
</p><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Configure the following extended community filters as needed.</span><p><p>To configure a VPN-Target extended community filter:</p>
<ul><li><p>To configure a basic VPN-Target extended community filter, run the <a href="cmdqueryname=ip+extcommunity-filter+basic+index+deny+permit+rt"><b><span class="cmdname">ip extcommunity-filter</span></b></a> { <i><span class="varname">basic-extcomm-filter-num</span></i> | <strong><span>basic</span></strong> <i><span class="varname">basic-extcomm-filter-name</span></i> } <span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span>{ <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } { <strong><span>rt</span></strong> <i><span class="varname">extCmntyStr</span></i> } &amp;&lt;1-16&gt; command.</p>
</li><li><p>To configure an advanced VPN-Target extended community filter, run the <a href="cmdqueryname=ip+extcommunity-filter+advanced+index+deny+permit"><b><span class="cmdname">ip extcommunity-filter</span></b></a> { <i><span class="varname">advanced-extcomm-filter-num</span></i> | <strong><span>advanced</span></strong> <i><span class="varname">advanced-extcomm-filter-name</span></i> }<span>[ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] </span> { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <i><span class="varname">regular-expression</span></i> command.</p>
</li></ul>
<p>To configure an SoO extended community filter:</p>
<ul><li><p>To configure a basic SoO extended community filter, run the <a href="cmdqueryname=ip+extcommunity-list+soo+basic+index+permit+deny"><b><span class="cmdname">ip extcommunity-list soo basic</span></b></a> <i><span class="varname">basic-extcomm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <i><span class="varname">site-of-origin</span></i> } &amp;&lt;1-16&gt; command.</p>
</li><li><p>To configure an advanced SoO extended community filter, run the <a href="cmdqueryname=ip+extcommunity-list+soo+advanced+index+permit+deny"><b><span class="cmdname">ip extcommunity-list soo advanced</span></b></a> <i><span class="varname">advanced-extcomm-filter-name</span></i> [ <strong><span>index</span></strong> <i><span class="varname">index-number</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <i><span class="varname">regular-expression</span></i> command.</p>
</li></ul>
<p>Multiple entries can be defined in one extended community filter identified either by a name or number. The relationship between the entries is "OR". This means that if a route matches one of the rules, the route matches the filter.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li id="EN-US_TASK_0000001398457589__step_dc_vrp_bgp_cfg_301906"><span id="EN-US_TASK_0000001398457589__">Configure a route-policy.</span><p><p>A route-policy is used to match routes or route attributes, and to change route attributes when the matching rules are met. As the preceding filters can be used as matching conditions of a route-policy, the route-policy offers powerful functions and can be used flexibly.</p>
</p><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=route-policy+node"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> <em><i><span class="varname">matchMode</span></i></em> <strong><span>node</span></strong> <i><span class="varname">node</span></i> command to configure a route-policy with a node and enter the route-policy view.</span><p><p>A route-policy may consist of multiple nodes. For example, the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example permit node 10</strong> command defines node 10 and the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example deny node 20</strong> command defines node 20. Both nodes belong to the route-policy named <strong>route-policy-example</strong>. The relationship between the nodes of a route-policy is OR. There are two situations:</p>
<ul><li>If a route matches one node, it matches the route-policy and will not be matched against the next node. In the preceding example, if a route matches the node defined using the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example permit node 10</strong> command, the route will not be matched against the node defined using the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example deny node 20</strong> command.</li><li>If a route does not match any node, the route fails to match the route-policy.</li></ul>
<p>When a route-policy is used to filter routes, the routes are first matched against the node with the smallest node ID. For example, if two nodes are configured using the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example permit node 10</strong> and <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example deny node 20</strong> commands, routes are first matched against the node configured using the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example permit node 10</strong> command.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>On the <span class="keyword">NE40E</span>, all unmatched routes are denied by the route-policy by default. If more than one node is defined in a route-policy, at least one of them must be in <strong><span>permit</span></strong> mode.</p>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Configure <strong>if-match</strong> clauses for the current route-policy node.</span><p><p><strong>if-match</strong> clauses are used to filter routes. If no <strong>if-match</strong> clause is specified for a node, all routes will match the node.</p>
<ul><li><p>To configure an ACL-based matching rule, run the <a href="cmdqueryname=if-match+acl"><b><span class="cmdname">if-match acl</span></b></a> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } command.</p>
</li><li><p>To match routes against an IP prefix list, run the <a href="cmdqueryname=if-match+ip-prefix"><b><span class="cmdname">if-match ip-prefix</span></b></a> <i><span class="varname">ip-prefix-name</span></i> command.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the <a href="cmdqueryname=if-match+acl"><b><span class="cmdname">if-match acl</span></b></a> and <a href="cmdqueryname=if-match+ip-prefix"><b><span class="cmdname">if-match ip-prefix</span></b></a> commands are both configured in the same route-policy node, the latter configuration overrides the previous one.</p>
</div></div>
</li><li><p>To match the AS_Path attribute of BGP routes, run the <a href="cmdqueryname=if-match+as-path-filter"><b><span class="cmdname">if-match as-path-filter</span></b></a> <i><span class="varname">apfIndex </span></i>&amp;&lt;1-16&gt; command.</p>
</li><li><p>To match the community attribute of BGP routes, run either of the following commands:</p>
<ul><li><p><a href="cmdqueryname=if-match+community-filter+whole-match"><b><span class="cmdname">if-match community-filter</span></b></a> { <i><span class="varname">basic-comm-filter-num</span></i> [ <strong><span>whole-match</span></strong> ] | <i><span class="varname">adv-comm-filter-num</span></i> [ <strong><span>sort-match</span></strong> ] }<sup>*</sup> &amp;&lt;1-16&gt;</p>
</li><li><p><a href="cmdqueryname=if-match+community-filter+whole-match"><b><span class="cmdname">if-match community-filter</span></b></a> <i><span class="varname">comm-filter-name</span></i> [ <strong><span>whole-match</span></strong> | <strong><span>sort-match</span></strong> ]</p>
</li></ul>
</li><li><p>To match the Large-Community attribute of BGP routes, run the <a href="cmdqueryname=if-match+large-community-filter+whole-match"><b><span class="cmdname">if-match large-community-filter</span></b></a> <i><span class="varname">large-comm-filter-name</span></i> [ <strong><span>whole-match</span></strong> ] command.</p>
</li><li><p>To match the VPN target extended community attribute of BGP routes, run the <a href="cmdqueryname=if-match+extcommunity-filter"><b><span class="cmdname">if-match extcommunity-filter</span></b></a> { { <i><span class="varname">basic-extcomm-filter-num</span></i> [ <strong><span>matches-all</span></strong> | <strong><span>whole-match</span></strong> ] | <i><span class="varname">adv-extcomm-filter-num</span></i> } &amp;&lt;1-16&gt; | <i><span class="varname">extcomm-filter-name</span></i> [ <strong><span>matches-all</span></strong> | <strong><span>whole-match</span></strong> ] } command.</p>
</li><li><p>To match the SoO extended community attribute of BGP routes, run the <a href="cmdqueryname=if-match+extcommunity-list+soo"><b><span class="cmdname">if-match extcommunity-list soo</span></b></a> <i><span class="varname">extcomm-filter-name</span></i> command.</p>
</li></ul>
<p>The operations in Step 3 can be performed in any order. A node may have multiple <strong>if-match</strong> clauses or none at all.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The relationship between <strong>if-match</strong> clauses in a route-policy node is AND, meaning that a route must match all matching conditions before the action defined by an <strong>apply</strong> clause is taken on this route. For example, if two <strong>if-match</strong> clauses (<strong>if-match acl 2003</strong> and <strong>if-match as-path-filter 100</strong>) are defined in the route-policy node specified using the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <strong>route-policy-example permit node 10</strong> command, a route is considered to match node 10 only when it matches both <strong>if-match</strong> clauses.</p>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Configure <strong>apply</strong> clauses for the current route-policy node.</span><p><p><strong>apply</strong> clauses can be used to set attributes for the routes matching the <strong>if-match</strong> clauses. If this step is not performed, the attributes of the routes matching the <strong>if-match</strong> clause remain unchanged.</p>
<ul><li><p>To replace the AS numbers in the AS_Path attribute of BGP routes or add the specified AS number to the AS_Path attribute, run the <a href="cmdqueryname=apply+as-path+additive+overwrite+delete+additive+overwrite"><b><span class="cmdname">apply as-path</span></b></a> { <i><span class="varname">as-path-value</span></i> } &amp;&lt;1-128&gt;{ <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> }<span> or <a href="cmdqueryname=apply+as-path+additive+overwrite+delete"><b><span class="cmdname">apply as-path</span></b></a> <i><span class="varname">asValues</span></i> { <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> }</span> command.</p>
</li><li><p>To delete a specified BGP community attribute, run the <a href="cmdqueryname=apply+comm-filter+delete"><b><span class="cmdname">apply comm-filter delete</span></b></a> command.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=apply+comm-filter+delete"><b><span class="cmdname">apply comm-filter delete</span></b></a> command deletes a specified community attribute from matched routes based on the referenced community filter. To delete multiple community attributes through one community filter, you need to run the <a href="cmdqueryname=ip+community-filter"><b><span class="cmdname">ip community-filter</span></b></a> command multiple times to configure multiple indexes for the filter, with each index corresponding to only one community attribute. If multiple community attributes are specified in the same index of the same community filter, none of them can be deleted in this case. For detailed examples, see the <span class="keyword">HUAWEI NE40E-M2 series</span><span class="keyword">Universal Service Router</span> Command Reference.</p>
</div></div>
</li><li>To delete community attributes from matched BGP routes, run the <a href="cmdqueryname=apply+community+none"><b><span class="cmdname">apply community</span></b></a> <strong><span>none</span></strong> command.</li><li>To set the community attribute of matched BGP routes, run the <a href="cmdqueryname=apply+community+internet+no-advertise+no-export"><b><span class="cmdname">apply community </span></b></a>{ <i><span class="varname">cmntyValue</span></i> | <i><span class="varname">cmntyNum</span></i> | <strong><span>internet</span></strong> | <strong><span>no-advertise</span></strong> | <strong><span>no-export</span></strong> | <strong><span>no-export-subconfed</span></strong> } &amp;&lt;1-32&gt; [ <strong><span>additive</span></strong> ]<span> or <a href="cmdqueryname=apply+community+community-list"><b><span class="cmdname">apply community</span></b></a> <strong><span>community-list</span></strong> <i><span class="varname">community-list-name</span></i></span> command.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>A BGP community list must have been configured using the <a href="cmdqueryname=ip+community-list"><b><span class="cmdname">ip community-list</span></b></a> command and community attributes must have been configured for the list using the <a href="cmdqueryname=community"><b><span class="cmdname">community</span></b></a> command before you run the <a href="cmdqueryname=apply+community+community-list"><b><span class="cmdname">apply community</span></b></a> <strong><span>community-list</span></strong> <i><span class="varname">community-list-name</span></i> command.</p>
</div></div>
</li><li>To delete the Large-Community attribute of BGP routes, run the <a href="cmdqueryname=apply+large-community+none"><b><span class="cmdname">apply large-community</span></b></a> <strong><span>none</span></strong> command.</li><li>To set the Large-Community attribute for BGP routes, run the <a href="cmdqueryname=apply+large-community+additive+overwrite+delete+additive"><b><span class="cmdname">apply large-community</span></b></a> { <i><span class="varname">aa:bb:cc</span></i> } &amp;&lt;1-16&gt; { <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> }<span> or <a href="cmdqueryname=apply+large-community-list+additive+overwrite+delete"><b><span class="cmdname">apply large-community-list</span></b></a> <i><span class="varname">large-community-list-name</span></i> { <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> }</span> command.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Before running the <a href="cmdqueryname=apply+large-community-list"><b><span class="cmdname">apply large-community-list</span></b></a> <i><span class="varname">large-community-list-name</span></i> command to set the BGP Large-Community attribute, run the <a href="cmdqueryname=ip+large-community-list"><b><span class="cmdname">ip large-community-list</span></b></a> command to configure a BGP Large-Community list and run the <a href="cmdqueryname=large-community"><b><span class="cmdname">large-community</span></b></a> command to configure values for the Large-Community list.</p>
</div></div>
</li><li>To set the BGP VPN target extended community attribute, run the <a href="cmdqueryname=apply+extcommunity+rt+additive"><b><span class="cmdname">apply extcommunity</span></b></a> { <strong><span>rt</span></strong> <i><span class="varname">extCmntyValue</span></i> } &amp;&lt;1-16&gt; [ <strong><span>additive</span></strong> ] command.</li><li>To set the BGP SoO extended community attribute, run the <a href="cmdqueryname=apply+extcommunity+soo+additive"><b><span class="cmdname">apply extcommunity soo</span></b></a> { <i><span class="varname">site-of-origin</span></i> } &amp;&lt;1-16&gt; <strong><span>additive</span></strong> command.</li><li>To set the bandwidth extended community attribute, run the <a href="cmdqueryname=apply+extcommunity+bandwidth+none"><b><span class="cmdname">apply extcommunity bandwidth</span></b></a> {<i><span class="varname"> extCmntyString</span></i> | <strong><span>none</span></strong> } or <a href="cmdqueryname=apply+extcommunity+bandwidth+aggregate+limit"><b><span class="cmdname">apply extcommunity bandwidth</span></b></a> <strong><span>aggregate</span></strong> [ <strong><span>limit</span></strong> <i><span class="varname">bandwidth-value</span></i> ] command.</li><li>To set the Local_Pref attribute for matched BGP routes, run the <a href="cmdqueryname=apply+local-preference+%2B+-"><b><span class="cmdname">apply local-preference</span></b></a> <span>[ <strong><span>+</span></strong> | <strong><span>-</span></strong> ] </span><i><span class="varname">preference</span></i> command.</li><li>To set the Origin attribute for matched BGP routes, run the <a href="cmdqueryname=apply+origin+egp+igp+incomplete"><b><span class="cmdname">apply origin</span></b></a> { <strong><span>egp</span></strong> { <i><span class="varname">egpVal</span></i> } | <strong><span>igp</span></strong> | <strong><span>incomplete</span></strong> } command.</li><li>To set a preferred value for matched BGP routes, run the <a href="cmdqueryname=apply+preferred-value"><b><span class="cmdname">apply preferred-value</span></b></a> <i><span class="varname">preferred-value</span></i> command.</li><li><p>To set dampening parameters for EBGP routes, run the <a href="cmdqueryname=apply+dampening"><b><span class="cmdname">apply dampening</span></b></a> <i><span class="varname">half-life-reach</span></i> <i><span class="varname">reuse</span></i> <i><span class="varname">suppress</span></i> <i><span class="varname">ceiling</span></i> command.</p>
</li></ul>
<p>The operations in Step 4 can be performed in any order. A node may have multiple <strong>apply</strong> clauses or no <strong>apply</strong> clause.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li id="EN-US_TASK_0000001398457589__step123810234257"><span id="EN-US_TASK_0000001398457589__">Configure an IP address list.</span><p><p>Before configuring a conditional BGP route advertisement policy, you need to create an IP address list.</p>
</p><ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <strong><span>filter-list ip-prefix</span></strong> <i><span class="varname">name</span></i> command to create an IP address list and enter the ip-prefix-list view.</span></li><li><span>Run the <a href="cmdqueryname=prefix"><b><span class="cmdname">prefix</span></b></a> <i><span class="varname">address</span></i> <i><span class="varname">maskLen</span></i> command to configure an IP address and mask for the IP address list.</span></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3112.html">Configuring BGP Routing Policies
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3114.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>