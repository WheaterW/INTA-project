
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an AS_Path Set">
<meta name="abstract" content="AS_Path sets apply only to BGP and are used to match the AS_Path attribute of BGP routes. This section describes how to configure AS_Path sets.">
<meta name="description" content="AS_Path sets apply only to BGP and are used to match the AS_Path attribute of BGP routes. This section describes how to configure AS_Path sets.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0007.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00414125">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366608">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an AS_Path Set</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366608"></a><a name="EN-US_TASK_0172366608"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an AS_Path Set</h1>
<div class="taskbody"><p>AS_Path sets apply only to BGP and are used to match the AS_Path attribute of BGP routes. This section describes how to configure AS_Path sets.</p>
<div class="steps-unordered"><a name="EN-US_TASK_0172366608__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure an AS_Path set <span>using the paragraph-by-paragraph editing mode</span>.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=edit+xpl+as-path-list"><b><span class="cmdname">edit xpl as-path-list</span></b></a> <i><span class="varname">as-path-list-name</span></i> command to enter the AS_Path set paragraph-by-paragraph editing view.</span></li><li class="substepexpand"><span>Press <strong><span id="EN-US_TASK_0172366608__en-us_task_0172366604_cmdparmname487383154214324">i</span></strong> to enter the text editing mode.</span><p><div class="note" id="EN-US_TASK_0172366608__en-us_task_0172366604_note848653575214039"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366608__en-us_task_0172366604_p1881735298214039">Sets or route-filters can be configured only in the text editing mode. If you exit from the text editing mode, you can perform shortcut key operations only.</p>
</div></div>
</p></li><li class="substepexpand"><span>Configure a start clause for an AS_Path set using the <a href="cmdqueryname=xpl+as-path-list"><b><span class="cmdname">xpl as-path-list</span></b></a> <i><span class="varname">as-path-list-name</span></i> command in the AS_Path set paragraph-by-paragraph editing interface view.</span></li><li class="substepexpand"><span>Configure elements in the format of regular+AS_Path regular expression for the set in the AS_Path set paragraph-by-paragraph editing interface view and separate every two neighboring elements with a comma (,). For example, regular 1_2_3_4 represents an AS_Path that contains AS numbers 1, 2, 3, and 4.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Regular expression processing is CPU computing-intensive. When a large number of regular expressions are configured in an XPL policy to match a BGP route attribute and the length of the route attribute is long, the processing performance of the XPL policy deteriorates. To improve the processing performance of the routing policy, decrease the number of regular expressions or use a non-regular expression matching command.</p>
<p>It is recommended that a maximum of 100 regular expressions be configured for each policy.</p>
</div></div>
</p></li><li class="substepexpand"><span>Configure an end clause for the AS_Path set using the <a href="cmdqueryname=end-list"><b><span class="cmdname">end-list</span></b></a> command in the AS_Path set paragraph-by-paragraph editing interface view.</span></li><li class="substepexpand"><span>Press <strong><span id="EN-US_TASK_0172366608__en-us_task_0172366604_cmdparmname1779802799214324">Esc</span></strong> to exit from the text editing mode.</span></li><li class="substepexpand"><span>Press <strong><span id="EN-US_TASK_0172366608__en-us_task_0172366604_cmdparmname735621263214039">:wq</span></strong> and <strong id="EN-US_TASK_0172366608__en-us_task_0172366604_b860927787214324">Enter</strong> to save the configurations and exit from the global variable set paragraph-by-paragraph editing view.</span><p><div class="note" id="EN-US_TASK_0172366608__en-us_task_0172366604_note150669114214039"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366608__en-us_task_0172366604_p412579185214039">A message is displayed for you to confirm whether to commit the configurations when you attempt to exit from the global variable set paragraph-by-paragraph editing view. To commit the configurations, press <strong id="EN-US_TASK_0172366608__en-us_task_0172366604_b846040704214324">Y</strong>.</p>
<p id="EN-US_TASK_0172366608__en-us_task_0172366604_p920862874214039">To exit from the global variable set paragraph-by-paragraph editing view without saving the configurations, press <strong><span id="EN-US_TASK_0172366608__en-us_task_0172366604_cmdparmname318439040214324">:q!</span></strong> and <strong id="EN-US_TASK_0172366608__en-us_task_0172366604_b899102169214324">Enter</strong>.</p>
</div></div>
</p></li></ol>
</li><li><span>Configure an AS_Path set using the line-by-line editing mode.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=xpl+as-path-list"><b><span class="cmdname">xpl as-path-list</span></b></a> <i><span class="varname">as-path-list-name</span></i> command to enter the AS_Path set view.</span></li><li class="substepexpand"><span>Configure elements in the format of regular+AS_Path regular expression for the set and separate every two neighboring elements with a comma (,). For example, regular 1_2_3_4 represents an AS_Path that contains AS numbers 1, 2, 3, and 4.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Regular expression processing is CPU computing-intensive. When a large number of regular expressions are configured in an XPL policy to match a BGP route attribute and the length of the route attribute is long, the processing performance of the XPL policy deteriorates. To improve the processing performance of the routing policy, decrease the number of regular expressions or use a non-regular expression matching command.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=end-list"><b><span class="cmdname">end-list</span></b></a> command to conclude the configuration of the AS_Path set, exit the AS_Path set view, and return to the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0172366608__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Example</h4><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366608__en-us_task_0172366606_p1511226613214039">If only paragraph-by-paragraph editing is used as an example, the corresponding line editing is similar. To use the line editing mode, perform the operations described in paragraph-by-paragraph editing.</p>
</div></div>
<p>For detailed set and route-filter configuration steps, see <a href="dc_vrp_xpl_cfg_0002.html#EN-US_CONCEPT_0000001793384325__section_dc_vrp_xpl_cfg_000102">Configuration Procedures for Sets and Route-Filters Using the Paragraph-by-Paragraph Editing Mode</a>. For details about XPL clauses, see <span><a href="dc_vrp_xpl_cfg_0014.html">XPL Paragraph Editing Clauses</a></span>.</p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary=""><tr><td valign="top"><p><strong>Objective</strong></p>
</td>
<td valign="top"><p>Configure an AS_Path set to match the routes received from AS 100, the routes that pass through AS 200, and the routes that originate from AS 300.</p>
</td>
</tr>
<tr><td valign="top"><p><strong>Configuration Example</strong></p>
</td>
<td valign="top"><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>edit xpl as-path-list aaa</strong>

xpl as-path-list aaa
regular ^100_,
regular _200_,
regular _300$
end-list</pre>
<p>This AS_Path set includes three elements and matches the routes received from AS 100, the routes that pass through AS 200, and the routes that originate from AS 300.</p>
</td>
</tr>
<tr><td valign="top"><p><strong>Objective</strong></p>
</td>
<td valign="top"><p>Configure a route-filter to deny the routes received from AS 100, the routes that pass through AS 200, and the routes that originate from AS 300.</p>
</td>
</tr>
<tr><td valign="top"><p><strong>Reference Example</strong></p>
</td>
<td valign="top"><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>edit xpl route-filter r1</strong></pre>
<pre class="screen">xpl route-filter r1
if as-path in aaa then
<span>refuse</span>
else
<span>approve</span>
endif
end-filter</pre>
<p>The route-filter references AS_Path set <strong>aaa</strong>, denies the routes that match <strong>aaa</strong>, and permits all other routes.</p>
</td>
</tr>
</table></div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0003.html">Configuring a Route Attribute Set
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0005.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0007.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>