
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an OSPFv3 NSSA">
<meta name="abstract" content="By configuring a non-backbone area on the border of an autonomous system (AS) as a not-so-stubby area (NSSA), you can reduce the size of the routing table and the amount of routing information to be transmitted.">
<meta name="description" content="By configuring a non-backbone area on the border of an autonomous system (AS) as a not-so-stubby area (NSSA), you can reduce the size of the routing table and the amount of routing information to be transmitted.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2080.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2031.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,56675587z00801081,w00556928,w00606909,l00455378,">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365754">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an OSPFv3 NSSA</title>
</head>
<body><a name="EN-US_TASK_0172365754"></a><a name="EN-US_TASK_0172365754"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an OSPFv3 NSSA</h1>
<div class="taskbody"><p>By configuring a non-backbone area on the border of an autonomous system (AS) as a not-so-stubby area (NSSA), you can reduce the size of the routing table and the amount of routing information to be transmitted.</p>
<div class="context"><a name="EN-US_TASK_0172365754__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>An excessive number of entries in a routing table wastes network resources and causes high CPU usage. To reduce the number of entries in a routing table and the amount of routing information to be transmitted, configure a non-backbone area on the border of an AS as a stub area or an NSSA. For details about how to configure an OSPFv3 stub area, see <a href="dc_vrp_ospfv3_cfg_2080.html">Configuring an OSPFv3 Stub Area</a>.</p>
<p>OSPFv3 stub areas cannot import external routes from outside an AS, nor can they learn the external routes imported by the other areas in the same AS. To import external routes to an area and minimize resource consumption, configure the area as an NSSA. NSSAs can import the external routes (outside an AS) and advertise them within the entire AS, without learning external routes from the other areas in the AS. This reduces the consumption of bandwidth and storage resources on the <span class="keyword">Router</span>.</p>
<p>NSSA attributes must be configured on all <span class="keyword">Router</span>s in an NSSA.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365754__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring an OSPFv3 NSSA, complete the following tasks:</p>
<ul><li>Configure an IP address for each interface to ensure that neighboring devices can communicate with each other at the network layer.</li><li><a href="dc_vrp_ospfv3_cfg_2003.html">Configure basic OSPFv3 functions</a>.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365754__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span><p><p>The OSPFv3 view is displayed.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=lsa-forwarding-address"><b><span class="cmdname">lsa-forwarding-address</span></b></a> { <strong><span>standard</span></strong> | <strong><span>zero-translate</span></strong> }</span><p><p>The OSPFv3 forwarding address (FA) function is enabled.</p>
</p></li><li><span>Run <a href="cmdqueryname=area"><b><span class="cmdname">area</span></b></a> <i><span class="varname">area-id</span></i></span><p><p>The OSPFv3 area view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=nssa"><b><span class="cmdname">nssa</span></b></a> [ { <strong><span>default-route-advertise</span></strong> [ <span><strong><span>backbone-peer-ignore</span></strong> | </span><strong><span>cost</span></strong> <i><span class="varname">cost-value</span></i> | <strong><span>type</span></strong> <i><span class="varname">type-value</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag-value</span></i> ] <sup>*</sup> } | <strong><span>no-import-route</span></strong> | <strong><span>no-summary</span></strong> | <strong><span>translator-always</span></strong> | <strong><span>translator-interval</span></strong> <i><span class="varname">interval-value</span></i> | <strong><span>set-n-bit</span></strong><span> | <strong><span>suppress-forwarding-address</span></strong></span> ] <sup>*</sup></span><p><p>The specified area is configured as an NSSA.</p>
<p>The usage scenarios of the <a href="cmdqueryname=nssa"><b><span class="cmdname">nssa</span></b></a> command parameters are as follows:</p>
<ul><li><p>To allow default Type 7 LSA generation, specify <a href="cmdqueryname=default-route-advertise"><b><span class="cmdname">default-route-advertise</span></b></a>. After this parameter is specified, a Type 7 LSA default route will be generated on an ABR, regardless of whether the route ::/0 exists in the ABR's routing table. On an ASBR, however, a Type 7 LSA default route can be generated only if the route ::/0 exists in the ASBR's routing table.</p>
</li><li>If an ASBR also functions as an ABR, specifying <strong><span>no-import-route</span></strong> prevents OSPFv3 from advertising the external routes imported using the <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> command to the NSSA.</li><li>To reduce the number of LSAs to be transmitted to the NSSA, specify <strong><span>no-summary</span></strong> on an ABR. This prevents the ABR from transmitting Summary LSAs (Type 3 LSAs) to the NSSA.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the <a href="cmdqueryname=nssa"><b><span class="cmdname">nssa</span></b></a> <strong><span>default-route-advertise</span></strong> <strong><span>backbone-peer-ignore</span></strong> <strong><span>no-summary</span></strong> command is run, the ABR generates both the default Type 7 LSA and default Type 3 LSA as long as the backbone area contains interfaces that are up, regardless of whether neighbor relationships in Full state exist. In this case, the default Type 3 LSA preferentially takes effect.</p>
</div></div>
</li><li><p>After <strong><span>set-n-bit</span></strong> is set, the DD packets sent by the <span class="keyword">Router</span> carry the N-bit of 1.</p>
</li><li>If multiple ABRs are deployed in the NSSA, OSPFv3 automatically selects an ABR (generally the ABR with the largest router ID) as a translator to translate Type 7 LSAs into Type 5 LSAs. Each change of a translator causes LSA flooding. To prevent this issue, specify <strong>translator-always</strong> on an ABR to configure the ABR as a fixed translator. To allow two ABRs to participate in load balancing, configure <strong><span>translator-always</span></strong> on the ABRs.</li><li>To ensure service continuity during translator switching, specify the <strong><span>translator-interval</span></strong> parameter. The value of <i><span class="varname">interval-value</span></i> must be greater than the flooding interval.</li><li><p>To disable translated Type 5 LSAs from carrying an FA, specify the <strong><span>suppress-forwarding-address</span></strong> parameter.</p>
</li></ul>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172365754__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After the configuration is complete, verify it.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+ospfv3"><b><span class="cmdname">display ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>routing</span></strong> [ [ <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> ] | <strong><span>abr-routes</span></strong> | <strong><span>asbr-routes</span></strong> | <strong><span>ase-routes</span></strong> | <strong><span>inter-routes</span></strong> | <strong><span>intra-routes</span></strong> | <strong><span>nssa-routes</span></strong> ] [ <strong><span>verbose</span></strong> ] command to check the OSPFv3 routing table information.</p>
</li><li><p>Run the <a href="cmdqueryname=display+ospfv3"><b><span class="cmdname">display ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>lsdb</span></strong> [ <strong><span>area</span></strong> <i><span class="varname">area-id</span></i> ] [ [ <strong><span>originate-router</span></strong> <i><span class="varname">advertising-router-id</span></i> | <strong><span>hostname</span></strong> <i><span class="varname">hostname</span></i> ] | <strong><span>self-originate</span></strong> ] { <strong><span>grace</span></strong> | <strong><span>inter-prefix</span></strong> | <strong><span>inter-router</span></strong> | <strong><span>intra-prefix</span></strong> | <strong><span>link</span></strong> | <strong><span>network</span></strong> | <strong><span>router</span></strong> | <strong><span>router-information</span></strong> | <strong><span>nssa</span></strong> } [<i><span class="varname">link-state-id</span></i> ] [ <strong><span>age</span></strong> { <strong><span>min-value</span></strong> <i><span class="varname">min-age-value</span></i> | <strong><span>max-value</span></strong> <i><span class="varname">max-age-value</span></i> } <sup>*</sup> ] command to check the OSPFv3 LSDB information.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2000.html">OSPFv3 Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2080.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2031.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>