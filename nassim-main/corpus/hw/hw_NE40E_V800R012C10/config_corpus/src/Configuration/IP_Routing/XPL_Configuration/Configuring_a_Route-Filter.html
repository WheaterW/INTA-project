
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Route-Filter">
<meta name="abstract" content="A route-filter can use its condition clause to filter routes and use its action clause to set or modify route attributes of the routes that match the condition clause. This section describes how to configure route-filters.">
<meta name="description" content="A route-filter can use its condition clause to filter routes and use its action clause to set or modify route attributes of the routes that match the condition clause. This section describes how to configure route-filters.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="XPL">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00414125">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366615">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Route-Filter</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366615"></a><a name="EN-US_TASK_0172366615"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Route-Filter</h1>
<div class="taskbody"><p>A route-filter can use its condition clause to filter routes and use its action clause to set or modify route attributes of the routes that match the condition clause. This section describes how to configure route-filters.</p>
<div class="context"><a name="EN-US_TASK_0172366615__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><div class="p">Route-filters include various matching rules and can flexibly apply to a variety of scenarios. Route-filters consist of condition clauses and action clauses, use condition clauses to filter routes based on sets or a single element, and use action clauses to modify route attributes of the routes that meet matching rules.<ul><li>Condition clause: A condition clause is defined based on a set or single element, beginning with an introductory condition clause in most cases. The action specified in the action clause is applied only to the routes that match the conditions specified in the condition clause.</li><li>Action clause: An action clause specifies an action to be applied to the routes that match the conditions specified in the condition clause. An action clause determines whether the routes match the route-filter or modifies their route attributes.</li></ul>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366615__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><div class="p">Before configuring route-filters, complete the following tasks:<ul><li>Determine whether to configure <a href="dc_vrp_xpl_cfg_0003.html">route attribute sets</a>.</li><li>Configure a global variable set if some values need to be frequently used.</li></ul>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172366615__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a route-filter <span>using the paragraph-by-paragraph editing mode</span>.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=edit+xpl+route-filter"><b><span class="cmdname">edit xpl route-filter</span></b></a> <i><span class="varname">route-filter-name</span></i> command to enter the route-filter paragraph-by-paragraph editing view.</span></li><li class="substepexpand"><span>Press <strong><span id="EN-US_TASK_0172366615__en-us_task_0172366604_cmdparmname487383154214324">i</span></strong> to enter the text editing mode.</span><p><div class="note" id="EN-US_TASK_0172366615__en-us_task_0172366604_note848653575214039"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366615__en-us_task_0172366604_p1881735298214039">Sets or route-filters can be configured only in the text editing mode. If you exit from the text editing mode, you can perform shortcut key operations only.</p>
</div></div>
</p></li><li class="substepexpand"><span>Configure a start clause in the format of <a href="cmdqueryname=xpl+route-filter"><b><span class="cmdname">xpl route-filter</span></b></a> <i><span class="varname">route-filter-name</span></i>($<i><span class="varname">var1</span></i>,$<i><span class="varname">var2</span></i>,...) for a route-filter in the route-filter paragraph-by-paragraph editing view. The parameters are optional and can be used in condition or action clauses.</span></li><li class="substepexpand"><span>Configure a matching condition in the format of <strong><span>if</span></strong>+condition clause+<strong><span>then</span></strong> and connect the conditions with the Boolean operator <strong><span>NOT</span></strong>, <strong><span>AND</span></strong>, or <strong><span>OR</span></strong>. The keyword <strong><span>then</span></strong> is followed by an action clause. For details about condition clauses, see <span><a href="dc_vrp_xpl_cfg_0016.html">Condition Clauses</a></span>.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366615__en-us_cliref_0172380129_p1122383795214506">Route-filters can have only action clauses and can also be empty (configured with only a start clause and an end clause). In this case, the default action <strong id="EN-US_TASK_0172366615__en-us_cliref_0172380129_b1912895017585">refuse</strong> is used. If an empty route-filter is specified in another route-filter using a <strong id="EN-US_TASK_0172366615__en-us_cliref_0172380129_b1019145465815">call</strong> clause, the empty route-filter does not take effect.</p>
</div></div>
</p></li><li class="substepexpand"><span>Configure an action clause. For details about action clauses, see <span><a href="dc_vrp_xpl_cfg_0017.html">Action Clauses</a></span>.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0172366615__en-us_cliref_0172380129_ul265112301214506"><li id="EN-US_TASK_0172366615__en-us_cliref_0172380129_li1466914554214506">Multiple action clauses can be configured if they do not conflict with each other.</li><li id="EN-US_TASK_0172366615__en-us_cliref_0172380129_li446147174214506">Action clauses (excluding <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname975568162214506">approve</span></strong>, <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname797202561214506">refuse</span></strong>, <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname2059674394214506">finish</span></strong>, <b><span class="cmdname" id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdname204504464214506">break</span></b>, and <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname882707205214506">call route-filter</span></strong> <i><span class="varname" id="EN-US_TASK_0172366615__en-us_cliref_0172380129_varname81394451214506">route-filter-name</span></i>) must follow <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname800459163214506">apply</span></strong>.</li></ul>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Configure <strong><span>elseif</span></strong>+condition clause+<strong><span>then</span></strong> to filter the routes that fail to match the conditions specified in the <strong><span>if</span></strong> clause and specify an action clause for the <strong><span>elseif</span></strong> clause. You can configure multiple <strong><span>elseif</span></strong> clauses to filter the routes that fail to meet the previous matching rule or configure an <strong><span>else</span></strong> clause to match the routes that fail to meet all the previous matching rules. Each <strong><span>if</span></strong>, <strong><span>elseif</span></strong>, or <strong><span>else</span></strong> clause must be followed by an action clause.</span></li><li class="substepexpand"><span>Configure a conclusive condition clause (<strong><span>endif</span></strong>).</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366615__en-us_cliref_0172380129_p1280249888214506">Steps 2 to 5 describe how to configure an <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname1155467126214506">if</span></strong> condition branch. One route-filter can have multiple <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname57980028214506">if</span></strong> condition branches, and the <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname1584450045214506">if</span></strong> condition branches can be configured as follows:</p>
<ul id="EN-US_TASK_0172366615__en-us_cliref_0172380129_ul1619546043214506"><li id="EN-US_TASK_0172366615__en-us_cliref_0172380129_li627574619214506">One <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname597108412214506">if</span></strong> condition branch is followed by another.</li><li id="EN-US_TASK_0172366615__en-us_cliref_0172380129_li2010906499214506">The <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname88429380214506">if</span></strong>+condition clause+<strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname357356370214506">then</span></strong> or <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname198207385214506">elseif</span></strong>+condition clause+<strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname9363020214506">then</span></strong> is followed by another <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname1597338151214506">if</span></strong> condition branch. Such a configuration further filters routes that match <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname517057447214506">if</span></strong>+condition clause+<strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname1790521005214506">then</span></strong> or <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname1889784965214506">elseif</span></strong>+condition clause+<strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname769131126214506">then</span></strong> against the second <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname582953114214506">if</span></strong> condition branch.</li></ul>
<p id="EN-US_TASK_0172366615__en-us_cliref_0172380129_p1377150278214506">Regardless of the configuration mode, route filtering continues until <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname1092782475214506">finish</span></strong>, <b><span class="cmdname" id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdname239360337214506">break</span></b>, <span><strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname305568196214506">refuse, </span></strong></span>or the last <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380129_cmdparmname410459423214506">if</span></strong> condition branch.</p>
</div></div>
</p></li><li class="substepexpand"><span>Configure a conclusive clause (<strong><span>end-filter</span></strong>) for the route-filter.</span></li><li class="substepexpand"><span>Press <strong><span id="EN-US_TASK_0172366615__en-us_task_0172366604_cmdparmname1779802799214324">Esc</span></strong> to exit from the text editing mode.</span></li><li class="substepexpand"><span>Press <strong><span id="EN-US_TASK_0172366615__en-us_task_0172366604_cmdparmname735621263214039">:wq</span></strong> and <strong id="EN-US_TASK_0172366615__en-us_task_0172366604_b860927787214324">Enter</strong> to save the configurations and exit from the global variable set paragraph-by-paragraph editing view.</span><p><div class="note" id="EN-US_TASK_0172366615__en-us_task_0172366604_note150669114214039"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366615__en-us_task_0172366604_p412579185214039">A message is displayed for you to confirm whether to commit the configurations when you attempt to exit from the global variable set paragraph-by-paragraph editing view. To commit the configurations, press <strong id="EN-US_TASK_0172366615__en-us_task_0172366604_b846040704214324">Y</strong>.</p>
<p id="EN-US_TASK_0172366615__en-us_task_0172366604_p920862874214039">To exit from the global variable set paragraph-by-paragraph editing view without saving the configurations, press <strong><span id="EN-US_TASK_0172366615__en-us_task_0172366604_cmdparmname318439040214324">:q!</span></strong> and <strong id="EN-US_TASK_0172366615__en-us_task_0172366604_b899102169214324">Enter</strong>.</p>
</div></div>
</p></li></ol>
</li><li><span>Configure a route-filter using the line editing mode.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=xpl+route-filter"><b><span class="cmdname">xpl route-filter</span></b></a> <i><span class="varname">route-filter-name</span></i> command to enter the route-filter view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=if"><b><span class="cmdname">if</span></b></a> [ <strong><span>not</span></strong> ] <i><span class="varname">condition-clause</span></i> [ { <strong><span>and</span></strong> | <strong><span>or</span></strong> } [ <strong><span>not</span></strong> ] <i><span class="varname">condition-clause</span></i> ] <sup>*</sup> <strong><span>then</span></strong> command to configure matching rules for the route-filter.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366615__en-us_cliref_0172380152_p347630574214506">Route-filters can have only action clauses and can also be empty (only configured with <b><span class="cmdname" id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdname1872851285214506">xpl route-filter</span></b> and <a href="cmdqueryname=end-filter"><b><span class="cmdname" id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdname1343910299214506">end-filter</span></b></a>). In this case, the default action <strong id="EN-US_TASK_0172366615__en-us_cliref_0172380152_b1912895017585">refuse</strong> is used. If an empty route-filter is specified in another route-filter using a <strong id="EN-US_TASK_0172366615__en-us_cliref_0172380152_b1019145465815">call</strong> clause, the empty route-filter does not take effect.</p>
</div></div>
</p></li><li class="substepexpand"><span>Configure an action using any of the following commands for the routes that meet matching rules:</span><p><ul><li><a href="cmdqueryname=apply"><b><span class="cmdname">apply</span></b></a> <i><span class="varname">action-clause</span></i>: sets a route attribute for the routes that meet matching rules.</li><li><a href="cmdqueryname=approve"><b><span class="cmdname">approve</span></b></a>: further filters the routes that meet the matching rules of the current <strong>if</strong> condition branch against the next <strong>if</strong> condition branch.</li><li><a href="cmdqueryname=refuse"><b><span class="cmdname">refuse</span></b></a>: denies routes that meet matching rules.</li><li><a href="cmdqueryname=finish"><b><span class="cmdname">finish</span></b></a>: completes route filtering and allows the routes that meet matching rules to match the route-filter.</li><li><a href="cmdqueryname=call+route-filter"><b><span class="cmdname">call route-filter</span></b></a> <i><span class="varname">route-filter-name</span></i>: further matches the routes that meet the matching rules of the current route-filter against the specified route-filter.</li><li><a href="cmdqueryname=break"><b><span class="cmdname">break</span></b></a>: enables the device to exit from the current route-filter. If the current route-filter is referenced by a parent route-filter, the device keeps implementing remaining condition and action clauses of the parent route-filter.</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366615__en-us_cliref_0172380152_p1484337622214506">Multiple action clauses can be configured if they do not conflict with each other.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=elseif"><b><span class="cmdname">elseif</span></b></a> [ <strong><span>not</span></strong> ] <i><span class="varname">condition-clause</span></i> [ { <strong><span>and</span></strong> | <strong><span>or</span></strong> } [ <strong><span>not</span></strong> ] <i><span class="varname">condition-clause</span></i> ] <sup>*</sup> <strong><span>then</span></strong> command to filter the routes that fail to meet the rules specified in the <a href="cmdqueryname=if"><b><span class="cmdname">if</span></b></a> command and specify an action for the routes using a command in Step 4. You can run the <a href="cmdqueryname=elseif"><b><span class="cmdname">elseif</span></b></a> command multiple times to filter the routes that fail to meet the previous matching rules or run the <a href="cmdqueryname=else"><b><span class="cmdname">else</span></b></a> command to match the routes that fail to meet all the previous matching rules in the same if condition branch. You can also run a command in Step 4 to set an action for these routes.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=endif"><b><span class="cmdname">endif</span></b></a> command to conclude the configuration of the current <strong><span>if</span></strong> condition branch.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366615__en-us_cliref_0172380152_p1445043456214506">An <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdparmname2089494651214506">if</span></strong> condition branch begins with <a href="cmdqueryname=if"><b><span class="cmdname" id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdname2133854657214506">if</span></b></a> and ends with <a href="cmdqueryname=endif"><b><span class="cmdname" id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdname1331133016214506">endif</span></b></a>. One route-filter can have multiple <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdparmname943016591214506">if</span></strong> condition branches, and the <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdparmname167110458214506">if</span></strong> condition branches can be configured as follows:</p>
<ul id="EN-US_TASK_0172366615__en-us_cliref_0172380152_ul986230937214506"><li id="EN-US_TASK_0172366615__en-us_cliref_0172380152_li110256821214506">One <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdparmname777468543214506">if</span></strong> condition branch is followed by another.</li><li id="EN-US_TASK_0172366615__en-us_cliref_0172380152_li1746509591214506">The <a href="cmdqueryname=if"><b><span class="cmdname" id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdname1226139983214506">if</span></b></a> or <a href="cmdqueryname=elseif"><b><span class="cmdname" id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdname1956202047214506">elseif</span></b></a> clause of one <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdparmname4334765214506">if</span></strong> condition branch is followed by another <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdparmname1083329808214506">if</span></strong> condition branch. Such a configuration further filters routes that match <a href="cmdqueryname=if"><b><span class="cmdname" id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdname1325692088214506">if</span></b></a> or <a href="cmdqueryname=elseif"><b><span class="cmdname" id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdname611273365214506">elseif</span></b></a> clause against the second <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdparmname1954354316214506">if</span></strong> condition branch.</li></ul>
<p id="EN-US_TASK_0172366615__en-us_cliref_0172380152_p1843748920214506">Regardless of the configuration mode, route filtering continues until <a href="cmdqueryname=finish"><b><span class="cmdname" id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdname1778441942214506">finish</span></b></a>, <a href="cmdqueryname=break"><b><span class="cmdname" id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdname1267166954214506">break</span></b></a>, <a href="cmdqueryname=refuse"><b><span class="cmdname" id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdname1185558824214506">refuse</span></b></a>, or the last <strong><span id="EN-US_TASK_0172366615__en-us_cliref_0172380152_cmdparmname407344773214506">if</span></strong> condition branch.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=end-filter"><b><span class="cmdname">end-filter</span></b></a> command to conclude the configuration of the route-filter.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0172366615__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Example</h4><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172366615__en-us_task_0172366606_p1511226613214039">If only paragraph-by-paragraph editing is used as an example, the corresponding line editing is similar. To use the line editing mode, perform the operations described in paragraph-by-paragraph editing.</p>
</div></div>
<p>For detailed set and route-filter configuration steps, see <a href="dc_vrp_xpl_cfg_0002.html#EN-US_CONCEPT_0000001793384325__section_dc_vrp_xpl_cfg_000102">Configuration Procedures for Sets and Route-Filters Using the Paragraph-by-Paragraph Editing Mode</a>. For details about XPL clauses, see <span><a href="dc_vrp_xpl_cfg_0014.html">XPL Paragraph Editing Clauses</a></span>.</p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary=""><tr><td valign="top"><p><strong>Objective</strong></p>
</td>
<td valign="top"><p>Configure a route-filter to set the priorities of the BGP routes destined for 1.1.1.1 to 200.</p>
</td>
</tr>
<tr><td valign="top"><p><strong>Configuration Example 1</strong></p>
</td>
<td valign="top"><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>edit xpl route-filter r1</strong>

xpl route-filter r1
if ip route-destination in { 1.1.1.1 32 } then
apply preference 200
endif
end-filter</pre>
<p>The IPv4 prefix set used by the preceding route-filter includes only one element. In this situation, use the format of {element A, element B...} to present the IPv4 prefix set.</p>
</td>
</tr>
<tr><td valign="top"><p><strong>Objective</strong></p>
</td>
<td valign="top"><p>Create a route-filter with a pre-defined variable and configure another route-filter to reference the preceding route-filter.</p>
</td>
</tr>
<tr><td valign="top"><p><strong>Configuration Example 2</strong></p>
</td>
<td valign="top"><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>edit xpl route-filter para</strong>

xpl route-filter para($var)
apply med $var
end-filter</pre>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>edit xpl route-filter r2</strong>

xpl route-filter r2
if ip route-destination in aaa then
call route-filter para(20)
elseif ip route-destination in bbb then
call route-filter para(30)
endif
end-filter
</pre>
<p><strong>aaa</strong> and <strong>bbb</strong> specified in this route-filter are IPv4 prefix sets, and a maximum of eight parameters can be referenced by each route-filter.</p>
</td>
</tr>
<tr><td valign="top"><p><strong>Objective</strong></p>
</td>
<td valign="top"><p>Configure a route-filter to set the priorities of the BGP routes carrying destination IP address 1.1.1.1 and MPLS labels to 50.</p>
</td>
</tr>
<tr><td valign="top"><p><strong>Configuration Example 3</strong></p>
</td>
<td valign="top"><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>edit xpl route-filter r3</strong>

xpl route-filter r3
if ip route-destination in { 1.1.1.1 32 } and mpls-label exist then
apply preference 50
endif
end-filter
</pre>
<p>The conditions in a condition clause can be connected with the Boolean operator <strong><span>NOT</span></strong>, <strong><span>AND</span></strong>, or <strong><span>OR</span></strong>.</p>
</td>
</tr>
</table></div>
</div>
<div class="postreq"><a name="EN-US_TASK_0172366615__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring route-filters, verify the configuration.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+xpl+route-filter"><b><span class="cmdname">display xpl route-filter</span></b></a> [ <strong><span>name</span></strong> <i><span class="varname">xpl-name</span></i> { <strong><span>attachpoints</span></strong> | <strong><span>uses</span></strong> | <strong><span>detail</span></strong> } ] command to check the XPL route-filter configurations or the detailed information referenced by routing protocols.</p>
</li><li><p>Run the <a href="cmdqueryname=display+xpl"><b><span class="cmdname">display xpl</span></b></a> <strong><span>route-filter</span></strong> <strong><span>state</span></strong> [ <strong><span>attached</span></strong> | <strong><span>unattached</span></strong> ] command to check information about XPL route-filter configurations and references.</p>
</li><li><p>Run the <a href="cmdqueryname=display+xpl+statistics"><b><span class="cmdname">display xpl statistics</span></b></a> command to check statistics about XPL and route-filter configurations.</p>
</li><li>(Optional) Run the <a href="cmdqueryname=reset+xpl-filter"><b><span class="cmdname">reset xpl-filter</span></b></a> <i><span class="varname">filter-name</span></i><em> </em><strong><span>counters</span></strong> command to clear statistics about the routes matching the specified route-filter.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0000.html">XPL Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0003.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_xpl_cfg_0010.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>