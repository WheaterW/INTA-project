
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an IPsec SA">
<meta name="abstract" content="To create a manual IPsec tunnel, you need to use the SPI, string-key, authentication-hex, or encryption-hex.">
<meta name="description" content="To create a manual IPsec tunnel, you need to use the SPI, string-key, authentication-hex, or encryption-hex.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2082.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2071.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2073.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,56675587z00801081,w00556928,w00606909,l00455378,">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00425560">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365774">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an IPsec SA</title>
</head>
<body><a name="EN-US_TASK_0172365774"></a><a name="EN-US_TASK_0172365774"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">Configuring an IPsec SA</h1>



<div class="taskbody"><p>To create a manual IPsec tunnel, you need to use the SPI,
string-key, authentication-hex, or encryption-hex.</p>

<div class="steps"><a name="EN-US_TASK_0172365774__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li id="EN-US_TASK_0172365774__en-us_task_0172372417_step1144481584214400"><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmd290956109214400">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdname1042728309214400">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0172365774__en-us_task_0172372417_p1037589350214400">The system view is displayed.</p>
</p></li><li id="EN-US_TASK_0172365774__en-us_task_0172372417_step558057976214400"><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmd1219316183214400">Run <span><a href="cmdqueryname=ipsec+sa"><b><span class="cmdname" id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdname672877700214400">ipsec sa</span></b></a> <i><span class="varname" id="EN-US_TASK_0172365774__en-us_task_0172372417_varname657887863214400">sa-name</span></i></span></span><p><p id="EN-US_TASK_0172365774__en-us_task_0172372417_p334548169214400">An SA is created, and the SA view is displayed.</p>
</p></li><li id="EN-US_TASK_0172365774__en-us_task_0172372417_step1818056235214400"><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmd1673812129214400">Run <span><a href="cmdqueryname=proposal"><b><span class="cmdname" id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdname57981026214400">proposal</span></b></a> <i><span class="varname" id="EN-US_TASK_0172365774__en-us_task_0172372417_varname1786553061214400">proposal-name</span></i></span></span><p><p id="EN-US_TASK_0172365774__en-us_task_0172372417_p248876479214400">A security proposal is applied to the SA.</p>
<div class="note" id="EN-US_TASK_0172365774__en-us_task_0172372417_note1220885604214400"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172365774__en-us_task_0172372417_p218099343214400">A security proposal must be configured before it can be associated with protocol packet flows.</p>
<p id="EN-US_TASK_0172365774__en-us_task_0172372417_p373013072214400">One SA can use only one security proposal. If a security proposal has been applied to an SA, the SA can use another security proposal only after the original one is deleted.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172365774__en-us_task_0172372417_step1907108439214400"><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmd1578102798214400">Run <span><a href="cmdqueryname=sa+spi+inbound+outbound+ah+esp"><b><span class="cmdname" id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdname299946423214400">sa spi</span></b></a> { <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname1271659768214400">inbound</span></strong> | <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname1550700528214400">outbound</span></strong> } { <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname187793460214400">ah</span></strong> | <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname1824115741214400">esp</span></strong> } <i><span class="varname" id="EN-US_TASK_0172365774__en-us_task_0172372417_varname428072479214400">spi-number</span></i></span></span><p><p id="EN-US_TASK_0172365774__en-us_task_0172372417_p2074786976214400">An SPI is <span>set</span>.</p>
<div class="note" id="EN-US_TASK_0172365774__en-us_task_0172372417_note1484530841214400"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172365774__en-us_task_0172372417_p1044833841214400">The SPI uniquely identifies an SA. The inbound and outbound SPIs are set, and the inbound SPI on the local end must be the same as the outbound SPI on the peer end.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172365774__en-us_task_0172372417_step52217497214400"><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmd1446144103214400">To configure the authentication key, run either of the following commands:</span><ol type="a" id="EN-US_TASK_0172365774__en-us_task_0172372417_substeps1051647392214400"><li class="substepexpand" id="EN-US_TASK_0172365774__en-us_task_0172372417_substep1825810571214400"><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmd1004434814214400">Run <span><a href="cmdqueryname=sa+authentication-hex+inbound+outbound+ah+esp+cipher"><b><span class="cmdname" id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdname550568145214400">sa authentication-hex</span></b></a> { <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname1273558245214400">inbound</span></strong> | <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname101717849214400">outbound</span></strong> } { <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname143088421214400">ah</span></strong> | <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname970842049214400">esp</span></strong> } [ <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname504940484214400">cipher</span></strong> ] <i><span class="varname" id="EN-US_TASK_0172365774__en-us_task_0172372417_varname219335433214400">key-cipher-key</span></i></span></span><p><p id="EN-US_TASK_0172365774__en-us_task_0172372417_p603307339214400">An authentication key in hexadecimal format or ciphertext is set.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172365774__en-us_task_0172372417_substep1337313532214400"><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmd664682822214400">Run <span><a href="cmdqueryname=sa+string-key+inbound+outbound+ah+esp+cipher"><b><span class="cmdname" id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdname1878648587214400">sa string-key</span></b></a> { <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname1871271961214400">inbound</span></strong> | <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname12748862214400">outbound</span></strong> } { <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname2102665697214400">ah</span></strong> | <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname966644904214400">esp</span></strong> } [ <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname290139994214400">cipher</span></strong> ] <i><span class="varname" id="EN-US_TASK_0172365774__en-us_task_0172372417_varname1391644581214400">string-cipher-key</span></i></span></span><p><p id="EN-US_TASK_0172365774__en-us_task_0172372417_p1430660708214400">An authentication key in string format is set.</p>
</p></li></ol>
<p><div class="note" id="EN-US_TASK_0172365774__en-us_task_0172372417_note1149439888214400"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172365774__en-us_task_0172372417_p2020792851214400">An authentication key for outgoing protocol packets on the local end must be identical with that for incoming protocol packets on the peer end.</p>
<p id="EN-US_TASK_0172365774__en-us_task_0172372417_p578263172214400">If multiple authentication keys are configured, the latest one takes effect.</p>
<p id="EN-US_TASK_0172365774__en-us_task_0172372417_p1308958502214400">Updating keys periodically is recommended.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172365774__en-us_task_0172372417_step1341362433214400"><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmd2142568872214400">(Optional) Run <span><a href="cmdqueryname=sa+encryption-hex+inbound+outbound+esp+cipher"><b><span class="cmdname" id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdname1830963682214400">sa encryption-hex</span></b></a> { <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname1857604192214400">inbound</span></strong> | <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname15041758214400">outbound</span></strong> } <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname858928430214400">esp</span></strong> [ <strong><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdparmname198908619214400">cipher</span></strong> ] <i><span class="varname" id="EN-US_TASK_0172365774__en-us_task_0172372417_varname315388270214400">hex-cipher-key</span></i></span></span><p><p id="EN-US_TASK_0172365774__en-us_task_0172372417_p1379991123214400">An encryption key is set.</p>
</p></li><li id="EN-US_TASK_0172365774__en-us_task_0172372417_step1325295764214400"><span id="EN-US_TASK_0172365774__en-us_task_0172372417_cmd545518864214400">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172365774__en-us_task_0172372417_cmdname2139298540214400">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172365774__en-us_task_0172372417_p1276984941214400">The configuration is committed.</p>
</p></li></ol></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2082.html">Configuring OSPFv3 IPsec
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2071.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2073.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>