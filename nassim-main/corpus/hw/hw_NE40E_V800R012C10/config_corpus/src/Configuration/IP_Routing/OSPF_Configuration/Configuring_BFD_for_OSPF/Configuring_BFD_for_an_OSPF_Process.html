
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BFD for an OSPF Process">
<meta name="abstract" content="Configuring BFD for an OSPF process helps the system rapidly detect link states and speeds up OSPF convergence in the case of a link state change.">
<meta name="description" content="Configuring BFD for an OSPF process helps the system rapidly detect link states and speeds up OSPF convergence in the case of a link state change.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0048.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2237.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2048.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ospf,w00800033,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365608">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring BFD for an OSPF Process</title>
</head>
<body><a name="EN-US_TASK_0172365608"></a><a name="EN-US_TASK_0172365608"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BFD for an OSPF Process</h1>
<div class="taskbody"><p>Configuring BFD for an OSPF process helps the system rapidly detect link states and speeds up OSPF convergence in the case of a link state change.</p>
<div class="context"><a name="EN-US_TASK_0172365608__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After BFD is configured for an OSPF process, when detecting a link failure, BFD rapidly notifies the failure to <span class="keyword">Router</span>s on both ends of the link, triggering rapid OSPF convergence. When the OSPF neighbor relationship goes Down, the BFD session will be dynamically deleted.</p>
<p>Before configuring BFD for OSPF, enable BFD globally.</p>
<p>To configure BFD on all the interfaces in an OSPF process, perform the following operations on the <span class="keyword">Router</span>s at both ends of the link where a BFD session is to be set up:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365608__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span></span><p><p>The OSPF view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bfd+all-interfaces"><b><span class="cmdname">bfd all-interfaces</span></b></a> <strong><span>enable</span></strong></span><p><p>BFD is enabled for the OSPF process to create BFD sessions.</p>
</p></li><li><span>(Optional) Run <span><span><a href="cmdqueryname=bfd+all-interfaces"><b><span class="cmdname">bfd all-interfaces</span></b></a> { <strong><span>min-rx-interval</span></strong> <i><span class="varname">receive-interval</span></i> | <strong><span>min-tx-interval</span></strong> <i><span class="varname">transmit-interval</span></i> | <strong><span>detect-multiplier</span></strong> <i><span class="varname">multiplier-value</span></i> | <strong><span>frr-binding</span></strong> } <sup>*</sup></span></span></span><p><p>BFD session parameters are modified.</p>
<p>You can skip this step. The default interval at which BFD packets are transmitted and the default detection multiplier are recommended.</p>
<p>The parameters are configured based on the network status and network reliability requirements. A short interval at which BFD packets are transmitted can be configured for a link that has a higher requirement for reliability. A long interval at which BFD packets are transmitted can be configured for a link that has a lower requirement for reliability.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>Actual interval at which BFD packets are transmitted on the local <span class="keyword">Router</span> = Max { configured interval <i><span class="varname">transmit-interval</span></i> at which BFD packets are transmitted on the local <span class="keyword">Router</span>, configured interval <i><span class="varname">receive-interval</span></i> at which BFD packets are received on the peer <span class="keyword">Router</span> }</li><li>Actual interval at which BFD packets are received on the local <span class="keyword">Router</span> = Max { configured interval <i><span class="varname">transmit-interval</span></i> at which BFD packets are transmitted on the peer <span class="keyword">Router</span>, configured interval <i><span class="varname">receive-interval</span></i> at which BFD packets are received on the local <span class="keyword">Router</span> }</li><li>Actual time for detecting BFD packets = Actual interval at which BFD packets are received on the local <span class="keyword">Router</span> x Configured detection multiplier <i><span class="varname">multiplier-value</span></i> on the peer <span class="keyword">Router</span></li></ul>
<p>For example:</p>
<ul><li>On the local <span class="keyword">Router</span>, the configured interval at which BFD packets are transmitted is 200 ms; the configured interval at which BFD packets are received is 300 ms; the detection multiplier is 4.</li><li>On the peer <span class="keyword">Router</span>, the configured interval at which BFD packets are transmitted is 100 ms; the interval at which BFD packets are received is 600 ms; the detection multiplier is 5.</li></ul>
<p>Then:</p>
<ul><li>On the local <span class="keyword">Router</span>, the actual interval at which BFD packets are transmitted is 600 ms calculated by using the formula max {200 ms, 600 ms}; the interval at which BFD packets are received is 300 ms calculated by using the formula max {100 ms, 300 ms}; the detection period is 1500 ms calculated by multiplying 300 ms by 5.</li><li>On the peer <span class="keyword">Router</span>, the actual interval at which BFD packets are transmitted is 300 ms calculated by using the formula max {100 ms, 300 ms}, the actual interval at which BFD packets are received is 600 ms calculated by using the formula max {200 ms, 600 ms}, and the detection period is 2400 ms calculated by multiplying 600 ms by 4.</li></ul>
</div></div>
</p></li><li><span>(Optional) Prevent an interface from dynamically creating a BFD session.</span><p><p>After BFD for OSPF is configured, all interfaces on which neighbor relationships are Full in the OSPF process will create BFD sessions. To prevent specific interfaces from being enabled with BFD, disable these interfaces from dynamically creating BFD sessions.</p>
</p><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ospf+bfd+block"><b><span class="cmdname">ospf bfd block</span></b></a></span></span><p><p>An interface is prevented from dynamically creating a BFD session.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span><p><p>The OSPF view is displayed.</p>
</p></li></ol>
</li><li><span>(Optional) Run <a href="cmdqueryname=bfd+all-interfaces+incr-cost"><b><span class="cmdname">bfd all-interfaces incr-cost</span></b></a> { <i><span class="varname">cost</span></i> | <strong><span>max-reachable</span></strong> } [ <strong><span>wtr</span></strong> <em>wtrIntvl</em> ] The OSPF process is configured to adjust the cost based on the status of an associated BFD session.</span><p><p>If the function of adjusting the cost based on the status of an associated BFD session is configured both for a process and an interface, the configuration on the interface takes precedence.</p>
<p>The delay configured for an interface to restore the cost based on the BFD session status takes precedence over that configured for a process to restore the cost based on the BFD session status.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0048.html">Configuring BFD for OSPF
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2237.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2048.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>