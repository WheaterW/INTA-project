
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Device to Advertise Extended Community Attributes">
<meta name="abstract" content="The extended community attributes defined in a route-policy take effect only after the extended community attributes are advertised.">
<meta name="description" content="The extended community attributes defined in a route-policy take effect only after the extended community attributes are advertised.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3041.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4043.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3044.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="h00414125">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001722906406">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the Device to Advertise Extended Community Attributes</title>
</head>
<body><a name="EN-US_TASK_0000001722906406"></a><a name="EN-US_TASK_0000001722906406"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Device to Advertise Extended Community Attributes</h1>
<div class="taskbody"><p>The extended community attributes defined in a route-policy take effect only after the extended community attributes are advertised.</p>
<div class="steps-unordered"><a name="EN-US_TASK_0000001722906406__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Use a route-policy to define specific extended community attributes before configuring BGP to advertise the extended community attributes.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span><p><p>The IPv4 unicast address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> } <a href="cmdqueryname=route-policy+export"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> <strong><span>export</span></strong></span><p><p>An export route-policy is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> } <a href="cmdqueryname=advertise-ext-community"><b><span class="cmdname">advertise-ext-community</span></b></a></span><p><p>The device is configured to advertise extended community attributes to the specified peer.</p>
</p><p><p></p>
<p>If a peer or peer group only needs to accept routes but not extended community attributes, you can run the <a href="cmdqueryname=peer+discard-ext-community"><b><span class="cmdname">peer discard-ext-community</span></b></a> command for the peer or peer group to discard the extended community attributes carried in received routes. If the peer or peer group only needs to discard the RPKI BGP origin AS validation result, specify <a href="cmdqueryname=origin-as-validation"><b><span class="cmdname">origin-as-validation</span></b></a> in the command.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> }<a href="cmdqueryname=advertise+ebgp+link-bandwidth"><b><span class="cmdname"> advertise ebgp link-bandwidth</span></b></a></span><p><p>The device is configured to advertise the link bandwidth extended community attribute to the specified EBGP peer.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> }<a href="cmdqueryname=advertise+link-bandwidth+transitive"><b><span class="cmdname"> advertise link-bandwidth transitive</span></b></a></span><p><p>The device is configured to convert the link bandwidth extended community attribute (optional non-transitive) carried in BGP routes into an optional transitive attribute before advertising the routes to the specified peer. If the device changes the next-hop address of a received route carrying the link bandwidth extended community attribute to its own address, the device deletes this attribute before advertising the route to the specified peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Use a route-filter to define specific extended community attributes before configuring BGP to advertise the extended community attributes.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong></span><p><p>The IPv4 unicast address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> } <a href="cmdqueryname=route-filter+export"><b><span class="cmdname">route-filter</span></b></a> <i><span class="varname">route-filter-name</span></i> <strong><span>export</span></strong></span><p><p>An export route-filter is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> } <a href="cmdqueryname=advertise-ext-community"><b><span class="cmdname">advertise-ext-community</span></b></a></span><p><p>The device is configured to advertise extended community attributes to the specified peer.</p>
</p><p><p>After the <a href="cmdqueryname=peer+advertise-ext-community"><b><span class="cmdname">peer advertise-ext-community</span></b></a> command is run, BGP advertises the routes with extended community attributes to the specified peer. If the peer only needs to accept the routes but not the extended community attributes, you can run the <a href="cmdqueryname=peer+discard-ext-community"><b><span class="cmdname">peer discard-ext-community</span></b></a> command for the peer to discard the extended community attributes in the received routing information.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> }<a href="cmdqueryname=advertise+ebgp+link-bandwidth"><b><span class="cmdname"> advertise ebgp link-bandwidth</span></b></a></span><p><p>The device is configured to advertise the link bandwidth extended community attribute to the specified EBGP peer.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> }<a href="cmdqueryname=advertise+link-bandwidth+transitive"><b><span class="cmdname"> advertise link-bandwidth transitive</span></b></a></span><p><p>The device is configured to convert the link bandwidth extended community attribute (optional non-transitive) carried in BGP routes into an optional transitive attribute before advertising the routes to the specified peer. If the device changes the next-hop address of a received route carrying the link bandwidth extended community attribute to its own address, the device deletes this attribute before advertising the route to the specified peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3041.html">Configuring BGP Community Attributes
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4043.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3044.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>