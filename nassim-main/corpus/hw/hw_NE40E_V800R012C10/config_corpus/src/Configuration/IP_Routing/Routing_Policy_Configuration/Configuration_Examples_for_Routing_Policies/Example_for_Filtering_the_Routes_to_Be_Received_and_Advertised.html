
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Filtering the Routes to Be Received and Advertised">
<meta name="abstract" content="Filters can be applied to the routes to be received and advertised based on networking requirements.">
<meta name="description" content="Filters can be applied to the routes to be received and advertised based on networking requirements.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0028.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0030.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909,route-policyvrp,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00414125">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366589">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Filtering the Routes to Be Received and Advertised</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366589"></a><a name="EN-US_TASK_0172366589"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Filtering the Routes to Be Received and Advertised</h1>
<div class="taskbody"><p>Filters can be applied to the routes to be received and advertised based on networking requirements.</p>
<div class="context"><a name="EN-US_TASK_0172366589__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the OSPF network shown in <a href="#EN-US_TASK_0172366589__fig173341440154413">Figure 1</a>, <span class="keyword">Device</span>A receives routes from the Internet and provides some of the Internet routes for <span class="keyword">Device</span>B. It is required that <span class="keyword">Device</span>A provide only routes 172.16.17.0/24, 172.16.18.0/24, and 172.16.19.0/24 to <span class="keyword">Device</span>B, <span class="keyword">Device</span>C accept only 172.16.18.0/24, and that <span class="keyword">Device</span>D accept all the routes provided by <span class="keyword">Device</span>B.</p>
<div class="fignone" id="EN-US_TASK_0172366589__fig173341440154413"><a name="EN-US_TASK_0172366589__fig173341440154413"></a><a name="fig173341440154413"></a><span class="figcap"><b>Figure 1 </b>Network diagram of filtering routes to be received and advertised</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 through 3 in this example represent GE<span>0/1/0</span>, GE<span>0/2/0</span>, and GE<span>0/3/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001410717820.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366589__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>During the configuration, pay attention to the following points:</p>
<ul><li><p>When configuring an IP prefix list, you need to specify the IP prefix range as required.</p>
</li><li><p>The name of the IP prefix list to be referenced is case-sensitive.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366589__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure basic OSPF functions on <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, and <span class="keyword">Device</span>D.</p>
</li><li><p>Configure static routes on <span class="keyword">Device</span>A and import them to the OSPF routing table.</p>
</li><li><p>Configure an export policy on <span class="keyword">Device</span>A and check the filtering result on <span class="keyword">Device</span>B.</p>
</li><li><p>Configure an import policy on <span class="keyword">Device</span>C and check the filtering result on <span class="keyword">Device</span>C.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366589__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Five static routes imported by <span class="keyword">Device</span>A</p>
</li><li><p>OSPF backbone area (area 0) where <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, and <span class="keyword">Device</span>D reside</p>
</li><li><p>Name of the IP prefix list, which is used to filter routes</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366589__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IP address to each interface.</span></li><li><span>Configure OSPF.</span><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> ospf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1]<strong> area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1-area-0.0.0.0]<strong> network 192.168.1.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1-area-0.0.0.0]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ospf-1-area-0.0.0.0]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ospf-1]<strong> quit</strong></pre>
<p># Configure <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B]<strong> ospf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospf-1]<strong> area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospf-1-area-0.0.0.0]<strong> network 192.168.1.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospf-1-area-0.0.0.0]<strong> network 192.168.2.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospf-1-area-0.0.0.0]<strong> network 192.168.3.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospf-1-area-0.0.0.0]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ospf-1-area-0.0.0.0]<strong> quit</strong></pre>
<p># Configure <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C]<strong> ospf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-ospf-1]<strong> area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-ospf-1-area-0.0.0.0]<strong> network 192.168.2.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-ospf-1-area-0.0.0.0]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-ospf-1-area-0.0.0.0]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-ospf-1]<strong> quit</strong></pre>
<p># Configure <span class="keyword">Device</span>D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D]<strong> ospf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospf-1]<strong> area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospf-1-area-0.0.0.0]<strong> network 192.168.3.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospf-1-area-0.0.0.0]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-ospf-1-area-0.0.0.0]<strong> quit</strong></pre>
</p></li><li><span>Configure five static routes on <span class="keyword">Device</span>A and import them to the OSPF routing table.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ip route-static 172.16.16.0 24 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>ip route-static 172.16.17.0 24 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>ip route-static 172.16.18.0 24 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>ip route-static 172.16.19.0 24 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> ip route-static 172.16.20.0 24 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> ospf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1]<strong> import-route static</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ospf-1]<strong> quit</strong></pre>
<p># Check the IP routing table on <span class="keyword">Device</span>B. The command output shows the five static routes imported by OSPF.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>display ip routing-table</strong></pre>
<pre class="screen"><span class="keyword">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table : Public
         Destinations : 22       Routes : 22

Destination/Mask    Proto  Pre  Cost        Flags NextHop         Interface

        1.1.1.1/32  Direct 0    0             D  127.0.0.1       LoopBack1
      127.0.0.0/8   Direct 0    0             D  127.0.0.1       InLoopBack0
      127.0.0.1/32  Direct 0    0             D  127.0.0.1       InLoopBack0
127.255.255.255/32  Direct 0    0             D  127.0.0.1       InLoopBack0
255.255.255.255/32  Direct 0    0             D  127.0.0.1       InLoopBack0
   <strong>172.16.16.0/24</strong>  <strong>O_ASE</strong>  <strong>150</strong>  <strong>1</strong>             <strong>D</strong>  <strong>192.168.1.1</strong>     <strong>GigabitEthernet<span>0/1/0</span></strong>
   <strong>172.16.17.0/24</strong>  <strong>O_ASE</strong>  <strong>150</strong>  <strong>1</strong>             <strong>D</strong>  <strong>192.168.1.1</strong>     <strong>GigabitEthernet<span>0/1/0</span></strong>
   <strong>172.16.18.0/24</strong>  <strong>O_ASE</strong>  <strong>150</strong>  <strong>1</strong>             <strong>D</strong>  <strong>192.168.1.1</strong>     <strong>GigabitEthernet<span>0/1/0</span></strong>
   <strong>172.16.19.0/24</strong>  <strong>O_ASE</strong>  <strong>150</strong>  <strong>1</strong>             <strong>D</strong>  <strong>192.168.1.1</strong>     <strong>GigabitEthernet<span>0/1/0</span></strong>
   <strong>172.16.20.0/24</strong>  <strong>O_ASE</strong>  <strong>150</strong>  <strong>1</strong>             <strong>D</strong>  <strong>192.168.1.1</strong>     <strong>GigabitEthernet<span>0/1/0</span></strong>
    192.168.1.0/24  Direct 0    0             D  192.168.1.2     GigabitEthernet<span>0/1/0</span>
    192.168.1.1/32  Direct 0    0             D  192.168.1.1     GigabitEthernet<span>0/1/0</span>
    192.168.1.2/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
  192.168.1.255/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
    192.168.2.0/24  Direct 0    0             D  192.168.2.1     GigabitEthernet<span>0/3/0</span>
    192.168.2.1/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/3/0</span>
    192.168.2.2/32  Direct 0    0             D  192.168.2.2     GigabitEthernet<span>0/3/0</span>
  192.168.2.255/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/3/0</span>
    192.168.3.0/24  Direct 0    0             D  192.168.3.1     GigabitEthernet<span>0/2/0</span>
    192.168.3.1/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/2/0</span>
    192.168.3.2/32  Direct 0    0             D  192.168.3.2     GigabitEthernet<span>0/2/0</span>
  192.168.3.255/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/2/0</span></pre>
</p></li><li><span>Configure an export policy to filter routes to be advertised.</span><p><p># Configure an IP prefix list named <strong>a2b</strong> on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ip ip-prefix a2b index 10 permit 172.16.17.0 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>ip ip-prefix a2b index 20 permit 172.16.18.0 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>ip ip-prefix a2b index 30 permit 172.16.19.0 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Configure an export policy that is based on the IP prefix list <strong>a2b</strong> on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> ospf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1] <strong>filter-policy ip-prefix a2b export static</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ospf-1] <strong>quit</strong></pre>
<p># Check the IP routing table on <span class="keyword">Device</span>B. The command output shows that <span class="keyword">Device</span>B accepted only the three routes defined in IP prefix list <strong>a2b</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>display ip routing-table</strong></pre>
<pre class="screen"><span class="keyword">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table : Public
         Destinations : 20       Routes : 20

Destination/Mask    Proto  Pre  Cost        Flags NextHop         Interface

        1.1.1.1/32  Direct 0    0             D  127.0.0.1       LoopBack1
      127.0.0.0/8   Direct 0    0             D  127.0.0.1       InLoopBack0
      127.0.0.1/32  Direct 0    0             D  127.0.0.1       InLoopBack0
127.255.255.255/32  Direct 0    0             D  127.0.0.1       InLoopBack0
255.255.255.255/32  Direct 0    0             D  127.0.0.1       InLoopBack0
   <strong>172.16.17.0/24</strong>  <strong>O_ASE</strong>  <strong>150</strong>  <strong>1</strong>             <strong>D</strong>  <strong>192.168.1.1</strong>     <strong>GigabitEthernet<span>0/1/0</span></strong>
   <strong>172.16.18.0/24</strong>  <strong>O_ASE</strong>  <strong>150</strong>  <strong>1</strong>             <strong>D</strong>  <strong>192.168.1.1</strong>     <strong>GigabitEthernet<span>0/1/0</span></strong>
   <strong>172.16.19.0/24</strong>  <strong>O_ASE</strong>  <strong>150</strong>  <strong>1</strong>             <strong>D</strong>  <strong>192.168.1.1</strong>     <strong>GigabitEthernet<span>0/1/0</span></strong>
    192.168.1.0/24  Direct 0    0             D  192.168.1.2     GigabitEthernet<span>0/1/0</span>
    192.168.1.1/32  Direct 0    0             D  192.168.1.1     GigabitEthernet<span>0/1/0</span>
    192.168.1.2/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
  192.168.1.255/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
    192.168.2.0/24  Direct 0    0             D  192.168.2.1     GigabitEthernet<span>0/3/0</span>
    192.168.2.1/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/3/0</span>
    192.168.2.2/32  Direct 0    0             D  192.168.2.2     GigabitEthernet<span>0/3/0</span>
  192.168.2.255/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/3/0</span>
    192.168.3.0/24  Direct 0    0             D  192.168.3.1     GigabitEthernet<span>0/2/0</span>
    192.168.3.1/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/2/0</span>
    192.168.3.2/32  Direct 0    0             D  192.168.3.2     GigabitEthernet<span>0/2/0</span>
  192.168.3.255/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/2/0</span></pre>
</p></li><li><span>Configure an import policy.</span><p><p># Configure an IP prefix list named <strong>in</strong> on <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>ip ip-prefix in index 10 permit 172.16.18.0 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>commit</strong></pre>
<p># Configure an import policy that is based on the IP prefix list <strong>in</strong> on <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>ospf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-ospf-1] <strong>filter-policy ip-prefix in import</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-ospf-1] <strong>commit</strong></pre>
<p># Check the IP routing table on <span class="keyword">Device</span>C. The command output shows that <span class="keyword">Device</span>C accepted only one route (the one matching IP prefix list <strong>in</strong>).</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>display ip routing-table</strong></pre>
<pre class="screen"><span class="keyword">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table : Public
         Destinations : 12       Routes : 12

Destination/Mask    Proto  Pre  Cost        Flags NextHop         Interface

        1.1.1.1/32  O_ASE  10   1             D  192.168.2.1     GigabitEthernet<span>0/1/0</span>
      127.0.0.0/8   Direct 0    0             D  127.0.0.1       InLoopBack0
      127.0.0.1/32  Direct 0    0             D  127.0.0.1       InLoopBack0
127.255.255.255/32  Direct 0    0             D  127.0.0.1       InLoopBack0
255.255.255.255/32  Direct 0    0             D  127.0.0.1       InLoopBack0
   <strong>172.16.18.0/24</strong>  <strong>O_ASE</strong>  <strong>150</strong>  <strong>1</strong>             <strong>D</strong>  <strong>192.168.2.1</strong>     <strong>GigabitEthernet<span>0/1/0</span></strong>
    192.168.1.0/24  O_ASE  10   2             D  192.168.2.1     GigabitEthernet<span>0/1/0</span>
    192.168.2.0/24  Direct 0    0             D  192.168.2.2     GigabitEthernet<span>0/1/0</span>
    192.168.2.1/32  Direct 0    0             D  192.168.2.1     GigabitEthernet<span>0/1/0</span>
    192.168.2.2/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
  192.168.2.255/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
    192.168.3.0/24  O_ASE  10   2             D  192.168.2.1     GigabitEthernet<span>0/1/0</span></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172366589__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.1.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> filter-policy ip-prefix a2b export static</pre>
<pre class="screen"> import-route static</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.1.0 0.0.0.255</pre>
<pre class="screen">#</pre>
<pre class="screen">ip ip-prefix a2b index 10 permit 172.16.17.0 24</pre>
<pre class="screen">ip ip-prefix a2b index 20 permit 172.16.18.0 24</pre>
<pre class="screen">ip ip-prefix a2b index 30 permit 172.16.19.0 24</pre>
<pre class="screen">#</pre>
<pre class="screen">ip route-static 172.16.16.0 255.255.255.0 NULL0</pre>
<pre class="screen">ip route-static 172.16.17.0 255.255.255.0 NULL0</pre>
<pre class="screen">ip route-static 172.16.18.0 255.255.255.0 NULL0</pre>
<pre class="screen">ip route-static 172.16.19.0 255.255.255.0 NULL0</pre>
<pre class="screen">ip route-static 172.16.20.0 255.255.255.0 NULL0</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.1.2 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.3.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.2.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.1.0 0.0.0.255</pre>
<pre class="screen">  network 192.168.2.0 0.0.0.255</pre>
<pre class="screen">  network 192.168.3.0 0.0.0.255</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>C configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>C</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.2.2 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> filter-policy ip-prefix in import</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.2.0 0.0.0.255</pre>
<pre class="screen">#</pre>
<pre class="screen">ip ip-prefix in index 10 permit 172.16.18.0 24</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>D configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>D</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.3.2 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.3.0 0.0.0.255</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0028.html">Configuration Examples for Routing Policies
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0030.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>