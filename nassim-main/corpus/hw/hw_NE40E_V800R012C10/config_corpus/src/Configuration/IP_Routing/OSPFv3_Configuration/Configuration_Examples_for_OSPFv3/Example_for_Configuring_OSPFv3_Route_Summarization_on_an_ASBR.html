
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring OSPFv3 Route Summarization on an ASBR">
<meta name="abstract" content="This section provides an example showing how to configure OSPFv3 route summarization on an ASBR.">
<meta name="description" content="This section provides an example showing how to configure OSPFv3 route summarization on an ASBR.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2062.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_0018_ospfv3.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2091.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,56675587z00801081,w00556928,w00606909,l00455378,">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365813">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring OSPFv3 Route Summarization on an ASBR</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172365813"></a><a name="EN-US_TASK_0172365813"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring OSPFv3 Route Summarization on an ASBR</h1>
<div class="taskbody"><p>This section provides an example showing how to configure OSPFv3 route summarization on an ASBR.</p>
<div class="context"><a name="EN-US_TASK_0172365813__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>Routes with the same IPv6 prefix can be summarized into one route. On a large-scale OSPFv3 network, route lookup may slow down because of the large size of the routing table. To reduce the routing table size and simplify management, configure route summarization. With route summarization, if a link connected to a device within the IPv6 address range that has been summarized alternates between up and down, the link status change is not advertised to the devices beyond the IPv6 address range. This prevents route flapping and improves network stability.</p>
<p>In <a href="#EN-US_TASK_0172365813__fig_dc_vrp_ospfv3_cfg_209001">Figure 1</a>, both the ASBR and <span class="keyword">Device</span> A run OSPFv3. The ASBR imports three static routes with the same prefix: 2001:DB8:2::1/128, 2001:DB8:3::1/128, and 2001:DB8:4::1/128. After the three static routes with the same prefix are summarized into route 2001:DB8::/32 on the ASBR, the ASBR advertises only this route to area 0. This reduces the size of the routing table, simplifies route management, and improves network stability.</p>
<div class="fignone" id="EN-US_TASK_0172365813__fig_dc_vrp_ospfv3_cfg_209001"><a name="EN-US_TASK_0172365813__fig_dc_vrp_ospfv3_cfg_209001"></a><a name="fig_dc_vrp_ospfv3_cfg_209001"></a><span class="figcap"><b>Figure 1 </b>Example for configuring OSPFv3 route summarization on an ASBR</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interface 1 in this example represents GE <span>0/1/0</span>.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_ospfv3_cfg_209001.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365813__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>To improve security, you are advised to deploy OSPFv3 authentication. For details, see "Configuring OSPFv3 Authentication". OSPFv3 IPsec is used as an example. For details, see "Example for Configuring IPsec for OSPFv3."</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365813__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Assign an IP address to each interface to ensure that devices on the network can communicate with each other.</p>
</li><li><p>Configure basic OSPFv3 functions on the ASBR and <span class="keyword">Device</span> A.</p>
</li><li><p>Configure three static routes (2001:DB8:2::1/128, 2001:DB8:3::1/128, and 2001:DB8:4::1/128) on the ASBR and import them into OSPFv3.</p>
</li><li><p>Configure OSPFv3 route summarization on the ASBR.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365813__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Area 0</p>
</li><li><p>Router ID (1.1.1.1) of <span class="keyword">Device</span> A</p>
</li><li><p>Router ID (2.2.2.2) of the ASBR</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365813__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure IP addresses for interfaces. For detailed configurations, see Configuration Files.</span></li><li><span>Configure basic OSPFv3 functions.</span><p><p># Configure <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ospfv3 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospfv3-1] <strong>router-id 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospfv3-1] <strong>area 0.0.0.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospfv3-1-area-0.0.0.0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospfv3-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Configure the ASBR.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR] <strong>ospfv3 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR-ospfv3-1] <strong>router-id 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR-ospfv3-1] <strong>area 0.0.0.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR-ospfv3-1-area-0.0.0.0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR-ospfv3-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR-GigabitEthernet<span>0/1/0</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR] <strong>commit</strong></pre>
<p># After the configuration is complete, run the <a href="cmdqueryname=display+ospfv3+peer"><b><span class="cmdname">display ospfv3 peer</span></b></a> command. The command output shows that a neighbor relationship has been established between <span class="keyword">Device</span>A and the ASBR. The following example uses the command output on the ASBR:</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR] <strong>display ospfv3 peer</strong>

OSPFv3 Process (1)
Total number of peer(s): 1
 Peer(s) in full state: 1
OSPFv3 Area (0.0.0.0)
Neighbor ID      Pri State            Dead Time  Interface          Instance ID
1.1.1.1            1 Full/DR          00:00:37   GE<span>0/1/0</span>               0    </pre>
</p></li><li><span>Configure three static routes with the same prefix on the ASBR and import them into OSPFv3.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR] <strong>ipv6 route-static 2001:DB8:2::1 128 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR] <strong>ipv6 route-static 2001:DB8:3::1 128 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR] <strong>ipv6 route-static 2001:DB8:4::1 128 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR] <strong>ospfv3 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR-ospfv3-1] <strong>import-route static</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR-ospfv3-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR] <strong>commit</strong></pre>
<p># After the configuration is complete, run the <a href="cmdqueryname=display+ospfv3+lsdb"><b><span class="cmdname">display ospfv3 lsdb</span></b></a> command on the ASBR to check OSPFv3 LSDB information. There are three AS-external LSAs in the LSDB, and the prefixes of corresponding routes are 2001:DB8:2::/128, 2001:DB8:3::/128, and 2001:DB8:4::/128, indicating that route summarization is not performed.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR] <strong>display ospfv3 lsdb</strong>
           OSPFv3 Router with ID (2.2.2.2) (Process 1)

               Link-LSA (Interface GE<span>0/1/0</span>)
Link State ID   Origin Router    Age   Seq#       CkSum      Prefix
0.0.0.18        1.1.1.1          172   0x80000002 0xa78d          1
0.0.0.18        2.2.2.2          117   0x80000002 0xde3b          1

               Router-LSA (Area 0.0.0.0)
Link State ID   Origin Router    Age   Seq#       CkSum    Link
0.0.0.1         1.1.1.1          115   0x80000002 0xd020      1
0.0.0.1         2.2.2.2          80    0x80000003 0xb633      1

               Network-LSA (Area 0.0.0.0)
Link State ID   Origin Router    Age   Seq#       CkSum 
0.0.0.18        1.1.1.1          115   0x80000001 0xd333

               Intra-Area-Prefix-LSA (Area 0.0.0.0)
Link State ID   Origin Router    Age   Seq#       CkSum   Prefix Reference      
0.0.0.1         1.1.1.1          115   0x80000001 0x279b       1 Network-LSA    

               AS-External-LSA
Link State ID   Origin Router    Age   Seq#       CkSum  Type  
<strong>0.0.0.1         2.2.2.2          76    0x80000001 0xade0 E2    
0.0.0.2         2.2.2.2          76    0x80000001 0xb3d8 E2    
0.0.0.3         2.2.2.2          76    0x80000001 0xb9d0 E2 </strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR] <strong>display ospfv3 lsdb external</strong>

           OSPFv3 Router with ID (2.2.2.2) (Process 1)

               AS-External-LSA

  LS Age: 116
  LS Type: AS-External-LSA
  Link State ID: 0.0.0.1
  Originating Router: 2.2.2.2
  LS Seq Number: 0x80000001
  Retransmit Count: 0
  Checksum: 0xade0
  Length: 48
  Flags: (E|-|T)
   Metric Type: 2 (Larger than any link state path)
      Metric: 1
   <strong>Prefix: 2001:DB8:2::1/128</strong>
    Prefix Options: 0 (-|-|-|-|-)
    Tag: 1

  LS Age: 116
  LS Type: AS-External-LSA
  Link State ID: 0.0.0.2
  Originating Router: 2.2.2.2
  LS Seq Number: 0x80000001
  Retransmit Count: 0
  Checksum: 0xb3d8
  Length: 48    
  Flags: (E|-|T)
   Metric Type: 2 (Larger than any link state path)
      Metric: 1 
   <strong>Prefix: 2001:DB8:3::1/128</strong>
    Prefix Options: 0 (-|-|-|-|-)
    Tag: 1      
                
  LS Age: 116   
  LS Type: AS-External-LSA
  Link State ID: 0.0.0.3
  Originating Router: 2.2.2.2
  LS Seq Number: 0x80000001
  Retransmit Count: 0
  Checksum: 0xb9d0
  Length: 48    
  Flags: (E|-|T)
   Metric Type: 2 (Larger than any link state path)
      Metric: 1 
   <strong>Prefix: 2001:DB8:4::1/128</strong>
    Prefix Options: 0 (-|-|-|-|-)
    Tag: 1      </pre>
</p></li><li><span>Configure route summarization on the ASBR.</span><p><p># On the ASBR, summarize three static routes 2001:DB8:2::1/128, 2001:DB8:3::1/128, and 2001:DB8:4::1/128 into route 2001:DB8::/32.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR] <strong>ospfv3 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR-ospfv3-1] <strong>asbr-summary 2001:DB8:: 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR-ospfv3-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASBR] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># After route summarization is configured, run the <a href="cmdqueryname=display+ospfv3+lsdb"><b><span class="cmdname">display ospfv3 lsdb</span></b></a> command on the ASBR. The command output shows that the three static routes 2001:DB8:2::1/128, 2001:DB8:3::1/128, and 2001:DB8:4::1/128 have been summarized into route 2001:DB8::/32.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR] <strong>display ospfv3 lsdb</strong>

           OSPFv3 Router with ID (2.2.2.2) (Process 1)

               Link-LSA (Interface GE<span>0/1/0</span>)
Link State ID   Origin Router    Age   Seq#       CkSum      Prefix
0.0.0.18        1.1.1.1          643   0x80000002 0xa78d          1
0.0.0.18        2.2.2.2          588   0x80000002 0xde3b          1

               Router-LSA (Area 0.0.0.0)
Link State ID   Origin Router    Age   Seq#       CkSum    Link
0.0.0.1         1.1.1.1          586   0x80000002 0xd020      1
0.0.0.1         2.2.2.2          551   0x80000003 0xb633      1

               Network-LSA (Area 0.0.0.0)
Link State ID   Origin Router    Age   Seq#       CkSum 
0.0.0.18        1.1.1.1          586   0x80000001 0xd333

               Intra-Area-Prefix-LSA (Area 0.0.0.0)
Link State ID   Origin Router    Age   Seq#       CkSum   Prefix Reference      
0.0.0.1         1.1.1.1          586   0x80000001 0x279b       1 Network-LSA    

               AS-External-LSA
Link State ID   Origin Router    Age   Seq#       CkSum  Type  
<strong>0.0.0.4         2.2.2.2          123   0x80000001 0x606f E2    </strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR] <strong>display ospfv3 lsdb external</strong>

           OSPFv3 Router with ID (2.2.2.2) (Process 1)

               AS-External-LSA

  LS Age: 133
  LS Type: AS-External-LSA
  Link State ID: 0.0.0.4
  Originating Router: 2.2.2.2
  LS Seq Number: 0x80000001
  Retransmit Count: 0
  Checksum: 0x606f
  Length: 36
  Flags: (E|-|T)
   Metric Type: 2 (Larger than any link state path)
      Metric: 2
   <strong>Prefix: 2001:DB8::/32</strong>
    Prefix Options: 0 (-|-|-|-|-)
    Tag: 1</pre>
<p># Run the <a href="cmdqueryname=display+ospfv3+asbr-summary"><b><span class="cmdname">display ospfv3 asbr-summary</span></b></a> command on the ASBR. The command output shows information about the summary route of the static routes imported by OSPFv3.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASBR] <strong>display ospfv3 asbr-summary</strong>

OSPFv3 Process (1)
 Prefix                                 Prefix-Len   Matched          Status        
 2001:DB8::                              32           3 [Active]       Advertised    </pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172365813__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#
sysname DeviceA
#               
ospfv3 1        
 router-id 1.1.1.1
 area 0.0.0.0   
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:1::2/64
 ospfv3 1 area 0.0.0.0
#               
return </pre>
</li><li><p>ASBR configuration file</p>
<pre class="screen">#
sysname ASBR
#               
ospfv3 1        
 router-id 2.2.2.2
 import-route static
 asbr-summary 2001:DB8:: 32
 area 0.0.0.0   
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:1::1/64
 ospfv3 1 area 0.0.0.0
#               
ipv6 route-static 2001:DB8:2::1 128 NULL0
ipv6 route-static 2001:DB8:3::1 128 NULL0
ipv6 route-static 2001:DB8:4::1 128 NULL0
#               
return      </pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2062.html">Configuration Examples for OSPFv3
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_0018_ospfv3.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2091.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>