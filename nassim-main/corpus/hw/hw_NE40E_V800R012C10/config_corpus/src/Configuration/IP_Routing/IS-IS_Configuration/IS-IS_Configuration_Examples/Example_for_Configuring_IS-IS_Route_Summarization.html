
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring IS-IS Route Summarization">
<meta name="abstract" content="This section provides an example for configuring IS-IS route summarization.">
<meta name="description" content="This section provides an example for configuring IS-IS route summarization.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0078.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_2023.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0116.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909,l00455378,isis">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366116">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring IS-IS Route Summarization</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366116"></a><a name="EN-US_TASK_0172366116"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring IS-IS Route Summarization</h1>
<div class="taskbody"><p>This section provides an example for configuring IS-IS route summarization.</p>
<div class="context"><a name="EN-US_TASK_0172366116__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On a medium-or large-scale IS-IS network, excessive routing entries consume a large number of system resources during route calculation and management. Therefore, route summarization needs to be configured to summarize routes with the same IPv4 prefix into one route, which effectively reduces the size of the routing table. In this way, the usage of system resources is reduced.</p>
<p><a href="#EN-US_TASK_0172366116__fig_dc_vrp_isis_cfg_011101">Figure 1</a> shows the networking.</p>
<ul><li><p><span class="keyword">Device</span> A, <span class="keyword">Device</span> B, and <span class="keyword">Device</span> C run IS-IS to communicate with each other.</p>
</li><li><p><span class="keyword">Device</span> A belongs to area 20. <span class="keyword">Device</span> B and <span class="keyword">Device</span> C belong to area 10.</p>
</li><li><p><span class="keyword">Device</span> A is a Level-2 device, <span class="keyword">Device</span> B is a Level-1-2 device, and <span class="keyword">Device</span> C is a Level-1 device.</p>
</li><li><p><span class="keyword">Device</span> B maintains both Level-1 and Level-2 LSDBs and leaks the routes to network segments 172.16.1.0/24, 172.16.2.0/24, and 172.16.3.0/24 from the Level-1 area to the Level-2 area. If the interface with the IP address 172.16.1.1/24 on <span class="keyword">Device</span> C frequently alternates between up and down, the changes will be advertised to the Level-2 area, LSPs will be frequently flooded, and <span class="keyword">Device</span>B will frequently calculate routes using the SPF algorithm, causing high CPU usage on <span class="keyword">Device</span>B or even network flapping.</p>
<p>To solve this problem, configure <span class="keyword">Device</span> B to summarize routes to the three network segments into the route 172.16.0.0/16. This summarization reduces the number of routes to be maintained by <span class="keyword">Device</span> B and prevents interface-state alteration in the Level-1 area from affecting route convergence in the Level-2 area.</p>
</li></ul>
<div class="fignone" id="EN-US_TASK_0172366116__fig_dc_vrp_isis_cfg_011101"><a name="EN-US_TASK_0172366116__fig_dc_vrp_isis_cfg_011101"></a><a name="fig_dc_vrp_isis_cfg_011101"></a><span class="figcap"><b>Figure 1 </b>IS-IS route summarization networking</span><br><span><img class="vsd" src="images/fig_dc_vrp_isis_cfg_011101.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.223322332233224%" id="mcps1.4.1.6.1.4.1.1" liSelected="liSelected"><p>Device Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.223322332233224%" id="mcps1.4.1.6.1.4.1.2" liSelected="liSelected"><p>Interface</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.55335533553355%" id="mcps1.4.1.6.1.4.1.3" liSelected="liSelected"><p>IP Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.4.1.6.1.4.1.1 "><p><span class="keyword">Device</span> A</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.4.1.6.1.4.1.2 "><p>GE <span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.4.1.6.1.4.1.3 "><p>172.17.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.223322332233224%" headers="mcps1.4.1.6.1.4.1.1 "><p><span class="keyword">Device</span> B</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.4.1.6.1.4.1.2 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.4.1.6.1.4.1.3 "><p>172.16.4.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.4.1.2 "><p>GE <span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.4.1.3 "><p>172.17.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.4.1.6.1.4.1.1 "><p><span class="keyword">Device</span> C</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.4.1.6.1.4.1.2 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.4.1.6.1.4.1.3 "><p>172.16.4.1/24</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366116__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>To improve security, you are advised to configure IS-IS authentication. For details, see "Configuring IS-IS Authentication." IS-IS interface authentication is used as an example. For details, see Example for Configuring Basic IS-IS Functions.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366116__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Enable IS-IS on each <span class="keyword">Router</span> and check the IS-IS routing table.</p>
</li><li><p>Configure <span class="keyword">Device</span> B to summarize routes and check the routing table.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366116__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need area ID (20) of <span class="keyword">Device</span> A, area ID (10) of <span class="keyword">Device</span> B and <span class="keyword">Device</span> C, and system IDs starting from 0000.0000.0001.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366116__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address for each interface. For configuration details, see <a href="#EN-US_TASK_0172366116__section_dc_vrp_isis_cfg_011105">Configuration Files</a> in this section.</span></li><li><span>Configure basic IS-IS functions.</span><p><p># Configure <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-isis-1]<strong> is-level level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-isis-1]<strong> network-entity 20.0000.0000.0001.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-isis-1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>]<strong> isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>]<strong> quit</strong></pre>
<p># Configure <span class="keyword">Device</span> B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B]<strong> isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-isis-1]<strong> network-entity 10.0000.0000.0002.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-isis-1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C]<strong> isis 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-isis-1]<strong> is-level level-1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-isis-1]<strong> network-entity 10.0000.0000.0003.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-isis-1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>]<strong> quit</strong></pre>
<p>The configurations of GE <span>0/2/0</span>, GE <span>0/3/0</span>, and GE <span>0/1/1</span> are similar to those of GE <span>0/1/0</span>. For configuration details, see <a href="#EN-US_TASK_0172366116__section_dc_vrp_isis_cfg_011105">Configuration Files</a> in this section.</p>
<p># After completing the configurations, check the IS-IS routing table of <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display isis route</strong>

                         Route information for ISIS(1)
                         -----------------------------

                        ISIS(1) Level-2 Forwarding Table
                        --------------------------------
 IPV4 Destination     IntCost    ExtCost ExitInterface  NextHop          Flags
----------------------------------------------------------------------------
 172.16.1.0/24         30         NULL    GE<span>0/2/0</span>        172.17.1.2      A/-/L/-
 172.16.2.0/24         30         NULL    GE<span>0/2/0</span>        172.17.1.2      A/-/L/-
 172.16.3.0/24         30         NULL    GE<span>0/2/0</span>        172.17.1.2      A/-/L/-
 172.16.4.0/24         20         NULL    GE<span>0/2/0</span>        172.17.1.2      A/-/L/-
 172.17.1.0/24         10         NULL    GE<span>0/2/0</span>        Direct         D/-/L/-
     Flags: D-Direct, A-Added to URT, L-Advertised in LSPs, S-IGP Shortcut,
                               U-Up/Down Bit Set, LP-Local Prefix-Sid
     Protect Type: L-Link Protect, N-Node Protect</pre>
</p></li><li><span>Configure route summarization on <span class="keyword">Device</span> B.</span><p><p># Summarize route 172.16.1.0/24, 172.16.2.0/24, 172.16.3.0/24, and 172.16.4.0/24 into 172.16.0.0/16 on <span class="keyword">Device</span> B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>isis 1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-isis-1] <strong>summary 172.16.0.0 255.255.0.0 level-1-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-isis-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-isis-1] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Display the routing table of <span class="keyword">Device</span> A. The following command output shows that routes 172.16.1.0/24, 172.16.2.0/24, 172.16.3.0/24, and 172.16.4.0/24 have been summarized into 172.16.0.0/16.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display isis route</strong>

                         Route information for ISIS(1)
                         -----------------------------

                        ISIS(1) Level-2 Forwarding Table
                        --------------------------------

 IPV4 Destination     IntCost    ExtCost ExitInterface   NextHop         Flags
----------------------------------------------------------------------------
 172.16.0.0/16         20         NULL    GE<span>0/2/0</span>        172.17.1.2      A/-/L/-
 172.17.1.0/24         10         NULL    GE<span>0/2/0</span>        Direct         D/-/L/-

     Flags: D-Direct, A-Added to URT, L-Advertised in LSPs, S-IGP Shortcut,
                               U-Up/Down Bit Set, LP-Local Prefix-Sid
     Protect Type: L-Link Protect, N-Node Protect</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172366116__section_dc_vrp_isis_cfg_011105"><a name="EN-US_TASK_0172366116__section_dc_vrp_isis_cfg_011105"></a><a name="section_dc_vrp_isis_cfg_011105"></a><a name="EN-US_TASK_0172366116__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span> A configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen">isis 1</pre>
<pre class="screen"> is-level level-2</pre>
<pre class="screen"> network-entity 20.0000.0000.0001.00</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.17.1.1 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span> B configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">isis 1</pre>
<pre class="screen"> network-entity 10.0000.0000.0002.00</pre>
<pre class="screen"> summary 172.16.0.0 255.255.0.0 level-1-2</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.17.1.2 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.16.4.2 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span> C configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>C</pre>
<pre class="screen">#</pre>
<pre class="screen">isis 1</pre>
<pre class="screen"> is-level level-1</pre>
<pre class="screen"> network-entity 10.0000.0000.0003.00</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.16.4.1 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.16.1.1 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.16.2.1 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.16.3.1 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0078.html">IS-IS Configuration Examples
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_2023.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0116.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>