
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Applying a Route-Policy">
<meta name="abstract" content="A route-policy takes effect only when it is applied to a routing protocol.">
<meta name="description" content="A route-policy takes effect only when it is applied to a routing protocol.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0043.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="d00534873">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366570">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Applying a Route-Policy</title>
</head>
<body><a name="EN-US_TASK_0172366570"></a><a name="EN-US_TASK_0172366570"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Applying a Route-Policy</h1>
<div class="taskbody"><p>A route-policy takes effect only when it is applied to a routing protocol.</p>
<div class="context"><a name="EN-US_TASK_0172366570__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">Route-policies apply to direct routes, static routes, RIP<span>/RIPng</span>, IS-IS, OSPF<span>/OSPFv3</span>, BGP/MPLS IP VPN, and BGP<span>/BGP4+</span>. In addition, a route-policy can be applied to an FRR scenario. Choose one of the following configurations as needed:<ul><li><a href="#EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004201">Apply a route-policy to direct routes.</a></li><li><a href="#EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004202">Apply a route-policy to static routes.</a></li><li><a href="#EN-US_TASK_0172366570__step155151234185119">Apply a route-policy to IPv6 static routes.</a></li><li><a href="#EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004203">Apply a route-policy to RIP routes.</a></li><li><a href="#EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004204">Apply a route-policy to RIPng routes.</a></li><li><a href="#EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004205">Apply a route-policy to IPv4 IS-IS routes.</a></li><li><a href="#EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004206">Apply a route-policy to IPv6 IS-IS routes.</a></li><li><a href="#EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004207">Apply a route-policy to OSPF routes.</a></li><li><a href="#EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004208">Apply a route-policy to OSPFv3 routes.</a></li><li><a href="#EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004209">Apply a route-policy to BGP routes.</a></li><li><a href="#EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004210">Apply a route-policy to BGP4+ routes.</a></li><li><a href="#EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004212">Apply a route-policy to BGP/MPLS IP VPN routes.</a></li><li><a href="dc_vrp_evpn_cfg_0150.html">Apply a route-policy to EVPN.</a></li></ul>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172366570__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li id="EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004201"><span id="EN-US_TASK_0172366570__">Apply a route-policy to direct routes.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Perform the following operations as required to apply a route-policy to direct routes. For details, see <a href="#EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004201">Table 1</a>.</span><p>
<div class="tableBorder"><a name="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004201"></a><a name="tab_dc_vrp_route-policy_cfg_004201"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004201" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Applying a route-policy to direct routes</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="26.090000000000003%" id="mcps1.4.2.1.2.2.2.1.2.4.1.1" liSelected="liSelected"><p>Objectives</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="42.14%" id="mcps1.4.2.1.2.2.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="31.77%" id="mcps1.4.2.1.2.2.2.1.2.4.1.3" liSelected="liSelected"><p>Reference</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="26.090000000000003%" headers="mcps1.4.2.1.2.2.2.1.2.4.1.1 "><p>To configure the device to advertise the public network ARP Vlink direct routes that match a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter)</p>
</td>
<td class="cellrowborder" valign="top" width="42.14%" headers="mcps1.4.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=arp+vlink-direct-route+advertise"><b><span class="cmdname">arp vlink-direct-route advertise</span></b></a> [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]</p>
</td>
<td class="cellrowborder" valign="top" width="31.77%" headers="mcps1.4.2.1.2.2.2.1.2.4.1.3 "><p><a href="dc_vrp_ip-route_cfg_0055.html">Configuring the Advertisement of Public Network IPv4 ARP Vlink Direct Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.090000000000003%" headers="mcps1.4.2.1.2.2.2.1.2.4.1.1 "><p>To configure a device to advertise IPv6 Neighbor Discovery Protocol (NDP) Vlink direct routes that match a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter) on the public network</p>
</td>
<td class="cellrowborder" valign="top" width="42.14%" headers="mcps1.4.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+nd+vlink-direct-route+advertise"><b><span class="cmdname">ipv6 nd vlink-direct-route advertise</span></b></a> [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]</p>
</td>
<td class="cellrowborder" valign="top" width="31.77%" headers="mcps1.4.2.1.2.2.2.1.2.4.1.3 "><p><a href="dc_vrp_ip-route_cfg_0056.html">Configuring the Advertisement of IPv6 NDP Vlink Direct Routes on the Public Network</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.090000000000003%" headers="mcps1.4.2.1.2.2.2.1.2.4.1.1 "><p>To apply a route-policy to direct routes on the public network</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>Currently, QoS information, such as the traffic behavior or local ID, can be configured for direct routes only based on a route-policy. A router applies different QoS policies to packets based on the QoS information while forwarding these packets. In this manner, traffic statistics can be collected, and authentication and accounting can be performed based on the direct routes.</p>
</div></div>
</td>
<td class="cellrowborder" valign="top" width="42.14%" headers="mcps1.4.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ip+direct-routing-table"><b><span class="cmdname">ip direct-routing-table</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="31.77%" headers="mcps1.4.2.1.2.2.2.1.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.090000000000003%" headers="mcps1.4.2.1.2.2.2.1.2.4.1.1 "><p>To apply a route-policy to public network IPv6 direct routes.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>Currently, QoS information, such as the traffic behavior or local ID, can be configured for direct routes only based on a route-policy. After QoS information is configured for routes, the device can apply different QoS policies to packets based on the QoS information during packet forwarding. In this manner, traffic statistic collection, authentication, and accounting can be performed based on direct routes.</p>
</div></div>
</td>
<td class="cellrowborder" valign="top" width="42.14%" headers="mcps1.4.2.1.2.2.2.1.2.4.1.2 "><p><a href="cmdqueryname=ipv6+direct-routing-table"><b><span class="cmdname">ipv6 direct-routing-table</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="31.77%" headers="mcps1.4.2.1.2.2.2.1.2.4.1.3 "><p>-</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004202"><span id="EN-US_TASK_0172366570__">Apply a route-policy to static routes.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ip+static-routing-table"><b><span class="cmdname">ip static-routing-table</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></span><p><p>A route-policy is applied to public network static routes.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172366570__step155151234185119"><span id="EN-US_TASK_0172366570__">Apply a route-policy to IPv6 static routes.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv6+static-routing-table"><b><span class="cmdname">ipv6 static-routing-table</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></span><p><p>A route-policy is applied to public network static routes.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004203"><span id="EN-US_TASK_0172366570__">Apply a route-policy to RIP routes.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=rip"><b><span class="cmdname">rip</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span></span><p><p>A RIP process is enabled, and the RIP view is displayed.</p>
</p></li><li class="substepexpand"><span>Perform the following operations as required to apply a route-policy to RIP routes. For details, see <a href="#EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004203">Table 2</a>.</span><p>
<div class="tableBorder"><a name="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004203"></a><a name="tab_dc_vrp_route-policy_cfg_004203"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004203" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Applying a route-policy to RIP routes</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="26.090000000000003%" id="mcps1.4.2.4.2.3.2.1.2.4.1.1" liSelected="liSelected"><p>Objectives</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="42.14%" id="mcps1.4.2.4.2.3.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="31.77%" id="mcps1.4.2.4.2.3.2.1.2.4.1.3" liSelected="liSelected"><p>Reference</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="26.090000000000003%" headers="mcps1.4.2.4.2.3.2.1.2.4.1.1 "><p>To configure a device to generate a default route or advertise a default route in the routing table to neighbors only when the matching conditions of a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter) are met</p>
</td>
<td class="cellrowborder" valign="top" width="42.14%" headers="mcps1.4.2.4.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=default-route+originate"><b><span class="cmdname">default-route originate</span></b></a> [ <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> [ <strong><span>avoid-learning</span></strong> ] ] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.77%" headers="mcps1.4.2.4.2.3.2.1.2.4.1.3 "><p><a href="dc_vrp_rip_cfg_0025.html">Configuring RIP to Advertise Default Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.090000000000003%" headers="mcps1.4.2.4.2.3.2.1.2.4.1.1 "><p>To configure RIP to import the BGP routes that match a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter)</p>
</td>
<td class="cellrowborder" valign="top" width="42.14%" headers="mcps1.4.2.4.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> <strong><span>bgp</span></strong> [ <strong><span>permit-ibgp</span></strong> ] [ <strong><span>cost</span></strong> { <i><span class="varname">cost</span></i> | <strong><span>transparent</span></strong> } | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.77%" headers="mcps1.4.2.4.2.3.2.1.2.4.1.3 "><p><a href="dc_vrp_rip_cfg_0026.html">Configuring RIP to Import External Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.090000000000003%" headers="mcps1.4.2.4.2.3.2.1.2.4.1.1 "><p>To configure RIP to import the routes from another routing protocol that match a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter)</p>
</td>
<td class="cellrowborder" valign="top" width="42.14%" headers="mcps1.4.2.4.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> { <strong><span>static</span></strong> | <strong><span>direct</span></strong> <span>| <strong><span>unr</span></strong> </span>| { <strong><span>isis</span></strong> | <strong><span>ospf</span></strong> | <strong><span>rip</span></strong> } [ <i><span class="varname">process-id</span></i> ] } [ <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.77%" headers="mcps1.4.2.4.2.3.2.1.2.4.1.3 "><p><a href="dc_vrp_rip_cfg_0026.html">Configuring RIP to Import External Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.090000000000003%" headers="mcps1.4.2.4.2.3.2.1.2.4.1.1 "><p>To set a preference for RIP routes that match a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter)</p>
</td>
<td class="cellrowborder" valign="top" width="42.14%" headers="mcps1.4.2.4.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=preference"><b><span class="cmdname">preference</span></b></a> { <i><span class="varname">preference</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> } <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.77%" headers="mcps1.4.2.4.2.3.2.1.2.4.1.3 "><p><a href="dc_vrp_rip_cfg_0023.html">(Optional) Configuring a RIP Preference</a></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004204"><span id="EN-US_TASK_0172366570__">Apply a route-policy to RIPng routes.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ripng"><b><span class="cmdname">ripng</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span></span><p><p>A RIPng process is enabled, and the RIPng view is displayed.</p>
</p></li><li class="substepexpand"><span>Perform the following operations as required to apply a route-policy to RIPng routes. For details, see <a href="#EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004204">Table 3</a>.</span><p>
<div class="tableBorder"><a name="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004204"></a><a name="tab_dc_vrp_route-policy_cfg_004204"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004204" frame="border" border="1" rules="all"><caption><b>Table 3 </b>Applying a route-policy to RIPng routes</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="26.25%" id="mcps1.4.2.5.2.3.2.1.2.4.1.1" liSelected="liSelected"><p>Objectives</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="41.86%" id="mcps1.4.2.5.2.3.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="31.89%" id="mcps1.4.2.5.2.3.2.1.2.4.1.3" liSelected="liSelected"><p>Reference</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.5.2.3.2.1.2.4.1.1 "><p>To configure RIPng to import the routes from another routing protocol that match a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter)</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.5.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> { <strong><span>static</span></strong> | <strong><span>direct</span></strong> | <strong><span>bgp</span></strong> [ <strong><span>permit-ibgp</span></strong> ]<span> | <strong><span>unr</span></strong></span> | { <strong><span>isis</span></strong> | <strong><span>ospfv3</span></strong> | <strong><span>ripng</span></strong> } [ <i><span class="varname">process-id</span></i> ] } [ <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.5.2.3.2.1.2.4.1.3 "><p><a href="dc_vrp_ripng_cfg_0019.html">Configuring RIPng to Import External Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.5.2.3.2.1.2.4.1.1 "><p>To set a preference for RIPng routes that match a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter)</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.5.2.3.2.1.2.4.1.2 "><p><a href="cmdqueryname=preference"><b><span class="cmdname">preference</span></b></a> { <i><span class="varname">preference</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> } <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.5.2.3.2.1.2.4.1.3 "><p><a href="dc_vrp_ripng_cfg_0006.html">(Optional) Configuring the RIPng Priority</a></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004205"><span id="EN-US_TASK_0172366570__">Apply a route-policy to IPv4 IS-IS routes.</span><p><ul><li>To apply a route-policy in the IS-IS view, perform the following operations:<ol><li>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</li><li>Run the <a href="cmdqueryname=isis"><b><span class="cmdname">isis</span></b></a> [ <i><span class="varname">process-id</span></i> ] command to enter the IS-IS view.</li><li>Perform the following operations as required to apply a route-policy to IS-IS routes. For details, see <a href="#EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004205">Table 4</a>.
<div class="tableBorder"><a name="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004205"></a><a name="tab_dc_vrp_route-policy_cfg_004205"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004205" frame="border" border="1" rules="all"><caption><b>Table 4 </b>Applying a route-policy to IPv4 IS-IS routes in the IS-IS view</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="26.25%" id="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.1" liSelected="liSelected"><p>Objectives</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="46.53%" id="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="27.22%" id="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.3" liSelected="liSelected"><p>Reference</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.1 "><p>To configure IS-IS to generate and advertise default routes to the IS-IS domain only when external routes that match a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter) exist in the routing table of a border device (This prevents routing blackhole when link faults make some important external routes unavailable but default routes are still advertised.)</p>
</td>
<td class="cellrowborder" valign="top" width="46.53%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=default-route-advertise"><b><span class="cmdname">default-route-advertise</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> [ <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | [ <strong><span>level-1</span></strong> | <strong><span>level-1-2</span></strong> | <strong><span>level-2</span></strong> ] ] <sup>*</sup> [ <strong><span>avoid-learning</span></strong> ]</p>
</td>
<td class="cellrowborder" valign="top" width="27.22%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.3 "><p><a href="dc_vrp_isis_cfg_1011.html">Configuring IS-IS to Generate IPv4 Default Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.1 "><p>To configure IS-IS to advertise the routes that are imported from another routing protocol and match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="46.53%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=filter-policy"><b><span class="cmdname">filter-policy</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>export</span></strong> [ <i><span class="varname">protocol</span></i> [ <i><span class="varname">process-id</span></i> ] ]</p>
</td>
<td class="cellrowborder" valign="top" width="27.22%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.1 "><p>To configure IS-IS to accept the routes that match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="46.53%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=filter-policy"><b><span class="cmdname">filter-policy</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>import</span></strong></p>
</td>
<td class="cellrowborder" valign="top" width="27.22%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.3 "><p><a href="dc_vrp_isis_cfg_1015.html">Configuring IS-IS to Import External Routes (IPv4)</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.1 "><p>To configure IS-IS to import the routes from another routing protocol that match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="46.53%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> { <strong><span>direct</span></strong> | <strong><span>static</span></strong> <span>| <strong><span>unr</span></strong> </span>| { <strong><span>ospf</span></strong> | <strong><span>rip</span></strong> | <strong><span>isis</span></strong> } [ <i><span class="varname">process-id</span></i> ] | <strong><span>bgp</span></strong> [ <strong><span>permit-ibgp</span></strong> ] } [ <strong><span>cost-type</span></strong> { <strong><span>external</span></strong> | <strong><span>internal</span></strong> } | <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ] ] <sup>*</sup></p>
<p><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> { { <strong><span>ospf</span></strong> | <strong><span>rip</span></strong> | <strong><span>isis</span></strong> } [ <i><span class="varname">process-id</span></i> ] | <strong><span>bgp</span></strong> [ <strong><span>permit-ibgp</span></strong> ] | <strong><span>direct</span></strong> <span>| <strong><span>unr</span></strong> </span>} <strong><span>inherit-cost</span></strong> [ { <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> } | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup></p>
<p><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> { <strong><span>ospf</span></strong> | <strong><span>isis</span></strong> } [ <i><span class="varname">process-id</span></i> ] [ <strong><span>cost-type</span></strong> { <strong><span>external</span></strong> | <strong><span>internal</span></strong> } | <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ] | <strong><span>no-sid</span></strong> ] <sup>*</sup></p>
<p><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> { <strong><span>ospf</span></strong> | <strong><span>isis</span></strong> } [ <i><span class="varname">process-id</span></i> ] <strong><span>inherit-cost</span></strong> [ { <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> } | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | <strong><span>no-sid</span></strong> ] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="27.22%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.3 "><p><a href="dc_vrp_isis_cfg_1015.html">Configuring IS-IS to Import External Routes (IPv4)</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.1 "><p>To allow Level-1 routes to leak to a Level-2 area</p>
</td>
<td class="cellrowborder" valign="top" width="46.53%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=import-route+isis+level-1+into+level-2"><b><span class="cmdname">import-route isis level-1 into level-2</span></b></a> [ <strong><span>filter-policy</span></strong> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | <strong><span>direct</span></strong> <strong><span>allow-filter-policy</span></strong> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> <span>| <strong><span>no-sid</span></strong> </span>] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="27.22%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.3 "><p><a href="dc_vrp_isis_cfg_1007.html">Configuring IS-IS Route Leaking (IPv4)</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.1 "><p>To allow Level-2 routes to leak to a Level-1 area</p>
</td>
<td class="cellrowborder" valign="top" width="46.53%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=import-route+isis+level-2+into+level-1"><b><span class="cmdname">import-route isis level-2 into level-1</span></b></a> [ <strong><span>filter-policy</span></strong> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | <strong><span>direct</span></strong> <strong><span>allow-filter-policy</span></strong> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> <span>| <strong><span>no-sid</span></strong> </span>] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="27.22%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.3 "><p><a href="dc_vrp_isis_cfg_1007.html">Configuring IS-IS Route Leaking (IPv4)</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.1 "><p>To configure a preference value for the IS-IS routes that match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="46.53%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=preference"><b><span class="cmdname">preference</span></b></a> { <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | <i><span class="varname">preference</span></i> } <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="27.22%" headers="mcps1.4.2.6.2.1.1.1.3.2.2.4.1.3 "><p><a href="dc_vrp_isis_cfg_1014.html">Configuring a Preference Value for IPv4 IS-IS</a></p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</li></ol>
</li><li>To apply a route-policy in the IS-IS FRR view, perform the following operations:<ol><li>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</li><li>Run the <a href="cmdqueryname=isis"><b><span class="cmdname">isis</span></b></a> [ <i><span class="varname">process-id</span></i> ] command to enter the IS-IS view.</li><li>Run the <a href="cmdqueryname=frr"><b><span class="cmdname">frr</span></b></a> command to enter the IS-IS FRR view.</li><li><p>Run the <a href="cmdqueryname=frr-policy+route"><b><span class="cmdname">frr-policy route</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> command to configure IS-IS to add the backup routes that match a route-policy to the IP routing table.</p>
<p>For details on how to configure IS-IS Auto FRR (IPv4), see <a href="dc_vrp_isis_cfg_0091.html">Configuring IS-IS Auto FRR</a>.</p>
</li><li>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</li></ol>
</li></ul>
</p></li><li id="EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004206"><span id="EN-US_TASK_0172366570__">Apply a route-policy to IPv6 IS-IS routes.</span><p><ul><li>To apply a route-policy in the IS-IS view, perform the following operations:<ol><li>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</li><li>Run the <a href="cmdqueryname=isis"><b><span class="cmdname">isis</span></b></a> [ <i><span class="varname">process-id</span></i> ] command to enter the IS-IS view.</li><li>Perform the following operations as required to apply a route-policy to IPv6 IS-IS routes. For details, see <a href="#EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004206">Table 5</a>.
<div class="tableBorder"><a name="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004206"></a><a name="tab_dc_vrp_route-policy_cfg_004206"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004206" frame="border" border="1" rules="all"><caption><b>Table 5 </b>Applying a route-policy to IPv6 IS-IS routes in the IS-IS view</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="26.25%" id="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.1" liSelected="liSelected"><p>Objectives</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="41.86%" id="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="31.89%" id="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.3" liSelected="liSelected"><p>Reference</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.1 "><p>To configure IS-IS to generate and advertise default IPv6 routes to the IS-IS domain only when external routes that match a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter) exist in the routing table of a border device</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=ipv6+default-route-advertise"><b><span class="cmdname">ipv6 default-route-advertise</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> [ <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ] ] <sup>*</sup> [ <strong><span>avoid-learning</span></strong>| <strong><span>learning-avoid-loop</span></strong> ]</p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.3 "><p><a href="dc_vrp_isis_cfg_1034.html">Configuring IS-IS to Generate IPv6 Default Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.1 "><p>To configure IS-IS to advertise the routes that are imported from another routing protocol and match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=ipv6+filter-policy"><b><span class="cmdname">ipv6 filter-policy</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>export</span></strong> [ <i><span class="varname">protocol</span></i> [ <i><span class="varname">process-id</span></i> ] ]</p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.1 "><p>To configure IS-IS to accept the IPv6 routes that match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=ipv6+filter-policy"><b><span class="cmdname">ipv6 filter-policy</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>import</span></strong></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.3 "><p><a href="dc_vrp_isis_cfg_1038.html">Configuring IPv6 IS-IS to Import External Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.1 "><p>To configure IS-IS to import the routes from another routing protocol that match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=ipv6+import-route"><b><span class="cmdname">ipv6 import-route</span></b></a> { <strong><span>direct</span></strong> | <strong><span>static</span></strong> <span>| <strong><span>unr</span></strong> </span>| { <strong><span>ripng</span></strong> | <strong><span>isis</span></strong> | <strong><span>ospfv3</span></strong> } [ <i><span class="varname">process-id</span></i> ] } | <strong><span>bgp</span></strong> <span>[ <strong><span>permit-ibgp</span></strong> ] </span>} [ <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ] ] <sup>*</sup></p>
<p><a href="cmdqueryname=ipv6+import-route"><b><span class="cmdname">ipv6 import-route</span></b></a> { { <strong><span>ospfv3</span></strong> | <strong><span>ripng</span></strong> | <strong><span>isis</span></strong> } [ <i><span class="varname">process-id</span></i> ] | <strong><span>bgp</span></strong> [ <strong><span>permit-ibgp</span></strong> ] | <strong><span>direct</span></strong> <span>| <strong><span>unr</span></strong> </span>} <strong><span>inherit-cost</span></strong> [ <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ] ] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.3 "><p><a href="dc_vrp_isis_cfg_1038.html">Configuring IPv6 IS-IS to Import External Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.1 "><p>To allow Level-1 routes to leak to a Level-2 area</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=ipv6+import-route+isis+level-1+into+level-2"><b><span class="cmdname">ipv6 import-route isis level-1 into level-2</span></b></a> [ <strong><span>filter-policy</span></strong> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | <strong><span>direct allow-filter-policy</span></strong> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.3 "><p><a href="dc_vrp_isis_cfg_1030.html">Configuring IPv6 IS-IS Route Leaking</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.1 "><p>To allow Level-2 routes to leak to a Level-1 area</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=ipv6+import-route+isis+level-2+into+level-1"><b><span class="cmdname">ipv6 import-route isis level-2 into level-1</span></b></a> [ <strong><span>filter-policy</span></strong> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | <strong><span>direct allow-filter-policy</span></strong> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> ] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.3 "><p><a href="dc_vrp_isis_cfg_1030.html">Configuring IPv6 IS-IS Route Leaking</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.1 "><p>To configure a preference value for the IS-IS routes that match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=ipv6+preference"><b><span class="cmdname">ipv6 preference</span></b></a> { <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | <i><span class="varname">preference</span></i> } <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.7.2.1.1.1.3.2.2.4.1.3 "><p><a href="dc_vrp_isis_cfg_1037.html">Configuring a Preference Value for IPv6 IS-IS</a></p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</li></ol>
</li><li>To apply a route-policy in the IS-IS IPv6 topology view, perform the following operations:<ol><li>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</li><li>Run the <a href="cmdqueryname=isis"><b><span class="cmdname">isis</span></b></a> [ <i><span class="varname">process-id</span></i> ] command to enter the IS-IS view.</li><li>Run the <a href="cmdqueryname=ipv6+topology"><b><span class="cmdname">ipv6 topology</span></b></a> <strong><span>topology-name</span></strong> [ <strong><span>topology-id</span></strong> { <strong><span>multicast</span></strong> | <i><span class="varname">topology-id</span></i> } ] command to bind the IS-IS process to an IPv6 topology and enter the IS-IS IPv6 topology view.</li><li><p>Run the <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> { <strong><span>direct</span></strong> | <strong><span>isis</span></strong> [ <i><span class="varname">process-id</span></i> ] <strong><span>inherit-cost</span></strong> [ <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | { <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> } ] <sup>*</sup> command to configure IS-IS to import routes from another protocol into the current topology.</p>
<p>For details on how to configure IPv6 IS-IS multi-topology, see <a href="dc_vrp_isis_cfg_0105.html">Enabling MT for an IS-IS Process</a>.</p>
</li><li>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</li></ol>
</li></ul>
</p></li><li id="EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004207"><span id="EN-US_TASK_0172366570__">Apply a route-policy to OSPF routes.</span><p><ul><li><p>To apply a route-policy in the OSPF view, perform the following operations:</p>
<ol><li>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</li><li>Run the <a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] command to enable an OSPF process and enter the OSPF view.</li><li>To apply a route-policy to OSPF routes in the OSPF process view, see <a href="#EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004207">Table 6</a>.
<div class="tableBorder"><a name="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004207"></a><a name="tab_dc_vrp_route-policy_cfg_004207"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004207" frame="border" border="1" rules="all"><caption><b>Table 6 </b>Applying a route-policy to OSPF routes</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="26.25%" id="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.1" liSelected="liSelected"><p>Objectives</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="41.86%" id="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="31.89%" id="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.3" liSelected="liSelected"><p>Reference</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.1 "><p>To configure OSPF to advertise the default routes in the routing table that are not generated by OSPF to a common area based on the parameters of a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter)</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.2 "><p><a href="cmdqueryname=default-route-advertise"><b><span class="cmdname">default-route-advertise</span></b></a> [ [ <strong><span>always</span></strong> | <strong><span>permit-calculate-other</span></strong> ] | <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>type</span></strong> <i><span class="varname">type</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | <strong><span>distribute-delay</span></strong> <i><span class="varname">delay-time</span></i> ] <sup>*</sup></p>
<p><a href="cmdqueryname=default-route-advertise"><b><span class="cmdname">default-route-advertise</span></b></a> [ <strong><span>permit-calculate-other</span></strong> | <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>type</span></strong> <i><span class="varname">type</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | <strong><span>distribute-delay</span></strong> <i><span class="varname">delay-time</span></i> | <a href="cmdqueryname=permit-ibgp"><b><span class="cmdname">permit-ibgp</span></b></a> ] <sup>*</sup></p>
<p><a href="cmdqueryname=default-route-advertise"><b><span class="cmdname">default-route-advertise</span></b></a> <strong><span>summary</span></strong> <strong><span>cost</span></strong> <i><span class="varname">cost</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.3 "><p><a href="dc_vrp_ospf_cfg_2041.html">Configuring OSPF to Import a Default Route</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.1 "><p>To configure OSPF to accept the routes that match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.2 "><p><a href="cmdqueryname=filter-policy"><b><span class="cmdname">filter-policy</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> [ <strong><span>secondary</span></strong> ] <strong><span>import</span></strong></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.3 "><p><a href="dc_vrp_ospf_cfg_0044.html">Configuring OSPF to Filter Received Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.1 "><p>To configure OSPF to advertise the routes that match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.2 "><p><a href="cmdqueryname=filter-policy"><b><span class="cmdname">filter-policy</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>export</span></strong> [ <i><span class="varname">protocol</span></i> [ <i><span class="varname">process-id</span></i> ] ]</p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.3 "><p><a href="dc_vrp_route-policy_cfg_0036_copy.html">Configuring OSPF to Filter the Routes to Be Advertised</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.1 "><p>To configure OSPF to import routes from another protocol</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.2 "><p><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> { <strong><span>bgp</span></strong> [ <strong><span>permit-ibgp</span></strong> ] | <strong><span>direct</span></strong> <span>| <strong><span>unr</span></strong> </span>| <strong><span>rip</span></strong> [ <i><span class="varname">process-id-rip</span></i> ] | <strong><span>static</span></strong> | <strong><span>isis</span></strong> [ <i><span class="varname">process-id-isis</span></i> ] | <strong><span>ospf</span></strong> [ <i><span class="varname">process-id-ospf</span></i> ] [ <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>type</span></strong> <i><span class="varname">type</span></i> ] <sup>*</sup> }</p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.3 "><p><a href="dc_vrp_ospf_cfg_2040.html">Configuring OSPF to Import External Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.1 "><p>To configure a route-policy for OSPF local MT so that only the routes that match the route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter) are added to the MIGP routing table</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.2 "><p><a href="cmdqueryname=local-mt+filter-policy"><b><span class="cmdname">local-mt filter-policy</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.1 "><p>To configure a preference value for OSPF routes that match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.2 "><p><a href="cmdqueryname=preference"><b><span class="cmdname">preference</span></b></a> [ <strong><span>ase</span></strong> | <strong><span>inter</span></strong> | <strong><span>intra</span></strong> ] { <i><span class="varname">preference</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> } <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.8.2.1.1.2.3.2.2.4.1.3 "><p><a href="dc_vrp_ospf_cfg_2023.html">(Optional) Setting the OSPF Preference</a></p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</li></ol>
</li><li><p>To apply a route-policy in the OSPF area view, perform the following operations:</p>
<ol><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] command to enable an OSPF process and enter the OSPF view.</p>
</li><li><p>Run the <a href="cmdqueryname=area"><b><span class="cmdname">area</span></b></a> <i><span class="varname">area-id</span></i> command to enter the OSPF area view.</p>
</li><li><p>Perform either of the following operations to apply a route-policy in the OSPF area view:</p>
<ul><li><p>Run the <a href="cmdqueryname=filter"><b><span class="cmdname">filter</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>export</span></strong> command to apply a route-policy to outgoing Type 3 LSAs (summary LSAs) in the area.</p>
</li><li><p>Run the <a href="cmdqueryname=filter"><b><span class="cmdname">filter</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>import</span></strong> command to apply a route-policy to incoming Type 3 LSAs in the area.</p>
</li></ul>
<p>For details on the configuration of applying a route-policy to Type-3 LSAs, see <a href="dc_vrp_ospf_cfg_2044.html">Configuring OSPF to Filter LSAs in an Area</a></p>
</li><li>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</li></ol>
</li><li><p>To apply a route-policy in the OSPF FRR view, perform the following operations:</p>
<ol><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] command to enable an OSPF process and enter the OSPF view.</p>
</li><li><p>Run the <a href="cmdqueryname=frr"><b><span class="cmdname">frr</span></b></a> command to enter the OSPF FRR view.</p>
</li><li><p>Run the <a href="cmdqueryname=loop-free-alternate"><b><span class="cmdname">loop-free-alternate</span></b></a> command to enable OSPF IP FRR to generate a loop-free backup link.</p>
</li><li><p>Run the <a href="cmdqueryname=frr-policy+route"><b><span class="cmdname">frr-policy route</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> command to configure OSPF to add the backup routes that match a route-policy to the IP routing table.</p>
<p>For details on how to configure OSPF IP FRR, see <a href="dc_vrp_ospf_cfg_2009.html">Configuring OSPF IP FRR</a>.</p>
</li><li>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</li></ol>
</li></ul>
</p></li><li id="EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004208"><span id="EN-US_TASK_0172366570__">Apply a route-policy to OSPFv3 routes.</span><p><ul><li><p>To apply a route-policy in the OSPFv3 view, perform the following operations:</p>
<ol><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ] command to enable an OSPFv3 process and enter the OSPFv3 view.</p>
</li><li><p>Perform the following operations as required to apply a route-policy in the OSPFv3 view. For details, see <a href="#EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004208">Table 7</a>.</p>

<div class="tableBorder"><a name="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004208"></a><a name="tab_dc_vrp_route-policy_cfg_004208"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004208" frame="border" border="1" rules="all"><caption><b>Table 7 </b>Applying a route-policy to OSPFv3 routes</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="26.25%" id="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.1" liSelected="liSelected"><p>Objectives</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="41.86%" id="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="31.89%" id="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.3" liSelected="liSelected"><p>Reference</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.1 "><p>To configure OSPFv3 to advertise the default routes in the routing table that are not generated by OSPFv3 to an OSPFv3 routing area based on the parameters of a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter)</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.2 "><p><a href="cmdqueryname=default-route-advertise"><b><span class="cmdname">default-route-advertise</span></b></a> [ <strong><span>always</span></strong> | <strong><span>permit-calculate-other</span></strong> | <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>type</span></strong> <i><span class="varname">type</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>distribute-delay</span></strong> <i><span class="varname">delay</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.3 "><p><a href="dc_vrp_ospfv3_cfg_2029.html">Configuring OSPFv3 to Filter the Routes to Be Advertised</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.1 "><p>To configure OSPFv3 to accept the routes that match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.2 "><p><a href="cmdqueryname=filter-policy"><b><span class="cmdname">filter-policy</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> [ <strong><span>secondary</span></strong> ] <strong><span>import</span></strong></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.3 "><p><a href="dc_vrp_ospfv3_cfg_2028.html">Configuring OSPFv3 to Filter Received Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.1 "><p>To configure OSPFv3 to import routes from another protocol</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.2 "><p><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> { <strong><span>bgp</span></strong> [ <strong><span>permit-ibgp</span></strong> ] | <strong><span>direct</span></strong> <span>| <strong><span>unr</span></strong> </span> | <strong><span>static</span></strong> | <strong><span>isis</span></strong> [ <i><span class="varname">process-id</span></i> ] | <strong><span>ripng</span></strong> [ <i><span class="varname">process-id</span></i> ] | <strong><span>ospfv3</span></strong> [ <i><span class="varname">process-id</span></i> ] } [ <strong><span>cost</span></strong> <i><span class="varname">cost</span></i> | <strong><span>tag</span></strong> <i><span class="varname">tag</span></i> | <strong><span>type</span></strong> <i><span class="varname">type</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup> }</p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.3 "><p><a href="dc_vrp_ospfv3_cfg_2026.html">Configuring OSPFv3 to Import External Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.1 "><p>To configure a preference value for OSPF routes that match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.2 "><p><a href="cmdqueryname=preference"><b><span class="cmdname">preference</span></b></a> [ <strong><span>ase</span></strong> ] { <i><span class="varname">preference</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> } <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.9.2.1.1.2.3.2.2.4.1.3 "><p>-</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</li></ol>
</li><li><p>To apply a route-policy in the OSPFv3 area view, perform the following operations:</p>
<ol><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ] command to enable an OSPFv3 process and enter the OSPFv3 view.</p>
</li><li><p>Run the <a href="cmdqueryname=area"><b><span class="cmdname">area</span></b></a> <i><span class="varname">area-id</span></i> command to enter the OSPFv3 area view.</p>
</li><li><p>Perform either of the following operations to apply a route-policy in the OSPFv3 area view:</p>
<ul><li><p>Run the <a href="cmdqueryname=filter"><b><span class="cmdname">filter</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>export</span></strong> command to apply a route-policy to outgoing Type 3 LSAs (Inter-Area-Prefix-LSAs) in the OSPFv3 area.</p>
</li><li><p>Run the <a href="cmdqueryname=filter"><b><span class="cmdname">filter</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>import</span></strong> command to apply a route-policy to incoming Type 3 LSAs in the OSPFv3 area.</p>
</li></ul>
<p>For details on how to apply a route-policy to Type 3 LSAs in an OSPFv3 area, see <a href="dc_vrp_ospfv3_cfg_2078.html">Configuring OSPFv3 to Filter LSAs in an Area</a>.</p>
</li><li>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</li></ol>
</li><li><p>To apply a route-policy in the OSPFv3 FRR view, perform the following operations:</p>
<ol><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <i><span class="varname">process-id</span></i> ] command to enable an OSPFv3 process and enter the OSPFv3 view.</p>
</li><li><p>Run the <a href="cmdqueryname=frr"><b><span class="cmdname">frr</span></b></a> command to enter the OSPFv3 FRR view.</p>
</li><li><p>Run the <a href="cmdqueryname=loop-free-alternate"><b><span class="cmdname">loop-free-alternate</span></b></a> command to enable OSPFv3 IP FRR.</p>
</li><li><p>Run the <a href="cmdqueryname=frr-policy+route"><b><span class="cmdname">frr-policy route</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> command to configure OSPFv3 to add the backup routes that match a route-policy to the IP routing table.</p>
<p>For details on how to configure OSPFv3 IP FRR, see <a href="dc_vrp_ospfv3_cfg_2031.html">Configuring OSPFv3 IP FRR</a>.</p>
</li><li>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</li></ol>
</li></ul>
</p></li><li id="EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004209"><span id="EN-US_TASK_0172366570__">Apply a route-policy to BGP routes.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> { <i><span class="varname">as-number-plain</span></i> | <i><span class="varname">as-number-dot</span></i> } command to enter the BGP view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong> command to enter the IPv4 unicast address family view.</span></li><li class="substepexpand"><span>Perform the following operations as required to apply a route-policy to BGP routes. For details, see <a href="#EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004209">Table 8</a>.</span><p>
<div class="tableBorder"><a name="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004209"></a><a name="tab_dc_vrp_route-policy_cfg_004209"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004209" frame="border" border="1" rules="all"><caption><b>Table 8 </b>Applying a route-policy to BGP routes</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="26.25%" id="mcps1.4.2.10.2.4.2.1.2.4.1.1" liSelected="liSelected"><p>Objectives</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="41.86%" id="mcps1.4.2.10.2.4.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="31.89%" id="mcps1.4.2.10.2.4.2.1.2.4.1.3" liSelected="liSelected"><p>Reference</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.1 "><p>To configure a summary BGP route</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=aggregate"><b><span class="cmdname">aggregate</span></b></a> <i><span class="varname">ipv4-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } [ <strong><span>as-set</span></strong> | <strong><span>attribute-policy</span></strong> <i><span class="varname">route-policy-name1</span></i> | <strong><span>detail-suppressed</span></strong> | <strong><span>origin-policy</span></strong> <i><span class="varname">route-policy-name2</span></i> | <strong><span>suppress-policy</span></strong> <i><span class="varname">route-policy-name3</span></i> ] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp_cfg_4028.html">Configuring BGP Route Summarization</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.1 "><p>To configure BGP route dampening</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=dampening"><b><span class="cmdname">dampening</span></b></a> [ <i><span class="varname">half-life-reach</span></i> <i><span class="varname">reuse</span></i> <i><span class="varname">suppress</span></i> <i><span class="varname">ceiling</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup>[ <strong><span>update-standard</span></strong> ]</p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp_cfg_4051.html">Configuring BGP Route Dampening</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.1 "><p>To configure BGP to import routes from another routing protocol</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> <i><span class="varname">protocol</span></i> [ <i><span class="varname">process-id</span></i> ] [ <strong><span>med</span></strong> <i><span class="varname">med</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup><span>[ <strong><span>non-relay-tunnel</span></strong> ]</span></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp_cfg_3007.html">Configuring BGP to Import Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.1 "><p>To configure BGP to import local routes</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> <i><span class="varname">ipv4-address</span></i> [ <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> ] [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <span>[ <strong><span>non-relay-tunnel</span></strong> ]</span></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp_cfg_3007.html">Configuring BGP to Import Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.1 "><p>To enable BGP route recursion based on a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=nexthop+recursive-lookup"><b><span class="cmdname">nexthop recursive-lookup</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp_cfg_4015.html">Configuring the Next_Hop Attribute</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.1 "><p>To configure a BGP device to send a default route to a peer or a peer group and use a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter) to modify the attributes of the default route</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv4-address</span></i> } <strong><span>default-route-advertise</span></strong> [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] [ <strong><span>conditional-route-match-all</span></strong> { <i><span class="varname">ipv4-address1</span></i> { <i><span class="varname">mask1</span></i> | <i><span class="varname">mask-length1</span></i> } } &amp;&lt;1-4&gt; | <strong><span>conditional-route-match-any</span></strong> { <i><span class="varname">ipv4-address2</span></i> { <i><span class="varname">mask2</span></i> | <i><span class="varname">mask-length2</span></i> } } &amp;&lt;1-4&gt; ]</p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp_cfg_3052.html">Configuring a Device to Send Default Routes to Its Peer</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.1 "><p>To configure BGP to ignore bit error detection results when an export route-policy is used.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>When bit-error-triggered protection switching is configured, bit errors occur, and Local_Pref or MED is modified using an export route-policy, run the command to apply the Local_Pref or MED in the export route-policy. </p>
</div></div>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv4-address</span></i> } <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> <strong><span>export</span></strong> <strong><span>ignore-bit-error</span></strong></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.1 "><p>To configure a device to accept the routes that match a route-policy from a peer or peer group or advertise the routes that match a route-policy to a peer or peer group</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv4-address</span></i> } <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> { <strong><span>import</span></strong> | <strong><span>export</span></strong> }</p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp_cfg_3114.html">Applying a Policy to BGP Route Advertisement</a></p>
<p><a href="dc_vrp_bgp_cfg_3115.html">Applying a Policy to BGP Route Acceptance</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.1 "><p>To use a route-policy to set a BGP preference value</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=preference"><b><span class="cmdname">preference</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp_cfg_4011.html">Setting a BGP Preference Value</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.1 "><p>To prevent the BGP routes that match a route-policy from being added to the IP routing table</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=routing-table+rib-only"><b><span class="cmdname">routing-table rib-only</span></b></a> [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]</p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.10.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp_cfg_3038.html">(Optional) Preventing a Device from Adding BGP Routes to the IP Routing Table</a></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li id="EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004210"><span id="EN-US_TASK_0172366570__">Apply a route-policy to BGP4+ routes.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> { <i><span class="varname">as-number-plain</span></i> | <i><span class="varname">as-number-dot</span></i> }</span></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> [ <strong><span>unicast</span></strong> ]</span></span><p><p>The IPv6 unicast address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Perform the following operations as required to apply a route-policy to BGP4+ routes. For details, see <a href="#EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004210">Table 9</a>.</span><p>
<div class="tableBorder"><a name="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004210"></a><a name="tab_dc_vrp_route-policy_cfg_004210"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172366570__tab_dc_vrp_route-policy_cfg_004210" frame="border" border="1" rules="all"><caption><b>Table 9 </b>Applying a route-policy to BGP4+ routes</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="26.25%" id="mcps1.4.2.11.2.4.2.1.2.4.1.1" liSelected="liSelected"><p>Objectives</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="41.86%" id="mcps1.4.2.11.2.4.2.1.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="31.89%" id="mcps1.4.2.11.2.4.2.1.2.4.1.3" liSelected="liSelected"><p>Reference</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.1 "><p>To configure a summary BGP4+ route</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=aggregate"><b><span class="cmdname">aggregate</span></b></a> <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> [ <strong><span>as-set</span></strong> | <strong><span>attribute-policy</span></strong> <i><span class="varname">route-policy-name1</span></i> | <strong><span>detail-suppressed</span></strong> | <strong><span>origin-policy</span></strong> <i><span class="varname">route-policy-name2</span></i> | <strong><span>suppress-policy</span></strong> <i><span class="varname">route-policy-name3</span></i> ] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp6_cfg_0014.html">Configuring BGP4+ Route Summarization</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.1 "><p>To configure BGP4+ route dampening and apply dampening parameters to the routes that match a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter) so that specified-requirement dampening can be performed by BGP based on the applied route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=dampening"><b><span class="cmdname">dampening</span></b></a> [ <i><span class="varname">half-life-reach</span></i> <i><span class="varname">reuse</span></i> <i><span class="varname">suppress</span></i> <i><span class="varname">ceiling</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp6_cfg_0035.html">Configuring BGP4+ Route Dampening</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.1 "><p>To configure BGP4+ to import the routes from another routing protocol that match a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> <i><span class="varname">protocol</span></i> [ <i><span class="varname">process-id</span></i> ] [ <strong><span>med</span></strong> <i><span class="varname">med</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] <sup>*</sup></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp6_cfg_0010.html">Configuring BGP4+ to Import Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.1 "><p>To configure BGP4+ to advertise local routes</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]</p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp6_cfg_0010.html">Configuring BGP4+ to Import Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.1 "><p>To enable BGP4+ route recursion based on a route-policy</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=nexthop+recursive-lookup"><b><span class="cmdname">nexthop recursive-lookup</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp6_cfg_0024.html">Setting the Next_Hop Attribute</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.1 "><p>To configure a BGP4+ device to send a default route to a peer or a peer group and use a route-policy (specified by the <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter) to modify the attributes of the default route</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv6-address</span></i> } <strong><span>default-route-advertise</span></strong> [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] { <strong><span>conditional-route-match-all</span></strong> | <strong><span>conditional-route-match-any</span></strong> } { <i><span class="varname">ipv6-address </span></i><i><span class="varname">mask-length</span></i> } } &amp;&lt;1-4&gt;</p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp6_cfg_0015.html">Configuring BGP4+ to Advertise Default Routes to Peers or Peer Groups</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.1 "><p>To configure a device to accept the routes that match a route-policy from a peer or peer group or advertise the routes that match a route-policy to a peer or peer group</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">group-name</span></i> | <i><span class="varname">ipv6-address</span></i> } <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> { <strong><span>import</span></strong> | <strong><span>export</span></strong> }</p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp6_cfg_0030.html">Applying a Policy to BGP4+ Route Advertisement</a></p>
<p><a href="dc_vrp_bgp6_cfg_0031.html">Configuring a Policy for Receiving BGP4+ Routes</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.1 "><p>To use a route-policy to set a BGP4+ preference value</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=preference"><b><span class="cmdname">preference</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp6_cfg_0020.html">Setting a BGP4+ Preference</a></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.25%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.1 "><p>To prevent the BGP4+ routes that match a route-policy from being added to the IPv6 routing table</p>
</td>
<td class="cellrowborder" valign="top" width="41.86%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.2 "><p><a href="cmdqueryname=routing-table+rib-only"><b><span class="cmdname">routing-table rib-only</span></b></a> [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]</p>
</td>
<td class="cellrowborder" valign="top" width="31.89%" headers="mcps1.4.2.11.2.4.2.1.2.4.1.3 "><p><a href="dc_vrp_bgp6_cfg_0083.html">(Optional) Preventing BGP4+ from Adding Routes to the IP Routing Table</a></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172366570__step_dc_vrp_route-policy_cfg_004212"><span id="EN-US_TASK_0172366570__">Apply a route-policy to BGP/MPLS IP VPN routes.</span><p><ul><li><p>To apply a route-policy in the BGP-VPNv4 address family view, perform the following operations:</p>
<ol><li>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</li><li>Run the <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> { <i><span class="varname">as-number-plain</span></i> | <i><span class="varname">as-number-dot</span></i> } command to enter the BGP view.</li><li>Run the <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>vpnv4</span></strong> command to enter the BGP-VPNv4 address family view.</li><li><p>Run the <a href="cmdqueryname=nexthop+recursive-lookup+bit-error-detection"><b><span class="cmdname">nexthop recursive-lookup bit-error-detection</span></b></a> { <strong><span>med</span></strong> <strong><span>+</span></strong> <i><span class="varname">med-adjust-value</span></i> | <strong><span>local-preference</span></strong> <strong><span>-</span></strong> <i><span class="varname">localpref-adjust-value</span></i> } <sup>*</sup><span> [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]</span> command to associate bit error events with the adjustment of the MED or Local_Pref value for routes that match a route-policy. If <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> is not specified in the command, the MED or Local_Pref values of all routes are adjusted.</p>
<p>For details on how to apply a route-policy to bit-error-triggered L3VPN route switching, see <a href="dc_vrp_cfg_error-code_000013.html">Configuring Bit-Error-Triggered L3VPN Route Switching</a>.</p>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</li><li><p>To apply a route-policy in the VPN instance view, perform the following operations:</p>
<ol><li>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</li><li>Run the <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> command to enter the VPN instance view.</li><li>To apply a route-policy to BGP/MPLS IP VPN routes in the VPN instance view, perform one of the following operations as required:<ul><li><p>To associate the current address family of the VPN instance with an export route-policy, run the <a href="cmdqueryname=export"><b><span class="cmdname">export</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i><span> [ <strong><span>add-ert-first</span></strong> ]</span> command. Only one route-policy can be associated with the current address family. If the command is run more than once and the specified route-policies are different, the route-policy specified in the latest configuration overrides the previous one.</p>
<p>The <a href="cmdqueryname=export+route-policy"><b><span class="cmdname">export route-policy</span></b></a> command can control route advertisement between different VPN instances on the same PE, whereas the <a href="cmdqueryname=peer+route-policy"><b><span class="cmdname">peer route-policy</span></b></a> <strong><span>export</span></strong> command can control only the VPNv4<span> or VPNv6</span> routes that a PE sends to other PE peers.</p>
</li><li><p>To associate the current address family of the VPN instance with an import route-policy, run the <a href="cmdqueryname=import"><b><span class="cmdname">import</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> command. Only one route-policy can be associated with the current address family. If the command is run more than once and the specified route-policies are different, the route-policy specified in the latest configuration overrides the previous one.</p>
<p>The <a href="cmdqueryname=import+route-policy"><b><span class="cmdname">import route-policy</span></b></a> command can control route acceptance between different VPN instances on the same PE, whereas the <a href="cmdqueryname=peer+route-policy"><b><span class="cmdname">peer route-policy</span></b></a> <strong><span>import</span></strong> command can control only the VPNv4<span> or VPNv6</span> routes that a PE accepts from other PE peers.</p>
</li><li>To configure the device to advertise VPN ARP Vlink direct routes, run the <a href="cmdqueryname=arp+vlink-direct-route+advertise"><b><span class="cmdname">arp vlink-direct-route advertise</span></b></a> [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] command. The <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter specifies the route-policy used to filter the ARP Vlink direct routes to be advertised. <span>For details, see <a href="dc_vrp_mpls-l3vpn-v4_cfg_0158.html#EN-US_TASK_0172369257__step_dc_vrp_mpls-l3vpn-v4_cfg_015807">Configuring Route Exchange Between PEs and CEs</a>.</span></li></ul>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</li><li><p>To apply a route-policy in the VPN instance IPv4 address family view, perform the following operations:</p>
<ol><li>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</li><li>Run the <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> command to enter the VPN instance view.</li><li>Run the <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a> command to enable the IPv4 address family for the VPN instance and enter the VPN instance IPv4 address family view.</li><li><p>Run the <a href="cmdqueryname=ip"><b><span class="cmdname">ip</span></b></a> { <strong><span>direct-routing-table</span></strong> | <strong><span>static-routing-table</span></strong> } <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> command to apply a route-policy to the direct or static routes in the VPN instance IPv4 address family.</p>
<p>If the <a href="cmdqueryname=ip+route-policy"><b><span class="cmdname">ip route-policy</span></b></a> command is run, the device modifies a specified attribute of the direct or static routes that match the specified route-policy.</p>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</li><li><p>To apply a route-policy in the VPN instance IPv6 address family view, perform the following operations:</p>
<ol><li>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</li><li>Run the <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> command to enter the VPN instance view.</li><li>Run the <a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> command to enable the IPv6 address family for the VPN instance and enter the VPN instance IPv6 address family view.</li><li><p>Run the <a href="cmdqueryname=ipv6"><b><span class="cmdname">ipv6</span></b></a> { <strong><span>direct-routing-table</span></strong> | <strong><span>static-routing-table</span></strong> } <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> command to apply a route-policy to the direct or static routes in the VPN instance IPv6 address family.</p>
</li><li><p>Run the <a href="cmdqueryname=nd+vlink-direct-route+advertise"><b><span class="cmdname">nd vlink-direct-route advertise</span></b></a> [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ] command to configure the device to advertise VPN NDP Vlink direct routes. The <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> parameter specifies the route-policy used to filter the NDP Vlink direct routes to be advertised. <span>For details, see <a href="dc_vrp_mpls-l3vpn-v6_cfg_2061.html#EN-US_TASK_0172369590__step_dc_vrp_mpls-l3vpn-v6_cfg_206106">Configuring Route Exchange Between PEs and CEs</a>.</span></p>
</li><li><p>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</p>
</li></ol>
</li></ul>
</p></li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0007.html">Configuring a Route-Policy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0043.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>