
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IPv6 IS-IS Auto FRR">
<meta name="abstract" content="IPv6 IS-IS Auto FRR can rapidly switch traffic from a faulty link to a backup link, ensuring that the traffic interruption time is less than 50 ms and improving IS-IS network reliability.">
<meta name="description" content="IPv6 IS-IS Auto FRR can rapidly switch traffic from a faulty link to a backup link, ensuring that the traffic interruption time is less than 50 ms and improving IS-IS network reliability.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0110.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_1047_copy.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909,l00455378,isis">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366068">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring IPv6 IS-IS Auto FRR</title>
</head>
<body><a name="EN-US_TASK_0172366068"></a><a name="EN-US_TASK_0172366068"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IPv6 IS-IS Auto FRR</h1>
<div class="taskbody"><p>IPv6 IS-IS Auto FRR can rapidly switch traffic from a faulty link to a backup link, ensuring that the traffic interruption time is less than 50 ms and improving IS-IS network reliability.</p>
<div class="context"><a name="EN-US_TASK_0172366068__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>As networks develop, services such as voice over IP (VoIP) and online video services have higher requirements for real-time transmission. On a live network, to switch traffic to a new link after a failure occurs, IS-IS must complete a series of operations involving failure detection, LSP update, LSP flooding, route calculation, and FIB entry delivery. This is a lengthy process, in which the traffic interruption time is much longer than 50 ms. As a result, the requirements for real-time transmission cannot be met.</p>
<p>With IPv6 IS-IS Auto FRR, devices can rapidly switch traffic from a faulty link to an alternate one without interrupting the traffic, which significantly improves IS-IS network reliability. </p>
<p>IPv6 IS-IS Auto FRR is applicable to the services that are sensitive to packet delay and packet loss.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>IPv6 IS-IS Auto FRR can only take effect in the standard topology.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366068__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring IPv6 IS-IS Auto FRR, complete the following tasks:</p>
<ul><li><p>Configure the link layer protocol on interfaces.</p>
</li><li><p>Configure IP addresses for interfaces to ensure that neighboring devices are reachable at the network layer.</p>
</li><li><p><a href="dc_vrp_isis_cfg_1023.html">Configure basic IPv6 IS-IS functions</a>.</p>
</li><li><p><a href="dc_vrp_ldp-p2p_cfg_0003.html">Configure a local LDP session</a> on the source node, the PQ node, and the nodes between them if remote LFA FRR is required.</p>
</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172366068__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure the LFA algorithm.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=isis"><b><span class="cmdname">isis</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span></span><p><p>The IS-IS process is enabled, and the IS-IS view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv6+frr"><b><span class="cmdname">ipv6 frr</span></b></a></span></span><p><p>The IS-IS IPv6 FRR view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=ecmp+disable"><b><span class="cmdname">ecmp disable</span></b></a> { <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> }</span><p><p>IPv6 IS-IS ECMP FRR is disabled.</p>
</p><p><p>With ECMP FRR, the IGP pre-calculates backup paths for load balancing links based on the LSDBs on the entire network and stores the backup paths in the forwarding table. The backup paths are used for traffic protection in the case of link failures. If the network topology changes, ECMP FRR triggers calculation of new backup paths, which increases the system calculation pressure. In addition, the backup entries generated by the ECMP FRR function increase the memory usage of the system. In this case, you can run this command to disable the ECMP FRR function.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=loop-free-alternate"><b><span class="cmdname">loop-free-alternate</span></b></a> [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ]</span></span><p><p>IPv6 IS-IS Auto FRR is enabled to generate loop-free backup links.</p>
</p><p><p>If no level is specified, IPv6 IS-IS Auto FRR is enabled for both Level-1 and Level-2.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=frr-policy+route"><b><span class="cmdname">frr-policy route</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></span></span><p><p>A route-policy is configured to filter backup routes so that only the matched backup routes are added to the routing table.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=tiebreaker"><b><span class="cmdname">tiebreaker</span></b></a> { <strong><span>node-protecting</span></strong> | <strong><span>lowest-cost</span></strong><span> | <strong><span>non-ecmp</span></strong></span><span> | <strong><span>srlg-disjoint</span></strong></span><span> | <strong><span>hold-max-cost</span></strong></span> } <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ]</span><p><p>The solution of selecting a backup path for IPv6 IS-IS Auto FRR is set.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the remote LFA algorithm.</span><p></p><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=isis"><b><span class="cmdname">isis</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span></span><p><p>The IS-IS process is enabled, and the IS-IS view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=frr"><b><span class="cmdname">frr</span></b></a></span></span><p><p>The IS-IS FRR view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=remote-lfa"><b><span class="cmdname">remote-lfa</span></b></a> <strong><span>tunnel</span></strong> <strong><span>ldp</span></strong> [ <strong><span>maximum-reachable-cost</span></strong> <i><span class="varname">cost-value</span></i> ] [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ]</span></span><p><p>Remote LFA Auto FRR is enabled.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the IS-IS view.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv6+frr"><b><span class="cmdname">ipv6 frr</span></b></a></span></span><p><p>The IS-IS IPv6 FRR view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=ecmp+disable"><b><span class="cmdname">ecmp disable</span></b></a> { <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> }</span><p><p>IPv6 IS-IS ECMP FRR is disabled.</p>
</p><p><p>With ECMP FRR, an IGP pre-calculates backup paths for load balancing links based on the LSDBs on the entire network and saves the backup paths in the forwarding table for traffic protection in the case of a fault. If the network topology changes, ECMP FRR triggers calculation of new backup paths, which increases the system calculation pressure. In addition, the backup entries generated by the ECMP FRR function increase the memory usage of the system. In this case, you can run this command to disable ECMP FRR.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=remote-lfa"><b><span class="cmdname">remote-lfa</span></b></a> <strong><span>tunnel</span></strong> <strong><span>ldp over-ipv4</span></strong> [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ]</span><p><p>Remote LFA Auto FRR is enabled.</p>
</p><p><p>LFA FRR cannot be used to calculate backup links on large-scale networks, especially on ring networks. As a result, reliability requirements cannot be met. In this case, IPv6 IS-IS Remote LFA FRR can be implemented. To enable IPv6 IS-IS Remote LFA, run the <a href="cmdqueryname=remote-lfa"><b><span class="cmdname">remote-lfa</span></b></a> command. Remote LFA computes a PQ node based on the protection path and establishes a tunnel between the source and PQ node to provide backup next-hop protection. If the protection link fails, traffic is automatically switched to the tunnel backup path, improving network reliability.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=tiebreaker"><b><span class="cmdname">tiebreaker</span></b></a> { <strong><span>node-protecting</span></strong> | <strong><span>lowest-cost</span></strong><span> | <strong><span>non-ecmp</span></strong></span><span> | <strong><span>srlg-disjoint</span></strong></span> } <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ]</span><p><p>A solution for selecting a backup path for IPv6 IS-IS auto FRR is set.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0172366068__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring IPv6 IS-IS Auto FRR, check the configurations.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+isis+route"><b><span class="cmdname">display isis route</span></b></a> [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> ] [ <i><span class="varname">process-id</span></i> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <strong><span>ipv6</span></strong> [ <i><span class="varname">ipv6-address</span></i> [ <i><span class="varname">prefix-length</span></i> ] ] [ <strong><span>verbose</span></strong> ] command to check information about the primary and backup links after IPv6 IS-IS Auto FRR is enabled.</p>
</li><li><p>Run the <a href="cmdqueryname=display+isis"><b><span class="cmdname">display isis</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>srlg</span></strong> { <i><span class="varname">srlgGroupId</span></i> | <strong><span>all</span></strong> } command to check shared risk link group information.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0000.html">IS-IS Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0110.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_1047_copy.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>