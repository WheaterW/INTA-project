
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an ACL">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0046.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00809835">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0257583279">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an ACL</title>
</head>
<body><a name="EN-US_TASK_0257583279"></a><a name="EN-US_TASK_0257583279"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an ACL</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0257583279__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>An ACL is a set of sequential filter rules. In an ACL rule, you can specify packet information, such as the inbound interface name, source or destination IP address, protocol type, source or destination port number, and permit or deny mode. Then, a device matches received packets against the rules and determines whether to accept or discard the packets.</p>
<p>An ACL consisting of a set of rules is used only to sort packets based on the defined rules. To filter packets, the ACL must be used together with a routing policy.</p>
<p>ACLs are classified as the ACLs that apply to IPv4 routes<span> or those that apply to IPv6 routes</span>. ACLs are also classified as interface-based ACLs, basic ACLs, or advanced ACLs based on the usage. You can specify an IP address and a subnet range in an ACL to match the source IP address, destination network segment address, or the next-hop address of each route.</p>
<div class="p">ACLs can be configured on network devices, such as access and core devices, to improve network security and stability. ACLs can be used to provide the following functions:<ul><li>Protect devices against IP, TCP, and Internet Control Message Protocol (ICMP) packet attacks.</li><li>Control network access. For example, ACLs can be used to control enterprise network users' access to external networks, the specific network resources that users can access, and the period during which users can access networks.</li><li>Limit network traffic and improve network performance. For example, ACLs can be used to limit bandwidth for upstream and downstream traffic and to apply charging rules to user requested bandwidth, ensuring efficient utilization of network resources.</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0257583279__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <strong><span>node</span></strong> <i><span class="varname">node</span></i></span><p><p>A route-policy node is created, and the route-policy view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=if-match+acl"><b><span class="cmdname">if-match acl</span></b></a> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> }</span><p><p>An ACL-based matching rule is defined.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=acl"><b><span class="cmdname" id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdname830329318214207">acl</span></b></a> { <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname1836897817214207">name</span></strong> <i><span class="varname" id="EN-US_TASK_0257583279__en-us_task_0172336153_varname1833174039214207">basic-acl-name</span></i> { <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname812104027214207">basic</span></strong> | [ <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname2098561743214207">basic</span></strong> ] <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname2073793852214207">number</span></strong> <i><span class="varname" id="EN-US_TASK_0257583279__en-us_task_0172336153_varname1517281059214207">basic-acl-number</span></i> } | [ <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname958027286214207">number</span></strong> ] <i><span class="varname" id="EN-US_TASK_0257583279__en-us_task_0172336153_varname235500026214207">basic-acl-number</span></i> } [ <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname48680667214207">match-order</span></strong> { <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname157204654214207">config</span></strong> | <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname507297311214207">auto</span></strong> } ]</span></span><p><p>The ACL view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=rule"><b><span class="cmdname" id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdname1993062488214207">rule</span></b></a> [ <i><span class="varname" id="EN-US_TASK_0257583279__en-us_task_0172336153_varname859153543214207">rule-id</span></i> ] [ <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname1446371756214207">name</span></strong> <i><span class="varname" id="EN-US_TASK_0257583279__en-us_task_0172336153_varname1516501376214207">rule-name</span></i> ] { <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname1764568478214207">deny</span></strong> | <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname761045443214207">permit</span></strong> } [ <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname350204750214207">fragment-type</span></strong> { <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname2057248666214207">fragment</span></strong> | <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname232427091214207">non-fragment</span></strong> | <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname2108634181214207">non-subseq</span></strong> | <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname1558997990214207">fragment-subseq</span></strong> | <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname1149675104214207">fragment-spe-first</span></strong> } | <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname810735923214207">source</span></strong> { <i><span class="varname" id="EN-US_TASK_0257583279__en-us_task_0172336153_varname673241813214207">source-ip-address</span></i> { <i><span class="varname" id="EN-US_TASK_0257583279__en-us_task_0172336153_varname58053590214207">source-wildcard</span></i> | <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname1238085223214207">0</span></strong><span> | <i><span class="varname" id="EN-US_TASK_0257583279__en-us_task_0172336153_varname1849892084214207">src-netmask</span></i></span> } | <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname336857444214207">any</span></strong> } | <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname1089666193214207">time-range</span></strong> <i><span class="varname" id="EN-US_TASK_0257583279__en-us_task_0172336153_varname1818489711214207">time-name</span></i> | <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname2122804462214207">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0257583279__en-us_task_0172336153_varname1001938923214207">vpn-instance-name</span></i> ] <sup id="EN-US_TASK_0257583279__en-us_task_0172336153_sup1574448225214207">*</sup></span></span><p><p>A rule is configured for the ACL.</p>
</p><p><p>When the <a href="cmdqueryname=rule"><b><span class="cmdname" id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdname220955808214207">rule</span></b></a> command is run to configure rules for a named ACL, only the source address range specified by <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname1062368536214207">source</span></strong> and the time period specified by <strong><span id="EN-US_TASK_0257583279__en-us_task_0172336153_cmdparmname2006062735214207">time-range</span></strong> are valid as the rules.</p>
<div class="p">When a filtering policy of a routing protocol is used to filter routes:<ul id="EN-US_TASK_0257583279__en-us_task_0172336153_ul135725010214207"><li id="EN-US_TASK_0257583279__en-us_task_0172336153_li1312346841214207"><p id="EN-US_TASK_0257583279__en-us_task_0172336153_p1956301997214207"><a name="EN-US_TASK_0257583279__en-us_task_0172336153_li1312346841214207"></a><a name="en-us_task_0172336153_li1312346841214207"></a>If the action specified in an ACL rule is <strong id="EN-US_TASK_0257583279__en-us_task_0172336153_b1343120114214207">permit</strong>, a route that matches the rule will be received or advertised by the system.</p>
</li><li id="EN-US_TASK_0257583279__en-us_task_0172336153_li1392638396214207"><p id="EN-US_TASK_0257583279__en-us_task_0172336153_p649252919214207"><a name="EN-US_TASK_0257583279__en-us_task_0172336153_li1392638396214207"></a><a name="en-us_task_0172336153_li1392638396214207"></a>If the action specified in an ACL rule is <strong id="EN-US_TASK_0257583279__en-us_task_0172336153_b1955829907214207">deny</strong>, a route that matches the rule will not be received or advertised by the system.</p>
</li><li id="EN-US_TASK_0257583279__en-us_task_0172336153_li1858384138214207"><p id="EN-US_TASK_0257583279__en-us_task_0172336153_p860045398214207"><a name="EN-US_TASK_0257583279__en-us_task_0172336153_li1858384138214207"></a><a name="en-us_task_0172336153_li1858384138214207"></a>If a route has not matched any ACL rules, the route will not be received or advertised by the system.</p>
</li><li id="EN-US_TASK_0257583279__en-us_task_0172336153_li124866694214207"><p id="EN-US_TASK_0257583279__en-us_task_0172336153_p543002939214207"><a name="EN-US_TASK_0257583279__en-us_task_0172336153_li124866694214207"></a><a name="en-us_task_0172336153_li124866694214207"></a>If an ACL does not contain any rules, all routes matching the <strong id="EN-US_TASK_0257583279__en-us_task_0172336153_b1183904776214207">route-policy</strong> that references the ACL will not be received or advertised by the system.</p>
</li><li id="EN-US_TASK_0257583279__en-us_task_0172336153_li1497229201214207"><p id="EN-US_TASK_0257583279__en-us_task_0172336153_p1865289308214207"><a name="EN-US_TASK_0257583279__en-us_task_0172336153_li1497229201214207"></a><a name="en-us_task_0172336153_li1497229201214207"></a>In the configuration order, the system first matches a route with a rule that has a smaller number and then matches the route with a rule with a larger number. Routes can be filtered using a blacklist or a whitelist:</p>
<p id="EN-US_TASK_0257583279__en-us_task_0172336153_p1198919868214207">Route filtering using a blacklist: Configure a rule with a smaller number and specify the action <strong id="EN-US_TASK_0257583279__en-us_task_0172336153_b1283372383214207">deny</strong> in this rule to filter out the unwanted routes. Then, configure another rule with a larger number in the same ACL and specify the action <strong id="EN-US_TASK_0257583279__en-us_task_0172336153_b1653264950214207">permit</strong> in this rule to receive or advertise the other routes.</p>
<p id="EN-US_TASK_0257583279__en-us_task_0172336153_p469236985214207">Route filtering using a whitelist: Configure a rule with a smaller number and specify the action <strong id="EN-US_TASK_0257583279__en-us_task_0172336153_b261709700214207">permit</strong> in this rule to permit the routes to be received or advertised by the system. Then, configure another rule with a larger number in the same ACL and specify the action <strong id="EN-US_TASK_0257583279__en-us_task_0172336153_b924805964214207">deny</strong> in this rule to filter out unwanted routes.</p>
</li></ul>
</div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0257583279__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+acl"><b><span class="cmdname">display acl</span></b></a> command to check the rules of the configured ACL.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0000.html">Routing Policy Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0003.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0046.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>