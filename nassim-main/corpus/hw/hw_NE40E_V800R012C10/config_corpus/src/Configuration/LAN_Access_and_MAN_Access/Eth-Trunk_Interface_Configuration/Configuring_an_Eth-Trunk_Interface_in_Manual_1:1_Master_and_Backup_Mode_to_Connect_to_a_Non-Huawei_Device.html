
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an Eth-Trunk Interface in Manual 1:1 Master/Backup Mode to Connect to a Non-Huawei Device">
<meta name="abstract" content="To allow a Huawei device to communicate with a non-Huawei device that uses master and backup interfaces (both in the up state), configure an Eth-Trunk interface in manual 1:1 master/backup mode on the Huawei device.">
<meta name="description" content="To allow a Huawei device to communicate with a non-Huawei device that uses master and backup interfaces (both in the up state), configure an Eth-Trunk interface in manual 1:1 master/backup mode on the Huawei device.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethtrunk_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethtrunk_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethtrunk_cfg_0042.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wwx1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362887">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an Eth-Trunk Interface in Manual 1:1 Master/Backup Mode to Connect to a Non-Huawei Device</title>
</head>
<body><a name="EN-US_TASK_0172362887"></a><a name="EN-US_TASK_0172362887"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an Eth-Trunk Interface in Manual 1:1 Master/Backup Mode to Connect to a Non-Huawei Device</h1>
<div class="taskbody"><p>To allow a Huawei device to communicate with a non-Huawei device that uses master and backup interfaces (both in the up state), configure an Eth-Trunk interface in manual 1:1 master/backup mode on the Huawei device.</p>
<div class="context"><a name="EN-US_TASK_0172362887__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>On the network shown in <a href="#EN-US_TASK_0172362887__fig_dc_vrp_ethtrunk_cfg_006501">Figure 1</a>, a non-Huawei device uses master and backup interfaces (both in the up state) to directly connect to a Huawei device. However, communication may fail because network administrator cannot identify the master and backup interfaces on the connected non-Huawei device during network planning or maintenance and therefore cannot correctly specify the master and backup interfaces when configuring the Eth-Trunk interface in manual 1:1 master/backup mode.</p>
<div class="fignone" id="EN-US_TASK_0172362887__fig_dc_vrp_ethtrunk_cfg_006501"><a name="EN-US_TASK_0172362887__fig_dc_vrp_ethtrunk_cfg_006501"></a><a name="fig_dc_vrp_ethtrunk_cfg_006501"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring an Eth-Trunk interface in manual 1:1 master/backup mode for communication with a non-Huawei device</span><br><span><img class="vsd" src="images/fig_dc_vrp_ethtrunk_cfg_006501.png" width="NaN" height="NaN"></span></div>
<p>To address this problem, run the <a href="cmdqueryname=inactive-port+shutdown+enable"><b><span class="cmdname">inactive-port shutdown enable</span></b></a> command on the Huawei device to forcibly set the backup member interface in the Eth-Trunk interface in manual 1:1 master/backup mode to the down state. This configuration allows the non-Huawei device to communicate with the Huawei device both through the master interfaces, ensuring communication.</p>
<p>If the master member interface for forwarding traffic fails, the system automatically disables the forcible down state of the backup member interface and restores the backup member interface to the up state so that it can communicate with the non-Huawei device.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=inactive-port+shutdown+enable"><b><span class="cmdname">inactive-port shutdown enable</span></b></a> and <a href="cmdqueryname=preempt+enable"><b><span class="cmdname">preempt enable</span></b></a> commands are mutually exclusive in this scenario.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362887__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface+eth-trunk"><b><span class="cmdname">interface eth-trunk</span></b></a> <i><span class="varname">trunk-id</span></i></span></span><p><p>An Eth-Trunk interface is created, and its view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=portswitch"><b><span class="cmdname">portswitch</span></b></a></span></span><p><p>The Eth-Trunk interface is switched to the Layer 2 mode.</p>
</p></li><li><span>Run <a href="cmdqueryname=mode"><b><span class="cmdname">mode</span></b></a> <strong><span>manual backup</span></strong></span><p><p>The Eth-Trunk interface is configured to work in manual 1:1 master/backup mode.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=inactive-port+shutdown+enable"><b><span class="cmdname">inactive-port shutdown enable</span></b></a></span></span><p><p>The backup member interface in the Eth-Trunk interface that works in manual 1:1 master/backup mode is forcibly set to the down state.</p>
</p></li><li><span>Run <a href="cmdqueryname=trunkport"><b><span class="cmdname">trunkport</span></b></a> <i><span class="varname">interface-type</span></i> { <i><span class="varname">interface-number1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">interface-number2</span></i> ] } &amp;&lt;1-<span>64</span>&gt;</span><p><p>Interfaces are added to the Eth-Trunk interface in batches.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Before adding an interface to an Eth-Trunk interface, ensure that the following condition is met:</p>
<ul><li><p>Member interfaces cannot be configured with services or Layer 3 configurations such as IP addresses.</p>
</li><li><p>Member interfaces cannot be manually configured with MAC addresses.</p>
</li><li>Before adding a Layer 2 interface to an Eth-Trunk interface, run the <a href="cmdqueryname=undo+portswitch"><b><span class="cmdname">undo portswitch</span></b></a> command to configure the Eth-Trunk interface to work in Layer 3 mode.</li><li><p>An Ethernet interface can be added to only one Eth-Trunk interface. Before adding it to another Eth-Trunk interface, delete it from the existing Eth-Trunk interface.</p>
</li></ul>
<p>An interface can be added to an Eth-Trunk interface in the Eth-Trunk interface view or in the interface view. For details, see <a href="dc_vrp_ethtrunk_cfg_0023.html">Adding Interfaces to an Eth-Trunk Interface</a>.</p>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The Eth-Trunk member interface view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=port-master"><b><span class="cmdname">port-master</span></b></a></span></span><p><p>The master member interface is specified.</p>
<p>Only one master interface can be specified between the two member interfaces in an Eth-Trunk interface in manual 1:1 master/backup mode.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172362887__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After the configuration is complete, check whether the configuration takes effect.</p>
<p>Run the <a href="cmdqueryname=display+interface"><b><span class="cmdname">display interface</span></b></a> command. The command output shows that the interface status is <strong>TRUNK BACKUP DOWN</strong>.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethtrunk_cfg_0000.html">Eth-Trunk Interface Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethtrunk_cfg_0021.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethtrunk_cfg_0042.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>