
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Interface-based BPDU Tunneling">
<meta name="abstract" content="You can configure interface-based bridge protocol data unit (BPDU) tunneling based on the different roles of provider edges (PEs) and customer edges (CEs) or on the same role of PEs and CEs. After the configuration is complete, when an interface of a PE receives a BPDU from a user network, the PE adds a VLAN tag to the BPDU based on the PVID of the interface, selects a BPDU tunnel based on the VLAN ID in the tag, and transmits the BPDU through the BPDU tunnel. In this manner, BPDUs from different user networks are isolated.">
<meta name="description" content="You can configure interface-based bridge protocol data unit (BPDU) tunneling based on the different roles of provider edges (PEs) and customer edges (CEs) or on the same role of PEs and CEs. After the configuration is complete, when an interface of a PE receives a BPDU from a user network, the PE adds a VLAN tag to the BPDU based on the PVID of the interface, selects a BPDU tunnel based on the VLAN ID in the tag, and transmits the BPDU through the BPDU tunnel. In this manner, BPDUs from different user networks are isolated.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bpdu-tunnel_cfg_0004.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bpdu-tunnel_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bpdu-tunnel_cfg_0008.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BPDU Tunnel">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BPDU Tunnel">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="BPDU Tunnel">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="BPDU Tunnel">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wwx1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363703">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Interface-based BPDU Tunneling</title>
</head>
<body><a name="EN-US_TASK_0172363703"></a><a name="EN-US_TASK_0172363703"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Interface-based BPDU Tunneling</h1>
<div class="taskbody"><p>You can configure interface-based bridge protocol data unit (BPDU) tunneling based on the different roles of provider edges (PEs) and customer edges (CEs) or on the same role of PEs and CEs. After the configuration is complete, when an interface of a PE receives a BPDU from a user network, the PE adds a VLAN tag to the BPDU based on the PVID of the interface, selects a BPDU tunnel based on the VLAN ID in the tag, and transmits the BPDU through the BPDU tunnel. In this manner, BPDUs from different user networks are isolated.</p>
<div class="context"><a name="EN-US_TASK_0172363703__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>You can configure interface-based BPDU tunneling based on <a href="#EN-US_TASK_0172363703__step_dc_vrp_bpdu-tunnel_cfg_000701">the different roles of PEs and CEs</a> or on <a href="#EN-US_TASK_0172363703__step_dc_vrp_bpdu-tunnel_cfg_000702">the same role of PEs and CEs</a>.</p>
<p>Different roles of PEs and CEs: CEs are customers, and PEs are providers.</p>
<p>Same role of PEs and CEs: CEs and PEs are both customers.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172363703__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li id="EN-US_TASK_0172363703__step_dc_vrp_bpdu-tunnel_cfg_000701"><span id="EN-US_TASK_0172363703__">Different roles of PEs and CEs</span><ol><li class="substepexpand"><span>On a PE, run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bpdu-tunnel+stp+bridge+role+provider"><b><span class="cmdname">bpdu-tunnel stp bridge role provider</span></b></a></span></span><p><p>The PE is configured as a provider.</p>
</p><p><p>This command is supported only by the admin VS but takes effect for all VSs.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span></span><p><p>The view of the PE interface connected to a CE is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=stp"><b><span class="cmdname">stp</span></b></a><strong><span> disable</span></strong></span></span><p><p>STP is disabled on the interface, which does not participate in spanning tree calculation.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
<p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If PEs and CEs are configured with different roles, the PEs can transparently transmit BPDUs sent by the CEs. In this case, you do not need to enable BPDU tunneling on the interfaces of the PEs.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172363703__step_dc_vrp_bpdu-tunnel_cfg_000702"><span id="EN-US_TASK_0172363703__">Same role of PEs and CEs</span><ol><li class="substepexpand"><span>On a PE, run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bpdu-tunnel+stp+group-mac"><b><span class="cmdname">bpdu-tunnel stp group-mac</span></b></a> <i><span class="varname">group-mac</span></i></span></span><p><p>The well-known destination Media Access Control (MAC) address of BPDUs is changed to a specified MAC address.</p>
</p><p><p>This command is supported only on the admin VS but takes effect on all VSs.</p>
<p>The well-known MAC address of BPDUs can be changed only to a multicast MAC address, which cannot be a reserved multicast MAC address in the range of 0180-C200-0000 to 0180-C200-002F.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The view of the PE interface connected to a CE is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bpdu-tunnel+enable"><b><span class="cmdname">bpdu-tunnel enable</span></b></a></span></span><p><p>BPDU tunneling is enabled on the PE interface to transparently transmit BPDUs from a user network.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=stp"><b><span class="cmdname">stp</span></b></a><strong><span> disable</span></strong></span></span><p><p>STP is disabled on the interface, which does not participate in spanning tree calculation.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
<p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If PEs and CEs have the same role, the PEs cannot transparently transmit BPDUs sent by the CEs. In this case, you need to enable BPDU tunneling on the PE interfaces.</p>
</div></div>
</p></li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bpdu-tunnel_cfg_0004.html">Configuring Interface-based BPDU Tunneling Function
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bpdu-tunnel_cfg_0006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bpdu-tunnel_cfg_0008.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>