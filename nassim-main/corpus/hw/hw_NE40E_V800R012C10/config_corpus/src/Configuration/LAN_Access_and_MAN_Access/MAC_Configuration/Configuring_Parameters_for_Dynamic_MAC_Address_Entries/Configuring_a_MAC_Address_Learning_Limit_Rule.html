
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a MAC Address Learning Limit Rule">
<meta name="abstract" content="Configuring a MAC address learning limit rule can control the number of access users. If the number of learned MAC addresses reaches the maximum number, no additional MAC addresses will be learned. In addition, the packet discarding and alarm functions can be configured to prevent MAC address attacks and improve network security.">
<meta name="description" content="Configuring a MAC address learning limit rule can control the number of access users. If the number of learned MAC addresses reaches the maximum number, no additional MAC addresses will be learned. In addition, the packet discarding and alarm functions can be configured to prevent MAC address attacks and improve network security.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="l00425560,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wWX1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362727">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring a MAC Address Learning Limit Rule</title>
</head>
<body><a name="EN-US_TASK_0172362727"></a><a name="EN-US_TASK_0172362727"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a MAC Address Learning Limit Rule</h1>
<div class="taskbody"><p>Configuring a MAC address learning limit rule can control the number of access users. If the number of learned MAC addresses reaches the maximum number, no additional MAC addresses will be learned. In addition, the packet discarding and alarm functions can be configured to prevent MAC address attacks and improve network security.</p>
<div class="context"><a name="EN-US_TASK_0172362727__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Before configuring a MAC address learning limit rule, run the <a href="cmdqueryname=reset+mac-address"><b><span class="cmdname">reset mac-address</span></b></a> command to clear the learned MAC addresses to ensure that the number of MAC addresses that can be learned is limited accurately.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362727__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Perform one or more of the following configurations as required.</span><p><ul><li><p>Configure a MAC address learning limit rule on an interface to control the number of users connected to the interface. Choose one of the following configuration modes:</p>
<div class="p">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring a MAC address learning limit rule on an interface</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.2.2.2.1.1.2.1.2.3.1.1" liSelected="liSelected"><p>Configuring a MAC Address Learning Limit Rule</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.2.2.2.1.1.2.1.2.3.1.2" liSelected="liSelected"><p>Operation</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.2.2.1.1.2.1.2.3.1.1 "><p>Specifying a rule name</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.2.2.1.1.2.1.2.3.1.2 "><div class="p"><ol type="a"><li><p id="EN-US_TASK_0172362727__p_01">Run the <a href="cmdqueryname=mac-limit+rule-name"><b><span class="cmdname" id="EN-US_TASK_0172362727__cmdname635318545214027">mac-limit rule-name</span></b></a> <i><span class="varname" id="EN-US_TASK_0172362727__varname1913847554214027">rule-name</span></i> { <strong><span id="EN-US_TASK_0172362727__cmdparmname1443852583214027">action</span></strong> { <strong><span id="EN-US_TASK_0172362727__cmdparmname386216247214027">discard</span></strong> | <strong><span id="EN-US_TASK_0172362727__cmdparmname1613601034214027">forward</span></strong> } | <strong><span id="EN-US_TASK_0172362727__cmdparmname407611219214027">alarm</span></strong> { <strong><span id="EN-US_TASK_0172362727__cmdparmname993866705214027">disable</span></strong> | <strong><span id="EN-US_TASK_0172362727__cmdparmname1826308228214027">enable</span></strong> } | <strong><span id="EN-US_TASK_0172362727__cmdparmname97453245214027">maximum</span></strong> <i><span class="varname" id="EN-US_TASK_0172362727__varname1260951955214027">max</span></i> [ <strong><span id="EN-US_TASK_0172362727__cmdparmname494419539214027">rate</span></strong> <i><span class="varname" id="EN-US_TASK_0172362727__varname140906702214027">interval</span></i> ] } <sup id="EN-US_TASK_0172362727__sup2070495355214027">*</sup> command to create the global MAC address learning limit rule.</p>
</li><li><p>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i> command to enter the Ethernet interface view.</p>
</li><li><p>Run the <a href="cmdqueryname=mac-limit+rule-name"><b><span class="cmdname">mac-limit rule-name</span></b></a> <i><span class="varname">rule-name</span></i> command to apply the global MAC address learning limit rule on the interface.</p>
</li></ol>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.2.2.1.1.2.1.2.3.1.1 "><p>Without specifying a rule name</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.2.2.1.1.2.1.2.3.1.2 "><ol type="a"><li><p>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i> command to enter the interface view.</p>
</li><li><p>Run the <a href="cmdqueryname=mac-limit"><b><span class="cmdname">mac-limit</span></b></a> { <strong><span>action</span></strong> { <strong><span>discard</span></strong> | <strong><span>forward</span></strong> } | <strong><span>alarm</span></strong> { <strong><span>disable</span></strong> | <strong><span>enable</span></strong> } | <strong><span>maximum</span></strong> <i><span class="varname">max</span></i> } <sup><sup>*</sup></sup> command to configure a MAC address learning limit rule.</p>
</li></ol>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</li><li><p>Configure a MAC address learning limit rule in a VLAN to control the number of users in the VLAN.</p>
<ol type="a"><li><p>Run the <a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i> command to enter the VLAN view.</p>
</li><li><p>Run the <a href="cmdqueryname=mac-limit"><b><span class="cmdname">mac-limit</span></b></a> { <strong><span>action</span></strong> { <strong><span>discard</span></strong> | <strong><span>forward</span></strong> } | <strong><span>alarm</span></strong> { <strong><span>disable</span></strong> | <strong><span>enable</span></strong> }| <strong><span>maximum</span></strong> <i><span class="varname">max<span>Value</span></span></i> [ <strong><span>rate</span></strong> <i><span class="varname">interval</span></i> ] } <sup><sup>*</sup></sup> command to configure a MAC address learning limit rule.</p>
</li><li><p>(Optional) Run the <a href="cmdqueryname=mac-limit"><b><span class="cmdname">mac-limit</span></b></a> <strong><span>up-threshold</span></strong> <i><span class="varname">up-threshold</span></i> <strong><span>down-threshold</span></strong> <i><span class="varname">down-threshold</span></i> command to configure the threshold percentage of MAC addresses that have alarms generated and cleared.</p>
</li></ol>
</li><li><p>Configure a MAC address learning limit rule on an interface in a VLAN to control the number of VLAN users connected to the interface. Choose one of the following configuration modes:</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Configuring a MAC address learning limit rule on an interface in a VLAN</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.2.2.2.1.3.2.2.3.1.1" liSelected="liSelected"><p>Configuring a MAC Address Learning Limit Rule</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.2.2.2.1.3.2.2.3.1.2" liSelected="liSelected"><p>Operation</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.2.2.1.3.2.2.3.1.1 "><p>Specifying a rule name</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.2.2.1.3.2.2.3.1.2 "><div class="p"><ol type="a"><li><p>Run the <a href="cmdqueryname=mac-limit+rule-name"><b><span class="cmdname" id="EN-US_TASK_0172362727__en-us_task_0172362727_cmdname635318545214027">mac-limit rule-name</span></b></a> <i><span class="varname" id="EN-US_TASK_0172362727__en-us_task_0172362727_varname1913847554214027">rule-name</span></i> { <strong><span id="EN-US_TASK_0172362727__en-us_task_0172362727_cmdparmname1443852583214027">action</span></strong> { <strong><span id="EN-US_TASK_0172362727__en-us_task_0172362727_cmdparmname386216247214027">discard</span></strong> | <strong><span id="EN-US_TASK_0172362727__en-us_task_0172362727_cmdparmname1613601034214027">forward</span></strong> } | <strong><span id="EN-US_TASK_0172362727__en-us_task_0172362727_cmdparmname407611219214027">alarm</span></strong> { <strong><span id="EN-US_TASK_0172362727__en-us_task_0172362727_cmdparmname993866705214027">disable</span></strong> | <strong><span id="EN-US_TASK_0172362727__en-us_task_0172362727_cmdparmname1826308228214027">enable</span></strong> } | <strong><span id="EN-US_TASK_0172362727__en-us_task_0172362727_cmdparmname97453245214027">maximum</span></strong> <i><span class="varname" id="EN-US_TASK_0172362727__en-us_task_0172362727_varname1260951955214027">max</span></i> [ <strong><span id="EN-US_TASK_0172362727__en-us_task_0172362727_cmdparmname494419539214027">rate</span></strong> <i><span class="varname" id="EN-US_TASK_0172362727__en-us_task_0172362727_varname140906702214027">interval</span></i> ] } <sup id="EN-US_TASK_0172362727__en-us_task_0172362727_sup2070495355214027">*</sup> command to create the global MAC address learning limit rule.</p>
</li><li><p>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i> command to enter the interface view.</p>
</li><li><p>Run the <a href="cmdqueryname=mac-limit+vlan"><b><span class="cmdname">mac-limit vlan</span></b></a> <i><span class="varname">vlan-id1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">vlan-id2</span></i> ] <strong><span>rule-name</span></strong> <i><span class="varname">rule-name</span></i> command to apply the global MAC address learning limit rule to the VLAN to which the interface belongs.</p>
</li></ol>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.2.2.1.3.2.2.3.1.1 "><p>Without specifying a rule name</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.2.2.2.1.3.2.2.3.1.2 "><ol type="a"><li><p>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i> command to enter the interface view.</p>
</li><li><p>Run the <a href="cmdqueryname=mac-limit"><b><span class="cmdname">mac-limit</span></b></a> { <strong><span>action</span></strong> { <strong><span>discard</span></strong> | <strong><span>forward</span></strong> } | <strong><span>alarm</span></strong> { <strong><span>disable</span></strong> | <strong><span>enable</span></strong> } | <strong><span>maximum</span></strong> <i><span class="varname">max<span>Value</span></span></i> } <sup><sup>*</sup></sup> command to configure a MAC address learning limit rule.</p>
</li></ol>
</td>
</tr>
</tbody>
</table>
</div>
</li><li><p>Configure a MAC address learning limit rule in a virtual switching instance (VSI) to control the number of users in the VSI.</p>
<ol type="a"><li><p>Run the <a href="cmdqueryname=vsi"><b><span class="cmdname">vsi</span></b></a> <i><span class="varname">vsi-name</span></i> [ <strong><span>static</span></strong> ] command to enter the VSI view.</p>
</li><li><p>Run the <a href="cmdqueryname=mac-limit"><b><span class="cmdname">mac-limit</span></b></a> { <strong><span>action</span></strong> { <strong><span>discard</span></strong> | <strong><span>forward</span></strong> } | <strong><span>maximum</span></strong> <i><span class="varname">max</span></i> [ <strong><span>rate</span></strong> <i><span class="varname">interval</span></i> ] } <sup><sup>*</sup></sup> command to configure a MAC address learning limit rule.</p>
</li><li><p>Run the <a href="cmdqueryname=mac-limit"><b><span class="cmdname">mac-limit</span></b></a> <strong><span>up-threshold</span></strong> <i><span class="varname">up-threshold</span></i> <strong><span>down-threshold</span></strong> <i><span class="varname">down-threshold</span></i> command to configure alarm rising and falling thresholds for MAC address learning.</p>
</li></ol>
</li><li><p>Configure a MAC address learning limit rule on a pseudo wire (PW) to control the number of users on the PW.</p>
<ol type="a"><li><p>Run the <a href="cmdqueryname=vsi"><b><span class="cmdname">vsi</span></b></a> <i><span class="varname">vsi-name</span></i> [ <strong><span>static</span></strong> ] command to enter the VSI view.</p>
</li><li>Run the <a href="cmdqueryname=pwsignal"><b><span class="cmdname">pwsignal</span></b></a> <strong><span>ldp</span></strong> command to enter the VSI LDP view.</li><li>Run the <a href="cmdqueryname=vsi-id"><b><span class="cmdname">vsi-id</span></b></a> <i><span class="varname">vsi-id</span></i> command to configure the VSI ID.</li><li>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> command to configure the IPv4 address of a VSI peer.</li><li>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> <strong><span>pw</span></strong> <i><span class="varname">pw-name</span></i> command to create a PW.</li><li><p>Run the <a href="cmdqueryname=mac-limit"><b><span class="cmdname">mac-limit</span></b></a> { <strong><span>action</span></strong> { <strong><span>discard</span></strong> | <strong><span>forward</span></strong> } | <strong><span>alarm</span></strong> { <strong><span>disable</span></strong> | <strong><span>enable</span></strong> } | <strong><span>maximum</span></strong> <i><span class="varname">max<span>Value</span></span></i> [ <strong><span>rate</span></strong> <i><span class="varname">interval</span></i> ] } <sup>*</sup> command to configure a MAC address learning limit rule.</p>
</li></ol>
</li></ul>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0006.html">Configuring Parameters for Dynamic MAC Address Entries
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0005.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>