
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring System Parameters">
<meta name="abstract" content="STP/Rapid Spanning Tree Protocol (RSTP) parameters that may affect network convergence include the network diameter, hello time, and timeout period for waiting for Bridge Protocol Data Units (BPDUs) from the upstream (3 x hello time x time factor). Therefore, STP/RSTP parameters need to be set properly to help implement rapid network convergence.">
<meta name="description" content="STP/Rapid Spanning Tree Protocol (RSTP) parameters that may affect network convergence include the network diameter, hello time, and timeout period for waiting for Bridge Protocol Data Units (BPDUs) from the upstream (3 x hello time x time factor). Therefore, STP/RSTP parameters need to be set properly to help implement rapid network convergence.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0012.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0015.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="STP/RSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="STP/RSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="STP/RSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="STP/RSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wWX1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363549">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring System Parameters</title>
</head>
<body><a name="EN-US_TASK_0172363549"></a><a name="EN-US_TASK_0172363549"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">Configuring System Parameters</h1>



<div class="taskbody"><p>STP/Rapid Spanning Tree Protocol (RSTP) parameters that may affect network convergence include the network diameter, hello time, and timeout period for waiting for Bridge Protocol Data Units (BPDUs) from the upstream (3 x hello time x time factor). Therefore, STP/RSTP parameters need to be set properly to help implement rapid network convergence.</p>

<div class="steps"><a name="EN-US_TASK_0172363549__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol>
<li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li>
<li id="EN-US_TASK_0172363549__step_2"><span id="EN-US_TASK_0172363549__cmd1805721810214029">Run <a href="cmdqueryname=stp+bridge-diameter"><b><span class="cmdname" id="EN-US_TASK_0172363549__cmdname1909702846214029">stp bridge-diameter</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363549__varname533868560214029">diameter</span></i></span><p><p id="EN-US_TASK_0172363549__p161261578569">The network diameter is configured.</p>
</p><p><ul id="EN-US_TASK_0172363549__ul1104193913214029"><li id="EN-US_TASK_0172363549__li2141401409214029"><p id="EN-US_TASK_0172363549__p855040990214029"><a name="EN-US_TASK_0172363549__li2141401409214029"></a><a name="li2141401409214029"></a>RSTP uses a single spanning tree instance on the entire network, which cannot prevent the performance from deteriorating when the network scale grows. Therefore, the network diameter cannot be larger than 7.</p>
</li><li id="EN-US_TASK_0172363549__li1586797536214029"><p id="EN-US_TASK_0172363549__p1854259106214029"><a name="EN-US_TASK_0172363549__li1586797536214029"></a><a name="li1586797536214029"></a>It is recommended that you run the <a href="cmdqueryname=stp+bridge-diameter"><b><span class="cmdname" id="EN-US_TASK_0172363549__cmdname475489231214313">stp bridge-diameter</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363549__varname1267065992214313">diameter</span></i> command to set the network diameter. Then, the <span class="keyword" id="EN-US_TASK_0172363549__keyword2137159014214029">device</span> calculates the optimal Forward Delay period, Hello time, and Max Age period based on the set network diameter.</p>
</li></ul>
</p></li>
<li id="EN-US_TASK_0172363549__step_3"><span id="EN-US_TASK_0172363549__cmd1630334902214029">Run <a href="cmdqueryname=stp+timer-factor"><b><span class="cmdname" id="EN-US_TASK_0172363549__cmdname2022254636214029">stp timer-factor</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363549__varname1707635273214029">factor</span></i></span><p><p id="EN-US_TASK_0172363549__p109254145710">The timeout period for waiting for BPDUs from the upstream of a device is set.</p>
</p></li>
<li id="EN-US_TASK_0172363549__step_5"><span id="EN-US_TASK_0172363549__cmd680604499214029">(Optional) If the current device is at the edge of a network, run both or either of the following commands as needed:</span>
<p><ul id="EN-US_TASK_0172363549__ul545553421214029"><li id="EN-US_TASK_0172363549__li670610999214029"><p id="EN-US_TASK_0172363549__p964880737214029"><a name="EN-US_TASK_0172363549__li670610999214029"></a><a name="li670610999214029"></a>To configure all ports on the devices as edge ports, run <a href="cmdqueryname=stp+edged-port+default"><b><span class="cmdname" id="EN-US_TASK_0172363549__cmdname2076462294214029">stp edged-port default</span></b></a> command.</p>
<p id="EN-US_TASK_0172363549__p2072140307214029">After ports on a network edge device are configured as edge ports, the ports no longer participate in spanning tree calculation. This speeds up network topology convergence and improves network stability.</p>
</li><li id="EN-US_TASK_0172363549__li652942543214029"><p id="EN-US_TASK_0172363549__p363884031214029"><a name="EN-US_TASK_0172363549__li652942543214029"></a><a name="li652942543214029"></a>To configure all ports on the devices as BPDU filter ports, run the <a href="cmdqueryname=stp+bpdu-filter+default"><b><span class="cmdname" id="EN-US_TASK_0172363549__cmdname1242017219214029">stp bpdu-filter default</span></b></a> command.</p>
<p id="EN-US_TASK_0172363549__p1256224616214029">After ports on a network edge device are configured as BPDU filter ports, the ports no longer process or send BPDUs.</p>
</li></ul>
<div class="caution" id="EN-US_TASK_0172363549__note1550508733214029"><span class="cautiontitle"><img src="../../../../public_sys-resources/caution_3.0-en-us.png"> </span><div class="cautionbody"><p id="EN-US_TASK_0172363549__p1833702833214029">After the <a href="cmdqueryname=stp+bpdu-filter+default"><b><span class="cmdname" id="EN-US_TASK_0172363549__cmdname1642132959214029">stp bpdu-filter default</span></b></a> and <a href="cmdqueryname=stp+edged-port+default"><b><span class="cmdname" id="EN-US_TASK_0172363549__cmdname1228958266214029">stp edged-port default</span></b></a> commands are run in the system view, all ports on the device no longer actively send BPDUs or negotiate with directly-connected ports; instead, all the ports are in the Forwarding state. This may lead to a loop on the network, causing broadcast storms. Exercise caution when running these commands.</p>
</div></div>
</p>
</li>
<li id="EN-US_TASK_0172363549__step_4"><span id="EN-US_TASK_0172363549__cmd2049860805214029">(Optional) To set the Forward Delay period, Hello time, and Max Age period, perform the following operations:</span>
<p><ul id="EN-US_TASK_0172363549__ul1370004274214029"><li id="EN-US_TASK_0172363549__li2037198069214029"><p id="EN-US_TASK_0172363549__p1856161562214029"><a name="EN-US_TASK_0172363549__li2037198069214029"></a><a name="li2037198069214029"></a>Run the <a href="cmdqueryname=stp+timer+forward-delay"><b><span class="cmdname" id="EN-US_TASK_0172363549__cmdname648206196214029">stp timer forward-delay</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363549__varname327137539214313">forward-delay</span></i> command to set the Forward Delay period for a device.</p>
</li><li id="EN-US_TASK_0172363549__li24309190214029"><p id="EN-US_TASK_0172363549__p542663400214029"><a name="EN-US_TASK_0172363549__li24309190214029"></a><a name="li24309190214029"></a>Run the <a href="cmdqueryname=stp+timer+hello"><b><span class="cmdname" id="EN-US_TASK_0172363549__cmdname734976879214029">stp timer hello</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363549__varname1448733264214313">hello-time</span></i> command to set the Hello time for a device.</p>
</li><li id="EN-US_TASK_0172363549__li1380448016214029"><p id="EN-US_TASK_0172363549__p1923966371214029"><a name="EN-US_TASK_0172363549__li1380448016214029"></a><a name="li1380448016214029"></a>Run the <a href="cmdqueryname=stp+timer+max-age"><b><span class="cmdname" id="EN-US_TASK_0172363549__cmdname1939552219214029">stp timer max-age</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363549__varname174045488214313">max-age</span></i> command to set the Max Age period for a device.</p>
</li></ul>
<div class="note" id="EN-US_TASK_0172363549__note2070907788214029"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172363549__p1479725987214029">The values of the Hello time, Forward Delay period, and Max Age period must comply with the following formulas. Otherwise, networking flapping occurs.</p>
<ul id="EN-US_TASK_0172363549__ul318055653214029"><li id="EN-US_TASK_0172363549__li219151558214029"><p id="EN-US_TASK_0172363549__p345780701214029"><a name="EN-US_TASK_0172363549__li219151558214029"></a><a name="li219151558214029"></a>2 Ã (Forward Delay - 1.0 second) &gt;= Max Age</p>
</li><li id="EN-US_TASK_0172363549__li1765689614214029"><p id="EN-US_TASK_0172363549__p2016308252214029"><a name="EN-US_TASK_0172363549__li1765689614214029"></a><a name="li1765689614214029"></a>Max Age &gt;= 2 Ã (Hello Time + 1.0 second)</p>
</li></ul>
</div></div>
</p>
</li>
<li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li>
</ol></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0012.html">Configuring STP/RSTP Parameters on an Interface
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0015.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>