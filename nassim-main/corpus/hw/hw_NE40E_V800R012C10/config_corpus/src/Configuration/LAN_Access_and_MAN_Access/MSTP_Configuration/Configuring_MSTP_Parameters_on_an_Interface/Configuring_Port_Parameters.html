
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Port Parameters">
<meta name="abstract" content="Port parameters that may affect Multiple Spanning Tree Protocol (MSTP) topology convergence include the link type and maximum number of sent Bridge Protocol Data Units (BPDUs). Configure proper port parameters to implement rapid topology convergence.">
<meta name="description" content="Port parameters that may affect Multiple Spanning Tree Protocol (MSTP) topology convergence include the link type and maximum number of sent Bridge Protocol Data Units (BPDUs). Configure proper port parameters to implement rapid topology convergence.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0023.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0025.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wwx1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363633">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Port Parameters</title>
</head>
<body><a name="EN-US_TASK_0172363633"></a><a name="EN-US_TASK_0172363633"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Port Parameters</h1>
<div class="taskbody"><p>Port parameters that may affect Multiple Spanning Tree Protocol (MSTP) topology convergence include the link type and maximum number of sent Bridge Protocol Data Units (BPDUs). Configure proper port parameters to implement rapid topology convergence.</p>
<div class="steps"><a name="EN-US_TASK_0172363633__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172363633__en-us_task_0172363632_cmdname447946339214313">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0172363633__en-us_task_0172363632_p1024298453214313">The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span></span><p><p>The view of the Ethernet interface participating in spanning tree protocol calculation is displayed.</p>
</p><p><div class="note" id="EN-US_TASK_0172363633__en-us_task_0172363544_note64068115214313"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172363633__en-us_task_0172363544_p773718156479">The following configuration can be configured both on a Layer 2 interface and a Layer 3 interface.</p>
</div></div>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=stp+point-to-point"><b><span class="cmdname" id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdname1741728904214313">stp point-to-point</span></b></a> { <strong><span id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdparmname1467423029214313">auto</span></strong> | <strong><span id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdparmname1339936567214313">force-false</span></strong> | <strong><span id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdparmname921145344214313">force-true</span></strong> }</span></span><p><p id="EN-US_TASK_0172363633__en-us_task_0172363550_p425101913413">The link type is configured for the interface.</p>
</p><p><ul id="EN-US_TASK_0172363633__en-us_task_0172363550_ul38066989214029"><li id="EN-US_TASK_0172363633__en-us_task_0172363550_li1147465452214029"><p id="EN-US_TASK_0172363633__en-us_task_0172363550_p1048701704214029"><a name="EN-US_TASK_0172363633__en-us_task_0172363550_li1147465452214029"></a><a name="en-us_task_0172363550_li1147465452214029"></a>If the Ethernet port works in full-duplex mode, the port is connected to a P2P link. In this case, <strong><span id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdparmname1384320562214313">force-true</span></strong> can be configured to implement rapid network convergence.</p>
</li><li id="EN-US_TASK_0172363633__en-us_task_0172363550_li1736716951214029"><p id="EN-US_TASK_0172363633__en-us_task_0172363550_p404065433214029"><a name="EN-US_TASK_0172363633__en-us_task_0172363550_li1736716951214029"></a><a name="en-us_task_0172363550_li1736716951214029"></a>If the Ethernet port works in half-duplex mode, you can configure <a href="cmdqueryname=stp+point-to-point"><b><span class="cmdname" id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdname1196388365214313">stp point-to-point</span></b></a> <strong><span id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdparmname13344493214313">force-true</span></strong> to forcibly set the link type to P2P to implement rapid network convergence.</p>
</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=stp+mcheck"><b><span class="cmdname">stp mcheck</span></b></a></span></span><p><p>The MCheck operation is performed.</p>
</p><p><p>On a device running MSTP, if an interface is connected to a device running STP, the interface automatically transitions to the STP mode.</p>
<p>Performing MCheck on the interface is required to manually switch the interface to the MSTP mode because the interface fails to automatically transition to the MSTP mode in the following situations:</p>
<ul><li><p>The device running STP is shut down or moved.</p>
</li><li><p>The device running STP transitions to the MSTP mode.</p>
</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=stp+transmit-limit"><b><span class="cmdname" id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdname1431194951214313">stp transmit-limit</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363633__en-us_task_0172363550_varname159471689214313">packet-number</span></i></span></span><p><p id="EN-US_TASK_0172363633__en-us_task_0172363550_p135941149058">The maximum number of BPDUs that the interface sends per second is set.</p>
</p><p><div class="note" id="EN-US_TASK_0172363633__en-us_task_0172363550_note981558842214029"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172363633__en-us_task_0172363550_p509494844214313">If the same maximum number of BPDUs need to be sent by each interface on a device, run the <a href="cmdqueryname=stp+transmit-limit+%28system+view%29"><b><span class="cmdname" id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdname1626349907214313">stp transmit-limit (system view)</span></b></a> command. The <a href="cmdqueryname=stp+transmit-limit+%28interface+view%29"><b><span class="cmdname" id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdname1032074896214313">stp transmit-limit (interface view)</span></b></a> command takes precedence over the <a href="cmdqueryname=stp+transmit-limit+%28system+view%29"><b><span class="cmdname" id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdname690384660214313">stp transmit-limit (system view)</span></b></a> command. If the <a href="cmdqueryname=stp+transmit-limit+%28interface+view%29"><b><span class="cmdname" id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdname983136199214313">stp transmit-limit (interface view)</span></b></a> command is run on an interface, the <a href="cmdqueryname=stp+transmit-limit+%28system+view%29"><b><span class="cmdname" id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdname874015759214313">stp transmit-limit (system view)</span></b></a> command does not take effect on the interface.</p>
</div></div>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=stp+edged-port"><b><span class="cmdname" id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdname1574660896214313">stp edged-port</span></b></a> <strong><span id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdparmname1438813417214313">enable</span></strong></span></span><p><p id="EN-US_TASK_0172363633__en-us_task_0172363550_p480837054214029">The interface is configured as an edge port.</p>
<p id="EN-US_TASK_0172363633__en-us_task_0172363550_p1254610271062">If a device port is connected to a terminal, you can run this command to configure the port as an edge port.</p>
<p id="EN-US_TASK_0172363633__en-us_task_0172363550_p769816910718">If the current port has been configured as an edge port, the port is still be able to send BPDUs. This may cause BPDUs to be sent to other networks, leading to network flapping. To prevent this problem, run the <a href="cmdqueryname=stp+bpdu-filter"><b><span class="cmdname" id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdname1032764562214313">stp bpdu-filter</span></b></a> command to configure the edge port as a BPDU filter port that does not process or send BPDUs.</p>
<div class="note" id="EN-US_TASK_0172363633__en-us_task_0172363550_note1235372188214029"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172363633__en-us_task_0172363550_p1275452726214313">After the <a href="cmdqueryname=stp+bpdu-filter"><b><span class="cmdname" id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdname986149964214313">stp bpdu-filter</span></b></a> command is run on a port, the port no longer processes or sends BPDUs and cannot negotiate STP status with the directly connected port. Therefore, exercise caution when running this command.</p>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <a href="cmdqueryname=error-down+auto-recovery"><b><span class="cmdname">error-down auto-recovery</span></b></a> <strong><span>cause</span></strong> <i><span class="varname">error-down-type </span></i><strong><span>interval</span></strong> <i><span class="varname">interval-value</span></i></span><p><p>The edge port in the error-down state is enabled to automatically go up, and the delay for the transition from down to up is set.</p>
<p>There is no default value for the delay. Therefore, you must specify a delay when using this command.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172363633__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><p id="EN-US_TASK_0172363633__en-us_task_0172363550_p1794166678214029">When the topology of a spanning tree changes, the forwarding paths to associated VLANs are changed. The ARP entries corresponding to those VLANs on the <span class="keyword" id="EN-US_TASK_0172363633__en-us_task_0172363550_keyword825261570214029">device</span> need to be updated. STP/RSTP processes ARP entries in either fast or normal mode.</p>
<ul id="EN-US_TASK_0172363633__en-us_task_0172363550_ul1196914523214029"><li id="EN-US_TASK_0172363633__en-us_task_0172363550_li2044088491214029"><p id="EN-US_TASK_0172363633__en-us_task_0172363550_p1699367178214029"><a name="EN-US_TASK_0172363633__en-us_task_0172363550_li2044088491214029"></a><a name="en-us_task_0172363550_li2044088491214029"></a>In fast mode, ARP entries to be updated are directly deleted.</p>
</li><li id="EN-US_TASK_0172363633__en-us_task_0172363550_li129610046214029"><p id="EN-US_TASK_0172363633__en-us_task_0172363550_p807625064214029"><a name="EN-US_TASK_0172363633__en-us_task_0172363550_li129610046214029"></a><a name="en-us_task_0172363550_li129610046214029"></a>In normal mode, ARP entries to be updated are rapidly aged.</p>
<p id="EN-US_TASK_0172363633__en-us_task_0172363550_p1218789478214029">The remaining lifetime of ARP entries to be updated is set to 0. The <span class="keyword" id="EN-US_TASK_0172363633__en-us_task_0172363550_keyword1495731660214029">device</span> rapidly processes these aged entries. If the number of ARP aging probe attempts is not set to 0, ARP implements aging probe for these ARP entries.</p>
<p id="EN-US_TASK_0172363633__en-us_task_0172363550_p455494942214029">In either fast or normal mode, MAC entries are directly deleted.</p>
</li></ul>
<p id="EN-US_TASK_0172363633__en-us_task_0172363550_p876426672214029">You can run the <a href="cmdqueryname=stp+converge"><b><span class="cmdname" id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdname1942519753214029">stp converge</span></b></a> { <strong><span id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdparmname1554729969214313">fast</span></strong> | <strong><span id="EN-US_TASK_0172363633__en-us_task_0172363550_cmdparmname327532104214313">normal</span></strong> } command in the system view to configure the STP/RSTP convergence mode.</p>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0021.html">Configuring MSTP Parameters on an Interface
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0023.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0025.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>