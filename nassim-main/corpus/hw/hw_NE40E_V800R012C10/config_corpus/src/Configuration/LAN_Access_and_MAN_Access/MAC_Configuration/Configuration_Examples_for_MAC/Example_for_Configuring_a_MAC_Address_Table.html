
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring a MAC Address Table">
<meta name="abstract" content="This section describes an example for configuring static MAC address entries and configuring an aging time for dynamic MAC address entries.">
<meta name="description" content="This section describes an example for configuring static MAC address entries and configuring an aging time for dynamic MAC address entries.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wWX1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362754">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring a MAC Address Table</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172362754"></a><a name="EN-US_TASK_0172362754"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring a MAC Address Table</h1>
<div class="taskbody"><p>This section describes an example for configuring static MAC address entries and configuring an aging time for dynamic MAC address entries.</p>
<div class="context"><a name="EN-US_TASK_0172362754__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>If the internal network of an enterprise has fixed users and the internal network connects to an important server, to prevent hackers from attacking the device or the server, static MAC address entries need to be configured on the device. A device automatically generates dynamic MAC address entries by learning source MAC addresses. As the network topology constantly changes, the device will learn more and more MAC addresses. To avoid the explosive growth of MAC address entries, set a proper aging time for dynamic MAC address entries to have the invalid MAC addresses deleted in time.</p>
<div class="p">As shown in <a href="#EN-US_TASK_0172362754__fig_dc_vrp_mac_cfg_000901">Figure 1</a>, the MAC address of PC1 is 00e0-fc12-3458 and the MAC address of PC2 is 00e0-fc12-3456. PC1 and PC2 connect to the CE through the LSW. The LSW connects to interface1 on the CE, and the interface belongs to VLAN 2. The MAC address of the server is 00e0-fc12-3457. The server connects to interface2 on the CE. Interface2 belongs to VLAN 2.<ul><li><p>To prevent MAC address attacks, add a static entry to the MAC address table on the CE for each of PC1 and PC2 and configure the aging time of dynamic MAC entries as 500 seconds.</p>
</li><li><p>To prevent hackers from using the MAC address of the server to obtain important information, configure the MAC address of the server as a static MAC address on the CE.</p>
</li></ul>
</div>
<div class="fignone" id="EN-US_TASK_0172362754__fig_dc_vrp_mac_cfg_000901"><a name="EN-US_TASK_0172362754__fig_dc_vrp_mac_cfg_000901"></a><a name="fig_dc_vrp_mac_cfg_000901"></a><span class="figcap"><b>Figure 1 </b>Configuring MAC address entries</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interfaces 1 and 2 represent GE<span>0/1/1</span> and GE<span>0/2/1</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001367465653.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362754__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Create a VLAN and add the interfaces to the VLAN.</p>
</li><li><p>Add the static MAC address entries to enable the packet with the specified destination MAC address to be forwarded from the specified interface. This can protect the CE from the attack of the forged MAC address.</p>
</li><li><p>Configure an aging time for the dynamic MAC entries to prevent the explosive growth of MAC entries.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362754__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>MAC address of PC1</p>
</li><li><p>MAC address of PC2</p>
</li><li><p>MAC address of the server</p>
</li><li><p>ID of the VLAN to which the CE belongs</p>
</li><li><p>Number of the interface connecting the LSW to the CE</p>
</li><li><p>Number of the interface connecting the server to the CE</p>
</li><li><p>Aging time of dynamic MAC address entries on the CE.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362754__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Add static MAC entries.</span><p><p># Create VLAN 2 and add GE <span>0/1/1</span> and GE <span>0/2/1</span> to VLAN 2.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname CE</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE]<strong> vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-vlan2]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>]<strong> portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>]<strong> port default vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE]<strong> interface gigabitethernet <span>0/2/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/2/1</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/2/1</span>]<strong> portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/2/1</span>]<strong> port default vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/2/1</span>]<strong> quit</strong></pre>
<p># Add the static MAC address entries.</p>
<pre class="screen">[<span class="keyword">*</span>CE]<strong> mac-address static 00e0-fc12-3458 gigabitethernet <span>0/1/1</span> vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE]<strong> mac-address static 00e0-fc12-3456 gigabitethernet <span>0/1/1</span> vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE]<strong> mac-address static 00e0-fc12-3457 gigabitethernet <span>0/2/1</span> vlan 2</strong></pre>
</p></li><li><span>Set the aging time of the dynamic MAC address entries.</span><p><pre class="screen">[<span class="keyword">*</span>CE]<strong> mac-address aging-time 500</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE]<strong> commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Run the <a href="cmdqueryname=display+mac-address"><b><span class="cmdname">display mac-address</span></b></a> command in any view to check whether the static MAC address entries are successfully added to the MAC address table.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE]<strong> display mac-address static vlan 2</strong></pre>
<pre class="screen">MAC address table of slot 0:
-------------------------------------------------------------------------------
MAC Address    VLAN<span>/BD</span>/       PEVLAN CEVLAN Port            Type      LSP/LSR-ID
               VSI/SI<span>/EVPN</span>                                            MAC-Tunnel
-------------------------------------------------------------------------------
00e0-fc12-3458 2              -      -      GE<span>0/1/1</span>         static    -
00e0-fc12-3456 2              -      -      GE<span>0/1/1</span>         static    -
00e0-fc12-3457 2              -      -      GE<span>0/2/1</span>         static    -
-------------------------------------------------------------------------------
Total matching items on slot 0 displayed = 3</pre>
<p># Run the <a href="cmdqueryname=display+mac-address+aging-time"><b><span class="cmdname">display mac-address aging-time</span></b></a> command in any view to check whether the aging time of dynamic entries is set successfully.</p>
<pre class="screen">[<span class="keyword">*</span>CE]<strong> display mac-address aging-time</strong></pre>
<pre class="screen">  Aging time: 500 second(s)</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172362754__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration file of the CE</h4><pre class="screen">#
sysname CE
#
vlan batch 2
#
 mac-address aging-time 500
#
interface GigabitEthernet<span>0/1/1</span>
 portswitch
 undo shutdown
 port default vlan 2
#
interface GigabitEthernet<span>0/2/1</span>
 portswitch
 undo shutdown
 port default vlan 2
#
 mac-address static 00e0-fc12-3458 GigabitEthernet<span>0/1/1</span> vlan 2
 mac-address static 00e0-fc12-3456 GigabitEthernet<span>0/1/1</span> vlan 2
 mac-address static 00e0-fc12-3457 GigabitEthernet<span>0/2/1</span> vlan 2
#
return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0008.html">Configuration Examples for MAC
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0010.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>