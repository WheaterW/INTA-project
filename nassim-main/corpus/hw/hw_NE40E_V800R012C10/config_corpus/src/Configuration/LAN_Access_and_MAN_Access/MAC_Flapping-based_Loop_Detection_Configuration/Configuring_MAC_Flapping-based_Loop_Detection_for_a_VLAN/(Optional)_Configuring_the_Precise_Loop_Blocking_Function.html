
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring the Precise Loop Blocking Function">
<meta name="abstract" content="Precise loop blocking determines trusted and untrusted interfaces by analyzing the frequency of MAC address entry flapping. When a MAC address entry changes repeatedly, precise blocking can precisely locate and block the untrusted interface with a loop.">
<meta name="description" content="Precise loop blocking determines trusted and untrusted interfaces by analyzing the frequency of MAC address entry flapping. When a MAC address entry changes repeatedly, precise blocking can precisely locate and block the untrusted interface with a loop.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0101.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0103.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0105.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MAC-Flapping">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MAC-Flapping">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MAC-Flapping">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MAC-Flapping">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wWX1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363515">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring the Precise Loop Blocking Function</title>
</head>
<body><a name="EN-US_TASK_0172363515"></a><a name="EN-US_TASK_0172363515"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring the Precise Loop Blocking Function</h1>
<div class="taskbody"><p>Precise loop blocking determines trusted and untrusted interfaces by analyzing the frequency of MAC address entry flapping. When a MAC address entry changes repeatedly, precise blocking can precisely locate and block the untrusted interface with a loop. </p>
<div class="context"><a name="EN-US_TASK_0172363515__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After MAC flapping-based loop detection is deployed on a device and the device detects a loop, the device blocks an AC interface with a lower blocking priority by default. However, MAC address entries of interfaces without loops may change due to the impact from a remote loop, and traffic over the interfaces with lower blocking priorities is interrupted. To address this problem, deploy accurate blocking of MAC flapping-based loop detection. Accurate blocking determines trusted and untrusted interfaces by analyzing the frequency of MAC address entry flapping. When a MAC address entry changes repeatedly, accurate blocking can accurately locate and block the interface with a loop, which is an untrusted interface.</p>
<p>For boards that do not support precise loop blocking, if only MAC address change information about these boards is received in the last loop detection interval, interfaces in the VLAN to which these boards connect are blocked based on their blocking priorities. In this situation, precise loop blocking does not work.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172363515__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=loop-detect+eth-loop+precise-block+trust-port"><b><span class="cmdname">loop-detect eth-loop precise-block trust-port</span></b></a> <strong><span>generate-time</span></strong> <i><span class="varname">generate-time</span></i></span></span><p><p>The interval for generating a trusted interface is configured.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=loop-detect+eth-loop+precise-block+policy+no-block"><b><span class="cmdname">loop-detect eth-loop precise-block policy no-block</span></b></a></span></span><p><p>The blocking policy is specified for the local device that does not have trusted interfaces when MAC addresses change.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i></span></span><p><p>The VLAN view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=loop-detect+eth-loop+precise-block+enable"><b><span class="cmdname">loop-detect eth-loop precise-block enable</span></b></a></span></span><p><p>Precise blocking for MAC flapping-based loop detection is enabled. This means that the device blocks only untrusted interfaces.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172363515__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><p>After MAC flapping-based loop detection is configured, if an interface on a VLAN is blocked due to a loop, the interface does not forward user traffic. To unblock the interface so that it can forward user traffic, run the <a href="cmdqueryname=reset+loop-detect+eth-loop"><b><span class="cmdname">reset loop-detect eth-loop</span></b></a> command.</p>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0101.html">Configuring MAC Flapping-based Loop Detection for a VLAN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0103.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0105.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>