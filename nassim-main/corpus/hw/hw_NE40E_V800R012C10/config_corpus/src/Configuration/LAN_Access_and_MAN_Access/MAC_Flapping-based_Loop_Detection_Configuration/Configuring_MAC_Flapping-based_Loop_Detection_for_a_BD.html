
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring MAC Flapping-based Loop Detection for a BD">
<meta name="abstract" content="After MAC flapping-based loop detection is configured for a bridge domain (BD), the devices can detect loops on AC-side interfaces, and block interfaces or report alarms.">
<meta name="description" content="After MAC flapping-based loop detection is configured for a bridge domain (BD), the devices can detect loops on AC-side interfaces, and block interfaces or report alarms.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0002.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0400.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0500.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0600.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MAC-Flapping">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MAC-Flapping">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MAC-Flapping">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wWX1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363499">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring MAC Flapping-based Loop Detection for a BD</title>
</head>
<body><a name="EN-US_TASK_0172363499"></a><a name="EN-US_TASK_0172363499"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring MAC Flapping-based Loop Detection for a BD</h1>
<div class="taskbody"><p>After MAC flapping-based loop detection is configured for a bridge domain (BD), the devices can detect loops on AC-side interfaces, and block interfaces or report alarms.</p>
<div class="context"><a name="EN-US_TASK_0172363499__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><div class="p"><h4 class="sectiontitle">Usage Scenario</h4><div class="p">The user network is dual-homed to the BD network. When forwarding packets, the provider edges (PEs) learn the source MAC addresses of the packets, create MAC address entries, and establish mapping between the MAC addresses and AC-side interfaces. Due to redundant links, a PE may receive user packets with the same source MAC address through different interfaces, causing MAC address entry flapping or even damaging MAC address entries. In this situation, you can deploy MAC flapping-based loop detection on each PE and configure a blocking policy for AC-side interfaces to prevent such loops. The blocking policy can be either of the following:<ul><li>Blocking interfaces based on their blocking priorities: If a device detects a loop, it blocks the interface with a lower blocking priority.</li><li>Blocking interfaces based on their trusted or untrusted states: If a device detects a loop, it blocks the untrusted interface.</li></ul>
</div>
<div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>After MAC flapping-based loop detection
is configured on a device and the device receives packets with fake
source MAC addresses from attackers, the device may mistakenly conclude
that a loop has occurred and block an interface based on the configured
blocking policy. Therefore, key user traffic may be blocked. It is
recommended that you disable MAC flapping-based loop detection on
properly running devices. If you have to use MAC flapping-based loop
detection to detect whether links operate properly during site deployment,
be sure to disable this function after this stage.</p>
</div></div>
<h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring MAC flapping-based loop detection for a BD, complete the following task:</p>
<ul><li><p>Complete related configuration on the edge devices of the BD network. For details, see <a href="dc_vrp_evc_cfg_0000.html">EVC Configuration</a> in <i><cite><span class="keyword">NE40E</span> Configuration Guide - LAN Access and MAN Access</cite></i>.</p>
</li></ul>
</div>
</div></div>
</div>

<ul class="ullinks">
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0400.html">Enabling MAC Flapping-based Loop Detection</a>
</dt>
<dd>
After MAC flapping-based loop detection is enabled on devices, the devices can detect loops based on MAC address entry flapping and block interfaces to eliminate the loops.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0500.html">(Optional) Configuring a Blocking Policy</a>
</dt>
<dd>
After deploying MAC flapping-based loop detection, you can configure a blocking policy for AC-side interfaces (AC is short for attachment circuit).</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0600.html">Verifying the Configuration of MAC Flapping-based Loop Detection for a BD</a>
</dt>
<dd>
After configuring MAC flapping-based loop detection for a <span>BD </span>network, verify the configuration.</dd>
</dl>
</ul>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0000.html">MAC Flapping-based Loop Detection Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0002.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mflp_cfg_0003.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>