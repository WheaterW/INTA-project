
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Ethernet Sub-interfaces for Communication Between VLAN Users and Non-VLAN Users">
<meta name="abstract" content="This example describes how to configure communication between VLAN users and non-VLAN users.">
<meta name="description" content="This example describes how to configure communication between VLAN users and non-VLAN users.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethernet_cfg_0014.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethernet_cfg_0016.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x60031980">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362799">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Ethernet Sub-interfaces for Communication Between VLAN Users and Non-VLAN Users</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172362799"></a><a name="EN-US_TASK_0172362799"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Ethernet Sub-interfaces for Communication Between VLAN Users and Non-VLAN Users</h1>
<div class="taskbody"><p>This example describes how to configure communication between VLAN users and non-VLAN users.</p>
<div class="context"><a name="EN-US_TASK_0172362799__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>Users in a community belong to different network segments. The network administrator in the community adds the users to different VLANs to simplify management. However, users in another community are not added to any VLAN. VLAN users must be able to communicate with non-VLAN users.</p>
<p>On the network shown in <a href="#EN-US_TASK_0172362799__fig_dc_vrp_ethernet_cfg_001701">Figure 1</a>, users in community 1 belong to different VLANs and network segments, and users in community 2 do not belong to any VLAN. It is required that users in VLAN 10 be able to communicate with users in community 2.</p>
<div class="fignone" id="EN-US_TASK_0172362799__fig_dc_vrp_ethernet_cfg_001701"><a name="EN-US_TASK_0172362799__fig_dc_vrp_ethernet_cfg_001701"></a><a name="fig_dc_vrp_ethernet_cfg_001701"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring Ethernet sub-interfaces for communication between VLAN users and non-VLAN users</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, subinterface1.1 and interface2 represent GE<span>0/1/1</span>.1 and GE<span>0/2/1</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_ethernet_cfg_001701.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362799__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><ul><li>The IP address assigned to the sub-interface connected to VLAN users must be on the same network segment as IP addresses of VLAN users.</li><li>The IP address assigned to the interface connected to non-VLAN users must be on the same network segment as IP addresses of non-VLAN users.</li><li>The default gateway addresses of PCs in VLAN 10 must be the IP address of the sub-interface. Otherwise, VLAN and non-VLAN users cannot communicate with each other.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362799__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Create sub-interfaces on the PE and associate the sub-interfaces with VLANs so that the sub-interfaces can identify packets carrying VLAN tags.</p>
</li><li><p>Assign IP addresses to interfaces for communication at the network layer.</p>
<ul><li>Assign an IP address to the sub-interface.</li><li>Assign an IP address to the interface connecting the PE to non-VLAN users.</li></ul>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362799__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>VLAN ID associated with the PE sub-interface</p>
</li><li><p>IP address of the PE sub-interface</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362799__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create a sub-interface on the PE and associate the sub-interface with a VLAN.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname PE</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE]<strong> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE-GigabitEthernet<span>0/1/1</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE]<strong> interface gigabitethernet <span>0/1/1</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/1/1</span>.1]<strong> vlan-type dot1q 10</strong></pre>
</p></li><li><span>Configure IP addresses.</span><p><pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/1/1</span>.1]<strong> ip address 10.110.2.5 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/1/1</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE]<strong> interface gigabitethernet <span>0/2/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/2/1</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/2/1</span>]<strong> ip address 10.110.3.5 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/2/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE]<strong> commit</strong></pre>
</p></li><li><span>For the detailed configuration of the switch, see the related Configuration Guide.</span></li><li><span>Verify the configuration.</span><p><p>On PCs in VLAN 10, configure the IP address 10.110.2.5/24 of GE <span>0/1/1</span>.1 as the default gateway address.</p>
<p>On CE 2, configure the IP address 10.110.3.5 of GE <span>0/2/1</span> as the default gateway address.</p>
<p>After the configurations are complete, users in VLAN 10 and non-VLAN users can ping each other.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172362799__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">PE Configuration File</h4><pre class="screen">#
sysname PE
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/1</span>.1
 vlan-type dot1q 10
 ip address 10.110.2.5 255.255.255.0
#
interface GigabitEthernet<span>0/2/1</span>
 undo shutdown
 ip address 10.110.3.5 255.255.255.0
#
return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethernet_cfg_0014.html">Configuration Examples for Ethernet Interfaces or Sub-interfaces
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethernet_cfg_0016.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>