
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="VLAN Overview">
<meta name="abstract" content="The VLAN technology is important for Layer 2 network forwarding. This section describes the background, functions, and advantages of the VLAN technology.">
<meta name="description" content="The VLAN technology is important for Layer 2 network forwarding. This section describes the background, functions, and advantages of the VLAN technology.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vlan_cfg_00000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/spec/VLAN_limitation.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wwx1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0172363048">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>VLAN Overview</title>
</head>
<body><a name="EN-US_CONCEPT_0172363048"></a><a name="EN-US_CONCEPT_0172363048"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">VLAN Overview</h1>
<div><p>The VLAN technology is important for Layer 2 network forwarding. This section describes the background, functions, and advantages of the VLAN technology.</p>
<div class="section"><h4 class="sectiontitle">Introduction</h4><div class="p">The traditional LAN technology based on the bus structure has the following defects:<ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_ul390199961214252"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_li1725481056214252"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_p540939104214252"><a name="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_li1725481056214252"></a><a name="en-us_concept_0172352265_li1725481056214252"></a>Conflicts are inevitable if multiple nodes send messages simultaneously.</p>
</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_li2074066737214252"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_p885090655214252"><a name="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_li2074066737214252"></a><a name="en-us_concept_0172352265_li2074066737214252"></a>Messages are broadcast to all nodes.</p>
</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_li1166272592214252"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_p1460207575214252"><a name="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_li1166272592214252"></a><a name="en-us_concept_0172352265_li1166272592214252"></a>Networks have security risks as all the hosts in a LAN share the same transmission channel.</p>
</li></ul>
</div>
<p>The network constructs a collision domain. More computers on the network cause more conflicts and lower network efficiency. The network is also a broadcast domain. When many computers on the network send data, broadcast traffic consumes much bandwidth.</p>
<p>Traditional networks face collision domain and broadcast domain issues, and cannot ensure information security.</p>
<p>To reduce the broadcast traffic, you need to enable the broadcast only among hosts that need to communicate with each other, and isolate the hosts that do not need the broadcast. A <span class="keyword" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_keyword1690002827214252">Router</span> can select routes based on IP addresses and effectively suppress broadcast
traffic between two connected network segments. The <span class="keyword" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_keyword1759386172214252">Router</span> solution, however, is costly. Therefore, multiple logical LANs, namely, VLANs are developed on the physical LAN.</p>
<p>In this manner, a physical LAN is divided into multiple broadcast domains, that is, multiple VLANs. The intra-VLAN communication is not restricted, while the inter-VLAN communication
is restricted. As a result, network security is enhanced.</p>
</div>
<div class="section"><h4 class="sectiontitle">Definition</h4><p>The virtual local area network (VLAN) technology logically divides a physical LAN into multiple VLANs that are broadcast domains. Each VLAN contains a group of PCs that have the same requirements. A VLAN has the same attributes as a LAN. PCs of a VLAN can be placed on different LAN segments. Hosts
can communicate within the same VLAN, while cannot communicate in different VLANs. If two PCs are located on one LAN segment but belong to different VLANs, they do not broadcast packets to each other. In this manner, network security is enhanced.</p>
<p><a href="feature_0003994398.html#EN-US_CONCEPT_0172352265__fig_dc_vrp_vlan_feature_000101">Figure 1</a> is a networking diagram of a typical VLAN application. Device A, Device B, and Device C are placed at different locations, such as different floors in an office building. Each switch connects to three computers which belong to three different VLANs. In <a href="feature_0003994398.html#EN-US_CONCEPT_0172352265__fig_dc_vrp_vlan_feature_000101">Figure 1</a>, each dashed line frame identifies a VLAN. Packets of enterprise customers in the same VLAN are broadcast within the VLAN but not among VLANs. In this way, enterprise customers in the same VLAN can share resources as well as protect their information security.</p>
<div class="fignone"><span class="figcap"><b>Figure 1 </b>Typical VLAN application</span>

<br><span><img class="vsd" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_image148028636214252" src="images/fig_feature_image_0003992673.png"></span><br>
</div>
<div class="p">This application shows the following VLAN advantages:<ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_ul849750988214252"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_li931986857214252">Broadcast domains are confined. A broadcast domain is confined to a VLAN. This saves bandwidth and improves network processing capabilities.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_li783877398214252">Network security is enhanced. Packets from different VLANs are separately transmitted. PCs in one VLAN cannot directly communicate with PCs in another VLAN.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_li1883760403214252">Network robustness is improved. A fault in a VLAN does not affect PCs in other VLANs.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352265_li530558677214252">Virtual groups are set up flexibly. With the VLAN technology, PCs in different geographical areas can be grouped together. This facilitates network construction and maintenance.</li></ul>
</div>
</div>
<div class="section"><h4 class="sectiontitle">Basic VLAN Concepts and Principles</h4><ul><li><p>802.1q and VLAN frame format</p>
<p>A conventional Ethernet frame is encapsulated with the Length/Type field for an upper-layer protocol following the Destination address and Source address fields, as shown in <a href="#EN-US_CONCEPT_0172363048__fig_dc_vrp_vlan_cfg_000203">Figure 2</a>.</p>
<div class="fignone" id="EN-US_CONCEPT_0172363048__fig_dc_vrp_vlan_cfg_000203"><a name="EN-US_CONCEPT_0172363048__fig_dc_vrp_vlan_cfg_000203"></a><a name="fig_dc_vrp_vlan_cfg_000203"></a><span class="figcap"><b>Figure 2 </b>Conventional Ethernet frame format</span><br><span><img class="vsd" src="figure/en-us_image_0000001367344785.png"></span></div>
<p>IEEE 802.1Q modifies the Ethernet frame format by adding a 4-byte 802.1Q tag between the source MAC address field and the Length/Type field, as shown in <a href="feature_0003992551.html#EN-US_CONCEPT_0172352271__fig_dc_vrp_vlan_feature_000401">Figure 1</a>.</p>
<div class="fignone"><span class="figcap"><b>Figure 3 </b>VLAN frame format defined in IEEE 802.1Q</span><br><span><img class="vsd" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_image1847917591274" src="figure/en-us_image_0000001488752781.png"></span></div>
<p>An 802.1Q tag contains four fields:</p>
<ul><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_li1620574826214008"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_p466005681214008"><a name="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_li1620574826214008"></a><a name="en-us_concept_0172352271_li1620574826214008"></a>EType</p>
<p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_p1161552237214008">The 2-byte EType field indicates a frame type. If the value of the field is 0x8100, it indicates an 802.1Q frame. If a device that does not support 802.1Q frames receives an 802.1Q frame, it discards the frame.</p>
</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_li611488657214008"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_p1580607304214008"><a name="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_li611488657214008"></a><a name="en-us_concept_0172352271_li611488657214008"></a>PRI</p>
<p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_p1484111260214008">The 3-bit Priority field indicates the frame priority. A greater PRI value indicates a higher frame priority. Frames with a higher priority are preferentially sent in the case of congestion.</p>
</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_li403891305214008"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_p5354968214008"><a name="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_li403891305214008"></a><a name="en-us_concept_0172352271_li403891305214008"></a>CFI</p>
<p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_p1387913172214008">The 1-bit Canonical Format Indicator (CFI) field indicates whether a MAC address is in the canonical format. If the CFI field value is 0, the MAC address is in canonical format. If the CFI field value is 1, the MAC address is not in canonical format. This field is mainly used to differentiate among Ethernet frames, Fiber Distributed Digital Interface (FDDI) frames, and token ring frames. The CFI field value in an Ethernet frame is 0.</p>
</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_li1090471943214008"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_p936502503214008"><a name="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_li1090471943214008"></a><a name="en-us_concept_0172352271_li1090471943214008"></a>VID</p>
<p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_p1793490098214008">The 12-bit VLAN ID (VID) field indicates to which VLAN a frame belongs. A VID is an integer ranging from 0 to 4095. The values 0 and 4095 are reserved, and therefore available VIDs are in the range from 1 to 4094.</p>
<div class="p" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_p1175941562214008">Each frame sent by an 802.1Q-capable switch carries a VID. On a VLAN, Ethernet frames are classified into the following types:<ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_ul109736394214008"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_li1171596252214008">Tagged frames: frames with 4-byte 802.1Q tags.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352271_li1019954535214008">Untagged frames: frames without 4-byte 802.1Q tags.</li></ul>
</div>
</li></ul>
</li><li><p>Port-based VLAN classification</p>
<p>VLANs are classified based on port numbers. In this mode, VLANs are classified based on the numbers of ports on a switching device. The network administrator configures a unique PVID for each port on the switch. When a data frame reaches a port which is configured with a PVID, the frame is marked with the PVID if the data frame carries no VLAN tag. If the data frame carries a VLAN tag, the switch will not add a VLAN tag to the data frame even if the port is configured with a PVID. Different types of ports process VLAN frames in different manners.</p>
</li><li><p>Type of VLAN links</p>
<div class="fignone" id="EN-US_CONCEPT_0172363048__fig_dc_vrp_vlan_cfg_000205"><a name="EN-US_CONCEPT_0172363048__fig_dc_vrp_vlan_cfg_000205"></a><a name="fig_dc_vrp_vlan_cfg_000205"></a><span class="figcap"><b>Figure 4 </b>VLAN links</span><br><span><img class="vsd" src="figure/en-us_image_0000001316258062.png"></span></div>
<p>As shown in <a href="#EN-US_CONCEPT_0172363048__fig_dc_vrp_vlan_cfg_000205">Figure 4</a>, there are the following types of VLAN links: </p>
<ul><li><p><span>Access link: a link connecting a user host and a switch. Generally, a host does not know which VLAN it belongs to, and host hardware cannot identify frames with VLAN tags. Therefore, hosts send and receive only untagged frames.</span></p>
</li><li><p><span>Trunk link: a link connecting switches. Data of different VLANs is transmitted along a trunk link. The two ends of a trunk link must be able to identify the VLANs to which the data frames belong. Therefore, only tagged frames are transmitted along trunk links.</span></p>
</li></ul>
</li><li><p>Port types</p>
<p><a href="#EN-US_CONCEPT_0172363048__tab_dc_vrp_vlan_cfg_000202">Table 1</a> lists VLAN port types.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0172363048__tab_dc_vrp_vlan_cfg_000202"></a><a name="tab_dc_vrp_vlan_cfg_000202"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_CONCEPT_0172363048__tab_dc_vrp_vlan_cfg_000202" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Port types</caption><thead align="left"><tr id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_row1516823213214008"><th align="left" class="cellrowborder" valign="top" width="12.809999999999999%" id="mcps1.4.3.2.4.3.2.6.1.1" liSelected="liSelected"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p1227867825214008">Port Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="25.69%" id="mcps1.4.3.2.4.3.2.6.1.2" liSelected="liSelected"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p1977421717214008">Method for Processing a Received Untagged Frame</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="20.28%" id="mcps1.4.3.2.4.3.2.6.1.3" liSelected="liSelected"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p795306829214008">Method for Processing a Received Tagged Frame</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="21.240000000000002%" id="mcps1.4.3.2.4.3.2.6.1.4" liSelected="liSelected"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p86908928214008">Method for Sending a Frame</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="19.98%" id="mcps1.4.3.2.4.3.2.6.1.5" liSelected="liSelected"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p628193847214008">Application</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_row945787482214008"><td class="cellrowborder" valign="top" width="12.809999999999999%" headers="mcps1.4.3.2.4.3.2.6.1.1 "><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p138811601214008">Access port</p>
</td>
<td class="cellrowborder" valign="top" width="25.69%" headers="mcps1.4.3.2.4.3.2.6.1.2 "><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p238703985214008">Accepts the frame and adds a tag with the default VLAN ID to the frame.</p>
</td>
<td class="cellrowborder" valign="top" width="20.28%" headers="mcps1.4.3.2.4.3.2.6.1.3 "><ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_ul452910872214008"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li706248710214008">Accepts the frame if the VLAN ID carried in the frame is the same as the default VLAN ID.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li148985082214008">Discards the frame if the VLAN ID carried in the frame is different from the default VLAN ID.</li></ul>
</td>
<td class="cellrowborder" valign="top" width="21.240000000000002%" headers="mcps1.4.3.2.4.3.2.6.1.4 "><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p9392546214008">Removes the tag from the frame and sends the frame.</p>
</td>
<td class="cellrowborder" valign="top" width="19.98%" headers="mcps1.4.3.2.4.3.2.6.1.5 "><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p992131144214008">An access port connects a switch to a PC and can be added to only one VLAN.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_row173865992214008"><td class="cellrowborder" valign="top" width="12.809999999999999%" headers="mcps1.4.3.2.4.3.2.6.1.1 "><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p1941151420214008">Trunk port</p>
</td>
<td class="cellrowborder" valign="top" width="25.69%" headers="mcps1.4.3.2.4.3.2.6.1.2 "><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p1860560322214008">Discards the frame.</p>
</td>
<td class="cellrowborder" valign="top" width="20.28%" headers="mcps1.4.3.2.4.3.2.6.1.3 "><div class="p" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p293851537214008"><ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_ul1697877906214008"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li627904306214008">Accepts the frame if the port permits the VLAN ID carried in the frame.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li950860093214008">Discards the frame if the port denies the VLAN ID carried in the frame.</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="21.240000000000002%" headers="mcps1.4.3.2.4.3.2.6.1.4 "><div class="p" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p1960842202214008"><ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_ul590842152214008"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li1751978205214008">Directly sends the frame if the port permits the VLAN ID carried in the frame.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li145386733214008">Discards the frame if the port denies the VLAN ID carried in the frame.</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="19.98%" headers="mcps1.4.3.2.4.3.2.6.1.5 "><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p207856354214008">A trunk port can be added to multiple VLANs to send and receive frames for these VLANs. A trunk port connects a switch to another switch or to a router.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_row393477364214008"><td class="cellrowborder" valign="top" width="12.809999999999999%" headers="mcps1.4.3.2.4.3.2.6.1.1 "><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p862584842214008">Hybrid port</p>
</td>
<td class="cellrowborder" valign="top" width="25.69%" headers="mcps1.4.3.2.4.3.2.6.1.2 "><div class="p" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p1242249839214008"><ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_ul657027939214008"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li1813170164214008">If only the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname1801684664214252">port default vlan</span></b> command is run on a hybrid port, the hybrid port receives the frame and adds the default VLAN tag to the frame.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li1683219447214008">If only the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname1197018955214252">port trunk allow-pass</span></b> command is run on a hybrid port, the hybrid port discards the frame.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li1131161664214008">If both the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname872095248214252">port default vlan</span></b> and <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname1824926034214252">port trunk allow-pass</span></b> commands are run on a hybrid port, the hybrid port receives the frame and adds the VLAN tag with the default VLAN ID specified in the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname525354170214252">port default vlan</span></b> command to the frame.</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="20.28%" headers="mcps1.4.3.2.4.3.2.6.1.3 "><ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_ul155123926214008"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li245079848214008"><div class="p" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p183370390214008"><a name="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li245079848214008"></a><a name="en-us_concept_0172352282_li245079848214008"></a>If only the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname1316323295214252">port default vlan</span></b> command is run on a hybrid port:<ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_ul222247508214008"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li1337132077214008">The hybrid port accepts the frame if the frame's VLAN ID is the same as the default VLAN ID of the port.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li1844471510214008">The hybrid port discards the frame if the frame's VLAN ID is different from the default VLAN ID of the port.</li></ul>
</div>
</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li838686233214008"><div class="p" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p1864342770214008"><a name="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li838686233214008"></a><a name="en-us_concept_0172352282_li838686233214008"></a>If only the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname1283973800214252">port trunk allow-pass</span></b> command is run on a hybrid port:<ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_ul348431791214008"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li229570250214008">The hybrid port accepts the frame if the frame's VLAN ID is in the permitted range of VLAN IDs.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li1541129456214008">The hybrid port discards the frame if the frame's VLAN ID is not in the permitted range of VLAN IDs.</li></ul>
</div>
</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li656085532214008">If both the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname274802052214252">port default vlan</span></b> and <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname88726025214252">port trunk allow-pass</span></b> commands are run on a hybrid port:<ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_ul1981226350214008"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li1911171393214008">The hybrid port accepts the frame if the frame's VLAN ID is in the permitted range of VLAN IDs specified in the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname1713077578214008">port trunk allow-pass</span></b> command or is the same as the default VLAN ID specified in the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname1804909301214252">port default vlan</span></b> command.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li435190613214008">The hybrid port discards the frame if the frame's VLAN ID is not in the permitted range of VLAN IDs specified in the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname169441119112218">port trunk allow-pass</span></b> command or is different from the default VLAN ID specified in the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname789203289214252">port default vlan</span></b> command.</li></ul>
</li></ul>
</td>
<td class="cellrowborder" valign="top" width="21.240000000000002%" headers="mcps1.4.3.2.4.3.2.6.1.4 "><ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_ul778439682214008"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li2089823067214008"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p1561240384214008"><a name="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li2089823067214008"></a><a name="en-us_concept_0172352282_li2089823067214008"></a>If only the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname1870775034214008">port default vlan</span></b> command is run on the hybrid port and the frame's VLAN ID is the same as the default VLAN ID, the hybrid port removes the VLAN tag and forwards the frame. Otherwise, the hybrid port discards the frame.</p>
</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li307509620214008"><div class="p" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p1468528658214008"><a name="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li307509620214008"></a><a name="en-us_concept_0172352282_li307509620214008"></a>If only the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname1489854757214252">port trunk allow-pass</span></b> command is run on a hybrid port:<ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_ul393548408214008"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li248215503214008">The hybrid port forwards the frame if the frame's VLAN ID is in the permitted range of VLAN IDs.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li253654834214008">The hybrid port discards the frame if the frame's VLAN ID is not in the permitted range of VLAN IDs.</li></ul>
</div>
</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li165615291214008"><div class="p" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p357389325214008"><a name="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li165615291214008"></a><a name="en-us_concept_0172352282_li165615291214008"></a>If both the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname618655222214252">port default vlan</span></b> and <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname745069040214252">port trunk allow-pass</span></b> commands are run on a hybrid port:<ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_ul1992617056214008"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li349154264214008">The hybrid port removes the VLAN tag and forwards the frame if the frame's VLAN ID is the same as the default VLAN ID of the port.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li312436732214008">The hybrid port forwards the frame if the frame's VLAN ID is different from the default VLAN ID of the port but in the permitted range of VLAN IDs specified in the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname1421546576214008">port trunk allow-pass</span></b> command. Otherwise, the hybrid port discards the frame.</li></ul>
</div>
<div class="note" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_note1326559980214008"><span class="notetitle"> NOTE: </span><div class="notebody"><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p318360706214008">The hybrid port removes the VLAN tag and forwards the frame if the frame's VLAN ID is the same as the default VLAN ID configured using the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname1780102490214252">port default vlan</span></b> command and the default VLAN ID is in the permitted range of VLAN IDs specified in the <b><span class="cmdname" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_cmdname1880681493214252">port trunk allow-pass</span></b> command.</p>
</div></div>
</li></ul>
</td>
<td class="cellrowborder" valign="top" width="19.98%" headers="mcps1.4.3.2.4.3.2.6.1.5 "><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p305239816214008">A hybrid port can be added to multiple VLANs to send and receive frames of these VLANs. A hybrid port can be used to connect network devices or connect user devices.</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_row1882676121214008"><td class="cellrowborder" valign="top" headers="mcps1.4.3.2.4.3.2.6.1.1 "><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p2141256721214008">QinQ port</p>
</td>
<td class="cellrowborder" colspan="4" valign="top" headers="mcps1.4.3.2.4.3.2.6.1.2 mcps1.4.3.2.4.3.2.6.1.3 mcps1.4.3.2.4.3.2.6.1.4 mcps1.4.3.2.4.3.2.6.1.5 "><p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p1221107399214008">QinQ ports are enabled with the IEEE 802.1QinQ protocol. A QinQ port adds a tag to a single-tagged frame, and thus supports a maximum of 4094 x 4094 VLANs, which meets the requirement of a Metropolitan Area Network (MAN) for the number of VLANs.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li><p>Principle for data switching in a VLAN</p>
<p>Use the network shown in <a href="#EN-US_CONCEPT_0172363048__fig_dc_vrp_vlan_cfg_000205">Figure 4</a> as an example. If PC1 in VLAN 2 intends to send data to PC2, the data is forwarded as follows:</p>
<ol><li><p>An access port on CE1 receives an untagged frame from PC1 and adds a PVID (VLAN 2) to the frame. CE1 searches the MAC address table for an outbound port. Then the frame is transmitted from the outbound port.</p>
</li><li><p>After the trunk port on PE receives the frame, the port checks whether the VLAN ID carried in the frame is the same as that configured on the port. If the VLAN ID has been configured on the port, the port transparently transmits the frame to CE2. If the VLAN ID is not configured on the port, the port discards the frame.</p>
</li><li><p>After a trunk port on CE2 receives the frame, the system searches the MAC address table for an outbound port, which is the access port connecting CE2 to PC2.</p>
</li><li><p>After the frame is sent to the access port connecting CE2 to PC2, the port checks that the VLAN ID carried in the frame is the same as that configured on the port. The port then removes the tag from the frame and sends the untagged frame to PC2.</p>
</li></ol>
</li><li><p>VLANIF interface</p>
<p>A VLANIF interface is a Layer 3 logical interface, which can be configured on either a Layer 3 switch or a router.</p>
<p id="EN-US_CONCEPT_0172363048__p_10">Layer 3 switching combines both routing and switching techniques to implement routing on a switch, improving the overall performance of the network. After sending the first data flow based on a routing table, a Layer 3 switch generates a mapping table, in which the mapping between the MAC address and the IP address about this data flow is recorded. If the switch needs to send the same data flow again, it directly sends the data flow at Layer 2 but not Layer 3 based on the mapping table. In this manner, delays on the network caused by route selection are eliminated, and data forwarding efficiency is improved.</p>
<p id="EN-US_CONCEPT_0172363048__p_11">To allow the first data flow to be correctly forwarded based on the routing table, the routing table must contain correct routing entries. Therefore, configuring a Layer 3 interface and a routing protocol on the Layer 3 switch is required. VLANIF interfaces are therefore introduced.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p" id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p1717237217214008">Key points are summarized as follows:<ul id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_ul518201538214008"><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li259645614214008">A PC does not need to know the VLAN to which it belongs. It sends only untagged frames.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li1767373093214008">After receiving an untagged frame from a PC, a switching device determines the VLAN to which the frame belongs. The determination is based on the configured VLAN classification method such as port information, and then the switching device processes the frame accordingly.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li563509600214008">If the frame needs to be forwarded to another switching device, the frame must be transparently transmitted along a trunk link. Frames transmitted along trunk links must carry VLAN tags to allow other switching devices to properly forward the frame based on the VLAN information.</li><li id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_li1864003556214008">Before sending the frame to the destination PC, the switching device connected to the destination PC removes the VLAN tag from the frame to ensure that the PC receives an untagged frame.</li></ul>
</div>
<p id="EN-US_CONCEPT_0172363048__en-us_concept_0172352282_p1082477059214008">Generally, only tagged frames are transmitted on trunk links; only untagged frames are transmitted on access links. In this manner, switching devices on the network can properly process VLAN information, and PCs do not need to learn VLAN information.</p>
</div></div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vlan_cfg_00000.html">VLAN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/spec/VLAN_limitation.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>