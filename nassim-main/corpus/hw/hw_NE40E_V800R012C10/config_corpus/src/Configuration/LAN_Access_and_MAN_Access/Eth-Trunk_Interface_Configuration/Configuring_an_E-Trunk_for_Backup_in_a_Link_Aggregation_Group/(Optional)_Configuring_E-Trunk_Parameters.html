
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring E-Trunk Parameters">
<meta name="abstract" content="To ensure reliable E-Trunk communication, configure proper E-Trunk parameters.">
<meta name="description" content="To ensure reliable E-Trunk communication, configure proper E-Trunk parameters.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethtrunk_cfg_0042.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethtrunk_cfg_0044.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethtrunk_cfg_0046.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="Eth-Trunk">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wwx1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362920">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>(Optional) Configuring E-Trunk Parameters</title>
</head>
<body><a name="EN-US_TASK_0172362920"></a><a name="EN-US_TASK_0172362920"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring E-Trunk Parameters</h1>
<div class="taskbody"><p>To ensure reliable E-Trunk communication, configure proper E-Trunk parameters.</p>
<div class="context"><a name="EN-US_TASK_0172362920__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>For an Eth-Trunk interface that is a member interface of an E-Trunk, the link aggregation control protocol (LACP) system priority and LACP system ID are referred to as the LACP E-Trunk system priority and LACP E-Trunk system ID, respectively.</p>
<p>When an E-Trunk consists of Eth-Trunk interfaces working in static LACP mode, each member Eth-Trunk interface and the connected peer Eth-Trunk interface use LACP E-Trunk system priorities to determine the priority of the device at either end of the Eth-Trunk link. The device with the higher priority functions as the LACP Actor and determines which member interfaces in its Eth-Trunk interface are active based on the interface priorities. The other device selects the member interfaces connected to the active member interfaces on the Actor as active member interfaces.</p>
<p>If the LACP E-Trunk system priority and LACP system priority are both configured, after an Eth-Trunk interface working in static LACP mode is added to an E-Trunk, only the LACP E-Trunk system priority takes effect for the Eth-Trunk interface.</p>
<p>If two devices have the same LACP E-Trunk system priority, the LACP E-Trunk system IDs are used to determine the devices' priorities. A smaller LACP E-Trunk system ID indicates a higher priority.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172362920__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure E-Trunk parameters in the system view.</span><p><ol><li><p>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></p>
<p>The system view is displayed.</p>
</li><li><p>Perform one or more operations in <a href="#EN-US_TASK_0172362920__tab_1">Table 1</a> to set desired E-Trunk parameters.</p>

<div class="tableBorder"><a name="EN-US_TASK_0172362920__tab_1"></a><a name="tab_1"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172362920__tab_1" frame="border" border="1" rules="all"><caption><b>Table 1 </b>E-Trunk parameters</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="17.39%" id="mcps1.4.2.1.2.1.2.2.2.4.1.1" liSelected="liSelected"><p>E-Trunk Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="32.78%" id="mcps1.4.2.1.2.1.2.2.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="49.830000000000005%" id="mcps1.4.2.1.2.1.2.2.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="17.39%" headers="mcps1.4.2.1.2.1.2.2.2.4.1.1 "><p>LACP E-Trunk system ID</p>
</td>
<td class="cellrowborder" valign="top" width="32.78%" headers="mcps1.4.2.1.2.1.2.2.2.4.1.2 "><p><a href="cmdqueryname=lacp+e-trunk+system-id"><b><span class="cmdname">lacp e-trunk system-id</span></b></a> <i><span class="varname">mac-address</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="49.830000000000005%" headers="mcps1.4.2.1.2.1.2.2.2.4.1.3 "><p>The LACP E-Trunk system IDs of the two devices in an E-Trunk are optional. However, if they are configured, they must be identical.</p>
<p>The step takes effect only for Eth-Trunk interfaces in static LACP mode that are added to an E-Trunk.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.39%" headers="mcps1.4.2.1.2.1.2.2.2.4.1.1 "><p>LACP E-Trunk system priority</p>
</td>
<td class="cellrowborder" valign="top" width="32.78%" headers="mcps1.4.2.1.2.1.2.2.2.4.1.2 "><p><a href="cmdqueryname=lacp+e-trunk+priority"><b><span class="cmdname">lacp e-trunk priority</span></b></a> <i><span class="varname">priority</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="49.830000000000005%" headers="mcps1.4.2.1.2.1.2.2.2.4.1.3 "><p>Two devices in an E-Trunk must have the same LACP E-Trunk system priority.</p>
<p>The step takes effect only for Eth-Trunk interfaces in static LACP mode that are added to an E-Trunk.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.39%" headers="mcps1.4.2.1.2.1.2.2.2.4.1.1 "><p>UDP<span>/UDP6</span> port number used to send and receive E-Trunk packets</p>
</td>
<td class="cellrowborder" valign="top" width="32.78%" headers="mcps1.4.2.1.2.1.2.2.2.4.1.2 "><p><span><a href="cmdqueryname=e-trunk+port"><b><span class="cmdname">e-trunk port</span></b></a> <i><span class="varname">port-number</span></i></span></p>
<p><a href="cmdqueryname=e-trunk+ipv6+port"><b><span class="cmdname">e-trunk ipv6 port</span></b></a> <i><span class="varname">port-number</span></i></p>
<p>The <i><span class="varname">port-number</span></i> value is in the range of 1025 to 65535. If the UDP port number in this range is used by another protocol, the port number cannot be used to send or receive E-Trunk packets.</p>
</td>
<td class="cellrowborder" valign="top" width="49.830000000000005%" headers="mcps1.4.2.1.2.1.2.2.2.4.1.3 "><p>E-Trunk is Huawei-specific. The default UDP<span>/UDP6</span> port number used to send and receive E-Trunk packets may conflict with the UDP<span>/UDP6</span> port number used by another protocol. To ensure the forwarding of E-Trunk packets, change the UDP<span>/UDP6</span> port number used to send and receive E-Trunk packets.</p>
<p>The two devices in an E-Trunk must have the same port number. If you change the UDP<span>/UDP6</span> port number when E-Trunk is running, complete the change before E-Trunk negotiation times out.</p>
<p>If you change the UDP<span>/UDP6</span> port number when E-Trunk is running, the two devices in the E-Trunk may not be able to communicate. If E-Trunk negotiation times out, both devices in the E-Trunk may become master devices.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li><p>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></p>
<p>The configuration is committed.</p>
</li></ol>
</p></li><li><span>Configure E-Trunk parameters in the E-Trunk view.</span><p><ol><li><p>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></p>
<p>The system view is displayed.</p>
</li><li><p>Run <span><a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i></span></p>
<p>The E-Trunk view is displayed.</p>
</li><li><p>Perform one or more operations in <a href="#EN-US_TASK_0172362920__tab_2">Table 2</a> to set desired E-Trunk parameters.</p>

<div class="tableBorder"><a name="EN-US_TASK_0172362920__tab_2"></a><a name="tab_2"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172362920__tab_2" frame="border" border="1" rules="all"><caption><b>Table 2 </b>E-Trunk parameters</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="17.39%" id="mcps1.4.2.2.2.1.3.2.2.4.1.1" liSelected="liSelected"><p>E-Trunk Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="32.84%" id="mcps1.4.2.2.2.1.3.2.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="49.769999999999996%" id="mcps1.4.2.2.2.1.3.2.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="17.39%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.1 "><p>E-Trunk priority</p>
</td>
<td class="cellrowborder" valign="top" width="32.84%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=priority+%28E-Trunk+view%29"><b><span class="cmdname">priority</span></b></a> <i><span class="varname">priority</span></i> (E-Trunk view)</p>
</td>
<td class="cellrowborder" valign="top" width="49.769999999999996%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.3 "><p>The priority values of the two devices are used to determine their master and backup status. The smaller the value, the higher the priority. The device with a higher E-Trunk priority functions as the master device. If the two devices have the same E-Trunk priority, the device with the smaller system ID functions as the master device.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.39%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.1 "><p>E-Trunk authentication and encryption mode</p>
</td>
<td class="cellrowborder" valign="top" width="32.84%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=authentication-mode"><b><span class="cmdname">authentication-mode</span></b></a> { <strong><span>hmac-sha1</span></strong> | <strong><span>hmac-sha256</span></strong> <span>| <strong><span>enhanced-hmac-sha256</span></strong> </span>}</p>
</td>
<td class="cellrowborder" valign="top" width="49.769999999999996%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.3 "><p>To improve system security, configure the E-Trunk authentication and encryption mode.</p>
<p>Two devices in an E-Trunk must have the same E-Trunk authentication and encryption mode.</p>
<p>To improve system security, run the <a href="cmdqueryname=authentication-mode"><b><span class="cmdname">authentication-mode</span></b></a> command to set the E-Trunk authentication and encryption mode to <span>HMAC-SHA2-256</span> or <span>ENHANCED-HMAC-SHA256</span>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.39%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.1 "><p>Password for encrypting packets</p>
</td>
<td class="cellrowborder" valign="top" width="32.84%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.2 "><p><span><a href="cmdqueryname=security-key"><b><span class="cmdname">security-key</span></b></a> { <strong><span>simple</span></strong> <i><span class="varname">simple-key</span></i> | <strong><span>cipher</span></strong> { <i><span class="varname">cipher-key1</span></i> | <i><span class="varname">cipher-key2</span></i> | <i><span class="varname">cipher-key3</span></i> } }</span></p>
</td>
<td class="cellrowborder" valign="top" width="49.769999999999996%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.3 "><p>This enhances system security. The same encryption password must be configured on the two devices in an E-Trunk.</p>
<div class="p">You can specify <strong><span>simple</span></strong> or <strong><span>cipher</span></strong> as required.<ul><li><p>If <strong><span>simple</span></strong> is specified, the password is displayed in clear text in the configuration file.</p>
</li><li><p>When the password is encrypted in cipher text mode, the password is displayed as garbled characters in the configuration file.</p>
<ul><li><i><span class="varname">cipher-key1</span></i>: If the password is entered in ciphertext, the value is a string of 32 to <span>432</span> characters.</li><li><i><span class="varname">cipher-key2</span></i>: A 24-character ciphertext password configured in an earlier version is also supported in this version.</li><li><i><span class="varname">cipher-key3</span></i>: If the password is entered in clear text, the value must be a string of 1 to 255 case-sensitive characters. It cannot contain spaces.</li></ul>
</li></ul>
<div class="notice"><span class="noticetitle"> NOTICE: </span><div class="noticebody"><p>If <strong><span>simple</span></strong> is specified, the password is displayed in clear text in the configuration file. In this case, other users can obtain the password by querying the configuration file, which poses a security risk. As such, you are advised to select <strong><span>cipher</span></strong> to save the password in cipher text.</p>
<p>For security purposes, you are advised not to use the <strong><span>simple</span></strong> weak security algorithm. If you need to use such an algorithm, run the <a href="cmdqueryname=undo+crypto+weak-algorithm+disable"><b><span class="cmdname">undo crypto weak-algorithm disable</span></b></a> command first to enable the weak security algorithm function.</p>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.39%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.1 "><p>Internal at which Hello packets are sent</p>
</td>
<td class="cellrowborder" valign="top" width="32.84%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=timer+hello"><b><span class="cmdname">timer hello</span></b></a> <i><span class="varname">hello-value</span></i></p>
</td>
<td class="cellrowborder" rowspan="2" valign="top" width="49.769999999999996%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.3 "><p>If the peer device is the backup and does not receive Hello packets sent by the local device within the timeout period, the peer device becomes the master after timeout. The timeout period referred to in this case is contained in the Hello packet sent by the peer device rather than the local device.</p>
<p>If the Hello packet from the peer device does not contain the timeout period, the timeout period of the local device is used.</p>
<div class="p"><div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>Timeout period = Interval at which Hello packets are sent x Time multiplier for detecting Hello packets. You are recommended to set the Timeout period to larger than 5 minutes.</p>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.2.2.2.1.3.2.2.4.1.1 "><p>Time multiplier for detecting Hello packets</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.2.2.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=timer+hold-on-failure+multiplier"><b><span class="cmdname">timer hold-on-failure multiplier</span></b></a> <i><span class="varname">multiplier</span></i></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.39%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.1 "><p>Switchback delay time</p>
</td>
<td class="cellrowborder" valign="top" width="32.84%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=timer+revert+delay"><b><span class="cmdname">timer revert delay</span></b></a> <i><span class="varname">delay-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="49.769999999999996%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.3 "><p>When an E-Trunk works together with L2VPN services, after the fault on the master device is rectified, the status of the member Eth-Trunk interface on the master device is restored preferentially over PW. After the master device recovers, if traffic on the member Eth-Trunk interface is immediately switched back to the master device, service traffic will be interrupted.</p>
<p>After the E-Trunk switchover delay is configured, the local member Eth-Trunk interface of the E-Trunk becomes master only when the switchback delay timer expires. This delays switching traffic on the member Eth-Trunk interface back to the master device, and therefore preventing service interruption.</p>
<div class="p"><div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>When a master device in an E-Trunk restores from a fault, run the <a href="cmdqueryname=revert+disable"><b><span class="cmdname">revert disable</span></b></a> command to enable the non-revertive function on the E-Trunk to prevent traffic loss caused by the traffic switchback.</p>
<p>The configured E-Trunk switchback delay must be the same on the upstream and downstream devices; otherwise, service traffic may be lost.</p>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.39%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.1 "><p>Description for an E-Trunk</p>
</td>
<td class="cellrowborder" valign="top" width="32.84%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.2 "><p><a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="49.769999999999996%" headers="mcps1.4.2.2.2.1.3.2.2.4.1.3 "><p>The <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> command can be used to configure a description for an E-Trunk configured on a device. The description can contain the name of the remote device. This is convenient for maintenance.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li><li><p>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></p>
<p>The configuration is committed.</p>
</li></ol>
</p></li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethtrunk_cfg_0042.html">Configuring an E-Trunk for Backup in a Link Aggregation Group
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethtrunk_cfg_0044.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethtrunk_cfg_0046.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>