
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Summary of QinQ Configuration Tasks">
<meta name="abstract" content="This section describes the QinQ features supported by the NE40E in terms of the QinQ configuration.">
<meta name="description" content="This section describes the QinQ features supported by the NE40E in terms of the QinQ configuration.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0000_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/spec/QinQ_limitation.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0003_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wWX1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0172363210">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Summary of QinQ Configuration Tasks</title>
</head>
<body><a name="EN-US_CONCEPT_0172363210"></a><a name="EN-US_CONCEPT_0172363210"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Summary of QinQ Configuration Tasks</h1>
<div><p>This section describes the QinQ features supported by the <span class="keyword">NE40E</span> in terms of the QinQ configuration.</p>
<div class="p">The QinQ configuration is described as follows:<ol><li><span>A QinQ-enabled device is capable of virtual local area network (VLAN) stacking, which expands VLAN space and reduces the consumption of VLAN ID resources.</span><span>If Layer 2 selective QinQ is configured, the device can add different outer VLAN tags to packets and transmit the packets.</span></li><li><p>QinQ supports the following functions<span> to meet the requirements of special applications and extended functions</span>:</p>
<ul><li>Configuring QinQ-based VLAN tag swapping: The device can swap the inner tag with the outer tag in a double-tagged packet.</li><li>Configuring QinQ mapping: The device can map the user VLAN ID in a packet to a carrier VLAN ID.</li><li>Configuring VLAN tag termination sub-interfaces for IP service access: Proxy Address Resolution Protocol (ARP), <span>Dynamic Host Configuration Protocol (DHCP) server/</span>DHCP relay<span>, Virtual Router Redundancy Protocol (VRRP)</span> can be configured on QinQ/dot1q VLAN tag termination sub-interfaces.</li><li>Configuring VLAN tag termination sub-interfaces for virtual private network (VPN) service access: L2VPN (VPWS/VPLS) and L3VPN services can be configured on QinQ/dot1q VLAN tag termination sub-interfaces.</li><li>Configuring QinQ VLAN tag termination sub-interfaces to support 802.1p mappings: The mappings include the 802.1p-to-DSCP mapping and 802.1p-to-MPLS-EXP mapping.</li><li>Configuring L2VPN access on QinQ stacking sub-interfaces: With this configuration, QinQ stacking sub-interfaces can implement L2VPN (VPWS/VPLS).</li></ul>
</li><li>QinQ stacking sub-interfaces can be used to solve the problem that one physical interface cannot provide L2VPN access for multiple users.</li></ol>
</div>
<div class="section"><h4 class="sectiontitle">Access Services Provided by VLAN Tag Termination Sub-Interfaces</h4><p>Sub-interfaces for QinQ/dot1q VLAN tag termination support IP services (for example, proxy ARP, DHCP, and VRRP), VPN services (for example, L2VPN and L3VPN), 802.1p-to-DSCP mapping, and 802.1p-to-MPLS-EXP mapping. <a href="#EN-US_CONCEPT_0172363210__tab_dc_vrp_qinq_cfg_000202">Table 1</a> shows the application scenario of a VLAN tag termination sub-interface providing access services.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0172363210__tab_dc_vrp_qinq_cfg_000202"></a><a name="tab_dc_vrp_qinq_cfg_000202"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_CONCEPT_0172363210__tab_dc_vrp_qinq_cfg_000202" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Application scenario of VLAN tag termination sub-interfaces providing access services</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="13.69%" id="mcps1.4.2.3.2.4.1.1" liSelected="liSelected"><p>Sub-Interface Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="17.43%" id="mcps1.4.2.3.2.4.1.2" liSelected="liSelected"><p>Service Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="68.88%" id="mcps1.4.2.3.2.4.1.3" liSelected="liSelected"><p>Application Scenario</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="5" valign="top" width="13.69%" headers="mcps1.4.2.3.2.4.1.1 "><p>QinQ/Dot1q</p>
<p></p>
<p></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="17.43%" headers="mcps1.4.2.3.2.4.1.2 "><p>Proxy ARP</p>
</td>
<td class="cellrowborder" valign="top" width="68.88%" headers="mcps1.4.2.3.2.4.1.3 "><p>If users on the same network segment belong to different VLANs, they cannot communicate at Layer 2. To implement communication between VLANs at Layer 3, proxy ARP can be enabled on VLAN tag termination sub-interfaces.</p>
<p>For details about proxy ARP, see the chapter "ARP" in the <em><span class="keyword">NE40E</span> Feature Description - IP Services</em>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.2.3.2.4.1.2 "><div class="p">DHCP<ul><li>DHCP server</li><li>DHCP relay</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.3.2.4.1.3 "><div class="p" id="EN-US_CONCEPT_0172363210__p_2"><ul id="EN-US_CONCEPT_0172363210__ul585183041214028"><li id="EN-US_CONCEPT_0172363210__li1872673955214028"><p id="EN-US_CONCEPT_0172363210__p510831253214028"><a name="EN-US_CONCEPT_0172363210__li1872673955214028"></a><a name="li1872673955214028"></a>To assign IP addresses to users on a VLAN tag termination sub-interface, the DHCP server function needs to be enabled on this sub-interface.</p>
</li><li id="EN-US_CONCEPT_0172363210__li1095984458214028"><p id="EN-US_CONCEPT_0172363210__p_5"><a name="EN-US_CONCEPT_0172363210__li1095984458214028"></a><a name="li1095984458214028"></a>If the DHCP client and DHCP server belong to different sub-nets, you need to deploy a DHCP relay agent to forward DHCP request packets from the client to the server so that the client can dynamically obtain IP addresses from the DHCP server.</p>
<p id="EN-US_CONCEPT_0172363210__p_6">DHCP relay can be configured on the VLAN tag termination sub-interface to insert tag information into Option82. The tag information provides a reference for the DHCP server in IP address allocation.</p>
</li></ul>
</div>
<p>For details about DHCP, see the chapter "DHCP" in the <em><span class="keyword">NE40E</span> Feature Description - IP Services</em>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.2.3.2.4.1.2 "><p>VRRP</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.3.2.4.1.3 "><p>When a VLAN tag termination sub-interface is used to access a VRRP-enabled, this sub-interface also needs to be enabled with VRRP to ensure reliable and stable communication.</p>
<p>For details about VRRP, see the chapter "VRRP" in the <em><span class="keyword">NE40E</span> Feature Description - Reliability</em>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.2.3.2.4.1.2 "><div class="p">L2VPN<ul><li>Virtual private wire service (VPWS)</li><li>Virtual private LAN service (VPLS)</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.3.2.4.1.3 "><p id="EN-US_CONCEPT_0172363210__p_3">When a VLAN tag termination sub-interface is used to access a L2VPN network, this sub-interface needs to be bound to a Virtual Switching Instance (VSI) or virtual private wire service (VPWS) to enable Layer 2 communication.</p>
<p>For details about L2VPN, see the chapters "VPWS" and "VPLS" in the <em><span class="keyword">NE40E</span> Feature Description - VPN</em>.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.2.3.2.4.1.2 "><p>L3VPN</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.3.2.4.1.3 "><p id="EN-US_CONCEPT_0172363210__p_4">When a VLAN tag termination sub-interface is used to access an L3VPN network, this sub-interface needs to be bound to a VPN instance to enable Layer 3 communication.</p>
<p>For details about L3VPN, see the chapter "BGP/MPLS IP VPN" in the <em><span class="keyword">NE40E</span> Feature Description - VPN</em>.</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="13.69%" headers="mcps1.4.2.3.2.4.1.1 "><p>QinQ</p>
</td>
<td class="cellrowborder" valign="top" width="17.43%" headers="mcps1.4.2.3.2.4.1.2 "><p>802.1p, DiffServ Code Point (DSCP) remark</p>
</td>
<td class="cellrowborder" valign="top" width="68.88%" headers="mcps1.4.2.3.2.4.1.3 "><p>After a packet is terminated on a PE, the packet is sent to the carrier network. To ensure the completeness of the QoS information in the packet, the 802.1p values in the outer and inner tags need to be mapped to the DSCP remark field.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.2.3.2.4.1.2 "><p>802.1p, EXP (MPLS) remark</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.3.2.4.1.3 "><p>After a packet is terminated on a PE, the packet is sent to the carrier MPLS network. To ensure the completeness of the QoS information in the packet, the 802.1p values in the outer and inner tags need to be mapped to the MPLS EXP field.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p><a href="#EN-US_CONCEPT_0172363210__fig_dc_vrp_qinq_cfg_000201">Figure 1</a> shows how to configure sub-interfaces for QinQ/dot1q VLAN tag termination.</p>
<div class="fignone" id="EN-US_CONCEPT_0172363210__fig_dc_vrp_qinq_cfg_000201"><a name="EN-US_CONCEPT_0172363210__fig_dc_vrp_qinq_cfg_000201"></a><a name="fig_dc_vrp_qinq_cfg_000201"></a><span class="figcap"><b>Figure 1 </b>Flowchart of configuring sub-interfaces for QinQ/dot1q VLAN tag termination</span><br><span><img class="vsd" src="images/fig_dc_vrp_qinq_cfg_000201.png" width="NaN" height="NaN"></span></div>
</div>
<div class="section"><h4 class="sectiontitle">Differences Between the VLAN Tag Termination Sub-interface and Dot1q Sub-interface</h4><p><a href="#EN-US_CONCEPT_0172363210__tab_dc_vrp_qinq_cfg_000203">Table 2</a> shows the differences between the VLAN tag termination sub-interface and dot1q sub-interface.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0172363210__tab_dc_vrp_qinq_cfg_000203"></a><a name="tab_dc_vrp_qinq_cfg_000203"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_CONCEPT_0172363210__tab_dc_vrp_qinq_cfg_000203" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Differences between interfaces</caption><thead align="left"><tr><th align="left" class="cellrowborder" rowspan="2" valign="top" id="mcps1.4.3.3.2.8.1.1" liSelected="liSelected"><p>Interface Type</p>
</th>
<th align="left" class="cellrowborder" colspan="4" valign="top" id="mcps1.4.3.3.2.8.1.2" liSelected="liSelected"><p>Supported VPN Service</p>
</th>
<th align="left" class="cellrowborder" rowspan="2" valign="top" id="mcps1.4.3.3.2.8.1.3" liSelected="liSelected"><p>Description</p>
</th>
<th align="left" class="cellrowborder" rowspan="2" valign="top" id="mcps1.4.3.3.2.8.1.4" liSelected="liSelected"><p>Difference</p>
</th>
</tr>
<tr><th align="left" class="cellrowborder" valign="top" id="mcps1.4.3.3.2.8.2.1" liSelected="liSelected"><p>VPWS (CCC mode)</p>
</th>
<th align="left" class="cellrowborder" valign="top" id="mcps1.4.3.3.2.8.2.2" liSelected="liSelected"><p>VPWS</p>
</th>
<th align="left" class="cellrowborder" valign="top" id="mcps1.4.3.3.2.8.2.3" liSelected="liSelected"><p>VPLS</p>
</th>
<th align="left" class="cellrowborder" valign="top" id="mcps1.4.3.3.2.8.2.4" liSelected="liSelected"><p>L3VPN</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="9.64%" headers="mcps1.4.3.3.2.8.1.1 "><p>Dot1q sub-interface</p>
</td>
<td class="cellrowborder" valign="top" width="13.089999999999998%" headers="mcps1.4.3.3.2.8.1.2 mcps1.4.3.3.2.8.2.1 "><p>Supported</p>
</td>
<td class="cellrowborder" valign="top" width="9.21%" headers="mcps1.4.3.3.2.8.1.2 mcps1.4.3.3.2.8.2.2 "><p>Supported</p>
</td>
<td class="cellrowborder" valign="top" width="8.780000000000001%" headers="mcps1.4.3.3.2.8.1.2 mcps1.4.3.3.2.8.2.3 "><p>Supported</p>
</td>
<td class="cellrowborder" valign="top" width="9.64%" headers="mcps1.4.3.3.2.8.1.2 mcps1.4.3.3.2.8.2.4 "><p>Supported</p>
</td>
<td class="cellrowborder" valign="top" width="24.6%" headers="mcps1.4.3.3.2.8.1.3 "><p>You can run the <a href="cmdqueryname=vlan-type+dot1q"><b><span class="cmdname">vlan-type dot1q</span></b></a> command to configure an Ethernet sub-interface to be a dot1q sub-interface.</p>
</td>
<td class="cellrowborder" rowspan="3" valign="top" width="25.040000000000003%" headers="mcps1.4.3.3.2.8.1.4 "><div class="p"><ul><li><p>The dot1q sub-interface and dot1q VLAN tag termination sub-interface have the same function. The difference between them is that packets sent from the dot1q sub-interface are encapsulated with only one VLAN tag whereas packets sent from the dot1q VLAN tag termination sub-interface can be encapsulated with multiple VLAN tags.</p>
</li><li><p>You can configure both dot1q VLAN tag termination sub-interfaces and QinQ VLAN tag termination sub-interfaces on a main interface. With this configuration, the main interface can terminate both single-tagged packets and double-tagged packets. You can configure a dot1q VLAN tag termination sub-interface or a dot1q sub-interface on a main interface to terminate single-tagged packets.</p>
</li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.3.3.2.8.1.1 "><p>Dot1q VLAN tag termination sub-interface</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.3.3.2.8.1.2 mcps1.4.3.3.2.8.2.1 "><p>Supported</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.3.3.2.8.1.2 mcps1.4.3.3.2.8.2.2 "><p>Supported</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.3.3.2.8.1.2 mcps1.4.3.3.2.8.2.3 "><p>Supported</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.3.3.2.8.1.2 mcps1.4.3.3.2.8.2.4 "><p>Supported</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.3.3.2.8.1.3 "><p>You can run the <a href="cmdqueryname=dot1q+termination+vid"><b><span class="cmdname">dot1q termination vid</span></b></a> command to configure a dot1q VLAN tag termination sub-interface to terminate single-tagged packets.</p>
<div class="p"><div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><ul><li><p>VPWS</p>
<p>The VLAN tag to be terminated must be a specific value.</p>
</li><li><p>VPLS</p>
<p>The VLAN tag to be terminated can be either a specific value or a value range.</p>
</li></ul>
</div></div>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.3.3.2.8.1.1 "><p>QinQ VLAN tag termination sub-interface</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.3.3.2.8.1.2 mcps1.4.3.3.2.8.2.1 "><p>Supported</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.3.3.2.8.1.2 mcps1.4.3.3.2.8.2.2 "><p>Supported</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.3.3.2.8.1.2 mcps1.4.3.3.2.8.2.3 "><p>Supported</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.3.3.2.8.1.2 mcps1.4.3.3.2.8.2.4 "><p>Supported</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.3.3.2.8.1.3 "><p>You can run the <a href="cmdqueryname=qinq+termination+pe-vid+ce-vid"><b><span class="cmdname">qinq termination pe-vid ce-vid</span></b></a> command to configure a QinQ VLAN tag termination sub-interface to terminate double-tagged packets.</p>
<div class="p"><div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><ul><li><p>VPWS</p>
<p>In asymmetrical mode, both VLAN tags to be terminated must be specific values.</p>
<p>In symmetrical mode, the outer VLAN tag to be terminated must be a specific value, but the inner VLAN tag to be terminated can be either a specific value or value range.</p>
</li><li><p>VPLS</p>
<p>In asymmetrical mode, both VLAN tags to be terminated can be either specific values or value ranges.</p>
<p>In symmetrical mode, the outer VLAN tag to be terminated must be a specific value, but the inner VLAN tag to be terminated can be either a specific value or value range.</p>
</li></ul>
<p>You can run the <a href="cmdqueryname=qinq+termination+l2"><b><span class="cmdname">qinq termination l2</span></b></a> command to configure the asymmetrical or symmetrical mode.</p>
</div></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p><a href="#EN-US_CONCEPT_0172363210__tab_dc_vrp_qinq_cfg_000204">Table 3</a> and <a href="#EN-US_CONCEPT_0172363210__tab_dc_vrp_qinq_cfg_000205">Table 4</a> show how different types of interfaces process VLAN tags carried in packets to be transmitted across a VPLS network.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0172363210__tab_dc_vrp_qinq_cfg_000204"></a><a name="tab_dc_vrp_qinq_cfg_000204"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_CONCEPT_0172363210__tab_dc_vrp_qinq_cfg_000204" frame="border" border="1" rules="all"><caption><b>Table 3 </b>Packet processing on an inbound interface</caption><thead align="left"><tr><th align="left" class="cellrowborder" rowspan="2" valign="top" id="mcps1.4.3.5.2.4.1.1" liSelected="liSelected"><p>Inbound Interface Type</p>
</th>
<th align="left" class="cellrowborder" colspan="2" valign="top" id="mcps1.4.3.5.2.4.1.2" liSelected="liSelected"><p>Packet Processing for VPLS Network Access</p>
</th>
</tr>
<tr><th align="left" class="cellrowborder" valign="top" id="mcps1.4.3.5.2.4.2.1" liSelected="liSelected"><p>Ethernet-Encapsulated Packets</p>
</th>
<th align="left" class="cellrowborder" valign="top" id="mcps1.4.3.5.2.4.2.2" liSelected="liSelected"><p>VLAN-Encapsulated Packets</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="17.728227177282275%" headers="mcps1.4.3.5.2.4.1.1 "><p>Dot1q sub-interface</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.5.2.4.1.2 mcps1.4.3.5.2.4.2.1 "><p>Tags are stripped.</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.5.2.4.1.2 mcps1.4.3.5.2.4.2.2 "><p>No action is performed.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.728227177282275%" headers="mcps1.4.3.5.2.4.1.1 "><p>Dot1q VLAN tag termination sub-interface</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.5.2.4.1.2 mcps1.4.3.5.2.4.2.1 "><p>Tags are stripped.</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.5.2.4.1.2 mcps1.4.3.5.2.4.2.2 "><p>No action is performed.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.728227177282275%" headers="mcps1.4.3.5.2.4.1.1 "><p>QinQ VLAN tag termination sub-interface</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.5.2.4.1.2 mcps1.4.3.5.2.4.2.1 "><div class="p"><ul><li><p>In symmetric mode, the outer tags are stripped.</p>
</li><li><p>In symmetric mode, both inner and outer tags are stripped.</p>
</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.5.2.4.1.2 mcps1.4.3.5.2.4.2.2 "><div class="p"><ul><li><p>In symmetric mode, no action is performed.</p>
</li><li><p>In asymmetric mode, both inner and outer tags are stripped and then a different tag is added.</p>
</li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.728227177282275%" headers="mcps1.4.3.5.2.4.1.1 "><p>QinQ stacking sub-interface</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.5.2.4.1.2 mcps1.4.3.5.2.4.2.1 "><p>The outer tag is added.</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.5.2.4.1.2 mcps1.4.3.5.2.4.2.2 "><p>The outer tag is added.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.728227177282275%" headers="mcps1.4.3.5.2.4.1.1 "><p>QinQ mapping sub-interface</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.5.2.4.1.2 mcps1.4.3.5.2.4.2.1 "><p>The outer tag is replaced.</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.5.2.4.1.2 mcps1.4.3.5.2.4.2.2 "><p>The outer tag is replaced.</p>
</td>
</tr>
</tbody>
</table>
</div>

<div class="tableBorder"><a name="EN-US_CONCEPT_0172363210__tab_dc_vrp_qinq_cfg_000205"></a><a name="tab_dc_vrp_qinq_cfg_000205"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_CONCEPT_0172363210__tab_dc_vrp_qinq_cfg_000205" frame="border" border="1" rules="all"><caption><b>Table 4 </b>Packet processing on an outbound interface</caption><thead align="left"><tr><th align="left" class="cellrowborder" rowspan="2" valign="top" id="mcps1.4.3.6.2.4.1.1" liSelected="liSelected"><p>Outbound Interface Type</p>
</th>
<th align="left" class="cellrowborder" colspan="2" valign="top" id="mcps1.4.3.6.2.4.1.2" liSelected="liSelected"><p>Packet Processing for VPLS Network Access</p>
</th>
</tr>
<tr><th align="left" class="cellrowborder" valign="top" id="mcps1.4.3.6.2.4.2.1" liSelected="liSelected"><p>Ethernet-Encapsulated Packets</p>
</th>
<th align="left" class="cellrowborder" valign="top" id="mcps1.4.3.6.2.4.2.2" liSelected="liSelected"><p>VLAN-Encapsulated Packets</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="17.728227177282275%" headers="mcps1.4.3.6.2.4.1.1 "><p>Dot1q sub-interface</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.6.2.4.1.2 mcps1.4.3.6.2.4.2.1 "><p>A specific tag is added.</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.6.2.4.1.2 mcps1.4.3.6.2.4.2.2 "><p>The tag is replaced.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.728227177282275%" headers="mcps1.4.3.6.2.4.1.1 "><p>Dot1q VLAN tag termination sub-interface</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.6.2.4.1.2 mcps1.4.3.6.2.4.2.1 "><p>A specific tag is added.</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.6.2.4.1.2 mcps1.4.3.6.2.4.2.2 "><p>The tag is replaced.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.728227177282275%" headers="mcps1.4.3.6.2.4.1.1 "><p>QinQ VLAN tag termination sub-interface</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.6.2.4.1.2 mcps1.4.3.6.2.4.2.1 "><div class="p"><ul><li><p>In symmetric mode, outer tags are added.</p>
</li><li><p>In asymmetric mode, both inner and outer tags are added.</p>
</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.6.2.4.1.2 mcps1.4.3.6.2.4.2.2 "><div class="p"><ul><li><p>In symmetric mode, outer tags are replaced.</p>
</li><li><p>In asymmetric mode, one tag is stripped and both inner and outer tags are added.</p>
</li></ul>
</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.728227177282275%" headers="mcps1.4.3.6.2.4.1.1 "><p>QinQ stacking sub-interface</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.6.2.4.1.2 mcps1.4.3.6.2.4.2.1 "><p>The outer tag is stripped.</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.6.2.4.1.2 mcps1.4.3.6.2.4.2.2 "><p>The outer tag is stripped.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.728227177282275%" headers="mcps1.4.3.6.2.4.1.1 "><p>QinQ mapping sub-interface</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.6.2.4.1.2 mcps1.4.3.6.2.4.2.1 "><p>The outer tag is replaced.</p>
</td>
<td class="cellrowborder" valign="top" width="41.13588641135886%" headers="mcps1.4.3.6.2.4.1.2 mcps1.4.3.6.2.4.2.2 "><p>The outer tag is replaced.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="note" id="EN-US_CONCEPT_0172363210__note_1"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p" id="EN-US_CONCEPT_0172363210__p1839042762214028">To configure VLAN encapsulation or Ethernet encapsulation, run the <a href="cmdqueryname=encapsulation+%28VSI+view%29"><b><span class="cmdname" id="EN-US_CONCEPT_0172363210__cmdname459946539214028">encapsulation (VSI view)</span></b></a> command.<ul id="EN-US_CONCEPT_0172363210__ul1704211703214028"><li id="EN-US_CONCEPT_0172363210__li2019318708214028"><p id="EN-US_CONCEPT_0172363210__p2005451815214028"><a name="EN-US_CONCEPT_0172363210__li2019318708214028"></a><a name="li2019318708214028"></a>VLAN encapsulation</p>
<p id="EN-US_CONCEPT_0172363210__p2089068270214028">Each Ethernet frame transmitted between CEs and PEs carries a VLAN tag called a Provider-Tag (P-tag). The tag is a service delimiter required by a carrier for user differentiation.</p>
</li><li id="EN-US_CONCEPT_0172363210__li517051069214028"><p id="EN-US_CONCEPT_0172363210__p1358480921214028"><a name="EN-US_CONCEPT_0172363210__li517051069214028"></a><a name="li517051069214028"></a>Ethernet encapsulation</p>
<p id="EN-US_CONCEPT_0172363210__p1252050304214028">Ethernet frames transmitted between CEs and PEs do not carry P-tags. If an Ethernet frame carries a VLAN tag, the tag is an internal VLAN tag called a User-Tag (U-tag). It is carried in a user packet before the packet is sent to a CE. The U-tag is used by the CE to identify the packet and is meaningless to the PE.</p>
</li></ul>
</div>
</div></div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0000_1.html">QinQ Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/spec/QinQ_limitation.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0003_1.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>