
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Abnormal Packet Filtering">
<meta name="abstract" content="You can configure the device to process or discard specified packets in order to filter unexpected packets.">
<meta name="description" content="You can configure the device to process or discard specified packets in order to filter unexpected packets.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0026.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0032.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0033.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wwx1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363641">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Abnormal Packet Filtering</title>
</head>
<body><a name="EN-US_TASK_0172363641"></a><a name="EN-US_TASK_0172363641"></a>

<div class="articleBoxWithoutHead">





<h1 class="topicTitle-h1">Configuring Abnormal Packet Filtering</h1>
<div class="taskbody"><p>You can configure the <span class="keyword" id="en-us_task_0172363557_keyword805721274214313">device</span> to process or discard specified packets in order to filter unexpected packets.</p>
<div class="context"><a name="EN-US_TASK_0172363641__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0172363641__en-us_task_0172363557_context690481273214029"><p id="EN-US_TASK_0172363641__en-us_task_0172363557_p2064610570214029">On a network running STP, RSTP, or MSTP, a device may receive unexpected STP, RSTP, or MSTP BPDUs due to incorrect configurations or malicious network attacks. If these unexpected packets are transparently transmitted on the network, spanning tree calculation may be affected, causing network flapping. To address this problem, enable the function to filter abnormal packets.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172363641__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172363641__en-us_task_0172363557_steps2044664712214029"><li id="EN-US_TASK_0172363641__en-us_task_0172363557_step1526568857214029"><span id="EN-US_TASK_0172363641__en-us_task_0172363557_cmd156175977214313">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172363641__en-us_task_0172363557_cmdname902392168214313">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0172363641__en-us_task_0172363557_p1932493502214313">The system view is displayed.</p>
</p></li><li id="EN-US_TASK_0172363641__en-us_task_0172363557_step5479846214029"><span id="EN-US_TASK_0172363641__en-us_task_0172363557_cmd1905458548214029">Run the <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172363641__en-us_task_0172363557_cmdname1723160558214029">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363641__en-us_task_0172363557_varname1334367398214029">interface-type interface-number</span></i> command to enter the view of an interface participating in spanning tree calculation, or run the <a href="cmdqueryname=pw"><b><span class="cmdname" id="EN-US_TASK_0172363641__en-us_task_0172363557_cmdname1486784825214029">pw</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363641__en-us_task_0172363557_varname1565109903214029">pw-name</span></i> command to enter the VSI-LDP-PW view.</span><p><div class="note" id="EN-US_TASK_0172363641__en-us_task_0172363557_en-us_task_0172363544_note64068115214313"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172363641__en-us_task_0172363557_en-us_task_0172363544_p773718156479">The following configuration can be configured both on a Layer 2 interface and a Layer 3 interface.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172363641__en-us_task_0172363557_step1546460114214029"><span id="EN-US_TASK_0172363641__en-us_task_0172363557_cmd360556357214029">Run either or both of the following commands to configure abnormal packet filtering:</span><p><ul id="EN-US_TASK_0172363641__en-us_task_0172363557_ul1511588566214029"><li id="EN-US_TASK_0172363641__en-us_task_0172363557_li1190007582214029">Run the <a href="cmdqueryname=stp+permit+packet"><b><span class="cmdname" id="EN-US_TASK_0172363641__en-us_task_0172363557_cmdname450708563214029">stp permit packet</span></b></a> <strong><span id="EN-US_TASK_0172363641__en-us_task_0172363557_cmdparmname1042420578214313">source-mac</span></strong> <i><span class="varname" id="EN-US_TASK_0172363641__en-us_task_0172363557_varname1508441402214313">source-mac</span></i> <i><span class="varname" id="EN-US_TASK_0172363641__en-us_task_0172363557_varname1225220249214313">source-mac-mask</span></i> command to enable the interface to process STP, RSTP, and MSTP BPDUs carrying a specified source MAC address.</li><li id="EN-US_TASK_0172363641__en-us_task_0172363557_li105445537214029">Run the <a href="cmdqueryname=stp+deny+packet"><b><span class="cmdname" id="EN-US_TASK_0172363641__en-us_task_0172363557_cmdname1517301129214029">stp deny packet</span></b></a> <strong><span id="EN-US_TASK_0172363641__en-us_task_0172363557_cmdparmname955485641214029">vlan</span></strong> { {<i><span class="varname" id="EN-US_TASK_0172363641__en-us_task_0172363557_varname1332584148214029"> vlan-id1</span></i> [ <strong><span id="EN-US_TASK_0172363641__en-us_task_0172363557_cmdparmname1077035726214029">to</span></strong> <i><span class="varname" id="EN-US_TASK_0172363641__en-us_task_0172363557_varname1631639876214029">vlan-id2</span></i> ] } &amp;&lt;1-10&gt;} command to enable the interface to discard STP, RSTP, and MSTP BPDUs carrying a specified VLAN ID.</li></ul>
<div class="note" id="EN-US_TASK_0172363641__en-us_task_0172363557_note829992907214029"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0172363641__en-us_task_0172363557_ul1784500684214029"><li id="EN-US_TASK_0172363641__en-us_task_0172363557_li1961355332214029">If this operation is incorrectly performed, a broadcast storm may occur.</li><li id="EN-US_TASK_0172363641__en-us_task_0172363557_li1234387267214029">If both of the preceding commands are configured in the same interface view or VSI-LDP-PW view, the device preferentially executes the <a href="cmdqueryname=stp+deny+packet"><b><span class="cmdname" id="EN-US_TASK_0172363641__en-us_task_0172363557_cmdname1746479693214029">stp deny packet</span></b></a> { <strong><span id="EN-US_TASK_0172363641__en-us_task_0172363557_cmdparmname292804492214029">vlan</span></strong> <i><span class="varname" id="EN-US_TASK_0172363641__en-us_task_0172363557_varname1111995012214029">vlan-id1</span></i> [ <strong><span id="EN-US_TASK_0172363641__en-us_task_0172363557_cmdparmname690480073214029">to</span></strong> <i><span class="varname" id="EN-US_TASK_0172363641__en-us_task_0172363557_varname61020883214029">vlan-id2</span></i> ] } &amp;&lt;1-10&gt; command.</li><li id="EN-US_TASK_0172363641__en-us_task_0172363557_li1079918907214029">A maximum of 16 source MAC addresses or VLAN IDs can be configured in the same interface view or VSI-LDP-PW view.</li></ul>
</div></div>
</p></li><li id="EN-US_TASK_0172363641__en-us_task_0172363557_step1528061946214029"><span id="EN-US_TASK_0172363641__en-us_task_0172363557_cmd1555925932214313">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172363641__en-us_task_0172363557_cmdname344601031214313">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172363641__en-us_task_0172363557_p706751122214313">The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0026.html">Configuring MSTP Protection Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0032.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0033.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>