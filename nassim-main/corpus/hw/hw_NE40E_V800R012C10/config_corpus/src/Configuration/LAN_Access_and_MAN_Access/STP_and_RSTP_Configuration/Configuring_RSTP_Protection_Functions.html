
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring RSTP Protection Functions">
<meta name="abstract" content="Rapid Spanning Tree Protocol (RSTP) protection functions are as follows, and you can configure one or more functions as required.">
<meta name="description" content="Rapid Spanning Tree Protocol (RSTP) protection functions are as follows, and you can configure one or more functions as required.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0012.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0045.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0019.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0037.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0022.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0035.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0023.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="STP/RSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="STP/RSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="STP/RSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wwx1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363552">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring RSTP Protection Functions</title>
</head>
<body><a name="EN-US_TASK_0172363552"></a><a name="EN-US_TASK_0172363552"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring RSTP Protection Functions</h1>
<div class="taskbody"><p>Rapid Spanning Tree Protocol (RSTP) protection functions are as follows, and you can configure one or more functions as required.</p>
<div class="context"><a name="EN-US_TASK_0172363552__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Applicable Environment</h4><p>RSTP provides the following protection functions, as listed in <a href="#EN-US_TASK_0172363552__tab_dc_vrp_stp_cfg_0003_01">Table 1</a>.</p>

<div class="tableBorder"><a name="EN-US_TASK_0172363552__tab_dc_vrp_stp_cfg_0003_01"></a><a name="tab_dc_vrp_stp_cfg_0003_01"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172363552__tab_dc_vrp_stp_cfg_0003_01" frame="border" border="1" rules="all"><caption><b>Table 1 </b>RSTP Protection Function</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="17.330000000000002%" id="mcps1.4.1.3.2.4.1.1" liSelected="liSelected"><p>Protection Function</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="32.67%" id="mcps1.4.1.3.2.4.1.2" liSelected="liSelected"><p>Scenario</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.1.3.2.4.1.3" liSelected="liSelected"><p>Configuration Impact</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="17.330000000000002%" headers="mcps1.4.1.3.2.4.1.1 "><p>BPDU protection</p>
</td>
<td class="cellrowborder" valign="top" width="32.67%" headers="mcps1.4.1.3.2.4.1.2 "><p>An edge port changes to be a non-edge port after receiving a BPDU, which triggers spanning tree recalculation. If an attacker keeps sending bogus BPDUs to a device, network flapping occurs.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.1.3.2.4.1.3 "><p>After BPDU protection is enabled on the device, the device shuts down the edge port if the edge port receives an RST BPDU, and notifies the NMS of the shutdown event. The attributes of the edge port are not changed.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.330000000000002%" headers="mcps1.4.1.3.2.4.1.1 "><p>TC protection</p>
</td>
<td class="cellrowborder" valign="top" width="32.67%" headers="mcps1.4.1.3.2.4.1.2 "><p>Generally, after receiving TC BPDUs (packets for advertising network topology changes), a device needs to delete MAC entries and ARP entries. Frequent deletion operations will exhaust CPU resources.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.1.3.2.4.1.3 "><p>TC protection is used to suppress TC-BPDUs. The number of times that TC-BPDUs are processed by a device within a given time period is configurable. If the number of TC-BPDUs that the device receives within a given time exceeds the specified threshold, the device handles TC-BPDUs only for the specified number of times. Excess TC-BPDUs are processed by the device as a whole for once after the timer (that is, the specified time period) expires. This protects the device from frequently deleting MAC entries and ARP entries, thus avoiding over-burdened.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.330000000000002%" headers="mcps1.4.1.3.2.4.1.1 "><p>Root protection</p>
</td>
<td class="cellrowborder" valign="top" width="32.67%" headers="mcps1.4.1.3.2.4.1.2 "><p>Due to incorrect configurations or malicious attacks on the network, a root bridge may receive BPDUs with a higher priority. Consequently, the legitimate root bridge is no longer able to serve as the root bridge, and the network topology is illegitimately changed, triggering spanning tree recalculation. This may transfer traffic from high-speed links to low-speed links, causing traffic congestion.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.1.3.2.4.1.3 "><p>If a designated port is enabled with the root protection function, the role of the port cannot be changed. Once a designated port that is enabled with root protection receives RST BPDUs with a higher priority, the port enters the Discarding state and does not forward packets. If the port does not receive any RST BPDUs with a higher priority before a period (generally two Forward Delay periods) expires, the port automatically enters the Forwarding state.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.330000000000002%" headers="mcps1.4.1.3.2.4.1.1 "><p>Loop protection</p>
</td>
<td class="cellrowborder" valign="top" width="32.67%" headers="mcps1.4.1.3.2.4.1.2 "><p>A root port or an alternate port will age if link congestion or a one-way link failure occurs. After the root port ages, a device may re-select a root port incorrectly and after the alternate port ages, the port enters the Forwarding state. Loops may occur in such a situation.</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.1.3.2.4.1.3 "><p>After loop protection is configured, if the root port or alternate port does not receive RST BPDUs from the upstream device for a long time, the device notifies the NMS that the port enters the Discarding state. The blocked port remains in the Blocked state and no longer forwards packets. This prevents loops on the network. The root port restores the Forwarding state after receiving new BPDUs.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="17.330000000000002%" headers="mcps1.4.1.3.2.4.1.1 "><p>Abnormal packet filtering</p>
</td>
<td class="cellrowborder" valign="top" width="32.67%" headers="mcps1.4.1.3.2.4.1.2 "><p id="EN-US_TASK_0172363552__ph_01">On a network running STP, RSTP, or MSTP, a device may receive unexpected STP, RSTP, or MSTP BPDUs due to incorrect configurations or malicious network attacks. If these unexpected packets are transparently transmitted on the network, spanning tree calculation may be affected, causing network flapping. </p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.1.3.2.4.1.3 "><p id="EN-US_TASK_0172363552__ph_02">After the function to filter abnormal packets is enabled, the device discards the packets carrying a specified source MAC address or VLAN ID. In this manner, unexpected packets are not transparently transmitted on the network, preventing network flapping.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172363552__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><div class="p">Before configuring basic RSTP functions, complete the following task:<ul><li><p><a href="dc_vrp_stp_cfg_0004.html">Configuring basic RSTP functions</a></p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Configuring an edge port on the device before configuring bridge protocol data unit (BPDU) protection.</p>
</div></div>
</li></ul>
</div>
</div></div>
</div>

<ul class="ullinks">
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0019.html">Configuring BPDU Protection</a>
</dt>
<dd>
After bridge protocol data unit (BPDU) protection is enabled on a <span class="keyword">device</span>, the <span class="keyword">device</span> shuts down an edge port if the edge port receives a BPDU and notifies the NMS of the shutdown event.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0020.html">Configuring TC Protection</a>
</dt>
<dd>
After Topology Change (TC) protection is enabled, you can set the number of times for a device to process TC Bridge Protocol Data Units (BPDUs) within <span>a specified time</span>. TC protection avoids frequent deletion of MAC address entries and ARP entries, thereby protecting devices.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0037.html">Configuring TC/TCN Packet Suppression</a>
</dt>
<dd>
If TC/TCN packets do not need to be flooded, you can enable TC/TCN packet suppression.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0021.html">Configuring Root Protection on a Port</a>
</dt>
<dd>
The root protection function on a device protects a root bridge by preserving the role of a designated port.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0022.html">Configuring Loop Protection on a Port</a>
</dt>
<dd>
The loop protection function suppresses the loops caused by link congestion.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0035.html">Configuring Abnormal Packet Filtering</a>
</dt>
<dd>
You can configure the <span class="keyword">device</span> to process or discard specified packets in order to filter unexpected packets.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0023.html">Verifying the RSTP Protection Function Configuration</a>
</dt>
<dd>
After Rapid Spanning Tree Protocol (RSTP) protection functions are configured, verify the configuration.</dd>
</dl>
</ul>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0000.html">STP/RSTP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0012.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stp_cfg_0045.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>