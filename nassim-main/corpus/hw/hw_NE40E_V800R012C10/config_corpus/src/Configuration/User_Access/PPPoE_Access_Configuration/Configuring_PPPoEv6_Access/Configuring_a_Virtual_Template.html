
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Virtual Template">
<meta name="abstract" content="Layer 2 protocols cannot directly communicate with each other. As such, you need to create a virtual template (VT) before configuring PPPoE access.">
<meta name="description" content="Layer 2 protocols cannot directly communicate with each other. As such, you need to create a virtual template (VT) before configuring PPPoE access.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoxv6_cfg_0012.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoxv6_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoe_cfg_0007a.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00588052,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="dcAudienceJob" content="Configuration">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374110">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Virtual Template</title>
</head>
<body><a name="EN-US_TASK_0172374110"></a><a name="EN-US_TASK_0172374110"></a>

<div class="articleBoxWithoutHead">





<h1 class="topicTitle-h1">Configuring a Virtual Template</h1>
<div class="taskbody"><p>Layer 2 protocols cannot directly communicate with each other. As such, you need to create a virtual template (VT) before configuring PPPoE access.</p>
<div class="context"><a name="EN-US_TASK_0172374110__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0172374110__en-us_task_0172374094_context2131338299214108"><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p1375559333214108">Layer 2 protocols, such as Point-to-Point Protocol (PPP) can communicate only over a virtual access (VA) session. A VA session, however, cannot be manually created or configured. Instead, a VA session is automatically generated after PPP over Ethernet (PPPoE) services are configured and PPPoE parameters are defined in a VT.</p>
<div class="p" id="EN-US_TASK_0172374110__en-us_task_0172374094_p263086213214108">Based on parameters defined in a VT, a device can automatically create VA interfaces for Layer 2 communication.<ul id="EN-US_TASK_0172374110__en-us_task_0172374094_ul1178929671214108"><li id="EN-US_TASK_0172374110__en-us_task_0172374094_li643580832214108"><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p1935397132214108"><a name="EN-US_TASK_0172374110__en-us_task_0172374094_li643580832214108"></a><a name="en-us_task_0172374094_li643580832214108"></a>PPP packets are encapsulated based on parameters defined in a VT. A VT defines NCP parameters, such as IP addresses and upper-layer application protocols.</p>
</li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_li1074178305214108"><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p1967235453214108"><a name="EN-US_TASK_0172374110__en-us_task_0172374094_li1074178305214108"></a><a name="en-us_task_0172374094_li1074178305214108"></a>A VA session transmits data between the local and remote ends based on parameters defined in a VT.</p>
</li></ul>
</div>
<p id="EN-US_TASK_0172374110__en-us_task_0172374094_p638999103214108">When a VT is used for PPPoE services, the link layer protocol can only be PPP, and the network layer protocol can only be IP.</p>
<p id="EN-US_TASK_0172374110__en-us_task_0172374094_p1361692031214108">Before deleting a VT, ensure that the VT is not in use and the VA session automatically generated upon VT creation has been deleted.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172374110__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172374110__en-us_task_0172374094_steps1748404248214108"><li id="EN-US_TASK_0172374110__en-us_task_0172374094_step1206962883214108"><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmd1027002114214412">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname523879161214412">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p654114776214412">The system view is displayed.</p>
</p></li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_step1322559417214108"><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmd343597146214412">Run <span><a href="cmdqueryname=interface+virtual-template"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname448016354214412">interface virtual-template</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374110__en-us_task_0172374094_varname1101259815214412">virtual-template-number</span></i></span></span><p><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p927161797214412">A VT is created and its view is displayed, or the view of an existing VT is displayed.</p>
</p></li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_step1137184176214108"><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmd1222538494">Run <a href="cmdqueryname=ppp+authentication-mode"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname1506617343214108">ppp authentication-mode</span></b></a> { <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname1894380985214108">auto</span></strong> | { <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname1140462867214108">pap</span></strong> | <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname152484927214108">chap</span></strong> | <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname849804637214108">mschapv1</span></strong> | <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname1166552319214108">mschapv2</span></strong> } <sup id="EN-US_TASK_0172374110__en-us_task_0172374094_sup1836867707214108">*</sup> }</span><p><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p1060815279917">A PPP authentication mode used by the local device to authenticate the remote device is configured.</p>
</p></li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_step2034971397214108"><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmd623333466214412">(Optional) Run <span><a href="cmdqueryname=ppp+chap+user"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname884498670214412">ppp chap user</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374110__en-us_task_0172374094_varname1130496316214412">user-name</span></i></span></span><p><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p1014414180214412">A local username is configured.</p>
</p></li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_step1797687021214108"><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmd778332304214108">(Optional) Configure PPP negotiation parameters.</span><p><ul id="EN-US_TASK_0172374110__en-us_task_0172374094_ul1953957221214108"><li id="EN-US_TASK_0172374110__en-us_task_0172374094_li2097464159214108">Run <a href="cmdqueryname=ppp+timer"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname396052579214108">ppp timer</span></b></a> { <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname1205745175214108">negotiate</span></strong> <em id="EN-US_TASK_0172374110__en-us_task_0172374094_i152661336141518">seconds </em>| <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname938495246214108">retransmit</span></strong> <em id="EN-US_TASK_0172374110__en-us_task_0172374094_i1890024941510">retry-times</em> } <sup id="EN-US_TASK_0172374110__en-us_task_0172374094_sup938323627214108">*</sup><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p64598843214412">A PPP negotiation timeout period and the maximum number of retransmissions allowed are configured. </p>
</li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_li1890521225214108">Run <span id="EN-US_TASK_0172374110__en-us_task_0172374094_ph1870680722214412"><a href="cmdqueryname=ppp+delay-lcp-negotiation"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname1370302574214412">ppp delay-lcp-negotiation</span></b></a> [ <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname2001354603214412">force</span></strong> ]</span><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p1345028736214412">Delayed LCP packet transmission is configured.</p>
</li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_li644952044214108">Run <span id="EN-US_TASK_0172374110__en-us_task_0172374094_ph1972897259214412"><a href="cmdqueryname=ppp+keepalive"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname1336722333214412">ppp keepalive</span></b></a> { <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname240005986214412">interval</span></strong> <i><span class="varname" id="EN-US_TASK_0172374110__en-us_task_0172374094_varname816616378214412">interval-time</span></i> | <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname877098987214412">retransmit</span></strong> <i><span class="varname" id="EN-US_TASK_0172374110__en-us_task_0172374094_varname1436821737214412">times</span></i> <span>| <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname1020579501214412">response-timeout</span></strong> <i><span class="varname" id="EN-US_TASK_0172374110__en-us_task_0172374094_varname1457607179214412">response-timeout-time</span></i> </span>} <sup id="EN-US_TASK_0172374110__en-us_task_0172374094_sup2020603354214412">*</sup> [ <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname703375586214412">datacheck</span></strong> | <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname609134386214412">no-datacheck</span></strong> ]</span><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p2133747777214412">A PPP detection interval and the maximum number of retransmissions allowed are configured.</p>
</li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_li114545107214108">Run <span id="EN-US_TASK_0172374110__en-us_task_0172374094_ph1045067134214412"><a href="cmdqueryname=ppp+keepalive+adjustment"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname174572325214412">ppp keepalive adjustment</span></b></a> { <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname1885407006214412">system-state</span></strong> | <strong><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdparmname509818942214412">retransmit</span></strong> }</span><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p1999395231214412">Adjustment of the number of PPP detections is enabled.</p>
</li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_li1967257514214108">Run <span id="EN-US_TASK_0172374110__en-us_task_0172374094_ph1535313199214412"><a href="cmdqueryname=mtu"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname1992916888214412">mtu</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374110__en-us_task_0172374094_varname569433095214412">mtu</span></i></span><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p1743364712214412">An MTU is configured in the VT.</p>
</li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_li1321279596214108"><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p3628511935"><a name="EN-US_TASK_0172374110__en-us_task_0172374094_li1321279596214108"></a><a name="en-us_task_0172374094_li1321279596214108"></a>Run <a href="cmdqueryname=ppp+mru"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname1238102239214108">ppp mru</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374110__en-us_task_0172374094_varname450943720214108">mru</span></i></p>
<p id="EN-US_TASK_0172374110__en-us_task_0172374094_p167893489296">An MRU is configured for PPP negotiation.</p>
</li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_li1434628548214108">Run <span id="EN-US_TASK_0172374110__en-us_task_0172374094_ph214761214412"><a href="cmdqueryname=pppoe-motm"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname1462004480214412">pppoe-motm</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374110__en-us_task_0172374094_varname345706238214412">motm-value</span></i></span><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p1919453111214412">The device is configured to encapsulate clock synchronization information to the MOTM tag in a PPPoE active discovery message (PADM).</p>
</li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_li788121452214108">Run <span id="EN-US_TASK_0172374110__en-us_task_0172374094_ph622048273214412"><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname814930715214412">quit</span></b></a></span><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p1591347634214412">Return to the system view.</p>
</li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_li1841753087214108">Run <span id="EN-US_TASK_0172374110__en-us_task_0172374094_ph1564595966214412"><a href="cmdqueryname=pppoe+ppp-max-payload+enable"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname227143047214412">pppoe ppp-max-payload enable</span></b></a></span><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p2135627932214412">The device is enabled to negotiate the MRU in compliance with standard protocols.</p>
</li></ul>
</p></li><li id="EN-US_TASK_0172374110__en-us_task_0172374094_step820213254214108"><span id="EN-US_TASK_0172374110__en-us_task_0172374094_cmd580531320214412">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172374110__en-us_task_0172374094_cmdname199518275214412">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172374110__en-us_task_0172374094_p321884249214412">The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoxv6_cfg_0012.html">Configuring PPPoEv6 Access
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoxv6_cfg_0016.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoe_cfg_0007a.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>