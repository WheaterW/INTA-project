
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring User Address Assignment Through a Local Address Pool">
<meta name="abstract" content="This section provides an example for configuring a local address pool to assign IPv4 addresses to users.">
<meta name="description" content="This section provides an example for configuring a local address pool to assign IPv4 addresses to users.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0065.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0067.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00588052,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373812">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring User Address Assignment Through a Local Address Pool</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172373812"></a><a name="EN-US_TASK_0172373812"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring User Address Assignment Through a Local Address Pool</h1>
<div class="taskbody"><p>This section provides an example for configuring a local address pool to assign IPv4 addresses to users.</p>
<div class="context"><a name="EN-US_TASK_0172373812__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172373812__fig_dc_ne_ipv4_address_cfg_006601">Figure 1</a>, it is required that a local address pool be configured to assign addresses to access users and the following requirements be met:</p>
<ul><li><p>A local address pool is used to assign addresses to users in the domain <strong>isp1</strong>.</p>
</li><li><p>The IP addresses in the address pool range from 10.10.10.3 to 10.10.10.100, and the gateway address is 10.10.10.2.</p>
</li><li><p>The DNS server address is 10.20.20.1.</p>
</li><li><p>The IP address of GE<span>0/3/0</span> connecting the device to the DNS server is 10.20.20.2.</p>
</li></ul>
<div class="fignone" id="EN-US_TASK_0172373812__fig_dc_ne_ipv4_address_cfg_006601"><a name="EN-US_TASK_0172373812__fig_dc_ne_ipv4_address_cfg_006601"></a><a name="fig_dc_ne_ipv4_address_cfg_006601"></a><span class="figcap"><b>Figure 1 </b>User address assignment through a local address pool</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interfaces 1 through 3 represent GE<span>0/1/0</span>.1, GE<span>0/2/0</span>, and GE<span>0/3/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001238682231.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172373812__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Access users include IPoE users and PPPoE users. The address assignment for IPoE and PPPoE users differs in the access mode. This section describes only the IPv4 address pool configurations. For details about the IPoE access configurations, see <a href="dc_ne_ipox_cfg_0084.html">Example for Configuring IPoE Access to a VPN (Web Authentication)</a>.</p>
</div></div>
<p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure a local address pool, including its gateway address, address range, and the DNS server address.</p>
</li><li><p>Configure a domain named <strong>isp1</strong> to which users belong, including the authentication and accounting modes.</p>
</li><li><p>Configure a BAS interface, including the user access mode.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172373812__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Name, address range, gateway address, and DNS server address of the address pool</p>
</li><li><p>Name of the domain to which users belong</p>
</li><li><p>Authentication and accounting schemes</p>
</li><li>User authentication mode (RADIUS authentication)</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373812__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure a DHCPv4 server.</span><p><p># Configure an address pool.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip pool pool1 bas local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ip-pool-pool1] <strong>gateway 10.10.10.2 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ip-pool-pool1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-ip-pool-pool1] <strong>section 0 10.10.10.3 10.10.10.100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ip-pool-pool1] <strong>dns-server 10.20.20.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ip-pool-pool1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-ip-pool-pool1] <strong>quit</strong></pre>
<p># Configure an authentication mode in the authentication scheme view.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>aaa</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa] <strong>authentication-scheme clcl</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-authen-clcl] <strong>authentication-mode radius</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-authen-clcl] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa-authen-clcl] <strong>quit</strong></pre>
<p># Configure an accounting mode in the accounting scheme view.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa] <strong>accounting-scheme ccll</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-accounting-ccll] <strong>accounting-mode none</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-accounting-ccll] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa-accounting-ccll] <strong>quit</strong></pre>
<p># Configure a RADIUS server group.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa] <strong>radius-server group rd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-radius-rd]<strong> radius-server authentication 10.7.66.66 1812</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-radius-rd] <strong>radius-server accounting 10.7.66.66 1813</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-radius-rd] <strong>radius-server shared-key-cipher YsHsjx_202206</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-radius-rd] <strong>radius-server retransmit 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-radius-rd] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-radius-rd] <strong>quit</strong></pre>
<p># Configure a domain named <strong>isp1</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa] <strong>domain isp1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-domain-isp1] <strong>authentication-scheme clcl</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-domain-isp1] <strong>accounting-scheme ccll</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-domain-isp1]<strong> </strong><strong>radius-server group rd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-domain-isp1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa-domain-isp1] <strong>ip-pool pool1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-domain-isp1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa-domain-isp1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa] <strong>quit</strong></pre>
<p># Configure a BAS interface.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface <span>GigabitEthernet</span> <span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>GigabitEthernet</span><span>0/1/0</span>.1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>GigabitEthernet</span><span>0/1/0</span>.1] <strong>user-vlan 1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>GigabitEthernet</span><span>0/1/0</span>.1-vlan-1-1] <strong>bas</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>GigabitEthernet</span><span>0/1/0</span>.1-bas] <strong>access-type layer2-subscriber</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>GigabitEthernet</span><span>0/1/0</span>.1-bas] <strong>authentication-method bind</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>GigabitEthernet</span><span>0/1/0</span>.1-bas] <strong>default-domain authentication isp1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>GigabitEthernet</span><span>0/1/0</span>.1-bas] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>GigabitEthernet</span><span>0/1/0</span>.1-bas] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-<span>GigabitEthernet</span><span>0/1/0</span>.1] <strong>quit</strong></pre>
<div class="p"># Configure an IP address for GE<span>0/3/0</span> connecting the device to the DNS server.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface GigabitEthernet <span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/3/0</span>]<strong> ip address 10.20.20.2 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/3/0</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/3/0</span>]<strong> quit</strong></pre>
</div>
</p></li><li><span>Verify the configuration.</span><p><p># Check the configuration of the local address pool <strong>pool1</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> display ip pool name pool1</strong></pre>
<pre class="screen">  Pool-Name      : pool1
  Pool-No        : 19<span> 
  Pool-constant-index :- </span>
  Lease          : 3 Days 0 Hours 0 Minutes
  Frameip-Lease-Manage: disable
  NetBois Type   : N-Node
  Auto recycle   : 30
  Option 3       : Enable
  DNS-Suffix     : -
  Dom-Search-List0 : -
  Dom-Search-List1 : -
  Dom-Search-List2 : -
  Dom-Search-List3 : -
  Option-Code 125 : enterprise-code : 2011  string: -
  Position       : Local           Status           : Unlocked
  RUI-Flag        : -
  Attribute       : Private
  Gateway        : 10.10.10.2      Mask             : 255.255.255.0
  Vpn instance   : --              Unnumbered gateway: -
  Profile-Name   : -               Server-Name      : -
  Total Idle     : 198             Have Dhcp IP     : 1
  Timeouts       : 0
  Timeout Count  :0               Sub Option Count:0
  Option Count   :0               Force-reply Count:0
  Auto-Blocked Times: 0            IP Allocation Failures: 0
  Codes: CFLCT(conflicted)       Wait-Request-Time: --
  IP Loose Check : 0

  ------------------------------------------------------------------------------------------------
  ID           start             end total  used  idle CFLCT disable reserved static-bind  delayed
  -------------------------------------------------------------------------------------------------
   0      10.10.10.3    10.10.10.100    98     0    98     0       0        0           0        0
  -------------------------------------------------------------------------------------------------</pre>
<p># Check the configuration of the domain <strong>isp1</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> display domain isp1</strong></pre>
<pre class="screen"> ------------------------------------------------------------------------------
  Domain-name                     : <strong>isp1</strong>
  Domain-state                    : Active
  Authentication-scheme-name      : default0
  Accounting-scheme-name          : default0
  Authorization-scheme-name       :
  Primary-DNS-IP-address          : -
  Second-DNS-IP-address           : -
  Web-server-URL-parameter        : No
  Portal-server-URL-parameter     : No
  Primary-NBNS-IP-address         : -
  Second-NBNS-IP-address          : -
  User-group-name                 : -
  Idle-data-attribute (time, flow) : 0,60
  Install-BOD-Count               : 0
  Report-VSM-User-Count           : 0
  Value-added-service             : <span> default</span>
  User-access-limit               : 279552
  Online-number                   : 0
  Web-IP-address                  : -
  Web-URL                         : -
  Portal-server-IP                : -
  Portal-URL                      : -
  Portal-force-times              : 2
  PPPoE-user-URL                  : Disable
  IPUser-ReAuth-Time (second) : 300
  mscg-name-portal-key            : -
  Portal-user-first-url-key       : -
  Ancp auto qos adapt             : Disable
  Service-type                    : STB
  RADIUS-server-template          : -
  Two-acct-template               : -
  HWTACACS-server-template        : -
  Bill Flow                       : Disable
  Tunnel-acct-2867                : Disabled
  Flow Statistic:
  Flow-Statistic-Up               : Yes
  Flow-Statistic-Down             : Yes
  Source-IP-route                 : Disable
  IP-warning-threshold            : -
  Multicast Forwarding            : Yes
  Multicast Virtual               : No
  Max-multilist num               : 4
  Multicast-profile               : -
  IP-address-pool-name            : <strong>pool1</strong>
  Quota-out                     : Offline
  ------------------------------------------------------------------------------</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172373812__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><div class="p">Configuration files<pre class="screen">#
 sysname <span class="keyword">HUAWEI</span>

#
ip pool pool1 bas local
 gateway 10.10.10.2 255.255.255.0
 section 0 10.10.10.3 10.10.10.100
 dns-server 10.20.20.1
#
radius-server group rd                                                       
 radius-server authentication 10.7.66.66 1812 weight 0                                             
 radius-server accounting 10.7.66.66 1813 weight 0                                                        
 radius-server shared-key-cipher %^%#h{FXVBLZX9#`VI]EWUUaOSHGd5E!.1DGeVYEie=%^%                                       
 radius-server retransmit 2                                                    
# 
aaa
 authentication-scheme clcl
  authentication-mode radius
 #
 accounting-scheme ccll
  accounting-mode none
 authorization-scheme default
 #
 domain isp1
  authentication-scheme clcl
  accounting-scheme ccll
  radius-server group rd
  ip-pool pool1
 #
interface <span>GigabitEthernet</span><span>0/1/0</span>.1
 statistic enable
 user-vlan 1
 bas
 #
  access-type layer2-subscriber default-domain authentication isp1
  authentication-method bind
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip address 10.20.20.2 255.255.255.0
#
return</pre>
</div>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0065.html">IPv4 Address Management Configuration Examples
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0067.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>