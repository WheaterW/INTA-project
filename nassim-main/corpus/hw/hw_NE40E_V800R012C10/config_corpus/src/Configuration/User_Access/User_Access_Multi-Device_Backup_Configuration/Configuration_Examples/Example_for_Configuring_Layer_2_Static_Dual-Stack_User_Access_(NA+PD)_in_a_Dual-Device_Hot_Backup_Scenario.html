
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Layer 2 Static Dual-Stack User Access (NA+PD) in a Dual-Device Hot Backup Scenario">
<meta name="abstract" content="When the OLT is connected to the BRASs as a static user, the BRASs assign an IPv6 address to it in NA+PD mode to implement user access.">
<meta name="description" content="When the OLT is connected to the BRASs as a static user, the BRASs assign an IPv6 address to it in NA+PD mode to implement user access.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_0050.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_1002.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_00631.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00588052,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="UP Multi-Device Backup">
<meta name="featurename" content="User Access Multi-Device Backup">
<meta name="featuretype" content="User Access">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="UP Multi-Device Backup">
<meta name="featurename" content="User Access Multi-Device Backup">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="UP Multi-Device Backup">
<meta name="featurename" content="User Access Multi-Device Backup">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="User Access Multi-Device Backup">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="z00603461">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001203123102">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring Layer 2 Static Dual-Stack User Access (NA+PD) in a Dual-Device Hot Backup Scenario</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001203123102"></a><a name="EN-US_TASK_0000001203123102"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Layer 2 Static Dual-Stack User Access (NA+PD) in a Dual-Device Hot Backup Scenario</h1>
<div class="taskbody"><p>When the OLT is connected to the BRASs as a static user, the BRASs assign an IPv6 address to it in NA+PD mode to implement user access.</p>
<div class="context"><a name="EN-US_TASK_0000001203123102__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="dc_ne_cfg_rui_0064.html#EN-US_TASK_0210982515__fig_dc_ne_cfg_rui_003101">Figure 1</a>, the OLT is connected to BRAS1 and BRAS2 as a static user, and common static users are connected to BRAS1 and BRAS2 through SW1. To allow the users to access IPv4 and IPv6 networks, configure the BRASs to use a local address pool to assign IPv4 addresses to the users, use DHCPv6 IA_PD to assign IPv6 prefixes to them, and use DHCPv6 IA_NA to assign IPv6 addresses to them. To improve network reliability, dual-device hot backup also needs to be deployed. If a fault occurs, a master/backup switchover can be triggered to ensure the normal running of services.</p>
<div class="fignone"><span class="figcap"><b>Figure 1 </b>Configuring Layer 2 static dual-stack user access in a dual-device hot backup scenario</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 and 2 in this example represent Eth-Trunk2 and GE<span>0/1/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001203403086.png"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Interfaces and IP addresses</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="22.587741225877412%" id="mcps1.4.1.4.2.5.1.1" liSelected="liSelected"><p><strong>Device</strong></p>
</th>
<th align="left" class="cellrowborder" valign="top" width="23.227677232276772%" id="mcps1.4.1.4.2.5.1.2" liSelected="liSelected"><p><strong>Interface Name</strong></p>
</th>
<th align="left" class="cellrowborder" valign="top" width="23.337666233376662%" id="mcps1.4.1.4.2.5.1.3" liSelected="liSelected"><p><strong>Interface Number</strong></p>
</th>
<th align="left" class="cellrowborder" valign="top" width="30.846915308469153%" id="mcps1.4.1.4.2.5.1.4" liSelected="liSelected"><p><strong>IP Address</strong></p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="5" valign="top" width="22.587741225877412%" headers="mcps1.4.1.4.2.5.1.1 "><p>BRAS1</p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="23.227677232276772%" headers="mcps1.4.1.4.2.5.1.2 "><p>interface1</p>
</td>
<td class="cellrowborder" valign="top" width="23.337666233376662%" headers="mcps1.4.1.4.2.5.1.3 "><p>Eth-trunk2</p>
</td>
<td class="cellrowborder" valign="top" width="30.846915308469153%" headers="mcps1.4.1.4.2.5.1.4 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.2 "><p>interface1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.3 "><p>Eth-trunk2.1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.4 "><p>192.168.4.129/29</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.2 "><p>interface2</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.3 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.4 "><p>10.2.1.1/24, 2001:db8:8::7/128</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.2 "><p>-</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.3 "><p>Loopback1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.4 "><p>10.2.2.2/24, 2001:db8::2:2/64</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.2 "><p>-</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.3 "><p>Loopback2</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.4 "><p>10.3.3.3/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="5" valign="top" width="22.587741225877412%" headers="mcps1.4.1.4.2.5.1.1 "><p>BRAS2</p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="23.227677232276772%" headers="mcps1.4.1.4.2.5.1.2 "><p>interface1</p>
</td>
<td class="cellrowborder" valign="top" width="23.337666233376662%" headers="mcps1.4.1.4.2.5.1.3 "><p>Eth-trunk2</p>
</td>
<td class="cellrowborder" valign="top" width="30.846915308469153%" headers="mcps1.4.1.4.2.5.1.4 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.2 "><p>interface1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.3 "><p>Eth-trunk2.1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.4 "><p>192.168.4.130/29</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.2 "><p>interface2</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.3 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.4 "><p>10.4.1.1/24, 2001:db8:9::7/128</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.2 "><p>-</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.3 "><p>Loopback1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.4 "><p>10.4.4.4/24, 2001:db8::3:3/64</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.2 "><p>-</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.3 "><p>Loopback2</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.2.5.1.4 "><p>10.13.13.13/24</p>
</td>
</tr>
</tbody>
</table>
</div>
<h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Configure IP addresses for interfaces.</li><li>Configure a routing protocol.</li><li>Configure AAA schemes.</li><li>Configure address pools.</li><li>Configure a domain.</li><li>Configure a BFD session and VRRP on the access side of the master and backup BRASs.</li><li>Configure an RBS and an RBP.</li><li>Configure BAS interfaces.</li><li>Configure static users.</li></ol>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The configuration of BRAS2 is similar to the configuration of BRAS1. The following uses the configuration on BRAS1 as an example. For configuration details on BRAS2, see the BRAS2 configuration file.</p>
</div></div>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001203123102__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>VRRP parameters (such as the VRRP ID and preemption delay)</p>
</li><li><p>BFD parameters (such as the local and remote discriminators of a BFD session and the expected minimum intervals at which BFD Control packets are sent and received)</p>
</li><li><p>IP addresses of interfaces on BRAS1 and BRAS2.</p>
</li><li><p>User access parameters</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001203123102__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure IP addresses for interfaces.</span><p><p># Configure IP addresses for network-side interfaces.</p>
</p><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>interface gigabitEthernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>BRAS1-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 enable</strong> 
[<span class="keyword">*</span>BRAS1-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address 2001:db8:8::7 128</strong>
[<span class="keyword">*</span>BRAS1-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address auto link-local</strong>
[<span class="keyword">*</span>BRAS1-GigabitEthernet<span>0/1/0</span>] <strong>ip address 10.2.1.1 24</strong>
[<span class="keyword">*</span>BRAS1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>BRAS1-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<p># Configure an IP address for the protection tunnel.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>interface loopback2</strong>
[<span class="keyword">*</span>BRAS1-Loopback2] <strong>ip address 10.3.3.3 24</strong>
[<span class="keyword">*</span>BRAS1-Loopback2] <strong>quit</strong>
[<span class="keyword">*</span>BRAS1] <strong>commit</strong></pre>
</p></li><li><span>Configure a routing protocol.</span><p><p># Enable the function to automatically control a route's cost preference.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>peer-backup route-cost auto-advertising</strong>
[<span class="keyword">*</span>BRAS1] <strong>commit</strong></pre>
<p># Configure MPLS.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>mpls</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-mpls] <strong>mpls ldp</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-mpls] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>mpls lsr-id 10.3.3.3</strong>
[<span class="keyword">*</span>BRAS1] <strong>interface GigabitEthernet</strong><strong><span>0/1/0</span></strong>
[<span class="keyword">*</span>BRAS1-GigabitEthernet<span>0/1/0</span>] <strong>mpls</strong>
[<span class="keyword">*</span>BRAS1-GigabitEthernet<span>0/1/0</span>] <strong>mpls ldp</strong>
[<span class="keyword">*</span>BRAS1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>BRAS1] <strong>commit</strong></pre>
<p># Configure OSPF to import UNRs.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>ospf 1</strong>
[<span class="keyword">*</span>BRAS1-ospf-1] <strong>default cost inherit-metric</strong>
[<span class="keyword">*</span>BRAS1-ospf-1] <strong>import-route unr</strong>
[<span class="keyword">*</span>BRAS1-ospf-1] <strong>area 0</strong>
[<span class="keyword">*</span>BRAS1-ospf-1-area-0.0.0.0] <strong>network 10.2.1.0 0.0.0.255</strong>
[<span class="keyword">*</span>BRAS1-ospf-1-area-0.0.0.0] <strong>network 10.3.3.3 0.0.0.0</strong>
[<span class="keyword">*</span>BRAS1-ospf-1-area-0.0.0.0] <strong>quit</strong>
[<span class="keyword">*</span>BRAS1-ospf-1] <strong>quit</strong>
[<span class="keyword">*</span>BRAS1] <strong>commit</strong></pre>
</p></li><li><span>Configure AAA schemes.</span><p><p># Configure an authentication scheme.</p>
<pre class="screen">&lt;HUAWEI&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>HUAWEI] <strong>sysname</strong> <strong>BRAS1</strong>
[<span class="keyword">*</span>HUAWEI] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1]<strong> aaa</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-aaa]<strong> authentication-scheme auth1</strong>
[<span class="keyword">*</span>BRAS1-aaa-authen-auth1]<strong> authentication-mode radius</strong>
[<span class="keyword">*</span>BRAS1-aaa-authen-auth1]<strong> quit</strong>
[<span class="keyword">*</span>BRAS1-aaa] <strong>commit</strong></pre>
<p># Configure an accounting scheme and set the accounting mode to none.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-aaa]<strong> accounting-scheme acct1</strong>
[<span class="keyword">*</span>BRAS1-aaa-accounting-acct1]<strong> accounting-mode none</strong>
[<span class="keyword">*</span>BRAS1-aaa-accounting-acct1]<strong> quit</strong>
[<span class="keyword">*</span>BRAS1-aaa] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-aaa] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>quit</strong></pre>
</p></li><li><span>Configure a RADIUS server group.</span><p><div class="p"><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>radius-server group rd</strong>
[<span class="keyword">*</span>BRAS1-radius-rd]<strong> radius-server authentication 10.7.66.66 1812</strong>
[<span class="keyword">*</span>BRAS1-radius-rd] <strong>radius-server accounting 10.7.66.66 1813</strong>
[<span class="keyword">*</span>BRAS1-radius-rd] <strong>radius-server shared-key-cipher YsHsjx_202206</strong>
[<span class="keyword">*</span>BRAS1-radius-rd] <strong>radius-server retransmit 2</strong>
[<span class="keyword">*</span>BRAS1-radius-rd] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-radius-rd] <strong>quit</strong></pre>
</div>
</p></li><li><span>Configure address pools.</span><p><p># Configure a user-side local IPv4 address pool.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>ip pool </strong><strong>pool_v4</strong> <strong>bas local</strong>
[<span class="keyword">*</span>BRAS1-ip-pool-pool_v4] <strong>gateway 172.16.0.1 255.255.255.0</strong>
[<span class="keyword">*</span>BRAS1-ip-pool-pool_v4] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-ip-pool-pool_v4] <strong>section 0 172.16.0.2 172.16.0.255</strong> 
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-ip-pool-pool_v4] <strong>excluded-ip-address</strong> <strong>172.16.0.2 172.16.0.255</strong>
[<span class="keyword">*</span>BRAS1-ip-pool-pool_v4] <strong>quit</strong>
[<span class="keyword">*</span>BRAS1] <strong>commit</strong></pre>
<p># Configure an IPv6 address pool.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>ipv6 prefix </strong><strong>pre_na</strong> <strong>local</strong>
[<span class="keyword">*</span>BRAS1-ipv6-prefix-pre_na] <strong>prefix 2001:db8:1::/48</strong>
[<span class="keyword">*</span>BRAS1-ipv6-prefix-pre_pa] <strong>commi</strong><strong>t</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-ipv6-prefix-pre_na] <strong>lock</strong>
[<span class="keyword">*</span>BRAS1-ipv6-prefix-pre_na] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-ipv6-prefix-pre_na] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>ipv6 pool pool_na bas local</strong>
[<span class="keyword">*</span>BRAS1-ipv6-pool-pool_na] <strong>prefix pre_na </strong>
[<span class="keyword">*</span>BRAS1-ipv6-pool-pool_na] <strong>quit</strong>
[<span class="keyword">*</span>BRAS1] <strong>commi</strong><strong>t</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>ipv6 prefix </strong><strong>pre_pd</strong> <strong>delegation</strong>
[<span class="keyword">*</span>BRAS1-ipv6-prefix-pre_pd] <strong>prefix 2001:db8:2::/48</strong> <strong>delegating-prefix-length 60</strong>
[<span class="keyword">*</span>BRAS1-ipv6-prefix-pre_pd] <strong>commi</strong><strong>t</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-ipv6-prefix-pre_pd] <strong>lock</strong>
[<span class="keyword">*</span>BRAS1-ipv6-prefix-pre_pd] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-ipv6-prefix-pre_pd] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>ipv6 pool pool_pd bas delegation</strong>
[<span class="keyword">*</span>BRAS1-ipv6-pool-pool_pd] <strong>prefix pre_pd</strong>
[<span class="keyword">*</span>BRAS1-ipv6-pool-pool_pd] <strong>quit</strong>
[<span class="keyword">*</span>BRAS1] <strong>commi</strong><strong>t</strong></pre>
<p># Configure the DHCPv6 device to generate a DUID in DUID-LLT mode. (This step is not required if a DUID has been configured on BRAS1.)</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>dhcpv6 duid llt</strong>
[<span class="keyword">*</span>BRAS1] <strong>commit</strong></pre>
</p></li><li><span>Configure a domain.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>aaa</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-aaa]<strong> domain isp1</strong>
[<span class="keyword">*</span>BRAS1-aaa-domain-isp1]<strong> authentication-scheme auth1</strong>
[<span class="keyword">*</span>BRAS1-aaa-domain-isp1]<strong> accounting-scheme acct1</strong>
[<span class="keyword">*</span>BRAS1-aaa-domain-isp1] <strong>radius-server group rd</strong>
[<span class="keyword">*</span>BRAS1-aaa-domain-isp1]<strong> commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-aaa-domain-isp1]<strong> ip-pool pool_v4</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-aaa-domain-isp1] <strong>ipv6-pool </strong><strong>pool_na</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-aaa-domain-isp1] <strong>ipv6-pool pool_pd</strong>
[<span class="keyword">*</span>BRAS1-aaa-domain-isp1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-aaa-domain-isp1]<strong> quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-aaa]<strong> quit</strong></pre>
</p></li><li><span>Configure a BFD session and VRRP on the access side of the master and backup BRASs. BRAS1 is the master, and BRAS2 is the backup.</span><p><p># Configure a BFD session on the access side to allow the device to rapidly detect interface or link faults and trigger a master/backup VRRP switchover upon such a fault.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>bfd</strong>
[<span class="keyword">*</span>BRAS1-bfd] <strong>quit</strong>
[<span class="keyword">*</span>BRAS1]<strong> bfd bfd1 bind peer-ip 192.168.4.130</strong>
[<span class="keyword">*</span>BRAS1-bfd-session-bfd1] <strong>discriminator local 1</strong>
[<span class="keyword">*</span>BRAS1-bfd-session-bfd1] <strong>discriminator remote 1</strong>
[<span class="keyword">*</span>BRAS1-bfd-session-bfd1] <strong>quit</strong> 
[<span class="keyword">*</span>BRAS1] <strong>commit</strong></pre>
<p># Configure a VRRP group on an interface/sub-interface (sub-interface Eth-Trunk2.1 is used in this example), and configure VRRP to track the BFD session and network-side interface.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>interface </strong><strong>Eth-Trunk2.1 </strong>             
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1] <strong>vlan-type dot1q 96</strong>                           
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1] <strong>ip address 192.168.4.129 255.255.255.248</strong>            
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1] <strong>vrrp vrid 5 virtual-ip 192.168.4.131</strong>   
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1] <strong>admin-vrrp vrid 5</strong>           
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1] <strong>vrrp vrid 5 priority 120</strong> 
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1] <strong>vrrp vrid 5 preempt-mode timer delay 60 </strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1] <strong>vrrp vrid 5 track interface GigabitEthernet </strong><strong><span>0/1/0</span></strong><strong> reduced 50</strong> 
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1] <strong>vrrp vrid 5 track bfd-session session-name bfd1 link</strong>      
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-Eth-Trunk2.1] <strong>quit</strong></pre>
<p># Set a status recovery delay for a VRRP group to suppress VRRP flapping.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>vrrp recover-delay 60</strong>
[<span class="keyword">*</span>BRAS1] <strong>commit</strong></pre>
</p></li><li><span>Configure an RBS and an RBP.</span><p><p># Configure an RBS.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>remote-backup-service s1</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-srv-s1] <strong>peer 10.13.13.13 source 10.3.3.3 port 6001</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-srv-s1] <strong>track interface GigabitEthernet </strong><strong><span>0/1/0</span></strong>
[<span class="keyword">*</span>BRAS1-rm-backup-srv-s1] <strong>protect lsp-tunnel for-all-instance peer-ip 10.13.13.13</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-srv-s1] <strong>ip-pool pool_v4 metric 10</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-srv-s1] <strong>ipv6-pool pool_na metric 10</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-srv-s1] <strong>ipv6-pool pool_pd metric 10</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-srv-s1] <strong>radius-authorization source same-as nas-logic-ip</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-srv-s1] <strong>quit</strong>
[<span class="keyword">*</span>BRAS1] <strong>commit</strong></pre>
<p># Configure an RBP.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>remote-backup-profile p1</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-prf-p1] <strong>service-type bras</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-prf-p1] <strong>peer-backup hot</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-prf-p1] <strong>backup-id 5 remote-backup-service s1</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-prf-p1] <strong>vrrp-id 5 interface Eth-Trunk2.1</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-prf-p1]<strong> nas logic-port</strong> <strong>Eth-Trunk2</strong> 
[<span class="keyword">*</span>BRAS1-rm-backup-prf-p1] <strong>nas logic-ip 10.10.1.1</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-prf-p1] <strong>nas logic-sysname huawei</strong>
[<span class="keyword">*</span>BRAS1-rm-backup-prf-p1] <strong>quit</strong>
[<span class="keyword">*</span>BRAS1] <strong>commit</strong></pre>
</p></li><li><span>Configure a BAS interface.</span><p><p># Configure the Eth-Trunk interface to work in static LACP mode and set a timeout period for the interface to receive LACPDUs.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>interface Eth-Trunk2</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2]<strong> mode lacp-static</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2]<strong> lacp timeout fast</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2]<strong> </strong><strong>commit</strong></pre>
<p># Configure a BAS interface for the common Layer 2 static users.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-Eth-Trunk2]<strong> </strong><strong>interface Eth-Trunk2.10</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.10] <strong>ipv6 enable</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.10] <strong>ipv6 address auto link-local</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.10] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-Eth-Trunk2.10]<strong> user-vlan 1 10 qinq 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-Eth-Trunk2.10-user-vlan-1-10-qinq-100]<strong> </strong><strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-Eth-Trunk2.10] <strong>bas</strong>
[<strong><span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span></strong>BRAS1-Eth-Trunk2.10-bas]<strong> access-type layer2-subscriber default-domain authentication isp1</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.10-bas]<strong> </strong><strong>authentication-method bind</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.10-bas]<strong> </strong><strong>authentication-method-ipv6 bind</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.10-bas]<strong> </strong><strong>ip-trigger</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.10-bas]<strong> arp-trigger</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.10-bas] <strong>ipv6-trigger</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.10-bas]<strong> nd-trigger</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.10-bas]<strong> commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-Eth-Trunk2.10-bas]<strong> </strong><strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-Eth-Trunk2.10]<strong> </strong><strong>quit</strong></pre>
<p># Configure a BAS interface to manage the OLT that functions as a static user.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-Eth-Trunk2]<strong> </strong><strong>interface Eth-Trunk2.2</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-Eth-Trunk2.2]<strong> user-vlan 1 10</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-Eth-Trunk2.21-user-vlan-1-10]<strong> </strong><strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-Eth-Trunk2.2] <strong>bas</strong>
[<strong><span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span></strong>BRAS1-Eth-Trunk2.1-bas]<strong> access-type layer2-subscriber default-domain authentication isp1</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1-bas]<strong> </strong><strong>user-policy interface-down online</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1-bas]<strong> </strong><strong>authentication-method bind</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1-bas]<strong> </strong><strong>ip-trigger</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1-bas]<strong> arp-trigger</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.1-bas]<strong> commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-Eth-Trunk2.1-bas]<strong> </strong><strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1-Eth-Trunk2.1]<strong> </strong><strong>quit</strong></pre>
<p># Bind the RBP to the interface through which users go online.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>interface </strong><strong>Eth-Trunk2</strong>.<strong>10</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.10] <strong>remote-backup-profile p1</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.10] <strong>quit</strong>
[<span class="keyword">*</span>BRAS1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>interface </strong><strong>Eth-Trunk2</strong>.<strong>2</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.2] <strong>remote-backup-profile p1</strong>
[<span class="keyword">*</span>BRAS1-Eth-Trunk2.2] <strong>quit</strong>
[<span class="keyword">*</span>BRAS1] <strong>commit</strong></pre>
</p></li><li><span>Configure static users.</span><p><p># Configure common Layer 2 static users. The VLANs configured here must be within the VLAN range configured on the BAS interface.</p>
</p><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>static-user 172.16.1.253 172.16.1.253 gateway 172.16.1.1 </strong><strong>2001:db8:1:</strong><strong>:1 </strong><strong>2001:db8:1:</strong><strong>:1 delegation-prefix </strong><strong>2001:db8:2:</strong><strong>: </strong><strong>2001:db8:2:</strong><strong>: 60 ipv6-gateway </strong><strong>2001:db8:1:</strong><strong>:1 interface Eth-Trunk2.10 vlan 1 qinq 100 domain-name isp1 detect</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>static-user 172.16.1.252 172.16.1.252 gateway 172.16.1.1 2001:db8:1::3 2001:db8:1::3 ipv6-gateway 2001:db8:1::1 interface Eth-Trunk2.10 vlan 1 qinq 100 domain-name isp1 detect</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>static-user 172.16.1.251 172.16.1.251 gateway 172.16.1.1 interface Eth-Trunk2.10 vlan 1 qinq 100 domain-name isp1 detect</strong></pre>
<p>Configure the static user that the OLT functions as. The VLAN configured here must be within the VLAN range configured on the BAS interface.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS1] <strong>static-user 172.16.1.250 172.16.1.250 gateway 172.16.1.1 interface Eth-Trunk2.2 vlan 1 domain-name isp1 detect</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001203123102__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li>BRAS1 configuration file</li></ul>
<pre class="screen">#
sysname BRAS1
#
vrrp recover-delay 60
#
ip pool pool_v4 bas local                                                       
 gateway 172.16.0.1 255.255.255.0                                               
 section 0 172.16.0.2 172.16.0.255                                              
 excluded-ip-address 172.16.0.2 172.16.0.255                                      
#                                                                               
ipv6 prefix pre_na local                                                   
 prefix 2001:DB8:1::/48                                                         
 lock                                                             
#                                                                               
ipv6 pool pool_na bas local                                         
 prefix pre_na                                                                  
#                                                                               
ipv6 prefix pre_pd delegation                                                   
 prefix 2001:DB8:2::/48 delegating-prefix-length 60
 lock                                                               
#                                                                               
ipv6 pool pool_pd bas delegation                                         
 prefix pre_pd
#                                                                               
bfd
#
bfd bfd1 bind peer-ip 192.168.4.130
 discriminator local 1 
 discriminator remote 1
#
mpls lsr-id 10.3.3.3
#
mpls
#
mpls ldp
#
dhcpv6 duid 0001000124fbc193dc99141ea1e9
#
radius-server group rd                                                       
 radius-server authentication 10.7.66.66 1812 weight 0                                             
 radius-server accounting 10.7.66.66 1813 weight 0                                                        
 radius-server shared-key-cipher %^%#h{FXVBLZX9#`VI]EWUUaOSHGd5E!.1DGeVYEie=%^%                                       
 radius-server retransmit 2                                                    
# 
aaa
 #
 authentication-scheme auth1
  authentication-mode radius
 #
 accounting-scheme acct1
  accounting-mode none
<em> </em>#                                                                              
 domain isp1                                                                  
  authentication-scheme auth1                                                 
  accounting-scheme acct1
  radius-server group rd
  ip-pool pool_v4                                                               
  ipv6-pool pool_na                                                             
  ipv6-pool pool_pd                                           
#                                                                               
interface Eth-Trunk2
 mode lacp-static                                                               
 lacp timeout fast                                                              
#
interface  Eth-Trunk2.1
 vlan-type dot1q 96
 ip address 192.168.4.129 255.255.255.248
 vrrp vrid 5 virtual-ip 192.168.4.131
 admin-vrrp vrid 5
 vrrp vrid 5 priority 120
 vrrp vrid 5 preempt-mode timer delay 60
 vrrp vrid 5 track interface GigabitEthernet<span>0/1/0</span> reduced 50
 vrrp vrid 5 track bfd-session session-name bfd1 link
#
interface Eth-Trunk2.10                                                         
 ipv6 enable                                                                    
 ipv6 address auto link-local
 user-vlan 1 10 qinq 100
 remote-backup-profile p1                                             
 bas                                                                            
 #                                                                              
  access-type layer2-subscriber default-domain authentication isp1            
  authentication-method bind
  authentication-method-ipv6 bind
  ip-trigger
  arp-trigger
  ipv6-trigger
  nd-trigger 
 #                                                                              
#
interface Eth-Trunk2.2                                                         
 user-vlan 1 10
 remote-backup-profile p1                                             
 bas                                                                            
 #                                                                              
  access-type layer2-subscriber default-domain authentication isp1
  user-policy interface-down online            
  authentication-method bind
  ip-trigger
  arp-trigger
 #                                                                              
#   
interface GigabitEthernet<span>0/1/0</span>                                                  
 undo shutdown                                                                  
 ipv6 enable                                                                    
 ip address 10.2.1.1 255.255.255.0                                              
 ipv6 address 2001:DB8:8::7/128                                                 
 ipv6 address auto link-local
 mpls
 mpls ldp
#
interface LoopBack2
 ip address 10.3.3.3 255.255.255.0
#
peer-backup route-cost auto-advertising
#
remote-backup-service s1
 peer 10.13.13.13 source 10.3.3.3 port 6001
 track interface GigabitEthernet<span>0/1/0</span>
 protect lsp-tunnel for-all-instance peer-ip 10.13.13.13
 ip-pool pool_v4 metric 10
 ipv6-pool pool_na metric 10
 ipv6-pool pool_pd metric 10
 radius-authorization source same-as nas-logic-ip
#
remote-backup-profile p1
 service-type bras
 backup-id 5 remote-backup-service s1
 peer-backup hot
 vrrp-id 5 interface Eth-Trunk2.1
 nas logic-port Eth-Trunk2 
 nas logic-ip 10.10.1.1
 nas logic-sysname huawei
#
static-user 172.16.1.253 172.16.1.253 gateway 172.16.1.1 2001:db8:1::1 2001:db8:1::1 delegation-prefix 2001:db8:2:: 2001:db8:2:: 60 ipv6-gateway 2001:db8:1::1 interface Eth-Trunk2.10 vlan 1 qinq 100 domain-name isp1 detect
static-user 172.16.1.252 172.16.1.252 gateway 172.16.1.1 2001:db8:1::3 2001:db8:1::3 ipv6-gateway 2001:db8:1::1 interface Eth-Trunk2.10 vlan 1 qinq 100 domain-name isp1 detect
static-user 172.16.1.251 172.16.1.251 gateway 172.16.1.1 interface Eth-Trunk2.10 vlan 1 qinq 100 domain-name isp1 detect
static-user 172.16.1.250 172.16.1.250 gateway 172.16.1.1 interface Eth-Trunk2.2 vlan 1 domain-name isp1 detect
#
ospf 1
 default cost inherit-metric
 import-route unr
 opaque-capability enable
 area 0.0.0.0
  network 10.2.1.0 0.0.0.255
  network 10.3.3.3 0.0.0.0
#
return</pre>
<ul><li>BRAS2 configuration file</li></ul>
<pre class="screen">#
sysname BRAS2
#
vrrp recover-delay 60
#
ip pool pool_v4 bas local                                                       
 gateway 172.16.0.1 255.255.255.0                                               
 section 0 172.16.0.2 172.16.0.255                                             
 excluded-ip-address 172.16.0.2 172.16.0.255                                      
#                                                                               
ipv6 prefix pre_na local                                                   
 prefix 2001:DB8:1::/48                                                         
 lock                                                             
#                                                                               
ipv6 pool pool_na bas local                                         
 prefix pre_na                                                                  
#                                                                               
ipv6 prefix pre_pd delegation                                                   
 prefix 2001:DB8:2::/48 delegating-prefix-length 60
 lock                                                               
#                                                                               
ipv6 pool pool_pd bas delegation                                         
 prefix pre_pd
#                                                                               
bfd
#
bfd bfd1 bind peer-ip 192.168.4.130
 discriminator local 1 
 discriminator remote 1
#
mpls lsr-id 10.13.13.13
#
mpls
#
mpls ldp
#
dhcpv6 duid 0001000124fbc193dc99141ea1e9
#
radius-server group rd                                                       
 radius-server authentication 10.7.66.66 1812 weight 0                                             
 radius-server accounting 10.7.66.66 1813 weight 0                                                        
 radius-server shared-key-cipher %^%#h{FXVBLZX9#`VI]EWUUaOSHGd5E!.1DGeVYEie=%^%                                       
 radius-server retransmit 2                                                    
# 
aaa
 #
 authentication-scheme auth1
  authentication-mode radius
 #
 accounting-scheme acct1
  accounting-mode none
<em> </em>#                                                                              
 domain isp1                                                                  
  authentication-scheme auth1                                                 
  accounting-scheme acct1
  radius-server group rd
  ip-pool pool_v4                                                               
  ipv6-pool pool_na                                                             
  ipv6-pool pool_pd                                           
#                                                                               
interface Eth-Trunk2
 mode lacp-static                                                               
 lacp timeout fast                                                              
#
interface  Eth-Trunk2.1
 vlan-type dot1q 96
 ip address 192.168.4.129 255.255.255.248
 vrrp vrid 5 virtual-ip 192.168.4.131
 admin-vrrp vrid 5
 vrrp vrid 5 priority 120
 vrrp vrid 5 track bfd-session session-name bfd1 peer
#
interface Eth-Trunk2.10                                                         
 ipv6 enable                                                                    
 ipv6 address auto link-local
 user-vlan 1 10 qinq 100
 remote-backup-profile p1                                             
 bas                                                                            
 #                                                                              
  access-type layer2-subscriber default-domain authentication isp1            
  authentication-method bind
  authentication-method-ipv6 bind
  ip-trigger
  arp-trigger
  ipv6-trigger
  nd-trigger 
 #                                                                              
#
interface Eth-Trunk2.2                                                         
 user-vlan 1 10
 remote-backup-profile p1                                             
 bas                                                                            
 #                                                                              
  access-type layer2-subscriber default-domain authentication isp1
  user-policy interface-down online            
  authentication-method bind
  ip-trigger
  arp-trigger
 #                                                                              
#   
interface GigabitEthernet<span>0/1/0</span>                                                  
 undo shutdown                                                                  
 ipv6 enable                                                                    
 ip address 10.4.1.1 255.255.255.0                                              
 ipv6 address 2001:DB8:9::7/128                                                 
 ipv6 address auto link-local
 mpls
 mpls ldp
#
interface LoopBack2
 ip address 10.13.13.13 255.255.255.0
#
peer-backup route-cost auto-advertising
#
remote-backup-service s1
 peer 10.3.3.3 source 10.13.13.13 port 6001
 track interface GigabitEthernet<span>0/1/0</span>
 protect lsp-tunnel for-all-instance peer-ip 10.3.3.3
 ip-pool pool_v4 metric 20
 ipv6-pool pool_na metric 20
 ipv6-pool pool_pd metric 20
 radius-authorization source same-as nas-logic-ip
#
remote-backup-profile p1
 service-type bras
 backup-id 5 remote-backup-service s1
 peer-backup hot
 vrrp-id 5 interface Eth-Trunk2.1
 nas logic-port Eth-Trunk2 
 nas logic-ip 10.10.1.1
 nas logic-sysname huawei
#
static-user 172.16.1.253 172.16.1.253 gateway 172.16.1.1 2001:db8:1::1 2001:db8:1::1 delegation-prefix 2001:db8:2:: 2001:db8:2:: 60 ipv6-gateway 2001:db8:1::1 interface Eth-Trunk2.10 vlan 1 qinq 100 domain-name isp1 detect
static-user 172.16.1.252 172.16.1.252 gateway 172.16.1.1 2001:db8:1::3 2001:db8:1::3 ipv6-gateway 2001:db8:1::1 interface Eth-Trunk2.10 vlan 1 qinq 100 domain-name isp1 detect
static-user 172.16.1.251 172.16.1.251 gateway 172.16.1.1 interface Eth-Trunk2.10 vlan 1 qinq 100 domain-name isp1 detect
static-user 172.16.1.250 172.16.1.250 gateway 172.16.1.1 interface Eth-Trunk2.2 vlan 1 domain-name isp1 detect
#
ospf 1
 default cost inherit-metric
 import-route unr
 opaque-capability enable
 area 0.0.0.0
  network 10.4.1.0 0.0.0.255
  network 10.13.13.13 0.0.0.0
#
return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_0050.html">Configuration Examples
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_1002.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_00631.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>