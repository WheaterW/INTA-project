
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring User Access in L2TP over GRE Scenarios">
<meta name="abstract" content="This section provides an example for configuring user access in L2TP over GRE scenarios. A networking diagram is provided to help you understand the configuration procedure. The example provides the networking requirements, configuration roadmap, configuration procedure, and configuration files.">
<meta name="description" content="This section provides an example for configuring user access in L2TP over GRE scenarios. A networking diagram is provided to help you understand the configuration procedure. The example provides the networking requirements, configuration roadmap, configuration procedure, and configuration files.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_l2tp_cfg_013506.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_l2tp_cfg_014414.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_l2tp_cfg_014416.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,z00603461,w00800033,z00588052,c00549182,l2tp_ne,w00556928,l00593348,w00606909,w00447999,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="L2TP">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="L2TP">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="L2TP">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="L2TP">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="l00593348">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374300">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/thickbox.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/imageResize.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-migrate-1.2.1.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-ui.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.mousewheel.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/thickbox.js"></script>
<title>Example for Configuring User Access in L2TP over GRE Scenarios</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172374300"></a><a name="EN-US_TASK_0172374300"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring User Access in L2TP over GRE Scenarios</h1>
<div class="taskbody"><p>This section provides an example for configuring user access in L2TP over GRE scenarios. A networking diagram is provided to help you understand the configuration procedure. The example provides the networking requirements, configuration roadmap, configuration procedure, and configuration files.</p>
<div class="context"><a name="EN-US_TASK_0172374300__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172374300__fig_dc_ne_l2tp_cfg_01441501">Figure 1</a>, PC1 is connected to a PSTN through a modem and then connected to the LAC (<span class="keyword">Device</span>A). The LAC and LNS reside on a WAN and communicate with each other through an L2TP tunnel which runs over a GRE tunnel.</p>
<div class="fignone" id="EN-US_TASK_0172374300__fig_dc_ne_l2tp_cfg_01441501"><a name="EN-US_TASK_0172374300__fig_dc_ne_l2tp_cfg_01441501"></a><a name="fig_dc_ne_l2tp_cfg_01441501"></a><span class="figcap"><b>Figure 1 </b>Configuring user access in L2TP over GRE scenarios</span><br><span><img class="imgResize" src="images/fig_dc_ne_l2tp_cfg_01441501.png" width="438.90000000000003" height="NaN" title="Click to enlarge"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172374300__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The headquarters network uses private addresses, and users cannot directly access the internal server over the Internet. Therefore, a VPN must be established to allow user access to the internal network. The configuration roadmap is as follows:</p>
<ol><li><p>Configure a dial-up connection on the user side.</p>
</li><li><p>Configure the LAC.</p>
<ul><li>Configure an interface address for the LAC.</li><li>Configure the PPPoE access service, including configuring a VT and AAA schemes, binding the VT to a sub-interface, and configuring a BAS interface.</li><li>Enable L2TP.</li><li>Configure an L2TP tunnel connection.</li><li>Configure a tunnel authentication mode.</li><li>Configure L2TP attributes.</li><li>Configure OSPF.</li><li>Configure loopback interfaces.</li><li>Configure a GRE tunnel interface.</li></ul>
</li><li><p>Configure the LNS.</p>
<ul><li>Configure an interface address for the LNS.</li><li>Configure a VT.</li><li>Configure an L2TP tunnel connection on the LNS.</li><li>Configure a tunnel authentication mode and user authentication mode.</li><li>Configure LNS-side tunnel parameters.</li><li>Configure an address pool for IP address assignment to L2TP users.</li><li>Configure an L2TP user domain and specify address pools in the domain.</li><li>Configure OSPF.</li><li>Configure loopback interfaces.</li><li>Configure a GRE tunnel interface.</li></ul>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172374300__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Identical domain names, usernames, and passwords on the LAC and LNS</p>
</li><li><p>Protocol, tunnel authentication mode (CHAP is used in this example), and tunnel password used by the LNS; local name and remote name of the LNS</p>
</li><li><p>VT number</p>
</li><li><p>L2TP group ID</p>
</li><li><p>IDs, address ranges, and address masks of remote address pools</p>
</li><li><p>Loopback addresses</p>
</li><li>Users authentication mode (local authentication)</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172374300__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Perform configuration on the user side.</span><p><p># Establish a dial-up connection for the user to receive an IP address assigned by the LNS. In the dial-up terminal window that is displayed, enter the username <strong>vpdnuser@huawei.com</strong> and password <strong>YsHsjx_202206</strong>. (The username and password have been registered on the LNS.)</p>
</p></li><li><span>Configure <span class="keyword">Device</span>A that functions as the LAC.</span><p><p># Assign an IP address to GE <span>0/1/0</span>.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, the IP addresses of interface 1 (GE <span>0/1/0</span>) on the LAC and interface 2 (GE <span>0/1/0</span>) on the LNS are 10.38.160.1 and 10.38.160.2, respectively.</p>
</div></div>
<pre class="screen">&lt;<span class="keyword">Device</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword">Device</span>] <strong>sysname <span class="keyword">Device</span>A</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Gigabitethernet<span>0/1/0</span>]<strong> <strong>ip address 10.38.160.1 255.255.255.0</strong></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Gigabitethernet<span>0/1/0</span>]<strong> ospf enable 4 area 0.0.0.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Gigabitethernet<span>0/1/0</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-Gigabitethernet<span>0/1/0</span>]<strong> quit</strong></pre>
<p># Configure OSPF.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> ospf 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-4]<strong> area 0.0.0.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-4-area-0.0.0.1]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ospf-4-area-0.0.0.1]<strong> quit</strong></pre>
<p># Configure loopback1 and bind it to a GRE tunnel interface.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface LoopBack1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-LoopBack1] <strong>ip address 10.1.2.1 255.255.255.255</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-LoopBack1] <strong>ospf enable 4 area 0.0.0.1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-LoopBack1] <strong>binding tunnel gre</strong></pre>
<p># Configure loopback2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface LoopBack2</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-LoopBack2] <strong>ip address 10.1.1.1 255.255.255.255</strong></pre>
<p># Configure a GRE tunnel interface.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> interface Tunnel1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Tunnel]<strong> ip address 10.1.1.2 255.255.255.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Tunnel]<strong> tunnel-protocol gre</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Tunnel]<strong> source LoopBack1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Tunnel]<strong> destination 10.10.10.10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Tunnel]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-Tunnel]<strong> quit</strong></pre>
<div class="p"># Configure a static route.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> ip route-static 10.5.1.1 255.255.255.255 Tunnel1</strong></pre>
</div>
<p># Enable L2TP and configure an L2TP tunnel connection on the LAC.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>l2tp enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>l2tp-group 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-l2tp-1] <strong>tunnel name LAC</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-l2tp-1] <strong>tunnel source LoopBack1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-l2tp-1] <strong>tunnel authentication</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-l2tp-1] <strong>commit</strong></pre>
<p># Configure a tunnel authentication mode.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-l2tp-1] <strong>start l2tp ip 10.5.1.1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-l2tp-1] <strong>tunnel password cipher YsHsjx_202206</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-l2tp-1] <strong>quit</strong></pre>
<p># Configure a user access domain.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> aaa</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa]<strong> authentication-scheme auth1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-authen-auth1]<strong> authentication-mode local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-authen-auth1]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-authen-auth1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>accounting-scheme default0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-accounting-default0] <strong>accounting-mode none</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-accounting-default0] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-accounting-default0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa]<strong> domain huawei.com</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-huawei.com]<strong> authentication-scheme auth1 </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-huawei.com]<strong> accounting-scheme default0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-huawei.com]<strong> </strong><strong>commit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-huawei.com] <strong>idle-cut 60 500</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-huawei.com]<strong> l2tp-group 1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-huawei.com]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa]<strong> quit</strong></pre>
</p><p><p># Set a username and password, which must be the same as those on the LNS.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> local-aaa-server</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-local-aaa-server]<strong> user vpdnuser@huawei.com password cipher YsHsjx_202206 authentication-type p</strong></pre>
<p># Configure the PPPoE access service.</p>
<ol type="a"><li>Configure a VT.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> interface virtual-template 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Virtual-Template1]<strong> ppp authentication-mode chap</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Virtual-Template1]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-Virtual-Template1]<strong> quit</strong></pre>
</li><li>Bind VT1 to GE<span>0/2/0</span>.100.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> interface gigabitethernet </strong><strong><span>0/2/0</span></strong><strong>.100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>.100]<strong> pppoe-server bind virtual-template 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>.100]<strong> </strong><strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>.100]<strong> user-vlan 1 100</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>.100-vlan-1-100]<strong> quit</strong></pre>
</li><li>Configure a BAS interface.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>.100]<strong> bas</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>.100-bas]<strong> access-type layer2-subscriber default-domain authentication huawei.com</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>.100-bas] <strong>authentication-method ppp</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>.100-bas]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>.100-bas]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>.100]<strong> quit</strong></pre>
</li></ol>
</p></li><li><span>Configure <span class="keyword">Device</span>B that functions as the LNS.</span><p><p># Assign an IP address to the interface connecting the LNS to the tunnel.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">Device</span>]<strong> sysname <span class="keyword">Device</span>B</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B]<strong> interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Gigabitethernet<span>0/1/0</span>]<strong> ip address 10.38.160.2 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Gigabitethernet<span>0/1/0</span>]<strong> ospf enable 4 area 0.0.0.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Gigabitethernet<span>0/1/0</span>]<strong> </strong><strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-Gigabitethernet<span>0/1/0</span>]<strong> ipv6 address auto link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Gigabitethernet<span>0/1/0</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-Gigabitethernet<span>0/1/0</span>]<strong> quit</strong></pre>
<p># Configure a VT and specify the tunnel authentication mode.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>interface virtual-template 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Virtual-Template1] <strong>ppp authentication-mode chap</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Virtual-Template1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-Virtual-Template1] <strong>quit</strong></pre>
<p># Enable L2TP.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>l2tp enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>l2tp-group 1</strong></pre>
<p># Set the LNS-side and LAC-side tunnel names.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-l2tp-1] <strong>tunnel name LNS</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-l2tp-1] <strong>allow l2tp virtual-template 1 remote LAC</strong></pre>
<p># Enable tunnel authentication and configure a tunnel authentication password.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-l2tp-1] <strong>tunnel authentication</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-l2tp-1] <strong>tunnel password cipher YsHsjx_202206</strong></pre>
<p># Configure the LNS to perform mandatory CHAP authentication.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-l2tp-1] <strong>mandatory-chap</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-l2tp-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-l2tp-1] <strong>quit</strong></pre>
<p># Configure OSPF.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ospf 4</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ospf-4] <strong>default-route-advertise</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ospf-4] <strong>area 0.0.0.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospf-4-area-0.0.0.1]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ospf-4-area-0.0.0.1]<strong> quit</strong></pre>
<p># Configure loopback1 and loopback2, and bind loopback1 to a GRE tunnel interface.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>interface LoopBack1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-LoopBack1] <strong>ip address 10.10.10.10 255.255.255.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-LoopBack1] <strong>ospf enable 4 area 0.0.0.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-LoopBack1] <strong>binding tunnel gre</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-LoopBack1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>interface LoopBack2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-LoopBack2] <strong>ip address 10.5.1.1 255.255.255.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-LoopBack2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>interface Tunnel1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Tunnel] <strong>ip address 192.168.1.1 255.255.255.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Tunnel] <strong>tunnel-protocol gre</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Tunnel] <strong>source LoopBack1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Tunnel] <strong>destination 10.1.2.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-Tunnel] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-Tunnel] <strong>quit</strong></pre>
<p># Configure a static route.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ip route-static 10.1.1.1 255.255.255.255 Tunnel1</strong></pre>
<p># Create an LNS group named <strong>group1</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>lns-group group1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-lns-group-group1] <strong>bind slot <span>1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-lns-group-group1] <strong>bind source Loopback2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-lns-group-group1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-lns-group-group1] <strong>quit</strong></pre>
<p># Set a username and password, which must be the same as those on the LAC.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>local-aaa-server</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-local-aaa-server] <strong>user vpdnuser@huawei.com password cipher YsHsjx_202206 authentication-type p</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-local-aaa-server] <strong>quit</strong></pre>
<p># Configure address pools.</p>
<ol type="a"><li>Configure an IPv6 delegation prefix pool named <strong>pre1</strong> for ND users.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ipv6 prefix pre1 delegation</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ipv6-prefix-pre1] <strong>prefix 2001:db8:2001::2421/48</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ipv6-prefix-pre1] <strong>slaac-unshare-only </strong> </pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ipv6-prefix-pre1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ipv6-prefix-pre1] <strong>quit</strong></pre>
</li><li>Configure an IPv6 delegation prefix pool named <strong>pre2</strong> for PD users.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ipv6 prefix pre2 delegation</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ipv6-prefix-pre2] <strong>prefix 2001:db8:2001::/44</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ipv6-prefix-pre2] <strong>pd-unshare-only </strong> </pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ipv6-prefix-pre2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ipv6-prefix-pre2] <strong>quit</strong></pre>
</li><li>Configure an IPv6 delegation address pool named <strong>pool1</strong> and bind it to the IPv6 delegation prefix pool <strong>pre1</strong>.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ipv6 pool pool1 bas delegation</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ipv6-pool-pool1] <strong>prefix pre1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ipv6-pool-pool1] <strong>dns-server 2001:db8:2400::1 2001:db8:2400::2</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ipv6-pool-pool1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ipv6-pool-pool1] <strong>quit</strong></pre>
</li><li>Configure an IPv6 delegation address pool named <strong>pool2</strong> and bind it to the IPv6 delegation prefix pool <strong>pre2</strong>.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ipv6 pool pool2 bas delegation</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ipv6-pool-pool2] <strong>prefix pre2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ipv6-pool-pool2] <strong>dns-server 2001:db8:2400::1 2001:db8:2400::2</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ipv6-pool-pool2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ipv6-pool-pool2] <strong>quit</strong></pre>
</li><li>Configure a local IPv4 address pool named <strong>pppoe-pool</strong>.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ip pool pppoe-pool bas local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ip-pool-pppoe-pool] <strong>gateway 10.179.180.1 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ip-pool-pppoe-pool] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ip-pool-pppoe-pool] <strong>section 0 10.179.180.2 10.179.180.254</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ip-pool-pppoe-pool] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-ip-pool-pppoe-pool] <strong>quit</strong></pre>
</li></ol>
<p># Configure a user access domain.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>aaa</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-aaa] <strong>authentication-scheme auth1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-aaa-authen-auth1] <strong>authentication-mode local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-aaa-authen-auth1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-aaa-authen-auth1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-aaa] <strong>accounting-scheme default0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-aaa-accounting-default0] <strong>accounting-mode none</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-aaa-accounting-default0] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-aaa-accounting-default0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-aaa] <strong><strong>domain huawei.com</strong></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-aaa-domain-huawei.com] <strong><strong>authentication-scheme auth1</strong></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-aaa-domain-huawei.com] <strong>accounting-scheme default0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-aaa-domain-huawei.com] <strong>ip-pool pppoe-pool</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-aaa-domain-huawei.com] <strong>ipv6-pool pool1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-aaa-domain-huawei.com] <strong>ipv6-pool pool2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-aaa-domain-huawei.com] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-aaa-domain-huawei.com] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-aaa] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># After completing the configurations, have the user go online. Then, run the <strong>display l2tp tunnel</strong> command on both the LAC and LNS to check whether an L2TP tunnel is set up successfully. The following example uses the command output on the LNS.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>] display l2tp tunnel</pre>
<pre class="screen">---------------------------------------------------------</pre>
<pre class="screen">-----------tunnel information in LAC---------------------  </pre>
<pre class="screen"> Total 0,0 printed  </pre>
<pre class="screen">---------------------------------------------------------       </pre>
<pre class="screen">-----------tunnel information in LNS---------------------       </pre>
<pre class="screen">The tunnel information of k board 1</pre>
<pre class="screen"> LocalTID RemoteTID RemoteAddress    Port   Sessions RemoteName   </pre>
<pre class="screen">---------------------------------------------------------    </pre>
<pre class="screen"> 13921    7958      10.38.160.1    57344     1       LAC      </pre>
<pre class="screen">---------------------------------------------------------     </pre>
<pre class="screen">Total 1,1 printed from slot <span>1</span> </pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172374300__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen"> l2tp enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface Virtual-Template1</pre>
<pre class="screen">ppp authentication-mode chap</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown </pre>
<pre class="screen"> ip address 10.38.160.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span>.100</pre>
<pre class="screen"> pppoe-server bind Virtual-Template 1 </pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> user-vlan 1 100</pre>
<pre class="screen"> bas</pre>
<pre class="screen">  access-type layer2-subscriber default-domain authentication huawei.com</pre>
<pre class="screen">  authentication-method ppp</pre>
<pre class="screen">#</pre>
<pre class="screen">interface gigabitethernet<span>0/1/0</span></pre>
<pre class="screen">undo shutdown</pre>
<pre class="screen"> ip address 192.168.10.1 255.255.255.255</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 4</pre>
<pre class="screen"> area 0.0.0.1</pre>
<pre class="screen">#</pre>
<pre class="screen">interface LoopBack1</pre>
<pre class="screen"> ip address 10.1.2.1 255.255.255.255</pre>
<pre class="screen"> ospf enable 4 area 0.0.0.1</pre>
<pre class="screen"> binding tunnel gre</pre>
<pre class="screen">#</pre>
<pre class="screen">interface LoopBack2</pre>
<pre class="screen"> ip address 10.1.1.1 255.255.255.255 </pre>
<pre class="screen">interface Tunnel1</pre>
<pre class="screen"> ip address 10.1.1.2 255.255.255.255</pre>
<pre class="screen"> tunnel-protocol gre</pre>
<pre class="screen"> source LoopBack1</pre>
<pre class="screen"> destination 10.10.10.10</pre>
<pre class="screen">#</pre>
<pre class="screen">ip route-static 10.5.1.1 255.255.255.255 Tunnel1</pre>
<pre class="screen">#</pre>
<pre class="screen">l2tp-group 1</pre>
<pre class="screen"> tunnel password cipher %@%##!!!!!!!!!"!!!!"!!!!(!!!!1];16qfZ81fv"uMoKKZ.1k"`AO!X2K2N.b<font style="font-size:8pt" Face="Courier New" >~</font>'NB^V!!!!!!!!!!1!!!!o/4J(q"J1F.!K9%M!6x8%@%#</pre>
<pre class="screen"> tunnel name LAC</pre>
<pre class="screen"> start l2tp ip 10.5.1.1</pre>
<pre class="screen"> tunnel source LoopBack2</pre>
<pre class="screen">#</pre>
<pre class="screen">local-aaa-server</pre>
<pre class="screen">user vpdnuser@huawei.com password cipher 
%@%##!!!!!!!!!"!!!!"!!!!(!!!!1];16qfZ81wtNj:ej5XU&gt;Jf_&lt;1a"!)dspWPNxp5I!!!!!!!!!!1!!!!*M%{F9=pQ/,YelLM6Ad;%@%# authentication-type p</pre>
<pre class="screen">#</pre>
<pre class="screen">aaa</pre>
<pre class="screen"> authentication-scheme auth1</pre>
<pre class="screen">  authentication-mode local</pre>
<pre class="screen"> accounting-scheme default0</pre>
<pre class="screen">   accounting-mode none</pre>
<pre class="screen"> domain huawei.com</pre>
<pre class="screen">  authentication-scheme auth1</pre>
<pre class="screen">  accounting-scheme default0</pre>
<pre class="screen">  idle-cut 60 500</pre>
<pre class="screen">l2tp-group 1</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
<p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">l2tp enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface gigabitethernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ip address 10.38.160.2 255.255.255.0</pre>
<pre class="screen"> ipv6 address auto link-local</pre>
<pre class="screen"> ospf enable 4 area 0.0.0.1</pre>
<pre class="screen"> undo dcn</pre>
<pre class="screen">#</pre>
<pre class="screen">interface Virtual-Template1</pre>
<pre class="screen"> ppp authentication-mode chap</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 4</pre>
<pre class="screen"> default-route-advertise</pre>
<pre class="screen"> area 0.0.0.1</pre>
<pre class="screen">#</pre>
<pre class="screen">interface LoopBack1</pre>
<pre class="screen"> ip address 10.10.10.10 255.255.255.255</pre>
<pre class="screen"> ospf enable 4 area 0.0.0.1</pre>
<pre class="screen"> binding tunnel gre</pre>
<pre class="screen">#</pre>
<pre class="screen">interface LoopBack2</pre>
<pre class="screen"> ip address 10.5.1.1 255.255.255.255</pre>
<pre class="screen">#</pre>
<pre class="screen">interface Tunnel1</pre>
<pre class="screen"> ip address 192.168.1.1 255.255.255.255</pre>
<pre class="screen"> tunnel-protocol gre</pre>
<pre class="screen"> source LoopBack1</pre>
<pre class="screen"> destination 10.1.2.1</pre>
<pre class="screen">#</pre>
<pre class="screen">ip route-static 10.1.1.1 255.255.255.255 Tunnel1</pre>
<pre class="screen">#</pre>
<pre class="screen">l2tp-group 1</pre>
<pre class="screen">mandatory-chap</pre>
<pre class="screen">allow l2tp virtual-template 1 remote LAC</pre>
<pre class="screen">tunnel password cipher %@%##!!!!!!!!!"!!!!"!!!!(!!!!1];16qfZ81fv"uMoKKZ.1k"`AO!X2K2N.b<font style="font-size:8pt" Face="Courier New" >~</font>'NB^V!!!!!!!!!!1!!!!o/4J(q"J1F.!K9%M!6x8%@%#</pre>
<pre class="screen">tunnel name LNS</pre>
<pre class="screen">#</pre>
<pre class="screen">lns-group group1</pre>
<pre class="screen">bind slot <span>1</span></pre>
<pre class="screen">bind source LoopBack2</pre>
<pre class="screen">#</pre>
<pre class="screen">ipv6 prefix pre2 delegation</pre>
<pre class="screen"> prefix 2001:db8:2001::/44  </pre>
<pre class="screen"> pd-unshare-only </pre>
<pre class="screen">#</pre>
<pre class="screen">ipv6 prefix pre1 delegation</pre>
<pre class="screen">  prefix 2001:db8:2001::2421/48</pre>
<pre class="screen">  slaac-unshare-only</pre>
<pre class="screen">#</pre>
<pre class="screen">ip pool pppoe-pool bas local</pre>
<pre class="screen"> gateway 10.179.180.1 255.255.255.0</pre>
<pre class="screen"> section 0 10.179.180.2 10.179.180.254</pre>
<pre class="screen">#</pre>
<pre class="screen">ipv6 pool pool1 bas delegation</pre>
<pre class="screen"> dns-server 2001:db8:2400::1 2001:db8:2400::2</pre>
<pre class="screen"> prefix pre1</pre>
<pre class="screen">#</pre>
<pre class="screen">ipv6 pool pool2 bas delegation</pre>
<pre class="screen"> dns-server 2001:db8:2400::1 2001:db8:2400::2</pre>
<pre class="screen"> prefix pre2</pre>
<pre class="screen">#</pre>
<pre class="screen">local-aaa-server</pre>
<pre class="screen"> user vpdnuser@huawei.com password cipher %@%##!!!!!!!!!"!!!!#!!!!(!!!!JMi&amp;5#;qTW7C9)&amp;16<font style="font-size:8pt" Face="Courier New" >~</font>.M{sv*SzKjgN&gt;0b[,G:tb%!!!!!!!!!!1!!!!E'QA&gt;XV7kJ+tIm3UL=c=%@%# authentication-type p</pre>
<pre class="screen">#</pre>
<pre class="screen">aaa</pre>
<pre class="screen"> authentication-scheme auth1</pre>
<pre class="screen">   authentication-mode local</pre>
<pre class="screen">  domain huawei.com</pre>
<pre class="screen">   authentication-scheme auth1</pre>
<pre class="screen">   accounting-scheme default0</pre>
<pre class="screen">   ip-pool pppoe-pool</pre>
<pre class="screen">   ipv6-pool pool1</pre>
<pre class="screen">   ipv6-pool pool2</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_l2tp_cfg_013506.html">Configuration Examples for L2TP Access
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_l2tp_cfg_014414.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_l2tp_cfg_014416.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>

<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>