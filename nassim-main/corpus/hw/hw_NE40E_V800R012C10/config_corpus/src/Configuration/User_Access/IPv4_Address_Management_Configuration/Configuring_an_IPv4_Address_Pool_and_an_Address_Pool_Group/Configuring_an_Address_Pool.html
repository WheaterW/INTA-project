
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an Address Pool">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0048.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_00501.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,z00603461,w00800033,z00588052,c00549182,w00556928,l00593348,ipv4-address_ne,w00606909,w00447999,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="l00593348">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373770">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an Address Pool</title>
</head>
<body><a name="EN-US_TASK_0172373770"></a><a name="EN-US_TASK_0172373770"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an Address Pool</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0172373770__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Configuring the type, name, gateway, and address segment of an address pool is mandatory. <span>Configure either a dynamic or a non-dynamic address pool.</span></p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373770__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=access+wait-request-time"><b><span class="cmdname">access wait-request-time</span></b></a> <strong><span>dhcpv4</span></strong> <i><span class="varname">time-value</span></i></span><p><p>The timeout period for a router to wait for a Request message from a client in response to an Offer message sent to the client is configured.</p>
</p></li><li><span>Perform the corresponding steps according to the type of the address pool to be configured.</span><p><ul><li>Configure a dynamic address pool.<ol type="a"><li>Run<a href="cmdqueryname=ip+pool"><b><span class="cmdname"> ip pool</span></b></a> <i><span class="varname">pool-name</span></i> <strong><span>bas</span></strong> <strong><span>dynamic</span></strong><p>A dynamic address pool is created, and the corresponding address pool view is displayed.</p>
</li><li>Run <a href="cmdqueryname=radius-server+group"><b><span class="cmdname">radius-server group</span></b></a> <i><span class="varname">group-name</span></i><p>A RADIUS server group is configured for the address pool.</p>
</li><li>Run <a href="cmdqueryname=authentication-name"><b><span class="cmdname">authentication-name</span></b></a> <i><span class="varname">authentication-name</span></i> <strong><span>password</span></strong> <strong><span>cipher</span></strong> <i><span class="varname">password</span></i><p>An authentication name and a password are configured for the device to apply for dynamic address segments.</p>
</li><li>(Optional) Run <a href="cmdqueryname=ip+used-threshold"><b><span class="cmdname">ip used-threshold</span></b></a> <strong><span>upper-limit</span></strong> <i><span class="varname">upper-value</span></i> <strong><span>lower-limit</span></strong> <i><span class="varname">lower-value</span></i><p>The upper and lower address usage thresholds are configured for the dynamic address pool. The lower threshold for address segment release must be smaller than the upper threshold for address segment application.</p>
<p>The BRAS checks the dynamic address pool usage every 10 minutes. If the BRAS detects that the dynamic address pool usage reaches the upper threshold, it applies to the RADIUS server for new address segments. If the BRAS detects that the dynamic address pool usage falls below the lower threshold, it applies to the RADIUS server for address segment release.</p>
</li><li>(Optional) Run <a href="cmdqueryname=detect"><b><span class="cmdname">detect</span></b></a> <strong><span>retransmit</span></strong> <i><span class="varname">retransmit-value</span></i> <strong><span>interval</span></strong> <i><span class="varname">days</span></i> <i><span class="varname">hours</span></i> <i><span class="varname">minutes</span></i><p>The interval and time for detecting the RADIUS server is configured for a dynamic address pool.</p>
</li></ol>
</li><li>Configure a non-dynamic address pool.<ol type="a"><li>Run <a href="cmdqueryname=ip+pool"><b><span class="cmdname">ip pool</span></b></a> <i><span class="varname">pool-name</span></i> [ <strong><span>bas</span></strong> { <strong><span>local</span></strong> | <strong><span>remote</span></strong> } [ <strong><span>rui-slave</span></strong> ] | <strong><span>server</span></strong> ]<p>A non-dynamic address pool is configured, and its view is displayed.</p>
<p>A maximum of 4096 address pools can be configured on a device, including access-side and network-side address pools. Each address pool must have a unique name.</p>
</li><li><p>Run <a href="cmdqueryname=gateway"><b><span class="cmdname">gateway</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> }</p>
<p>A gateway address and mask are configured for the address pool.</p>
<p>The gateway address and subnet mask are used to verify if an address in the configured address segment resides on the same subnet as the gateway. Therefore, you must configure the gateway address and mask before configuring address segments.</p>
</li><li><p>(Optional) Run <a href="cmdqueryname=gateway+unnumbered"><b><span class="cmdname">gateway unnumbered</span></b></a> <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></p>
<p>The address pool is configured to borrow the interface gateway address.</p>
<p>Before configuring a gateway for an IP address pool, ensure that the gateway address and user addresses are on the same subnet. However, the gateway address cannot be assigned to users. As a result, many IP addresses are wasted. The command makes the loopback address of the device as the gateway for the IP address of all users. This prevents IP addresses from being wasted in each address pool.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>The borrowed interface must be configured with an IP address.</p>
</li><li><p>Currently, the <a href="cmdqueryname=gateway+unnumbered"><b><span class="cmdname">gateway unnumbered</span></b></a> <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command can be configured only in the local IPv4 address pool view.</p>
</li><li><p>If an address pool is bound to a domain, you need to unbind the address pool from the domain first. Otherwise, you cannot configure, delete, or modify the unnumbered interface gateway.</p>
</li><li><p>The mask length of the gateway configured in a remote address pool must be the same as that in the corresponding server address pool on the DHCP server.</p>
</li><li>Only one <a href="cmdqueryname=gateway+unnumbered"><b><span class="cmdname">gateway unnumbered</span></b></a> <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command and one <a href="cmdqueryname=gateway+ip-address"><b><span class="cmdname">gateway ip-address</span></b></a> {<i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } command can be configured for an address pool.</li></ul>
</div></div>
<p>When you need to configure a loopback interface as the preferentially used gateway for PPP users who receive the Framed-IP-Address attribute from the RADIUS server, run the <a href="cmdqueryname=ppp-gateway+unnumbered+loopback"><b><span class="cmdname">ppp-gateway unnumbered loopback</span></b></a> command in the AAA view.</p>
</li><li><p>Run <a href="cmdqueryname=section"><b><span class="cmdname">section</span></b></a> <i><span class="varname">section-number</span></i> <i><span class="varname">start-ip-address</span></i> [ <i><span class="varname">end-ip-address</span></i> ]</p>
<p>An address segment is configured.</p>
<p>A maximum of 256 address segments can be configured in an address pool. An address segment contains at most 65536 IP addresses. The address segments cannot overlap each other. <a href="cmdqueryname=section"><b><span class="cmdname">section</span></b></a> and <a href="cmdqueryname=gateway+ip-address"><b><span class="cmdname">gateway ip-address</span></b></a> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } must be in the same network segment.</p>
</li><li>(Optional) Run <a href="cmdqueryname=wait-request-time"><b><span class="cmdname">wait-request-time</span></b></a> <i><span class="varname">time-value</span></i><div class="p">The timeout period for a router to wait for a Request message from a client in response to an Offer message sent to the client is configured.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=wait-request-time"><b><span class="cmdname">wait-request-time</span></b></a> <i><span class="varname">time-value</span></i> command is run in the address pool view whereas the <a href="cmdqueryname=access+wait-request-time"><b><span class="cmdname">access wait-request-time</span></b></a> <strong><span>dhcpv4</span></strong> <i><span class="varname">time-value</span></i> command is run in the system view. If the two commands are both run, the command run in the address pool view takes effect.</p>
</div></div>
</div>
</li><li>(Optional) Run <a href="cmdqueryname=weight"><b><span class="cmdname">weight</span></b></a> <i><span class="varname">weight-value</span></i><div class="p">A weight is configured for the address pool.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p"><ul><li>After a weight is configured for an address pool, you must run the <a href="cmdqueryname=ip-pool+algorithm+loading-share+remote"><b><span class="cmdname">ip-pool algorithm loading-share remote</span></b></a> command in the system view to configure the device to assign addresses from IPv4 remote address pools based on weights of the address pools.</li><li>This function applies only to remote address pools and local RUI-slave address pools.</li></ul>
</div>
</div></div>
</div>
</li><li>(Optional) Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a><p>Return to the system view.</p>
</li><li>(Optional) Run <a href="cmdqueryname=ip-pool+algorithm+loading-share+remote"><b><span class="cmdname">ip-pool algorithm loading-share remote</span></b></a> [ <strong><span>chasten</span></strong> { <strong><span>restrain-period</span></strong> <i><span class="varname">period-value</span></i> | <strong><span>timeout-threshold</span></strong> <i><span class="varname">threshold-value</span></i> } <sup>*</sup> ]<p>A suppression threshold for the number of NAK packets and a suppression period are configured for the remote address pool.</p>
</li></ol>
</li></ul>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=dhcp-server+check-remote-ip+loose"><b><span class="cmdname">dhcp-server check-remote-ip loose</span></b></a></span><p><p>The BRAS is disabled from checking whether IP addresses assigned by the DHCP server are on the subnet to which the gateway address of the remote address pool belongs. This command takes effect for remote address pools and remote RUI address pools only.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=ip-attribute+public"><b><span class="cmdname">ip-attribute public</span></b></a></span><p><p>The public network attribute is configured for the address pool or the address pool group.</p>
</p><p><p>You also need to run the <a href="cmdqueryname=ip-pool+usage-status+threshold"><b><span class="cmdname">ip-pool usage-status threshold</span></b></a> command in the AAA view to configure upper and lower thresholds for public IP address pool usage so that the public IP address pool status can be calculated and sent to the RADIUS server.</p>
<p>This command takes effect only for local address pools.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=lease"><b><span class="cmdname">lease</span></b></a> <i><span class="varname">days</span></i> [ <i><span class="varname">hours</span></i> [ <i><span class="varname">minutes</span></i> ] ]</span><p><p>A lease is configured for the address pool.</p>
</p><p><p>This command takes effect only in the local address pool.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=rebinding-time"><b><span class="cmdname">rebinding-time</span></b></a> <i><span class="varname">days</span></i> [ <i><span class="varname">hours</span></i> [ <i><span class="varname">minutes</span></i> ] ]</span><p><p>The rebinding time is configured for IP addresses.</p>
</p><p><p>This command takes effect only in the local address pool.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=renewal-time"><b><span class="cmdname">renewal-time</span></b></a> <i><span class="varname">days</span></i> [ <i><span class="varname">hours</span></i> [ <i><span class="varname">minutes</span></i> ] ]</span><p><p>The renewal time is configured for IP addresses.</p>
</p><p><p>This command takes effect only in the local address pool.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=recycle"><b><span class="cmdname">recycle</span></b></a> <i><span class="varname">start-ip-address</span></i> [ <i><span class="varname">end-ip-address</span></i> ]</span><p><p>The IP address status is set to idle. When a user is not online, you can reclaim the occupied IP address manually by running this command.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=conflict+auto-recycle"><b><span class="cmdname">conflict auto-recycle</span></b></a> <strong><span>interval</span></strong> <i><span class="varname">interval-time</span></i></span><p><p>The interval at which conflicting addresses are automatically reclaimed is configured.</p>
</p><p><p>If <i><span class="varname">interval-time</span></i> is set to 0, the function to automatically reclaim addresses is disabled, and conflicting addresses are isolated. In this case, you need to run the <a href="cmdqueryname=reset+conflict-ip-address"><b><span class="cmdname">reset conflict-ip-address</span></b></a> command to reclaim conflicting addresses.</p>
<p>If <i><span class="varname">interval-time</span></i> is not set to 0, when the usage of IP addresses in the address pool exceeds the alarm threshold and the address conflict duration exceeds the <i><span class="varname">interval-time</span></i> value, the <span class="keyword">Router</span> automatically reclaims some conflicting addresses and assigns them to users.</p>
<p>This command takes effect only in the local or server address pool.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=vpn-instance"><b><span class="cmdname">vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span></span><p><p>The VPN instance to which the address pool belongs is configured.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=warning-threshold"><b><span class="cmdname">warning-threshold</span></b></a> <i><span class="varname">warning-threshold-value</span></i></span><p><p>An alarm threshold for the address usage of the address pool is configured. If the address usage exceeds the threshold, the <span class="keyword">Router</span> generates an alarm.</p>
</p></li><li><span>(Optional) Set the alarm threshold for the address usage of the IPv4 address pool bound to the VPN instance.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span><p><p>The VPN instance view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a></span><p><p>The VPN instance IPv4 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ip-pool+warning-threshold"><b><span class="cmdname">ip-pool warning-threshold</span></b></a> <i><span class="varname">threshold</span></i></span><p><p>An alarm threshold is set for the address usage of the address pool, so that the <span class="keyword">Router</span> generates an alarm when the address usage exceeds the threshold.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the VPN instance view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>(Optional) Run <a href="cmdqueryname=warning-exhaust"><b><span class="cmdname">warning-exhaust</span></b></a></span><p><p>The address exhaustion alarm function is enabled for the IP address pool.</p>
</p><p><p>After this command is run, the system generates an address exhaustion alarm when addresses in the IP address pool are exhausted, prompting the administrator to plan IP addresses. When addresses are exhausted, users cannot go online.</p>
<p>When the address usage of the IP address pool falls below 90%, the address exhaustion alarm is cleared.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=frame-ip+lease+manage"><b><span class="cmdname">frame-ip lease manage</span></b></a></span><p><p>The lease management function of IP addresses delivered by the RADIUS server is enabled in the IP address pool.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=option33+route"><b><span class="cmdname">option33 route</span></b></a> <i><span class="varname">dest-ip</span></i> <i><span class="varname">gateway-ip</span></i></span><p><p>User routes are configured in the address pool.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=option+router+disable"><b><span class="cmdname">option router disable</span></b></a></span><p><p>The device is disabled from sending DHCP messages carrying Option 3 (network gateway address) to clients.</p>
</p></li><li><span>(Optional) Enable the function to automatically reclaim IP addresses assigned in RADIUS authentication responses.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=framed-ip+conflict+auto-recycle"><b><span class="cmdname">framed-ip conflict auto-recycle</span></b></a></span><p><p>The function to automatically reclaim IP addresses assigned in RADIUS authentication responses is enabled.</p>
</p></li></ol>
</li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0048.html">Configuring an IPv4 Address Pool and an Address Pool Group
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_00501.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>