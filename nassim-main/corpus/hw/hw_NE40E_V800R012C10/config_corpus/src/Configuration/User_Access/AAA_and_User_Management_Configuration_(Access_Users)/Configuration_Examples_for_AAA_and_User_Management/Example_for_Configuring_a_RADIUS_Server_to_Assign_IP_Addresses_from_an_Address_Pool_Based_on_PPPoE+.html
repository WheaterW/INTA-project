
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring a RADIUS Server to Assign IP Addresses from an Address Pool Based on PPPoE+">
<meta name="abstract" content="This section provides an example for configuring a RADIUS server to assign IP addresses from an address pool based on PPPoE+. With the Option 82 function enabled, a BRAS assigns IP addresses to PPPoE users based on the address pool information carried in an authentication response packet sent by the RADIUS server.">
<meta name="description" content="This section provides an example for configuring a RADIUS server to assign IP addresses from an address pool based on PPPoE+. With the Option 82 function enabled, a BRAS assigns IP addresses to PPPoE users based on the address pool information carried in an authentication response packet sent by the RADIUS server.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0057.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0558.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00588052,w00437000,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="AAA (Access User)">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="z00588052,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0210795990">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring a RADIUS Server to Assign IP Addresses from an Address Pool Based on PPPoE+</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0210795990"></a><a name="EN-US_TASK_0210795990"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring a RADIUS Server to Assign IP Addresses from an Address Pool Based on PPPoE+</h1>
<div class="taskbody"><p>This section provides an example for configuring a RADIUS server to assign IP addresses from an address pool based on PPPoE+. With the Option 82 function enabled, a BRAS assigns IP addresses to PPPoE users based on the address pool information carried in an authentication response packet sent by the RADIUS server.</p>
<div class="context"><a name="EN-US_TASK_0210795990__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0210795990__fig1244122710413">Figure 1</a>, a user initiates a PPPoE dialup. The PPPoE+ function is enabled on the OLT. When transparently transmitting PPPoE packets, the OLT inserts the access-line-id (PPPoE+) information that identifies the physical location of a user into the PPPoE packets. The Option 82 function is enabled on the BRAS. The BRAS trusts the access-line-id information in the packets sent by a client and does not change the access-line-id information before forwarding the packets from the client to the RADIUS server. The RADIUS attribute dictionary file needs to be loaded on the RADIUS server in advance. After receiving an authentication request packet from a user, the RADIUS server delivers the IPv4 address pool attribute through the Framed-Pool attribute in an authentication response packet based on the access-line-id information carried in the authentication request packet. Also, the RADIUS server delivers the IPv6 address pool attribute through the Framed-IPv6-Pool (100) and HW-Delegated-IPv6-Prefix-Pool (191) attributes in the authentication response packet. The address pool name configured on the BRAS must be the same as that on the RADIUS server. The BRAS assigns an IP address to the user based on the address pool information carried in the authentication response packet.</p>
<div class="fignone" id="EN-US_TASK_0210795990__fig1244122710413"><a name="EN-US_TASK_0210795990__fig1244122710413"></a><a name="fig1244122710413"></a><span class="figcap"><b>Figure 1 </b>Configuring a RADIUS server to assign IP addresses from an address pool based on PPPoE+</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 and 2 in this example represent GE <span>0/1/2</span> and GE <span>0/1/1</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0210942500.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0210795990__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><ol><li><p>Configure AAA schemes.</p>
</li><li><p>Configure a RADIUS server group.</p>
</li><li>Configure address pools.</li><li><p>Configure a user access domain.</p>
</li><li>Configure the BRAS to generate a DUID for the DHCPv6 server.</li><li>Configure a virtual template.</li><li>Configure interfaces.</li><li><p>Configure routing protocols.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0210795990__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><ul><li>Virtual template number</li><li>Authentication and accounting schemes and their names (RADIUS authentication is performed for users on the BRAS.)</li><li>RADIUS server group name and RADIUS server addresses</li><li>DNS server address</li><li>Name of the delegation prefix pool for IPv6 users, assignable prefixes, and prefix lengths</li><li>Name of the delegation address pool for IPv6 users</li><li>User access domain</li><li>IPv4 and IPv6 addresses of interfaces</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0210795990__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure AAA schemes.</span><p><p># Configure an authentication scheme.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> aaa</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa]<strong> authentication-scheme auth1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-authen-auth1]<strong> authentication-mode radius</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-authen-auth1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa]<strong> commit</strong></pre>
<p># Configure an accounting scheme.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa]<strong> accounting-scheme acct1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-accounting-acct1]<strong> accounting-mode radius</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-accounting-acct1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
</p></li><li><span>Configure a RADIUS server group.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> radius-server group rd1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-radius-rd1]<strong> radius-server authentication 192.168.7.249 1645</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-radius-rd1]<strong> radius-server accounting 192.168.7.249 1646</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-radius-rd1]<strong> radius-server shared-key-cipher YsHsjx_202206 </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-radius-rd1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
</p></li><li><span>Configure a local address pool for IPv4 users.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip pool pool_v4 bas local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ip-pool-pool_v4] <strong>gateway 172.16.0.1 255.255.255.0 </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ip-pool-pool_v4] <strong>section 0 172.16.0.2 172.16.0.200 </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ip-pool-pool_v4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
</p></li><li><span>Configure address pools for IPv6 users.</span><p><ol type="a"><li><p>Configure a delegation prefix pool for ND users.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> </strong><strong>ipv6 prefix pre_nd delegation</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ipv6-prefix-pre_nd] <strong>prefix </strong><strong>2001:db8:1::/48</strong> <strong>delegating-prefix-length 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ipv6-prefix-pre_nd] <strong>slaac-unshare-only</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ipv6-prefix-pre_nd]<strong> quit</strong></pre>
</li><li>Configure a delegation address pool for ND users.<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> </strong><strong>ipv6 pool pool_nd bas delegation</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ipv6-pool-pool_nd] <strong>prefix pre_nd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ipv6-pool-pool_nd] <strong>dns-server 2001:db8:1::2</strong> <strong>2001:db8:1::3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ipv6-pool-pool_nd]<strong> quit</strong></pre>
</li><li>Configure a delegation prefix pool for PD users.<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> </strong><strong>ipv6 prefix pre_pd delegation</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ipv6-prefix-pre_pd] <strong>prefix 2001:db8:2::/48</strong><strong> delegating-prefix-length 60</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ipv6-prefix-pre_pd] <strong>pd-unshare-only</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ipv6-prefix-pre_pd]<strong> quit</strong></pre>
</li><li>Configure a delegation address pool for PD users.<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> </strong><strong>ipv6 pool pool_pd bas delegation</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ipv6-pool-pool_pd] <strong>prefix pre_pd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ipv6-pool-pool_pd] <strong>dns-server 2001:db8:1::2 2001:db8:1::3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ipv6-pool-pool_pd]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
</li></ol>
</p></li><li><span>Configure a user access domain named <strong>isp1</strong>.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> aaa</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa]<strong> domain isp1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-domain-isp1]<strong> authentication-scheme auth1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-domain-isp1]<strong> accounting-scheme acct1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-domain-isp1]<strong> radius-server group rd1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-domain-isp1]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa-domain-isp1] <strong>prefix-assign-mode unshared  </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-domain-isp1]<strong> ip-pool pool_v4</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-domain-isp1] <strong>ipv6-pool pool_nd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-domain-isp1] <strong>ipv6-pool pool_pd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa-domain-isp1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
</p></li><li><span>Configure the BRAS to generate a DUID for the DHCPv6 server.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> dhcpv6 duid llt</strong></pre>
<pre class="screen">Warning:The change of DUID will cause the accessed user work abnormally.</pre>
</p></li><li><span>Configure a virtual template.</span><p><pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> interface Virtual-Template1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Virtual-Template1]<strong> ppp authentication-mode chap</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Virtual-Template1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
</p></li><li><span>Configure interfaces.</span><ol type="a"><li class="substepexpand"><span>Bind the VT to a sub-interface.</span><p><pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>] <strong>interface GigabitEthernet<span>0/1/2</span></strong><strong>.10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/2</span>.10] <strong>pppoe-server bind virtual-template 1</strong></pre>
</p></li><li class="substepexpand"><span>Enable IPv6 on the interface.</span><p><pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/2</span>.10] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/2</span>.10] <strong>ipv6 address auto link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/2</span>.10] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/2</span>.10] <strong>user-vlan 4003</strong></pre>
</p></li><li class="substepexpand"><span>Configure a BAS interface.</span><p><pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/2</span>.10-vlan-4003-4003] <strong>bas</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/2</span>.10-bas] <strong>access-type layer2-subscriber default-domain authentication isp1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/2</span>.10-bas] <strong>client-option82</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/2</span>.10-bas] <strong>authentication-method ppp web</strong> </pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/2</span>.10-bas] <strong>authentication-method-ipv6 ppp web</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/2</span>.10-bas] <strong>commit</strong></pre>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/2</span>.10-bas] <strong>quit</strong></pre>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/2</span>.10] <strong>quit</strong></pre>
</p></li><li class="substepexpand"><span>Configure the network-side interface of the BRAS.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 enable </strong></pre>
<pre class="screen">[*<span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 address </strong><strong>2001:db8:8::7 128</strong></pre>
<pre class="screen">[*<span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 address auto link-local</strong></pre>
<pre class="screen">[*<span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>] <strong>ip address 10.2.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
</p></li><li class="substepexpand"><span>Configure loopback 100 as the source interface for sending BGP packets.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface LoopBack100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-LoopBack100] <strong>ipv6 </strong><strong>enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-LoopBack100] <strong>ipv6 address </strong><strong>2001:db8:7::7 127</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-LoopBack100] <strong>ipv6 address auto link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-LoopBack100] <strong>ip address 10.10.10.10 16</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-LoopBack100] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
</p></li></ol>
</li><li><span>Configure routing protocols.</span><ol type="a"><li class="substepexpand"><span>Create an IS-IS process and enable IS-IS on the network-side interface of the BRAS.</span><p><pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>]<strong> </strong><strong>isis 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-isis-100] <strong>is-level level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-isis-100] <strong>cost-style wide</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-isis-100]<strong> network-entity 86.0451.1720.2803.5003.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-isis-100]<strong> </strong><strong>ipv6 enable topology ipv6 </strong>               </pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-isis-100] <strong>ipv6 preference 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-isis-100]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>] <strong>interface GigabitEthernet </strong><strong><span>0/1/1</span></strong></pre>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>] <strong>isis enable</strong><strong> 100</strong></pre>
<pre class="screen">[*<span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>] <strong>isis ipv6 enable 100</strong></pre>
<pre class="screen">[*<span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>] <strong>isis ipv6 cost 500 level-2</strong></pre>
<pre class="screen">[*<span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface</strong><strong> </strong><strong>LoopBack100</strong></pre>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>-LoopBack100] <strong>isis enable</strong><strong> 100</strong></pre>
<pre class="screen">[*<span class="keyword">HUAWEI</span>-LoopBack100] <strong>isis ipv6 enable 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-LoopBack100] <strong>commit</strong></pre>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font><span class="keyword">HUAWEI</span>-LoopBack100] <strong>quit</strong></pre>
</p></li><li class="substepexpand"><span>Configure BGP.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>group group1 internal</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer group1 </strong><strong>connect-interface LoopBack100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp]<strong> group group2 external</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer group2 </strong><strong>connect-interface LoopBack100</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer 2001:db8:7::2101 as-number 100 </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer 2001:db8:7::2101 group group1 </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer 2001:db8:7::2102 as-number 100 </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer 2001:db8:7::2102 group group1 </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer 2.2.2.2 as-number 101</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer 2.2.2.2 group group2</strong> </pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer </strong><strong>3.3.3.3 </strong><strong>as-number 101 </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>peer 3.3.3.3 group group2 </strong></pre>
</p><p><pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv4-family unicast</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv4] <strong>import-route unr</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp-af-ipv4] <strong>quit</strong> </pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp] <strong>ipv6-family unicast</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp<strong>-</strong>af-ipv6]<strong> import-route unr</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-bgp-af-ipv6] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-bgp]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
</p></li></ol>
</li></ol></div>
<div class="example"><a name="EN-US_TASK_0210795990__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><pre class="screen">#
sysname <span class="keyword">HUAWEI</span>                                                         
#                                                                               
radius-server group rd1                                                         
 radius-server shared-key-cipher %^%#Q'!i-TMV5&amp;@=QE}g/QK2ouBHee8WB|s|mB%^%
 radius-server authentication 192.168.7.249 1645 weight 0                       
 radius-server accounting 192.168.7.249 1646 weight 0
#
aaa
 authentication-scheme auth1
  authentication-mode radius
 accounting-scheme acct1  
  accounting-mode radius
#                                                                               
ip pool pool_v4 bas local                                                         
 gateway 172.16.0.1 255.255.255.0                                                
 section 0 172.16.0.2 172.16.0.200                                                 
#
ipv6 prefix pre_nd delegation
 prefix 2001:db8:1::/48 delegating-prefix-length 64
 slaac-unshare-only
#
ipv6 pool pool_nd bas delegation
 prefix pre_nd
 dns-server 2001:db8:1::2 2001:db8:1::3
#
ipv6 prefix pre_pd delegation
 prefix 2001:db8:2::/48 delegating-prefix-length 60
 pd-unshare-only
#
ipv6 pool pool_pd bas delegation
 prefix pre_pd
 dns-server 2001:db8:1::2 2001:db8:1::3
# 
aaa                                                                             
 domain isp1                                                                    
  authentication-scheme auth1                                                   
  accounting-scheme acct1                                                       
  radius-server group rd1
  prefix-assign-mode unshared  
  ip-pool pool_v4
  ipv6-pool pool_nd
  ipv6-pool pool_pd
#
dhcpv6 duid llt
#                                                                               
interface Virtual-Template1                                                     
 ppp authentication-mode chap                                                   
#
isis 100
<strong> </strong>is-level level-2
 cost-style wide
 network-entity 86.0451.1720.2803.5003.00
 ipv6 enable topology ipv6                
 ipv6 preference 20
#
interface GigabitEthernet<span>0/1/2</span>
#
interface GigabitEthernet<span>0/1/2</span>.10                                                            
 pppoe-server bind Virtual-Template 1
 ipv6 enable
 ipv6 address auto link-local
 user-vlan 4003
 bas                                                                            
  access-type layer2-subscriber default-domain authentication isp1
  client-option82
  authentication-method ppp web
  authentication-method-ipv6 ppp web
#
interface GigabitEthernet<span>0/1/1</span>
 ipv6 enable
 ipv6 address 2001:db8:8::7 128
 ipv6 address auto link-local
 ip address 10.2.1.1 24
 isis enable 100
 isis ipv6 enable 100
 isis ipv6 cost 500 level-2 
#                                                                               
interface LoopBack100                                                           
 ipv6 enable
 ipv6 address 2001:db8:7::7 127
 ipv6 address auto link-local
 ip address 10.10.10.10 16
 isis enable 100
 isis ipv6 enable 100
#                                                                               
bgp 100
 group group1 internal
 peer group1 connect-interface LoopBack100
 group group2 external
 peer group2 connect-interface LoopBack100
 peer 2001:db8:7::2101 as-number 100
 peer 2001:db8:7::2101 group group1 
 peer 2001:db8:7::2102 as-number 100 
 peer 2001:db8:7::2102 group group1 
 peer 2.2.2.2 as-number 101
 peer 2.2.2.2 group group2 
 peer 3.3.3.3 as-number 101 
 peer 3.3.3.3 group group2                                                                              
 ipv4-family unicast
  import-route unr
 # 
 ipv6-family unicast
  import-route unr
#
return                                       </pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0057.html">Configuration Examples for AAA and User Management
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0558.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>