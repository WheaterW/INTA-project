
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Example for Configuring EDSG Prepaid Services Based on HTTPS Redirect">
<meta name="abstract" content="EDSG services can be configured on a BRAS to deliver differentiated charging, rate limiting, and prepaid functions for PPPoE users. This section provides an example for configuring EDSG prepaid services based on HTTPS redirect.">
<meta name="description" content="EDSG services can be configured on a BRAS to deliver differentiated charging, rate limiting, and prepaid functions for PPPoE users. This section provides an example for configuring EDSG prepaid services based on HTTPS redirect.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppox_cfg_0183.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoxv6_cfg_0071.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,z00603461,w00800033,z00588052,l00593348,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="dcAudienceJob" content="Configuration">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0272391694">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring EDSG Prepaid Services Based on HTTPS Redirect</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CONCEPT_0272391694"></a><a name="EN-US_CONCEPT_0272391694"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring EDSG Prepaid Services Based on HTTPS Redirect</h1>
<div><p>EDSG services can be configured on a BRAS to deliver differentiated charging, rate limiting, and prepaid functions for PPPoE users. This section provides an example for configuring EDSG prepaid services based on HTTPS redirect.</p>
<div class="section"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_CONCEPT_0272391694__fig670517384389">Figure 1</a>, PPPoE users' traffic fees for accessing network 1 and network 2 differ greatly. The upstream and downstream bandwidths for accessing network 1 (192.168.100.0/24) are limited to 1 Mbit/s, and those for accessing network 2 (192.168.200.0/24) are limited to 2 Mbit/s. If a carrier wants users to pay in advance and reserve the time or volume quota, two EDSG services can be configured on DeviceA to provide differentiated charging, rate limiting, and prepaid functions for access to network 1 and network 2, thereby ensuring the carrier's operating revenue.</p>
<div class="fignone" id="EN-US_CONCEPT_0272391694__fig670517384389"><a name="EN-US_CONCEPT_0272391694__fig670517384389"></a><a name="fig670517384389"></a><span class="figcap"><b>Figure 1 </b>Configuring EDSG prepaid services based on HTTPS redirect</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 through 3 and sub-interfaces 3.1 and 3.2 in this example represent GE <span>0/1/2</span>, GE <span>0/1/1</span>, GE <span>0/1/0</span>, GE <span>0/1/0</span>.1, and GE <span>0/1/0</span>.2, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0272391695.png" width="NaN" height="NaN"></span></div>
</div>
<div class="section"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Configure a cipher suite, and configure a self-signed RSA certificate or import an HTTPS redirect certificate.</li><li>Enable the VAS function.</li><li>Configure a policy server.</li><li>Configure an EDSG traffic policy.</li><li>Configure a local address pool.</li><li>Configure an AAA authentication scheme and accounting scheme, and bind the address pool to the RADIUS server group in the AAA domain.</li><li>Configure a mode in which EDSG service policies are downloaded.</li><li>Configure EDSG service policies.</li><li>Configure the prepaid function.</li><li>Configure BAS interfaces, upstream interfaces, and an interface connecting the BRAS to servers.</li><li>Configure online users.</li><li>Configure user 1's prepaid time on the AAA server.</li><li>Configure user 2's prepaid volume on the AAA server.</li></ol>
</div>
<div class="section"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li>Names of the imported HTTPS redirect certificate and key file</li><li><p>Policy server-related parameters, such as the IP address and port number</p>
</li><li><p>EDSG traffic policy-related parameters, such as the service group name, ACL rule, traffic classifier, traffic behavior, and traffic policy</p>
</li><li><p>RADIUS server group name, RADIUS authentication server's IP address and port number, and RADIUS accounting server's IP address and port number used by EDSG service policies</p>
</li><li><p>Authentication scheme name, RADIUS authentication mode, accounting scheme name, and RADIUS accounting mode used by EDSG service policies</p>
</li><li><p>Local address pool name, gateway address, and IP address range of the address pool</p>
</li><li><p>EDSG service policy-related parameters, such as the mode in which EDSG service policies are downloaded, EDSG service policy name, name of the bound RADIUS server group, authentication scheme, accounting scheme, and bandwidths for upstream and downstream traffic rate limiting for EDSG services</p>
</li><li><p>RADIUS server group name, RADIUS authentication server's IP address and port number, and RADIUS accounting server's IP address and port number used by prepaid profiles</p>
</li><li><p>Authentication scheme name, authentication mode, accounting scheme name, and accounting mode used by prepaid profiles</p>
</li><li><p>Prepaid profile-related parameters, such as the prepaid profile name, name of the bound RADIUS server group, authentication scheme, accounting scheme, password used to apply for a prepaid service quota from the RADIUS server group, thresholds of the remaining time and volume, and policies to be used when the service quota is exhausted</p>
</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li>Configure a cipher suite, and configure a self-signed RSA certificate or import an HTTPS redirect certificate.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>A</strong> 
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong> 
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>user-group huawei</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>access https-redirect</strong>  
[<span class="keyword">*</span><span class="keyword">Device</span>A-access-https-redirect] <strong>self-signed rsa modulus 2048</strong> 
[<span class="keyword">*</span><span class="keyword">Device</span>A-access-https-redirect] <strong>cipher-suite support c02f c02b 1301 1302</strong> 
[<span class="keyword">*</span><span class="keyword">Device</span>A-access-https-redirect] <strong>commit</strong> 
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-access-https-redirect] <strong>quit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>You can run the <strong>access https-redirect import certificate</strong> command to import an HTTPS redirect certificate. You can either configure a self-signed RSA certificate or import an HTTPS redirect certificate. If both of them are configured, the imported HTTPS redirect certificate takes effect.</p>
<p>For security purposes, you are advised not to use weak security algorithms. If you have to use a weak security algorithm, run the <a href="cmdqueryname=undo+crypto+weak-algorithm+disable"><b><span class="cmdname">undo crypto weak-algorithm disable</span></b></a> command to enable the weak security algorithm function first.</p>
</div></div>
</li><li>Enable the VAS function.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>value-added-service enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</li><li>Configure a policy server.<p># Set the RADIUS server group name to <strong>rad_group1</strong>, the RADIUS authentication server's IP address and port number to 10.10.10.2 and 1812, the RADIUS accounting server's IP address and port number to 10.10.10.2 and 1813, and the shared key for the RADIUS authentication and accounting servers to <strong>YsHsjx_202206</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>radius-server group rad_group1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-radius-rad_group1] <strong>radius-server authentication 10.10.10.2 1812</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-radius-rad_group1] <strong>radius-server accounting 10.10.10.2 1813</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-radius-rad_group1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-radius-rad_group1] <strong>radius-server shared-key-cipher YsHsjx_202206</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-radius-rad_group1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-radius-rad_group1] <strong>quit</strong></pre>
</li><li>Configure an EDSG traffic policy.<ol type="a"><li>Create service groups.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>service-group s_1m</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>service-group s_2m</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>A service group must be created regardless of whether an EDSG traffic policy is locally configured or delivered by the RADIUS server.</p>
</div></div>
</li><li>Configure ACL rules for service groups.<p># Configure an ACL numbered 6020 to allow HTTPS redirect for the TCP packets originating from the service group <strong>s_1m</strong> and whose destination address is the network segment address of network 1 and destination port number is 443.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>acl number 6020</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6020] <strong>rule permit tcp source service-group s_1m destination ip-address 192.168.100.0</strong><strong> 0.0.0.255 destination-port eq 443</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6020] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-acl-ucl-6020] <strong>quit</strong></pre>
<p># Configure an ACL numbered 6021 to allow HTTPS redirect for the TCP packets originating from the service group <strong>s_2m</strong> and whose destination address is the network segment address of network 2 and destination port number is 443.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>acl number 6021</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6021] <strong>rule permit tcp source service-group s_2m destination ip-address 192.168.200.0</strong><strong> 0.0.0.255 destination-port eq 443</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6021] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-acl-ucl-6021] <strong>quit</strong></pre>
</li><li>Configure traffic classifiers.<p># Configure a traffic classifier named <strong>c1</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>traffic classifier c1 operator or</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-c1] <strong>if-match acl 6020</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-c1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-classifier-c1] <strong>quit</strong></pre>
<p># Configure a traffic classifier named <strong>c2</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>traffic classifier c2 operator or</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-c2] <strong>if-match acl 6021</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-c2] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-classifier-c2] <strong>quit</strong></pre>
</li><li>Configure traffic behaviors.<p># Configure a traffic behavior named <strong>b1</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>traffic behavior b1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-behavior-b1] <strong>https-redirect</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-behavior-b1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-behavior-b1] <strong>quit</strong></pre>
<p># Configure a traffic behavior named <strong>b2</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>traffic behavior b2</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-behavior-b2] <strong>https-redirect</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-behavior-b2] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-behavior-b2] <strong>quit</strong></pre>
</li><li>Configure a traffic policy.<p># Configure an EDSG traffic policy named <strong>traffic_policy_edsg</strong>, and bind traffic classifiers <strong>c1</strong> and <strong>c2</strong> to traffic behaviors <strong>b1</strong> and <strong>b2</strong>, respectively.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>traffic policy traffic_policy_edsg</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-policy-traffic_policy_edsg] <strong>share-mode</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-policy-traffic_policy_edsg] <strong>classifier c1 behavior b1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-policy-traffic_policy_edsg] <strong>classifier c2 behavior b2</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-policy-traffic_policy_edsg] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-policy-traffic_policy_edsg] <strong>quit</strong></pre>
</li><li>Apply the EDSG traffic policy globally.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>traffic-policy traffic_policy_edsg inbound</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>traffic-policy traffic_policy_edsg outbound</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</li></ol>
</li><li>Configure a local address pool.<p># Configure a local address pool named <strong>edsg_pool</strong>. Then, set the gateway address to 172.31.0.0/16 and specify the address segment ranging from 172.31.0.1 to 172.31.255.255 for user access.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ip pool edsg_pool bas local</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ip-pool-edsg_pool] <strong>gateway 172.31.0.0 255.255.0.0</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ip-pool-edsg_pool] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ip-pool-edsg_pool] <strong>section 0 172.31.0.1 172.31.255.255</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ip-pool-edsg_pool] <strong>quit</strong></pre>
</li><li>Configure an AAA authentication scheme and accounting scheme, and bind the address pool to the RADIUS server group in the AAA domain.<p># Configure an AAA authentication scheme named <strong>auth1</strong> and set the authentication mode to RADIUS authentication.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>aaa</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>authentication-scheme auth1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-authen-auth1] <strong>authentication-mode radius</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-authen-auth1] <strong>quit</strong></pre>
<p># Configure an AAA accounting scheme named <strong>acct1</strong> and set the accounting mode to RADIUS accounting.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa] <strong>accounting-scheme acct1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-accounting-acct1] <strong>accounting-mode radius</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-accounting-acct1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa] <strong>commit</strong></pre>
<p># Bind the address pool to the RADIUS server group in the AAA domain.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>domain domain1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-domain1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-domain1] <strong>ip-pool edsg_pool</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-domain1] <strong>radius-server group rad_group1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-domain1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-domain1] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>quit</strong></pre>
</li><li>Configure a mode in which EDSG service policies are downloaded.<p># Configure the BRAS to choose locally configured EDSG service policies in priority. If no EDSG service policy is locally configured, the BRAS then selects the EDSG service policies downloaded from the RADIUS server.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>service-policy download local radius rad_group1 password cipher YsHsjx_202206</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</li><li>Configure EDSG service policies.<ol type="a"><li>Configure an EDSG service policy for access to network 1.<p># Create an EDSG service policy named <strong>service_edsg1</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>service-policy name service_edsg1 edsg</strong></pre>
<p># Configure the EDSG service policy <strong>service_edsg1</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg1] <strong>service-group s_1m</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg1] <strong>radius-server group rad_group1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg1] <strong>authentication-scheme auth1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg1] <strong>accounting-scheme acct1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg1] <strong>rate-limit cir 1000 inbound</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg1] <strong>rate-limit cir 1000 outbound</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg1] <strong>quit</strong></pre>
</li><li>Configure an EDSG service policy for access to network 2.<p># Configure the EDSG service policy <strong>service_edsg2</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>service-policy name service_edsg2 edsg</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg2] <strong>service-group s_2m</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg2] <strong>radius-server group rad_group1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg2] <strong>authentication-scheme auth1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg2] <strong>accounting-scheme acct1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg2] <strong>rate-limit cir 2000 inbound</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg2] <strong>rate-limit cir 2000 outbound</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg2] <strong>quit</strong></pre>
</li></ol>
</li><li>Configure the prepaid function.<ol type="a"><li>Configure a prepaid profile for user access to network 1.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> prepaid-profile prepaid1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid1]<strong> radius-server group rad_group1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid1]<strong> authentication-scheme auth1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid1]<strong> accounting-scheme acct1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid1] <strong>password cipher YsHsjx_202206</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-prepaid-profile-prepaid1] <strong>threshold time 60 seconds</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-prepaid-profile-prepaid1] <strong>threshold volume 10 mbytes</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-prepaid-profile-prepaid1]<strong> commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid1] <strong>quit</strong></pre>
</li><li>Configure a prepaid profile for user access to network 2.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> prepaid-profile prepaid2</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid2]<strong> radius-server group rad_group1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid2]<strong> authentication-scheme auth1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid2]<strong> accounting-scheme acct1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid2] <strong>password cipher YsHsjx_202206</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-prepaid-profile-prepaid2] <strong>threshold time 300 seconds</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-prepaid-profile-prepaid2] <strong>threshold volume 20 mbytes</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-prepaid-profile-prepaid2]<strong> commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid2] <strong>quit</strong></pre>
</li><li>Configure the policies to be used when the quota is exhausted.<p># Configure the BRAS to deactivate services when the quota for user access to network 1 is exhausted.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> prepaid-profile prepaid1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid1]<strong> quota-out service deactivate</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid1]<strong> quit</strong></pre>
<p># Configure the BRAS to perform HTTPS redirect when the quota for user access to network 2 is exhausted.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> http-redirect-profile http_redirect_profile</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-redirect-profile-http_redirect_profile]<strong> web-server url http://www.huawei.com</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-redirect-profile-http_redirect_profile]<strong> web-server mode post</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-redirect-profile-http_redirect_profile] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> prepaid-profile prepaid2</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid2]<strong> quota-out redirect http_redirect_profile</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-prepaid-profile-prepaid2] <strong>quit</strong></pre>
</li><li>Apply prepaid profiles in the EDSG service policy view.<p># Apply the prepaid profile <strong>prepaid1</strong> to the EDSG service policy <strong>service_edsg1</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> service-policy name service_edsg1 edsg</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg1]<strong> prepaid-profile prepaid1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg1] <strong>quit</strong></pre>
<p># Apply the prepaid profile <strong>prepaid2</strong> to the EDSG service policy <strong>service_edsg2</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> service-policy name service_edsg2 edsg</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg2] <strong>prepaid-profile prepaid2</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-service-policy-service_edsg2] <strong>quit</strong></pre>
</li></ol>
</li><li>Configure BAS interfaces, upstream interfaces, and an interface connecting the BRAS to servers.<ol type="a"><li>Create a virtual template.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface Virtual-Template 1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-Virtual-Template1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-Virtual-Template1] <strong>quit</strong></pre>
</li><li>Configure BAS interfaces.<pre class="screen">
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface GigabitEthernet<span>0/1/2</span>.1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>.1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>.1] <strong>user-vlan 1 1000 qinq 100</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>.1-vlan-1-1000-QinQ-100-100] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>.1] <strong>pppoe-server bind virtual-template 1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>.1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>.1] <strong>bas</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>.1-bas] <strong>access-type layer2-subscriber default-domain pre-authentication domain1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>.1-bas] <strong>authentication-method ppp web</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>.1-bas] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>.1-bas] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>.1] <strong>quit</strong></pre>
</li><li>Configure upstream interfaces.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface GigabitEthernet<span>0/1/0</span>.1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>.1] <strong>vlan-type dot1q 1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>.1] <strong>ip address 192.168.100.1 255.255.255.0</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>.1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>.1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface GigabitEthernet<span>0/1/0</span>.2</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>.2] <strong>vlan-type dot1q 1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>.2] <strong>ip address 192.168.200.1 255.255.255.0</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>.2] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet0/1/0.2] <strong>quit</strong></pre>
</li><li>Configure an interface connecting the BRAS to the policy server, AAA server, and portal server.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface GigabitEthernet<span>0/1/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>ip address 10.10.10.1 255.255.255.0</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
</li></ol>
</li><li>Configure online users.<p># Configure the RADIUS server to deliver the RADIUS attribute User-Password with a value of <strong>YsHsjx_202206</strong> for PPPoE user 1 and PPPoE user 2.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The shared key configured for a RADIUS server group determines the value of the User-Password attribute.</p>
</div></div>
<p># Configure the AAA server to deliver the RADIUS attribute HW-Account-Info containing Aservice_edsg1 for user 1.</p>
<p># Configure the AAA server to deliver the RADIUS attribute HW-Account-Info containing Aservice_edsg2 for user 2.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The HW-Account-Info attribute starting with <strong>A</strong> followed by a service policy name is used in authentication response packets to deliver EDSG services that automatically take effect after being delivered.</p>
</div></div>
</li><li>Set user 1's prepaid time on the AAA server.<p># Configure the AAA server to deliver the RADIUS attribute Session-Timeout with a value of 120s for user 1. This attribute indicates the remaining available time of the EDSG service.</p>
<p># Display the online user IDs of the EDSG service.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display value-added-service user edsg</strong>
The used user id tables are: 
    128000 
    128001 </pre>
<p># Display information about the EDSG service with a user ID of 128000 and a service index of 0 when the user has used the EDSG service for 60s.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display value-added-service user user-id 128000 edsg service-index 0   </strong>
------------------------------------------------------- 
   Service index                      : 0 
   Service name                       : service_edsg1 
   Service type                       : EDSG 
   Service state                      : Active 
   Service group                      : s_1m 
   Service group priority             : 0 
   Authentication method              : None 
   Account method                     : Radius 
   Radius server template             : rad_group1 
   Account session id                 : HUAWEI05001SSG000100f5fcb5128034 
   Service online time(HH:MM:SS)      : 00:01:00 
   Up committed information rate      : 1000(kbps) 
   Up Peak information rate           : 1000(kbps) 
   Up committed burst size            : 187000(bytes) 
   Up Peak burst size                 : 187000(bytes) 
   Down committed information rate    : 1000(kbps) 
   Down Peak information rate         : 1000(kbps) 
   Down committed burst size          : 187000(bytes) 
   Down Peak burst size               : 187000(bytes) 
   Up flow packets(high, low)         : (0, 0) 
   Up flow bytes(high, low)           : (0, 0) 
   Down flow packets(high, low)       : (0, 0) 
   Down flow bytes(high, low)         : (0, 0) 
   Prepaid state                      : Monitoring 
   Time quota                         : 60(seconds) 
   Time threshold                     : 120(seconds) 
  -------------------------------------------------------  </pre>
<p># Display service deactivation records. The command output shows that the EDSG service automatically becomes invalid after the user has been online for more than 120s.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display service deactivate-record</strong>
 ------------------------------------------------------------------- 
  Policy name        : service_edsg1 
  User ID            : 128000 
  Service index      : 0 
  Access time        : 2013-10-17 17:41:03 
  Deactivate time    : 2013-10-17 17:45:33 
  Deactivate reason  : The server does not reply with prepaid authorization response </pre>
<p># Display information about HTTPS redirect with a cipher suite configured.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display access https-redirect information</strong>
---------------------------------------------  
Certificate source        : Imported  
---------------------------------------------  
Imported certificate info  
--------------------------------------------- 
Last import time         : 2020-03-27 16:16:01  
Last delete time         : 2020-03-27 03:17:04  
Imported cert file       : cert.der key der key.der  
Imported cert file size  : 924 (Bytes)  
Certificate valid time   : 2020-03-27 03:26:44---2021-03-27 03:26:44  
Pub key                  : RSA (1024 Bits)  
---------------------------------------------  
Self-signed certificate info  
---------------------------------------------  
Pub key                  : RSA (2048 Bits)  
---------------------------------------------  
Supported cipher-suites   
---------------------------------------------  
c02b: TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256(TLS1.2)
c02f: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256(TLS1.2)  
1301: TLS_AES_128_GCM_SHA256(TLS1.3)  
1302: TLS_AES_256_GCM_SHA384(TLS1.3)  
--------------------------------------------- </pre>
</li><li>Configure user 2's prepaid volume on the AAA server.<p># Configure the AAA server to deliver the RADIUS attribute HW-Remanent-Volume with a value of 100 MB for user 2. This attribute indicates the remaining available volume of the user.</p>
<p># Display status information of the prepaid profile <strong>prepaid2</strong>.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display prepaid-profile name prepaid2</strong>
  ------------------------------------------------                               
   Prepaid-profile-index        : 1                                               
   Prepaid-profile-name         : prepaid2                                        
   Prepaid-password             : ******                                          
   Reference-count              : 0                                               
   Authentication-scheme-name   : auth1                                           
   Accounting-scheme-name       : acct1                                           
   Radius-server-template       : rad_group1                                          
   Time-threshold               : 300(s)                                           
   Volume-threshold             : 20(Mbytes)                                      
   Quota-out-action             : service deactivate                              
   HTTP-redirect-profile        : http_redirect_profile
   Service Volumequota apply direction: both
  ------------------------------------------------                                     </pre>
<p># Display detailed information about the EDSG service with a user ID of 128001 and a service index of 0.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display value-added-service user user-id 128001 edsg service-index 0</strong>
------------------------------------------------------- 
   Service index                      : 0 
   Service name                       : service_edsg2 
   Service type                       : EDSG 
   Service state                      : Active 
   Service group                      : s_2m 
   Service group priority             : 0 
   Authentication method              : None 
   Account method                     : Radius 
   Radius server template             : rad_group1 
   Account session id                 : HUAWEI05001SSG000100f5fcb5128034 
   Service online time(HH:MM:SS)      : 00:04:28 
   Up committed information rate      : 6000(kbps) 
   Up Peak information rate           : 6000(kbps) 
   Up committed burst size            : 1122000(bytes) 
   Up Peak burst size                 : 1122000(bytes) 
   Down committed information rate    : 6000(kbps) 
   Down Peak information rate         : 6000(kbps) 
   Down committed burst size          : 1122000(bytes) 
   Down Peak burst size               : 1122000(bytes) 
   Up flow packets(high, low)         : (0, 248230) 
   Up flow bytes(high, low)           : (0, 25815920) 
   Down flow packets(high, low)       : (0, 0) 
   Down flow bytes(high, low)         : (0, 0) 
   Prepaid state                      : Exhausted       
   Volume quota                      : (0, 8966321)(bytes)  
   <strong>Volume threshold                  : (0, 104857600)(bytes)</strong> 
   HTTP redirect profile              : http_redirect_profile 
   Source                             : Diameter 
  ------------------------------------------------------- </pre>
</li></ol>
</div>
<div class="section"><h4 class="sectiontitle">Configuration Files</h4><pre class="screen"># 
sysname <span class="keyword">Device</span>A 
# 
radius-server group rad_group1 
 radius-server shared-key-cipher %^%#x*CgITP4C<font style="font-size:8pt" Face="Courier New" >~</font>;q,*+DEW'JBWe#)"Q&amp;|7bX]b:Y&lt;{w'%^%# 
 radius-server authentication 10.10.10.2 1812 weight 0 
 radius-server accounting 10.10.10.2 1813 weight 0  
# 
ip pool edsg_pool bas local 
 gateway 172.31.0.0 255.255.0.0 
 section 0 172.31.0.1 172.31.255.255
#                               
service-policy download local radius rad_group1 password cipher %^%#_;S_ObuBtODzOCB&gt;_@#1|r!6-f+&gt;*9wXMO'wBv`2%^%# 
#
access https-redirect
 self-signed rsa modulus 2048
 cipher-suite support c02f c02b 1301 1302
# 
value-added-service enable 
# 
service-group s_1m 
service-group s_2m 
# 
acl number 6020 
 rule 5 permit tcp source service-group s_1m destination ip-address 192.168.100.0 0.0.0.255 destination-port eq 443  
# 
acl number 6021 
 rule permit tcp source service-group s_2m destination ip-address 192.168.200.0 0.0.0.255 destination-port eq 443 
# 
traffic classifier c1 operator or 
 if-match acl 6020 
# 
traffic classifier c2 operator or 
 if-match acl 6021 
# 
traffic behavior b1 
 https-redirect
# 
traffic behavior b2 
 https-redirect
# 
traffic policy traffic_policy_edsg            
 share-mode 
 classifier c1 behavior b1 
 classifier c2 behavior b2  
# 
aaa 
 #
 authentication-scheme auth1 
  authentication-mode radius 
 #
 accounting-scheme acct1 
  accounting-mode radius 
 #
 domain domain1 
  radius-server group rad_group1 
  ip-pool edsg_pool
#  
http-redirect-profile http_redirect_profile                                      
 web-server url http://www.huawei.com                                               
 web-server mode post                                                            
#                                                
prepaid-profile prepaid1                                                         
 password cipher %^%#w^Mc//[^xWxy&lt;`A;jX:)+XW8(CHcPWNdpsP@:^n'%^%#                                
 authentication-scheme auth1                                                     
 accounting-scheme acct1                                                         
 radius-server group rad_group1                                                      
 threshold time 60 seconds                                                       
 threshold volume 10 mbytes                                                      
#                                          
prepaid-profile prepaid2                                                         
 password cipher %^%#9f(T=Ew#*(aAnoEm{&lt;vWpE{NJ6{IH+8V*]M.ZRV*%^%#                                
 uthentication-scheme auth1                                                     
 accounting-scheme acct1                                                         
 radius-server group rad_group1                                                      
 threshold time 300 seconds                                                      
 threshold volume 20 mbytes                                                      
 quota-out redirect http_redirect_profile                                        
# 
service-policy name service_edsg1 edsg 
 service-group s_1m
 radius-server group rad_group1 
 authentication-scheme auth1 
 accounting-scheme acct1 
 rate-limit cir 1000 inbound 
 rate-limit cir 1000 outbound 
 prepaid-profile prepaid1 
# 
service-policy name service_edsg2 edsg 
 service-group s_2m
 radius-server group rad_group1 
 authentication-scheme auth1 
 accounting-scheme acct1 
 rate-limit cir 2000 inbound 
 rate-limit cir 2000 outbound 
 prepaid-profile prepaid2 
# 
interface GigabitEthernet<span>0/1/1</span> 
 ip address 10.10.10.1 255.255.255.0 
# 
interface GigabitEthernet<span>0/1/0</span>.1 
 vlan-type dot1q 1 
 ip address 192.168.100.1 255.255.255.0 
# 
interface GigabitEthernet<span>0/1/0</span>.2 
 vlan-type dot1q 2 
 ip address 192.168.200.1 255.255.255.0 
# 
<span>interface GigabitEthernet<span>0/1/2</span></span>
#
<span>interface GigabitEthernet<span>0/1/2</span>.1</span>
 user-vlan 1 1000 qinq 100 
 bas 
 # 
  access-type layer2-subscriber default-domain pre-authentication domain1 
  authentication-method ppp web   
# 
traffic-policy traffic_policy_edsg inbound 
traffic-policy traffic_policy_edsg outbound
# 
return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppox_cfg_0183.html">PPPoE Access Configuration Examples
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoxv6_cfg_0071.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>