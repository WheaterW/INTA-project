
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring RADIUS CAR">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0600.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0621.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0623.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00588052,w00437000,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="AAA (Access User)">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="z00588052,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001222087876">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring RADIUS CAR</title>
</head>
<body><a name="EN-US_TASK_0000001222087876"></a><a name="EN-US_TASK_0000001222087876"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring RADIUS CAR</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001222087876__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>By default, RADIUS packets are sent to the CPU of a device through the CPCAR channel. If a packet is valid (the Authenticator field value is correct and authentication or accounting has been successfully performed), the device adds the source and destination IP addresses and port number carried in the packet to a whitelist. If the source and destination IP addresses and port number of subsequently received packets match those in the whitelist, the packets are sent to the CPU through the whitelist channel. If the device does not receive packets from the same server or device within 1 hour after a whitelist entry is generated, the entry ages out. When passing through the whitelist channel, packets pass through the following CAR channels in sequence: RADIUS whitelist session-CAR channel, RADIUS whitelist CAR channel, and total CAR channel. Passing through the RADIUS whitelist session-CAR channel is optional.</p>
<p>Adjust bandwidth parameters if the defaults do not meet service requirements.</p>
<p>In RADIUS proxy authentication, you need to comprehensively consider the following factors when estimating the RADIUS whitelist bandwidth:</p>
<ul><li>Suppression threshold for the number of active RADIUS proxy sessions. It can be configured using the <a href="cmdqueryname=access-speed+adjustment+system-state+radius-proxy+active-session+threshold"><b><span class="cmdname">access-speed adjustment system-state radius-proxy active-session threshold</span></b></a> command. The default value is 250.</li><li>Load balancing mode for user-to-network traffic and forwarding mode for network-to-user traffic. User-to-network RADIUS packets can be load balanced among multiple interface boards for processing. However, RADIUS packets sent from a RADIUS server to a BRAS cannot be load balanced among multiple interface boards. Instead, they are processed only on one interface board. As such, you are advised to use different interface boards for user-to-network RADIUS packets and network-to-user RADIUS packets. For example, a BRAS has three interface boards: boards 3, 4, and 5. Board 3 and 4 load balance user-to-network RADIUS packets, and board 5 processes network-to-user RADIUS packets.</li><li>Number of RADIUS packets that the BRAS needs to process each time a user goes online. Assume that an 802.1X user requests to go online. During authentication, the BRAS needs to interact with the RADIUS server 22 times. The AC sends 11 Access-Request packets to the BRAS, and the RADIUS server sends 10 Access-Challenge packets and one Access-Accept packet to the BRAS.</li><li>User access rate. Assume that the default suppression threshold for the number of active RADIUS proxy sessions (250) is used. If it takes 1s for each user to go online, the BRAS processes access for 250 users per second. If it takes 100 ms for each user to go online, the BRAS processes access for 2500 users per second.</li></ul>
<p>Assume that a BRAS has three interface boards: boards 3, 4, and 5. User-to-network RADIUS packets are load balanced among two interface boards (boards 3 and 4). RADIUS packets sent from a RADIUS server to a BRAS are processed on board 5. The suppression threshold for the number of active RADIUS proxy sessions is 250. It takes 1s for each user to go online.</p>
<p>Each of the boards in slots 3 and 4 processes user-to-network RADIUS packets of 125 users per second.</p>
<p>CIR of board 3 and board 4 = 125 active sessions per second x 11 packets x 128 bytes x 8 = 1,408,000 bits per second = 1408 kbps</p>
<p>CBS of board 3 and board 4 = 125 active sessions x 11 packets x 128 bytes = 176,000 bytes</p>
<p>Board 5 processes network-to-user RADIUS packets of 250 users per second.</p>
<p>CIR of board 5 = 250 active sessions per second x 11 packets x 128 bytes x 8 = 2,816,000 bits per second = 2816 kbps</p>
<p>CBS of board 5 = 250 active sessions x 11 packets x 128 bytes = 352,000 bytes</p>
<p>After the RADIUS whitelist bandwidth is changed, the total CAR bandwidth needs to be adjusted accordingly.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001222087876__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure whitelist session-CAR for RADIUS.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=whitelist+session-car+radius"><b><span class="cmdname">whitelist session-car radius </span></b></a>{ <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i> | <strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i> | <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i> | <strong><span>pbs</span></strong> pbs-value } *</span><p><p>Whitelist session-CAR parameters are configured for RADIUS.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=whitelist+session-car+radius+disable"><b><span class="cmdname">whitelist session-car radius disable</span></b></a></span><p><p>Whitelist session-CAR is disabled for RADIUS.</p>
</p><p><p>Whitelist session-CAR can be disabled for RADIUS only when this function is abnormal. Under normal circumstances, enabling whitelist session-CAR for RADIUS is recommended.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure whitelist CAR for RADIUS.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=cpu-defend+policy"><b><span class="cmdname">cpu-defend policy</span></b></a> <i><span class="varname">policy-number</span></i></span><p><p>An attack defense policy is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=car+whitelist+radius"><b><span class="cmdname">car whitelist radius </span></b></a>{ <strong><strong><span>cir</span></strong></strong> <em><i><span class="varname">cir-value</span></i></em> | <strong><strong><span>cbs</span></strong></strong> <em><i><span class="varname">cbs-value</span></i></em> } *</span><p><p>The bandwidth for incoming packets to be sent to the CPU is configured for the whitelist.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the policy view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=slot"><b><span class="cmdname">slot</span></b></a> <i><span class="varname">slot-id</span></i></span><p><p>The slot view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=cpu-defend-policy"><b><span class="cmdname">cpu-defend-policy</span></b></a> <i><span class="varname">policy-number</span></i></span><p><p>The attack defense policy is bound to the interface board.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure total CAR.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=cpu-defend+policy"><b><span class="cmdname">cpu-defend policy</span></b></a> <i><span class="varname">policy-number</span></i></span><p><p>An attack defense policy is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=car+total-packet"><b><span class="cmdname">car total-packet</span></b></a> { <strong><strong><span>high</span></strong></strong> | <strong><strong><span>middle</span></strong></strong> | <strong><strong><span>low</span></strong></strong> | <i><span class="varname">total-packet-rate</span></i></span><p><p>A total rate is set for sending packets to the CPU.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the policy view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=slot"><b><span class="cmdname">slot</span></b></a> <em>slot-id</em></span><p><p>The interface board view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=cpu-defend+policy"><b><span class="cmdname">cpu-defend policy</span></b></a> <i><span class="varname">policy-number</span></i></span><p><p>The attack defense policy is bound to the interface board.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
<p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If an attack defense policy is bound to an interface board, run the <a href="cmdqueryname=display+this"><b><span class="cmdname">display this</span></b></a> command in the slot view to check the policy. Then, enter the attack defense policy view and modify CAR parameters.</p>
</div></div>
</p></li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0600.html">Configuring a Device as a RADIUS Client
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0621.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0623.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>