
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Shortening the User Address Lease Before a DHCPv4 Server Restarts">
<meta name="abstract" content="The user address lease can be shortened before a DHCPv4 server restarts. This change allows DHCP users to get online within a short period of time after the DHCPv4 server restarts due to an upgrade without restarting the terminal.">
<meta name="description" content="The user address lease can be shortened before a DHCPv4 server restarts. This change allows DHCP users to get online within a short period of time after the DHCPv4 server restarts due to an upgrade without restarting the terminal.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0041.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0253.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0039.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,z00603461,w00800033,z00588052,c00549182,w00556928,l00593348,ipv4-address_ne,w00606909,w00447999,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="l00593348">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373797">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Shortening the User Address Lease Before a DHCPv4 Server Restarts</title>
</head>
<body><a name="EN-US_TASK_0172373797"></a><a name="EN-US_TASK_0172373797"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Shortening the User Address Lease Before a DHCPv4 Server Restarts</h1>
<div class="taskbody"><p>The user address lease can be shortened before a DHCPv4 server restarts. This change allows DHCP users to get online within a short period of time after the DHCPv4 server restarts due to an upgrade without restarting the terminal.</p>
<div class="context"><a name="EN-US_TASK_0172373797__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When the <span class="keyword">NE40E</span> is being upgraded, DHCP users cannot detect that the link goes Down and dial-up again like PPP users. Therefore, these users do not redial to get online. Instead, the terminal must be restarted to trigger a DHCP request so that the users can obtain IP addresses to get online again. In the current upgrade solution, the address pool lease time is shortened at the lease renewal time before the upgrade date. For example, if the address pool lease renewal time is 1.5 days, the address pool lease is changed to 30 minutes and the lease renewal time is changed to 15 minutes 1.5 days before the upgrade. This solution ensures that the terminal can send lease renewal packets in a shorter period of time after the device is upgraded to allow DHCP users to get online again.</p>
<div class="p">This upgrade solution has two disadvantages:<ul><li><p>Changing the address pool lease takes effect only for users that obtain addresses from local address pools. The address lease delivered by a RADIUS server is not changed. The users that have obtained addresses from the RADIUS server have to wait a comparatively long period of time to get online again.</p>
</li><li><p>The address pool lease is configured in the address pool view. Manually changing the lease configurations of all the address pools brings a huge workload.</p>
</li></ul>
</div>
<p>Using the <a href="cmdqueryname=dhcp+upgrade"><b><span class="cmdname">dhcp upgrade</span></b></a> command in the system view to change the address lease for all DHCP users attached to the device solves these problems.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373797__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=dhcp+upgrade"><b><span class="cmdname">dhcp upgrade</span></b></a> <strong><span>lease</span></strong> <i><span class="varname">days</span></i> [ <i><span class="varname">hours</span></i> [ <i><span class="varname">minutes</span></i> ] ] [ <strong><span>renewal-time</span></strong> <i><span class="varname">days</span></i> [ <i><span class="varname">hours</span></i> [ <i><span class="varname">minutes</span></i> ] ] ] [ <strong><span>rebinding-time</span></strong> <i><span class="varname">days</span></i> [ <i><span class="varname">hours</span></i> [ <i><span class="varname">minutes</span></i> ] ] ]</span></span><p><p>The address lease for all DHCPv4 users attached to the device is configured.</p>
<p>After the <strong>dhcp upgrade</strong> command is used, the lease configured in the system view takes effect for new users, online users that need to renew the lease, users using addresses in local address pools, and users using addresses delivered by a RADIUS server.</p>
<p>No configuration file will be generated after the <strong>dhcp upgrade</strong> command is used. To view the configuration result, run the <strong>display dhcp upgrade</strong> command. The <strong>dhcp upgrade</strong> command becomes invalid after the device restarts.</p>
<div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>If a short lease is configured, a large number of users will renew their lease at the same time, causing high CPU usage. Therefore, configuring a short lease is not recommended unless the device needs to be upgraded.</p>
<p>This command is automatically deleted after the device is upgraded.</p>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0041.html">Adjusting DHCPv4 Service Parameters
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0253.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0039.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>