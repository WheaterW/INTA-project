
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring a Device to Insert the Option 18 and Option 37 Attributes into the Messages to Be Sent to the DHCPv6 Server">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv6_address_cfg_0012.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv6_address_cfg_0771.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv6_address_cfg_01641.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,z00603461,w00800033,z00588052,c00549182,ipv6-address_ne,w00556928,l00593348,w00606909,w00447999,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv6 Address Management">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv6 Address Management">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPv6 Address Management">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPv6 Address Management">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="l00593348">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373865">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring a Device to Insert the Option 18 and Option 37 Attributes into the Messages to Be Sent to the DHCPv6 Server</title>
</head>
<body><a name="EN-US_TASK_0172373865"></a><a name="EN-US_TASK_0172373865"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring a Device to Insert the Option 18 and Option 37 Attributes into the Messages to Be Sent to the DHCPv6 Server</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0172373865__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When addresses are assigned from a remote IPv6 address pool, you can configure a device to insert the user-defined Option 18 and Option 37 attributes into the Relay-Forward messages to be sent to the DHCPv6 server.</p>
<p>Option 18 identifies the interface on which client messages are received on a relay agent, facilitating the forwarding of Relay-Reply messages. A server can also use Option 18 to assign addresses or prefixes. The function of Option 18 is equivalent to that of the circuit ID in DHCPv4 Option 82.</p>
<p>Option 37 carries information about a remote user. This attribute is added by a relay agent to a Relay-Forward message. The function of Option 37 is equivalent to that of the remote ID in DHCPv4 Option 82.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373865__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ .<i><span class="varname">subinterface-number</span></i> ]</span><p><p>The interface view is displayed.</p>
</p></li><li><span>Insert the user-defined Option 18 and Option 37 attributes into the Relay-Forward messages to be sent to the DHCPv6 server.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This configuration can be performed in either the interface or BAS interface view. If the configuration is performed in both the interface view and BAS interface view, the configuration in the BAS interface view takes effect.</p>
</div></div>
</p><ul><li>In the interface view, perform the following operations:<ul><li>Run the <a href="cmdqueryname=dhcpv6+relay+option-insert"><b><span class="cmdname">dhcpv6 relay option-insert</span></b></a> {<strong><span> interface-id mode</span></strong> { <strong><span>cn-telecom</span></strong> | <strong><span>tr-101</span></strong> } | <strong>remote-id</strong> | <strong>subscriber-id</strong> } command to enable the function to insert relay options into DHCPv6 messages.</li><li>Run the <a href="cmdqueryname=dhcpv6+relay+option-insert+mode+type1"><b><span class="cmdname">dhcpv6 relay option-insert mode type1</span></b></a> command to insert the Option 18 and Option 37 attributes into the Relay-Forward messages to be sent to the DHCPv6 server in the OSP format in a BAS relay scenario. <span>Alternatively, run the <a href="cmdqueryname=dhcpv6+relay+option-insert"><b><span class="cmdname">dhcpv6 relay option-insert</span></b></a> <i><span class="varname">option-code</span></i>2 <strong><span>mode cn-telecom version2</span></strong> command to insert the Option 18 attribute into the Relay-Forward messages to be sent to the DHCPv6 server.</span></li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>The <a href="cmdqueryname=dhcpv6+relay+option-insert+mode+type1"><b><span class="cmdname">dhcpv6 relay option-insert mode type1</span></b></a> [ <strong><span>remote-id</span></strong> { <strong><span>neba</span></strong> | <strong><span>vula</span></strong> } ]<span>, <a href="cmdqueryname=dhcpv6+relay+option-insert"><b><span class="cmdname">dhcpv6 relay option-insert</span></b></a> <i><span class="varname">option-code</span></i>2 <strong><span>mode cn-telecom version2</span></strong>, </span> and <a href="cmdqueryname=dhcpv6+relay+option-insert"><b><span class="cmdname">dhcpv6 relay option-insert</span></b></a> { <strong><span>interface-id</span></strong> <strong><span>mode</span></strong> { <strong><span>cn-telecom</span></strong> | <strong><span>tr-101</span></strong> } | <strong><span>remote-id</span></strong> } commands are mutually exclusive.</li><li>The <a href="cmdqueryname=dhcpv6+relay+option-insert+mode+type1"><b><span class="cmdname">dhcpv6 relay option-insert mode type1</span></b></a> [ <strong><span>remote-id</span></strong> { <strong><span>neba</span></strong> | <strong><span>vula</span></strong> } ] command takes effect in real time. After the command configuration is added, the device enables the function to insert the Option 18 and Option 37 attributes into the messages to be sent to the DHCPv6 server in the OSP format for online users on the current interface. After the command configuration is deleted, the device disables this function for online users on the current interface.</li><li><span>The <a href="cmdqueryname=dhcpv6+relay+option-insert"><b><span class="cmdname">dhcpv6 relay option-insert</span></b></a> <i><span class="varname">option-code</span></i>2 <strong><span>mode cn-telecom version2</span></strong></span> command takes effect in real time. After the command configuration is added, the device enables the function to <span>insert the Option 18 attribute into the Relay-Forward messages </span>to be sent to the DHCPv6 server for online users on the current interface. After the command configuration is deleted, the device disables this function for online users on the current interface.</li><li>The <a href="cmdqueryname=dhcpv6+relay+option-insert"><b><span class="cmdname">dhcpv6 relay option-insert</span></b></a> { <strong><span>interface-id</span></strong> <strong><span>mode</span></strong> { <strong><span>cn-telecom</span></strong> | <strong><span>tr-101</span></strong> } | <strong><span>remote-id</span></strong> } command takes effect in real time in BAS relay scenarios. After the command configuration is added, the device enables the function to insert the Option 18 and Option 37 attributes into the messages to be sent to the DHCPv6 server in the specified format for online users on the current interface. After the command configuration is deleted, the device disables this function for online users on the current interface.</li></ul>
</div></div>
</li><li>In the BAS interface view, perform the following operations:<ol type="a"><li>Run the <a href="cmdqueryname=bas"><b><span class="cmdname">bas</span></b></a> command to enter the BAS interface view.</li><li>Run the <a href="cmdqueryname=access-type"><b><span class="cmdname">access-type</span></b></a> command to set the access type to Layer 2 common user access, Layer 2 leased line user access, Layer 3 common user access, Layer 3 leased line user access, or Layer 2 VPN leased line user access.</li><li>Run the <a href="cmdqueryname=dhcpv6+option-18+rebuild+self-define"><b><span class="cmdname">dhcpv6 option-18 rebuild self-define</span></b></a> <i><span class="varname">self-define-value</span></i> [ <i><span class="varname">add-domain-description</span></i> ] <strong><span>send-to-server</span></strong> command to enable the device to insert the user-defined Option 18 attribute into the Relay-Forward messages to be sent to the DHCPv6 server.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>The <i><span class="varname">add-domain-description</span></i> parameter takes effect only after a domain description has been configured using the <a href="cmdqueryname=description"><b><span class="cmdname">description </span></b></a><i><span class="varname">description-text</span></i> command in the domain view. For configuration details, see <a href="dc_ne_aaa_cfg_1124.html">(Optional) Configuring DHCP Messages to Carry Domain Description</a>.</li></ul>
</div></div>
</li><li>Run the <a href="cmdqueryname=dhcpv6+option-37+rebuild+self-define"><b><span class="cmdname">dhcpv6 option-37 rebuild self-define</span></b></a> <i><span class="varname">self-define-value</span></i> <strong><span>send-to-server</span></strong> command to enable the device to insert the user-defined Option 37 attribute into the Relay-Forward messages to be sent to the DHCPv6 server.</li></ol>
</li></ul>
</li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv6_address_cfg_0012.html">Configuring a DHCPv6 Relay Agent on the User Side
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv6_address_cfg_0771.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv6_address_cfg_01641.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>