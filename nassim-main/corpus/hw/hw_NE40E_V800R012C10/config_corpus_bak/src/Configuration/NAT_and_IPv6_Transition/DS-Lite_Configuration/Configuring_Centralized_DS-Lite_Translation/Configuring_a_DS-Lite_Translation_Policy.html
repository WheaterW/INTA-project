
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a DS-Lite Translation Policy">
<meta name="abstract" content="You can configure DS-Lite translation policies to determine whether to implement ACL-based filtering of the traffic introduced to a service board and to redistribute the traffic to different DS-Lite address pools for DS-Lite translation.">
<meta name="description" content="You can configure DS-Lite translation policies to determine whether to implement ACL-based filtering of the traffic introduced to a service board and to redistribute the traffic to different DS-Lite address pools for DS-Lite translation.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0023.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0024.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0026.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="g00814582">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374716">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a DS-Lite Translation Policy</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172374716"></a><a name="EN-US_TASK_0172374716"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a DS-Lite Translation Policy</h1>
<div class="taskbody"><p>You can configure DS-Lite translation policies to determine whether to implement ACL-based filtering of the traffic introduced to a service board and to redistribute the traffic to different DS-Lite address pools for DS-Lite translation.</p>
<div class="context"><a name="EN-US_TASK_0172374716__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">A DS-Lite translation policy for user traffic distributed to a service board can be configured to:<ul><li><p>Match ACL rules:</p>
<p>An ACL and a DS-Lite address pool must be specified. If packets match the ACL, and the action specified in the ACL rule is <strong>permit</strong>, DS-Lite translates the packets using addresses in the DS-Lite address pool.</p>
</li><li><p>Not match ACL rules:</p>
<p>User traffic distributed to a service board does not need to match any ACL rule. By default, the addresses of user traffic are translated using addresses from a specified DS-Lite address pool.</p>
</li></ul>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172374716__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a DS-Lite translation policy to match ACL rules.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ds-lite+instance"><b><span class="cmdname">ds-lite instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <strong><span>id</span></strong> <i><span class="varname">id</span></i> ]</span></span><p><p>The DS-Lite instance view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=ds-lite+filter"><b><span class="cmdname">ds-lite filter</span></b></a>  { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } <strong><span>outbound</span></strong> command to filter DS-Lite packets based on inner-layer IPv4 information before configuring DS-Lite translation.</span><p><p>If you need to filter out invalid packets such as spam before DS-Lite translation, perform this step to configure filtering rules. If the action defined in the ACL rule is deny, the packet is discarded. If the action defined in the ACL rule is permit, DS-Lite translation is performed. DS-Lite translation can be performed for packets that do not match ACL rules.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ds-lite+outbound"><b><span class="cmdname">ds-lite outbound</span></b></a> <i><span class="varname">acl-number</span></i> <strong><span>address-group</span></strong> <i><span class="varname">address-group-name</span></i></span></span><p><p>An ACL is bound to an address pool, and a DS-Lite translation policy is configured to match ACL rules.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When performing this step, ensure that the address segment of the ACL rule used in the translation policy covers the address segment of the ACL rule used in the traffic diversion policy. Otherwise, service interruptions may occur. To prevent such interruptions, use either of the following measures:</p>
<ul><li>Keep <i><span class="varname">acl-number</span></i> in this step consistent with that in the traffic diversion policy.</li><li>Configure a default address pool in this step for translating the addresses unmatched by the configured traffic translation policy. For example:<pre class="screen">The ACL rule referenced by the traffic diversion policy is as follows:
#
acl ipv6 3000
 rule 1 permit ipv6 source 2001:db8::1 64
#
acl ipv6 3999 //Default address pool configuration
 rule 1 permit ipv6  //Default address pool configuration
The translation policy is as follows:
ds-lite instance ds-lite1 id 1
 ds-lite address-group group1 group-id 1 10.10.1.0 10.10.1.254
 ds-lite address-group group2 group-id 2 10.10.1.255 10.10.1.255 //Default address pool configuration
 ds-lite outbound 3000 address-group address-group1
 ds-lite outbound 3999 address-group address-group2 //Default address pool configuration</pre>
<p></p>
</li></ul>
</div></div>
</p></li></ol>
</li><li><span>Configure a DS-Lite translation policy not to match ACL rules.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ds-lite+instance"><b><span class="cmdname">ds-lite instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <strong><span>id</span></strong> <i><span class="varname">id</span></i> ]</span></span><p><p>The DS-Lite instance view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=ds-lite+filter"><b><span class="cmdname">ds-lite filter</span></b></a>  { <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> } <strong><span>outbound</span></strong> command to filter DS-Lite packets based on inner-layer IPv4 information before configuring DS-Lite translation.</span><p><p>If you need to filter out invalid packets such as spam before DS-Lite translation, perform this step to configure filtering rules. If the action defined in the ACL rule is deny, the packet is discarded. If the action defined in the ACL rule is permit, DS-Lite translation is performed. DS-Lite translation can be performed for packets that do not match ACL rules.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ds-lite+outbound"><b><span class="cmdname">ds-lite outbound</span></b></a> <strong><span>any</span></strong> <strong><span>address-group</span></strong> <i><span class="varname">address-group-name</span></i></span></span><p><p>A DS-Lite translation policy is configured not to allow packets to match against ACL rules.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0023.html">Configuring Centralized DS-Lite Translation
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0024.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0026.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>