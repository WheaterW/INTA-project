
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring NAT64 ALG">
<meta name="abstract" content="This section describes how to configure the NAT64 application level gateway (ALG) function.">
<meta name="description" content="This section describes how to configure the NAT64 application level gateway (ALG) function.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0055.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0027.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT64">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT64">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT64">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="ccms">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0172374913">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring NAT64 ALG</title>
</head>
<body><a name="EN-US_CONCEPT_0172374913"></a><a name="EN-US_CONCEPT_0172374913"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring NAT64 ALG</h1>
<div><p>This section describes how to configure the NAT64 application level gateway (ALG) function.</p>
<div class="section"><h4 class="sectiontitle">Usage Scenario</h4><p>ALG is short for application level gateway. Most application layer protocol packets carry user IP addresses and port numbers. NAT64 translates only network layer addresses and transport layer ports. Therefore, you need an ALG to translate the IP addresses and port numbers carried in the Data field of application layer packets. NAT64 ALG provides transparent translation for special application layer protocols.</p>
<p>NAT64 translates only the IP addresses contained in user data packets and the port information in the Transmission Control Protocol (TCP)/User Datagram Protocol (UDP) headers of data packets. For special protocols (for example, FTP) the Data field in a packet contains IP address or port information. NAT64, however, does not take effect on an IP address or port information in the Data field of a packet. As a result, a protocol-specific connection fails to be established. A good way to solve the NAT64 translation issue for these special protocols is to use the ALG function. As a special translation agent for application layer protocols, the ALG interacts with NAT64. The ALG uses NAT64 state information to change the specific data in the Data field of IP packets so that application layer protocols can run across internal and external networks.</p>
</div>
<div class="section"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring NAT64 ALG, complete the following tasks:</p>
<ul><li>Configure basic NAT64 functions.</li><li>Configure centralized NAT64 translation.</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p>The system view is displayed.</p>
</li><li><p>Run <span><a href="cmdqueryname=nat64+alg+server-address"><b><span class="cmdname">nat64 alg server-address</span></b></a> <i><span class="varname">server-ip</span></i> [ <i><span class="varname">end-ip</span></i> ] <strong><span>protocol</span></strong> { <strong><span>all</span></strong> | <strong><span>ftp</span></strong> | <strong><span>dns</span></strong> | <strong><span>http</span></strong> }</span></p>
<p>An IPv4 server address list of NAT64 ALG is configured for application layer protocols.</p>
</li><li>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p>The configuration is committed.</p>
</li><li>Run <span><a href="cmdqueryname=nat64+instance"><b><span class="cmdname">nat64 instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <a href="cmdqueryname=id"><b><span class="cmdname">id</span></b></a> <i><span class="varname">id</span></i> ]</span><p>The NAT64 instance view is displayed.</p>
</li><li><p>Run <span><a href="cmdqueryname=nat64+alg"><b><span class="cmdname">nat64 alg</span></b></a> { <strong><span>all</span></strong> | <strong><span>dns</span></strong> | { <strong><span>ftp</span></strong> [ <strong><span>rate-threshold</span></strong> <i><span class="varname">value</span></i> ] } | <strong><span>http</span></strong> }</span></p>
<p>NAT64 ALG is enabled for an application layer protocol.</p>
<p>After an IPv4 server address or an IPv4 server address list of NAT64 ALG for a specific or all application layer protocols is configured, the configuration can take effect only if the ALG function for the application layer protocols is enabled in the NAT64 instance view.</p>
</li><li>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p>The configuration is committed.</p>
</li></ol>
</div>
<div class="example"><a name="EN-US_CONCEPT_0172374913__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Checking the Configurations</h4><p>After configuring the NAT ALG function, you can check the NAT64 instance configuration, including NAT ALG information.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+nat64+instance"><b><span class="cmdname">display nat64 instance</span></b></a> [ <i><span class="varname">instance-name</span></i> ] command to check the configuration of a NAT64 instance.</p>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0001.html">NAT64 Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0055.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat64_cfg_0027.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>