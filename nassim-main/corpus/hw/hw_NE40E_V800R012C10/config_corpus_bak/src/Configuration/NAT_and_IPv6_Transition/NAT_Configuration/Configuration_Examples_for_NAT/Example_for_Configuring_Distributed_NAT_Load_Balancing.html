
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Distributed NAT Load Balancing">
<meta name="abstract" content="This section provides an example for configuring distributed NAT load balancing. After distributed NAT load balancing is configured, IP addresses of multiple home users can be balanced to different CPUs for NAT in the same NAT service instance.">
<meta name="description" content="This section provides an example for configuring distributed NAT load balancing. After distributed NAT load balancing is configured, IP addresses of multiple home users can be balanced to different CPUs for NAT in the same NAT service instance.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0056.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0095.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0081_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001139835263">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Distributed NAT Load Balancing</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001139835263"></a><a name="EN-US_TASK_0000001139835263"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Distributed NAT Load Balancing</h1>
<div class="taskbody"><p>This section provides an example for configuring distributed NAT load balancing. After distributed NAT load balancing is configured, IP addresses of multiple home users can be balanced to different CPUs for NAT in the same NAT service instance.</p>
<div class="context"><a name="EN-US_TASK_0000001139835263__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_context65404383214110"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p1910578306214110">In the distributed NAT scenario shown in <a href="#EN-US_TASK_0000001139835263__en-us_task_0172374595_fig_dc_ne_cfg_nat_005701">Figure 1</a>, home users access a BRAS through PPPoE, IPoE, web authentication, or other ways. The BRAS implements user authentication, authorization, and accounting. It also provides NAT services to convert between the private addresses of home users and external public addresses in the CPU-based load balancing mode for home users to access the Internet.</p>
<p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p208263524214110">It is required that IP addresses of the home users (PC1 and PC2 in <a href="#EN-US_TASK_0000001139835263__en-us_task_0172374595_fig_dc_ne_cfg_nat_005701">Figure 1</a>) in the user group <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b16461170444">group1</strong> be evenly distributed to CPUs 0 and 1 of the NAT service board for NAT, so that these users can access the Internet.</p>
<div class="fignone" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_fig_dc_ne_cfg_nat_005701"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_fig_dc_ne_cfg_nat_005701"></a><a name="en-us_task_0172374595_fig_dc_ne_cfg_nat_005701"></a><span class="figcap"><b>Figure 1 </b>Distributed NAT load balancing</span><div class="note" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_note1843305403214110"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p834816599214110">Interface 1 on the BRAS in this example represents GE <span>0/2/0</span>.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_image418872419214110" src="images/fig_dc_ne_cfg_nat_0013.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001139835263__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_context251487424214110"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p84866260214110">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001139835263__en-us_task_0172374595_ol275700100214110"><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li740559193214110">Create a NAT load balancing instance.</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1355617940214110">Configure a CGN global static address pool.</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li702371510214110">Bind the NAT instance to the global address pool.</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li245161033214110">Configure NAT user information and RADIUS authentication on the BRAS.</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li707879702214110">Configure a NAT traffic diversion policy.</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li655055756214110">Configure a NAT traffic conversion policy.</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li137581122124">Configure a user-side interface.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001139835263__1.4.3"></a><a name="1.4.3"></a>
<div class="p" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_context1946940472214110"><h4 class="sectiontitle">Data Preparation</h4><div class="p" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p1374625902214110">To complete the configuration, you need the following data:<ul id="EN-US_TASK_0000001139835263__en-us_task_0172374595_ul1446082848214110"><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li639285419214110">NAT load balancing instance</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li2143364379214110">Name and ID of the NAT address pool and name of the global static address pool to be bound</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li377210463214110">User group name, ACL number, and UCL number</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li924390048214110">Information about the NAT traffic diversion policy</li></ul>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001139835263__1.4.4"></a><a name="1.4.4"></a>
<div class="p" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_context996268385214110"><h4 class="sectiontitle">Procedure</h4><ol id="EN-US_TASK_0000001139835263__en-us_task_0172374595_ol87296087214110"><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li424199765214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p2027225962214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li424199765214110"></a><a name="en-us_task_0172374595_li424199765214110"></a>Create a NAT load balancing instance.</p>
<ol type="a" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_ol231675645214110"><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1954084258214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p826710635214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1954084258214110"></a><a name="en-us_task_0172374595_li1954084258214110"></a>Set the maximum number of sessions that can be created on the CPU of the NAT service board to 6M.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen778102979214110">&lt;<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1729301003214110">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1168250692214110">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen48110844214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword11727238214110"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1678677189214110">HUAWEI</span>] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b960886913214110">sysname BRAS</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen411747804214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword882542631214110">*</span><span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword224449388214110">HUAWEI</span>] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b102235940214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen2283832115915">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword17622125019594"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b576312015568">vsm on-board-mode disable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen6578103435915">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword4176057145913">*</span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1997810811561">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen894077877214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword790956551214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b506564474214110">license</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen991850636214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1777757178214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-license] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b106852513214110">active nat session-table size 6 slot <span>1</span> </strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen394711961214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword397124023214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-license] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b2114011614214110">active nat session-table size 6 slot <span>2</span> </strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen420695265515">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword756719013569"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-license] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b195672020563">active nat bandwidth-enhance 40 slot <span>1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1561613523568">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1061614525566"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-license] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b15616105219560">active nat bandwidth-enhance 40 slot <span>2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1164372187214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword114678089214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-license] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b376980367214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1435027754214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p122622021214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1435027754214110"></a><a name="en-us_task_0172374595_li1435027754214110"></a>Create a service-instance group named <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b926584141912">groupa</strong> and bind it to service-location groups <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b4265154113192">1</strong> and <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b926513416193">2</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen901910666214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword232722736214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b2027366313214110">service-location 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1219740777214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1964103532214110">*</span>BRAS-service-location-1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b608726870214110">location slot <span>1</span> </strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen495743087214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword324796660214110">*</span>BRAS-service-location-1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b542643342214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen2055776870214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword849719356214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-service-location-1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1354365656214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1561882830214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1711520706214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b61139538214110">service-location 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1281221089214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword363866925214110">*</span>BRAS-service-location-2] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1058613575214110">location slot <span>2</span> </strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1781776365214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword38377351214110">*</span>BRAS-service-location-2] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1858290462214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen212649239214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1177653241214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-service-location-2] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1118347415214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen740296920214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword914824787214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b44073200214110">service-instance-group groupa</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen524826523214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword2135218434214110">*</span>BRAS-service-instance-group-groupa] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b23354296214110">service-location 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen943777820214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword2021596618214110">*</span>BRAS-service-instance-group-groupa] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1394630373214110">service-location 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1163289559214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1204522046214110">*</span>BRAS-service-instance-group-groupa] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1504357699214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen649835103214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword228506463214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-service-instance-group-groupa] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1544981889214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li50113811214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p449231853214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li50113811214110"></a><a name="en-us_task_0172374595_li50113811214110"></a>Create a NAT instance named <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b6331317246">cpe1</strong> and bind it to the service-instance group <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b20612151112241">groupa</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen659440689214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1380113818214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b11897689214110">nat instance cpe1 id 11</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1492662796214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1351699590214110">*</span>BRAS-nat-instance-cpe1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b649881532214110">service-instance-group groupa</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen589210055214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword829816306214110">*</span>BRAS-nat-instance-cpe1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b980053147214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen470576722214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword351202991214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-cpe1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1343045551214110">quit</strong></pre>
</li></ol>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li312140265214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p1986367881214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li312140265214110"></a><a name="en-us_task_0172374595_li312140265214110"></a>Configure a CGN global static address pool in PAT mode.</p>
<p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p1085269630214110"># Create an address segment 11.11.11.1/24 in the view of the global static address pool <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b175655520328">pool1</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1436993868214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword2087382014214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b282152875214110">nat ip-pool pool1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen205589920214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword733001659214110">*</span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1997441939214110">section 0 11.11.11.1 mask 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1289471993214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1786234686214110">*</span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1505478541214110">nat-instance subnet length initial 25 extend 27</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen816346610214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword939678621214110">*</span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b798349820214110">nat-instance ip used-threshold upper-limit 60 lower-limit 40</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1046457837214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword567068810214110">*</span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b2131114218214110">nat alarm ip threshold 60</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1108473932214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword493144845214110">*</span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b312468651214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen465185654214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword6640522214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1236942065214110">quit</strong></pre>
<div class="note" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_note151432815812"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p204241054144710">When users are online, if you want to change the address segment of a global address pool or the length of an assigned address segment, run the <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b16358121210562">section lock</strong> command first. For example:<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen698144205012">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword899118914502"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1499139165013">nat ip-pool pool1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1713941845019">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword156801187535">*</span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b2367102475017">section 0 11.11.11.1 mask 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen74919413506">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1356261185318">*</span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1744424118504">section 0 lock</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1745316501501">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword2046241365311">*</span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b32971458155017">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen199581879516">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword911171175116"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1946191355119">reset nat user nat-ip-pool pool1 section 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen48561289523">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword770093417528"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b16411193835218">undo section 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen8640150195218">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1829133235314">*</span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b25661755135216">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1468693555313">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1754616419532"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b259234835317">nat-instance subnet initial 24 extend 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen85302136546">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword01355352568">*</span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b199391013195412">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen81763305543">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword6159431115414"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b27901340195416">section 0 1.2.3.4 mask 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen2060635813544">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword38967712553">*</span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b616612235518">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen886714420569">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword88590544569"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-ip-pool-pool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b136653573564">quit</strong></pre>
</div>
</div></div>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1204555216214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p631175043214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1204555216214110"></a><a name="en-us_task_0172374595_li1204555216214110"></a>Bind a dynamic address pool in the NAT instance to the global static address pool.</p>
<p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p187663964214110"># In the view of the NAT instance <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1817344512323">cpe1</strong>, configure a dynamic address pool named <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b118001852123211">group1</strong> and bind it to the global static address pool <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b49131515153314">pool1</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1586429442214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1816507965214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1848004252214110">nat instance cpe1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1690598771214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword2093571545214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-cpe1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b748980515214110">nat address-group group1 group-id 1 bind-ip-pool pool1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen655904955214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword27580106214110">*</span>BRAS-nat-instance-cpe1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b300634972214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen548387255214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1221064533214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-cpe1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1827268548214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li2036653171214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p1287995464214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li2036653171214110"></a><a name="en-us_task_0172374595_li2036653171214110"></a>Configure NAT user information.</p>
<ol type="a" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_ol1015740658214110"><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1031660329214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p332183625214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1031660329214110"></a><a name="en-us_task_0172374595_li1031660329214110"></a>Configure the BRAS service on the device so that users can go online. For details, see <a href="dc_ne_aaa_cfg_0035.html">AAA and User Management Configuration (Access Users)</a> in <em id="EN-US_TASK_0000001139835263__en-us_task_0172374595_i1191964605316"><span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword149282325316">HUAWEI</span> <span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword921398489214110">NE40E</span> Configuration Guide-User Access</em>.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1160236001214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword634822830214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1977800740214110">ip pool baspool1 bas local</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen685682130214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1609528200214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-ip-pool-baspool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b820449787214110">gateway 10.110.10.101 255.255.255.0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen568034913214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword94738105214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-ip-pool-baspool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1684862065214110">section 1 10.110.10.1 10.110.10.100</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen765422422214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword826921194214110">*</span>BRAS-ip-pool-baspool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1776969858214110">dns-server 192.168.7.252</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1542744094214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1708737591214110">*</span>BRAS-ip-pool-baspool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b509430898214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1148274391214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1231756328214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-ip-pool-baspool1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1968100878214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1544320282379">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword54742963720"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b6689144954116">radius-server group rd1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen15733133512372">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword14553411104412">*</span>BRAS-radius-rd1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b714155416418">radius-server authentication 192.168.7.249 1645 weight 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen15275218389">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1853431294414">*</span>BRAS-radius-rd1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b113043585418">radius-server accounting 192.168.7.249 1646 weight 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen05621150143710">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword0656313144415">*</span>BRAS-radius-rd1]<strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1090415213423"> radius-server shared-key huawei</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen6882165214376">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword165978149448">*</span>BRAS-radius-rd1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b962046104213">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen2983135417375">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1921194634316"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-radius-rd1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b188076233421">radius-server type plus11</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen444493813718">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword0146114717432"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-radius-rd1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b4571928114220">radius-server traffic-unit kbyte</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1782394053719">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword560084934318"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-radius-rd1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b175741931154214">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen198971846113716">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword10632155054320"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b86641534134218"> aaa</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen715711177394">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword9988205114320"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b12337193874216">authentication-scheme auth1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen422141963918">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword3129171824415">*</span>BRAS-aaa-authen-auth1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b18311542134211">authentication-mode radius</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1194852115391">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1314511974411">*</span>BRAS-aaa-authen-auth1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b946964644216">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen5244132473919">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword174201255114320"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-authen-auth1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b17177135014219">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen349543133920">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword662525616432"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b3216155484210">accounting-scheme acct1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen8250134983912">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword32177263441">*</span>BRAS-aaa-accounting-acct1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b18493358154210">accounting-mode radius</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen779685923916">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword137841129124419">*</span>BRAS-aaa-accounting-acct1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1613710224316">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1154017614403">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword971825984314"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-accounting-acct1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1056319594310">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen177741710405">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1965019024416"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b9715109194320">domain isp1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen9805172216406">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword5254123284417">*</span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b358619134436">authentication-scheme auth1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1475642816403">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword78621333184410">*</span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b175631022194319">accounting-scheme acct1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen14787834164010">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1715193584412">*</span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b18172715431">radius-server group rd1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen7848134194019">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1221843644418">*</span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b4651203084313">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen334191914110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1851043194420"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1]<strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b137199346437"> ip-pool baspool1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen6231851148">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword102091536151418">*</span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1590074219146">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen04539918143">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword2475135013146"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1]<strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b8475135031417"> </strong><strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b7444555121418">quit</strong></pre>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li71978888214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p715877355214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li71978888214110"></a><a name="en-us_task_0172374595_li71978888214110"></a>Create a user group named <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1992420103017">group1</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1843572214214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword669499369214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b346830379214110">user-group group1</strong></pre>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1910508854214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p746819234214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1910508854214110"></a><a name="en-us_task_0172374595_li1910508854214110"></a>Specify the domain to which the users belong.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen393276616214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword423203192214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1741196291214110">aaa</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1806516583214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1227868002214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b246635971214110">domain isp1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen218790129214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1366267778214110">*</span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1136874595214110">user-group group1 bind nat instance cpe1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1336718212214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword2098452256214110">*</span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b597595848214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen106214060214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1121213126214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1355330956214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen331148352214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1652133561214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b710887571214110">quit</strong></pre>
</li></ol>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li476506052214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p670696301214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li476506052214110"></a><a name="en-us_task_0172374595_li476506052214110"></a>Configure a NAT traffic diversion policy.</p>
<ol type="a" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_ol2038699120214110"><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li2006220996214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p915538225214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li2006220996214110"></a><a name="en-us_task_0172374595_li2006220996214110"></a>Configure an ACL numbered <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b37031898392">6001</strong> and set an ACL rule to match the traffic from the user group <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1270389163916">group1</strong> so that the traffic can be diverted to the NAT service board.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen165400194214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1454298681214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1714259112214110">acl 6001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1925752291214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1867827647214110">*</span>BRAS-acl-ucl-6001] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b685121804214110">rule 1 permit ip source user-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1517875514214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1692714397214110">*</span>BRAS-acl-ucl-6001] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1588007024214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1058219619214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword113739535214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-acl-ucl-6001] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1843254453214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li985095113214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p1542129468214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li985095113214110"></a><a name="en-us_task_0172374595_li985095113214110"></a>Configure a traffic classifier.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen539271079214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword2021294643214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1129256085214110">traffic classifier c1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1434758156214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword774399486214110">*</span>BRAS-classifier-c1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1133108649214110">if-match acl 6001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen891960166214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword746146185214110">*</span>BRAS-classifier-c1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1731648619214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen396056968214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1179846353214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-classifier-c1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1336596684214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li125913436214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p955726557214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li125913436214110"></a><a name="en-us_task_0172374595_li125913436214110"></a>Configure a traffic behavior named <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b5114568794434">b1</strong>, which binds traffic to the NAT instance named <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b10384853824434">cpe1</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen810597114214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword968072689214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b585977981214110">traffic behavior b1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1119565460214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword622526432214110">*</span>BRAS-behavior-b1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1988434965214110">nat bind instance cpe1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen349254246214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword39619497214110">*</span>BRAS-behavior-b1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b5851486214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1129126937214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1773495540214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-behavior-b1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1317202500214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li877468807214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p848035300214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li877468807214110"></a><a name="en-us_task_0172374595_li877468807214110"></a>Define a NAT policy to associate the ACL rule with the traffic behavior.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1351468211214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword474039606214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b570152607214110">traffic policy p1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1779920179214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword895604910214110">*</span>BRAS-trafficpolicy-p1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1957559054214110">classifier c1 behavior b1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen263687210214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword783922986214110">*</span>BRAS-trafficpolicy-p1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1402363249214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen2033074928214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword340262259214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-trafficpolicy-p1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b2013173923214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1552746669214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p791987539214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1552746669214110"></a><a name="en-us_task_0172374595_li1552746669214110"></a>Apply the NAT traffic diversion policy in the system view.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen251276228214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword524153379214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b260761899214110">traffic-policy p1 inbound</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen915841030214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword809513629214110">*</span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b494796717214110">commit</strong></pre>
</li></ol>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1132453173214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p2140398897214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1132453173214110"></a><a name="en-us_task_0172374595_li1132453173214110"></a>Configure a NAT traffic conversion policy.</p>
<ol type="a" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_ol14071815710"><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li194119184714">Configure an ACL numbered <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b18327413194014">3001</strong> and set an ACL rule to match users' private addresses for NAT.<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen482129951214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword756157170214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1353765403214110">acl 3001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1665077365214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1458896214214110">*</span>BRAS-acl4-advance-3001] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b257696579214110">rule 10 permit ip source 10.110.10.0 0.0.0.255</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen29464985214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword2049926839214110">*</span>BRAS-acl4-advance-3001] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b552703137214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen302299957214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1502281344214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-acl4-advance-3001] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b340382701214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li65892212710">Configure a NAT traffic conversion policy.<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1407573961214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1026186534214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1942746984214110">nat instance cpe1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen423413289214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1085516952214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-cpe1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1842522842214110">nat outbound 3001 address-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen515268445214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1192430468214110">*</span>BRAS-nat-instance-cpe1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b591074630214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen982989967214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword56057861214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-cpe1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b94440020214110">quit</strong></pre>
</li></ol>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1921215524817">Configure a user-side interface.<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen4186656142613">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword618635632611"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b218675611262"> interface Virtual-Template 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen13187145652615">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword4187175692617">*</span>BRAS-Virtual-Template1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1886093417274">ppp authentication-mode auto</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen582144315274">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword16821174322714">*</span>BRAS-Virtual-Template1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b555344812272">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1818765614267">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword118715612618"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-Virtual-Template1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1718745614260">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen4903598288">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword290315914289"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b29034992814"> interface GigabitEthernet <span>0/2/0</span>.1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen71001738162819">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword3845161062915">*</span>BRAS-GigabitEthernet<span>0/2/0</span>.1]<strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b6100438182817"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen598041562913">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword9677239102920"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>.1]<strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b15602151652917"> user-vlan 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen07041655172910">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1870455520293"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>.1-vlan-1-1]<strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b207047555297"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen931816139304">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword14318171313305"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>.1]<strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1631820139307"> pppoe-server bind Virtual-Template 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen17520454183012">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword9890205413011">*</span>BRAS-GigabitEthernet<span>0/2/0</span>.1]<strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b8890105443015"> commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen244815312318">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword6163171014313"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>.1]<strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b138394333114"> bas</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen13736175312">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword74648176312"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>.1-bas]<strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b54641717123120"> access-type layer2-subscriber default-domain authentication isp1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen162551550164316">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword10252102734611">*</span>BRAS-GigabitEthernet<span>0/2/0</span>.1-bas] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b638555714463">authentication-method ppp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen01314344419">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword63018289465">*</span>BRAS-GigabitEthernet<span>0/2/0</span>.1-bas] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b163651859476">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen14641201714410">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword16983676463"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>.1-bas] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b16121286473">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen101341020114414">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword15981178104616"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>.1] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b165771910164715">quit</strong></pre>
</li><li id="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1589578953214110"><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p1356894391214110"><a name="EN-US_TASK_0000001139835263__en-us_task_0172374595_li1589578953214110"></a><a name="en-us_task_0172374595_li1589578953214110"></a>Verify the configuration.</p>
<p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p2010063117214110"># Display detailed user information on CPU 0 of the service board in slot <span>1</span>.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1689016675214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword1216388576214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1738722310214110">display nat user-information slot <span>1</span>  verbose</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1846287228214110">This operation will take a few minutes. Press 'Ctrl+C' to break ...              
Slot: <span>1</span>                                                                 
Total number:  1.                                                           
  ---------------------------------------------------------------  
  User Type                             :  NAT444                                
  CPE IP                                :  10.110.10.100                           
  User ID                               :  2                                     
  VPN Instance                          :  -                                     
  Address Group                         :  group1                                     
  NoPAT Address Group                   :  - 
  NAT Instance                          :  cpe1                                  
  Public IP                             :  11.11.11.1                           
  Start Port                            :  1152                                  
  Port Range                            :  0                                    
  Port Total                            :  5                                    
  Extend Port Alloc Times               :  0                                     
  Extend Port Alloc Number              :  0                                     
  First/Second/Third Extend Port Start  :  0/0/0                                 
  Total/TCP/UDP/ICMP Session Limit      :  8192/10240/10240/512                  
  Total/TCP/UDP/ICMP Session Current    :  5/5/0/0                               
  Total/TCP/UDP/ICMP Rev Session Limit  :  8192/10240/10240/512                  
  Total/TCP/UDP/ICMP Rev Session Current:  0/0/0/0                               
  Total/TCP/UDP/ICMP Port Limit         :  0/0/0/0                               
  Total/TCP/UDP/ICMP Port Current       :  5/5/0/0                               
  Nat ALG Enable                        :  NULL                                   
  Token/TB/TP                           :  0/0/0                                 
  Port Forwarding Flag                  :  Non Port Forwarding                   
  Port Forwarding Ports                 :  0 0 0 0 0                             
  Aging Time(s)                         :  -                                     
  Left Time(s)                          :  -                                     
  Port Limit Discard Count              :  0                                     
  Session Limit Discard Count           :  0                                     
  Fib Miss Discard Count                :  0                                     
  --&gt;Transmit Packets                   :  15                                    
  --&gt;Transmit Bytes                     :  660                                   
  --&gt;Drop Packets                       :  0                                     
  &lt;--Transmit Packets                   :  40                                    
  &lt;--Transmit Bytes                     :  1740                                  
  &lt;--Drop Packets                       :  0                                     
---------------------------------------------------------------</pre>
<p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p327539066214110"># Display load balancing statistics of the NAT instance named <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b136111929113012">cpe1</strong> on the service board in slot <span>1</span>.</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen1784523183214110">[<span class="keyword" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_keyword820387463214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b651554343214110">display nat statistics global nat-instance cpe1 slot <span>1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen580009976214110">Slot: <span>1</span>                                                            
--------------------------------------------------------------------------- 
 Session table number                           :10 
 User table number                              :1 
 Total setup sessions                           :10 
 Total teardown sessions                        :10 
--------------------------------------------------------------------------- 

Slot: <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b658386289214110"><span>2</span></strong>                                                            
--------------------------------------------------------------------------- 
 Session table number                           :10 
 User table number                              :1
 Total setup sessions                           :10
 Total teardown sessions                        :10 
---------------------------------------------------------------------------</pre>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001139835263__1.4.5"></a><a name="1.4.5"></a>
<div class="p" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_context2141690296214110"><h4 class="sectiontitle">Configuration Files</h4><p id="EN-US_TASK_0000001139835263__en-us_task_0172374595_p324390466214110">BRAS configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001139835263__en-us_task_0172374595_screen842610246214110"># 
sysname BRAS 
#
vsm on-board-mode disable
# 
license 
 active nat session-table size 6 slot <span>1</span>  
 active nat session-table size 6 slot <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b51281827105511"><span>2</span></strong>  
 active nat bandwidth-enhance 40 slot <span>1</span>
 active nat bandwidth-enhance 40 slot <span>2</span>
#
user-group group1
#
ip pool baspool1 bas local
 gateway 10.110.10.101 255.255.255.0
 section 1 10.110.10.1 10.110.10.100
 dns-server  192.168.7.252
# 
radius-server group rd1 
 radius-server authentication 192.168.7.249 1645 weight 0 
 radius-server accounting 192.168.7.249 1646 weight 0 
 radius-server shared-key %^%#x*CgITP4C<font style="font-size:8pt" Face="Courier New" >~</font>;q,*+DEW'JBWe#)"Q&amp;|7bX]b:Y&lt;{w'%^%# 
 radius-server type plus11 
 radius-server traffic-unit kbyte 
# 
interface Virtual-Template1 
 ppp authentication-mode auto 
# 
service-location 1       
 location slot <span>1</span>  
# 
service-location 2       
 location slot <strong id="EN-US_TASK_0000001139835263__en-us_task_0172374595_b1934711334551"><span>2</span></strong>  
#
service-instance-group groupa       
 service-location 1       
 service-location 2 
# 
nat ip-pool pool1 
 section 0 11.11.11.1 mask 24 
 nat-instance subnet length initial 25 extend 27 
 nat-instance ip used-threshold upper-limit 60 lower-limit 40 
 nat alarm ip threshold 60 
#
acl number 3001 
 rule 10 permit ip source 10.110.10.0 0.0.0.255 
#
acl number 6001 
 rule 1 permit ip source user-group group1 
#
nat instance cpe1 id 11      
 service-instance-group groupa       
 nat address-group group1 group-id 1 bind-ip-pool pool1
 nat outbound 3001 address-group group1 
# 
traffic classifier c1 operator or
 if-match acl 6001 precedence 1
#
traffic behavior b1
 nat bind instance cpe1
#
traffic policy p1 
 classifier c1 behavior b1 precedence 1
# 
traffic-policy p1 inbound 
# 
aaa 
 authentication-scheme auth1 
  authentication-mode RADIUS 
# 
 accounting-scheme acct1 
  accounting-mode RADIUS 
# 
 domain isp1 
  authentication-scheme auth1 
  accounting-scheme acct1 
  radius-server group rd1 
  ip-pool baspool1 
  user-group group1 bind nat instance cpe1 
# 
interface GigabitEthernet<span>0/2/0</span>.1 
 user-vlan 1 
 pppoe-server bind Virtual-Template 1 
 bas 
  access-type layer2-subscriber default-domain authentication isp1 
  authentication-method ppp 
#
return
</pre>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0056.html">Configuration Examples for NAT
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0095.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0081_1.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>