
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Setting an Aging Time for NAT Sessions">
<meta name="abstract" content="To accelerate aging of expired NAT sessions of a protocol, set an aging time. After the aging time elapses, NAT sessions age, and system resources are released.">
<meta name="description" content="To accelerate aging of expired NAT sessions of a protocol, set an aging time. After the aging time elapses, NAT sessions age, and system resources are released.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0038.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0041_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/../../toctopics/en-us_task_0000001482697861.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374578">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Setting an Aging Time for NAT Sessions</title>
</head>
<body><a name="EN-US_TASK_0172374578"></a><a name="EN-US_TASK_0172374578"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Setting an Aging Time for NAT Sessions</h1>
<div class="taskbody"><p>To accelerate aging of expired NAT sessions of a protocol, set an aging time. After the aging time elapses, NAT sessions age, and system resources are released.</p>
<div class="context"><a name="EN-US_TASK_0172374578__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Perform the following steps on the <span class="keyword">Router</span>:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172374578__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=nat+session+long-link"><b><span class="cmdname">nat session long-link</span></b></a> [ <strong><span>inbound</span></strong> | <strong><span>outbound</span></strong> ] <strong><span>tcp</span></strong> { <strong><span>source-ip</span></strong> <i><span class="varname">ip-address</span></i> { <i><span class="varname">ip-mask</span></i> | <i><span class="varname">mask-length</span></i> } [ <strong><span>source-port</span></strong> <i><span class="varname">port-number</span></i> ] [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] | { <strong><span>destination-ip</span></strong> <i><span class="varname">ip-address</span></i> { <i><span class="varname">ip-mask</span></i> | <i><span class="varname">mask-length</span></i> } [ <strong><span>destination-port</span></strong> <i><span class="varname">port-number</span></i> ] | <strong><span>destination-port</span></strong> <i><span class="varname">port-number</span></i> } [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] } <sup>*</sup></span><p><p>A policy for establishing a persistent NAT TCP connection is configured.</p>
<p>After this policy is configured, the aging time of the TCP connection of the specified session is changed to 200 hours by default. To reset the aging time of the persistent TCP connection, run the <a href="cmdqueryname=nat+session+aging-time"><b><span class="cmdname">nat session aging-time</span></b></a> command.</p>
</p></li><li><span>Run <a href="cmdqueryname=nat+session+aging-time"><b><span class="cmdname">nat session aging-time</span></b></a> { <strong>tcp</strong> | <strong>udp</strong> | <strong>icmp</strong> | <strong>fin-rst</strong> | <strong>syn</strong> | <strong>fragment</strong> | <strong>dns</strong> | <strong>ftp</strong> | <strong>http</strong> | <strong>rtsp</strong> | <strong>sip</strong> | <strong>pptp</strong> | <strong>tcp</strong> <strong>long-link</strong> | <strong>ip</strong> } <i><span class="varname">aging-time</span></i></span><p><p>An aging time is set for the sessions of a specified type.</p>
</p><p><p>The changed aging time takes effect on new rather than existing NAT sessions.</p>
</p></li><li><span>(Optional) Set the fast aging time for DNS sessions.</span><p><p>You are advised to configure this function when DNS traffic is heavy. After the fast aging function for DNS sessions is enabled, if the device receives DNS request and response packets at the same time, the DNS sessions age according to the configured fast aging time to save system resources.</p>
</p><p><ol type="a"><li>Run <strong><a href="cmdqueryname=nat+session+dns+fast-aging+enable"><b><span class="cmdname">nat session dns fast-aging enable</span></b></a></strong><p>The fast aging function is enabled for DNS sessions.</p>
</li><li>Run <strong><a href="cmdqueryname=nat+session+dns+fast-aging-time"><b><span class="cmdname">nat session dns fast-aging-time</span></b></a></strong> <i><span class="varname">aging-time</span></i><p>A fast aging time is set for DNS sessions.</p>
</li></ol>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=nat+instance"><b><span class="cmdname">nat instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <strong><span>id</span></strong> <i><span class="varname">id</span></i> ]</span><p><p>The NAT instance view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=nat+session+aging-time"><b><span class="cmdname">nat session aging-time</span></b></a> { <strong><span>ip</span></strong> | <strong><span>fin-rst</span></strong> | <strong><span>fragment</span></strong> | <strong><span>ftp</span></strong> | <strong><span>icmp</span></strong> | <strong><span>pptp</span></strong> | <strong><span>rtsp</span></strong> | <strong><span>sip</span></strong> | <strong><span>syn</span></strong> | <strong><span>tcp</span></strong> | <strong><span>udp</span></strong> | <strong><span>dns</span></strong> | <strong><span>http</span></strong><strong><span> </span></strong>} <i><span class="varname">aging-time</span></i></span><p><p>An aging time is set for the sessions of a specified type. If an aging time is set for a NAT instance, the aging time is used when a session is established in the instance. If no aging time is set for a NAT instance, the aging time set in the system view is used when a session is established in the instance.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0038.html">Configuring NAT Security
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0041_1.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/../../toctopics/en-us_task_0000001482697861.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>