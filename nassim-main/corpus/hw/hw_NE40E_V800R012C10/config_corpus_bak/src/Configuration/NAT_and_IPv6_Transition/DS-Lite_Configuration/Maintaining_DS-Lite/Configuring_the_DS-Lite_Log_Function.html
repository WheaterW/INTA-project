
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the DS-Lite Log Function">
<meta name="abstract" content="You can configure the DS-Lite log function to record DS-Lite translation information in real time, which strengthens device maintainability.">
<meta name="description" content="You can configure the DS-Lite log function to record DS-Lite translation information in real time, which strengthens device maintainability.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0047.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0049.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="DS-Lite">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374737">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the DS-Lite Log Function</title>
</head>
<body><a name="EN-US_TASK_0172374737"></a><a name="EN-US_TASK_0172374737"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the DS-Lite Log Function</h1>
<div class="taskbody"><p>You can configure the DS-Lite log function to record DS-Lite translation information in real time, which strengthens device maintainability.</p>
<div class="context"><a name="EN-US_TASK_0172374737__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>DS-Lite logs are generated by a DS-Lite device during NAT operation. Their information contains basic NAT user information and DS-Lite operation information. These logs also record internal users' access to external networks, as well as external users' access to internal servers. When intranet users access an external network through the DS-Lite device, they share an external network address. For this reason, the users cannot be located. The log function helps record intranet users' access to external networks in real time, enhancing network maintainability.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172374737__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=nat+log+rate"><b><span class="cmdname">nat log rate</span></b></a> <i><span class="varname">rate-value</span></i></span><p><p>The rate at which a DS-Lite device sends logs is set.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ds-lite+instance+id"><b><span class="cmdname">ds-lite instance</span></b></a> <i><span class="varname">instance-name</span></i> [ <strong><span>id</span></strong> <i><span class="varname">id</span></i> ]</span><p><p>The DS-Lite instance view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ds-lite+log+session+enable+elog+syslog"><b><span class="cmdname">ds-lite log session enable</span></b></a> [ <strong><span>elog</span></strong> | <strong><span>syslog</span></strong> ]</span><p><p>The DS-Lite log function is enabled.</p>
</p></li><li><span>Run <a href="cmdqueryname=ds-lite+log+user+enable+syslog+netstream"><b><span class="cmdname">ds-lite log user enable</span></b></a> [ <strong><span>syslog</span></strong> | <strong><span>netstream</span></strong> ]</span><p><p>The DS-Lite user log function is enabled.</p>
</p></li><li><span>Run <a href="cmdqueryname=ds-lite+log+host+source+name+vpn-instance"><b><span class="cmdname">ds-lite log host</span></b></a> <i><span class="varname">host-ip-address</span></i> <i><span class="varname">host-port</span></i> <strong><span>source</span></strong> <i><span class="varname">source-ip-address</span></i> <i><span class="varname">source-port</span></i> <strong><span>name</span></strong> <i><span class="varname">host-name</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span><p><p>The DS-Lite log host information is configured.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=ds-lite+log+radius+enable"><b><span class="cmdname">ds-lite log radius enable</span></b></a></span><p><p>The DS-Lite RADIUS log function is enabled.</p>
<p>If the semi-dynamic port pre-allocation mode is configured, the available port range is automatically extended after the initial port range is exhausted. In this situation, if the device needs to send logs to a RADIUS server, the function of semi-dynamic allocation of RADIUS logs must be enabled.</p>
<p><span>In VS mode, this command is supported only by the admin VS.</span></p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=ds-lite+log+send-mode+session-start-only+session-end-only"><b><span class="cmdname">ds-lite log send-mode</span></b></a> { <strong><span>session-start-only</span></strong> | <strong><span>session-end-only</span></strong> }</span><p><p>The mode of sending DS-Lite logs is configured.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li><li><span>(Optional) Configure a flexible DS-Lite log template.</span><p><ol type="a"><li><p>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></p>
<p>Return to the system view.</p>
</li><li><p>Run <a href="cmdqueryname=nat+syslog+flexible+template+user+session"><b><span class="cmdname">nat syslog flexible template</span></b></a> { <strong><span>user</span></strong> | <strong><span>session</span></strong> }</p>
<p>A NAT flexible syslog template is created, and its view is displayed.</p>
</li><li><p>(Optional) Run <a href="cmdqueryname=ds-lite+time+local"><b><span class="cmdname">ds-lite time local</span></b></a></p>
<p>The local time is displayed in logs.</p>
</li><li><p>(Optional) Run <a href="cmdqueryname=ds-lite+time"><b><span class="cmdname">ds-lite time</span></b></a> { <strong>endtime-second-dec</strong> | <strong>endtime-second-hex</strong> | <strong>starttime-second-dec</strong> | <strong>starttime-second-hex</strong> | <strong>starttime</strong> | <strong>timestamp-second-dec</strong> | <strong>timestamp-second-hex</strong> | <strong>timestamp</strong> } { <strong>local</strong> | <strong>utc</strong> }</p>
<p>The end time, start time, or timestamp in the log is set to the local time or UTC time.</p>
<div class="p"><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <strong>ds-lite time</strong> command takes precedence over the <strong>ds-lite time local</strong> command run in the flexible log template view. If the <strong>ds-lite time</strong> command is run, the time format of the end time, start time, or timestamp takes effect according to the configured format. If the <strong>ds-lite time</strong> command is not run, the <strong>ds-lite time local</strong> command takes effect. If neither the <strong>ds-lite time</strong> nor the <strong>ds-lite time local</strong> command is run, the default UTC time format takes effect.</p>
</div></div>
</div>
</li><li><p>Enter the DS-Lite flexible flow log template view and run the <a href="cmdqueryname=ds-lite+position"><b><span class="cmdname">ds-lite position</span></b></a> command to configure a DS-Lite flexible flow log template. Enter the DS-Lite flexible user log template view and run the <a href="cmdqueryname=ds-lite+position"><b><span class="cmdname">ds-lite position</span></b></a> command to configure a DS-Lite flexible user log template.</p>
</li><li><p>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
<p>The configuration is committed.</p>
</li><li><p>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></p>
<p>Return to the system view.</p>
</li><li><p>Run <a href="cmdqueryname=nat+syslog+descriptive+format+flexible+template+session+user"><b><span class="cmdname">nat syslog descriptive format flexible template</span></b></a> { <strong><span>session</span></strong> | <strong><span>user</span></strong> }</p>
<p>Logs are bound to the flexible log template.</p>
</li></ol>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=nat+syslog+descriptive+format+cn+type2+type3"><b><span class="cmdname">nat syslog descriptive format</span></b></a></span><p><p>DS-Lite syslogs are configured to be in the extended format.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0047.html">Maintaining DS-Lite
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ds-lite_cfg_0049.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>