
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Centralized NAT Providing Backup for Distributed NAT">
<meta name="abstract" content="This section provides an example for configuring centralized NAT providing backup for distributed NAT.">
<meta name="description" content="This section provides an example for configuring centralized NAT providing backup for distributed NAT.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0056.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0081_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0089.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001194921709">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring Centralized NAT Providing Backup for Distributed NAT</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001194921709"></a><a name="EN-US_TASK_0000001194921709"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Centralized NAT Providing Backup for Distributed NAT</h1>
<div class="taskbody"><p>This section provides an example for configuring centralized NAT providing backup for distributed NAT.</p>
<div class="context"><a name="EN-US_TASK_0000001194921709__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_context759945138214110"><h4 class="sectiontitle">Networking Requirements</h4><div class="note" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_note98102031145210"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p18810531185214">Only the <span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1152414571330">NE40E</span><span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword3501321048">-M2K</span> and <span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword84407551658">NE40E</span><span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword18823101016414">-M2K-B</span> support this configuration.</p>
</div></div>
<p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1823297344214110">As shown in <a href="#EN-US_TASK_0000001194921709__en-us_task_0172374591_fig_dc_ne_cfg_nat_0012">Figure 1</a>, the BRAS is equipped with a dedicated board. The NAT device is attached to the CR to back up data for the BRAS. In normal cases, the BRAS implements NAT for user traffic. If the BRAS becomes faulty, user traffic is switched to the NAT device for NAT implementation.</p>
<p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1882072374214110">It is required that computers with the IP addresses on the network segment 10.10.10.0/24 can access the Internet.</p>
<div class="fignone" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_fig_dc_ne_cfg_nat_0012"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_fig_dc_ne_cfg_nat_0012"></a><a name="en-us_task_0172374591_fig_dc_ne_cfg_nat_0012"></a><span class="figcap"><b>Figure 1 </b>Centralized NAT providing backup for distributed NAT</span><div class="note" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_note1014476722214110"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1437593121214110">Interface 1, interface 2, and interface 3 in this example represent GE <span>0/2/1</span>, GE <span>0/2/2</span>, and GE <span>0/2/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_image323707203214110" src="images/fig_dc_ne_nat_cfg_0016.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_table_03AEE6D1" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Interfaces and IP addresses</caption><thead align="left"><tr id="EN-US_TASK_0000001194921709__en-us_task_0172374591_row28099213214110"><th align="left" class="cellrowborder" valign="top" width="25.91%" id="mcps1.4.1.6.2.4.1.1" liSelected="liSelected"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1916182191214110">Device Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="35.55%" id="mcps1.4.1.6.2.4.1.2" liSelected="liSelected"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1485015220214110">Interface Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="38.54%" id="mcps1.4.1.6.2.4.1.3" liSelected="liSelected"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1205447138214110">IP Address and Mask</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_TASK_0000001194921709__en-us_task_0172374591_row2091779413214110"><td class="cellrowborder" rowspan="2" valign="top" width="25.91%" headers="mcps1.4.1.6.2.4.1.1 "><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p688918070214110">BRAS</p>
</td>
<td class="cellrowborder" valign="top" width="35.55%" headers="mcps1.4.1.6.2.4.1.2 "><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1481652199214110">GE <span>0/2/0</span>.1</p>
</td>
<td class="cellrowborder" valign="top" width="38.54%" headers="mcps1.4.1.6.2.4.1.3 "><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_entry1861644114214110p0">â</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001194921709__en-us_task_0172374591_row1032108266214110"><td class="cellrowborder" valign="top" headers="mcps1.4.1.6.2.4.1.2 "><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1870645212214110">GE <span>0/2/1</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.2.4.1.3 "><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1665462953214110">192.168.10.1/24</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001194921709__en-us_task_0172374591_row229925533214110"><td class="cellrowborder" rowspan="2" valign="top" width="25.91%" headers="mcps1.4.1.6.2.4.1.1 "><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p952043377214110">CR</p>
</td>
<td class="cellrowborder" valign="top" width="35.55%" headers="mcps1.4.1.6.2.4.1.2 "><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p983324526214110">GE <span>0/2/2</span></p>
</td>
<td class="cellrowborder" valign="top" width="38.54%" headers="mcps1.4.1.6.2.4.1.3 "><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p422304303214110">192.168.10.2/24</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001194921709__en-us_task_0172374591_row607287546214110"><td class="cellrowborder" valign="top" headers="mcps1.4.1.6.2.4.1.2 "><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1847611311214110">GE <span>0/2/1</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.2.4.1.3 "><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p2089386099214110">192.168.11.1/24</p>
</td>
</tr>
<tr id="EN-US_TASK_0000001194921709__en-us_task_0172374591_row2030168919214110"><td class="cellrowborder" valign="top" width="25.91%" headers="mcps1.4.1.6.2.4.1.1 "><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p324994407214110">NAT device</p>
</td>
<td class="cellrowborder" valign="top" width="35.55%" headers="mcps1.4.1.6.2.4.1.2 "><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1384983437214110">GE <span>0/2/2</span></p>
</td>
<td class="cellrowborder" valign="top" width="38.54%" headers="mcps1.4.1.6.2.4.1.3 "><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1271527457214110">192.168.11.2/24</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001194921709__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_context474049521214110"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p110823406214110">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001194921709__en-us_task_0172374591_ol1502663239214110"><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1679559805214110">For the distributed NAT device, the configuration roadmap for centralize NAT providing backup for distributed NAT is as follows:<ol type="a" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_ol1726292538214110"><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li293287768214110">Configure basic NAT functions.</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li935233758214110">Configure NAT user information and RADIUS authentication on the BRAS.</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li88608899214110">Configure a NAT traffic diversion policy.</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1456513942214110">Configure a NAT conversion policy.</li></ol>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1388655619214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p282712937214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1388655619214110"></a><a name="en-us_task_0172374591_li1388655619214110"></a>For the CR, the configuration roadmap for redirecting user traffic to the NAT device is as follows:</p>
<ol type="a" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_ol885704515214110"><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1828616271214110">Configure a traffic diversion policy.</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1331515441214110">Configure an inbound interface redirection policy.</li></ol>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1444740574214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p157230589214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1444740574214110"></a><a name="en-us_task_0172374591_li1444740574214110"></a>For the centralized NAT device, the configuration roadmap for centralized NAT is as follows:</p>
<ol type="a" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_ol1944562000214110"><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li831616552214110">Configure basic NAT functions.</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1539064172214110">Configure a NAT traffic diversion policy.</li></ol>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001194921709__1.4.3"></a><a name="1.4.3"></a>
<div class="p" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_context250155311214110"><h4 class="sectiontitle">Data Preparation</h4><div class="p" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p788027155214110">To complete the configuration, you need the following data:<ul id="EN-US_TASK_0000001194921709__en-us_task_0172374591_ul2073292439214110"><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1288512564214110">Service-location group index: 1</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li157986875214110">Slot ID of the NAT's service board: <span id="EN-US_TASK_0000001194921709__en-us_task_0172374591_ph1932480145214415">1</span></li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li2021064940214110">Service-instance group name: group1</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li356021645214110">NAT instance name: nat1; NAT instance index: 1</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1672096782214110">NAT address pool name for NAT device: address-group1; NAT address pool ID: 1; IP address segment: 11.11.11.101 to 11.11.11.105</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1512662217214110">User group name: group1</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1822222054214110">Private network address pool name: pool1</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li480102688214110">Domain name: isp1</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li543187762214110">ACL name: 6001</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1972268365214110">Traffic classifier name: c1</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li839443614214110">Traffic behavior name: b1</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li904161708214110">Traffic policy name: p1</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1481230178214110">Name and IP address of each interface to which a NAT traffic diversion policy is applied</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001194921709__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001194921709__en-us_task_0172374591_steps1178311972214110"><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_step1158551178214110"><span id="EN-US_TASK_0000001194921709__en-us_task_0172374591_cmd535421297214110">On the BRAS, configure centralized NAT providing backup for distributed NAT.</span><ol type="a" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_substeps1352415574214110"><li class="substepexpand" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_substep20347181814401"><span id="EN-US_TASK_0000001194921709__en-us_task_0172374591_cmd13347151816406">Configure an IP address for an interface.</span><p><pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1385512521407">&lt;<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword8855952134017">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b58553526402">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen138551352164018">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword158557523406"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1985595254017">HUAWEI</span>] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b2855115294018">sysname BRAS</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen885555234017">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword14855125211401">*</span><span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword198552524405">HUAWEI</span>] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b98551052194015">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen517716194110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1311851010418"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b11966454210">interface GigabitEthernet <span>0/2/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen5344742164211">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2727182294411">*</span>BRAS-GigabitEthernet<span>0/2/1</span>] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1459488444">ip address 192.168.10.1 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen19306184611424">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1186201817447"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/1</span>] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b9454124817445">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen2082612319440">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1575217351448"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/1</span>] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b17917144910446">quit</strong></pre>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_substep546170735214110"><span id="EN-US_TASK_0000001194921709__en-us_task_0172374591_cmd1146435867214110">Configure basic NAT functions.</span><p><ol class="substepthirdol" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_ol1377232719214110"><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1322117216214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p810753803214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1322117216214110"></a><a name="en-us_task_0172374591_li1322117216214110"></a>Set the maximum number of sessions that can be created on the NAT service board in slot <span>1</span> to 6M.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen2053516295502">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword12701816194015"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1544412236419"> vsm on-board-mode disable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen971758152214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1984641549214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1315306428214110">license</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen578980366214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1550399122214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-license] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b530400441214110">active nat session-table size 6 slot <span>1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen15305163205110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1810112336512"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-license] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b5101113312512">active nat bandwidth-enhance 40 slot <span>1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen443631641214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1734013981214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-license] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1438956408214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li625879144214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p775870202214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li625879144214110"></a><a name="en-us_task_0172374591_li625879144214110"></a>Create a NAT instance named <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1437327320214415">nat1</strong> and bind it to the service board.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen552486548214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1079697326214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b270864468214110">service-location 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen15666821214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2107916063214110">*</span>BRAS-service-location-1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1113408135214110">location slot <span>1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen5135994214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword624223187214110">*</span>BRAS-service-location-1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b699345324214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen144366637214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword241908417214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-service-location-1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b226333427214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen795519817214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword326925134214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b31714543214110">service-instance-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1800002187214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword710477581214110">*</span>BRAS-service-instance-group-group1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1138267766214110">service-location 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen546111806214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword86135361214110">*</span>BRAS-service-instance-group-group1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1861552951214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1473010420214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1199662376214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-service-instance-group-group1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b982721679214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen34356779214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1540569513214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b474196155214110">nat instance nat1 id 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen804649284214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword103814527214110">*</span>BRAS-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b555573372214110">service-instance-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1082590504214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword775146176214110">*</span>BRAS-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1027943413214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1894847743214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2109453247214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b648110845214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1834638744214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1203166782214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1834638744214110"></a><a name="en-us_task_0172374591_li1834638744214110"></a>Configure a NAT address pool and specify a range of IP addresses of 11.11.11.101 through 11.11.11.105 in the pool.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen2067894558214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword14488161144510"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1783448347214110">nat instance nat1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1786633453214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword144884117452"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1969881878214110">nat address-group address-group1 group-id 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1821214873211">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword124882111459">*</span>BRAS-nat-instance-nat1-nat-address-group-address-group1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1887915543211">section 1 11.11.11.101 11.11.11.105</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen156193018398">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword8488011144520">*</span>BRAS-nat-instance-nat1-nat-address-group-address-group1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1639642103920">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen290826087214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword124891311164515"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-nat1-nat-address-group-address-group1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b363634565214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen799942843214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword14893119456"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1016122864214110">quit</strong></pre>
</li></ol>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_substep1066150383214110"><span id="EN-US_TASK_0000001194921709__en-us_task_0172374591_cmd185936513214110">Configure NAT user information.</span><p><ol class="substepthirdol" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_ol465652072214110"><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1278101507214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1920590855214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1278101507214110"></a><a name="en-us_task_0172374591_li1278101507214110"></a>Configure the BRAS service on the device so that users can go online. For details, see <a href="dc_ne_aaa_cfg_0035.html">AAA and User Management Configuration (Access Users)</a> in <em id="EN-US_TASK_0000001194921709__en-us_task_0172374591_i1094988115512"><span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword912513315544">HUAWEI</span> <span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1412553115414">NE40E</span> Configuration Guide-User Access</em>.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1898731957214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1933863646214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1214013392214110">ip pool pool1 bas local</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen853912842214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1081741176214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-ip-pool-pool1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1362422697214110">gateway 10.10.10.1 255.255.255.0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen230863794710">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1645343184718">*</span>BRAS-ip-pool-pool1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b4446646114718">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen170568557214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1534487823214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-ip-pool-pool1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b365163229214110">section 1 10.10.10.1 10.10.10.100</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen974692360214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1988214358485"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-ip-pool-pool1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1071117867214110">dns-server 192.168.7.252</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen141317558214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword10981389214110">*</span>BRAS-ip-pool-pool1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1331009712214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1102846057214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword412836214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-ip-pool-pool1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1147413123214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen164321045201710">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword18971070181"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b111071023101816">radius-server group rd1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen123619493173">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword392784713215">*</span>BRAS-radius-rd1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b18378753162215">radius-server authentication </strong><strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b7577156112312">192.168.7.249</strong> <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b10378135382211">1812 weight 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen12554151191711">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword149378499211">*</span>BRAS-radius-rd1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b8102192810211">radius-server accounting 192.168.7.249 1813 weight 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen147591753151719">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword0719115417218">*</span>BRAS-radius-rd1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b195151923142510">radius-server shared-key-cipher YsHsjx_202206</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1727035681714">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword13794158112120">*</span>BRAS-radius-rd1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b5990534162119">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen344715589173">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword18823175691917"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-radius-rd1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b9897637162115">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen613885579214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword503900474214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1705645435214110">aaa</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1882030246214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1669408789214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1313877128214110">authentication-scheme auth1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen663606195214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword189843278214110">*</span>BRAS-aaa-authen-acct1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1894012314214110">authentication-mode radius</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1072625256214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1461872553214110">*</span>BRAS-aaa-authen-acct1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b362545843214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen620020641214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1546721088214110">*</span>BRAS-aaa] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1696322222214110">accounting-scheme acct1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen128808247214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1943426806214110">*</span>BRAS-aaa-accounting-acct1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1029456933214110">accounting-mode radius</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen2051851228214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword279085888214110">*</span>BRAS-aaa-accounting-acct1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b879376132214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen749843291214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2044689090214110">*</span>BRAS-aaa] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b728133050214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1870323980214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword945587507214110">*</span>BRAS-aaa] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b357750860214110">domain isp1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1783948008214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword289324967214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b459077381214110">authentication-scheme auth1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen608376988214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword770348751214110">*</span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1729563409214110">accounting-scheme acct1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen586723426214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1520033327214110">*</span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1583722236214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen2054260371214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1012538724214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b352753988214110">ip-pool pool1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen730576099214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword285020143214110">*</span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b400439014214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen403276772214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1285045530214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1459135208214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1851428993214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1381582779214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1903419697214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li910656590214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p289355961214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li910656590214110"></a><a name="en-us_task_0172374591_li910656590214110"></a>Create a user group named <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b248993413142">group1</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen206116068214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1472070935214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1674484577214110">user-group group1</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li9080722214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p148355717214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li9080722214110"></a><a name="en-us_task_0172374591_li9080722214110"></a>Configure the domain named <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b496705197214415">isp1</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1873837379214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword372906043214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b174892015214110">aaa</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1754497259214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1615139355214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b643558269214110">domain isp1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen111153022011">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword41861816162111">*</span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b880245419202">radius-server group rd1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen527217524214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2098685654214110">*</span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b2007799050214110">user-group group1 bind nat instance nat1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen156659888214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword339895447214110">*</span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b640621838214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1302942249214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1098958774214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b842856644214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1446399150214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2068361182214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b2064730180214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1942847676214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p952037897214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1942847676214110"></a><a name="en-us_task_0172374591_li1942847676214110"></a>Configure a user access interface.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen429177880214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword118483597214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b602640363214110">interface gigabitEthernet <span>0/2/0</span>.1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen2131045447214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1140195715214110">*</span>BRAS-GigabitEthernet<span>0/2/0</span>.1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b221838465214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen23998558214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword510984043214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>.1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1573520288214110">user-vlan 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1744540794214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword790881767214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>.1-vlan-1-1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1654422864214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen395227908214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1784066704214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>.1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b321764669214110">bas</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1853016417214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1900855873214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>.1-bas] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1973351422214110">access-type layer2-subscriber default-domain authentication isp1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen599259271214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1056010516495">*</span>BRAS-GigabitEthernet<span>0/2/0</span>.1-bas] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b811157378214110">authentication-method bind</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen14152131112917">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword119620884912">*</span>BRAS-GigabitEthernet<span>0/2/0</span>.1-bas] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b11590735153018">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen8649148163018">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1565016488307"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>.1-bas] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b37422045313">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen6229162110114">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1422912217112"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>.1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b12229172119112">quit</strong></pre>
</li></ol>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_substep1362386828214110"><span id="EN-US_TASK_0000001194921709__en-us_task_0172374591_cmd1164773882214110">Enable centralized NAT to provide backup.</span><p><pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1375008338214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword985547077214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1330457919214110">nat instance nat1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1895841154214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword145916802214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b833232967214110">nat centralized-backup enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1046141996214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword510064016214110">*</span>BRAS-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1022332260214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen489206112214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1972674305214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1732069487214110">quit</strong></pre>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_substep1531437440214110"><span id="EN-US_TASK_0000001194921709__en-us_task_0172374591_cmd1277544785214110">Configure a NAT traffic diversion policy.</span><p><ol class="substepthirdol" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_ol383035182214110"><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1334221118214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p230088252214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1334221118214110"></a><a name="en-us_task_0172374591_li1334221118214110"></a>Configure an ACL numbered 6001.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1601609295214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword287410287214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b948269952214110">acl 6001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen104596244214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1253793130214110">*</span>BRAS-acl-ucl-6001] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b234714145214110">rule 1 permit ip source user-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1029105092214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1220950979214110">*</span>BRAS-acl-ucl-6001] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b448595194214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1267905613214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1950613784214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-acl-ucl-6001] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1436520182214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li200564139214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1479642030214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li200564139214110"></a><a name="en-us_task_0172374591_li200564139214110"></a>Configure a traffic classifier named <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b2103699789214415">c1</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1868019637214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword556155976214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b2030754702214110">traffic classifier c1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1637273091214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2096942499214110">*</span>BRAS-classifier-c1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b390549085214110">if-match acl 6001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1722791751214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword768439247214110">*</span>BRAS-classifier-c1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1874281197214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen25138512214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword570565880214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-classifier-c1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1814965589214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1394239271214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1785355280214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1394239271214110"></a><a name="en-us_task_0172374591_li1394239271214110"></a>Configure a traffic behavior named <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b50248400214415">b1</strong>, which binds traffic to the NAT instance named <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1013150374214415">nat1</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1247523172214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1508020442214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b891978627214110">traffic behavior b1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1431423058214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2032479808214110">*</span>BRAS-behavior-b1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b837448186214110">nat bind instance nat1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen152357260214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2121613548214110">*</span>BRAS-behavior-b1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b855762061214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1461958133214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword370940984214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-behavior-b1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1217643884214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li619831779214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p69538056214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li619831779214110"></a><a name="en-us_task_0172374591_li619831779214110"></a>Configure a NAT traffic diversion policy and associate the ACL rule with the traffic behavior.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen167537290214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1198511062214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b344879820214110">traffic policy p1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1498972164214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2020213982214110">*</span>BRAS-trafficpolicy-p1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1649650252214110">classifier c1 behavior b1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen768577533214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1519025481214110">*</span>BRAS-trafficpolicy-p1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1941001372214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen549178159214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword711667631214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-trafficpolicy-p1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b160689777214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1553775371214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p901512877214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1553775371214110"></a><a name="en-us_task_0172374591_li1553775371214110"></a>Apply the NAT traffic policy named <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b481590604214415">p1</strong> in the system view.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1767727550214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2076054713214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b26233222214110">traffic-policy p1 inbound</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen2142648905214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1569976186214110">*</span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b2026975796214110">commit</strong></pre>
</li></ol>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_substep292600415214110"><span id="EN-US_TASK_0000001194921709__en-us_task_0172374591_cmd2145106922214110">Configure a NAT conversion policy.</span><p><ol class="substepthirdol" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_ol2014155675520"><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li2061107068214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p2115265766214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li2061107068214110"></a><a name="en-us_task_0172374591_li2061107068214110"></a>Configure an ACL numbered 3001 to match user traffic.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen417900874214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1350887494214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b2128209462214110">acl 3001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen723353683214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1088845146214110">*</span>BRAS-acl4-advance-3001] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b290474900214110">rule 10 permit ip source 10.10.10.0 0.0.0.255</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1840624125214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword441202103214110">*</span>BRAS-acl4-advance-3001] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1616482691214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1601707680214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1028907325214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-acl4-advance-3001] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1577975054214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li131655103562">Configure a NAT conversion policy.<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1643263592214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword489356482214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b549328775214110">nat instance nat1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen57756651214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword264348345214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1289792893214110">nat outbound 3001 address-group address-group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen661415269214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1134681634214110">*</span>BRAS-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b822558602214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen268897165214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword691635799214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b431840730214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li14260747132613">Configure a static route.<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen844321810271">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1644319188277"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b2051110341275">ip route-static 0.0.0.0 255.255.255.255 192.168.10.2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1444319185277">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1737020567278">*</span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b19983546172714">commit</strong></pre>
</li></ol>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_substep1684526211214110"><span id="EN-US_TASK_0000001194921709__en-us_task_0172374591_cmd1555109876214110">Verify the configuration.</span><p><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1681176605214110"># Check NAT user information.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen214184601214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1438527553214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1083666093214110">display nat user-information slot <span>1</span> verbose</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1106853582214110">This operation will take a few minutes. Press 'Ctrl+C' to break ...
Slot: <span>1</span>     
Total number:  1.
  ---------------------------------------------------------------------------
  User Type                             :  NAT444
  CPE IP                                :  10.10.10.1
  User ID                               :  0
  VPN Instance                          :  -
  Address Group                         :  address-group1
  NoPAT Address Group                   :  -
  NAT Instance                          :  nat1
  Public IP                             :  11.11.11.101
  NoPAT Public IP                       :  -
  Start Port                            :  1024
  Port Range                            :  4096
  Port Total                            :  256
  Extend Port Alloc Times               :  0
  Extend Port Alloc Number              :  0
  First/Second/Third Extend Port Start  :  0/0/0
  Total/TCP/UDP/ICMP Session Limit      :  8192/10240/10240/512
  Total/TCP/UDP/ICMP Session Current    :  0/0/0/0
  Total/TCP/UDP/ICMP Rev Session Limit  :  8192/10240/10240/512
  Total/TCP/UDP/ICMP Rev Session Current:  0/0/0/0
  Total/TCP/UDP/ICMP Port Limit         :  0/0/0/0
  Total/TCP/UDP/ICMP Port Current       :  0/0/0/0
  Nat ALG Enable                        :  NULL
  Token/TB/TP                           :  0/0/0
  Port Forwarding Flag                  :  Non Port Forwarding
  Port Forwarding Ports                 :  0 0 0 0 0
  Aging Time(s)                         :  -
  Left Time(s)                          :  -
  Port Limit Discard Count              :  0
  Session Limit Discard Count           :  0
  Fib Miss Discard Count                :  0
  --&gt;Transmit Packets                   :  0
  --&gt;Transmit Bytes                     :  0
  --&gt;Drop Packets                       :  0
  &lt;--Transmit Packets                   :  0
  &lt;--Transmit Bytes                     :  0
  &lt;--Drop Packets                       :  0
  ---------------------------------------------------------------------------</pre>
</p></li></ol>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_step2099547970214110"><span id="EN-US_TASK_0000001194921709__en-us_task_0172374591_cmd1798927933214110">Configure policy-based routing on the CR to redirect user traffic to the NAT device.</span><p><ol type="a" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_ol1699149063214110"><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1014800764214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p441316074214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1014800764214110"></a><a name="en-us_task_0172374591_li1014800764214110"></a>Configure a traffic diversion policy.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen528250646214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1202673967214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CR] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1023377552214110">acl 2001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1343139555214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword498853113214110">*</span>CR-acl4-basic-2001] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b198326492214110">rule 10 permit source 10.10.10.0 0.0.0.255</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen188706592214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1545575999214110">*</span>CR-acl4-basic-2001] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b677798495214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1801882497214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword320544967214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CR-acl4-basic-2001] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b2060734358214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen863176109214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword334759569214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CR] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b571272830214110">traffic classifier c1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1040427962214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1812008514214110">*</span>CR-classifier-c1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b60441962214110">if-match acl 2001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen2131406091214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1814649685214110">*</span>CR-classifier-c1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1760063330214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen902148631214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1069716274214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CR-classifier-c1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1337257762214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen409655322214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2055048540214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CR] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1027448727214110">traffic behavior b1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen2104731219214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword393268748214110">*</span>CR-behavior-b1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b553518705214110">redirect ip-nexthop 192.168.11.2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen325493523214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword151068621214110">*</span>CR-behavior-b1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b567318525214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen2042565244214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword716973198214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CR-behavior-b1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1337565306214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1821661687214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword114093260214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CR] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b134095715214110">traffic policy p1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1611850544214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword805562471214110">*</span>CR-policy-p1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1388312744214110">classifier c1 behavior b1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1281467467214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword400733071214110">*</span>CR-policy-p1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1707589652214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1890298793214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword345566323214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CR-policy-p1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1684028664214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li531268885214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1946629616214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li531268885214110"></a><a name="en-us_task_0172374591_li531268885214110"></a>Configure an inbound interface redirection policy.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen48578346214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword396196618214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CR] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1721257460214110">interface gigabitEthernet <span>0/2/2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1382774421214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1802355893214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CR-GigabitEthernet<span>0/2/2</span>] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b209285698214110">ip address 192.168.10.2 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1728549683214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2141881220214110">*</span>CR-GigabitEthernet<span>0/2/2</span>] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b252025472214110">traffic-policy p1 inbound</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen306268697214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2106401371214110">*</span>CR-GigabitEthernet<span>0/2/2</span>] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1487958016214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen589557202214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword719307948214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CR-GigabitEthernet<span>0/2/2</span>] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b523525589214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li849131223310">Configure a static route.<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen106861130173313">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword126861330193320"><font style="font-size:8pt" Face="Courier New" >~</font></span>CR] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1330219445337">ip route-static 11.11.11.0 255.255.255.0 192.168.10.1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen18686173014337">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1844245412335">*</span>CR] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b3526114853312">commit</strong></pre>
</li></ol>
</p></li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_step1645205963214110"><span id="EN-US_TASK_0000001194921709__en-us_task_0172374591_cmd2124665016214110">Configure centralized NAT on the NAT device.</span><p><ol type="a" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_ol1893087345214110"><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li264396171214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p562780354214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li264396171214110"></a><a name="en-us_task_0172374591_li264396171214110"></a>Configure basic NAT functions.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen2095059492214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1301429831214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b844550872214110">service-location 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1454409737214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1844396680214110">*</span>CGN-service-location-1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1601591547214110">location slot <span>1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen685114348214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2063876677214110">*</span>CGN-service-location-1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b199389442214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen386074896214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1884294365214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN-service-location-1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b2110400821214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen192977397214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2068038960214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1271941350214110">service-instance-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1775610053214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2096781951214110">*</span>CGN-service-instance-group-group1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1413227576214110">service-location 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1052199061214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword365622950214110">*</span>CGN-service-instance-group-group1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b295020152214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen540609042214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1363385959214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN-service-instance-group-group1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b928377660214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen2057135619214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword502045488214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b83271921214110">nat instance nat1 id 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen650198941214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1185773999214110">*</span>CGN-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b142028168214110">service-instance-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen156220895214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword2126107205214110">*</span>CGN-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b216787012214110">nat address-group address-group1 group-id 1 10.34.161.101 10.34.161.105</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen121646440214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1402500919214110">*</span>CGN-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1619241235214110">nat outbound any address-group address-group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1121220245214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword104451348214110">*</span>CGN-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b610942199214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1159173256214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword362822102214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN-nat-instance-nat1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1689069446214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li2050022844214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p506306640214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li2050022844214110"></a><a name="en-us_task_0172374591_li2050022844214110"></a>Configure a NAT traffic diversion policy.</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1176387975214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword493316391214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1990522697214110">acl 2001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1744078609214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1236242067214110">*</span>CGN-acl4-basic-2001] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b220580774214110">rule 0 permit source 10.10.10.0 0.0.0.255</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen255266297214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword203745845214110">*</span>CGN-acl4-basic-2001] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1706520186214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1477693484214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword942593312214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN-acl4-basic-2001] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b813942255214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1930504034214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1361117656214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1874433309214110">traffic classifier c1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1047405224214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword976154974214110">*</span>CGN-classifier-c1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b354141424214110">if-match acl 2001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1294570163214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1797783522214110">*</span>CGN-classifier-c1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b94728182214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1149125573214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword367581585214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN-classifier-c1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1402434069214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen972553656214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1633783612214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1346542934214110">traffic behavior b1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen382616053214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword686525754214110">*</span>CGN-behavior-b1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b396166633214110">nat bind instance nat1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1376419963214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1050374448214110">*</span>CGN-behavior-b1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1314301195214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen309710571214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1017686158214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN-behavior-b1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b530937000214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1338673134214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword199802725214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1098389149214110">traffic policy p1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen386363788214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword197858826214110">*</span>CGN-policy-p1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b722936610214110">classifier c1 behavior b1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1389677036214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1178520143214110">*</span>CGN-policy-p1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1916388603214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen131839001214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1251005179214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN-policy-p1] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b432300833214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen827357352214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword184827516214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b1380049590214110">interface gigabitEthernet <span>0/2/2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen208463765214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1194208771214110">*</span>CGN-GigabitEthernet<span>0/2/2</span>] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b780159848214110">ip address 192.168.11.2 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1726638652214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword443623185214110">*</span>CGN-GigabitEthernet<span>0/2/2</span>] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b696967426214110">traffic-policy p1 inbound</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1339763283214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1892463261214110">*</span>CGN-GigabitEthernet<span>0/2/2</span>] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b682751710214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1684409887214110">[<span class="keyword" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_keyword1852120013214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>CGN-GigabitEthernet<span>0/2/2</span>] <strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b645341618214110">quit</strong></pre>
</li></ol>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_example1247544771214110"><a name="EN-US_TASK_0000001194921709__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul id="EN-US_TASK_0000001194921709__en-us_task_0172374591_ul1383374487214110"><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li415897323214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p2074520323214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li415897323214110"></a><a name="en-us_task_0172374591_li415897323214110"></a>BRAS configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen1600877769214110">#
sysname BRAS
#
vsm on-board-mode disable
#
radius-server group rd1
 radius-server authentication 192.168.7.249 1812 weight 0
 radius-server accounting 192.168.7.249 1813 weight 0
 radius-server shared-key-cipher %^%#glhJ;yPG#$=tC&amp;(Is%q!S_";(k.Ef$:978$$e:TY%^%
#
interface GigabitEthernet<span>0/2/1</span>
 undo shutdown
 ip address 192.168.11.1 255.255.255.0
#
interface GigabitEthernet<span>0/2/0</span>.1
 user-vlan 1
 bas
  access-type layer2-subscriber default-domain authentication isp1
  authentication-method bind
#
ip pool pool1 bas local
 gateway 10.10.10.1 255.255.255.0
 section 1 10.10.10.1 10.10.10.100
 dns-server 192.168.7.252
#
license
 active nat session-table size 6 slot <span>1</span>
<strong id="EN-US_TASK_0000001194921709__en-us_task_0172374591_b2707113611531"> </strong>active nat bandwidth-enhance 40 slot <span>1</span>
#
service-location 1
 location slot <span>1</span>
#
service-instance-group group1
 service-location 1
#
nat instance nat1 id 1
 service-instance-group group1
 nat address-group address-group1 group-id 1
 section 1 11.11.11.101 11.11.11.105
 nat outbound 3001 address-group address-group1
 nat centralized-backup enable
 port-range 4096
#
user-group group1
#
acl number 3001
 rule 10 permit ip source 10.10.10.0 0.0.0.255
#
acl number 6001
 rule 1 permit ip source user-group group1
#
traffic classifier c1 operator or
 if-match acl 6001 precedence 1
#
traffic behavior b1
 nat bind instance nat1
#
traffic policy p1
 classifier c1 behavior b1 precedence 1
#
traffic-policy p1 inbound
#
aaa
 authentication-scheme auth1
  authentication-mode radius
#
 accounting-scheme acct1
  accounting-mode radius
 #
  domain isp1
   authentication-scheme auth1
   accounting-scheme acct1
   radius-server group rd1
   ip-pool pool1
   user-group group1 bind nat instance nat1
 #
#
ip route-static 0.0.0.0 255.255.255.255 192.168.10.2
#
 return</pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1609190705214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p259128617214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1609190705214110"></a><a name="en-us_task_0172374591_li1609190705214110"></a>CR configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen267957998214110">#
sysname CR
#
acl number 2001
 rule 10 permit source 10.10.10.0 0.0.0.255
#
traffic classifier c1 operator or
 if-match acl 2001 precedence 1
#
traffic behavior b1
 redirect ip-nexthop 192.168.11.2
#
traffic policy p1
 classifier c1 behavior b1 precedence 1
#
interface GigabitEthernet<span>0/2/2</span>
 undo shutdown
 ip address 192.168.10.2 255.255.255.0
 traffic-policy p1 inbound
#
ip route-static 11.11.11.0 255.255.255.0 192.168.10.1
#
 return</pre>
</li><li id="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1124365085214110"><p id="EN-US_TASK_0000001194921709__en-us_task_0172374591_p1495373642214110"><a name="EN-US_TASK_0000001194921709__en-us_task_0172374591_li1124365085214110"></a><a name="en-us_task_0172374591_li1124365085214110"></a>CGN configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001194921709__en-us_task_0172374591_screen679186631214110">#
sysname CGN
#
vsm on-board-mode disable
#
license
 active nat session-table size 6 slot <span>1</span>
#
acl number 2001
 rule 0 permit source 10.10.10.0 0.0.0.255
#
service-location 1
 location slot <span>1</span>
#
service-instance-group group1
 service-location 1
#
nat instance nat1 id 1
 service-instance-group group1
 nat address-group address-group1 group-id 1 10.34.161.101 10.34.161.105
 nat outbound any address-group address-group1
 port-range 4096
#
traffic classifier c1 operator or
 if-match acl 2001 precedence 1
#
traffic behavior b1
 nat bind instance nat1
#
traffic policy p1
 classifier c1 behavior b1 precedence 1
#
interface gigabitEthernet <span>0/2/2</span>
 undo shutdown
 ip address 192.168.11.2 24
 traffic-policy p1 inbound
#
 return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0056.html">Configuration Examples for NAT
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0081_1.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0089.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>