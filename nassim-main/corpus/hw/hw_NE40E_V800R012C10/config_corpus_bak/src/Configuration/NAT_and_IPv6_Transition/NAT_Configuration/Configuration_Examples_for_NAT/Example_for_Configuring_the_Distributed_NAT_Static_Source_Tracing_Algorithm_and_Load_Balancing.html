
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring the Distributed NAT Static Source Tracing Algorithm and Load Balancing">
<meta name="abstract" content="This section provides an example for configuring the distributed NAT static source tracing algorithm and load balancing. After the configuration is performed, IP addresses of multiple home users can be balanced to different CPUs for NAT in the multiple NAT service instances.">
<meta name="description" content="This section provides an example for configuring the distributed NAT static source tracing algorithm and load balancing. After the configuration is performed, IP addresses of multiple home users can be balanced to different CPUs for NAT in the multiple NAT service instances.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0056.html">
<meta name="DC.Relation" scheme="URI" content="../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0089.html">
<meta name="DC.Relation" scheme="URI" content="../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0120_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="c00549182">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="featurename" content="NAT">
<meta name="featuretype" content="NAT and IPv6 Transition">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001590438665">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring the Distributed NAT Static Source Tracing Algorithm and Load Balancing</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001590438665"></a><a name="EN-US_TASK_0000001590438665"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring the Distributed NAT Static Source Tracing Algorithm and Load Balancing</h1>
<div class="taskbody"><p>This section provides an example for configuring the distributed NAT static source tracing algorithm and load balancing. After the configuration is performed, IP addresses of multiple home users can be balanced to different CPUs for NAT in the multiple NAT service instances.</p>
<div class="context"><a name="EN-US_TASK_0000001590438665__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_context65404383214110"><h4 class="sectiontitle">Networking Requirements</h4><div class="note" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_note98102031145210"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p18810531185214">Only the <span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1152414571330">NE40E</span><span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword3501321048">-M2K</span> and <span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword102451824131514">NE40E</span><span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword18823101016414">-M2K-B</span> support this configuration.</p>
</div></div>
<p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p1910578306214110">In the distributed NAT scenario shown in <a href="#EN-US_TASK_0000001590438665__en-us_task_0000001582265705_fig14191727184">Figure 1</a>, home users access the Internet through the BRAS using PPPoE, IPoE, web authentication, or other ways. As well as implementing user authentication, authorization, and accounting, the BRAS also provides the NAT service to translate home users' private IP addresses into public ones. To improve network reliability, load balancing is implemented based on different CPUs. In addition, the static source tracing algorithm is used to find private IP addresses based on public IP addresses and port numbers so that home users can access the Internet. By using this algorithm, the BRAS does not need to send source tracing logs to record information about intranet users' access to the external network, thereby enhancing network security.</p>
<p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p11850124019495">The configuration requirements are as follows:</p>
<ul id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_ul18716184214493"><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1471611421495">Load balancing can be implemented by configuring multiple user groups and binding each user group to a NAT instance.</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li393352141516">Each home user (such as PC1 and PC2 in <a href="#EN-US_TASK_0000001590438665__en-us_task_0000001582265705_fig14191727184">Figure 1</a>) dials up to access the user groups bound to load balancing.</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li18972174494911">IP addresses of multiple home users can be balanced to different CPUs for NAT in the multiple NAT service instances.</li></ul>
<div class="fignone" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_fig14191727184"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_fig14191727184"></a><a name="en-us_task_0000001582265705_fig14191727184"></a><span class="figcap"><b>Figure 1 </b>Distributed NAT static source tracing and load balancing</span><br><span><img id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_image131921227581" src="../images/en-us_image_0000001589475969.png"></span></div>
<div class="note" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_note1843305403214110"><img src="../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p834816599214110">Interface1 on the BRAS in this example represents GE <span>0/2/0</span>.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001590438665__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_context251487424214110"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p84866260214110">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_ol1913613715211"><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li71369720527">Create NAT load balancing instances.</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li16176011185212">Configure the NAT static source tracing algorithm mapping.</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li14168223538">Bind a dynamic NAT address pool to a global address pool.</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1964285295317">Configure NAT user information and RADIUS authentication on the BRAS.</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li10117379544">Configure a NAT traffic diversion policy.</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li6344134714546">Configure a NAT traffic conversion policy.</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li16940125313544">Configure a user-side interface.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001590438665__1.4.3"></a><a name="1.4.3"></a>
<div class="p" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_context1946940472214110"><h4 class="sectiontitle">Data Preparation</h4><div class="p" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p1374625902214110">To complete the configuration, you need the following data: <ul id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_ul1446082848214110"><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li639285419214110">NAT instance.</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li377210463214110">User group name and UCL number</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li924390048214110">Information about the NAT traffic diversion policy</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li326224465214110">IDs of the private and public address pools for the static source tracing algorithm</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li2113612118214110">Private and public address segments of the static source tracing algorithm</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li894892059214110">Port number range and port range size of the public address pool in the static source tracing algorithm</li></ul>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001590438665__1.4.4"></a><a name="1.4.4"></a>
<div class="p" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_context996268385214110"><h4 class="sectiontitle">Procedure</h4><ol id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_ol87296087214110"><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li424199765214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p2027225962214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li424199765214110"></a><a name="en-us_task_0000001582265705_li424199765214110"></a>Create a NAT instance.</p>
<ol type="a" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_ol231675645214110"><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1954084258214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p826710635214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1954084258214110"></a><a name="en-us_task_0000001582265705_li1954084258214110"></a>Configure licenses.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen778102979214110">&lt;<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1729301003214110">HUAWEI</span>&gt;<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1168250692214110">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen48110844214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword11727238214110"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1678677189214110">HUAWEI</span>]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b960886913214110">sysname BRAS</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen411747804214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword882542631214110">*</span><span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword224449388214110">HUAWEI</span>]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b102235940214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen2283832115915">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword17622125019594"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b576312015568">vsm on-board-mode disable</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen6578103435915">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword4176057145913">*</span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1997810811561">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen894077877214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword790956551214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b506564474214110">license</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen991850636214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword168913952812">*</span>BRAS-license]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b106852513214110">active nat session-table size 32 slot <span>1</span> </strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen394711961214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword5457201112287">*</span>BRAS-license]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b2114011614214110">active nat session-table size 32 slot <span>2</span> </strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen420695265515">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword15795151292818">*</span>BRAS-license]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b195672020563">active nat bandwidth-enhance 40 slot <span>1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1561613523568">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword610471402814">*</span>BRAS-license]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b15616105219560">active nat bandwidth-enhance 40 slot <span>2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen9891773416">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword5741212193413">*</span>BRAS-license]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b681323123414">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1164372187214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1139992843417"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-license]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b376980367214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1435027754214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p122622021214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1435027754214110"></a><a name="en-us_task_0000001582265705_li1435027754214110"></a>Bind service-instance groups <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b33511855124617">group1</strong> and <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b437121119473">group2</strong> to service-location groups <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b19571015134719">1</strong> and <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b18797161354719">2</strong>, respectively.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen901910666214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword232722736214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b2027366313214110">service-location 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1219740777214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1964103532214110">*</span>BRAS-service-location-1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b608726870214110">location slot <span>1</span> </strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen495743087214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword324796660214110">*</span>BRAS-service-location-1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b542643342214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen2055776870214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword849719356214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-service-location-1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1354365656214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1561882830214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1711520706214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b61139538214110">service-location 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1281221089214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword363866925214110">*</span>BRAS-service-location-2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1058613575214110">location slot <span>2</span> </strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1781776365214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword38377351214110">*</span>BRAS-service-location-2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1858290462214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen212649239214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1177653241214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-service-location-2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1118347415214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen740296920214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword914824787214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b44073200214110">service-instance-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen524826523214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword2135218434214110">*</span>BRAS-service-instance-group-group1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b23354296214110">service-location 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1163289559214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1204522046214110">*</span>BRAS-service-instance-group-group1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1504357699214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen649835103214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword228506463214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-service-instance-group-group1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1544981889214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen139211212427">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword421573116421"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b18215931184217">service-instance-group group2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen16428121014433">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword12120101711434">*</span>BRAS-service-instance-group-group2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b161201517114313">service-location 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen129241342124314">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword19241124604314">*</span>BRAS-service-instance-group-group2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1638484913431">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1175619525434">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1412115774312"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-service-instance-group-group2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b14121185764310">quit</strong></pre>
</li></ol>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1188517265159">Configure the NAT static source tracing algorithm mapping.<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen577320409151">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword13271749121517"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1475624611618">nat static-mapping</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1991517496164">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword164007159177">*</span>BRAS-nat-static-mapping]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b205496358178">inside-pool 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen16107843131711">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword941312368187">*</span>BRAS-nat-static-mapping-inside-pool-1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b7951125619189">section 1 192.168.0.10 192.168.0.110</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen310127162310">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1349113142311">*</span>BRAS-nat-static-mapping-inside-pool-1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b142511340192319">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen115064397198">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1935218435195">*</span>BRAS-nat-static-mapping]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b55321854181912">inside-pool 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen13579165816199">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword9151935209">*</span>BRAS-nat-static-mapping-inside-pool-2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b2604191315209">section 1 192.168.0.130 192.168.0.230</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1092911722218">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword19656221222">*</span>BRAS-nat-static-mapping-inside-pool-2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b271862816228">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen66584189204">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1237512762019">*</span>BRAS-nat-static-mapping]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b31961738122020">global-pool 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen5930124120203">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword493305318209">*</span>BRAS-nat-static-mapping-global-pool-1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b218714413211">section 1 10.1.1.5 10.1.1.125</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1056063982419">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword13381143192410">*</span>BRAS-nat-static-mapping-global-pool-1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b139323487242">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen0826879217">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword187656182217">*</span>BRAS-nat-static-mapping]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b16308654132115">global-pool 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen5657930112114">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword16554133913214">*</span>BRAS-nat-static-mapping-global-pool-2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b17913582213">section 1 10.1.1.130 10.1.1.250</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen143125313259">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword14205161711333">*</span>BRAS-nat-static-mapping-global-pool-2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b181974917255">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen101105467015">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword149321722203216">*</span>BRAS-nat-static-mapping]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b4352614313">static-mapping 1 inside-pool 1 global-pool 1 port-range 256 1023 port-size 256</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1995543315">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword166041824163219">*</span>BRAS-nat-static-mapping]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1612961725">static-mapping 2 inside-pool 2 global-pool 2 port-range 256 1023 port-size 256</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1345894083215">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1463213249258">*</span>BRAS-nat-static-mapping]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b125252455251">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen8651195263">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword17481645122615"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-static-mapping]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1895171711266">quit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li312140265214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p1986367881214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li312140265214110"></a><a name="en-us_task_0000001582265705_li312140265214110"></a>Bind the static NAT and the service-instance groups to the NAT instances.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1436993868214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword2087382014214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b10953193619281">nat instance nat1 id 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen465185654214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword148494917284">*</span>BRAS-nat-instance-nat1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b880210753015">service-instance-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen11248101713016">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1141082143010">*</span>BRAS-nat-instance-nat1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1613010793112">nat bind static-mapping 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen323018202712">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword48231324274">*</span>BRAS-nat-instance-nat1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b13735131172">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen178469311735">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword148848501370"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-nat1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b18842591155">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen24942149514">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword13548165313718"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1028718451754">nat instance nat2 id 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen8619504510">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword168701721065">*</span>BRAS-nat-instance-nat2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b7411622064">service-instance-group group2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen107811226969">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword221719351965">*</span>BRAS-nat-instance-nat2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b864784416611">nat bind static-mapping 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen592518514620">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword175741151474">*</span>BRAS-nat-instance-nat2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b173529141071">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen195251039178">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword186520572719"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-nat-instance-nat2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b16652145710710">quit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1655920471385">Configure NAT user information and RADIUS authentication on the BRAS.<ol type="a" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_ol1015740658214110"><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1031660329214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p332183625214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1031660329214110"></a><a name="en-us_task_0000001582265705_li1031660329214110"></a>Configure the BRAS service on the device so that users can go online. For details, see <a href="../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0035.html">AAA and User Management Configuration (Access Users)</a> in <em id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_i59261413524"><span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword622510372214110">HUAWEI</span> <span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword921398489214110">NE40E</span> Configuration Guide-User Access</em>.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1160236001214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword634822830214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1977800740214110">ip pool baspool1 bas local</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen685682130214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword8818528201220">*</span>BRAS-ip-pool-baspool1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b820449787214110">gateway 192.168.0.2 255.255.255.128</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen568034913214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword15351730151211">*</span>BRAS-ip-pool-baspool1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1684862065214110">section 1 192.168.0.10 192.168.0.110</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen765422422214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword826921194214110">*</span>BRAS-ip-pool-baspool1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1776969858214110">dns-server 192.168.7.252</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1542744094214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1708737591214110">*</span>BRAS-ip-pool-baspool1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b509430898214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1148274391214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1231756328214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-ip-pool-baspool1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1968100878214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen557217164116">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword054692761110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b166941439119">ip pool baspool2 bas local</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen53241252121116">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword14478419127">*</span>BRAS-ip-pool-baspool2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b856132713279">gateway 192.168.0.129 255.255.255.128</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen132441513131219">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1131316425122">*</span>BRAS-ip-pool-baspool2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b12668841172720">section 1 192.168.0.130 192.168.0.230</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen216492216123">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1047095119129">*</span>BRAS-ip-pool-baspool2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b4504135816273">dns-server 192.168.7.252</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen165482371315">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword793016751310">*</span>BRAS-ip-pool-baspool2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b693012771314">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen74101514191317">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword042801981311"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-ip-pool-baspool2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b14429181911134">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1544320282379">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword54742963720"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b6689144954116">radius-server group rd1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen15733133512372">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword14553411104412">*</span>BRAS-radius-rd1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b714155416418">radius-server authentication 192.168.7.249 1645 weight 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen15275218389">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1853431294414">*</span>BRAS-radius-rd1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b113043585418">radius-server accounting 192.168.7.249 1646 weight 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen05621150143710">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword0656313144415">*</span>BRAS-radius-rd1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1090415213423">radius-server shared-key YsHsjx_202206</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen6882165214376">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword165978149448">*</span>BRAS-radius-rd1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b962046104213">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen2983135417375">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1921194634316"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-radius-rd1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b188076233421">radius-server type plus11</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen444493813718">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword0146114717432"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-radius-rd1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b4571928114220">radius-server traffic-unit kbyte</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1782394053719">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword560084934318"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-radius-rd1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b175741931154214">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen198971846113716">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword10632155054320"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b86641534134218">aaa</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen715711177394">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword9988205114320"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b12337193874216">authentication-scheme auth1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen422141963918">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword3129171824415">*</span>BRAS-aaa-authen-auth1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b18311542134211">authentication-mode radius</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1194852115391">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1314511974411">*</span>BRAS-aaa-authen-auth1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b946964644216">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen5244132473919">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword174201255114320"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-authen-auth1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b17177135014219">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen349543133920">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword662525616432"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b3216155484210">accounting-scheme acct1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen8250134983912">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword32177263441">*</span>BRAS-aaa-accounting-acct1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b18493358154210">accounting-mode radius</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen779685923916">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword137841129124419">*</span>BRAS-aaa-accounting-acct1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1613710224316">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1154017614403">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword971825984314"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-accounting-acct1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1056319594310">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen177741710405">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1965019024416"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b9715109194320">domain isp1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen9805172216406">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword5254123284417">*</span>BRAS-aaa-domain-isp1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b358619134436">authentication-scheme auth1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1475642816403">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword78621333184410">*</span>BRAS-aaa-domain-isp1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b175631022194319">accounting-scheme acct1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen14787834164010">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1715193584412">*</span>BRAS-aaa-domain-isp1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b18172715431">radius-server group rd1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen7848134194019">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1221843644418">*</span>BRAS-aaa-domain-isp1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b4651203084313">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen12726601111">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword953202091518"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b441318214116">quit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li71978888214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p715877355214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li71978888214110"></a><a name="en-us_task_0000001582265705_li71978888214110"></a>Configure user groups 1 and 2.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1843572214214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword669499369214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b346830379214110">user-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1359512151414">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword12129144281416">*</span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b16565372149">user-group group2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen4124125131516">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword189241010151510">*</span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1253711179154">commit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1910508854214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p746819234214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1910508854214110"></a><a name="en-us_task_0000001582265705_li1910508854214110"></a>Specify the domain to which the users belong.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen393276616214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword423203192214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1741196291214110">aaa</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1806516583214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1227868002214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b246635971214110">domain isp1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen83702458171">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1729945016172">*</span>BRAS-aaa]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b8653195961720">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen218790129214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword67871531191812"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b12935380171">ip-pool baspool1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1351381317183">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword2930113211819"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1821204481816">ip-pool baspool2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen132501498182">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword14454172412197"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1035611365196">user-group group2 bind nat instance nat2 ip-pool baspool2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen158749448196">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword136821341132019">*</span>BRAS-aaa-domain-isp1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1290141282016">user-group group1 bind nat instance nat1 ip-pool baspool1 </strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1336718212214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword2098452256214110">*</span>BRAS-aaa-domain-isp1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b597595848214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen106214060214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1121213126214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa-domain-isp1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1355330956214110">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen331148352214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1652133561214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-aaa]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b710887571214110">quit</strong></pre>
</li></ol>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li476506052214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p670696301214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li476506052214110"></a><a name="en-us_task_0000001582265705_li476506052214110"></a>Configure a NAT traffic diversion policy.</p>
<ol type="a" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_ol2038699120214110"><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li2006220996214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p915538225214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li2006220996214110"></a><a name="en-us_task_0000001582265705_li2006220996214110"></a>Configure an ACL numbered <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b452365245410">6001</strong> and set an ACL rule to match the traffic from the user group <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b7401016555">group1</strong> so that the traffic can be diverted to the NAT service board.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen165400194214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1454298681214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1714259112214110">acl 6001</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1925752291214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1867827647214110">*</span>BRAS-acl-ucl-6001]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b685121804214110">rule 1 permit ip source user-group group1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1517875514214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1692714397214110">*</span>BRAS-acl-ucl-6001]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1588007024214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1058219619214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword113739535214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-acl-ucl-6001]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1843254453214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1832310782219"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p17323197172213"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1832310782219"></a><a name="en-us_task_0000001582265705_li1832310782219"></a>Configure an ACL numbered <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b16534144218552">6002</strong> and set an ACL rule to match the traffic from the user group <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1553417425553">group2</strong> so that the traffic can be diverted to the NAT service board.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen93238711223">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1832367122216"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1632411714227">acl 6002</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen732414712223">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword932417792213">*</span>BRAS-acl-ucl-6002]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b193242073228">rule 2 permit ip source user-group group2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen193245742217">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword123241714222">*</span>BRAS-acl-ucl-6002]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b16324974227">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen103247715227">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword12324107112215"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-acl-ucl-6002]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b13324157192210">quit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li985095113214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p1542129468214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li985095113214110"></a><a name="en-us_task_0000001582265705_li985095113214110"></a>Configure a traffic classifier for <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b91161445575">group1</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen539271079214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword2021294643214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1129256085214110">traffic classifier c1 operator or</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1434758156214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword774399486214110">*</span>BRAS-classifier-c1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1133108649214110">if-match acl 6001</strong> <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1226774212236">precedence 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen891960166214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword746146185214110">*</span>BRAS-classifier-c1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1731648619214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen396056968214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1179846353214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-classifier-c1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1336596684214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li177446572220"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p87441657172215"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li177446572220"></a><a name="en-us_task_0000001582265705_li177446572220"></a>Configure a traffic classifier for <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b144517100575">group2</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen137443579224">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword5744857122211"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b107441557152210">traffic classifier c2 operator or</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1774425752219">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword27441575224">*</span>BRAS-classifier-c2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b137441757112214">if-match acl 6002 </strong><strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b2028395616234">precedence 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen97441857102217">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1174485718223">*</span>BRAS-classifier-c2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b11744105702210">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen9744557102218">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1874465718222"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-classifier-c2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b12744165717221">quit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li125913436214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p955726557214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li125913436214110"></a><a name="en-us_task_0000001582265705_li125913436214110"></a>Configure a traffic behavior named <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1720710172576">b1</strong>, which binds traffic to the NAT instance.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen810597114214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword968072689214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b585977981214110">traffic behavior b1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1119565460214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword622526432214110">*</span>BRAS-behavior-b1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1988434965214110">nat bind instance</strong><strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b202119403259"> nat1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen349254246214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword39619497214110">*</span>BRAS-behavior-b1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b5851486214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1129126937214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1773495540214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-behavior-b1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1317202500214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li7640184152418"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p4640194120244"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li7640184152418"></a><a name="en-us_task_0000001582265705_li7640184152418"></a>Configure a traffic behavior named <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b21541215185816">b2</strong>, which binds traffic to the NAT instance.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen66409411248">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword136402041112415"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b5640341172414">traffic behavior b2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1964014413245">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1164010415245">*</span>BRAS-behavior-b2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b6640541112414">nat bind instance</strong><strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1529983772515"> nat2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen14640134192419">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword206413413245">*</span>BRAS-behavior-b2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1641174111246">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen664124172413">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword12641194142416"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-behavior-b2]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b14641154117248">quit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li877468807214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p848035300214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li877468807214110"></a><a name="en-us_task_0000001582265705_li877468807214110"></a>Configure a NAT policy for <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b367115186590">group1</strong>, and associate the ACL rule with the traffic behavior.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1351468211214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword474039606214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b570152607214110">traffic policy p1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1779920179214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword895604910214110">*</span>BRAS-trafficpolicy-p1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1957559054214110">classifier c1 behavior b1</strong> <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1137914172715">precedence 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen263687210214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword783922986214110">*</span>BRAS-trafficpolicy-p1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1402363249214110">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen2033074928214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword340262259214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-trafficpolicy-p1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b2013173923214110">quit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li16950133132618"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p5950113311268"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li16950133132618"></a><a name="en-us_task_0000001582265705_li16950133132618"></a>Configure a NAT policy for <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b131381241808">group2</strong>, and associate the ACL rule with the traffic behavior.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen195003372614">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1695043382615"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b4950143392612">traffic policy p1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen79503336261">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1895083312267">*</span>BRAS-trafficpolicy-p1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b11950153312263">classifier c2 behavior b2</strong> <strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b15178116172712">precedence 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen6950173362614">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword19950733172611">*</span>BRAS-trafficpolicy-p1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1950433192618">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen13950153311261">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword9950133382612"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-trafficpolicy-p1]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b109501433192614">quit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1552746669214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p791987539214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1552746669214110"></a><a name="en-us_task_0000001582265705_li1552746669214110"></a>Apply the NAT traffic diversion policy in the system view.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen251276228214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword524153379214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b260761899214110">traffic-policy p1 inbound</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen915841030214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword809513629214110">*</span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b494796717214110">commit</strong></pre>
</li></ol>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1921215524817">Configure a user-side interface.<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen4903598288">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword290315914289"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b29034992814">interface GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen598041562913">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword9677239102920"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b15602151652917">bas</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen07041655172910">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1870455520293"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>-bas]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b14705192073017">access-type layer2-subscriber default-domain authentication isp1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen931816139304">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword123747323119"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>-bas]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b7345828153114">authentication-method bind </strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen01314344419">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword63018289465">*</span>BRAS-GigabitEthernet<span>0/2/0</span>-bas]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b163651859476">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen14641201714410">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword16983676463"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>-bas]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b16121286473">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen101341020114414">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword15981178104616"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS-GigabitEthernet<span>0/2/0</span>]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b165771910164715">quit</strong></pre>
</li><li id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1589578953214110"><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p1356894391214110"><a name="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_li1589578953214110"></a><a name="en-us_task_0000001582265705_li1589578953214110"></a>Verify the configuration.</p>
<p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p2010063117214110"># Display detailed information about users of CPU 0 on the service board in slot <span>1</span>.</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1689016675214110">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1216388576214110"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b1738722310214110">display nat user-information slot <span>1</span>  verbose</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1846287228214110">This operation will take a few minutes. Press 'Ctrl+C' to break ...              
Slot: <span>1</span>                                                                 
Total number:  1.                                                           
  ---------------------------------------------------------------  
  User Type                             :  NAT444
  CPE IP                                :  192.168.0.110
  User ID                               :  0
  VPN Instance                          :  -
  Address Group                         :  -
  NoPAT Address Group                   :  -
  NAT Instance                          :  nat1
  Public IP                             :  10.1.1.38
  NoPAT Public IP                       :  -
  Start Port                            :  512
  Port Range                            :  256
  Port Total                            :  256
  Radius Specific PCP Port              :  NO
  PCP authentication                    :  True
  Extend Port Alloc Times               :  0
  Extend Port Alloc Number              :  0
  First/Second/Third Extend Port Start  :  0/0/0
  Total/TCP/UDP/ICMP Session Limit      :  8192/10240/10240/512
  Total/TCP/UDP/ICMP Session Current    :  0/0/0/0
  Total/TCP/UDP/ICMP Rev Session Limit  :  8192/10240/10240/512
  Total/TCP/UDP/ICMP Rev Session Current:  0/0/0/0
  Total/TCP/UDP/ICMP Port Limit         :  0/0/0/0
  Total/TCP/UDP/ICMP Port Current       :  0/0/0/0
  Nat ALG Enable                        :  NULL
  Port Reuse                            :  False
  Token/TB/TP                           :  0/0/0
  Port Forwarding Flag                  :  Non Port Forwarding
  Port Forwarding Ports                 :  0 0 0 0 0
  Create Time                           :  2023-04-27 15:44:01
  Aging Time(s)                         :  -
  Left Time(s)                          :  -
  Port Limit Discard Count              :  0
  Session Limit Discard Count           :  0
  Fib Miss Discard Count                :  0
  --&gt;Transmit Packets                   :  0
  --&gt;Transmit Bytes                     :  0
  --&gt;Drop Packets                       :  0
  &lt;--Transmit Packets                   :  0
  &lt;--Transmit Bytes                     :  0
  &lt;--Drop Packets                       :  0
  Fast-forwarding Statistics ID         :  -
  --&gt;Hit Fast-fwd session Packets       :  -
  --&gt;NP transmit to multi-core Packets  :  -
  &lt;--Hit Fast-fwd session Packets       :  -
  &lt;--NP transmit to multi-core Packets  :  -
  ---------------------------------------------------------------------------</pre>
<div class="p" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p116163514318"># Display detailed information about users of CPU 1 on the service board in slot <span>2</span>.<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen1774520112423">[<span class="keyword" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_keyword1066772134213"><font style="font-size:8pt" Face="Courier New" >~</font></span>BRAS]<strong id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_b566792104217">display nat user-information slot <span>2</span>  verbose</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen11645181884317">This operation will take a few minutes. Press 'Ctrl+C' to break ...              
Slot: <span>2</span>                                                                 
Total number:  1.                                                           
  ---------------------------------------------------------------  
  User Type                             :  NAT444
  CPE IP                                :  192.168.0.221
  User ID                               :  2052
  VPN Instance                          :  -
  Address Group                         :  -
  NoPAT Address Group                   :  -
  NAT Instance                          :  nat2
  Public IP                             :  10.1.1.160
  NoPAT Public IP                       :  -
  Start Port                            :  512
  Port Range                            :  256
  Port Total                            :  256
  Radius Specific PCP Port              :  NO
  PCP authentication                    :  True
  Extend Port Alloc Times               :  0
  Extend Port Alloc Number              :  0
  First/Second/Third Extend Port Start  :  0/0/0
  Total/TCP/UDP/ICMP Session Limit      :  8192/10240/10240/512
  Total/TCP/UDP/ICMP Session Current    :  0/0/0/0
  Total/TCP/UDP/ICMP Rev Session Limit  :  8192/10240/10240/512
  Total/TCP/UDP/ICMP Rev Session Current:  0/0/0/0
  Total/TCP/UDP/ICMP Port Limit         :  0/0/0/0
  Total/TCP/UDP/ICMP Port Current       :  0/0/0/0
  Nat ALG Enable                        :  NULL
  Port Reuse                            :  False
  Token/TB/TP                           :  0/0/0
  Port Forwarding Flag                  :  Non Port Forwarding
  Port Forwarding Ports                 :  0 0 0 0 0
  Create Time                           :  2023-04-27 15:54:45
  Aging Time(s)                         :  -
  Left Time(s)                          :  -
  Port Limit Discard Count              :  0
  Session Limit Discard Count           :  0
  Fib Miss Discard Count                :  0
  --&gt;Transmit Packets                   :  0
  --&gt;Transmit Bytes                     :  0
  --&gt;Drop Packets                       :  0
  &lt;--Transmit Packets                   :  0
  &lt;--Transmit Bytes                     :  0
  &lt;--Drop Packets                       :  0
  Fast-forwarding Statistics ID         :  -
  --&gt;Hit Fast-fwd session Packets       :  -
  --&gt;NP transmit to multi-core Packets  :  -
  &lt;--Hit Fast-fwd session Packets       :  -
  &lt;--NP transmit to multi-core Packets  :  -
  ---------------------------------------------------------------------------</pre>
</div>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001590438665__1.4.5"></a><a name="1.4.5"></a>
<div class="p" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_context2141690296214110"><h4 class="sectiontitle">Configuration Files</h4><p id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_p324390466214110">BRAS configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001590438665__en-us_task_0000001582265705_screen16842105210234"># 
sysname BRAS 
#
vsm on-board-mode disable
# 
license 
 active nat session-table size 32 slot <span>1</span>  
 active nat session-table size 32 slot <span>2</span>  
 active nat bandwidth-enhance 40 slot <span>1</span>
 active nat bandwidth-enhance 40 slot <span>2</span>
#
user-group group1
#
user-group group2
#
ip pool baspool1 bas local
 gateway 192.168.0.2 255.255.255.128
 section 1 192.168.0.10 192.168.0.110
 dns-server  192.168.7.252
# 
ip pool baspool2 bas local
 gateway 192.168.0.129 255.255.255.128
 section 1 192.168.0.130 192.168.0.230
 dns-server 192.168.7.252
# 
radius-server group rd1 
 radius-server authentication 192.168.7.249 1645 weight 0 
 radius-server accounting 192.168.7.249 1646 weight 0 
 radius-server shared-key %^%#x*CgITP4C<font style="font-size:8pt" Face="Courier New" >~</font>;q,*+DEW'JBWe#)"Q&amp;|7bX]b:Y&lt;{w'%^%# 
 radius-server type plus11 
 radius-server traffic-unit kbyte 
#
nat static-mapping
 inside-pool 1
  section 1 192.168.0.10 192.168.0.110
 inside-pool 2
  section 1 192.168.0.130 192.168.0.230
 global-pool 1
  section 1 10.1.1.5 10.1.1.125
 global-pool 2
  section 1 10.1.1.130 10.1.1.250
 static-mapping 1 inside-pool 1 global-pool 1 port-range 256 1023 port-size 256
 static-mapping 2 inside-pool 2 global-pool 2 port-range 256 1023 port-size 256
#
service-location 1       
 location slot <span>1</span>  
# 
service-location 2       
 location slot <span>2</span>  
#
service-instance-group group1
 service-location 1
#
service-instance-group group2
 service-location 2 
#
acl number 6001 
 rule 1 permit ip source user-group group1 
#
acl number 6002 
 rule 2 permit ip source user-group group2
#
nat instance nat1 id 1   
 service-instance-group group1 
 nat bind static-mapping 1
# 
nat instance nat2 id 2   
 service-instance-group group2 
 nat bind static-mapping 2
# 
traffic classifier c1 operator or
 if-match acl 6001 precedence 1
#
traffic classifier c2 operator or
 if-match acl 6002 precedence 1
#
traffic behavior b1
 nat bind instance nat1
#
traffic behavior b2
 nat bind instance nat2
#
traffic policy p1 
 share-mode
 classifier c1 behavior b1 precedence 1
 classifier c2 behavior b2 precedence 2
# 
traffic-policy p1 inbound 
# 
aaa 
 authentication-scheme auth1 
  authentication-mode RADIUS 
 # 
 accounting-scheme acct1 
  accounting-mode RADIUS 
 # 
 domain isp1 
  authentication-scheme auth1 
  accounting-scheme acct1 
  radius-server group rd1 
  ip-pool baspool1 
  ip-pool baspool2
  user-group group1 bind nat instance nat1 ip-pool baspool1
  user-group group2 bind nat instance nat2 ip-pool baspool2
# 
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 bas 
  access-type layer2-subscriber default-domain authentication isp1 
  authentication-method bind 
#
return</pre>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0056.html">Configuration Examples for NAT
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0089.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../software/nev8r10_vrpv8r16/user/ne/dc_ne_nat_cfg_0120_1.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>