
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring OSPF Fast Convergence">
<meta name="abstract" content="This section describes how to configure OSPF fast convergence by adjusting the timer parameter and configuring BFD.">
<meta name="description" content="This section describes how to configure OSPF fast convergence by adjusting the timer parameter and configuring BFD.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0093.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0098.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2017.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ospf,w00800033,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00847023">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365664">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring OSPF Fast Convergence</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172365664"></a><a name="EN-US_TASK_0172365664"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring OSPF Fast Convergence</h1>
<div class="taskbody"><p>This section describes how to configure OSPF fast convergence by adjusting the timer parameter and configuring BFD.</p>
<div class="context"><a name="EN-US_TASK_0172365664__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the broadcast network shown in <a href="#EN-US_TASK_0172365664__fig_dc_vrp_ospf_cfg_010101">Figure 1</a>, OSPF runs on the four devices, which belong to the same OSPF area.</p>
<div class="fignone" id="EN-US_TASK_0172365664__fig_dc_vrp_ospf_cfg_010101"><a name="EN-US_TASK_0172365664__fig_dc_vrp_ospf_cfg_010101"></a><a name="fig_dc_vrp_ospf_cfg_010101"></a><span class="figcap"><b>Figure 1 </b>Networking for configuring OSPF fast convergence</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interface 1 in this example represents GE<span>0/1/0</span>.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_ospf_cfg_009701.png" width="NaN" height="NaN"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365664__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>When configuring OSPF fast convergence, note the following rules:</p>
<ul><li><p>You can decrease the interval at which Hello packets are sent and values of the Dead, Poll, and Wait timers for fast OSPF network convergence. Frequent packet transmission, however, may overload the device. In addition, the OSPF network convergence slows down if the values of these timers are too large. Therefore, set values based on the network stability.</p>
</li><li>The intervals at which Hello packets are sent and values of the Dead, Poll, and Wait timers at both ends must be the same. Otherwise, the OSPF neighbor relationship cannot be established.</li><li>To improve security, OSPF area authentication or interface authentication is recommended. For details, see "Improving OSPF Network Security". OSPF area authentication is used as an example. For details, see Example for Configuring Basic OSPF Functions.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365664__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure basic OSPF functions on each <span class="keyword">Router</span> for interconnection.</p>
</li><li><p>Configure the BFD function on each <span class="keyword">Router</span>.</p>
</li><li><p>Adjust the holddown time of the OSPF neighbors on each <span class="keyword">Router</span>.</p>
</li><li><p>Configure the Smart-discover function on each <span class="keyword">Router</span>.</p>
</li><li><p>Adjust the intervals for configuration update, LSA reception, and SPF calculation through an intelligent timer on each <span class="keyword">Router</span>.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365664__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Holddown time of the OSPF neighbors</p>
</li><li><p>Intervals for LSA update, LSA reception, and SPF calculation</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365664__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IP address to each interface. For configuration details, see <a href="#EN-US_TASK_0172365664__section_dc_vrp_ospf_cfg_010106">Configuration Files</a> in this section.</span></li><li><span>Configure basic OSPF functions. For details, see <a href="dc_vrp_ospf_cfg_0094.html">Example for Configuring Basic OSPF Functions</a>.</span></li><li><span>Adjust the holddown time of the OSPF neighbors on each <span class="keyword">Router</span>.</span><p><p># Configure <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>ospf timer dead 30</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>The holddown time of neighbors of the OSPF-capable interfaces must be longer than the interval at which Hello packets are sent, and the values of <strong><span>dead</span></strong> <i><span class="varname">interval</span></i> on the routers in the same network segment must be the same.</p>
</li><li><p>In this configuration example, the following configurations on each <span class="keyword">Router</span> are the same as that on <span class="keyword">Device</span>A. For configuration details, see Configuration Files in this section.</p>
<ul><li><p>Adjust the holddown time of the OSPF neighbors on each <span class="keyword">Router</span>.</p>
</li><li><p>Configure the Smart-discover function on each <span class="keyword">Router</span>.</p>
</li><li><p>Adjust the intervals for configuration update, LSA reception, and SPF calculation through an intelligent timer on the <span class="keyword">Router</span>.</p>
</li></ul>
</li></ul>
</div></div>
</p></li><li><span>Configure the Smart-discover function on each <span class="keyword">Router</span>.</span><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>ospf smart-discover</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
</p></li><li><span>Configure the BFD function on each <span class="keyword">Router</span>.</span><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>ospf</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1] <strong>bfd all-interfaces enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ospf-1] <strong>quit</strong></pre>
</p></li><li><span>Adjust the intervals for configuration update, LSA reception, and SPF calculation through an intelligent timer on each <span class="keyword">Router</span>.</span><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ospf 1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ospf-1] <strong>lsa-arrival-interval intelligent-timer 3000 200 500</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1] <strong>lsa-originate-interval intelligent-timer 3000 200 500</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1] <strong>spf-schedule-interval intelligent-timer 3000 200 500</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospf-1] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Run the <a href="cmdqueryname=display+ospf+brief"><b><span class="cmdname">display ospf brief</span></b></a> command on each <span class="keyword">Router</span> to view the brief information about OSPF. Use Router A as an example. You can view the values of timers.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display ospf brief</strong></pre>
<pre class="screen">          OSPF Process 1 with Router ID 9.9.9.9
                  OSPF Protocol Information
RouterID: 9.9.9.9          Border Router: AREA 
Multi-VPN-Instance is not enabled 
Global DS-TE Mode: Non-Standard IETF Mode 
Graceful-restart capability: disabled 
Helper support capability  : not configured 
OSPF Stub Router State Reason: Startup Synchronize
    Router LSA stub links with cost 65535
    Summary LSA with cost 16777214 
    External LSA with cost 16777214 
Applications Supported: MPLS Traffic-Engineering 
Spf-schedule-interval: max 10000ms, start 500ms, hold 1000ms 
Default ASE parameters: Metric: 1 Tag: 1 Type: 2 
Route Preference: 10 
ASE Route Preference: 150 
Intra Route Preference: 50 
Inter Route Preference: 50 
SPF Computation Count: 56 
RFC 1583 Compatible 
Retransmission limitation is disabled 
bfd enabled 
BFD Timers: Tx-Interval 10 , Rx-Interval 10 , Multiplier 3 
Area Count: 2   Nssa Area Count: 0 
ExChange/Loading Neighbors: 0

 Area: 0.0.0.0             MPLS TE not enabled
 Authtype: None   Area flag: Normal
 SPF scheduled count: 2
 Exchange/Loading neighbors: 0
 Router ID conflict state: Normal

 Interface: 1.1.1.1 (GE<span>0/3/1</span>)
 Cost: 1       State: DR      Type: Broadcast      MTU: 1500
 Priority: 1
 Designated Router: 1.1.1.1
 Backup Designated Router: 0.0.0.0
 <strong>Timers: Hello 10, Dead 40, Wait 40, Poll 120, Retransmit 5, Transmit Delay 1</strong></pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172365664__section_dc_vrp_ospf_cfg_010106"><a name="EN-US_TASK_0172365664__section_dc_vrp_ospf_cfg_010106"></a><a name="section_dc_vrp_ospf_cfg_010106"></a><a name="EN-US_TASK_0172365664__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span> A configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen">router id 1.1.1.1</pre>
<pre class="screen">#</pre>
<pre class="screen"> bfd</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.1.1 255.255.255.0</pre>
<pre class="screen"> ospf timer dead 30</pre>
<pre class="screen"> ospf smart-discover </pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> bfd all-interfaces enable</pre>
<pre class="screen"> spf-schedule-interval intelligent-timer 3000 200 500</pre>
<pre class="screen"> lsa-arrival-interval intelligent-timer 3000 200 500</pre>
<pre class="screen"> lsa-originate-interval intelligent-timer 3000 200 500</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.1.0 0.0.0.255</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">router id 2.2.2.2</pre>
<pre class="screen">#</pre>
<pre class="screen"> bfd</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.1.2 255.255.255.0</pre>
<pre class="screen"> ospf timer dead 30</pre>
<pre class="screen"> ospf smart-discover </pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> bfd all-interfaces enable</pre>
<pre class="screen"> spf-schedule-interval intelligent-timer 3000 200 500</pre>
<pre class="screen"> lsa-arrival-interval intelligent-timer 3000 200 500</pre>
<pre class="screen"> lsa-originate-interval intelligent-timer 3000 200 500</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.1.0 0.0.0.255</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>C configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>C</pre>
<pre class="screen">#</pre>
<pre class="screen">router id 3.3.3.3</pre>
<pre class="screen">#</pre>
<pre class="screen"> bfd</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.1.3 255.255.255.0</pre>
<pre class="screen"> ospf timer dead 30</pre>
<pre class="screen"> ospf smart-discover </pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> bfd all-interfaces enable</pre>
<pre class="screen"> spf-schedule-interval intelligent-timer 3000 200 500</pre>
<pre class="screen"> lsa-arrival-interval intelligent-timer 3000 200 500</pre>
<pre class="screen"> lsa-originate-interval intelligent-timer 3000 200 500</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.1.0 0.0.0.255</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>D configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>D</pre>
<pre class="screen">#</pre>
<pre class="screen">router id 4.4.4.4</pre>
<pre class="screen">#</pre>
<pre class="screen"> bfd</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.1.4 255.255.255.0</pre>
<pre class="screen"> ospf timer dead 30</pre>
<pre class="screen"> ospf smart-discover </pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> bfd all-interfaces enable</pre>
<pre class="screen"> spf-schedule-interval intelligent-timer 3000 200 500</pre>
<pre class="screen"> lsa-arrival-interval intelligent-timer 3000 200 500</pre>
<pre class="screen"> lsa-originate-interval intelligent-timer 3000 200 500</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.1.0 0.0.0.255</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0093.html">Configuration Examples for OSPF
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0098.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2017.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>