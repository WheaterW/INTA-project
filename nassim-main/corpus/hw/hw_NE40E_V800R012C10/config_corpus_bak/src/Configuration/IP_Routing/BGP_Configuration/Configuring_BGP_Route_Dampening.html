
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP Route Dampening">
<meta name="abstract" content="BGP route dampening can be configured to suppress unstable routes.">
<meta name="description" content="BGP route dampening can be configured to suppress unstable routes.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3104.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_5012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366228">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP Route Dampening</title>
</head>
<body><a name="EN-US_TASK_0172366228"></a><a name="EN-US_TASK_0172366228"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP Route Dampening</h1>
<div class="taskbody"><p>BGP route dampening can be configured to suppress unstable routes.</p>
<div class="context"><a name="EN-US_TASK_0172366228__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>Route instability is mainly reflected by route flapping. A route is considered to be flapping when it repeatedly appears and then disappears in the routing table. BGP is generally applied to complex networks where routes change frequently. Frequent route flapping consumes lots of bandwidth and CPU resources and even seriously affects network operations.</p>
<p>BGP route dampening can deal with frequent route flapping. It uses a penalty value to measure route stability. When a route flaps, it is assigned a penalty value. Later, each time the route flaps, its penalty value increases by a specific value. If the penalty value of a route exceeds the pre-defined threshold, the route will not be advertised until the penalty value of the route reduces to the reuse threshold.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366228__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring BGP route dampening, complete the following task:</p>
<ul><li><p><a href="dc_vrp_bgp_cfg_3004.html">Configure basic BGP functions</a>.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366228__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>Configuring BGP route dampening parameters</span><p><ul><li>Configure EBGP route dampening parameters.<ol type="a"><li>Run the <a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong> command to enter the IPv4 unicast address family view.</li><li>Run the <a href="cmdqueryname=dampening+route-policy+update-standard"><b><span class="cmdname">dampening</span></b></a> [ <i><span class="varname">half-life-reach</span></i> <i><span class="varname">reuse</span></i> <i><span class="varname">suppress</span></i> <i><span class="varname">ceiling</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | <strong><span>route-filter</span></strong> <i><span class="varname">route-filter-name</span></i> ] <sup>*</sup><span> [ <strong><span>update-standard</span></strong> ]</span> command to set the EBGP route dampening parameters.</li></ol>
</li><li>Configure IBGP route dampening parameters.<ol type="a"><li>Run the <a href="cmdqueryname=ipv4-family+unicast"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>unicast</span></strong> command to enter the IPv4 unicast address family view.</li><li>Run the <a href="cmdqueryname=dampening+ibgp+route-policy+update-standard"><b><span class="cmdname">dampening ibgp</span></b></a> [ <i><span class="varname">half-life-reach</span></i> <i><span class="varname">reuse</span></i> <i><span class="varname">suppress</span></i> <i><span class="varname">ceiling</span></i> | <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> | <strong><span>route-filter</span></strong> <i><span class="varname">route-filter-name</span></i> ] <sup>*</sup> [ <strong><span>update-standard</span></strong> ] command to set IBGP route dampening parameters.</li></ol>
</li></ul>
<p>When you configure BGP route dampening, the values of <i><span class="varname">reuse</span></i>, <i><span class="varname">suppress</span></i>, and <i><span class="varname">ceiling</span></i> must meet the following condition: <i><span class="varname">reuse</span></i> &lt; <i><span class="varname">suppress</span></i> &lt; <i><span class="varname">ceiling</span></i>.</p>
<p>If the <a href="cmdqueryname=dampening"><b><span class="cmdname">dampening</span></b></a> command is run with a route-policy or route-filter referenced, BGP applies the route dampening parameters only to the matched routes.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172366228__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After the configuration is complete, verify it.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+bgp+routing-table+flap-info+regular-expression"><b><span class="cmdname">display bgp routing-table flap-info</span></b></a> [ <strong><span>regular-expression</span></strong> <i><span class="varname">as-regular-expression</span></i> | <strong><span>as-path-filter</span></strong> { <i><span class="varname">as-path-filter-number</span></i> | <i><span class="varname">as-path-filter-name</span></i> } | <i><span class="varname">network-address</span></i> [ { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> } [ <strong><span>longer-match</span></strong> ] ] ] command to check route flapping statistics.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+routing-table+time-range"><b><span class="cmdname">display bgp routing-table</span></b></a> <strong><span>time-range</span></strong> <i><span class="varname">start-time</span></i> <i><span class="varname">end-time</span></i> command to check information about the routes that flap within a specified period.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+routing-table+dampened"><b><span class="cmdname">display bgp routing-table dampened</span></b></a> command to check dampened BGP routes.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+routing-table+dampening+parameter"><b><span class="cmdname">display bgp routing-table dampening parameter</span></b></a> command to check configured BGP route dampening parameters.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3000.html">BGP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3104.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_5012.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>