
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring OSPF Delay Advertisement">
<meta name="abstract" content="With OSPF delay advertisement, intra-domain link delay information can be collected and flooded.">
<meta name="description" content="With OSPF delay advertisement, intra-domain link delay information can be collected and flooded.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0055.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0049.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001236857505">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring OSPF Delay Advertisement</title>
</head>
<body><a name="EN-US_TASK_0000001236857505"></a><a name="EN-US_TASK_0000001236857505"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring OSPF Delay Advertisement</h1>
<div class="taskbody"><p>With OSPF delay advertisement, intra-domain link delay information can be collected and flooded.</p>
<div class="context"><a name="EN-US_TASK_0000001236857505__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>Traditional path computation algorithms compute the optimal path to a destination address based on costs. However, the path computed in this way may not have the minimum delay. For services that have stringent requirements on delay, path computation can be performed based on the delay rather than on the cost to ensure that service traffic is transmitted along the path with the minimum delay. After OSPF delay advertisement is configured, OSPF collects and floods intra-domain link delay information and reports the information to the controller through BGP-LS. The controller then computes paths on the P2P network based on delay constraints.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001236857505__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><div class="p">Before configuring delay advertisement, configure TWAMP Light to detect delay information. The configuration is as follows:<ul><li>Configure the TWAMP Light controller function on the local end.<ol><li>Configure the TWAMP Light client function, and create a test session.<ol type="a"><li><p>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></p>
<p>The system view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=nqa+twamp-light"><b><span class="cmdname">nqa twamp-light</span></b></a></p>
<p>The TWAMP Light view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=client"><b><span class="cmdname">client</span></b></a></p>
<p>The TWAMP Light client function is enabled, and the TWAMP Light client view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=test-session"><b><span class="cmdname">test-session</span></b></a><span> <i><span class="varname">session-id</span></i> <span><strong><span>sender-ip</span></strong> <i><span class="varname">sender-ip-address</span></i> <strong><span>reflector-ip</span></strong> <i><span class="varname">reflector-ip-address</span></i></span> <strong><span>sender-port</span></strong> <i><span class="varname">sender-port</span></i> <strong><span>reflector-port</span></strong> <i><span class="varname">reflector-port</span></i> [ <strong><span>dscp</span></strong> <i><span class="varname">dscp-value</span></i> | <strong><span>padding</span></strong> <i><span class="varname">padding-length</span></i><span> | <strong><span>padding-type</span></strong> <i><span class="varname">padding-type</span></i></span> | <strong><span>description</span></strong> <i><span class="varname">description</span></i> ] <sup>*</sup></span></p>
<p>A measurement session is created on the initiator.</p>
</li><li><p>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></p>
<p>Return to the TWAMP Light view.</p>
</li></ol>
</li><li>Configure the TWAMP Light Sender and start the TWAMP Light performance test.<ol type="a"><li><p>Run <a href="cmdqueryname=sender"><b><span class="cmdname">sender</span></b></a></p>
<p>The TWAMP Light Sender function is enabled, and the TWAMP Light Sender view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=test+start-continual"><b><span class="cmdname">test start-continual</span></b></a> <strong><span>test-session</span></strong> <i><span class="varname">session-id</span></i> [ <strong><span>period</span></strong> { <strong><span>10</span></strong> | <strong><span>100</span></strong> | <strong><span>1000</span></strong> | <strong><span>30000</span></strong> } ] [ <strong><span>time-out</span></strong> <i><span class="varname">time-out</span></i> ]</p>
<p>Continual measurement is started.</p>
</li><li><p>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
<p>The configuration is committed.</p>
</li></ol>
</li></ol>
</li><li>Configure the TWAMP Light Responder on the peer end.<ol><li><p>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></p>
<p>The system view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=nqa+twamp-light"><b><span class="cmdname">nqa twamp-light</span></b></a></p>
<p>The TWAMP Light view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=responder"><b><span class="cmdname">responder</span></b></a></p>
<p>The TWAMP Light Responder function is enabled, and the TWAMP Light Responder view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=test-session"><b><span class="cmdname">test-session</span></b></a><span> <i><span class="varname">session-id</span></i> <span><strong><span>local-ip</span></strong> <i><span class="varname">local-ip-address</span></i> <strong><span>remote-ip</span></strong> <i><span class="varname">remote-ip-address</span></i></span> <strong><span>local-port</span></strong> <i><span class="varname">local-port</span></i> <strong><span>remote-port</span></strong> <i><span class="varname">remote-port</span></i> </span><span><strong><span>interface</span></strong> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> } </span><span>[ <strong><span>anti-loop-on</span></strong> ] </span>[ <strong><span>description</span></strong> <i><span class="varname">description</span></i> ]</p>
<p>A measurement session is created on the responder.</p>
</li><li><p>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
<p>The configuration is committed.</p>
</li></ol>
</li></ul>
</div>
<p>For details about how to configure TWAMP Light, see <a href="dc_vrp_cfg_twamp-light_0001.html">TWAMP Light</a>.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001236857505__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span><p><p>An OSPF process is created, and the OSPF view is displayed.</p>
</p><p><p><i><span class="varname">process-id</span></i> specifies an OSPF process. If the <i><span class="varname">process-id</span></i> parameter is not specified, the system creates process 1 by default.</p>
</p></li><li><span>Run <a href="cmdqueryname=opaque-capability+enable"><b><span class="cmdname">opaque-capability enable</span></b></a></span><p><p>The Opaque capability is enabled on the device.</p>
</p></li><li><span>Run <strong><a href="cmdqueryname=metric-delay"><b><span class="cmdname">metric-delay</span></b></a></strong><strong> </strong>[<strong> average</strong> |<strong> variation </strong>]<strong> advertisement enable</strong></span><p><p>Delay advertisement is enabled.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=metric-delay+normalize"><b><span class="cmdname">metric-delay normalize</span></b></a> <strong><span>interval</span></strong> <i><span class="varname">interval-value</span></i> [ <strong><span>offset</span></strong> <i><span class="varname">offset-value</span></i> ]</span><p><p>The link delay normalization function is configured for the OSPF process.</p>
</p><p><p>For the delay-based path computation algorithm, the delay differences of links are different, and the differences may be small. However, even if the delay differences are small, only one optimal path can be generated according to the existing SPF algorithm, and load balancing cannot be implemented within a certain delay tolerance range. As a result, link resources on the network cannot be fully utilized. To resolve this problem to the greatest extent, normalization processing may be performed on the link delays with a small difference or a difference within an acceptable range so that load balancing can be implemented and link resources on the network can be fully utilized.</p>
</p></li><li><span>(Optional) Run <strong><a href="cmdqueryname=metric-delay+suppress"><b><span class="cmdname">metric-delay suppress</span></b></a></strong> <strong><span>timer</span></strong> <em><i><span class="varname">time-value</span></i></em><strong> <strong><span>percent-threshold</span></strong></strong><em> <i><span class="varname">percent-value</span></i> </em><strong><strong><span>absolute-threshold</span></strong></strong><em> <i><span class="varname">absolute-value</span></i></em></span><p><p>The delay advertisement suppression function is configured.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001236857505__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After the configuration is complete, run the <strong><a href="cmdqueryname=display+ospf+interface"><b><span class="cmdname">display ospf interface</span></b></a> <strong><span>verbose</span></strong></strong> command to view information about OSPF-enabled interfaces.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0000.html">OSPF Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0055.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0049.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>