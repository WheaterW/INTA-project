
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling the Device to Recurse BGP IPv6 Unicast Routes to LSPs">
<meta name="abstract" content="By default, BGP IPv6 unicast routes can recurse to outbound interfaces and next hops, but not to LSPs. A device can be enabled to recurse BGP IPv6 unicast routes to LSPs.">
<meta name="description" content="By default, BGP IPv6 unicast routes can recurse to outbound interfaces and next hops, but not to LSPs. A device can be enabled to recurse BGP IPv6 unicast routes to LSPs.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0056.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0060.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,bgpvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP IPv6">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP IPv6">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366508">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Enabling the Device to Recurse BGP IPv6 Unicast Routes to LSPs</title>
</head>
<body><a name="EN-US_TASK_0172366508"></a><a name="EN-US_TASK_0172366508"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling the Device to Recurse BGP IPv6 Unicast Routes to LSPs</h1>
<div class="taskbody"><p>By default, BGP IPv6 unicast routes can recurse to outbound interfaces and next hops, but not to LSPs. A device can be enabled to recurse BGP IPv6 unicast routes to LSPs.</p>
<div class="context"><a name="EN-US_TASK_0172366508__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>On the IPv4/MPLS backbone network shown in <a href="#EN-US_TASK_0172366508__fig_dc_vrp_bgp6_cfg_010101">Figure 1</a>, PE1, P, and PE2 run an IGP for interworking, an LDP LSP or MPLS TE tunnel is established between PE1 and PE2, and a public network IPv6 EBGP peer relationship is established between CE1 on an IPv6 network and PE1 and between CE2 on another IPv6 network and PE2. To allow PE1 and PE2 to exchange BGP IPv6 unicast routes, an IBGP peer relationship is established between PE1 and PE2 using loopback interfaces, and a BGP IPv4 peer relationship is established between PE1 and PE2 in the IPv6 unicast address family. CE1 sends an IPv6 route to PE1 through the EBGP peer connection. Upon receipt of the route, PE1 changes the next-hop IP address of the route to a local IP address and sends the route to PE2 through the IBGP peer connection. After PE2 learns the IPv6 route, it can recurse the route only to an outbound interface and next hop by default. However, PE2 can be enabled to recurse BGP IPv6 unicast routes to LSPs.</p>
<div class="fignone" id="EN-US_TASK_0172366508__fig_dc_vrp_bgp6_cfg_010101"><a name="EN-US_TASK_0172366508__fig_dc_vrp_bgp6_cfg_010101"></a><a name="fig_dc_vrp_bgp6_cfg_010101"></a><span class="figcap"><b>Figure 1 </b>Scenario where BGP IPv6 unicast routes recurse to LSPs</span><br><span><img class="vsd" src="images/fig_dc_vrp_bgp6_cfg_010101.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366508__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before enabling the device to recurse BGP IPv6 unicast routes to LSPs, complete the following tasks: </p>
<ul><li><p>Configure an IGP.</p>
</li><li><p>Establish an LDP LSP or MPLS TE tunnel between PE1 and PE2.</p>
</li><li><p>Establish an IBGP peer relationship between PE1 and PE2 using loopback interfaces, and establish a BGP IPv4 peer relationship between PE1 and PE2 in the IPv6 unicast address family view.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366508__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ipv6-family+unicast"><b><span class="cmdname">ipv6-family</span></b></a> <strong><span>unicast</span></strong></span></span><p><p>The BGP-IPv6 unicast address family view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=unicast-route+recursive-lookup+tunnel-v4+tunnel-selector"><b><span class="cmdname">unicast-route recursive-lookup tunnel-v4</span></b></a> [ <strong><span>tunnel-selector</span></strong> <i><span class="varname">tunnel-selector-name</span></i> ]</span><p><p>The device is enabled to recurse BGP IPv6 unicast routes to tunnels.</p>
<p>To enable the device to recurse BGP IPv6 unicast routes to MPLS TE tunnels, specify <strong><span>tunnel-selector</span></strong> <i><span class="varname">tunnel-selector-name</span></i> in the command.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172366508__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After the device is enabled to recurse BGP IPv6 unicast routes to LSPs, you can run the <a href="cmdqueryname=display+bgp+ipv6+routing-table"><b><span class="cmdname">display bgp ipv6 routing-table</span></b></a> <i><span class="varname">ipv6-address</span></i> command to view information about such route recursion.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0000.html">BGP4+ Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0056.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp6_cfg_0060.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>