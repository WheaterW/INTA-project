
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IS-IS Auto FRR">
<meta name="abstract" content="This section describes how to configure IS-IS Auto FRR.">
<meta name="description" content="This section describes how to configure IS-IS Auto FRR.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0109.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_1023.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909,l00455378,isis">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366016">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring IS-IS Auto FRR</title>
</head>
<body><a name="EN-US_TASK_0172366016"></a><a name="EN-US_TASK_0172366016"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IS-IS Auto FRR</h1>
<div class="taskbody"><p>This section describes how to configure IS-IS Auto FRR.</p>
<div class="context"><a name="EN-US_TASK_0172366016__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>As networks develop, services such as voice over IP (VoIP) and online video services have higher requirements for real-time transmission. On a live network, to switch traffic to a new link after a failure occurs, IS-IS must complete a series of operations involving failure detection, LSP update, LSP flooding, route calculation, and FIB entry delivery. This is a lengthy process, in which the traffic interruption time is much longer than 50 ms. As a result, the requirements for real-time transmission cannot be met.</p>
<p>With IS-IS Auto FRR, devices can rapidly switch traffic from a faulty link to an alternate one without interrupting the traffic, which significantly improves IS-IS network reliability.</p>
<p>IS-IS Auto FRR is suitable for IP services that are sensitive to delay and packet loss.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366016__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring IS-IS Auto FRR, complete the following tasks:</p>
<ul><li><p>Configure addresses for interfaces to ensure that neighboring devices are reachable at the network layer.</p>
</li><li><p><a href="dc_vrp_isis_cfg_1000.html">Configure basic IPv4 IS-IS functions</a>.</p>
</li><li><p><a href="dc_vrp_ldp-p2p_cfg_0003.html">Configure a local LDP session</a> on the source node, the PQ node, and the nodes between them if remote LFA FRR is required.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366016__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=isis"><b><span class="cmdname">isis</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span><p><p>An IS-IS process is created, and the IS-IS view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=frr"><b><span class="cmdname">frr</span></b></a></span><p><p>The IS-IS FRR view is displayed.</p>
</p><p></p></li><li><span>(Optional) Run <a href="cmdqueryname=ecmp+disable"><b><span class="cmdname">ecmp disable</span></b></a> { <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> }</span><p><p>IS-IS ECMP FRR is disabled.</p>
</p><p><p>With ECMP FRR,
IS-IS pre-calculates backup paths for load balancing links based on
the LSDBs on the entire network. The backup paths are stored in the
forwarding table and are used for traffic protection in the case of
link failures.  If the network topology changes, ECMP FRR triggers
calculation of new backup paths, which increases the system calculation
pressure. In addition, the backup entries generated by the ECMP FRR
function increase the memory usage of the system.  In this case, you
can run the <b><span class="cmdname" id="EN-US_TASK_0172366016__en-us_cliref_0167055072_cmdname1765141871214501">ecmp disable</span></b> command to disable the
ECMP FRR function.</p>
</p></li><li><span>Run <a href="cmdqueryname=loop-free-alternate"><b><span class="cmdname">loop-free-alternate</span></b></a> [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ]</span><p><p>IS-IS Auto FRR is enabled to generate a loop-free backup link.</p>
</p><p><p>If no level is specified, IS-IS Auto FRR is enabled for Level-1 and Level-2 to generate backup routes.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>IS-IS can create loop-free backup links only if the traffic protection inequality of IS-IS Auto FRR is met.</p>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=frr-policy+route"><b><span class="cmdname">frr-policy route</span></b></a> <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i></span><p><p>A route-policy is configured to filter backup routes so that only the matched backup routes are added to the routing table. </p>
</p></li><li><span>To enable remote LFA Auto FRR, perform the following steps:</span><p></p><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-lfa"><b><span class="cmdname">remote-lfa</span></b></a> <strong><span>tunnel</span></strong> <strong><span>ldp</span></strong> [ <strong><span>maximum-reachable-cost</span></strong> <i><span class="varname">cost-value</span></i> ] [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ]</span><p><p>Remote LFA Auto FRR is enabled.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=remote-lfa+available-tunnel-destination"><b><span class="cmdname">remote-lfa available-tunnel-destination</span></b></a> <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ]</span><p><p>A filtering policy is configured to filter PQ nodes.</p>
</p><p><p>Only the PQ node that matches the filtering policy can be used as the next hop of an LFA link.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the IS-IS view.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=avoid-microloop+frr-protected"><b><span class="cmdname">avoid-microloop frr-protected</span></b></a></span><p><p>The IS-IS anti-microloop function is enabled.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=avoid-microloop+frr-protected+rib-update-delay"><b><span class="cmdname">avoid-microloop frr-protected rib-update-delay</span></b></a> <i><span class="varname">rib-update-delay</span></i></span><p><p>The delay after which IS-IS delivers routes is configured.</p>
</p><p><p>If IS-IS remote LFA FRR is enabled and the primary link fails, traffic is switched to the backup link. If route convergence occurs again, traffic is switched from the backup link to a new primary link. During the switchover, microloop may occur. To prevent this problem, IS-IS anti-microloop is enabled can be used to delay the switching. To configure the delay, run the <a href="cmdqueryname=avoid-microloop+frr-protected+rib-update-delay"><b><span class="cmdname">avoid-microloop frr-protected rib-update-delay</span></b></a> <i><span class="varname">rib-update-delay</span></i> command. After the command is run, IS-IS does not switch traffic to the backup link until the delay expires.</p>
<p>Keeping the default delay is recommended.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=frr"><b><span class="cmdname">frr</span></b></a></span><p><p>The IS-IS FRR view is displayed.</p>
</p></li></ol>
</li><li><span>(Optional) Run <a href="cmdqueryname=tiebreaker"><b><span class="cmdname">tiebreaker</span></b></a> { <strong><span>node-protecting</span></strong> | <strong><span>lowest-cost</span></strong><span> | <strong><span>non-ecmp</span></strong></span><span> | <strong><span>srlg-disjoint</span></strong></span><span> | <strong><span>hold-max-cost</span></strong></span> } <strong><span>preference</span></strong> <i><span class="varname">preference</span></i> [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ]</span><p><p>The solution of selecting a backup path for IS-IS Auto FRR is set.</p>
</p></li><li><span>(Optional) To prevent an interface from being calculated as a backup interface (after the preceding configurations are complete, all IS-IS interfaces participate in the calculation of the backup next hop by default), perform the following steps:</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the IS-IS FRR view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the IS-IS view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=undo+isis+lfa-backup"><b><span class="cmdname">undo isis lfa-backup</span></b></a> [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ]</span><p><p>The interface is disabled from being calculated as an LFA<span> or remote LFA</span> next hop.</p>
</p></li></ol>
</li><li><span>(Optional) Run <a href="cmdqueryname=isis+remote-lfa+disable"><b><span class="cmdname">isis remote-lfa disable</span></b></a> [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ]</span><p><p>The device is configured not to calculate a remote LFA backup next hop for an IS-IS route with the current interface as the outbound interface.</p>
</p><p></p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172366016__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring IS-IS Auto FRR, check the configurations.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+isis+route"><b><span class="cmdname">display isis route</span></b></a> [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> ] [ <i><span class="varname">process-id</span></i> ] [ <strong><span>verbose</span></strong> ] command to check information about the primary and alternate links after IS-IS Auto FRR is enabled.</p>
</li><li><p>Run the <a href="cmdqueryname=display+isis+spf-tree"><b><span class="cmdname">display isis spf-tree</span></b></a> [ [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> ] | <strong><span>verbose</span></strong> ] <sup>*</sup> [ <i><span class="varname">process-id</span></i> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] command to check the traffic protection type of IS-IS Auto FRR.</p>
</li><li><p>Run the <a href="cmdqueryname=display+isis+frr+summary"><b><span class="cmdname">display isis frr summary</span></b></a> [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> | <strong><span>level-1-2</span></strong> ] [ <i><span class="varname">process-id</span></i> ] command to view the FRR protection rates of routes in an IS-IS process.</p>
</li><li><p>Run the <a href="cmdqueryname=display+isis"><b><span class="cmdname">display isis</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>srlg</span></strong> { <i><span class="varname">srlgGroupId</span></i> | <strong><span>all</span></strong> } command to check shared risk link group (SRLG) information.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0000.html">IS-IS Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0109.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_1023.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>