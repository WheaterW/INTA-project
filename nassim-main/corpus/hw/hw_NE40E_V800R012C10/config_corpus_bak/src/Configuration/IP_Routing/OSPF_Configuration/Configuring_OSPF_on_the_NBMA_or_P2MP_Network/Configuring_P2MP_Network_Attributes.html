
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring P2MP Network Attributes">
<meta name="abstract" content="This section describes how to configure P2MP network attributes to implement OSPF functions.">
<meta name="description" content="This section describes how to configure P2MP network attributes to implement OSPF functions.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2028.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2030.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0023.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ospf,w00800033,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPF">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365558">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring P2MP Network Attributes</title>
</head>
<body><a name="EN-US_TASK_0172365558"></a><a name="EN-US_TASK_0172365558"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring P2MP Network Attributes</h1>
<div class="taskbody"><p>This section describes how to configure P2MP network attributes to implement OSPF functions.</p>
<div class="steps"><a name="EN-US_TASK_0172365558__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Disable the check on the network mask.</span><p><p>The OSPF neighbor relationship cannot be established between the devices with different mask lengths on the P2MP network. After OSPF is disabled from checking the network mask, the OSPF neighbor relationship can be properly established.</p>
</p><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ospf+network-type"><b><span class="cmdname">ospf network-type</span></b></a> <strong><span>p2mp</span></strong></span></span><p><p>The network type of the OSPF interface is configured.</p>
<p>A P2MP network is forcibly changed from another other type of network. For details, see <a href="dc_vrp_ospf_cfg_2029.html">Configuring Network Types for OSPF Interfaces</a>.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ospf+p2mp-mask-ignore"><b><span class="cmdname">ospf p2mp-mask-ignore</span></b></a></span></span><p><p>OSPF is disabled from checking the network mask on the P2MP network.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure the device to filter the LSA packets to be sent.</span><p><p>When multiple links exist between two devices, you can configure the local device to filter the LSA packets to be sent. This can reduce unnecessary LSA retransmission attempts and save bandwidth resources.</p>
</p><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span></span><p><p>The OSPF view is displayed.</p>
</p></li><li class="substepexpand"><span>Based on the basic ACL:</span><p><ol class="substepthirdol"><li><p>Run <span><a href="cmdqueryname=filter-lsa-out+peer"><b><span class="cmdname">filter-lsa-out peer</span></b></a> <i><span class="varname">ip-address</span></i> { <strong><span>all</span></strong> | { <strong><span>summary</span></strong> [ <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } ] | <strong><span>ase</span></strong> [ <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } ] | <strong><span>nssa</span></strong> [ <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } ] } <sup>*</sup> }</span></p>
<p>The local device is configured to filter the LSA packets to be sent on the P2MP network.</p>
</li><li><p>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></p>
<p>Return to the system view.</p>
</li><li>Run <span><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> { <strong><span>name</span></strong> <i><span class="varname">basic-acl-name</span></i> { <strong><span>basic</span></strong> | [ <strong><span>basic</span></strong> ] <strong><span>number</span></strong> <i><span class="varname">basic-acl-number</span></i> } | [ <strong><span>number</span></strong> ] <i><span class="varname">basic-acl-number</span></i> } [ <strong><span>match-order</span></strong> { <strong><span>config</span></strong> | <strong><span>auto</span></strong> } ]</span><p>The ACL view is displayed.</p>
</li><li><p>Run <span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } [ <strong><span>fragment-type</span></strong> { <strong><span>fragment</span></strong> | <strong><span>non-fragment</span></strong> | <strong><span>non-subseq</span></strong> | <strong><span>fragment-subseq</span></strong> | <strong><span>fragment-spe-first</span></strong> } | <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong><span> | <i><span class="varname">src-netmask</span></i></span> } | <strong><span>any</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <sup>*</sup></span></p>
<p>An ACL rule is configured.</p>
<p>When the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command is used to configure a filtering rule for a named ACL, only the configurations specified by <strong><span>source</span></strong> and <strong><span>time-range</span></strong> take effect.</p>
<div class="p">When a filter-policy of a routing protocol is used to filter routes:<ul><li><p>If the action specified in an ACL rule is <strong>permit</strong>, a route matching the rule will be accepted or advertised by the system.</p>
</li><li><p>If the action specified in an ACL rule is <strong>deny</strong>, a route matching the rule will not be accepted or advertised by the system.</p>
</li><li><p>If the network segment of a route is not within the range specified in an ACL rule, the route will not be accepted or advertised by the system.</p>
</li><li><p>If an ACL does not contain any rules, none of the routes matched against the filter-policy that uses this ACL will be accepted or advertised by the system.</p>
</li><li><p>Routes can be filtered using a blacklist or whitelist:</p>
<p>If ACL rules are used for matching in configuration order, the system matches the rules in ascending order of their IDs.</p>
<p>Filtering using a blacklist: Configure a rule with a smaller ID and specify the action <strong>deny</strong> in this rule to filter out the unwanted routes. Then, configure another rule with a larger ID in the same ACL and specify the action <strong>permit</strong> in this rule to accept or advertise the other routes.</p>
<p>Filtering using a whitelist: Configure a rule with a smaller ID and specify the action <strong>permit</strong> in this rule to permit the routes to be accepted or advertised. Then, configure another rule with a larger ID in the same ACL and specify the action <strong>deny</strong> in this rule to filter out the unwanted routes.</p>
</li></ul>
</div>
</li></ol>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2028.html">Configuring OSPF on the NBMA or P2MP Network
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_2030.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospf_cfg_0023.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>