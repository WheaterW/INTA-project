
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring FRR for IPv4 Static Routes on the Public Network">
<meta name="abstract" content="FRR for IPv4 static routes on the public network can fast detect link failures.">
<meta name="description" content="FRR for IPv4 static routes on the public network can fast detect link failures.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0049.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0062.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,static-routevrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Static Route">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00414125">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365467">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring FRR for IPv4 Static Routes on the Public Network</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172365467"></a><a name="EN-US_TASK_0172365467"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring FRR for IPv4 Static Routes on the Public Network</h1>
<div class="taskbody"><p>FRR for IPv4 static routes on the public network can fast detect link failures.</p>
<div class="context"><a name="EN-US_TASK_0172365467__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172365467__fig_dc_vrp_static-route_disjoin_cfg_002101">Figure 1</a>, it is required that two IPv4 static routes with <span class="keyword">Device</span> A and <span class="keyword">Device</span> B as the next hops be configured on <span class="keyword">Device</span> T and that Link B function as the backup of Link A. If Link A fails, traffic is switched to Link B immediately.</p>
<div class="fignone" id="EN-US_TASK_0172365467__fig_dc_vrp_static-route_disjoin_cfg_002101"><a name="EN-US_TASK_0172365467__fig_dc_vrp_static-route_disjoin_cfg_002101"></a><a name="fig_dc_vrp_static-route_disjoin_cfg_002101"></a><span class="figcap"><b>Figure 1 </b>Configuring FRR for IPv4 static routes on the public network</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, and interface3 represent GE <span>0/1/0</span>, GE <span>0/2/0</span>, and GE <span>0/3/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_static-route_disjoin_cfg_002101.png" width="NaN" height="NaN"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365467__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>When configuring FRR for IPv4 static routes on the public network, ensure that there are at least two IPv4 static routes to the same destination address.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365467__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure two IPv4 static routes with <span class="keyword">Device</span> A and <span class="keyword">Device</span> B as the next hops on <span class="keyword">Device</span> T.</p>
</li><li><p>Set a lower preference value for Link A on <span class="keyword">Device</span> T so that Link A is preferentially selected.</p>
</li><li><p>Enable FRR for IPv4 static routes on <span class="keyword">Device</span> T, and check the backup outbound interface and the backup next hop.</p>
</li><li><p>Configure static BFD for IPv4 static routes to speed up fault detection.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To speed up fault detection, configure dynamic or static BFD for IPv4 static routes. Static BFD for IPv4 static routes is used as an example because it is more common than dynamic BFD for IPv4 static routes on the live network.</p>
</div></div>
</li><li><p>Disable FRR for IPv4 static routes, and check the backup outbound interface and the backup next hop.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365467__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need preference values of IPv4 static routes.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365467__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure IP addresses for interfaces. For detailed configurations, see Configuration Files.</span></li><li><span>Configure IPv4 static routes.</span><p><p># On <span class="keyword">Device</span> A, configure IPv4 static routes.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ip route-static 172.16.1.0 24 GigabitEthernet<span>0/1/0</span> 192.168.10.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>ip route-static 172.17.1.0 24 GigabitEthernet<span>0/2/0</span> 192.168.11.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># On <span class="keyword">Device</span> B, configure static routes.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ip route-static 172.16.1.0 24 GigabitEthernet<span>0/1/0</span> 192.168.20.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>ip route-static 172.17.1.0 24 GigabitEthernet<span>0/2/0</span> 192.168.21.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>commit</strong></pre>
<p># On <span class="keyword">Device</span> C, configure IPv4 static routes.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>ip route-static 172.16.1.0 24 GigabitEthernet<span>0/2/0</span> 192.168.11.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>ip route-static 172.16.1.0 24 GigabitEthernet<span>0/3/0</span> 192.168.21.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>ip route-static 192.168.10.0 24 GigabitEthernet<span>0/2/0</span> 192.168.11.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>ip route-static 192.168.20.0 24 GigabitEthernet<span>0/3/0</span> 192.168.21.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>commit</strong></pre>
<p># On <span class="keyword">Device</span> T, configure IPv4 static routes.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T] <strong>ip route-static 172.17.1.0 24 GigabitEthernet<span>0/2/0</span> 192.168.10.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>T] <strong>ip route-static 172.17.1.0 24 GigabitEthernet<span>0/3/0</span> 192.168.20.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>T] <strong>ip route-static 192.168.11.0 24 GigabitEthernet<span>0/2/0</span> 192.168.10.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>T] <strong>ip route-static 192.168.21.0 24 GigabitEthernet<span>0/3/0</span> 192.168.20.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>T] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T] <strong>quit</strong></pre>
<p># Check the IP routing table of <span class="keyword">Device</span> T. The following command output shows that load balancing is performed between the two IPv4 static routes.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>T&gt; <strong>display ip routing-table</strong></pre>
<pre class="screen"><span class="keyword">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table : _public_
         Destinations : 16       Routes : 16

Destination/Mask    Proto   Pre  Cost        Flags NextHop         Interface

      127.0.0.0/8   Direct  0    0             D   127.0.0.1       InLoopBack0
      127.0.0.1/32  Direct  0    0             D   127.0.0.1       InLoopBack0
127.255.255.255/32  Direct  0    0             D   127.0.0.1       InLoopBack0
     172.16.1.0/24  Direct  0    0             D   172.16.1.1      GigabitEthernet<span>0/1/0</span>
     172.16.1.1/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/1/0</span>
   172.16.1.255/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/1/0</span>
   <strong>172.17.1.0/24</strong>  <strong>Static 60</strong>  0             D  <strong>192.168.10.2</strong>    <strong>GigabitEthernet<span>0/2/0</span></strong>
                  <strong>Static 60</strong>  0             D  <strong>192.168.20.2</strong>    <strong>GigabitEthernet<span>0/3/0</span></strong>
   192.168.10.0/24  Direct  0    0             D   192.168.10.1    GigabitEthernet<span>0/2/0</span>
   192.168.10.1/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/2/0</span>
 192.168.10.255/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/2/0</span>
   192.168.11.0/24  Static  60   0             D   192.168.10.2    GigabitEthernet<span>0/2/0</span>
   192.168.20.0/24  Direct  0    0             D   192.168.20.1    GigabitEthernet<span>0/3/0</span>
   192.168.20.1/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/3/0</span>
 192.168.20.255/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/3/0</span>
   192.168.21.0/24  Static  60   0             D   192.168.20.2    GigabitEthernet<span>0/3/0</span>
255.255.255.255/32  Direct  0    0             D   127.0.0.1       InLoopBack0 </pre>
</p></li><li><span>Change the priorities of the IPv4 static routes.</span><p><p># Change the priorities of static routes on <span class="keyword">Device</span> T.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>T&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T] <strong>ip route-static 172.17.1.0 24 GigabitEthernet<span>0/2/0</span> 192.168.10.2  preference 40</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>T]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T]<strong> quit</strong></pre>
<p># Check the IP routing table of <span class="keyword">Device</span> T. The following command output shows that the preference value of the IPv4 static route has been changed.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>T&gt; <strong>display ip routing-table</strong></pre>
<pre class="screen"><span class="keyword">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table : _public_
         Destinations : 16       Routes : 16

Destination/Mask    Proto   Pre  Cost        Flags NextHop         Interface

      127.0.0.0/8   Direct  0    0             D   127.0.0.1       InLoopBack0
      127.0.0.1/32  Direct  0    0             D   127.0.0.1       InLoopBack0
127.255.255.255/32  Direct  0    0             D   127.0.0.1       InLoopBack0
     172.16.1.0/24  Direct  0    0             D   172.16.1.1      GigabitEthernet<span>0/1/0</span>
     172.16.1.1/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/1/0</span>
   172.16.1.255/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/1/0</span>
   <strong>172.17.1.0/24</strong>  <strong>Static</strong> <strong>40</strong>   0             D  <strong>192.168.10.2</strong>    <strong>GigabitEthernet<span>0/2/0</span></strong>
   192.168.10.0/24  Direct  0    0             D   192.168.10.1    GigabitEthernet<span>0/2/0</span>
   192.168.10.1/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/2/0</span>
 192.168.10.255/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/2/0</span>
   192.168.11.0/24  Static  60   0             D   192.168.10.2    GigabitEthernet<span>0/2/0</span>
   192.168.20.0/24  Direct  0    0             D   192.168.20.1    GigabitEthernet<span>0/3/0</span>
   192.168.20.1/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/3/0</span>
 192.168.20.255/32  Direct  0    0             D   127.0.0.1       GigabitEthernet<span>0/3/0</span>
   192.168.21.0/24  Static  60   0             D   192.168.20.2    GigabitEthernet<span>0/3/0</span>
255.255.255.255/32  Direct  0    0             D   127.0.0.1       InLoopBack0 </pre>
</p></li><li><span>Enable FRR for IPv4 static routes.</span><p><p># Enable FRR for static route on <span class="keyword">Device</span> T.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>T&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T]<strong> ip route-static frr</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>T]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T]<strong> quit</strong></pre>
<p># Check the backup outbound interface and the backup next hop on <span class="keyword">Device</span> T.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>T&gt; <strong>display ip routing-table 172.17.1.0 verbose</strong></pre>
<pre class="screen"><span class="keyword">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table : _public_
Summary Count : 1

Destination: 172.17.1.0/24
     Protocol: Static          Process ID: 0
   Preference: 40                    Cost: 0
      <strong>NextHop: 192.168.10.2</strong>     Neighbour: 0.0.0.0
        State: Active Adv             Age: 00h00m03s
          Tag: 0                 Priority: medium
        Label: NULL               QoSInfo: 0x0
   IndirectID: 0x31000032
 RelayNextHop: 0.0.0.0          <strong>Interface: GigabitEthernet<span>0/2/0</span></strong>
     TunnelID: 0x0                  Flags: D
    <strong>BkNextHop: 192.168.20.2</strong>   <strong>BkInterface: GigabitEthernet<span>0/3/0</span></strong>
      BkLabel: NULL           SecTunnelID: 0x0
 BkPETunnelID: 0x0        BkPESecTunnelID: 0x0
 BkIndirectID: 0x32000033</pre>
</p></li><li><span>Configure static BFD for IPv4 static routes.</span><p><ul><li><p>Configure a BFD session.</p>
<p># On <span class="keyword">Device</span> T, configure a BFD session between <span class="keyword">Device</span> T and <span class="keyword">Device</span> C.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>T&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T]<strong> bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>T-bfd]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>T]<strong> bfd aa bind peer-ip 192.168.11.1 source-ip 192.168.10.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>T-bfd-session-aa]<strong> discriminator local 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>T-bfd-session-aa] <strong>discriminator remote 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>T-bfd-session-aa] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T-bfd-session-aa] <strong>quit</strong></pre>
<p># On <span class="keyword">Device</span> C, configure a BFD session between <span class="keyword">Device</span> C and <span class="keyword">Device</span> T.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>C&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C]<strong> bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C]<strong> bfd ab bind peer-ip 192.168.10.1 source-ip 192.168.11.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bfd-session-ab]<strong> discriminator local 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bfd-session-ab] <strong>discriminator remote 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bfd-session-ab]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-bfd-session-ab]<strong> quit</strong></pre>
</li><li><p>Configure a static route and bind it to the BFD session.</p>
<p># On <span class="keyword">Device</span> T, configure a static route and bind it to the BFD session named <strong>aa</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T]<strong> ip route-static 172.17.1.0 24 GigabitEthernet<span>0/2/0</span> 192.168.10.2 preference 40 track bfd-session aa</strong></pre>
</li></ul>
</p></li><li><span>Simulate a fault on Link A.</span><p><pre class="screen">&lt;<span class="keyword">Device</span>T&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T]<strong> interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T-GigabitEthernet<span>0/2/0</span>]<strong> shutdown</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T-GigabitEthernet<span>0/2/0</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T-GigabitEthernet<span>0/2/0</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>T]<strong> quit</strong></pre>
<p># Check the routes to 172.17.1.0/24 on <span class="keyword">Device</span> T.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>T&gt;<strong> display ip routing-table 172.17.1.0 verbose</strong></pre>
<pre class="screen"><span class="keyword">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table : _public_
Summary Count : 1

Destination: 172.17.1.0/24
     Protocol: Static          Process ID: 0
   Preference: 60                    Cost: 0
      <strong>NextHop: 192.168.20.2</strong>     Neighbour: 0.0.0.0
        State: Active Adv             Age: 00h00m07s
          Tag: 0                 Priority: medium
        Label: NULL               QoSInfo: 0x0
   IndirectID: 0x32000033
 RelayNextHop: 0.0.0.0          <strong>Interface: GigabitEthernet<span>0/3/0</span></strong>
     TunnelID: 0x0                  Flags: D</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172365467__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span> T configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>T
#
bfd
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 172.16.1.1 255.255.255.0
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.10.1 255.255.255.0
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip address 192.168.20.1 255.255.255.0
#
bfd aa bind peer-ip 192.168.11.1 source-ip 192.168.10.1
 discriminator local 10
 discriminator remote 20
#
ip route-static frr
ip route-static 172.17.1.0 24 GigabitEthernet<span>0/2/0</span> 192.168.10.2 preference 40 track bfd-session aa
ip route-static 172.17.1.0 24 GigabitEthernet<span>0/3/0</span> 192.168.20.2
ip route-static 192.168.11.0 24 GigabitEthernet<span>0/2/0</span> 192.168.10.2
ip route-static 192.168.21.0 24 GigabitEthernet<span>0/3/0</span> 192.168.20.2 
#
return</pre>
</li><li><p><span class="keyword">Device</span> A configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>A
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 192.168.10.2 255.255.255.0
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.11.2 255.255.255.0
#
ip route-static 172.16.1.0 24 GigabitEthernet<span>0/1/0</span> 192.168.10.1
ip route-static 172.17.1.0 24 GigabitEthernet<span>0/2/0</span> 192.168.11.1
#
return</pre>
</li><li><p><span class="keyword">Device</span> B configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>B
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 192.168.20.2 255.255.255.0
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.21.2 255.255.255.0
#
ip route-static 172.16.1.0 24 GigabitEthernet<span>0/1/0</span> 192.168.20.1
ip route-static 172.17.1.0 24 GigabitEthernet<span>0/2/0</span> 192.168.10.1
#
return</pre>
</li><li><p><span class="keyword">Device</span> C configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>C
#
bfd
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 172.17.1.0 255.255.255.0
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.11.1 255.255.255.0
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip address 192.168.21.1 255.255.255.0
#
bfd ab bind peer-ip 192.168.10.1 source-ip 192.168.11.1
 discriminator local 20
 discriminator remote 10
#
ip route-static 172.16.1.0 24 GigabitEthernet<span>0/2/0</span> 192.168.11.2
ip route-static 172.16.1.0 24 GigabitEthernet<span>0/3/0</span> 192.168.21.2
ip route-static 192.168.10.0 255.255.255.0 GigabitEthernet<span>0/2/0</span> 192.168.11.2
ip route-static 192.168.20.0 255.255.255.0 GigabitEthernet<span>0/3/0</span> 192.168.21.2 
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0016.html">Configuration Examples for IPv4 Static Routes
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0049.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_static-route_disjoin_cfg_0062.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>