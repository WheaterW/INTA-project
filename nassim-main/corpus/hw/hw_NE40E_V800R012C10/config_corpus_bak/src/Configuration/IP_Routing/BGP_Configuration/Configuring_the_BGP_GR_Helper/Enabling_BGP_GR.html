
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling BGP GR">
<meta name="abstract" content="Enabling or disabling GR may delete and re-establish all sessions and instances.">
<meta name="description" content="Enabling or disabling GR may delete and re-establish all sessions and instances.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3058.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3060.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366267">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Enabling BGP GR</title>
</head>
<body><a name="EN-US_TASK_0172366267"></a><a name="EN-US_TASK_0172366267"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling BGP GR</h1>
<div class="taskbody"><p>Enabling or disabling GR may delete and re-establish all sessions and instances.</p>
<div class="steps"><a name="EN-US_TASK_0172366267__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=graceful-restart"><b><span class="cmdname">graceful-restart</span></b></a></span><p><p>BGP GR is enabled.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Running the <a href="cmdqueryname=graceful-restart"><b><span class="cmdname">graceful-restart</span></b></a> command deletes and re-establishes all sessions and instances, causing service interruptions. Therefore, exercise caution when running this command. You are advised to enable GR when establishing BGP peer relationships.</p>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=graceful-restart+timer+restart"><b><span class="cmdname">graceful-restart timer restart</span></b></a> <em>restart-time</em></span><p><p>The maximum time is set for the local end to wait for GR recovery on the peer end.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=graceful-restart+peer-reset"><b><span class="cmdname">graceful-restart peer-reset</span></b></a></span><p><p>The router is enabled to reset a BGP session in GR mode.</p>
</p><p><p>Currently, BGP does not support dynamic capability negotiation. Therefore, BGP capability changes cause peer relationships to be re-established and routing entries to be deleted, interrupting services. If a BGP capability changes when BGP IPv4 unicast peer relationships have been established and IPv4 services are running properly, the BGP IPv4 unicast peer relationships will be reestablished, affecting the ongoing IPv4 services. To solve this problem, perform this step to enable the router to reset BGP connections in GR mode after GR is enabled globally.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the <a href="cmdqueryname=graceful-restart"><b><span class="cmdname">graceful-restart</span></b></a> command is run but the <a href="cmdqueryname=graceful-restart+peer-reset"><b><span class="cmdname">graceful-restart peer-reset</span></b></a> command is not run, the BGP connection is not reset in GR mode for the peer relationship reestablishment triggered by the <a href="cmdqueryname=reset+bgp"><b><span class="cmdname">reset bgp</span></b></a> command or dynamic capability negotiation. The BGP connection is reset in GR mode for the peer relationship reestablishment triggered by the <a href="cmdqueryname=reset+bgp"><b><span class="cmdname">reset bgp</span></b></a> command or dynamic capability negotiation only if both the <a href="cmdqueryname=graceful-restart"><b><span class="cmdname">graceful-restart</span></b></a> and <a href="cmdqueryname=graceful-restart+peer-reset"><b><span class="cmdname">graceful-restart peer-reset</span></b></a> commands are run.</p>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=rpd-family"><b><span class="cmdname">rpd-family</span></b></a></span><p><p>The BGP RPD address family view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer+enable"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <a href="cmdqueryname=peer+enable"><b><span class="cmdname">enable</span></b></a></span><p><p>The device is enabled to exchange routing information with the specified peer.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer+graceful-restart"><b><span class="cmdname">peer</span></b></a><i><span class="varname"> ipv4-address</span></i> <strong><span>graceful-restart</span></strong> <strong><span>static-timer</span></strong> <i><span class="varname">restart-time</span></i></span><p><p>The maximum time is configured for the local end to wait for the peer end to recover from GR.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3058.html">Configuring the BGP GR Helper
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3060.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>