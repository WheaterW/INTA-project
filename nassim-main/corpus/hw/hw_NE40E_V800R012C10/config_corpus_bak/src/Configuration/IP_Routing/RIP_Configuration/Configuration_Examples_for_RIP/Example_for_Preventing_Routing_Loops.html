
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Preventing Routing Loops">
<meta name="abstract" content="This section describes how to configure split horizon to prevent routing loops.">
<meta name="description" content="This section describes how to configure split horizon to prevent routing loops.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_rip_cfg_0047.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_rip_cfg_0048.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_rip_cfg_0050.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,rip,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="RIP">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="RIP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="RIP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="RIP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365883">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Preventing Routing Loops</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172365883"></a><a name="EN-US_TASK_0172365883"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Preventing Routing Loops</h1>
<div class="taskbody"><p>This section describes how to configure split horizon to prevent routing loops.</p>
<div class="context"><a name="EN-US_TASK_0172365883__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172365883__fig_dc_vrp_rip_cfg_004901">Figure 1</a>, IP addresses have been configured for interfaces on all <span class="keyword">Router</span>s, RIP-2 has been configured on each <span class="keyword">Router</span>, and RIP services are running properly. Classful summarization is enabled on <span class="keyword">Router</span>A and <span class="keyword">Router</span>C. It is required that split horizon be configured on <span class="keyword">Router</span>A and <span class="keyword">Router</span>C.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When configuring classful summarization on a RIP-2 network, you need to disable split horizon and poison reverse. After classful summarization is disabled, you need to reconfigure split horizon or poison reverse to prevent routing loops. This section uses split horizon as an example.</p>
</div></div>
<div class="fignone" id="EN-US_TASK_0172365883__fig_dc_vrp_rip_cfg_004901"><a name="EN-US_TASK_0172365883__fig_dc_vrp_rip_cfg_004901"></a><a name="fig_dc_vrp_rip_cfg_004901"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring routing loop prevention</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>interface1, interface2, interface3, and interface4 in this example represent GE<span>0/1/0</span>, GE<span>0/1/1</span>, GE<span>0/1/2</span>, and GE<span>0/1/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0256711100.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365883__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>During the configuration, note the following:</p>
<p>If both split horizon and poison reverse are configured, only poison reverse takes effect.</p>
<p>To improve security, you are advised to configure RIP-2 packet authentication. For details, see "Improving RIP Network Security." The following example describes how to configure an authentication mode for RIP-2 packets. For details, see "Example for Configuring Basic RIP Functions."</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365883__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Disable route summarization.</li><li>Enable split horizon.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365883__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><div class="p">To complete the configuration, you need the following data:<ul><li>RIP-enabled network segments 10.1.0.0, 10.2.0.0, 10.3.0.0, and 192.168.0.0 on <span class="keyword">Device</span>A</li><li>RIP-enabled network segment 192.168.0.0 on <span class="keyword">Device</span>B</li><li>RIP-enabled network segments 172.16.0.0, 172.17.0.0, 172.18.0.0, and 192.168.0.0 on <span class="keyword">Device</span>C</li><li>IP addresses of interfaces</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365883__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Disable route summarization.</span><p><p># Disable route summarization on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>rip 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-rip-1] <strong>undo summary</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-rip-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-rip-1] <strong>quit</strong></pre>
<p># Disable route summarization on <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>rip 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-rip-1] <strong>undo summary</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-rip-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-rip-1] <strong>quit</strong></pre>
</p></li><li><span>Configure split horizon.</span><p><p>Configure split horizon on the RIP interfaces of all <span class="keyword">Router</span>s. The configurations of <span class="keyword">Device</span>B and <span class="keyword">Device</span>C are similar to the configuration of <span class="keyword">Device</span>A. For details, see configuration files.</p>
<p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>rip split-horizon</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>rip split-horizon</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>rip split-horizon</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/1/3</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/3</span>] <strong>rip split-horizon</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/3</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Run the <a href="cmdqueryname=display+rip+1+interface+verbose"><b><span class="cmdname">display rip 1 interface verbose</span></b></a> command on <span class="keyword">Device</span>A and <span class="keyword">Device</span>C to check the result after split horizon is configured. Use the command output on <span class="keyword">Device</span>A as an example. If the value of the Split-Horizon field is Enabled, split horizon has been enabled.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display rip 1 interface verbose</strong></pre>
<pre class="screen"> GigabitEthernet<span>0/1/0</span>(192.168.1.1)
  State    : DOWN            MTU: 500
  Metricin : 0
  Metricout: 1
  Input    : Enabled         Output       : Enabled
  Protocol : RIPv2 Multicast
  Send     : RIPv2 Multicast Packets
  Receive  : RIPv2 Multicast and Broadcast Packets
  Poison-reverse                : Disabled
  <strong>Split-Horizon                 : Enabled</strong>
  Authentication type           : None
  Replay Protection             : Disabled
  Max Packet Length             : 512
 GigabitEthernet<span>0/1/1</span>(10.1.1.1)
  State    : DOWN            MTU: 500
  Metricin : 0
  Metricout: 1
  Input    : Enabled         Output       : Enabled
  Protocol : RIPv2 Multicast
  Send     : RIPv2 Multicast Packets
  Receive  : RIPv2 Multicast and Broadcast Packets
  Poison-reverse                : Disabled
  <strong>Split-Horizon                 : Enabled</strong>
  Authentication type           : None
  Replay Protection             : Disabled
  Max Packet Length             : 512
 GigabitEthernet<span>0/1/2</span>(10.2.1.1)
  State    : DOWN            MTU: 500
  Metricin : 0
  Metricout: 1
  Input    : Enabled         Output       : Enabled
  Protocol : RIPv2 Multicast
  Send     : RIPv2 Multicast Packets
  Receive  : RIPv2 Multicast and Broadcast Packets
  Poison-reverse                : Disabled
<strong>  Split-Horizon                 : Enabled</strong>
  Authentication type           : None
  Replay Protection             : Disabled
  Max Packet Length             : 512
 GigabitEthernet<span>0/1/3</span>(10.3.1.1)
  State    : DOWN            MTU: 500
  Metricin : 0
  Metricout: 1
  Input    : Enabled         Output       : Enabled
  Protocol : RIPv2 Multicast
  Send     : RIPv2 Multicast Packets
  Receive  : RIPv2 Multicast and Broadcast Packets
  Poison-reverse                : Disabled
  <strong>Split-Horizon                 : Enabled</strong>
  Authentication type           : None
  Replay Protection             : Disabled
  Max Packet Length             : 512</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172365883__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.1.1 255.255.255.0</pre>
<pre class="screen"> rip version 2 multicast</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.1.1.1 255.255.0.0</pre>
<pre class="screen"> rip version 2 multicast</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/2</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.2.1.1 255.255.0.0</pre>
<pre class="screen"> rip version 2 multicast</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/3</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 10.3.1.1 255.255.0.0</pre>
<pre class="screen"> rip version 2 multicast</pre>
<pre class="screen">#</pre>
<pre class="screen">rip 1</pre>
<pre class="screen"> network 10.1.0.0</pre>
<pre class="screen"> network 10.2.0.0</pre>
<pre class="screen"> network 10.3.0.0</pre>
<pre class="screen"> network 192.168.0.0</pre>
<pre class="screen"> undo summary</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.1.2 255.255.255.0</pre>
<pre class="screen"> rip version 2 multicast</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.2.1 255.255.255.0</pre>
<pre class="screen"> rip version 2 multicast</pre>
<pre class="screen">#</pre>
<pre class="screen">rip 1</pre>
<pre class="screen"> network 192.168.0.0</pre>
<pre class="screen"> undo summary</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>C configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>C</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.2.2 255.255.255.0</pre>
<pre class="screen"> rip version 2 multicast</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.16.1.1 255.255.0.0</pre>
<pre class="screen"> rip version 2 multicast</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/2</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.17.1.1 255.255.0.0</pre>
<pre class="screen"> rip version 2 multicast</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/3</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.18.1.1 255.255.0.0</pre>
<pre class="screen"> rip version 2 multicast</pre>
<pre class="screen">#</pre>
<pre class="screen">rip 1</pre>
<pre class="screen"> network 172.16.0.0</pre>
<pre class="screen"> network 172.17.0.0</pre>
<pre class="screen"> network 172.18.0.0</pre>
<pre class="screen"> network 192.168.0.0</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_rip_cfg_0047.html">Configuration Examples for RIP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_rip_cfg_0048.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_rip_cfg_0050.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>