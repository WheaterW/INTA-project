
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring IPsec for OSPFv3">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2062.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2069.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2090.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,z00603461,ipsec,w00556928,w00606909,h00522387,l00455378,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="OSPFv3">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00485179">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365812">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring IPsec for OSPFv3</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172365812"></a><a name="EN-US_TASK_0172365812"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring IPsec for OSPFv3</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0172365812__1.3.1"></a><a name="1.3.1"></a>
<div class="p" id="EN-US_TASK_0172365812__en-us_task_0172372452_context342306697214101"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p163643867214101">On the network shown in <a href="#EN-US_TASK_0172365812__en-us_task_0172372452_fig_dc_vrp_ipsec_cfg_001801">Figure 1</a>, <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword403755679214101">Device</span>A and <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword2074259255214101">Device</span>B are connected over a public network, and OSPFv3 is deployed for their communication.</p>
<div class="fignone" id="EN-US_TASK_0172365812__en-us_task_0172372452_fig_dc_vrp_ipsec_cfg_001801"><a name="EN-US_TASK_0172365812__en-us_task_0172372452_fig_dc_vrp_ipsec_cfg_001801"></a><a name="en-us_task_0172372452_fig_dc_vrp_ipsec_cfg_001801"></a><span class="figcap"><b>Figure 1 </b>Configuring IPsec</span><div class="note" id="EN-US_TASK_0172365812__en-us_task_0172372452_note1958460359214101"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p1361396144214101">Interface1 in this example represents GE <span>0/1/1</span>.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0172365812__en-us_task_0172372452_image1422621406214101" src="images/fig_dc_vrp_ipsec_cfg_001801.png"></span></div>
<p id="EN-US_TASK_0172365812__en-us_task_0172372452_p1912761715169">If no authentication mechanism is configured, routing protocol packets transmitted between <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1521086014214101">Device</span>A and <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1840533503214101">Device</span>B may be modified or spoofed by attackers. As a result, their connection may be torn down, or incorrect routes may be imported.</p>
<p id="EN-US_TASK_0172365812__en-us_task_0172372452_p1312771715163">To prevent such attacks, establish an IPsec tunnel between <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword860604649214101">Device</span>A and <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword2137145544214101">Device</span>B to protect OSPFv3 packets transmitted between them. Configure Encapsulating Security Payload (ESP) as the security protocol, and Secure Hash Algorithm 2-256 (SHA2-256) as the authentication algorithm.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365812__1.3.2"></a><a name="1.3.2"></a>
<div class="p" id="EN-US_TASK_0172365812__en-us_task_0172372452_context1808570303214101"><h4 class="sectiontitle">Configuration Notes</h4><ul id="EN-US_TASK_0172365812__en-us_task_0172372452_ul1096685257214101"><li id="EN-US_TASK_0172365812__en-us_task_0172372452_li2136745849214101">The encapsulation modes and security protocols on both IPsec peers must be identical.</li><li id="EN-US_TASK_0172365812__en-us_task_0172372452_li1465753832214101">The authentication modes and encryption algorithms on the two IPsec peers must be identical.</li><li id="EN-US_TASK_0172365812__en-us_task_0172372452_li1045748524214101">The security parameter indexes (SPIs) and authentication keys on the two IPsec peers must be identical.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365812__1.3.3"></a><a name="1.3.3"></a>
<div class="p" id="EN-US_TASK_0172365812__en-us_task_0172372452_context1055171186214101"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p2079720517214101">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0172365812__en-us_task_0172372452_ol1636687841214101"><li id="EN-US_TASK_0172365812__en-us_task_0172372452_li1043578603214101"><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p926635572214101"><a name="EN-US_TASK_0172365812__en-us_task_0172372452_li1043578603214101"></a><a name="en-us_task_0172372452_li1043578603214101"></a>Configure basic OSPFv3 functions on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword203017498283">Device</span>A and <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword14301049142820">Device</span>B.</p>
</li><li id="EN-US_TASK_0172365812__en-us_task_0172372452_li1837023710214101"><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p485101051214101"><a name="EN-US_TASK_0172365812__en-us_task_0172372452_li1837023710214101"></a><a name="en-us_task_0172372452_li1837023710214101"></a>Configure IPsec proposals. Configure ESP as the security protocol, SHA2-256 as the authentication algorithm, and AES-256 as the encryption algorithm.</p>
</li><li id="EN-US_TASK_0172365812__en-us_task_0172372452_li2014348778214101"><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p80216891214101"><a name="EN-US_TASK_0172365812__en-us_task_0172372452_li2014348778214101"></a><a name="en-us_task_0172372452_li2014348778214101"></a>Set SA parameters.</p>
</li><li id="EN-US_TASK_0172365812__en-us_task_0172372452_li1652572120214101"><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p1373614189214101"><a name="EN-US_TASK_0172365812__en-us_task_0172372452_li1652572120214101"></a><a name="en-us_task_0172372452_li1652572120214101"></a>Apply SAs to OSPFv3 processes, enabling IPsec to protect OSPFv3 packets transmitted between <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword393266777214101">Device</span>A and <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword2140551146214101">Device</span>B.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365812__1.3.4"></a><a name="1.3.4"></a>
<div class="p" id="EN-US_TASK_0172365812__en-us_task_0172372452_context1077587013214101"><h4 class="sectiontitle">Data Preparation</h4><div class="p" id="EN-US_TASK_0172365812__en-us_task_0172372452_p324374095214101">To complete the configuration, you need the following data:
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172365812__en-us_task_0172372452_table2120084505214101" frame="border" border="1" rules="all"><thead align="left"><tr id="EN-US_TASK_0172365812__en-us_task_0172372452_row138695831214101"><th align="left" class="cellrowborder" valign="top" width="20%" id="mcps1.3.4.2.1.1.6.1.1" liSelected="liSelected"><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry1791899845214101p0">Device Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="20%" id="mcps1.3.4.2.1.1.6.1.2" liSelected="liSelected"><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry1551460512214101p0">Router ID</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="20%" id="mcps1.3.4.2.1.1.6.1.3" liSelected="liSelected"><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry91549836214101p0">Process ID</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="20%" id="mcps1.3.4.2.1.1.6.1.4" liSelected="liSelected"><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry703692707214101p0">SPI</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="20%" id="mcps1.3.4.2.1.1.6.1.5" liSelected="liSelected"><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry1286407373214101p0">Authentication Key in String Format</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_TASK_0172365812__en-us_task_0172372452_row339882885214101"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.3.4.2.1.1.6.1.1 "><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry1977012391214101p0"><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1780269153214101">Device</span>A</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.3.4.2.1.1.6.1.2 "><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry2032472807214101p0">1.1.1.1</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.3.4.2.1.1.6.1.3 "><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry399171221214101p0">1</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.3.4.2.1.1.6.1.4 "><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry117445480214101p0">12345</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.3.4.2.1.1.6.1.5 "><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry1622961477214101p0">abcdef</p>
</td>
</tr>
<tr id="EN-US_TASK_0172365812__en-us_task_0172372452_row1144020601214101"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.3.4.2.1.1.6.1.1 "><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry957253116214101p0"><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1753120935214101">Device</span>B</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.3.4.2.1.1.6.1.2 "><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry2013336579214101p0">2.2.2.2</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.3.4.2.1.1.6.1.3 "><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry992869669214101p0">1</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.3.4.2.1.1.6.1.4 "><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry305846755214101p0">12345</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.3.4.2.1.1.6.1.5 "><p id="EN-US_TASK_0172365812__en-us_task_0172372452_entry1834123670214101p0">abcdef</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365812__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172365812__en-us_task_0172372452_steps311502812214101"><li id="EN-US_TASK_0172365812__en-us_task_0172372452_step1913099858214101"><span id="EN-US_TASK_0172365812__en-us_task_0172372452_cmd1344150522214101">Configure OSPFv3 on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1278530836214101">Device</span>A and <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword515982818214101">Device</span>B.</span><p><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p1172382455214101"># Configure <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword14600151483211">Device</span>A.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1396910941214101">&lt;<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword885040284214101">HUAWEI</span>&gt; <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b2034533976214101">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen225832971214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1063304636214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1749590565214101">HUAWEI</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b163751054214101">sysname <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword964804649214101">Device</span>A</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1116055558214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1168676029214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1052583941214101">HUAWEI</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b932345048214101">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen859324517214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword565592771214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1155080575214101">Device</span>A] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b2067246454214101">ospfv3 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen227555224214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1815445606214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword746643466214101">Device</span>A-ospfv3-1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b105629024214101">router-id 1.1.1.1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen388010400214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1701977837214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword659328419214101">Device</span>A-ospfv3-1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1922407484214101">area 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen762849000214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword316165910214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword925906692214101">Device</span>A-ospfv3-1-area-0.0.0.0] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b628430762214101">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen933306114214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1924260799214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword2095008620214101">Device</span>A-ospfv3-1-area-0.0.0.0] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b33644780214101">quit</strong></pre>
<p id="EN-US_TASK_0172365812__en-us_task_0172372452_p2026716547214101"># Configure <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1170182416327">Device</span>B.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1402280209214101">&lt;<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword104790502214101">HUAWEI</span>&gt; <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b57314779214101">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen553136798214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword2039064372214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1010861378214101">HUAWEI</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1678200679214101">sysname <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword807496236214101">Device</span>B</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1755293368214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword363115303214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1877856394214101">HUAWEI</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1110811934214101">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1806877198214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword152990692214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword776634985214101">Device</span>B] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b260921609214101">ospfv3 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen701402644214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword836506412214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1735313222214101">Device</span>B-ospfv3-1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b2056153764214101">router-id 2.2.2.2</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen426932290214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword243732547214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1161602600214101">Device</span>B-ospfv3-1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1514729908214101">area 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1573293105214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword284743880214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1096825644214101">Device</span>B-ospfv3-1-area-0.0.0.0] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b409018063214101">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen682088530214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1189756818214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1022602909214101">Device</span>B-ospfv3-1-area-0.0.0.0] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1715039513214101">quit</strong></pre>
</p></li><li id="EN-US_TASK_0172365812__en-us_task_0172372452_step1914220148214101"><span id="EN-US_TASK_0172365812__en-us_task_0172372452_cmd845511729214101">Configure IPv6 addresses for and enable OSPFv3 on interfaces.</span><p><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p104525980214101"># Configure <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_span1770641783211">Device</span>A.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1109020302214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1140198379214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1317573672214101">Device</span>A] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1139346606214101">interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen683860965214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1575289259214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1708175797214101">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1379743488214101">ipv6 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1323831830214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1700205900214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword943154318214101">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b805029000214101">ipv6 address 2001:db8::1 64</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen109747102214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword112103921214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword787441828214101">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b631880018214101">ospfv3 1 area 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen2017741429214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1321757953214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1215071503214101">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b316482839214101">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1347180467214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1844382997214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1766069781214101">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b89479612214101">quit</strong></pre>
<p id="EN-US_TASK_0172365812__en-us_task_0172372452_p529115738214101"># Configure <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_span4668163114325">Device</span>B.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen78325663214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1000441839214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1776515710214101">Device</span>B] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b203982081214101">interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen77348851214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1666351387214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1033520782214101">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b21316935214101">ipv6 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1030559461214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword107274525214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1224161842214101">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b706420506214101">ipv6 address 2001:db8::2 64</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1843005464214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword580528822214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword929703033214101">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1578574268214101">ospfv3 1 area 0</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1358149683214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword578021832214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1744395043214101">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1285399942214101">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen536944303214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword2088844592214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword148396588214101">Device</span>B-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1424189146214101">quit</strong></pre>
</p></li><li id="EN-US_TASK_0172365812__en-us_task_0172372452_step1496462335214101"><span id="EN-US_TASK_0172365812__en-us_task_0172372452_cmd1861474328214101">Configure security proposals on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1697385567214101">Device</span>A and <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword234750262214101">Device</span>B.</span><p><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p1364434410214101"># Configure a security proposal on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1715142718364">Device</span>A.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen316525546214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword454510664214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword361397469214101">Device</span>A] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1530723100214101">ipsec proposal proposal1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1790251190214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1617637703214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword493903301214101">Device</span>A-ipsec-proposal-proposal1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1653881240214101">encapsulation-mode transport</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen345910400214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1957899264214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword521007067214101">Device</span>A-ipsec-proposal-proposal1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b429793984214101">transform esp</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen27056966214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword991074123214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1099619129214101">Device</span>A-ipsec-proposal-proposal1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b61364325214101"><span>esp encryption-algorithm</span><span> aes 256</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1945432303214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword255305733214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword251127825214101">Device</span>A-ipsec-proposal-proposal1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1378049119214101">esp authentication-algorithm sha2-256</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen141516780214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword486068032214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword317620636214101">Device</span>A-ipsec-proposal-proposal1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1993005959214101">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1294953826214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword42027460214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1980884004214101">Device</span>A-ipsec-proposal-proposal1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b975685296214101">quit</strong></pre>
<p id="EN-US_TASK_0172365812__en-us_task_0172372452_p1631336909214101"># Configure a security proposal on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword776205214476">Device</span>B.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1126230586214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword475929554214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1718912650214101">Device</span>B] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b2130966201214101">ipsec proposal proposal2</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1476149789214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword457546195214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1987443105214101">Device</span>B-ipsec-proposal-proposal2]<strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b197754255214101"> encapsulation-mode transport</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen641237916214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword309610085214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword263821914214101">Device</span>B-ipsec-proposal-proposal2]<strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b67123089214101"> transform esp</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1418191527214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1342090151214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1488423416214101">Device</span>B-ipsec-proposal-proposal2] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b151294654416">esp encryption-algorithm aes 256</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen795373028214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1829339596214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword187215873214101">Device</span>B-ipsec-proposal-proposal2] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1803267610214101">esp authentication-algorithm sha2-256</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1824531586214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword471980611214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1921020706214101">Device</span>B-ipsec-proposal-proposal2] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1383975136214101">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen503751748214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1514348922214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1833631457214101">Device</span>B-ipsec-proposal-proposal2]<strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b265238371214101"> quit</strong></pre>
<p id="EN-US_TASK_0172365812__en-us_task_0172372452_p1400237783214101"># Run the <a href="cmdqueryname=display+ipsec+proposal"><b><span class="cmdname" id="EN-US_TASK_0172365812__en-us_task_0172372452_cmdname1356198501214101">display ipsec proposal</span></b></a> command on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1826028507214101">Device</span>A and <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1926610993214101">Device</span>B to check the configuration. The following example uses the command output on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword821633843819">Device</span>A.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1632721114214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword2126452005214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword855994661214101">Device</span>A] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b795211921214101">display ipsec proposal</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen415362530214101">Total IPsec proposal number: 1
IPsec proposal name: proposal1
  encapsulation mode: transport
  transform: esp-new
  ESP protocol: authentication SHA2-HMAC-256, encryption 256-AES</pre>
</p></li><li id="EN-US_TASK_0172365812__en-us_task_0172372452_step1288440833214101"><span id="EN-US_TASK_0172365812__en-us_task_0172372452_cmd1747467530214101">Configure IPsec SAs on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1606751559214101">Device</span>A and <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword357435929214101">Device</span>B and apply a proposal to each SA.</span><p><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p2126074637214101"># Configure an IPsec SA on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1362395742416">Device</span>A and apply a proposal to it.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1587311582214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1267681180214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword732330373214101">Device</span>A] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b975988178214101">ipsec sa sa1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen403724400214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1278669542214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword730136865214101">Device</span>A-ipsec-sa-sa1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b566689949214101">proposal proposal1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen975867427214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1865181349214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1284137384214101">Device</span>A-ipsec-sa-sa1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b350709239214101">commit</strong></pre>
<p id="EN-US_TASK_0172365812__en-us_task_0172372452_p1244323012214101"># Configure an IPsec SA on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword5137533192518">Device</span>B and apply a proposal to it.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1308212185214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword508607026214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1173370922214101">Device</span>B] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1613592673214101">ipsec sa sa2</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen366015660214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword734785510214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1509096320214101">Device</span>B-ipsec-sa-sa2] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b59682456214101">proposal proposal2</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen543725338214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword682718246214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword440434601214101">Device</span>B-ipsec-sa-sa2] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b509507578214101">commit</strong></pre>
</p></li><li id="EN-US_TASK_0172365812__en-us_task_0172372452_step1859070425214101"><span id="EN-US_TASK_0172365812__en-us_task_0172372452_cmd1657052772214101"># Configure SPIs and authentication keys in string format on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword15938054152516">Device</span>A and <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword093875417256">Device</span>B.</span><p><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p1931968796214101"># Configure SPIs and authentication keys in string format on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword176091624205311">Device</span>A.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen337987047214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1252885707214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1172918714214101">Device</span>A] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b668483735214101">ipsec sa sa1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1957608478214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword529204639214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1612585446214101">Device</span>A-ipsec-sa-sa1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1629298520214101">sa spi inbound esp 12345</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1171955499214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword302109453214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword902235063214101">Device</span>A-ipsec-sa-sa1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1228855099214101">sa spi outbound esp 12345</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1440771644214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword582297351214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword588598878214101">Device</span>A-ipsec-sa-sa1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1107391504214101">sa string-key inbound esp abcdef</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen95980133214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword860082059214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword686737656214101">Device</span>A-ipsec-sa-sa1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b654687400214101">sa string-key outbound esp abcdef</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1119269196214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword813080286214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1001920941214101">Device</span>A-ipsec-sa-sa1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1016747101214101">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1646081541214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword13818234214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword314824962214101">Device</span>A-ipsec-sa-sa1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b330146325214101">quit</strong></pre>
<p id="EN-US_TASK_0172365812__en-us_task_0172372452_p760413026214101"># Configure SPIs and authentication keys in string format on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword181601739175316">Device</span>B.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1484360610214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword958295273214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword2088784458214101">Device</span>B] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1101964753214101">ipsec sa sa2</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen475346615214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword726796961214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword389539391214101">Device</span>B-ipsec-sa-sa2] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1904336956214101">sa spi outbound esp 12345</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen153609707214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword206372836214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword322164747214101">Device</span>B-ipsec-sa-sa2] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b511278817214101">sa spi inbound esp 12345</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1530371285214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1861256474214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1890756316214101">Device</span>B-ipsec-sa-sa2] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1555554443214101">sa string-key outbound esp abcdef</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1650330377214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1065275744214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword518264369214101">Device</span>B-ipsec-sa-sa2] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1657156725214101">sa string-key inbound esp abcdef</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen457571215214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1157668000214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword724234180214101">Device</span>B-ipsec-sa-sa2] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b289652006214101">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen430508446214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1640230238214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword102033527214101">Device</span>B-ipsec-sa-sa2] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b983603415214101">quit</strong></pre>
</p></li><li id="EN-US_TASK_0172365812__en-us_task_0172372452_step107600178214101"><span id="EN-US_TASK_0172365812__en-us_task_0172372452_cmd254960872214101">Apply SAs to OSPFv3 processes.</span><p><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p1241498237214101"># Apply an SA to an OSPFv3 process on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword178881424135415">Device</span>A.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen392516436214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1720732843214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword194618152214101">Device</span>A] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b529549121214101">ospfv3 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen192195289214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword443662840214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword578129496214101">Device</span>A-ospfv3-1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b352538379214101">ipsec sa sa1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1308327025214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword78230604214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword561769464214101">Device</span>A-ospfv3-1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1591139472214101">commit</strong></pre>
<p id="EN-US_TASK_0172365812__en-us_task_0172372452_p1662507526214101"># Apply an SA to an OSPFv3 process on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword026116165519">Device</span>B.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen265487596214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword337770207214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1104590028214101">Device</span>B] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b189232109214101">ospfv3 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen136422210214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1625650565214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword2022088821214101">Device</span>B-ospfv3-1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b2025856199214101">ipsec sa sa2</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1100761530214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1995629778214101">*</span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1150080000214101">Device</span>B-ospfv3-1] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b832563587214101">commit</strong></pre>
</p></li><li id="EN-US_TASK_0172365812__en-us_task_0172372452_step26221093214101"><span id="EN-US_TASK_0172365812__en-us_task_0172372452_cmd463762416214101">Verify the configuration.</span><p><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p600302357214101"># Run the <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1373433499214101">display ipsec sa</strong> command on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword95719184551">Device</span>A and <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1157121813556">Device</span>B to check the configuration. The following example uses the command output on <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1496415365559">Device</span>A.</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen67773033214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1839478259214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword936516801214101">Device</span>A] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b1207860293214101">display ipsec sa</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen702606620214101">Total IP security association number: 1</pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1566688340214101">  IP security association name: sa1</pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen2047172114214101">  Number of references: 1</pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1769375709214101">    proposal name: proposal1</pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen335236292214101">    State: Complete</pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen762349428214101">    inbound AH setting: </pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1183967793214101">      AH spi: </pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1554705369214101">      AH string-key: </pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen971876146214101">      AH authentication hex key: </pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1275486968214101">    inbound ESP setting:</pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1237280134214101">      ESP spi: 12345 (0x3039)</pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen300304842214101">      ESP string-key: %#%#&lt;}jb{br9\zi%X+/Y@:Y&gt;Lw(L\v#*^KsM"/8RaRe$%#%#</pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1835466583214101">      ESP encryption hex key: </pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1156452709214101">      ESP authentication hex key:</pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen932078084214101">    outbound AH setting: </pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1172698533214101">      AH spi: </pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen407068080214101">      AH string-key:</pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1861622322214101">      AH authentication hex key: </pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1275229924214101">    outbound ESP setting:</pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1238964895214101">      ESP spi: 12345 (0x3039)</pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1879757308214101">      ESP string-key: %#%#&lt;}j/@X4355SE9JZTD0&gt;GQf"}w2@X,k6.E\Z,z\{#%#%#</pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1404371666214101">      ESP encryption hex key: </pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1452930360214101">      ESP authentication hex key: </pre>
</p><p><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p621878333214101"># Run the <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b895456417214101">display ipsec statistics</strong> command to check statistics about incoming and outgoing protocol packets processed by IPsec and detailed information about dropped protocol packets. If statistics about incoming and outgoing protocol packets processed by IPsec are displayed, the configuration succeeds. For example:</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1028419243214101">[<span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1091113683214101"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword984808448214101">Device</span>A] <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b2135939524214101">display ipsec statistics</strong></pre>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1276737756214101">  IPv6 security packet statistics:
    <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b994520024214101">input/output security packets: 184/19</strong>
    <strong id="EN-US_TASK_0172365812__en-us_task_0172372452_b352041671214101">input/output security bytes: 13216/1312</strong>
    input/output dropped security packets: 0/0
    dropped security packet detail:
      memory process problem: 0
      can't find SA: 0
      queue is full: 0
      authentication is failed: 0
      wrong length: 0
      replay packet: 0
      too long packet: 0
      invalid SA: 0
      policy deny: 0
  the normal packet statistics:
    input/output dropped normal packets: 0/0
 IPv4 security packet statistics:
     input/output security packets: 0/0
     input/output security bytes: 0/0
     input/output dropped security packets: 0/0
     dropped security packet detail:
       memory process problem: 0
       can't find SA: 0
       queue is full: 0
       authentication is failed: 0
       wrong length: 0
       replay packet: 0
       too long packet: 0
       invalid SA: 0
       policy deny: 0
   the normal packet statistics:
     input/output dropped normal packets: 0/0</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172365812__en-us_task_0172372452_example144288693214101"><a name="EN-US_TASK_0172365812__1.3.6"></a><a name="1.3.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul id="EN-US_TASK_0172365812__en-us_task_0172372452_ul780320901214101"><li id="EN-US_TASK_0172365812__en-us_task_0172372452_li771854154214101"><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p1751538398214101"><a name="EN-US_TASK_0172365812__en-us_task_0172372452_li771854154214101"></a><a name="en-us_task_0172372452_li771854154214101"></a><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1740512118561">Device</span>A configuration file</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1197785509214101">#
sysname <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1124844509214101">Device</span>A
#
ipsec proposal proposal1
 encapsulation-mode transport
 esp authentication-algorithm sha2-256
<span> </span>esp encryption-algorithm aes 256
#
ipsec sa sa1
 proposal proposal1
 sa spi inbound esp 12345
 sa string-key inbound esp %#%#&lt;}jb{br9\zi%X+/Y@:Y&gt;Lw(L\v#*^KsM"/8RaRe$%#%#
 sa spi outbound esp 12345
 sa string-key outbound esp %#%#&lt;}j/@X4355SE9JZTD0&gt;GQf"}w2@X,k6.E\Z,z\{#%#%#
#
ospfv3 1
 router-id 1.1.1.1
 ipsec sa sa1
 area 0.0.0.0   
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8::1/64
 ospfv3 1 area 0
#
return</pre>
</li><li id="EN-US_TASK_0172365812__en-us_task_0172372452_li156432864214101"><p id="EN-US_TASK_0172365812__en-us_task_0172372452_p647161320214101"><a name="EN-US_TASK_0172365812__en-us_task_0172372452_li156432864214101"></a><a name="en-us_task_0172372452_li156432864214101"></a><span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword8772184325616">Device</span>B configuration file</p>
<pre class="screen" id="EN-US_TASK_0172365812__en-us_task_0172372452_screen1526351921214101">#
sysname <span class="keyword" id="EN-US_TASK_0172365812__en-us_task_0172372452_keyword1323736444214101">Device</span>B
#
ipsec proposal proposal2
 encapsulation-mode transport
 esp authentication-algorithm sha2-256
<span> </span>esp encryption-algorithm aes 256
#
ipsec sa sa2
 proposal proposal2
 sa spi inbound esp 12345
 sa string-key inbound esp %#%#&lt;}j/@XSE9JZT5]2"T#]2"T&lt;}j/@XSE9JZT5&gt;%#%#
 sa spi outbound esp 12345
 sa string-key outbound esp %#%#)YTP%@nFE7bL^B&amp;WSBiQ1[p#M"/8RaRe%$7$%#%#
#
ospfv3 1
 router-id 2.2.2.2
 ipsec sa sa2
 area 0.0.0.0
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8::2/64
 ospfv3 1 area 0
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2062.html">Configuration Examples for OSPFv3
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2069.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ospfv3_cfg_2090.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>