
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Dynamic BFD for IS-IS">
<meta name="abstract" content="This section describes how to configure dynamic BFD for IS-IS, including configuring basic IS-IS functions, setting the interface cost, configuring BFD for the IS-IS process, and configuring BFD for the IS-IS interface on each device.">
<meta name="description" content="This section describes how to configure dynamic BFD for IS-IS, including configuring basic IS-IS functions, setting the interface cost, configuring BFD for the IS-IS process, and configuring BFD for the IS-IS interface on each device.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0078.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0086.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_2009.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909,l00455378,isis">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="IS-IS">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00875216">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00875216">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366103">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring Dynamic BFD for IS-IS</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366103"></a><a name="EN-US_TASK_0172366103"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Dynamic BFD for IS-IS</h1>
<div class="taskbody"><p>This section describes how to configure dynamic BFD for IS-IS, including configuring basic IS-IS functions, setting the interface cost, configuring BFD for the IS-IS process, and configuring BFD for the IS-IS interface on each device.</p>
<div class="context"><a name="EN-US_TASK_0172366103__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As shown in <a href="#EN-US_TASK_0172366103__fig_dc_vrp_isis_cfg_008701">Figure 1</a>:</p>
<ul><li><p>IS-IS runs on <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, and <span class="keyword">Device</span> C.</p>
</li><li><p>BFD is enabled for the IS-IS processes on <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, and <span class="keyword">Device</span> C.</p>
</li><li><p>Service traffic is transmitted along the primary link <span class="keyword">Device</span> A -&gt; <span class="keyword">Device</span> B. The link <span class="keyword">Device</span> A -&gt; <span class="keyword">Device</span> C -&gt; <span class="keyword">Device</span> B functions as the backup link.</p>
</li><li><p>BFD is configured for the interfaces on the link between <span class="keyword">Device</span> A and <span class="keyword">Device</span> B. If the link fails, BFD can fast detect the fault and notify IS-IS of the fault so that service traffic can be transmitted through the backup link.</p>
</li></ul>
<div class="fignone" id="EN-US_TASK_0172366103__fig_dc_vrp_isis_cfg_008701"><a name="EN-US_TASK_0172366103__fig_dc_vrp_isis_cfg_008701"></a><a name="fig_dc_vrp_isis_cfg_008701"></a><span class="figcap"><b>Figure 1 </b>Configuring dynamic BFD for IS-IS</span><br><span><img class="vsd" src="images/fig_dc_vrp_isis_cfg_008701.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.223322332233224%" id="mcps1.4.1.5.1.4.1.1" liSelected="liSelected"><p>Device Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.223322332233224%" id="mcps1.4.1.5.1.4.1.2" liSelected="liSelected"><p>Interface</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.55335533553355%" id="mcps1.4.1.5.1.4.1.3" liSelected="liSelected"><p>IP Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="2" valign="top" width="33.223322332233224%" headers="mcps1.4.1.5.1.4.1.1 "><p><span class="keyword">Device</span> A</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.4.1.5.1.4.1.3 "><p>1.1.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>3.3.3.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" valign="top" width="33.223322332233224%" headers="mcps1.4.1.5.1.4.1.1 "><p><span class="keyword">Device</span> B</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.4.1.5.1.4.1.3 "><p>2.2.2.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>3.3.3.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/3/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>172.16.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.223322332233224%" headers="mcps1.4.1.5.1.4.1.1 "><p><span class="keyword">Device</span> C</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.4.1.5.1.4.1.3 "><p>1.1.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>GE<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>2.2.2.1/24</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366103__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>To improve security, you are advised to configure IS-IS authentication. For details, see "Configuring IS-IS Authentication." IS-IS interface authentication is used as an example. For details, see Example for Configuring Basic IS-IS Functions.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366103__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure basic IS-IS functions on each <span class="keyword">Router</span> for IP interworking.</p>
</li><li><p>Set the IS-IS interface cost to control route selection.</p>
</li><li><p>Enable global BFD.</p>
</li><li><p>Enable BFD for the IS-IS process on <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, and <span class="keyword">Device</span> C.</p>
</li><li><p>Enable BFD for the interfaces on <span class="keyword">Device</span> A and <span class="keyword">Device</span> B.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366103__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>IS-IS process ID</p>
</li><li><p>Areas of <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, and <span class="keyword">Device</span> C</p>
</li><li><p>Interface costs of <span class="keyword">Device</span> A and <span class="keyword">Device</span> B</p>
</li><li><p>Numbers and types of the interfaces to be enabled with BFD on <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, and <span class="keyword">Device</span> C</p>
</li><li><p>Minimum interval at which BFD packets are received and sent and local detection multiplier on <span class="keyword">Device</span> A and <span class="keyword">Device</span> B</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366103__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address for the interface on each <span class="keyword">Router</span>. For configuration details, see <a href="#EN-US_TASK_0172366103__section_dc_vrp_isis_cfg_008705">Configuration Files</a> in this section.</span></li><li><span>Configure basic IS-IS functions.</span><p><p># Configure <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>isis</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-isis-1] <strong>is-level level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-isis-1] <strong>network-entity 10.0000.0000.0001.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-isis-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>isis peer hold-max-cost timer 100000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>isis peer hold-max-cost timer 100000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>isis</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-isis-1] <strong>is-level level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-isis-1] <strong>network-entity 10.0000.0000.0002.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-isis-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>interface gigabitethernet <span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/3/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/3/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>isis</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-isis-1] <strong>is-level level-2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-isis-1] <strong>network-entity 10.0000.0000.0003.00</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-isis-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<p># Run the <a href="cmdqueryname=display+isis+peer"><b><span class="cmdname">display isis peer</span></b></a> command. The command output shows that the neighbor relationships have been established between <span class="keyword">Device</span> A and <span class="keyword">Device</span> B, and between <span class="keyword">Device</span> A and <span class="keyword">Device</span> C. <span class="keyword">Device</span> A is used as an example.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display isis peer</strong></pre>
<pre class="screen">                         Peer information for ISIS(1)                             
   System Id    Interface          Circuit Id        State HoldTime Type     PRI 
--------------------------------------------------------------------------------
0000.0000.0002  GE<span>0/2/0</span>            0000.0000.0002.01  Up   9s       L2       64
0000.0000.0003  GE<span>0/1/0</span>            0000.0000.0001.02  Up   21s      L2       64
Total Peer(s): 2</pre>
<p># The <span class="keyword">Router</span>s have learned routes from each other. The following uses the routing table of <span class="keyword">Device</span> A as an example.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display ip routing-table</strong></pre>
<pre class="screen"><span class="keyword">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table: _public_
         Destinations : 12        Routes : 13

Destination/Mask      Proto    Pre  Cost     Flags NextHop         Interface

        1.1.1.0/24    Direct   0    0           D  1.1.1.1         GigabitEthernet<span>0/1/0</span>
        1.1.1.1/32    Direct   0    0           D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
      1.1.1.255/32    Direct   0    0           D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
        2.2.2.0/24    ISIS-L2  15   20          D  3.3.3.2         GigabitEthernet<span>0/2/0</span>
                      ISIS-L2  15   20          D  1.1.1.2         GigabitEthernet<span>0/1/0</span>
        3.3.3.0/24    Direct   0    0           D  3.3.3.1         GigabitEthernet<span>0/2/0</span>
        3.3.3.1/32    Direct   0    0           D  127.0.0.1       GigabitEthernet<span>0/2/0</span>
      3.3.3.255/32    Direct   0    0           D  127.0.0.1       GigabitEthernet<span>0/2/0</span>
      127.0.0.0/8     Direct   0    0           D  127.0.0.1       InLoopBack0
      127.0.0.1/32    Direct   0    0           D  127.0.0.1       InLoopBack0
    127.0.0.255/32    Direct   0    0           D  127.0.0.1       InLoopBack0
      <strong>172.16.1.0/24</strong> <strong>ISIS-L2</strong> <strong>15</strong>   <strong>20</strong>          <strong>D</strong>  <strong>3.3.3.2</strong>        <strong>GigabitEthernet<span>0/2/0</span></strong>
255.255.255.255/32    Direct   0    0           D  127.0.0.1       InLoopBack0</pre>
<p>As shown in the routing table, the next hop address of the route to 172.16.1.0/24 is 3.3.3.2, and traffic is transmitted on the primary link <span class="keyword">Device</span> A -&gt; <span class="keyword">Device</span> B.</p>
</p></li><li><span>Set the interface cost.</span><p><p># Configure <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>isis cost 5</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>isis cost 5</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
</p></li><li><span>Configure BFD for the IS-IS process.</span><p><p># Enable BFD for the IS-IS process on <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>isis</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-isis-1] <strong>bfd all-interfaces enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-isis-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-isis-1] <strong>quit</strong></pre>
<p># Enable BFD for the IS-IS process on <span class="keyword">Device</span> B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>isis</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-isis-1] <strong>bfd all-interfaces enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-isis-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-isis-1] <strong>quit</strong></pre>
<p># Enable BFD for the IS-IS process on <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>isis</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-isis-1] <strong>bfd all-interfaces enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-isis-1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-isis-1] <strong>quit</strong></pre>
<p># Run the <a href="cmdqueryname=display+isis+bfd"><b><span class="cmdname">display isis bfd</span></b></a> <strong><span>session</span></strong> <strong><span>all</span></strong> command on <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, or <span class="keyword">Device</span> C. The command output shows that the BFD session is up.</p>
<p>Use the command output on <span class="keyword">Device</span> A as an example.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display isis bfd session all</strong></pre>
<pre class="screen">                      BFD session information for ISIS(1)</pre>
<pre class="screen">                      -----------------------------------</pre>
<pre class="screen">Peer System ID : 0000.0000.0002        Interface : GE<span>0/2/0</span>
TX : 10            BFD State : <strong>up</strong>      Peer IP Address : 3.3.3.2
RX : 10            LocDis : 16385      Local IP Address: 3.3.3.1
Multiplier : 3     RemDis : 16388      Type : L2
Diag : No diagnostic information

Peer System ID : 0000.0000.0003        Interface : GE<span>0/1/0</span>
TX : 10            BFD State : <strong>up</strong>      Peer IP Address : 1.1.1.2
RX : 10            LocDis : 16386      Local IP Address: 1.1.1.1
Multiplier : 3     RemDis : 16387      Type : L2
Diag : No diagnostic information

Total BFD session(s): 2                       </pre>
<p>The preceding information shows that the BFD sessions between <span class="keyword">Device</span> A and <span class="keyword">Device</span> B and between <span class="keyword">Device</span> A and <span class="keyword">Device</span> C are Up.</p>
</p></li><li><span>Configure BFD for IS-IS interfaces.</span><p><p># On GE <span>0/2/0</span> of <span class="keyword">Device</span> A, configure BFD and set the minimum interval at which BFD packets are received and sent to 100 ms and the local detection multiplier to 4.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>isis bfd enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>isis bfd min-tx-interval 100 min-rx-interval 100 detect-multiplier 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<p># On GE <span>0/2/0</span> of <span class="keyword">Device</span> B, configure BFD and set the minimum interval at which BFD packets are received and sent to 100 ms and the local detection multiplier to 4.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>isis bfd enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>isis bfd min-tx-interval 100 min-rx-interval 100 detect-multiplier 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<p># Run the <a href="cmdqueryname=display+isis+bfd"><b><span class="cmdname">display isis bfd</span></b></a> <strong><span>session</span></strong> <strong><span>all</span></strong> command on <span class="keyword">Device</span> A or <span class="keyword">Device</span> B. The command outputs show that BFD parameters have already taken effect. Use the command output on <span class="keyword">Device</span> B as an example.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>display isis bfd session all</strong></pre>
<pre class="screen">                      BFD session information for ISIS(1)</pre>
<pre class="screen">                      -----------------------------------</pre>
<pre class="screen">Peer System ID : 0000.0000.0001        Interface : GE<span>0/2/0</span>
TX : <strong>100</strong>           BFD State : up      Peer IP Address : 3.3.3.1
RX : <strong>100</strong>           LocDis : 16385      Local IP Address: 3.3.3.2
Multiplier : <strong>4</strong>     RemDis : 16385      Type : L2
Diag : No diagnostic information

Peer System ID : 0000.0000.0003        Interface : GE<span>0/1/0</span>
TX : 10            BFD State : up      Peer IP Address : 2.2.2.1
RX : 10            LocDis : 16385      Local IP Address: 2.2.2.2
Multiplier : 4     RemDis : 16385      Type : L2
Diag : No diagnostic information

Total BFD session(s): 2                       </pre>
</p></li><li><span># Run the <a href="cmdqueryname=shutdown"><b><span class="cmdname">shutdown</span></b></a> command on Gigabit Ethernet <span>0/2/0</span> on <span class="keyword">Device</span> B to simulate the fault on the primary link.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Display the routing table of <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display ip routing-table</strong></pre>
<pre class="screen"><span class="keyword">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table : _public_
         Destinations : 12        Routes : 12

Destination/Mask      Proto    Pre  Cost     Flags NextHop         Interface

        1.1.1.0/24    Direct   0    0           D  1.1.1.1         GigabitEthernet<span>0/1/0</span>
        1.1.1.1/32    Direct   0    0           D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
      1.1.1.255/32    Direct   0    0           D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
        2.2.2.0/24    ISIS-L2  15   20          D  1.1.1.2         GigabitEthernet<span>0/1/0</span>
        3.3.3.0/24    Direct   0    0           D  3.3.3.1         GigabitEthernet<span>0/2/0</span>
        3.3.3.1/32    Direct   0    0           D  127.0.0.1       GigabitEthernet<span>0/2/0</span>
      3.3.3.255/32    Direct   0    0           D  127.0.0.1       GigabitEthernet<span>0/2/0</span>
      127.0.0.0/8     Direct   0    0           D  127.0.0.1       InLoopBack0
      127.0.0.1/32    Direct   0    0           D  127.0.0.1       InLoopBack0
    127.0.0.255/32    Direct   0    0           D  127.0.0.1       InLoopBack0
   <strong>172.16.1.0/24</strong>    <strong>ISIS-L2</strong> <strong>15</strong>   <strong>30</strong>          <strong>D</strong>  <strong>1.1.1.2</strong>        <strong>GigabitEthernet<span>0/1/0</span></strong>
255.255.255.255/32    Direct   0    0           D  127.0.0.1       InLoopBack0</pre>
<p>As shown in the routing table, the backup link <span class="keyword">Device</span> A -&gt; <span class="keyword">Device</span> C -&gt; <span class="keyword">Device</span> B takes effect after the primary link fails, and the next hop address of the route to 172.16.1.0/24 becomes 1.1.1.2.</p>
<p># Run the <a href="cmdqueryname=display+isis+bfd"><b><span class="cmdname">display isis bfd</span></b></a> <strong><span>session</span></strong> <strong><span>all</span></strong> command on <span class="keyword">Device</span> A. The command output shows that only the BFD session between <span class="keyword">Device</span> A and <span class="keyword">Device</span> C is up.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display isis bfd session all</strong></pre>
<pre class="screen">                      BFD session information for ISIS(1)</pre>
<pre class="screen">                      -----------------------------------</pre>
<pre class="screen">Peer System ID : 0000.0000.0003        Interface : GE<span>0/1/0</span>
TX : 10            BFD State : <strong>up</strong>      Peer IP Address : 1.1.1.2
RX : 10            LocDis : 16385      Local IP Address: 1.1.1.1
Multiplier : 3     RemDis : 16388      Type : L2
Diag : No diagnostic information

Total BFD session(s): 1                       </pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172366103__section_dc_vrp_isis_cfg_008705"><a name="EN-US_TASK_0172366103__section_dc_vrp_isis_cfg_008705"></a><a name="section_dc_vrp_isis_cfg_008705"></a><a name="EN-US_TASK_0172366103__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span> A configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen">bfd</pre>
<pre class="screen">#</pre>
<pre class="screen">isis 1</pre>
<pre class="screen"> is-level level-2</pre>
<pre class="screen"> bfd all-interfaces enable</pre>
<pre class="screen"> network-entity 10.0000.0000.0001.00</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 1.1.1.1 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen"> isis peer hold-max-cost timer 100000</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 3.3.3.1 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen"> isis peer hold-max-cost timer 100000</pre>
<pre class="screen"> isis cost 5</pre>
<pre class="screen"> isis bfd enable</pre>
<pre class="screen"> isis bfd min-tx-interval 100 min-rx-interval 100 detect-multiplier 4</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span> B configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">bfd</pre>
<pre class="screen">#</pre>
<pre class="screen">isis 1</pre>
<pre class="screen"> is-level level-2</pre>
<pre class="screen"> bfd all-interfaces enable</pre>
<pre class="screen"> network-entity 10.0000.0000.0002.00</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 2.2.2.2 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">undo shutdown</pre>
<pre class="screen"> ip address 3.3.3.2 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen"> isis cost 5</pre>
<pre class="screen"> isis bfd enable</pre>
<pre class="screen"> isis bfd min-tx-interval 100 min-rx-interval 100 detect-multiplier 4</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.16.1.1 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span> C configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>C</pre>
<pre class="screen">#</pre>
<pre class="screen">bfd</pre>
<pre class="screen">#</pre>
<pre class="screen">isis 1</pre>
<pre class="screen"> is-level level-2</pre>
<pre class="screen"> bfd all-interfaces enable</pre>
<pre class="screen"> network-entity 10.0000.0000.0003.00</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 1.1.1.2 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 2.2.2.1 255.255.255.0</pre>
<pre class="screen"> isis enable 1</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0078.html">IS-IS Configuration Examples
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_0086.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_isis_cfg_2009.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>