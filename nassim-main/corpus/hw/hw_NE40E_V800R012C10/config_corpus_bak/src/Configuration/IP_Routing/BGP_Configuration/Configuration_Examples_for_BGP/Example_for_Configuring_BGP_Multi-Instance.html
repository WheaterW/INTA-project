
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring BGP Multi-Instance">
<meta name="abstract" content="This section provides an example for configuring BGP multi-instance to achieve instance-specific management and maintenance of routes.">
<meta name="description" content="This section provides an example for configuring BGP multi-instance to achieve instance-specific management and maintenance of routes.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3070.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4079_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_5022.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="BGP">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0217031277">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring BGP Multi-Instance</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0217031277"></a><a name="EN-US_TASK_0217031277"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring BGP Multi-Instance</h1>
<div class="taskbody"><p>This section provides an example for configuring BGP multi-instance to achieve instance-specific management and maintenance of routes.</p>
<div class="context"><a name="EN-US_TASK_0217031277__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0217031277__fig568519487491">Figure 1</a>, the public network BGP-IPv4 unicast address family is enabled in base BGP instances on DeviceA and DeviceB, and a public network IBGP peer relationship is established between them to transmit public network routes. In addition, the VPN address family is enabled in the BGP multi-instance on DeviceB and in the base BGP instance on DeviceC, and an IBGP-VPN peer relationship is established between them to transmit VPN routes. In this way, routes can be managed and maintained separately.</p>
<div class="fignone" id="EN-US_TASK_0217031277__fig568519487491"><a name="EN-US_TASK_0217031277__fig568519487491"></a><a name="fig568519487491"></a><span class="figcap"><b>Figure 1 </b>BGP multi-instance networking</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interfaces 1 and 2 represent GE <span>0/1/0</span> and GE <span>0/2/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0217522978.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0217031277__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>To improve security, you are advised to deploy BGP security measures. For details, see "Configuring BGP Security." Keychain authentication is used as an example. For details, see "Example for Configuring BGP Keychain."</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0217031277__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Enable the public network BGP-IPv4 unicast address family in base BGP instances on DeviceA and DeviceB, and establish a public network IBGP peer relationship in this address family.</li><li>Enable the VPN address family in the BGP multi-instance on DeviceB and in the base instance on DeviceC, and establish an IBGP-VPN peer relationship in this address family.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0217031277__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p><span class="keyword">Device</span>A's AS number: 100</p>
</li><li><p><span class="keyword">Device</span>B's AS numbers: 100 and 200</p>
</li><li><span class="keyword">Device</span>C's AS number: 200</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0217031277__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enable the public network BGP-IPv4 unicast address family in base BGP instances on DeviceA and DeviceB, and establish a public network IBGP peer relationship in this address family.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname DeviceA</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA]<strong> interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>ip address 10.1.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA]<strong> bgp </strong><strong>100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-bgp] <strong>peer 10.1.1.2 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-bgp] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-bgp] <strong>quit</strong></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname DeviceB</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB]<strong> interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/0</span>] <strong>ip address 10.1.1.2 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB]<strong> bgp </strong><strong>100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-bgp] <strong>peer 10.1.1.1 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-bgp] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-bgp] <strong>quit</strong></pre>
<p>After the configuration is complete, check the connectivity between DeviceA and DeviceB. Then, run the <strong>display bgp peer</strong> command. The command output shows that the public network IBGP peer relationship between DeviceA and DeviceB is <strong>Established</strong>.</p>
<p>DeviceB is used as an example.</p>
<pre class="screen">&lt;DeviceB&gt; <strong>ping 10.1.1.1</strong>
  PING 10.1.1.1: 56  data bytes, press CTRL_C to break
    Reply from 10.1.1.1: bytes=56 Sequence=1 ttl=255 time=30 ms
    Reply from 10.1.1.1: bytes=56 Sequence=2 ttl=255 time=16 ms
    Reply from 10.1.1.1: bytes=56 Sequence=3 ttl=255 time=7 ms
    Reply from 10.1.1.1: bytes=56 Sequence=4 ttl=255 time=6 ms
    Reply from 10.1.1.1: bytes=56 Sequence=5 ttl=255 time=9 ms

  --- 10.1.1.1 ping statistics ---
    5 packet(s) transmitted
    5 packet(s) received
    0.00% packet loss
    round-trip min/avg/max = 6/13/30 ms</pre>
<pre class="screen">&lt;DeviceB&gt; <strong>display bgp peer</strong>
 BGP local router ID : 10.1.1.2
 Local AS number : 100
 Total number of peers : 1                 Peers in established state : 1

  Peer            V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State  PrefRcv
  10.1.1.1        4         100        5        5     0 00:00:20 Established        0</pre>
</p></li><li><span>Enable the VPN address family in the BGP multi-instance on DeviceB and in the base instance on DeviceC, and establish an IBGP-VPN peer relationship in this address family.</span><p><p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB]<strong> ip vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-vpn-instance-vpn1] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-vpn-instance-vpn1-af-ipv4] <strong>route-distinguisher 100:3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-vpn-instance-vpn1-af-ipv4] <strong>vpn-target 100</strong><strong>:1</strong> <strong>export-extcommunity</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-vpn-instance-vpn1-af-ipv4] <strong>vpn-target 100</strong><strong>:1</strong> <strong>import-extcommunity</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-vpn-instance-vpn1-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-vpn-instance-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB]<strong> bgp </strong><strong>200</strong> <strong>instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-bgp-instance-aa]<strong> ipv4-family vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-bgp-instance-aa-vpn1] <strong>peer 10.1.2.3 as-number 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-bgp-instance-aa-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-bgp-instance-aa] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB] <strong>interface </strong><strong>gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>ip binding vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>ip address </strong><strong>10.1.2.2 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<p># Configure DeviceC.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname DeviceC</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC]<strong> ip vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-vpn-instance-vpn1] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-vpn-instance-vpn1-af-ipv4] <strong>route-distinguisher 100:3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-vpn-instance-vpn1-af-ipv4] <strong>vpn-target 100</strong><strong>:1</strong><strong> export-extcommunity</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-vpn-instance-vpn1-af-ipv4] <strong>vpn-target 100</strong><strong>:1</strong> <strong>import-extcommunity</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-vpn-instance-vpn1-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-vpn-instance-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC]<strong> bgp </strong><strong>200</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-bgp]<strong> ipv4-family vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-bgp-vpn1] <strong>peer 10.1.2.2 as-number 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-bgp-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC] <strong>interface gigabitethernet</strong><strong><span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-GigabitEthernet<span>0/2/0</span>] <strong>ip binding vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-GigabitEthernet<span>0/2/0</span>] <strong>ip address 10.1.2.3 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<p>After the configuration is complete, check the connectivity between DeviceB and DeviceC. Then, run the <strong>display bgp instance aa vpnv4 all peer</strong> command. The command output shows that the IBGP-VPN peer relationship between DeviceB and DeviceC is <strong>Established</strong>.</p>
<p>DeviceB is used as an example.</p>
<pre class="screen">&lt;DeviceB&gt; <strong>ping -vpn-instance vpn1 10.1.2.3</strong>
  PING 10.1.2.3: 56  data bytes, press CTRL_C to break
    Reply from 10.1.2.3: bytes=56 Sequence=1 ttl=255 time=35 ms
    Reply from 10.1.2.3: bytes=56 Sequence=2 ttl=255 time=25 ms
    Reply from 10.1.2.3: bytes=56 Sequence=3 ttl=255 time=12 ms
    Reply from 10.1.2.3: bytes=56 Sequence=4 ttl=255 time=8 ms
    Reply from 10.1.2.3: bytes=56 Sequence=5 ttl=255 time=9 ms

  --- 10.1.2.3 ping statistics ---
    5 packet(s) transmitted
    5 packet(s) received
    0.00% packet loss
    round-trip min/avg/max = 8/17/35 ms</pre>
<pre class="screen">&lt;DeviceB&gt; <strong>display bgp instance aa vpnv4 all peer</strong>
 BGP local router ID : 10.1.1.2
 Local AS number : 200
 Total number of peers : 1                 Peers in established state : 1


  Peer of IPv4-family for vpn instance :

  VPN-Instance vpn1, Router ID 10.1.1.2:
  Peer            V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State  PrefRcv
  10.1.2.3        4         200        3        3     0 00:00:03 Established        0</pre>
</p></li><li><span>Configure a static route and import it into the BGP routing table on DeviceA and DeviceC.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>ip route-static 192.168.1.1 255.255.255.255 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA] <strong>bgp </strong><strong>100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-bgp] <strong>import-route static</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-bgp] <strong>commit</strong></pre>
<p># Configure DeviceC.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong>ip route-static vpn-instance vpn1 192.168.3.3 255.255.255.255 NULL0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC] <strong>bgp </strong><strong>200</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-bgp]<strong> ipv4-family vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-bgp-vpn1] <strong>import-route static</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceC-bgp-vpn1] <strong>commit</strong></pre>
<p></p>
</p></li><li><span>Verify the configuration.</span><p><p>After the preceding configurations are complete, only public network routes can be found on DeviceA.</p>
<pre class="screen">&lt;DeviceA&gt; <strong>display bgp routing-table</strong>

 BGP Local router ID is 10.1.1.1
 Status codes: * - valid, &gt; - best, d - damped, x - best external, a - add path,
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
 RPKI validation codes: V - valid, I - invalid, N - not-found


 Total Number of Routes: 1
        Network            NextHop                       MED        LocPrf    PrefVal Path/Ogn

 *&gt;     192.168.1.1/32     0.0.0.0                        0                     0       ?</pre>
<p>Both public network and VPN routes can be found on DeviceB.</p>
<pre class="screen">&lt;DeviceB&gt; <strong>display bgp routing-table</strong>

 BGP Local router ID is 10.1.1.2
 Status codes: * - valid, &gt; - best, d - damped, x - best external, a - add path,
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
 RPKI validation codes: V - valid, I - invalid, N - not-found


 Total Number of Routes: 1
        Network            NextHop                       MED        LocPrf    PrefVal Path/Ogn

 *&gt;     192.168.1.1/32     10.1.1.1                      0                     0       ?</pre>
<pre class="screen">&lt;DeviceB&gt; <strong>display bgp instance aa vpnv4 all routing-table</strong>

 BGP Local router ID is 10.1.1.2
 Status codes: * - valid, &gt; - best, d - damped, x - best external, a - add path,
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
 RPKI validation codes: V - valid, I - invalid, N - not-found


 Total number of routes from all PE: 1
 Route Distinguisher: 100:44


        Network            NextHop                       MED        LocPrf    PrefVal Path/Ogn

 *&gt;     192.168.3.3/32     10.1.2.3                       0                     0      100?

 VPN-Instance vpn1, Router ID 10.1.1.2:

 Total Number of Routes: 1
        Network            NextHop                       MED        LocPrf    PrefVal Path/Ogn

 *&gt;     192.168.3.3/32     10.1.2.3                       0                     0      100?</pre>
<p>Only a VPN route can be found on DeviceC.</p>
<pre class="screen">&lt;DeviceC&gt; <strong>display bgp vpnv4 all routing-table</strong>

 BGP Local router ID is 0.0.0.0
 Status codes: * - valid, &gt; - best, d - damped, x - best external, a - add path,
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete
 RPKI validation codes: V - valid, I - invalid, N - not-found


 Total number of routes from all PE: 1
 Route Distinguisher: 100:44


        Network            NextHop                       MED        LocPrf    PrefVal Path/Ogn

 *&gt;     192.168.3.3/32     0.0.0.0                        0                     0       ?

 VPN-Instance vpn1, Router ID 10.1.2.3:

 Total Number of Routes: 1
        Network            NextHop                       MED        LocPrf    PrefVal Path/Ogn

 *&gt;     192.168.3.3/32     0.0.0.0                        0                     0       ?</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0217031277__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>DeviceA configuration file</p>
<pre class="screen">#
sysname DeviceA
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.1.1 255.255.255.0
#
bgp 100
 peer 10.1.1.2 as-number 100
 ipv4-family unicast
  undo synchronization
  import-route static
  peer 10.1.1.2 enable
#
ip route-static 192.168.1.1 255.255.255.255 NULL0
#
return</pre>
</li><li><p>DeviceB configuration file</p>
<pre class="screen">#
sysname DeviceB
#
ip vpn-instance vpn1
 ipv4-family
  route-distinguisher 100:3
  apply-label per-instance
  vpn-target 100:1 export-extcommunity
  vpn-target 100:1 import-extcommunity
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.1.2 255.255.255.0
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip binding vpn-instance vpn1
 ip address 10.1.2.2 255.255.255.0
#
bgp 100
 peer 10.1.1.1 as-number 100
 ipv4-family unicast
  undo synchronization
  peer 10.1.1.1 enable
#
bgp 200 instance vpn1
 ipv4-family vpn-instance vpn1
  peer 10.1.2.3 as-number 200
#
return</pre>
</li><li><p>DeviceC configuration file</p>
<pre class="screen">#
sysname DeviceC
#
ip vpn-instance vpn1
 ipv4-family
  route-distinguisher 100:3
  apply-label per-instance
  vpn-target 100:1 export-extcommunity
  vpn-target 100:1 import-extcommunity
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip binding vpn-instance vpn1
 ip address 10.1.2.3 255.255.255.0
#
bgp 200
 ipv4-family unicast
  undo synchronization
 ipv4-family vpn-instance vpn1
  import-route static
  peer 10.1.2.2 as-number 200
#
ip route-static vpn-instance vpn1 192.168.3.3 255.255.255.255 NULL0
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_3070.html">Configuration Examples for BGP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_4079_1.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_bgp_cfg_5022.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>