
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring an if-match Clause">
<meta name="abstract" content="The if-match clauses define the matching rules that are used to match certain route attributes.">
<meta name="description" content="The if-match clauses define the matching rules that are used to match certain route attributes.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909,route-policyvrp,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00414125">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366567">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring an if-match Clause</title>
</head>
<body><a name="EN-US_TASK_0172366567"></a><a name="EN-US_TASK_0172366567"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring an if-match Clause</h1>
<div class="taskbody"><p>The <strong>if-match</strong> clauses define the matching rules that are used to match certain route attributes.</p>
<div class="steps"><a name="EN-US_TASK_0172366567__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <strong><span>node</span></strong> <i><span class="varname">node</span></i></span></span><p><p>The route-policy view is displayed.</p>
</p></li><li><span>Configure <strong>if-match</strong> clauses in the route-policy.</span><p><ul><li><div class="p">Based on a basic ACL:<ol type="a"><li><p>Run the <span><a href="cmdqueryname=acl"><b><span class="cmdname" id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdname830329318214207">acl</span></b></a> { <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname1836897817214207">name</span></strong> <i><span class="varname" id="EN-US_TASK_0172366567__en-us_task_0172336153_varname1833174039214207">basic-acl-name</span></i> { <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname812104027214207">basic</span></strong> | [ <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname2098561743214207">basic</span></strong> ] <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname2073793852214207">number</span></strong> <i><span class="varname" id="EN-US_TASK_0172366567__en-us_task_0172336153_varname1517281059214207">basic-acl-number</span></i> } | [ <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname958027286214207">number</span></strong> ] <i><span class="varname" id="EN-US_TASK_0172366567__en-us_task_0172336153_varname235500026214207">basic-acl-number</span></i> } [ <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname48680667214207">match-order</span></strong> { <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname157204654214207">config</span></strong> | <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname507297311214207">auto</span></strong> } ]</span> command to enter the ACL view.</p>
</li><li><p>Run the <span><a href="cmdqueryname=rule"><b><span class="cmdname" id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdname1993062488214207">rule</span></b></a> [ <i><span class="varname" id="EN-US_TASK_0172366567__en-us_task_0172336153_varname859153543214207">rule-id</span></i> ] [ <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname1446371756214207">name</span></strong> <i><span class="varname" id="EN-US_TASK_0172366567__en-us_task_0172336153_varname1516501376214207">rule-name</span></i> ] { <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname1764568478214207">deny</span></strong> | <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname761045443214207">permit</span></strong> } [ <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname350204750214207">fragment-type</span></strong> { <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname2057248666214207">fragment</span></strong> | <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname232427091214207">non-fragment</span></strong> | <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname2108634181214207">non-subseq</span></strong> | <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname1558997990214207">fragment-subseq</span></strong> | <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname1149675104214207">fragment-spe-first</span></strong> } | <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname810735923214207">source</span></strong> { <i><span class="varname" id="EN-US_TASK_0172366567__en-us_task_0172336153_varname673241813214207">source-ip-address</span></i> { <i><span class="varname" id="EN-US_TASK_0172366567__en-us_task_0172336153_varname58053590214207">source-wildcard</span></i> | <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname1238085223214207">0</span></strong><span> | <i><span class="varname" id="EN-US_TASK_0172366567__en-us_task_0172336153_varname1849892084214207">src-netmask</span></i></span> } | <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname336857444214207">any</span></strong> } | <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname1089666193214207">time-range</span></strong> <i><span class="varname" id="EN-US_TASK_0172366567__en-us_task_0172336153_varname1818489711214207">time-name</span></i> | <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname2122804462214207">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172366567__en-us_task_0172336153_varname1001938923214207">vpn-instance-name</span></i> ] <sup id="EN-US_TASK_0172366567__en-us_task_0172336153_sup1574448225214207">*</sup></span> command to configure a rule for the ACL.</p>
</li><li><p>Run the <a href="cmdqueryname=if-match+acl"><b><span class="cmdname">if-match acl</span></b></a> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } command to configure an ACL-based matching rule.</p>
</li><li><p>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</p>
</li></ol>
</div>
<p>When the <a href="cmdqueryname=rule"><b><span class="cmdname" id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdname220955808214207">rule</span></b></a> command is run to configure rules for a named ACL, only the source address range specified by <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname1062368536214207">source</span></strong> and the time period specified by <strong><span id="EN-US_TASK_0172366567__en-us_task_0172336153_cmdparmname2006062735214207">time-range</span></strong> are valid as the rules.</p>
<div class="p">When a filtering policy of a routing protocol is used to filter routes:<ul id="EN-US_TASK_0172366567__en-us_task_0172336153_ul135725010214207"><li id="EN-US_TASK_0172366567__en-us_task_0172336153_li1312346841214207"><p id="EN-US_TASK_0172366567__en-us_task_0172336153_p1956301997214207"><a name="EN-US_TASK_0172366567__en-us_task_0172336153_li1312346841214207"></a><a name="en-us_task_0172336153_li1312346841214207"></a>If the action specified in an ACL rule is <strong id="EN-US_TASK_0172366567__en-us_task_0172336153_b1343120114214207">permit</strong>, a route that matches the rule will be received or advertised by the system.</p>
</li><li id="EN-US_TASK_0172366567__en-us_task_0172336153_li1392638396214207"><p id="EN-US_TASK_0172366567__en-us_task_0172336153_p649252919214207"><a name="EN-US_TASK_0172366567__en-us_task_0172336153_li1392638396214207"></a><a name="en-us_task_0172336153_li1392638396214207"></a>If the action specified in an ACL rule is <strong id="EN-US_TASK_0172366567__en-us_task_0172336153_b1955829907214207">deny</strong>, a route that matches the rule will not be received or advertised by the system.</p>
</li><li id="EN-US_TASK_0172366567__en-us_task_0172336153_li1858384138214207"><p id="EN-US_TASK_0172366567__en-us_task_0172336153_p860045398214207"><a name="EN-US_TASK_0172366567__en-us_task_0172336153_li1858384138214207"></a><a name="en-us_task_0172336153_li1858384138214207"></a>If a route has not matched any ACL rules, the route will not be received or advertised by the system.</p>
</li><li id="EN-US_TASK_0172366567__en-us_task_0172336153_li124866694214207"><p id="EN-US_TASK_0172366567__en-us_task_0172336153_p543002939214207"><a name="EN-US_TASK_0172366567__en-us_task_0172336153_li124866694214207"></a><a name="en-us_task_0172336153_li124866694214207"></a>If an ACL does not contain any rules, all routes matching the <strong id="EN-US_TASK_0172366567__en-us_task_0172336153_b1183904776214207">route-policy</strong> that references the ACL will not be received or advertised by the system.</p>
</li><li id="EN-US_TASK_0172366567__en-us_task_0172336153_li1497229201214207"><p id="EN-US_TASK_0172366567__en-us_task_0172336153_p1865289308214207"><a name="EN-US_TASK_0172366567__en-us_task_0172336153_li1497229201214207"></a><a name="en-us_task_0172336153_li1497229201214207"></a>In the configuration order, the system first matches a route with a rule that has a smaller number and then matches the route with a rule with a larger number. Routes can be filtered using a blacklist or a whitelist:</p>
<p id="EN-US_TASK_0172366567__en-us_task_0172336153_p1198919868214207">Route filtering using a blacklist: Configure a rule with a smaller number and specify the action <strong id="EN-US_TASK_0172366567__en-us_task_0172336153_b1283372383214207">deny</strong> in this rule to filter out the unwanted routes. Then, configure another rule with a larger number in the same ACL and specify the action <strong id="EN-US_TASK_0172366567__en-us_task_0172336153_b1653264950214207">permit</strong> in this rule to receive or advertise the other routes.</p>
<p id="EN-US_TASK_0172366567__en-us_task_0172336153_p469236985214207">Route filtering using a whitelist: Configure a rule with a smaller number and specify the action <strong id="EN-US_TASK_0172366567__en-us_task_0172336153_b261709700214207">permit</strong> in this rule to permit the routes to be received or advertised by the system. Then, configure another rule with a larger number in the same ACL and specify the action <strong id="EN-US_TASK_0172366567__en-us_task_0172336153_b924805964214207">deny</strong> in this rule to filter out unwanted routes.</p>
</li></ul>
</div>
</li><li><p>To configure a rule to match routes against a specified cost, run the <a href="cmdqueryname=if-match+cost"><b><span class="cmdname">if-match cost</span></b></a> <i><span class="varname">cost</span></i><span> or <a href="cmdqueryname=if-match+cost"><b><span class="cmdname">if-match cost</span></b></a> { <strong><span>greater-equal</span></strong> <i><span class="varname">greater-equal-value</span></i> [ <strong><span>less-equal</span></strong> <i><span class="varname">less-equal-value</span></i> ] | <strong><span>less-equal</span></strong> <i><span class="varname">less-equal-value</span></i> }</span> command.</p>
</li><li>To configure a rule to match routes against a specified outbound interface, run the <a href="cmdqueryname=if-match+interface"><b><span class="cmdname">if-match interface </span></b></a>{ { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } &amp;&lt;1-16&gt; } command.</li><li><p>To configure a rule to match routes against a specified route preference, run the <a href="cmdqueryname=if-match+preference"><b><span class="cmdname">if-match preference</span></b></a> <i><span class="varname">preference</span></i> command.</p>
</li><li><p>To configure a rule to match IPv4 routes against a specified next hop or source address, run the <a href="cmdqueryname=if-match+ip"><b><span class="cmdname">if-match ip</span></b></a> { <strong><span>next-hop</span></strong> | <strong><span>route-source</span></strong><span> | <strong><span>group-address</span></strong></span> } { <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } | <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> } command.</p>
</li><li><p>To configure a rule to match routes against a specified IP prefix list, run the <a href="cmdqueryname=if-match+ip-prefix"><b><span class="cmdname">if-match ip-prefix</span></b></a> <i><span class="varname">ip-prefix-name</span></i> command.</p>
</li><li>To configure a rule to IPv6 routes, run the <a href="cmdqueryname=if-match+ipv6"><b><span class="cmdname">if-match ipv6</span></b></a> { <strong><span>address</span></strong><span> | <strong><span>next-hop</span></strong></span> | <strong><span>route-source</span></strong> }<span> { <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } |</span> <strong><span>prefix-list</span></strong> <i><span class="varname">ipv6-prefix-name</span></i><span> </span><span>}</span> command.</li><li>Run any of the following commands as needed to match routes of a specific type:<ul><li>To configure a rule to match OSPF routes of a specified type, run the <a href="cmdqueryname=if-match+route-type"><b><span class="cmdname">if-match route-type</span></b></a> { <strong><span>external-type1</span></strong> | <strong><span>external-type1or2</span></strong> | <strong><span>external-type2</span></strong> | <strong><span>internal</span></strong> | <strong><span>nssa-external-type1</span></strong> | <strong><span>nssa-external-type1or2</span></strong> | <strong><span>nssa-external-type2</span></strong> } command.</li><li>To configure a rule to match IS-IS routes of a specified level, run the <a href="cmdqueryname=if-match+route-type"><b><span class="cmdname">if-match route-type</span></b></a> { <strong><span>is-is-level-1</span></strong> | <strong><span>is-is-level-2</span></strong> } command.</li><li>To configure a rule to match BGP routes, run the <a href="cmdqueryname=if-match+route-type"><b><span class="cmdname">if-match route-type</span></b></a> { <strong><span>ibgp</span></strong> | <strong><span>ebgp</span></strong> } command.</li><li>To configure a rule to match MVPN routes, run the <a href="cmdqueryname=if-match+route-type"><b><span class="cmdname">if-match route-type</span></b></a> <strong><span>mvpn</span></strong> { <strong><span>1</span></strong> | <strong><span>3</span></strong> } <sup>*</sup> command.</li><li>To configure a rule to match EVPN routes, run the <a href="cmdqueryname=if-match+route-type"><b><span class="cmdname">if-match route-type</span></b></a> <strong><span>evpn</span></strong> { <span><strong><span>ad</span></strong> | <strong><span>es</span></strong> | </span><strong><span>inclusive</span></strong> | <strong><span>mac</span></strong> | <strong><span>prefix</span></strong><span> | <strong><span>join</span></strong> | <strong><span>leave</span></strong> | <strong><span>smet</span></strong></span> } <sup>*</sup> command.</li><li>To match BGP-LS routes, run the <a href="cmdqueryname=if-match+route-type+bgp-ls"><b><span class="cmdname">if-match route-type bgp-ls</span></b></a> { <strong><span>node</span></strong> | <strong><span>link </span></strong>| <strong><span>ipv4-prefix </span></strong>| <strong><span>ipv6-prefix </span></strong>} * command.</li></ul>
</li><li>To configure a rule to match routes carrying a specified tag value, run the <a href="cmdqueryname=if-match+tag"><b><span class="cmdname">if-match tag</span></b></a> <i><span class="varname">tag</span></i> command.</li><li>To configure a rule to match routes of a specific type of protocol, run the <a href="cmdqueryname=if-match+protocol"><b><span class="cmdname">if-match protocol</span></b></a> { <strong><span>direct</span></strong> | <strong><span>static</span></strong> | <strong><span>rip</span></strong> | <strong><span>ripng</span></strong> | <strong><span>ospf</span></strong> | <strong><span>ospfv3</span></strong> | <strong><span>bgp</span></strong> | <strong><span>isis</span></strong><span> | <strong><span>unr</span></strong></span> } <sup>*</sup> command.</li><li>To configure a rule to match routes against a specified AS_Path length, run the <a href="cmdqueryname=if-match+as-path+length"><b><span class="cmdname">if-match as-path length</span></b></a> command.</li><li>To configure a rule to match routes against a specified AS_Path filter, run the <a href="cmdqueryname=if-match+as-path-filter"><b><span class="cmdname">if-match as-path-filter</span></b></a> command.</li><li>To configure a rule to match routes against a specified community filter, run the <a href="cmdqueryname=if-match+community-filter"><b><span class="cmdname">if-match community-filter</span></b></a> command.</li><li>To configure a rule to match routes against a specified extcommunity filter, run any of the following commands as needed:<ul><li>To match routes against a VPN target extcommunity filter, run the <a href="cmdqueryname=if-match+extcommunity-filter"><b><span class="cmdname">if-match extcommunity-filter</span></b></a> command.</li><li>To match routes against an encapsulation extcommunity filter, run the <a href="cmdqueryname=if-match+extcommunity-list+encapsulation"><b><span class="cmdname">if-match extcommunity-list encapsulation </span></b></a><i><span class="varname">encapsulation-name</span></i> command.</li><li>To match routes against an SoO extcommunity filter, run the <a href="cmdqueryname=if-match+extcommunity-list+soo"><b><span class="cmdname">if-match extcommunity-list soo </span></b></a><i><span class="varname">extcomm-filter-name</span></i> command.</li><li>To match routes against a segmented-nh extcommunity filter, run the <a href="cmdqueryname=if-match+extcommunity-list+segmented-nh"><b><span class="cmdname">if-match extcommunity-list segmented-nh </span></b></a><i><span class="varname">segmented-nh-name</span></i> command.</li></ul>
</li><li>To configure a rule to match routes against a specified Large-Community filter, run the <a href="cmdqueryname=if-match+large-community-filter"><b><span class="cmdname">if-match large-community-filter </span></b></a><i><span class="varname">lcfName</span></i> [ <strong><span>whole-match</span></strong> ] command.</li><li>To configure a rule to match routes against a specified RD filter, run the <a href="cmdqueryname=if-match+rd-filter"><b><span class="cmdname">if-match rd-filter </span></b></a><i><span class="varname">rd-filter-number</span></i> command.</li><li>To configure a rule to match BGP routes against a specified origin AS validation result, run the <a href="cmdqueryname=if-match+rpki+origin-as-validation"><b><span class="cmdname">if-match rpki origin-as-validation </span></b></a>{ <strong><span>valid</span></strong> | <strong><span>invalid</span></strong> | <strong><span>not-found</span></strong> } command.</li><li>To configure a rule to match routes against a specified MPLS label, run the <a href="cmdqueryname=if-match+mpls-label"><b><span class="cmdname">if-match mpls-label</span></b></a> command.</li><li>To configure a rule to match routes against a specified MPLS Label2 value, run the <a href="cmdqueryname=if-match"><b><span class="cmdname">if-match</span></b></a> <strong><span>mpls-label2</span></strong> command.</li><li>To configure a rule to match routes against a specified Layer 2 VNI list, run the <a href="cmdqueryname=if-match+l2vni"><b><span class="cmdname">if-match l2vni</span></b></a> [ <i><span class="varname">l2vni-list-name</span></i> ] command.</li><li>To configure a rule to match routes against a specified Layer 3 VNI list, run the <a href="cmdqueryname=if-match+l3vni"><b><span class="cmdname">if-match l3vni</span></b></a> [ <i><span class="varname">l3vni-list-name</span></i> ] command.</li><li>To configure a rule to match routes against a specified MAC address list, run the <a href="cmdqueryname=if-match+mac-list"><b><span class="cmdname">if-match mac-list</span></b></a> <i><span class="varname">mac-list-name</span></i> command.</li><li>To configure a rule to match routes against a specified Ethernet tag list, run the <a href="cmdqueryname=if-match+eth-tag-list"><b><span class="cmdname">if-match eth-tag-list</span></b></a> <i><span class="varname">eth-tag-list-name</span></i> command.</li><li>To configure a rule to match routes against a multicast address, run the <a href="cmdqueryname=if-match+ip"><b><span class="cmdname">if-match ip</span></b></a> <strong><span>group-address</span></strong> { <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } | <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> } command.</li><li>To configure a rule to match NG MVPN routes against the IP address of a route advertiser, run the <a href="cmdqueryname=if-match+ip+route-originator"><b><span class="cmdname">if-match ip route-originator</span></b></a> { <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> | <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } } command.</li><li>To match non-optimal BGP routes, run the <a href="cmdqueryname=if-match+route-state+bgp-not-best"><b><span class="cmdname">if-match route-state bgp-not-best</span></b></a> command.</li><li>To configure a rule to match the source IP address in the BGP Flow Specification route prefix, run the <a href="cmdqueryname=if-match+flowspec+source+ip-prefix"><b><span class="cmdname">if-match flowspec source ip-prefix</span></b></a> <i><span class="varname">ip-prefix-name</span></i> command.</li><li>To configure a rule to match the source IPv6 address in the BGP Flow Specification route prefix, run the <a href="cmdqueryname=if-match+flowspec+source+ipv6+prefix-list"><b><span class="cmdname">if-match flowspec source ipv6 prefix-list</span></b></a> <i><span class="varname">ipv6-prefix-name</span></i> command.</li><li>To configure a rule to match the destination IP address in the BGP Flow Specification route prefix, run the <a href="cmdqueryname=if-match+flowspec+destination+ip-prefix"><b><span class="cmdname">if-match flowspec destination ip-prefix</span></b></a> <i><span class="varname">ip-prefix-name</span></i> command.</li><li>To configure a rule to match the destination IPv6 address in the BGP Flow Specification route prefix, run the <a href="cmdqueryname=if-match+flowspec+destination+ipv6+prefix-list"><b><span class="cmdname">if-match flowspec destination ipv6 prefix-list</span></b></a> <i><span class="varname">ipv6-prefix-name</span></i> command.</li></ul>
<p>The commands in Step 3 can be run in any required order. A node may have multiple <strong>if-match</strong> clauses or no <strong>if-match</strong> clause.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">If multiple <strong>if-match</strong> clauses of a node in a route-policy define the same matching condition type, the relationship between them is "OR"; if the <strong>if-match</strong> clauses define different matching condition types, the relationship between these clauses is "AND". If you run any of the following <strong>if-match</strong> commands more than once, the latest configuration overrides the previous one:<ul><li><a href="cmdqueryname=if-match+acl"><b><span class="cmdname">if-match acl</span></b></a> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> }</li><li><a href="cmdqueryname=if-match+cost"><b><span class="cmdname">if-match cost</span></b></a> <i><span class="varname">cost</span></i></li><li><a href="cmdqueryname=if-match+extcommunity-list+soo"><b><span class="cmdname">if-match extcommunity-list soo</span></b></a> <i><span class="varname">extcomm-filter-name</span></i></li><li><a href="cmdqueryname=if-match+ip"><b><span class="cmdname">if-match ip</span></b></a> <strong><span>next-hop</span></strong> { <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } | <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> }</li><li><a href="cmdqueryname=if-match+ip"><b><span class="cmdname">if-match ip</span></b></a> <strong><span>route-source</span></strong> { <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } | <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> }</li><li><a href="cmdqueryname=if-match+ip"><b><span class="cmdname">if-match ip</span></b></a> <strong><span>group-address</span></strong> { <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } | <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> }</li><li><a href="cmdqueryname=if-match+ip+route-originator"><b><span class="cmdname">if-match ip route-originator</span></b></a> { <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> | <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } }</li><li><a href="cmdqueryname=if-match+ip-prefix"><b><span class="cmdname">if-match ip-prefix</span></b></a> <i><span class="varname">ip-prefix-name</span></i></li><li><a href="cmdqueryname=if-match+ipv6"><b><span class="cmdname">if-match ipv6</span></b></a> <strong><span>address</span></strong><span> { <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } |</span> <strong><span>prefix-list</span></strong> <i><span class="varname">ipv6-prefix-name</span></i><span> }</span></li><li><a href="cmdqueryname=if-match+ipv6"><b><span class="cmdname">if-match ipv6</span></b></a> <strong><span>next-hop</span></strong> <span> { <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } |</span> <strong><span>prefix-list</span></strong> <i><span class="varname">ipv6-prefix-name</span></i><span> }</span></li><li><a href="cmdqueryname=if-match+ipv6"><b><span class="cmdname">if-match ipv6</span></b></a> <strong><span>route-source</span></strong> <span> { <strong><span>acl</span></strong> { <i><span class="varname">acl-number</span></i> | <i><span class="varname">acl-name</span></i> } |</span> <strong><span>prefix-list</span></strong> <i><span class="varname">ipv6-prefix-name</span></i><span> }</span></li><li><a href="cmdqueryname=if-match+rd-filter"><b><span class="cmdname">if-match rd-filter</span></b></a> <i><span class="varname">rd-filter-number</span></i></li><li><a href="cmdqueryname=if-match+rpki+origin-as-validation"><b><span class="cmdname">if-match rpki origin-as-validation</span></b></a> { <strong><span>invalid</span></strong> | <strong><span>not-found</span></strong> | <strong><span>valid</span></strong> }</li><li><a href="cmdqueryname=if-match+tag"><b><span class="cmdname">if-match tag</span></b></a> <i><span class="varname">tag</span></i></li><li><a href="cmdqueryname=if-match+preference"><b><span class="cmdname">if-match preference </span></b></a><i><span class="varname">preference</span></i></li><li><a href="cmdqueryname=if-match+protocol"><b><span class="cmdname">if-match protocol</span></b></a> { <strong><span>direct</span></strong> | <strong><span>static</span></strong> | <strong><span>rip</span></strong> | <strong><span>ripng</span></strong> | <strong><span>ospf</span></strong> | <strong><span>ospfv3</span></strong> | <strong><span>bgp</span></strong> | <strong><span>isis</span></strong><span> | <strong><span>unr</span></strong></span> } <sup>*</sup></li><li><a href="cmdqueryname=if-match"><b><span class="cmdname">if-match</span></b></a> { <strong><span>mpls-label</span></strong> | <strong><span>mpls-label2</span></strong> } <sup>*</sup></li><li><a href="cmdqueryname=if-match+as-path+length"><b><span class="cmdname">if-match as-path length</span></b></a></li><li><a href="cmdqueryname=if-match+l2vni"><b><span class="cmdname">if-match l2vni</span></b></a> [ <i><span class="varname">l2vni-list-name</span></i> ]</li><li><a href="cmdqueryname=if-match+l3vni"><b><span class="cmdname">if-match l3vni</span></b></a> [ <i><span class="varname">l3vni-list-name</span></i> ]</li><li><a href="cmdqueryname=if-match+mac-list"><b><span class="cmdname">if-match mac-list</span></b></a> <i><span class="varname">mac-list-name</span></i></li><li><a href="cmdqueryname=if-match+eth-tag-list"><b><span class="cmdname">if-match eth-tag-list</span></b></a> <i><span class="varname">eth-tag-list-name</span></i></li><li><a href="cmdqueryname=if-match+extcommunity-list+encapsulation"><b><span class="cmdname">if-match extcommunity-list encapsulation</span></b></a> <i><span class="varname">encapsulation-name</span></i></li><li><a href="cmdqueryname=if-match+extcommunity-list+segmented-nh"><b><span class="cmdname">if-match extcommunity-list segmented-nh </span></b></a><i><span class="varname">segmented-nh-name</span></i></li><li><a href="cmdqueryname=if-match+route-state+bgp-not-best"><b><span class="cmdname">if-match route-state bgp-not-best</span></b></a></li><li><a href="cmdqueryname=if-match+flowspec+source+ip-prefix"><b><span class="cmdname">if-match flowspec source ip-prefix</span></b></a> <i><span class="varname">ip-prefix-name</span></i></li><li><a href="cmdqueryname=if-match+flowspec+source+ipv6+prefix-list"><b><span class="cmdname">if-match flowspec source ipv6 prefix-list</span></b></a> <i><span class="varname">ipv6-prefix-name</span></i></li><li><a href="cmdqueryname=if-match+flowspec+destination+ip-prefix"><b><span class="cmdname">if-match flowspec destination ip-prefix</span></b></a> <i><span class="varname">ip-prefix-name</span></i></li><li><a href="cmdqueryname=if-match+flowspec+destination+ipv6+prefix-list"><b><span class="cmdname">if-match flowspec destination ipv6 prefix-list</span></b></a> <i><span class="varname">ipv6-prefix-name</span></i></li></ul>
</div>
<p>If no <strong>if-match</strong> clause is specified, all routes will match the route-policy node.</p>
<div class="p">You are advised not to use the same route-policy to filter both IPv4 and IPv6 routes <span>when the <strong><a href="cmdqueryname=route-policy+address-family+mismatch-deny"><b><span class="cmdname">route-policy address-family mismatch-deny</span></b></a></strong> command is not configured</span>. Otherwise, services may be interrupted in the following scenarios:<ol type="a"><li>For the same <strong>route-policy</strong>, some nodes match IPv4 routes, and some nodes match IPv6 routes.</li><li>A <strong>route-policy</strong> matches only IPv4 routes, but the <strong>route-policy</strong> is referenced by IPv6.</li><li>A <strong>route-policy</strong> matches only IPv6 routes, but the <strong>route-policy</strong> is referenced by IPv4.</li></ol>
</div>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0007.html">Configuring a Route-Policy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0008.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0010.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>