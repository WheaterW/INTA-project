
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring an apply Clause">
<meta name="abstract" content="The apply clauses specify actions to set certain route attributes.">
<meta name="description" content="The apply clauses specify actions to set certain route attributes.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0009.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0043.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909,route-policyvrp,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Route">
<meta name="featurename" content="Route Policy">
<meta name="featuretype" content="IP Routing Basis">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00414125">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366568">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring an apply Clause</title>
</head>
<body><a name="EN-US_TASK_0172366568"></a><a name="EN-US_TASK_0172366568"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring an <strong>apply</strong> Clause</h1>
<div class="taskbody"><p>The <strong>apply</strong> clauses specify actions to set certain route attributes.</p>
<div class="steps"><a name="EN-US_TASK_0172366568__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } <strong><span>node</span></strong> <i><span class="varname">node</span></i></span><p><p>The route-policy view is displayed.</p>
</p></li><li><span>Run the following commands as needed to configure <strong>apply</strong> clauses for the route-policy:</span><p><ul><li>To set an AIGP value for matched BGP routes, run the <a href="cmdqueryname=apply+aigp"><b><span class="cmdname">apply aigp</span></b></a> { [ + | - ] cost | <strong><span>inherit-cost</span></strong> } command.</li><li><p>To set a cost for matched routes, run the <a href="cmdqueryname=apply+cost"><b><span class="cmdname">apply cost</span></b></a> { [ <strong><span>+</span></strong> | <strong><span>-</span></strong> ] <i><span class="varname">cost</span></i> | <strong><span>inherit</span></strong><span> | <strong><span>none</span></strong></span> } command.</p>
</li><li>To set the AS_Path attribute, run the <a href="cmdqueryname=apply+as-path"><b><span class="cmdname">apply as-path</span></b></a> { <i><span class="varname">as-number-plain</span></i> | <i><span class="varname">as-number-dot</span></i> } &amp;&lt;1-128&gt;{ <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> }<span> or <a href="cmdqueryname=apply+as-path"><b><span class="cmdname">apply as-path</span></b></a> <i><span class="varname">asValues</span></i> { <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> }</span> command.</li><li>To clear the original AS_Path attribute, run the <a href="cmdqueryname=apply+as-path+none+overwrite"><b><span class="cmdname">apply as-path none overwrite</span></b></a> command.</li><li>To set the number of times the most recent AS number in AS_Path is appended to routes, run the <a href="cmdqueryname=apply+as-path+most-recent"><b><span class="cmdname">apply as-path most-recent</span></b></a> &lt;<i><span class="varname">most-recent-value</span></i>&gt; command.</li><li>To delete a community attribute from BGP routes based on the specified value in a community filter, run the <a href="cmdqueryname=apply+comm-filter"><b><span class="cmdname">apply comm-filter </span></b></a>{ <i><span class="varname">basIndex</span></i> | <i><span class="varname">advIndex</span></i> } <strong><span>delete</span></strong> or <a href="cmdqueryname=apply+comm-filter"><b><span class="cmdname">apply comm-filter </span></b></a><i><span class="varname">cmntyName</span></i> <strong><span>delete</span></strong> command.</li><li>To set a BGP community attribute, run the <a href="cmdqueryname=apply+community"><b><span class="cmdname">apply community </span></b></a>{ <i><span class="varname">cmntyValue</span></i> | <i><span class="varname">cmntyNum</span></i> | <strong><span>internet</span></strong> | <strong><span>no-advertise</span></strong> | <strong><span>no-export</span></strong> | <strong><span>no-export-subconfed</span></strong> } &amp;&lt;1-32&gt; [ <strong><span>additive</span></strong> ] or <a href="cmdqueryname=apply+community+community-list"><b><span class="cmdname">apply community community-list </span></b></a><i><span class="varname">community-list-name</span></i> [ <strong><span>additive</span></strong> ] command.</li><li>Set an extended community attribute for BGP routes.<ul><li>To set the VPN target extcommunity attribute, run the <a href="cmdqueryname=apply+extcommunity"><b><span class="cmdname">apply extcommunity </span></b></a>{ <strong><span>rt</span></strong> <i><span class="varname">extCmntyValue</span></i> } &amp;&lt;1-16&gt; [ <strong><span>additive</span></strong> ] command.</li><li>To set the color extcommunity attribute, run the <a href="cmdqueryname=apply+extcommunity+color"><b><span class="cmdname">apply extcommunity color </span></b></a><i><span class="varname">extCmntyValue</span></i> command.</li><li>To set the SoO extended community attribute, run the <a href="cmdqueryname=apply+extcommunity+soo"><b><span class="cmdname">apply extcommunity soo </span></b></a>{ <i><span class="varname">site-of-origin</span></i> } &amp;&lt;1-16&gt; <strong><span>additive</span></strong> command.</li><li>To set the bandwidth extended community attribute, run the <a href="cmdqueryname=apply+extcommunity+bandwidth"><b><span class="cmdname">apply extcommunity bandwidth</span></b></a> {<i><span class="varname"> extCmntyString</span></i> | <strong><span>none</span></strong> }, <a href="cmdqueryname=apply+extcommunity+bandwidth"><b><span class="cmdname">apply extcommunity bandwidth</span></b></a> <strong><span>aggregate-upstream</span></strong> [ <i><span class="varname">limit</span></i> <i><span class="varname">upstream-bandwidth</span></i> ],  or <a href="cmdqueryname=apply+extcommunity+bandwidth"><b><span class="cmdname">apply extcommunity bandwidth</span></b></a> <strong><span>aggregate</span></strong> [ <strong><span>limit</span></strong> <i><span class="varname">bandwidth-value</span></i> ] command.</li></ul>
</li><li>To clear the existing extended community attributes of routes, run the <a href="cmdqueryname=apply+extcommunity"><b><span class="cmdname">apply extcommunity</span></b></a> <strong><span>rt</span></strong> <strong><span>none</span></strong> command.</li><li>To set the redirection extended community attribute for matched BGP Flow Specification routes, run the <a href="cmdqueryname=apply+extcommunity+redirect+ip"><b><span class="cmdname">apply extcommunity redirect ip </span></b></a><i><span class="varname">ipv4-address:nn</span></i> or <a href="cmdqueryname=apply+extcommunity+redirect+vpn-target"><b><span class="cmdname">apply extcommunity redirect vpn-target </span></b></a><i><span class="varname">extCmntyValue</span></i> command.</li><li>To set the Large-Community attribute of BGP routes, run the <a href="cmdqueryname=apply+large-community"><b><span class="cmdname">apply large-community </span></b></a>{ <i><span class="varname">aa:bb:cc</span></i> } &amp;&lt;1-16&gt; { <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> } or <a href="cmdqueryname=apply+large-community-list"><b><span class="cmdname">apply large-community-list </span></b></a><i><span class="varname">large-community-list-name</span></i> { <strong><span>additive</span></strong> | <strong><span>overwrite</span></strong> | <strong><span>delete</span></strong> } command.</li><li>To set the Local_Pref attribute for BGP routes, run the <a href="cmdqueryname=apply+local-preference"><b><span class="cmdname">apply local-preference </span></b></a>[ + | <strong><span>-</span></strong> ] <i><span class="varname">localPreference</span></i> command.</li><li>To allocate MPLS labels to public network routes, run the <a href="cmdqueryname=apply+mpls-label"><b><span class="cmdname">apply mpls-label</span></b></a> command.</li><li>To set the QoS parameter <strong>ip-precedence</strong> for matched routes, run the <a href="cmdqueryname=apply+ip-precedence"><b><span class="cmdname">apply ip-precedence </span></b></a><i><span class="varname">ip-precedence</span></i> command.</li><li>To set the local QoS ID for matched routes, run the <a href="cmdqueryname=apply+qos-local-id"><b><span class="cmdname">apply qos-local-id </span></b></a><i><span class="varname">qos-local-id</span></i> command.</li><li>To set the Origin attribute of BGP routes, run the <a href="cmdqueryname=apply+origin"><b><span class="cmdname">apply origin </span></b></a>{ <strong><span>egp</span></strong> { <i><span class="varname">egpVal</span></i> } | <strong><span>igp</span></strong> | <strong><span>incomplete</span></strong> } command.</li><li>To set the PrefVal attribute of BGP routes, run the <a href="cmdqueryname=apply+preferred-value"><b><span class="cmdname">apply preferred-value </span></b></a><i><span class="varname">preferredVal</span></i> command.</li><li>To set the BGP traffic index for statistics collection, run the <a href="cmdqueryname=apply+traffic-index"><b><span class="cmdname">apply traffic-index </span></b></a><i><span class="varname">indexVal</span></i> command.</li><li><p>To set a cost type for matched routes, run the <a href="cmdqueryname=apply+cost-type"><b><span class="cmdname">apply cost-type</span></b></a> { <strong><span>external</span></strong> | <strong><span>internal</span></strong> | <strong><span>type-1</span></strong> | <strong><span>type-2</span></strong> | <strong><span>internal-inc-ibgp</span></strong><span> | <strong><span>med-plus-igp</span></strong></span><span> | <strong><span>med-inherit-aigp</span></strong></span> } command.</p>
</li><li><p>To set dampening parameters for EBGP routes, run the <a href="cmdqueryname=apply+dampening"><b><span class="cmdname">apply dampening</span></b></a> <i><span class="varname">half-life-reach</span></i> <i><span class="varname">reuse</span></i> <i><span class="varname">suppress</span></i> <i><span class="varname">ceiling</span></i> command.</p>
</li><li><p>To set a next-hop address for IPv4 routes, run the <a href="cmdqueryname=apply+ip-address+next-hop"><b><span class="cmdname">apply ip-address next-hop</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <strong><span>peer-address</span></strong><span> | <strong><span>blackhole</span></strong></span> | <strong><span>original</span></strong> } command.</p>
</li><li><p>To set a next-hop address for IPv6 routes, run the <a href="cmdqueryname=apply+ipv6+next-hop"><b><span class="cmdname">apply ipv6 next-hop</span></b></a> { <i><span class="varname">ipv6-address</span></i> | <strong><span>peer-address</span></strong><span> | <strong><span>blackhole</span></strong></span> | <strong><span>original</span></strong> } command.</p>
</li><li><p>To set a level for IS-IS routes, run the <a href="cmdqueryname=apply+isis"><b><span class="cmdname">apply isis</span></b></a> { <strong><span>level-1</span></strong> | <strong><span>level-1-2</span></strong> | <strong><span>level-2</span></strong> } command.</p>
</li><li><p>To set the preference of protocol routes, run the <a href="cmdqueryname=apply+preference"><b><span class="cmdname">apply preference</span></b></a> <i><span class="varname">preference</span></i> command.</p>
</li><li><p>To set a tag value for matched routes, run the <a href="cmdqueryname=apply+tag"><b><span class="cmdname">apply tag</span></b></a> <i><span class="varname">tag</span></i> command.</p>
</li><li><p>To set a gateway IP address for matched routes, run the <a href="cmdqueryname=apply+gateway-ip"><b><span class="cmdname">apply gateway-ip</span></b></a> { <strong><span>origin-nexthop</span></strong> | <i><span class="varname">ip-address</span></i> <span>| <strong><span>none</span></strong> </span>} command.</p>
</li><li><p>To set a gateway IPv6 address for matched routes, run the <a href="cmdqueryname=apply+ipv6+gateway-ip"><b><span class="cmdname">apply ipv6 gateway-ip</span></b></a> { <strong><span>origin-nexthop</span></strong> | <i><span class="varname">ipv6-address</span></i> <span>| <strong><span>none</span></strong> </span>} command.</p>
</li><li>To discard entropy labels of matched routes, run the <a href="cmdqueryname=apply+entropy-label+none"><b><span class="cmdname">apply entropy-label none</span></b></a> command.</li><li>To stitch PMSIs, run the <a href="cmdqueryname=apply+stitch-pmsi"><b><span class="cmdname">apply stitch-pmsi </span></b></a>{ <strong><span>incoming</span></strong> { <strong><span>rsvp-te</span></strong> <strong><span>p2mp-template</span></strong> <i><span class="varname">p2mp-template-name</span></i> [ <strong><span>mldp</span></strong> <strong><span>root-ip</span></strong> <i><span class="varname">root-ip-address</span></i> ] } | <strong><span>mldp</span></strong> [ <strong><span>root-ip</span></strong> <i><span class="varname">root-ip-address</span></i> ] | <strong><span>rsvp-te</span></strong> <strong><span>p2mp-template</span></strong> <i><span class="varname">p2mp-template-name</span></i> } command.</li><li>To set a Flex-Algo ID for matched routes, run the <strong><span class="cmdqueryname">apply flex-algo</span></strong> <i><span class="varname">flex-algo-id</span></i> command.</li></ul>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The commands in Step 3 can be run in any required order. A node can have multiple or no <strong>apply</strong> clauses.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0007.html">Configuring a Route-Policy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0009.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_route-policy_cfg_0043.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>