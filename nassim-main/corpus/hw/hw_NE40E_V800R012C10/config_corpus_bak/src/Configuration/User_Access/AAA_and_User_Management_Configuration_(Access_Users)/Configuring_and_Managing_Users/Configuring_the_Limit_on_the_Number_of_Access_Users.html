
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Limit on the Number of Access Users">
<meta name="abstract" content="You can limit the number of access users to control the user access rate and prevent threshold-crossing CPU usage.">
<meta name="description" content="You can limit the number of access users to control the user access rate and prevent threshold-crossing CPU usage.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0270.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0274.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0277.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00588052,w00437000,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="AAA (Access User)">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="z00588052,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373728">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the Limit on the Number of Access Users</title>
</head>
<body><a name="EN-US_TASK_0172373728"></a><a name="EN-US_TASK_0172373728"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Limit on the Number of Access Users</h1>
<div class="taskbody"><p>You can limit the number of access users to control the user access rate and prevent threshold-crossing CPU usage.</p>
<div class="context"><a name="EN-US_TASK_0172373728__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Perform the following steps on the <span class="keyword">device</span> for network access:</p>
<p>In the following user access limit configuration, perform the steps based on service requirements.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172373728__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Limiting the number of users who go online from a single VLAN</span><p><p> If the number of online users in a single VLAN exceeds 3K, run the <a href="cmdqueryname=vlan-host-car"><b><span class="cmdname">vlan-host-car</span></b></a> command to increase the bandwidth for the user-side packets that are sent to the CPU and carry the same VLAN ID. After the configuration is complete, the packets of excess users are discarded, and these users are logged out.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ol><li>The <span class="keyword">device</span> supports CAR rate limiting to prevent a large number of user-side packets from compromising the CPU processing efficiency. By default, the CAR function is enabled, or default parameter values are available. For configuration details, see <em>Configuring CAR</em>.</li></ol>
</div></div>
</p></li><li><span>Limiting PPP user access</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ppp-user-slot-warning-threshold"><b><span class="cmdname">ppp-user-slot-warning-threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span><p><p>The alarm threshold for the number of PPP users who go online from a service board is configured. If the proportion of the number of PPP users who go online from the board to the total number of access users exceeds the threshold, an alarm is generated.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ppp-user-warning-threshold"><b><span class="cmdname">ppp-user-warning-threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span><p><p>The alarm threshold for the number of PPP users who go online from the device is configured. If the proportion of the number of PPP users who go online from the <span class="keyword">NE40E</span> to the total number of access users exceeds the threshold, an alarm is generated.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ppp+connection+chasten"><b><span class="cmdname">ppp connection chasten</span></b></a> <span><strong><span>option105</span></strong> </span><i><span class="varname">request-sessions</span></i> <i><span class="varname">request-period</span></i> <i><span class="varname">blocking-period</span></i> <span>[ <strong><span>padi-discard</span></strong> ]</span> <span>[ <strong><span>quickoffline</span></strong> ]</span> or <a href="cmdqueryname=ppp+connection+chasten"><b><span class="cmdname">ppp connection chasten</span></b></a> <i><span class="varname">request-sessions</span></i> <i><span class="varname">request-period</span></i> <i><span class="varname">blocking-period</span></i> <span>[ <strong><span>padi-discard</span></strong> ]</span> <span>[ <strong><span>quickoffline</span></strong> ]</span> <span>[ <strong><span>multi-sessions-permac</span></strong> ]</span></span><p><p>The number of PPP user access requests is limited.</p>
</p><p><p>Limiting the number of access attempts can prevent unauthorized users from using a brute force attack to crack the password of an authorized user. If a user fails to pass the authentication for N times during a specified period, the user account is frozen for a period of time, thwarting unauthorized users' efforts in cracking the password of the authorized user.</p>
<p>In a scenario in which a large number of users go offline immediately after they go online, the CPU may be overloaded and the RADIUS server may even go down. To prevent this problem, you can configure the <strong><span>quickoffline</span></strong> parameter to limit the number of times a PPP user can go offline immediately after the user goes online within a specified period. If the PPP user immediately goes offline after going online <i><span class="varname">request-sessions</span></i> times within <i><span class="varname">request-period</span></i>, the user account is blocked for <i><span class="varname">blocking-period</span></i> seconds.</p>
<p>In the system view, this command takes effect on all users who go online from the <span class="keyword">NE40E</span>. In the VLAN view, the command takes effect only on the users who go online from the interface where the VLAN resides. If this command is run in both the system and VLAN views, the command that first meets the restriction condition takes effect.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=pppoe-server"><b><span class="cmdname">pppoe-server</span></b></a> <i><span class="varname">slot-number</span></i> <strong><span>max-sessions</span></strong> <i><span class="varname">session-number</span></i></span><p><p>The maximum number of users allowed to go online from an interface board is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=pppoe-server+max-sessions+remote-mac"><b><span class="cmdname">pppoe-server max-sessions remote-mac</span></b></a> <i><span class="varname">session-number</span></i><span> [ <strong><span>with-check-location</span></strong></span><span> [ <strong><span>padi-mac-check</span></strong> ]</span><span> ]</span></span><p><p>The maximum number of users allowed to go online when one MAC address is used for access<span> from different physical locations</span> is configured.<span> Only one access user is allowed at the same physical location.</span></p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the <a href="cmdqueryname=pppoe-server+max-sessions+remote-mac"><b><span class="cmdname">pppoe-server max-sessions remote-mac</span></b></a> command is run to set the maximum number of users allowed to go online based on one MAC address to be greater than 1, if <strong><span>option105</span></strong> is not specified in the <a href="cmdqueryname=ppp+connection+chasten"><b><span class="cmdname">ppp connection chasten</span></b></a> command, the function of limiting the number of PPP user access requests based on MAC addresses does not take effect. <span>For this function to take effect, specify the <strong><span>multi-sessions-permac</span></strong> parameter. </span>If <strong><span>option105</span></strong> is specified in the <a href="cmdqueryname=ppp+connection+chasten"><b><span class="cmdname">ppp connection chasten</span></b></a> command, the function of limiting the number of PPP user access requests based on Option 105 still takes effect.</p>
<p><span>After running the <a href="cmdqueryname=pppoe-server+max-sessions+remote-mac"><b><span class="cmdname">pppoe-server max-sessions remote-mac</span></b></a> <i><span class="varname">session-number</span></i> command, you can also allow multiple users to access the network based on one MAC address. In this case, however, physical location information is not checked.</span></p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=pppoe-server+same-user+forbid"><b><span class="cmdname">pppoe-server same-user forbid</span></b></a></span><p><p>The device is enabled to deny a PPPoE user's login request if another PPPoE user having the same MAC address has gone online from the same physical location when each MAC address maps a unique session.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ppp+username+check"><b><span class="cmdname">ppp username check</span></b></a></span><p><p>The device is configured to check whether a PPP user access request contains a username and to deny the request if it does not contain a username.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Limiting the number of IP addresses for PPP users</span><p><p>A user can access the <span class="keyword">device</span> through multiple links. If the number of IP addresses of PPP users attempting to access the network reaches the threshold specified for a BAS interface or board, the BAS interface or board does not respond to the PADO packets sent by PPP users and no more PPP users can access the BAS interface or board. In this case, PPP users can go online only through other interfaces or boards. This achieves load balancing among different interfaces and boards.</p>
<p>The configured access limit is the limit on the number of IP addresses of PPP users. This configuration applies only to PPPoE and L2TP users. A single-stack user is counted as one user, and a dual-stack user is counted as two users. When the number of IP addresses of PPP users attempting to access the network from a BAS interface or board reaches the threshold specified, the BAS interface or board stops responding to the PADO packets sent by PPP users and no more PPP users can access the BAS interface or board.</p>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=slot"><b><span class="cmdname">slot</span></b></a> <i><span class="varname">slot-id</span></i></span><p><p>The slot view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-ip-limit"><b><span class="cmdname">access-ip-limit</span></b></a> <i><span class="varname">max-number</span></i> <strong><span>user-type ppp</span></strong></span><p><p>The maximum number of IP addresses for PPP users allowed to access the network from a specified board is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bas"><b><span class="cmdname">bas</span></b></a></span><p><p>A BAS interface is created, and its view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-type"><b><span class="cmdname">access-type</span></b></a> <strong><span>layer2-subscriber</span></strong> [ <strong><span>bas-interface-name</span></strong> <i><span class="varname">name</span></i> | <strong><span>default-domain</span></strong> { <strong><span>pre-authentication</span></strong> <i><span class="varname">domain-name</span></i> | <strong><span>authentication</span></strong> [ <strong><span>force</span></strong> | <strong><span>replace</span></strong> ] <i><span class="varname">domain-name</span></i> } * | <strong><span>accounting-copy radius-server</span></strong> <i><span class="varname">radius-name</span></i> ] *</span><p><p>The access type and related attributes are configured for Layer 2 common users.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-ip-limit"><b><span class="cmdname">access-ip-limit</span></b></a> <i><span class="varname">max-number</span></i> <strong><span>user-type ppp</span></strong> [ <strong><span>exclude</span></strong> ]</span><p><p>The maximum number of IP addresses for PPP users allowed to access the network from a specified BAS interface is configured. If the number of PPP users who access the network from a BAS interface reaches the maximum number of IP addresses for PPP users allowed to access the network from a board, the BAS interface stops responding to the PADO packets sent by subsequent PPP users. However, this restriction does not apply to BAS interfaces configured with the <strong>exclude</strong> parameter.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Limiting the number of user access packets</span><p><p>When a large number of ARP/IPv4/IPv6/ND packets are sent to launch attacks or unauthorized clients send requests continuously, the CPU usage of the main control board becomes high. In this case, you can limit the number of users on a board within a specified period so that excess packets are discarded.</p>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=slot"><b><span class="cmdname">slot</span></b></a> <i><span class="varname">slot-id</span></i></span><p><p>The slot view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access+trigger+packet-limit"><b><span class="cmdname">access trigger packet-limit</span></b></a> <i><span class="varname">packets-num</span></i> <strong><span>time</span></strong> <i><span class="varname">seconds</span></i><span> [ <strong><span>all</span></strong> ]</span></span><p><p>The maximum number of user packets that are allowed to pass through a specified board within a specified period is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Limiting DHCP user access</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=dhcp-user-slot-warning-threshold"><b><span class="cmdname">dhcp-user-slot-warning-threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span><p><p>The alarm threshold for the number of DHCP users who go online from a service board is configured. If the proportion of DHCP users accessing the board exceeds the threshold, an alarm is generated.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=dhcp-user-warning-threshold"><b><span class="cmdname">dhcp-user-warning-threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span><p><p>The alarm threshold for the number of DHCP users who go online from the device is configured. If the proportion of DHCP users accessing the <span class="keyword">NE40E</span> exceeds the threshold, an alarm is generated.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=dhcp+connection+chasten"><b><span class="cmdname">dhcp connection chasten</span></b></a><span> { <a href="cmdqueryname=authen-packets"><b><span class="cmdname">authen-packets</span></b></a> <i><span class="varname">authen-packets</span></i> | <strong><span>request-packets</span></strong> <i><span class="varname">request-packets</span></i> } * <strong><span>check-period</span></strong> <i><span class="varname">check-period</span></i> <strong><span>restrain-period</span></strong> <i><span class="varname">restrain-period</span></i> [ <strong><span>slot</span></strong> <i><span class="varname">slotid</span></i> ]</span></span><p><p>A limit is configured for DHCP access users.</p>
</p><p><ul><li>You can run the <a href="cmdqueryname=display+dhcp+chasten-user"><b><span class="cmdname">display dhcp chasten-user</span></b></a><span> <strong><span>slot</span></strong> <i><span class="varname">slotid</span></i> [ <strong><span>mac-address</span></strong> <i><span class="varname">mac-address</span></i> ] [ <strong><span>state</span></strong> { <strong><span>restrain</span></strong> | <strong><span>check</span></strong> } ]</span> command to check information about DHCP access users for whom a limit is configured.</li></ul>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Limiting the number of users who go online from a board</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=slot-warning-threshold"><b><span class="cmdname">slot-warning-threshold</span></b></a> <i><span class="varname">threshold-value</span></i></span><p><p>The alarm threshold for the number of users who go online from a board is configured. If the proportion of users accessing the board exceeds the threshold, an alarm is generated.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Limiting the access response delay</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-delay+step"><b><span class="cmdname">access-delay step</span></b></a> <i><span class="varname">step-value</span></i> <strong><span>minimum</span></strong> <i><span class="varname">minimum-time</span></i> <strong><span>maximum</span></strong> <i><span class="varname">maximum-time</span></i> <span>[ <strong><span>slot </span></strong><i><span class="varname">slot-id</span></i> ]</span></span><p><p>The user access response delay function is enabled, and the maximum and minimum access response delays are configured.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the access response delay function is enabled both globally and on a BAS interface, the configuration on the BAS interface takes effect.</p>
</div></div>
<p>The access response delay depends on the number of access users and the configured parameters including the step, maximum access response delay, and minimum access response delay. The access response delay is the rounded-down value obtained by dividing the number of access users by the step plus the minimum access response delay. Compare the calculated access response delay (assuming the value is N) with the maximum access response delay:</p>
<ul><li>If N is less than or equal to the maximum access response delay, the access response delay is N multiplying 10 ms.</li><li>If N is greater than the maximum access response delay, the access response delay is the maximum access response delay multiplying 10 ms.</li></ul>
<p>An example assumes that the step is 3000, the maximum access response delay is 7, and the minimum access response delay is 3. The delay for access users numbered 0 to 2999 is 3 x 10 ms, the delay for access users numbered 3000 to 5999 is 4 x 10 ms, the delay for access users numbered 6000 to 8999 is 5 x 10 ms, the delay for access users numbered 9000 to 11999 is 6 x 10 ms, and the delay for access users numbered 12000 and later is 7 x 10 ms.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=access+delay+load-balance"><b><span class="cmdname">access delay load-balance</span></b></a> <strong><span>group</span></strong> <i><span class="varname">group-name</span></i> [ <i><span class="varname">delay-time</span></i> ]</span><p><p>A load balancing group is configured for user access.</p>
</p><p><p>If two devices
with the same configuration are deployed, users can go online from
any of the two devices that work in master/backup mode. If load balancing
groups are configured on both the master and backup devices, run the <b><span class="cmdname" id="EN-US_TASK_0172373728__en-us_cliref_0172385140_cmdname1784915755214553">access delay load-balance</span></b> <b><span class="cmdname" id="EN-US_TASK_0172373728__en-us_cliref_0172385140_cmdname317325047214553">group</span></b> <i><span class="varname" id="EN-US_TASK_0172373728__en-us_cliref_0172385140_varname813872813214553">group-name</span></i> <i><span class="varname" id="EN-US_TASK_0172373728__en-us_cliref_0172385140_varname198949386214553">delay-time</span></i> command to configure
a response delay policy for the load balancing group on the backup
device. In this way, even if an interface on the backup device is
selected in a Hash operation, the interface will not respond to user
login requests until the time specified by <i><span class="varname" id="EN-US_TASK_0172373728__en-us_cliref_0172385140_varname1640822022214553">delay-time</span></i> elapses. This ensures that users go online preferentially through an interface
on the master device. Users will go online through an interface on the backup device
only when the master device is faulty.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bas"><b><span class="cmdname">bas</span></b></a></span><p><p>A BAS interface is created, and its view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=access-delay"><b><span class="cmdname">access-delay</span></b></a> <i><span class="varname">delay-time</span></i> <strong><span>load-balance-group</span></strong> <i><span class="varname">group-name</span></i></span><p><p>The interface that requires load balancing is added to the load balancing group. The interfaces in the same load balancing group determine the access response delay based on the hash result of user MAC addresses, achieving inter-board load balancing.</p>
</p><p><p>If the access response delay is not configured for a load balancing group:</p>
<ul><li id="EN-US_TASK_0172373728__en-us_cliref_0172385139_li1299614376214553">If the interface through which users go online is selected in a Hash operation, the interface immediately responds to the received login requests.</li><li id="EN-US_TASK_0172373728__en-us_cliref_0172385139_li4319073214553">If the interface through which users go online is not selected in a Hash operation, the interface responds to the received login requests after the delay time configured for the BAS interface elapses.</li></ul>
<div class="p">If the access response delay is configured for a load balancing group:<ul><li id="EN-US_TASK_0172373728__en-us_cliref_0172385139_li578271392214553">If the interface through which users go online is selected in a Hash operation, the interface responds to the received login requests after the delay time configured for the load balancing group elapses.</li><li id="EN-US_TASK_0172373728__en-us_cliref_0172385139_li490392186214553">If the interface through which users go online is not selected in a Hash operation, the interface responds to the received login requests after the delay time configured for the load balancing group plus the delay time configured for the BAS interface elapses.</li></ul>
</div>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=access-delay"><b><span class="cmdname">access-delay</span></b></a> <i><span class="varname">delay-time</span></i> [ <strong><span>circuit-id-include</span></strong> <i><span class="varname">text-value</span></i> | <strong><span>even-mac</span></strong> | <strong><span>odd-mac</span></strong> ]</span><p><p>An access response delay policy is configured on the BAS interface.</p>
</p><p><p><span>If <strong><span id="EN-US_TASK_0172373728__en-us_cliref_0172385139_cmdparmname952454580214553">circuit-id-include</span></strong> is specified, you must run the <a href="cmdqueryname=client-option82"><b><span class="cmdname" id="EN-US_TASK_0172373728__en-us_cliref_0172385139_cmdname1711619737214553">client-option82</span></b></a> command in the BAS interface view to configure the device to trust the DHCP Option 82 field (for a DHCP user) or the PPPoE+ field (for a PPP user) for the response delay to take effect.</span></p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=access+delay+load-balance+algorithm+enhance"><b><span class="cmdname">access delay load-balance algorithm enhance</span></b></a> <strong><span>enable</span></strong></span><p><p>The enhanced load balancing algorithm is enabled.</p>
<p>To configure the frequency for updating the preferred access interface in the load balancing group, run the <a href="cmdqueryname=access+delay+load-balance+algorithm+enhance"><b><span class="cmdname">access delay load-balance algorithm enhance</span></b></a> <strong><span>update-frequency</span></strong> <i><span class="varname">update-frequency</span></i> command.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Currently, this command applies only to PPPoE users.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Limiting user packets of a specified type</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access+packet+strict-check"><b><span class="cmdname">access packet strict-check</span></b></a> { <strong><span>all</span></strong> | { <strong><span>nd</span></strong> | <strong><span>dhcpv6</span></strong> | <strong><span>dhcp</span></strong> | <strong><span>ppp</span></strong> | <strong><span>l2tp</span></strong><span> | <strong><span>dot1x</span></strong></span> } <sup>*</sup> }</span><p><p>The <span class="keyword">device</span> is configured to strictly check user packets of a specified type.</p>
</p><p><p>Even if the destination MAC address of the packets sent by a user is not the MAC address of the BAS interface, the user may still receive a response. To prevent the <span class="keyword">device</span> from being affected by malicious attacks, run this command to configure strict check on the user packets so that the packets that do not comply with the standard protocol are discarded.</p>
<p>Additionally, if terminal devices do not strictly comply with the standard protocol, the involved users may not log in. Therefore, exercise caution when running this command.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the device to dynamically adjust the number of access users based on the system status.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-speed+adjustment+system-state"><b><span class="cmdname">access-speed adjustment system-state</span></b></a> <strong><span>enable</span></strong> [ <strong><span>strict-check</span></strong> ]</span><p><p>The device is configured to adjust the user access rate based on the system status.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-speed+adjustment+system-state+threshold"><b><span class="cmdname">access-speed adjustment system-state threshold</span></b></a> { <strong><span>main-cpu-usage</span></strong> | <strong><span>main-memory-usage</span></strong> | <strong><span>access-queue</span></strong> | <strong><span>slot-cpu-usage</span></strong> | <strong><span>slot-memory-usage</span></strong> | <strong><span>ppp-cpcar-drop</span></strong> | <strong><span>ppp-receive-queue</span></strong> | <strong><span>pppoe-receive-queue</span></strong> <span>| <strong><span>l2tp-queue</span></strong> | <strong><span>dhcp-slot-queue</span></strong> </span><span>| <strong><span>fes-queue</span></strong> | <a href="cmdqueryname=lns-cpcar-drop"><b><span class="cmdname">lns-cpcar-drop</span></b></a></span> | <a href="cmdqueryname=dhcp-server-queue"><b><span class="cmdname">dhcp-server-queue</span></b></a> | <a href="cmdqueryname=dhcpv6-server-queue"><b><span class="cmdname">dhcpv6-server-queue</span></b></a> <span>| <strong><a href="cmdqueryname=eap-cpcar-drop"><b><span class="cmdname">eap-cpcar-drop</span></b></a></strong> </span><span>| </span><strong><span>queue-delay</span></strong> } <strong><span>alarm</span></strong> <i><span class="varname">alarm-threshold-value</span></i> <strong><span>resume</span></strong> <i><span class="varname">resume-threshold-value</span></i></span><p><p>The system status threshold for decreasing the user access rate and the threshold for restoring the user access rate are configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-speed+adjustment+system-state+user-type"><b><span class="cmdname">access-speed adjustment system-state user-type</span></b></a> { { <strong><span>dhcp</span></strong> | <strong><span>pppoe</span></strong> | <strong><span>ipv4-trigger</span></strong> | <strong><span>ipv6-trigger</span></strong> | <strong><span>dot1x</span></strong> } * | <strong><span>none</span></strong> }</span><p><p>The user type for which the device adjusts the user access rate based on the system status is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-speed+adjustment+system-state+time"><b><span class="cmdname">access-speed adjustment system-state time</span></b></a> <strong><span>interval</span></strong> <i><span class="varname">adjust-interval</span></i> <strong><span>delay-count</span></strong> <i><span class="varname">adjust-delay-count</span></i> [ <strong><span>slot</span></strong> ]</span><p><p>An interval at which the user access rate is adjusted based on the system status and the minimum number of delay periods for increasing the user access rate are configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the device to adjust the UM message queue threshold based on the system status.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-speed+adjustment+system-state+threshold+access-queue"><b><span class="cmdname">access-speed adjustment system-state threshold access-queue</span></b></a> <strong><span>length</span></strong> <i><span class="varname">length-value</span></i></span><p><p>The device is configured to adjust the threshold for the UM message queue usage based on the system status. When the UM message queue usage reaches the threshold, the CPCAR value is decreased or increased as required to control the number of user packets to be sent to the CPU.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the device to adjust the rate at which ARP/IP/IPv6/ND packets that trigger user login are sent to the CPU based on the system status.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-speed+adjustment+system-state+packet-limit+trigger+enable"><b><span class="cmdname">access-speed adjustment system-state packet-limit trigger enable</span></b></a></span><p><p>The device is enabled to adjust the rate at which ARP/IP/IPv6/ND packets that trigger user login are sent to the CPU based on the system status.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the device to preferentially allocate CPU resources to online users.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-speed+adjustment+edsg-queue+enable"><b><span class="cmdname">access-speed adjustment edsg-queue enable</span></b></a></span><p><p>The device is enabled to preferentially allocate CPU resources to online users. In this case, EDSG services enter the activation queue and are not activated immediately.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the device to generate an alarm when the user resource usage or CPU usage exceeds a specified threshold and to clear the alarm when the user resource usage or CPU usage falls below the threshold.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-user+exhaust+warning+enable"><b><span class="cmdname">access-user exhaust warning enable</span></b></a></span><p><p>The device is configured to generate an alarm when the user resource usage or CPU usage reaches a specified threshold and to clear the alarm when the user resource usage or CPU usage falls below the threshold.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-user+exhaust+threshold-alarm"><b><span class="cmdname">access-user exhaust threshold-alarm</span></b></a> { <strong><span>main-resource-usage</span></strong> | <strong><span>slot-resource-usage</span></strong> | <strong><span>main-cpu-usage</span></strong> | <strong><span>slot-cpu-usage</span></strong> } <strong><span>upper-limit</span></strong> <i><span class="varname">upper-limit</span></i> <strong><span>lower-limit</span></strong> <i><span class="varname">lower-limit</span></i></span><p><p>The alarm threshold and alarm clearing threshold for the user resource usage or CPU usage are configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the maximum number of active sessions when the device functions as a RADIUS proxy.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=access-speed+adjustment+system-state+radius-proxy+active-session+threshold+restrain"><b><span class="cmdname">access-speed adjustment system-state radius-proxy active-session threshold restrain</span></b></a> <i><span class="varname">restrain-threshold-value</span></i> <strong><span>resume</span></strong> <i><span class="varname">resume-threshold-value</span></i></span><p><p>The suppression threshold and recovery threshold for the maximum number of active sessions are configured for the RADIUS proxy.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure parameters of the avalanche prevention alarm function for user login.</span><br>When the user access rate is high and the system is overloaded, an avalanche occurs. As a result, users cannot access the network for a long time. To prevent this problem, the system can be configured to monitor some device indicators. When an indicator meets the condition for generating an avalanche prevention alarm, the device generates such an alarm. This allows the device to adjust the access rate or reduce the number of received packets in a timely manner, ensuring slow user access when the device load is heavy.<ol><li>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a><p>The system view is displayed.</p>
</li><li>Run <a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a><p>The AAA view is displayed.</p>
</li><li>Run <a href="cmdqueryname=access-speed+adjustment+system-state+alarm"><b><span class="cmdname">access-speed adjustment system-state alarm</span></b></a> <strong><span>interval</span></strong> <i><span class="varname">alarm-interval</span></i> <strong><span>threshold</span></strong> <i><span class="varname">alarm-threshold-value</span></i> <a href="cmdqueryname=percent"><b><span class="cmdname">percent</span></b></a> <i><span class="varname">alarm-percent-value</span></i><p>The detection interval for generating an avalanche prevention alarm, health threshold, and the percentage of time during which the system health is lower than the threshold are configured. Within a detection interval, if the percentage of the duration in which the system health is lower than the health threshold to the detection interval is greater than the configured percentage, the system generates an avalanche prevention alarm.</p>
</li><li>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a><p>The configuration is committed.</p>
</li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0270.html">Configuring and Managing Users
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0274.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0277.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>