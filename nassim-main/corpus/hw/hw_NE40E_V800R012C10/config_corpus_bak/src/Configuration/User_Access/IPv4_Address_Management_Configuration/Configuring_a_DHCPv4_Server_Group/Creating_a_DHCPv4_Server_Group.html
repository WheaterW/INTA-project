
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Creating a DHCPv4 Server Group">
<meta name="abstract" content="DHCPv4 servers in a DHCPv4 server group can work in load balancing, polling, or master/backup mode.">
<meta name="description" content="DHCPv4 servers in a DHCPv4 server group can work in load balancing, polling, or master/backup mode.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0033.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0056.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,z00603461,w00800033,z00588052,c00549182,w00556928,l00593348,ipv4-address_ne,w00606909,w00447999,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="l00593348">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373785">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Creating a DHCPv4 Server Group</title>
</head>
<body><a name="EN-US_TASK_0172373785"></a><a name="EN-US_TASK_0172373785"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Creating a DHCPv4 Server Group</h1>
<div class="taskbody"><p>DHCPv4 servers in a DHCPv4 server group can work in load balancing<span>, polling,</span> or master/backup mode.</p>
<div class="steps"><a name="EN-US_TASK_0172373785__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=dhcp+enable"><b><span class="cmdname">dhcp enable</span></b></a></span><p><p>DHCP is enabled globally.</p>
</p></li><li><span>Run <a href="cmdqueryname=dhcp-server+group"><b><span class="cmdname">dhcp-server group</span></b></a> <i><span class="varname">group-name</span></i></span><p><p>A DHCPv4 server group is created and the DHCPv4 server group view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=dhcp-server"><b><span class="cmdname">dhcp-server</span></b></a> <i><span class="varname">ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance</span></i> ] [ <strong><span>weight</span></strong> <i><span class="varname">weight-value</span></i> ]</span><p><p>A DHCPv4 server is configured.</p>
</p><p><p>A DHCPv4 server group can contain one master DHCPv4 server and a maximum of seven backup DHCPv4 servers.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=dhcp-server+algorithm"><b><span class="cmdname">dhcp-server algorithm</span></b></a> { <strong><span>loading-share</span></strong> | <strong><span>master-backup</span></strong><span> | <strong><span>polling</span></strong> [ <strong><span>check-loose</span></strong> ]</span> }</span><p><p>The algorithm for selecting DHCPv4 servers is configured.</p>
</p><p><p>This command takes effect only when a DHCPv4 server group contains two DHCPv4 servers. The servers can work in load balancing<span>, polling,</span> or master/backup mode.</p>
<ul><li>Load balancing: The <span class="keyword">NE40E</span> distributes traffic based on the weights of DHCPv4 servers.</li><li>Master/backup: The server configured earlier is the master server, and the other is the backup server.</li><li><p>Polling: The <span class="keyword">NE40E</span> sends a request message to both of the two servers and selects the server that receives the request message earlier. All the subsequent messages, except DHCP Discover and DHCP Request messages, are sent only to the selected server.</p>
</li></ul>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=release-agent"><b><span class="cmdname">release-agent</span></b></a></span><p><p>The DHCPv4 release agent function is configured.</p>
</p><p><p>When a user wants to go offline and the DHCPv4 release agent function is enabled, the <span class="keyword">NE40E</span>, instead of the user, sends DHCPv4 Release messages to DHCPv4 servers.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=dhcp+rebind+forward-mode+all"><b><span class="cmdname">dhcp rebind forward-mode all</span></b></a></span><p><p>The <span class="keyword">NE40E</span> is configured to forward DHCP Rebind messages to all DHCPv4 servers in the DHCPv4 server group.</p>
</p><p></p></li><li><span>(Optional) Run <a href="cmdqueryname=dhcp-server+giaddr"><b><span class="cmdname">dhcp-server giaddr</span></b></a> { <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance</span></i> ] } [ <strong><span>forward-rui-slave</span></strong> ]</span><p><p>The GiAddr address of the DHCP messages sent from the DHCPv4 server group is configured.</p>
</p><p></p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=access+user-ip-address+trust+dhcp-server+user-type+ppp"><b><span class="cmdname">access user-ip-address trust dhcp-server user-type ppp</span></b></a></span><p><p>The <span class="keyword">NE40E</span> is enabled to perform loose check on the IP addresses assigned by DHCPv4 servers from a remote address pool for PPP and L2TP users.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=dhcp-server"><b><span class="cmdname">dhcp-server</span></b></a> <span>[ </span><i><span class="varname">ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance</span></i> ] <span>] { </span><strong><span>dead-count</span></strong> <i><span class="varname">dead-count</span></i> <span> | <strong><span>timeout</span></strong> <i><span class="varname">timeout-value</span></i> | <strong><span>dead-time</span></strong> <i><span class="varname">dead-time</span></i> }<sup>*</sup></span></span><p><p>The maximum number of times no response message is sent by a DHCPv4 server as a response to a request message is configured.</p>
</p><p><p>This command is used to resolve the problem of repeated status switching of a DHCPv4 server. After this command is configured, a DHCPv4 server automatically goes down after the number of times no reply message is sent by a DHCPv4 server as a response to a request message exceeds the specified threshold.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=dhcp-server"><b><span class="cmdname">dhcp-server</span></b></a> <span>[ </span><i><span class="varname">ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance</span></i> ] <span>] </span><strong><span>nak-count</span></strong> <i><span class="varname">nak-count</span></i></span><p><p>The maximum number of consecutive DHCP Nak messages that can be received from a DHCPv4 server is configured. A DHCPv4 server automatically goes down if the number of consecutive DHCP Nak messages received from the DHCPv4 server exceeds the specified threshold.</p>
</p><p></p></li><li><span>(Optional) Run <a href="cmdqueryname=dhcp+option-82+agent-remote-id+strip"><b><span class="cmdname">dhcp option-82 agent-remote-id strip</span></b></a></span><p><p>The <span class="keyword">Router</span> is enabled to remove the remote-id information from the Option 82 attribute of DHCP messages.</p>
</p></li><li><span>(Optional) Configure CAR for whitelisted DHCPv4 sessions.</span><ol type="a"><li><span>(Optional) Run the <a href="cmdqueryname=undo+whitelist+session-car+dhcp-server+disable"><b><span class="cmdname">undo whitelist session-car dhcp-server disable</span></b></a> command to enable CAR for whitelisted DHCPv4 sessions.</span></li><li><span>Run the <strong>whitelist session-car dhcp-server </strong>{<strong> cir </strong><em>cir-value</em> | <strong>cbs </strong><em>cbs-value</em> | <strong>pir </strong><em>pir-value</em> |<strong> pbs </strong><em>pbs-value </em>} * command to configure the bandwidth parameters of CAR for whitelisted DHCPv4 sessions.</span></li></ol>
</li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0033.html">Configuring a DHCPv4 Server Group
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0056.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>