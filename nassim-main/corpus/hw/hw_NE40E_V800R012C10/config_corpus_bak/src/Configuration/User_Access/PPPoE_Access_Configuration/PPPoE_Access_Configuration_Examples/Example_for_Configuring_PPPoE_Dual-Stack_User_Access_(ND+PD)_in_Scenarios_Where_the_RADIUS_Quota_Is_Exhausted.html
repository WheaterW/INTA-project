
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring PPPoE Dual-Stack User Access (ND+PD) in Scenarios Where the RADIUS Quota Is Exhausted">
<meta name="abstract" content="This section provides an example for configuring PPPPoE dual-stack user access in ND+PD mode in scenarios where the RADIUS quota is exhausted. When a PPPoE dual-stack user connects to a BRAS, the BRAS implements RADIUS authentication and accounting. The BRAS also assigns an IPv4 address to the user from the local address pool, an IPv6 prefix to the CPE through DHCPv6 IA_PD, and an IPv6 address to the CPE through DHCPv6 ND. This allows the user to access the network. After the quota delivered by the RADIUS server is exhausted, the PPPoE dual-stack user is switched to a redirect domain in which user access is controlled. If the PPPoE dual-stack user is visiting an unauthorized address, it will be forcibly redirected to a payment page.">
<meta name="description" content="This section provides an example for configuring PPPPoE dual-stack user access in ND+PD mode in scenarios where the RADIUS quota is exhausted. When a PPPoE dual-stack user connects to a BRAS, the BRAS implements RADIUS authentication and accounting. The BRAS also assigns an IPv4 address to the user from the local address pool, an IPv6 prefix to the CPE through DHCPv6 IA_PD, and an IPv6 address to the CPE through DHCPv6 ND. This allows the user to access the network. After the quota delivered by the RADIUS server is exhausted, the PPPoE dual-stack user is switched to a redirect domain in which user access is controlled. If the PPPoE dual-stack user is visiting an unauthorized address, it will be forcibly redirected to a payment page.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppox_cfg_0183.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoe_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppox_cfg_0286.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,z00603461,w00800033,z00588052,c00549182,l00593348,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="dcAudienceJob" content="Configuration">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0245960423">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring PPPoE Dual-Stack User Access (ND+PD) in Scenarios Where the RADIUS Quota Is Exhausted</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0245960423"></a><a name="EN-US_TASK_0245960423"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring PPPoE Dual-Stack User Access (ND+PD) in Scenarios Where the RADIUS Quota Is Exhausted</h1>
<div class="taskbody"><p>This section provides an example for configuring PPPPoE dual-stack user access in ND+PD mode in scenarios where the RADIUS quota is exhausted. When a PPPoE dual-stack user connects to a BRAS, the BRAS implements RADIUS authentication and accounting. The BRAS also assigns an IPv4 address to the user from the local address pool, an IPv6 prefix to the CPE through DHCPv6 IA_PD, and an IPv6 address to the CPE through DHCPv6 ND. This allows the user to access the network. After the quota delivered by the RADIUS server is exhausted, the PPPoE dual-stack user is switched to a redirect domain in which user access is controlled. If the PPPoE dual-stack user is visiting an unauthorized address, it will be forcibly redirected to a payment page.</p>
<div class="context"><a name="EN-US_TASK_0245960423__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0245960423__fig_dc_ne_ipox_cfg_007201">Figure 1</a>, a PPPoE user belongs to the <strong>huawei</strong> domain and uses the dual-stack access mode. <span class="keyword">Device</span>A implements RADIUS authentication and accounting, as well as assigns an IPv4 address to the user from the local address pool and an IPv6 address to the user through DHCPv6 ND. The user can then access the network through interface 2 on <span class="keyword">Device</span>A. After the PPPoE dual-stack user goes online, the RADIUS server delivers a quota. After the quota is exhausted, the user is switched to a redirect domain in which user access is controlled. If the PPPoE dual-stack user is visiting an unauthorized address, it will be forcibly redirected to a payment page.</p>
<div class="fignone" id="EN-US_TASK_0245960423__fig_dc_ne_ipox_cfg_007201"><a name="EN-US_TASK_0245960423__fig_dc_ne_ipox_cfg_007201"></a><a name="fig_dc_ne_ipox_cfg_007201"></a><span class="figcap"><b>Figure 1 </b>Configuring PPPoE dual-stack user access (ND+PD) in scenarios where the RADIUS quota is exhausted</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 through 3 in this example represent GE <span>0/1/1</span>, GE <span>0/1/2</span>, and GE <span>0/1/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0245963967.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0245960423__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure a RADIUS server group.</p>
</li><li>Configure AAA schemes.</li><li><p>Configure ACL rules and a traffic policy.</p>
</li><li><p>Configure a local IPv4 address pool.</p>
</li><li><p>Configure IPv6 address pools.</p>
</li><li><p>Configure domains.</p>
</li><li>Configure a virtual template.</li><li><p>Configure interfaces.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0245960423__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Authentication scheme name and authentication mode</p>
</li><li><p>Accounting scheme name and accounting mode</p>
</li><li><p>RADIUS server group name, RADIUS authentication server's IP addresses and port number, and RADIUS accounting server's IP address and port number</p>
</li><li><p>Local prefix pool names</p>
</li><li><p>IPv6 prefix to be assigned/prefix length</p>
</li><li><p>Local address pool names</p>
</li><li><p>Domain names</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0245960423__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure a RADIUS server group.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span></strong><strong>A</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> radius-server group radius</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-radius-radius]<strong> radius-server authentication 10.6.55.55 1645</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-radius-radius]<strong> radius-server accounting 10.6.55.55 1646</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-radius-radius] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-radius-radius]<strong> radius-server type standard</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-radius-radius]<strong> radius-server shared-key-cipher it-is-my-secret1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-radius-radius]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-radius-radius]<strong> quit</strong></pre>
</p></li><li><span>Configure AAA schemes.</span><p><p># Configure an authentication scheme. In the authentication scheme view, configure a redirect domain and enable the function to redirect users to this domain when users' RADIUS quota is exhausted.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> aaa</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>domain redirect</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-redirect] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa]<strong> authentication-scheme radius</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-authen-radius] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-authen-radius]<strong> authening authen-redirect online authen-domain redirect</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-authen-radius] <strong>authening quota-out-redirect-enable</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-authen-radius]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>authentication-scheme none</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-authen-none] <strong>authentication-mode none</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-authen-none] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-authen-none] <strong>quit</strong></pre>
<p># Configure an accounting scheme. </p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa]<strong> accounting-scheme radius</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-accounting-radius]<strong> accounting-mode radius</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-accounting-radius]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-accounting-radius]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa]<strong> accounting-scheme none</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-accounting-none] <strong>accounting-mode none</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-accounting-none] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-accounting-none] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa]<strong> quit</strong></pre>
</p></li><li><span>Configure ACL rules and a traffic policy.</span><p><p># Configure a user group.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> user-group web-before</strong></pre>
<p># Configure an ACL numbered 6000 to permit the traffic between the user group <strong>web-before</strong> and the web authentication server and between the user group <strong>web-before</strong> and the DNS server.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>acl number 6000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6000]<strong> rule permit ip source user-group web-before destination ip-address 10.6.55.56 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6000] <strong>rule permit ip source ip-address 10.6.55.56 0.0.0.255 destination user-group web-before</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6000]<strong> </strong><strong>rule permit ip source user-group web-before destination ip-address 10.10.10.1 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6000] <strong>rule permit ip source ip-address 10.10.10.1 0.0.0.255 destination user-group web-before</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6000] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-acl-ucl-6000] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>acl ipv6 number 6000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-ucl-6000]<strong> </strong><strong>rule permit ipv6 source user-group web-before destination ipv6-address </strong><strong>2001:db8:1::2/128</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-ucl-6000]<strong> </strong><strong>rule permit ipv6 </strong><strong>source ipv6-address </strong><strong>2001:db8:1::2/128</strong> <strong>destination </strong><strong>user-group web-before</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-ucl-6000] <strong>rule permit ipv6 source user-group web-before destination ipv6-address </strong><strong>2001:db8:1::1</strong><strong>/128</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-ucl-6000]<strong> rule permit ipv6 </strong><strong>source ipv6-address </strong><strong>2001:db8:1::1</strong><strong>/128</strong> <strong>destination </strong><strong>user-group web-before</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-ucl-6000] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-acl6-ucl-6000] <strong>quit</strong></pre>
<p># Configure an ACL numbered 6001 to allow HTTPS redirection for the TCP packets originating from the user group <strong>web-before</strong> and whose destination port information is www or 8080.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>acl number 6001</strong> </pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6001] <strong>rule permit tcp source user-group web-before</strong> <strong>destination-port eq www</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6001] <strong>rule permit tcp source user-group web-before</strong> <strong>destination-port eq 8080</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6001] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-acl-ucl-6001] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>acl ipv6 number 6001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-ucl-6001] <strong>rule permit tcp source user-group web-before destination-port eq www</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-ucl-6001] <strong>rule permit tcp source user-group web-before destination-port eq 8080</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-ucl-6001] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-acl6-ucl-6001] <strong>quit</strong></pre>
<p># Configure an ACL numbered 6002 to deny all the traffic originating from the user group <strong>web-before</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> acl 6002 match-order auto</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6002]<strong> rule permit ip source ip-address any destination user-group web-before</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6002]<strong> rule deny ip source user-group web-before destination ip-address any</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-ucl-6002]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-acl-ucl-6002]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>acl ipv6 number 6002</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-ucl-6002]<strong> rule permit ipv6 source ipv6-address any destination </strong><strong>user-group web-before</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-ucl-6002] <strong>rule deny ipv6 source user-group web-before destination ipv6-address any</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-ucl-6002] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-acl6-ucl-6002] <strong>quit</strong></pre>
<p># Configure traffic classifiers.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> traffic classifier c1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-c1]<strong> if-match acl 6000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-c1] <strong>if-match ipv6 acl 6000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-c1]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-classifier-c1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>traffic classifier c2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-c2] <strong>if-match acl 6001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-c2] <strong>if-match ipv6 acl 6001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-c2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-classifier-c2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>traffic classifier c3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-c3]<strong> </strong><strong>if-match acl 6002</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-c3] <strong>if-match ipv6 acl 6002</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-c3] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-classifier-c3] <strong>quit</strong></pre>
<p># Configure traffic behaviors.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> traffic behavior b1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-behavior-b1]<strong> permit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-behavior-b1]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-behavior-b1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>traffic behavior b2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-behavior-b2] <strong>http-redirect</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-behavior-b2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-behavior-b2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> traffic behavior b3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-behavior-b3]<strong> </strong><strong>deny</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-behavior-b3]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-behavior-b3]<strong> quit</strong></pre>
<p># Configure a traffic policy.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> traffic policy p1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-trafficpolicy-p1]<strong> classifier c1 behavior b1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-trafficpolicy-p1]<strong> classifier c2 behavior b2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-trafficpolicy-p1]<strong> classifier c3 behavior b3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-trafficpolicy-p1]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-trafficpolicy-p1]<strong> quit</strong></pre>
<p># Apply the traffic policy globally.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> traffic-policy p1 inbound</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li><li><span>Configure a user-side local IPv4 address pool.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ip pool pool2 bas local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ip-pool-pool2] <strong>gateway 10.10.10.2 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ip-pool-pool2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ip-pool-pool2] <strong>section 0 10.10.10.3 10.10.10.100</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ip-pool-pool2] <strong>dns-server 10.10.10.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ip-pool-pool2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ip-pool-pool2] <strong>quit</strong></pre>
</p></li><li><span>Configure IPv6 address pools.</span><p><ol type="a"><li><p>Configure a delegation prefix pool for ND users.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> </strong><strong>ipv6 prefix pre_nd delegation</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ipv6-prefix-pre_nd] <strong>prefix 2001:db8:3::/48</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ipv6-prefix-pre_nd] <strong>slaac-unshare-only</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ipv6-prefix-pre_nd] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ipv6-prefix-pre_nd]<strong> quit</strong></pre>
</li><li>Configure a delegation address pool for ND users.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> </strong><strong>ipv6 pool pool_nd bas delegation</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ipv6-pool-pool_nd] <strong>prefix pre_nd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ipv6-pool-pool_nd] <strong>dns-server </strong><strong>2001:db8:1::1 </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ipv6-pool-pool_nd] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ipv6-pool-pool_nd]<strong> quit</strong></pre>
</li><li>Configure a delegation prefix pool for PD users.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> </strong><strong>ipv6 prefix pre_pd delegation</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ipv6-prefix-pre_pd] <strong>prefix 2001:db8:2::/48</strong><strong> delegating-prefix-length 60</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ipv6-prefix-pre_pd] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ipv6-prefix-pre_pd] <strong>pd-unshare-only</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ipv6-prefix-pre_pd]<strong> quit</strong></pre>
</li><li>Configure a delegation address pool for PD users.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> </strong><strong>ipv6 pool pool_pd bas delegation</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ipv6-pool-pool_pd] <strong>prefix pre_pd</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ipv6-pool-pool_pd] <strong>dns-server 2001:db8:1::1 </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ipv6-pool-pool_pd] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ipv6-pool-pool_pd]<strong> quit</strong></pre>
</li></ol>
</p></li><li><span>Configure domains.</span><p><p># Configure a redirect domain and specify the fields that are allowed to take effect in the redirect domain when the RADIUS quota is exhausted.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>aaa</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>domain redirect</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-redirect] <strong>redirect-domain effect-attribute</strong><strong> user-group</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-redirect] <strong>authentication-scheme none</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-redirect] <strong>accounting-scheme none</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-redirect] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-redirect] <strong>prefix-assign-mode unshared</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-redirect] <strong>user-group web-before</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-redirect] <strong>web-server 10.6.55.56 2001:db8:1::2</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-redirect] <strong>web-server url isp1.com</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-redirect] <strong>web-server identical-url</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-redirect] <strong>quit</strong></pre>
<p># Configure a user access domain named <strong>huawei</strong>, and configure the BRAS to forcibly redirect online users when their RADIUS quota is exhausted.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>domain huawei</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-huawei] <strong>authentication-scheme radius</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-huawei] <strong>accounting-scheme radius</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-huawei] <strong>radius-server group radius</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-huawei] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-huawei] <strong>prefix-assign-mode unshared</strong> </pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-huawei] <strong>ip-pool pool2</strong> </pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-huawei] <strong>ipv6-pool </strong><strong>pool_pd</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-huawei] <strong>ipv6-pool </strong><strong>pool_nd</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-huawei] <strong>quota-out redirect url http://www.portal.com</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-aaa-domain-huawei] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa-domain-huawei] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-aaa] <strong>quit</strong></pre>
</p></li><li><span>Configure a virtual template.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> interface virtual-template 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Virtual-Template5]<strong> ppp authentication-mode chap</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Virtual-Template5]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-Virtual-Template5] <strong>quit</strong></pre>
</p></li><li><span>Configure interfaces.</span><p><p># Configure a BAS interface.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface GigabitEthernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>pppoe-server bind Virtual-Template 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>bas</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>-bas] <strong>access-type layer2-subscriber default-domain authentication huawei</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>-bas] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>-bas] <strong>quit</strong></pre>
<p># Enable IPv6 on the BAS interface.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>ipv6 address auto link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<p># Configure an upstream interface.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface GigabitEthernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 address auto link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 address 2001:db8:5::1/64 eui-64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>]<strong> ip address 10.2.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Check information about the address pool named <strong>pool2</strong>. The command output shows that the gateway address is 10.10.10.2, the addresses in the pool range from 10.10.10.3 to 10.10.10.100, and the DNS server address is 10.10.10.1.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display ip pool name pool2</strong></pre>
<pre class="screen">  Pool-Name      : <strong>pool2</strong>                                                        
  Pool-No        : 0                                                            
  Pool-constant-index: -                                                        
  Lease          : 3 Days 0 Hours 0 Minutes                                     
  Frameip-Lease-Manage:  disable                                                
  NetBios Type   : N-Node                                                       
  Auto recycle   : 30                                                           
  Option 3       : Enable                                                       
  DNS-Suffix     : -                                                            
  Dom-Search-List0: -                                                           
  Dom-Search-List1: -                                                           
  Dom-Search-List2: -                                                           
  Dom-Search-List3: -                                                           
  Option-Code 125 : enterprise-code : 2011, string: -                           

  DNS1         :<strong>10.10.10.1</strong>                                                      
  Position       : Local           Status           : Unlocked                  
  RUI-Flag       : -                                                            
  Attribute      : Private                                                      
  Gateway        : <strong>10.10.10.2 </strong>     Mask             : 255.255.255.0             
  Vpn instance   : --              Unnumbered gateway: -                        
  Profile-Name   : -               Server-Name     : -                          
  Total Idle     : 98              Have Dhcp IP     : 1                         
  Timeouts       : 0                                                            
  Timeout Count  : 0               Sub Option Count : 0                         
  Option Count   : 0               Force-reply Count: 0                         
  Auto-Blocked Times: 0            IP Allocation Failures: 0                    
  Codes: CFLCT(conflicted)         Wait-Request-Time: --                        
  IP Loose Check : 0                                                            
  ------------------------------------------------------------------------------------------------------                                                       
  ID           start             end   total    used    idle   CFLCT disable reserved static-bind delayed                                                       
  -------------------------------------------------------------------------------------------------------                                                       
   0      <strong>10.10.10.3    10.10.10.100 </strong>     98       0      98       0       0    0           0       0                                                       
  -------------------------------------------------------------------------------------------------------                                                       </pre>
<p># Check information about the prefix pool <strong>pre_nd</strong>. The command output shows that <strong>pre_nd</strong> is a local prefix pool and the prefix address is <strong>2001:db8:3::</strong>.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display ipv6 prefix pre_nd</strong></pre>
<pre class="screen"> ------------------------------------------------------------------------------
 Prefix Name        : <strong>pre_nd</strong>                
 Prefix Index       : 3
<span> Prefix constant index: -</span>
 Prefix Type        : DELEGATION          
 Prefix Address     : <strong>2001:DB8:3::</strong>                                       
 Prefix Length      : 48 
 Link-Address       : -                  
<span> Reserved Type      : NONE  </span>
 Valid Lifetime     : 3 Days 0 Hours 0 Minutes
 Preferred Lifetime : 2 Days 0 Hours 0 Minutes
 IfLocked           : Unlocked            
<span> Vpn instance       : -       </span>
 PD Prefix Len      : 64
 PD Prefix/C-DUID   : -
 slaac-unshare-only : TRUE                
 pd-unshare-only    : FALSE 
 dhcpv6-unshare-only: FALSE               
 Free Prefix Count  : 65536
 Used Prefix Count  : 0
 Bound Prefix Count (Free): 0
 Bound Prefix Count (Used): 0
 Flexibly-Allocted Prefix Count: 0
 Reserved Prefix Count: 0
 Conflict Prefix Count: 0
 Excluded Prefix Count: 0
 Radius Used Total  : 0                                                         
 Radius Used Online : 0                                                         
 Auto-Blocked Times : 0                                                         
 IP Allocation Failures : 0
 ------------------------------------------------------------------------------</pre>
<p># Check information about the address pool named <strong>pool_nd</strong>. The command output shows that <strong>pool_nd</strong> is a user-side local one and is bound to the local prefix pool <strong>pre_nd</strong>.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display ipv6 pool pool_nd</strong></pre>
<pre class="screen"> ----------------------------------------------------------------------
 Pool name          : <strong>pool_nd</strong>                            
 Pool No            : 2     
<span> Pool-constant-index :- </span>
 Pool type          : BAS DELEGATION      
 Preference         : 255   
 Renew time         : 50    
 Rebind time        : 80    
 Status             : UNLOCKED  
 Refresh interval   : infinite
 Used by domain     : 1     
 Dhcpv6 Unicast     : disable
 Dhcpv6 rapid-commit: disable
 Dns list           : -
 Dns server master  : 2001:DB8:1::1
 Dns server slave   : -
<span> AFTR name          : -</span>
 Wait-Request-Time  : --                                                        
 Warning Threshold  : 80                                                        
 Warning Exhaust Switch: FALSE  
 ----------------------------------------------------------------------
 Prefix-Name                      Prefix-Type 
 ----------------------------------------------------------------------
 <strong>pre_nd </strong>                          DELEGATION
 ----------------------------------------------------------------------
</pre>
<p># Check the configuration of the user access domain <strong>huawei</strong>. The command output shows that the IPv6 address pool <strong>pool_nd</strong> and IPv4 address pool <strong>pool2</strong> are bound to the user access domain <strong>huawei</strong>.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display domain huawei</strong></pre>
<pre class="screen">------------------------------------------------------------------------------
  Domain-name                     : huawei                                      
  Domain-state                    : Active                                      
  Authentication-scheme-name      : radius                                      
  Accounting-scheme-name          : radius                                      
  Authorization-scheme-name       : -                                           
  Primary-DNS-IP-address          : -                                           
  Second-DNS-IP-address           : -                                           
  Primary-DNS-IPV6-address        : -                                           
  Second-DNS-IPV6-address         : -                                           
  Web-server-URL-parameter        : No                                          
  Portal-server-URL-parameter     : No                                          
  Primary-NBNS-IP-address         : -                                           
  Second-NBNS-IP-address          : -                                           
  Time-range                      : Disable                                     
  Idle-cut direction              : Both                                        
  Idle-data-attribute (time,flow) : 0, 60                                       
  User detect interval            : 0s                                          
  User detect retransmit times    : 0                                           
  Install-BOD-Count               : 0                                           
  Report-VSM-User-Count           : 0                                           
  Value-added-service             : default                                     
  User-access-limit               : 118272                                      
  Online-number                   : 0                                           
  Web-IP-address                  : -                                           
  Web-IPv6-address                : -                                           
  Dns-redirect-IP-address         : -                                           
  Web-URL                         : -                                           
  Web-auth-server                 : -                                           
  Web-auth-state                  : -                                           
  Web-server-mode                 : get                                         
  Slave Web-IP-address            : -                                           
  Slave Web-IPv6-address          : -                                           
  Slave Web-URL                   : -                                           
  Slave Web-auth-server           : -                                           
  Slave Web-auth-state            : -                                           
  Web-server identical-url        : Disable                                     
  Portal-server-IP                : -                                           
  Portal-URL                      : -                                           
  Portal-force-times              : 2                                           
  Portal-server identical-url     : Disable                                     
  Service-policy(Portal)          : -                                           
  Ds-lite IPv4 portal             : Disable                                     
  PPPoE-user-URL                  : Disable                                     
  AdminUser-priority              : 16                                          
  IPUser-ReAuth-Time              : 300s                                        
  mscg-name-portal-key            : -                                           
  Portal-user-first-url-key       : -                                           
  User-session-limit              : 4294967295                                  
  Ancp auto qos adapt             : Disable                                     
  L2TP-group-name                 : -                                           
  User-lease-time-no-response     : 0s                                          
  RADIUS-server-template          : radius                                      
  Two-acct-template               : -                                           
  RADIUS-server-pre-template      : -                                           
                                    -                                           
                                    -                                           
  RADIUS-server-llid-first-template: -                                          
  HWTACACS-server-template        : -                                           
  Bill Flow                       : Disable                                     
  Tunnel-acct-2867                : Disable                                     
  Qos-profile-name inbound        : -                                           
  Qos-profile-name outbound       : -                                           

  Flow Statistic:                                                               
  Flow-Statistic-Up               : Yes                                         
  Flow-Statistic-Down             : Yes                                         
  Source-IP-route                 : Disable                                     
  IP-warning-threshold            : -                                           
  IP-warning-threshold(Low)       : -                                           
  IPv6-warning-threshold          : -                                           
  IPv6-warning-threshold(Low)     : -                                           
  Multicast Forwarding            : Yes                                         
  Multicast Virtual               : No                                          
  Max-multilist num               : 4                                           
  Multicast-profile               : -                                           
  Multicast-profile ipv6          : -                                           
  Multicast-policy                : -                                           
  Multicast-bandwidth             : -                                           
  Multicast-bandwidth-level-1     : -                                           
  IP-address-pool-name            : <strong>pool2</strong>                                       
  IPv6-Pool-name                  : <strong>pool_pd</strong>                                     
  IPv6-Pool-name                  : <strong>pool_nd</strong>                                     
  Quota-out                       : redirect to URL:http://www.portal.com       
  Service-type                    : -                                           
  User-basic-service-ip-type      : -/-/-                                       
  PPP-ipv6-address-protocol       : Ndra                                        
  IPv6-information-protocol       : Stateless dhcpv6                            
  IPv6-PPP-assign-interfaceid     : Disable                                     
  IPv6-PPP-NDRA-halt              : Disable                                     
  IPv6-PPP-NDRA-unicast           : Disable                                     
  Trigger-packet-wait-delay       : 60s                                         
  Peer-backup                     : Enable                                      
  Reallocate-ip-address           : Disable                                     
  Cui  enable                     : Disable                                     
  Igmp enable                     : Enable                                      
  CPE IP address                  : -                                           
  Pim snooping enable             : Enable                                      
  L2tp-user radius-force          : Disable                                     
  Accounting dual-stack           : Separate                                    
  Prefix-assign-mode              : Unshared                                    
  Radius server domain-annex      : -                                           
  Dhcp-option64-service           : Disable                                     
  Parse-separator                 : -                                           
  Parse-segment-value             : -                                           
  Dhcp-receive-server-packet      : -                                           
  Http-hostcar                    : Disable                                     
  Public-address assign-first     : Disable                                     
  Public-address nat              : Enable                                      
  Dhcp-user auto-save             : Disable                                     
  IP-pool usage-status threshold  : 255 , 255                                   
  Select-Pool-Rule                : gateway + local priority                    
  AFTR name                       : -                                           
  Traffic-rate-mode               : Separate                                    
  Traffic-statistic-mode          : Separate                                    
  Rate-limit-mode-inbound         : Car                                         
  Rate-limit-mode-outbound        : Car                                         
  Service-change-mode             : Stop-start                                  
  DAA Direction                   : both                                        
  Session Volumequota apply direction: both                                     
  Soap-server group               : -                                           
  Nas logic-sysname               : -                                           
  Accounting exclude-type vlan    : -/-                                         
  Framed-ip urpf                  : Enable                                      
  RA link-prefix                  : Disable                                     
  Dslam connect speed             : Disable                                     
  Local backup                    : Enable                                      
  DAA start accounting merge      : disable                                     
  DAA stop accounting merge       : disable                                     
  DAA interim accounting merge    : disable                                     
  DAA merged interim accounting interval(minute) : --                           
  DAA merged interim accounting hash  : disable                                 
  EDSG stop accounting merge      : disable                                     
  EDSG interim accounting merge   : disable                                     
  EDSG merged interim accounting interval(minute): --                           
  EDSG merged interim accounting hash : disable                                 
  Stop dropped flow direction     : -                                           
  Interval dropped flow direction : -                                           
  Edsg family-schedule inbound    : Disable                                     
  Edsg family-schedule outbound   : Disable                                     
  Layer2 IPoE ip-pool select-mode : Local                                       
  Layer2 PPPoE ip-pool select-mode: Local                                       
  access-trigger loose time(minute)   : 0                                       
  access-trigger loose infinite-lease : Disable                                 
  IPv6 address assignment mode    : -                                           
  LNS Tcp-Ack Priority-Car        : Disable                                     
  EDSG Tcp-Ack Priority-Car       : Disable                                     
  Include LNS-IPv6                : Disable                                     
  Map priority                    : MAP-E                                       
  Coa-zero-lease Dual-cut         : Disable                                     
  COA lease zero policy           : -                                           
  Authentication fail online domain : -  
  ------------------------------------------------------------------------------
</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0245960423__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>A
# 
user-group web-before
#
radius-server group radius
 radius-server authentication 10.6.55.55 1645 weight 0
 radius-server accounting 10.6.55.55 1646 weight 0
<strong> </strong>radius-server type standard
 radius-server shared-key-cipher %^%#vS%796FO7%C<font style="font-size:8pt" Face="Courier New" >~</font>pB%CR=q;j}gSCqR-X6+P!.DYI@)%^%
#
acl number 6000
 rule 5 permit ip source user-group web-before destination ip-address 10.6.55.56 0.0.0.255
 rule 10 permit ip source ip-address 10.6.55.56 0.0.0.255 destination user-group web-before
 rule 15 permit ip source user-group web-before destination ip-address 10.10.10.1 0.0.0.255
 rule 20 permit ip source ip-address 10.10.10.1 0.0.0.255 destination user-group web-before
#
acl ipv6 number 6000
 rule 5 permit ipv6 source user-group web-before destination ipv6-address 2001:db8:1::2/128
 rule 10 permit ipv6 source ipv6-address 2001:db8:1::2/128 destination user-group web-before
 rule 15 permit ipv6 source user-group web-before destination ipv6-address 2001:db8:1::1/128
 rule 20 permit ipv6 source ipv6-address 2001:db8:1::1/128 destination user-group web-before
#
acl number 6001 
 rule 5 permit tcp destination-port eq www source user-group web-before
 rule 10 permit tcp source user-group web-before destination-port eq 8080
#
acl ipv6 number 6001 
 rule 5 permit tcp destination-port eq www source user-group web-before
 rule 10 permit tcp source user-group web-before destination-port eq 8080
#
acl number 6002 match-order auto
 rule 5 permit ip source ip-address any destination user-group web-before
 rule 10 deny ip source user-group web-before destination ip-address any
#
acl ipv6 number 6002 
 rule 5 permit ipv6 source ipv6-address any destination user-group web-before 
 rule 10 deny ipv6 source user-group web-before destination ipv6-address any
#
traffic classifier c1 operator or
 if-match acl 6000
 if-match ipv6 acl 6000
#
traffic classifier c2 operator or
 if-match acl 6001
 if-match ipv6 acl 6001
#
traffic classifier c3 operator or
 if-match acl 6002
 if-match ipv6 acl 6002
#
traffic behavior b1
 permit
#
traffic behavior b2
 http-redirect
#
traffic behavior b3
 deny
#
traffic policy p1
 share-mode
 classifier c1 behavior b1
 classifier c2 behavior b2
 classifier c3 behavior b3
#
ip pool pool2 bas local
 gateway 10.10.10.2 255.255.255.0
 section 0 10.10.10.3 10.10.10.100
 dns-server 10.10.10.1
#
ipv6 prefix pre_nd delegation
 prefix 2001:db8:3::/48
 slaac-unshare-only
#
ipv6 pool pool_nd bas delegation
 dns-server 2001:db8:1::1
 prefix pre_nd
#
ipv6 prefix pre_pd delegation
 prefix 2001:db8:2::/48 delegating-prefix-length 60
 pd-unshare-only
#
ipv6 pool pool_pd bas delegation
 prefix pre_pd
 dns-server 2001:db8:1::1
#
aaa
 authentication-scheme none
 authentication-mode none
 authentication-scheme radius
 authening authen-redirect online authen-domain redirect
 authening quota-out-redirect-enable
 #
 authorization-scheme default
 #
 accounting-scheme none
 accounting-mode none
 accounting-scheme radius
 accounting-mode radius
 #
 domain redirect
  redirect-domain effect-attribute user-group
  authentication-scheme none
  accounting-scheme none
  prefix-assign-mode unshared
  user-group web-before
  web-server 10.6.55.56 2001:db8:1::2
  web-server url isp1.com
  web-server identical-url
 #
 domain huawei
  authentication-scheme radius
  accounting-scheme radius
  radius-server group radius
  prefix-assign-mode unshared
  ip-pool pool2
  ipv6-pool pool_pd
  ipv6-pool pool_nd
  quota-out redirect url http://www.portal.com
#
interface virtual-template 1
<strong> </strong>ppp authentication-mode chap
#
interface <span>GigabitEthernet</span><span>0/1/2</span>
 undo shutdown
 ipv6 enable
 ipv6 address auto link-local
 pppoe-server bind Virtual-Template 1
 bas
 #
  access-type layer2-subscriber default-domain authentication huawei
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ipv6 enable
 ip address 10.2.1.1 24
 ipv6 address 2001:db8:5::1/64 eui-64
 ipv6 address auto link-local
#
 traffic-policy p1 inbound
#
 return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppox_cfg_0183.html">PPPoE Access Configuration Examples
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoe_cfg_0015.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppox_cfg_0286.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>