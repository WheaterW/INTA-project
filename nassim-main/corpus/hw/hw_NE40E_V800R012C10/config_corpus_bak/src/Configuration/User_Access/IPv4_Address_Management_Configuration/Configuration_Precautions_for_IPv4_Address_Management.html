
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Configuration Precautions for IPv4 Address Management">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0150.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0151.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0048.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Publisher" content="20240229">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPv4 Address Management">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPv4 Address Management">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000001221461187">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuration Precautions for IPv4 Address Management</title>
</head>
<body><a name="EN-US_TOPIC_0000001221461187"></a><a name="EN-US_TOPIC_0000001221461187"></a>

<div class="articleBoxWithoutHead">

	<h1 class="topicTitle-h1">Configuration Precautions for IPv4 Address Management</h1>

	<div>
		
		

		<div class="section"><h4 class="sectiontitle">Feature Requirements</h4>
			
		
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Feature requirements</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="60%" id="mcps1.3.1.2.2.4.1.1" liSelected="liSelected"><p>Feature Requirements</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="15%" id="mcps1.3.1.2.2.4.1.2" liSelected="liSelected"><p>Series</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.3.1.2.2.4.1.3" liSelected="liSelected"><p>Models</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In an upgrade scenario where RUI inter-chassis borrowing is configured, the device with a RUI-slave address pool deployed runs a new version, whereas the device with a local address pool deployed runs an old version. When a PPPoEv4 user requests to go online from the device with a RUI-slave address pool deployed, the device fails to identify the user for whom the NAK message is intended. If the NAK message indicates that there is no available address in the local address pool, a failure in identifying the receiver of the NAK message will reduce the login success rate. </p>
<p> If a DHCPv4 or PPPoEV4 user with the same MAC address as the preceding PPPoEv4 user requests to go online or renew the lease from a remote address pool, the two types of users may fail to go online or renew the lease.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2F/NE40E-M2H</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>If DHCPv4 and PPPoEv4 users with the same MAC address go online from a remote address pool at the same time, the DHCP server may incorrectly distribute response packets to users, causing user login failures.</p>
<p>- If a PPPoEv4 user requests to go online when a DHCPv4 user is waiting for a response from the DHCPv4 server, the server may send the response for the DHCPv4 user to the PPPoEv4 user. As a result, both users fail to go online.</p>
<p>- If a DHCPv4 user requests to go online when a PPPoEv4 user is waiting for a response from the DHCPv4 server, the server may send the response for the PPPoEv4 user to the DHCPv4 user. As a result, both users fail to go online.</p>
<p>-  If the first user has successfully gone online and the remote server can distinguish between the DHCPv4 user and the PPPoE user during address allocation, the second user can go online successfully.</p>
<p>You are advised to deploy a local address pool and a remote address pool or two local address pools for DHCP and PPPoE users with the same MAC address.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>If a client goes offline unexpectedly and one of the following occurs: a master/backup device switchover is performed in RUI or disaster recovery scenarios, the master trunk processing board fails, or an active/standby main control board switchover is performed, the BRAS doubles the user's original lease at most. The user on the BRAS goes offline after one more lease.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In one-to-many mapping between one MAC address and multiple sessions, the system reserves addresses based on user MAC addresses, access interfaces, and VLANs within the address reservation period. If the access interface or VLAN information of the user changes when the user goes online again, the user cannot use the reserved address for the last login.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In dual-device backup scenarios where DHCPv4 or DHCPv6 remote address pool lease proxy is deployed, real-time backup and batch backup are supported. During RUI lease backup (real-time or batch backup), if the RBS is disconnected, lease backup cannot be performed. If an active/standby switchover occurs, the lease of the new master device is trusted. In this case, the lease of the device may be different from that of the client, and the user is logged out when the lease expires.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In dual-device hot backup scenarios where a DHCPv4 or DHCPv6 local address pool is used, if the address pool's lease is changed when users are online, the lease is renewed on the master device but not on the backup device. If a short lease is changed to a long lease, users will be logged out when the lease expires after a master/backup device switchover.</p>
<p>Generally, the lease is modified in upgrade scenarios so that users can quickly detect link faults and go online again. The address pool lease is configured in the address pool view. Manually changing the lease configurations of all the address pools brings a huge workload. </p>
<p>To solve the preceding problems, run the dhcp upgrade command in the system view to modify the leases of all DHCPv4 user addresses. </p>
<p>To solve the preceding problems, run the dhcpv6 upgrade command in the system view to modify the leases of all DHCPv6 user addresses.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>Among physical interfaces, 40GE interfaces (interface 40GE x/x/x or interface 40GE x/x/x/x) do not support BRAS access.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>

	</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0150.html">IPv4 Address Management Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0151.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipv4_address_cfg_0048.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>