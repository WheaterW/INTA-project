
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Static User">
<meta name="abstract" content="A user requiring a fixed IP address can be configured as a static user.">
<meta name="description" content="A user requiring a fixed IP address can be configured as a static user.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0270.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0273.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00588052,w00437000,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="AAA (Access User)">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="z00588052,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373725">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Static User</title>
</head>
<body><a name="EN-US_TASK_0172373725"></a><a name="EN-US_TASK_0172373725"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Static User</h1>
<div class="taskbody"><p>A user requiring a fixed IP address can be configured as a static user.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0172373725__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring an access interface for a static user, configure the interface as a BAS interface.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172373725__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><ul><li><p>The IPv4 address assigned to a Layer 2 or Layer 3 static user must belong to a configured address pool. If the address pool is a local address pool, you must run the <a href="cmdqueryname=excluded-ip-address"><b><span class="cmdname">excluded-ip-address</span></b></a> command to disable a specified range of IP addresses. This prevents these IP addresses from being dynamically assigned to other users.</p>
</li><li><p>If an IPv6 address or IPv6 delegation prefix needs to be assigned from a local address pool to a Layer 2 or Layer 3 static user, you must configure a local address pool first and run the <a href="cmdqueryname=excluded-ipv6-address"><b><span class="cmdname">excluded-ipv6-address</span></b></a> command to disable the specified IPv6 address segment or prefix segment. If an IPv6 address or IPv6 delegation prefix needs to be assigned from a remote address pool, the local device does not need to be configured with a remote address pool, and the remote server must ensure that the address or address segment is not occupied by other users.</p>
</li><li>If the IPv6 address/delegation prefix of a Layer 2 static user is not assigned from the local or remote address pool, ensure that the IPv6 address/delegation prefix is not occupied by other users or services.</li></ul>
</div></div>
<p>Perform the following steps on the <span class="keyword">Router</span>:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373725__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>(Optional) Add an interface to the access interface list of static users.</span><p><ol type="a"><li>Run the <a href="cmdqueryname=static-user+interface-list"><b><span class="cmdname">static-user interface-list</span></b></a> <i><span class="varname">list-name</span></i> command to configure an access interface list for static users.</li><li>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to add an interface to the access interface list of static users.</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</li></ol>
</p></li><li><span>Run either of the following commands to create a static user:</span><p><ul><li>Run the <a href="cmdqueryname=static-user"><b><span class="cmdname">static-user</span></b></a> <span>[ <i><span class="varname">description</span></i> ]</span><span> { </span><i><span class="varname">start-ip-address</span></i> [ <i><span class="varname">end-ip-address</span></i> ] [ <strong><span>gateway</span></strong> <em>gateway-ip-address</em>]<span> | <i><span class="varname">start-ipv6-address</span></i> [ <i><span class="varname">end-ipv6-address</span></i> ] [ <strong><span>delegation-prefix</span></strong> <i><span class="varname">start-ipv6-prefix</span></i> [ <i><span class="varname">end-ipv6-prefix</span></i> ] <i><span class="varname">prefix-length</span></i> ] <strong><span>ipv6âgateway</span></strong> <i><span class="varname">ipv6-address</span></i></span>} <sup>*</sup> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">instance-name</span></i> ] [ <strong><span>interface</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } [ <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> [ <strong><span>qinq</span></strong> <i><span class="varname">qinq-vlan</span></i> ] ] | <strong><span>mac-address</span></strong> <i><span class="varname">mac-address</span></i> | <strong><span>detect</span></strong><span> | <strong><span>keep-online</span></strong></span> <span>| <strong><span>domain-name</span></strong> <i><span class="varname">domain-name</span></i></span> <span>| <strong><span>export</span></strong></span><span> | <strong><span>user-name</span></strong> <i><span class="varname">user-name</span></i> </span>] <sup>*</sup> command to create a static user. The static user can go online through a specified interface.<p>If <strong>detect</strong> is configured, the device initiates ARP/IPv4 packets or NS/NA/IPv6 packets for static users to trigger user login. If <strong>detect</strong> is not configured:</p>
<ul><li>Run the <a href="cmdqueryname=ip-trigger"><b><span class="cmdname">ip-trigger</span></b></a> or <a href="cmdqueryname=arp-trigger"><b><span class="cmdname">arp-trigger</span></b></a> command in the BAS interface view so that IPv4 static users are triggered to go online only after they send ARP/IPv4 packets.</li><li>Run the <a href="cmdqueryname=ipv6-trigger"><b><span class="cmdname">ipv6-trigger</span></b></a> or <a href="cmdqueryname=nd-trigger"><b><span class="cmdname">nd-trigger</span></b></a> command in the BAS interface view so that IPv6 users are triggered to go online only after they send NS/NA/IPv6 packets. </li></ul>
</li><li>Run the <a href="cmdqueryname=static-user"><b><span class="cmdname">static-user</span></b></a> [ <i><span class="varname">description</span></i> ] <i><span class="varname">start-ip-address</span></i> [ <i><span class="varname">end-ip-address</span></i> ] [ <strong><span>gateway</span></strong> <i><span class="varname">gateway-ip-address</span></i> ] [ <strong><span>vpn-instance</span></strong> <i><span class="varname">instance-name</span></i> ] [ <strong><span>domain-name</span></strong> <i><span class="varname">domain-name</span></i> | <strong><span>interface-list</span></strong> <i><span class="varname">list-name</span></i> | <strong><span>mac-address</span></strong> <i><span class="varname">mac-address</span></i> | <strong><span>export</span></strong> | <strong><span>keep-online</span></strong> | <strong><span>user-name</span></strong> <i><span class="varname">user-name</span></i> ] <sup>*</sup> command to create a static user. The user can go online through an interface of the specified interface list.</li></ul>
<p>When creating a static user, you can specify an IP address (including the VPN instance to which the IP address belongs), an interface through which the user is connected to the <span class="keyword">NE40E</span>, a domain to which the user belongs, and a MAC address for the user.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>IPv4 single-stack static users can go online through multiple interfaces bound to an interface list. However, the device cannot initiate ARP or IPv4 packets for the static users for login. When you configure IPv4 single-stack static users to go online through interfaces bound to an interface list using the <a href="cmdqueryname=static-user"><b><span class="cmdname">static-user</span></b></a> command, the <strong>detect</strong> and <strong>vlan</strong> keywords cannot be configured.</li><li>The interface through which IPv6 static users go online cannot be bound to an interface list.</li><li>If a client needs to ping the IPv6 gateway address of a Layer 2 IPv6 static user, the gateway address must be configured on any interface of the BRAS.</li><li>If the <strong><span>vpn-instance</span></strong> keyword is configured, the same VPN instance must be configured on the BAS interface so that users can go online through this interface.</li><li>If an IPv4/IPv6 address and <strong>keep-online</strong> are configured for a static user and this user goes online but fails to be detected multiple times, the device periodically broadcasts detection packets to the user client, allowing the user to go online again using the IPv4/IPv6 address after a MAC address change. In this case, ensure that the access interface and VLAN remain unchanged. To prevent the static user from going online again after changing the MAC address, you can specify the MAC address in the static user configuration. If a dual-stack static user changes the MAC address, the user is logged out from both stacks. After the user is allowed to change the MAC address, the user goes online again using the original IPv4 and IPv6 addresses. In this case, ensure that the access interface and VLAN remain unchanged.</li><li>If the MAC address of a static user is changed before the roaming process ends, the user cannot go online again using the IPv4 address.</li></ul>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=static-user+detect+interval"><b><span class="cmdname">static-user detect interval</span></b></a> <i><span class="varname">interval-value</span></i></span><p><p>The interval at which the <span class="keyword">Router</span> detects whether static users are online is configured.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=static-user+datacheck+trust+bas"><b><span class="cmdname">static-user datacheck trust bas</span></b></a></span><p><p>The static user detection behavior when users send traffic is configured to be the same as that configured on the BAS interface.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After the <a href="cmdqueryname=static-user+datacheck+trust+bas"><b><span class="cmdname">static-user datacheck trust bas</span></b></a> command is run, the <strong>user detect datacheck</strong> command configuration in the BAS interface view determines whether the device detects static users.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=layer3-subscriber"><b><span class="cmdname">layer3-subscriber</span></b></a> { <i><span class="varname">start-ip-address</span></i> [ <i><span class="varname">end-ip-address</span></i> ] | <i><span class="varname">start-ipv6-address</span></i> [ <i><span class="varname">end-ipv6-address</span></i> ] | <strong><span>delegation-prefix</span></strong> <i><span class="varname">start-ipv6-prefix</span></i> [ <i><span class="varname">end-ipv6-prefix</span></i> ] <i><span class="varname">prefix-length</span></i> } * [ <strong><span>vpn-instance</span></strong> <i><span class="varname">instance-name</span></i> ] <strong><span>domain-name</span></strong> <i><span class="varname">domain-name</span></i></span><p><p>The IP address segment to which the Layer 3 static users belong and the name of the associated authentication domain are specified.</p>
</p><p><p>The number of address segments that can be configured on a device is limited. When there are a large number of address segments on a network, you are advised to run the <a href="cmdqueryname=layer3-subscriber+ip-address+any"><b><span class="cmdname">layer3-subscriber ip-address any</span></b></a> <strong><span>domain-name</span></strong> <i><span class="varname">domain-name</span></i> command. If no address segment is matched, users go online based on the domain configured using this command. If this command is not run, IPv4 packets that do not match the address segment are discarded, and users fail to go online.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=layer3-subscriber+ipv4+vpn-instance+switch+enable"><b><span class="cmdname">layer3-subscriber ipv4 vpn-instance switch enable</span></b></a> [ <strong><span>export host-route</span></strong> ]</span><p><p>Dynamic VPN instance switching is enabled for Layer 3 static users.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This function takes effect only in IPoEv4 access scenarios.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0270.html">Configuring and Managing Users
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0273.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>