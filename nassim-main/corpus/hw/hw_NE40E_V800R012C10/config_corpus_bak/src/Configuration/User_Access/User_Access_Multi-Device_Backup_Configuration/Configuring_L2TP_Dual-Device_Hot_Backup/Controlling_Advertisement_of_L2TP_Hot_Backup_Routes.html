
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Controlling Advertisement of L2TP Hot Backup Routes">
<meta name="abstract" content="If L2TP hot backup is configured on LACs that work in load balancing mode, advertisement of L2TP hot backup routes can be controlled.">
<meta name="description" content="If L2TP hot backup is configured on LACs that work in load balancing mode, advertisement of L2TP hot backup routes can be controlled.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_l2tp_01.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_l2tp_04.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_l2tp_06.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,z00603461,w00800033,z00588052,rui_ne,c00549182,w00556928,l00593348,w00606909,w00447999,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="UP Multi-Device Backup">
<meta name="featurename" content="User Access Multi-Device Backup">
<meta name="featuretype" content="User Access">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="UP Multi-Device Backup">
<meta name="featurename" content="User Access Multi-Device Backup">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="UP Multi-Device Backup">
<meta name="featurename" content="User Access Multi-Device Backup">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="User Access Multi-Device Backup">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="l00593348">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374386">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Controlling Advertisement of L2TP Hot Backup Routes</title>
</head>
<body><a name="EN-US_TASK_0172374386"></a><a name="EN-US_TASK_0172374386"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Controlling Advertisement of L2TP Hot Backup Routes</h1>
<div class="taskbody"><p>If L2TP hot backup is configured on LACs that work in load balancing mode, advertisement of L2TP hot backup routes can be controlled.</p>
<div class="context"><a name="EN-US_TASK_0172374386__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">LACs use loopback interfaces to establish L2TP tunnels with an LNS. After loopback interfaces are configured for LACs that work in load balancing mode, route advertisement can be controlled as follows:<ul><li>Configure a routing policy, in which the route to the loopback IP address of the master LAC has a smaller cost than the route to the loopback IP address of the backup LAC. In this way, the route to the master LAC is preferentially selected. For information about how to configure a routing policy, see <a href="../vrp/dc_vrp_route-policy_cfg_0000.html">Routing Policy Configuration</a> in <i><cite><span class="keyword">HUAWEI NE40E-M2 series</span> <span class="keyword">Universal Service Router</span> Configuration Guide - IP Routing</cite></i>.</li><li>This control mode is complex to configure. If a fault occurs and then is rectified on the master LAC, the route to the master LAC cannot be automatically advertised, affecting service reliability. Configure a routing protocol to trust the costs of the imported routes to loopback IP addresses of the LACs.</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172374386__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=peer-backup+route-cost"><b><span class="cmdname">peer-backup route-cost</span></b></a> <strong><span>auto-advertising</span></strong></span></span><p><p>The LAC is enabled to control route preference by using the default cost of the route.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172374386__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><p>To allow the route to the loopback IP address of the master LAC to be preferentially selected, perform one of the following operations based on the used routing protocol:</p>
<ul><li><p>For IS-IS:</p>
<p>Run the <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> <strong><span>unr route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> command.</p>
</li><li><p>For OSPF:</p>
<p>Run the <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> <strong><span>unr route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> command.</p>
</li><li><p>For BGP:</p>
<p>Run the <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> <strong><span>unr route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> command.</p>
</li></ul>
<div class="p">To allow a routing protocol to trust the costs of imported routes to loopback IP addresses, perform one of the following operations based on the used routing protocol:<ul><li>If IS-IS is used to import direct routes, run the <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> <strong><span>direct inherit-cost</span></strong> command in the IS-IS view.</li><li>If OSPF is used to import direct routes, run the following commands in the OSPF view:<ol><li><a href="cmdqueryname=default"><b><span class="cmdname">default</span></b></a> <strong><span>cost inherit-metric</span></strong></li><li><a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> <strong><span>direct</span></strong></li></ol>
</li><li>If the <a href="cmdqueryname=network"><b><span class="cmdname">network</span></b></a> command is used to import routes into the OSPF routing table, run the <a href="cmdqueryname=ospf+cost"><b><span class="cmdname">ospf cost</span></b></a> <strong><span>inherit</span></strong> command in the view of the loopback interface view.</li><li>If BGP is used to import direct routes, run the <a href="cmdqueryname=import-route"><b><span class="cmdname">import-route</span></b></a> <strong><span>direct</span></strong> command in the BGP view.</li></ul>
</div>
<p>(Optional) Run the <a href="cmdqueryname=l2tp-tunnel+source"><b><span class="cmdname">l2tp-tunnel source</span></b></a> <strong><span>loopback</span></strong> <i><span class="varname">loopback-num</span></i> command to configure a source L2TP tunnel interface in the RBS view so that the source interface route bound to the RBS is updated based on the link status on the network side.</p>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_l2tp_01.html">Configuring L2TP Dual-Device Hot Backup
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_l2tp_04.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_l2tp_06.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>