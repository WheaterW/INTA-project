
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Web Authentication or Fast Authentication">
<meta name="abstract" content="Web authentication requires a user who wants to access the network to enter the username and password on the authentication page of a web authentication server for authentication. Fast authentication is an authentication mode in which a user accesses the authentication page of a web authentication server for authentication, without entering the username and password.">
<meta name="description" content="Web authentication requires a user who wants to access the network to enter the username and password on the authentication page of a web authentication server for authentication. Fast authentication is an authentication mode in which a user accesses the authentication page of a web authentication server for authentication, without entering the username and password.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipox_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipox_https_redirect.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,z00603461,w00800033,z00588052,ipoxne,c00549182,w00556928,l00593348,w00606909,w00447999,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPoE">
<meta name="featuretype" content="User Access">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPoE">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPoE">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="IPoE">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373966">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Web Authentication or Fast Authentication</title>
</head>
<body><a name="EN-US_TASK_0172373966"></a><a name="EN-US_TASK_0172373966"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Web Authentication or Fast Authentication</h1>
<div class="taskbody"><p>Web authentication requires a user who wants to access the network to enter the username and password on the authentication page of a web authentication server for authentication. Fast authentication is an authentication mode in which a user accesses the authentication page of a web authentication server for authentication, without entering the username and password.</p>
<div class="context"><a name="EN-US_TASK_0172373966__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When configuring web authentication or fast authentication, you need the following parameters:</p>
<ul><li><p>IP address and VPN instance of the server</p>
</li><li><p>Port number of the server</p>
</li><li><p>Shared key of the server</p>
</li><li><p>Whether the <span class="keyword">NE40E</span> reports its own IP address to the server</p>
</li><li><p>Portal protocol version, listening port number, and source interface sending portal packets</p>
</li><li><p>Pages to which users are redirected</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>For security purposes, use an eight-character or longer password that contains at least two types of the following: uppercase letters, lowercase letters, digits, and special characters.</li><li>You are advised to configure your password in ciphertext mode and change it periodically.</li></ul>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373966__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure a web authentication server.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=web-auth-server"><b><span class="cmdname">web-auth-server</span></b></a> {<em> i<i><span class="varname">p-address</span></i> </em>| <em><i><span class="varname">ipv6-address</span></i></em> } [ <strong>vpn-instance</strong><em> instance-name</em> ] [ <strong>port</strong><em> port-number</em> ] [ <strong>key</strong> <span>{ <strong><span>simple</span></strong> <i><span class="varname">simple-key</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">cipher-key</span></i> }</span> ] [ <strong>nas-ip-address</strong> ]<span>[ <strong><span>detect-time</span></strong> <i><span class="varname">detect-time</span></i> ]</span> [ <strong><span>user-query</span></strong> { <strong><span>exclude</span></strong> <strong><span>pre-domain</span></strong> | <strong><span>version1</span></strong> } ]</span></span><p><p>A web authentication server is configured.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For security purposes, you are advised to use CHAP authentication on the web server and encrypt user names and passwords during authentication.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li></ol>
</li><li><span>Specify an IP address to be used by the keyword to receive portal packets from the web authentication server.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <strong><a href="cmdqueryname=web-auth-server"><b><span class="cmdname">web-auth-server</span></b></a></strong> { <strong><strong><span>source-ip</span></strong></strong><em> <i><span class="varname">source-ip</span></i></em> | <strong><strong><span>source-ipv6</span></strong></strong> <em><i><span class="varname">source-ipv6</span></i></em> } [ <strong><strong><span>vpn-instance</span></strong></strong> <em><i><span class="varname">vpn-instance</span></i></em> ]</span><p><p>An IP address is specified. It is used by the <span class="keyword">NE40E</span> to receive portal packets from the web authentication server.</p>
</p><p><p>By default, the <span class="keyword">NE40E</span> is disabled from using any IP addresses to receive portal packets from the web authentication server, and therefore the <span class="keyword">NE40E</span> cannot receive portal packets from the server. To allow the device to use all IP addresses to receive portal packets from the web authentication server, run the <strong><a href="cmdqueryname=web-auth-server"><b><span class="cmdname">web-auth-server</span></b></a></strong> { <strong><strong><span>source-ip</span></strong></strong> | <strong><strong><span>source-ipv6</span></strong></strong> } <strong><strong><span>all</span></strong></strong> command.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure the portal protocol.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=web-auth-server+version"><b><span class="cmdname">web-auth-server version</span></b></a> <span>{ </span><strong><span>v2</span></strong> [ <strong><span>v1</span></strong> ]<span> | <strong><span>v3</span></strong> }</span></span></span><p><p>The version of the portal protocol is set.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=web-auth-server+listening-port"><b><span class="cmdname">web-auth-server listening-port</span></b></a> <em>port</em></span></span><p><p>The number of the port for receiving portal packets from the web authentication server is specified on the <span class="keyword">NE40E</span>.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=web-auth-server+source+from+packet-destination-ip"><b><span class="cmdname">web-auth-server source from packet-destination-ip</span></b></a></span><p><p>The source IP address in the packets sent to the web authentication server as the destination IP address of the received packets is configured.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p><a href="cmdqueryname=web-auth-server+source+from+packet-destination-ip"><b><span class="cmdname">web-auth-server source from packet-destination-ip</span></b></a> command and <a href="cmdqueryname=web-auth-server+source"><b><span class="cmdname">web-auth-server source</span></b></a> <strong>interface</strong> <span>{ </span><em>interface-type</em> <em>interface-number</em> <span>| <em>interface-name</em> }</span> command are mutually exclusive.</p>
</div></div>
<p></p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=web-auth-server+source"><b><span class="cmdname">web-auth-server source</span></b></a> <strong>interface</strong> <em>interface-type</em> <em>interface-number</em></span></span><p><p>The source interface for sending packets to the web authentication server is configured on the <span class="keyword">NE40E</span>.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=web-auth-server+packet"><b><span class="cmdname">web-auth-server packet</span></b></a><strong> dscp </strong><em>dscp-value</em></span><p><p>The DSCP value for Portal packets sent by the device to a Portal server is configured.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=web-auth-server+reply-message"><b><span class="cmdname">web-auth-server reply-message</span></b></a></span></span><p><p>The <span class="keyword">NE40E</span> is configured to transparently transmit response packets from the RADIUS server to the web authentication server.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=web+response-error-id+enable"><b><span class="cmdname">web response-error-id enable</span></b></a></span></span><p><p>The <span class="keyword">NE40E</span> is enabled to send an Access-Reject packet carrying an error code to the portal server.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=whitelist+session-car+web-auth-server+disable"><b><span class="cmdname">whitelist session-car web-auth-server disable</span></b></a></span><p><p>The whitelist session CAR function is disabled.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Disabling this function is not usually recommended.</p>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=whitelist+session-car+web-auth-server"><b><span class="cmdname">whitelist session-car web-auth-server</span></b></a> { <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i> | <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i> | <strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i> | <strong><span>pbs</span></strong> <i><span class="varname">pbs-value</span></i> } *</span><p><p>The bandwidth parameters of whitelist session CAR are configured.</p>
</p></li></ol>
</li><li><span>(Optional) Configure the Portal Server.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></span></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=domain"><b><span class="cmdname">domain</span></b></a> <em>domain-name</em></span></span><p><p>The view of the domain is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Configure the Portal Server.</span><p><ul><li>Run <strong>portal-server </strong>{ <em>ip-address</em> | <em>ipv6-address</em> | <strong>redirect-limit</strong> <em>limit-value</em> | <strong>url</strong> <em>url-string</em> | <strong>url-parameter</strong> } command to set the mandatory portal service parameters for the domain, including the port server's IP address, number of mandatory redirects, URL for mandatory redirect, and URL parameters carried in the redirect URL.</li><li>(Optional) Run <strong><a href="cmdqueryname=portal-server+redirect-key+user-mac-address"><b><span class="cmdname">portal-server redirect-key user-mac-address</span></b></a> </strong><em>user-mac-address</em><i><span class="varname"> </span></i>[ <strong>simple</strong> [ <strong>type1</strong> ] | <strong>cipher</strong> { <strong>aes128</strong> { <strong>cbc</strong> | <strong>gcm</strong> } | <strong>des</strong> } ] command to configure the user MAC address carried in the redirect packets of mandatory portal service.<p>(Optional) Run <strong>portal-server url-parameter shared-key-cipher </strong>[ <em>shared-key-cipher</em> ] command to configure the key required for carrying the encrypted MAC address in the redirect packet.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the <a href="cmdqueryname=portal-server+redirect-key+user-mac-address"><b><span class="cmdname">portal-server redirect-key user-mac-address</span></b></a> <i><span class="varname">user-mac-address</span></i> [ <strong><span>cipher</span></strong> <strong><span>aes128</span></strong> { <strong><span>cbc</span></strong> | <strong><span>gcm</span></strong> } | <strong><span>des</span></strong> ] command, but not the <a href="cmdqueryname=portal-server+url-parameter+shared-key-cipher"><b><span class="cmdname">portal-server url-parameter shared-key-cipher</span></b></a> [<i><span class="varname"> shared-key-cipher</span></i> ], the MAC address is not carried in the redirect packet of the portal service.</p>
</div></div>
</li><li>(Optional) Run the <strong>portal-server user-first-url-key </strong>{ <em>user-number</em> | <strong>default-name</strong> } command to enable the function of redirecting to the homepage URL for the portal server.</li><li>(Optional) Run the <strong>portal-server identical-url</strong> command to enable the function of using the unified URL for the portal server.</li><li>(Optional) Run the <strong>portal-redirect</strong> command to configure the captive portal timeout period.</li></ul>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>The AAA view is displayed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure mandatory web authentication.</span><p><p>Mandatory web authentication enables the <span class="keyword">NE40E</span> to redirect the access request of a user to a specified web server when the user accesses an unauthorized address before being authenticated, facilitating user authentication.</p>
</p><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></span></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=access-user+logout+stop-accounting+before+authentication"><b><span class="cmdname">access-user logout stop-accounting before authentication</span></b></a></span><p><p>The <span class="keyword">NE40E</span> is enabled to send an Accounting Stop packet and then authenticate a user in the user's switchover process from the authentication domain to the pre-authentication domain.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=domain"><b><span class="cmdname">domain</span></b></a> <em>domain-name</em></span></span><p><p>The view of the default pre-authentication domain is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run any of the following commands:</span><p><ul><li>To configure a redirection URL for mandatory web authentication, run the <a href="cmdqueryname=web-server"><b><span class="cmdname">web-server</span></b></a> <strong><span>url</span></strong> <em>url-string</em> command.</li><li>To configure specified keywords carried in the URL of a web page pushed by the portal server, run the <span><a href="cmdqueryname=web-server"><b><span class="cmdname">web-server</span></b></a> <strong><span>url-parameter</span></strong></span> command.</li><li>To configure an IPv4 address or both IPv4 and IPv6 addresses for the web server, run the <a href="cmdqueryname=web-server"><b><span class="cmdname">web-server</span></b></a> <i><span class="varname">ip-address</span></i> <span>[ <i><span class="varname">ipv6âaddress</span></i> ] [ <strong><span>slave</span></strong> ]</span> command.<p><i><span class="varname">ipv6âaddress</span></i> must be specified for dual-stack web users.</p>
</li><li>To configure the HTTP mode of the web server, run the <a href="cmdqueryname=web-server"><b><span class="cmdname">web-server</span></b></a> <strong><span>mode</span></strong> { <strong><span>get</span></strong> | <strong><span>post</span></strong> } command.</li><li>To configure the keyword of a customized portal attribute, run the <a href="cmdqueryname=web-serve"><b><span class="cmdname">web-serve</span></b></a><span><a href="cmdqueryname=r"><b><span class="cmdname">r</span></b></a> <strong><span>redirect-key</span></strong> { <strong><span>mscg-ip</span></strong> <i><span class="varname">mscg-ip-key</span></i> | <strong><span>mscg-name</span></strong> <i><span class="varname">mscg-name-key</span></i> | <strong><span>user-ip-address</span></strong> <i><span class="varname">user-ip-key</span></i> | <strong><span>user-location</span></strong> <i><span class="varname"> user-location-key</span></i> </span><span>| <strong><span>nas-logic-sysname</span></strong> <i><span class="varname">nas-logic-sysname-key </span></i></span><span> | <strong><span>user-mac-address</span></strong> { <i><span class="varname">user-mac-key</span></i> [ <strong><span>simple</span></strong> <span>[ <strong><span>type1</span></strong> ] | <strong><span>cipher</span></strong> </span></span><span>{</span><span><span> <strong><span>aes128</span></strong> [ <strong><span>cbc</span></strong> </span></span><span>| <strong><span>gcm</span></strong> </span><span><span>] </span></span><span>| <strong><span>des</span></strong> } </span><span> <span><span>]</span></span> }</span>, <span><span><a href="cmdqueryname=web-server"><b><span class="cmdname">web-server</span></b></a> <strong><span>redirect-key</span></strong> <strong><span>mscg-ipv6 </span></strong><i><span class="varname">mscg-ipv6-key</span></i>,</span><span><a href="cmdqueryname=web-server+redirect-key"><b><span class="cmdname">web-server redirect-key</span></b></a> <strong><span>ap-mac-address</span></strong> <i><span class="varname">ap-mac-key</span></i> [ <strong><span>simple</span></strong> [ <strong><span>type1</span></strong> ] | <strong><span>cipher</span></strong> { <strong><span>aes128</span></strong> [ <strong><span>cbc</span></strong> | <strong><span>gcm</span></strong> ] | <strong><span>des</span></strong> } ]</span>, <a href="cmdqueryname=web-server"><b><span class="cmdname">web-server</span></b></a> <strong><span>redirect-key</span></strong> <strong><span>ssid</span></strong> <i><span class="varname">ssid-key</span></i>, or<a href="cmdqueryname=web-server"><b><span class="cmdname"> web-server</span></b></a> <strong><span>redirect-key</span></strong> <strong><span>agent-remote-id</span></strong> <i><span class="varname">agent-remote-id-key</span></i></span> command.</li><li>(Optional) To configure the keyword for generating ciphertext user MAC address or AP MAC address to be displayed, run the <a href="cmdqueryname=web-server"><b><span class="cmdname">web-server</span></b></a> <strong><span>url-parameter</span></strong> { <strong><span>shared-key</span></strong> <span><span>[</span></span> <i><span class="varname">shared-key</span></i> <span><span>]</span></span> | <strong><span>shared-key-cipher</span></strong><span><span> [</span></span> <i><span class="varname">shared-key-cipher</span></i> <span><span>]</span></span> } command.<p>This step is mandatory only if the <a href="cmdqueryname=web-server"><b><span class="cmdname">web-server</span></b></a> <strong><span>redirect-key</span></strong> command with <strong><span>cipher</span></strong> <strong><span>aes128</span></strong> configured has been run.</p>
</li><li>To configure the keyword of a user IP address, run the <a href="cmdqueryname=web-server"><b><span class="cmdname">web-server</span></b></a> <strong><span>user-first-url-key</span></strong> { <i><span class="varname">key-name</span></i> | <strong><span>default-name</span></strong> } command.</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>A redirection URL must be configured in the pre-authentication domain for a dual-stack web user. Otherwise, mandatory web authentication may fail.</p>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=web-server"><b><span class="cmdname">web-server</span></b></a> { { <i><span class="varname">ip-address</span></i> | <i><span class="varname">ipv6-address</span></i> } * | <strong><span>url</span></strong> <i><span class="varname">url</span></i> } [ <strong><span>bind web-auth-server</span></strong> <span>{ </span> <i><span class="varname">auth-server-ip</span></i> <span>| <i><span class="varname">auth-server-ipv6</span></i> }</span>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance</span></i> ] ]</span><p><p>The web authentication server bound to the mandatory web server is configured.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=web-server"><b><span class="cmdname">web-server</span></b></a> { { <i><span class="varname">ip-address</span></i> | <i><span class="varname">ipv6-address</span></i> } * | <strong><span>url</span></strong> <i><span class="varname">url</span></i> } [ <strong><span>bind web-auth-server</span></strong> <span>{ </span> <i><span class="varname">auth-server-ip</span></i> <span>| <i><span class="varname">auth-server-ipv6</span></i> }</span>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance</span></i> ] ] <strong><span>slave</span></strong></span></span><p><p>The web authentication server bound to the backup mandatory web server is configured.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=mac-authentication+enable"><b><span class="cmdname">mac-authentication enable</span></b></a></span></span><p><p>MAC address authentication is enabled.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>MAC address authentication is used to simplify web authentication. If MAC address authentication is enabled, a web authentication user needs to enter the username and password only at the first authentication during which the RADIUS server records the user's MAC address. When web authentication needs to be performed for the user again, the RADIUS server authenticates the user based on the user's MAC address without the user entering the username and password again.</p>
<p>This command is usually used together with the <a href="cmdqueryname=authening+authen-fail"><b><span class="cmdname">authening authen-fail</span></b></a> <strong><span>online</span></strong> <strong><span>authen-domain</span></strong> <i><span class="varname">domain-name</span></i> command on the live network. After these two commands are run, if a user fails MAC authentication, the user will enter a redirection domain in which the user can enter the username and password for web authentication. After web authentication succeeds, the user enters the authentication domain and can access network resources.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure the function to allow web users to directly log in to the post-authentication domain.</span><ol type="a"><li class="substepexpand"><span>Run the <a href="cmdqueryname=access+post-domain+auto-login-type"><b><span class="cmdname">access post-domain auto-login-type</span></b></a> { <strong>web</strong><strong> auth-server</strong> { <em>ipaddr</em> | <em>ipv6addr</em><i><span class="varname"> </span></i>} [ <strong>vpn-instance</strong> <i><span class="varname">vpnname</span></i> ] | <strong>coa</strong> } command to configure this function.</span><p><p>In scenarios where web authentication is performed in the post-authentication domain, if users do not go offline proactively or users' quotation is exhausted, the username and password do not need to be entered when users go online again. They can directly log in to the post-authentication for network access.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the AAA view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li></ol>
</li><li><span>(Optional) Configure web performance optimization.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=http-url+deny"><b><span class="cmdname">http-url deny</span></b></a> <i><span class="varname">urlstring</span></i></span></span><p><p>A URL blacklist for mandatory web authentication or captive portal is configured.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=slot"><b><span class="cmdname">slot</span></b></a> <i><span class="varname">slot-id</span></i></span></span><p><p>The slot view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=http-hostcar"><b><span class="cmdname">http-hostcar</span></b></a> <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i> [ <strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i> ] [ <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i> <strong><span>pbs</span></strong> <i><span class="varname">pbs-value</span></i> ]</span></span><p><p>A bandwidth limit is configured for HTTP packets sent by users for authentication.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></span></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=domain"><b><span class="cmdname">domain</span></b></a> <em>domain-name</em></span></span><p><p>The domain view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>The AAA view is displayed.</p>
</p></li></ol>
</li><li><span>(Optional) Run <a href="cmdqueryname=access-user+login+session-limit+reply"><b><span class="cmdname">access-user login session-limit reply</span></b></a> <i><span class="varname">error-code</span></i> <i><span class="varname">message</span></i>.</span><p><p>The error code and message returned by the device to the portal server if web users switch from the pre-authentication domain to the authentication domain and the number of users using the same account has reached the upper limit is configured.</p>
</p></li><li><span>(Optional) Configure the device not to assign IPv6 addresses to users from a pre-authentication domain.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></span></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=domain"><b><span class="cmdname">domain</span></b></a> <em>domain-name</em></span></span><p><p>The domain (pre-authentication domain) view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv6-address+authorization+disable"><b><span class="cmdname">ipv6-address authorization disable</span></b></a></span><p><p>The device is configured not to assign IPv6 addresses from a pre-authentication domain.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>The AAA view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=dhcpv6+reply-status-code+unspecfail+disable"><b><span class="cmdname">dhcpv6 reply-status-code unspecfail disable</span></b></a></span><p><p>The device is configured not to reply with an Advertise packet when the DHCPv4 stack user is online and the DHCPv6 stack user is online but is not enabled to obtain an assigned IPv6 address.</p>
</p></li></ol>
</li><li><span>Configure pre-authentication and authentication domains and an authentication method on a BAS interface.</span><p><p>Web authentication users are considered unauthorized users before they are authenticated. Therefore, they cannot obtain IP addresses or access the web authentication server.</p>
<p>This means web authentication cannot be performed on web authentication users. To resolve this problem, all unauthenticated web authentication users are assigned to a default domain configured on an interface. This default domain is called the default pre-authentication domain. Unauthenticated web authentication users can obtain IP addresses from the default pre-authentication domain and access the web authentication server through the authorities granted to the default pre-authentication domain for web authentication.</p>
</p><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <em>interface-type interface-number</em></span></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bas"><b><span class="cmdname">bas</span></b></a></span></span><p><p>The BAS interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=access-type"><b><span class="cmdname">access-type</span></b></a> <strong>layer2-subscriber</strong></span></span><p><p>The use access type is set to Layer 2 subscriber access.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=default-domain"><b><span class="cmdname">default-domain</span></b></a> <strong>pre-authentication</strong> <i><span class="varname">domain-name</span></i></span></span><p><p>The default pre-authentication domain is specified.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=default-domain"><b><span class="cmdname">default-domain</span></b></a> <strong>authentication</strong> [ <strong>force</strong> | <strong>replace</strong> ] <span><i><span class="varname">domain-name</span></i></span></span></span><p><p>The default authentication domain is specified.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=authentication-method"><b><span class="cmdname">authentication-method</span></b></a> { <strong>web</strong> | <strong>fast</strong> }<span> or <a href="cmdqueryname=authentication-method-ipv6"><b><span class="cmdname">authentication-method-ipv6</span></b></a> { <strong>web</strong> | <strong>fast</strong> }</span></span><p><p>Web authentication or fast authentication is configured.</p>
</p></li></ol>
</li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipox_cfg_0003.html">Configuring an Authentication Mode for IPoE Access
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ipox_https_redirect.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>