
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring Flexible Access to VPNs">
<meta name="abstract" content="Service priorities can be identified based on 802.1p values of service packets and then transmitted to corresponding VPNs.">
<meta name="description" content="Service priorities can be identified based on 802.1p values of service packets and then transmitted to corresponding VPNs.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoe_cfg_0004.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppox_cfg_0285.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_bras_0019.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00588052,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="dcAudienceJob" content="Configuration">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="PPPoE Access">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374105">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring Flexible Access to VPNs</title>
</head>
<body><a name="EN-US_TASK_0172374105"></a><a name="EN-US_TASK_0172374105"></a>

<div class="articleBoxWithoutHead">





<h1 class="topicTitle-h1">(Optional) Configuring Flexible Access to VPNs</h1>
<div class="taskbody"><p>Service priorities can be identified based on 802.1p values of service packets and then transmitted to corresponding VPNs.</p>
<div class="context"><a name="EN-US_TASK_0172374105__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0172374105__en-us_task_0172373978_context329651241214411"><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p2088081874214411">On the network shown in<a href="#EN-US_TASK_0172374105__en-us_task_0172373978_fig_dc_ne_ipox_cfg_002201">Figure 1</a>, service packets carry 802.1p values to identify their priorities. The BRAS can identify service priorities based on the 802.1p values of received Layer 2 service packets and transmit the service packets to corresponding VPNs. To allow this, enable a BAS interface to transmit packets to different VPNs based on 802.1p priorities of the packets and bind VPN instances to different 802.1p priorities.</p>
<div class="fignone" id="EN-US_TASK_0172374105__en-us_task_0172373978_fig_dc_ne_ipox_cfg_002201"><a name="EN-US_TASK_0172374105__en-us_task_0172373978_fig_dc_ne_ipox_cfg_002201"></a><a name="en-us_task_0172373978_fig_dc_ne_ipox_cfg_002201"></a><span class="figcap"><b>Figure 1 </b>Flexible access to VPNs</span><br><span><img class="vsd" id="EN-US_TASK_0172374105__en-us_task_0172373978_image138021302211" src="figure/en-us_image_0258250025.png"></span></div>
<div class="p" id="EN-US_TASK_0172374105__en-us_task_0172373978_p1391395368214411">Perform the following steps on the BRAS:<ol id="EN-US_TASK_0172374105__en-us_task_0172373978_ol299287989214411"><li id="EN-US_TASK_0172374105__en-us_task_0172373978_li195155301214411"><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p767614938214411"><a name="EN-US_TASK_0172374105__en-us_task_0172373978_li195155301214411"></a><a name="en-us_task_0172373978_li195155301214411"></a><a href="#EN-US_TASK_0172374105__en-us_task_0172373978_step_1">Create a VPN instance. (Both user and service VPN instances must be configured.)</a></p>
</li><li id="EN-US_TASK_0172374105__en-us_task_0172373978_li1245777480214411"><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1964031757214411"><a name="EN-US_TASK_0172374105__en-us_task_0172373978_li1245777480214411"></a><a name="en-us_task_0172373978_li1245777480214411"></a><a href="#EN-US_TASK_0172374105__en-us_task_0172373978_step_2">Create a local address pool.</a></p>
</li><li id="EN-US_TASK_0172374105__en-us_task_0172373978_li966139778214411"><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p787393879214411"><a name="EN-US_TASK_0172374105__en-us_task_0172373978_li966139778214411"></a><a name="en-us_task_0172373978_li966139778214411"></a><a href="#EN-US_TASK_0172374105__en-us_task_0172373978_step_3">Configure a user domain.</a></p>
</li><li id="EN-US_TASK_0172374105__en-us_task_0172373978_li1028787400214411"><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1438989803214411"><a name="EN-US_TASK_0172374105__en-us_task_0172373978_li1028787400214411"></a><a name="en-us_task_0172373978_li1028787400214411"></a><a href="#EN-US_TASK_0172374105__en-us_task_0172373978_step_4">Configure a user access interface.</a></p>
</li><li id="EN-US_TASK_0172374105__en-us_task_0172373978_li2109791660214411"><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p18450356214411"><a name="EN-US_TASK_0172374105__en-us_task_0172373978_li2109791660214411"></a><a name="en-us_task_0172373978_li2109791660214411"></a><a href="#EN-US_TASK_0172374105__en-us_task_0172373978_step_5">Configure a network-side ACL and define redirection for the ACL.</a></p>
</li><li id="EN-US_TASK_0172374105__en-us_task_0172373978_li458347322214411"><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p419599065214411"><a name="EN-US_TASK_0172374105__en-us_task_0172373978_li458347322214411"></a><a name="en-us_task_0172373978_li458347322214411"></a><a href="#EN-US_TASK_0172374105__en-us_task_0172373978_step_6">Configure a network-side interface.</a></p>
</li></ol>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172374105__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172374105__en-us_task_0172373978_steps1461962252214411"><li id="EN-US_TASK_0172374105__en-us_task_0172373978_step_1"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd986632070214411">Create a VPN instance. (Both user and service VPN instances must be configured.)</span><ol type="a" id="EN-US_TASK_0172374105__en-us_task_0172373978_substeps301297489214411"><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep593027526214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd542023755214411">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname73308117214411">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1144844267214411">The system view is displayed</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep196182508214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd852013811214411">Run <span><a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname376396213214411">ip vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1711233842214411">vpn-instance-name</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p827148367214411">A VPN instance is created, and the VPN instance view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1384731057214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd894592460214411">Run <span><a href="cmdqueryname=ipv4-family"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname2086382099214411">ipv4-family</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p2038118814214411">The IPv4 address family is enabled for the VPN instance, and the VPN instance IPv4 address family view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1968735698214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd112843310214411">Run <span><a href="cmdqueryname=route-distinguisher"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1310188395214411">route-distinguisher</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname730506207214411">route-distinguisher</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p454082310214411">An RD is configured for the VPN instance IPv4 address family.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep828079563214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1839182781214411">Run <span><a href="cmdqueryname=vpn-target"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1746037854214411">vpn-target</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname507653077214411">vpn-target</span></i> &amp;&lt;1-8&gt; [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname826643592214411">both</span></strong> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1446587057214411">export-extcommunity</span></strong> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname617723448214411">import-extcommunity</span></strong> ]</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1880507982214411">VPN targets are configured for the VPN instance IPv4 address family.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep58839758214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1077335086214411">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1651509050214411">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1407182479214411">Return to the VPN instance view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1360895619214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1871827983214411">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname404573417214411">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p171306189214411">Return to the system view.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172374105__en-us_task_0172373978_step_2"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1968536465214411">Create a local address pool.</span><ol type="a" id="EN-US_TASK_0172374105__en-us_task_0172373978_substeps1909105982214411"><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep436298552214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1360592606214411">Run <span><a href="cmdqueryname=ip+pool"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname929452180214411">ip pool</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname2005268729214411">pool-name</span></i> [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname136729789214411">bas</span></strong> { <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname581976465214411">local</span></strong> [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname743569387214411">rui-slave</span></strong> ] | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname512171309214411">remote</span></strong> [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname170151437214411">rui-slave</span></strong> ] | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname808168744214411">dynamic</span></strong> } ]</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p222785557214411">An address pool is created.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep233408131214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1585318295214411">Run <span><a href="cmdqueryname=vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname161395708214411">vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname2027730299214411">vpn-instance-name</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p303923199214411">A VPN instance is specified for the address pool.</p>
</p><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p678490437214411">The VPN instance specified for the address pool must be the user VPN instance configured in step 1.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep942420530214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1569951085214411">Run <span><a href="cmdqueryname=gateway"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname884477640214411">gateway</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname314611956214411">ip-address</span></i> { <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname815591992214411">mask</span></i> | <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1921673513214411">mask-length</span></i> }</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1565833954214411">The gateway IP address and subnet mask are configured for the address pool.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1229039729214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1973008457214411">Run <span><a href="cmdqueryname=section"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1814645931214411">section</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname779882382214411">section-number</span></i> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1128159020214411">start-ip-address</span></i> [ <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1705816987214411">end-ip-address</span></i> ]</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1491943169214411">An address segment is configured for the address pool.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep610183845214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1125468490214411">Run <span><a href="cmdqueryname=import+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname14619063214411">import vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1735820672214411">vpn-instance-name</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p447214316214411">A VPN instance is imported to the address pool.</p>
<p id="EN-US_TASK_0172374105__en-us_task_0172373978_p2045690777214411">The VPN instance imported to the address pool must be the service VPN instance created in step 1.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1601235698214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1850795729214411">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname275385576214411">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1636844398214411">Return to the system view.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172374105__en-us_task_0172373978_step_3"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1088219260214411">Configure a user domain.</span><ol type="a" id="EN-US_TASK_0172374105__en-us_task_0172373978_substeps1226515172214411"><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1823031304214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1537934579214411">Run <span><a href="cmdqueryname=aaa"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname172180476214411">aaa</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p68810302214411">The AAA view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep193257178214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1078116382214411">Run <span><a href="cmdqueryname=domain"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname396969914214411">domain</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1652928109214411">domain-name</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p542943057214411">A domain is created, and the domain view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1546125618214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1181133026214411">Run <span><a href="cmdqueryname=authentication-scheme"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1430062098214411">authentication-scheme</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname683318950214411">authentication-scheme-name</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1209662178214411">An authentication scheme is configured for the domain.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1122075225214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1664402268214411">Run <span><a href="cmdqueryname=accounting-scheme"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname2092259047214411">accounting-scheme</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname695587494214411">accounting-scheme-name</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1905680187214411">An accounting scheme is configured for the domain.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep368193603214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1329498614214411">Run <span><a href="cmdqueryname=ip-pool"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1265555306214411">ip-pool</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1601515710214411">pool-name</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1436616203214411">An address pool is bound to the domain.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep62953057214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1490074675214411">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1928514237214411">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p464501023214411">Return to the AAA view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1025481749214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1715488268214411">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname996302509214411">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p404829703214411">Return to the system view.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172374105__en-us_task_0172373978_step_4"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd21172906214411">Configure a user access interface.</span><ol type="a" id="EN-US_TASK_0172374105__en-us_task_0172373978_substeps987703218214411"><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1369251770214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd579737138214411">Run <span><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname2033487572214411">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname44358052214411">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname372382336214411">interface-number</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1143239159214411">A sub-interface is created.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep204876845214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd948847774214411">Run <span><a href="cmdqueryname=user-vlan"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname2881742114818">user-vlan</span></b></a> { <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname3882174215481">start-vlan-id</span></i> [ <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname12882164212483">end-vlan-id</span></i> <span>]</span> | <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname288213422483">cevlan</span></i> <span>}</span> <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname148823420487">qinq</span></strong> <span>{</span><i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1888274264811"> start-pe-vlan</span></i> [ <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname17882194224810">end-pe-vlan</span></i> ] | <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname488234211482">pevlan</span></i> }</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1870150906214411">A user-VLAN sub-interface is configured.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1618468675214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1575147823214411">Run <a href="cmdqueryname=802.1p"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1575391219214107">802.1p</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1322251104214107">8021p-priority</span></i> <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname989256355214107">binding</span></strong> <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1832360113214107">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1204077958214107">vpn-instance-name</span></i></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1268520751214411">A VPN instance is bound to an 802.1p priority.</p>
</p><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1432812193016">The VPN instance bound to the 802.1p priority must be the service VPN instance created in step 1.</p>
</p><p><div class="note" id="EN-US_TASK_0172374105__en-us_task_0172373978_note1913207607214411"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1007604318214411">When users are online on a BRAS interface, the function of transmitting service packets to different VPNs based on 802.1p priorities cannot be modified or deleted.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep810325353214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1944402244214411">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname116749264214411">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p720621657214411">Return to the sub-interface view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep107255260214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd900374987214411">Run <span><a href="cmdqueryname=bas"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname318866647214411">bas</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1530163563214411">The sub-interface is configured as a BAS interface, and the BAS interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep73884614214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd533159532214411">Run <span><a href="cmdqueryname=access-type"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname2057747023214411">access-type</span></b></a> <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname665259185214411">layer2-subscriber</span></strong> [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1771953645214411">default-domain</span></strong> { <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1814384297214411">authentication</span></strong> [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname687825824214411">force</span></strong> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname767906261214411">replace</span></strong> ] <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1628841174214411">dname</span></i> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname182119882214411">pre-authentication</span></strong> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname250678842214411">predname</span></i> } <sup id="EN-US_TASK_0172374105__en-us_task_0172373978_sup379863717214411">*</sup> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname588384579214411">bas-interface-name</span></strong> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname837269474214411">bname</span></i> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1429871912214411">accounting-copy</span></strong> <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1641511154214411">radius-server</span></strong> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname869539334214411">rd-name</span></i> ] <sup id="EN-US_TASK_0172374105__en-us_task_0172373978_sup1349316826214411">*</sup></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p539941528214411">The access type of the BAS interface is configured as Layer 2 subscriber access.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep103398733214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd508235108214411">Run <span><a href="cmdqueryname=authentication-method"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1140673540214411">authentication-method</span></b></a> { <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1526966361214411">bind</span></strong> | { <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname395958230214411">fast</span></strong> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname2050685975214411"> web</span></strong> } }</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1504593003214411">An authentication method is configured for the BAS interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep680856961214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1370072311214411">Run <span><a href="cmdqueryname=802.1p-to-vpn"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname2112369640214411">802.1p-to-vpn</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p122597862214411">The BAS interface is enabled to transmit packets to different VPNs based on the 802.1p priorities of the packets.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1245181521214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd537683432214411">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1879673622214411">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1510384838214411">Return to the sub-interface view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep437823769214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1225110961214411">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname882769939214411">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p2105404306214411">Return to the system view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep9365146193415"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd736574619343">Run commit</span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1394311152357">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172374105__en-us_task_0172373978_step_5"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1185618225214411">Configure a network-side ACL and define redirection for the ACL.</span><ol type="a" id="EN-US_TASK_0172374105__en-us_task_0172373978_substeps1935802745214411"><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep770451988214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1807654553214411">Run <span><a href="cmdqueryname=acl"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname2011942569214411">acl</span></b></a> { <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname187148626214411">name</span></strong> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1819107139214411">basic-acl-name</span></i> { <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1871274502214411">basic</span></strong> | [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname2145465762214411">basic</span></strong> ] <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname761116470214411">number</span></strong> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1164572525214411">basic-acl-number</span></i> } | [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname2087586866214411">number</span></strong> ] <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1060963556214411">basic-acl-number</span></i> } [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1220990865214411">match-order</span></strong> { <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname2030482980214411">config</span></strong> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname675235878214411">auto</span></strong> } ]</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p695012749214411">A basic ACL is created.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep37214059214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd538948336214411">Run <span><a href="cmdqueryname=rule"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname149802071214411">rule</span></b></a> [ <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname265081609214411">rule-id</span></i> ] { <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1237858579214411">deny</span></strong> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname895889357214411">permit</span></strong> } [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname530613459214411">fragment-type</span></strong> { <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1393107116214411">fragment</span></strong> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname509755771214411">non-fragment</span></strong> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1261072352214411">non-subseq</span></strong> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1812923636214411">fragment-subseq</span></strong> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname203519472214411">fragment-spe-first</span></strong> } | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname458537244214411">source</span></strong> { <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname2128247705214411">source-ip-address</span></i> { <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1819702541214411">source-wildcard</span></i> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1699573665214411">0</span></strong> | <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1581661363214411">src-netmask</span></i> } | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1703062778214411">any</span></strong> } | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname191251341214411">time-range</span></strong> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname293211336214411">time-name</span></i> | [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname20435766214411">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1186983587214411">vpn-instance-name</span></i> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1493255446214411">vpn-instance-any</span></strong> ] ] <sup id="EN-US_TASK_0172374105__en-us_task_0172373978_sup651351339214411">*</sup></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1204449143214411">A rule is created for the ACL.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep713040668214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1115756816214411">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname955596732214411">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p423949807214411">Return to the system view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1953073808214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1023946661214411">Run <span><a href="cmdqueryname=vpn-group"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1493431991214411">vpn-group</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1580386823214411">vpn-group-name</span></i> [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1257781061214411">vpn-instance</span></strong> { <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1493450693214411">vpn-name</span></i> } &amp;&lt;1-8&gt; ]</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p397297146214411">A VPN group is created, and a VPN instance is added to the VPN group.</p>
<p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1761865565214411">The VPN instance added to the VPN group must be the user VPN instance created in step 1.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1757999939214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1624959347214411">Run <span><a href="cmdqueryname=traffic+behavior"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname2026721621214411">traffic behavior</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname934896312214411">behavior-name</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1790026844214411">A traffic behavior is configured, and the traffic behavior view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep315928296214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1227295488214411">Run <span><a href="cmdqueryname=redirect+vpn-group"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1371706330214411">redirect vpn-group</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname937626949214411">vpn-group-name</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1833588661214411">Packet redirection to a specified VPN group is configured.</p>
<p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1787414777214411">The VPN group to which packets are redirected must be the one created in step d.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep586204385214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1829609906214411">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1104567784214411">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1825343999214411">Return to the system view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep2033723887214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1447643157214411">Run <span><a href="cmdqueryname=traffic+classifier"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname146930983214411">traffic classifier</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1610930455214411">classifier-name</span></i> [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1039524840214411">operator</span></strong> { <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1412916173214411">and</span></strong> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname288274569214411">or</span></strong> } ]</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1594106655214411">A traffic classifier is configured, and the traffic classifier view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1322417121214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1556289844214411">Run <span><a href="cmdqueryname=if-match+acl"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname9616429214411">if-match acl</span></b></a> { <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1007646253214411">acl-number</span></i> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1410215932214411">name</span></strong> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1424703075214411">acl-name</span></i> }</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p859793463214411">An IPv4 ACL is specified for MF classification.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep497935559214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd59167754214411">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1771086599214411">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p599584148214411">Return to the system view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1244271228214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd270774510214411">Run <span><a href="cmdqueryname=traffic+policy"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1869926210214411">traffic policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname833196518214411">policy-name</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1930284120214411">A traffic policy is configured.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep617915258214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd70824314214411">Run <span><a href="cmdqueryname=share-mode"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1286798406214411">share-mode</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1440498222214411">The shared mode is specified for the traffic policy.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1193558823214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd498391534214411">Run <span><a href="cmdqueryname=classifier"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1347217117214411">classifier</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1626608860214411">classifier-name</span></i> <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1601154563214411">behavior</span></strong> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname987117976214411">behavior-name</span></i> [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname644221636214411">precedence</span></strong> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1792700916214411">precedence-value</span></i> ]</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1124390722214411">A traffic behavior is specified for a traffic classifier in the traffic policy.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep2101962132214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1571559374214411">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname300421633214411">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1305902127214411">Return to the system view.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172374105__en-us_task_0172373978_step_6"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd812599480214411">Configure a network-side interface.</span><ol type="a" id="EN-US_TASK_0172374105__en-us_task_0172373978_substeps1934703363214411"><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep176448540214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd2043178920214411">Run <span><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname319330858214411">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1816570169214411">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1797725048214411">interface-number</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p917596574214411">A sub-interface is created.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1541045209214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1694044843214411">Run <span><a href="cmdqueryname=vlan-type+dot1q"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname875850086214411">vlan-type dot1q</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname916068336214411">vlanid</span></i> { <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname377845358214411">8021p</span></strong> { <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1012512073214411">8021p-value1</span></i> [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname312514712214411">to</span></strong> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1398973963214411">8021p-value2</span></i> ] } &amp;&lt;1-8&gt; | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname640261753214411">dscp</span></strong> { <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname353737333214411">dscp-value1</span></i> [ <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname1017642592214411">to</span></strong> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1304700990214411">dscp-value2</span></i> ] } &amp;&lt;1-10&gt; | <span><strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname43982416525">eth-type </span></strong></span><strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname0599175617358">PPPoE</span></strong> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname360941220214411">default</span></strong> }</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1390663168214411">A matching policy is configured on the common dot1q sub-interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep1549891371214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd47634287214411">Run <span><a href="cmdqueryname=ip+binding+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1666803111214411">ip binding vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1552284356214411">vpn-instance-name</span></i></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1421862920214411">A VPN instance is bound to the sub-interface.</p>
<p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1158747239214411">The VPN instance bound to the sub-interface must be the service VPN instance created in step 1.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep71473884214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd818209715214411">Run <span><a href="cmdqueryname=ip+address"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname699395290214411">ip address</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname949485629214411">ip-address</span></i> { <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1331651999214411">mask</span></i> | <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1623615888214411">mask-length</span></i> }</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p576096743214411">An IP address is configured for the sub-interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep381434885214411"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd537425900214411">Run <span><a href="cmdqueryname=traffic-policy"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname698910810214411">traffic-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374105__en-us_task_0172373978_varname1665677761214411">policy-name</span></i> { <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname587350846214411">inbound</span></strong> | <strong><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdparmname501126783214411">outbound</span></strong> }</span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p1658195833214411">The traffic policy is applied to the sub-interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374105__en-us_task_0172373978_substep0551458162114"><span id="EN-US_TASK_0172374105__en-us_task_0172373978_cmd1555105862111">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172374105__en-us_task_0172373978_cmdname1825156248214411">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172374105__en-us_task_0172373978_p5694105172214">The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoe_cfg_0004.html">Configuring PPPoE Access
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppox_cfg_0285.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_bras_0019.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>