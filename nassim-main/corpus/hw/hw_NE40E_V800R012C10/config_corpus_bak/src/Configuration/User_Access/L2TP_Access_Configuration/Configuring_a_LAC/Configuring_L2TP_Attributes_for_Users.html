
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring L2TP Attributes for Users">
<meta name="abstract" content="The L2TP attributes of a user include the tunnel type, LAC source address, LNS address, tunnel name, tunnel password, and tunnel ID. The L2TP attributes delivered by the RADIUS server have a higher priority than those configured locally.">
<meta name="description" content="The L2TP attributes of a user include the tunnel type, LAC source address, LNS address, tunnel name, tunnel password, and tunnel ID. The L2TP attributes delivered by the RADIUS server have a higher priority than those configured locally.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_l2tp_cfg_013689.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_l2tp_cfg_013693.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoe_cfg_00055.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00588052,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="L2TP">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="L2TP">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="L2TP">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="L2TP">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374241">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring L2TP Attributes for Users</title>
</head>
<body><a name="EN-US_TASK_0172374241"></a><a name="EN-US_TASK_0172374241"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring L2TP Attributes for Users</h1>
<div class="taskbody"><p>The L2TP attributes of a user include the tunnel type, LAC source address, LNS address, tunnel name, tunnel password, and tunnel ID. The L2TP attributes delivered by the RADIUS server have a higher priority than those configured locally.</p>
<div class="context"><a name="EN-US_TASK_0172374241__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After an L2TP group is configured, you can specify the L2TP group in a domain so that the domain is associated with the L2TP tunnel. In this way, the <span class="keyword">NE40E</span> can wholesale services of an ISP to the access server (LNS) of the ISP through the associated L2TP tunnel. This allows the services of multiple ISPs to be wholesaled.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172374241__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=aaa"><b><span class="cmdname">aaa</span></b></a></span><p><p>The AAA view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=domain"><b><span class="cmdname">domain</span></b></a> <i><span class="varname">domain-name</span></i></span><p><p>The domain view is displayed.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=l2tp-group"><b><span class="cmdname">l2tp-group</span></b></a> <i><span class="varname">group-name</span></i></span><p><p>An L2TP group is specified for the domain.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=l2tp-user+radius-force"><b><span class="cmdname">l2tp-user radius-force</span></b></a></span><p><p>The L2TP attributes delivered by the RADIUS server are specified for domain users.</p>
</p><p><p>The L2TP attributes of domain users can be specified by the L2TP group in the domain or delivered by the RADIUS server. When the L2TP attributes delivered by the RADIUS server are specified for domain users, no L2TP group needs to be specified in the domain. (The L2TP group is invalid even if it is specified.)</p>
<p>The RADIUS server can deliver attributes such as Tunnel-Type (64), Tunnel-Client-Endpoint (66), Tunnel-Server-Endpoint (67), Tunnel-Client-Auth-ID (90), Tunnel-Password (69), and Tunnel-Assignment-ID (82). If the RADIUS server does not deliver the L2TP group name, the <span class="keyword">NE40E</span> considers the user as a common PPP user.</p>
<p>The L2TP attributes delivered by the RADIUS server have a higher priority than those configured locally. For example, if the LNS address configured in the L2TP group <strong>lac1</strong> on the <span class="keyword">NE40E</span> is 10.10.10.1, and the RADIUS server delivers the LNS address 10.20.20.1 and the L2TP group <strong>lac1</strong>, the valid LNS address is 10.20.20.1. If the RADIUS server delivers only the L2TP group <strong>lac1</strong>, the valid LNS address is 10.10.10.1.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For the RADIUS-delivered L2TP attributes and L2TP functions to take effect, the L2TP group name and tunnel type attributes must be delivered at the same time.</p>
</div></div>
<div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>The L2TP attributes delivered by the RADIUS server have a higher priority than the local L2TP attributes. If the L2TP attributes are not delivered by the RADIUS server, do not run this command. Otherwise, L2TP dial-up fails.</p>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=l2tp-authorize"><b><span class="cmdname">l2tp-authorize</span></b></a> <strong><span>password</span></strong> { <strong><span>simple</span></strong> <i><span class="varname">simple-password</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">cipher-password</span></i> }</span><p><p>The LAC is configured to authenticate an L2TP user using the domain name of the user. This means that the LAC sends the domain name and password of the user to the RADIUS server for authentication.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>The password must be at least eight characters long and contains at least two of the following character types: uppercase letters, lowercase letters, digits, and special characters.</li><li>For security purposes, you are advised to specify the ciphertext mode. To ensure device security, change the password periodically.</li></ul>
</div></div>
<div class="p">If the <a href="cmdqueryname=l2tp-authorize"><b><span class="cmdname">l2tp-authorize</span></b></a> command is run in a domain, the authentication rules are as follows:<ul><li>When a new PPP user is authenticated, if the <a href="cmdqueryname=l2tp-authorize"><b><span class="cmdname">l2tp-authorize</span></b></a> command is run in the domain of the user and RADIUS authentication is used, virtual user authentication is set in the user information table. Otherwise, the original process is followed.</li><li>When sending an authentication request to the RADIUS server for a virtual user, the device sends the domain name of the user as the username and the configured password (<strong>huawei</strong> by default) to the RADIUS server.</li><li>If the RADIUS server denies the authentication or the authentication request fails to be sent, the device uses the original PPP username for secondary authentication.</li><li>If RADIUS authentication is successful but the Tunnel-Type and Tunnel-Server-Endpoint attributes delivered by the RADIUS server are incorrect, the device also uses the original PPP username for secondary authentication.</li><li>If RADIUS authentication is successful and the Tunnel-Type and Tunnel-Server-Endpoint attributes delivered by the RADIUS server are correct, accounting is performed for the user, and the original PPP username is used as the username for accounting.</li></ul>
</div>
<p>If the <a href="cmdqueryname=l2tp-authorize"><b><span class="cmdname">l2tp-authorize</span></b></a> command is not run, the LAC sends the username and password entered by a user to the RADIUS server for authentication.</p>
</p></li><li><span>Run <strong>idle-cut</strong><em> idle-time</em> { <em>idle-data</em> | <strong>zero-rate</strong> } [ <strong>inbound</strong> | <strong>outbound</strong> ]</span><p><p>The idle-cut function is configured for the domain. After the command is run, a user is logged out when the user's traffic volume in a specified period is lower than a configured threshold. This command prevents a user from occupying bandwidth resources when no traffic is transmitted for the user for a long time.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_l2tp_cfg_013689.html">Configuring a LAC
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_l2tp_cfg_013693.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_pppoe_cfg_00055.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>