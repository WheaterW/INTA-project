
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring IP Addresses for Web Authentication and RADIUS Authorization Servers">
<meta name="abstract" content="The source IP address of the master and backup devices is the same as the BAS-IP address of the web authentication server and the NAS-IP address of the RADIUS authorization server.">
<meta name="description" content="The source IP address of the master and backup devices is the same as the BAS-IP address of the web authentication server and the NAS-IP address of the RADIUS authorization server.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_0004.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_0010.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,z00603461,w00800033,z00588052,rui_ne,c00549182,w00556928,l00593348,w00606909,w00447999,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="UP Multi-Device Backup">
<meta name="featurename" content="User Access Multi-Device Backup">
<meta name="featuretype" content="User Access">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="UP Multi-Device Backup">
<meta name="featurename" content="User Access Multi-Device Backup">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="UP Multi-Device Backup">
<meta name="featurename" content="User Access Multi-Device Backup">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="User Access Multi-Device Backup">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="l00593348">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172374356">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring IP Addresses for Web Authentication and RADIUS Authorization Servers</title>
</head>
<body><a name="EN-US_TASK_0172374356"></a><a name="EN-US_TASK_0172374356"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring IP Addresses for Web Authentication and RADIUS Authorization Servers</h1>
<div class="taskbody" id="taskbody1538309750214109"><p id="shortdesc1605463503214413">The source IP address of the master and backup devices is the same as the BAS-IP address of the web authentication server and the NAS-IP address of the RADIUS authorization server.</p>
<div class="context"><a name="EN-US_TASK_0172374356__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0172374356__context204011412214413"><p id="EN-US_TASK_0172374356__p1435900872214413">In hot backup scenarios, the mapping between address pools and BAS-IP addresses must be specified on the web authentication server for each pair of master and backup devices. An IP address pool is shared only by the master and backup devices. Therefore, each pair of master and backup devices must have a source address to communicate with the web authentication server. The source IP address of portal packets sent by a device to the web authentication server can be configured as the BAS-IP address using the <strong id="EN-US_TASK_0172374356__b914454982918"><a href="cmdqueryname=web-auth-server"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname114451896301">web-auth-server</span></b></a> </strong>{ <strong id="EN-US_TASK_0172374356__b71447495293"><strong><span id="EN-US_TASK_0172374356__cmdparmname73931370306">source-ipv6</span></strong> </strong><em id="EN-US_TASK_0172374356__i01442049112911"><i><span class="varname" id="EN-US_TASK_0172374356__varname12331135043010">source-ipv6</span></i></em><i><span class="varname" id="EN-US_TASK_0172374356__varname1333115019303"> </span></i>} [ <strong id="EN-US_TASK_0172374356__b111448499298"><strong><span id="EN-US_TASK_0172374356__cmdparmname13881115623016">vpn-instance</span></strong></strong><em id="EN-US_TASK_0172374356__i18144449112919"> <i><span class="varname" id="EN-US_TASK_0172374356__varname14444152010316">vpn-instance</span></i></em> ] command.</p>
<p id="EN-US_TASK_0172374356__p1402870043214413">In Change-of-Authorization (CoA) and DM applications, the RADIUS authorization server sends requests to the <span class="keyword" id="EN-US_TASK_0172374356__keyword1092056673214413">Router</span>, and the <span class="keyword" id="EN-US_TASK_0172374356__keyword630082384214413">Router</span> responds to the RADIUS authorization server. The RADIUS server then checks the source IP address of reply packets for security. In N:1 hot backup scenarios, the RADIUS authorization server determines the IP address of the <span class="keyword" id="EN-US_TASK_0172374356__keyword299215595214413">Router</span> to which authorization packets are sent based on user's bill information. This IP address can be a NAS-IP address or the address that the <span class="keyword" id="EN-US_TASK_0172374356__keyword1168749576214413">Router</span> uses to exchange accounting-start packets with the RADIUS server.</p>
<p id="EN-US_TASK_0172374356__p258349526214413">To ensure that the RADIUS authorization server sends authorization packets to the exact <span class="keyword" id="EN-US_TASK_0172374356__keyword467883899214413">Router</span> in N:1 scenarios, run the <a href="cmdqueryname=radius-authorization+source"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname391401640214413">radius-authorization source</span></b></a> command to specify a source IP address for each pair of master and backup devices. To ensure that the source IP address in the reply packets sent by the <span class="keyword" id="EN-US_TASK_0172374356__keyword643953906214413">Router</span> to the RADIUS server is the same as the NAS-IP address, run the <a href="cmdqueryname=radius-authorization+source"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname990832610214413">radius-authorization source</span></b></a> <strong><span id="EN-US_TASK_0172374356__cmdparmname1117541259214413">same-as</span></strong> <strong><span id="EN-US_TASK_0172374356__cmdparmname156633326214413">nas-logic-ip</span></strong> command. Alternatively, run the <a href="cmdqueryname=radius-authorization+source"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname1629316620214413">radius-authorization source</span></b></a> [ <strong><span id="EN-US_TASK_0172374356__cmdparmname1316026337214413">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172374356__varname829002513214413">vpn-instance-name</span></i> ] <i><span class="varname" id="EN-US_TASK_0172374356__varname2009738079214413">source-ip-address</span></i> command to specify a source IP address.</p>
<p id="EN-US_TASK_0172374356__p1525619931214413">Perform the following operations on both devices that back up each other:</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172374356__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul id="EN-US_TASK_0172374356__steps-unordered1096117230214413"><li id="EN-US_TASK_0172374356__step2104135025214413"><span id="EN-US_TASK_0172374356__cmd1584150026214413">Configure the source IP address of portal packets sent by the <span class="keyword" id="EN-US_TASK_0172374356__keyword1088729744214413">Router</span> to the web authentication server as the BAS-IP address, which is used independently by the web authentication server.</span><p><p id="EN-US_TASK_0172374356__p3288234399"></p>
</p><ol id="EN-US_TASK_0172374356__substeps2146062481214413"><li class="substepexpand" id="EN-US_TASK_0172374356__substep2078282552214413"><span id="EN-US_TASK_0172374356__cmd873333009214413">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname1393723014214413">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0172374356__p506478344214413">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep627001079214413"><span id="EN-US_TASK_0172374356__cmd304878924214413">Run <span><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname1287405813214413">interface</span></b></a> <strong><span id="EN-US_TASK_0172374356__cmdparmname274069801214413">loopback</span></strong> <i><span class="varname" id="EN-US_TASK_0172374356__varname619621273214413">loopback-number</span></i></span></span><p><p id="EN-US_TASK_0172374356__p2118742444214413">A loopback interface is created, and the interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep971546005214413"><span id="EN-US_TASK_0172374356__cmd1455537894214413">Run <span><a href="cmdqueryname=ip+address"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname779429449214413">ip address</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374356__varname2018510544214413">ip address</span></i> { <i><span class="varname" id="EN-US_TASK_0172374356__varname2046963789214413">mask</span></i> | <i><span class="varname" id="EN-US_TASK_0172374356__varname663381346214413">mask-length</span></i> }</span></span><p><p id="EN-US_TASK_0172374356__p127101771214413">An IP address is configured for the loopback interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep79143450214413"><span id="EN-US_TASK_0172374356__cmd871586657214413">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname1682289109214413">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374356__p1666945435214413">Exit the interface view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep1442983509214413"><span id="EN-US_TASK_0172374356__cmd691010192214413">Run <span><a href="cmdqueryname=remote-backup-service"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname1645427250214413">remote-backup-service</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374356__varname826217461214413">service-name</span></i></span></span><p><p id="EN-US_TASK_0172374356__p1041760029214413">The RBS view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep277912372243"><span id="EN-US_TASK_0172374356__cmd1977993752412">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname1077953742414">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172374356__p11780183718244">The configuration is committed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep1575021104214413"><span id="EN-US_TASK_0172374356__cmd1496262006214413">Run <strong id="EN-US_TASK_0172374356__b19781820161115"><a href="cmdqueryname=web-auth-server"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname1278117205110">web-auth-server</span></b></a> </strong>{ <strong id="EN-US_TASK_0172374356__b13781112013116"><strong><span id="EN-US_TASK_0172374356__cmdparmname5781152091118">source-ipv6</span></strong> </strong><em id="EN-US_TASK_0172374356__i177811220141115"><i><span class="varname" id="EN-US_TASK_0172374356__varname137811520181118">source-ipv6</span></i></em><i><span class="varname" id="EN-US_TASK_0172374356__varname27811209118"> </span></i>} [ <strong id="EN-US_TASK_0172374356__b77811720131111"><strong><span id="EN-US_TASK_0172374356__cmdparmname178113208115">vpn-instance</span></strong></strong><em id="EN-US_TASK_0172374356__i47811120201113"> <i><span class="varname" id="EN-US_TASK_0172374356__varname1078192061113">vpn-instance</span></i></em> ]</span><p><p id="EN-US_TASK_0172374356__p1843095387214413">The loopback interface's IP address is configured as the BAS-IP address to be used independently by the web authentication server.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep848365172214413"><span id="EN-US_TASK_0172374356__cmd1329513371214413">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname122534870214413">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172374356__p624322262214413">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172374356__step1060927446214413"><span id="EN-US_TASK_0172374356__cmd450863881214413">Set the source IP address of the master and backup devices to be the same as the NAS-IP address of the RADIUS authorization server.</span><ol id="EN-US_TASK_0172374356__substeps148408557214413"><li class="substepexpand" id="EN-US_TASK_0172374356__substep707164242214413"><span id="EN-US_TASK_0172374356__cmd1134912796214413">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname1900192352214413">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0172374356__p1985841232214413">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep76933735214413"><span id="EN-US_TASK_0172374356__cmd240128651214413">Run <span><a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname1518515081214413">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374356__varname79504094214413">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172374356__varname1208376610214413">interface-number</span></i></span></span><p><p id="EN-US_TASK_0172374356__p1266393503214413">The interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep468042065214413"><span id="EN-US_TASK_0172374356__cmd150387494214413">Run <span><a href="cmdqueryname=ip+address"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname1842484332214413">ip address</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374356__varname687539587214413">ip address</span></i> { <i><span class="varname" id="EN-US_TASK_0172374356__varname337101414214413">mask</span></i> | <i><span class="varname" id="EN-US_TASK_0172374356__varname1155069788214413">mask-length</span></i> }</span></span><p><p id="EN-US_TASK_0172374356__p2085249507214413">An IP address is configured for the interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep6281033143916"><span id="EN-US_TASK_0172374356__cmd18281183343917">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname12811433163915">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172374356__p02815332391">The configuration is committed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep1028338839214413"><span id="EN-US_TASK_0172374356__cmd342476017214413">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname363690694214413">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172374356__p1680257404214413">Exit the interface view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep21372672214413"><span id="EN-US_TASK_0172374356__cmd580729255214413">Run <span><a href="cmdqueryname=remote-backup-service"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname1787472210214413">remote-backup-service</span></b></a> <i><span class="varname" id="EN-US_TASK_0172374356__varname325812125214413">service-name</span></i></span></span><p><p id="EN-US_TASK_0172374356__p243759472214413">The RBS view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep2126847065214413"><span id="EN-US_TASK_0172374356__cmd1053317140214413">Run <span><a href="cmdqueryname=radius-authorization+source"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname2025615928214413">radius-authorization source</span></b></a> <strong><span id="EN-US_TASK_0172374356__cmdparmname1975322519214413">same-as</span></strong> <strong><span id="EN-US_TASK_0172374356__cmdparmname876387311214413">nas-logic-ip</span></strong> or <a href="cmdqueryname=radius-authorization+source"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname1064709051214413">radius-authorization source</span></b></a> [ <strong><span id="EN-US_TASK_0172374356__cmdparmname1127048948214413">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172374356__varname1037477803214413">vpn-instance-name</span></i> ] <i><span class="varname" id="EN-US_TASK_0172374356__varname1301397016214413">source-ip-address</span></i></span></span><p><p id="EN-US_TASK_0172374356__p157159817214413">The NAS-IP address of the RADIUS authorization server is set to be the same as the source IP address of the master and backup devices.</p>
</p><p><div class="note" id="EN-US_TASK_0172374356__note1718234196214413"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172374356__p1149530963214413">If a NAS-IP address is specified in the RADIUS server template, run the <a href="cmdqueryname=radius-authorization+source"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname590781067214413">radius-authorization source</span></b></a> <strong><span id="EN-US_TASK_0172374356__cmdparmname1024909145214413">same-as</span></strong> <strong><span id="EN-US_TASK_0172374356__cmdparmname1564143397214413">nas-logic-ip</span></strong> command; otherwise, run the <a href="cmdqueryname=radius-authorization+source"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname965119456214413">radius-authorization source</span></b></a> [ <strong><span id="EN-US_TASK_0172374356__cmdparmname1090009429214413">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172374356__varname1707612842214413">vpn-instance-name</span></i> ] <i><span class="varname" id="EN-US_TASK_0172374356__varname1425470369214413">source-ip-address</span></i> command.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0172374356__substep281412064214413"><span id="EN-US_TASK_0172374356__cmd933568954214413">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172374356__cmdname597967152214413">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172374356__p323602705214413">The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_0004.html">Configuring Multi-Device Backup for IPv4 User Information
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_0010.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_rui_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>