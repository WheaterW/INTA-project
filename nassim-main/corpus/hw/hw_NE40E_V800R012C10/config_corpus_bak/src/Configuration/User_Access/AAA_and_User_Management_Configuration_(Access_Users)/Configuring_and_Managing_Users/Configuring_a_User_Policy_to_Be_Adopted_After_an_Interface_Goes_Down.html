
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a User Policy to Be Adopted After an Interface Goes Down">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0270.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0303.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0549.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00588052,w00437000,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="AAA (Access User)">
<meta name="featuretype" content="User Access">
<meta name="OWNER" content="z00588052,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373735">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a User Policy to Be Adopted After an Interface Goes Down</title>
</head>
<body><a name="EN-US_TASK_0172373735"></a><a name="EN-US_TASK_0172373735"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a User Policy to Be Adopted After an Interface Goes Down</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0172373735__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When an interface goes down due to an interface or direct link fault, the users on the interface are logged out. After the fault is rectified, the interface goes up, and users go online again. If an interface frequently alternates between up and down due to an interface or direct link fault, the users also frequently go online and offline through the interface. To address this problem, run the <a href="cmdqueryname=user-policy+interface-down"><b><span class="cmdname">user-policy interface-down</span></b></a> command to configure a user policy to be adopted when an interface goes down. The policy can be forcibly logging out the users or keeping them online.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172373735__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>In the system view, configure a user policy to be adopted when an interface goes down.</span><p><ol><li><p>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></p>
<p>The system view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=user-policy+interface-down"><b><span class="cmdname">user-policy interface-down</span></b></a> { <strong><span>offline</span></strong> | <strong><span>online</span></strong> }</p>
<p>A policy is configured and applied to online users when the BAS interface goes down. The policy can be forcibly logging out the users or keeping them online.</p>
</li><li><p>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
<p>The configuration is committed.</p>
</li></ol>
</p></li><li><span>In the interface view, configure a user policy to be adopted when an interface goes down.</span><p><ol><li><p>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></p>
<p>The system view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <em>interface-type interface-number</em> [ <i><span class="varname">.subinterface-number</span></i> ]</p>
<p>The interface view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
<p>The configuration is committed.</p>
</li><li><p>Run <a href="cmdqueryname=bas"><b><span class="cmdname">bas</span></b></a></p>
<p>A BAS interface is created and its view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=access-type"><b><span class="cmdname">access-type</span></b></a> <strong>layer2-subscriber</strong> [ <strong>bas-interface-name</strong> <em>bname</em> | <strong>default-domain</strong> { <strong>pre-authentication</strong> <em>predname</em> | <strong>authentication</strong> [ <strong>force</strong> | <strong>replace</strong> ] <em>dname</em> }<sup>*</sup> | <strong>accounting-copy</strong> <strong>radius-server</strong> <em>rd-name</em> ]<sup>*</sup></p>
<p>The access type is set to Layer 2 common users, and related attributes are configured.</p>
<p>Or run <a href="cmdqueryname=access-type"><b><span class="cmdname">access-type</span></b></a> <strong>layer3-subscriber</strong> [ <strong>default-domain</strong> { <strong>pre-authentication</strong> <em>dname</em> | <strong>authentication</strong> [ <strong>force</strong> | <strong>replace</strong> ] <em>dname</em> }<sup>*</sup> ] The access type is set to Layer 3 common users, and related attributes are configured.</p>
</li><li><p>Run <a href="cmdqueryname=user-policy+interface-down"><b><span class="cmdname">user-policy interface-down</span></b></a> { <strong><span>offline</span></strong> | <strong><span>online</span></strong> }</p>
<p>A policy is configured and applied to online users when the BAS interface goes down. The policy can be forcibly logging out the users or keeping them online.</p>
</li><li><p>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
<p>The configuration is committed.</p>
</li></ol>
<div class="p"><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>If the <strong>user-policy interface-down</strong> command is run in both the system and BAS interface views, the configuration in the BAS interface view determines whether users are logged out when this BAS interface goes down, and the configuration in the system view determines whether users are logged out when other BAS interfaces go down.</p>
</li><li><p>If the <a href="cmdqueryname=user-policy+interface-down"><b><span class="cmdname">user-policy interface-down</span></b></a> <strong><span>online</span></strong> command has been run to keep users online after an interface goes down, the user detection mechanism configured for the users still takes effect. That is, the users are still logged out upon a detection failure.</p>
</li></ul>
</div></div>
</div>
</p></li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0270.html">Configuring and Managing Users
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0303.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0549.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>