
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an Interface Monitoring Group">
<meta name="abstract" content="You can configure an interface monitoring group in a dual-device backup scenario to allow the user-side interface status to change with the network-side interface status so that traffic can be switched between the master and backup links.">
<meta name="description" content="You can configure an interface monitoring group in a dual-device backup scenario to allow the user-side interface status to change with the network-side interface status so that traffic can be switched between the master and backup links.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ifm_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ifm_cfg_0026.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ifm_cfg_0037.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00437000">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Interface Management">
<meta name="featuretype" content="Interface and Data Link">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Interface Management">
<meta name="featuretype" content="Interface and Data Link">
<meta name="featurename" content="Interface Management">
<meta name="featurename" content="Interface Management">
<meta name="featuretype" content="Interface and Data Link">
<meta name="featuretype" content="Interface and Data Link">
<meta name="OWNER" content="w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00437000">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362610">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/thickbox.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/imageResize.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-migrate-1.2.1.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-ui.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.mousewheel.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/thickbox.js"></script>
<title>Configuring an Interface Monitoring Group</title>
</head>
<body><a name="EN-US_TASK_0172362610"></a><a name="EN-US_TASK_0172362610"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an Interface Monitoring Group</h1>
<div class="taskbody"><p>You can configure an interface monitoring group in a dual-device backup scenario to allow the user-side interface status to change with the network-side interface status so that traffic can be switched between the master and backup links.</p>
<div class="context"><a name="EN-US_TASK_0172362610__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>When a network-side interface goes Down in a dual-device backup scenario, user-side devices cannot detect the Down event and therefore do not switch traffic to the backup link. As a result, traffic overloads or interruptions occur. To prevent these problems, you can configure an interface monitoring group to monitor the network-side interface status and instruct the user-side interface to change its status accordingly. An interface monitoring group allows traffic to be switched between the master and backup links and prevents traffic overloads or interruptions.</p>
<p>On the network shown in <a href="#EN-US_TASK_0172362610__fig_dc_vrp_ifm_cfg_002801">Figure 1</a>, PE2 backs up PE1. NPE1 through NPEM on the user side is dual-homed to the two PEs to load-balance traffic, and the two PEs are connected to DeviceA through DeviceN on the network side. When only the link between PE1 and <span class="keyword">Device</span>N is available and all the links between PE1 and all the other routers fail, the NPEs do not detect the failure and continue sending packets to <span class="keyword">Device</span>N through PE1. As a result, the link between PE1 and <span class="keyword">Device</span>N becomes overloaded.</p>
<div class="fignone" id="EN-US_TASK_0172362610__fig_dc_vrp_ifm_cfg_002801"><a name="EN-US_TASK_0172362610__fig_dc_vrp_ifm_cfg_002801"></a><a name="fig_dc_vrp_ifm_cfg_002801"></a><span class="figcap"><b>Figure 1 </b>Typical application of an interface monitoring group</span><br><span><img class="imgResize" src="images/fig_dc_vrp_ifm_cfg_002801.png" width="518.7" height="NaN" title="Click to enlarge"></span><br></div>
<p>To resolve this problem, you can configure an interface monitoring group and add multiple network-side interfaces on the PEs to the interface monitoring group. When a link failure occurs on the network side and the interface monitoring group detects that the status of a certain proportion of network-side interfaces changes, the system instructs the user-side interfaces associated with the interface monitoring group to change their status accordingly and allows traffic to be switched between the master and backup links. Therefore, the interface monitoring group can be used to prevent traffic overloads or interruptions.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362610__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring an interface monitoring group, configure physical attributes for interfaces on the <span class="keyword">Router</span>.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362610__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=monitor-group"><b><span class="cmdname">monitor-group</span></b></a> <i><span class="varname">monitor-group-name</span></i></span></span><p><p>An interface monitoring group is created, and the interface monitoring group view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=binding+interface"><b><span class="cmdname">binding interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ <strong><span>down-weight</span></strong> <i><span class="varname">down-weight-value</span></i> ]</span></span><p><p>An interface is added to the interface monitoring group.</p>
<p>The interface added to an interface monitoring group is called a binding interface. A binding interface is located on the network side and a track interface on the user side. An interface monitoring group monitors the binding interface status and allows the track interfaces to change their status accordingly.</p>
<p>You can repeat this step to add multiple binding interfaces to an interface monitoring group.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Exit from the interface monitoring group view.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The view of the specified interface on the user side is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=track+monitor-group"><b><span class="cmdname">track monitor-group</span></b></a> <i><span class="varname">monitor-group-name</span></i> [ <strong><span>trigger-down-weight</span></strong> <i><span class="varname">trigger-down-weight-value</span></i> ]</span><p><p>The interface is associated with an interface monitoring group.</p>
</p><p><p>The user-side interface associated with an interface monitoring group is called a track interface.</p>
<p>You can repeat steps 5 and 6 to associate multiple track interfaces to an interface monitoring group.</p>
<p>If the down weight sum of all the binding interfaces in the monitoring group is greater than or equal to the value specified using <i><span class="varname" id="EN-US_TASK_0172362610__en-us_cliref_0172377518_varname225089405214440">trigger-down-weight-value</span></i> on the track interface, the track interface goes down, and service traffic is switched to the backup link. Otherwise, the track interface goes up, and service traffic is switched back to the primary link.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Exit from the interface view.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=monitor-group"><b><span class="cmdname">monitor-group</span></b></a> <i><span class="varname">monitor-group-name</span></i></span></span><p><p>The view of the created interface monitoring group is displayed.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=trigger-up-delay"><b><span class="cmdname">trigger-up-delay</span></b></a> <i><span class="varname">trigger-up-delay-value</span></i></span></span><p><p>The delay after which a track interface goes Up is set.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=monitor+enable"><b><span class="cmdname">monitor enable</span></b></a></span></span><p><p>The monitoring function is enabled.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172362610__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+monitor-group"><b><span class="cmdname">display monitor-group</span></b></a> [ <i><span class="varname">monitor-group-name</span></i> ] command to view information about an interface monitoring group.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ifm_cfg_0000.html">Interface Management Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ifm_cfg_0026.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ifm_cfg_0037.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>

<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>