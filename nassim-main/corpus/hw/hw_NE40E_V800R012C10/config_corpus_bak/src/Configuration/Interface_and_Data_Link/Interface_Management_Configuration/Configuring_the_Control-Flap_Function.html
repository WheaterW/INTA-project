
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Control-Flap Function">
<meta name="abstract" content="This section describes how to configure the control-flap function.">
<meta name="description" content="This section describes how to configure the control-flap function.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ifm_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_opt_00006.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ifm_cfg_0014.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00437000">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Interface Management">
<meta name="featuretype" content="Interface and Data Link">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Interface Management">
<meta name="featuretype" content="Interface and Data Link">
<meta name="featurename" content="Interface Management">
<meta name="featurename" content="Interface Management">
<meta name="featuretype" content="Interface and Data Link">
<meta name="featuretype" content="Interface and Data Link">
<meta name="OWNER" content="w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00437000">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362601">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the Control-Flap Function</title>
</head>
<body><a name="EN-US_TASK_0172362601"></a><a name="EN-US_TASK_0172362601"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Control-Flap Function</h1>
<div class="taskbody"><p>This section describes how to configure the control-flap function.</p>
<div class="context"><a name="EN-US_TASK_0172362601__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>The flapping of routing protocols, MPLS, and other protocols caused by the frequent change of the interface status may influence the stability of the whole network. To resolve this problem, you can configure the control-flap function.</p>
<p>The function controls the frequency of interface status alternations between up and down, which minimizes the impact on device and network stability.</p>
<p>For related concepts and fundamentals, see <a href="dc_vrp_ifm_cfg_0030.html#EN-US_CONCEPT_0172362528__section_dc_vrp_ifm_cfg_003004">Interface Flapping Control</a>.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362601__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring the control-flap function, configure the physical attributes for the <span class="keyword">Router</span> interfaces.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172362601__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure the control-flap function.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The interface view is displayed.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The null interface and loopback interface do not support the control-flap function.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=control-flap"><b><span class="cmdname">control-flap</span></b></a> [ <i><span class="varname">suppress</span></i> <i><span class="varname">reuse</span></i> <i><span class="varname">ceiling</span></i> <i><span class="varname">decay-ok</span></i> <i><span class="varname">decay-ng</span></i> ]</span><p><p>The control-flap function is enabled on the interface.</p>
</p><p><p>The value of <i><span class="varname">suppress</span></i> is 1000 times the suppress threshold of the interface. It ranges from 1 to 20000. The default value is 2000. The value of <i><span class="varname">suppress</span></i> must be greater than the value of <i><span class="varname">reuse</span></i> and smaller than the value of <i><span class="varname">ceiling</span></i>.</p>
<p>The value of <i><span class="varname">reuse</span></i> is 1000 times the reuse threshold of the interface. It ranges from 1 to 20000. The default value is 750. The value of <i><span class="varname">reuse</span></i> must be smaller than the value of <i><span class="varname">suppress</span></i>.</p>
<p>The value of <i><span class="varname">ceiling</span></i> is 1000 times the suppress penalty value of the interface. It ranges from 1001 to 20000. The default value is 6000. The value of <i><span class="varname">ceiling</span></i> must be greater than the value of <i><span class="varname">suppress</span></i>.</p>
<p>The value of <i><span class="varname">decay-ok</span></i> is the time taken to decay the penalty value to half when the interface is Up. It ranges from 1 to 900 seconds. The default value is 54 seconds.</p>
<p>The value of <i><span class="varname">decay-ng</span></i> is the time taken to decay the penalty value to half when the interface is Down. It ranges from 1 to 900 seconds. The default value is 54 seconds.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure status flapping suppression on a physical interface.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The view of an interface is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=damp-interface+enable"><b><span class="cmdname">damp-interface enable</span></b></a></span></span><p><p>Status flapping suppression is enabled on the interface.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=damp-interface+level"><b><span class="cmdname">damp-interface level</span></b></a> { <strong><span>light</span></strong> | <strong><span>middle</span></strong> | <strong><span>heavy</span></strong> | <strong><span>manual</span></strong> { <i><span class="varname">half-life-period</span></i> <i><span class="varname">suppress</span></i> <i><span class="varname">reuse</span></i> <i><span class="varname">max-suppress-time</span></i> } }</span></span><p><p>A suppression level is configured for status flapping suppression.</p>
</p><p><ul><li><strong>light</strong>: If light suppression is configured, the system triggers suppression only when an interface's status flaps frequently and rapidly. The light suppression level is the default setting and applies to flappings that have the maximum impact on the system.</li><li><strong>heavy</strong>: If heavy suppression is configured, the system triggers suppression when detecting an interface's status begins to flap, even if the flapping is not severe. At the heavy suppression level, an interface is prone to be suppressed. This level applies to services that are sensitive to flappings. Enabling heavy suppression prevents service interruptions or resource waste caused by interface flappings.</li><li><strong>middle</strong>: Intensity of middle suppression is between the light and heavy levels.</li><li><strong>manual</strong>: If light, middle, or heavy suppression cannot meet your requirement, you can specify <em>manual</em>.</li></ul>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=damp-interface+mode+tx-off"><b><span class="cmdname">damp-interface mode tx-off</span></b></a></span></span><p><p>The interface is disabled from sending signals if it is under status flapping suppression.</p>
</p><p><p>If an interface is under status flapping suppression, the interface can be disabled from sending signals, so that the remote interface can detect that the local interface is unavailable.</p>
<p>If the local interface is disabled from sending signals, the remote interface considers it Down.</p>
<p>If status flapping suppression on the local interface is canceled, this interface automatically begins to send signals to the remote interface. The remote interface then considers this interface Up.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0172362601__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+control-flap"><b><span class="cmdname">display control-flap</span></b></a> <strong>interface</strong> <em>interface-type interface-number</em> command to check the previous configuration.</p>
<p>Run the <a href="cmdqueryname=display+damp-interface"><b><span class="cmdname">display damp-interface</span></b></a> [ <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ] command to check the status and statistics about status flapping suppression on the interface.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ifm_cfg_0000.html">Interface Management Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_opt_00006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ifm_cfg_0014.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>