
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Alarm Function for CRC Errors, SDH Errors, Input Errors, Output Errors, or Optical Module Power Exceptions">
<meta name="abstract" content="This section describes how to configure the alarm function for CRC errors, SDH errors, input errors, output errors, or optical module power exceptions.">
<meta name="description" content="This section describes how to configure the alarm function for CRC errors, SDH errors, input errors, output errors, or optical module power exceptions.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ifm_cfg_3001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ifm_cfg_7010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00437000">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Interface Management">
<meta name="featuretype" content="Interface and Data Link">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Interface Management">
<meta name="featuretype" content="Interface and Data Link">
<meta name="featurename" content="Interface Management">
<meta name="featuretype" content="Interface and Data Link">
<meta name="featurename" content="Interface Management">
<meta name="featurename" content="Interface Management">
<meta name="featuretype" content="Interface and Data Link">
<meta name="featuretype" content="Interface and Data Link">
<meta name="OWNER" content="w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00437000">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362583">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the Alarm Function for CRC Errors, SDH Errors, Input Errors, Output Errors, or Optical Module Power Exceptions</title>
</head>
<body><a name="EN-US_TASK_0172362583"></a><a name="EN-US_TASK_0172362583"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Alarm Function for CRC Errors, SDH Errors<span>, Input Errors, Output Errors</span>, or Optical Module Power Exceptions</h1>
<div class="taskbody"><p>This section describes how to configure the alarm function for CRC errors, SDH errors<span>, input errors, output errors</span>, or optical module power exceptions.</p>
<div class="context"><a name="EN-US_TASK_0172362583__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If the alarm function for CRC errors, SDH errors<span>, input errors, output errors</span>, or optical module power exceptions is enabled on an interface, the system generates an alarm when the number of errors or exceptions exceeds or falls below the threshold set on the interface. If a large number of alarms are generated on links, the system will be busy processing them, which causes performance deterioration. To prevent this problem, properly configure the type of interface alarm, alarm thresholds, and detection interval.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362583__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=snmp-agent+trap+enable+port"><b><span class="cmdname">snmp-agent trap enable port</span></b></a> { <span><strong><span>crcexc-error</span></strong> | <strong><span>input-error</span></strong> | <strong><span>output-error</span></strong> | </span><span><strong><span>sdh-error-rising</span></strong> | </span><strong><span>optical-module-abnormal</span></strong> }</span><p><p>The alarm function is enabled on interfaces.</p>
</p><p><p>The configuration takes effect on all physical interfaces supporting the alarm function.</p>
<p>You can set a type of alarm as required.</p>
<ul><li><p><strong><span>crcexc-error</span></strong>: Enables the alarm function for CRC errors.</p>
</li><li><p><strong><span>sdh-error-rising</span></strong>: Enables the alarm function for SDH errors.</p>
</li><li><p><strong><span>optical-module-abnormal</span></strong>: Enables the alarm function for optical module power exceptions.</p>
</li></ul>
<p><span>In VS mode, this command is supported only by the admin VS.</span></p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <em>interface-type interface-number</em></span></span><p><p>The interface view is displayed.</p>
</p></li><li><span>Configure alarm thresholds and a detection interval.</span><p><ul><li>Configure alarm thresholds for inbound and outbound bandwidth usage:<ul><li><p>Run <a href="cmdqueryname=trap-threshold"><b><span class="cmdname">trap-threshold</span></b></a> { <strong><span>input-rate</span></strong> | <strong><span>output-rate</span></strong> } <i><span class="varname">bandwidth-in-use</span></i> [ <strong><span>resume-rate</span></strong> <i><span class="varname">resume-threshold</span></i> ]</p>
<p>The inbound and outbound bandwidth usage threshold is set.</p>
<p>To prevent alarms from being generated frequently, keep a large difference between <i><span class="varname">bandwidth-in-use</span></i> and <i><span class="varname">resume-threshold</span></i>.</p>
</li><li><p>Run <span><a href="cmdqueryname=set+flow-stat+interval"><b><span class="cmdname">set flow-stat interval</span></b></a> <i><span class="varname">interval</span></i></span></p>
<p>The traffic statistic collection interval is set for the interface, in seconds.</p>
<p>The new interval takes effect after the original interval expires. If the interface is logical, traffic statistics about the interface are updated when the new interval takes effect for the second time. If the interface is physical, traffic statistics about the interface are updated immediately after the new interval takes effect.</p>
<p>The traffic statistic collection interval set on an interface is effective only on the interface.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>You can configure a global traffic statistic collection interval, which takes effect on all interfaces, including the interfaces on which no traffic statistic collection interval has been set. To configure a global traffic statistic collection interval, run the <a href="cmdqueryname=set+flow-stat+interval"><b><span class="cmdname">set flow-stat interval</span></b></a> <i><span class="varname">interval</span></i> command in the system view. The traffic statistic collection interval of an interface takes preference over a global traffic statistic collection interval.</p>
</div></div>
</li></ul>
</li><li>Configure the CRC alarm function using either of the following methods:<ul><li><p>Run <a href="cmdqueryname=trap-threshold+crc-error"><b><span class="cmdname">trap-threshold crc-error</span></b></a> <i><span class="varname">threshold</span></i> <strong><span>interval-second</span></strong> <i><span class="varname">interval</span></i><span> </span>[ <strong><span>shutdown</span></strong> ]</p>
<p>An alarm threshold and a detection interval are set for CRC errors.</p>
</li><li><p>Run <a href="cmdqueryname=trap-threshold+crc-error"><b><span class="cmdname">trap-threshold crc-error</span></b></a> <strong><span>high-threshold</span></strong> <i><span class="varname">high-threshold</span></i> <strong><span>low-threshold</span></strong> <i><span class="varname">low-threshold</span></i> <strong><span>interval-second</span></strong> <i><span class="varname">interval</span></i><span> [ <strong><span>shutdown</span></strong> ]</span></p>
<p>The upper and lower alarm thresholds for CRC errors as well as the detection interval are set.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>You can run the <a href="cmdqueryname=trap-threshold"><b><span class="cmdname">trap-threshold</span></b></a> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> <strong><span>card</span></strong> <i><span class="varname">card-id</span></i> <strong><span>crc-error</span></strong> <strong><span>high-threshold</span></strong> <i><span class="varname">high-threshold</span></i> <strong><span>low-threshold</span></strong> <i><span class="varname">low-threshold</span></i> <strong><span>interval-second</span></strong> <i><span class="varname">interval</span></i> command in the system view to configure global values for all interfaces on the specified subcard.</p>
</div></div>
</li></ul>
</li><li>Configure the SDH alarm function using either of the following methods:<ul><li><p>Run <a href="cmdqueryname=trap-threshold+sdh-error"><b><span class="cmdname">trap-threshold sdh-error</span></b></a> <i><span class="varname">threshold</span></i> <strong><span>interval-second</span></strong> <i><span class="varname">interval</span></i></p>
<p>An alarm threshold and a detection interval are set for SDH errors.</p>
</li><li><p>Run <a href="cmdqueryname=trap-threshold+sdh-error"><b><span class="cmdname">trap-threshold sdh-error</span></b></a> <strong><span>high-threshold</span></strong> <i><span class="varname">high-threshold</span></i> <strong><span>low-threshold</span></strong> <i><span class="varname">low-threshold</span></i> <strong><span>interval-second</span></strong> <i><span class="varname">interval</span></i></p>
<p>The upper and lower alarm thresholds for SDH errors as well as the detection interval are set.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>You can run the <a href="cmdqueryname=trap-threshold"><b><span class="cmdname">trap-threshold</span></b></a> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> <strong><span>card</span></strong> <i><span class="varname">card-id</span></i> <strong><span>sdh-error</span></strong> <strong><span>high-threshold</span></strong> <i><span class="varname">high-threshold</span></i> <strong><span>low-threshold</span></strong> <i><span class="varname">low-threshold</span></i> <strong><span>interval-second</span></strong> <i><span class="varname">interval</span></i> command in the system view to configure global values for all interfaces on the specified subcard.</p>
</div></div>
</li></ul>
</li><li>Configure the symbol alarm function.<ul><li><p>Run <a href="cmdqueryname=trap-threshold+symbol-error"><b><span class="cmdname">trap-threshold symbol-error</span></b></a> <strong><span>high-threshold</span></strong> <i><span class="varname">high-threshold</span></i> <strong><span>low-threshold</span></strong> <i><span class="varname">low-threshold</span></i> <strong><span>interval-second</span></strong> <i><span class="varname">interval</span></i></p>
<p>The upper and lower alarm thresholds for symbol errors as well as the detection interval are set.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>You can run the <a href="cmdqueryname=trap-threshold"><b><span class="cmdname">trap-threshold</span></b></a> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> <strong><span>card</span></strong> <i><span class="varname">card-id</span></i> <strong><span>symbol-error</span></strong> <strong><span>high-threshold</span></strong> <i><span class="varname">high-threshold</span></i> <strong><span>low-threshold</span></strong> <i><span class="varname">low-threshold</span></i> <strong><span>interval-second</span></strong> <i><span class="varname">interval</span></i> command in the system view to configure global values for all interfaces on the specified subcard.</p>
</div></div>
</li></ul>
</li><li>Configure input/output alarm thresholds and a detection interval (for Ethernet interfaces<span> and POS interfaces</span>).<ul><li><p>Run <a href="cmdqueryname=trap-threshold"><b><span class="cmdname">trap-threshold</span></b></a> { <strong><span>input-error</span></strong> | <strong><span>output-error</span></strong> } <strong><span>high-threshold</span></strong> <i><span class="varname">high-threshold</span></i> <strong><span>low-threshold</span></strong> <i><span class="varname">low-threshold</span></i> <strong><span>interval-second</span></strong> <i><span class="varname">interval</span></i></p>
<p>The upper and lower alarm thresholds for interface input or output errors are set.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>You can run the <a href="cmdqueryname=trap-threshold"><b><span class="cmdname">trap-threshold</span></b></a> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> <strong><span>card</span></strong> <i><span class="varname">card-id</span></i> { <strong><span>input-error</span></strong> | <strong><span>output-error</span></strong> } <strong><span>high-threshold</span></strong> <i><span class="varname">high-threshold</span></i> <strong><span>low-threshold</span></strong> <i><span class="varname">low-threshold</span></i> <strong><span>interval-second</span></strong> <i><span class="varname">interval</span></i> command in the system view to configure global values for all interfaces on the specified subcard.</p>
</div></div>
</li></ul>
</li></ul>
<ul><li>Configure an alarm threshold and a clear alarm threshold for the CRC error packet ratio:<ul><li>Run <a href="cmdqueryname=trap-threshold+crc-error"><b><span class="cmdname">trap-threshold crc-error</span></b></a> <strong><span>packet-error-ratio</span></strong> <strong><span>alarm-threshold</span></strong> <em>alarm-coefficient-value</em><em> alarm-power-value </em>[ <strong><span>resume-threshold</span></strong> <em>resume-coefficient-value</em> <em>resume-power-value</em> ] [ <strong><span>trigger-lsp</span></strong> | <strong><span>trigger-section</span></strong> ]<p>An alarm threshold and a clear alarm threshold are configured for the CRC error packet ratio.</p>
</li></ul>
</li></ul>
<ul><li>Configure parameters for the algorithm to calculate the CRC packet error ratio:<ul><li><p>Run <a href="cmdqueryname=crc-error+packet-error-ratio+algorithm-parameter"><b><span class="cmdname">crc-error packet-error-ratio algorithm-parameter</span></b></a> <i><span class="varname">sample-window-factor</span></i> <i><span class="varname">child-window-max-number</span></i> <i><span class="varname">child-window-alarm-number</span></i> <i><span class="varname">child-window-resume-number</span></i></p>
<p>Parameters are configured for the algorithm to calculate the CRC packet error ratio.</p>
</li><li><p>Run <a href="cmdqueryname=crc-error+packet-error-ratio+algorithm-parameter+realtime-factor"><b><span class="cmdname">crc-error packet-error-ratio algorithm-parameter realtime-factor</span></b></a> <i><span class="varname">crcAlgTemplate</span></i></p>
<p>A template number is specified for factors affecting the algorithm used to calculate the CRC packet error ratio on the interface.</p>
</li></ul>
</li></ul>
<ul><li>Configure CRC alarm threshold in percentages:<ul><li>Run <span><a href="cmdqueryname=trap-threshold+crc-error+percent"><b><span class="cmdname">trap-threshold crc-error percent</span></b></a> <i><span class="varname">percent-val</span></i></span><p>The CRC alarm threshold in percentages is set.</p>
</li></ul>
</li></ul>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=port-alarm+down"><b><span class="cmdname">port-alarm down</span></b></a> { <strong><span>crc-error</span></strong> | <strong><span>sdh-error</span></strong> | <strong><span>symbol-error</span></strong> | <strong><span>input-error</span></strong> | <strong><span>output-error</span></strong>}</span><p><p>The interface is enabled to go Down when an error alarm is generated.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>The <span class="keyword">Router</span> also supports the <a href="cmdqueryname=port-alarm+down"><b><span class="cmdname">port-alarm down</span></b></a> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> <strong><span>card</span></strong> <i><span class="varname">card-id</span></i> { <strong><span>crc-error</span></strong> | <strong><span>sdh-error</span></strong> | <strong><span>symbol-error</span></strong> | <strong><span>input-error</span></strong> | <strong><span>output-error</span></strong> } command in the system view. This command takes effect on all interfaces on the subcard.</li><li>After the association function is enabled, you can run the <a href="cmdqueryname=port-alarm+clear"><b><span class="cmdname">port-alarm clear</span></b></a> { <strong><span>crc-error</span></strong> | <strong><span>sdh-error</span></strong> | <strong><span>symbol-error</span></strong> | <strong><span>input-error</span></strong> | <strong><span>output-error</span></strong> } command to manually clear the alarms generated on the physical interface.</li></ul>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ifm_cfg_3001.html">Configuring the Physical Link Detection Function
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ifm_cfg_7010.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>