
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Saving Configurations">
<meta name="abstract" content="Configurations can be saved in a configuration file either automatically or manually.">
<meta name="description" content="Configurations can be saved in a configuration file either automatically or manually.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0064.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0043.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,cfgmvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Configuration Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Configuration Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Configuration Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Configuration Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="OWNER" content="lwx1238418">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="lWX1238418">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172359993">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Saving Configurations</title>
</head>
<body><a name="EN-US_TASK_0172359993"></a><a name="EN-US_TASK_0172359993"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Saving Configurations</h1>
<div class="taskbody"><p>Configurations can be saved in a configuration file either automatically or manually.</p>
<div class="context"><a name="EN-US_TASK_0172359993__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>To avoid configuration loss on a device due to power-off or an unexpected reset, the system supports automatic and manual configuration saving.</p>
<p>The configuration file can be automatically saved on the local device or the backup server. If the local database is insufficient in space or damaged or disaster tolerance backup is required, save the configuration file on the backup server to harden the database security.</p>
<p>Perform the following steps on a device.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172359993__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Enable the system to automatically save configurations.</span><p><ol><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <span><a href="cmdqueryname=set+save-configuration"><b><span class="cmdname">set save-configuration</span></b></a> [ <strong><span>interval</span></strong> <i><span class="varname">interval</span></i> | <strong><span>cpu-limit</span></strong> <i><span class="varname">cpu-usage</span></i> | <strong><span>delay</span></strong> <i><span class="varname">delay-interval</span></i> ] <sup>*</sup></span> command to enable the system to automatically save configurations.</p>
<ul><li><p>To specify an interval at which configurations are automatically saved, set the <strong><span>interval</span></strong> <i><span class="varname">interval</span></i> parameter.</p>
</li><li>To prevent the auto-save function from deteriorating system performance, set the <strong><span>cpu-limit</span></strong> <i><span class="varname">cpu-usage</span></i> parameter to specify an upper threshold for CPU usage. In this way, when the auto-save timer is triggered and the CPU usage of the device is detected to be higher than the upper threshold, the device will stop the current auto-save operation.</li><li>To specify a delay for the device to automatically back up configurations, set the <strong><span>delay</span></strong> <i><span class="varname">delay-interval</span></i> parameter. If configurations are changed, the device will automatically save configurations after the delay expires.</li><li>If the <strong><span>interval</span></strong> <i><span class="varname">interval</span></i> and <strong><span>delay</span></strong> <i><span class="varname">delay-interval</span></i> parameters are both set, the parameter that specifies an earlier time triggers the auto-save operation. When the time specified by the other parameter arrives, the device checks the configurations again. It performs a new auto-save operation only when detecting a configuration change.</li></ul>
<p>With the auto-save function enabled, a device automatically saves configurations to the next-startup configuration file on condition that the current configurations are different from those in the next-startup configuration file and the time specified using the <strong><span>interval</span></strong> <i><span class="varname">interval</span></i> parameter arrives, regardless of whether the <a href="cmdqueryname=save"><b><span class="cmdname">save</span></b></a> command is run.</p>
</li><li><p>(Optional) Run the <span><a href="cmdqueryname=set+save-configuration+backup-to-server"><b><span class="cmdname">set save-configuration backup-to-server</span></b></a> <strong><span>server</span></strong><span> [ <a href="cmdqueryname=ipv6"><b><span class="cmdname">ipv6</span></b></a> ]</span> <i><span class="varname">server-ip</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <strong><span>transport-type</span></strong> { <strong><span>tftp</span></strong> | { <strong><span>ftp</span></strong> | <strong><span>sftp</span></strong> }<span> [ <strong><span>port</span></strong> <i><span class="varname">port-value</span></i> ]</span> <strong><span>user</span></strong> <i><span class="varname">user-name</span></i> <strong><span>password</span></strong> <i><span class="varname">password</span></i> } [ <strong><span>path</span></strong> <i><span class="varname">folder</span></i> ]</span> command to configure the configuration file to be saved on the specific server.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>When TFTP is used to transmit files, run the <a href="cmdqueryname=tftp+client-source"><b><span class="cmdname">tftp client-source</span></b></a> command to configure the loopback interface of the <span class="keyword">Router</span> as the source address of the client.</li><li><span>The system supports a maximum of five file servers. The servers are independent of each other. If a file fails to be uploaded to one of the servers, the system reports an alarm to the NMS and records a log locally.</span></li><li>In disaster recovery scenarios, you can run the <span><a href="cmdqueryname=set+save-configuration+backup-to-server+server"><b><span class="cmdname">set save-configuration backup-to-server server</span></b></a></span> command repeatedly to configure multiple file servers. Before running this command, you need to enable the auto-save function using the <a href="cmdqueryname=set+save-configuration"><b><span class="cmdname">set save-configuration</span></b></a> command and enable the FTP, SFTP, or TFTP service on the server.</li><li>A device supports a server with the same IP address but different VPN instances. To be specific, if different VPN instances have been configured for a server with a specific IP address, the device can send configuration files to any of the VPN instances.</li></ul>
</div></div>
</li></ol>
</p></li><li><span>Save configurations manually.</span><p><p>Run the <a href="cmdqueryname=save"><b><span class="cmdname">save</span></b></a> [ <i><span class="varname">configuration-file</span></i> ] command to save the current configuration.</p>
<p>The configuration file name extension must be .dat, .cfg, or .zip.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When you save the configuration file for the first time without specifying <i><span class="varname">configuration-file</span></i>, you are asked whether to name the configuration file <strong>vrpcfg.zip</strong>. The configuration file containing only the default configurations is initially named <strong>vrpcfg.zip</strong>.</p>
</div></div>
</p></li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0020.html">Managing Configuration Files
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0064.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfgm_cfg_0043.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>