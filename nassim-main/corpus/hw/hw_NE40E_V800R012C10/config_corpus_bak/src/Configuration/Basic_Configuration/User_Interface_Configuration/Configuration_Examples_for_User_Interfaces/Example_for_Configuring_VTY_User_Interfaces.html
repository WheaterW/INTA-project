
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring VTY User Interfaces">
<meta name="abstract" content="This section provides an example for configuring VTY user interfaces so that you can log in to the device through Telnet or SSH (STelnet) in AAA mode. The configuration involves the user level, authentication mode, authentication password, maximum number of VTY user interfaces, maximum number of incoming and outgoing calls, and terminal attributes.">
<meta name="description" content="This section provides an example for configuring VTY user interfaces so that you can log in to the device through Telnet or SSH (STelnet) in AAA mode. The configuration involves the user level, authentication mode, authentication password, maximum number of VTY user interfaces, maximum number of incoming and outgoing calls, and terminal attributes.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0022.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="basicvrp,w00800033,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="User Interface">
<meta name="featuretype" content="Basic Configurations">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="User Interface">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="User Interface">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="User Interface">
<meta name="featuretype" content="Basic Configurations">
<meta name="OWNER" content="lwx1238418">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="lwx1238418">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172359751">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring VTY User Interfaces</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172359751"></a><a name="EN-US_TASK_0172359751"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring VTY User Interfaces</h1>
<div class="taskbody"><p>This section provides an example for configuring VTY user interfaces so that you can log in to the device through Telnet or SSH (STelnet) in AAA mode. The configuration involves the user level, authentication mode, authentication password, maximum number of VTY user interfaces, maximum number of incoming and outgoing calls, and terminal attributes.</p>
<div class="context"><a name="EN-US_TASK_0172359751__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>To log in to a router using Telnet or SSH for local or remote configuration and maintenance, configure VTY user interfaces, including the maximum number of VTY user interfaces, limit on incoming and outgoing calls, terminal attributes, user levels, and authentication modes. You can configure parameters based on use and security requirements.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172359751__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Set the maximum number of VTY user interfaces.</p>
</li><li><p>Configure the limit on incoming and outgoing calls for VTY user interfaces.</p>
</li><li><p>Configure terminal attributes for the VTY user interfaces.</p>
</li><li><p>Set a user level for the VTY user interfaces.</p>
</li><li><p>Configure an authentication mode and password for the VTY user interfaces.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172359751__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Maximum number of VTY user interfaces: 21</p>
</li><li><p>Number of the ACL applied to limit incoming calls for the VTY user interfaces: 2000</p>
</li><li><p>Timeout period of an idle connection: 30 minutes</p>
</li><li><p>Number of rows displayed on a terminal screen: 30</p>
</li><li><p>Buffer size for historical commands: 20</p>
</li><li><p>User level: 15</p>
</li><li><p>User authentication mode: AAA</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The ACL number for limiting incoming and outgoing calls in VTY user interfaces, password, and user name do not have default values. Other parameters have default values, which are recommended.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172359751__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Set the maximum number of VTY user interfaces.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> user-interface maximum-vty 21</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
</p></li><li><span>Configure the limit on incoming and outgoing calls for VTY user interfaces.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> acl 2000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-basic-2000]<strong> rule permit source 10.1.1.1 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl4-basic-2000]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> user-interface vty 0 17</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ui-vty0-17]<strong> acl 2000 inbound</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ui-vty0-17]<strong> commit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this case, users whose source IP addresses are not 10.1.1.10 cannot access the device.</p>
</div></div>
</p></li><li><span>Configure terminal attributes for the VTY user interfaces.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-ui-vty0-17]<strong> shell</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ui-vty0-17]<strong> idle-timeout 30</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ui-vty0-17]<strong> screen-length 30</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ui-vty0-17]<strong> history-command max-size 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ui-vty0-17]<strong> commit</strong></pre>
</p></li><li><span>Set a user level for the VTY user interfaces.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-ui-vty0-17]<strong> user privilege level 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ui-vty0-17]<strong> commit</strong></pre>
</p></li><li><span>Set the user authentication mode to AAA for the VTY user interfaces.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-ui-vty0-17]<strong> authentication-mode aaa</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-ui-vty0-17]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-ui-vty0-17]<strong> quit</strong></pre>
<p>After configuring the VTY user interfaces, you can log in to the device through Telnet or SSH (STelnet) in password authentication mode to implement local or remote maintenance. For details about how to log in to the device through Telnet or SSH (STelnet), see <a href="dc_vrp_basic_cfg_0030.html">Configuring a User to Log In Through Telnet</a> or <a href="dc_vrp_basic_cfg_0037.html">Configuring STelnet Login</a>.</p>
</p></li><li><span>Configure VTY user information.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>aaa</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-aaa]<strong> local-user admin1234 password irreversible-cipher YsHsjx_202206</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa] <strong>local-user admin1234 </strong><strong>service-type ssh</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa] <strong>local-user admin1234 level 3</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-aaa] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>After completing the configuration, run the <a href="cmdqueryname=display+user-interface"><b><span class="cmdname">display user-interface</span></b></a> command to check the status of the VTY user interfaces.</p>
<p>Use VTY 14 as an example:</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> display user-interface vty 14</strong></pre>
<pre class="screen">  Idx  Type     Tx/Rx      Modem Privi ActualPrivi Auth  Int
  48   VTY 14              -     3     -           A     -
  +    : Current UI is active.
  F    : Current UI is active and work in async mode.
  Idx  : Absolute index of UIs.
  Type : Type and relative index of UIs.
  Privi: The privilege of UIs.
  ActualPrivi: The actual privilege of user-interface.
  Auth : The authentication mode of UIs.
      A: Authenticate use AAA.
      P: Authenticate use current UI's password.
  Int  : The physical location of UIs.</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172359751__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><pre class="screen">#
acl number 2000
 rule 5 deny source 10.1.1.1 0
#
user-interface maximum-vty 21
# 
aaa  
 local-user admin123 password irreversible-cipher $1d$+,JS+))\\2$KVNj(.3`_5x0FCKGv}H&amp;.kUTI`Ff&amp;H*eBqO.ua&gt;)$  
 local-user admin123 service-type ssh  
 local-user admin123 level 3 
#
user-interface vty 0 17
 authentication-mode aaa
 user privilege level 3
 history-command max-size 20
 idle-timeout 30 0
 screen-length 30
 acl 2000 inbound
return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0021.html">Configuration Examples for User Interfaces
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0022.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>