
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Using IPv6 SFTP to Operate Files">
<meta name="abstract" content="In this example, a local key pair is configured on the SSH server, and a username and a password are configured on the server for an IPv6 SSH user. After the IPv6 SFTP service is enabled and the SFTP client is connected to the server, you can perform file operations.">
<meta name="description" content="In this example, a local key pair is configured on the SSH server, and a username and a password are configured on the server for an IPv6 SSH user. After the IPv6 SFTP service is enabled and the SFTP client is connected to the server, you can perform file operations.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vfm_cfg_0022.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0209_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="File System Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="File System Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="File System Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="File System Management">
<meta name="featuretype" content="Basic Configurations">
<meta name="OWNER" content="lwx1238418">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="lWX1238418">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0193002354">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Using IPv6 SFTP to Operate Files</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0193002354"></a><a name="EN-US_TASK_0193002354"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Using IPv6 SFTP to Operate Files</h1>
<div class="taskbody"><p>In this example, a local key pair is configured on the SSH server, and a username and a password are configured on the server for an IPv6 SSH user. After the IPv6 SFTP service is enabled and the SFTP client is connected to the server, you can perform file operations.</p>
<div class="context"><a name="EN-US_TASK_0193002354__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As the device deployment scale increases, more and more devices need to be maintained and upgraded remotely. Online software upgrade, a new upgrade method by loading software packages remotely, facilitates remote upgrades, reduces upgrade costs, shortens the time that customers wait for upgrades, and improves customers' satisfaction. FTP is usually used to transmit data for online upgrades. FTP transmits data and even user names and passwords in plaintext, bringing security risks.</p>
<p>SFTP resolves the security issue. It enables you to securely log in to a remote device for file management, improving data transmission security. You can use SFTP to log in to a remote device from a device functioning as a client for secure file transfer and online upgrades.</p>
<p>As shown in <a href="#EN-US_TASK_0193002354__fig_dc_vrp_vfm_cfg_002601">Figure 1</a>, after the IPv6 SFTP server function is enabled on the device that functions as an SSH server, the PC that functions as an IPv6 SFTP client can use all, RSA, DSA, ECC, <span>SM2, </span>x509v3-ssh-rsa, password, password-rsa, password-ecc, password-dsa, <span>password-sm2, </span>or password-x509v3-rsa as the authentication mode to connect to the SSH server.</p>
<div class="fignone" id="EN-US_TASK_0193002354__fig_dc_vrp_vfm_cfg_002601"><a name="EN-US_TASK_0193002354__fig_dc_vrp_vfm_cfg_002601"></a><a name="fig_dc_vrp_vfm_cfg_002601"></a><span class="figcap"><b>Figure 1 </b>Using IPv6 SFTP to operate files</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1 represents <span>GigabitEthernet0/0/0</span>.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_vfm_cfg_002601.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0193002354__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>After you log in to the SFTP server through the console port, configure an IPv6 address of a logical interface as the source IPv6 address for SFTP login.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0193002354__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Create a local user and configure it.</p>
</li><li>Enable the IPv6 SFTP service on the SSH server and configure a service type for the user.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0193002354__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li>SFTP software installed on the SFTP client</li><li><p>Authentication mode: password Username: client001</p>
</li><li><p>Level (3) of the user client001</p>
</li><li><p>IPv6 address (2001:db8::1/32) of the SSH server</p>
</li><li>IPv6 routes available between the SFTP client and server</li><li>User type (SSH) and authentication mode (password)</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0193002354__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address for the management interface of the SFTP server.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname SSH Server</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>interface <span>GigabitEthernet0/0/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-<span>GigabitEthernet0/0/0</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-<span>GigabitEthernet0/0/0</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-<span>GigabitEthernet0/0/0</span>] <strong>ipv6 address 2001:db8::1 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-<span>GigabitEthernet0/0/0</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
</p></li><li><span>Configure the user name and password for the local user on the server.</span><p><pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> aaa</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa]<strong> local-user client001 password</strong></pre>
<pre class="screen">Please configure the password (8-128)
Enter Password:
Confirm Password:</pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client001 level 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client001 service-type ssh</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> commit</strong></pre>
</p></li><li><span>Enable the SFTP function and set the service type to SFTP for the SSH user.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>interface LoopBack 0</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-LoopBack0]<strong> ip address 2001:db8::2 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-LoopBack0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server]<strong> sftp ipv6 server enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh ipv6 server-source</strong> <strong>-i loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> ssh user client001</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> ssh user client001 authentication-type password</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server]<strong> ssh user client001 service-type sftp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> commit</strong></pre>
</p></li><li><span>Configure the authorized directory for the SSH user.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server]<strong> ssh user</strong> <strong>client001 sftp-directory cfcard:/</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>Start the SFTP software on the client, and enter the username, password, and port number (22 by default) to access the SSH server and transfer files.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0193002354__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">SSH server configuration file</h4><pre class="screen">#
sysname SSH Server
#
aaa
 local-user client001 password cipher @%@%.OuC6Vo7Z,A'y<font style="font-size:8pt" Face="Courier New" >~</font>/KB&amp;,vmd@%@%
 local-user client001 service-type ssh
 local-user client001 level 3
#
interface <span>GigabitEthernet0/0/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8::1/32
#
interface LoopBack 0
 ipv6 address 2001:DB8::2/64
<span>sftp ipv6 server enable</span>
ssh ipv6 server-source -i loopback 0
ssh user client001
ssh user client001 authentication-type password
ssh user client001 service-type sftp
ssh user client001 sftp-directory cfcard:/
#
return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vfm_cfg_0022.html">Configuration Examples for File System Management
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0209_1.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>