
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Using STelnet to Log In to Another Device (DSA Authentication Mode)">
<meta name="abstract" content="This section provides an example for using STelnet to log in to another device. To allow an STelnet client to log in to an SSH server, configure the client and server to generate local key pairs, configure the server to generate a DSA public key, and bind the public key to the corresponding user.">
<meta name="description" content="This section provides an example for using STelnet to log in to another device. To allow an STelnet client to log in to an SSH server, configure the client and server to generate local key pairs, configure the server to generate a DSA public key, and bind the public key to the corresponding user.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0108.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0110.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0120.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="basicvrp,w00800033,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="OWNER" content="lwx1238418">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="lwx1238418">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172360132">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Using STelnet to Log In to Another Device (DSA Authentication Mode)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172360132"></a><a name="EN-US_TASK_0172360132"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Using STelnet to Log In to Another Device (DSA Authentication Mode)</h1>
<div class="taskbody"><p>This section provides an example for using STelnet to log in to another device. To allow an STelnet client to log in to an SSH server, configure the client and server to generate local key pairs, configure the server to generate a DSA public key, and bind the public key to the corresponding user.</p>
<div class="context"><a name="EN-US_TASK_0172360132__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>Large numbers of devices need to be managed and maintained on a network. You cannot connect each device to a terminal. When no reachable route exists between remote devices and a terminal, you can use Telnet to log in to the remote devices from the device that you have logged in to. Telnet provides no secure authentication mode, and data is transmitted in simple mode over TCP, which brings security risks.</p>
<p>STelnet is a secure Telnet service over SSH connections. SSH provides encryption and authentication and protects devices against attacks, such as IP spoofing. As shown in <a href="#EN-US_TASK_0172360132__fig_dc_vrp_basic_cfg_012301">Figure 1</a>, after the STelnet service is enabled on the SSH server, the STelnet clients can log in to the SSH server in RSA, DSA, ECC,<span> SM2,</span> X509v3-SSH-RSA, password, password-RSA, password-ECC, password-DSA,<span> password-SM2,</span> password-X509v3-RSA, or all authentication mode.</p>
<div class="fignone" id="EN-US_TASK_0172360132__fig_dc_vrp_basic_cfg_012301"><a name="EN-US_TASK_0172360132__fig_dc_vrp_basic_cfg_012301"></a><a name="fig_dc_vrp_basic_cfg_012301"></a><span class="figcap"><b>Figure 1 </b>Network diagram of using STelnet to log in to another device</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, Interface1 represents <span>GigabitEthernet0/0/0</span>.</p>
</div></div>
<br><span><img src="figure/en-us_image_0000002111408318.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172360132__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure users client001 and client002 on the SSH server to use different authentication modes to log in to the server.</p>
</li><li><p>Configure the STelnet client client002 and SSH server to generate local key pairs, and bind the DSA public key of the STelnet client to the user client002 so that the client is authenticated when it logs in to the server.</p>
</li><li><p>Enable the STelnet service on the SSH server.</p>
</li><li><p>Set the service type of the SSH users client001 and client002 to STelnet.</p>
</li><li><p>Enable SSH client first-time authentication.</p>
</li><li><p>Configure users client001 and client002 to log in to the SSH server using STelnet.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172360132__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Authentication mode of the user client001: password authentication</p>
</li><li><p>Authentication mode of the user client002: DSA authentication (public key: dsakey001)</p>
</li><li><p>IP address of the SSH server: 10.1.1.1</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172360132__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure the server to generate a local key pair.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname SSH Server</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server]<strong> dsa local-key-pair create</strong></pre>
<pre class="screen">Info: The key name will be: SSH SERVER_Host_DSA
Info: The key modulus can be any one of the following : 2048.
Info: Key pair generation will take a short while.
Info: Generating keys...
Info: Succeeded in creating the DSA host keys.</pre>
</p></li><li><span>Create SSH users on the server.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172360132__en-us_task_0172360129_p1375967860214018">SSH users can be authenticated in password, RSA, password-RSA, ECC, password-ECC, DSA, password-DSA,<span> SM2, password-SM2,</span> or all mode.</p>
<ul id="EN-US_TASK_0172360132__en-us_task_0172360129_ul1159929835214018"><li id="EN-US_TASK_0172360132__en-us_task_0172360129_li1926653127214018"><p id="EN-US_TASK_0172360132__en-us_task_0172360129_p1500676023214018"><a name="EN-US_TASK_0172360132__en-us_task_0172360129_li1926653127214018"></a><a name="en-us_task_0172360129_li1926653127214018"></a>If the authentication mode of an SSH user is password, password-RSA, password-DSA,<span> password-SM2,</span> or password-ECC, a local user with the same name as the SSH user must be configured.</p>
</li><li id="EN-US_TASK_0172360132__en-us_task_0172360129_li2014671656214018"><p id="EN-US_TASK_0172360132__en-us_task_0172360129_p1211860143214018"><a name="EN-US_TASK_0172360132__en-us_task_0172360129_li2014671656214018"></a><a name="en-us_task_0172360129_li2014671656214018"></a>If the authentication mode of an SSH user is RSA, password-RSA, DSA, password-DSA,<span> SM2, password-SM2,</span><span> ECC, password-ECC,</span> or all, the RSA, DSA,<span> SM2,</span><span> or ECC</span> public key generated on the SSH client needs to be saved to the server.</p>
</li></ul>
</div></div>
<p># Configure VTY user interfaces.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>user-interface vty 0 4</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-ui-vty0-4] <strong>authentication-mode aaa</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-ui-vty0-4] <strong>protocol inbound ssh</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-ui-vty0-4] <strong>user privilege level 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-ui-vty0-4] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-ui-vty0-4] <strong>quit</strong></pre>
<ul><li><p>Create an SSH user named client001.</p>
<p># Create an SSH user named client001 and configure password authentication for it.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>ssh user client001</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh user client001 authentication-type password</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server cipher aes256_gcm aes128_gcm aes256_ctr aes192_ctr aes128_ctr</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server hmac sha2_512 sha2_256</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server key-exchange dh_group_exchange_sha256</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server publickey rsa_sha2_256 rsa_sha2_512</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server dh-exchange min-len 3072</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh client publickey rsa_sha2_256 rsa_sha2_512</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh client cipher aes256_gcm aes128_gcm aes256_ctr aes192_ctr aes128_ctr </strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh client hmac sha2_512 sha2_256 </strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh client key-exchange dh_group_exchange_sha256</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
<p># Configure a password for the SSH user client001.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>aaa</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client001 password</strong></pre>
<pre class="screen">Please configure the password (<span>8-128</span>)
Enter Password:
Confirm Password:</pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172360132__en-us_task_0172359668_p1613320501544">The password must meet the following requirements:</p>
<ul id="EN-US_TASK_0172360132__en-us_task_0172359668_ul813517501544"><li id="EN-US_TASK_0172360132__en-us_task_0172359668_li141338508412"><p id="EN-US_TASK_0172360132__en-us_task_0172359668_p_1"><a name="EN-US_TASK_0172360132__en-us_task_0172359668_li141338508412"></a><a name="en-us_task_0172359668_li141338508412"></a>The password is entered in man-machine interaction mode. The system does not display the entered password.</p>
</li><li id="EN-US_TASK_0172360132__en-us_task_0172359668_li1713412501143"><p id="EN-US_TASK_0172360132__en-us_task_0172359668_p_2"><a name="EN-US_TASK_0172360132__en-us_task_0172359668_li1713412501143"></a><a name="en-us_task_0172359668_li1713412501143"></a>A password is a string of 8 to 16 case-sensitive characters and must contain at least two types of the following characters: uppercase letters, lowercase letters, digits, and special characters.</p>
</li><li id="EN-US_TASK_0172360132__en-us_task_0172359668_p_3">Special characters exclude question marks (?) and spaces. However, spaces are allowed in the password if the password is enclosed in quotation marks.<ul id="EN-US_TASK_0172360132__en-us_task_0172359668_ul7134165012419"><li id="EN-US_TASK_0172360132__en-us_task_0172359668_li14134115012414">Double quotation marks cannot contain double quotation marks if spaces are used in a password.</li><li id="EN-US_TASK_0172360132__en-us_task_0172359668_li81341508418">Double quotation marks can contain double quotation marks if no space is used in a password.</li></ul>
<p id="EN-US_TASK_0172360132__en-us_task_0172359668_p_4">For example, the password "Aa123"45"" is valid, but the password "Aa 123"45"" is invalid.</p>
</li></ul>
<p id="EN-US_TASK_0172360132__en-us_task_0172359668_p2135950540">The configured password is displayed in ciphertext in the configuration file.</p>
</div></div>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client001 service-type ssh</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-aaa] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-aaa] <strong>quit</strong></pre>
</li><li><p>Create an SSH user named client002.</p>
<p># Create an SSH user named client002 and configure DSA authentication for it.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>ssh user client002</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh user client002 authentication-type dsa</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server cipher aes256_gcm aes128_gcm aes256_ctr aes192_ctr aes128_ctr</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server hmac sha2_512 sha2_256</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server key-exchange dh_group_exchange_sha256</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server publickey rsa_sha2_256 rsa_sha2_512</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh server dh-exchange min-len 3072</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh client publickey rsa_sha2_256 rsa_sha2_512</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh client cipher aes256_gcm aes128_gcm aes256_ctr aes192_ctr aes128_ctr </strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh client hmac sha2_512 sha2_256 </strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server]<strong> </strong><strong>ssh client key-exchange dh_group_exchange_sha256</strong> </pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh authorization-type default root</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
</li></ul>
</p></li><li><span>Configure a DSA public key on the server.</span><p><p># Configure the client client002 to generate a local key pair.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname client002</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client002] <strong>dsa local-key-pair create</strong></pre>
<pre class="screen">Info: The key name will be: client002_Host_DSA
Info: The key modulus can be any one of the following : 2048.
Info: Key pair generation will take a short while.
Info: Generating keys...
Info: Succeeded in creating the DSA host keys.</pre>
<pre class="screen">[<span class="keyword">*</span>client002]<strong> commit</strong></pre>
<p># Check the DSA public key generated on the client.</p>
<pre class="screen">[<span class="keyword">*</span>client002] <strong>display dsa local-key-pair public</strong></pre>
<pre class="screen">========================================================
Time of Key pair created : 2013-05-21 17:18:17
Key name    : client002_Host_DSA
Key modulus : 1024
Key type    : DSA Encryption Key
========================================================
Key code:

3082019F
  028180
    A49C5EAF 906C80B1 C474CCB0 D47C6965 22DFCF3C
    9602BAD8 FCE8F7E3 7A69BE18 8CB7D858 6B50EEBC
    54BFB089 61A0DD31 5F7F3080 F0DB47E4 ECDCC10E
    7EC18D31 35CD78F7 E002FB6B 4CB59BA5 E2CDB898
    43FAD059 98B8EEA8 E7395FC7 CA9D1655 47927368
    9914AF09 6CFDC125 6CC8A07F DDDE603B F31C4EA4
    0B752AC7 817E877F 
  0214
    CBC5C0BC 2D7B6DFE 15A7F9A3 6F6ED15B 6ECC9F27
  028180
    6D3202E7 4DCAC5DB 97034305 8D79FDB2 76D5CAA2
    C8D00C3D 666F61D4 F2E36445 4027FD04 0D61B2A3
    AF3CED6B C36CC68D E8DF35F9 FAF802ED 73BCBD66
    C55AE0F6 69530C14 1B33A5A1 CF77D636 75A5EF3B
    264AB66E 2A8CFFB1 690E45F8 6FACF1B3 E2A11328
    C14BA7F3 CA0D198B 3ED94368 45BA5E89 F1ADB79E
    F459F826 B9A5CF6D 
  028180
    409C0AE7 1DDDDA8C F3924608 DC32728C D6FA51FB
    B4933D03 E30780E1 676AA9EE E3A9B677 97DB1D3A
    57AF479C 3BDC4096 291B4548 43D88851 DCFEB04D
    593F1459 9145FB0B 071CEEE5 5F951E64 CA6C4C16
    6192B926 9AD8764E E9F8661C 8EC08D08 BD83BCE3
    E054EE39 20207689 433B07A1 1219B9F3 945E88F0
    3A8FC0FB 9883905B 

Host public Key for PEM format Code:
---- BEGIN SSH2 PUBLIC KEY ----
AAAAB3NzaC1kc3MAAACBAKScXq+QbICxxHTMsNR8aWUi3888lgK62Pzo9+N6ab4Y
jLfYWGtQ7rxUv7CJYaDdMV9/MIDw20fk7NzBDn7BjTE1zXj34AL7a0y1m6XizbiY
Q/rQWZi47qjnOV/Hyp0WVUeSc2iZFK8JbP3BJWzIoH/d3mA78xxOpAt1KseBfod/
AAAAFQDLxcC8LXtt/hWn+aNvbtFbbsyfJwAAAIBtMgLnTcrF25cDQwWNef2ydtXK
osjQDD1mb2HU8uNkRUAn/QQNYbKjrzzta8Nsxo3o3zX5+vgC7XO8vWbFWuD2aVMM
FBszpaHPd9Y2daXvOyZKtm4qjP+xaQ5F+G+s8bPioRMowUun88oNGYs+2UNoRbpe
ifGtt570WfgmuaXPbQAAAIBAnArnHd3ajPOSRgjcMnKM1vpR+7STPQPjB4DhZ2qp
7uOptneX2x06V69HnDvcQJYpG0VIQ9iIUdz+sE1ZPxRZkUX7Cwcc7uVflR5kymxM
FmGSuSaa2HZO6fhmHI7AjQi9g7zj4FTuOSAgdolDOwehEhm585ReiPA6j8D7mIOQ
Ww==
---- END SSH2 PUBLIC KEY ----

Public key code for pasting into OpenSSH authorized_keys file:
ssh-dss AAAAB3NzaC1kc3MAAACBAKScXq+QbICxxHTMsNR8aWUi3888lgK62Pzo9+N6ab4YjLfYWGtQ7rxUv7CJYaDdMV9/MIDw20fk7NzBDn7BjTE1zXj34AL7a0y1m6XizbiYQ/rQWZi47qjnOV/Hyp0WVUeSc2iZFK8JbP3BJWzIoH/d3mA78xxOpAt1KseBfod/AAAAFQDLxcC8LXtt/hWn+aNvbtFbbsyfJwAAAIBtMgLnTcrF25cDQwWNef2ydtXKosjQDD1mb2HU8uNkRUAn/QQNYbKjrzzta8Nsxo3o3zX5+vgC7XO8vWbFWuD2aVMMFBszpaHPd9Y2daXvOyZKtm4qjP+xaQ5F+G+s8bPioRMowUun88oNGYs+2UNoRbpeifGtt570WfgmuaXPbQAAAIBAnArnHd3ajPOSRgjcMnKM1vpR+7STPQPjB4DhZ2qp7uOptneX2x06V69HnDvcQJYpG0VIQ9iIUdz+sE1ZPxRZkUX7Cwcc7uVflR5kymxMFmGSuSaa2HZO6fhmHI7AjQi9g7zj4FTuOSAgdolDOwehEhm585ReiPA6j8D7mIOQWw== dsa-key
</pre>
<p># Copy the DSA public key generated on the client to the server.</p>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>dsa peer-public-key dsakey001 encoding-type der</strong>
Info: Enter "DSA public key" view, return system view with "peer-public-key end".</pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key] <strong>public-key-code begin</strong>
Info: Enter "DSA key code" view, return last view with "public-key-code end".</pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>3082019F</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>028180</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>A49C5EAF 906C80B1 C474CCB0 D47C6965 22DFCF3C</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>9602BAD8 FCE8F7E3 7A69BE18 8CB7D858 6B50EEBC</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>54BFB089 61A0DD31 5F7F3080 F0DB47E4 ECDCC10E</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>7EC18D31 35CD78F7 E002FB6B 4CB59BA5 E2CDB898</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>43FAD059 98B8EEA8 E7395FC7 CA9D1655 47927368</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>9914AF09 6CFDC125 6CC8A07F DDDE603B F31C4EA4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>0B752AC7 817E877F</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>0214</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>CBC5C0BC 2D7B6DFE 15A7F9A3 6F6ED15B 6ECC9F27</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>028180</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>6D3202E7 4DCAC5DB 97034305 8D79FDB2 76D5CAA2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>C8D00C3D 666F61D4 F2E36445 4027FD04 0D61B2A3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>AF3CED6B C36CC68D E8DF35F9 FAF802ED 73BCBD66</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>C55AE0F6 69530C14 1B33A5A1 CF77D636 75A5EF3B</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>264AB66E 2A8CFFB1 690E45F8 6FACF1B3 E2A11328</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>C14BA7F3 CA0D198B 3ED94368 45BA5E89 F1ADB79E</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>F459F826 B9A5CF6D</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>028180</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>409C0AE7 1DDDDA8C F3924608 DC32728C D6FA51FB</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>B4933D03 E30780E1 676AA9EE E3A9B677 97DB1D3A</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>57AF479C 3BDC4096 291B4548 43D88851 DCFEB04D</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>593F1459 9145FB0B 071CEEE5 5F951E64 CA6C4C16</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>6192B926 9AD8764E E9F8661C 8EC08D08 BD83BCE3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>E054EE39 20207689 433B07A1 1219B9F3 945E88F0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>3A8FC0FB 9883905B</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key-dsa-key-code] <strong>public-key-code end</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server-dsa-public-key] <strong>peer-public-key end</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
</p></li><li><span>Bind the DSA public key of the SSH client to the SSH user client002.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>ssh user client002 assign dsa-key dsakey001</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
</p></li><li><span>Enable the STelnet service on the SSH server.</span><p><p># Enable the STelnet service.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>stelnet server enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh server-source</strong> <strong>-i <span>GigabitEthernet0/0/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
</p></li><li><span>Set the service type of the SSH users client001 and client002 to STelnet.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>ssh user client001 service-type stelnet</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>ssh user client002 service-type stelnet</strong></pre>
<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
</p></li><li><span>Connect the STelnet clients to the SSH server.</span><p><p># For the first login, enable SSH client first-time authentication.</p>
<p>Enable first-time authentication for the client client001.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname client001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client001] <strong>ssh client first-time enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>client001] <strong>commit</strong></pre>
<p>Enable first-time authentication for the client client002.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client002] <strong>ssh client first-time enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>client002] <strong>commit</strong></pre>
<p># Connect the STelnet client client001 to the SSH server in password authentication mode by entering the username and password.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client001]<strong> stelnet 10.1.1.1</strong></pre>
<pre class="screen">Please input the username:client001
Trying 10.1.1.1 ...
Press CTRL+K to abort
Connected to 10.1.1.1 ...
The server is not authenticated. Continue to access it?(Y/N):y
Save the server's public key?(Y/N):y
The server's public key will be saved with the name 10.1.1.1. Please wait...
Enter password:   </pre>
<p>The following information indicates that the login is successful:</p>
<pre class="screen">Info: The max number of VTY users is 20, and the number
      of current VTY users on line is 6.
      The current login time is 2011-01-06 11:42:42.</pre>
<pre class="screen">&lt;SSH Server&gt;</pre>
<p># Connect the STelnet client client002 to the SSH server in DSA authentication mode.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>client002]<strong> stelnet 10.1.1.1</strong></pre>
<pre class="screen">Trying 10.1.1.1 ...
Press CTRL + K to abort
Connected to 10.1.1.1 ...
Please input the username: client002
Please select public key type for user authentication [R for RSA/D for DSA/E for ECC] Please select [R/D/E]:
Enter password:
Warning: The initial password poses security risks.
The password needs to be changed. Change now? [Y/N]:n
Info: The max number of VTY users is 15, the number of current VTY users online is 1, and total number of terminal users online is 1.
      The current login time is 2015-07-13 15:33:08.
      The last login time is 2015-07-13 15:26:18 from 127.0.0.1 through SSH.</pre>
<pre class="screen">&lt;SSH Server&gt;</pre>
<p>If the login succeeds, the user view is displayed. If the login fails, the "Session is disconnected" message is displayed.</p>
</p></li><li><span>Verify the configuration.</span><p><p># Check the status of the SSH server.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>display ssh server status</strong></pre>
<pre class="screen">SSH Version                                : <span>2.0</span>
SSH authentication timeout (Seconds)       : 60
SSH authentication retries (Times)         : 3
SSH server key generating interval (Hours) : 0
SSH version 1.x compatibility              : Enable
SSH server keepalive                       : Disable
SFTP IPv4 server                           : Enable
<span>SFTP IPv6 server                           : Enable</span>
STELNET IPv4 server                        : Enable
<span>STELNET IPv6 server                        : Enable</span>
SNETCONF IPv4 server                       : Enable
<span>SNETCONF IPv6 server                       : Enable</span>
SNETCONF IPv4 server port(830)             : Disable
<span>SNETCONF IPv6 server port(830)             : Disable</span>
SCP IPv4 server                            : Enable
<span>SCP IPv6 server                            : Enable</span>
SSH port forwarding                        : Disable
SSH IPv4 server port                       : 22
<span>SSH IPv6 server port                       : 22</span>
ACL name                                   :
ACL number                                 :
<span>ACL6 name                                  : </span>
<span>ACL6 number                                :</span>
SSH server ip-block                        : Enable</pre>
<p># Check SSH user information.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>display ssh user-information</strong></pre>
<pre class="screen">----------------------------------------------------
User Name               : client001
Authentication-Type     : password
User-public-key-name    : -
User-public-key-type    : -
Sftp-directory          : -
Service-type            : stelnet

User Name               : client002
Authentication-Type     : dsa
User-public-key-name    : dsakey001
User-public-key-type    : -
Sftp-directory          : -
Service-type            : stelnet
----------------------------------------------------</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172360132__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>SSH server configuration file</p>
<pre class="screen">#
 sysname SSH Server
#
interface <span>GigabitEthernet0/0/0</span>   
 undo shutdown 
 ip address 10.1.1.1 255.255.0.0 
#
dsa peer-public-key dsakey001
public-key-code begin
3082019F
  028180
    A49C5EAF 906C80B1 C474CCB0 D47C6965 22DFCF3C
    9602BAD8 FCE8F7E3 7A69BE18 8CB7D858 6B50EEBC
    54BFB089 61A0DD31 5F7F3080 F0DB47E4 ECDCC10E
    7EC18D31 35CD78F7 E002FB6B 4CB59BA5 E2CDB898
    43FAD059 98B8EEA8 E7395FC7 CA9D1655 47927368
    9914AF09 6CFDC125 6CC8A07F DDDE603B F31C4EA4
    0B752AC7 817E877F 
  0214
    CBC5C0BC 2D7B6DFE 15A7F9A3 6F6ED15B 6ECC9F27
  028180
    6D3202E7 4DCAC5DB 97034305 8D79FDB2 76D5CAA2
    C8D00C3D 666F61D4 F2E36445 4027FD04 0D61B2A3
    AF3CED6B C36CC68D E8DF35F9 FAF802ED 73BCBD66
    C55AE0F6 69530C14 1B33A5A1 CF77D636 75A5EF3B
    264AB66E 2A8CFFB1 690E45F8 6FACF1B3 E2A11328
    C14BA7F3 CA0D198B 3ED94368 45BA5E89 F1ADB79E
    F459F826 B9A5CF6D 
  028180
    409C0AE7 1DDDDA8C F3924608 DC32728C D6FA51FB
    B4933D03 E30780E1 676AA9EE E3A9B677 97DB1D3A
    57AF479C 3BDC4096 291B4548 43D88851 DCFEB04D
    593F1459 9145FB0B 071CEEE5 5F951E64 CA6C4C16
    6192B926 9AD8764E E9F8661C 8EC08D08 BD83BCE3
    E054EE39 20207689 433B07A1 1219B9F3 945E88F0
    3A8FC0FB 9883905B 
public-key-code end
peer-public-key end
#
<span>stelnet server enable</span>
ssh server-source -i <span>GigabitEthernet0/0/0</span>
ssh user client001
ssh user client001 authentication-type password
ssh user client001 service-type stelnet
ssh user client002
ssh user client002 assign dsa-key dsakey001
ssh user client002 authentication-type dsa
ssh authorization-type default root
ssh user client002 service-type stelnet
#
ssh server cipher aes256_gcm aes128_gcm aes256_ctr aes192_ctr aes128_ctr 
ssh server hmac sha2_512 sha2_256 
ssh server key-exchange dh_group_exchange_sha256
#
ssh server publickey rsa_sha2_256 rsa_sha2_512
#
ssh server dh-exchange min-len 3072
#
ssh client publickey dsa ecc rsa rsa_sha2_256 rsa_sha2_512
#
ssh client cipher aes256_gcm aes128_gcm aes256_ctr aes192_ctr aes128_ctr
ssh client hmac sha2_512 sha2_256
ssh client key-exchange dh_group_exchange_sha256
#
aaa
 local-user client001 password cipher @%@%UyQs4,KTtSwJo(4QmW#K,LC:@%@%
 local-user client001 service-type ssh
 #
user-interface vty 0 4
 authentication-mode aaa
 protocol inbound ssh
 user privilege level 3
#
return</pre>
</li><li><p>SSH client client001 configuration file</p>
<pre class="screen">#
 sysname client001
#
interface <span>GigabitEthernet0/0/0</span>
 ip address 10.1.2.2 255.255.255.0
#
ssh client first-time enable
#
return</pre>
</li><li><p>SSH client client002 configuration file</p>
<pre class="screen">#
 sysname client002
#
interface <span>GigabitEthernet0/0/0</span>
 ip address 10.1.3.3 255.255.255.0
#
ssh client first-time enable
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0108.html">Configuration Examples for Accessing Other Devices
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0110.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0120.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>