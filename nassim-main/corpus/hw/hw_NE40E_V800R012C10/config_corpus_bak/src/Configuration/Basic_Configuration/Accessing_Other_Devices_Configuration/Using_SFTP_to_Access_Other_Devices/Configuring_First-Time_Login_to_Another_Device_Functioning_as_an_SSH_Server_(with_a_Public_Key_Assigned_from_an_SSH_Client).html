
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring First-Time Login to Another Device Functioning as an SSH Server (with a Public Key Assigned from an SSH Client)">
<meta name="abstract" content="To allow an SSH client (SFTP client in this case) with first-time authentication disabled to successfully log in to an SSH server for the first time, configure the SSH client to assign an RSA, DSA, SM2, or ECC public key to the SSH server before the login.">
<meta name="description" content="To allow an SSH client (SFTP client in this case) with first-time authentication disabled to successfully log in to an SSH server for the first time, configure the SSH client to assign an RSA, DSA, SM2, or ECC public key to the SSH server before the login.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0101.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0103.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0105.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="basicvrp,w00800033,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="featurename" content="Accessing Other Devices">
<meta name="featuretype" content="Basic Configurations">
<meta name="OWNER" content="lwx1238418">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="lwx1238418">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172360110">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring First-Time Login to Another Device Functioning as an SSH Server (with a Public Key Assigned from an SSH Client)</title>
</head>
<body><a name="EN-US_TASK_0172360110"></a><a name="EN-US_TASK_0172360110"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring First-Time Login to Another Device Functioning as an SSH Server (with a Public Key Assigned from an SSH Client)</h1>
<div class="taskbody"><p>To allow an SSH client (SFTP client in this case) with first-time authentication disabled to successfully log in to an SSH server for the first time, configure the SSH client to assign an RSA, DSA,<span> SM2,</span> or ECC public key to the SSH server before the login.</p>
<div class="context"><a name="EN-US_TASK_0172360110__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If first-time authentication is disabled on an SSH client (SFTP client in this case), the client cannot log in to the SSH server because of a failure to check the validity of the RSA, DSA,<span> SM2,</span> or ECC public key on the server. As such, the SFTP client must assign an RSA, DSA,<span> SM2,</span> or ECC public key to the SSH server before logging in to it.</p>
<p>Perform the following steps on the SSH client:</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For security purposes, you are advised not to use the RSA algorithm with a key length of less than 3072 bits. Using RSA_SHA2_256 and RSA_SHA2_512 algorithms for higher security is recommended.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172360110__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li id="EN-US_TASK_0172360110__en-us_task_0172360082_step1730027754214018"><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmd1795364745214018">Run the <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname1003990876214018">system-view</span></b></a> command to enter the system view.</span></li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_step1561949499214018"><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmd845128765214018">(Optional) Run the <a href="cmdqueryname=ssh+client+publickey"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname954053389214018">ssh client publickey</span></b></a> { <strong><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdparmname830235151214018">dsa</span></strong> | <strong><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdparmname1651408617214018">ecc</span></strong> | <strong><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdparmname266157461214018">rsa</span></strong> | <strong><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdparmname131113318613">sm2</span></strong>  | <strong><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdparmname4109530161712">rsa_sha2_256</span></strong> | <strong><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdparmname96771234121713">rsa_sha2_512</span></strong> } <sup id="EN-US_TASK_0172360110__en-us_task_0172360082_sup205536605214018">*</sup> command to enable the corresponding public key algorithm on the SSH client.</span><p><div class="note" id="EN-US_TASK_0172360110__en-us_task_0172360082_note11796183194018"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172360110__en-us_task_0172360082_p21701929153617">The algorithms specified using <strong id="EN-US_TASK_0172360110__en-us_task_0172360082_b2070103911317">dsa</strong> and <strong id="EN-US_TASK_0172360110__en-us_task_0172360082_b17029391231">rsa</strong> in the command are weak security algorithms, which are not recommended. To use such an algorithm, run the undo crypto weak-algorithm disable command to enable the weak security algorithm function.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_step_1"><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmd500205307214018">Perform any of the following operations based on the selected algorithm:</span><p><ul id="EN-US_TASK_0172360110__en-us_task_0172360082_ul95261196214018"><li id="EN-US_TASK_0172360110__en-us_task_0172360082_li38037595214018">To enter the RSA public key view, run the <a href="cmdqueryname=rsa+peer-public-key"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname241775648214018">rsa peer-public-key</span></b></a> <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname1947985730214301">key-name</span></i> command.</li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_li1224427938214018">To enter the DSA public key view, run the <a href="cmdqueryname=dsa+peer-public-key"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname1849188811214112">dsa peer-public-key</span></b></a> <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname719633374214112">key-name</span></i> <strong><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdparmname909607173214112">encoding-type</span></strong> <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname478642875117">enc-type</span></i> command.</li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_li1050837215214018">To enter the ECC public key view, run the <a href="cmdqueryname=ecc+peer-public-key"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname2060778641214018">ecc peer-public-key</span></b></a> <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname1903095638214301">key-name</span></i> command.</li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_li577362324214018">To enter the SM2 public key view, run the <a href="cmdqueryname=sm2+peer-public-key"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname120598615214018">sm2 peer-public-key</span></b></a> <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname737338010214018">key-name</span></i> command.</li></ul>
</p></li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_step_2"><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmd848040707214018">Run the <a href="cmdqueryname=public-key-code+begin"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname1834266537214018">public-key-code begin</span></b></a> command to access the public key editing view.</span></li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_step_3"><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmd967149388214018">Enter <em id="EN-US_TASK_0172360110__en-us_task_0172360082_i647545535214018">hex-data</em> to edit the public key.</span><p><p id="EN-US_TASK_0172360110__en-us_task_0172360082_p1676186435214018">The public key must be a hexadecimal string complying with the public key format. It is generated randomly on the SSH server.</p>
<div class="note" id="EN-US_TASK_0172360110__en-us_task_0172360082_note376838483214018"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172360110__en-us_task_0172360082_p595108778214018">After entering the public key editing view, you can copy the RSA, DSA,<span> SM2,</span> or ECC public key generated on the server to the SSH client.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_step_4"><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmd1493470876214018">Run the <a href="cmdqueryname=public-key-code+end"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname1471620939214018">public-key-code end</span></b></a> command to exit the public key editing view.</span><p><p id="EN-US_TASK_0172360110__en-us_task_0172360082_p405729236214018">If the configured public key contains invalid characters or does not comply with encoding rules, an error message is displayed, and the configured public key is discarded. If the configured public key is valid, it is saved to the client's public key chain table.</p>
<ul id="EN-US_TASK_0172360110__en-us_task_0172360082_ul619456042214018"><li id="EN-US_TASK_0172360110__en-us_task_0172360082_li1324139039214018"><p id="EN-US_TASK_0172360110__en-us_task_0172360082_p431794612214018"><a name="EN-US_TASK_0172360110__en-us_task_0172360082_li1324139039214018"></a><a name="en-us_task_0172360082_li1324139039214018"></a>If the value of <em id="EN-US_TASK_0172360110__en-us_task_0172360082_i619802217339">hex-data</em> is invalid, key generation fails after you perform this step.</p>
</li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_li1942127252214018"><p id="EN-US_TASK_0172360110__en-us_task_0172360082_p1728773611214018"><a name="EN-US_TASK_0172360110__en-us_task_0172360082_li1942127252214018"></a><a name="en-us_task_0172360082_li1942127252214018"></a>If <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname1811467050214018">key-name</span></i> specified in <a href="#EN-US_TASK_0172360110__en-us_task_0172360082_step_1">Step 2</a> has been deleted in another window, the system displays an error message and returns to the system view when you perform this step.</p>
</li></ul>
</p></li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_step_5"><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmd327356716214018">Run the <a href="cmdqueryname=peer-public-key+end"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname765471918214018">peer-public-key end</span></b></a> command to exit the public key view and return to the system view.</span></li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_step_6"><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmd149152467214018">Perform any of the following operations based on the selected algorithm:</span><p><ul id="EN-US_TASK_0172360110__en-us_task_0172360082_ul1430777980214018"><li id="EN-US_TASK_0172360110__en-us_task_0172360082_li1746220630214018">Run the <a href="cmdqueryname=ssh+client+peer"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname601652517214018">ssh client peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname1667915274119">server-name</span></i> <strong><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdparmname774492567214018">assign rsa-key</span></strong> <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname1343666256214018">key-name</span></i> command to assign an RSA public key to the SSH server.</li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_li1235849313214018">Run the <a href="cmdqueryname=ssh+client+peer"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname236806342214018">ssh client peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname1179616406118">server-name</span></i> <strong><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdparmname2147302354214018">assign dsa-key</span></strong> <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname95183553214018">key-name</span></i> command to assign a DSA public key to the SSH server.</li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_li301490871214018">Run the <a href="cmdqueryname=ssh+client+peer"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname680100905214018">ssh client peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname147122461613">server-name</span></i> <strong><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdparmname800425615214018">assign ecc-key</span></strong> <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname1535950357214018">key-name</span></i> command to assign an ECC public key to the SSH server.</li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_li1859546955214018">Run the <a href="cmdqueryname=ssh+client+peer"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname878449424214018">ssh client peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname83501652014">server-name</span></i> <strong><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdparmname928662560214018">assign sm2-key</span></strong> <i><span class="varname" id="EN-US_TASK_0172360110__en-us_task_0172360082_varname1845256196214018">key-name</span></i> command to assign an SM2 public key to the SSH server.</li></ul>
</p></li><li id="EN-US_TASK_0172360110__en-us_task_0172360082_step521896947214018"><span id="EN-US_TASK_0172360110__en-us_task_0172360082_cmd1198773881214018">Run the <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172360110__en-us_task_0172360082_cmdname1697669961214018">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0101.html">Using SFTP to Access Other Devices
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0103.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_basic_cfg_0105.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>