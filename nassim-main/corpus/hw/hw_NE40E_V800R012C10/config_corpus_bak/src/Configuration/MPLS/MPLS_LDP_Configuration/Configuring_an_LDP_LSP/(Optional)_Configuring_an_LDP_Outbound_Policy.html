
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring an LDP Outbound Policy">
<meta name="abstract" content="Configuring an LDP outbound policy helps prevent an LSR from establishing unwanted LSPs, saving memory resources.">
<meta name="description" content="Configuring an LDP outbound policy helps prevent an LSR from establishing unwanted LSPs, saving memory resources.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2049.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="b00896120">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368460">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring an LDP Outbound Policy</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172368460"></a><a name="EN-US_TASK_0172368460"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring an LDP Outbound Policy</h1>
<div class="taskbody"><p>Configuring an LDP outbound policy helps prevent an LSR from establishing unwanted LSPs, saving memory resources.</p>
<div class="context"><a name="EN-US_TASK_0172368460__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Generally, an LSR sends Label Mapping messages to all its LDP peers. This results in the establishment of numerous LSPs, wasting resources and leading to unstable device running status, especially on low-performance devices. To address these issues, an LDP outbound policy can be configured to limit Label Mapping messages to be sent, thereby reducing the number of LDP LSPs to be established and memory resource consumption.</p>
<div class="p">The following parameters can be specified in an LDP outbound policy to limit Label Mapping messages to be sent:<ul><li><strong><span>none</span></strong>: filters out all FECs. If this parameter is specified, the device does not send Label Mapping messages for IGP routes to specified peers.</li><li><strong><span>host</span></strong>: allows only the FECs on host routes to pass. If this parameter is specified, the device sends Label Mapping messages only for host routes to specified peers.</li><li><strong><span>ip-prefix</span></strong>: allows only the FECs on routes in a specified IP prefix list. If this parameter is specified, the device sends Label Mapping messages only for IGP routes in the specified IP prefix list to specified peers.</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368460__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=mpls+ldp"><b><span class="cmdname">mpls ldp</span></b></a></span><p><p>The MPLS-LDP view is displayed.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a></span><p><p>The MPLS-LDP-IPv4 view is displayed.</p>
</p></li><li><span>Perform either of the following steps to apply the outbound policy that allows Label Mapping messages for specified IGP routes or BGP labeled routes to be sent to a specified LDP peer:</span><p><ul><li><p>Run the <a href="cmdqueryname=outbound+peer+peer-group+all+fec+none+host+ip-prefix"><b><span class="cmdname">outbound peer</span></b></a> { <i><span class="varname">peer-id</span></i> | <strong><span>peer-group</span></strong> <i><span class="varname">peer-group-name</span></i> | <strong><span>all</span></strong> } <strong><span>fec</span></strong> { <strong><span>none</span></strong> | <strong><span>host</span></strong> | <strong><span>ip-prefix</span></strong> <i><span class="varname">prefix-name</span></i> } command to apply an outbound policy to specified IGP routes to specified peers.</p>
</li><li><p>Run the <a href="cmdqueryname=outbound+peer+peer-group+all+bgp-label-route+none+ip-prefix"><b><span class="cmdname">outbound peer</span></b></a> { <i><span class="varname">peer-id</span></i> | <strong><span>peer-group</span></strong> <i><span class="varname">peer-group-name</span></i> | <strong><span>all</span></strong> } <strong><span>bgp-label-route</span></strong> { <strong><span>none</span></strong> | <strong><span>ip-prefix</span></strong> <i><span class="varname">prefix-name</span></i> } command to apply an outbound policy to specified BGP labeled routes to specified peers.</p>
</li></ul>
</p><p><p>If FECs in the Label Mapping messages to be sent to an LDP peer group or all LDP peers are in the same range, specify either <strong><span>peer-group</span></strong> <i><span class="varname">peer-group-name</span></i> or <strong><span>all</span></strong> in the command.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">If multiple outbound policies are configured for a specified LDP peer, the earliest configuration takes effect. For example, the following configurations are performed in sequence:<pre class="screen"><strong>outbound peer 2.2.2.2 fec host</strong></pre>
<pre class="screen"><strong>outbound peer peer-group group1 fec none</strong></pre>
As group1 also contains an LDP peer with <i><span class="varname">peer-id</span></i> of 2.2.2.2, the following outbound policy takes effect for the peer:<pre class="screen"><strong>outbound peer 2.2.2.2 fec host</strong></pre>
</div>
<div class="p">If two outbound policies are configured in sequence and the <strong><span>peer</span></strong> parameters in the two commands are the same, the latter configuration overwrites the former. For example, the following configurations are performed in sequence:<pre class="screen"><strong>outbound peer 2.2.2.2 fec host</strong></pre>
<pre class="screen"><strong>outbound peer 2.2.2.2 fec none</strong></pre>
The second configuration overwrites the first one. This means that the following outbound policy takes effect for the LDP peer with <i><span class="varname">peer-id</span></i> of 2.2.2.2:<pre class="screen"><strong>outbound peer 2.2.2.2 fec none</strong></pre>
</div>
<p>MPLS and MPLS LDP must be enabled globally before an outbound policy is configured.</p>
<p>To delete all outbound policies simultaneously, run the <a href="cmdqueryname=undo+outbound+peer+all"><b><span class="cmdname">undo outbound peer all</span></b></a> command.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0015.html">Configuring an LDP LSP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2049.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0020.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>