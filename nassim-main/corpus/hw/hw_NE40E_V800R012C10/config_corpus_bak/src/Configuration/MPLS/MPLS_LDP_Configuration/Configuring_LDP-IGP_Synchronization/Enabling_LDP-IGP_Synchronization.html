
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling LDP-IGP Synchronization">
<meta name="abstract" content="LDP-IGP synchronization needs to be enabled on interfaces on both ends of the link between the node where a primary LSP and a backup LSP diverge from each other and its LDP peer on the primary LSP. LDP-IGP synchronization can be enabled either on an interface or in an IGP process.">
<meta name="description" content="LDP-IGP synchronization needs to be enabled on interfaces on both ends of the link between the node where a primary LSP and a backup LSP diverge from each other and its LDP peer on the primary LSP. LDP-IGP synchronization can be enabled either on an interface or in an IGP process.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0046.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ldp-p2pvrp,w00800033,z00545680,w00556928,w00606909,z00809835,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="b00896120">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368504">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Enabling LDP-IGP Synchronization</title>
</head>
<body><a name="EN-US_TASK_0172368504"></a><a name="EN-US_TASK_0172368504"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling LDP-IGP Synchronization</h1>
<div class="taskbody"><p>LDP-IGP synchronization needs to be enabled on interfaces on both ends of the link between the node where a primary LSP and a backup LSP diverge from each other and its LDP peer on the primary LSP. LDP-IGP synchronization can be enabled either on an interface or in an IGP process.</p>
<div class="context"><a name="EN-US_TASK_0172368504__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">LDP-IGP synchronization can be enabled in either of the following modes:<ul><li><p>Enable LDP-IGP synchronization in the interface view.</p>
<p>LDP-IGP synchronization can be enabled on specified interfaces if a few interfaces need to support this function.</p>
</li><li><p>Enable LDP-IGP synchronization in an IGP process.</p>
<p>After LDP-IGP synchronization is enabled in an IGP process, it is automatically enabled on all interfaces in the process. If LDP is enabled on all IGP-enabled interfaces of a node, this configuration mode is recommended.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Choose one of the preceding modes as needed.</p>
</div></div>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172368504__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Enable LDP-IGP synchronization in the interface view.</span><p><p>If OSPF is used, perform the following steps on the interfaces on both ends of the link between the node where the primary LSP and the backup LSP diverge from each other and its LDP peer on the primary LSP.</p>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ospf+ldp-sync"><b><span class="cmdname">ospf ldp-sync</span></b></a></span><p><p>LDP-OSPF synchronization is enabled for the interface.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To enable LDP-OSPF synchronization on a multi-area adjacency interface, run the <a href="cmdqueryname=ospf+ldp-sync+multi-area"><b><span class="cmdname">ospf ldp-sync</span></b></a> <strong><span>multi-area</span></strong> <i><span class="varname">area-id</span></i> command.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
<p><p>If IS-IS is used, perform the following steps on the interfaces on both ends of the link between the node where the primary LSP and the backup LSP diverge from each other and its LDP peer on the primary LSP.</p>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=isis+enable"><b><span class="cmdname">isis enable</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span><p><p>IS-IS is enabled on the interface.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=isis+ldp-sync"><b><span class="cmdname">isis ldp-sync</span></b></a></span><p><p>LDP-IS-IS synchronization is enabled on the interface.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
<p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When LDP-IGP synchronization and LDP GTSM are configured on an interface, an LDP session needs to be established over a non-direct link. Therefore, the number of GTSM hops must be set based on the actual hop count and cannot be set to 1. If the number of GTSM hops is set to 1, the LDP session cannot be established. As a result, the route cannot be switched back or LDP-IGP synchronization fails.</p>
</div></div>
</p></li><li><span>Enable LDP-IGP synchronization in an IGP process.</span><p><p>If OSPF is used, perform the following steps on the node on which the primary LSP and the backup LSP diverge from each other and its LDP peer on the primary LSP:</p>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span><p><p>The OSPF process is started, and the OSPF view is displayed.</p>
</p><p><p><i><span class="varname">process-id</span></i> specifies an OSPF process. If the <i><span class="varname">process-id</span></i> parameter is not specified, the default process ID 1 is used. To associate an OSPF process with a VPN instance and run OSPF in the VPN instance, run the <a href="cmdqueryname=ospf+vpn-instance"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <sup>*</sup> command. If a VPN instance is specified, the OSPF process belongs to the specified instance. Otherwise, the OSPF process belongs to the global instance.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=area"><b><span class="cmdname">area</span></b></a> <i><span class="varname">area-id</span></i></span><p><p>The OSPF area view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ldp-sync+enable"><b><span class="cmdname">ldp-sync enable</span></b></a></span><p><p>LDP-OSPF synchronization is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
<p><p>If IS-IS is used, perform the following steps on the node on which the primary LSP and the backup LSP diverge from each other and its LDP peer on the primary LSP:</p>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=isis"><b><span class="cmdname">isis</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span><p><p>The specified IS-IS process is started, and the IS-IS view is displayed.</p>
</p><p><p><i><span class="varname">process-id</span></i> specifies an IS-IS process ID. If the <i><span class="varname">process-id</span></i> parameter is not specified, the default process ID 1 is used. To associate an IS-IS process with a VPN instance, run the <a href="cmdqueryname=isis+vpn-instance"><b><span class="cmdname">isis</span></b></a> [ <i><span class="varname">process-id</span></i> ] [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] command.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ldp-sync+enable"><b><span class="cmdname">ldp-sync enable</span></b></a></span><p><p>LDP-IS-IS synchronization is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0046.html">Configuring LDP-IGP Synchronization
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2005.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>