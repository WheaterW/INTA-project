
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring CSPF">
<meta name="abstract" content="CSPF is configured to calculate the shortest path destined for a specified node.">
<meta name="description" content="CSPF is configured to calculate the shortest path destined for a specified node.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0217.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0218.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0005_copy.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,te-p2pvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368110">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring CSPF</title>
</head>
<body><a name="EN-US_TASK_0172368110"></a><a name="EN-US_TASK_0172368110"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring CSPF</h1>
<div class="taskbody"><p>CSPF is configured to calculate the shortest path destined for a specified node.</p>
<div class="context"><a name="EN-US_TASK_0172368110__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>After CSPF is configured, it can be used to calculate paths if a connection between the forwarder and controller is disconnected. If CSPF is not configured and a connection between the forwarder and controller is disconnected, no path can be created because only the controller can calculate paths.</p>
<p>CSPF calculates only the shortest path to the specified tunnel destination. During path computation, if there are multiple paths with the same weight, the optimal path is selected using the tie-breaking function.</p>
<div class="p">Tie-breaking is based on the percentage of the available bandwidth to the maximum reservable bandwidth. The maximum reservable bandwidth is configured using the <a href="cmdqueryname=mpls+te+bandwidth+max-reservable-bandwidth"><b><span class="cmdname" id="EN-US_TASK_0172368110__en-us_task_0172368100_cmdname1617014373115">mpls te bandwidth max-reservable-bandwidth</span></b></a> command, not the BC bandwidth configured using the <a href="cmdqueryname=mpls+te+bandwidth+bc0"><b><span class="cmdname" id="EN-US_TASK_0172368110__en-us_task_0172368100_cmdname137068427115">mpls te bandwidth bc0</span></b></a> command on an interface. The following tie-breaking policies are available:<ul id="EN-US_TASK_0172368110__en-us_task_0172368100_ul1535114514916"><li id="EN-US_TASK_0172368110__en-us_task_0172368100_li716265159214011"><p id="EN-US_TASK_0172368110__en-us_task_0172368100_p1622685878214011"><a name="EN-US_TASK_0172368110__en-us_task_0172368100_li716265159214011"></a><a name="en-us_task_0172368100_li716265159214011"></a>Most-fill: The path with a larger percentage of the available bandwidth to the maximum reservable bandwidth is preferred. That is, the path with lower bandwidth usage is preferred.</p>
</li><li id="EN-US_TASK_0172368110__en-us_task_0172368100_li1433489099214011"><p id="EN-US_TASK_0172368110__en-us_task_0172368100_p32251200214011"><a name="EN-US_TASK_0172368110__en-us_task_0172368100_li1433489099214011"></a><a name="en-us_task_0172368100_li1433489099214011"></a>Least-fill: The path with a smaller percentage of the available bandwidth to the maximum reservable bandwidth is preferred. That is, the path with higher bandwidth usage is preferred.</p>
</li><li id="EN-US_TASK_0172368110__en-us_task_0172368100_li788505434214011"><p id="EN-US_TASK_0172368110__en-us_task_0172368100_p289243601214011"><a name="EN-US_TASK_0172368110__en-us_task_0172368100_li788505434214011"></a><a name="en-us_task_0172368100_li788505434214011"></a>Random: The device selects a path at random. This mode allows LSPs to be evenly distributed among links, regardless of their bandwidth.</p>
</li></ul>
</div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172368110__en-us_task_0172368100_p1169957809214045">The Most-fill and Least-fill modes are only effective when the difference in bandwidth usage between the two links exceeds 10%, such as 50% of link A bandwidth utilization and 45% of link B bandwidth utilization. The value is 5%. At this time, the Most-fill and Least-fill modes do not take effect, and the Random mode is still used.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368110__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=mpls"><b><span class="cmdname">mpls</span></b></a></span></span><p><p>The MPLS view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=mpls+te+cspf"><b><span class="cmdname">mpls te cspf</span></b></a></span></span><p><p>CSPF is enabled on the local node.</p>
</p></li><li id="EN-US_TASK_0172368110__step_preferred-igp"><span id="EN-US_TASK_0172368110__">(Optional) Run <span><a href="cmdqueryname=mpls+te+cspf+preferred-igp"><b><span class="cmdname">mpls te cspf preferred-igp</span></b></a> { <strong><span>isis</span></strong><span> [ <i><span class="varname">process-id</span></i> [ <strong><span>level-1</span></strong> | <strong><span>level-2</span></strong> ] ]</span> | <strong><span>ospf</span></strong><span> [ <i><span class="varname">process-id</span></i> [ <strong><span>area</span></strong> <i><span class="varname">area-id</span></i> ] ]</span> }</span></span><p><p>A preferred IGP is configured. <span>Its process and area or level can also be configured.</span></p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=mpls+te+cspf+multi-instance+shortest-path"><b><span class="cmdname">mpls te cspf multi-instance shortest-path</span></b></a> [ <strong><span>preferred-igp</span></strong> { <strong><span>isis</span></strong> | <strong><span>ospf</span></strong> } [ <i><span class="varname">process-id</span></i> ] ]</span></span><p><div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>This command is mutually exclusive with the <a href="cmdqueryname=mpls+te+cspf+preferred-igp"><b><span class="cmdname">mpls te cspf preferred-igp</span></b></a> command, which is executed in <a href="#EN-US_TASK_0172368110__step_preferred-igp">Step 4</a>. If both commands are run, the latest command configuration overrides the previous one.</p>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=mpls+te+cspf+optimize-mode+disable"><b><span class="cmdname">mpls te cspf optimize-mode disable</span></b></a></span><p><p>The optimization mode is disabled when CSPF calculates the path.</p>
<p>CSPF provides a method for selecting a path in the MPLS domain. By default, the optimization mode is used for path calculation, and the path calculation is performed from Egress to Ingress. Compared with the common calculation method, the optimization mode has higher efficiency.</p>
<p>The <a href="cmdqueryname=mpls+te+cspf+optimize-mode+disable"><b><span class="cmdname">mpls te cspf optimize-mode disable</span></b></a> command is used to disable the CSPF optimization mode. After the configuration, the path is calculated from Ingress to Egress.</p>
</p></li><li><span>(Optional) Configure a CR-LSP tie-breaking mode on the local node.</span><p><p>A CR-LSP tie-breaking mode can be configured globally or for a specific tunnel. The tunnel-specific tie-breaking configuration takes preference over the global configuration, and the global configuration is used by a tunnel only if no CR-LSP tie-breaking mode is configured for this tunnel.</p>
</p><ul><li>Global configuration in the MPLS view<p>Run the <a href="cmdqueryname=mpls+te+tie-breaking"><b><span class="cmdname">mpls te tie-breaking</span></b></a> { <strong><span>least-fill</span></strong> | <strong><span>most-fill</span></strong> | <strong><span>random</span></strong> } command to configure a CR-LSP tie-breaking mode on the local node.</p>
</li><li>Tunnel-specific configuration in the tunnel interface view<ol type="a"><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</li><li>Run the <a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">tunnel-number</span></i> command to enter the tunnel interface view of a specific MPLS TE tunnel.</li><li>Run the <a href="cmdqueryname=mpls+te+tie-breaking"><b><span class="cmdname">mpls te tie-breaking</span></b></a> { <strong><span>least-fill</span></strong> | <strong><span>most-fill</span></strong> | <strong><span>random</span></strong> } command to configure a CR-LSP tie-breaking mode for the tunnel.</li></ol>
</li></ul>
</li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0217.html">Configuring an Automatic RSVP-TE Tunnel
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0218.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0005_copy.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>