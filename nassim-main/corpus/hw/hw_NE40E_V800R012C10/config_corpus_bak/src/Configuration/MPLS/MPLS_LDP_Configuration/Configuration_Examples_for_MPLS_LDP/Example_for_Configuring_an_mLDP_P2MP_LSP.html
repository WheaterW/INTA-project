
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring an mLDP P2MP LSP">
<meta name="abstract" content="This section provides an example for configuring an mLDP P2MP LSP.">
<meta name="description" content="This section provides an example for configuring an mLDP P2MP LSP.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0038.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0045.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ldp-p2pvrp,w00800033,z00545680,w00556928,w00606909,z00809835,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="b00896120">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368603">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring an mLDP P2MP LSP</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172368603"></a><a name="EN-US_TASK_0172368603"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring an mLDP P2MP LSP</h1>
<div class="taskbody"><p>This section provides an example for configuring an mLDP P2MP LSP.</p>
<div class="context"><a name="EN-US_TASK_0172368603__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>The mLDP P2MP technique is driven by the increasing demand to support the growing scale of multicast services on IP/MPLS backbone networks. A P2P LDP-enabled transmit end must replicate a packet and send it to multiple receive ends. </p>
<p>Each replicated packet is sent along a separate LSP to its receive end, which wastes bandwidth resources. To address this problem, enable mLDP P2MP to establish P2MP LSPs, without the need to deploy Protocol Independent Multicast (PIM). A tree-shaped mLDP P2MP LSP consists of sub-LSPs originating from the root node (ingress) and destined for leaf nodes. The root node directs multicast traffic to the P2MP LSP and sends packets to a branch node for replication. The branch node replicates the packets and forwards them to each leaf node connected to the branch node.</p>
<p>On the network shown in <a href="#EN-US_TASK_0172368603__fig_dc_vrp_ldp-p2p_cfg_006501">Figure 1</a>, an mLDP P2MP LSP originates from root node LSRA and is destined for leaf nodes LSRC, LSRE, and LSRF.</p>
<div class="fignone" id="EN-US_TASK_0172368603__fig_dc_vrp_ldp-p2p_cfg_006501"><a name="EN-US_TASK_0172368603__fig_dc_vrp_ldp-p2p_cfg_006501"></a><a name="fig_dc_vrp_ldp-p2p_cfg_006501"></a><span class="figcap"><b>Figure 1 </b>Networking diagram of mLDP P2MP LSPs</span><br><span><img class="vsd" src="figure/en-us_image_0260883563.png"></span></div>
<div class="p">
<div class="tableBorder"><a name="EN-US_TASK_0172368603__tab_dc_vrp_ldp-p2p_cfg_006501"></a><a name="tab_dc_vrp_ldp-p2p_cfg_006501"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172368603__tab_dc_vrp_ldp-p2p_cfg_006501" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Interfaces and IP addresses</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="16.666666666666664%" id="mcps1.4.1.6.1.2.7.1.1" liSelected="liSelected"><p>Device Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="16.666666666666664%" id="mcps1.4.1.6.1.2.7.1.2" liSelected="liSelected"><p>Interface Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="16.666666666666664%" id="mcps1.4.1.6.1.2.7.1.3" liSelected="liSelected"><p>IP Address</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="16.666666666666664%" id="mcps1.4.1.6.1.2.7.1.4" liSelected="liSelected"><p>Device Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="16.666666666666664%" id="mcps1.4.1.6.1.2.7.1.5" liSelected="liSelected"><p>Interface Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="16.666666666666664%" id="mcps1.4.1.6.1.2.7.1.6" liSelected="liSelected"><p>IP Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="2" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.1 "><p>LSRA</p>
</td>
<td class="cellrowborder" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.2 "><p>GigabitEthernet<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.3 "><p>10.1.1.1/24</p>
</td>
<td class="cellrowborder" rowspan="2" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.4 "><p>LSRE</p>
</td>
<td class="cellrowborder" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.5 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.6 "><p>10.4.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.2 "><p>Loopback1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.3 "><p>1.1.1.1/32</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.5 "><p>Loopback1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.6 "><p>5.5.5.5/32</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.1 "><p>LSRB</p>
</td>
<td class="cellrowborder" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.2 "><p>GigabitEthernet<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.3 "><p>10.1.1.2/24</p>
</td>
<td class="cellrowborder" rowspan="4" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.4 "><p>LSRD</p>
</td>
<td class="cellrowborder" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.5 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.6 "><p>10.2.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.2 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.3 "><p>10.2.1.1/24</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.5 "><p>GigabitEthernet<span>0/1/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.6 "><p>10.4.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.2 "><p>GigabitEthernet<span>0/1/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.3 "><p>10.3.1.1/24</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.5 "><p>GigabitEthernet<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.6 "><p>10.5.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.2 "><p>Loopback1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.3 "><p>2.2.2.2/32</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.5 "><p>Loopback1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.6 "><p>4.4.4.4/32</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.1 "><p>LSRC</p>
</td>
<td class="cellrowborder" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.2 "><p>GigabitEthernet<span>0/1/2</span></p>
</td>
<td class="cellrowborder" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.3 "><p>10.3.1.2/24</p>
</td>
<td class="cellrowborder" rowspan="2" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.4 "><p>LSRF</p>
</td>
<td class="cellrowborder" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.5 "><p>GigabitEthernet<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="16.666666666666664%" headers="mcps1.4.1.6.1.2.7.1.6 "><p>10.5.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.2 "><p>Loopback1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.3 "><p>3.3.3.3/32</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.5 "><p>Loopback1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.6.1.2.7.1.6 "><p>6.6.6.6/32</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368603__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Assign IP addresses to all physical and loopback interfaces listed in <a href="#EN-US_TASK_0172368603__tab_dc_vrp_ldp-p2p_cfg_006501">Table 1</a>.</p>
</li><li><p>Configure Intermediate System to Intermediate System (IS-IS) to advertise the route to each network segment to which each interface is connected and advertise the host route to each LSR ID.</p>
</li><li><p>Set an MPLS LSR ID and globally enable MPLS, MPLS LDP, and mLDP P2MP on each node.</p>
</li><li><p>Configure MPLS LDP to establish a local LDP session on each interface along a P2MP LSP to be established.</p>
</li><li><p>Configure leaf nodes LSRC, LSRE, and LSRF to trigger P2MP LSP establishment.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368603__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>IP address of each interface on every node listed in <a href="#EN-US_TASK_0172368603__tab_dc_vrp_ldp-p2p_cfg_006501">Table 1</a></p>
</li><li><p>IS-IS process ID (1) and IS-IS level (Level-2) on each node</p>
</li><li><p>Root node address (1.1.1.1), mLDP P2MP LSP name (lsp1), and LSP ID (1)</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368603__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IP address to each interface.</span><p><p>Assign an IP address to each interface according to <a href="#EN-US_TASK_0172368603__tab_dc_vrp_ldp-p2p_cfg_006501">Table 1</a> and create a loopback interface on each node. For configuration details, see <a href="#EN-US_TASK_0172368603__section_dc_vrp_cfg_01814505">Configuration Files</a> in this section.</p>
</p></li><li><span>Configure IS-IS to advertise the route to each network segment to which each interface is connected and to advertise the host route to each LSR ID.</span><p><p>Configure IS-IS on each node to implement network layer connectivity. For configuration details, see the configuration files.</p>
</p></li><li><span>Configure mLDP P2MP globally on each node.</span><p><p>Set an MPLS LSR ID and globally enable MPLS, MPLS LDP, and mLDP P2MP on each node.</p>
<p># Configure LSRA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>LSRA] <strong>mpls lsr-id 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>LSRA] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>LSRA-mpls] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>LSRA-mpls-ldp] <strong>mldp p2mp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>LSRA-mpls-ldp] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>LSRA-mpls-ldp] <strong>quit</strong></pre>
<p>Repeat this step for LSRB, LSRC, LSRD, LSRE, and LSRF. For configuration details, see <a href="#EN-US_TASK_0172368603__section_dc_vrp_cfg_01814505">Configuration Files</a> in this section.</p>
</p></li><li><span>Establish local LDP sessions between nodes.</span><p><p>Configure MPLS and MPLS LDP on each directly connected interface to establish a local LDP session.</p>
<p># Configure LSRA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>LSRA] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>LSRA-GigabitEthernet<span>0/1/1</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>LSRA-GigabitEthernet<span>0/1/1</span>] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>LSRA-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>LSRA-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<p>Repeat this step for LSRB, LSRC, LSRD, LSRE, and LSRF. For configuration details, see <a href="#EN-US_TASK_0172368603__section_dc_vrp_cfg_01814505">Configuration Files</a> in this section.</p>
</p></li><li><span>Configure leaf nodes to trigger mLDP P2MP LSP establishment.</span><p><p># Configure LSRC.</p>
<pre class="screen">&lt;LSRC&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>LSRC] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>LSRC-mpls-ldp] <strong>mldp p2mp-lsp name lsp1 root-ip 1.1.1.1 lsp-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>LSRC-mpls-ldp] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>LSRC-mpls-ldp] <strong>quit</strong></pre>
<p># Configure LSRE.</p>
<pre class="screen">&lt;LSRE&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>LSRE] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>LSRE-mpls-ldp] <strong>mldp p2mp-lsp name lsp1 root-ip 1.1.1.1 lsp-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>LSRE-mpls-ldp] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>LSRE-mpls-ldp] <strong>quit</strong></pre>
<p># Configure LSRF.</p>
<pre class="screen">&lt;LSRF&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>LSRF] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>LSRF-mpls-ldp] <strong>mldp p2mp-lsp name lsp1 root-ip 1.1.1.1 lsp-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>LSRF-mpls-ldp] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>LSRF-mpls-ldp] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Run the <strong>ping multicast-lsp mldp p2mp root-ip 1.1.1.1 lsp-id 1</strong> command on LSRA. The command output shows that the mLDP P2MP LSP is reachable.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>LSRA] <strong>ping multicast-lsp mldp p2mp root-ip 1.1.1.1 lsp-id 1</strong></pre>
<pre class="screen">  LSP PING FEC: root-ip 1.1.1.1 lsp-id 1 : 100  data bytes, press CTRL_C to break
    Reply from 3.3.3.3: bytes=100 Sequence=1 time=150 ms
    Reply from 5.5.5.5: bytes=100 Sequence=1 time=180 ms
    Reply from 6.6.6.6: bytes=100 Sequence=1 time=200 ms
    Reply from 3.3.3.3: bytes=100 Sequence=2 time=120 ms
    Reply from 5.5.5.5: bytes=100 Sequence=2 time=150 ms
    Reply from 6.6.6.6: bytes=100 Sequence=2 time=190 ms
    Reply from 3.3.3.3: bytes=100 Sequence=3 time=80 ms
    Reply from 6.6.6.6: bytes=100 Sequence=3 time=80 ms
    Reply from 5.5.5.5: bytes=100 Sequence=3 time=110 ms
    Reply from 3.3.3.3: bytes=100 Sequence=4 time=100 ms
    Reply from 5.5.5.5: bytes=100 Sequence=4 time=130 ms
    Reply from 6.6.6.6: bytes=100 Sequence=4 time=160 ms
    Reply from 3.3.3.3: bytes=100 Sequence=5 time=110 ms
    Reply from 5.5.5.5: bytes=100 Sequence=5 time=140 ms
    Reply from 6.6.6.6: bytes=100 Sequence=5 time=140 ms

    round-trip min/avg/max = 80/136/200 ms</pre>
<p># Run the <strong>display mpls mldp lsp p2mp</strong> command on LSRB. The command output shows that mLDP P2MP LSP information is consistent with the configuration.</p>
<pre class="screen">&lt;LSRB&gt;<strong> display mpls mldp lsp p2mp</strong></pre>
<pre class="screen"><span> An asterisk (*) before a Label means the USCB or DSCB is stale
 An asterisk (*) before a Peer means the session is stale</span>
 -------------------------------------------------------------------------------
                        LSP Information: mLDP P2MP-LSP
 -------------------------------------------------------------------------------
 Root IP        : 1.1.1.1              Instance         : -- 
 Opaque decoded : LSP-ID 1
 Opaque value   : 01 0004 00000001
 Lsr Type       : Transit
 Trigger Type   : --
 Upstream Count : 1                    Downstream Count : 2
 Upstream:
   In Label  Peer              MBB State 
       4101  1.1.1.1           --
 Downstream:              
   Out Label Peer              MBB State     Next Hop        Out Interface
        4101 4.4.4.4           --            10.2.1.2        GigabitEthernet<span>0/1/0</span>
        4101 3.3.3.3           --            10.3.1.2        GigabitEthernet<span>0/1/2</span></pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172368603__section_dc_vrp_cfg_01814505"><a name="EN-US_TASK_0172368603__section_dc_vrp_cfg_01814505"></a><a name="section_dc_vrp_cfg_01814505"></a><a name="EN-US_TASK_0172368603__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>LSRA configuration file</p>
<pre class="screen">#
sysname LSRA
#
mpls lsr-id 1.1.1.1
#
mpls
#
mpls ldp
 mldp p2mp
 #
 ipv4-family
#
isis 1
 is-level level-2
 network-entity 00.0005.0000.0000.0001.00
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown  
 ip address 10.1.1.1 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface LoopBack1
 ip address 1.1.1.1 255.255.255.255
 isis enable 1
#
return</pre>
</li><li><p>LSRB configuration file</p>
<pre class="screen">#
sysname LSRB
#
mpls lsr-id 2.2.2.2
#
mpls
#
mpls ldp
 mldp p2mp
 #
 ipv4-family
#
isis 1
 is-level level-2
 network-entity 00.0005.0000.0000.0002.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.2.1.1 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 10.3.1.1 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.1.2 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface LoopBack1
 ip address 2.2.2.2 255.255.255.255
 isis enable 1
#
return</pre>
</li><li><p>LSRC configuration file</p>
<pre class="screen">#
sysname LSRC
#
mpls lsr-id 3.3.3.3
#
mpls
#
mpls ldp
 mldp p2mp
 #
 ipv4-family
  mldp p2mp-lsp name lsp1 root-ip 1.1.1.1 lsp-id 1
#
isis 1
 is-level level-2
 network-entity 00.0005.0000.0000.0003.00
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 10.3.1.2 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface LoopBack1
 ip address 3.3.3.3 255.255.255.255
 isis enable 1
#
return </pre>
</li><li><p>LSRD configuration file</p>
<pre class="screen">#
sysname LSRD
#
mpls lsr-id 4.4.4.4
#
mpls
#
mpls ldp
 mldp p2mp
 #
 ipv4-family
#
isis 1
 is-level level-2
 network-entity 00.0005.0000.0000.0004.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.2.1.2 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 10.4.1.1 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.5.1.1 255.255.255.0
 isis enable 1  
 mpls
 mpls ldp
#
interface LoopBack1
 ip address 4.4.4.4 255.255.255.255
 isis enable 1
#
return</pre>
</li><li><p>LSRE configuration file</p>
<pre class="screen">#
sysname LSRE
#
mpls lsr-id 5.5.5.5
#
mpls
#
mpls ldp
 mldp p2mp
 #
 ipv4-family
  mldp p2mp-lsp name lsp1 root-ip 1.1.1.1 lsp-id 1
#
isis 1
 is-level level-2
 network-entity 00.0005.0000.0000.0005.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.4.1.2 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#               
interface LoopBack1
 ip address 5.5.5.5 255.255.255.255
 isis enable 1
#
return</pre>
</li><li><p>LSRF configuration file</p>
<pre class="screen">#
sysname LSRF
#
mpls lsr-id 6.6.6.6
#
mpls
#
mpls ldp
 mldp p2mp
 #
 ipv4-family
  mldp p2mp-lsp name lsp1 root-ip 1.1.1.1 lsp-id 1
#
isis 1
 is-level level-2
 network-entity 00.0005.0000.0000.0006.00
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.5.1.2 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface LoopBack1
 ip address 6.6.6.6 255.255.255.255
 isis enable 1
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0038.html">Configuration Examples for MPLS LDP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0045.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>