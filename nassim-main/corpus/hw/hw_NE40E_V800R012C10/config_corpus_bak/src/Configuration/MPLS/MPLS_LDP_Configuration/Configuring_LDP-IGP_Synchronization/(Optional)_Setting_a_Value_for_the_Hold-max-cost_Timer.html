
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Setting a Value for the Hold-max-cost Timer">
<meta name="abstract" content="If the LDP session or LDP adjacency on the primary link fails, LSP traffic is switched to the backup link within the specified hold-max-cost period before the reestablishment of the LDP session and LDP adjacency on the primary link.">
<meta name="description" content="If the LDP session or LDP adjacency on the primary link fails, LSP traffic is switched to the backup link within the specified hold-max-cost period before the reestablishment of the LDP session and LDP adjacency on the primary link.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0046.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0078.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2009.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ldp-p2pvrp,w00800033,z00545680,w00556928,w00606909,z00809835,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="b00896120">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368507">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Setting a Value for the Hold-max-cost Timer</title>
</head>
<body><a name="EN-US_TASK_0172368507"></a><a name="EN-US_TASK_0172368507"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Setting a Value for the Hold-max-cost Timer</h1>
<div class="taskbody"><p>If the LDP session<span> or LDP adjacency</span> on the primary link fails, LSP traffic is switched to the backup link within the specified hold-max-cost period before the reestablishment of the LDP session<span> and LDP adjacency</span> on the primary link.</p>
<div class="context"><a name="EN-US_TASK_0172368507__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">Select parameters based on networking requirements:<ul><li>If IGP routes carry only LDP services, specify the <strong><span>infinite</span></strong> parameter to ensure that the behavior for IGP routes is always consistent with that for an LDP LSP.</li><li>If IGP routes carry multiple types of services, including LDP services, set a specific time value to ensure that an LDP session<span> or adjacency</span> teardown does not affect IGP route selection or other services.</li></ul>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172368507__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>If OSPF is used, perform the following configuration on the interfaces on both ends of the link between the node where the primary LSP and the backup LSP diverge from each other and its LDP peer on the primary LSP:</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ospf+timer+ldp-sync+hold-max-cost+infinite"><b><span class="cmdname">ospf timer ldp-sync hold-max-cost</span></b></a> { <i><span class="varname">value</span></i> | <strong><span>infinite</span></strong> }</span><p><p>The period during which the interface advertises the maximum link cost in local LSAs is set.</p>
</p><p><p>The hold-max-cost timer value determines the period in which the local node advertises the maximum link cost in local LSAs.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To set a value for the hold-max-cost timer on an OSPF multi-area adjacency interface, run the <a href="cmdqueryname=ospf+timer+ldp-sync+hold-max-cost+infinite+multi-area"><b><span class="cmdname">ospf timer ldp-sync hold-max-cost</span></b></a> { <i><span class="varname">value</span></i> | <strong><span>infinite</span></strong> } <strong><span>multi-area</span></strong> <i><span class="varname">area-id</span></i> command.</p>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Set the maximum cost for OSPF links.</span><p><p>In an IGP-LDP synchronization scenario, when an LDP tunnel's next hop changes, a large number of entries need to be updated. If upstream and downstream forwarding entries reside on different boards, they may not be updated synchronously during traffic switchback. As a result, packet loss occurs if upstream forwarding entries are updated but downstream forwarding entries are not. To prevent packet loss, FRR forwarding entries can be created for the switchback path, and the link's primary/backup status can be updated during traffic switchback. As defined in standard protocols, in an IGP-LDP synchronization scenario, if LDP is not in the fully operational state, OSPF needs to set the link cost to LSInfinity (65535); however, a link cannot participate in FRR route computation if its cost is 65535. To resolve this conflict in an IGP-LDP synchronization scenario, run the <a href="cmdqueryname=maximum-link-cost"><b><span class="cmdname">maximum-link-cost</span></b></a> <i><span class="varname">cost</span></i> command to change the maximum cost for OSPF links.</p>
<ol type="a"><li>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</li><li>Run the <a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ] command to enter the OSPF view.</li><li>Run the <a href="cmdqueryname=maximum-link-cost"><b><span class="cmdname">maximum-link-cost</span></b></a> <i><span class="varname">cost</span></i> command to set the maximum cost for OSPF links.</li></ol>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>If IS-IS is used:</span><p><p>Perform the following configuration on the node where the primary and backup links diverge from each other.</p>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=isis"><b><span class="cmdname">isis</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span><p><p>The specified IS-IS process is started, and the IS-IS view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=timer+ldp-sync+hold-max-cost+infinite"><b><span class="cmdname">timer ldp-sync hold-max-cost</span></b></a> { <strong><span>infinite</span></strong> | <i><span class="varname">interval</span></i> }</span><p><p>The period in which all interfaces in the IS-IS process advertise the maximum link cost in local LSPs is set.</p>
</p></li></ol>
<p><p>Perform the following configuration on the interfaces of both ends of the link between the cross node of primary and backup links and the LDP neighboring node on the primary link.</p>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=isis+timer+ldp-sync+hold-max-cost+infinite"><b><span class="cmdname">isis timer ldp-sync hold-max-cost</span></b></a> { <i><span class="varname">value</span></i> | <strong><span>infinite</span></strong> }</span><p><p>The period in which the IS-IS interface advertises the maximum link cost in local LSPs is set.</p>
</p><p><p>The hold-max-cost timer value determines the period in which the local node advertises the maximum link cost in local LSPs.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0046.html">Configuring LDP-IGP Synchronization
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0078.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2009.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>