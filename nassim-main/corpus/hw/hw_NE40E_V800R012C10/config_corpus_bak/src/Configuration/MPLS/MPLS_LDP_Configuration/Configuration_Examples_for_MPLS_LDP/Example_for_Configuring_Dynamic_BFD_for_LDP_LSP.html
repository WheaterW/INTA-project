
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Dynamic BFD for LDP LSP">
<meta name="abstract" content="This section provides an example for configuring dynamic BFD to monitor LDP LSPs.">
<meta name="description" content="This section provides an example for configuring dynamic BFD to monitor LDP LSPs.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0038.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2038.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0077.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ldp-p2pvrp,w00800033,z00545680,w00556928,w00606909,z00809835,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="b00896120">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368584">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Dynamic BFD for LDP LSP</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172368584"></a><a name="EN-US_TASK_0172368584"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Dynamic BFD for LDP LSP</h1>
<div class="taskbody"><p>This section provides an example for configuring dynamic BFD to monitor LDP LSPs.</p>
<div class="context"><a name="EN-US_TASK_0172368584__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>The proliferation of MPLS LDP applications drives the increasing demand for network reliability. To meet the reliability requirement, BFD for LDP can be used. BFD for LDP is a detection mechanism that can rapidly detect faults and trigger a primary/backup LSP switchover. The BFD for LDP function and LDP FRR function are used together on an MPLS LDP network.</p>
<p>On the network shown in <a href="#EN-US_TASK_0172368584__fig_dc_vrp_ldp-p2p_cfg_204501">Figure 1</a>, PE1, P1, P2, and PE2 are in the same MPLS domain. PE1 and PE2 establish primary and backup LDP LSPs. To monitor the LDP LSPs, configure dynamic BFD.</p>
<div class="fignone" id="EN-US_TASK_0172368584__fig_dc_vrp_ldp-p2p_cfg_204501"><a name="EN-US_TASK_0172368584__fig_dc_vrp_ldp-p2p_cfg_204501"></a><a name="fig_dc_vrp_ldp-p2p_cfg_204501"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for configuring dynamic BFD for LDP LSP</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 and 2 in this example represent GE <span>0/1/0</span> and GE <span>0/1/1</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0279175787.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368584__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Notes</h4><p>During the configuration, note the following:</p>
<ul><li><p>Each LSR must have route entries that exactly match FECs for the LSPs to be established.</p>
</li><li><p>By default, the triggering policy is <strong>host</strong>, allowing a device to use host IP routes with 32-bit addresses to trigger LDP LSP establishment.</p>
</li><li><p>If the triggering policy is <strong>all</strong>, a device is allowed to use all IGP routes to trigger LDP LSP establishment. The device does not use public network BGP routes to trigger LDP LSP establishment.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368584__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Assign an IP address to each interface of each LSR according to <a href="#EN-US_TASK_0172368584__fig_dc_vrp_ldp-p2p_cfg_204501">Figure 1</a>.</p>
</li><li><p>Configure OSPF to implement network layer connectivity and set interface cost values so that the LSP along the path PE1 -&gt; P1 -&gt; PE2 functions as the primary LSP, and the LSP along the path PE1 -&gt; P2 -&gt; PE2 functions as the backup LSP.</p>
</li><li><p>Enable LSRs to use all IGP routes to establish LDP LSPs.</p>
</li><li><p>Configure OSPF FRR and LDP Auto FRR to create a backup LSP between PE1 and PE2.</p>
</li><li><p>Configure dynamic BFD for LDP to use FEC lists to create BFD sessions.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368584__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>LSR ID and interface IP addresses of each node, as shown in <a href="#EN-US_TASK_0172368584__fig_dc_vrp_ldp-p2p_cfg_204501">Figure 1</a></p>
</li><li><p>OSPF process ID (1) and area ID (0)</p>
</li><li><p>Policy for triggering LSP establishment (all routes); FEC list names (l1 and l2)</p>
</li><li><p>Minimum interval (100 ms) at which BFD packets are sent, minimum interval (600 ms) at which BFD packets are received, and detection multiplier (4)</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368584__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IP address to each interface.</span><p><p>Assign an IP address to each interface according to <a href="#EN-US_TASK_0172368584__fig_dc_vrp_ldp-p2p_cfg_204501">Figure 1</a> and create a loopback interface on each node. For details, see the configuration files.</p>
</p></li><li><span>Configure OSPF.</span><p><p>Configure OSPF on each node to implement network layer connectivity. For details, see the configuration files.</p>
</p></li><li><span>Configure LDP LSPs.</span><p><p>Configure MPLS LDP on each node and enable the nodes to use all IGP routes to establish LDP LSPs. For details, see the configuration files.</p>
</p></li><li><span>Configure OSPF FRR and LDP Auto FRR on each node.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>ospf 1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-ospf-1] <strong>frr</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-ospf-1-frr] <strong>loop-free-alternate</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-ospf-1-frr] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-ospf-1-frr] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-ospf-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-mpls-ldp] <strong>auto-frr lsp-trigger all</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls-ldp] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-mpls-ldp] <strong>quit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>ospf 1</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-ospf-1] <strong>frr</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-ospf-1-frr] <strong>loop-free-alternate</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-ospf-1-frr] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-ospf-1-frr] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-ospf-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-mpls-ldp] <strong>auto-frr lsp-trigger all</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-mpls-ldp] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-mpls-ldp] <strong>quit</strong></pre>
</p></li><li><span>Configure dynamic BFD sessions to monitor LDP LSPs.</span><p><p># Enable BFD, specify a FEC list used to establish a BFD session, and set BFD parameters on PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bfd] <strong>mpls-passive</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bfd] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>fec-list l1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-fec-list-l1] <strong>fec-node 4.4.4.4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-fec-list-l1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-fec-list-l1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-mpls] <strong>mpls bfd enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls] <strong>mpls bfd-trigger fec-list l1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls] <strong>mpls bfd min-tx-interval 100 min-rx-interval 600 detect-multiplier 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-mpls] <strong>quit</strong></pre>
<p># Enable BFD, specify a FEC list used to establish a BFD session, and set BFD parameters on PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bfd] <strong>mpls-passive</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bfd] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>fec-list l2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-fec-list-l2] <strong>fec-node 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-fec-list-l2] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-fec-list-l2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-mpls] <strong>mpls bfd enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-mpls] <strong>mpls bfd-trigger fec-list l2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-mpls] <strong>mpls bfd min-tx-interval 100 min-rx-interval 600 detect-multiplier 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-mpls] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-mpls] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Run the <a href="cmdqueryname=display+bfd+session+all+verbose"><b><span class="cmdname">display bfd session all verbose</span></b></a> command to view the dynamic BFD session status on PE1. The BFD session status is <strong>Up</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>display bfd session all verbose</strong></pre>
<pre class="screen"><span>(w): State in WTR 
(*): State is invalid</span>
--------------------------------------------------------------------------------
  State : <strong>Up</strong>                    Name : dyn_16388
--------------------------------------------------------------------------------
  Local Discriminator    : 16388            Remote Discriminator   : 16386
  Session Detect Mode    : Asynchronous Mode Without Echo Function
  BFD Bind Type          : <strong>LDP_LSP</strong> 
  Bind Session Type      : Dynamic 
  Bind Peer IP Address   : 4.4.4.4         
  NextHop Ip Address     : 10.1.1.2  
  Bind Interface         : GigabitEthernet<span>0/1/0</span>                                     
  Tunnel ID              : -  
  FSM Board Id           : 3                TOS-EXP                : 7
  Min Tx Interval (ms)   : 600              Min Rx Interval (ms)   : 100
  Actual Tx Interval (ms): 600              Actual Rx Interval (ms): 100 
  Local Detect Multi     : 4                Detect Interval (ms)   : 300 
  Echo Passive           : Disable          Acl Number             : -
  Destination Port       : 3784             TTL                    : 1 
  Proc Interface Status  : Disable          Process PST            : Enable     
  WTR Interval (ms)      : -                Config PST             : Enable     
  Active Multi           : 3   
  Last Local Diagnostic  : No Diagnostic
  Bind Application       : LDP
  Session TX TmrID       : -                Session Detect TmrID   : - 
  Session Init TmrID     : -                Session WTR TmrID      : - 
  Session Echo Tx TmrID  : -   
  Session Description    : - 
<span>  Track Group Name       : -</span>
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
  (Multi Hop) State : <strong>Up</strong>                    Name : dyn_16390
--------------------------------------------------------------------------------
  Local Discriminator    : 16390            Remote Discriminator   : 16387
  Session Detect Mode    : Asynchronous Mode Without Echo Function
  BFD Bind Type          : <strong>Peer IP Address</strong>  
  Bind Session Type      : Entire_Dynamic 
  Bind Peer IP Address   : 4.4.4.4          
  Bind Interface         : -
  Track Interface        : -
  Bind Source IP Address : 1.1.1.1                                                
  FSM Board Id           : 3                TOS-EXP                : 7
  Min Tx Interval (ms)   : 10               Min Rx Interval (ms)   : 10
  Actual Tx Interval (ms): 100              Actual Rx Interval (ms): 600 
  Local Detect Multi     : 3                Detect Interval (ms)   : 2400 
  Echo Passive           : Disable          Acl Number             : -
  Destination Port       : 3784             TTL                    : 253 
  Proc Interface Status  : Disable          Process PST            : Disable    
  WTR Interval (ms)      : -                Config PST             : Disable    
  Active Multi           : 4   
  Last Local Diagnostic  : No Diagnostic
  Bind Application       : No Application Bind
  Session TX TmrID       : -                Session Detect TmrID   : - 
  Session Init TmrID     : -                Session WTR TmrID      : - 
  Session Echo Tx TmrID  : -   
  Session Description    : - 
<span>  Track Group Name       : -</span>
--------------------------------------------------------------------------------

    Total UP/DOWN Session Number : 2/0</pre>
</p><p><p># Run the <a href="cmdqueryname=display+bfd+session+passive-dynamic+verbose"><b><span class="cmdname">display bfd session passive-dynamic verbose</span></b></a> command on PE2 to check the status of the passively created BFD session. The BFD session status is <strong>Up</strong>. The <strong>BFD Bind Type</strong> value is <strong>Peer IP Address</strong>, which indicates that PE2 sends BFD packets over IP routes.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>display bfd session passive-dynamic verbose</strong></pre>
<pre class="screen"><span>(w): State in WTR 
(*): State is invalid</span>
--------------------------------------------------------------------------------
  (Multi Hop) State : Up                    Name : dyn_16386
--------------------------------------------------------------------------------
  Local Discriminator    : 16386            Remote Discriminator   : 16388
  Session Detect Mode    : Asynchronous Mode Without Echo Function
  BFD Bind Type          : Peer IP Address  
  Bind Session Type      : Entire_Dynamic 
  Bind Peer IP Address   : 1.1.1.1          
  Bind Interface         : -
  Track Interface        : -
  Bind Source IP Address : 4.4.4.4
  FSM Board Id           : 3                TOS-EXP                : 7
  Min Tx Interval (ms)   : 10               Min Rx Interval (ms)   : 10
  Actual Tx Interval (ms): 100              Actual Rx Interval (ms): 600 
  Local Detect Multi     : 3                Detect Interval (ms)   : 2400 
  Echo Passive           : Disable          Acl Number             : -
  Destination Port       : 3784             TTL                    : 253 
  Proc Interface Status  : Disable          Process PST            : Disable    
  WTR Interval (ms)      : -                Config PST             : Disable    
  Active Multi           : 4   
  Last Local Diagnostic  : No Diagnostic
  Bind Application       : No Application Bind
  Session TX TmrID       : -                Session Detect TmrID   : - 
  Session Init TmrID     : -                Session WTR TmrID      : - 
  Session Echo Tx TmrID  : -   
  Session Description    : - 
<span>  Track Group Name       : -</span>
--------------------------------------------------------------------------------

    Total UP/DOWN Session Number : 1/0</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172368584__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>PE1 configuration file</p>
<pre class="screen">#
sysname PE1
#
bfd
 mpls-passive
#
mpls lsr-id 1.1.1.1
#
mpls
 lsp-trigger all
 mpls bfd enable
 mpls bfd-trigger fec-list l1
 mpls bfd min-tx-interval 100 min-rx-interval 600 detect-multiplier 4
#
fec-list l1
 fec-node 4.4.4.4
#
mpls ldp
 #
 ipv4-family
  auto-frr lsp-trigger all
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.1.1 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.2.1 255.255.255.0
 ospf cost 2
 mpls
 mpls ldp
#
interface LoopBack1
 ip address 1.1.1.1 255.255.255.255
#
ospf 1
 frr
  loop-free-alternate
 area 0.0.0.0
  network 1.1.1.1 0.0.0.0
  network 10.1.1.0 0.0.0.255
  network 10.1.2.0 0.0.0.255
#
return</pre>
</li><li><p>PE2 configuration file</p>
<pre class="screen">#
sysname PE2
#
bfd
 mpls-passive
#
mpls lsr-id 4.4.4.4
#
mpls
 lsp-trigger all
 mpls bfd enable
 mpls bfd-trigger fec-list l2
 mpls bfd min-tx-interval 100 min-rx-interval 600 detect-multiplier 4
#
fec-list l2
 fec-node 1.1.1.1
#
mpls ldp
 #
 ipv4-family
  auto-frr lsp-trigger all
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.5.1 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.4.1 255.255.255.0
 ospf cost 2
 mpls
 mpls ldp
#               
interface LoopBack1
 ip address 4.4.4.4 255.255.255.255
#
ospf 1
 frr
  loop-free-alternate
 area 0.0.0.0
  network 4.4.4.4 0.0.0.0
  network 10.1.4.0 0.0.0.255
  network 10.1.5.0 0.0.0.255
#
return</pre>
</li><li><p>P1 configuration file</p>
<pre class="screen">#
sysname P1
#
mpls lsr-id 2.2.2.2
#
mpls
 lsp-trigger all
#
mpls ldp
 #
 ipv4-family
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.1.2 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.5.2 255.255.255.0
 mpls
 mpls ldp
#
interface LoopBack1
 ip address 2.2.2.2 255.255.255.255
#
ospf 1
 area 0.0.0.0
  network 2.2.2.2 0.0.0.0
  network 10.1.1.0 0.0.0.255
  network 10.1.5.0 0.0.0.255
#
return</pre>
</li><li><p>P2 configuration file</p>
<pre class="screen">#
sysname P2
#
mpls lsr-id 3.3.3.3
#
mpls
 lsp-trigger all
#
mpls ldp
 #
 ipv4-family
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.2.2 255.255.255.0
 mpls
 mpls ldp       
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.4.2 255.255.255.0
 mpls
 mpls ldp
#
interface LoopBack1
 ip address 3.3.3.3 255.255.255.255
#
ospf 1
 area 0.0.0.0   
  network 3.3.3.3 0.0.0.0
  network 10.1.2.0 0.0.0.255
  network 10.1.4.0 0.0.0.255
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0038.html">Configuration Examples for MPLS LDP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2038.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0077.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>