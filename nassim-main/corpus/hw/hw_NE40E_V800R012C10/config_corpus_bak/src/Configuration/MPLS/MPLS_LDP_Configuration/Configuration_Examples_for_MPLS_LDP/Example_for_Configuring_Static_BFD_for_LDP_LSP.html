
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Static BFD for LDP LSP">
<meta name="abstract" content="This section provides an example for configuring static BFD for LDP LSP. The configuration involves enabling MPLS and MPLS LDP globally and for specific interfaces and enabling BFD on two ends of a link to be monitored.">
<meta name="description" content="This section provides an example for configuring static BFD for LDP LSP. The configuration involves enabling MPLS and MPLS LDP globally and for specific interfaces and enabling BFD on two ends of a link to be monitored.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0038.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0110.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2045.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ldp-p2pvrp,w00800033,z00545680,w00556928,w00606909,z00809835,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="b00896120">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368581">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Static BFD for LDP LSP</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172368581"></a><a name="EN-US_TASK_0172368581"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Static BFD for LDP LSP</h1>
<div class="taskbody"><p>This section provides an example for configuring static BFD for LDP LSP. The configuration involves enabling MPLS and MPLS LDP globally and for specific interfaces and enabling BFD on two ends of a link to be monitored.</p>
<div class="context"><a name="EN-US_TASK_0172368581__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172368581__fig_dc_vrp_ldp-p2p_cfg_203801">Figure 1</a>, establish an LDP LSP along the path PE1 -&gt; P1 -&gt; PE2, and an IP link along the path PE2 -&gt; P2 -&gt; PE1. Configure static BFD to monitor the LDP LSP.</p>
<div class="fignone" id="EN-US_TASK_0172368581__fig_dc_vrp_ldp-p2p_cfg_203801"><a name="EN-US_TASK_0172368581__fig_dc_vrp_ldp-p2p_cfg_203801"></a><a name="fig_dc_vrp_ldp-p2p_cfg_203801"></a><span class="figcap"><b>Figure 1 </b>Networking diagram of BFD for LDP LSP</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 and 2 in this example represent GE <span>0/1/0</span> and GE <span>0/1/1</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0279173916.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368581__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure OSPF in the MPLS domain to implement network layer connectivity.</p>
</li><li><p>Establish an LDP LSP along the path PE1 -&gt; P1 -&gt; PE2.</p>
</li><li><p>On PE1, configure a BFD session and bind it to the LDP LSP.</p>
</li><li><p>On PE2, configure a BFD session and bind it to the IP link, enabling PE2 to notify PE1 of LDP LSP faults.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368581__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>IP addresses of interfaces</p>
</li><li><p>OSPF process ID</p>
</li><li><p>BFD configuration name and local and remote discriminators</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368581__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IP address to each interface and configure OSPF.</span><p><p>Assign an IP address and a mask to each interface (including loopback interfaces) according to <a href="#EN-US_TASK_0172368581__fig_dc_vrp_ldp-p2p_cfg_203801">Figure 1</a>.</p>
<p>Configure OSPF on all nodes to advertise the host route of each loopback interface. For configuration details, see <a href="#EN-US_TASK_0172368581__section_dc_vrp_ldp-p2p_cfg_203805">Configuration Files</a>.</p>
<p>After completing the configuration, ping the LSR ID of each peer to check that the LSRs interwork successfully. Run the <strong>display ip routing-table</strong> command on each LSR to view the routes to the other LSRs.</p>
<pre class="screen">&lt;PE1&gt; <strong>display ip routing-table</strong></pre>
<pre class="screen"><span class="keyword">Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route</span>
------------------------------------------------------------------------------
Routing Table : _public_
         Destinations : 16       Routes : 16        

Destination/Mask    Proto  Pre  Cost        Flags NextHop         Interface

        1.1.1.1/32  Direct 0    0             D  127.0.0.1       LoopBack1
        2.2.2.2/32  OSPF   10   2             D  10.1.1.2        GigabitEthernet<span>0/1/0</span>
        3.3.3.3/32  OSPF   10   2             D  10.1.2.2        GigabitEthernet<span>0/1/1</span>
        4.4.4.4/32  OSPF   10   3             D  10.1.1.2        GigabitEthernet<span>0/1/0</span>
                    OSPF   10   3             D  10.1.2.2        GigabitEthernet<span>0/1/1</span>
       10.1.1.0/24  Direct 0    0             D  10.1.1.1        GigabitEthernet<span>0/1/0</span>
       10.1.1.1/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
     10.1.1.255/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/0</span>
       10.1.2.0/24  Direct 0    0             D  10.1.2.1        GigabitEthernet<span>0/1/1</span>
       10.1.2.1/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/1</span>
     10.1.2.255/32  Direct 0    0             D  127.0.0.1       GigabitEthernet<span>0/1/1</span>
       10.1.4.0/24  OSPF   10   3             D  10.1.2.2        GigabitEthernet<span>0/1/1</span>
       10.1.5.0/24  OSPF   10   3             D  10.1.1.2        GigabitEthernet<span>0/1/0</span>
      127.0.0.0/8   Direct 0    0             D  127.0.0.1       InLoopBack0
      127.0.0.1/32  Direct 0    0             D  127.0.0.1       InLoopBack0
127.255.255.255/32  Direct 0    0             D  127.0.0.1       InLoopBack0
255.255.255.255/32  Direct 0    0             D  127.0.0.1       InLoopBack0</pre>
</p></li><li><span>Establish an LDP LSP along the path PE1 -&gt; P1 -&gt; PE2.</span><p><p># Configure PE1.</p>
<pre class="screen">&lt;PE1&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>mpls lsr-id 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p># Configure P1.</p>
<pre class="screen">&lt;P1&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>P1] <strong>mpls lsr-id 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P1] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P1-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P1] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P1-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P1]<strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>P1-GigabitEthernet<span>0/1/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P1-GigabitEthernet<span>0/1/0</span>] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P1]<strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>P1-GigabitEthernet<span>0/1/1</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P1-GigabitEthernet<span>0/1/1</span>] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P1-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P1] <strong>commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">&lt;PE2&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>mpls lsr-id 4.4.4.4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
<p># Run the <strong>display mpls ldp lsp</strong> command to check whether an LDP LSP destined for 4.4.4.4/32 has been established on PE1.</p>
<pre class="screen">&lt;PE1&gt; <strong>display mpls ldp lsp</strong></pre>
<pre class="screen"> LDP LSP Information
 -------------------------------------------------------------------------------
 Flag after Out IF: (I) - RLFA Iterated LSP, (I*) - Normal and RLFA Iterated LSP
 -------------------------------------------------------------------------------
 DestAddress/Mask   In/OutLabel    UpstreamPeer    NextHop          OutInterface
 -------------------------------------------------------------------------------
 1.1.1.1/32         3/NULL         2.2.2.2         127.0.0.1         LoopBack1
*1.1.1.1/32         Liberal/21                     DS/2.2.2.2        
 2.2.2.2/32         NULL/3         -               10.1.1.2          GE<span>0/1/0</span>
 2.2.2.2/32         16/3           2.2.2.2         10.1.1.2          GE<span>0/1/0</span>
 4.4.4.4/32         NULL/22        -               10.1.1.2          GE<span>0/1/0</span>
 4.4.4.4/32         17/22          2.2.2.2         10.1.1.2          GE<span>0/1/0</span>
 -------------------------------------------------------------------------------
 TOTAL: 5 Normal LSP(s) Found.
 TOTAL: 1 Liberal LSP(s) Found.
 TOTAL: 0 Frr LSP(s) Found.
<span> An asterisk (*) before an LSP means the LSP is not established  An asterisk (*) before a Label means the USCB or DSCB is stale  An asterisk (*) before an UpstreamPeer means the session is stale  An asterisk (*) before a DS means the session is stale  An asterisk (*) before a NextHop means the LSP is FRR LSP</span></pre>
</p></li><li><span>Enable BFD globally on the two ends of a link to be monitored.</span><p><p># Configure PE1.</p>
<pre class="screen">&lt;PE1&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">&lt;PE2&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
</p></li><li><span>On the ingress, configure a BFD session and bind it to the LDP LSP.</span><p><p># Configure PE1.</p>
<pre class="screen">&lt;PE1&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> bfd 1to4 bind ldp-lsp peer-ip 4.4.4.4 nexthop 10.1.1.2 interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bfd-lsp-session-1to4] <strong>discriminator local 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bfd-lsp-session-1to4] <strong>discriminator remote 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bfd-lsp-session-1to4] <strong>process-pst</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bfd-lsp-session-1to4] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-bfd-lsp-session-1to4] <strong>quit</strong></pre>
</p></li><li><span>On the egress, configure a BFD session and bind it to the IP link, enabling the egress to notify the ingress of LDP LSP faults.</span><p><p># Configure PE2.</p>
<pre class="screen">&lt;PE2&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>bfd 4to1 bind peer-ip 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bfd-session-4ot1] <strong>discriminator local 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bfd-session-4ot1] <strong>discriminator remote 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bfd-session-4ot1] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-bfd-session-4ot1] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># After completing the configuration, run the <strong>display bfd session all verbose</strong> command on the ingress. The <strong>State</strong> field displays <strong>Up</strong>, and the <strong>BFD Bind Type</strong> field displays <strong>LDP_LSP</strong>.</p>
<pre class="screen">&lt;PE1&gt; <strong>display bfd session all verbose</strong></pre>
<pre class="screen"><span>(w): State in WTR  (*): State is invalid</span>
--------------------------------------------------------------------------------
  State : <strong>Up</strong>                    Name : 1to4
--------------------------------------------------------------------------------
  Local Discriminator    : 1                Remote Discriminator   : 2
  Session Detect Mode    : Asynchronous Mode Without Echo Function
  BFD Bind Type          : <strong>LDP_LSP</strong> 
  Bind Session Type      : Static 
  Bind Peer IP Address   : 4.4.4.4         
  NextHop Ip Address     : 10.1.1.2  
  Bind Interface         : GigabitEthernet<span>0/1/0</span>                                     
  Tunnel ID              : -  
  FSM Board Id           : 3                TOS-EXP                : 7
  Min Tx Interval (ms)   : 10               Min Rx Interval (ms)   : 10
  Actual Tx Interval (ms): 10               Actual Rx Interval (ms): 10
  Local Detect Multi     : 3                Detect Interval (ms)   : 30
  Echo Passive           : Disable          Acl Number             : -
  Destination Port       : 3784             TTL                    : 1 
  Proc Interface Status  : Disable          Process PST            : Enable     
  WTR Interval (ms)      : -                Config PST             : Enable     
  Active Multi           : 3   
  Last Local Diagnostic  : No Diagnostic
  Bind Application       : No Application Bind
  Session TX TmrID       : -                Session Detect TmrID   : - 
  Session Init TmrID     : -                Session WTR TmrID      : - 
  Session Echo Tx TmrID  : -   
  Session Description    : - 
<span>  Track Group Name       : -</span>
--------------------------------------------------------------------------------

    Total UP/DOWN Session Number : 1/0</pre>
<p>Run the <strong>display bfd session all verbose</strong> command on the egress. The <strong>(Multi Hop) State</strong> field displays <strong>Up</strong>, and the <strong>BFD Bind Type</strong> field displays <strong>Peer IP Address</strong>.</p>
<pre class="screen">&lt;PE2&gt; <strong>display bfd session all verbose</strong></pre>
<pre class="screen"><span>(w): State in WTR  (*): State is invalid</span>
--------------------------------------------------------------------------------
  <strong>(Multi Hop) State : Up</strong>                    Name : 4to1
--------------------------------------------------------------------------------
  Local Discriminator    : 2                Remote Discriminator   : 1
  Session Detect Mode    : Asynchronous Mode Without Echo Function
  BFD Bind Type          : <strong>Peer IP Address</strong>  
  Bind Session Type      : Static 
  Bind Peer IP Address   : 1.1.1.1          
  Bind Interface         : -  
  Track Interface        : -
  Bind Source IP Address : 4.4.4.4
  FSM Board Id           : 3                TOS-EXP                : 7
  Min Tx Interval (ms)   : 10               Min Rx Interval (ms)   : 10
  Actual Tx Interval (ms): 10               Actual Rx Interval (ms): 10
  Local Detect Multi     : 3                Detect Interval (ms)   : 30
  Echo Passive           : Disable          Acl Number             : -
  Destination Port       : 3784             TTL                    : 254 
  Proc Interface Status  : Disable          Process PST            : Disable    
  WTR Interval (ms)      : -                Config PST             : Disable    
  Active Multi           : 3   
  Last Local Diagnostic  : No Diagnostic
  Bind Application       : No Application Bind
  Session TX TmrID       : -                Session Detect TmrID   : - 
  Session Init TmrID     : -                Session WTR TmrID      : - 
  Session Echo Tx TmrID  : -   
  Session Description    : - 
<span>  Track Group Name       : -</span>
--------------------------------------------------------------------------------

    Total UP/DOWN Session Number : 1/0</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172368581__section_dc_vrp_ldp-p2p_cfg_203805"><a name="EN-US_TASK_0172368581__section_dc_vrp_ldp-p2p_cfg_203805"></a><a name="section_dc_vrp_ldp-p2p_cfg_203805"></a><a name="EN-US_TASK_0172368581__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>PE1 configuration file</p>
<pre class="screen">#
 sysname PE1
#
 bfd
#
 mpls lsr-id 1.1.1.1
#
 mpls
#
mpls ldp
 #
 ipv4-family
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.1.1 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.2.1 255.255.255.0
#
interface LoopBack1
 ip address 1.1.1.1 255.255.255.255
#
ospf 1
 area 0.0.0.0
  network 1.1.1.1 0.0.0.0
  network 10.1.1.0 0.0.0.255
  network 10.1.2.0 0.0.0.255
#
bfd 1to4 bind ldp-lsp peer-ip 4.4.4.4 nexthop 10.1.1.2 interface GigabitEthernet<span>0/1/0</span>
 discriminator local 1
 discriminator remote 2
 process-pst
 #
return</pre>
</li><li><p>PE2 configuration file</p>
<pre class="screen">#
 sysname PE2
#
 bfd
#
 mpls lsr-id 4.4.4.4
#
 mpls
#
mpls ldp
 #
 ipv4-family
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.5.1 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.4.1 255.255.255.0
#
interface LoopBack1
 ip address 4.4.4.4 255.255.255.255
#
ospf 1
 area 0.0.0.0
  network 10.1.5.0 0.0.0.255
  network 10.1.4.0 0.0.0.255
  network 4.4.4.4 0.0.0.0
#
bfd 4to1 bind peer-ip 1.1.1.1
 discriminator local 2
 discriminator remote 1
 #
return</pre>
</li><li><p>P1 configuration</p>
<pre class="screen">#
 sysname P1
#
 mpls lsr-id 2.2.2.2
#
 mpls
#
mpls ldp
 #
 ipv4-family
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.1.2 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.5.2 255.255.255.0
 mpls
 mpls ldp
#
interface LoopBack1
 ip address 2.2.2.2 255.255.255.255
#
ospf 1
 area 0.0.0.0
  network 2.2.2.2 0.0.0.0
  network 10.1.1.0 0.0.0.255
  network 10.1.5.0 0.0.0.255
return</pre>
</li><li><p>P2 configuration file</p>
<pre class="screen">#
 sysname P2
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.2.2 255.255.255.0
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.4.2 255.255.255.0
#
interface LoopBack1
 ip address 3.3.3.3 255.255.255.255
#
ospf 1
 area 0.0.0.0
  network 3.3.3.3 0.0.0.0
  network 10.1.4.0 0.0.0.255
  network 10.1.2.0 0.0.0.255
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0038.html">Configuration Examples for MPLS LDP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0110.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2045.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>