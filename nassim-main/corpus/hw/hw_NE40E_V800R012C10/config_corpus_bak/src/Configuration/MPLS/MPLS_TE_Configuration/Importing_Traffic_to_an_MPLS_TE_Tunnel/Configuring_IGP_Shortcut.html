
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IGP Shortcut">
<meta name="abstract" content="After IGP shortcut is configured on the ingress of a CR-LSP, the CR-LSP is not advertised to or used by neighbors.">
<meta name="description" content="After IGP shortcut is configured on the ingress of a CR-LSP, the CR-LSP is not advertised to or used by neighbors.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0033.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0035.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,te-p2pvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368175">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring IGP Shortcut</title>
</head>
<body><a name="EN-US_TASK_0172368175"></a><a name="EN-US_TASK_0172368175"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IGP Shortcut</h1>
<div class="taskbody" id="taskbody481281584214045"><p id="shortdesc537393421214045">After IGP shortcut is configured on the ingress of a CR-LSP, the CR-LSP is not advertised to or used by neighbors.</p>
<div class="context"><a name="EN-US_TASK_0172368175__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0172368175__context71724811214045"><p id="EN-US_TASK_0172368175__p8511339172317">During path calculation in a scenario where IGP shortcut is configured, the device calculates an SPF tree based on the paths in the IGP physical topology, and then finds the SPF nodes on which shortcut tunnels are configured. If the metric of a TE tunnel is smaller than that of an SPF node, the device replaces the outbound interfaces of the routes to this SPF node and those of the other routes passing through the SPF node with the TE tunnel interface.</p>
<div class="note" id="EN-US_TASK_0172368175__note740572510214045"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172368175__p2134441205214045">IGP shortcut and forwarding adjacency cannot be both configured.</p>
<p id="EN-US_TASK_0172368175__p10189123172011">Before configuring IGP shortcut in an LDP over TE scenario, you need to set up a remote LDP session. If no remote LDP session is established, traffic is steered to a TE tunnel, and traffic forwarding is interrupted.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368175__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172368175__steps881284267214045"><li id="EN-US_TASK_0172368175__step443566082214045"><span id="EN-US_TASK_0172368175__cmd168991045214331">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname11382434214331">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0172368175__p1837623134214331">The system view is displayed.</p>
</p></li><li id="EN-US_TASK_0172368175__step200689396214045"><span id="EN-US_TASK_0172368175__cmd1437352782214045">Run <span><a href="cmdqueryname=interface+tunnel"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname1231759976214331">interface tunnel</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368175__varname1143376977214331">tunnel-number</span></i></span></span><p><p id="EN-US_TASK_0172368175__p138491920155620">The view of the MPLS TE tunnel interface is displayed.</p>
</p></li><li id="EN-US_TASK_0172368175__step1571647820214045"><span id="EN-US_TASK_0172368175__cmd2131228881214331">Run <span><a href="cmdqueryname=mpls+te+igp+shortcut"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname642881718214331">mpls te igp shortcut</span></b></a> [ <strong><span id="EN-US_TASK_0172368175__cmdparmname1423108405214331">isis</span></strong> | <strong><span id="EN-US_TASK_0172368175__cmdparmname1886531817214331">ospf</span></strong> ]<span> or <a href="cmdqueryname=mpls+te+igp+shortcut"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname930397242214331">mpls te igp shortcut</span></b></a> <strong><span id="EN-US_TASK_0172368175__cmdparmname1741137437214331">isis</span></strong> <strong><span id="EN-US_TASK_0172368175__cmdparmname150794943214331">hold-time</span></strong> <i><span class="varname" id="EN-US_TASK_0172368175__varname1054192572214331">interval</span></i></span></span></span><p><p id="EN-US_TASK_0172368175__p473563762214331">IGP shortcut is configured.</p>
<p id="EN-US_TASK_0172368175__p1965945989214331"><strong><span id="EN-US_TASK_0172368175__cmdparmname470844381214331">hold-time</span></strong> <i><span class="varname" id="EN-US_TASK_0172368175__varname449309373214331">interval</span></i> specifies the period after which IS-IS responds to the Down status of the TE tunnel.</p>
<div class="p" id="EN-US_TASK_0172368175__p1183077438214331">If a TE tunnel goes Down and this parameter is not specified, IS-IS recalculates routes. If this parameter is specified, IS-IS responds to the Down status of the TE tunnel after only the specified interval elapses. It either recalculates routes or not depending on the TE tunnel status:<ul id="EN-US_TASK_0172368175__ul30830123214331"><li id="EN-US_TASK_0172368175__li402871705214331">If the TE tunnel goes Up, IS-IS does not recalculate routes.</li><li id="EN-US_TASK_0172368175__li987385877214331">If the TE tunnel goes Down, IS-IS still recalculates routes.</li></ul>
</div>
</p></li><li id="EN-US_TASK_0172368175__step675752742214045"><span id="EN-US_TASK_0172368175__cmd1482809458214045">Run <span><a href="cmdqueryname=mpls+te+igp+metric"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname901795452214331">mpls te igp metric</span></b></a> { <strong><span id="EN-US_TASK_0172368175__cmdparmname134165375214331">absolute</span></strong> | <strong><span id="EN-US_TASK_0172368175__cmdparmname868211438214331">relative</span></strong> } <i><span class="varname" id="EN-US_TASK_0172368175__varname737452573214331">value</span></i></span></span><p><p id="EN-US_TASK_0172368175__p2137343184414">The IGP metric of the TE tunnel is configured.</p>
</p><p><p id="EN-US_TASK_0172368175__p203675716454">You can set either of the following parameters when configuring the metric to be used by a TE tunnel during IGP shortcut path calculation:</p>
<ul id="EN-US_TASK_0172368175__ul2118288549214045"><li id="EN-US_TASK_0172368175__li825615171214045"><p id="EN-US_TASK_0172368175__p1222335730214045"><a name="EN-US_TASK_0172368175__li825615171214045"></a><a name="li825615171214045"></a>If <strong><span id="EN-US_TASK_0172368175__cmdparmname1060026029214331">absolute</span></strong> is configured, the TE tunnel metric is equal to the configured value.</p>
</li><li id="EN-US_TASK_0172368175__li1848022068214045"><p id="EN-US_TASK_0172368175__p650910315214045"><a name="EN-US_TASK_0172368175__li1848022068214045"></a><a name="li1848022068214045"></a>If <strong><span id="EN-US_TASK_0172368175__cmdparmname1528301277214331">relative</span></strong> is configured, the TE tunnel metric is equal to the sum of the IGP route metric and relative TE tunnel metric.</p>
</li></ul>
</p></li><li id="EN-US_TASK_0172368175__step1501398808214045"><span id="EN-US_TASK_0172368175__cmd1503443195214331">For IS-IS, run <span><a href="cmdqueryname=isis+enable"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname1631883922214331">isis enable</span></b></a> [ <i><span class="varname" id="EN-US_TASK_0172368175__varname1433884434214331">process-id</span></i> ]</span></span><p><p id="EN-US_TASK_0172368175__p1439870364214331">IS-IS is enabled on the tunnel interface.</p>
</p></li><li id="EN-US_TASK_0172368175__step1742954919214045"><span id="EN-US_TASK_0172368175__cmd18894906214045">For OSPF, run the following commands in sequence.</span><p><ul id="EN-US_TASK_0172368175__ul278273451214045"><li id="EN-US_TASK_0172368175__li1818611116212">Run the <a href="cmdqueryname=ospf+enable"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname192941910315">ospf enable</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368175__varname16621927839">process-id</span></i> <strong><span id="EN-US_TASK_0172368175__cmdparmname157831732234">area</span></strong> <i><span class="varname" id="EN-US_TASK_0172368175__varname128219395318">area-id</span></i> command to enable OSPF on the tunnel interface.<p id="EN-US_TASK_0172368175__p4737101614287">You can also run the <a href="cmdqueryname=network"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname1968102219108">network</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368175__varname11505142913108">address</span></i> <i><span class="varname" id="EN-US_TASK_0172368175__varname73833356102">wildcard-mask</span></i> command in the OSPF view to enable network segment routing on the tunnel interface.</p>
</li><li id="EN-US_TASK_0172368175__li522924621214045"><p id="EN-US_TASK_0172368175__p1291021623214045"><a name="EN-US_TASK_0172368175__li522924621214045"></a><a name="li522924621214045"></a>Run the <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname1957636787214331">quit</span></b></a> command to return to the system view.</p>
</li><li id="EN-US_TASK_0172368175__li223446988214045"><p id="EN-US_TASK_0172368175__p1672112360214045"><a name="EN-US_TASK_0172368175__li223446988214045"></a><a name="li223446988214045"></a>Run the <a href="cmdqueryname=ospf"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname735799850214331">ospf</span></b></a> [ <i><span class="varname" id="EN-US_TASK_0172368175__varname1568322596214331">process-id</span></i> ] command to enter the OSPF view.</p>
</li><li id="EN-US_TASK_0172368175__li650634628214045"><p id="EN-US_TASK_0172368175__p229462272214045"><a name="EN-US_TASK_0172368175__li650634628214045"></a><a name="li650634628214045"></a>Run the <a href="cmdqueryname=enable+traffic-adjustment"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname52992681214331">enable traffic-adjustment</span></b></a> command to enable IGP shortcut.</p>
</li></ul>
</p></li><li id="EN-US_TASK_0172368175__step672680336214045"><span id="EN-US_TASK_0172368175__cmd1586874724214331">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname238745263214331">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172368175__p796820792214331">The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172368175__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p" id="EN-US_TASK_0172368175__postreq1807162593214045"><div class="p" id="EN-US_TASK_0172368175__p1120481030214045">If a network fault occurs, IGP convergence is triggered. In this case, a transient forwarding status inconsistency may occur among nodes because of their different convergence rates, which poses the risk of microloops. To prevent microloops, perform the following steps:<div class="note" id="EN-US_TASK_0172368175__note735677858214045"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172368175__p10579237121314">Before you enable the OSPF TE tunnel anti-microloop function, <a href="dc_vrp_te-p2p_cfg_0058.html">configure CR-LSP backup parameters</a>.</p>
</div></div>
<ul id="EN-US_TASK_0172368175__ul68638120214045"><li id="EN-US_TASK_0172368175__li1046050498214045">For IS-IS, run the following commands in sequence.<ol id="EN-US_TASK_0172368175__ol1702906306214045"><li id="EN-US_TASK_0172368175__li1946242578214045"><p id="EN-US_TASK_0172368175__p1260741776214331"><a name="EN-US_TASK_0172368175__li1946242578214045"></a><a name="li1946242578214045"></a>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname1845157483214331">system-view</span></b></a></span></p>
<p id="EN-US_TASK_0172368175__p192482969214331">The system view is displayed.</p>
</li><li id="EN-US_TASK_0172368175__li592630139214045"><p id="EN-US_TASK_0172368175__p268150269214331"><a name="EN-US_TASK_0172368175__li592630139214045"></a><a name="li592630139214045"></a>Run <span><a href="cmdqueryname=isis"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname868506447214331">isis</span></b></a> [ <i><span class="varname" id="EN-US_TASK_0172368175__varname1533085460214331">process-id</span></i> ]</span></p>
<p id="EN-US_TASK_0172368175__p2052609376214331">An IS-IS process is created, and the IS-IS process view is displayed.</p>
</li><li id="EN-US_TASK_0172368175__li887236916214045"><p id="EN-US_TASK_0172368175__p192648441214331"><a name="EN-US_TASK_0172368175__li887236916214045"></a><a name="li887236916214045"></a>Run <span><a href="cmdqueryname=avoid-microloop+te-tunnel"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname713342204214331">avoid-microloop te-tunnel</span></b></a></span></p>
<p id="EN-US_TASK_0172368175__p1510392411214331">The IS-IS TE tunnel anti-microloop function is enabled.</p>
</li><li id="EN-US_TASK_0172368175__li445826721214045"><p id="EN-US_TASK_0172368175__p1205439772214331"><a name="EN-US_TASK_0172368175__li445826721214045"></a><a name="li445826721214045"></a>(Optional) Run <span><a href="cmdqueryname=avoid-microloop+te-tunnel+rib-update-delay"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname663072927214331">avoid-microloop te-tunnel rib-update-delay</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368175__varname1384351167214331">rib-update-delay</span></i></span></p>
<p id="EN-US_TASK_0172368175__p1117960553214331">The delay in delivering the IS-IS routes whose outbound interface is a TE tunnel interface is set.</p>
</li><li id="EN-US_TASK_0172368175__li432121100214045"><p id="EN-US_TASK_0172368175__p767920805214331"><a name="EN-US_TASK_0172368175__li432121100214045"></a><a name="li432121100214045"></a>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname606222356214331">commit</span></b></a></span></p>
<p id="EN-US_TASK_0172368175__p1784943535214331">The configuration is committed.</p>
</li></ol>
</li><li id="EN-US_TASK_0172368175__li660741163214045">For OSPF, run the following commands in sequence.<ol id="EN-US_TASK_0172368175__ol249458730214045"><li id="EN-US_TASK_0172368175__li1239534667214045"><p id="EN-US_TASK_0172368175__p2033231436214331"><a name="EN-US_TASK_0172368175__li1239534667214045"></a><a name="li1239534667214045"></a>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname635333210214331">system-view</span></b></a></span></p>
<p id="EN-US_TASK_0172368175__p380744015214331">The system view is displayed.</p>
</li><li id="EN-US_TASK_0172368175__li240046630214045"><p id="EN-US_TASK_0172368175__p1522165946214331"><a name="EN-US_TASK_0172368175__li240046630214045"></a><a name="li240046630214045"></a>Run <span><a href="cmdqueryname=ospf"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname132365628214331">ospf</span></b></a> [ <i><span class="varname" id="EN-US_TASK_0172368175__varname2131351560214331">process-id</span></i> ]</span></p>
<p id="EN-US_TASK_0172368175__p439561326214331">The OSPF view is displayed.</p>
</li><li id="EN-US_TASK_0172368175__li2130714126214045"><p id="EN-US_TASK_0172368175__p340046088214331"><a name="EN-US_TASK_0172368175__li2130714126214045"></a><a name="li2130714126214045"></a>Run <span><a href="cmdqueryname=avoid-microloop+te-tunnel"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname1899235873214331">avoid-microloop te-tunnel</span></b></a></span></p>
<p id="EN-US_TASK_0172368175__p1925380982214331">The OSPF TE tunnel anti-microloop function is enabled.</p>
</li><li id="EN-US_TASK_0172368175__li701643415214045"><p id="EN-US_TASK_0172368175__p852981229214331"><a name="EN-US_TASK_0172368175__li701643415214045"></a><a name="li701643415214045"></a>(Optional) Run <span><a href="cmdqueryname=avoid-microloop+te-tunnel+rib-update-delay"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname783531785214331">avoid-microloop te-tunnel rib-update-delay</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368175__varname1836043763214331">rib-update-delay</span></i></span></p>
<p id="EN-US_TASK_0172368175__p1114706642214331">The delay in delivering the OSPF routes whose outbound interface is a TE tunnel interface is set.</p>
</li><li id="EN-US_TASK_0172368175__li2122629742214045"><p id="EN-US_TASK_0172368175__p878847280214331"><a name="EN-US_TASK_0172368175__li2122629742214045"></a><a name="li2122629742214045"></a>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172368175__cmdname353537186214331">commit</span></b></a></span></p>
<p id="EN-US_TASK_0172368175__p1015328461214331">The configuration is committed.</p>
</li></ol>
</li></ul>
</div>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0033.html">Importing Traffic to an MPLS TE Tunnel
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0035.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>