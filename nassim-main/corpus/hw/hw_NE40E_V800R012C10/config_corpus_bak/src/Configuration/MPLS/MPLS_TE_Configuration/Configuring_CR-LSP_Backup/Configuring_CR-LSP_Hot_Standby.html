
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring CR-LSP Hot Standby">
<meta name="abstract" content="A hot-standby CR-LSP is established immediately after a primary CR-LSP is set up. If the primary CR-LSP fails, traffic is switched to the hot-standby CR-LSP.">
<meta name="description" content="A hot-standby CR-LSP is established immediately after a primary CR-LSP is set up. If the primary CR-LSP fails, traffic is switched to the hot-standby CR-LSP.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0057.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0059.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368228">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring CR-LSP Hot Standby</title>
</head>
<body><a name="EN-US_TASK_0172368228"></a><a name="EN-US_TASK_0172368228"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring CR-LSP Hot Standby</h1>
<div class="taskbody"><p>A hot-standby CR-LSP is established immediately after a primary CR-LSP is set up. If the primary CR-LSP fails, traffic is switched to the hot-standby CR-LSP.</p>
<div class="context"><a name="EN-US_TASK_0172368228__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>CR-LSP hot-standby is disabled by default. After CR-LSP hot-standby is configured on the ingress of a primary CR-LSP, the system automatically selects a path for a hot-standby CR-LSP.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368228__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">tunnel-number</span></i></span></span><p><p>The view of the MPLS TE tunnel interface is displayed.</p>
</p></li><li><span><a href="dc_vrp_te-p2p_cfg_0003.html">Establish a primary RSVP-TE tunnel.</a></span></li><li><span>Run <a href="cmdqueryname=mpls+te+backup"><b><span class="cmdname">mpls te backup</span></b></a> <strong><span>hot-standby</span></strong> { <strong><span>mode</span></strong> { <strong><span>revertive</span></strong> [ <strong><span>wtr</span></strong> <i><span class="varname">interval</span></i> ] | <strong><span>non-revertive</span></strong> } | <strong><span>wtr</span></strong> <i><span class="varname">interval</span></i> }</span><p><p>The mode of establishing a hot-standby CR-LSP is configured.</p>
</p><p><div class="p">Select the following parameters as needed to enable sub-functions:<ul><li><p><strong><span>mode</span></strong> <strong><span>revertive</span></strong> [ <strong><span>wtr</span></strong> <i><span class="varname">interval</span></i> ]: enables a device to switch traffic back to the primary CR-LSP.</p>
</li><li><p><strong><span>mode</span></strong> <strong><span>non-revertive</span></strong>: disables a device from switching traffic back to the primary CR-LSP.</p>
</li><li><p><strong><span>wtr</span></strong> <i><span class="varname">interval</span></i>: sets the time before a traffic switchback is performed.</p>
</li></ul>
</div>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The bypass and backup tunnels cannot be configured on the same tunnel interface. The <a href="cmdqueryname=mpls+te+bypass-tunnel"><b><span class="cmdname">mpls te bypass-tunnel</span></b></a> and <a href="cmdqueryname=mpls+te+backup"><b><span class="cmdname">mpls te backup</span></b></a> commands cannot be configured on the same tunnel interface. Also, the <a href="cmdqueryname=mpls+te+protected-interface"><b><span class="cmdname">mpls te protected-interface</span></b></a> and <a href="cmdqueryname=mpls+te+backup"><b><span class="cmdname">mpls te backup</span></b></a> commands cannot be configured on the same tunnel interface.</p>
</div></div>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=mpls+te+backup"><b><span class="cmdname">mpls te backup</span></b></a> <strong><span>hot-standby</span></strong> <strong><span>overlap-path</span></strong></span></span><p><p>The device is configured to allow the path of a primary CR-LSP and the path of a hot-standby CR-LSP to overlap.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=mpls+te+backup"><b><span class="cmdname">mpls te backup</span></b></a> <strong><span>hot-standby</span></strong> <strong><span>dynamic-bandwidth</span></strong></span></span><p><p>The dynamic bandwidth adjustment function is enabled for the hot-standby CR-LSP.</p>
<p>This function enables a hot-standby CR-LSP to obtain bandwidth resources only after the hot-standby CR-LSP takes over traffic from a faulty primary CR-LSP. This function helps efficiently use network resources and reduce network costs.</p>
</p></li><li><span>(Optional) Configure CR-LSP backup parameters.</span><ul><li>Run the <a href="cmdqueryname=mpls+te+path+explicit-path"><b><span class="cmdname">mpls te path explicit-path</span></b></a> <i><span class="varname">path-name</span></i> <strong><span>secondary</span></strong> command to specify an explicit path for the backup CR-LSP.<p>This parameter can be used to control the path of the backup CR-LSP.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=mpls+te+path+explicit-path"><b><span class="cmdname">mpls te path explicit-path</span></b></a> <i><span class="varname">path-name</span></i> <strong><span>secondary</span></strong> and <a href="cmdqueryname=mpls+te+backup"><b><span class="cmdname">mpls te backup</span></b></a> commands must be configured at the same time for the configuration to take effect.</p>
</div></div>
</li><li>Run the <a href="cmdqueryname=mpls+te+affinity+property"><b><span class="cmdname">mpls te affinity property</span></b></a> <i><span class="varname">properties</span></i> [ <strong><span>mask</span></strong> <i><span class="varname">mask-value</span></i> ] <strong><span>secondary</span></strong> command to configure an affinity property for the backup CR-LSP.<p>This parameter can be used to control the path of the backup CR-LSP.</p>
</li><li>Run the <a href="cmdqueryname=mpls+te+hop-limit"><b><span class="cmdname">mpls te hop-limit</span></b></a> <i><span class="varname">hop-limit-value</span></i> <strong><span>secondary</span></strong> command to configure a hop limit for the backup CR-LSP.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=mpls+te+hop-limit"><b><span class="cmdname">mpls te hop-limit</span></b></a> <i><span class="varname">hop-limit-value</span></i> <strong><span>secondary</span></strong> and <a href="cmdqueryname=mpls+te+backup"><b><span class="cmdname">mpls te backup</span></b></a> commands must be configured at the same time for the configuration to take effect.</p>
</div></div>
</li></ul>
</li><li><span>(Optional) Run <a href="cmdqueryname=hotstandby-switch"><b><span class="cmdname">hotstandby-switch</span></b></a> { <strong><span>force</span></strong> | <strong><span>clear</span></strong> }</span><p><p>Forcible traffic switching is configured.</p>
</p><p><p>If the primary CR-LSP goes down, traffic is switched to the hot-standby CR-LSP. If the primary LSP goes up, traffic is switched back to the primary LSP by default. This configuration provides the flexibility to control the traffic switchover behavior. </p>
<p>If <strong><span>force</span></strong> is specified, traffic is temporarily switched to the hot-standby CR-LSP. If <strong><span>clear</span></strong> is specified, traffic is switched back to the primary CR-LSP.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=mpls+te+multi-protect+fast-switch+enable"><b><span class="cmdname">mpls te multi-protect fast-switch enable</span></b></a></span><p><p>Coexistence of FRR switching and MPLS TE HSB is enabled.</p>
</p><p><p>To enable the coexistence of FRR switching and MPLS TE HSB, TE FRR must be deployed on the entire network. HSB must be deployed on the ingress, BFD for TE LSP must be enabled, and the delayed down function must be enabled on the outbound interface of the P. Otherwise, rapid switching cannot be performed in case of the dual points of failure.</p>
</p></li><li><span>(Optional) Configure CSPF fast switching.</span><p><p>In a scenario where BFD is not configured, only protocol convergence can trigger TE hot-standby switching if the primary LSP fails. To improve the switching speed, you can configure CSPF-based fast switching so that hot-standby switching can be performed quickly.</p>
</p><ol type="a"><li><span>Run the <a href="cmdqueryname=mpls"><b><span class="cmdname">mpls</span></b></a> command to enter the MPLS view.</span></li><li><span>Run the <a href="cmdqueryname=mpls+te+tedb+fast-notice"><b><span class="cmdname">mpls te tedb fast-notice</span></b></a> command to configure CSPF fast switching.</span></li></ol>
</li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0057.html">Configuring CR-LSP Backup
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0059.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>