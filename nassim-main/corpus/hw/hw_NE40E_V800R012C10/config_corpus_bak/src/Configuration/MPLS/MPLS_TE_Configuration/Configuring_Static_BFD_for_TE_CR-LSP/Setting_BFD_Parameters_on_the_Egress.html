
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Setting BFD Parameters on the Egress">
<meta name="abstract" content="This section describes how to set BFD parameters on the egress to monitor CR-LSPs using BFD sessions.">
<meta name="description" content="This section describes how to set BFD parameters on the egress to monitor CR-LSPs using BFD sessions.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0121.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0123.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0125.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,te-p2pvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368259">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Setting BFD Parameters on the Egress</title>
</head>
<body><a name="EN-US_TASK_0172368259"></a><a name="EN-US_TASK_0172368259"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Setting BFD Parameters on the Egress</h1>
<div class="taskbody" id="taskbody1986238641214046"><p id="shortdesc1814170748214046">This section describes how to set BFD parameters on the egress to monitor CR-LSPs using BFD sessions.</p>
<div class="steps"><a name="EN-US_TASK_0172368259__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172368259__steps1206087870214046"><li id="EN-US_TASK_0172368259__step1559293520214046"><span id="EN-US_TASK_0172368259__cmd1572162121214331">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172368259__cmdname2106749778214331">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0172368259__p1308671163214331">The system view is displayed.</p>
</p></li><li id="EN-US_TASK_0172368259__step459851725214046"><span id="EN-US_TASK_0172368259__cmd2081780169214046">The IP link, LSP, or TE tunnel can be used as the reverse tunnel to inform the ingress of a fault. If there is a reverse LSP or a TE tunnel, use the reverse LSP or the TE tunnel. If no LSP or TE tunnel is established, use an IP link as a reverse tunnel. If the configured reverse tunnel requires BFD detection, you can configure a pair of BFD sessions for it. Run the following commands as required:</span><p><ul id="EN-US_TASK_0172368259__ul316690599214046"><li id="EN-US_TASK_0172368259__li1971807491214046"><p id="EN-US_TASK_0172368259__p200860733214046"><a name="EN-US_TASK_0172368259__li1971807491214046"></a><a name="li1971807491214046"></a>Configure a BFD session to monitor reverse channels.</p>
<ul id="EN-US_TASK_0172368259__ul1167447445214046"><li id="EN-US_TASK_0172368259__li1478952067214046">For an IP link, run <span id="EN-US_TASK_0172368259__ph1526727080214331"><a href="cmdqueryname=bfd"><b><span class="cmdname" id="EN-US_TASK_0172368259__cmdname1567419204214331">bfd</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368259__varname1402526968214331">session-name</span></i> <strong><span id="EN-US_TASK_0172368259__cmdparmname1165789537214331">bind</span></strong> <strong><span id="EN-US_TASK_0172368259__cmdparmname1538636835214331">peer-ip</span></strong> <i><span class="varname" id="EN-US_TASK_0172368259__varname969204848214331">ip-address</span></i> [ <strong><span id="EN-US_TASK_0172368259__cmdparmname957838277214331">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172368259__varname1939865968214331">vpn-name</span></i> ] [ <strong><span id="EN-US_TASK_0172368259__cmdparmname1644585961214331">source-ip</span></strong> <i><span class="varname" id="EN-US_TASK_0172368259__varname2016129265214331">ip-address</span></i> ]</span></li><li id="EN-US_TASK_0172368259__li1902319668214046"><p id="EN-US_TASK_0172368259__p550123540214046"><a name="EN-US_TASK_0172368259__li1902319668214046"></a><a name="li1902319668214046"></a>For an LDP LSP, run <span><a href="cmdqueryname=bfd"><b><span class="cmdname" id="EN-US_TASK_0172368259__cmdname1411087109214046">bfd</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368259__varname1321998233214331">session-name</span></i> <strong><span id="EN-US_TASK_0172368259__cmdparmname1690562709214331">bind</span></strong> <strong><span id="EN-US_TASK_0172368259__cmdparmname912365297214331">ldp-lsp</span></strong> <strong><span id="EN-US_TASK_0172368259__cmdparmname427890803214331">peer-ip</span></strong> <i><span class="varname" id="EN-US_TASK_0172368259__varname139815123214331">ip-address</span></i> <strong><span id="EN-US_TASK_0172368259__cmdparmname133472982214331">nexthop</span></strong> <i><span class="varname" id="EN-US_TASK_0172368259__varname1220719621214331">ip-address</span></i> [ <strong><span id="EN-US_TASK_0172368259__cmdparmname1149985759214331">interface</span></strong> <i><span class="varname" id="EN-US_TASK_0172368259__varname2037736134214331">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172368259__varname170792386214331">interface-number</span></i> ]</span></p>
</li><li id="EN-US_TASK_0172368259__li918753842214046"><p id="EN-US_TASK_0172368259__p1088400564214046"><a name="EN-US_TASK_0172368259__li918753842214046"></a><a name="li918753842214046"></a>For a CR-LSP, run <span><a href="cmdqueryname=bfd"><b><span class="cmdname" id="EN-US_TASK_0172368259__cmdname1723000542214046">bfd</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368259__varname1826327442214331">session-name</span></i> <strong><span id="EN-US_TASK_0172368259__cmdparmname528368721214331">bind</span></strong> <strong><span id="EN-US_TASK_0172368259__cmdparmname1436629234214331">mpls-te</span></strong> <strong><span id="EN-US_TASK_0172368259__cmdparmname496871417214331">interface</span></strong> <strong><span id="EN-US_TASK_0172368259__cmdparmname283011952214331">tunnel</span></strong> <i><span class="varname" id="EN-US_TASK_0172368259__varname377968457214331">interface-number</span></i> <strong><span id="EN-US_TASK_0172368259__cmdparmname1569906242214331">te-lsp</span></strong> [ <strong><span id="EN-US_TASK_0172368259__cmdparmname1723149049214331">backup</span></strong> ]</span></p>
</li><li id="EN-US_TASK_0172368259__li998588954214046"><p id="EN-US_TASK_0172368259__p699848573214046"><a name="EN-US_TASK_0172368259__li998588954214046"></a><a name="li998588954214046"></a>For a TE tunnel, run <span><a href="cmdqueryname=bfd"><b><span class="cmdname" id="EN-US_TASK_0172368259__cmdname703453826214046">bfd</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368259__varname249485280214331">session-name</span></i> <strong><span id="EN-US_TASK_0172368259__cmdparmname810284405214331">bind</span></strong> <strong><span id="EN-US_TASK_0172368259__cmdparmname1953427989214331">mpls-te</span></strong> <strong><span id="EN-US_TASK_0172368259__cmdparmname28219702214331">interface</span></strong> <strong><span id="EN-US_TASK_0172368259__cmdparmname47154067214331">tunnel</span></strong> <i><span class="varname" id="EN-US_TASK_0172368259__varname2122446530214331">interface-number</span></i></span></p>
</li></ul>
</li></ul>
</p></li><li id="EN-US_TASK_0172368259__step1570962481214046"><span id="EN-US_TASK_0172368259__cmd6445819141619">Run <a href="cmdqueryname=discriminator"><b><span class="cmdname" id="EN-US_TASK_0172368259__cmdname1314933796214046">discriminator</span></b></a> <strong><span id="EN-US_TASK_0172368259__cmdparmname726311521514">local</span></strong> <i><span class="varname" id="EN-US_TASK_0172368259__varname172631915141516">discr-value</span></i></span><p><p id="EN-US_TASK_0172368259__p1026351711161">The local discriminator of the BFD session is set.</p>
</p></li><li id="EN-US_TASK_0172368259__step2070473193214046"><span id="EN-US_TASK_0172368259__cmd1987001094214331">Run <span><a href="cmdqueryname=discriminator"><b><span class="cmdname" id="EN-US_TASK_0172368259__cmdname1790472015214331">discriminator</span></b></a> <strong><span id="EN-US_TASK_0172368259__cmdparmname1664869694214331">remote</span></strong> <i><span class="varname" id="EN-US_TASK_0172368259__varname1175997215214331">discr-value</span></i></span></span><p><p id="EN-US_TASK_0172368259__p1720905251214331">The remote discriminator of the BFD session is set.</p>
</p><p><div class="note" id="EN-US_TASK_0172368259__note155782790214046"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172368259__p458785837214046">The local discriminator of the local device and the remote discriminator of the remote device are the same. The remote discriminator of the local device and the local discriminator of the remote device are the same. A discriminator inconsistency causes the BFD session to fail to be established.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172368259__step1220569333214046"><span id="EN-US_TASK_0172368259__cmd1020417761214331">(Optional) Run <span><a href="cmdqueryname=min-tx-interval"><b><span class="cmdname" id="EN-US_TASK_0172368259__cmdname158783676214331">min-tx-interval</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368259__varname1424408218214331">tx-interval</span></i></span></span><p><p id="EN-US_TASK_0172368259__p211624445214331">The local minimum interval at which BFD packets are sent is configured.</p>
</p><p><p id="EN-US_TASK_0172368259__p610601988214331">If an IP link is used as a reverse tunnel, this parameter is inapplicable.</p>
<div class="p" id="EN-US_TASK_0172368259__p2012922614214331"><ul id="EN-US_TASK_0172368259__ul1880482307214331"><li id="EN-US_TASK_0172368259__li655279942214331">Effective local interval at which BFD packets are sent = MAX { Configured local interval at which BFD packets are sent, Configured remote interval at which BFD packets are received }</li><li id="EN-US_TASK_0172368259__li1814817379214331">Effective local interval at which BFD packets are received = MAX { Configured remote interval at which BFD packets are sent, Configured local interval at which BFD packets are received }</li><li id="EN-US_TASK_0172368259__li634191572214331">Effective local detection interval = Effective local interval at which BFD packets are received x Configured remote detection multiplier</li></ul>
</div>
<p id="EN-US_TASK_0172368259__p202796787214331">For example:</p>
<ul id="EN-US_TASK_0172368259__ul1727695283214331"><li id="EN-US_TASK_0172368259__li238803715214331"><p id="EN-US_TASK_0172368259__p2074585409214331"><a name="EN-US_TASK_0172368259__li238803715214331"></a><a name="li238803715214331"></a>The local interval at which BFD packets are sent is set to 200 ms, the local interval at which BFD packets are received is set to 300 ms, and the local detection multiplier is set to 4.</p>
</li><li id="EN-US_TASK_0172368259__li1125953585214331"><p id="EN-US_TASK_0172368259__p276005731214331"><a name="EN-US_TASK_0172368259__li1125953585214331"></a><a name="li1125953585214331"></a>The remote interval at which BFD packets are sent is set to 100 ms, the remote interval at which BFD packets are received is set to 600 ms, and the remote detection multiplier is set to 5.</p>
</li></ul>
<p id="EN-US_TASK_0172368259__p2007420590214331">Then,</p>
<ul id="EN-US_TASK_0172368259__ul604838302214331"><li id="EN-US_TASK_0172368259__li922018674214331"><p id="EN-US_TASK_0172368259__p125857166214331"><a name="EN-US_TASK_0172368259__li922018674214331"></a><a name="li922018674214331"></a>Effective local interval at which BFD packets are sent = MAX { 200 ms, 600 ms } = 600 ms; effective local interval at which BFD packets are received = MAX { 100 ms, 300 ms } = 300 ms; effective local detection period = 300 ms x 5 = 1500 ms</p>
</li><li id="EN-US_TASK_0172368259__li1695248193214331"><p id="EN-US_TASK_0172368259__p1370835002214331"><a name="EN-US_TASK_0172368259__li1695248193214331"></a><a name="li1695248193214331"></a>Effective remote interval at which BFD packets are sent = MAX { 100 ms, 300 ms } = 300 ms; effective remote receiving interval = MAX { 200 ms, 600 ms } = 600 ms; effective remote detection period = 600 ms x 4 = 2400 ms</p>
</li></ul>
</p></li><li id="EN-US_TASK_0172368259__step1936460552214046"><span id="EN-US_TASK_0172368259__cmd977827179214046">(Optional) Run <span><a href="cmdqueryname=min-rx-interval"><b><span class="cmdname" id="EN-US_TASK_0172368259__cmdname669868643214046">min-rx-interval</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368259__varname1932467477214331">rx-interval</span></i></span></span><p><p id="EN-US_TASK_0172368259__p1050103811220">The local minimum interval at which BFD packets are received is set.</p>
</p></li><li id="EN-US_TASK_0172368259__step663881315214046"><span id="EN-US_TASK_0172368259__cmd1881613949214331">(Optional) Run <span><a href="cmdqueryname=detect-multiplier"><b><span class="cmdname" id="EN-US_TASK_0172368259__cmdname388294719214331">detect-multiplier</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368259__varname551097755214331">multiplier</span></i></span></span><p><p id="EN-US_TASK_0172368259__p71869264214331">The BFD detection multiplier is set.</p>
</p></li><li id="EN-US_TASK_0172368259__step1886252579214046"><span id="EN-US_TASK_0172368259__cmd507076437214331">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172368259__cmdname1195921763214331">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172368259__p794727976214331">The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0121.html">Configuring Static BFD for TE CR-LSP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0123.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_te-p2p_cfg_0125.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>