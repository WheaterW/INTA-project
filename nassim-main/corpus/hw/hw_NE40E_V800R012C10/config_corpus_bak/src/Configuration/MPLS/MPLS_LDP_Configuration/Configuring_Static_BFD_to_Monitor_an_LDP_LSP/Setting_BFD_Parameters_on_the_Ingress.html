
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Setting BFD Parameters on the Ingress">
<meta name="abstract" content="BFD parameters must be configured on the ingress before a BFD session is established to monitor an LDP LSP.">
<meta name="description" content="BFD parameters must be configured on the ingress before a BFD session is established to monitor an LDP LSP.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2033.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2034.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2036.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ldp-p2pvrp,w00800033,z00545680,w00556928,w00606909,z00809835,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="b00896120">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368476">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Setting BFD Parameters on the Ingress</title>
</head>
<body><a name="EN-US_TASK_0172368476"></a><a name="EN-US_TASK_0172368476"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Setting BFD Parameters on the Ingress</h1>
<div class="taskbody"><p>BFD parameters must be configured on the ingress before a BFD session is established to monitor an LDP LSP.</p>
<div class="steps"><a name="EN-US_TASK_0172368476__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bfd+bind+ldp-lsp+peer-ip+nexthop+interface"><b><span class="cmdname">bfd</span></b></a> <i><span class="varname">session-name</span></i> <strong><span>bind</span></strong> <strong><span>ldp-lsp</span></strong> <strong><span>peer-ip</span></strong> <i><span class="varname">ip-address</span></i> <strong><span>nexthop</span></strong> <i><span class="varname">ip-address</span></i> [ <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> ]</span><p><p>A BFD session is bound to a dynamic LSP.</p>
</p></li><li><span>Run <a href="cmdqueryname=discriminator+local"><b><span class="cmdname">discriminator</span></b></a> <strong><span>local</span></strong> <i><span class="varname">discr-value</span></i></span><p><p>A local discriminator is configured for the BFD session.</p>
</p></li><li><span>Run <a href="cmdqueryname=discriminator+remote"><b><span class="cmdname">discriminator</span></b></a> <strong><span>remote</span></strong> <i><span class="varname">discr-value</span></i></span><p><p>A remote discriminator is configured for the BFD session.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The local discriminator of the local device and the remote discriminator of the remote device are the same. The remote discriminator of the local device and the local discriminator of the remote device are the same. A discriminator inconsistency causes the BFD session to fail to be established.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=process-pst"><b><span class="cmdname">process-pst</span></b></a></span><p><p>The BFD session is allowed to modify the port or link state table upon detection of a fault.</p>
</p><p><p>If the BFD session bound to a trunk<span> or VLANIF</span> member interface is enabled to modify the port state table and the corresponding main interface is configured with a BFD session, you must configure a wait to restore (WTR) time for the BFD session bound to the main interface. This prevents the BFD session bound to the main interface from flapping when its member interface joins or leaves the interface.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=min-tx-interval"><b><span class="cmdname">min-tx-interval</span></b></a> <i><span class="varname">tx-interval</span></i></span><p><p>The minimum interval at which the local device sends BFD packets is changed.</p>
</p><p><p>If the reverse link is an IP link, this command cannot be run.</p>
<p>Effective local interval at which BFD packets are sent = MAX { Locally configured interval at which BFD packets are sent, Remotely configured interval at which BFD packets are received }</p>
<p>Effective local interval at which BFD packets are received = MAX { Remotely configured interval at which BFD packets are sent, Locally configured interval at which BFD packets are received }</p>
<p>Local BFD detection period = Actual local interval at which BFD packets are received x Remotely configured BFD detection multiplier</p>
<p>For example, if: On the local device, the intervals at which BFD packets are sent and received are 200 ms and 300 ms, respectively, and the detection multiplier is 4; on the remote device, the intervals at which BFD packets are sent and received are 100 ms and 600 ms, respectively, and the detection multiplier is 5. Then:</p>
<ul><li><p>On the local device, the actual interval for sending BFD packets is 600 ms calculated using the formula MAX { 200 ms, 600 ms }, the interval for receiving BFD packets is 300 ms calculated using the formula MAX { 100 ms, 300 ms }, and the detection period is 1500 ms (300 ms Ã 5).</p>
</li><li><p>On the remote device, the actual interval for sending BFD packets is 300 ms calculated using the formula MAX { 100 ms, 300 ms }, the interval for receiving BFD packets is 600 ms calculated using the formula MAX { 200 ms, 600 ms }, and the detection period is 2400 ms (600 ms Ã 4).</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When POS-Trunk interfaces work in 1:1 mode, the local actual receiving interval must be greater than or equal to three times of the POS-Trunk interface switching time. Otherwise, the BFD session may go Down during the POS-Trunk interface switching.</p>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=min-rx-interval"><b><span class="cmdname">min-rx-interval</span></b></a> <i><span class="varname">rx-interval</span></i></span><p><p>The minimum interval at which the local device receives BFD packets is changed.</p>
</p><p><p>If the reverse link is an IP link, this command cannot be run.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=detect-multiplier"><b><span class="cmdname">detect-multiplier</span></b></a> <i><span class="varname">multiplier</span></i></span><p><p>A local BFD detection multiplier is set.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2033.html">Configuring Static BFD to Monitor an LDP LSP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2034.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_2036.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>