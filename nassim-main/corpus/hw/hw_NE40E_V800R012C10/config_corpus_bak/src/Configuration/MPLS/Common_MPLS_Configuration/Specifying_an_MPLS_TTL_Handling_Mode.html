
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Specifying an MPLS TTL Handling Mode">
<meta name="abstract" content="An MPLS time to live (TTL) handling mode defines how a node propagates TTL information between the IP header and label stack in each MPLS packet.">
<meta name="description" content="An MPLS time to live (TTL) handling mode defines how a node propagates TTL information between the IP header and label stack in each MPLS packet.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mplsm_cfg_00000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/spec/MPLS_Common_limitation.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_mplsm_cfg_6001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mplsm_cfg_0005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mplsm_cfg_0006.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="l00468467,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS Common">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS Common">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS Common">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00425560,l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="b00896120">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368023">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Specifying an MPLS TTL Handling Mode</title>
</head>
<body><a name="EN-US_TASK_0172368023"></a><a name="EN-US_TASK_0172368023"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Specifying an MPLS TTL Handling Mode</h1>
<div class="taskbody"><p>An MPLS time to live (TTL) handling mode defines how a node propagates TTL information between the IP header and label stack in each MPLS packet.</p>
<div class="context"><a name="EN-US_TASK_0172368023__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>MPLS nodes handle TTLs as follows:</p>
<ul><li><p>Nodes process TTLs in either uniform or pipe mode before the TTLs expire. You can configure an MPLS TTL processing mode on the ingress PE.</p>
<p>Configure the pipe mode on the ingress for an MPLS virtual private network (VPN) so that the MPLS backbone network structure can be hidden, which improves network security.</p>
</li><li><p>Nodes process expired MPLS TTLs and reply with ICMP reply messages.</p>
<p>On an ISP backbone network that transmits VPN traffic over MPLS tunnels, after an MPLS node receives an MPLS packet with two labels and an expired TTL, the MPLS node replies to the source with an ICMP reply message. Because the MPLS node cannot send the ICMP reply message over IP routes, the ICMP reply message travels along an LSP to the egress. The egress forwards the ICMP reply message to the source over IP routes.</p>
<p>On an ISP backbone that transmits VPN traffic over MPLS tunnels, after an MPLS node receives MPLS packets each with a single label and an expired TTL, the MPLS node replies to the source with an ICMP reply message over IP routes, without forwarding the message to the egress along the LSP. If the MPLS node has no reachable route to the transmit end, the ICMP reply message is discarded. As a result, traceroute results do not contain node information.</p>
<p>On an autonomous system boundary router (ASBR) in the inter-AS VPN Option B and a superstratum provider edge (SPE) of <span>the hierarchy of virtual private networks (HoVPNs)</span>, each MPLS packet that contains VPN information carries a single label. If the TTL in the MPLS packet expires, a node replies with an ICMP reply message over an IP route, and the ICMP reply message does not carry MPLS node information. Therefore, before you perform the traceroute operation on the ASBR or SPE, run the <a href="cmdqueryname=undo+ttl+expiration+pop"><b><span class="cmdname">undo ttl expiration pop</span></b></a> command on the ASBR or SPE to enable ICMP reply messages to travel along original LSPs.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For details about <span>HoVPN and </span>SPE, see the chapter "VPN" in <em><span class="keyword">Universal Service Router</span> Configuration Guide</em>.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172368023__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Task</h4><p>Before configuring an MPLS TTL processing mode, configure MPLS or the MPLS IP VPN.</p>
</div></div>
</div>

<ul class="ullinks">
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mplsm_cfg_0005.html">Specifying the TTL Mode for MPLS</a>
</dt>
<dd>
MPLS nodes process TTLs in either uniform or pipe mode.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mplsm_cfg_0006.html">Configuring the Path for ICMP Reply Messages</a>
</dt>
<dd>
The path along which ICMP reply messages travel must be specified on both the ingress and egress.</dd>
</dl>
</ul>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mplsm_cfg_00000.html">Common MPLS Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/spec/MPLS_Common_limitation.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_mplsm_cfg_6001.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>