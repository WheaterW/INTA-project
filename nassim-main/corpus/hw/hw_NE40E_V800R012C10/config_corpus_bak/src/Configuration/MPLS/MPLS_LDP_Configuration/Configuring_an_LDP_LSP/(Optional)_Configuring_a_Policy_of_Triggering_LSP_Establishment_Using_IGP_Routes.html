
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring a Policy of Triggering LSP Establishment Using IGP Routes">
<meta name="abstract" content="A policy can be configured to allow LDP to use eligible static and IGP routes to trigger LSP establishment.">
<meta name="description" content="A policy can be configured to allow LDP to use eligible static and IGP routes to trigger LSP establishment.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0047.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_00210.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="ldp-p2pvrp,w00800033,z00545680,w00556928,w00606909,z00809835,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featurename" content="MPLS TE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS LDP">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="z00809835">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="b00896120">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368461">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring a Policy of Triggering LSP Establishment Using IGP Routes</title>
</head>
<body><a name="EN-US_TASK_0172368461"></a><a name="EN-US_TASK_0172368461"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring a Policy of Triggering LSP Establishment Using IGP Routes</h1>
<div class="taskbody"><p>A policy can be configured to allow LDP to use eligible static and IGP routes to trigger LSP establishment.</p>
<div class="context"><a name="EN-US_TASK_0172368461__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">A policy can be configured to allow LDP to use eligible static and IGP routes to trigger the establishment of public-network ingress and egress LSPs.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>A policy for triggering LSP establishment can be configured in either the MPLS or MPLS-LDP-IPv4 view. If such a policy is configured in both views, the configuration in the MPLS-LDP-IPv4 view takes effect.</p>
<p>The LSR must have route entries that exactly match the FECs for the LSPs to be established.</p>
</div></div>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172368461__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a policy for triggering LSP establishment in the MPLS view.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls"><b><span class="cmdname">mpls</span></b></a></span><p><p>The MPLS view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=lsp-trigger+all+host+ip-prefix+none"><b><span class="cmdname">lsp-trigger</span></b></a> { <strong><span>all</span></strong> | <strong><span>host</span></strong> | <strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i> | <strong><span>none</span></strong> }</span><p><p>The policy of triggering LSP establishment using static and IGP routes is configured.</p>
</p><p><ul><li>If the <strong><span>all</span></strong> parameter is specified, all IGP routes can trigger LDP to establish LSPs. However, public-network BGP routes or default routes cannot trigger LDP to establish LSPs.</li><li>If <strong><span>host</span></strong> is specified, only host IP routes with 32-bit addresses can trigger LDP to establish LSPs.</li><li>If the <strong><span>ip-prefix</span></strong> parameter is specified, only FECs matching a specified IP address prefix list can trigger LDP to establish LSPs.</li><li>If the <strong><span>none</span></strong> parameter is specified, LDP cannot be triggered to establish LSPs.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>By default, IP routes with 32-bit addresses are used to trigger LDP to establish LSPs. The default configuration is recommended. Running the <a href="cmdqueryname=lsp-trigger+all"><b><span class="cmdname">lsp-trigger all</span></b></a> command is not recommended, as this command enables LDP LSPs to be established for all static routes and IGP routes. As a result, a large number of LSPs are established, consuming excessive label resources and slowing down LSP convergence on the entire network. You are advised to run the <a href="cmdqueryname=lsp-trigger+ip-prefix"><b><span class="cmdname">lsp-trigger ip-prefix</span></b></a> command instead.</li><li>If the triggering policy is changed from <strong><span>all</span></strong> to <strong><span>host</span></strong>, LSPs that have been established using host routes are not reestablished.</li></ul>
</div></div>
</li></ul>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=proxy-egress+disable"><b><span class="cmdname">proxy-egress disable</span></b></a></span><p><p>A policy for triggering proxy egress LSP establishment is configured.</p>
</p><p><p>If a policy allows LDP to establish LSPs for static and IGP routes or for routes within a specified IP prefix list, the policy also allows LDP to establish proxy egress LSPs. However, these proxy egress LSPs may be useless and unnecessarily consume system resources. To prevent such an issue, run this command to disable the device from establishing proxy egress LSPs.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure a policy for triggering LSP establishment in the MPLS-LDP-IPv4 view.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls"><b><span class="cmdname">mpls</span></b></a></span><p><p>The MPLS view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=proxy-egress+disable"><b><span class="cmdname">proxy-egress disable</span></b></a></span><p><p>A policy for triggering proxy egress LSP establishment is configured.</p>
</p><p><p>If a policy allows LDP to establish LSPs for static and IGP routes or for routes within a specified IP prefix list, the policy also allows LDP to establish proxy egress LSPs. However, these proxy egress LSPs may be useless and unnecessarily consume system resources. To prevent such an issue, run this command to disable the device from establishing proxy egress LSPs.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+ldp"><b><span class="cmdname">mpls ldp</span></b></a></span><p><p>The MPLS-LDP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a></span><p><p>The MPLS-LDP-IPv4 view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=lsp-trigger+all+host+ip-prefix+none"><b><span class="cmdname">lsp-trigger</span></b></a> { <strong><span>all</span></strong> | <strong><span>host</span></strong> | <strong><span>ip-prefix</span></strong> <i><span class="varname">prefix-name</span></i> | <strong><span>none</span></strong> }</span><p><p>A policy for triggering LSP establishment is configured.</p>
</p><p><ul><li><p>If the <strong><span>all</span></strong> parameter is specified, all IGP routes can trigger LDP to establish LSPs. However, public-network BGP routes or default routes cannot trigger LDP to establish LSPs.</p>
</li><li><p>If the <strong><span>ip-prefix</span></strong> parameter is specified, only FECs matching a specified IP address prefix list can trigger LDP to establish LSPs.</p>
</li><li><p>If the <strong><span>none</span></strong> parameter is specified, LDP cannot be triggered to establish LSPs.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the triggering policy is changed from <strong><span>all</span></strong> to <strong><span>host</span></strong>, LSPs that have been established using host routes are not reestablished.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0015.html">Configuring an LDP LSP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_0047.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ldp-p2p_cfg_00210.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>