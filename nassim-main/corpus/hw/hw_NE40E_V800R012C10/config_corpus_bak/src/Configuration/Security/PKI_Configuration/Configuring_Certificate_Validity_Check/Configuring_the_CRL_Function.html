
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the CRL Function">
<meta name="abstract" content="Configuring the CRL function includes enabling CRL check and updating the CRL. After the CRL function is configured, a device checks the validity of the peer device's certificate. If the serial number of the peer device's certificate is listed in the CRL, the peer device's certificate has been revoked and is considered invalid.">
<meta name="description" content="Configuring the CRL function includes enabling CRL check and updating the CRL. After the CRL function is configured, a device checks the validity of the peer device's certificate. If the serial number of the peer device's certificate is listed in the CRL, the peer device's certificate has been revoked and is considered invalid.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_cmp_0008.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_cmp_0010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="z00485179">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372549">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the CRL Function</title>
</head>
<body><a name="EN-US_TASK_0172372549"></a><a name="EN-US_TASK_0172372549"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the CRL Function</h1>
<div class="taskbody"><p>Configuring the CRL function includes enabling CRL check and updating the CRL. After the CRL function is configured, a device checks the validity of the peer device's certificate. If the serial number of the peer device's certificate is listed in the CRL, the peer device's certificate has been revoked and is considered invalid.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0172372549__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before setting automatic CRL update, verify functions to ensure that the network and server are normal.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372549__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Before configuring the CRL function, be aware of the following information:</p>
<ul><li><p>Enable CRL check.</p>
<p>Before configuring CRL, enable CRL check.</p>
<p>When a certificate is being verified after CRL check is enabled, the CRL is queried for checking whether it contains the serial number of the certificate. If the CRL contains the serial number of the certificate, the certificate has been revoked and considered invalid. For details about how to verify the certificate validity, see <a href="dc_vrp_cfg_cmp_0010.html">Verifying Certificates</a>.</p>
</li><li><p>Update the CRL.</p>
<p>To ensure that the latest CRL is used, check the CRL status periodically and download the latest CRL from the CRL server using HTTP or LDAP.</p>
<p>Updating the CRL consists of automatically updating the CRL and manually updating the CRL. Automatically updating the CRL can be implemented using HTTP or LDAP. After the specified interval elapses, the system automatically downloads the CRL using HTTP or LDAP. When the latest CRL is urgently required, manually update the CRL by downloading the CRL from the CRL server.</p>
</li></ul>
<p>If the device does not have any homogeneous CRL certificate, the new CRL certificate is imported to the non-domain.</p>
<p>If the device has only one homogeneous CRL certificate, the new CRL certificate replaces this certificate.</p>
<p>If the device has multiple homogeneous CRL certificates, the new CRL certificate preferentially replaces the homogeneous CRL certificate in the local domain. If this condition is not met, the new CRL certificate replaces the homogeneous CRL certificate in the non-domain. If both of the preceding conditions are not met, the new CRL certificate is imported into the non-domain.</p>
<p>Homogeneous certificates refer to certificates with the same issuer and subject. Local domain refers to the PKI domain where configurations need to be automatically updated. Non-domain refers to an isolated domain that does not belong to any PKI domain.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372549__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enable CRL check.</span><p><ol type="a"><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=pki+crl+check+enable"><b><span class="cmdname">pki crl check enable</span></b></a> command to enable CRL check.</p>
</li></ol>
</p></li><li><span>Update the CRL.</span><p><div class="p">Perform the following operations as needed.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When the CRL is automatically updated or downloaded through HTTP or LDAP, ensure that the CF card has sufficient space for the CRL file to prevent update failures.</p>
<p>HTTP is insecure. Therefore, you are advised to use other methods to update the CRL.</p>
</div></div>
<ul><li><div class="p">Enable the function of automatically updating the CRL using HTTP.<ol type="a"><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=pki+domain"><b><span class="cmdname">pki domain</span></b></a> <i><span class="varname">domain-name</span></i> command to enter the PKI domain name configuration view.</p>
</li><li><p>Run the <a href="cmdqueryname=crl+auto-update+enable"><b><span class="cmdname">crl auto-update enable</span></b></a> command to enable automatic CRL update.</p>
</li><li><p>Run the <a href="cmdqueryname=crl+update-period"><b><span class="cmdname">crl update-period</span></b></a> <i><span class="varname">interval</span></i> command to set an interval between two consecutive automatic CRL updates.</p>
</li><li><p>Run the <a href="cmdqueryname=crl+http"><b><span class="cmdname">crl http</span></b></a> command to enable the function of automatically updating the CRL using HTTP.</p>
</li><li><p>Run the <a href="cmdqueryname=crl+url+source+vpn-instance"><b><span class="cmdname">crl url</span></b></a> <i><span class="varname">url-addr</span></i> [ <strong><span>source</span></strong> <i><span class="varname">source-ip-address</span></i> ] [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] command to configure the URL of the CRL distribution point (CDP).</p>
<p>This command can be executed only after the <a href="cmdqueryname=crl+http"><b><span class="cmdname">crl http</span></b></a> command is run.</p>
</li><li>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</li></ol>
</div>
</li></ul>
<ul><li><div class="p">Enable the function of automatically updating the CRL using LDAP.<ol type="a"><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li>(Optional) Run the <strong>ssl policy </strong><em>policy-name</em> command to create an SSL policy and enter the SSL policy view.<p>After creating the SSL policy, import a CA certificate to it. For details, see <strong>Basic Configuration</strong> &gt; <strong>Accessing Other Devices Configuration</strong> &gt; <strong>Configuring and Binding an SSL Policy</strong>.</p>
</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</li><li>(Optional) Run the <strong>pki ldap bind ssl-policy </strong><em>policy-name</em> command to bind the SSL policy to the device functioning as an LDAP client.</li><li><p>Run the <a href="cmdqueryname=pki+domain"><b><span class="cmdname">pki domain</span></b></a> <i><span class="varname">domain-name</span></i> command to enter the PKI domain name configuration view.</p>
</li><li><p>Run the <a href="cmdqueryname=crl+auto-update+enable"><b><span class="cmdname">crl auto-update enable</span></b></a> command to enable automatic CRL update.</p>
</li><li><p>Run the <a href="cmdqueryname=crl+update-period"><b><span class="cmdname">crl update-period</span></b></a> <i><span class="varname">interval</span></i> command to set an interval between two consecutive automatic CRL updates.</p>
</li><li><p>Run the <a href="cmdqueryname=crl+ldap"><b><span class="cmdname">crl ldap</span></b></a> command to enable the function of automatically updating the CRL using LDAP.</p>
</li><li><div class="p">Run the <span><a href="cmdqueryname=ldap-server+authentication+ip+vpn-instance+source+port+version"><b><span class="cmdname">ldap-server</span></b></a> { <strong><span>authentication</span></strong> <i><span class="varname">ldap-dn</span></i> <i><span class="varname">ldap-password</span></i> | <strong><span>ip</span></strong> <i><span class="varname">ldap-ip-address</span></i><span> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span> [ <strong><span>source</span></strong> <i><span class="varname">source-ip-address</span></i> ] { [ <strong><span>port</span></strong> <i><span class="varname">port</span></i> ] | [ <strong><span>version</span></strong> <i><span class="varname">version</span></i> ] } <sup>*</sup> </span><span>[ <strong>ssl</strong> ] </span><span>}</span> command to configure the LDAP server.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the <strong><span>ssl</span></strong> parameter is specified, you need to bind the SSL policy to the LDAP client. For details, see optional steps b and d.</p>
</div></div>
</div>
<p>This command can be executed only after the <a href="cmdqueryname=crl+ldap"><b><span class="cmdname">crl ldap</span></b></a> command is run.</p>
</li><li><p>Run the <a href="cmdqueryname=crl+ldap+attribute+dn"><b><span class="cmdname">crl ldap</span></b></a> [ <strong><span>attribute</span></strong> <i><span class="varname">attr-value</span></i> ] <strong><span>dn</span></strong> <i><span class="varname">dn-value</span></i> command to configure the attributes and identifier used to obtain the CRL from the LDAP server.</p>
<p>This command can be executed only after the <a href="cmdqueryname=crl+ldap"><b><span class="cmdname">crl ldap</span></b></a> command is run.</p>
</li><li>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</li></ol>
</div>
</li></ul>
<ul><li><div class="p">Manually update the CRL.<ol type="a"><li><div class="p">Download a CRL. Select a CRL download mode as needed.<ul><li><p>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=pki+http+vpn-instance+source"><b><span class="cmdname">pki http</span></b></a> <i><span class="varname">url-addr</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <i><span class="varname">save-name</span></i> [ <strong><span>source</span></strong> <i><span class="varname">source-ip-address</span></i> ] command to download a CRL through HTTP.</p>
</li><li><p>Run the <a href="cmdqueryname=pki+ldap+ip+vpn-instance+source+port+version+attribute"><b><span class="cmdname">pki ldap</span></b></a> <strong><span>ip</span></strong> <i><span class="varname">ldap-ip-address</span></i> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] [ <strong><span>source</span></strong> <i><span class="varname">source-ip-address</span></i> ] <strong><span>port</span></strong> <i><span class="varname">port</span></i> <strong><span>version</span></strong> <i><span class="varname">version</span></i> [ <strong><span>attribute</span></strong> <i><span class="varname">attr-value</span></i> ] [ <strong><span>authentication</span></strong> <i><span class="varname">ldap-dn</span></i> <i><span class="varname">ldap-password</span></i> ] [ <strong>ssl</strong> ] <i><span class="varname">save-name</span></i> <strong><span>dn</span></strong> <i><span class="varname">dn-value</span></i> command to download a CRL through LDAP.</p>
</li></ul>
</div>
</li><li><p>Run the <a href="cmdqueryname=pki+import-certificate+crl+domain+filename"><b><span class="cmdname">pki import-certificate</span></b></a> <strong><span>crl</span></strong> [ <strong><span>domain</span></strong> <i><span class="varname">domainName</span></i> ] <strong><span>filename</span></strong> <i><span class="varname">file-name</span></i> command to import the CRL.</p>
</li></ol>
</div>
</li></ul>
</div>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_cmp_0008.html">Configuring Certificate Validity Check
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_cmp_0010.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>