
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring an HWTACACS Server Template">
<meta name="abstract" content="When configuring an HWTACACS server template, you must specify the IP address, port number, and shared key of a specified HWTACACS server. Other configurations, such as whether the HWTACACS username carries the domain name and the time for the primary server to switch to the active state, have default settings and can be modified as required.">
<meta name="description" content="When configuring an HWTACACS server template, you must specify the IP address, port number, and shared key of a specified HWTACACS server. Other configurations, such as whether the HWTACACS username carries the domain name and the time for the primary server to switch to the active state, have default settings and can be modified as required.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_aaa_cfg_1003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_aaa_cfg_1005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0555.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="aaavrp,z00603461,w00800033,z00588052,w00556928,w00606909,l00455378,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="AAA (Administrative User)">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="User Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="AAA (Administrative User)">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="AAA (Administrative User)">
<meta name="featurename" content="AAA (Access User)">
<meta name="featurename" content="PPPoE">
<meta name="featuretype" content="Security">
<meta name="featuretype" content="User Access">
<meta name="featurename" content="AAA (Administrative User)">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="z00603461,z00588052">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00588052">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172371789">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring an HWTACACS Server Template</title>
</head>
<body><a name="EN-US_TASK_0172371789"></a><a name="EN-US_TASK_0172371789"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring an HWTACACS Server Template</h1>
<div class="taskbody"><p>When configuring an HWTACACS server template, you must specify the IP address, port number, and shared key of a specified HWTACACS server. Other configurations, such as whether the HWTACACS username carries the domain name and the time for the primary server to switch to the active state, have default settings and can be modified as required.</p>
<div class="context"><a name="EN-US_TASK_0172371789__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>You can configure an HWTACACS server template as follows:</p>
<ul><li><a href="#EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100602">Configure a shared key for the communication between the device and HWTACACS server.</a></li><li><p><a href="#EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100611">Configure an IP address for the primary and for the secondary HWTACACS servers</a> using either of the following methods:</p>
<ul><li>Configure IP addresses for the primary and secondary HWTACACS common servers.</li><li>Configure IP addresses for the primary and secondary HWTACACS authentication servers, primary and secondary HWTACACS authorization servers, and primary and secondary HWTACACS accounting servers.</li></ul>
</li><li><a href="#EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100606">Configure a source address for the device to communicate with the HWTACACS server.</a></li><li><a href="#EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100607">Configure a response timeout period for the HWTACACS server.</a></li><li><a href="#EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100608">Configure a timer value for the primary server to switch to the active state.</a></li><li><a href="#EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100609">Configure the username to be sent to the HWTACACS server to carry the domain name or not.</a></li><li><a href="#EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100610">Modify the password of an HWTACACS user.</a></li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To prevent data transmission risks between the device and HWTACACS server, you are advised to deploy them in a security domain.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172371789__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=hwtacacs+enable"><b><span class="cmdname">hwtacacs enable</span></b></a></span><p><p>HWTACACS is enabled.</p>
</p></li><li><span>Run <a href="cmdqueryname=hwtacacs-server+service-name"><b><span class="cmdname">hwtacacs-server service-name</span></b></a> <i><span class="varname">service-name</span></i></span><p><p>The HWTACACS server name is set.</p>
</p><p><p>On an HWTACACS server, a user name can be allocated different rights based on different service names. After the <b><span class="cmdname" id="EN-US_TASK_0172371789__en-us_cliref_0172383134_cmdname2122496633214535">hwtacacs-server service-name</span></b> command is run, a user logging in to the device is allocated a right based on the configured HWTACACS service name.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=hwtacacs-server+default+remote-address"><b><span class="cmdname">hwtacacs-server default remote-address</span></b></a></span><p><p>A default remote address is configured for the communication between the device (HWTACACS client) and an HWTACACS server.</p>
</p><p><p>When interworking with a third-party TACACS server, the third-party TACACS server may require the rem_addr field. In this case, you need to run the <a href="cmdqueryname=hwtacacs-server+default+remote-address"><b><span class="cmdname">hwtacacs-server default remote-address</span></b></a> command to configure the default remote address for the HWTACACS client to communicate with the HWTACACS server. When the HWTACACS client sends authentication, authorization, and accounting request packets to the HWTACACS server, if the rem_addr field in the packets is empty, the configured address is inserted into the rem_addr field of the packets sent to the HWTACACS server.</p>
</p></li><li><span>Run <a href="cmdqueryname=hwtacacs-server+template"><b><span class="cmdname">hwtacacs-server template</span></b></a> <i><span class="varname">template-name</span></i></span><p><p>An HWTACACS server template is created, and its view is displayed.</p>
</p></li><li id="EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100602"><span id="EN-US_TASK_0172371789__">Run <a href="cmdqueryname=hwtacacs-server+shared-key"><b><span class="cmdname">hwtacacs-server shared-key</span></b></a> { <strong><span>cipher</span></strong> <i><span class="varname">cipher-string</span></i> | <i><span class="varname">key-string</span></i> }</span><p><p>A shared key is configured for the communication between the device and the HWTACACS server.</p>
</p><p><p>Setting the key improves the security of the communication between the <span class="keyword">NE40E</span> and the HWTACACS server.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To ensure the validity of both parties, the <span class="keyword">Router</span> and the HWTACACS server must be configured with the same key.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100611"><span id="EN-US_TASK_0172371789__">You can use either of the following methods to configure an IP address and shared key for the primary/secondary HWTACACS server.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>When the common server is configured as the primary server, the configurations of the primary authentication, accounting, and authorization servers are deleted. When another type of server (authentication, accounting, or authorization server) is configured as the primary server, the configurations of the common server are deleted.</li><li>When the common server is configured as the primary server and the server is available, the configurations of other types of servers (authentication, accounting, and authorization servers) do not take effect.</li><li>The IP addresses and host names of the primary and the secondary servers must be different; otherwise, the server configuration fails.</li></ul>
</div></div>
<ul><li><p>Configure an IP address and a shared key for the primary/secondary HWTACACS common server.</p>
<p>For an IPv4 server, run the <a href="cmdqueryname=hwtacacs-server"><b><span class="cmdname"><span>hwtacacs-server</span></span></b></a> <i><span class="varname">ip-address</span></i> [ <i><span class="varname">port</span></i> ] [ <strong><span>shared-key</span></strong> { <i><span class="varname">key-string</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">cipher-string</span></i> } | <strong><span>mux-mode</span></strong> | <span>{ </span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i><span> | <strong><span>public-net</span></strong> }</span> ]<sup> *</sup> [ <strong><span>secondary</span></strong> ] command.</p>
<p>For an IPv6 server, run the <a href="cmdqueryname=hwtacacs-server"><b><span class="cmdname"><span>hwtacacs-server</span></span></b></a> <i><span class="varname">ipv6-address</span></i> [ <i><span class="varname">port</span></i> ] [ <strong><span>shared-key</span></strong> { <i><span class="varname">key-string</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">cipher-string</span></i> } | <strong><span>mux-mode</span></strong><span> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></span> ]<sup>*</sup> [ <strong><span>secondary</span></strong> ] command.</p>
</li><li><p>Configure IP addresses and shared keys for the primary/secondary HWTACACS authentication server, HWTACACS authorization server, and HWTACACS accounting server.</p>
<ol type="a"><li><div class="p">Configure an IP address and a shared key for the primary/secondary HWTACACS authentication server.<ul><li>For an IPv4 server, run the <a href="cmdqueryname=hwtacacs-server+authentication"><b><span class="cmdname">hwtacacs-server authentication</span></b></a> <span>{ </span><i><span class="varname">ip-address</span></i><span> }</span> [ <i><span class="varname">port</span></i> ] [ <strong><span>shared-key</span></strong> { <i><span class="varname">key-string</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">cipher-string</span></i> } | <strong><span>mux-mode</span></strong> | <span>{ </span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <span>| <strong><span>public-net</span></strong> }</span> ]<sup>*</sup> [ <strong><span>secondary</span></strong> ] command.</li><li>For an IPv6 server, run the <a href="cmdqueryname=hwtacacs-server+authentication"><b><span class="cmdname">hwtacacs-server authentication</span></b></a> <i><span class="varname">ipv6-address</span></i> [ <i><span class="varname">port</span></i> ] [ <strong><span>shared-key</span></strong> { <i><span class="varname">key-string</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">cipher-string</span></i> } | <strong><span>mux-mode</span></strong> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]<sup>*</sup> [ <strong><span>secondary</span></strong> ] command.</li></ul>
</div>
</li><li><div class="p">Configure an IP address and a shared key for the primary/secondary HWTACACS authorization server.<ul><li>For an IPv4 server, run the <a href="cmdqueryname=hwtacacs-server+authorization"><b><span class="cmdname">hwtacacs-server authorization</span></b></a> <span>{ </span><i><span class="varname">ip-address</span></i><span> }</span> [ <i><span class="varname">port</span></i> ] [ <strong><span>shared-key</span></strong> { <i><span class="varname">key-string</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">cipher-string</span></i> } | <strong><span>mux-mode</span></strong> | <span>{ </span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <span>| <strong><span>public-net</span></strong> }</span> ]<sup>*</sup> [ <strong><span>secondary</span></strong> ] command.</li><li>For an IPv6 server, run the <a href="cmdqueryname=hwtacacs-server+authorization"><b><span class="cmdname">hwtacacs-server authorization</span></b></a> <i><span class="varname">ipv6-address</span></i> [ <i><span class="varname">port</span></i> ] [ <strong><span>shared-key</span></strong> { <i><span class="varname">key-string</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">cipher-string</span></i> } | <strong><span>mux-mode</span></strong> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]<sup>*</sup> [ <strong><span>secondary</span></strong> ] command.</li></ul>
</div>
</li><li><div class="p">Configure an IP address and a shared key for the primary/secondary HWTACACS accounting server.<ul><li>For an IPv4 server, run the <a href="cmdqueryname=hwtacacs-server+accounting"><b><span class="cmdname">hwtacacs-server accounting</span></b></a> <i><span class="varname">ip-address</span></i> [ <i><span class="varname">port</span></i> ] [ <strong><span>shared-key</span></strong> { <i><span class="varname">key-string</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">cipher-string</span></i> } | <strong><span>mux-mode</span></strong> <span>{ </span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <span>| <strong><span>public-net</span></strong> }</span> ]<sup>*</sup> [ <strong><span>secondary</span></strong> ] command.</li><li>For an IPv6 server, run the <a href="cmdqueryname=hwtacacs-server+accounting"><b><span class="cmdname">hwtacacs-server accounting</span></b></a> <i><span class="varname">ipv6-address</span></i> [ <i><span class="varname">port</span></i> ] [ <strong><span>shared-key</span></strong> { <i><span class="varname">key-string</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">cipher-string</span></i> } | <strong><span>mux-mode</span></strong> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]<sup>*</sup> [ <strong><span>secondary</span></strong> ] command.</li></ul>
</div>
</li></ol>
</li></ul>
</p></li><li id="EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100606"><span id="EN-US_TASK_0172371789__">(Optional) Run <a href="cmdqueryname=hwtacacs-server"><b><span class="cmdname">hwtacacs-server</span></b></a> { <strong><span>source-ip</span></strong> <i><span class="varname">ip-address</span></i> | <strong><span>source-ipv6</span></strong> <i><span class="varname">ipv6-address</span></i>}</span><p><p>A source address is configured for the communication between the device and the HWTACACS server.</p>
</p></li><li id="EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100607"><span id="EN-US_TASK_0172371789__">(Optional) Run <a href="cmdqueryname=hwtacacs-server+timer+response-timeout"><b><span class="cmdname">hwtacacs-server timer response-timeout</span></b></a> <i><span class="varname">value</span></i></span><p><p>A response timeout period is set for the HWTACACS server.</p>
</p><p><p>If the device does not receive any response from the HWTACACS server within the specified response timeout period, the device considers the HWTACACS server unavailable. In this case, the device attempts to use other methods for authentication, authorization, and accounting.</p>
</p></li><li id="EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100608"><span id="EN-US_TASK_0172371789__">(Optional) Run <a href="cmdqueryname=hwtacacs-server+timer+quiet"><b><span class="cmdname">hwtacacs-server timer quiet</span></b></a> <i><span class="varname">value</span></i></span><p><p>A timer value for the primary server to switch to the active state is set.</p>
</p></li><li id="EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100609"><span id="EN-US_TASK_0172371789__">(Optional)  Run <a href="cmdqueryname=hwtacacs-server+user-name+domain-included"><b><span class="cmdname">hwtacacs-server user-name domain-included</span></b></a></span><p><p>The device is configured to encapsulate the domain name into the username to be sent to the HWTACACS server.</p>
</p><p><p>If the HWTACACS server does not accept the username containing the domain name, you can configure the device to delete the domain name and then send the username without the domain name to the HWTACACS server.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The format of a username is username@domain name.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172371789__dc_vrp_aaa_cfg_100610"><span id="EN-US_TASK_0172371789__">(Optional) Run <a href="cmdqueryname=hwtacacs-user+change-password+hwtacacs-server"><b><span class="cmdname">hwtacacs-user change-password hwtacacs-server</span></b></a> <i><span class="varname">template-name</span></i></span><p><p>The password of the HWTACACS user is modified.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_aaa_cfg_1003.html">Configuring AAA
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_aaa_cfg_1005.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_aaa_cfg_0555.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>