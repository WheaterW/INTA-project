
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an IKE Peer">
<meta name="abstract" content="Through IKE peers, a series of attribute data can be defined to describe parameters required by IKE negotiation, including quoting IKE proposals, and configuring the negotiation mode, NAT traversal, and IKE version.">
<meta name="description" content="Through IKE peers, a series of attribute data can be defined to describe parameters required by IKE negotiation, including quoting IKE proposals, and configuring the negotiation mode, NAT traversal, and IKE version.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0011.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,z00603461,ipsec,w00556928,w00606909,h00522387,l00455378,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="z00485179">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372429">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an IKE Peer</title>
</head>
<body><a name="EN-US_TASK_0172372429"></a><a name="EN-US_TASK_0172372429"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an IKE Peer</h1>
<div class="taskbody"><p>Through IKE peers, a series of attribute data can be defined to describe parameters required by IKE negotiation, including quoting IKE proposals, and configuring the negotiation mode, NAT traversal, and IKE version.</p>
<div class="context"><a name="EN-US_TASK_0172372429__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>During the configuration of an IKE peer, note the following:</p>
<ul><li><p>When IPsec is deployed, the path from the local to the peer and its return path can be the same or different. If they are different, they must work in load balancing mode.</p>
</li><li><p>If the pre-shared key authentication mode is adopted, you need to configure the same authentication key for both ends of the IPsec tunnel.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372429__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ike+peer"><b><span class="cmdname">ike peer</span></b></a> <i><span class="varname">peer-name</span></i></span></span><p><p>An IKE peer is created and the IKE peer view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ike-proposal+default"><b><span class="cmdname">ike-proposal</span></b></a> { <i><span class="varname">proposal-number</span></i> | <strong><span>default</span></strong> }</span><p><p>The IKE proposal is applied in the IKE peer.</p>
<div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>If the <strong><span>default</span></strong> parameter in the format is used, the default IKE proposal is used. The system provides three default IKE proposals. If no IKE proposal is created, default1, default2, and default3 are used. The default IKE proposals contain insecure algorithms. To ensure better security, you are advised not to use the default IKE proposals.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=local-id-type+ip+fqdn+dn+user-fqdn"><b><span class="cmdname">local-id-type</span></b></a> { <strong><span>ip</span></strong> | <strong><span>fqdn</span></strong> | <strong><span>dn</span></strong> | <strong><span>user-fqdn</span></strong> [ <i><span class="varname">user-fqdn</span></i> ] }</span><p><p>An IKE peer ID type is set.</p>
</p></li><li><span>Configure the ID of the IKE peer.</span><p><ul><li><p>If the ID type is configured as the IP address format, run <span><a href="cmdqueryname=remote-address+authentication-address+vpn-instance"><b><span class="cmdname">remote-address</span></b></a> [ <strong><span>authentication-address</span></strong> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <i><span class="varname">remote-low-address</span></i> [ <i><span class="varname">remote-high-address</span></i> ]</span></p>
<p>The IP address or IP address segment of the peer end is specified.</p>
<p><strong>authentication-address</strong> indicates the authentication address of the peer end. <strong>authentication-address</strong> is valid only when the ID type is configured as the IP address format.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the IKE peer is referred to by the IPsec policy template, the IP address of the peer end can be also specified as an IP address segment.</p>
</div></div>
</li><li><p>If the ID type is configured as the <strong>fqdn</strong>, perform the following operations:</p>
<ul><li><p>Run <span><a href="cmdqueryname=remote-id"><b><span class="cmdname">remote-id</span></b></a> <i><span class="varname">remote-id</span></i></span></p>
<p>The ID of the peer is specified.</p>
</li><li><p>Run <span><a href="cmdqueryname=remote-address+authentication-address+vpn-instance"><b><span class="cmdname">remote-address</span></b></a> [ <strong><span>authentication-address</span></strong> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <i><span class="varname">remote-low-address</span></i> [ <i><span class="varname">remote-high-address</span></i> ]</span></p>
<p>The IP address or IP address segment of the peer end is specified.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the IKE peer is referred to by the IPsec policy, the IP address of the peer end must be specified, but cannot be specified as an IP address segment.</p>
<p>If the IKE peer is referred to by the IPsec policy template, the IP address of the peer end may not be specified, or the IP address of the peer end may not be specified as an IP address segment. If the IP address of the peer end is not specified, it indicates that the IP address of the peer end can be any IP address.</p>
</div></div>
</li></ul>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If a local device corresponds to multiple IKE peers and two IKE peers are allocated the same IP address, the system prompts an address conflict, regardless of whether one is a private IP address and the other is a public IP address. If an IKE peer is allocated an IP address and another IKE peer is allocated an IP address segment that contains the IP address, the system does not prompt an address conflict.</p>
</div></div>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=sa+binding+vpn-instance"><b><span class="cmdname">sa binding</span></b></a> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></span></span><p><p>A VPN instance is associated with an SA.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a>,</span><p><p>Return to the system view.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=ike+local-name"><b><span class="cmdname">ike local-name</span></b></a> <i><span class="varname">local-name</span></i></span></span><p><p>The local end name used for IKE negotiation is configured.</p>
</p></li><li><span>Perform either of the following operations to configure an authentication mode for the peer.</span><p><ul><li><div class="p">The authentication mode is set to <strong>pre-shared key (pre-share)</strong>.<ol type="a"><li>Run the <span><a href="cmdqueryname=ike+peer"><b><span class="cmdname">ike peer</span></b></a> <i><span class="varname">peer-name</span></i></span>, command to enter the IKE peer view.</li><li>Run the <a href="cmdqueryname=pre-shared-key+cipher"><b><span class="cmdname">pre-shared-key</span></b></a> [ <strong><span>cipher</span></strong> ] <i><span class="varname">key</span></i> command to configure a pre-shared key.</li></ol>
</div>
</li><li><p>The authentication mode is set to <strong>certificate (rsa-sig<span> or rsassa-pss</span>)</strong>.</p>
<ol type="a"><li><p>Run the <span><a href="cmdqueryname=ike+peer"><b><span class="cmdname">ike peer</span></b></a> <i><span class="varname">peer-name</span></i></span>, command to enter the IKE peer view.</p>
</li><li>Run the <a href="cmdqueryname=certificate+local+pki-domain"><b><span class="cmdname">certificate local pki-domain</span></b></a> <em>domain-name</em> command to bind a PKI domain with a specified domain name to an IKE peer<p>The digital certificate must be configured in advance. For details, see PKI Configuration, see Configuring Offline Certificate Application<span> or Configuring CMPv2-based Certificate Application</span>.</p>
</li><li><p>(Optional) Run the <a href="cmdqueryname=certificate+local-filename"><b><span class="cmdname">certificate local-filename</span></b></a> <i><span class="varname">filename</span></i> command to configure the name of a certificate used by the local end.</p>
<p>The digital certificate must be configured in advance. For details, see PKI Configuration, see Configuring Offline Certificate Application<span> or Configuring CMPv2-based Certificate Application</span>.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In the IKE peer view, the <a href="cmdqueryname=certificate+pki-domain"><b><span class="cmdname">certificate pki-domain</span></b></a> command and <a href="cmdqueryname=certificate+local-filename+remote-filename"><b><span class="cmdname">certificate local-filename remote-filename</span></b></a> command are mutually exclusive. The <a href="cmdqueryname=certificate+pki-domain"><b><span class="cmdname">certificate pki-domain</span></b></a> command is recommended.</p>
</div></div>
</li><li>(Optional) Run the <a href="cmdqueryname=ike+verification+pki+enable"><b><span class="cmdname">ike verification pki enable</span></b></a> command to enable PKI certificate-related file verification.<p>By default, PKI certificate-related file verification is enabled. Perform this step if the function needs to be enabled again after being disabled.</p>
</li></ol>
</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0007.html">Configuring Automatic IPsec SA Negotiation (IKE)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0011.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0020.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>