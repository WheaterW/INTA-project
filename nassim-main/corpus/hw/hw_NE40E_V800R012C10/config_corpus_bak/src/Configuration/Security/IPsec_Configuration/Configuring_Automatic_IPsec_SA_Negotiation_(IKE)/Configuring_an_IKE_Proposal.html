
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an IKE Proposal">
<meta name="abstract" content="An IKE proposal defines a set of attribute data to describe how IKE negotiation implements security communications. Configuring an IKE proposal involves creating an IKE proposal, selecting an encryption algorithm, authentication mode, authentication algorithm, and Diffie-Hellman identifier, and setting the lifetime of the SA.">
<meta name="description" content="An IKE proposal defines a set of attribute data to describe how IKE negotiation implements security communications. Configuring an IKE proposal involves creating an IKE proposal, selecting an encryption algorithm, authentication mode, authentication algorithm, and Diffie-Hellman identifier, and setting the lifetime of the SA.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0010_copy2.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,z00603461,ipsec,w00556928,w00606909,h00522387,l00455378,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="z00485179">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372428">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an IKE Proposal</title>
</head>
<body><a name="EN-US_TASK_0172372428"></a><a name="EN-US_TASK_0172372428"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an IKE Proposal</h1>
<div class="taskbody"><p>An IKE proposal defines a set of attribute data to describe how IKE negotiation implements security communications. Configuring an IKE proposal involves creating an IKE proposal, selecting an encryption algorithm, authentication mode, authentication algorithm, and Diffie-Hellman identifier, and setting the lifetime of the SA.</p>
<div class="context"><a name="EN-US_TASK_0172372428__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Parameters defined by an IKE proposal are used to negotiate IKE SA establishment. You can configure multiple IKE proposals on each end. During the negotiation, parameters to be negotiated are matched against each IKE proposal in descending order by priority and match a local IKE proposal that is the same as that on the peer end. The match rule is as follows: Both parties use the same encryption algorithm, authentication algorithm, authentication method, and DH group ID to negotiate with each other. The lifetime is determined by the party that initiates the negotiation and does not need to be identical on both ends.</p>
<p>If the negotiation initiating party specifies an IKE proposal on the IKE peer, only the specified IKE protocol can be sent during the IKE negotiation. The response party matches the specified IKE protocol against its IKE proposals. If no IKE proposal is matched, the negotiation fails.</p>
<p>If the negotiation initiating party does not specify any IKE proposal on the IKE peer, all IKE proposals of the initiating party are sent during the IKE negotiation. The response party matches the IKE proposals against its IKE proposals in sequence.</p>
<p>The system provides three default IKE proposals. If no IKE proposal is created, default1, default2, and default3 are used.</p>
<div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>The default IKE proposals contain insecure algorithms. To ensure better security, you are advised not to use the default IKE proposals.</p>
</div></div>
<ul><li><p>default1: The encryption algorithm is AES-CBC-256, the authentication algorithm is SHA2-256, the authentication method is Pre-Shared Key, the Diffie-Hellman group ID is group14, and the lifetime is 86400 seconds.</p>
</li><li>default2: The encryption algorithm is AES-CBC-256, the authentication algorithm is SHA2-256, the authentication method is Pre-Shared Key, the Diffie-Hellman group ID is group2, and the lifetime is 86400 seconds.</li><li>default3: The encryption algorithm is AES-CBC-256, the authentication algorithm is SHA1, the authentication method is Pre-Shared Key, the Diffie-Hellman group ID is group1, and the lifetime is 86400 seconds.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For security purposes, you are advised not to use weak security algorithms in this feature. If you need to use such an algorithm, run the <strong>undo crypto weak-algorithm disable</strong> command to enable the weak security algorithm function first.</p>
</div></div>
</li></ul>
<p>You can run the <a href="cmdqueryname=display+ike+proposal"><b><span class="cmdname">display ike proposal</span></b></a> command to view the configured IKE proposals (including the default IKE proposals).</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372428__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ike+proposal"><b><span class="cmdname">ike proposal</span></b></a> <i><span class="varname">proposal-number</span></i></span></span><p><p>IKE proposals are created, and the IKE proposal view is displayed.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For a newly created IKE proposal, the default encryption algorithm is AES-CBC-256, the default authentication algorithm is SHA2-256, the default authentication method is Pre-Shared Key, the default Diffie-Hellman group ID is not configured, and the default lifetime is 86400 seconds. Change the values of these parameters as required. The new values take effect in the next tunnel negotiation instead of tunnels that have been negotiated.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=authentication-method+pre-share+rsa-sig+rsassa-pss+sha2-256"><b><span class="cmdname">authentication-method</span></b></a> { <strong><span>pre-share</span></strong> | <strong><span>rsa-sig</span></strong><span> | <strong><span>rsassa-pss</span></strong> { <strong><span>sha2-256</span></strong> | <strong><span>sha2-384</span></strong> }</span> }</span><p><p>An authentication mode is configured.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=authentication-algorithm+md5+sha1+sha2-256+sha2-384+sha2-512"><b><span class="cmdname">authentication-algorithm</span></b></a> { <strong><span>md5</span></strong> | <strong><span>sha1</span></strong> | <strong><span>sha2-256</span></strong> | <strong><span>sha2-384</span></strong> | <strong><span>sha2-512</span></strong> }</span></span><p><p>An authentication algorithm is configured.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To help improve the system security, do not use the MD5 or SHA1 authentication algorithm for IKE negotiation.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=encryption-algorithm+3des-cbc+aes-cbc+128+192+256+des-cbc"><b><span class="cmdname">encryption-algorithm</span></b></a> { <strong><span>3des-cbc</span></strong> | <strong><span>aes-cbc</span></strong> { <strong><span>128</span></strong> | <strong><span>192</span></strong> | <strong><span>256</span></strong> } | <strong><span>des-cbc</span></strong><span> | <strong><span>aes-gcm-128</span></strong> { <strong><span>128</span></strong> | <strong><span>192</span></strong> | <strong><span>256</span></strong><strong> </strong>}</span> }</span><p><p>An encryption algorithm is configured.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To help improve the system security, do not use the DES-CBC or 3DES-CBC encryption algorithm for IKE negotiation.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=dh+group1+group2+group5+group14+group19+group20+group21"><b><span class="cmdname">dh</span></b></a>{ <strong><span>group1</span></strong> | <strong><span>group2</span></strong> | <strong><span>group5</span></strong> | <strong><span>group14</span></strong> | <strong><span>group15</span></strong> | <strong><span>group16</span></strong> | <strong><span>group19</span></strong> | <strong><span>group20</span></strong> | <strong><span>group21</span></strong> }</span><p><p>A DH group ID is set.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To help improve system security, using the group1, group2, and group5 for the DH group ID is not recommended.</p>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=integrity-algorithm+aes-xcbc-96+hmac-md5-96+hmac-sha1-96"><b><span class="cmdname">integrity-algorithm</span></b></a> { <strong><span>aes-xcbc-96</span></strong> | <strong><span>hmac-md5-96</span></strong> | <strong><span>hmac-sha1-96</span></strong> | <strong><span>hmac-sha2-256</span></strong><span> | <strong><span>hmac-sha2-384</span></strong> | <strong><span>hmac-sha2-512</span></strong></span> }</span><p><p>An integrity algorithm is configured.</p>
<p>The configuration is valid only for the IKEv2 protocol.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To help improve the system security, using the AES-XCBC-96, HMAC-MD5-96, and HMAC-SHA1-96 integrity algorithms for IKEv2 negotiation is not recommended.</p>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=sa+duration"><b><span class="cmdname">sa duration</span></b></a> <i><span class="varname">sa-duration</span></i></span></span><p><p>An SA duration is set.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=re-authentication+interval"><b><span class="cmdname">re-authentication interval</span></b></a> <i><span class="varname">reauth-time</span></i></span></span><p><p>The re-authentication duration of an IKEv2 SA is set.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0007.html">Configuring Automatic IPsec SA Negotiation (IKE)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0010_copy2.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0012.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>