
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Dynamic BGP Flow Specification">
<meta name="abstract" content="Dynamic BGP Flow Specification allows a traffic analysis server to generate BGP Flow Specification routes to control traffic.">
<meta name="description" content="Dynamic BGP Flow Specification allows a traffic analysis server to generate BGP Flow Specification routes to control traffic.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_flowspec_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/spec/BGP_Flow_Specification_limitation.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_flowspec_cfg_0003.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP Flow Specfication">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP Flow Specfication">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00799643">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372344">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Dynamic BGP Flow Specification</title>
</head>
<body><a name="EN-US_TASK_0172372344"></a><a name="EN-US_TASK_0172372344"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Dynamic BGP Flow Specification</h1>
<div class="taskbody"><p>Dynamic BGP Flow Specification allows a traffic analysis server to generate BGP Flow Specification routes to control traffic.</p>
<div class="context"><a name="EN-US_TASK_0172372344__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>When deploying dynamic BGP Flow Specification, a BGP Flow Specification peer relationship needs to be established between the traffic analysis server and each ingress of the network to transmit BGP Flow Specification routes.</p>
<p>In an AS with multiple ingresses, a BGP Flow route reflector (Flow RR) can be deployed to reduce the number of BGP Flow Specification peer relationships to be established and save network resources.</p>
<p>If you want to filter traffic matching a specified address prefix but BGP Flow Specification routes matching the specified address prefix cannot pass validation, disable the validation of the BGP Flow Specification routes received from a specified peer.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372344__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring dynamic BGP Flow Specification, <a href="dc_vrp_bgp_cfg_3006.html">configure a BGP peer.</a></p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372344__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure a BGP Flow Specification peer relationship.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname">ipv4-family flow</span></b></a></span><p><p>The BGP-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <a href="cmdqueryname=enable"><b><span class="cmdname">enable</span></b></a></span><p><p>A BGP Flow Specification peer relationship is established.</p>
</p><p><p>After the BGP Flow Specification peer relationship is established in the BGP-Flow address family view, BGP Flow Specification routes generated by a traffic analysis server are automatically imported to the BGP routing table and then sent to the BGP Flow Specification peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure a Flow RR.</span><p><p>Before configuring a Flow RR, establish a BGP Flow Specification peer relationship between the Flow RR with the traffic analysis server and every network ingress.</p>
</p><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname">ipv4-family flow</span></b></a></span><p><p>The BGP-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <a href="cmdqueryname=reflect-client"><b><span class="cmdname">reflect-client</span></b></a></span><p><p>A Flow RR is configured, and clients are specified for it.</p>
</p><p><p>The <span class="keyword">Router</span> on which the <a href="cmdqueryname=peer+reflect-client"><b><span class="cmdname">peer reflect-client</span></b></a> command is run functions as a Flow RR, and the network ingress and traffic analysis server function as clients.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=undo+reflect+between-clients"><b><span class="cmdname">undo reflect between-clients</span></b></a></span><p><p>Route reflection between clients through the RR is disabled.</p>
</p><p><p>If the clients of a Flow RR are fully meshed, you can run the <a href="cmdqueryname=undo+reflect+between-clients"><b><span class="cmdname">undo reflect between-clients</span></b></a> command on the Flow RR to disable route reflection between clients through the RR, which reduces costs.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=reflector+cluster-id"><b><span class="cmdname">reflector cluster-id</span></b></a> { <i><span class="varname">cluster-id-value</span></i> | <i><span class="varname">cluster-id-ipv4</span></i> }</span><p><p>A cluster ID is configured for the Flow RR.</p>
</p><p><p>If a cluster has multiple Flow RRs, run this command to set the same <i><span class="varname">cluster-id</span></i> for these RRs.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=reflector+cluster-id"><b><span class="cmdname">reflector cluster-id</span></b></a> command is applicable only to Flow RRs.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure the device to check the AS_Path attribute during BGP Flow Specification route validation.</span><ol type="a" id="EN-US_TASK_0172372344__en-us_task_0172372345_substeps285212623214101"><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372345_substep1245391788214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmd1924157254214101">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname495614563214101">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p34866506517">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372345_substep1509965906214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmd1182725543214101">Run <a href="cmdqueryname=bgp"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname1947005860214101">bgp</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372344__en-us_task_0172372345_varname345568250214101">as-number</span></i></span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p173017550519">The BGP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372345_substep968634319214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmd1910955173214101">Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname1497143125214101">ipv4-family flow</span></b></a></span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p964135919511">The BGP-Flow address family view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372345_substep1539470768214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmd1002218720214101">Run <a href="cmdqueryname=route+validation-mode+include-as"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname1426949729214101">route validation-mode include-as</span></b></a></span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p5877194314510">The device is configured to check the AS_Path attribute during BGP Flow Specification route validation.</p>
</p><p><div class="p" id="EN-US_TASK_0172372344__en-us_task_0172372345_p97438915214101">BGP Flow Specification route validation is performed in either of the following modes: <ul id="EN-US_TASK_0172372344__en-us_task_0172372345_en-us_cliref_0172383989_ul1988263785214154"><li id="EN-US_TASK_0172372344__en-us_task_0172372345_en-us_cliref_0172383989_li1125409925214154">Validation mode 1: After receiving a BGP Flow Specification route with a destination address-based filtering rule, the device checks the validity of the route using the rules described in <a href="#EN-US_TASK_0172372344__en-us_task_0172372345_en-us_cliref_0172383989_fig_route_validation-mode_include-as01">Figure 1</a>. The route is considered valid only if the validation succeeds.</li><li id="EN-US_TASK_0172372344__en-us_task_0172372345_en-us_cliref_0172383989_li1499988458214154">Validation mode 2: After receiving a BGP Flow Specification route with a destination address-based filtering rule, the device checks the validity of the route by checking whether the AS_Path attribute of the route carries the AS_Set and AS_Sequence fields. The route is considered valid only if its AS_Path attribute does not carry the AS_Set or AS_Sequence field.</li></ul>
Validation mode 2 is configured using the <a href="cmdqueryname=route+validation-mode+include-as"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_en-us_cliref_0172383989_cmdname1973107158214154">route validation-mode include-as</span></b></a> command. If this command is configured, the device checks the validity of a BGP Flow Specification route using mode 2 first. <ul id="EN-US_TASK_0172372344__en-us_task_0172372345_en-us_cliref_0172383989_ul1816591491214154"><li id="EN-US_TASK_0172372344__en-us_task_0172372345_en-us_cliref_0172383989_li1472822637214154">If the validation succeeds, the BGP Flow Specification route is considered valid, and mode 1 is not used.</li><li id="EN-US_TASK_0172372344__en-us_task_0172372345_en-us_cliref_0172383989_li357606420214154">If the validation fails, the device checks the validity of the BGP Flow Specification route using mode 1.</li></ul>
If this command is not run, the device uses mode 1 to check the validity of BGP Flow Specification routes.<div class="fignone" id="EN-US_TASK_0172372344__en-us_task_0172372345_en-us_cliref_0172383989_fig_route_validation-mode_include-as01"><a name="EN-US_TASK_0172372344__en-us_task_0172372345_en-us_cliref_0172383989_fig_route_validation-mode_include-as01"></a><a name="en-us_task_0172372345_en-us_cliref_0172383989_fig_route_validation-mode_include-as01"></a><span class="figcap"><b>Figure 1 </b>BGP Flow Specification validation rules</span><br><span><img class="vsd" id="EN-US_TASK_0172372344__en-us_task_0172372345_en-us_cliref_0172383989_image1739672175214154" src="figure/en-us_image_0000001183343598.png"></span><br></div>
</div>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372345_substep1638335581214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmd470788033214101">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname1170576065214101">commit</span></b></a></span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p73022598438">The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Disable BGP Flow Specification route validation.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname">ipv4-family flow</span></b></a></span><p><p>The BGP-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+validation-disable"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>validation-disable</span></strong></span><p><p>The device is disabled from validating the BGP Flow Specification routes received from a specified peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Disable the device from validating the next hop of each route that carries the redirection next-hop attribute and is received from a specified EBGP peer.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname">ipv4-family flow</span></b></a></span><p><p>The BGP-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+redirect+ip+validation-disable"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>redirect ip validation-disable</span></strong></span><p><p>The device is disabled from validating the routes that carry a redirection extended community attribute and are received from a specified EBGP peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure a BGP peer to process the received routes that carry the redirection next-hop IPv6 address, color, and prefix SID attributes.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname">ipv4-family flow</span></b></a></span><p><p>The BGP-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+redirect+tunnelv6"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>redirect tunnelv6</span></strong></span><p><p>The BGP peer is configured to process the received routes that carry the next-hop IPv6 address, color, and prefix SID attributes.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure the redirection next-hop attribute ID for BGP Flow Specification routes.</span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p1321682413214101">The redirection next-hop attribute ID can be 0x010C (defined in a related RFC) or 0x0800 (defined in a related draft). If a Huawei device needs to communicate with a non-Huawei device that does not support the redirection next-hop attribute ID of 0x010C or 0x0800, set the redirection next-hop attribute ID of BGP Flow Specification routes as required. Perform one of the following configurations based on the ID supported by non-Huawei devices:</p>
<ul id="EN-US_TASK_0172372344__en-us_task_0172372345_ul501958730214101"><li id="EN-US_TASK_0172372344__en-us_task_0172372345_li178998743214101"><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p1954767801214101"><a name="EN-US_TASK_0172372344__en-us_task_0172372345_li178998743214101"></a><a name="en-us_task_0172372345_li178998743214101"></a>Set the redirection next-hop attribute ID to 0x010C (defined in a related RFC) for BGP Flow Specification routes.</p>
<ol type="a" id="EN-US_TASK_0172372344__en-us_task_0172372345_ol1883388145214101"><li id="EN-US_TASK_0172372344__en-us_task_0172372345_li1735941735214101">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname2333123016445">system-view</span></b></a><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p416793116441">The system view is displayed.</p>
</li><li id="EN-US_TASK_0172372344__en-us_task_0172372345_li1736398237214101">Run <a href="cmdqueryname=bgp"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname17244123444418">bgp</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372344__en-us_task_0172372345_varname1244123413443">as-number</span></i><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p3938234204413">The BGP view is displayed.</p>
</li><li id="EN-US_TASK_0172372344__en-us_task_0172372345_li1063283344214101">Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname9424105984414">ipv4-family flow</span></b></a><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p123305054518">The BGP-Flow address family view is displayed.</p>
</li><li id="EN-US_TASK_0172372344__en-us_task_0172372345_li1800559783214101">Run <a href="cmdqueryname=peer+redirect+ip+rfc-compatible"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname159611831457">peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372344__en-us_task_0172372345_varname109622334513">ipv4-address</span></i> <strong><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdparmname39621639457">redirect ip rfc-compatible</span></strong><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p1398620424511">The redirection next-hop attribute ID of the BGP Flow Specification route is set to 0x010C (defined in a related RFC).</p>
</li><li id="EN-US_TASK_0172372344__en-us_task_0172372345_li380799385214101">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname1199288154520">commit</span></b></a><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p1569879144518">The configuration is committed.</p>
</li></ol>
</li><li id="EN-US_TASK_0172372344__en-us_task_0172372345_li1980060120214101"><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p1463842928214101"><a name="EN-US_TASK_0172372344__en-us_task_0172372345_li1980060120214101"></a><a name="en-us_task_0172372345_li1980060120214101"></a>Change the redirection next-hop attribute ID of BGP Flow Specification routes to 0x0800 (defined in a related draft).</p>
<ol type="a" id="EN-US_TASK_0172372344__en-us_task_0172372345_ol2014632052214101"><li id="EN-US_TASK_0172372344__en-us_task_0172372345_li91071080214101">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname19868121614311">system-view</span></b></a><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p243451818435">The system view is displayed.</p>
</li><li id="EN-US_TASK_0172372344__en-us_task_0172372345_li1234417457214101">Run <a href="cmdqueryname=bgp"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname6626109124311">bgp</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372344__en-us_task_0172372345_varname76277924310">as-number</span></i><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p132294115435">The BGP view is displayed.</p>
</li><li id="EN-US_TASK_0172372344__en-us_task_0172372345_li1808333184214101">Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname153522577426">ipv4-family flow</span></b></a><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p1145145810427">The BGP-Flow address family view is displayed.</p>
</li><li id="EN-US_TASK_0172372344__en-us_task_0172372345_li1242802234214101">Run <a href="cmdqueryname=peer+redirect+ip+draft-compatible"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname1035811450427">peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372344__en-us_task_0172372345_varname1035874584219">ipv4-address</span></i> <strong><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdparmname1235864513427">redirect ip draft-compatible</span></strong><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p196112046114218">The redirection next-hop attribute ID of BGP Flow Specification routes is changed to 0x0800 (defined in a related draft).</p>
</li><li id="EN-US_TASK_0172372344__en-us_task_0172372345_li1250327541214101">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname132031350144219">commit</span></b></a><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p43081351114217">The configuration is committed.</p>
</li></ol>
</li></ul>
</p></li><li><span>(Optional) Configure the interface in the BGP Flow Specification as the traffic-injection interface of the cleaned traffic to prevent the injected traffic from matching the Flow Specification rules and being switched back to the cleaning device.</span><ol type="a" id="EN-US_TASK_0172372344__en-us_task_0172372345_substeps2025036455214101"><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372345_substep429450343214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmd79377234214101">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname1694971331214101">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p9209203013422">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372345_substep1223237670214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmd1094566959214101">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname1635205139214101">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372344__en-us_task_0172372345_varname657612310402">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172372344__en-us_task_0172372345_varname1957642317402">interface-number</span></i></span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p627211251420">The interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372345_substep1780765529214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmd1994141311214101">Run <a href="cmdqueryname=flowspec+refluence"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname631046200214101">flowspec refluence</span></b></a></span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p1392211213298">The interface in BGP Flow Specification is configured as the traffic-injection interface for cleaning traffic.</p>
</p><p><div class="note" id="EN-US_TASK_0172372344__en-us_task_0172372345_note1403267220214101"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p1046755186214101">This configuration conflicts with MF classification. Therefore, after this command is configured on an interface, do not configure MF classification on the interface.</p>
<p id="EN-US_TASK_0172372344__en-us_task_0172372345_p1919482247214101">This command cannot be configured on Eth-Trunk member interfaces. The configuration on a main interface also takes effect on its sub-interfaces.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372345_substep1486233384214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmd1742186631214101">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname2092367494214101">commit</span></b></a></span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p3686105424">The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Disable BGP Flow Specification on the interface.</span><ol type="a" id="EN-US_TASK_0172372344__en-us_task_0172372345_substeps1763623200214101"><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372345_substep1816712982214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmd572595428214101">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname214768980214101">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p145112487413">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372345_substep21613653214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmd335929628214101">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname512983692214101">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372344__en-us_task_0172372345_varname20655823164018">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172372344__en-us_task_0172372345_varname17655132312405">interface-number</span></i></span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p47444616411">The interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372345_substep1387054464214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmd1289388263214101">Run <a href="cmdqueryname=flowspec+disable+ipv4+ipv6"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname371040327214101">flowspec disable</span></b></a> [ <strong><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdparmname6175123111117">ipv4</span></strong> | <strong><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdparmname918112317118">ipv6</span></strong> ]</span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p1516583017294">BGP Flow Specification is disabled on the interface.</p>
</p><p><div class="note" id="EN-US_TASK_0172372344__en-us_task_0172372345_note508989688214101"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p1162320215214101">This command cannot be configured on Eth-Trunk member interfaces. The configuration on a main interface also takes effect on its sub-interfaces.</p>
<p id="EN-US_TASK_0172372344__en-us_task_0172372345_p833412971216">If BGP Flow Specification does not need to be disabled on a sub-interface, run the <a href="cmdqueryname=flowspec+disable+ipv4+ipv6+sub-port-exclude"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname123591436201813">flowspec disable</span></b></a> [ <strong><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdparmname987442181810">ipv4</span></strong> | <strong><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdparmname1913210518186">ipv6</span></strong> ] <strong><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdparmname17662165691816">sub-port-exclude</span></strong> command on the main interface to which the sub-interface belongs.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372345_substep1178700715214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372345_cmd2033757077214101">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372345_cmdname1136214344214101">commit</span></b></a></span><p><p id="EN-US_TASK_0172372344__en-us_task_0172372345_p7953191115413">The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure the device to redirect traffic to a specified IPv6 next hop after receiving a BGP Flow Specification route from a peer.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname">ipv4-family flow</span></b></a></span><p><p>The BGP-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+redirect+ipv6"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>redirect ipv6</span></strong></span><p><p>The device is configured to redirect traffic to a specified IPv6 next hop after receiving a BGP Flow Specification route from a peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Allow the device to recurse the received routes that carry a redirection next hop IP address to tunnels.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname">ipv4-family flow</span></b></a></span><p><p>The BGP-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=redirect+ip+recursive-lookup+tunnel+tunnel-selector"><b><span class="cmdname">redirect ip recursive-lookup tunnel</span></b></a> [ <strong><span>tunnel-selector</span></strong> <i><span class="varname">tunnel-selector-name</span></i> ]</span><p><p>The device is allowed to recurse the received routes that carry a redirection next hop IP address to tunnels.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Allow the device to recurse received routes with the next-hop IPv6 address, color attribute, and prefix SID attributes to tunnels.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname">ipv4-family flow</span></b></a></span><p><p>The BGP-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=redirect+tunnelv6+tunnel-selector"><b><span class="cmdname">redirect tunnelv6 tunnel-selector</span></b></a> <i><span class="varname">tunnel-selector-name</span></i></span><p><p>The device is allowed to recurse received routes with the next-hop IPv6 address, color, and prefix SID attributes to tunnels.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To trigger route recursion to SRv6 TE Policies, you must run both the <a href="cmdqueryname=redirect+tunnelv6+tunnel-selector"><b><span class="cmdname">redirect tunnelv6 tunnel-selector</span></b></a> <i><span class="varname">tunnel-selector-name</span></i> command and the <a href="cmdqueryname=peer+redirect+tunnelv6"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>redirect tunnelv6</span></strong> command.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure the device to validate the redirection next-hop IPv6 address attribute carried in the routes that are received from an EBGP peer.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname">ipv4-family flow</span></b></a></span><p><p>The BGP-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+redirect+ipv6+validation"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i> <strong><span>redirect ipv6 validation</span></strong></span><p><p>The device is configured to validate the redirection next-hop IPv6 address attribute carried in the routes that are received from an EBGP peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure BGP Flow Specification for the packets leaving the public network based on IP information.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=flowspec+match-ip-layer+mpls-pop"><b><span class="cmdname">flowspec match-ip-layer mpls-pop</span></b></a></span><p><p>BGP Flow Specification is configured for the packets leaving the public network based on IP information.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) <span>Enable CAR statistics collection and packet loss statistics collection for BGP Flow Specification.</span></span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=flowspec+statistic+enable"><b><span class="cmdname">flowspec statistic enable</span></b></a></span><p><p>CAR statistics collection and packet loss statistics collection for BGP Flow Specification are enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172372344__vxlan"><span id="EN-US_TASK_0172372344__cmd1225846379214101">(Optional) <span>Configure BGP Flow Specification for packets entering an IPv4 VXLAN tunnel.</span></span><ol type="a" id="EN-US_TASK_0172372344__substeps1785720634214101"><li class="substepexpand" id="EN-US_TASK_0172372344__en-us_task_0172372344_substep1683670792214101"><span id="EN-US_TASK_0172372344__en-us_task_0172372344_cmd62984625214101">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372344__en-us_task_0172372344_cmdname557329499214101">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372344__p10600134215587">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__substep940538792214101"><span id="EN-US_TASK_0172372344__cmd8351577214101">Run <a href="cmdqueryname=flowspec+match+vxlan-packet+enable"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname2074656764214101">flowspec match vxlan-packet enable</span></b></a></span><p><p id="EN-US_TASK_0172372344__p1158421120402">BGP Flow Specification is configured for packets entering an IPv4 VXLAN tunnel.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__substep2051939876214101"><span id="EN-US_TASK_0172372344__cmd513608759214101">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname278778871214101">commit</span></b></a></span><p><p id="EN-US_TASK_0172372344__p1577144124120">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172372344__gre"><span id="EN-US_TASK_0172372344__cmd2136537356214101">(Optional) Enable BGP Flow Specification on a GRE tunnel interface.</span><ol type="a" id="EN-US_TASK_0172372344__substeps562864929214101"><li class="substepexpand" id="EN-US_TASK_0172372344__substep1683670792214101"><span id="EN-US_TASK_0172372344__cmd62984625214101">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname557329499214101">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372344__p95143208417">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__substep517929886214101"><span id="EN-US_TASK_0172372344__cmd1096372711214101">Run <a href="cmdqueryname=interface+tunnel"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname827783712214101">interface tunnel</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372344__varname888114610214101">interface-number</span></i></span><p><p id="EN-US_TASK_0172372344__p120034913312">The tunnel interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__substep590742851214101"><span id="EN-US_TASK_0172372344__cmd798196676214101">Run <a href="cmdqueryname=tunnel-protocol+gre"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname567510149214101">tunnel-protocol</span></b></a> <strong><span id="EN-US_TASK_0172372344__cmdparmname2113330741214101">gre</span></strong></span><p><p id="EN-US_TASK_0172372344__p016914461132">The tunnel is encapsulated as a GRE tunnel.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__substep338294897214101"><span id="EN-US_TASK_0172372344__cmd1333120270214101">Run <a href="cmdqueryname=flowspec+match+tunnel-pop"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname1384312153214101">flowspec match tunnel-pop</span></b></a></span><p><p id="EN-US_TASK_0172372344__p1823218423316">BGP Flow Specification is enabled on the GRE tunnel interface.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__substep1281369377214101"><span id="EN-US_TASK_0172372344__cmd1009107123214101">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname2059295081214101">commit</span></b></a></span><p><p id="EN-US_TASK_0172372344__p19226636835">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172372344__step1571311506711"><span id="EN-US_TASK_0172372344__cmd6713175015715">(Optional) Disable BGP Flow Specification protection.</span><ol type="a" id="EN-US_TASK_0172372344__substeps178887814913"><li class="substepexpand" id="EN-US_TASK_0172372344__substep118881485918"><span id="EN-US_TASK_0172372344__cmd138883817910">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname039174221019">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372344__p13702181014128">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__substep8971201512920"><span id="EN-US_TASK_0172372344__cmd097114152918">Run <a href="cmdqueryname=flowspec+protocol-protect+ipv4+ipv6+disable"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname67791726161015">flowspec protocol-protect</span></b></a> { <strong><span id="EN-US_TASK_0172372344__cmdparmname1422011399114">ipv4</span></strong> | <strong><span id="EN-US_TASK_0172372344__cmdparmname115531043131114">ipv6</span></strong> } <strong><span id="EN-US_TASK_0172372344__cmdparmname78091349181114">disable</span></strong></span><p><p id="EN-US_TASK_0172372344__p12278122114127">BGP Flow Specification protection is disabled.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__substep139391326123"><span id="EN-US_TASK_0172372344__cmd1693913211215">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname4151640101214">commit</span></b></a></span><p><p id="EN-US_TASK_0172372344__p1855253571220">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172372344__step13342185910419"><span id="EN-US_TASK_0172372344__cmd1934211592414">(Optional) Enable the device to follow RFC 5575 when dealing with BGP Flow Specification IPv4 fragmentation rules.</span><ol type="a" id="EN-US_TASK_0172372344__substeps36132122442"><li class="substepexpand" id="EN-US_TASK_0172372344__substep7613181218445"><span id="EN-US_TASK_0172372344__cmd261315126444">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname139552174414">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372344__p194311932266">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__substep54471506447"><span id="EN-US_TASK_0172372344__cmd104479502441">Run <a href="cmdqueryname=flowspec+ipv4-fragment-rule+switch"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname191162010458">flowspec ipv4-fragment-rule switch</span></b></a></span><p><p id="EN-US_TASK_0172372344__p11474218182617">The device is enabled to follow RFC 5575 when dealing with BGP Flow Specification IPv4 fragmentation rules.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__substep10622154811452"><span id="EN-US_TASK_0172372344__cmd862217481459">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname19622124824510">commit</span></b></a></span><p><p id="EN-US_TASK_0172372344__p6999935132613">The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Enable the route policy distribution (RPD) capability for a BGP peer to support the BGP Flow Specification routes carrying the RPD attribute and delivered by the controller to forwarders.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname">ipv4-family flow</span></b></a></span><p><p>The BGP-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <strong>peer </strong><em>peerIPv4Addr </em><strong>capability-advertise </strong><strong>route-policy-distribute </strong><strong>receive</strong></span><p><p>The RPD capability is enabled for the BGP peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172372344__step13123193812129"><span id="EN-US_TASK_0172372344__cmd10123153871218">(Optional) Enable BGP Flow Specification to match inner packet information about the packets that leave an SRv6 TE Policy or SRv6 BE egress.</span><ol type="a" id="EN-US_TASK_0172372344__substeps195639422140"><li class="substepexpand" id="EN-US_TASK_0172372344__substep165631942191417"><span id="EN-US_TASK_0172372344__cmd756310429148">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname5413124714141">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372344__p1188315171473">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__substep92941850101419"><span id="EN-US_TASK_0172372344__cmd12941050101412">Run <a href="cmdqueryname=flowspec+match+srv6-inner-ip+enable"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname655163675120">flowspec match srv6-inner-ip enable</span></b></a></span><p><p id="EN-US_TASK_0172372344__p17382527114711">BGP Flow Specification is enabled to match inner packet information about the packets that leave an SRv6 TE Policy or SRv6 BE egress.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372344__substep12814439157"><span id="EN-US_TASK_0172372344__cmd62811943191514">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname9864512158">commit</span></b></a></span><p><p id="EN-US_TASK_0172372344__p4321538134715">The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Disable the device from sending routes that carry the destination community attribute rule to a specified peer.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+flow"><b><span class="cmdname">ipv4-family flow</span></b></a></span><p><p>The BGP-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <strong><a href="cmdqueryname=peer+advertise+destination-community+disable"><b><span class="cmdname">peer</span></b></a> </strong><em>peerIPv4Addr </em><a href="cmdqueryname=peer+advertise+destination-community+disable"><b><span class="cmdname">advertise destination-community disable</span></b></a></span><p><p>The device is disabled from sending routes that carry the destination community attribute rule to a specified peer. Perform this step if you do not want the device to send routes that carry the destination community attribute rule to a specified BGP Flow Specification peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Enable BGP Flow Specification to match an IPv4 destination community attribute-based traffic filtering rule.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=flowspec+match-rule+enhance+enable"><b><span class="cmdname">flowspec match-rule enhance enable</span></b></a></span><p><p>BGP Flow Specification is enabled to match an IPv4 destination community attribute-based traffic filtering rule.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172372344__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After the configuration is complete, verify the configuration.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+bgp+flow+peer+verbose"><b><span class="cmdname">display bgp flow peer</span></b></a> [ [ <i><span class="varname">ipv4-address</span></i> ] <strong><span>verbose</span></strong> ] command to check information about BGP Flow Specification peers.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+flow+routing-table"><b><span class="cmdname">display bgp flow routing-table</span></b></a> command to check BGP Flow Specification routing information.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+flow+routing-table+peer+advertised-routes"><b><span class="cmdname">display bgp flow routing-table</span></b></a> [ <strong><span>peer</span></strong> <i><span class="varname">ipv4-address</span></i> ] [ <strong><span>advertised-routes</span></strong> | <strong><span>received-routes</span></strong> [ <strong><span>active</span></strong> ] ] <a href="cmdqueryname=statistics"><b><span class="cmdname">statistics</span></b></a> command to check BGP Flow Specification route statistics.</p>
</li><li>Run the <a href="cmdqueryname=display+flowspec+statistics"><b><span class="cmdname">display flowspec statistics</span></b></a> <i><span class="varname">reindex</span></i> command to check statistics about traffic transmitted over BGP Flow Specification routes.</li><li id="EN-US_TASK_0172372344__li10721503143">Run the <a href="cmdqueryname=display+flowspec+rule+slot"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname75021755191414">display flowspec</span></b></a> <strong><span id="EN-US_TASK_0172372344__cmdparmname322314521514">rule</span></strong> <i><span class="varname" id="EN-US_TASK_0172372344__varname12472151218155">reindex-value</span></i> <strong><span id="EN-US_TASK_0172372344__cmdparmname143651917111514">slot</span></strong> <i><span class="varname" id="EN-US_TASK_0172372344__varname033592413157">slot-id</span></i> command to check information about combined rules in the local BGP Flow Specification rule table.</li><li id="EN-US_TASK_0172372344__li39703527165">Run the <a href="cmdqueryname=display+flowspec+rule+statistics+slot"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname5910711181816">display flowspec</span></b></a> <strong><span id="EN-US_TASK_0172372344__cmdparmname162965181181">rule statistics slot</span></strong> <i><span class="varname" id="EN-US_TASK_0172372344__varname9665522191819">slot-id</span></i> command to check statistics about the rules for BGP Flow Specification routes to take effect.</li><li id="EN-US_TASK_0172372344__li176541944132219">Run the <a href="cmdqueryname=display+flowspec+resource+rule+ipv4+ipv6+slot"><b><span class="cmdname" id="EN-US_TASK_0172372344__cmdname1599317291274">display flowspec resource rule</span></b></a> { <strong><span id="EN-US_TASK_0172372344__cmdparmname1563703542718">ipv4</span></strong> | <strong><span id="EN-US_TASK_0172372344__cmdparmname5358140192714">ipv6</span></strong> } [ <strong><span id="EN-US_TASK_0172372344__cmdparmname1515184619272">slot</span></strong> <i><span class="varname" id="EN-US_TASK_0172372344__varname057105116271">slot-id</span></i> ] command to check the resource usage information about BGP Flow Specification route rules.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_flowspec_cfg_0000.html">BGP Flow Specification Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/spec/BGP_Flow_Specification_limitation.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_flowspec_cfg_0003.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>