
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Point-to-Point MACsec">
<meta name="abstract" content="MACsec defines IEEE 802-based data security communication methods. MACsec provides users with secure data sending and receiving services at the MAC layer, including data encryption, data frame integrity check, data source validity check and anti-replay functions. MACsec uses Layer 2 encryption technology to provide secure hop-by-hop transmission of data. It applies to scenarios that require high data confidentiality.">
<meta name="description" content="MACsec defines IEEE 802-based data security communication methods. MACsec provides users with secure data sending and receiving services at the MAC layer, including data encryption, data frame integrity check, data source validity check and anti-replay functions. MACsec uses Layer 2 encryption technology to provide secure hop-by-hop transmission of data. It applies to scenarios that require high data confidentiality.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_macsec_cfg_0013.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_macsec_cfg_0017.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="macsec_ne,z00603461,w00800033,w00556928,w00606909,l00455378,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MACsec">
<meta name="featuretype" content="Security">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MACsec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="MACsec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="MACsec">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="l00799643">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00584284">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372643">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Point-to-Point MACsec</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172372643"></a><a name="EN-US_TASK_0172372643"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Point-to-Point MACsec</h1>
<div class="taskbody"><p>MACsec defines IEEE 802-based data security communication methods. MACsec provides users with secure data sending and receiving services at the MAC layer, including data encryption, data frame integrity check, data source validity check and anti-replay functions. MACsec uses Layer 2 encryption technology to provide secure hop-by-hop transmission of data. It applies to scenarios that require high data confidentiality.</p>
<div class="context"><a name="EN-US_TASK_0172372643__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As shown in <a href="#EN-US_TASK_0172372643__fig_dc_ne_macsec_cfg_001401">Figure 1</a>, <span class="keyword">Router</span><span class="keyword">Device</span>A and <span class="keyword">Router</span><span class="keyword">Device</span>B are directly connected, and MACsec data packets are encrypted and decrypted on GE <span>0/1/0</span> of <span class="keyword">Device</span>A and <span class="keyword">Device</span>B.</p>
<div class="fignone" id="EN-US_TASK_0172372643__fig_dc_ne_macsec_cfg_001401"><a name="EN-US_TASK_0172372643__fig_dc_ne_macsec_cfg_001401"></a><a name="fig_dc_ne_macsec_cfg_001401"></a><span class="figcap"><b>Figure 1 </b>Configuring point-to-point MACsec</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>The configurations in this example are performed on <span class="keyword">Device</span>A and <span class="keyword">Device</span>B. The <span class="keyword">HUAWEI NE40E-M2 series</span> can function as <span class="keyword">Device</span>A and <span class="keyword">Device</span>B.</li><li>Interface1 in this example represents GE <span>0/1/0</span>.</li></ul>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_ne_macsec_cfg_001401.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372643__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<p>Configure the same static CKN and CAK on GE <span>0/1/0</span> of <span class="keyword">Device</span>A and <span class="keyword">Device</span>B.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372643__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>CKN and CAK values of the interface</p>
</li><li>The MACsec encryption algorithm <strong>gcm-aes-xpn-128</strong>, which is to be configured on the interface of <span class="keyword">Device</span>A</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372643__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure <span class="keyword">Device</span>A.</span><p><div class="p"># Configure CKN and CAK in ciphertext on GE <span>0/1/0</span>.<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>mka cak-mode static ckn a1 cak cipher b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
</div>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The following are optional MACsec extended configurations.</p>
</div></div>
<div class="p"># Set the MKA key server priority on GE <span>0/1/0</span>. <pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>mka keyserver priority 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>]<strong> commit</strong></pre>
</div>
<div class="p"># Set the SAK lifetime on GE <span>0/1/0</span>. <pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>mka timer sak-life 500</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>]<strong> commit</strong></pre>
</div>
<div class="p"># Configure the MACsec encryption algorithm on GE <span>0/1/0</span>. .<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>macsec cipher-suite gcm-aes-xpn-128</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>]<strong> commit</strong></pre>
</div>
<div class="p"># Set the MACsec encryption offset on GE <span>0/1/0</span>. <pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>macsec confidentiality-offset 50</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>]<strong> commit</strong></pre>
</div>
<div class="p"># Set the MACsec encryption mode on GE <span>0/1/0</span>. .<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>macsec mode integrity-only</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>]<strong> commit</strong></pre>
</div>
<div class="p"># Set the MACsec replay window size on GE <span>0/1/0</span>. <pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>macsec replay-window 512</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>]<strong> commit</strong></pre>
</div>
</p></li><li><span>Configure <span class="keyword">Device</span>B.</span><p><p># Configure CKN and CAK in ciphertext on GE <span>0/1/0</span>.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>B&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>mka cak-mode static ckn a1 cak cipher b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>]<strong> commit</strong></pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172372643__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">sysname <span class="keyword">Device</span>A
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 mka cak-mode static ckn a1 cak cipher %^%#C1ad()KRM<font style="font-size:8pt" Face="Courier New" >~</font>r1ZmJ:K09&amp;H]R=&lt;*0^A,H.fZE"&lt;WxS%^%#
 macsec replay-window 512
 macsec mode integrity-only
 macsec confidentiality-offset 50
 macsec cipher-suite gcm-aes-xpn-128
 mka keyserver priority 10
 mka timer sak-life 500</pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">sysname <span class="keyword">Device</span>B
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 mka cak-mode static ckn a1 cak cipher %^%#C1ad()KRM<font style="font-size:8pt" Face="Courier New" >~</font>r1ZmJ:K09&amp;H]R=&lt;*0^A,H.fZE"&lt;WxS%^%#
#</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_macsec_cfg_0013.html">Configuration Examples for MACsec
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_macsec_cfg_0017.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>