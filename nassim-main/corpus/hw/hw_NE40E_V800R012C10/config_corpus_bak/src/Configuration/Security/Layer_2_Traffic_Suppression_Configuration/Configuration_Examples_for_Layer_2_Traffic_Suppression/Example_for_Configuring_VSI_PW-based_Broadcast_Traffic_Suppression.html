
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring VSI PW-based Broadcast Traffic Suppression">
<meta name="abstract" content="This section provides an example for configuring VSI PW-based broadcast traffic suppression in order to properly allocate user bandwidth and improve network performance.">
<meta name="description" content="This section provides an example for configuring VSI PW-based broadcast traffic suppression in order to properly allocate user bandwidth and improve network performance.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_traff-supress_cfg_5009.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_traff-supress_cfg_5010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00800033,traff-supress_ne,w00556928,w00606909,l00455378,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Layer 2 Traffic Suppression">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Layer 2 Traffic Suppression">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Layer 2 Traffic Suppression">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Layer 2 Traffic Suppression">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="q00517581">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00606909">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372586">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring VSI PW-based Broadcast Traffic Suppression</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172372586"></a><a name="EN-US_TASK_0172372586"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring VSI PW-based Broadcast Traffic Suppression</h1>
<div class="taskbody"><p>This section provides an example for configuring VSI PW-based broadcast traffic suppression in order to properly allocate user bandwidth and improve network performance.</p>
<div class="context"><a name="EN-US_TASK_0172372586__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In addition to user traffic management and bandwidth allocation, an Ethernet requires broadcast, multicast, and unknown unicast traffic to be suppressed to ensure the secure transmission of unicast traffic and properly utilize bandwidth resources. If these types of traffic are not suppressed, forwarding a large volume of such traffic consumes numerous bandwidth resources, reducing network performance and even causing a communication interruption.</p>
<p>On the network shown in <a href="#EN-US_TASK_0172372586__fig_dc_ne_traff-supress_cfg_501101">Figure 1</a>, CE1 and CE2 belong to the same LDP VPLS network and can communicate with each other. If you configure broadcast traffic suppression on an interface, the broadcast traffic of all PWs created on the interface is suppressed. In this case, you can configure broadcast traffic suppression for only the PW in a specified VSI. This makes traffic suppression more convenient and flexible.</p>
<div class="fignone" id="EN-US_TASK_0172372586__fig_dc_ne_traff-supress_cfg_501101"><a name="EN-US_TASK_0172372586__fig_dc_ne_traff-supress_cfg_501101"></a><a name="fig_dc_ne_traff-supress_cfg_501101"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for configuring VSI PW-based broadcast traffic suppression</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, subinterface1.1, and subinterface2.1 represent GE<span>0/1/0</span>, GE<span>0/2/0</span>, GE<span>0/1/0</span>.1, and <span>0/2/0</span>.1, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_ne_traff-supress_cfg_501101.png" width="NaN" height="NaN"></span><br><div class="tableBorder"><table cellpadding="4" cellspacing="0" summary=""><tr><th valign="bottom" align="left" id="mcps1.4.1.4.4.1.1"><p>Device Name</p>
</th>
<th valign="bottom" align="left" id="mcps1.4.1.4.4.1.2"><p>Interface Number</p>
</th>
<th valign="bottom" align="left" id="mcps1.4.1.4.4.1.3"><p>Interface IP Address</p>
</th>
<th valign="bottom" align="left" id="mcps1.4.1.4.4.1.4"><p>Interface MAC Address</p>
</th>
</tr>
<tr><td valign="top" headers="mcps1.4.1.4.4.1.1"><p>CE1</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.2"><p>GE<span>0/1/0</span>.1</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.3"><p>10.1.1.1/24</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.4"><p>-</p>
</td>
</tr>
<tr><td valign="top" headers="mcps1.4.1.4.4.1.1"><p>PE1</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.2"><p>Loopback1</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.3"><p>1.1.1.1/32</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.4"><p>-</p>
</td>
</tr>
<tr><td valign="top" headers="mcps1.4.1.4.4.1.1"><p>PE1</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.2"><p>GE<span>0/2/0</span></p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.3"><p>172.16.1.1/24</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.4"><p>-</p>
</td>
</tr>
<tr><td valign="top" headers="mcps1.4.1.4.4.1.1"><p>P</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.2"><p>Loopback1</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.3"><p>2.2.2.2/32</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.4"><p>-</p>
</td>
</tr>
<tr><td valign="top" headers="mcps1.4.1.4.4.1.1"><p>P</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.2"><p>GE<span>0/1/0</span></p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.3"><p>172.16.1.2/24</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.4"><p>-</p>
</td>
</tr>
<tr><td valign="top" headers="mcps1.4.1.4.4.1.1"><p>P</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.2"><p>GE<span>0/2/0</span></p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.3"><p>192.168.1.1/24</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.4"><p>-</p>
</td>
</tr>
<tr><td valign="top" headers="mcps1.4.1.4.4.1.1"><p>PE2</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.2"><p>Loopback1</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.3"><p>3.3.3.3/32</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.4"><p>-</p>
</td>
</tr>
<tr><td valign="top" headers="mcps1.4.1.4.4.1.1"><p>PE2</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.2"><p>GE<span>0/1/0</span></p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.3"><p>192.168.1.2/24</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.4"><p>-</p>
</td>
</tr>
<tr><td valign="top" headers="mcps1.4.1.4.4.1.1"><p>CE2</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.2"><p>GE<span>0/2/0</span>.1</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.3"><p>10.1.1.2/24</p>
</td>
<td valign="top" headers="mcps1.4.1.4.4.1.4"><p>-</p>
</td>
</tr>
</table></div>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372586__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure a routing protocol on the backbone network to implement interworking.</p>
</li><li><p>Establish a remote LDP session between the PEs.</p>
</li><li><p>Establish a tunnel for data transmission between the PEs.</p>
</li><li><p>Enable MPLS L2VPN on the PEs.</p>
</li><li><p>Create a VSI on each PE, specify LDP as the signaling protocol, and bind an AC interface to the VSI.</p>
</li><li><p>Configure VSI PW-based broadcast traffic suppression.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372586__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>VSI names and IDs</p>
</li><li><p>Peer IP address and tunnel policy used for establishing the peer relationship</p>
</li><li><p>Interfaces to be bound to the VSIs</p>
</li><li><p>Committed information rate (CIR) for broadcast traffic</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372586__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IGP.</span><p><p>OSPF is used in this example. The configuration details are not provided here.</p>
<p>After the configuration is complete, run the <a href="cmdqueryname=display+ip+routing-table"><b><span class="cmdname">display ip routing-table</span></b></a> command on PE1, the P, and PE2. The command output shows that the devices have learned routes from their peers.</p>
<p>Configure addresses for interfaces on PE1, the P, and PE2, as shown in <a href="#EN-US_TASK_0172372586__fig_dc_ne_traff-supress_cfg_501101">Figure 1</a>. During OSPF configuration, enable the devices to advertise their 32-bit loopback addresses (LSR-IDs).</p>
</p></li><li><span>Configure basic MPLS functions and LDP.</span><p><p>The configuration details are not provided here.</p>
<p>After the configuration is complete, run the <a href="cmdqueryname=display+mpls+ldp+session"><b><span class="cmdname">display mpls ldp session</span></b></a> command on PE1, the P, and PE2. The command output shows that the status of the peer relationship between PE1 and the P and the status of the peer relationship between PE2 and the P are both <strong>Operational</strong>. This means that the peer relationships have been established. To check information about LSP establishment, run the <a href="cmdqueryname=display+mpls+lsp"><b><span class="cmdname">display mpls lsp</span></b></a> command.</p>
</p></li><li><span>Establish a remote LDP session between the PEs.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>mpls ldp remote-peer 3.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls-ldp-remote-3.3.3.3] <strong>remote-ip 3.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls-ldp-remote-3.3.3.3] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>mpls ldp remote-peer 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-mpls-ldp-remote-1.1.1.1] <strong>remote-ip 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-mpls-ldp-remote-1.1.1.1] <strong><span>quit</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
<p>After the configuration is complete, run the <a href="cmdqueryname=display+mpls+ldp+session"><b><span class="cmdname">display mpls ldp session</span></b></a> command on PE1 or PE2. The command output shows that the status of the peer relationship between PE1 and PE2 is <strong>Operational</strong>. This means that the remote peer relationship has been established.</p>
</p></li><li><span>Enable MPLS L2VPN on the PEs.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>mpls l2vpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-l2vpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>mpls l2vpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-l2vpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
</p></li><li><span>Configure a VSI on each PE and configure VSI PW-based traffic suppression.</span><p><p># Configure VSI PW-based broadcast, multicast, and unknown unicast traffic suppression on PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>vsi a2 static</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2] <strong>suppression inbound enable</strong>   </pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2] <strong>pwsignal ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2-ldp] <strong>vsi-id 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2-ldp] <strong>peer 3.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2-ldp] <strong>peer 3.3.3.3 pw 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2-ldp-pw-1] <strong>broadcast-suppression cir 1000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2-ldp-pw-1] <strong>multicast-suppression cir 1000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2-ldp-pw-1] <strong>unknown-unicast-suppression cir 1000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2-ldp-pw-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p># Configure VSI PW-based broadcast, multicast, and unknown unicast traffic suppression on PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>vsi a2 static</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2] <strong>suppression inbound enable</strong>   </pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2] <strong>pwsignal ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2-ldp] <strong>vsi-id 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2-ldp] <strong>peer 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2-ldp] <strong>peer 1.1.1.1 pw 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2-ldp-pw-1] <strong>broadcast-suppression cir 1000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2-ldp-pw-1] <strong>multicast-suppression cir 1000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2-ldp-pw-1] <strong>unknown-unicast-suppression cir 1000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2-ldp-pw-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
</p></li><li><span>Bind interfaces to the VSIs on the PEs.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>interface gigabitethernet<span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>l2 binding vsi a2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>interface gigabitethernet<span>0/2/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/2/0</span>.1] <strong>shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/2/0</span>.1] <strong>vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/2/0</span>.1] <strong>l2 binding vsi a2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/2/0</span>.1] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/2/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
</p></li><li><span>Configure the CEs.</span><p><p># Configure CE1.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>sysname CE1</strong></pre>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong>interface gigabitethernet<span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/0</span>.1] <strong>shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/0</span>.1] <strong>vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/0</span>.1] <strong>ip address 10.1.1.1 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/0</span>.1] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1] <strong>commit</strong></pre>
<p># Configure CE2.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>sysname CE2</strong></pre>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2] <strong>interface gigabitethernet<span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/0</span>.1] <strong>shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/0</span>.1] <strong>vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/0</span>.1] <strong>ip address 10.1.1.2 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/0</span>.1] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>After the configuration is complete, run the <strong>display vsi name a2 verbose</strong> command on PE1. The command output shows that a PW to PE2 has been established for the VSI <strong>a2</strong> and the VSI state is <strong>up</strong>.</p>
<pre class="screen">[PE1] <strong>display vsi name a2 verbose</strong></pre>
<pre class="screen"> ***VSI Name               : a2</pre>
<pre class="screen">    Administrator VSI      : no</pre>
<pre class="screen">    Isolate Spoken         : disable</pre>
<pre class="screen">    VSI Index              : 0</pre>
<pre class="screen">    PW Signaling           : ldp</pre>
<pre class="screen">    Member Discovery Style : static</pre>
<pre class="screen">    PW MAC Learn Style     : unqualify</pre>
<pre class="screen">    Encapsulation Type     : vlan</pre>
<pre class="screen">    MTU                    : 1500</pre>
<pre class="screen">    Diffserv Mode          : uniform</pre>
<pre class="screen">    Service Class          : --</pre>
<pre class="screen">    Color                  : --</pre>
<pre class="screen">    DomainId               : 255</pre>
<pre class="screen">    Domain Name            :</pre>
<pre class="screen">    Ignore AcState         : disable</pre>
<pre class="screen">    Multicast Fast Switch  : disable</pre>
<pre class="screen">    Create Time            : 0 days, 3 hours, 30 minutes, 31 seconds</pre>
<pre class="screen">    VSI State              : <strong>up</strong></pre>
<pre class="screen">    VSI ID                 : 2</pre>
<pre class="screen">   *Peer Router ID         : 3.3.3.3</pre>
<pre class="screen">    primary or secondary   : primary</pre>
<pre class="screen">    ignore-standby-state   : no</pre>
<pre class="screen">    VC Label               : 18</pre>
<pre class="screen">    Peer Type              : dynamic</pre>
<pre class="screen">    Session                : up</pre>
<pre class="screen">    Tunnel ID              : 0x0000000001004c4b82</pre>
<pre class="screen">    Broadcast Tunnel ID    : --</pre>
<pre class="screen">    Broad BackupTunnel ID  : --</pre>
<pre class="screen">    CKey                   : 6</pre>
<pre class="screen">    NKey                   : 5</pre>
<pre class="screen">    StpEnable              : 0 </pre>
<pre class="screen">    PwIndex                : 0</pre>
<pre class="screen">    Interface Name         : GigabitEthernet<span>0/1/0</span>.1</pre>
<pre class="screen">    State                  : up</pre>
<pre class="screen">    Last Up Time           : 2012/10/10 10:14:46</pre>
<pre class="screen">    Total Up Time          : 0 days, 0 hours, 1 minutes, 2 seconds</pre>
<pre class="screen">   **PW Information:</pre>
<pre class="screen">   *Peer Ip Address        : 3.3.3.3</pre>
<pre class="screen">    PW State               : up</pre>
<pre class="screen">    Local VC Label         : 18</pre>
<pre class="screen">    Remote VC Label        : 18</pre>
<pre class="screen">    PW Type                : label</pre>
<pre class="screen">    Tunnel ID              : 0x0000000001004c4b82</pre>
<pre class="screen">    Broadcast Tunnel ID    : --</pre>
<pre class="screen">    Broad BackupTunnel ID  : --</pre>
<pre class="screen">    Ckey                   : 1</pre>
<pre class="screen">    Nkey                   : 1610612838</pre>
<pre class="screen">    Main PW Token          : 0x0</pre>
<pre class="screen">    Slave PW Token         : 0x0 </pre>
<pre class="screen">    Tnl Type               : LdP</pre>
<pre class="screen">    OutInterface           : LDP LSP</pre>
<pre class="screen">    Backup OutInterface    :</pre>
<pre class="screen">    Stp Enable             : 0</pre>
<pre class="screen">    PW Last Up Time        : 2012-10-10 10:15:59</pre>
<pre class="screen">    PW Total Up Time       : 0 days, 0 hours, 1 minutes, 3 seconds</pre>
<p># Check that CE1 (10.1.1.1) can ping CE2 (10.1.1.2).</p>
<pre class="screen">[CE1] <strong>ping 10.1.1.2</strong></pre>
<pre class="screen">  PING 10.1.1.2: 56  data bytes, press CTRL_C to break</pre>
<pre class="screen">    Reply from 10.1.1.2: bytes=56 Sequence=1 ttl=255 time=90 ms</pre>
<pre class="screen">    Reply from 10.1.1.2: bytes=56 Sequence=2 ttl=255 time=77 ms</pre>
<pre class="screen">    Reply from 10.1.1.2: bytes=56 Sequence=3 ttl=255 time=34 ms</pre>
<pre class="screen">    Reply from 10.1.1.2: bytes=56 Sequence=4 ttl=255 time=46 ms</pre>
<pre class="screen">    Reply from 10.1.1.2: bytes=56 Sequence=5 ttl=255 time=94 ms</pre>
<pre class="screen">  --- 10.1.1.2 ping statistics ---</pre>
<pre class="screen">    5 packet(s) transmitted</pre>
<pre class="screen">    5 packet(s) received</pre>
<pre class="screen">    0.00% packet loss</pre>
<pre class="screen">    round-trip min/avg/max = 34/68/94 ms </pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172372586__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>CE1 configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname CE1</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span>.1</pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> vlan-type dot1q 10</pre>
<pre class="screen"> ip address 10.1.1.1 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p>CE2 configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname CE2</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span>.1</pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> vlan-type dot1q 10</pre>
<pre class="screen"> ip address 10.1.1.2 255.255.255.0</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p>PE1 configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname PE1</pre>
<pre class="screen">#</pre>
<pre class="screen">mpls lsr-id 1.1.1.1</pre>
<pre class="screen">#</pre>
<pre class="screen">mpls</pre>
<pre class="screen">#</pre>
<pre class="screen">mpls l2vpn</pre>
<pre class="screen">#</pre>
<pre class="screen">vsi a2 static </pre>
<pre class="screen"> pwsignal ldp </pre>
<pre class="screen">  vsi-id 2    </pre>
<pre class="screen">  peer 3.3.3.3</pre>
<pre class="screen">  peer 3.3.3.3 pw 1</pre>
<pre class="screen">  broadcast-suppression cir 1000</pre>
<pre class="screen">  multicast-suppression cir 1000</pre>
<pre class="screen">  unknown-unicast-suppression cir 1000</pre>
<pre class="screen"> suppression inbound enable   </pre>
<pre class="screen"># </pre>
<pre class="screen">mpls ldp</pre>
<pre class="screen">#</pre>
<pre class="screen"> mpls ldp remote-peer 3.3.3.3</pre>
<pre class="screen"> remote-ip 3.3.3.3</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span>.1</pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> vlan-type dot1q 10</pre>
<pre class="screen"> l2 binding vsi a2</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.16.1.1 255.255.255.0</pre>
<pre class="screen"> mpls</pre>
<pre class="screen"> mpls ldp</pre>
<pre class="screen">#</pre>
<pre class="screen">interface LoopBack1</pre>
<pre class="screen"> ip address 1.1.1.1 255.255.255.255</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 1.1.1.1 0.0.0.0</pre>
<pre class="screen">  network 172.16.1.0 0.0.0.255</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p>P configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname P</pre>
<pre class="screen">#</pre>
<pre class="screen">mpls lsr-id 2.2.2.2</pre>
<pre class="screen">#</pre>
<pre class="screen">mpls</pre>
<pre class="screen">#</pre>
<pre class="screen">mpls ldp</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 172.16.1.2 255.255.255.0</pre>
<pre class="screen"> mpls</pre>
<pre class="screen"> mpls ldp</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.1.1 255.255.255.0</pre>
<pre class="screen"> mpls</pre>
<pre class="screen"> mpls ldp</pre>
<pre class="screen">#</pre>
<pre class="screen">interface LoopBack1</pre>
<pre class="screen"> ip address 2.2.2.2 255.255.255.255</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 172.16.1.0 0.0.0.255</pre>
<pre class="screen">  network 192.168.1.0 0.0.0.255</pre>
<pre class="screen">  network 2.2.2.2 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p>PE2 configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname PE2</pre>
<pre class="screen">#</pre>
<pre class="screen">mpls lsr-id 3.3.3.3</pre>
<pre class="screen">#</pre>
<pre class="screen">mpls</pre>
<pre class="screen">#</pre>
<pre class="screen"> mpls l2vpn</pre>
<pre class="screen">#</pre>
<pre class="screen">vsi a2 static  </pre>
<pre class="screen"> pwsignal ldp  </pre>
<pre class="screen">  vsi-id 2     </pre>
<pre class="screen">  peer 1.1.1.1 </pre>
<pre class="screen">  peer 1.1.1.1 pw 1</pre>
<pre class="screen">  broadcast-suppression cir 1000</pre>
<pre class="screen">  multicast-suppression cir 1000</pre>
<pre class="screen">  unknown-unicast-suppression cir 1000</pre>
<pre class="screen"> suppression inbound enable   </pre>
<pre class="screen"># </pre>
<pre class="screen">mpls ldp</pre>
<pre class="screen">#</pre>
<pre class="screen"> mpls ldp remote-peer 1.1.1.1</pre>
<pre class="screen"> remote-ip 1.1.1.1</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.1.2 255.255.255.0</pre>
<pre class="screen"> mpls</pre>
<pre class="screen"> mpls ldp</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span>.1</pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> vlan-type dot1q 10</pre>
<pre class="screen"> l2 binding vsi a2</pre>
<pre class="screen">#</pre>
<pre class="screen">interface LoopBack1</pre>
<pre class="screen"> ip address 3.3.3.3 255.255.255.255</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 3.3.3.3 0.0.0.0</pre>
<pre class="screen">  network 192.168.1.0 0.0.0.255</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_traff-supress_cfg_5009.html">Configuration Examples for Layer 2 Traffic Suppression
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_traff-supress_cfg_5010.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>