
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring CMP Sessions">
<meta name="abstract" content="To configure a CMP session, specify an RSA key pair, a CA server name, and PKI entity information used to obtain a certificate using CMPv2.">
<meta name="description" content="To configure a CMP session, specify an RSA key pair, a CA server name, and PKI entity information used to obtain a certificate using CMPv2.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_cmp_0001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pki_cfg_0005a.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_cmp_0004.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="featurename" content="PKI">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="z00485179">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372534">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring CMP Sessions</title>
</head>
<body><a name="EN-US_TASK_0172372534"></a><a name="EN-US_TASK_0172372534"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring CMP Sessions</h1>
<div class="taskbody"><p>To configure a CMP session, specify an RSA key pair, a CA server name, and PKI entity information used to obtain a certificate using CMPv2.</p>
<div class="context"><a name="EN-US_TASK_0172372534__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If you run the <a href="cmdqueryname=authentication-method+rsassa-pss"><b><span class="cmdname">authentication-method</span></b></a> <strong><span>rsassa-pss</span></strong> { <strong>sha2-256</strong> | <strong>sha2-384</strong> }command to use certificates for identity authentication, configure a mode for obtaining certificates.</p>
<p>If CMP is used to obtain and manage certificates, the <span class="keyword">NE40E</span> and CA server establish a CMP session to exchange the information required for generating certificates. Before a CMP session is established, ensure that the <span class="keyword">NE40E</span> has the following information to establish the CMP session:</p>
<ul><li>PKI entity</li><li>Key pair</li><li>Name of the CA server that establishes a CMP session with the <span class="keyword">NE40E</span></li><li>Certificate for proving the identity of the <span class="keyword">NE40E</span></li><li>URL of the CMP server that receives CMP requests</li></ul>
<p>Each digital certificate has a validity period. To ensure service availability, apply for a new certificate before the existing certificate expires. However, manual update may leave certain certificates not updated. The <span class="keyword">NE40E</span> supports automatic certificate update. When the system detects that the configured automatic certificate update time expires, the system automatically sends a certificate update request to the CMPv2 server. The new certificate overrides the certificate file in the CF card, configuration used in IKE negotiation, and certificate in the memory.</p>
<p>Perform the following steps on the <span class="keyword">NE40E</span> that needs to obtain a certificate in CMP mode:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372534__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=pki+domain"><b><span class="cmdname">pki domain</span></b></a> <i><span class="varname">domain-name</span></i></span><p><p>A PKI domain is created, and the PKI domain name configuration view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=pki+cmp+session"><b><span class="cmdname">pki cmp session</span></b></a> <i><span class="varname">session-name</span></i></span><p><p>A CMP session is created, and the PKI CMP session view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=cmp+request+entity"><b><span class="cmdname">cmp request entity</span></b></a> <i><span class="varname">entity-name</span></i></span><p><p>A PKI entity is specified to initiate CMP requests.</p>
</p></li><li><span>Run <a href="cmdqueryname=cmp+request+rsa+local-key-pair+regenerate"><b><span class="cmdname">cmp request rsa local-key-pair</span></b></a> <i><span class="varname">key-pair-name</span></i> [ <strong><span>regenerate</span></strong> [ <i><span class="varname">key-bit</span></i> ] ]</span><p><p>A local RSA key pair to be used by CMP requests is specified.</p>
</p></li><li><p><div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>An RSA key pair can be referenced by only one CMP session or PKI domain.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=cmp+request+ca-name"><b><span class="cmdname">cmp request ca-name</span></b></a> <i><span class="varname">ca-name</span></i></span><p><p>A CA server is specified by its name to receive CMP requests.</p>
</p></li><li><span>Run <a href="cmdqueryname=cmp+request+authentication-cert"><b><span class="cmdname">cmp request authentication-cert</span></b></a> <i><span class="varname">cert-name</span></i></span><p><p>A certificate to be carried in a CMP request for identity authentication is configured.</p>
</p></li><li><span>Run <a href="cmdqueryname=cmp+request+server+url"><b><span class="cmdname">cmp request server url</span></b></a> <i><span class="varname">url-address</span></i></span><p><p>A URL is specified for the CMP server used to process CMP requests.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=cmp+source+interface"><b><span class="cmdname">cmp source interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The source interface of CMPv2 packets is configured. To be specific, the IP address of the configured source interface is used as the source IP address of the CMPv2 packets sent from the device to the CMPv2 server.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_cmp_0001.html">Configuring CMPv2-based Certificate Application
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pki_cfg_0005a.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_cmp_0004.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>