
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Host CAR">
<meta name="abstract" content="You can configure host CAR to control the rate at which packets are sent to the CPU.">
<meta name="description" content="You can configure host CAR to control the rate at which packets are sent to the CPU.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_sysattack_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_sysattack_cfg_0052.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_sysattack_cfg_0054.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="l00455378,z00805567,sysattack_ne,w00606909,h00522387,w00800033,y00852169">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="featurename" content="Local Attack Defense">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="z00485179">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372238">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Host CAR</title>
</head>
<body><a name="EN-US_TASK_0172372238"></a><a name="EN-US_TASK_0172372238"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Host CAR</h1>
<div class="taskbody"><p>You can configure host CAR to control the rate at which packets are sent to the CPU.</p>
<div class="context"><a name="EN-US_TASK_0172372238__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><div class="p">The system defines a default bandwidth for user-side packets to be sent to the CPU. You can configure host CAR to enable the system to adjust the traffic rate in either of the following scenarios:<ul><li>Excessive user-side packets are sent to the CPU, congesting the links and reducing the CPU efficiency.</li><li>Some user-side packets to be sent to the CPU are dropped due to tight rate limits.</li></ul>
</div>
<p>In VS mode, this feature is supported only by the admin VS.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372238__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>None</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372238__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>To protect against packet attacks, a device implements three levels of CAR: host CAR/HTTP Host CAR, VLAN Host CAR, and CP CAR. For details about CP CAR configurations, see <a href="dc_ne_sysattack_cfg_0017.html">Configuring the CAR</a>.</p>
<ul><li><p>Host CAR is implemented based on the source MAC addresses, source IP addresses, or Session IDs carried in PPPoE, DHCP, L2TP, and DHCPv6 packets, IP packets for triggering user access, and ARP packets for triggering user access. HTTP Host CAR is implemented based on the source MAC addresses and source IP addresses carried in web packets. Both host CAR and HTTP Host CAR limit the number of packets to be sent to the CPU from the same host. Therefore, host CAR and HTTP Host CAR are on the same level.</p>
</li><li><p>VLAN Host CAR limits the number of user packets sent to the CPU from hosts in the same VLAN based on the VLAN ID. After VLAN Host CAR is enabled, the device limits the rate at which packets are sent to the CPU from hosts in the same VLAN.</p>
</li><li><p>CP CAR is implemented based on user access modes to limit the number of packets to be sent to the CPU from hosts that access the network in the same mode (for example, PPPoE/DHCP) in a specified period.</p>
</li></ul>
<p>Perform the following steps to configure host CAR.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372238__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=slot"><b><span class="cmdname">slot</span></b></a> <i><span class="varname">slot-id</span></i></span></span><p><p>The slot view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=hostcar+cir+pir+cbs+pbs"><b><span class="cmdname">hostcar</span></b></a> <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i> [ <strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i> ] [ <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i> <strong><span>pbs</span></strong> <i><span class="varname">pbs-value</span></i> ]</span></span><p><p>Host CAR is configured.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=hostcar+drop-rate+enable"><b><span class="cmdname">hostcar drop-rate enable</span></b></a></span></span><p><p>Automatic bandwidth adjustment is enabled.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=hostcar+attack-detect+drop-rate"><b><span class="cmdname">hostcar attack-detect drop-rate</span></b></a> <i><span class="varname">rate-value</span></i></span></span><p><p>The attack detection threshold for the rate at which packets are dropped by host CAR is configured. After the threshold is exceeded, attack detection is started.</p>
</p></li><li><span>Run <a href="cmdqueryname=hostcar+logging+interval+discard-threshold"><b><span class="cmdname">hostcar logging</span></b></a> { <strong><span>interval</span></strong> <i><span class="varname">interval-value</span></i> | <strong><span>discard-threshold</span></strong> <i><span class="varname">threshold-value</span></i> }<sup>*</sup></span><p><p>Parameters are configured for host CAR logging.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=http-hostcar+cir+pir+cbs+pbs"><b><span class="cmdname">http-hostcar</span></b></a> <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i> [ <strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i> ] [ <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i> <strong><span>pbs</span></strong> <i><span class="varname">pbs-value</span></i> ]</span></span><p><p>HTTP Host CAR is configured for web packets to be sent to the CPU.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=http-hostcar+drop-rate+enable"><b><span class="cmdname">http-hostcar drop-rate enable</span></b></a></span></span><p><p>HTTP Host CAR automatic bandwidth adjustment is enabled for web packets.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=http-hostcar+attack-detect+drop-rate"><b><span class="cmdname">http-hostcar attack-detect drop-rate</span></b></a> <i><span class="varname">rate-value</span></i></span></span><p><p>The threshold for the rate at which packets are dropped by HTTP-Host-CAR is configured.</p>
</p></li><li><span>Run <a href="cmdqueryname=http-hostcar+logging+interval+discard-threshold"><b><span class="cmdname">http-hostcar logging</span></b></a> { <strong><span>interval</span></strong> <i><span class="varname">interval-value</span></i> | <strong><span>discard-threshold</span></strong> <i><span class="varname">threshold-value</span></i> }<sup>*</sup></span><p><p>Parameters are configured for HTTP Host CAR logging.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=vlan-host-car+cir+pir+cbs+pbs"><b><span class="cmdname">vlan-host-car</span></b></a> <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i> [ <strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i> ] [ <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i> <strong><span>pbs</span></strong> <i><span class="varname">pbs-value</span></i> ]</span></span><p><p>VLAN Host CAR is configured.</p>
<p>VLAN Host CAR limits the bandwidth of the user-side packets to be sent to the CPU from hosts in the same VLAN.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=vlan-host-car+drop-rate+enable"><b><span class="cmdname">vlan-host-car drop-rate enable</span></b></a></span></span><p><p>VLAN Host CAR automatic bandwidth adjustment is enabled.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=vlan-host-car+attack-detect+drop-rate"><b><span class="cmdname">vlan-host-car attack-detect drop-rate</span></b></a> <i><span class="varname">rate-value</span></i></span></span><p><p>The threshold for the rate at which packets are dropped by VLAN-Host-CAR is configured.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=vlan-host-car+logging+interval+discard-threshold"><b><span class="cmdname">vlan-host-car logging</span></b></a> { <strong><span>interval</span></strong> <i><span class="varname">interval-value</span></i> | <strong><span>discard-threshold</span></strong> <i><span class="varname">threshold-value</span></i> }<sup>*</sup></span></span><p><p>Parameters are configured for VLAN Host CAR logging.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=ignore-hostcar+ipv6+acl+name"><b><span class="cmdname">ignore-hostcar</span></b></a> [ <strong><span>ipv6</span></strong> ] <strong><span>acl</span></strong> { <i><span class="varname">aclnum</span></i> | <strong><span>name</span></strong> <i><span class="varname">aclname</span></i> }</span></span><p><p>Host CAR and VLAN-Host-CAR do not apply to packets matching the ACL rule.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The GE or trunk interface view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172372238__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Checking the Configurations</h4><p>After configuring host CAR, check the configurations.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+cpu-defend+hostcar+vlan-host-car+http-hostcar+config"><b><span class="cmdname">display cpu-defend</span></b></a> { <strong><span>hostcar</span></strong> | <strong><span>vlan-host-car</span></strong> | <strong><span>http-hostcar</span></strong> } <strong><span>config</span></strong> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> command to check the default and actual rate limiting parameters configured for packets to be sent to the CPU.</p>
</li><li><p>Run the <a href="cmdqueryname=display+cpu-defend+hostcar+all+auto-adjust+dropped+non-dropped"><b><span class="cmdname">display cpu-defend hostcar</span></b></a> { <i><span class="varname">carid</span></i> | <strong><span>all</span></strong> | <strong><span>auto-adjust </span></strong>| <strong><span>dropped</span></strong> | <strong><span>non-dropped</span></strong> } <strong><span>statistics</span></strong> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> command to check host CAR statistics.</p>
</li><li><p>Run the <a href="cmdqueryname=display+cpu-defend+http-hostcar+all+auto-adjust+dropped"><b><span class="cmdname">display cpu-defend http-hostcar</span></b></a> { <i><span class="varname">carid</span></i> | <strong><span>all</span></strong> | <strong><span>auto-adjust </span></strong>| <strong><span>dropped</span></strong> | <strong><span>non-dropped</span></strong> } <strong><span>statistics</span></strong> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> command to check HTTP Host CAR statistics.</p>
</li><li><p>Run the <a href="cmdqueryname=display+cpu-defend+vlan-host-car+all+auto-adjust+dropped"><b><span class="cmdname">display cpu-defend vlan-host-car</span></b></a> { <i><span class="varname">carid</span></i> | <strong><span>all</span></strong> | <strong><span>auto-adjust </span></strong>| <strong><span>dropped</span></strong> | <strong><span>non-dropped</span></strong> } <strong><span>statistics</span></strong> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> command to check VLAN Host CAR statistics.</p>
</li><li><p>Run the <a href="cmdqueryname=display+cpu-defend+hostcar+access-user-info+slot"><b><span class="cmdname">display cpu-defend hostcar</span></b></a> <i><span class="varname">car-id</span></i> <strong><span>access-user-info</span></strong> <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> command to check statistics about a specified host CAR and the information about access users limited by the host CAR, such as MAC addresses, IP addresses, and online status.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_sysattack_cfg_0000.html">Local Attack Defense Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_sysattack_cfg_0052.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_sysattack_cfg_0054.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>