
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Dynamic BGP IPv6 Flow Specification">
<meta name="abstract" content="Dynamic BGP IPv6 Flow Specification uses a traffic analysis server to generate BGP IPv6 Flow Specification routes to control traffic.">
<meta name="description" content="Dynamic BGP IPv6 Flow Specification uses a traffic analysis server to generate BGP IPv6 Flow Specification routes to control traffic.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_flowspec_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_flowspec_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_flowspec_cfg_0006.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00800033,flow-specificationvrp,w00556928,w00606909,l00455378,z00805567">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP Flow Specfication">
<meta name="featuretype" content="Security">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP Flow Specfication">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="h00522387">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372346">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Dynamic BGP IPv6 Flow Specification</title>
</head>
<body><a name="EN-US_TASK_0172372346"></a><a name="EN-US_TASK_0172372346"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Dynamic BGP IPv6 Flow Specification</h1>
<div class="taskbody"><p>Dynamic BGP IPv6 Flow Specification uses a traffic analysis server to generate BGP IPv6 Flow Specification routes to control traffic.</p>
<div class="context"><a name="EN-US_TASK_0172372346__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>Before deploying dynamic BGP IPv6 Flow Specification, you need to establish a BGP IPv6 Flow Specification peer relationship between the traffic analysis server and each ingress of the network to transmit BGP IPv6 Flow Specification routes.</p>
<p>In an AS with multiple ingresses, a BGP IPv6 Flow route reflector (Flow RR) can be deployed to reduce the number of BGP IPv6 Flow Specification peer relationships and save network resources.</p>
<p>If you want to filter traffic based on the address prefix but the BGP IPv6 Flow Specification route carrying the filtering rule cannot pass validation, disable the validation of BGP IPv6 Flow Specification routes received from a specified peer.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372346__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring the dynamic BGP IPv6 Flow Specification function, complete the following task:</p>
<ul><li><a href="dc_vrp_bgp6_cfg_0005.html">Configure a BGP4+ peer</a> or <a href="dc_vrp_bgp_cfg_3006.html">configure a BGP peer</a>.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372346__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Establish a BGP IPv6 Flow Specification peer relationship.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv6-family+flow"><b><span class="cmdname">ipv6-family flow</span></b></a></span></span><p><p>The BGP-IPv6-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=peer+enable"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">ipv6-address</span></i> } <strong><span>enable</span></strong></span></span><p><p>A BGP IPv6 Flow Specification peer relationship is established.</p>
</p><p><p>After the peer relationship is established in the BGP-IPv6-Flow address family view, the BGP IPv6 Flow Specification route generated by the traffic analysis server is imported automatically to the BGP routing table and then sent to the peer.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure a Flow RR.</span><p><p>Before configuring a Flow RR, establish a BGP IPv6 Flow Specification peer relationship between the Flow RR and traffic analysis server and between the Flow RR and every network ingress.</p>
</p><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv6-family+flow"><b><span class="cmdname">ipv6-family flow</span></b></a></span></span><p><p>The BGP-IPv6-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+reflect-client"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">ipv6-address</span></i> } <strong><span>reflect-client</span></strong></span><p><p>An IPv6 Flow RR is configured, and clients are specified for it.</p>
</p><p><p>The <span class="keyword">Router</span> on which the <a href="cmdqueryname=peer+reflect-client"><b><span class="cmdname">peer reflect-client</span></b></a> command is run functions as a Flow RR, and the network ingress and traffic analysis server function as clients.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=undo+reflect+between-clients"><b><span class="cmdname">undo reflect between-clients</span></b></a></span><p><p>Route reflection between clients through the RR is disabled.</p>
</p><p><p>If the clients of a Flow RR are fully meshed, you can run the <a href="cmdqueryname=undo+reflect+between-clients"><b><span class="cmdname">undo reflect between-clients</span></b></a> command on the Flow RR to disable route reflection between clients through the RR, which reduces costs.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=reflector+cluster-id"><b><span class="cmdname">reflector cluster-id</span></b></a> { <i><span class="varname">cluster-id-value</span></i> | <i><span class="varname">cluster-id-ipv4</span></i> }</span><p><p>A cluster ID is configured for the Flow RR.</p>
</p><p><p>If a cluster has multiple flow RRs, run this command to set the same <i><span class="varname">cluster-id</span></i> for these RRs.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=reflector+cluster-id"><b><span class="cmdname">reflector cluster-id</span></b></a> command applies only to RRs.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Disable BGP IPv6 Flow Specification route validation.</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv6-family+flow"><b><span class="cmdname">ipv6-family flow</span></b></a></span></span><p><p>The BGP-IPv6-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=peer+validation-disable"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">ipv6-address</span></i> } <strong><span>validation-disable</span></strong></span></span><p><p>The validation of BGP IPv6 Flow Specification routes received from a specified peer is disabled.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) <span>Enable CAR statistics collection and packet loss statistics collection for BGP Flow Specification.</span></span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=flowspec+statistic+enable"><b><span class="cmdname">flowspec statistic enable</span></b></a></span><p><p>CAR statistics collection and packet loss statistics collection for BGP Flow Specification are enabled.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Disable BGP Flow Specification on the interface.</span><ol type="a" id="EN-US_TASK_0172372346__en-us_task_0172372345_substeps1763623200214101"><li class="substepexpand" id="EN-US_TASK_0172372346__en-us_task_0172372345_substep1816712982214101"><span id="EN-US_TASK_0172372346__en-us_task_0172372345_cmd572595428214101">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372346__en-us_task_0172372345_cmdname214768980214101">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372346__en-us_task_0172372345_p145112487413">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372346__en-us_task_0172372345_substep21613653214101"><span id="EN-US_TASK_0172372346__en-us_task_0172372345_cmd335929628214101">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172372346__en-us_task_0172372345_cmdname512983692214101">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372346__en-us_task_0172372345_varname20655823164018">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172372346__en-us_task_0172372345_varname17655132312405">interface-number</span></i></span><p><p id="EN-US_TASK_0172372346__en-us_task_0172372345_p47444616411">The interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372346__en-us_task_0172372345_substep1387054464214101"><span id="EN-US_TASK_0172372346__en-us_task_0172372345_cmd1289388263214101">Run <a href="cmdqueryname=flowspec+disable+ipv4+ipv6"><b><span class="cmdname" id="EN-US_TASK_0172372346__en-us_task_0172372345_cmdname371040327214101">flowspec disable</span></b></a> [ <strong><span id="EN-US_TASK_0172372346__en-us_task_0172372345_cmdparmname6175123111117">ipv4</span></strong> | <strong><span id="EN-US_TASK_0172372346__en-us_task_0172372345_cmdparmname918112317118">ipv6</span></strong> ]</span><p><p id="EN-US_TASK_0172372346__en-us_task_0172372345_p1516583017294">BGP Flow Specification is disabled on the interface.</p>
</p><p><div class="note" id="EN-US_TASK_0172372346__en-us_task_0172372345_note508989688214101"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172372346__en-us_task_0172372345_p1162320215214101">This command cannot be configured on Eth-Trunk member interfaces. The configuration on a main interface also takes effect on its sub-interfaces.</p>
<p id="EN-US_TASK_0172372346__en-us_task_0172372345_p833412971216">If BGP Flow Specification does not need to be disabled on a sub-interface, run the <a href="cmdqueryname=flowspec+disable+ipv4+ipv6+sub-port-exclude"><b><span class="cmdname" id="EN-US_TASK_0172372346__en-us_task_0172372345_cmdname123591436201813">flowspec disable</span></b></a> [ <strong><span id="EN-US_TASK_0172372346__en-us_task_0172372345_cmdparmname987442181810">ipv4</span></strong> | <strong><span id="EN-US_TASK_0172372346__en-us_task_0172372345_cmdparmname1913210518186">ipv6</span></strong> ] <strong><span id="EN-US_TASK_0172372346__en-us_task_0172372345_cmdparmname17662165691816">sub-port-exclude</span></strong> command on the main interface to which the sub-interface belongs.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372346__en-us_task_0172372345_substep1178700715214101"><span id="EN-US_TASK_0172372346__en-us_task_0172372345_cmd2033757077214101">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372346__en-us_task_0172372345_cmdname1136214344214101">commit</span></b></a></span><p><p id="EN-US_TASK_0172372346__en-us_task_0172372345_p7953191115413">The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Disable BGP Flow Specification protection.</span><ol type="a" id="EN-US_TASK_0172372346__en-us_task_0172372344_substeps178887814913"><li class="substepexpand" id="EN-US_TASK_0172372346__en-us_task_0172372344_substep118881485918"><span id="EN-US_TASK_0172372346__en-us_task_0172372344_cmd138883817910">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372346__en-us_task_0172372344_cmdname039174221019">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372346__en-us_task_0172372344_p13702181014128">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372346__en-us_task_0172372344_substep8971201512920"><span id="EN-US_TASK_0172372346__en-us_task_0172372344_cmd097114152918">Run <a href="cmdqueryname=flowspec+protocol-protect+ipv4+ipv6+disable"><b><span class="cmdname" id="EN-US_TASK_0172372346__en-us_task_0172372344_cmdname67791726161015">flowspec protocol-protect</span></b></a> { <strong><span id="EN-US_TASK_0172372346__en-us_task_0172372344_cmdparmname1422011399114">ipv4</span></strong> | <strong><span id="EN-US_TASK_0172372346__en-us_task_0172372344_cmdparmname115531043131114">ipv6</span></strong> } <strong><span id="EN-US_TASK_0172372346__en-us_task_0172372344_cmdparmname78091349181114">disable</span></strong></span><p><p id="EN-US_TASK_0172372346__en-us_task_0172372344_p12278122114127">BGP Flow Specification protection is disabled.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372346__en-us_task_0172372344_substep139391326123"><span id="EN-US_TASK_0172372346__en-us_task_0172372344_cmd1693913211215">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372346__en-us_task_0172372344_cmdname4151640101214">commit</span></b></a></span><p><p id="EN-US_TASK_0172372346__en-us_task_0172372344_p1855253571220">The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure the device to redirect traffic to a specified IPv6 next hop after receiving a BGP IPv6 Flow Specification route from a peer.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv6-family+flow"><b><span class="cmdname">ipv6-family flow</span></b></a></span><p><p>The BGP-IPv6-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+redirect+ipv6+recursive-lookup+ip"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">ipv6-address</span></i> } <strong><span>redirect ipv6 recursive-lookup ip</span></strong></span><p><p>The device is configured to redirect traffic to a specified IPv6 next hop after receiving a BGP IPv6 Flow Specification route from a peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure the device to recurse the BGP IPv6 Flow Specification routes received from a peer to a tunnel.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv6-family+flow"><b><span class="cmdname">ipv6-family flow</span></b></a></span><p><p>The BGP-IPv6-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+redirect+ipv6+recursive-lookup+tunnel+tunnel-selector"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">ipv6-address</span></i> } <strong><span>redirect ipv6 recursive-lookup tunnel</span></strong> <strong><span>tunnel-selector</span></strong> <i><span class="varname">tunnel-selector-name</span></i></span><p><p>The device is allowed to recurse the BGP IPv6 Flow Specification routes received from a peer to a tunnel.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Disable the device from validating the redirection next-hop attribute carried in the routes that are received from an EBGP peer.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv6-family+flow"><b><span class="cmdname">ipv6-family flow</span></b></a></span><p><p>The BGP-IPv6-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer+redirect+ipv6+validation-disable"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">ipv6-address</span></i> } <strong><span>redirect ipv6 validation-disable</span></strong></span><p><p>The device is disabled from validating the redirection next-hop attribute carried in the routes that are received from an EBGP peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Enable the route policy distribution (RPD) capability for a BGP peer to support the BGP Flow Specification routes carrying the RPD attribute and delivered by the controller to forwarders.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv6-family+flow"><b><span class="cmdname">ipv6-family flow</span></b></a></span><p><p>The BGP-IPv6-Flow address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <strong>peer </strong><em>peerIPv6Addr </em><strong>capability-advertise </strong><strong>route-policy-distribute </strong><strong>receive</strong></span><p><p>The RPD capability is enabled for the BGP peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172372346__step13123193812129"><span id="EN-US_TASK_0172372346__cmd10123153871218">(Optional) Enable the DSCP-based BGP IPv6 Flow Specification traffic filtering rule.</span><ol type="a" id="EN-US_TASK_0172372346__substeps195639422140"><li class="substepexpand" id="EN-US_TASK_0172372346__substep165631942191417"><span id="EN-US_TASK_0172372346__cmd756310429148">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372346__cmdname5413124714141">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372346__p126050533589">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372346__substep92941850101419"><span id="EN-US_TASK_0172372346__cmd12941050101412">Run <a href="cmdqueryname=flowspec+allow+ipv6+dscp"><b><span class="cmdname" id="EN-US_TASK_0172372346__cmdname13169189101514">flowspec allow ipv6 dscp</span></b></a></span><p><p id="EN-US_TASK_0172372346__p43601249164115">The DSCP-based BGP IPv6 Flow Specification traffic filtering rule is enabled.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372346__substep12814439157"><span id="EN-US_TASK_0172372346__cmd62811943191514">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372346__cmdname9864512158">commit</span></b></a></span><p><p id="EN-US_TASK_0172372346__p1712017418592">The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Enable BGP Flow Specification to match inner packet information about the packets that leave an SRv6 TE Policy or SRv6 BE egress.</span><ol type="a" id="EN-US_TASK_0172372346__en-us_task_0172372344_substeps195639422140"><li class="substepexpand" id="EN-US_TASK_0172372346__en-us_task_0172372344_substep165631942191417"><span id="EN-US_TASK_0172372346__en-us_task_0172372344_cmd756310429148">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372346__en-us_task_0172372344_cmdname5413124714141">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372346__en-us_task_0172372344_p1188315171473">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372346__en-us_task_0172372344_substep92941850101419"><span id="EN-US_TASK_0172372346__en-us_task_0172372344_cmd12941050101412">Run <a href="cmdqueryname=flowspec+match+srv6-inner-ip+enable"><b><span class="cmdname" id="EN-US_TASK_0172372346__en-us_task_0172372344_cmdname655163675120">flowspec match srv6-inner-ip enable</span></b></a></span><p><p id="EN-US_TASK_0172372346__en-us_task_0172372344_p17382527114711">BGP Flow Specification is enabled to match inner packet information about the packets that leave an SRv6 TE Policy or SRv6 BE egress.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372346__en-us_task_0172372344_substep12814439157"><span id="EN-US_TASK_0172372346__en-us_task_0172372344_cmd62811943191514">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372346__en-us_task_0172372344_cmdname9864512158">commit</span></b></a></span><p><p id="EN-US_TASK_0172372346__en-us_task_0172372344_p4321538134715">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172372346__step06265188412"><span id="EN-US_TASK_0172372346__cmd8626141815412">(Optional) Enable BGP IPv6 Flow Specification to match the internal protocol number in the header of an IPv6 fragment.</span><ol type="a" id="EN-US_TASK_0172372346__substeps89718513453"><li class="substepexpand" id="EN-US_TASK_0172372346__substep9971165194514"><span id="EN-US_TASK_0172372346__cmd497114519457">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372346__cmdname15807351194511">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372346__p011318546216">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372346__substep175041028154511"><span id="EN-US_TASK_0172372346__cmd75041728164514">Run <a href="cmdqueryname=flowspec+match+ipv6+fragment-inner-protocol+enable"><b><span class="cmdname" id="EN-US_TASK_0172372346__cmdname326618479459">flowspec match ipv6 fragment-inner-protocol enable</span></b></a></span><p><p id="EN-US_TASK_0172372346__p368402430">BGP IPv6 Flow Specification is enabled to match the internal protocol number in the header of an IPv6 fragment.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172372346__substep17371163619451"><span id="EN-US_TASK_0172372346__cmd437103617455">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372346__cmdname15471656194510">commit</span></b></a></span><p><p id="EN-US_TASK_0172372346__p12727101316320">The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172372346__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After the configuration is complete, verify the configuration.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+bgp+flow+ipv6+peer"><b><span class="cmdname">display bgp flow ipv6 peer</span></b></a> command to check information about BGP IPv6 Flow Specification peers.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+flow+ipv6+routing-table"><b><span class="cmdname">display bgp flow ipv6 routing-table</span></b></a> command to check information about BGP IPv6 Flow Specification routes.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+flow+ipv6+routing-table"><b><span class="cmdname">display bgp flow ipv6 routing-table</span></b></a> <a href="cmdqueryname=statistics"><b><span class="cmdname">statistics</span></b></a> command to check statistics about BGP IPv6 Flow Specification routes.</p>
</li><li id="EN-US_TASK_0172372346__li10721503143">Run the <a href="cmdqueryname=display+flowspec+ipv6+rule+slot"><b><span class="cmdname" id="EN-US_TASK_0172372346__cmdname75021755191414">display flowspec</span></b></a> <strong><span id="EN-US_TASK_0172372346__cmdparmname20589133315289">ipv6</span></strong> <strong><span id="EN-US_TASK_0172372346__cmdparmname322314521514">rule</span></strong> <i><span class="varname" id="EN-US_TASK_0172372346__varname12472151218155">reindex-value</span></i> <strong><span id="EN-US_TASK_0172372346__cmdparmname143651917111514">slot</span></strong> <i><span class="varname" id="EN-US_TASK_0172372346__varname033592413157">slot-id</span></i> command to check information about combined rules in the BGP IPv6 Flow Specification route rule table.</li><li id="EN-US_TASK_0172372346__li39703527165">Run the <a href="cmdqueryname=display+flowspec+ipv6+rule+statistics+slot"><b><span class="cmdname" id="EN-US_TASK_0172372346__cmdname5910711181816">display flowspec</span></b></a> <strong><span id="EN-US_TASK_0172372346__cmdparmname777851114298">ipv6</span></strong> <strong><span id="EN-US_TASK_0172372346__cmdparmname162965181181">rule statistics slot</span></strong> <i><span class="varname" id="EN-US_TASK_0172372346__varname9665522191819">slot-id</span></i> command to check statistics about the rules for BGP IPv6 Flow Specification routes to take effect.</li><li>Run the <a href="cmdqueryname=display+flowspec+resource+rule+ipv4+ipv6+slot"><b><span class="cmdname" id="EN-US_TASK_0172372346__en-us_task_0172372344_cmdname1599317291274">display flowspec resource rule</span></b></a> { <strong><span id="EN-US_TASK_0172372346__en-us_task_0172372344_cmdparmname1563703542718">ipv4</span></strong> | <strong><span id="EN-US_TASK_0172372346__en-us_task_0172372344_cmdparmname5358140192714">ipv6</span></strong> } [ <strong><span id="EN-US_TASK_0172372346__en-us_task_0172372344_cmdparmname1515184619272">slot</span></strong> <i><span class="varname" id="EN-US_TASK_0172372346__en-us_task_0172372344_varname057105116271">slot-id</span></i> ] command to check the resource usage information about BGP Flow Specification route rules.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_flowspec_cfg_0000.html">BGP Flow Specification Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_flowspec_cfg_0003.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_flowspec_cfg_0006.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>