
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Establishing an IPsec Tunnel in IPsec Policy Template Mode">
<meta name="abstract" content="A major application of the NE40E is to establish an IPsec tunnel between it and a base station so that mobile devices camping on the base station can access an internal network. Using the IPsec policy template mode, you can configure IPsec tunnels for multiple base stations and conveniently add or delete base stations. An IPsec policy template needs to be configured on the NE40E to passively receive connection requests, and IPsec policies need to be configured on the base stations to initiate such requests.">
<meta name="description" content="A major application of the NE40E is to establish an IPsec tunnel between it and a base station so that mobile devices camping on the base station can access an internal network. Using the IPsec policy template mode, you can configure IPsec tunnels for multiple base stations and conveniently add or delete base stations. An IPsec policy template needs to be configured on the NE40E to passively receive connection requests, and IPsec policies need to be configured on the base stations to initiate such requests.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0039.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_0032.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0028.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="featurename" content="IPSec">
<meta name="featuretype" content="Security">
<meta name="OWNER" content="z00485179">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372459">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/thickbox.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/imageResize.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-migrate-1.2.1.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-ui.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.mousewheel.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/thickbox.js"></script>
<title>Example for Establishing an IPsec Tunnel in IPsec Policy Template Mode</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172372459"></a><a name="EN-US_TASK_0172372459"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Establishing an IPsec Tunnel in IPsec Policy Template Mode</h1>
<div class="taskbody"><p>A major application of the <span class="keyword">NE40E</span> is to establish an IPsec tunnel between it and a base station so that mobile devices camping on the base station can access an internal network. Using the IPsec policy template mode, you can configure IPsec tunnels for multiple base stations and conveniently add or delete base stations. An IPsec policy template needs to be configured on the <span class="keyword">NE40E</span> to passively receive connection requests, and IPsec policies need to be configured on the base stations to initiate such requests.</p>
<div class="context"><a name="EN-US_TASK_0172372459__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As shown in <a href="#EN-US_TASK_0172372459__fig1">Figure 1</a>, network A is connected to the Internet through <span class="keyword">Device</span>A. Two base stations (NodeB1 and NodeB2) are also connected to the Internet. There are reachable routes between <span class="keyword">Device</span>A and the two base stations.</p>
<div class="fignone" id="EN-US_TASK_0172372459__fig1"><a name="EN-US_TASK_0172372459__fig1"></a><a name="fig1"></a><span class="figcap"><b>Figure 1 </b>Establishing an IPsec tunnel in IPsec policy template mode</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1 and interface2 represent GE<span>0/1/1</span> and GE<span>0/1/2</span>, respectively.</p>
</div></div>
<br><span><img class="imgResize" src="images/fig_dc_vrp_ipsec_cfg_003301.png" width="518.7" height="183.137542" title="Click to enlarge"></span></div>
<p>Mobile devices camping on the two base stations are required to securely access network A.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372459__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure IP addresses for interfaces.</p>
</li><li><p>Create and configure a tunnel interface.</p>
</li><li>Enable IPsec.</li><li><p>Configure public-network routes (typically static routes).</p>
</li><li><p>Configure an ACL to define the data flows to be protected.</p>
</li><li><p>Configure an IPsec proposal. Specify ESP as the security protocol, SHA2-256 as the authentication algorithm, and AES-256 as the encryption algorithm.</p>
</li><li><p>Configure an IKE proposal. Specify SHA2-256 and pre-shared key authentication as the authentication algorithm and authentication method, respectively. In addition, set the DH group identifier used for key negotiation to group14.</p>
</li><li><p>Configure an IKE peer.</p>
</li><li><p>Configure an IPsec policy template.</p>
</li><li><p>Configure an IPsec service-instance group.</p>
</li><li><p>Apply the specified IPsec policy to the tunnel interface.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172372459__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li>IP addresses of interfaces</li><li>IP address of the tunnel interface</li><li>IP address segment of each subnet</li><li>Pre-shared key</li><li>Security protocol, encryption algorithm, and authentication algorithm to be used for the IPsec proposal</li><li>Authentication algorithm to be used for the IKE proposal</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172372459__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure <span class="keyword">Device</span>A.</span><ol><li class="substepexpand"><span>Configure IP addresses for interfaces.</span><p><ol type="a"><li><p>Configure an IP address for GE<span>0/1/1</span>.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface GigabitEthernet <span>0/1/1</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>ip address 10.1.1.1 24</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</li><li><p>Configure an IP address for GE<span>0/1/2</span>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface GigabitEthernet <span>0/1/2</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>ip address 172.16.163.1 24</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</li></ol>
</p></li><li class="substepexpand"><span>Enable IPsec.</span><p><div class="note" id="EN-US_TASK_0172372459__en-us_task_0172372456_note1782843183112"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172372459__en-us_task_0172372456_p117511759135415">Before configuring IPsec on the main control board, you do not need to enable IPsec. However, before configuring IPsec on the VSUP, run the <a href="cmdqueryname=undo+vsm+on-board-mode+disable"><b><span class="cmdname" id="EN-US_TASK_0172372459__en-us_task_0172372456_cmdname875120597541">vsm on-board-mode disable</span></b></a> command in the system view and then perform the following steps to enable this function. After the <a href="cmdqueryname=undo+vsm+on-board-mode+disable"><b><span class="cmdname" id="EN-US_TASK_0172372459__en-us_task_0172372456_cmdname170645338343411">vsm on-board-mode disable</span></b></a> command is run, IPsec cannot be configured on the main control board.</p>
<p id="EN-US_TASK_0172372459__en-us_task_0172372456_p139996451366">Only the following models support this configuration:</p>
<p id="EN-US_TASK_0172372459__en-us_task_0172372456_p18999144516617">NE40E-M2K</p>
<p id="EN-US_TASK_0172372459__en-us_task_0172372456_p8084616613">NE40E-M2K-B</p>
</div></div>
</p><p><pre class="screen" id="EN-US_TASK_0172372459__en-us_task_0172372456_screen782853183115">[<span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword6829931133113"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword2082973173110">Device</span>A] <strong id="EN-US_TASK_0172372459__en-us_task_0172372456_b1282973118312">license</strong></pre>
<pre class="screen" id="EN-US_TASK_0172372459__en-us_task_0172372456_screen2829163116314">[<span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword1982993115311"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword178291931133117">Device</span>A-license] <strong id="EN-US_TASK_0172372459__en-us_task_0172372456_b10829163183117">active ipsec bandwidth-enhance 40 slot </strong><strong id="EN-US_TASK_0172372459__en-us_task_0172372456_b7829143143114"><span>1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0172372459__en-us_task_0172372456_screen1182933111315">[<span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword20829123120314">*</span><span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword6829203163112">Device</span>A-license] <strong id="EN-US_TASK_0172372459__en-us_task_0172372456_b1682903116315">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172372459__en-us_task_0172372456_screen0829143113314">[<span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword148294313313">*</span><span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword1682916312314">Device</span>A] <strong id="EN-US_TASK_0172372459__en-us_task_0172372456_b7829193173114">commit</strong></pre>
</p></li><li class="substepexpand"><span>Create and configure a tunnel interface.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface Tunnel 10</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-Tunnel10] <strong>tunnel-protocol ipsec</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-Tunnel10] <strong>ip address 10.10.1.1 32</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-Tunnel10] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li><li class="substepexpand"><span>Configure a static route to the Internet. Assume that the next hop IP address of <span class="keyword">Device</span>A is 172.16.163.2.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ip route-static 0.0.0.0 0.0.0.0 172.16.163.2</strong></pre>
</p></li><li class="substepexpand"><span>Define the data flows to be protected.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>acl 3000</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-adv-3000] <strong>rule permit ip </strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-acl-adv-3000] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, the ACL rule permits all IP packets to pass through, so that you can conveniently add or delete peer base stations. In addition, the ACL rule takes effect according to the generated route, avoiding risks.</p>
</div></div>
</p></li><li class="substepexpand"><span>Configure an IPsec proposal named <strong>tran1</strong>.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ipsec proposal tran1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ipsec-proposal-tran1] <strong>encapsulation-mode tunnel</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ipsec-proposal-tran1] <strong>transform esp</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ipsec-proposal-tran1] <strong>esp authentication-algorithm sha2-256</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ipsec-proposal-tran1] <strong>esp encryption-algorithm aes 256</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ipsec-proposal-tran1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>ESP is the default security protocol, and the tunnel mode is the default encapsulation mode. They do not need to be configured.</p>
</div></div>
</p></li><li class="substepexpand"><span>Configure an IKE proposal numbered 10.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ike proposal 10</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ike-proposal-10] <strong>authentication-method pre-share</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ike-proposal-10] <strong>authentication-algorithm sha2-256</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ike-proposal-10] <strong>dh group14</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ike-proposal-10] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Pre-shared-key-based authentication is the default IKE authentication method and does not need to be configured.</p>
</div></div>
</p></li><li class="substepexpand"><span>Configure an IKE peer named <strong>b</strong>.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The pre-shared key configured on the local device must be the same as that configured on the peer device.</p>
</div></div>
</p><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ike peer b</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ike-peer-b] <strong>ike-proposal 10</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ike-peer-b] <strong>pre-shared-key abcde</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ike-peer-b] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li><li class="substepexpand"><span>Configure DPD.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ike dpd 100</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li><li class="substepexpand"><span>Configure an IPsec policy template named <strong>map_temp</strong> and numbered 1.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ipsec policy-template map_temp 1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ipsec-policy-templet-map_temp-1] <strong>security acl 3000</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ipsec-policy-templet-map_temp-1] <strong>proposal tran1</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ipsec-policy-templet-map_temp-1] <strong>ike-peer b</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ipsec-policy-templet-map_temp-1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li><li class="substepexpand"><span>Configure the IPsec policy <strong>map1</strong> to reference the IPsec policy template <strong>map_temp</strong>.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ipsec policy map1 10 isakmp template map_temp</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The name of an IPsec policy template must be different from that of an IPsec policy.</p>
</div></div>
</p></li><li class="substepexpand"><span>Configure an IPsec service-instance group.</span><p><pre class="screen" id="EN-US_TASK_0172372459__en-us_task_0172372456_screen1955217205107">[<span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword18368112072915"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword203689202297">Device</span>A] <strong id="EN-US_TASK_0172372459__en-us_task_0172372456_b174511145153516">service-location 1</strong>
[<span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword67402020182319">*</span><span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword1174012072316">Device</span>A-service-location-1] <strong id="EN-US_TASK_0172372459__en-us_task_0172372456_b17740420152317">location slot <span>1</span></strong>
[<span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword620412816254">*</span><span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword620418289256">Device</span>A-service-location-1] <strong id="EN-US_TASK_0172372459__en-us_task_0172372456_b12204128152517">commit</strong>
[<span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword10565183582515"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword19565435132513">Device</span>A-service-location-1] <strong id="EN-US_TASK_0172372459__en-us_task_0172372456_b6565173514253">quit</strong>
[<span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword18171104111252"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword4172184110257">Device</span>A] <strong id="EN-US_TASK_0172372459__en-us_task_0172372456_b141728413259">service-instance-group group1</strong>
[<span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword5278104714252">*</span><span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword1127834732511">Device</span>A-service-instance-group-group1] <strong id="EN-US_TASK_0172372459__en-us_task_0172372456_b17278447112512">service-location 1</strong>
[<span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword568811528251">*</span><span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword206881752172518">Device</span>A-service-instance-group-group1] <strong id="EN-US_TASK_0172372459__en-us_task_0172372456_b2688155215258">commit</strong>
[<span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword15762645264"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172372459__en-us_task_0172372456_keyword1176212402610">Device</span>A-service-instance-group-group1] <strong id="EN-US_TASK_0172372459__en-us_task_0172372456_b276210420264">quit</strong></pre>
</p></li><li class="substepexpand"><span>Apply the IPsec policy <strong>map1</strong> to the tunnel interface.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface Tunnel 10</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-Tunnel10] <strong>ipsec policy map1 service-instance-group group1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Tunnel10] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
</p></li></ol>
</li></ul></div>
<div class="example"><a name="EN-US_TASK_0172372459__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#
 sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#
license
 active ipsec bandwidth-enhance 40 slot <span>1</span> //Perform this configuration for the VSUP.</pre>
<pre class="screen">#
service-location 1
 location slot <span>1</span>
#
service-instance-group group1
 service-location 1</pre>
<pre class="screen">#
ike dpd 100
#
acl number 3000
  rule 5 permit ip
#
ike proposal 10
 encryption-algorithm aes-cbc 256
 dh group14
 authentication-algorithm sha2-256
 integrity-algorithm hmac-sha2-256
#
ike peer b
 pre-shared-key cipher %^%#.EJ<font style="font-size:8pt" Face="Courier New" >~</font>F"jURXr&amp;0--*9[2(uLl^I@0_]XBJe;=-0x,V%^%#
 ike-proposal 10
#
ipsec proposal tran1
 esp authentication-algorithm sha2-256
 esp encryption-algorithm aes 256
#
ipsec policy-template map_temp 1
 security acl 3000
 ike-peer b
 proposal tran1
#
ipsec policy map1 10 isakmp template map_temp
#
interface GigabitEthernet<span>0/1/1</span>
 ip address 10.1.1.1 255.255.255.0
#
interface GigabitEthernet<span>0/1/2</span>
 ip address 172.16.163.1 255.255.255.0
#
interface Tunnel10
 ip address 10.10.1.1 255.255.255.0
 tunnel-protocol ipsec
 ipsec policy map1 service-instance-group group1
#
ip route-static 0.0.0.0 0.0.0.0 172.16.163.2
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0039.html">Configuring IPsec in IKE Auto-Negotiation Mode
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_0032.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipsec_cfg_all_0028.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>

<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>