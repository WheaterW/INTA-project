
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a DAA Service Policy">
<meta name="abstract" content="This section describes how to configure a DAA service policy.">
<meta name="description" content="This section describes how to configure a DAA service policy.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_daa_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_daa_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_daa_cfg_0009.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00800033,daane,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DAA">
<meta name="featuretype" content="Value-Added-Service">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DAA">
<meta name="featuretype" content="Value-Added-Service">
<meta name="featurename" content="DAA">
<meta name="featuretype" content="Value-Added-Service">
<meta name="featurename" content="DAA">
<meta name="featuretype" content="Value-Added-Service">
<meta name="OWNER" content="c00549182">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00549182">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172375020">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring a DAA Service Policy</title>
</head>
<body><a name="EN-US_TASK_0172375020"></a><a name="EN-US_TASK_0172375020"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a DAA Service Policy</h1>
<div class="taskbody"><p>This section describes how to configure a DAA service policy.</p>
<div class="steps"><a name="EN-US_TASK_0172375020__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Configure a DAA traffic policy and globally apply it.</span><ol type="a"><li class="substepexpand"><span>Run the <span><a href="cmdqueryname=acl"><b><span class="cmdname" id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdname1319781580214207">acl</span></b></a> { <strong><span id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdparmname2110912045214207">name</span></strong> <i><span class="varname" id="EN-US_TASK_0172375020__en-us_task_0172336153_varname1906109660214207">ucl-acl-name</span></i> [ <strong><span id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdparmname1682264039214207">ucl</span></strong> | [ <strong><span id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdparmname441765180214207">ucl</span></strong> ] <strong><span id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdparmname361736853214207">number</span></strong> <i><span class="varname" id="EN-US_TASK_0172375020__en-us_task_0172336153_varname774988992214207">ucl-acl-number</span></i> ] | [ <strong><span id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdparmname2142681934214207">number</span></strong> ] <i><span class="varname" id="EN-US_TASK_0172375020__en-us_task_0172336153_varname218070351214207">ucl-acl-number</span></i> } [ <strong><span id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdparmname1779273924214207">match-order</span></strong> { <strong><span id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdparmname1325515090214207">auto</span></strong> | <strong><span id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdparmname1404085938214207">config</span></strong> } ]</span> command to create an ACL and enter the ACL view.</span></li><li class="substepexpand"><span>Run the corresponding command to create an ACL rule based on the protocol type.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Creating an ACL rule</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="15.5%" id="mcps1.4.1.2.2.2.2.1.2.3.1.1" liSelected="liSelected"><p>Protocol Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="84.5%" id="mcps1.4.1.2.2.2.2.1.2.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="15.5%" headers="mcps1.4.1.2.2.2.2.1.2.3.1.1 "><p>TCP</p>
</td>
<td class="cellrowborder" valign="top" width="84.5%" headers="mcps1.4.1.2.2.2.2.1.2.3.1.2 "><p><span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } { <i><span class="varname">protocol</span></i> | <strong><span>tcp</span></strong> } [ [ <strong><span>dscp</span></strong> <i><span class="varname">dscp</span></i> | [ <strong><span>precedence</span></strong> <i><span class="varname">precedence</span></i> | <strong><span>tos</span></strong> <i><span class="varname">tos</span></i> ] <sup>*</sup> ] | <strong><span>source</span></strong> { <span>{ </span><strong><span>ip-address</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-ip-address-mask</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <span><strong><span>source-pool</span></strong> <i><span class="varname">source-pool-name</span></i> } | </span><strong><span>any</span></strong> | [ <strong><span>service-group</span></strong> { <i><span class="varname">service-group-name</span></i> | <strong><span>any</span></strong> } | <strong><span>user-group</span></strong> { <i><span class="varname">user-group-name</span></i> | <strong><span>any</span></strong> } ] } | <strong><span>destination</span></strong> { <span>{ </span><strong><span>ip-address</span></strong> { <i><span class="varname">destination-ip-address</span></i> { <i><span class="varname">destination-ip-address-mask</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <span><strong><span>destination-pool</span></strong> <i><span class="varname">destination-pool-name</span></i> } | </span><strong><span>any</span></strong> | [ <strong><span>service-group</span></strong> { <i><span class="varname">service-group-name</span></i> | <strong><span>any</span></strong> } | <strong><span>user-group</span></strong> { <i><span class="varname">user-group-name</span></i> | <strong><span>any</span></strong> } ] } | <strong><span>source-port</span></strong> <i><span class="varname">operator</span></i> <i><span class="varname">port-number</span></i> | <strong><span>destination-port</span></strong> <i><span class="varname">operator</span></i> <i><span class="varname">port-number</span></i> | <strong><span>syn-flag</span></strong> { <i><span class="varname">syn-flag</span></i> [ <strong><span>mask</span></strong> <i><span class="varname">mask-value</span></i> ] | { <strong><span>bit-match</span></strong> { <strong><span>established</span></strong> | <strong><span>fin</span></strong> | <strong><span>syn</span></strong> | <strong><span>rst</span></strong> | <strong><span>psh</span></strong> | <strong><span>ack</span></strong> | <strong><span>urg</span></strong> | <strong><span>ece</span></strong> | <strong><span>crw</span></strong> | <strong><span>ns</span></strong> } } } | <strong><span>fragment-type</span></strong> { <strong><span>fragment</span></strong> | <strong><span>non-fragment</span></strong> | <strong><span>non-subseq</span></strong> | <strong><span>fragment-subseq</span></strong> | <strong><span>fragment-spe-first</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> | <strong><span>inner-vlan</span></strong> <i><span class="varname">cvlan-id</span></i> ] <sup>*</sup></span></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.5%" headers="mcps1.4.1.2.2.2.2.1.2.3.1.1 "><p>UDP</p>
</td>
<td class="cellrowborder" valign="top" width="84.5%" headers="mcps1.4.1.2.2.2.2.1.2.3.1.2 "><p><span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } { <i><span class="varname">protocol</span></i> | <strong><span>udp</span></strong> } [ [ <strong><span>dscp</span></strong> <i><span class="varname">dscp</span></i> | [ <strong><span>precedence</span></strong> <i><span class="varname">precedence</span></i> | <strong><span>tos</span></strong> <i><span class="varname">tos</span></i> ] <sup>*</sup> ] | <strong><span>source</span></strong> { <span>{ </span><strong><span>ip-address</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-ip-address-mask</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <span><strong><span>source-pool</span></strong> <i><span class="varname">source-pool-name</span></i> } | </span><strong><span>any</span></strong> | [ <strong><span>service-group</span></strong> { <i><span class="varname">service-group-name</span></i> | <strong><span>any</span></strong> } | <strong><span>user-group</span></strong> { <i><span class="varname">user-group-name</span></i> | <strong><span>any</span></strong> } ] } | <strong><span>destination</span></strong> { <span>{ </span><strong><span>ip-address</span></strong> { <i><span class="varname">destination-ip-address</span></i> { <i><span class="varname">destination-ip-address-mask</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <span><strong><span>destination-pool</span></strong> <i><span class="varname">destination-pool-name</span></i> } | </span><strong><span>any</span></strong> | [ <strong><span>service-group</span></strong> { <i><span class="varname">service-group-name</span></i> | <strong><span>any</span></strong> } | <strong><span>user-group</span></strong> { <i><span class="varname">user-group-name</span></i> | <strong><span>any</span></strong> } ] } | <strong><span>source-port</span></strong> <i><span class="varname">operator</span></i> <i><span class="varname">port-number</span></i> | <strong><span>destination-port</span></strong> <i><span class="varname">operator</span></i> <i><span class="varname">port-number</span></i> | <strong><span>fragment-type</span></strong> { <strong><span>fragment</span></strong> | <strong><span>non-fragment</span></strong> | <strong><span>non-subseq</span></strong> | <strong><span>fragment-subseq</span></strong> | <strong><span>fragment-spe-first</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> | <strong><span>inner-vlan</span></strong> <i><span class="varname">cvlan-id</span></i> ] <sup>*</sup></span></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.5%" headers="mcps1.4.1.2.2.2.2.1.2.3.1.1 "><p>ICMP</p>
</td>
<td class="cellrowborder" valign="top" width="84.5%" headers="mcps1.4.1.2.2.2.2.1.2.3.1.2 "><p><span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } { <i><span class="varname">protocol</span></i> | <strong><span>icmp</span></strong> } [ [ <strong><span>dscp</span></strong> <i><span class="varname">dscp</span></i> | [ <strong><span>precedence</span></strong> <i><span class="varname">precedence</span></i> | <strong><span>tos</span></strong> <i><span class="varname">tos</span></i> ] <sup>*</sup> ] | <strong><span>source</span></strong> { <span>{ </span><strong><span>ip-address</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-ip-address-mask</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <span><strong><span>source-pool</span></strong> <i><span class="varname">source-pool-name</span></i> } | </span><strong><span>any</span></strong> | [ <strong><span>service-group</span></strong> { <i><span class="varname">service-group-name</span></i> | <strong><span>any</span></strong> } | <strong><span>user-group</span></strong> { <i><span class="varname">user-group-name</span></i> | <strong><span>any</span></strong> } ] } | <strong><span>destination</span></strong> { <span>{ </span><strong><span>ip-address</span></strong> { <i><span class="varname">destination-ip-address</span></i> { <i><span class="varname">destination-ip-address-mask</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <span><strong><span>destination-pool</span></strong> <i><span class="varname">destination-pool-name</span></i> } | </span><strong><span>any</span></strong> | [ <strong><span>service-group</span></strong> { <i><span class="varname">service-group-name</span></i> | <strong><span>any</span></strong> } | <strong><span>user-group</span></strong> { <i><span class="varname">user-group-name</span></i> | <strong><span>any</span></strong> } ] } | <strong><span>icmp-type</span></strong> { <i><span class="varname">icmp-name</span></i> | <i><span class="varname">icmp-type</span></i> <i><span class="varname">icmp-code</span></i> } | <strong><span>fragment-type</span></strong> { <strong><span>fragment</span></strong> | <strong><span>non-fragment</span></strong> | <strong><span>non-subseq</span></strong> | <strong><span>fragment-subseq</span></strong> | <strong><span>fragment-spe-first</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> | <strong><span>inner-vlan</span></strong> <i><span class="varname">cvlan-id</span></i> ] <sup>*</sup></span></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.5%" headers="mcps1.4.1.2.2.2.2.1.2.3.1.1 "><p>Other protocols</p>
</td>
<td class="cellrowborder" valign="top" width="84.5%" headers="mcps1.4.1.2.2.2.2.1.2.3.1.2 "><p><span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } { <strong><span>zero</span></strong><span> | </span><i><span class="varname">protocol</span></i> | <strong><span>gre</span></strong> | <strong><span>ip</span></strong> | <strong><span>ipinip</span></strong> | <strong><span>igmp</span></strong> | <strong><span>ospf</span></strong> } [ [ <strong><span>dscp</span></strong> <i><span class="varname">dscp</span></i> | [ <strong><span>precedence</span></strong> <i><span class="varname">precedence</span></i> | <strong><span>tos</span></strong> <i><span class="varname">tos</span></i> ] <sup>*</sup> ] | <strong><span>source</span></strong> { <span>{ </span><strong><span>ip-address</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-ip-address-mask</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <span><strong><span>source-pool</span></strong> <i><span class="varname">source-pool-name</span></i> } | </span><strong><span>any</span></strong> | [ <strong><span>service-group</span></strong> { <i><span class="varname">service-group-name</span></i> | <strong><span>any</span></strong> } | <strong><span>user-group</span></strong> { <i><span class="varname">user-group-name</span></i> | <strong><span>any</span></strong> } ] } | <strong><span>destination</span></strong> { <span>{ </span><strong><span>ip-address</span></strong> { <i><span class="varname">destination-ip-address</span></i> { <i><span class="varname">destination-ip-address-mask</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <span><strong><span>destination-pool</span></strong> <i><span class="varname">destination-pool-name</span></i> } | </span><strong><span>any</span></strong> | [ <strong><span>service-group</span></strong> { <i><span class="varname">service-group-name</span></i> | <strong><span>any</span></strong> } | <strong><span>user-group</span></strong> { <i><span class="varname">user-group-name</span></i> | <strong><span>any</span></strong> } ] } | <strong><span>fragment-type</span></strong> { <strong><span>fragment</span></strong> | <strong><span>non-fragment</span></strong> | <strong><span>non-subseq</span></strong> | <strong><span>fragment-subseq</span></strong> | <strong><span>fragment-spe-first</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> | <strong><span>inner-vlan</span></strong> <i><span class="varname">cvlan-id</span></i> ] <sup>*</sup></span></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li><li class="substepexpand"><span>(Optional) Run the <span><a href="cmdqueryname=acl+ipv6"><b><span class="cmdname" id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdname999721842214207">acl ipv6</span></b></a> <strong><span id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdparmname1137784298214207">number</span></strong> <i><span class="varname" id="EN-US_TASK_0172375020__en-us_task_0172336153_varname169092217214207">ucl-acl6-number</span></i> [ <strong><span id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdparmname229689428214207">match-order</span></strong> { <strong><span id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdparmname534149806214207">auto</span></strong> | <strong><span id="EN-US_TASK_0172375020__en-us_task_0172336153_cmdparmname564883746214207">config</span></strong> } ]</span> command to create an ACL6 and enter its view.</span></li><li class="substepexpand"><span>(Optional) Run the corresponding command to create an ACL6 rule based on the protocol type.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Creating an ACL6 rule</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="15.5%" id="mcps1.4.1.2.2.6.2.1.2.3.1.1" liSelected="liSelected"><p>Protocol Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="84.5%" id="mcps1.4.1.2.2.6.2.1.2.3.1.2" liSelected="liSelected"><p>Command</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="15.5%" headers="mcps1.4.1.2.2.6.2.1.2.3.1.1 "><p>TCP</p>
</td>
<td class="cellrowborder" valign="top" width="84.5%" headers="mcps1.4.1.2.2.6.2.1.2.3.1.2 "><p><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <i><span class="varname">protocol</span></i> | <strong><span>tcp</span></strong> } [ [ <strong><span>dscp</span></strong> <i><span class="varname">dscp</span></i> | [ <strong><span>precedence</span></strong> <i><span class="varname">precedence</span></i> | <strong><span>tos</span></strong> <i><span class="varname">tos</span></i> ] <sup>*</sup> ] | <strong><span>destination</span></strong> { <i><span class="varname">destination-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">destination-ipv6-address</span></i>/<i><span class="varname">prefix-length</span></i> | <strong><span>any</span></strong> } | <strong><span>destination-port</span></strong> <i><span class="varname">operator</span></i> <i><span class="varname">port</span></i> | <strong><span>fragment</span></strong> | <strong><span>source</span></strong> { <i><span class="varname">source-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">source-ipv6-address</span></i>/<i><span class="varname">prefix-length</span></i> | <strong><span>any</span></strong> }<span> <strong><span>source-pool</span></strong> <i><span class="varname">source-pool-name</span></i> }</span> | <strong><span>source-port</span></strong> <i><span class="varname">operator</span></i> <i><span class="varname">port</span></i> | <span><strong><span>tcp-flag</span></strong> { <i><span class="varname">tcp-flag</span></i> [ <strong><span>mask</span></strong> <i><span class="varname">mask-value</span></i> ] | <strong><span>established</span></strong> | { <strong><span>ack</span></strong> | <strong><span>fin</span></strong> | <strong><span>psh</span></strong> | <strong><span>rst</span></strong> | <strong><span>syn</span></strong> | <strong><span>urg</span></strong> } <sup>*</sup> } | </span><strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <span>[ </span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i><span> | <strong><span>vpn-instance-any</span></strong> ]</span> ] <sup>*</sup></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.5%" headers="mcps1.4.1.2.2.6.2.1.2.3.1.1 "><p>UDP</p>
</td>
<td class="cellrowborder" valign="top" width="84.5%" headers="mcps1.4.1.2.2.6.2.1.2.3.1.2 "><p><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <i><span class="varname">protocol</span></i> | <strong><span>udp</span></strong> } [ [ <strong><span>dscp</span></strong> <i><span class="varname">dscp</span></i> | [ <strong><span>precedence</span></strong> <i><span class="varname">precedence</span></i> | <strong><span>tos</span></strong> <i><span class="varname">tos</span></i> ] <sup>*</sup> ] | <strong><span>destination</span></strong> { <i><span class="varname">destination-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">destination-ipv6-address</span></i>/<i><span class="varname">prefix-length</span></i> | <strong><span>any</span></strong> } | <strong><span>destination-port</span></strong> <i><span class="varname">operator</span></i> <i><span class="varname">port</span></i> | <strong><span>fragment</span></strong> | <strong><span>source</span></strong> { <i><span class="varname">source-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">source-ipv6-address</span></i>/<i><span class="varname">prefix-length</span></i> | <strong><span>any</span></strong> }<span> <strong><span>source-pool</span></strong> <i><span class="varname">source-pool-name</span></i> }</span> | <strong><span>source-port</span></strong> <i><span class="varname">operator</span></i> <i><span class="varname">port</span></i> | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <span>[ </span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i><span> | <strong><span>vpn-instance-any</span></strong> ]</span> ] <sup>*</sup></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.5%" headers="mcps1.4.1.2.2.6.2.1.2.3.1.1 "><p>ICMPv6</p>
</td>
<td class="cellrowborder" valign="top" width="84.5%" headers="mcps1.4.1.2.2.6.2.1.2.3.1.2 "><p><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <i><span class="varname">protocol</span></i> | <strong><span>icmpv6</span></strong> } [ [ <strong><span>dscp</span></strong> <i><span class="varname">dscp</span></i> | [ <strong><span>precedence</span></strong> <i><span class="varname">precedence</span></i> | <strong><span>tos</span></strong> <i><span class="varname">tos</span></i> ] <sup>*</sup> ] | <strong><span>destination</span></strong> { <i><span class="varname">destination-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">destination-ipv6-address</span></i>/<i><span class="varname">prefix-length</span></i> | <strong><span>any</span></strong> } | <strong><span>fragment</span></strong> | <strong><span>icmp6-type</span></strong> { <i><span class="varname">icmp6-type-name</span></i> | <i><span class="varname">icmp6-type</span></i><span> [ <strong><span>to</span></strong> <i><span class="varname">icmp6-type-end</span></i> ]</span> [ <i><span class="varname">icmp6-code</span></i> ] } | <strong><span>source</span></strong> { <i><span class="varname">source-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">source-ipv6-address</span></i>/<i><span class="varname">prefix-length</span></i> | <strong><span>any</span></strong> }<span> <strong><span>source-pool</span></strong> <i><span class="varname">source-pool-name</span></i> }</span> | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | <span>[ </span><strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i><span> | <strong><span>vpn-instance-any</span></strong> ]</span> ] <sup>*</sup></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="15.5%" headers="mcps1.4.1.2.2.6.2.1.2.3.1.1 "><p>Other protocols</p>
</td>
<td class="cellrowborder" valign="top" width="84.5%" headers="mcps1.4.1.2.2.6.2.1.2.3.1.2 "><p><a href="cmdqueryname=rule"><b><span class="cmdname">rule </span></b></a>[ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } { <strong><span>hoport</span></strong> [ <strong><span>option-code</span></strong> <i><span class="varname">option-value</span></i> ] | <strong><span>1</span></strong> | <strong><span>5</span></strong> | <i><span class="varname">protocol</span></i> | <strong><span>gre</span></strong> | <strong><span>ipv6</span></strong> | <strong><span>ipv6-frag</span></strong> | <strong><span>ipv6-ah</span></strong> | <strong><span>ipv6-esp</span></strong> | <strong><span>ospf</span></strong> | <i><span class="varname">7-16</span></i> | <i><span class="varname">18-42</span></i> | { <i><span class="varname">43</span></i> | <strong><span>ipv6-routing</span></strong> } [ <strong><span>routing-type</span></strong> <i><span class="varname">routing-number</span></i> ] | <i><span class="varname">44-57</span></i> | <i><span class="varname">59</span></i> | { <i><span class="varname">60</span></i> | <strong><span>ipv6-destination</span></strong> } [ <strong><span>option-code</span></strong> <i><span class="varname">option-value</span></i> ] | <i><span class="varname">61-255</span></i> } [ <strong><span>destination</span></strong> { <i><span class="varname">destination-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">dest-ipv6-addr-prefix</span></i> | <strong><span>any</span></strong> } | <strong><span>fragment</span></strong> | { <strong><span>source</span></strong> { <i><span class="varname">source-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">src-ipv6-addr-prefix</span></i> | <strong><span>any</span></strong> } | <strong><span>source-pool</span></strong> <i><span class="varname">source-pool-name</span></i> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | [ <strong><span>dscp</span></strong> <i><span class="varname">dscp</span></i> | [ <strong><span>precedence</span></strong> { <i><span class="varname">precedence</span></i> | <strong><span>critical</span></strong> | <strong><span>flash</span></strong> | <strong><span>flash-override</span></strong> | <strong><span>immediate</span></strong> | <strong><span>internet</span></strong> | <strong><span>network</span></strong> | <strong><span>priority</span></strong> | <strong><span>routine</span></strong> } | <strong><span>tos</span></strong> { <i><span class="varname">tos</span></i> | <strong><span>max-reliability</span></strong> | <strong><span>max-throughput</span></strong> | <strong><span>min-delay</span></strong> | <strong><span>min-monetary-cost</span></strong> | <strong><span>normal</span></strong> } ] <sup>*</sup> ] | [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>vpn-instance-any</span></strong> ] ] <sup>*</sup></p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li></ol>
</li><li><span>Configure a traffic classifier.</span><ol type="a" id="EN-US_TASK_0172375020__en-us_task_0172375057_substeps909418092214111"><li class="substepexpand" id="EN-US_TASK_0172375020__en-us_task_0172375057_substep685172840214111"><span id="EN-US_TASK_0172375020__en-us_task_0172375057_cmd1247554863214418">Run <a href="cmdqueryname=traffic+classifier"><b><span class="cmdname" id="EN-US_TASK_0172375020__en-us_task_0172375057_cmdname571812158214418">traffic classifier</span></b></a> <i><span class="varname" id="EN-US_TASK_0172375020__en-us_task_0172375057_varname1891132611214418">classifier-name</span></i> [ <strong><span id="EN-US_TASK_0172375020__en-us_task_0172375057_cmdparmname1821472948214418">operator</span></strong> { <strong><span id="EN-US_TASK_0172375020__en-us_task_0172375057_cmdparmname1595745713214418">and</span></strong> | <strong><span id="EN-US_TASK_0172375020__en-us_task_0172375057_cmdparmname1315780458214418">or</span></strong> } ]</span><p><p id="EN-US_TASK_0172375020__en-us_task_0172375057_p1394959747214418">A traffic classifier is configured and the traffic classifier view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172375020__en-us_task_0172375057_substep704760070214111"><span id="EN-US_TASK_0172375020__en-us_task_0172375057_cmd1525504760214418">Run <a href="cmdqueryname=if-match"><b><span class="cmdname" id="EN-US_TASK_0172375020__en-us_task_0172375057_cmdname1637551137214111">if-match</span></b></a> [<strong><span id="EN-US_TASK_0172375020__en-us_task_0172375057_cmdparmname143992046103110"> ipv6</span></strong> ] <strong><span id="EN-US_TASK_0172375020__en-us_task_0172375057_cmdparmname1047055016312">acl</span></strong> { <i><span class="varname" id="EN-US_TASK_0172375020__en-us_task_0172375057_varname1038797963214111">acl-number</span></i> | <strong><span id="EN-US_TASK_0172375020__en-us_task_0172375057_cmdparmname1134213256214111">name</span></strong> <i><span class="varname" id="EN-US_TASK_0172375020__en-us_task_0172375057_varname1584322604214111">acl-name</span></i> }</span><p><p id="EN-US_TASK_0172375020__en-us_task_0172375057_p6135173185918">The traffic classifier references a specified ACL or ACL6.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172375020__en-us_task_0172375057_substep1857820920214111"><span id="EN-US_TASK_0172375020__en-us_task_0172375057_cmd576863153214418">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172375020__en-us_task_0172375057_cmdname1256294573214418">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172375020__en-us_task_0172375057_p1376887897214418">The configuration is committed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172375020__en-us_task_0172375057_substep379339096214111"><span id="EN-US_TASK_0172375020__en-us_task_0172375057_cmd238244843214418">Run <span><a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172375020__en-us_task_0172375057_cmdname765191602214418">quit</span></b></a></span></span><p><p id="EN-US_TASK_0172375020__en-us_task_0172375057_p438119953214418">Return to the system view.</p>
</p></li></ol>
</li><li><span>Configure a traffic behavior.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=traffic+behavior"><b><span class="cmdname" id="EN-US_TASK_0172375020__en-us_task_0172375057_cmdname70889588214418">traffic behavior</span></b></a> <i><span class="varname" id="EN-US_TASK_0172375020__en-us_task_0172375057_varname2106709721214418">behavior-name</span></i></span><p><p id="EN-US_TASK_0172375020__en-us_task_0172375057_p990125341214418">A traffic behavior is configured and the traffic behavior view is displayed.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=tariff-level"><b><span class="cmdname">tariff-level</span></b></a> <i><span class="varname">tariff-level</span></i> command to configure a DAA tariff level.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=car"><b><span class="cmdname">car</span></b></a> command to configure DAA traffic policing for the traffic behavior.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=traffic-statistic"><b><span class="cmdname">traffic-statistic</span></b></a> command to enable traffic statistics collection for DAA services.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li></ol>
</li><li><span>Define a DAA traffic policy.</span><ol type="a"><li><span>Run the <a href="cmdqueryname=traffic+policy"><b><span class="cmdname">traffic policy</span></b></a> <i><span class="varname">policy-name</span></i> command to configure a DAA traffic policy and enter its view.</span></li><li><span>Run the <a href="cmdqueryname=classifier"><b><span class="cmdname">classifier</span></b></a> <i><span class="varname">classifier-name</span></i> <strong><span>behavior</span></strong> <i><span class="varname">behavior-name</span></i> [ <strong><span>precedence</span></strong> <i><span class="varname">precedence-value</span></i> ] command to specify a traffic behavior for the traffic classifier in the DAA traffic policy. <i><span class="varname">classifier-name</span></i> and <i><span class="varname">behavior-name</span></i> specify the configured traffic classifier and traffic behavior, respectively.</span></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li><li><span>Run the <a href="cmdqueryname=accounting-service-policy"><b><span class="cmdname">accounting-service-policy</span></b></a> <i><span class="varname">policy-name</span></i> command to globally apply the DAA traffic policy.</span></li></ol>
</li><li><span>Configure a DAA service policy.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 3 </b>Procedure for configuring a DAA service policy</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.6.2.1.2.4.1.1" liSelected="liSelected"><p>Objective</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.6.2.1.2.4.1.2" liSelected="liSelected"><p>Task</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.6.2.1.2.4.1.3" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.1 "><p>Create a DAA service policy and enter the DAA service policy view.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=value-added-service+policy"><b><span class="cmdname">value-added-service policy</span></b></a> <i><span class="varname">service-policy-name</span></i> <strong><span>daa</span></strong> command.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.3 "><p>Mandatory.</p>
<p>Creating a DAA service policy and entering its view are the prerequisites for performing the following operations.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.1 "><p>Configure an accounting scheme for the DAA service policy</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=accounting-scheme"><b><span class="cmdname">accounting-scheme</span></b></a> <i><span class="varname">accounting-scheme-name</span></i> command.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.3 "><p>Mandatory.</p>
<p>After an accounting scheme template is referenced by a value-added service policy template, the service uses the accounting scheme in the accounting scheme template.</p>
<p>An accounting scheme can be configured either in a domain or in a DAA service policy template. The priority of an accounting scheme configured in a DAA service policy template is higher than that configured in a domain.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.1 "><p>Enable uniform accounting for DAA services.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=accounting-together+enable"><b><span class="cmdname">accounting-together enable</span></b></a> command.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.3 "><p>Optional.</p>
<p>When users access network services with different bandwidth requirements, such as gaming, FTP, and VoD services, these network services are planned as different DAA services for rate limiting. Configure uniform accounting so that the device interacts with the accounting server to implement traffic reporting and service quota management.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.1 "><p>In non-uniform accounting mode, if the monitoring key delivered by the Diameter server is in string format, configure the mapping between the tariff level and the monitoring key in string format for DAA services.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=tariff-level"><b><span class="cmdname">tariff-level</span></b></a> <i><span class="varname">level</span></i> <strong><span>monitor-key string</span></strong> <i><span class="varname">monitor-key-string</span></i> command.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.3 "><p>Optional.</p>
<p>In non-uniform accounting mode, different quotas are delivered for DAA services at different tariff levels. Therefore, different monitor keys must be configured for such services.</p>
<p>Before running this command, run the <a href="cmdqueryname=diameter+monitor-key+parse-mode"><b><span class="cmdname">diameter monitor-key parse-mode</span></b></a> <strong><span>string</span></strong> command in the system view to set the parsing mode of the Diameter monitor key to string.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.1 "><p>In uniform accounting mode, if the monitor key delivered by the Diameter server is in string format, configure a monitor key for the DAA service policy.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=diameter+monitor-key+string"><b><span class="cmdname">diameter monitor-key string</span></b></a> <i><span class="varname">monitor-key-string</span></i> command.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.3 "><p>Optional.</p>
<p>In uniform accounting mode, accounting is performed for DAA services at different tariff levels in a uniform manner. As such, only one monitor key needs to be configured so that the corresponding quota takes effect.</p>
<p>Before running this command, run the <a href="cmdqueryname=diameter+monitor-key+parse-mode"><b><span class="cmdname">diameter monitor-key parse-mode</span></b></a> <strong><span>string</span></strong> command in the system view to set the parsing mode of the Diameter monitor key to string.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.1 "><p>Configure the QoS resource type requested by downstream DAA services.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=rate-limit-mode"><b><span class="cmdname">rate-limit-mode</span></b></a> command.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.3 "><p>Optional.</p>
<p>If CAR is performed on DAA service traffic and then the traffic is re-marked with different priorities, the traffic enters the subscriber queue (SQ) for scheduling. When an eTM subcard is used, you need to run the <a href="cmdqueryname=rate-limit-mode"><b><span class="cmdname">rate-limit-mode</span></b></a> <strong><span>car</span></strong> <strong><span>outbound</span></strong> command to set the QoS rate limiting mode to CAR for downstream DAA services.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.1 "><p>Configure DAA user traffic to match a DAA service policy.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=accounting-service-policy"><b><span class="cmdname">accounting-service-policy</span></b></a> { <strong><span>inbound</span></strong> | <strong><span>outbound</span></strong> } { <strong><span>auto</span></strong> | <strong><span>disable</span></strong> | <strong><span>enable</span></strong> } command.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.3 "><p>Optional.</p>
<p>To implement refined control on DAA services and save QoS resources, for example, to enable only downstream service matching for users, run the <a href="cmdqueryname=accounting-service-policy"><b><span class="cmdname">accounting-service-policy</span></b></a> <strong><span>inbound</span></strong> <strong><span>disable</span></strong> command in a DAA service policy to disable upstream service matching for DAA users who use this service policy. This prevents DAA users from applying for upstream QoS resources.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.1 "><p>Enable rate limit separation for DAA services.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=traffic-separate+enable"><b><span class="cmdname">traffic-separate enable</span></b></a> command.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.3 "><p>Optional.</p>
<p>After rate limit separation is enabled for DAA services in a DAA service policy template, the service traffic bandwidth of DAA users using this template is no longer limited by the user bandwidth.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.1 "><p>Enable DAA service traffic to be counted into user traffic.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=user+accounting-together+enable"><b><span class="cmdname">user accounting-together enable</span></b></a> command.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.3 "><p>Optional.</p>
<p>You can run this command to count DAA user service traffic into user traffic.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.1 "><p>Configure separate traffic statistics collection for dual-stack DAA users based on user queues.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=user+accounting+dual-stack+separate+user-queue"><b><span class="cmdname">user accounting dual-stack separate user-queue</span></b></a> command.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.3 "><p>Optional.</p>
<p>When CAR-based rate limiting is performed for DAA services and SQs are configured to limit user rates, statistics based on count IDs are not performed for traffic after CAR-based rate limiting if the <a href="cmdqueryname=traffic-separate+enable"><b><span class="cmdname">traffic-separate enable</span></b></a> command is run to configure DAA service separation. In this situation, separate traffic statistics are collected for dual-stack DAA users. As a result, user service traffic cannot be counted into DAA service traffic. To collect separate traffic statistics for dual-stack DAA users based on user queues, run the <a href="cmdqueryname=user+accounting+dual-stack+separate+user-queue"><b><span class="cmdname">user accounting dual-stack separate user-queue</span></b></a> command.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.1 "><p>Configure the accounting status or IP type for a specified DAA tariff level.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=tariff-level-cfg"><b><span class="cmdname">tariff-level-cfg</span></b></a> <i><span class="varname">level</span></i> { <strong><span>accounting off</span></strong> | <strong><span>ip-type ipv6</span></strong> } command.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.3 "><p>Optional.</p>
<p>DAA service traffic statistics are collected and reported based on the IP type configured for each level, which is irrelevant to the traffic type that actually matches the specific level. Therefore, when deploying dual-stack DAA services, you need to ensure that the ACL type of each service is consistent with the IP type configured for the DAA tariff level to prevent IPv4 and IPv6 traffic from matching the same level.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.1 "><p>Configure a tariff level and a QoS profile for DAA services</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=tariff-level"><b><span class="cmdname">tariff-level</span></b></a> <i><span class="varname">level</span></i> <strong><span>qos-profile</span></strong> <i><span class="varname">qos-profile-name</span></i> command.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.3 "><p>Mandatory.</p>
<p>To limit the rate of DAA users based on parameters in the QoS profile corresponding to a DAA tariff level, run this command.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.1 "><p>Configure the user group to be bound to a service policy.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=user-group"><b><span class="cmdname">user-group</span></b></a> <i><span class="varname">user-group-name</span></i> command.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.6.2.1.2.4.1.3 "><p>Mandatory.</p>
<p>Reference an ACL user group to the value-added service template.</p>
<div class="note" id="EN-US_TASK_0172375020__note1"><span class="notetitle"> NOTE: </span><div class="notebody"><ul id="EN-US_TASK_0172375020__ul1002246355214111"><li id="EN-US_TASK_0172375020__li1527398999214111">You can configure a user group using any of the following methods:<ul id="EN-US_TASK_0172375020__ul2019807556214111"><li id="EN-US_TASK_0172375020__li839868798214111">Configure a user group in a domain.</li><li id="EN-US_TASK_0172375020__li1534044803214111">Configure a user group using a DAA service policy template.</li><li id="EN-US_TASK_0172375020__li1358135820214111">Deliver a user group through the RADIUS server.</li></ul>
<p id="EN-US_TASK_0172375020__p1837635369214111">The user group configured using a DAA service policy template has the highest priority, followed by the one delivered by the RADIUS server, and then the one configured in a domain.</p>
</li><li id="EN-US_TASK_0172375020__li150825882214111">The DAA service tariff level used by users must be the same as the DAA ACL tariff level planned for the user group to which the users belong.</li></ul>
</div></div>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li><li><span>(Optional) Run the <a href="cmdqueryname=radius-server+coa-request+hw-policy-name+daa+same-policy+reply-ack"><b><span class="cmdname">radius-server coa-request hw-policy-name daa same-policy reply-ack</span></b></a> command to enable the device to respond with an ACK message when the RADIUS server delivers the same DAA service policy as that in the domain using the HW-Policy-Name (26-95) attribute in a CoA message in uniform accounting scenarios.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command can take effect only after the <a href="cmdqueryname=accounting-together+enable"><b><span class="cmdname">accounting-together enable</span></b></a> command is run.</p>
</div></div>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=radius-server+coa-request+hw-policy-name+daa+coexist-with-user"><b><span class="cmdname">radius-server coa-request hw-policy-name daa coexist-with-user</span></b></a> command to allow both the HW-Policy-Name (2695) attribute (DAA value-added service attribute) and other user attributes in a CoA message to take effect at the same time.</span></li><li><span>(Optional) Run the <strong><a href="cmdqueryname=value-added-service+tariff-queue-mapping"><b><span class="cmdname">value-added-service tariff-queue-mapping</span></b></a> </strong>{ [ <strong>cs7</strong> ] | [ <strong>cs6</strong> ] | [ <strong>ef</strong> ] | [ <strong>af4</strong> ] | [ <strong>af3</strong> ] | [ <strong>af1</strong> ] | [ <strong>be</strong> ] | [ <strong>af2</strong> ] } #<em>8-8</em> command to configure the mapping between DAA tariff levels and flow queues.</span></li><li><span>(Optional) Run the <a href="cmdqueryname=value-added-service+quota-out"><b><span class="cmdname">value-added-service quota-out</span></b></a> { <strong><span>online</span></strong> | <strong><span>offline</span></strong> } command to configure a policy for the scenario where the real-time accounting response packet sent after the DAA accounting service quota is exhausted does not carry a new quota.</span></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_daa_cfg_0003.html">Configuring DAA
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_daa_cfg_0006.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_daa_cfg_0009.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>