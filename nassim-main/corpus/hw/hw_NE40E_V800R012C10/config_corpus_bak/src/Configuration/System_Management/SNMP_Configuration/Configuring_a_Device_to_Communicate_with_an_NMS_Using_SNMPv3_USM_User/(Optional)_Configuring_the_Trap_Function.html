
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring the Trap Function">
<meta name="abstract" content="The device can be configured to send specified traps to the NMS, which facilitates fault locating. To enhance the trap transmission security, specify parameters for sending traps.">
<meta name="description" content="The device can be configured to send specified traps to the NMS, which facilitates fault locating. To enhance the trap transmission security, specify parameters for sending traps.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0017.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_1013.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,jwx1168690,w00556928,w00437000,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="SNMP">
<meta name="OWNER" content="j00655225">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="j00655225">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361014">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring the Trap Function</title>
</head>
<body><a name="EN-US_TASK_0172361014"></a><a name="EN-US_TASK_0172361014"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring the Trap Function</h1>
<div class="taskbody"><p>The device can be configured to send specified traps to the NMS, which facilitates fault locating. To enhance the trap transmission security, specify parameters for sending traps.</p>
<div class="steps"><a name="EN-US_TASK_0172361014__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172361014__en-us_task_0172360997_steps1042192902214021"><li id="EN-US_TASK_0172361014__en-us_task_0172360997_step316941995214021"><span id="EN-US_TASK_0172361014__en-us_task_0172360997_cmd1084665405214021">Run the <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname534963109214021">system-view</span></b></a> command to enter the system view.</span></li><li id="EN-US_TASK_0172361014__en-us_task_0172360997_step1110310422214021"><span id="EN-US_TASK_0172361014__en-us_task_0172360997_cmd1501853771214021">Run the <a href="cmdqueryname=snmp-agent+trap"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname326016598214021">snmp-agent trap </span></b></a><strong><span id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdparmname516945883">enable</span></strong> command to enable the device to send traps to the NMS.</span></li><li id="EN-US_TASK_0172361014__en-us_task_0172360997_step573321726214021"><span id="EN-US_TASK_0172361014__en-us_task_0172360997_cmd59124793214021">Run the <a href="cmdqueryname=snmp-agent+trap+enable+feature-name"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname1064384289214021">snmp-agent trap enable feature-name</span></b></a> <i><span class="varname" id="EN-US_TASK_0172361014__en-us_task_0172360997_varname1351145946214021">feature-name</span></i> <strong><span id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdparmname1846498709214021">trap-name</span></strong> <i><span class="varname" id="EN-US_TASK_0172361014__en-us_task_0172360997_varname2032932360214021">trap-name</span></i> command to enable the device to send a trap of a specified feature to the NMS.</span><p><div class="note" id="EN-US_TASK_0172361014__en-us_task_0172360997_note607741021214021"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p" id="EN-US_TASK_0172361014__en-us_task_0172360997_p871114815214021">If the <a href="cmdqueryname=snmp-agent+trap+enable"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname2112787730214021">snmp-agent trap enable</span></b></a> command has been run to enable the trap functions of all modules, or the <a href="cmdqueryname=snmp-agent+trap+enable+feature-name"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname980031799214021">snmp-agent trap enable feature-name</span></b></a> command has been run to enable a specific trap function, note the following points:<ul id="EN-US_TASK_0172361014__en-us_task_0172360997_ul525646106214021"><li id="EN-US_TASK_0172361014__en-us_task_0172360997_li277687472214021"><p id="EN-US_TASK_0172361014__en-us_task_0172360997_p611376973214021"><a name="EN-US_TASK_0172361014__en-us_task_0172360997_li277687472214021"></a><a name="en-us_task_0172360997_li277687472214021"></a>To disable the trap functions of all modules, run the <a href="cmdqueryname=snmp-agent+trap+disable"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname1610793699214021">snmp-agent trap disable</span></b></a> command.</p>
</li><li id="EN-US_TASK_0172361014__en-us_task_0172360997_li1176414868214021"><p id="EN-US_TASK_0172361014__en-us_task_0172360997_p122748547214021"><a name="EN-US_TASK_0172361014__en-us_task_0172360997_li1176414868214021"></a><a name="en-us_task_0172360997_li1176414868214021"></a>To restore the trap functions of all modules to the default status, run the <a href="cmdqueryname=undo+snmp-agent+trap+enable"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname794928619214021">undo snmp-agent trap enable</span></b></a> or <a href="cmdqueryname=undo+snmp-agent+trap+disable"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname604619322214021">undo snmp-agent trap disable</span></b></a> command.</p>
</li><li id="EN-US_TASK_0172361014__en-us_task_0172360997_li1715337919214021"><p id="EN-US_TASK_0172361014__en-us_task_0172360997_p1863927305214021"><a name="EN-US_TASK_0172361014__en-us_task_0172360997_li1715337919214021"></a><a name="en-us_task_0172360997_li1715337919214021"></a>To disable the trap function for a specified module, run the <a href="cmdqueryname=undo+snmp-agent+trap+enable+feature-name"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname2060194467214021">undo snmp-agent trap enable feature-name</span></b></a> command.</p>
</li><li id="EN-US_TASK_0172361014__en-us_task_0172360997_li108237208810"><p id="EN-US_TASK_0172361014__en-us_task_0172360997_p28230201689"><a name="EN-US_TASK_0172361014__en-us_task_0172360997_li108237208810"></a><a name="en-us_task_0172360997_li108237208810"></a>To delete all the trap function configurations of a feature in a one-click manner, run the <a href="cmdqueryname=clear+configuration+snmp-agent+trap+enable+feature-name"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname6823192016814">clear configuration snmp-agent trap enable feature-name</span></b></a> command.</p>
</li><li id="EN-US_TASK_0172361014__en-us_task_0172360997_li19887182955819">You can run the <a href="cmdqueryname=display+snmp-agent+trap+all"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname1416024520581">display snmp-agent trap all</span></b></a> command to view the current status and default status of all traps in all features.</li></ul>
</div>
</div></div>
</p></li><li id="EN-US_TASK_0172361014__en-us_task_0172360997_step16375614103410"><span id="EN-US_TASK_0172361014__en-us_task_0172360997_cmd1637571416344">Run either or both of the following commands as required to specify the source IP address for sending traps:</span><p><ul id="EN-US_TASK_0172361014__en-us_task_0172360997_ul129404593343"><li id="EN-US_TASK_0172361014__en-us_task_0172360997_li58031548143713">Run the <a href="cmdqueryname=snmp-agent+trap+source"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname1026351572214021">snmp-agent trap source</span></b></a> <i><span class="varname" id="EN-US_TASK_0172361014__en-us_task_0172360997_varname529223386214021">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172361014__en-us_task_0172360997_varname196873649214021">interface-number</span></i> command to specify a source interface for sending traps. After a source interface is specified, its IP address is used as the source IP address of traps. To ensure device security, you are advised to configure the IP address of the local loopback interface as that of the source interface. The source interface of traps specified on the <span class="keyword" id="EN-US_TASK_0172361014__en-us_task_0172360997_keyword1938844162314">Router</span> must be the same as that specified for the <span class="keyword" id="EN-US_TASK_0172361014__en-us_task_0172360997_keyword1139464119230">Router</span> on the NMS. Otherwise, the NMS does not accept the traps sent from the <span class="keyword" id="EN-US_TASK_0172361014__en-us_task_0172360997_keyword03942417231">Router</span>.</li><li id="EN-US_TASK_0172361014__en-us_task_0172360997_li10940859173412">Run the <a href="cmdqueryname=snmp-agent+trap+source+ipv6"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname1274282371913">snmp-agent trap source ipv6</span></b></a> <i><span class="varname" id="EN-US_TASK_0172361014__en-us_task_0172360997_varname19641236161910">ipv6-address</span></i> [ <strong><span id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdparmname31053390188">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172361014__en-us_task_0172360997_varname16219202821818">vpn-name</span></i> ] command to specify a source IPv6 address for sending traps.</li></ul>
</p></li><li id="EN-US_TASK_0172361014__en-us_task_0172360997_step_dc_vrp_snmp_cfg_000701"><span id="EN-US_TASK_0172361014__en-us_task_0172360997_cmd574213907214021">Run the <a href="cmdqueryname=snmp-agent+trap+source-port"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname2078657410214304">snmp-agent trap source-port</span></b></a> <i><span class="varname" id="EN-US_TASK_0172361014__en-us_task_0172360997_varname34667436214304">port-number</span></i> command to specify the number of the source port that sends traps.</span><p><p id="EN-US_TASK_0172361014__en-us_task_0172360997_p783629367214021">To improve network security, configure a specific source port number for traps. After that, the user terminal's firewall filters packets based on the port number.</p>
</p></li><li id="EN-US_TASK_0172361014__en-us_task_0172360997_step1188930822214021"><span id="EN-US_TASK_0172361014__en-us_task_0172360997_cmd1247938168214021">(Optional) Run the <a href="cmdqueryname=snmp-agent+trap+type"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname769132010214021">snmp-agent trap type</span></b></a> { <strong><span id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdparmname486541450214021">base-trap</span></strong> | <strong><span id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdparmname7816193715287">entity-trap</span></strong> } command to set the format of traps sent to the NMS.</span><p><p id="EN-US_TASK_0172361014__en-us_task_0172360997_p1760253932214021"><span>In VS mode, this command is supported only by the admin VS.</span></p>
</p></li><li id="EN-US_TASK_0172361014__en-us_task_0172360997_step1463599608214021"><span id="EN-US_TASK_0172361014__en-us_task_0172360997_cmd1440918918214021">Run the <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172361014__en-us_task_0172360997_cmdname788908893214021">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0015.html">Configuring a Device to Communicate with an NMS Using SNMPv3 USM User
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_0017.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_snmp_cfg_1013.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>