
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Basic LLDP Functions">
<meta name="abstract" content="This section provides an example to describe how to configure basic LLDP functions to help the NMS obtain information about network topology.">
<meta name="description" content="This section provides an example to describe how to configure basic LLDP functions to help the NMS obtain information about network topology.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_lldp_cfg_0019.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="LLDP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="LLDP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="LLDP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="LLDP">
<meta name="OWNER" content="f00453093">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="f00453093">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000002107746089">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Basic LLDP Functions</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000002107746089"></a><a name="EN-US_TASK_0000002107746089"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Basic LLDP Functions</h1>
<div class="taskbody"><p>This section provides an example to describe how to configure basic LLDP functions to help the NMS obtain information about network topology.</p>
<div class="context"><a name="EN-US_TASK_0000002107746089__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0000002107746089__fig103091844183012">Figure 1</a>, DeviceA and DeviceB are directly connected, the NMS has reachable routes to DeviceA and DeviceB, and SNMP is configured on the devices and NMS.</p>
<p>A network administrator wants to obtain link communication information between DeviceA and DeviceB, and alarms of device function changes to learn details about the network topology and configuration conflicts.</p>
<div class="fignone" id="EN-US_TASK_0000002107746089__fig103091844183012"><a name="EN-US_TASK_0000002107746089__fig103091844183012"></a><a name="fig103091844183012"></a><span class="figcap"><b>Figure 1 </b>Figure Networking diagram for configuring basic LLDP functions</span><br><span><img src="figure/en-us_image_0000002108334053.png"></span></div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, each LLDP interface represents GigabitEthernet <span>0/1/1</span>.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000002107746089__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><div class="p">To obtain the link communication information between DeviceA and DeviceB from the NMS, configure LLDP on the devices. The configuration roadmap is as follows:<ol><li>Enable LLDP globally on DeviceA and DeviceB.</li><li>Configure management IP addresses for DeviceA and DeviceB.</li></ol>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000002107746089__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure IP addresses and routing protocols for interfaces, as shown in <a href="#EN-US_TASK_0000002107746089__fig103091844183012">Figure 1</a>. For details, see Configuration Scripts.</span></li><li><span>Enable LLDP globally on DeviceA and DeviceB.</span><p><p># Configure DeviceA.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>A</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>lldp enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Configure DeviceB.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>B</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>lldp enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>commit</strong></pre>
</p></li><li><span>Configure management IP addresses for DeviceA and DeviceB.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The IP address specified in the <a href="cmdqueryname=lldp+management-address"><b><span class="cmdname">lldp management-address</span></b></a> command is the IP address of the LLDP interface. For details about how to configure an IP address for an LLDP interface, see Configuration Scripts.</p>
</div></div>
<p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>lldp management-address 10.10.10.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>lldp management-address 10.10.10.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>commit</strong></pre>
</p></li><li><span>(Optional) Configure LLDP parameters for DeviceA and DeviceB. These parameters include the interval and delay for sending LLDP packets.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>lldp message-transmission interval 60</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>lldp message-transmission delay 9</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p>The configuration of DeviceB is similar to that of DeviceA. For details, see Configuration Scripts.</p>
</p></li><li><span>(Optional) Enable the LLDP trap function for DeviceA and DeviceB and configure a delay for the devices to send LLDP traps.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>snmp-agent trap enable feature-name lldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>lldp trap-interval 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p>The configuration of DeviceB is similar to that of DeviceA. For details, see Configuration Scripts.</p>
</p></li><li><span>Verify the configuration.</span><p><p># Check whether the LLDP function is enabled, whether an LLDP management address is configured, whether the LLDP alarm function is enabled, and whether values of LLDP attributes are the same as values configured for DeviceA.</p>
<ul><li>Display the local LLDP information of DeviceA.<pre class="screen">&lt;DeviceA&gt; <strong>display lldp local</strong>
System information
--------------------------------------------------------------------------
Chassis type                       :<span>macAddress</span>
Chassis ID                         :00e0-fc21-1220
System name                        :DeviceA                        
System description                 :Huawei Versatile Routing Platform Software
VRP (R) software, Version <span class="keyword">8.230</span> (<span class="keyword">NE40E</span> <span class="keyword">V800R023C00SPC500</span>)
Copyright (C) 2012-2023 Huawei Technologies Co., Ltd.
HUAWEI <span class="keyword">NE40E-M2K</span>

System capabilities supported      :bridge router
System capabilities enabled        :bridge router
LLDP Up time                       :2022/02/26 15:08:28

System configuration
--------------------------------------------------------------------------
<strong>LLDP Status                        :enabled              (default is disabled)         </strong>
<strong>LLDP Message Tx Interval           :60                   (default is 30s) </strong> <strong>            </strong>
LLDP Message Tx Hold Multiplier    :4                   (default is 4)                
LLDP Refresh Delay                 :2                   (default is 2s)               
<strong>LLDP Tx Delay                      :9                   (default is 2s)               </strong>
<strong>LLDP Notification Interval         :10                  (default is 5s)               </strong>
<strong>LLDP Notification Enable           :enabled             (default is disabled)</strong>
<strong>Management Address                 :ipv4: 10.10.10.1 </strong> <strong>                             </strong>
LLDP Fast Message Count            :4                   (default is 4)               
Remote Table Statistics:
--------------------------------------------------------------------------
Remote Table Last Change Time      :0 days,0 hours, 11 minutes,49 seconds
Remote Neighbors Added             :0
Remote Neighbors Deleted           :0
Remote Neighbors Dropped           :0
Remote Neighbors Aged              :0
Total Neighbors                    :2

Port information:
--------------------------------------------------------------------------
Interface Gigabitethernet <span>0/1/1</span>:
LLDP Enable Status                 :txAndRx             (default is disabled)         
Total Neighbors                    :2

Port ID subtype                    :interfaceName
Port ID                            :Gigabitethernet <span>0/1/1</span>                 
Port description                   :

Port and Protocol VLAN ID(PPVID)   :unsupported 
Port VLAN ID(PVID)                 :0
VLAN name of VLAN                  :--
Protocol identity                  :
Auto-negotiation supported         :Yes
Auto-negotiation enabled           :No
OperMau                            :speed (10000) /duplex (Full)
Link aggregation supported         :Yes
Link aggregation enabled           :No
Aggregation port ID                :0
Maximum frame Size                 :9216</pre>
</li><li>Display the LLDP information about neighbors connected to DeviceA.<pre class="screen">&lt;DeviceA&gt; <strong>display lldp neighbor interface gigabitethernet <span>0/1/1</span></strong>
GigabitEthernet <span>0/1/1</span> has 1 neighbor(s):

Neighbor index                     :1
Chassis type                       :macAddress
Chassis ID                         :00e0-fc11-1220                
Port ID type                       :interfaceName
Port ID                            :GigabitEthernet <span>0/1/1</span>                               
Port description                   :--
<strong>System name                        :DeviceB </strong>                    
System description                 :Huawei Versatile Routing Platform Software
VRP (R) software, Version <span class="keyword">8.230</span> (<span class="keyword">NE40E</span> <span class="keyword">V800R023C00SPC500</span>)
Copyright (C) 2012-2023 Huawei Technologies Co., Ltd.
HUAWEI <span class="keyword">NE40E-M2K</span>

System capabilities supported      :bridge router
System capabilities enabled        :bridge router
Management address type            :ipv4
<strong>Management address                 :10.10.10.2</strong>
Expired time                       :104 (s)

Port VLAN ID(PVID)                 :0 
Port And Protocol VLAN ID(PPVID)   :unsupported
VLAN name of VLAN 1                :--
Protocol identity                  :--
Auto-negotiation supported         :Yes
Auto-negotiation enabled           :No
OperMau                            :speed (10000) /duplex (Full)
Link aggregation supported         :Yes
Link aggregation enabled           :No
Aggregation port ID                :0
Maximum frame Size                 :0
Discovered time                    :2022-02-21 11:09:15</pre>
</li></ul>
<p># Check lldp information of DeviceB. For details, see the procedures for DeviceA.</p>
<p></p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000002107746089__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Configuration Scripts</h4><ul><li><p>DeviceA</p>
<pre class="screen">#
 sysname DeviceA
#
lldp enable
lldp transmit interval 60
lldp transmit delay 9
#
interface GigabitEthernet <span>0/1/1</span>
  ip address 10.10.10.1 255.255.255.0
#
lldp management-address  10.10.10.1
snmp-agent trap enable feature-name lldp
lldp trap-interval 10
#
return</pre>
</li><li><p>DeviceB</p>
<pre class="screen">#
 sysname DeviceB
#
lldp enable
lldp transmit interval 60
lldp transmit delay 9
#
interface GigabitEthernet <span>0/1/1</span>
 ip address 10.10.10.2 255.255.255.0
#
lldp management-address  10.10.10.2
snmp-agent trap enable feature-name lldp
lldp trap-interval 10
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_lldp_cfg_0019.html">Configuration Examples for LLDP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
</div>
</div>
</body>
</html>