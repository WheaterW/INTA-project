
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Unicast Negotiation on a 1588 ATR Client">
<meta name="abstract" content="The unicast negotiation function and parameters for a connection between a client and a clock server are configured on the HUAWEI NE40E-M2 series functioning as a 1588 ATR client.">
<meta name="description" content="The unicast negotiation function and parameters for a connection between a client and a clock server are configured on the HUAWEI NE40E-M2 series functioning as a 1588 ATR client.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_atr_cfg_9005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_atr_cfg_9007.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="1588 ATR">
<meta name="featuretype" content="System Management">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="1588 ATR">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="1588 ATR">
<meta name="featuretype" content="System Management">
<meta name="OWNER" content="l00425560,w00845984">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001828917437">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Unicast Negotiation on a 1588 ATR Client</title>
</head>
<body><a name="EN-US_TASK_0000001828917437"></a><a name="EN-US_TASK_0000001828917437"></a>

<div class="articleBoxWithoutHead">





<h1 class="topicTitle-h1">Configuring Unicast Negotiation on a 1588 ATR Client</h1>
<div class="taskbody"><p>The unicast negotiation function and parameters for a connection between a client and a clock server are configured on the <span class="keyword" id="en-us_task_0000001782197718_keyword1248711602214304">HUAWEI NE40E-M2 series</span> functioning as a 1588 ATR client.</p>
<div class="context"><a name="EN-US_TASK_0000001828917437__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_context1385745425214020"><p id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_p763206260214020">ATR, which is an adaptive clock recovery technology, allows a 1588 ATR client to exchange 1588v2 packets with a clock server on a link where a 1588v2-incapable device resides. After receiving 1588v2 packets, the client uses clock information carried in the packets to restore clock information.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001828917437__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_steps1537327170214020"><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_step1276020425214020"><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmd1303584033214020">Run the <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname772166897214020">system-view</span></b></a> command to enter the system view.</span></li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_step377893723214020"><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmd1150658282214020">Run the <a href="cmdqueryname=ptp+enable"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname1034324619214304">ptp enable</span></b></a> command to enable 1588v2 on the device.</span></li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_step662994641214020"><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmd1805770651214020">Run the <a href="cmdqueryname=ptp-adaptive+enable"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname700907280214020">ptp-adaptive enable</span></b></a> command to enable 1588 ATR on the device.</span></li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_step940825488214020"><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmd531883955214020">Run the <a href="cmdqueryname=clock"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname1960760499214304">clock</span></b></a> <strong><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdparmname1276011431214304">source</span></strong> <strong><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdparmname956275347214304">ptp</span></strong> <strong><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdparmname1454065904214304">synchronization enable</span></strong> command to specify a PTP clock to participate in clock source selection.</span></li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_step1907499490214020"><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmd1708046014214020">Run the <a href="cmdqueryname=ptp-adaptive+device-type"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname1295771668214304">ptp-adaptive device-type</span></b></a> <strong><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdparmname1482484468214304">client</span></strong> command to set the 1588 ATR clock working mode of the <span class="keyword" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_keyword1486425361214020">Router</span> to client.</span></li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_step1755081642214020"><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmd1969265549214020">Run the <a href="cmdqueryname=ptp-adaptive+time+profile"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname1249831103214020">ptp-adaptive time profile</span></b></a> command to configure the 1588 ATR device to totally support ITU-T G.8275.2.</span><p><p id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_p2098337029214020">After the <a href="cmdqueryname=ptp-adaptive+time+profile"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname1231716904214020">ptp-adaptive time profile</span></b></a> command is run, the default value of the clock domain changes to 44, and the value range changes to 44â63.</p>
</p></li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_step1831362937214020"><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmd1981253355214020">(Optional) Run the <a href="cmdqueryname=ptp-adaptive+domain"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname145872847214020">ptp-adaptive domain</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_varname1196023378214020">domain-value</span></i> command to configure a 1588 ATR domain for the device.</span><p><div class="note" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_note2099016250214020"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_p18166438114815">The 1588 ATR client and server, which exchange 1588 ATR packets for clock synchronization, must be in the same 1588 ATR clock domain.</p>
</div></div>
</p></li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_step2087276387214020"><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmd1708862564214020">Run the <a href="cmdqueryname=ptp-adaptive+local-ip"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname1952534789214020">ptp-adaptive local-ip</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_varname728761931214020">ip-address</span></i> command to configure a local IP address for the 1588 ATR device to initiate Layer 3 unicast negotiation.</span><p><p id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_p1524773270214020">The clock server's and client's IP addresses uniquely identify a 1588 ATR connection, which is set up by exchanging Layer 3 unicast packets between a client and a clock server during negotiation. Configuring a loopback address as the client's IP address is recommended<span>, not the IP address of the management network port on the device</span>, helping the clock server direct packets to the client.</p>
</p></li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_step646944549214020"><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmd487330282214020">Run the <a href="cmdqueryname=ptp-adaptive"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname836370709214020">ptp-adaptive</span></b></a> { <strong><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdparmname458189067214304">remote-server1-ip</span></strong> | <strong><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdparmname1281568132214304">remote-server2-ip</span></strong> } <i><span class="varname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_varname632964089214304">ip-address</span></i> command to configure the list of remote clock servers for unicast negotiation.</span><p><p id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_p1274487078214020">If multiple clock servers exist on a network, the <span class="keyword" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_keyword14331112775812">Router</span>, functioning as a client, traces a specific clock server based on the clock server's IP address.</p>
<p id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_p986621422214020">Running this command once specifies a clock server, and running it twice specifies a pair of master and slave clock servers.</p>
<p id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_p1255301725214020">If two clock servers are configured, the client sends independent signaling packets to both clock servers. After the negotiation succeeds, the client periodically checks the negotiation result. If the traced server is faulty, the client automatically switches to the other server. If the two servers are normal, the client determines which server to trace by comparing the clock quality levels of the two servers.</p>
</p></li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_step1664264303214020"><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmd315638346214020">Run the <a href="cmdqueryname=ptp-adaptive+atr+unicast-negotiate+enable"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname2099503923214304">ptp-adaptive atr unicast-negotiate enable</span></b></a> command to enable 1588 ATR unicast negotiation on the <span class="keyword" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_keyword1330938237214020">Router</span>.</span></li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_step837678596214020"><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmd2108856887214020">Enable 1588 ATR on the outbound interface used to transmit 1588 ATR packets.</span><p><ol type="a" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_ol923900263214020"><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_li128654828214020"><p id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_p1933145314214020"><a name="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_li128654828214020"></a><a name="en-us_task_0000001782197718_li128654828214020"></a>Run the <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname1638286460214020">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_varname1179713552012">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_varname1879775512010">interface-number</span></i> command to enter the interface view.</p>
</li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_li1456094535214020"><p id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_p2004692180214020"><a name="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_li1456094535214020"></a><a name="en-us_task_0000001782197718_li1456094535214020"></a>Run the <a href="cmdqueryname=ptp-adaptive+atr+enable"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname569302395214020">ptp-adaptive atr enable</span></b></a> command to enable 1588 ATR on the interface.</p>
</li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_li1226397064214020"><p id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_p507410742214020"><a name="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_li1226397064214020"></a><a name="en-us_task_0000001782197718_li1226397064214020"></a>Run the <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname1466221916214020">commit</span></b></a> command to commit the configuration.</p>
</li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_li434763603214020"><p id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_p1332508527214020"><a name="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_li434763603214020"></a><a name="en-us_task_0000001782197718_li434763603214020"></a>Run the <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname694686295214020">quit</span></b></a> command to return to the system view.</p>
</li></ol>
</p></li><li id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_step1946641825214020"><span id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmd295790730214020">Run the <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001828917437__en-us_task_0000001782197718_cmdname810573044214020">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_atr_cfg_9005.html">Configuring 1588 ATR Time Synchronization
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_atr_cfg_9007.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>