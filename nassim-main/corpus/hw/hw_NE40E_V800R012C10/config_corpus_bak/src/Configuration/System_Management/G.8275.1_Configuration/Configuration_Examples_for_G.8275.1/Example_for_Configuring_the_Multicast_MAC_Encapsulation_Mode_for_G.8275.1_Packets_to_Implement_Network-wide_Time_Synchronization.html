
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring the Multicast MAC Encapsulation Mode for G.8275.1 Packets to Implement Network-wide Time Synchronization">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_g82751_cfg_9007.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="G.8275.1">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="G.8275.1">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="G.8275.1">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="OWNER" content="l00425560,w00845984">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001825721065">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/thickbox.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/imageResize.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-migrate-1.2.1.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-ui.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.mousewheel.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/thickbox.js"></script>
<title>Example for Configuring the Multicast MAC Encapsulation Mode for G.8275.1 Packets to Implement Network-wide Time Synchronization</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001825721065"></a><a name="EN-US_TASK_0000001825721065"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring the Multicast MAC Encapsulation Mode for G.8275.1 Packets to Implement Network-wide Time Synchronization</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001825721065__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>G.8275.1 can be used as a time synchronization protocol to transmit time signals of the BITS server on the entire network so that network-wide time synchronization can be achieved for base stations.</p>
<p>On the network shown in <a href="dc_ne_g82751_cfg_9008.html">Example for Configuring the Multicast MAC Encapsulation Mode for G.8275.1 Packets to Implement Network-wide Time Synchronization</a>, the transport network carries the wireless services between gNodeBs, and all transport network nodes support G.8275.1. To ensure time synchronization between G.8275.1-capable base stations and transport network devices, you can configure G.8275.1 and time can be configured use network-wide T-BCs to transmit time information.</p>
<div class="fignone"><span class="figcap"><b>Figure 1 </b>Configuring the multicast MAC encapsulation mode for G.8275.1 packets to implement network-wide time synchronization</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, Interface1, Interface2, and Interface3 represent GE<span>0/1/0</span>, GE<span>0/1/1</span>, and GE<span>0/1/2</span>, respectively.</p>
</div></div>
<p><span><img class="imgResize" src="figure/en-us_image_0000001779081406.png" width="525.3633000000001" title="Click to enlarge"></span></p>
</div>
<p></p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001825721065__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Connect PE1 and PE2 to BITS servers.</p>
</li><li><p>Configure PE1, PE2, Device1, and Device2 as T-BCs to implement network-wide time synchronization.</p>
</li><li>Configure synchronous Ethernet to implement frequency synchronization for a higher synchronization precision.</li><li>Enable performance monitoring on the passive interfaces of Device1 and Device2.</li><li>To prevent reverse synchronization of clock signals, disable Interface 1 on PE1 and PE2 and Interface 2 on Device1 and Device2 from working in the slave state.</li></ol>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Configure devices to use the default multicast MAC encapsulation mode to transmit G.8275.1 packets.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001825721065__1.3.3"></a><a name="1.3.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure PE1 and PE2 to import BITS clock signals through their clock interfaces. The configuration details are not provided here.</span></li><li><span>Configure PE1, PE2, Device1, and Device2 as T-BCs.</span><ol type="a"><li class="substepexpand"><span>Configure PE1.</span><p><pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong>ptp enable</strong>
[*PE1] <strong>ptp profile g-8275-1 enable</strong>
[*PE1] <strong>ptp device-type t-bc</strong>
[*PE1] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong>interface gigabitethernet</strong> <strong><span>0/1/0</span></strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-GigabitEthernet<span>0/1/0</span>] <strong>ptp enable</strong>
[*PE1-GigabitEthernet<span>0/1/0</span>] <strong>clock synchronization enable</strong>
[*PE1-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
</p></li><li class="substepexpand"><span>Configure PE2.</span><p><pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE2] <strong>ptp enable</strong>
[*PE2] <strong>ptp profile g-8275-1 enable</strong>
[*PE2] <strong>ptp device-type t-bc</strong>
[*PE2] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2] <strong>interface gigabitethernet</strong> <strong><span>0/1/0</span></strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-GigabitEthernet<span>0/1/0</span>] <strong>ptp enable</strong>
[*PE2-GigabitEthernet<span>0/1/0</span>] <strong>clock synchronization enable</strong>
[*PE2-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
</p></li><li class="substepexpand"><span>Configure Device1.</span><p><pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>Device1] <strong>ptp enable</strong>
[*Device1] <strong>ptp profile g-8275-1 enable</strong>
[*Device1] <strong>ptp device-type t-bc</strong>
[*Device1] <strong>ptp passive-measure enable</strong>
[*Device1] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device1] <strong>interface gigabitethernet</strong> <strong><span>0/1/0</span></strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device1-GigabitEthernet<span>0/1/0</span>] <strong>ptp enable</strong>
[*Device1-GigabitEthernet<span>0/1/0</span>] <strong>ptp notslave disable</strong>
[*Device1-GigabitEthernet<span>0/1/0</span>] <strong>clock synchronization enable</strong>
[*Device1-GigabitEthernet<span>0/1/0</span>] <strong>clock priority 1</strong><strong>0</strong>
[*Device1-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device1] <strong>interface gigabitethernet</strong> <strong><span>0/1/1</span></strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device1-GigabitEthernet<span>0/1/1</span>] <strong>ptp enable</strong>
[*Device1-GigabitEthernet<span>0/1/1</span>] <strong>clock synchronization enable</strong>
[*Device1-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device1-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device1] <strong>interface gigabitethernet</strong> <strong><span>0/1/2</span></strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device1-GigabitEthernet<span>0/1/2</span>] <strong>ptp enable</strong>
[*Device1-GigabitEthernet<span>0/1/2</span>] <strong>ptp notslave disable</strong>
[*Device1-GigabitEthernet<span>0/1/2</span>] <strong>clock synchronization enable</strong>
[*Device1-GigabitEthernet<span>0/1/2</span>] <strong>clock priority 2</strong><strong>0</strong>
[*Device1-GigabitEthernet<span>0/1/2</span>] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device1-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
</p></li><li class="substepexpand"><span>Configure Device2.</span><p><pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>Device2] <strong>ptp enable</strong>
[*Device2] <strong>ptp profile g-8275-1 enable</strong>
[*Device2] <strong>ptp device-type t-bc</strong>
[*Device2] <strong>ptp passive-measure enable</strong>
[*Device2] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device2] <strong>interface gigabitethernet</strong> <strong><span>0/1/0</span></strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device2-GigabitEthernet<span>0/1/0</span>] <strong>ptp enable</strong>
[*Device2-GigabitEthernet<span>0/1/0</span>] <strong>ptp notslave disable</strong>
[*Device2-GigabitEthernet<span>0/1/0</span>] <strong>clock synchronization enable</strong>
[*Device2-GigabitEthernet<span>0/1/0</span>] <strong>clock priority 1</strong><strong>0</strong>
[*Device2-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device2] <strong>interface gigabitethernet</strong> <strong><span>0/1/1</span></strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device2-GigabitEthernet<span>0/1/1</span>] <strong>ptp enable</strong>
[*Device2-GigabitEthernet<span>0/1/1</span>] <strong>clock synchronization enable</strong>
[*Device2-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device2-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device2] <strong>interface gigabitethernet</strong> <strong><span>0/1/2</span></strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device2-GigabitEthernet<span>0/1/2</span>] <strong>ptp enable</strong>
[*Device2-GigabitEthernet<span>0/1/2</span>] <strong>ptp notslave disable</strong>
[*Device2-GigabitEthernet<span>0/1/2</span>] <strong>clock synchronization enable</strong>
[*Device2-GigabitEthernet<span>0/1/2</span>] <strong>clock priority 2</strong><strong>0</strong>
[*Device2-GigabitEthernet<span>0/1/2</span>] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>Device2-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
</p></li></ol>
</li><li><span>Configure base stations to receive G.8275.1 packets from Device1 and Device2. The configuration details are not provided here.</span></li><li><span>Verify the configuration.</span><p><p>After completing the configurations, run the <strong>display ptp all</strong> command to check the running status of G.8275.1. The following example uses the command output on Device1. The command output shows that the G.8275.1 interface GE <span>0/1/0</span> on Device1 is working in the Slave state, the grandmaster clock ID is 0a05d7fffe341500, and the parent clock ID is 0a05d7fffe341500. Device1 has synchronized with the master clock source.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>Device1] <strong>display ptp all</strong>
Device config info
  ------------------------------------------------------------------------------
  PTP state         :enabled              Domain  value      :24
  Slave only        :-                    Device type        :T-BC
  Set port state    :-                    Local clock ID     :0aa1c6fffe699700
  Acl               :no                   Virtual clock ID   :no
  Acr               :-                    Time lock success  :yes
  Asymmetry measure :disable              Passive measure    :enable
  PTP profile       :G.8275.1 V2.0
  Send GM WTR       :no
 
  BMC run info
  ------------------------------------------------------------------------------
  Grand clock ID    :0a05d7fffe341500               
  Receive number    :GigabitEthernet<span>0/1/0</span>                                                                                           
  Parent clock ID   :0a05d7fffe341500               
  Parent portnumber :35585                          
  Priority1         :128                 Priority2           :128               
  Step removed      :0                   Clock accuracy      :0xfe                                                                
  Clock class       :6                   Time Source         :0xa0                                                                  
  UTC Offset        :35                  UTC Offset Valid    :True                                                                 
  Timescale         :PTP                 Time traceable      :True                                                                 
  Leap              :None                Frequency traceable :True                                                                 
  Offset scaled     :0xffff              Sync uncertain      :True
                                                                                                                                    
  Port info                                                                                                                         
  Name                        State        Delay-mech Ann-timeout Type   Domain                                                     
  ------------------------------------------------------------------------------                                                    
  GigabitEthernet<span>0/1/0</span>        <strong>slave       </strong>delay      3           T-BC   24      
 
  Time Performance Statistics(ns): Slot <em>X</em>  Card <em>X </em> Port <em>X </em>
  ------------------------------------------------------------------------------
  Realtime(T2-T1)   :1104                    Pathdelay     :0 
  Max(T2-T1)        :1110
  Min(T2-T1)        :1100
  Realtime(T4-T3)   :998 
  Max(T4-T3)        :428 
  Min(T4-T3)        :-715

  Offset from master:-281
 
  Clock source info
  Clock     Pri  Pri2 Accuracy Class TimeSrc  Signal Switch Direction In-Status
  ------------------------------------------------------------------------------
  local     128  128  0xFE     248   0xa0     -      -      -         -
  bits1/11  128  128  0x20     6     0x20     1pps   off    in/-      normal
  bits1/12  128  128  0x20     6     0x20     1pps   off    in/-      normal</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001825721065__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>PE1 configuration file</p>
<pre class="screen">#
sysname PE1
#
ptp enable
ptp profile g-8275-1 enable
ptp device-type t-bc
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 clock synchronization enable 
 ptp enable
#
return</pre>
</li><li><p>PE2 configuration file</p>
<pre class="screen">#
sysname PE2
#
ptp enable
ptp profile g-8275-1 enable
ptp device-type t-bc
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 clock synchronization enable 
 ptp enable
#
return</pre>
</li><li><p>Device1 configuration file</p>
<pre class="screen">#
sysname Device1
#
ptp enable
ptp profile g-8275-1 enable
ptp device-type t-bc
ptp passive-measure enable
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ptp notslave disable
 clock synchronization enable
 clock priority 10
 ptp enable
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 clock synchronization enable
 ptp enable
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ptp notslave disable
 clock synchronization enable
 clock priority 20
 ptp enable
#
return</pre>
</li><li><p>Device2 configuration file</p>
<pre class="screen">#
sysname Device2
#
ptp enable
ptp profile g-8275-1 enable
ptp device-type t-bc
ptp passive-measure enable
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ptp notslave disable
 clock synchronization enable
 clock priority 10
 ptp enable
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 clock synchronization enable
 ptp enable
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ptp notslave disable
 clock synchronization enable
 clock priority 20
 ptp enable
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_g82751_cfg_9007.html">Configuration Examples for G.8275.1
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
</div>
</div>

<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>