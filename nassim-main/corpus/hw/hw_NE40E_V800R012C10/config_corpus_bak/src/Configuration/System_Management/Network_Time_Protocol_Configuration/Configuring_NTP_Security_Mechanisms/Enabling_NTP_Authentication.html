
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling NTP Authentication">
<meta name="abstract" content="Both the NTP server and the NTP client must be enabled with NTP authentication and configured with the same authentication key, and the authentication key must be declared as reliable on the client side. Otherwise, NTP authentication will fail.">
<meta name="description" content="Both the NTP server and the NTP client must be enabled with NTP authentication and configured with the same authentication key, and the authentication key must be declared as reliable on the client side. Otherwise, NTP authentication will fail.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ntp_cfg_0012.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ntp_cfg_0013.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ntp_cfg_0016.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,jwx1168690,w00556928,w00437000,w00845984,w00606909,l00455378,ntpvrp">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="NTP">
<meta name="featuretype" content="System Management">
<meta name="OWNER" content="w00845984,lwx1238418,l00587852">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001847647753">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Enabling NTP Authentication</title>
</head>
<body><a name="EN-US_TASK_0000001847647753"></a><a name="EN-US_TASK_0000001847647753"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling NTP Authentication</h1>
<div class="taskbody"><p>Both the NTP server and the NTP client must be enabled with NTP authentication and configured with the same authentication key, and the authentication key must be declared as reliable on the client side. Otherwise, NTP authentication will fail.</p>
<div class="context"><a name="EN-US_TASK_0000001847647753__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>NTP client synchronizes to authenticated NTP servers to ensure that time service is reliable across the network. You must enable NTP authentication, and then configure basic NTP functions and specify the authentication key. Otherwise, the NTP authentication fails.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001847647753__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ntp-service+authentication+enable"><b><span class="cmdname">ntp-service authentication enable</span></b></a></span><p><p>NTP authentication is enabled.</p>
</p></li><li><span>Run <a href="cmdqueryname=ntp-service+authentication-keyid"><b><span class="cmdname">ntp-service authentication-keyid</span></b></a> <i><span class="varname">key-Id</span></i> <strong><span>authentication-mode</span></strong> { <strong><span>md5</span></strong> | <strong><span>hmac-sha256</span></strong> | <strong><span>aes-128-cmac</span></strong> | <strong><span>aes-256-cmac</span></strong> } { <i><span class="varname">password</span></i> | <strong><span>cipher</span></strong> <i><span class="varname">password</span></i> }</span><p><p>The NTP authentication key is configured.</p>
</p><p><p>Using the HMAC-SHA256 algorithm for NTP key authentication is recommended.</p>
<div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>The algorithm specified using <strong>md5</strong> in the command is a weak security algorithm, which is not recommended. To use such an algorithm, run the <strong>undo crypto weak-algorithm disable</strong> command to enable the weak security algorithm function. To avoid security risks, you are advised to use a more secure algorithm.</p>
</div></div>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=ntp-service+authentication-password+complexity-check+enable"><b><span class="cmdname">ntp-service authentication-password complexity-check enable</span></b></a></span><p><p>Password strength check is enabled for NTP authentication.</p>
</p><p><p>After this command is configured, the system automatically verifies the strength of an entered password. Only the password that meets the strength requirements can be configured. You are advised to run this command on a network that requires high security.</p>
</p></li><li><span>Run <a href="cmdqueryname=ntp-service+reliable+authentication-keyid"><b><span class="cmdname">ntp-service reliable authentication-keyid</span></b></a> <i><span class="varname">key-id</span></i></span><p><p>The authentication key is declared to be reliable.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>A device that attempts to synchronize its clock must declare its key as reliable.</p>
</li><li><p>When the client synchronizes to an authenticated server, the authentication key must be declared as reliable only on the client side.</p>
</li></ul>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ntp_cfg_0012.html">Configuring NTP Security Mechanisms
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ntp_cfg_0013.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ntp_cfg_0016.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>